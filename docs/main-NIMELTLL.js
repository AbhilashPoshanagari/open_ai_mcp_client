var Sbe=Object.create;var dS=Object.defineProperty,kbe=Object.defineProperties,Tbe=Object.getOwnPropertyDescriptor,Abe=Object.getOwnPropertyDescriptors,Obe=Object.getOwnPropertyNames,uS=Object.getOwnPropertySymbols,zG=Object.getPrototypeOf,AL=Object.prototype.hasOwnProperty,BG=Object.prototype.propertyIsEnumerable,Mbe=Reflect.get;var ug=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),Dbe=e=>{throw TypeError(e)};var jG=(e,t,n)=>t in e?dS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m=(e,t)=>{for(var n in t||={})AL.call(t,n)&&jG(e,n,t[n]);if(uS)for(var n of uS(t))BG.call(t,n)&&jG(e,n,t[n]);return e},b=(e,t)=>kbe(e,Abe(t));var se=(e,t)=>{var n={};for(var r in e)AL.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&uS)for(var r of uS(e))t.indexOf(r)<0&&BG.call(e,r)&&(n[r]=e[r]);return n};var ne=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Kd=(e,t)=>{for(var n in t)dS(e,n,{get:t[n],enumerable:!0})},Pbe=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Obe(t))!AL.call(e,i)&&i!==n&&dS(e,i,{get:()=>t[i],enumerable:!(r=Tbe(t,i))||r.enumerable});return e};var _c=(e,t,n)=>(n=e!=null?Sbe(zG(e)):{},Pbe(t||!e||!e.__esModule?dS(n,"default",{value:e,enumerable:!0}):n,e));var fi=(e,t,n)=>Mbe(zG(e),n,t);var y=(e,t,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(u){i(u)}},s=c=>{try{a(n.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(e,t)).next())}),z=function(e,t){this[0]=e,this[1]=t},he=(e,t,n)=>{var r=(s,a,c,u)=>{try{var d=n[s](a),f=(a=d.value)instanceof z,g=d.done;Promise.resolve(f?a[0]:a).then(h=>f?r(s==="return"?s:"next",a[1]?{done:h.done,value:h.value}:h,c,u):c({value:h,done:g})).catch(h=>r("throw",h,c,u))}catch(h){u(h)}},i=s=>o[s]=a=>new Promise((c,u)=>r(s,a,c,u)),o={};return n=n.apply(e,t),o[ug("asyncIterator")]=()=>o,i("next"),i("throw"),i("return"),o},mn=e=>{var t=e[ug("asyncIterator")],n=!1,r,i={};return t==null?(t=e[ug("iterator")](),r=o=>i[o]=s=>t[o](s)):(t=t.call(e),r=o=>i[o]=s=>{if(n){if(n=!1,o==="throw")throw s;return s}return n=!0,{done:!1,value:new z(new Promise(a=>{var c=t[o](s);c instanceof Object||Dbe("Object expected"),a(c)}),1)}}),i[ug("iterator")]=()=>i,r("next"),"throw"in t?r("throw"):i.throw=o=>{throw o},"return"in t&&r("return"),i},ue=(e,t,n)=>(t=e[ug("asyncIterator")])?t.call(e):(e=e[ug("iterator")](),t={},n=(r,i)=>(i=e[r])&&(t[r]=o=>new Promise((s,a,c)=>(o=i.call(e,o),c=o.done,Promise.resolve(o.value).then(u=>s({value:u,done:c}),a)))),n("next"),n("return"),t);var Vx=ne(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.regexpCode=Bn.getEsmExportName=Bn.getProperty=Bn.safeStringify=Bn.stringify=Bn.strConcat=Bn.addCodeArg=Bn.str=Bn._=Bn.nil=Bn._Code=Bn.Name=Bn.IDENTIFIER=Bn._CodeOrName=void 0;var Bx=class{};Bn._CodeOrName=Bx;Bn.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var zf=class extends Bx{constructor(t){if(super(),!Bn.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};Bn.Name=zf;var Ya=class extends Bx{constructor(t){super(),this._items=typeof t=="string"?[t]:t}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let t=this._items[0];return t===""||t==='""'}get str(){var t;return(t=this._str)!==null&&t!==void 0?t:this._str=this._items.reduce((n,r)=>`${n}${r}`,"")}get names(){var t;return(t=this._names)!==null&&t!==void 0?t:this._names=this._items.reduce((n,r)=>(r instanceof zf&&(n[r.str]=(n[r.str]||0)+1),n),{})}};Bn._Code=Ya;Bn.nil=new Ya("");function Tne(e,...t){let n=[e[0]],r=0;for(;r<t.length;)dV(n,t[r]),n.push(e[++r]);return new Ya(n)}Bn._=Tne;var uV=new Ya("+");function Ane(e,...t){let n=[Ux(e[0])],r=0;for(;r<t.length;)n.push(uV),dV(n,t[r]),n.push(uV,Ux(e[++r]));return pNe(n),new Ya(n)}Bn.str=Ane;function dV(e,t){t instanceof Ya?e.push(...t._items):t instanceof zf?e.push(t):e.push(hNe(t))}Bn.addCodeArg=dV;function pNe(e){let t=1;for(;t<e.length-1;){if(e[t]===uV){let n=mNe(e[t-1],e[t+1]);if(n!==void 0){e.splice(t-1,3,n);continue}e[t++]="+"}t++}}function mNe(e,t){if(t==='""')return e;if(e==='""')return t;if(typeof e=="string")return t instanceof zf||e[e.length-1]!=='"'?void 0:typeof t!="string"?`${e.slice(0,-1)}${t}"`:t[0]==='"'?e.slice(0,-1)+t.slice(1):void 0;if(typeof t=="string"&&t[0]==='"'&&!(e instanceof zf))return`"${e}${t.slice(1)}`}function fNe(e,t){return t.emptyStr()?e:e.emptyStr()?t:Ane`${e}${t}`}Bn.strConcat=fNe;function hNe(e){return typeof e=="number"||typeof e=="boolean"||e===null?e:Ux(Array.isArray(e)?e.join(","):e)}function gNe(e){return new Ya(Ux(e))}Bn.stringify=gNe;function Ux(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}Bn.safeStringify=Ux;function _Ne(e){return typeof e=="string"&&Bn.IDENTIFIER.test(e)?new Ya(`.${e}`):Tne`[${e}]`}Bn.getProperty=_Ne;function yNe(e){if(typeof e=="string"&&Bn.IDENTIFIER.test(e))return new Ya(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)}Bn.getEsmExportName=yNe;function vNe(e){return new Ya(e.toString())}Bn.regexpCode=vNe});var fV=ne(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});Qs.ValueScope=Qs.ValueScopeName=Qs.Scope=Qs.varKinds=Qs.UsedValueState=void 0;var Ys=Vx(),pV=class extends Error{constructor(t){super(`CodeGen: "code" for ${t} not defined`),this.value=t.value}},eD=(function(e){return e[e.Started=0]="Started",e[e.Completed=1]="Completed",e})(eD||(Qs.UsedValueState=eD={}));Qs.varKinds={const:new Ys.Name("const"),let:new Ys.Name("let"),var:new Ys.Name("var")};var tD=class{constructor({prefixes:t,parent:n}={}){this._names={},this._prefixes=t,this._parent=n}toName(t){return t instanceof Ys.Name?t:this.name(t)}name(t){return new Ys.Name(this._newName(t))}_newName(t){let n=this._names[t]||this._nameGroup(t);return`${t}${n.index++}`}_nameGroup(t){var n,r;if(!((r=(n=this._parent)===null||n===void 0?void 0:n._prefixes)===null||r===void 0)&&r.has(t)||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix "${t}" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}};Qs.Scope=tD;var nD=class extends Ys.Name{constructor(t,n){super(n),this.prefix=t}setValue(t,{property:n,itemIndex:r}){this.value=t,this.scopePath=(0,Ys._)`.${new Ys.Name(n)}[${r}]`}};Qs.ValueScopeName=nD;var bNe=(0,Ys._)`\n`,mV=class extends tD{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts=b(m({},t),{_n:t.lines?bNe:Ys.nil})}get(){return this._scope}name(t){return new nD(t,this._newName(t))}value(t,n){var r;if(n.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let i=this.toName(t),{prefix:o}=i,s=(r=n.key)!==null&&r!==void 0?r:n.ref,a=this._values[o];if(a){let d=a.get(s);if(d)return d}else a=this._values[o]=new Map;a.set(s,i);let c=this._scope[o]||(this._scope[o]=[]),u=c.length;return c[u]=n.ref,i.setValue(n,{property:o,itemIndex:u}),i}getValue(t,n){let r=this._values[t];if(r)return r.get(n)}scopeRefs(t,n=this._values){return this._reduceValues(n,r=>{if(r.scopePath===void 0)throw new Error(`CodeGen: name "${r}" has no value`);return(0,Ys._)`${t}${r.scopePath}`})}scopeCode(t=this._values,n,r){return this._reduceValues(t,i=>{if(i.value===void 0)throw new Error(`CodeGen: name "${i}" has no value`);return i.value.code},n,r)}_reduceValues(t,n,r={},i){let o=Ys.nil;for(let s in t){let a=t[s];if(!a)continue;let c=r[s]=r[s]||new Map;a.forEach(u=>{if(c.has(u))return;c.set(u,eD.Started);let d=n(u);if(d){let f=this.opts.es5?Qs.varKinds.var:Qs.varKinds.const;o=(0,Ys._)`${o}${f} ${u} = ${d};${this.opts._n}`}else if(d=i?.(u))o=(0,Ys._)`${o}${d}${this.opts._n}`;else throw new pV(u);c.set(u,eD.Completed)})}return o}};Qs.ValueScope=mV});var _n=ne(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.or=bn.and=bn.not=bn.CodeGen=bn.operators=bn.varKinds=bn.ValueScopeName=bn.ValueScope=bn.Scope=bn.Name=bn.regexpCode=bn.stringify=bn.getProperty=bn.nil=bn.strConcat=bn.str=bn._=void 0;var Rn=Vx(),Dc=fV(),Lp=Vx();Object.defineProperty(bn,"_",{enumerable:!0,get:function(){return Lp._}});Object.defineProperty(bn,"str",{enumerable:!0,get:function(){return Lp.str}});Object.defineProperty(bn,"strConcat",{enumerable:!0,get:function(){return Lp.strConcat}});Object.defineProperty(bn,"nil",{enumerable:!0,get:function(){return Lp.nil}});Object.defineProperty(bn,"getProperty",{enumerable:!0,get:function(){return Lp.getProperty}});Object.defineProperty(bn,"stringify",{enumerable:!0,get:function(){return Lp.stringify}});Object.defineProperty(bn,"regexpCode",{enumerable:!0,get:function(){return Lp.regexpCode}});Object.defineProperty(bn,"Name",{enumerable:!0,get:function(){return Lp.Name}});var aD=fV();Object.defineProperty(bn,"Scope",{enumerable:!0,get:function(){return aD.Scope}});Object.defineProperty(bn,"ValueScope",{enumerable:!0,get:function(){return aD.ValueScope}});Object.defineProperty(bn,"ValueScopeName",{enumerable:!0,get:function(){return aD.ValueScopeName}});Object.defineProperty(bn,"varKinds",{enumerable:!0,get:function(){return aD.varKinds}});bn.operators={GT:new Rn._Code(">"),GTE:new Rn._Code(">="),LT:new Rn._Code("<"),LTE:new Rn._Code("<="),EQ:new Rn._Code("==="),NEQ:new Rn._Code("!=="),NOT:new Rn._Code("!"),OR:new Rn._Code("||"),AND:new Rn._Code("&&"),ADD:new Rn._Code("+")};var od=class{optimizeNodes(){return this}optimizeNames(t,n){return this}},hV=class extends od{constructor(t,n,r){super(),this.varKind=t,this.name=n,this.rhs=r}render({es5:t,_n:n}){let r=t?Dc.varKinds.var:this.varKind,i=this.rhs===void 0?"":` = ${this.rhs}`;return`${r} ${this.name}${i};`+n}optimizeNames(t,n){if(t[this.name.str])return this.rhs&&(this.rhs=my(this.rhs,t,n)),this}get names(){return this.rhs instanceof Rn._CodeOrName?this.rhs.names:{}}},iD=class extends od{constructor(t,n,r){super(),this.lhs=t,this.rhs=n,this.sideEffects=r}render({_n:t}){return`${this.lhs} = ${this.rhs};`+t}optimizeNames(t,n){if(!(this.lhs instanceof Rn.Name&&!t[this.lhs.str]&&!this.sideEffects))return this.rhs=my(this.rhs,t,n),this}get names(){let t=this.lhs instanceof Rn.Name?{}:m({},this.lhs.names);return sD(t,this.rhs)}},gV=class extends iD{constructor(t,n,r,i){super(t,r,i),this.op=n}render({_n:t}){return`${this.lhs} ${this.op}= ${this.rhs};`+t}},_V=class extends od{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`${this.label}:`+t}},yV=class extends od{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`break${this.label?` ${this.label}`:""};`+t}},vV=class extends od{constructor(t){super(),this.error=t}render({_n:t}){return`throw ${this.error};`+t}get names(){return this.error.names}},bV=class extends od{constructor(t){super(),this.code=t}render({_n:t}){return`${this.code};`+t}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(t,n){return this.code=my(this.code,t,n),this}get names(){return this.code instanceof Rn._CodeOrName?this.code.names:{}}},Hx=class extends od{constructor(t=[]){super(),this.nodes=t}render(t){return this.nodes.reduce((n,r)=>n+r.render(t),"")}optimizeNodes(){let{nodes:t}=this,n=t.length;for(;n--;){let r=t[n].optimizeNodes();Array.isArray(r)?t.splice(n,1,...r):r?t[n]=r:t.splice(n,1)}return t.length>0?this:void 0}optimizeNames(t,n){let{nodes:r}=this,i=r.length;for(;i--;){let o=r[i];o.optimizeNames(t,n)||(wNe(t,o.names),r.splice(i,1))}return r.length>0?this:void 0}get names(){return this.nodes.reduce((t,n)=>Bf(t,n.names),{})}},sd=class extends Hx{render(t){return"{"+t._n+super.render(t)+"}"+t._n}},wV=class extends Hx{},xV=(()=>{class e extends sd{}return e.kind="else",e})(),rD=(()=>{class e extends sd{constructor(n,r){super(r),this.condition=n}render(n){let r=`if(${this.condition})`+super.render(n);return this.else&&(r+="else "+this.else.render(n)),r}optimizeNodes(){super.optimizeNodes();let n=this.condition;if(n===!0)return this.nodes;let r=this.else;if(r){let i=r.optimizeNodes();r=this.else=Array.isArray(i)?new xV(i):i}if(r)return n===!1?r instanceof e?r:r.nodes:this.nodes.length?this:new e(Rne(n),r instanceof e?[r]:r.nodes);if(!(n===!1||!this.nodes.length))return this}optimizeNames(n,r){var i;if(this.else=(i=this.else)===null||i===void 0?void 0:i.optimizeNames(n,r),!!(super.optimizeNames(n,r)||this.else))return this.condition=my(this.condition,n,r),this}get names(){let n=super.names;return sD(n,this.condition),this.else&&Bf(n,this.else.names),n}}return e.kind="if",e})(),cD=(()=>{class e extends sd{}return e.kind="for",e})(),CV=class extends cD{constructor(t){super(),this.iteration=t}render(t){return`for(${this.iteration})`+super.render(t)}optimizeNames(t,n){if(super.optimizeNames(t,n))return this.iteration=my(this.iteration,t,n),this}get names(){return Bf(super.names,this.iteration.names)}},EV=class extends cD{constructor(t,n,r,i){super(),this.varKind=t,this.name=n,this.from=r,this.to=i}render(t){let n=t.es5?Dc.varKinds.var:this.varKind,{name:r,from:i,to:o}=this;return`for(${n} ${r}=${i}; ${r}<${o}; ${r}++)`+super.render(t)}get names(){let t=sD(super.names,this.from);return sD(t,this.to)}},oD=class extends cD{constructor(t,n,r,i){super(),this.loop=t,this.varKind=n,this.name=r,this.iterable=i}render(t){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(t)}optimizeNames(t,n){if(super.optimizeNames(t,n))return this.iterable=my(this.iterable,t,n),this}get names(){return Bf(super.names,this.iterable.names)}},One=(()=>{class e extends sd{constructor(n,r,i){super(),this.name=n,this.args=r,this.async=i}render(n){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(n)}}return e.kind="func",e})(),Mne=(()=>{class e extends Hx{render(n){return"return "+super.render(n)}}return e.kind="return",e})(),IV=class extends sd{render(t){let n="try"+super.render(t);return this.catch&&(n+=this.catch.render(t)),this.finally&&(n+=this.finally.render(t)),n}optimizeNodes(){var t,n;return super.optimizeNodes(),(t=this.catch)===null||t===void 0||t.optimizeNodes(),(n=this.finally)===null||n===void 0||n.optimizeNodes(),this}optimizeNames(t,n){var r,i;return super.optimizeNames(t,n),(r=this.catch)===null||r===void 0||r.optimizeNames(t,n),(i=this.finally)===null||i===void 0||i.optimizeNames(t,n),this}get names(){let t=super.names;return this.catch&&Bf(t,this.catch.names),this.finally&&Bf(t,this.finally.names),t}},Dne=(()=>{class e extends sd{constructor(n){super(),this.error=n}render(n){return`catch(${this.error})`+super.render(n)}}return e.kind="catch",e})(),Pne=(()=>{class e extends sd{render(n){return"finally"+super.render(n)}}return e.kind="finally",e})(),SV=class{constructor(t,n={}){this._values={},this._blockStarts=[],this._constants={},this.opts=b(m({},n),{_n:n.lines?`
`:""}),this._extScope=t,this._scope=new Dc.Scope({parent:t}),this._nodes=[new wV]}toString(){return this._root.render(this.opts)}name(t){return this._scope.name(t)}scopeName(t){return this._extScope.name(t)}scopeValue(t,n){let r=this._extScope.value(t,n);return(this._values[r.prefix]||(this._values[r.prefix]=new Set)).add(r),r}getScopeValue(t,n){return this._extScope.getValue(t,n)}scopeRefs(t){return this._extScope.scopeRefs(t,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(t,n,r,i){let o=this._scope.toName(n);return r!==void 0&&i&&(this._constants[o.str]=r),this._leafNode(new hV(t,o,r)),o}const(t,n,r){return this._def(Dc.varKinds.const,t,n,r)}let(t,n,r){return this._def(Dc.varKinds.let,t,n,r)}var(t,n,r){return this._def(Dc.varKinds.var,t,n,r)}assign(t,n,r){return this._leafNode(new iD(t,n,r))}add(t,n){return this._leafNode(new gV(t,bn.operators.ADD,n))}code(t){return typeof t=="function"?t():t!==Rn.nil&&this._leafNode(new bV(t)),this}object(...t){let n=["{"];for(let[r,i]of t)n.length>1&&n.push(","),n.push(r),(r!==i||this.opts.es5)&&(n.push(":"),(0,Rn.addCodeArg)(n,i));return n.push("}"),new Rn._Code(n)}if(t,n,r){if(this._blockNode(new rD(t)),n&&r)this.code(n).else().code(r).endIf();else if(n)this.code(n).endIf();else if(r)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(t){return this._elseNode(new rD(t))}else(){return this._elseNode(new xV)}endIf(){return this._endBlockNode(rD,xV)}_for(t,n){return this._blockNode(t),n&&this.code(n).endFor(),this}for(t,n){return this._for(new CV(t),n)}forRange(t,n,r,i,o=this.opts.es5?Dc.varKinds.var:Dc.varKinds.let){let s=this._scope.toName(t);return this._for(new EV(o,s,n,r),()=>i(s))}forOf(t,n,r,i=Dc.varKinds.const){let o=this._scope.toName(t);if(this.opts.es5){let s=n instanceof Rn.Name?n:this.var("_arr",n);return this.forRange("_i",0,(0,Rn._)`${s}.length`,a=>{this.var(o,(0,Rn._)`${s}[${a}]`),r(o)})}return this._for(new oD("of",i,o,n),()=>r(o))}forIn(t,n,r,i=this.opts.es5?Dc.varKinds.var:Dc.varKinds.const){if(this.opts.ownProperties)return this.forOf(t,(0,Rn._)`Object.keys(${n})`,r);let o=this._scope.toName(t);return this._for(new oD("in",i,o,n),()=>r(o))}endFor(){return this._endBlockNode(cD)}label(t){return this._leafNode(new _V(t))}break(t){return this._leafNode(new yV(t))}return(t){let n=new Mne;if(this._blockNode(n),this.code(t),n.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Mne)}try(t,n,r){if(!n&&!r)throw new Error('CodeGen: "try" without "catch" and "finally"');let i=new IV;if(this._blockNode(i),this.code(t),n){let o=this.name("e");this._currNode=i.catch=new Dne(o),n(o)}return r&&(this._currNode=i.finally=new Pne,this.code(r)),this._endBlockNode(Dne,Pne)}throw(t){return this._leafNode(new vV(t))}block(t,n){return this._blockStarts.push(this._nodes.length),t&&this.code(t).endBlock(n),this}endBlock(t){let n=this._blockStarts.pop();if(n===void 0)throw new Error("CodeGen: not in self-balancing block");let r=this._nodes.length-n;if(r<0||t!==void 0&&r!==t)throw new Error(`CodeGen: wrong number of nodes: ${r} vs ${t} expected`);return this._nodes.length=n,this}func(t,n=Rn.nil,r,i){return this._blockNode(new One(t,n,r)),i&&this.code(i).endFunc(),this}endFunc(){return this._endBlockNode(One)}optimize(t=1){for(;t-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(t){return this._currNode.nodes.push(t),this}_blockNode(t){this._currNode.nodes.push(t),this._nodes.push(t)}_endBlockNode(t,n){let r=this._currNode;if(r instanceof t||n&&r instanceof n)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${n?`${t.kind}/${n.kind}`:t.kind}"`)}_elseNode(t){let n=this._currNode;if(!(n instanceof rD))throw new Error('CodeGen: "else" without "if"');return this._currNode=n.else=t,this}get _root(){return this._nodes[0]}get _currNode(){let t=this._nodes;return t[t.length-1]}set _currNode(t){let n=this._nodes;n[n.length-1]=t}};bn.CodeGen=SV;function Bf(e,t){for(let n in t)e[n]=(e[n]||0)+(t[n]||0);return e}function sD(e,t){return t instanceof Rn._CodeOrName?Bf(e,t.names):e}function my(e,t,n){if(e instanceof Rn.Name)return r(e);if(!i(e))return e;return new Rn._Code(e._items.reduce((o,s)=>(s instanceof Rn.Name&&(s=r(s)),s instanceof Rn._Code?o.push(...s._items):o.push(s),o),[]));function r(o){let s=n[o.str];return s===void 0||t[o.str]!==1?o:(delete t[o.str],s)}function i(o){return o instanceof Rn._Code&&o._items.some(s=>s instanceof Rn.Name&&t[s.str]===1&&n[s.str]!==void 0)}}function wNe(e,t){for(let n in t)e[n]=(e[n]||0)-(t[n]||0)}function Rne(e){return typeof e=="boolean"||typeof e=="number"||e===null?!e:(0,Rn._)`!${kV(e)}`}bn.not=Rne;var xNe=Nne(bn.operators.AND);function CNe(...e){return e.reduce(xNe)}bn.and=CNe;var ENe=Nne(bn.operators.OR);function INe(...e){return e.reduce(ENe)}bn.or=INe;function Nne(e){return(t,n)=>t===Rn.nil?n:n===Rn.nil?t:(0,Rn._)`${kV(t)} ${e} ${kV(n)}`}function kV(e){return e instanceof Rn.Name?e:(0,Rn._)`(${e})`}});var Un=ne(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.checkStrictMode=In.getErrorPath=In.Type=In.useFunc=In.setEvaluated=In.evaluatedPropsToName=In.mergeEvaluated=In.eachItem=In.unescapeJsonPointer=In.escapeJsonPointer=In.escapeFragment=In.unescapeFragment=In.schemaRefOrVal=In.schemaHasRulesButRef=In.schemaHasRules=In.checkUnknownRules=In.alwaysValidSchema=In.toHash=void 0;var xr=_n(),SNe=Vx();function kNe(e){let t={};for(let n of e)t[n]=!0;return t}In.toHash=kNe;function TNe(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Fne(e,t),!jne(t,e.self.RULES.all))}In.alwaysValidSchema=TNe;function Fne(e,t=e.schema){let{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;let i=r.RULES.keywords;for(let o in t)i[o]||Une(e,`unknown keyword: "${o}"`)}In.checkUnknownRules=Fne;function jne(e,t){if(typeof e=="boolean")return!e;for(let n in e)if(t[n])return!0;return!1}In.schemaHasRules=jne;function ANe(e,t){if(typeof e=="boolean")return!e;for(let n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}In.schemaHasRulesButRef=ANe;function ONe({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,xr._)`${n}`}return(0,xr._)`${e}${t}${(0,xr.getProperty)(r)}`}In.schemaRefOrVal=ONe;function MNe(e){return zne(decodeURIComponent(e))}In.unescapeFragment=MNe;function DNe(e){return encodeURIComponent(AV(e))}In.escapeFragment=DNe;function AV(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}In.escapeJsonPointer=AV;function zne(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}In.unescapeJsonPointer=zne;function PNe(e,t){if(Array.isArray(e))for(let n of e)t(n);else t(e)}In.eachItem=PNe;function $ne({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,o,s,a)=>{let c=s===void 0?o:s instanceof xr.Name?(o instanceof xr.Name?e(i,o,s):t(i,o,s),s):o instanceof xr.Name?(t(i,s,o),o):n(o,s);return a===xr.Name&&!(c instanceof xr.Name)?r(i,c):c}}In.mergeEvaluated={props:$ne({mergeNames:(e,t,n)=>e.if((0,xr._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,xr._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,xr._)`${n} || {}`).code((0,xr._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,xr._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,xr._)`${n} || {}`),OV(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:m(m({},e),t),resultToName:Bne}),items:$ne({mergeNames:(e,t,n)=>e.if((0,xr._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,xr._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,xr._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,xr._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function Bne(e,t){if(t===!0)return e.var("props",!0);let n=e.var("props",(0,xr._)`{}`);return t!==void 0&&OV(e,n,t),n}In.evaluatedPropsToName=Bne;function OV(e,t,n){Object.keys(n).forEach(r=>e.assign((0,xr._)`${t}${(0,xr.getProperty)(r)}`,!0))}In.setEvaluated=OV;var Lne={};function RNe(e,t){return e.scopeValue("func",{ref:t,code:Lne[t.code]||(Lne[t.code]=new SNe._Code(t.code))})}In.useFunc=RNe;var TV=(function(e){return e[e.Num=0]="Num",e[e.Str=1]="Str",e})(TV||(In.Type=TV={}));function NNe(e,t,n){if(e instanceof xr.Name){let r=t===TV.Num;return n?r?(0,xr._)`"[" + ${e} + "]"`:(0,xr._)`"['" + ${e} + "']"`:r?(0,xr._)`"/" + ${e}`:(0,xr._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,xr.getProperty)(e).toString():"/"+AV(e)}In.getErrorPath=NNe;function Une(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}In.checkStrictMode=Une});var ad=ne(MV=>{"use strict";Object.defineProperty(MV,"__esModule",{value:!0});var Bo=_n(),$Ne={data:new Bo.Name("data"),valCxt:new Bo.Name("valCxt"),instancePath:new Bo.Name("instancePath"),parentData:new Bo.Name("parentData"),parentDataProperty:new Bo.Name("parentDataProperty"),rootData:new Bo.Name("rootData"),dynamicAnchors:new Bo.Name("dynamicAnchors"),vErrors:new Bo.Name("vErrors"),errors:new Bo.Name("errors"),this:new Bo.Name("this"),self:new Bo.Name("self"),scope:new Bo.Name("scope"),json:new Bo.Name("json"),jsonPos:new Bo.Name("jsonPos"),jsonLen:new Bo.Name("jsonLen"),jsonPart:new Bo.Name("jsonPart")};MV.default=$Ne});var Zx=ne(Uo=>{"use strict";Object.defineProperty(Uo,"__esModule",{value:!0});Uo.extendErrors=Uo.resetErrorsCount=Uo.reportExtraError=Uo.reportError=Uo.keyword$DataError=Uo.keywordError=void 0;var jn=_n(),lD=Un(),fs=ad();Uo.keywordError={message:({keyword:e})=>(0,jn.str)`must pass "${e}" keyword validation`};Uo.keyword$DataError={message:({keyword:e,schemaType:t})=>t?(0,jn.str)`"${e}" keyword must be ${t} ($data)`:(0,jn.str)`"${e}" keyword is invalid ($data)`};function LNe(e,t=Uo.keywordError,n,r){let{it:i}=e,{gen:o,compositeRule:s,allErrors:a}=i,c=Zne(e,t,n);r??(s||a)?Vne(o,c):Hne(i,(0,jn._)`[${c}]`)}Uo.reportError=LNe;function FNe(e,t=Uo.keywordError,n){let{it:r}=e,{gen:i,compositeRule:o,allErrors:s}=r,a=Zne(e,t,n);Vne(i,a),o||s||Hne(r,fs.default.vErrors)}Uo.reportExtraError=FNe;function jNe(e,t){e.assign(fs.default.errors,t),e.if((0,jn._)`${fs.default.vErrors} !== null`,()=>e.if(t,()=>e.assign((0,jn._)`${fs.default.vErrors}.length`,t),()=>e.assign(fs.default.vErrors,null)))}Uo.resetErrorsCount=jNe;function zNe({gen:e,keyword:t,schemaValue:n,data:r,errsCount:i,it:o}){if(i===void 0)throw new Error("ajv implementation error");let s=e.name("err");e.forRange("i",i,fs.default.errors,a=>{e.const(s,(0,jn._)`${fs.default.vErrors}[${a}]`),e.if((0,jn._)`${s}.instancePath === undefined`,()=>e.assign((0,jn._)`${s}.instancePath`,(0,jn.strConcat)(fs.default.instancePath,o.errorPath))),e.assign((0,jn._)`${s}.schemaPath`,(0,jn.str)`${o.errSchemaPath}/${t}`),o.opts.verbose&&(e.assign((0,jn._)`${s}.schema`,n),e.assign((0,jn._)`${s}.data`,r))})}Uo.extendErrors=zNe;function Vne(e,t){let n=e.const("err",t);e.if((0,jn._)`${fs.default.vErrors} === null`,()=>e.assign(fs.default.vErrors,(0,jn._)`[${n}]`),(0,jn._)`${fs.default.vErrors}.push(${n})`),e.code((0,jn._)`${fs.default.errors}++`)}function Hne(e,t){let{gen:n,validateName:r,schemaEnv:i}=e;i.$async?n.throw((0,jn._)`new ${e.ValidationError}(${t})`):(n.assign((0,jn._)`${r}.errors`,t),n.return(!1))}var Uf={keyword:new jn.Name("keyword"),schemaPath:new jn.Name("schemaPath"),params:new jn.Name("params"),propertyName:new jn.Name("propertyName"),message:new jn.Name("message"),schema:new jn.Name("schema"),parentSchema:new jn.Name("parentSchema")};function Zne(e,t,n){let{createErrors:r}=e.it;return r===!1?(0,jn._)`{}`:BNe(e,t,n)}function BNe(e,t,n={}){let{gen:r,it:i}=e,o=[UNe(i,n),VNe(e,n)];return HNe(e,t,o),r.object(...o)}function UNe({errorPath:e},{instancePath:t}){let n=t?(0,jn.str)`${e}${(0,lD.getErrorPath)(t,lD.Type.Str)}`:e;return[fs.default.instancePath,(0,jn.strConcat)(fs.default.instancePath,n)]}function VNe({keyword:e,it:{errSchemaPath:t}},{schemaPath:n,parentSchema:r}){let i=r?t:(0,jn.str)`${t}/${e}`;return n&&(i=(0,jn.str)`${i}${(0,lD.getErrorPath)(n,lD.Type.Str)}`),[Uf.schemaPath,i]}function HNe(e,{params:t,message:n},r){let{keyword:i,data:o,schemaValue:s,it:a}=e,{opts:c,propertyName:u,topSchemaRef:d,schemaPath:f}=a;r.push([Uf.keyword,i],[Uf.params,typeof t=="function"?t(e):t||(0,jn._)`{}`]),c.messages&&r.push([Uf.message,typeof n=="function"?n(e):n]),c.verbose&&r.push([Uf.schema,s],[Uf.parentSchema,(0,jn._)`${d}${f}`],[fs.default.data,o]),u&&r.push([Uf.propertyName,u])}});var Gne=ne(fy=>{"use strict";Object.defineProperty(fy,"__esModule",{value:!0});fy.boolOrEmptySchema=fy.topBoolOrEmptySchema=void 0;var ZNe=Zx(),qNe=_n(),GNe=ad(),WNe={message:"boolean schema is false"};function KNe(e){let{gen:t,schema:n,validateName:r}=e;n===!1?qne(e,!1):typeof n=="object"&&n.$async===!0?t.return(GNe.default.data):(t.assign((0,qNe._)`${r}.errors`,null),t.return(!0))}fy.topBoolOrEmptySchema=KNe;function JNe(e,t){let{gen:n,schema:r}=e;r===!1?(n.var(t,!1),qne(e)):n.var(t,!0)}fy.boolOrEmptySchema=JNe;function qne(e,t){let{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,ZNe.reportError)(i,WNe,void 0,t)}});var DV=ne(hy=>{"use strict";Object.defineProperty(hy,"__esModule",{value:!0});hy.getRules=hy.isJSONType=void 0;var YNe=["string","number","integer","boolean","null","object","array"],QNe=new Set(YNe);function XNe(e){return typeof e=="string"&&QNe.has(e)}hy.isJSONType=XNe;function e$e(){let e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:b(m({},e),{integer:!0,boolean:!0,null:!0}),rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}hy.getRules=e$e});var PV=ne(Fp=>{"use strict";Object.defineProperty(Fp,"__esModule",{value:!0});Fp.shouldUseRule=Fp.shouldUseGroup=Fp.schemaHasRulesForType=void 0;function t$e({schema:e,self:t},n){let r=t.RULES.types[n];return r&&r!==!0&&Wne(e,r)}Fp.schemaHasRulesForType=t$e;function Wne(e,t){return t.rules.some(n=>Kne(e,n))}Fp.shouldUseGroup=Wne;function Kne(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}Fp.shouldUseRule=Kne});var qx=ne(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.reportTypeError=Vo.checkDataTypes=Vo.checkDataType=Vo.coerceAndCheckDataType=Vo.getJSONTypes=Vo.getSchemaTypes=Vo.DataType=void 0;var n$e=DV(),r$e=PV(),i$e=Zx(),ln=_n(),Jne=Un(),gy=(function(e){return e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong",e})(gy||(Vo.DataType=gy={}));function o$e(e){let t=Yne(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Vo.getSchemaTypes=o$e;function Yne(e){let t=Array.isArray(e)?e:e?[e]:[];if(t.every(n$e.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Vo.getJSONTypes=Yne;function s$e(e,t){let{gen:n,data:r,opts:i}=e,o=a$e(t,i.coerceTypes),s=t.length>0&&!(o.length===0&&t.length===1&&(0,r$e.schemaHasRulesForType)(e,t[0]));if(s){let a=NV(t,r,i.strictNumbers,gy.Wrong);n.if(a,()=>{o.length?c$e(e,t,o):$V(e)})}return s}Vo.coerceAndCheckDataType=s$e;var Qne=new Set(["string","number","integer","boolean","null"]);function a$e(e,t){return t?e.filter(n=>Qne.has(n)||t==="array"&&n==="array"):[]}function c$e(e,t,n){let{gen:r,data:i,opts:o}=e,s=r.let("dataType",(0,ln._)`typeof ${i}`),a=r.let("coerced",(0,ln._)`undefined`);o.coerceTypes==="array"&&r.if((0,ln._)`${s} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,ln._)`${i}[0]`).assign(s,(0,ln._)`typeof ${i}`).if(NV(t,i,o.strictNumbers),()=>r.assign(a,i))),r.if((0,ln._)`${a} !== undefined`);for(let u of n)(Qne.has(u)||u==="array"&&o.coerceTypes==="array")&&c(u);r.else(),$V(e),r.endIf(),r.if((0,ln._)`${a} !== undefined`,()=>{r.assign(i,a),l$e(e,a)});function c(u){switch(u){case"string":r.elseIf((0,ln._)`${s} == "number" || ${s} == "boolean"`).assign(a,(0,ln._)`"" + ${i}`).elseIf((0,ln._)`${i} === null`).assign(a,(0,ln._)`""`);return;case"number":r.elseIf((0,ln._)`${s} == "boolean" || ${i} === null
              || (${s} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,ln._)`+${i}`);return;case"integer":r.elseIf((0,ln._)`${s} === "boolean" || ${i} === null
              || (${s} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,ln._)`+${i}`);return;case"boolean":r.elseIf((0,ln._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,ln._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,ln._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,ln._)`${s} === "string" || ${s} === "number"
              || ${s} === "boolean" || ${i} === null`).assign(a,(0,ln._)`[${i}]`)}}}function l$e({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,ln._)`${t} !== undefined`,()=>e.assign((0,ln._)`${t}[${n}]`,r))}function RV(e,t,n,r=gy.Correct){let i=r===gy.Correct?ln.operators.EQ:ln.operators.NEQ,o;switch(e){case"null":return(0,ln._)`${t} ${i} null`;case"array":o=(0,ln._)`Array.isArray(${t})`;break;case"object":o=(0,ln._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=s((0,ln._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=s();break;default:return(0,ln._)`typeof ${t} ${i} ${e}`}return r===gy.Correct?o:(0,ln.not)(o);function s(a=ln.nil){return(0,ln.and)((0,ln._)`typeof ${t} == "number"`,a,n?(0,ln._)`isFinite(${t})`:ln.nil)}}Vo.checkDataType=RV;function NV(e,t,n,r){if(e.length===1)return RV(e[0],t,n,r);let i,o=(0,Jne.toHash)(e);if(o.array&&o.object){let s=(0,ln._)`typeof ${t} != "object"`;i=o.null?s:(0,ln._)`!${t} || ${s}`,delete o.null,delete o.array,delete o.object}else i=ln.nil;o.number&&delete o.integer;for(let s in o)i=(0,ln.and)(i,RV(s,t,n,r));return i}Vo.checkDataTypes=NV;var u$e={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,ln._)`{type: ${e}}`:(0,ln._)`{type: ${t}}`};function $V(e){let t=d$e(e);(0,i$e.reportError)(t,u$e)}Vo.reportTypeError=$V;function d$e(e){let{gen:t,data:n,schema:r}=e,i=(0,Jne.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}});var ere=ne(uD=>{"use strict";Object.defineProperty(uD,"__esModule",{value:!0});uD.assignDefaults=void 0;var _y=_n(),p$e=Un();function m$e(e,t){let{properties:n,items:r}=e.schema;if(t==="object"&&n)for(let i in n)Xne(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,o)=>Xne(e,o,i.default))}uD.assignDefaults=m$e;function Xne(e,t,n){let{gen:r,compositeRule:i,data:o,opts:s}=e;if(n===void 0)return;let a=(0,_y._)`${o}${(0,_y.getProperty)(t)}`;if(i){(0,p$e.checkStrictMode)(e,`default is ignored for: ${a}`);return}let c=(0,_y._)`${a} === undefined`;s.useDefaults==="empty"&&(c=(0,_y._)`${c} || ${a} === null || ${a} === ""`),r.if(c,(0,_y._)`${a} = ${(0,_y.stringify)(n)}`)}});var Qa=ne(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.validateUnion=hr.validateArray=hr.usePattern=hr.callValidateCode=hr.schemaProperties=hr.allSchemaProperties=hr.noPropertyInData=hr.propertyInData=hr.isOwnProperty=hr.hasPropFunc=hr.reportMissingProp=hr.checkMissingProp=hr.checkReportMissingProp=void 0;var jr=_n(),LV=Un(),jp=ad(),f$e=Un();function h$e(e,t){let{gen:n,data:r,it:i}=e;n.if(jV(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,jr._)`${t}`},!0),e.error()})}hr.checkReportMissingProp=h$e;function g$e({gen:e,data:t,it:{opts:n}},r,i){return(0,jr.or)(...r.map(o=>(0,jr.and)(jV(e,t,o,n.ownProperties),(0,jr._)`${i} = ${o}`)))}hr.checkMissingProp=g$e;function _$e(e,t){e.setParams({missingProperty:t},!0),e.error()}hr.reportMissingProp=_$e;function tre(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,jr._)`Object.prototype.hasOwnProperty`})}hr.hasPropFunc=tre;function FV(e,t,n){return(0,jr._)`${tre(e)}.call(${t}, ${n})`}hr.isOwnProperty=FV;function y$e(e,t,n,r){let i=(0,jr._)`${t}${(0,jr.getProperty)(n)} !== undefined`;return r?(0,jr._)`${i} && ${FV(e,t,n)}`:i}hr.propertyInData=y$e;function jV(e,t,n,r){let i=(0,jr._)`${t}${(0,jr.getProperty)(n)} === undefined`;return r?(0,jr.or)(i,(0,jr.not)(FV(e,t,n))):i}hr.noPropertyInData=jV;function nre(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}hr.allSchemaProperties=nre;function v$e(e,t){return nre(t).filter(n=>!(0,LV.alwaysValidSchema)(e,t[n]))}hr.schemaProperties=v$e;function b$e({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:o},it:s},a,c,u){let d=u?(0,jr._)`${e}, ${t}, ${r}${i}`:t,f=[[jp.default.instancePath,(0,jr.strConcat)(jp.default.instancePath,o)],[jp.default.parentData,s.parentData],[jp.default.parentDataProperty,s.parentDataProperty],[jp.default.rootData,jp.default.rootData]];s.opts.dynamicRef&&f.push([jp.default.dynamicAnchors,jp.default.dynamicAnchors]);let g=(0,jr._)`${d}, ${n.object(...f)}`;return c!==jr.nil?(0,jr._)`${a}.call(${c}, ${g})`:(0,jr._)`${a}(${g})`}hr.callValidateCode=b$e;var w$e=(0,jr._)`new RegExp`;function x$e({gen:e,it:{opts:t}},n){let r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,o=i(n,r);return e.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,jr._)`${i.code==="new RegExp"?w$e:(0,f$e.useFunc)(e,i)}(${n}, ${r})`})}hr.usePattern=x$e;function C$e(e){let{gen:t,data:n,keyword:r,it:i}=e,o=t.name("valid");if(i.allErrors){let a=t.let("valid",!0);return s(()=>t.assign(a,!1)),a}return t.var(o,!0),s(()=>t.break()),o;function s(a){let c=t.const("len",(0,jr._)`${n}.length`);t.forRange("i",0,c,u=>{e.subschema({keyword:r,dataProp:u,dataPropType:LV.Type.Num},o),t.if((0,jr.not)(o),a)})}}hr.validateArray=C$e;function E$e(e){let{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(c=>(0,LV.alwaysValidSchema)(i,c))&&!i.opts.unevaluated)return;let s=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((c,u)=>{let d=e.subschema({keyword:r,schemaProp:u,compositeRule:!0},a);t.assign(s,(0,jr._)`${s} || ${a}`),e.mergeValidEvaluated(d,a)||t.if((0,jr.not)(s))})),e.result(s,()=>e.reset(),()=>e.error(!0))}hr.validateUnion=E$e});var ore=ne(jl=>{"use strict";Object.defineProperty(jl,"__esModule",{value:!0});jl.validateKeywordUsage=jl.validSchemaType=jl.funcKeywordCode=jl.macroKeywordCode=void 0;var hs=_n(),Vf=ad(),I$e=Qa(),S$e=Zx();function k$e(e,t){let{gen:n,keyword:r,schema:i,parentSchema:o,it:s}=e,a=t.macro.call(s.self,i,o,s),c=ire(n,r,a);s.opts.validateSchema!==!1&&s.self.validateSchema(a,!0);let u=n.name("valid");e.subschema({schema:a,schemaPath:hs.nil,errSchemaPath:`${s.errSchemaPath}/${r}`,topSchemaRef:c,compositeRule:!0},u),e.pass(u,()=>e.error(!0))}jl.macroKeywordCode=k$e;function T$e(e,t){var n;let{gen:r,keyword:i,schema:o,parentSchema:s,$data:a,it:c}=e;O$e(c,t);let u=!a&&t.compile?t.compile.call(c.self,o,s,c):t.validate,d=ire(r,i,u),f=r.let("valid");e.block$data(f,g),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function g(){if(t.errors===!1)x(),t.modifying&&rre(e),E(()=>e.error());else{let C=t.async?h():v();t.modifying&&rre(e),E(()=>A$e(e,C))}}function h(){let C=r.let("ruleErrs",null);return r.try(()=>x((0,hs._)`await `),S=>r.assign(f,!1).if((0,hs._)`${S} instanceof ${c.ValidationError}`,()=>r.assign(C,(0,hs._)`${S}.errors`),()=>r.throw(S))),C}function v(){let C=(0,hs._)`${d}.errors`;return r.assign(C,null),x(hs.nil),C}function x(C=t.async?(0,hs._)`await `:hs.nil){let S=c.opts.passContext?Vf.default.this:Vf.default.self,A=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,hs._)`${C}${(0,I$e.callValidateCode)(e,d,S,A)}`,t.modifying)}function E(C){var S;r.if((0,hs.not)((S=t.valid)!==null&&S!==void 0?S:f),C)}}jl.funcKeywordCode=T$e;function rre(e){let{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,hs._)`${r.parentData}[${r.parentDataProperty}]`))}function A$e(e,t){let{gen:n}=e;n.if((0,hs._)`Array.isArray(${t})`,()=>{n.assign(Vf.default.vErrors,(0,hs._)`${Vf.default.vErrors} === null ? ${t} : ${Vf.default.vErrors}.concat(${t})`).assign(Vf.default.errors,(0,hs._)`${Vf.default.vErrors}.length`),(0,S$e.extendErrors)(e)},()=>e.error())}function O$e({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function ire(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,hs.stringify)(n)})}function M$e(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}jl.validSchemaType=M$e;function D$e({schema:e,opts:t,self:n,errSchemaPath:r},i,o){if(Array.isArray(i.keyword)?!i.keyword.includes(o):i.keyword!==o)throw new Error("ajv implementation error");let s=i.dependencies;if(s?.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${o}: ${s.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[o])){let c=`keyword "${o}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(c);else throw new Error(c)}}jl.validateKeywordUsage=D$e});var are=ne(zp=>{"use strict";Object.defineProperty(zp,"__esModule",{value:!0});zp.extendSubschemaMode=zp.extendSubschemaData=zp.getSubschema=void 0;var zl=_n(),sre=Un();function P$e(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:o,topSchemaRef:s}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){let a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,zl._)`${e.schemaPath}${(0,zl.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,zl._)`${e.schemaPath}${(0,zl.getProperty)(t)}${(0,zl.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,sre.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||o===void 0||s===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:s,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}zp.getSubschema=P$e;function R$e(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:o,propertyName:s}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=t;if(n!==void 0){let{errorPath:u,dataPathArr:d,opts:f}=t,g=a.let("data",(0,zl._)`${t.data}${(0,zl.getProperty)(n)}`,!0);c(g),e.errorPath=(0,zl.str)`${u}${(0,sre.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,zl._)`${n}`,e.dataPathArr=[...d,e.parentDataProperty]}if(i!==void 0){let u=i instanceof zl.Name?i:a.let("data",i,!0);c(u),s!==void 0&&(e.propertyName=s)}o&&(e.dataTypes=o);function c(u){e.data=u,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,u]}}zp.extendSubschemaData=R$e;function N$e(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:o}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),o!==void 0&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=n}zp.extendSubschemaMode=N$e});var zV=ne((swt,cre)=>{"use strict";cre.exports=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n}});var ure=ne((awt,lre)=>{"use strict";var Bp=lre.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};dD(t,r,i,e,"",e)};Bp.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Bp.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Bp.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Bp.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function dD(e,t,n,r,i,o,s,a,c,u){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,o,s,a,c,u);for(var d in r){var f=r[d];if(Array.isArray(f)){if(d in Bp.arrayKeywords)for(var g=0;g<f.length;g++)dD(e,t,n,f[g],i+"/"+d+"/"+g,o,i,d,r,g)}else if(d in Bp.propsKeywords){if(f&&typeof f=="object")for(var h in f)dD(e,t,n,f[h],i+"/"+d+"/"+$$e(h),o,i,d,r,h)}else(d in Bp.keywords||e.allKeys&&!(d in Bp.skipKeywords))&&dD(e,t,n,f,i+"/"+d,o,i,d,r)}n(r,i,o,s,a,c,u)}}function $$e(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}});var Gx=ne(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});Xs.getSchemaRefs=Xs.resolveUrl=Xs.normalizeId=Xs._getFullPath=Xs.getFullPath=Xs.inlineRef=void 0;var L$e=Un(),F$e=zV(),j$e=ure(),z$e=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function B$e(e,t=!0){return typeof e=="boolean"?!0:t===!0?!BV(e):t?dre(e)<=t:!1}Xs.inlineRef=B$e;var U$e=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function BV(e){for(let t in e){if(U$e.has(t))return!0;let n=e[t];if(Array.isArray(n)&&n.some(BV)||typeof n=="object"&&BV(n))return!0}return!1}function dre(e){let t=0;for(let n in e){if(n==="$ref")return 1/0;if(t++,!z$e.has(n)&&(typeof e[n]=="object"&&(0,L$e.eachItem)(e[n],r=>t+=dre(r)),t===1/0))return 1/0}return t}function pre(e,t="",n){n!==!1&&(t=yy(t));let r=e.parse(t);return mre(e,r)}Xs.getFullPath=pre;function mre(e,t){return e.serialize(t).split("#")[0]+"#"}Xs._getFullPath=mre;var V$e=/#\/?$/;function yy(e){return e?e.replace(V$e,""):""}Xs.normalizeId=yy;function H$e(e,t,n){return n=yy(n),e.resolve(t,n)}Xs.resolveUrl=H$e;var Z$e=/^[a-z_][-a-z0-9._]*$/i;function q$e(e,t){if(typeof e=="boolean")return{};let{schemaId:n,uriResolver:r}=this.opts,i=yy(e[n]||t),o={"":i},s=pre(r,i,!1),a={},c=new Set;return j$e(e,{allKeys:!0},(f,g,h,v)=>{if(v===void 0)return;let x=s+g,E=o[v];typeof f[n]=="string"&&(E=C.call(this,f[n])),S.call(this,f.$anchor),S.call(this,f.$dynamicAnchor),o[g]=E;function C(A){let P=this.opts.uriResolver.resolve;if(A=yy(E?P(E,A):A),c.has(A))throw d(A);c.add(A);let F=this.refs[A];return typeof F=="string"&&(F=this.refs[F]),typeof F=="object"?u(f,F.schema,A):A!==yy(x)&&(A[0]==="#"?(u(f,a[A],A),a[A]=f):this.refs[A]=x),A}function S(A){if(typeof A=="string"){if(!Z$e.test(A))throw new Error(`invalid anchor "${A}"`);C.call(this,`#${A}`)}}}),a;function u(f,g,h){if(g!==void 0&&!F$e(f,g))throw d(h)}function d(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Xs.getSchemaRefs=q$e});var Jx=ne(Up=>{"use strict";Object.defineProperty(Up,"__esModule",{value:!0});Up.getData=Up.KeywordCxt=Up.validateFunctionCode=void 0;var yre=Gne(),fre=qx(),VV=PV(),pD=qx(),G$e=ere(),Kx=ore(),UV=are(),ct=_n(),Zt=ad(),W$e=Gx(),cd=Un(),Wx=Zx();function K$e(e){if(wre(e)&&(xre(e),bre(e))){Q$e(e);return}vre(e,()=>(0,yre.topBoolOrEmptySchema)(e))}Up.validateFunctionCode=K$e;function vre({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},o){i.code.es5?e.func(t,(0,ct._)`${Zt.default.data}, ${Zt.default.valCxt}`,r.$async,()=>{e.code((0,ct._)`"use strict"; ${hre(n,i)}`),Y$e(e,i),e.code(o)}):e.func(t,(0,ct._)`${Zt.default.data}, ${J$e(i)}`,r.$async,()=>e.code(hre(n,i)).code(o))}function J$e(e){return(0,ct._)`{${Zt.default.instancePath}="", ${Zt.default.parentData}, ${Zt.default.parentDataProperty}, ${Zt.default.rootData}=${Zt.default.data}${e.dynamicRef?(0,ct._)`, ${Zt.default.dynamicAnchors}={}`:ct.nil}}={}`}function Y$e(e,t){e.if(Zt.default.valCxt,()=>{e.var(Zt.default.instancePath,(0,ct._)`${Zt.default.valCxt}.${Zt.default.instancePath}`),e.var(Zt.default.parentData,(0,ct._)`${Zt.default.valCxt}.${Zt.default.parentData}`),e.var(Zt.default.parentDataProperty,(0,ct._)`${Zt.default.valCxt}.${Zt.default.parentDataProperty}`),e.var(Zt.default.rootData,(0,ct._)`${Zt.default.valCxt}.${Zt.default.rootData}`),t.dynamicRef&&e.var(Zt.default.dynamicAnchors,(0,ct._)`${Zt.default.valCxt}.${Zt.default.dynamicAnchors}`)},()=>{e.var(Zt.default.instancePath,(0,ct._)`""`),e.var(Zt.default.parentData,(0,ct._)`undefined`),e.var(Zt.default.parentDataProperty,(0,ct._)`undefined`),e.var(Zt.default.rootData,Zt.default.data),t.dynamicRef&&e.var(Zt.default.dynamicAnchors,(0,ct._)`{}`)})}function Q$e(e){let{schema:t,opts:n,gen:r}=e;vre(e,()=>{n.$comment&&t.$comment&&Ere(e),rLe(e),r.let(Zt.default.vErrors,null),r.let(Zt.default.errors,0),n.unevaluated&&X$e(e),Cre(e),sLe(e)})}function X$e(e){let{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,ct._)`${n}.evaluated`),t.if((0,ct._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,ct._)`${e.evaluated}.props`,(0,ct._)`undefined`)),t.if((0,ct._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,ct._)`${e.evaluated}.items`,(0,ct._)`undefined`))}function hre(e,t){let n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,ct._)`/*# sourceURL=${n} */`:ct.nil}function eLe(e,t){if(wre(e)&&(xre(e),bre(e))){tLe(e,t);return}(0,yre.boolOrEmptySchema)(e,t)}function bre({schema:e,self:t}){if(typeof e=="boolean")return!e;for(let n in e)if(t.RULES.all[n])return!0;return!1}function wre(e){return typeof e.schema!="boolean"}function tLe(e,t){let{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&Ere(e),iLe(e),oLe(e);let o=r.const("_errs",Zt.default.errors);Cre(e,o),r.var(t,(0,ct._)`${o} === ${Zt.default.errors}`)}function xre(e){(0,cd.checkUnknownRules)(e),nLe(e)}function Cre(e,t){if(e.opts.jtd)return gre(e,[],!1,t);let n=(0,fre.getSchemaTypes)(e.schema),r=(0,fre.coerceAndCheckDataType)(e,n);gre(e,n,!r,t)}function nLe(e){let{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,cd.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function rLe(e){let{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,cd.checkStrictMode)(e,"default is ignored in the schema root")}function iLe(e){let t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,W$e.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function oLe(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function Ere({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){let o=n.$comment;if(i.$comment===!0)e.code((0,ct._)`${Zt.default.self}.logger.log(${o})`);else if(typeof i.$comment=="function"){let s=(0,ct.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,ct._)`${Zt.default.self}.opts.$comment(${o}, ${s}, ${a}.schema)`)}}function sLe(e){let{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:o}=e;n.$async?t.if((0,ct._)`${Zt.default.errors} === 0`,()=>t.return(Zt.default.data),()=>t.throw((0,ct._)`new ${i}(${Zt.default.vErrors})`)):(t.assign((0,ct._)`${r}.errors`,Zt.default.vErrors),o.unevaluated&&aLe(e),t.return((0,ct._)`${Zt.default.errors} === 0`))}function aLe({gen:e,evaluated:t,props:n,items:r}){n instanceof ct.Name&&e.assign((0,ct._)`${t}.props`,n),r instanceof ct.Name&&e.assign((0,ct._)`${t}.items`,r)}function gre(e,t,n,r){let{gen:i,schema:o,data:s,allErrors:a,opts:c,self:u}=e,{RULES:d}=u;if(o.$ref&&(c.ignoreKeywordsWithRef||!(0,cd.schemaHasRulesButRef)(o,d))){i.block(()=>Sre(e,"$ref",d.all.$ref.definition));return}c.jtd||cLe(e,t),i.block(()=>{for(let g of d.rules)f(g);f(d.post)});function f(g){(0,VV.shouldUseGroup)(o,g)&&(g.type?(i.if((0,pD.checkDataType)(g.type,s,c.strictNumbers)),_re(e,g),t.length===1&&t[0]===g.type&&n&&(i.else(),(0,pD.reportTypeError)(e)),i.endIf()):_re(e,g),a||i.if((0,ct._)`${Zt.default.errors} === ${r||0}`))}}function _re(e,t){let{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,G$e.assignDefaults)(e,t.type),n.block(()=>{for(let o of t.rules)(0,VV.shouldUseRule)(r,o)&&Sre(e,o.keyword,o.definition,t.type)})}function cLe(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(lLe(e,t),e.opts.allowUnionTypes||uLe(e,t),dLe(e,e.dataTypes))}function lLe(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{Ire(e.dataTypes,n)||HV(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),mLe(e,t)}}function uLe(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&HV(e,"use allowUnionTypes to allow union type keyword")}function dLe(e,t){let n=e.self.RULES.all;for(let r in n){let i=n[r];if(typeof i=="object"&&(0,VV.shouldUseRule)(e.schema,i)){let{type:o}=i.definition;o.length&&!o.some(s=>pLe(t,s))&&HV(e,`missing type "${o.join(",")}" for keyword "${r}"`)}}}function pLe(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function Ire(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function mLe(e,t){let n=[];for(let r of e.dataTypes)Ire(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function HV(e,t){let n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,cd.checkStrictMode)(e,t,e.opts.strictTypes)}var mD=class{constructor(t,n,r){if((0,Kx.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,cd.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",kre(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Kx.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",Zt.default.errors))}result(t,n,r){this.failResult((0,ct.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,ct.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);let{schemaCode:n}=this;this.fail((0,ct._)`${n} !== undefined && (${(0,ct.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?Wx.reportExtraError:Wx.reportError)(this,this.def.error,n)}$dataError(){(0,Wx.reportError)(this,this.def.$dataError||Wx.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Wx.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=ct.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=ct.nil,n=ct.nil){if(!this.$data)return;let{gen:r,schemaCode:i,schemaType:o,def:s}=this;r.if((0,ct.or)((0,ct._)`${i} === undefined`,n)),t!==ct.nil&&r.assign(t,!0),(o.length||s.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==ct.nil&&r.assign(t,!1)),r.else()}invalid$data(){let{gen:t,schemaCode:n,schemaType:r,def:i,it:o}=this;return(0,ct.or)(s(),a());function s(){if(r.length){if(!(n instanceof ct.Name))throw new Error("ajv implementation error");let c=Array.isArray(r)?r:[r];return(0,ct._)`${(0,pD.checkDataTypes)(c,n,o.opts.strictNumbers,pD.DataType.Wrong)}`}return ct.nil}function a(){if(i.validateSchema){let c=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,ct._)`!${c}(${n})`}return ct.nil}}subschema(t,n){let r=(0,UV.getSubschema)(this.it,t);(0,UV.extendSubschemaData)(r,this.it,t),(0,UV.extendSubschemaMode)(r,t);let i=b(m(m({},this.it),r),{items:void 0,props:void 0});return eLe(i,n),i}mergeEvaluated(t,n){let{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=cd.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=cd.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){let{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,ct.Name)),!0}};Up.KeywordCxt=mD;function Sre(e,t,n,r){let i=new mD(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,Kx.funcKeywordCode)(i,n):"macro"in n?(0,Kx.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,Kx.funcKeywordCode)(i,n)}var fLe=/^\/(?:[^~]|~0|~1)*$/,hLe=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function kre(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,o;if(e==="")return Zt.default.rootData;if(e[0]==="/"){if(!fLe.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,o=Zt.default.rootData}else{let u=hLe.exec(e);if(!u)throw new Error(`Invalid JSON-pointer: ${e}`);let d=+u[1];if(i=u[2],i==="#"){if(d>=t)throw new Error(c("property/index",d));return r[t-d]}if(d>t)throw new Error(c("data",d));if(o=n[t-d],!i)return o}let s=o,a=i.split("/");for(let u of a)u&&(o=(0,ct._)`${o}${(0,ct.getProperty)((0,cd.unescapeJsonPointer)(u))}`,s=(0,ct._)`${s} && ${o}`);return s;function c(u,d){return`Cannot access ${u} ${d} levels up, current level is ${t}`}}Up.getData=kre});var fD=ne(qV=>{"use strict";Object.defineProperty(qV,"__esModule",{value:!0});var ZV=class extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}};qV.default=ZV});var Yx=ne(KV=>{"use strict";Object.defineProperty(KV,"__esModule",{value:!0});var GV=Gx(),WV=class extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,GV.resolveUrl)(t,n,r),this.missingSchema=(0,GV.normalizeId)((0,GV.getFullPath)(t,this.missingRef))}};KV.default=WV});var gD=ne(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});Xa.resolveSchema=Xa.getCompilingSchema=Xa.resolveRef=Xa.compileSchema=Xa.SchemaEnv=void 0;var Pc=_n(),gLe=fD(),Hf=ad(),Rc=Gx(),Tre=Un(),_Le=Jx(),vy=class{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,Rc.normalizeId)(r?.[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r?.$async,this.refs={}}};Xa.SchemaEnv=vy;function YV(e){let t=Are.call(this,e);if(t)return t;let n=(0,Rc.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:o}=this.opts,s=new Pc.CodeGen(this.scope,{es5:r,lines:i,ownProperties:o}),a;e.$async&&(a=s.scopeValue("Error",{ref:gLe.default,code:(0,Pc._)`require("ajv/dist/runtime/validation_error").default`}));let c=s.scopeName("validate");e.validateName=c;let u={gen:s,allErrors:this.opts.allErrors,data:Hf.default.data,parentData:Hf.default.parentData,parentDataProperty:Hf.default.parentDataProperty,dataNames:[Hf.default.data],dataPathArr:[Pc.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:s.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Pc.stringify)(e.schema)}:{ref:e.schema}),validateName:c,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:Pc.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Pc._)`""`,opts:this.opts,self:this},d;try{this._compilations.add(e),(0,_Le.validateFunctionCode)(u),s.optimize(this.opts.code.optimize);let f=s.toString();d=`${s.scopeRefs(Hf.default.scope)}return ${f}`,this.opts.code.process&&(d=this.opts.code.process(d,e));let h=new Function(`${Hf.default.self}`,`${Hf.default.scope}`,d)(this,this.scope.get());if(this.scope.value(c,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:c,validateCode:f,scopeValues:s._values}),this.opts.unevaluated){let{props:v,items:x}=u;h.evaluated={props:v instanceof Pc.Name?void 0:v,items:x instanceof Pc.Name?void 0:x,dynamicProps:v instanceof Pc.Name,dynamicItems:x instanceof Pc.Name},h.source&&(h.source.evaluated=(0,Pc.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,d&&this.logger.error("Error compiling schema, function code:",d),f}finally{this._compilations.delete(e)}}Xa.compileSchema=YV;function yLe(e,t,n){var r;n=(0,Rc.resolveUrl)(this.opts.uriResolver,t,n);let i=e.refs[n];if(i)return i;let o=wLe.call(this,e,n);if(o===void 0){let s=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;s&&(o=new vy({schema:s,schemaId:a,root:e,baseId:t}))}if(o!==void 0)return e.refs[n]=vLe.call(this,o)}Xa.resolveRef=yLe;function vLe(e){return(0,Rc.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:YV.call(this,e)}function Are(e){for(let t of this._compilations)if(bLe(t,e))return t}Xa.getCompilingSchema=Are;function bLe(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function wLe(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||hD.call(this,e,t)}function hD(e,t){let n=this.opts.uriResolver.parse(t),r=(0,Rc._getFullPath)(this.opts.uriResolver,n),i=(0,Rc.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return JV.call(this,n,e);let o=(0,Rc.normalizeId)(r),s=this.refs[o]||this.schemas[o];if(typeof s=="string"){let a=hD.call(this,e,s);return typeof a?.schema!="object"?void 0:JV.call(this,n,a)}if(typeof s?.schema=="object"){if(s.validate||YV.call(this,s),o===(0,Rc.normalizeId)(t)){let{schema:a}=s,{schemaId:c}=this.opts,u=a[c];return u&&(i=(0,Rc.resolveUrl)(this.opts.uriResolver,i,u)),new vy({schema:a,schemaId:c,root:e,baseId:i})}return JV.call(this,n,s)}}Xa.resolveSchema=hD;var xLe=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function JV(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(let a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;let c=n[(0,Tre.unescapeFragment)(a)];if(c===void 0)return;n=c;let u=typeof n=="object"&&n[this.opts.schemaId];!xLe.has(a)&&u&&(t=(0,Rc.resolveUrl)(this.opts.uriResolver,t,u))}let o;if(typeof n!="boolean"&&n.$ref&&!(0,Tre.schemaHasRulesButRef)(n,this.RULES)){let a=(0,Rc.resolveUrl)(this.opts.uriResolver,t,n.$ref);o=hD.call(this,r,a)}let{schemaId:s}=this.opts;if(o=o||new vy({schema:n,schemaId:s,root:r,baseId:t}),o.schema!==o.root.schema)return o}});var Ore=ne((fwt,CLe)=>{CLe.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var XV=ne((hwt,Rre)=>{"use strict";var ELe=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),Dre=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function QV(e){let t="",n=0,r=0;for(r=0;r<e.length;r++)if(n=e[r].charCodeAt(0),n!==48){if(!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";t+=e[r];break}for(r+=1;r<e.length;r++){if(n=e[r].charCodeAt(0),!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";t+=e[r]}return t}var ILe=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function Mre(e){return e.length=0,!0}function SLe(e,t,n){if(e.length){let r=QV(e);if(r!=="")t.push(r);else return n.error=!0,!1;e.length=0}return!0}function kLe(e){let t=0,n={error:!1,address:"",zone:""},r=[],i=[],o=!1,s=!1,a=SLe;for(let c=0;c<e.length;c++){let u=e[c];if(!(u==="["||u==="]"))if(u===":"){if(o===!0&&(s=!0),!a(i,r,n))break;if(++t>7){n.error=!0;break}c>0&&e[c-1]===":"&&(o=!0),r.push(":");continue}else if(u==="%"){if(!a(i,r,n))break;a=Mre}else{i.push(u);continue}}return i.length&&(a===Mre?n.zone=i.join(""):s?r.push(i.join("")):r.push(QV(i))),n.address=r.join(""),n}function Pre(e){if(TLe(e,":")<2)return{host:e,isIPV6:!1};let t=kLe(e);if(t.error)return{host:e,isIPV6:!1};{let n=t.address,r=t.address;return t.zone&&(n+="%"+t.zone,r+="%25"+t.zone),{host:n,isIPV6:!0,escapedHost:r}}}function TLe(e,t){let n=0;for(let r=0;r<e.length;r++)e[r]===t&&n++;return n}function ALe(e){let t=e,n=[],r=-1,i=0;for(;i=t.length;){if(i===1){if(t===".")break;if(t==="/"){n.push("/");break}else{n.push(t);break}}else if(i===2){if(t[0]==="."){if(t[1]===".")break;if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&(t[1]==="."||t[1]==="/")){n.push("/");break}}else if(i===3&&t==="/.."){n.length!==0&&n.pop(),n.push("/");break}if(t[0]==="."){if(t[1]==="."){if(t[2]==="/"){t=t.slice(3);continue}}else if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&t[1]==="."){if(t[2]==="/"){t=t.slice(2);continue}else if(t[2]==="."&&t[3]==="/"){t=t.slice(3),n.length!==0&&n.pop();continue}}if((r=t.indexOf("/",1))===-1){n.push(t);break}else n.push(t.slice(0,r)),t=t.slice(r)}return n.join("")}function OLe(e,t){let n=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=n(e.scheme)),e.userinfo!==void 0&&(e.userinfo=n(e.userinfo)),e.host!==void 0&&(e.host=n(e.host)),e.path!==void 0&&(e.path=n(e.path)),e.query!==void 0&&(e.query=n(e.query)),e.fragment!==void 0&&(e.fragment=n(e.fragment)),e}function MLe(e){let t=[];if(e.userinfo!==void 0&&(t.push(e.userinfo),t.push("@")),e.host!==void 0){let n=unescape(e.host);if(!Dre(n)){let r=Pre(n);r.isIPV6===!0?n=`[${r.escapedHost}]`:n=e.host}t.push(n)}return(typeof e.port=="number"||typeof e.port=="string")&&(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0}Rre.exports={nonSimpleDomain:ILe,recomposeAuthority:MLe,normalizeComponentEncoding:OLe,removeDotSegments:ALe,isIPv4:Dre,isUUID:ELe,normalizeIPv6:Pre,stringArrayToHexStripped:QV}});var jre=ne((gwt,Fre)=>{"use strict";var{isUUID:DLe}=XV(),PLe=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,RLe=["http","https","ws","wss","urn","urn:uuid"];function NLe(e){return RLe.indexOf(e)!==-1}function e3(e){return e.secure===!0?!0:e.secure===!1?!1:e.scheme?e.scheme.length===3&&(e.scheme[0]==="w"||e.scheme[0]==="W")&&(e.scheme[1]==="s"||e.scheme[1]==="S")&&(e.scheme[2]==="s"||e.scheme[2]==="S"):!1}function Nre(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function $re(e){let t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function $Le(e){return e.secure=e3(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function LLe(e){if((e.port===(e3(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){let[t,n]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=n,e.resourceName=void 0}return e.fragment=void 0,e}function FLe(e,t){if(!e.path)return e.error="URN can not be parsed",e;let n=e.path.match(PLe);if(n){let r=t.scheme||e.scheme||"urn";e.nid=n[1].toLowerCase(),e.nss=n[2];let i=`${r}:${t.nid||e.nid}`,o=t3(i);e.path=void 0,o&&(e=o.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function jLe(e,t){if(e.nid===void 0)throw new Error("URN without nid cannot be serialized");let n=t.scheme||e.scheme||"urn",r=e.nid.toLowerCase(),i=`${n}:${t.nid||r}`,o=t3(i);o&&(e=o.serialize(e,t));let s=e,a=e.nss;return s.path=`${r||t.nid}:${a}`,t.skipEscape=!0,s}function zLe(e,t){let n=e;return n.uuid=n.nss,n.nss=void 0,!t.tolerant&&(!n.uuid||!DLe(n.uuid))&&(n.error=n.error||"UUID is not valid."),n}function BLe(e){let t=e;return t.nss=(e.uuid||"").toLowerCase(),t}var Lre={scheme:"http",domainHost:!0,parse:Nre,serialize:$re},ULe={scheme:"https",domainHost:Lre.domainHost,parse:Nre,serialize:$re},_D={scheme:"ws",domainHost:!0,parse:$Le,serialize:LLe},VLe={scheme:"wss",domainHost:_D.domainHost,parse:_D.parse,serialize:_D.serialize},HLe={scheme:"urn",parse:FLe,serialize:jLe,skipNormalize:!0},ZLe={scheme:"urn:uuid",parse:zLe,serialize:BLe,skipNormalize:!0},yD={http:Lre,https:ULe,ws:_D,wss:VLe,urn:HLe,"urn:uuid":ZLe};Object.setPrototypeOf(yD,null);function t3(e){return e&&(yD[e]||yD[e.toLowerCase()])||void 0}Fre.exports={wsIsSecure:e3,SCHEMES:yD,isValidSchemeName:NLe,getSchemeHandler:t3}});var Ure=ne((_wt,bD)=>{"use strict";var{normalizeIPv6:qLe,removeDotSegments:Qx,recomposeAuthority:GLe,normalizeComponentEncoding:vD,isIPv4:WLe,nonSimpleDomain:KLe}=XV(),{SCHEMES:JLe,getSchemeHandler:zre}=jre();function YLe(e,t){return typeof e=="string"?e=Bl(ld(e,t),t):typeof e=="object"&&(e=ld(Bl(e,t),t)),e}function QLe(e,t,n){let r=n?Object.assign({scheme:"null"},n):{scheme:"null"},i=Bre(ld(e,r),ld(t,r),r,!0);return r.skipEscape=!0,Bl(i,r)}function Bre(e,t,n,r){let i={};return r||(e=ld(Bl(e,n),n),t=ld(Bl(t,n),n)),n=n||{},!n.tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=Qx(t.path||""),i.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=Qx(t.path||""),i.query=t.query):(t.path?(t.path[0]==="/"?i.path=Qx(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?i.path="/"+t.path:e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path,i.path=Qx(i.path)),i.query=t.query):(i.path=e.path,t.query!==void 0?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function XLe(e,t,n){return typeof e=="string"?(e=unescape(e),e=Bl(vD(ld(e,n),!0),b(m({},n),{skipEscape:!0}))):typeof e=="object"&&(e=Bl(vD(e,!0),b(m({},n),{skipEscape:!0}))),typeof t=="string"?(t=unescape(t),t=Bl(vD(ld(t,n),!0),b(m({},n),{skipEscape:!0}))):typeof t=="object"&&(t=Bl(vD(t,!0),b(m({},n),{skipEscape:!0}))),e.toLowerCase()===t.toLowerCase()}function Bl(e,t){let n={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},r=Object.assign({},t),i=[],o=zre(r.scheme||n.scheme);o&&o.serialize&&o.serialize(n,r),n.path!==void 0&&(r.skipEscape?n.path=unescape(n.path):(n.path=escape(n.path),n.scheme!==void 0&&(n.path=n.path.split("%3A").join(":")))),r.reference!=="suffix"&&n.scheme&&i.push(n.scheme,":");let s=GLe(n);if(s!==void 0&&(r.reference!=="suffix"&&i.push("//"),i.push(s),n.path&&n.path[0]!=="/"&&i.push("/")),n.path!==void 0){let a=n.path;!r.absolutePath&&(!o||!o.absolutePath)&&(a=Qx(a)),s===void 0&&a[0]==="/"&&a[1]==="/"&&(a="/%2F"+a.slice(2)),i.push(a)}return n.query!==void 0&&i.push("?",n.query),n.fragment!==void 0&&i.push("#",n.fragment),i.join("")}var eFe=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function ld(e,t){let n=Object.assign({},t),r={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},i=!1;n.reference==="suffix"&&(n.scheme?e=n.scheme+":"+e:e="//"+e);let o=e.match(eFe);if(o){if(r.scheme=o[1],r.userinfo=o[3],r.host=o[4],r.port=parseInt(o[5],10),r.path=o[6]||"",r.query=o[7],r.fragment=o[8],isNaN(r.port)&&(r.port=o[5]),r.host)if(WLe(r.host)===!1){let c=qLe(r.host);r.host=c.host.toLowerCase(),i=c.isIPV6}else i=!0;r.scheme===void 0&&r.userinfo===void 0&&r.host===void 0&&r.port===void 0&&r.query===void 0&&!r.path?r.reference="same-document":r.scheme===void 0?r.reference="relative":r.fragment===void 0?r.reference="absolute":r.reference="uri",n.reference&&n.reference!=="suffix"&&n.reference!==r.reference&&(r.error=r.error||"URI is not a "+n.reference+" reference.");let s=zre(n.scheme||r.scheme);if(!n.unicodeSupport&&(!s||!s.unicodeSupport)&&r.host&&(n.domainHost||s&&s.domainHost)&&i===!1&&KLe(r.host))try{r.host=URL.domainToASCII(r.host.toLowerCase())}catch(a){r.error=r.error||"Host's domain name can not be converted to ASCII: "+a}(!s||s&&!s.skipNormalize)&&(e.indexOf("%")!==-1&&(r.scheme!==void 0&&(r.scheme=unescape(r.scheme)),r.host!==void 0&&(r.host=unescape(r.host))),r.path&&(r.path=escape(unescape(r.path))),r.fragment&&(r.fragment=encodeURI(decodeURIComponent(r.fragment)))),s&&s.parse&&s.parse(r,n)}else r.error=r.error||"URI can not be parsed.";return r}var n3={SCHEMES:JLe,normalize:YLe,resolve:QLe,resolveComponent:Bre,equal:XLe,serialize:Bl,parse:ld};bD.exports=n3;bD.exports.default=n3;bD.exports.fastUri=n3});var Hre=ne(r3=>{"use strict";Object.defineProperty(r3,"__esModule",{value:!0});var Vre=Ure();Vre.code='require("ajv/dist/runtime/uri").default';r3.default=Vre});var Qre=ne(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});xo.CodeGen=xo.Name=xo.nil=xo.stringify=xo.str=xo._=xo.KeywordCxt=void 0;var tFe=Jx();Object.defineProperty(xo,"KeywordCxt",{enumerable:!0,get:function(){return tFe.KeywordCxt}});var by=_n();Object.defineProperty(xo,"_",{enumerable:!0,get:function(){return by._}});Object.defineProperty(xo,"str",{enumerable:!0,get:function(){return by.str}});Object.defineProperty(xo,"stringify",{enumerable:!0,get:function(){return by.stringify}});Object.defineProperty(xo,"nil",{enumerable:!0,get:function(){return by.nil}});Object.defineProperty(xo,"Name",{enumerable:!0,get:function(){return by.Name}});Object.defineProperty(xo,"CodeGen",{enumerable:!0,get:function(){return by.CodeGen}});var nFe=fD(),Kre=Yx(),rFe=DV(),Xx=gD(),iFe=_n(),eC=Gx(),wD=qx(),o3=Un(),Zre=Ore(),oFe=Hre(),Jre=(e,t)=>new RegExp(e,t);Jre.code="new RegExp";var sFe=["removeAdditional","useDefaults","coerceTypes"],aFe=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),cFe={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},lFe={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},qre=200;function uFe(e){var t,n,r,i,o,s,a,c,u,d,f,g,h,v,x,E,C,S,A,P,F,B,ee,D,pe;let xe=e.strict,Ge=(t=e.code)===null||t===void 0?void 0:t.optimize,fe=Ge===!0||Ge===void 0?1:Ge||0,Se=(r=(n=e.code)===null||n===void 0?void 0:n.regExp)!==null&&r!==void 0?r:Jre,Fe=(i=e.uriResolver)!==null&&i!==void 0?i:oFe.default;return{strictSchema:(s=(o=e.strictSchema)!==null&&o!==void 0?o:xe)!==null&&s!==void 0?s:!0,strictNumbers:(c=(a=e.strictNumbers)!==null&&a!==void 0?a:xe)!==null&&c!==void 0?c:!0,strictTypes:(d=(u=e.strictTypes)!==null&&u!==void 0?u:xe)!==null&&d!==void 0?d:"log",strictTuples:(g=(f=e.strictTuples)!==null&&f!==void 0?f:xe)!==null&&g!==void 0?g:"log",strictRequired:(v=(h=e.strictRequired)!==null&&h!==void 0?h:xe)!==null&&v!==void 0?v:!1,code:e.code?b(m({},e.code),{optimize:fe,regExp:Se}):{optimize:fe,regExp:Se},loopRequired:(x=e.loopRequired)!==null&&x!==void 0?x:qre,loopEnum:(E=e.loopEnum)!==null&&E!==void 0?E:qre,meta:(C=e.meta)!==null&&C!==void 0?C:!0,messages:(S=e.messages)!==null&&S!==void 0?S:!0,inlineRefs:(A=e.inlineRefs)!==null&&A!==void 0?A:!0,schemaId:(P=e.schemaId)!==null&&P!==void 0?P:"$id",addUsedSchema:(F=e.addUsedSchema)!==null&&F!==void 0?F:!0,validateSchema:(B=e.validateSchema)!==null&&B!==void 0?B:!0,validateFormats:(ee=e.validateFormats)!==null&&ee!==void 0?ee:!0,unicodeRegExp:(D=e.unicodeRegExp)!==null&&D!==void 0?D:!0,int32range:(pe=e.int32range)!==null&&pe!==void 0?pe:!0,uriResolver:Fe}}var tC=class{constructor(t={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,t=this.opts=m(m({},t),uFe(t));let{es5:n,lines:r}=this.opts.code;this.scope=new iFe.ValueScope({scope:{},prefixes:aFe,es5:n,lines:r}),this.logger=gFe(t.logger);let i=t.validateFormats;t.validateFormats=!1,this.RULES=(0,rFe.getRules)(),Gre.call(this,cFe,t,"NOT SUPPORTED"),Gre.call(this,lFe,t,"DEPRECATED","warn"),this._metaOpts=fFe.call(this),t.formats&&pFe.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&mFe.call(this,t.keywords),typeof t.meta=="object"&&this.addMetaSchema(t.meta),dFe.call(this),t.validateFormats=i}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:t,meta:n,schemaId:r}=this.opts,i=Zre;r==="id"&&(i=m({},Zre),i.id=i.$id,delete i.$id),n&&t&&this.addMetaSchema(i,i[r],!1)}defaultMeta(){let{meta:t,schemaId:n}=this.opts;return this.opts.defaultMeta=typeof t=="object"?t[n]||t:void 0}validate(t,n){let r;if(typeof t=="string"){if(r=this.getSchema(t),!r)throw new Error(`no schema with key or ref "${t}"`)}else r=this.compile(t);let i=r(n);return"$async"in r||(this.errors=r.errors),i}compile(t,n){let r=this._addSchema(t,n);return r.validate||this._compileSchemaEnv(r)}compileAsync(t,n){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:r}=this.opts;return i.call(this,t,n);function i(d,f){return y(this,null,function*(){yield o.call(this,d.$schema);let g=this._addSchema(d,f);return g.validate||s.call(this,g)})}function o(d){return y(this,null,function*(){d&&!this.getSchema(d)&&(yield i.call(this,{$ref:d},!0))})}function s(d){return y(this,null,function*(){try{return this._compileSchemaEnv(d)}catch(f){if(!(f instanceof Kre.default))throw f;return a.call(this,f),yield c.call(this,f.missingSchema),s.call(this,d)}})}function a({missingSchema:d,missingRef:f}){if(this.refs[d])throw new Error(`AnySchema ${d} is loaded but ${f} cannot be resolved`)}function c(d){return y(this,null,function*(){let f=yield u.call(this,d);this.refs[d]||(yield o.call(this,f.$schema)),this.refs[d]||this.addSchema(f,d,n)})}function u(d){return y(this,null,function*(){let f=this._loading[d];if(f)return f;try{return yield this._loading[d]=r(d)}finally{delete this._loading[d]}})}}addSchema(t,n,r,i=this.opts.validateSchema){if(Array.isArray(t)){for(let s of t)this.addSchema(s,void 0,r,i);return this}let o;if(typeof t=="object"){let{schemaId:s}=this.opts;if(o=t[s],o!==void 0&&typeof o!="string")throw new Error(`schema ${s} must be string`)}return n=(0,eC.normalizeId)(n||o),this._checkUnique(n),this.schemas[n]=this._addSchema(t,r,n,i,!0),this}addMetaSchema(t,n,r=this.opts.validateSchema){return this.addSchema(t,n,!0,r),this}validateSchema(t,n){if(typeof t=="boolean")return!0;let r;if(r=t.$schema,r!==void 0&&typeof r!="string")throw new Error("$schema must be a string");if(r=r||this.opts.defaultMeta||this.defaultMeta(),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let i=this.validate(r,t);if(!i&&n){let o="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(o);else throw new Error(o)}return i}getSchema(t){let n;for(;typeof(n=Wre.call(this,t))=="string";)t=n;if(n===void 0){let{schemaId:r}=this.opts,i=new Xx.SchemaEnv({schema:{},schemaId:r});if(n=Xx.resolveSchema.call(this,i,t),!n)return;this.refs[t]=n}return n.validate||this._compileSchemaEnv(n)}removeSchema(t){if(t instanceof RegExp)return this._removeAllSchemas(this.schemas,t),this._removeAllSchemas(this.refs,t),this;switch(typeof t){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let n=Wre.call(this,t);return typeof n=="object"&&this._cache.delete(n.schema),delete this.schemas[t],delete this.refs[t],this}case"object":{let n=t;this._cache.delete(n);let r=t[this.opts.schemaId];return r&&(r=(0,eC.normalizeId)(r),delete this.schemas[r],delete this.refs[r]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(t){for(let n of t)this.addKeyword(n);return this}addKeyword(t,n){let r;if(typeof t=="string")r=t,typeof n=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),n.keyword=r);else if(typeof t=="object"&&n===void 0){if(n=t,r=n.keyword,Array.isArray(r)&&!r.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(yFe.call(this,r,n),!n)return(0,o3.eachItem)(r,o=>i3.call(this,o)),this;bFe.call(this,n);let i=b(m({},n),{type:(0,wD.getJSONTypes)(n.type),schemaType:(0,wD.getJSONTypes)(n.schemaType)});return(0,o3.eachItem)(r,i.type.length===0?o=>i3.call(this,o,i):o=>i.type.forEach(s=>i3.call(this,o,i,s))),this}getKeyword(t){let n=this.RULES.all[t];return typeof n=="object"?n.definition:!!n}removeKeyword(t){let{RULES:n}=this;delete n.keywords[t],delete n.all[t];for(let r of n.rules){let i=r.rules.findIndex(o=>o.keyword===t);i>=0&&r.rules.splice(i,1)}return this}addFormat(t,n){return typeof n=="string"&&(n=new RegExp(n)),this.formats[t]=n,this}errorsText(t=this.errors,{separator:n=", ",dataVar:r="data"}={}){return!t||t.length===0?"No errors":t.map(i=>`${r}${i.instancePath} ${i.message}`).reduce((i,o)=>i+n+o)}$dataMetaSchema(t,n){let r=this.RULES.all;t=JSON.parse(JSON.stringify(t));for(let i of n){let o=i.split("/").slice(1),s=t;for(let a of o)s=s[a];for(let a in r){let c=r[a];if(typeof c!="object")continue;let{$data:u}=c.definition,d=s[a];u&&d&&(s[a]=Yre(d))}}return t}_removeAllSchemas(t,n){for(let r in t){let i=t[r];(!n||n.test(r))&&(typeof i=="string"?delete t[r]:i&&!i.meta&&(this._cache.delete(i.schema),delete t[r]))}}_addSchema(t,n,r,i=this.opts.validateSchema,o=this.opts.addUsedSchema){let s,{schemaId:a}=this.opts;if(typeof t=="object")s=t[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof t!="boolean")throw new Error("schema must be object or boolean")}let c=this._cache.get(t);if(c!==void 0)return c;r=(0,eC.normalizeId)(s||r);let u=eC.getSchemaRefs.call(this,t,r);return c=new Xx.SchemaEnv({schema:t,schemaId:a,meta:n,baseId:r,localRefs:u}),this._cache.set(c.schema,c),o&&!r.startsWith("#")&&(r&&this._checkUnique(r),this.refs[r]=c),i&&this.validateSchema(t,!0),c}_checkUnique(t){if(this.schemas[t]||this.refs[t])throw new Error(`schema with key or id "${t}" already exists`)}_compileSchemaEnv(t){if(t.meta?this._compileMetaSchema(t):Xx.compileSchema.call(this,t),!t.validate)throw new Error("ajv implementation error");return t.validate}_compileMetaSchema(t){let n=this.opts;this.opts=this._metaOpts;try{Xx.compileSchema.call(this,t)}finally{this.opts=n}}};tC.ValidationError=nFe.default;tC.MissingRefError=Kre.default;xo.default=tC;function Gre(e,t,n,r="error"){for(let i in e){let o=i;o in t&&this.logger[r](`${n}: option ${i}. ${e[o]}`)}}function Wre(e){return e=(0,eC.normalizeId)(e),this.schemas[e]||this.refs[e]}function dFe(){let e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(let t in e)this.addSchema(e[t],t)}function pFe(){for(let e in this.opts.formats){let t=this.opts.formats[e];t&&this.addFormat(e,t)}}function mFe(e){if(Array.isArray(e)){this.addVocabulary(e);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let t in e){let n=e[t];n.keyword||(n.keyword=t),this.addKeyword(n)}}function fFe(){let e=m({},this.opts);for(let t of sFe)delete e[t];return e}var hFe={log(){},warn(){},error(){}};function gFe(e){if(e===!1)return hFe;if(e===void 0)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}var _Fe=/^[a-z_$][a-z0-9_$:-]*$/i;function yFe(e,t){let{RULES:n}=this;if((0,o3.eachItem)(e,r=>{if(n.keywords[r])throw new Error(`Keyword ${r} is already defined`);if(!_Fe.test(r))throw new Error(`Keyword ${r} has invalid name`)}),!!t&&t.$data&&!("code"in t||"validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function i3(e,t,n){var r;let i=t?.post;if(n&&i)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:o}=this,s=i?o.post:o.rules.find(({type:c})=>c===n);if(s||(s={type:n,rules:[]},o.rules.push(s)),o.keywords[e]=!0,!t)return;let a={keyword:e,definition:b(m({},t),{type:(0,wD.getJSONTypes)(t.type),schemaType:(0,wD.getJSONTypes)(t.schemaType)})};t.before?vFe.call(this,s,a,t.before):s.rules.push(a),o.all[e]=a,(r=t.implements)===null||r===void 0||r.forEach(c=>this.addKeyword(c))}function vFe(e,t,n){let r=e.rules.findIndex(i=>i.keyword===n);r>=0?e.rules.splice(r,0,t):(e.rules.push(t),this.logger.warn(`rule ${n} is not defined`))}function bFe(e){let{metaSchema:t}=e;t!==void 0&&(e.$data&&this.opts.$data&&(t=Yre(t)),e.validateSchema=this.compile(t,!0))}var wFe={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Yre(e){return{anyOf:[e,wFe]}}});var Xre=ne(s3=>{"use strict";Object.defineProperty(s3,"__esModule",{value:!0});var xFe={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};s3.default=xFe});var rie=ne(Zf=>{"use strict";Object.defineProperty(Zf,"__esModule",{value:!0});Zf.callRef=Zf.getValidate=void 0;var CFe=Yx(),eie=Qa(),ea=_n(),wy=ad(),tie=gD(),xD=Un(),EFe={keyword:"$ref",schemaType:"string",code(e){let{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:o,validateName:s,opts:a,self:c}=r,{root:u}=o;if((n==="#"||n==="#/")&&i===u.baseId)return f();let d=tie.resolveRef.call(c,u,i,n);if(d===void 0)throw new CFe.default(r.opts.uriResolver,i,n);if(d instanceof tie.SchemaEnv)return g(d);return h(d);function f(){if(o===u)return CD(e,s,o,o.$async);let v=t.scopeValue("root",{ref:u});return CD(e,(0,ea._)`${v}.validate`,u,u.$async)}function g(v){let x=nie(e,v);CD(e,x,v,v.$async)}function h(v){let x=t.scopeValue("schema",a.code.source===!0?{ref:v,code:(0,ea.stringify)(v)}:{ref:v}),E=t.name("valid"),C=e.subschema({schema:v,dataTypes:[],schemaPath:ea.nil,topSchemaRef:x,errSchemaPath:n},E);e.mergeEvaluated(C),e.ok(E)}}};function nie(e,t){let{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,ea._)`${n.scopeValue("wrapper",{ref:t})}.validate`}Zf.getValidate=nie;function CD(e,t,n,r){let{gen:i,it:o}=e,{allErrors:s,schemaEnv:a,opts:c}=o,u=c.passContext?wy.default.this:ea.nil;r?d():f();function d(){if(!a.$async)throw new Error("async schema referenced by sync schema");let v=i.let("valid");i.try(()=>{i.code((0,ea._)`await ${(0,eie.callValidateCode)(e,t,u)}`),h(t),s||i.assign(v,!0)},x=>{i.if((0,ea._)`!(${x} instanceof ${o.ValidationError})`,()=>i.throw(x)),g(x),s||i.assign(v,!1)}),e.ok(v)}function f(){e.result((0,eie.callValidateCode)(e,t,u),()=>h(t),()=>g(t))}function g(v){let x=(0,ea._)`${v}.errors`;i.assign(wy.default.vErrors,(0,ea._)`${wy.default.vErrors} === null ? ${x} : ${wy.default.vErrors}.concat(${x})`),i.assign(wy.default.errors,(0,ea._)`${wy.default.vErrors}.length`)}function h(v){var x;if(!o.opts.unevaluated)return;let E=(x=n?.validate)===null||x===void 0?void 0:x.evaluated;if(o.props!==!0)if(E&&!E.dynamicProps)E.props!==void 0&&(o.props=xD.mergeEvaluated.props(i,E.props,o.props));else{let C=i.var("props",(0,ea._)`${v}.evaluated.props`);o.props=xD.mergeEvaluated.props(i,C,o.props,ea.Name)}if(o.items!==!0)if(E&&!E.dynamicItems)E.items!==void 0&&(o.items=xD.mergeEvaluated.items(i,E.items,o.items));else{let C=i.var("items",(0,ea._)`${v}.evaluated.items`);o.items=xD.mergeEvaluated.items(i,C,o.items,ea.Name)}}}Zf.callRef=CD;Zf.default=EFe});var iie=ne(a3=>{"use strict";Object.defineProperty(a3,"__esModule",{value:!0});var IFe=Xre(),SFe=rie(),kFe=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",IFe.default,SFe.default];a3.default=kFe});var oie=ne(c3=>{"use strict";Object.defineProperty(c3,"__esModule",{value:!0});var ED=_n(),Vp=ED.operators,ID={maximum:{okStr:"<=",ok:Vp.LTE,fail:Vp.GT},minimum:{okStr:">=",ok:Vp.GTE,fail:Vp.LT},exclusiveMaximum:{okStr:"<",ok:Vp.LT,fail:Vp.GTE},exclusiveMinimum:{okStr:">",ok:Vp.GT,fail:Vp.LTE}},TFe={message:({keyword:e,schemaCode:t})=>(0,ED.str)`must be ${ID[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,ED._)`{comparison: ${ID[e].okStr}, limit: ${t}}`},AFe={keyword:Object.keys(ID),type:"number",schemaType:"number",$data:!0,error:TFe,code(e){let{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,ED._)`${n} ${ID[t].fail} ${r} || isNaN(${n})`)}};c3.default=AFe});var sie=ne(l3=>{"use strict";Object.defineProperty(l3,"__esModule",{value:!0});var nC=_n(),OFe={message:({schemaCode:e})=>(0,nC.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,nC._)`{multipleOf: ${e}}`},MFe={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:OFe,code(e){let{gen:t,data:n,schemaCode:r,it:i}=e,o=i.opts.multipleOfPrecision,s=t.let("res"),a=o?(0,nC._)`Math.abs(Math.round(${s}) - ${s}) > 1e-${o}`:(0,nC._)`${s} !== parseInt(${s})`;e.fail$data((0,nC._)`(${r} === 0 || (${s} = ${n}/${r}, ${a}))`)}};l3.default=MFe});var cie=ne(u3=>{"use strict";Object.defineProperty(u3,"__esModule",{value:!0});function aie(e){let t=e.length,n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}u3.default=aie;aie.code='require("ajv/dist/runtime/ucs2length").default'});var lie=ne(d3=>{"use strict";Object.defineProperty(d3,"__esModule",{value:!0});var qf=_n(),DFe=Un(),PFe=cie(),RFe={message({keyword:e,schemaCode:t}){let n=e==="maxLength"?"more":"fewer";return(0,qf.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,qf._)`{limit: ${e}}`},NFe={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:RFe,code(e){let{keyword:t,data:n,schemaCode:r,it:i}=e,o=t==="maxLength"?qf.operators.GT:qf.operators.LT,s=i.opts.unicode===!1?(0,qf._)`${n}.length`:(0,qf._)`${(0,DFe.useFunc)(e.gen,PFe.default)}(${n})`;e.fail$data((0,qf._)`${s} ${o} ${r}`)}};d3.default=NFe});var uie=ne(p3=>{"use strict";Object.defineProperty(p3,"__esModule",{value:!0});var $Fe=Qa(),SD=_n(),LFe={message:({schemaCode:e})=>(0,SD.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,SD._)`{pattern: ${e}}`},FFe={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:LFe,code(e){let{data:t,$data:n,schema:r,schemaCode:i,it:o}=e,s=o.opts.unicodeRegExp?"u":"",a=n?(0,SD._)`(new RegExp(${i}, ${s}))`:(0,$Fe.usePattern)(e,r);e.fail$data((0,SD._)`!${a}.test(${t})`)}};p3.default=FFe});var die=ne(m3=>{"use strict";Object.defineProperty(m3,"__esModule",{value:!0});var rC=_n(),jFe={message({keyword:e,schemaCode:t}){let n=e==="maxProperties"?"more":"fewer";return(0,rC.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,rC._)`{limit: ${e}}`},zFe={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:jFe,code(e){let{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?rC.operators.GT:rC.operators.LT;e.fail$data((0,rC._)`Object.keys(${n}).length ${i} ${r}`)}};m3.default=zFe});var pie=ne(f3=>{"use strict";Object.defineProperty(f3,"__esModule",{value:!0});var iC=Qa(),oC=_n(),BFe=Un(),UFe={message:({params:{missingProperty:e}})=>(0,oC.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,oC._)`{missingProperty: ${e}}`},VFe={keyword:"required",type:"object",schemaType:"array",$data:!0,error:UFe,code(e){let{gen:t,schema:n,schemaCode:r,data:i,$data:o,it:s}=e,{opts:a}=s;if(!o&&n.length===0)return;let c=n.length>=a.loopRequired;if(s.allErrors?u():d(),a.strictRequired){let h=e.parentSchema.properties,{definedProperties:v}=e.it;for(let x of n)if(h?.[x]===void 0&&!v.has(x)){let E=s.schemaEnv.baseId+s.errSchemaPath,C=`required property "${x}" is not defined at "${E}" (strictRequired)`;(0,BFe.checkStrictMode)(s,C,s.opts.strictRequired)}}function u(){if(c||o)e.block$data(oC.nil,f);else for(let h of n)(0,iC.checkReportMissingProp)(e,h)}function d(){let h=t.let("missing");if(c||o){let v=t.let("valid",!0);e.block$data(v,()=>g(h,v)),e.ok(v)}else t.if((0,iC.checkMissingProp)(e,n,h)),(0,iC.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,iC.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function g(h,v){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(v,(0,iC.propertyInData)(t,i,h,a.ownProperties)),t.if((0,oC.not)(v),()=>{e.error(),t.break()})},oC.nil)}}};f3.default=VFe});var mie=ne(h3=>{"use strict";Object.defineProperty(h3,"__esModule",{value:!0});var sC=_n(),HFe={message({keyword:e,schemaCode:t}){let n=e==="maxItems"?"more":"fewer";return(0,sC.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,sC._)`{limit: ${e}}`},ZFe={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:HFe,code(e){let{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?sC.operators.GT:sC.operators.LT;e.fail$data((0,sC._)`${n}.length ${i} ${r}`)}};h3.default=ZFe});var kD=ne(g3=>{"use strict";Object.defineProperty(g3,"__esModule",{value:!0});var fie=zV();fie.code='require("ajv/dist/runtime/equal").default';g3.default=fie});var hie=ne(y3=>{"use strict";Object.defineProperty(y3,"__esModule",{value:!0});var _3=qx(),Co=_n(),qFe=Un(),GFe=kD(),WFe={message:({params:{i:e,j:t}})=>(0,Co.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Co._)`{i: ${e}, j: ${t}}`},KFe={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:WFe,code(e){let{gen:t,data:n,$data:r,schema:i,parentSchema:o,schemaCode:s,it:a}=e;if(!r&&!i)return;let c=t.let("valid"),u=o.items?(0,_3.getSchemaTypes)(o.items):[];e.block$data(c,d,(0,Co._)`${s} === false`),e.ok(c);function d(){let v=t.let("i",(0,Co._)`${n}.length`),x=t.let("j");e.setParams({i:v,j:x}),t.assign(c,!0),t.if((0,Co._)`${v} > 1`,()=>(f()?g:h)(v,x))}function f(){return u.length>0&&!u.some(v=>v==="object"||v==="array")}function g(v,x){let E=t.name("item"),C=(0,_3.checkDataTypes)(u,E,a.opts.strictNumbers,_3.DataType.Wrong),S=t.const("indices",(0,Co._)`{}`);t.for((0,Co._)`;${v}--;`,()=>{t.let(E,(0,Co._)`${n}[${v}]`),t.if(C,(0,Co._)`continue`),u.length>1&&t.if((0,Co._)`typeof ${E} == "string"`,(0,Co._)`${E} += "_"`),t.if((0,Co._)`typeof ${S}[${E}] == "number"`,()=>{t.assign(x,(0,Co._)`${S}[${E}]`),e.error(),t.assign(c,!1).break()}).code((0,Co._)`${S}[${E}] = ${v}`)})}function h(v,x){let E=(0,qFe.useFunc)(t,GFe.default),C=t.name("outer");t.label(C).for((0,Co._)`;${v}--;`,()=>t.for((0,Co._)`${x} = ${v}; ${x}--;`,()=>t.if((0,Co._)`${E}(${n}[${v}], ${n}[${x}])`,()=>{e.error(),t.assign(c,!1).break(C)})))}}};y3.default=KFe});var gie=ne(b3=>{"use strict";Object.defineProperty(b3,"__esModule",{value:!0});var v3=_n(),JFe=Un(),YFe=kD(),QFe={message:"must be equal to constant",params:({schemaCode:e})=>(0,v3._)`{allowedValue: ${e}}`},XFe={keyword:"const",$data:!0,error:QFe,code(e){let{gen:t,data:n,$data:r,schemaCode:i,schema:o}=e;r||o&&typeof o=="object"?e.fail$data((0,v3._)`!${(0,JFe.useFunc)(t,YFe.default)}(${n}, ${i})`):e.fail((0,v3._)`${o} !== ${n}`)}};b3.default=XFe});var _ie=ne(w3=>{"use strict";Object.defineProperty(w3,"__esModule",{value:!0});var aC=_n(),eje=Un(),tje=kD(),nje={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,aC._)`{allowedValues: ${e}}`},rje={keyword:"enum",schemaType:"array",$data:!0,error:nje,code(e){let{gen:t,data:n,$data:r,schema:i,schemaCode:o,it:s}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");let a=i.length>=s.opts.loopEnum,c,u=()=>c??(c=(0,eje.useFunc)(t,tje.default)),d;if(a||r)d=t.let("valid"),e.block$data(d,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");let h=t.const("vSchema",o);d=(0,aC.or)(...i.map((v,x)=>g(h,x)))}e.pass(d);function f(){t.assign(d,!1),t.forOf("v",o,h=>t.if((0,aC._)`${u()}(${n}, ${h})`,()=>t.assign(d,!0).break()))}function g(h,v){let x=i[v];return typeof x=="object"&&x!==null?(0,aC._)`${u()}(${n}, ${h}[${v}])`:(0,aC._)`${n} === ${x}`}}};w3.default=rje});var yie=ne(x3=>{"use strict";Object.defineProperty(x3,"__esModule",{value:!0});var ije=oie(),oje=sie(),sje=lie(),aje=uie(),cje=die(),lje=pie(),uje=mie(),dje=hie(),pje=gie(),mje=_ie(),fje=[ije.default,oje.default,sje.default,aje.default,cje.default,lje.default,uje.default,dje.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},pje.default,mje.default];x3.default=fje});var E3=ne(cC=>{"use strict";Object.defineProperty(cC,"__esModule",{value:!0});cC.validateAdditionalItems=void 0;var Gf=_n(),C3=Un(),hje={message:({params:{len:e}})=>(0,Gf.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Gf._)`{limit: ${e}}`},gje={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:hje,code(e){let{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,C3.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}vie(e,r)}};function vie(e,t){let{gen:n,schema:r,data:i,keyword:o,it:s}=e;s.items=!0;let a=n.const("len",(0,Gf._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,Gf._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,C3.alwaysValidSchema)(s,r)){let u=n.var("valid",(0,Gf._)`${a} <= ${t.length}`);n.if((0,Gf.not)(u),()=>c(u)),e.ok(u)}function c(u){n.forRange("i",t.length,a,d=>{e.subschema({keyword:o,dataProp:d,dataPropType:C3.Type.Num},u),s.allErrors||n.if((0,Gf.not)(u),()=>n.break())})}}cC.validateAdditionalItems=vie;cC.default=gje});var I3=ne(lC=>{"use strict";Object.defineProperty(lC,"__esModule",{value:!0});lC.validateTuple=void 0;var bie=_n(),TD=Un(),_je=Qa(),yje={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){let{schema:t,it:n}=e;if(Array.isArray(t))return wie(e,"additionalItems",t);n.items=!0,!(0,TD.alwaysValidSchema)(n,t)&&e.ok((0,_je.validateArray)(e))}};function wie(e,t,n=e.schema){let{gen:r,parentSchema:i,data:o,keyword:s,it:a}=e;d(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=TD.mergeEvaluated.items(r,n.length,a.items));let c=r.name("valid"),u=r.const("len",(0,bie._)`${o}.length`);n.forEach((f,g)=>{(0,TD.alwaysValidSchema)(a,f)||(r.if((0,bie._)`${u} > ${g}`,()=>e.subschema({keyword:s,schemaProp:g,dataProp:g},c)),e.ok(c))});function d(f){let{opts:g,errSchemaPath:h}=a,v=n.length,x=v===f.minItems&&(v===f.maxItems||f[t]===!1);if(g.strictTuples&&!x){let E=`"${s}" is ${v}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,TD.checkStrictMode)(a,E,g.strictTuples)}}}lC.validateTuple=wie;lC.default=yje});var xie=ne(S3=>{"use strict";Object.defineProperty(S3,"__esModule",{value:!0});var vje=I3(),bje={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,vje.validateTuple)(e,"items")};S3.default=bje});var Eie=ne(k3=>{"use strict";Object.defineProperty(k3,"__esModule",{value:!0});var Cie=_n(),wje=Un(),xje=Qa(),Cje=E3(),Eje={message:({params:{len:e}})=>(0,Cie.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Cie._)`{limit: ${e}}`},Ije={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Eje,code(e){let{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,wje.alwaysValidSchema)(r,t)&&(i?(0,Cje.validateAdditionalItems)(e,i):e.ok((0,xje.validateArray)(e)))}};k3.default=Ije});var Iie=ne(T3=>{"use strict";Object.defineProperty(T3,"__esModule",{value:!0});var ec=_n(),AD=Un(),Sje={message:({params:{min:e,max:t}})=>t===void 0?(0,ec.str)`must contain at least ${e} valid item(s)`:(0,ec.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,ec._)`{minContains: ${e}}`:(0,ec._)`{minContains: ${e}, maxContains: ${t}}`},kje={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Sje,code(e){let{gen:t,schema:n,parentSchema:r,data:i,it:o}=e,s,a,{minContains:c,maxContains:u}=r;o.opts.next?(s=c===void 0?1:c,a=u):s=1;let d=t.const("len",(0,ec._)`${i}.length`);if(e.setParams({min:s,max:a}),a===void 0&&s===0){(0,AD.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&s>a){(0,AD.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,AD.alwaysValidSchema)(o,n)){let x=(0,ec._)`${d} >= ${s}`;a!==void 0&&(x=(0,ec._)`${x} && ${d} <= ${a}`),e.pass(x);return}o.items=!0;let f=t.name("valid");a===void 0&&s===1?h(f,()=>t.if(f,()=>t.break())):s===0?(t.let(f,!0),a!==void 0&&t.if((0,ec._)`${i}.length > 0`,g)):(t.let(f,!1),g()),e.result(f,()=>e.reset());function g(){let x=t.name("_valid"),E=t.let("count",0);h(x,()=>t.if(x,()=>v(E)))}function h(x,E){t.forRange("i",0,d,C=>{e.subschema({keyword:"contains",dataProp:C,dataPropType:AD.Type.Num,compositeRule:!0},x),E()})}function v(x){t.code((0,ec._)`${x}++`),a===void 0?t.if((0,ec._)`${x} >= ${s}`,()=>t.assign(f,!0).break()):(t.if((0,ec._)`${x} > ${a}`,()=>t.assign(f,!1).break()),s===1?t.assign(f,!0):t.if((0,ec._)`${x} >= ${s}`,()=>t.assign(f,!0)))}}};T3.default=kje});var Tie=ne(Ul=>{"use strict";Object.defineProperty(Ul,"__esModule",{value:!0});Ul.validateSchemaDeps=Ul.validatePropertyDeps=Ul.error=void 0;var A3=_n(),Tje=Un(),uC=Qa();Ul.error={message:({params:{property:e,depsCount:t,deps:n}})=>{let r=t===1?"property":"properties";return(0,A3.str)`must have ${r} ${n} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:n,missingProperty:r}})=>(0,A3._)`{property: ${e},
    missingProperty: ${r},
    depsCount: ${t},
    deps: ${n}}`};var Aje={keyword:"dependencies",type:"object",schemaType:"object",error:Ul.error,code(e){let[t,n]=Oje(e);Sie(e,t),kie(e,n)}};function Oje({schema:e}){let t={},n={};for(let r in e){if(r==="__proto__")continue;let i=Array.isArray(e[r])?t:n;i[r]=e[r]}return[t,n]}function Sie(e,t=e.schema){let{gen:n,data:r,it:i}=e;if(Object.keys(t).length===0)return;let o=n.let("missing");for(let s in t){let a=t[s];if(a.length===0)continue;let c=(0,uC.propertyInData)(n,r,s,i.opts.ownProperties);e.setParams({property:s,depsCount:a.length,deps:a.join(", ")}),i.allErrors?n.if(c,()=>{for(let u of a)(0,uC.checkReportMissingProp)(e,u)}):(n.if((0,A3._)`${c} && (${(0,uC.checkMissingProp)(e,a,o)})`),(0,uC.reportMissingProp)(e,o),n.else())}}Ul.validatePropertyDeps=Sie;function kie(e,t=e.schema){let{gen:n,data:r,keyword:i,it:o}=e,s=n.name("valid");for(let a in t)(0,Tje.alwaysValidSchema)(o,t[a])||(n.if((0,uC.propertyInData)(n,r,a,o.opts.ownProperties),()=>{let c=e.subschema({keyword:i,schemaProp:a},s);e.mergeValidEvaluated(c,s)},()=>n.var(s,!0)),e.ok(s))}Ul.validateSchemaDeps=kie;Ul.default=Aje});var Oie=ne(O3=>{"use strict";Object.defineProperty(O3,"__esModule",{value:!0});var Aie=_n(),Mje=Un(),Dje={message:"property name must be valid",params:({params:e})=>(0,Aie._)`{propertyName: ${e.propertyName}}`},Pje={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Dje,code(e){let{gen:t,schema:n,data:r,it:i}=e;if((0,Mje.alwaysValidSchema)(i,n))return;let o=t.name("valid");t.forIn("key",r,s=>{e.setParams({propertyName:s}),e.subschema({keyword:"propertyNames",data:s,dataTypes:["string"],propertyName:s,compositeRule:!0},o),t.if((0,Aie.not)(o),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(o)}};O3.default=Pje});var D3=ne(M3=>{"use strict";Object.defineProperty(M3,"__esModule",{value:!0});var OD=Qa(),Nc=_n(),Rje=ad(),MD=Un(),Nje={message:"must NOT have additional properties",params:({params:e})=>(0,Nc._)`{additionalProperty: ${e.additionalProperty}}`},$je={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Nje,code(e){let{gen:t,schema:n,parentSchema:r,data:i,errsCount:o,it:s}=e;if(!o)throw new Error("ajv implementation error");let{allErrors:a,opts:c}=s;if(s.props=!0,c.removeAdditional!=="all"&&(0,MD.alwaysValidSchema)(s,n))return;let u=(0,OD.allSchemaProperties)(r.properties),d=(0,OD.allSchemaProperties)(r.patternProperties);f(),e.ok((0,Nc._)`${o} === ${Rje.default.errors}`);function f(){t.forIn("key",i,E=>{!u.length&&!d.length?v(E):t.if(g(E),()=>v(E))})}function g(E){let C;if(u.length>8){let S=(0,MD.schemaRefOrVal)(s,r.properties,"properties");C=(0,OD.isOwnProperty)(t,S,E)}else u.length?C=(0,Nc.or)(...u.map(S=>(0,Nc._)`${E} === ${S}`)):C=Nc.nil;return d.length&&(C=(0,Nc.or)(C,...d.map(S=>(0,Nc._)`${(0,OD.usePattern)(e,S)}.test(${E})`))),(0,Nc.not)(C)}function h(E){t.code((0,Nc._)`delete ${i}[${E}]`)}function v(E){if(c.removeAdditional==="all"||c.removeAdditional&&n===!1){h(E);return}if(n===!1){e.setParams({additionalProperty:E}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,MD.alwaysValidSchema)(s,n)){let C=t.name("valid");c.removeAdditional==="failing"?(x(E,C,!1),t.if((0,Nc.not)(C),()=>{e.reset(),h(E)})):(x(E,C),a||t.if((0,Nc.not)(C),()=>t.break()))}}function x(E,C,S){let A={keyword:"additionalProperties",dataProp:E,dataPropType:MD.Type.Str};S===!1&&Object.assign(A,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(A,C)}}};M3.default=$je});var Pie=ne(R3=>{"use strict";Object.defineProperty(R3,"__esModule",{value:!0});var Lje=Jx(),Mie=Qa(),P3=Un(),Die=D3(),Fje={keyword:"properties",type:"object",schemaType:"object",code(e){let{gen:t,schema:n,parentSchema:r,data:i,it:o}=e;o.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Die.default.code(new Lje.KeywordCxt(o,Die.default,"additionalProperties"));let s=(0,Mie.allSchemaProperties)(n);for(let f of s)o.definedProperties.add(f);o.opts.unevaluated&&s.length&&o.props!==!0&&(o.props=P3.mergeEvaluated.props(t,(0,P3.toHash)(s),o.props));let a=s.filter(f=>!(0,P3.alwaysValidSchema)(o,n[f]));if(a.length===0)return;let c=t.name("valid");for(let f of a)u(f)?d(f):(t.if((0,Mie.propertyInData)(t,i,f,o.opts.ownProperties)),d(f),o.allErrors||t.else().var(c,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(c);function u(f){return o.opts.useDefaults&&!o.compositeRule&&n[f].default!==void 0}function d(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},c)}}};R3.default=Fje});var Lie=ne(N3=>{"use strict";Object.defineProperty(N3,"__esModule",{value:!0});var Rie=Qa(),DD=_n(),Nie=Un(),$ie=Un(),jje={keyword:"patternProperties",type:"object",schemaType:"object",code(e){let{gen:t,schema:n,data:r,parentSchema:i,it:o}=e,{opts:s}=o,a=(0,Rie.allSchemaProperties)(n),c=a.filter(x=>(0,Nie.alwaysValidSchema)(o,n[x]));if(a.length===0||c.length===a.length&&(!o.opts.unevaluated||o.props===!0))return;let u=s.strictSchema&&!s.allowMatchingProperties&&i.properties,d=t.name("valid");o.props!==!0&&!(o.props instanceof DD.Name)&&(o.props=(0,$ie.evaluatedPropsToName)(t,o.props));let{props:f}=o;g();function g(){for(let x of a)u&&h(x),o.allErrors?v(x):(t.var(d,!0),v(x),t.if(d))}function h(x){for(let E in u)new RegExp(x).test(E)&&(0,Nie.checkStrictMode)(o,`property ${E} matches pattern ${x} (use allowMatchingProperties)`)}function v(x){t.forIn("key",r,E=>{t.if((0,DD._)`${(0,Rie.usePattern)(e,x)}.test(${E})`,()=>{let C=c.includes(x);C||e.subschema({keyword:"patternProperties",schemaProp:x,dataProp:E,dataPropType:$ie.Type.Str},d),o.opts.unevaluated&&f!==!0?t.assign((0,DD._)`${f}[${E}]`,!0):!C&&!o.allErrors&&t.if((0,DD.not)(d),()=>t.break())})})}}};N3.default=jje});var Fie=ne($3=>{"use strict";Object.defineProperty($3,"__esModule",{value:!0});var zje=Un(),Bje={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){let{gen:t,schema:n,it:r}=e;if((0,zje.alwaysValidSchema)(r,n)){e.fail();return}let i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};$3.default=Bje});var jie=ne(L3=>{"use strict";Object.defineProperty(L3,"__esModule",{value:!0});var Uje=Qa(),Vje={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Uje.validateUnion,error:{message:"must match a schema in anyOf"}};L3.default=Vje});var zie=ne(F3=>{"use strict";Object.defineProperty(F3,"__esModule",{value:!0});var PD=_n(),Hje=Un(),Zje={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,PD._)`{passingSchemas: ${e.passing}}`},qje={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Zje,code(e){let{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;let o=n,s=t.let("valid",!1),a=t.let("passing",null),c=t.name("_valid");e.setParams({passing:a}),t.block(u),e.result(s,()=>e.reset(),()=>e.error(!0));function u(){o.forEach((d,f)=>{let g;(0,Hje.alwaysValidSchema)(i,d)?t.var(c,!0):g=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},c),f>0&&t.if((0,PD._)`${c} && ${s}`).assign(s,!1).assign(a,(0,PD._)`[${a}, ${f}]`).else(),t.if(c,()=>{t.assign(s,!0),t.assign(a,f),g&&e.mergeEvaluated(g,PD.Name)})})}}};F3.default=qje});var Bie=ne(j3=>{"use strict";Object.defineProperty(j3,"__esModule",{value:!0});var Gje=Un(),Wje={keyword:"allOf",schemaType:"array",code(e){let{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");let i=t.name("valid");n.forEach((o,s)=>{if((0,Gje.alwaysValidSchema)(r,o))return;let a=e.subschema({keyword:"allOf",schemaProp:s},i);e.ok(i),e.mergeEvaluated(a)})}};j3.default=Wje});var Hie=ne(z3=>{"use strict";Object.defineProperty(z3,"__esModule",{value:!0});var RD=_n(),Vie=Un(),Kje={message:({params:e})=>(0,RD.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,RD._)`{failingKeyword: ${e.ifClause}}`},Jje={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Kje,code(e){let{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,Vie.checkStrictMode)(r,'"if" without "then" and "else" is ignored');let i=Uie(r,"then"),o=Uie(r,"else");if(!i&&!o)return;let s=t.let("valid",!0),a=t.name("_valid");if(c(),e.reset(),i&&o){let d=t.let("ifClause");e.setParams({ifClause:d}),t.if(a,u("then",d),u("else",d))}else i?t.if(a,u("then")):t.if((0,RD.not)(a),u("else"));e.pass(s,()=>e.error(!0));function c(){let d=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(d)}function u(d,f){return()=>{let g=e.subschema({keyword:d},a);t.assign(s,a),e.mergeValidEvaluated(g,s),f?t.assign(f,(0,RD._)`${d}`):e.setParams({ifClause:d})}}}};function Uie(e,t){let n=e.schema[t];return n!==void 0&&!(0,Vie.alwaysValidSchema)(e,n)}z3.default=Jje});var Zie=ne(B3=>{"use strict";Object.defineProperty(B3,"__esModule",{value:!0});var Yje=Un(),Qje={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,Yje.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};B3.default=Qje});var qie=ne(U3=>{"use strict";Object.defineProperty(U3,"__esModule",{value:!0});var Xje=E3(),e2e=xie(),t2e=I3(),n2e=Eie(),r2e=Iie(),i2e=Tie(),o2e=Oie(),s2e=D3(),a2e=Pie(),c2e=Lie(),l2e=Fie(),u2e=jie(),d2e=zie(),p2e=Bie(),m2e=Hie(),f2e=Zie();function h2e(e=!1){let t=[l2e.default,u2e.default,d2e.default,p2e.default,m2e.default,f2e.default,o2e.default,s2e.default,i2e.default,a2e.default,c2e.default];return e?t.push(e2e.default,n2e.default):t.push(Xje.default,t2e.default),t.push(r2e.default),t}U3.default=h2e});var Gie=ne(V3=>{"use strict";Object.defineProperty(V3,"__esModule",{value:!0});var yi=_n(),g2e={message:({schemaCode:e})=>(0,yi.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,yi._)`{format: ${e}}`},_2e={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:g2e,code(e,t){let{gen:n,data:r,$data:i,schema:o,schemaCode:s,it:a}=e,{opts:c,errSchemaPath:u,schemaEnv:d,self:f}=a;if(!c.validateFormats)return;i?g():h();function g(){let v=n.scopeValue("formats",{ref:f.formats,code:c.code.formats}),x=n.const("fDef",(0,yi._)`${v}[${s}]`),E=n.let("fType"),C=n.let("format");n.if((0,yi._)`typeof ${x} == "object" && !(${x} instanceof RegExp)`,()=>n.assign(E,(0,yi._)`${x}.type || "string"`).assign(C,(0,yi._)`${x}.validate`),()=>n.assign(E,(0,yi._)`"string"`).assign(C,x)),e.fail$data((0,yi.or)(S(),A()));function S(){return c.strictSchema===!1?yi.nil:(0,yi._)`${s} && !${C}`}function A(){let P=d.$async?(0,yi._)`(${x}.async ? await ${C}(${r}) : ${C}(${r}))`:(0,yi._)`${C}(${r})`,F=(0,yi._)`(typeof ${C} == "function" ? ${P} : ${C}.test(${r}))`;return(0,yi._)`${C} && ${C} !== true && ${E} === ${t} && !${F}`}}function h(){let v=f.formats[o];if(!v){S();return}if(v===!0)return;let[x,E,C]=A(v);x===t&&e.pass(P());function S(){if(c.strictSchema===!1){f.logger.warn(F());return}throw new Error(F());function F(){return`unknown format "${o}" ignored in schema at path "${u}"`}}function A(F){let B=F instanceof RegExp?(0,yi.regexpCode)(F):c.code.formats?(0,yi._)`${c.code.formats}${(0,yi.getProperty)(o)}`:void 0,ee=n.scopeValue("formats",{key:o,ref:F,code:B});return typeof F=="object"&&!(F instanceof RegExp)?[F.type||"string",F.validate,(0,yi._)`${ee}.validate`]:["string",F,ee]}function P(){if(typeof v=="object"&&!(v instanceof RegExp)&&v.async){if(!d.$async)throw new Error("async format in sync schema");return(0,yi._)`await ${C}(${r})`}return typeof E=="function"?(0,yi._)`${C}(${r})`:(0,yi._)`${C}.test(${r})`}}}};V3.default=_2e});var Wie=ne(H3=>{"use strict";Object.defineProperty(H3,"__esModule",{value:!0});var y2e=Gie(),v2e=[y2e.default];H3.default=v2e});var Kie=ne(xy=>{"use strict";Object.defineProperty(xy,"__esModule",{value:!0});xy.contentVocabulary=xy.metadataVocabulary=void 0;xy.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];xy.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var Yie=ne(Z3=>{"use strict";Object.defineProperty(Z3,"__esModule",{value:!0});var b2e=iie(),w2e=yie(),x2e=qie(),C2e=Wie(),Jie=Kie(),E2e=[b2e.default,w2e.default,(0,x2e.default)(),C2e.default,Jie.metadataVocabulary,Jie.contentVocabulary];Z3.default=E2e});var Xie=ne(ND=>{"use strict";Object.defineProperty(ND,"__esModule",{value:!0});ND.DiscrError=void 0;var Qie=(function(e){return e.Tag="tag",e.Mapping="mapping",e})(Qie||(ND.DiscrError=Qie={}))});var toe=ne(G3=>{"use strict";Object.defineProperty(G3,"__esModule",{value:!0});var Cy=_n(),q3=Xie(),eoe=gD(),I2e=Yx(),S2e=Un(),k2e={message:({params:{discrError:e,tagName:t}})=>e===q3.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,Cy._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},T2e={keyword:"discriminator",type:"object",schemaType:"object",error:k2e,code(e){let{gen:t,data:n,schema:r,parentSchema:i,it:o}=e,{oneOf:s}=i;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!s)throw new Error("discriminator: requires oneOf keyword");let c=t.let("valid",!1),u=t.const("tag",(0,Cy._)`${n}${(0,Cy.getProperty)(a)}`);t.if((0,Cy._)`typeof ${u} == "string"`,()=>d(),()=>e.error(!1,{discrError:q3.DiscrError.Tag,tag:u,tagName:a})),e.ok(c);function d(){let h=g();t.if(!1);for(let v in h)t.elseIf((0,Cy._)`${u} === ${v}`),t.assign(c,f(h[v]));t.else(),e.error(!1,{discrError:q3.DiscrError.Mapping,tag:u,tagName:a}),t.endIf()}function f(h){let v=t.name("valid"),x=e.subschema({keyword:"oneOf",schemaProp:h},v);return e.mergeEvaluated(x,Cy.Name),v}function g(){var h;let v={},x=C(i),E=!0;for(let P=0;P<s.length;P++){let F=s[P];if(F?.$ref&&!(0,S2e.schemaHasRulesButRef)(F,o.self.RULES)){let ee=F.$ref;if(F=eoe.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,ee),F instanceof eoe.SchemaEnv&&(F=F.schema),F===void 0)throw new I2e.default(o.opts.uriResolver,o.baseId,ee)}let B=(h=F?.properties)===null||h===void 0?void 0:h[a];if(typeof B!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);E=E&&(x||C(F)),S(B,P)}if(!E)throw new Error(`discriminator: "${a}" must be required`);return v;function C({required:P}){return Array.isArray(P)&&P.includes(a)}function S(P,F){if(P.const)A(P.const,F);else if(P.enum)for(let B of P.enum)A(B,F);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function A(P,F){if(typeof P!="string"||P in v)throw new Error(`discriminator: "${a}" values must be unique strings`);v[P]=F}}}};G3.default=T2e});var noe=ne((axt,A2e)=>{A2e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var K3=ne((zr,W3)=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.MissingRefError=zr.ValidationError=zr.CodeGen=zr.Name=zr.nil=zr.stringify=zr.str=zr._=zr.KeywordCxt=zr.Ajv=void 0;var O2e=Qre(),M2e=Yie(),D2e=toe(),roe=noe(),P2e=["/properties"],$D="http://json-schema.org/draft-07/schema",Ey=class extends O2e.default{_addVocabularies(){super._addVocabularies(),M2e.default.forEach(t=>this.addVocabulary(t)),this.opts.discriminator&&this.addKeyword(D2e.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let t=this.opts.$data?this.$dataMetaSchema(roe,P2e):roe;this.addMetaSchema(t,$D,!1),this.refs["http://json-schema.org/schema"]=$D}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema($D)?$D:void 0)}};zr.Ajv=Ey;W3.exports=zr=Ey;W3.exports.Ajv=Ey;Object.defineProperty(zr,"__esModule",{value:!0});zr.default=Ey;var R2e=Jx();Object.defineProperty(zr,"KeywordCxt",{enumerable:!0,get:function(){return R2e.KeywordCxt}});var Iy=_n();Object.defineProperty(zr,"_",{enumerable:!0,get:function(){return Iy._}});Object.defineProperty(zr,"str",{enumerable:!0,get:function(){return Iy.str}});Object.defineProperty(zr,"stringify",{enumerable:!0,get:function(){return Iy.stringify}});Object.defineProperty(zr,"nil",{enumerable:!0,get:function(){return Iy.nil}});Object.defineProperty(zr,"Name",{enumerable:!0,get:function(){return Iy.Name}});Object.defineProperty(zr,"CodeGen",{enumerable:!0,get:function(){return Iy.CodeGen}});var N2e=fD();Object.defineProperty(zr,"ValidationError",{enumerable:!0,get:function(){return N2e.default}});var $2e=Yx();Object.defineProperty(zr,"MissingRefError",{enumerable:!0,get:function(){return $2e.default}})});var doe=ne(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});Hl.formatNames=Hl.fastFormats=Hl.fullFormats=void 0;function Vl(e,t){return{validate:e,compare:t}}Hl.fullFormats={date:Vl(aoe,X3),time:Vl(Y3(!0),e6),"date-time":Vl(ioe(!0),loe),"iso-time":Vl(Y3(),coe),"iso-date-time":Vl(ioe(),uoe),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:U2e,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:K2e,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:V2e,int32:{type:"number",validate:q2e},int64:{type:"number",validate:G2e},float:{type:"number",validate:soe},double:{type:"number",validate:soe},password:!0,binary:!0};Hl.fastFormats=b(m({},Hl.fullFormats),{date:Vl(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,X3),time:Vl(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,e6),"date-time":Vl(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,loe),"iso-time":Vl(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,coe),"iso-date-time":Vl(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,uoe),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i});Hl.formatNames=Object.keys(Hl.fullFormats);function L2e(e){return e%4===0&&(e%100!==0||e%400===0)}var F2e=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,j2e=[0,31,28,31,30,31,30,31,31,30,31,30,31];function aoe(e){let t=F2e.exec(e);if(!t)return!1;let n=+t[1],r=+t[2],i=+t[3];return r>=1&&r<=12&&i>=1&&i<=(r===2&&L2e(n)?29:j2e[r])}function X3(e,t){if(e&&t)return e>t?1:e<t?-1:0}var J3=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function Y3(e){return function(n){let r=J3.exec(n);if(!r)return!1;let i=+r[1],o=+r[2],s=+r[3],a=r[4],c=r[5]==="-"?-1:1,u=+(r[6]||0),d=+(r[7]||0);if(u>23||d>59||e&&!a)return!1;if(i<=23&&o<=59&&s<60)return!0;let f=o-d*c,g=i-u*c-(f<0?1:0);return(g===23||g===-1)&&(f===59||f===-1)&&s<61}}function e6(e,t){if(!(e&&t))return;let n=new Date("2020-01-01T"+e).valueOf(),r=new Date("2020-01-01T"+t).valueOf();if(n&&r)return n-r}function coe(e,t){if(!(e&&t))return;let n=J3.exec(e),r=J3.exec(t);if(n&&r)return e=n[1]+n[2]+n[3],t=r[1]+r[2]+r[3],e>t?1:e<t?-1:0}var Q3=/t|\s/i;function ioe(e){let t=Y3(e);return function(r){let i=r.split(Q3);return i.length===2&&aoe(i[0])&&t(i[1])}}function loe(e,t){if(!(e&&t))return;let n=new Date(e).valueOf(),r=new Date(t).valueOf();if(n&&r)return n-r}function uoe(e,t){if(!(e&&t))return;let[n,r]=e.split(Q3),[i,o]=t.split(Q3),s=X3(n,i);if(s!==void 0)return s||e6(r,o)}var z2e=/\/|:/,B2e=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function U2e(e){return z2e.test(e)&&B2e.test(e)}var ooe=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function V2e(e){return ooe.lastIndex=0,ooe.test(e)}var H2e=-(2**31),Z2e=2**31-1;function q2e(e){return Number.isInteger(e)&&e<=Z2e&&e>=H2e}function G2e(e){return Number.isInteger(e)}function soe(){return!0}var W2e=/[^\\]\\Z/;function K2e(e){if(W2e.test(e))return!1;try{return new RegExp(e),!0}catch{return!1}}});var poe=ne(Sy=>{"use strict";Object.defineProperty(Sy,"__esModule",{value:!0});Sy.formatLimitDefinition=void 0;var J2e=K3(),$c=_n(),Hp=$c.operators,LD={formatMaximum:{okStr:"<=",ok:Hp.LTE,fail:Hp.GT},formatMinimum:{okStr:">=",ok:Hp.GTE,fail:Hp.LT},formatExclusiveMaximum:{okStr:"<",ok:Hp.LT,fail:Hp.GTE},formatExclusiveMinimum:{okStr:">",ok:Hp.GT,fail:Hp.LTE}},Y2e={message:({keyword:e,schemaCode:t})=>(0,$c.str)`should be ${LD[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,$c._)`{comparison: ${LD[e].okStr}, limit: ${t}}`};Sy.formatLimitDefinition={keyword:Object.keys(LD),type:"string",schemaType:"string",$data:!0,error:Y2e,code(e){let{gen:t,data:n,schemaCode:r,keyword:i,it:o}=e,{opts:s,self:a}=o;if(!s.validateFormats)return;let c=new J2e.KeywordCxt(o,a.RULES.all.format.definition,"format");c.$data?u():d();function u(){let g=t.scopeValue("formats",{ref:a.formats,code:s.code.formats}),h=t.const("fmt",(0,$c._)`${g}[${c.schemaCode}]`);e.fail$data((0,$c.or)((0,$c._)`typeof ${h} != "object"`,(0,$c._)`${h} instanceof RegExp`,(0,$c._)`typeof ${h}.compare != "function"`,f(h)))}function d(){let g=c.schema,h=a.formats[g];if(!h||h===!0)return;if(typeof h!="object"||h instanceof RegExp||typeof h.compare!="function")throw new Error(`"${i}": format "${g}" does not define "compare" function`);let v=t.scopeValue("formats",{key:g,ref:h,code:s.code.formats?(0,$c._)`${s.code.formats}${(0,$c.getProperty)(g)}`:void 0});e.fail$data(f(v))}function f(g){return(0,$c._)`${g}.compare(${n}, ${r}) ${LD[i].fail} 0`}},dependencies:["format"]};var Q2e=e=>(e.addKeyword(Sy.formatLimitDefinition),e);Sy.default=Q2e});var goe=ne((dC,hoe)=>{"use strict";Object.defineProperty(dC,"__esModule",{value:!0});var ky=doe(),X2e=poe(),t6=_n(),moe=new t6.Name("fullFormats"),eze=new t6.Name("fastFormats"),n6=(e,t={keywords:!0})=>{if(Array.isArray(t))return foe(e,t,ky.fullFormats,moe),e;let[n,r]=t.mode==="fast"?[ky.fastFormats,eze]:[ky.fullFormats,moe],i=t.formats||ky.formatNames;return foe(e,i,n,r),t.keywords&&(0,X2e.default)(e),e};n6.get=(e,t="full")=>{let r=(t==="fast"?ky.fastFormats:ky.fullFormats)[e];if(!r)throw new Error(`Unknown format "${e}"`);return r};function foe(e,t,n,r){var i,o;(i=(o=e.opts.code).formats)!==null&&i!==void 0||(o.formats=(0,t6._)`require("ajv-formats/dist/formats").${r}`);for(let s of t)e.addFormat(s,n[s])}hoe.exports=dC=n6;Object.defineProperty(dC,"__esModule",{value:!0});dC.default=n6});var Hoe=ne((Kxt,Voe)=>{"use strict";Voe.exports=function(e,t){if(typeof e!="string")throw new TypeError("Expected a string");return t=typeof t>"u"?"_":t,e.replace(/([a-z\d])([A-Z])/g,"$1"+t+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+t+"$2").toLowerCase()}});var Yoe=ne((Jxt,h6)=>{"use strict";var Aze=/[\p{Lu}]/u,Oze=/[\p{Ll}]/u,Zoe=/^[\p{Lu}](?![\p{Lu}])/gu,Woe=/([\p{Alpha}\p{N}_]|$)/u,Koe=/[_.\- ]+/,Mze=new RegExp("^"+Koe.source),qoe=new RegExp(Koe.source+Woe.source,"gu"),Goe=new RegExp("\\d+"+Woe.source,"gu"),Dze=(e,t,n)=>{let r=!1,i=!1,o=!1;for(let s=0;s<e.length;s++){let a=e[s];r&&Aze.test(a)?(e=e.slice(0,s)+"-"+e.slice(s),r=!1,o=i,i=!0,s++):i&&o&&Oze.test(a)?(e=e.slice(0,s-1)+"-"+e.slice(s-1),o=i,i=!1,r=!0):(r=t(a)===a&&n(a)!==a,o=i,i=n(a)===a&&t(a)!==a)}return e},Pze=(e,t)=>(Zoe.lastIndex=0,e.replace(Zoe,n=>t(n))),Rze=(e,t)=>(qoe.lastIndex=0,Goe.lastIndex=0,e.replace(qoe,(n,r)=>t(r)).replace(Goe,n=>t(n))),Joe=(e,t)=>{if(!(typeof e=="string"||Array.isArray(e)))throw new TypeError("Expected the input to be `string | string[]`");if(t=m({pascalCase:!1,preserveConsecutiveUppercase:!1},t),Array.isArray(e)?e=e.map(o=>o.trim()).filter(o=>o.length).join("-"):e=e.trim(),e.length===0)return"";let n=t.locale===!1?o=>o.toLowerCase():o=>o.toLocaleLowerCase(t.locale),r=t.locale===!1?o=>o.toUpperCase():o=>o.toLocaleUpperCase(t.locale);return e.length===1?t.pascalCase?r(e):n(e):(e!==n(e)&&(e=Dze(e,n,r)),e=e.replace(Mze,""),t.preserveConsecutiveUppercase?e=Pze(e,n):e=n(e),t.pascalCase&&(e=r(e.charAt(0))+e.slice(1)),Rze(e,r))};h6.exports=Joe;h6.exports.default=Joe});var Rae=ne((sSt,nH)=>{"use strict";var $Be=Object.prototype.hasOwnProperty,vs="~";function bC(){}Object.create&&(bC.prototype=Object.create(null),new bC().__proto__||(vs=!1));function LBe(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function Pae(e,t,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var o=new LBe(n,r||e,i),s=vs?vs+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],o]:e._events[s].push(o):(e._events[s]=o,e._eventsCount++),e}function CP(e,t){--e._eventsCount===0?e._events=new bC:delete e._events[t]}function qo(){this._events=new bC,this._eventsCount=0}qo.prototype.eventNames=function(){var t=[],n,r;if(this._eventsCount===0)return t;for(r in n=this._events)$Be.call(n,r)&&t.push(vs?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};qo.prototype.listeners=function(t){var n=vs?vs+t:t,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s};qo.prototype.listenerCount=function(t){var n=vs?vs+t:t,r=this._events[n];return r?r.fn?1:r.length:0};qo.prototype.emit=function(t,n,r,i,o,s){var a=vs?vs+t:t;if(!this._events[a])return!1;var c=this._events[a],u=arguments.length,d,f;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,n),!0;case 3:return c.fn.call(c.context,n,r),!0;case 4:return c.fn.call(c.context,n,r,i),!0;case 5:return c.fn.call(c.context,n,r,i,o),!0;case 6:return c.fn.call(c.context,n,r,i,o,s),!0}for(f=1,d=new Array(u-1);f<u;f++)d[f-1]=arguments[f];c.fn.apply(c.context,d)}else{var g=c.length,h;for(f=0;f<g;f++)switch(c[f].once&&this.removeListener(t,c[f].fn,void 0,!0),u){case 1:c[f].fn.call(c[f].context);break;case 2:c[f].fn.call(c[f].context,n);break;case 3:c[f].fn.call(c[f].context,n,r);break;case 4:c[f].fn.call(c[f].context,n,r,i);break;default:if(!d)for(h=1,d=new Array(u-1);h<u;h++)d[h-1]=arguments[h];c[f].fn.apply(c[f].context,d)}}return!0};qo.prototype.on=function(t,n,r){return Pae(this,t,n,r,!1)};qo.prototype.once=function(t,n,r){return Pae(this,t,n,r,!0)};qo.prototype.removeListener=function(t,n,r,i){var o=vs?vs+t:t;if(!this._events[o])return this;if(!n)return CP(this,o),this;var s=this._events[o];if(s.fn)s.fn===n&&(!i||s.once)&&(!r||s.context===r)&&CP(this,o);else{for(var a=0,c=[],u=s.length;a<u;a++)(s[a].fn!==n||i&&!s[a].once||r&&s[a].context!==r)&&c.push(s[a]);c.length?this._events[o]=c.length===1?c[0]:c:CP(this,o)}return this};qo.prototype.removeAllListeners=function(t){var n;return t?(n=vs?vs+t:t,this._events[n]&&CP(this,n)):(this._events=new bC,this._eventsCount=0),this};qo.prototype.off=qo.prototype.removeListener;qo.prototype.addListener=qo.prototype.on;qo.prefixed=vs;qo.EventEmitter=qo;typeof nH<"u"&&(nH.exports=qo)});var $ae=ne((aSt,Nae)=>{"use strict";Nae.exports=(e,t)=>(t=t||(()=>{}),e.then(n=>new Promise(r=>{r(t())}).then(()=>n),n=>new Promise(r=>{r(t())}).then(()=>{throw n})))});var Fae=ne((cSt,IP)=>{"use strict";var FBe=$ae(),EP=class extends Error{constructor(t){super(t),this.name="TimeoutError"}},Lae=(e,t,n)=>new Promise((r,i)=>{if(typeof t!="number"||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0){r(e);return}let o=setTimeout(()=>{if(typeof n=="function"){try{r(n())}catch(c){i(c)}return}let s=typeof n=="string"?n:`Promise timed out after ${t} milliseconds`,a=n instanceof Error?n:new EP(s);typeof e.cancel=="function"&&e.cancel(),i(a)},t);FBe(e.then(r,i),()=>{clearTimeout(o)})});IP.exports=Lae;IP.exports.default=Lae;IP.exports.TimeoutError=EP});var jae=ne(rH=>{"use strict";Object.defineProperty(rH,"__esModule",{value:!0});function jBe(e,t,n){let r=0,i=e.length;for(;i>0;){let o=i/2|0,s=r+o;n(e[s],t)<=0?(r=++s,i-=o+1):i=o}return r}rH.default=jBe});var zae=ne(oH=>{"use strict";Object.defineProperty(oH,"__esModule",{value:!0});var zBe=jae(),iH=class{constructor(){this._queue=[]}enqueue(t,n){n=Object.assign({priority:0},n);let r={priority:n.priority,run:t};if(this.size&&this._queue[this.size-1].priority>=n.priority){this._queue.push(r);return}let i=zBe.default(this._queue,r,(o,s)=>s.priority-o.priority);this._queue.splice(i,0,r)}dequeue(){let t=this._queue.shift();return t?.run}filter(t){return this._queue.filter(n=>n.priority===t.priority).map(n=>n.run)}get size(){return this._queue.length}};oH.default=iH});var kP=ne(aH=>{"use strict";Object.defineProperty(aH,"__esModule",{value:!0});var BBe=Rae(),Bae=Fae(),UBe=zae(),SP=()=>{},VBe=new Bae.TimeoutError,sH=class extends BBe{constructor(t){var n,r,i,o;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=SP,this._resolveIdle=SP,t=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:UBe.default},t),!(typeof t.intervalCap=="number"&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(r=(n=t.intervalCap)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:""}\` (${typeof t.intervalCap})`);if(t.interval===void 0||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(o=(i=t.interval)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""}\` (${typeof t.interval})`);this._carryoverConcurrencyCount=t.carryoverConcurrencyCount,this._isIntervalIgnored=t.intervalCap===1/0||t.interval===0,this._intervalCap=t.intervalCap,this._interval=t.interval,this._queue=new t.queueClass,this._queueClass=t.queueClass,this.concurrency=t.concurrency,this._timeout=t.timeout,this._throwOnTimeout=t.throwOnTimeout===!0,this._isPaused=t.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=SP,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=SP,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let t=Date.now();if(this._intervalId===void 0){let n=this._intervalEnd-t;if(n<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},n)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let t=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let n=this._queue.dequeue();return n?(this.emit("active"),n(),t&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(t){if(!(typeof t=="number"&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);this._concurrency=t,this._processQueue()}add(r){return y(this,arguments,function*(t,n={}){return new Promise((i,o)=>{let s=()=>y(this,null,function*(){this._pendingCount++,this._intervalCount++;try{let a=this._timeout===void 0&&n.timeout===void 0?t():Bae.default(Promise.resolve(t()),n.timeout===void 0?this._timeout:n.timeout,()=>{(n.throwOnTimeout===void 0?this._throwOnTimeout:n.throwOnTimeout)&&o(VBe)});i(yield a)}catch(a){o(a)}this._next()});this._queue.enqueue(s,n),this._tryToStartAnother(),this.emit("add")})})}addAll(t,n){return y(this,null,function*(){return Promise.all(t.map(r=>y(this,null,function*(){return this.add(r,n)})))})}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}onEmpty(){return y(this,null,function*(){if(this._queue.size!==0)return new Promise(t=>{let n=this._resolveEmpty;this._resolveEmpty=()=>{n(),t()}})})}onIdle(){return y(this,null,function*(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(t=>{let n=this._resolveIdle;this._resolveIdle=()=>{n(),t()}})})}get size(){return this._queue.size}sizeBy(t){return this._queue.filter(t).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(t){this._timeout=t}};aH.default=sH});var xC=ne((ySt,Uae)=>{"use strict";var ZBe="2.0.0",qBe=Number.MAX_SAFE_INTEGER||9007199254740991,GBe=16,WBe=250,KBe=["major","premajor","minor","preminor","patch","prepatch","prerelease"];Uae.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:GBe,MAX_SAFE_BUILD_LENGTH:WBe,MAX_SAFE_INTEGER:qBe,RELEASE_TYPES:KBe,SEMVER_SPEC_VERSION:ZBe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var CC=ne((vSt,Vae)=>{"use strict";var JBe=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};Vae.exports=JBe});var $y=ne((Gl,Hae)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:uH,MAX_SAFE_BUILD_LENGTH:YBe,MAX_LENGTH:QBe}=xC(),XBe=CC();Gl=Hae.exports={};var eUe=Gl.re=[],tUe=Gl.safeRe=[],He=Gl.src=[],nUe=Gl.safeSrc=[],Ze=Gl.t={},rUe=0,dH="[a-zA-Z0-9-]",iUe=[["\\s",1],["\\d",QBe],[dH,YBe]],oUe=e=>{for(let[t,n]of iUe)e=e.split(`${t}*`).join(`${t}{0,${n}}`).split(`${t}+`).join(`${t}{1,${n}}`);return e},nn=(e,t,n)=>{let r=oUe(t),i=rUe++;XBe(e,i,t),Ze[e]=i,He[i]=t,nUe[i]=r,eUe[i]=new RegExp(t,n?"g":void 0),tUe[i]=new RegExp(r,n?"g":void 0)};nn("NUMERICIDENTIFIER","0|[1-9]\\d*");nn("NUMERICIDENTIFIERLOOSE","\\d+");nn("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${dH}*`);nn("MAINVERSION",`(${He[Ze.NUMERICIDENTIFIER]})\\.(${He[Ze.NUMERICIDENTIFIER]})\\.(${He[Ze.NUMERICIDENTIFIER]})`);nn("MAINVERSIONLOOSE",`(${He[Ze.NUMERICIDENTIFIERLOOSE]})\\.(${He[Ze.NUMERICIDENTIFIERLOOSE]})\\.(${He[Ze.NUMERICIDENTIFIERLOOSE]})`);nn("PRERELEASEIDENTIFIER",`(?:${He[Ze.NONNUMERICIDENTIFIER]}|${He[Ze.NUMERICIDENTIFIER]})`);nn("PRERELEASEIDENTIFIERLOOSE",`(?:${He[Ze.NONNUMERICIDENTIFIER]}|${He[Ze.NUMERICIDENTIFIERLOOSE]})`);nn("PRERELEASE",`(?:-(${He[Ze.PRERELEASEIDENTIFIER]}(?:\\.${He[Ze.PRERELEASEIDENTIFIER]})*))`);nn("PRERELEASELOOSE",`(?:-?(${He[Ze.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${He[Ze.PRERELEASEIDENTIFIERLOOSE]})*))`);nn("BUILDIDENTIFIER",`${dH}+`);nn("BUILD",`(?:\\+(${He[Ze.BUILDIDENTIFIER]}(?:\\.${He[Ze.BUILDIDENTIFIER]})*))`);nn("FULLPLAIN",`v?${He[Ze.MAINVERSION]}${He[Ze.PRERELEASE]}?${He[Ze.BUILD]}?`);nn("FULL",`^${He[Ze.FULLPLAIN]}$`);nn("LOOSEPLAIN",`[v=\\s]*${He[Ze.MAINVERSIONLOOSE]}${He[Ze.PRERELEASELOOSE]}?${He[Ze.BUILD]}?`);nn("LOOSE",`^${He[Ze.LOOSEPLAIN]}$`);nn("GTLT","((?:<|>)?=?)");nn("XRANGEIDENTIFIERLOOSE",`${He[Ze.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);nn("XRANGEIDENTIFIER",`${He[Ze.NUMERICIDENTIFIER]}|x|X|\\*`);nn("XRANGEPLAIN",`[v=\\s]*(${He[Ze.XRANGEIDENTIFIER]})(?:\\.(${He[Ze.XRANGEIDENTIFIER]})(?:\\.(${He[Ze.XRANGEIDENTIFIER]})(?:${He[Ze.PRERELEASE]})?${He[Ze.BUILD]}?)?)?`);nn("XRANGEPLAINLOOSE",`[v=\\s]*(${He[Ze.XRANGEIDENTIFIERLOOSE]})(?:\\.(${He[Ze.XRANGEIDENTIFIERLOOSE]})(?:\\.(${He[Ze.XRANGEIDENTIFIERLOOSE]})(?:${He[Ze.PRERELEASELOOSE]})?${He[Ze.BUILD]}?)?)?`);nn("XRANGE",`^${He[Ze.GTLT]}\\s*${He[Ze.XRANGEPLAIN]}$`);nn("XRANGELOOSE",`^${He[Ze.GTLT]}\\s*${He[Ze.XRANGEPLAINLOOSE]}$`);nn("COERCEPLAIN",`(^|[^\\d])(\\d{1,${uH}})(?:\\.(\\d{1,${uH}}))?(?:\\.(\\d{1,${uH}}))?`);nn("COERCE",`${He[Ze.COERCEPLAIN]}(?:$|[^\\d])`);nn("COERCEFULL",He[Ze.COERCEPLAIN]+`(?:${He[Ze.PRERELEASE]})?(?:${He[Ze.BUILD]})?(?:$|[^\\d])`);nn("COERCERTL",He[Ze.COERCE],!0);nn("COERCERTLFULL",He[Ze.COERCEFULL],!0);nn("LONETILDE","(?:~>?)");nn("TILDETRIM",`(\\s*)${He[Ze.LONETILDE]}\\s+`,!0);Gl.tildeTrimReplace="$1~";nn("TILDE",`^${He[Ze.LONETILDE]}${He[Ze.XRANGEPLAIN]}$`);nn("TILDELOOSE",`^${He[Ze.LONETILDE]}${He[Ze.XRANGEPLAINLOOSE]}$`);nn("LONECARET","(?:\\^)");nn("CARETTRIM",`(\\s*)${He[Ze.LONECARET]}\\s+`,!0);Gl.caretTrimReplace="$1^";nn("CARET",`^${He[Ze.LONECARET]}${He[Ze.XRANGEPLAIN]}$`);nn("CARETLOOSE",`^${He[Ze.LONECARET]}${He[Ze.XRANGEPLAINLOOSE]}$`);nn("COMPARATORLOOSE",`^${He[Ze.GTLT]}\\s*(${He[Ze.LOOSEPLAIN]})$|^$`);nn("COMPARATOR",`^${He[Ze.GTLT]}\\s*(${He[Ze.FULLPLAIN]})$|^$`);nn("COMPARATORTRIM",`(\\s*)${He[Ze.GTLT]}\\s*(${He[Ze.LOOSEPLAIN]}|${He[Ze.XRANGEPLAIN]})`,!0);Gl.comparatorTrimReplace="$1$2$3";nn("HYPHENRANGE",`^\\s*(${He[Ze.XRANGEPLAIN]})\\s+-\\s+(${He[Ze.XRANGEPLAIN]})\\s*$`);nn("HYPHENRANGELOOSE",`^\\s*(${He[Ze.XRANGEPLAINLOOSE]})\\s+-\\s+(${He[Ze.XRANGEPLAINLOOSE]})\\s*$`);nn("STAR","(<|>)?=?\\s*\\*");nn("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");nn("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var AP=ne((bSt,Zae)=>{"use strict";var sUe=Object.freeze({loose:!0}),aUe=Object.freeze({}),cUe=e=>e?typeof e!="object"?sUe:e:aUe;Zae.exports=cUe});var pH=ne((wSt,Wae)=>{"use strict";var qae=/^[0-9]+$/,Gae=(e,t)=>{let n=qae.test(e),r=qae.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},lUe=(e,t)=>Gae(t,e);Wae.exports={compareIdentifiers:Gae,rcompareIdentifiers:lUe}});var Go=ne((xSt,Jae)=>{"use strict";var OP=CC(),{MAX_LENGTH:Kae,MAX_SAFE_INTEGER:MP}=xC(),{safeRe:DP,t:PP}=$y(),uUe=AP(),{compareIdentifiers:Ly}=pH(),mH=class e{constructor(t,n){if(n=uUe(n),t instanceof e){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Kae)throw new TypeError(`version is longer than ${Kae} characters`);OP("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=t.trim().match(n.loose?DP[PP.LOOSE]:DP[PP.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>MP||this.major<0)throw new TypeError("Invalid major version");if(this.minor>MP||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>MP||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<MP)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(OP("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if(typeof t=="string"&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),Ly(this.major,t.major)||Ly(this.minor,t.minor)||Ly(this.patch,t.patch)}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],i=t.prerelease[n];if(OP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Ly(r,i)}while(++n)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let n=0;do{let r=this.build[n],i=t.build[n];if(OP("build compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Ly(r,i)}while(++n)}inc(t,n,r){if(t.startsWith("pre")){if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(n){let i=`-${n}`.match(this.options.loose?DP[PP.PRERELEASELOOSE]:DP[PP.PRERELEASE]);if(!i||i[1]!==n)throw new Error(`invalid identifier: ${n}`)}}switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let o=[n,i];r===!1&&(o=[n]),Ly(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};Jae.exports=mH});var eh=ne((CSt,Qae)=>{"use strict";var Yae=Go(),dUe=(e,t,n=!1)=>{if(e instanceof Yae)return e;try{return new Yae(e,t)}catch(r){if(!n)return null;throw r}};Qae.exports=dUe});var ece=ne((ESt,Xae)=>{"use strict";var pUe=eh(),mUe=(e,t)=>{let n=pUe(e,t);return n?n.version:null};Xae.exports=mUe});var nce=ne((ISt,tce)=>{"use strict";var fUe=eh(),hUe=(e,t)=>{let n=fUe(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};tce.exports=hUe});var oce=ne((SSt,ice)=>{"use strict";var rce=Go(),gUe=(e,t,n,r,i)=>{typeof n=="string"&&(i=r,r=n,n=void 0);try{return new rce(e instanceof rce?e.version:e,n).inc(t,r,i).version}catch{return null}};ice.exports=gUe});var cce=ne((kSt,ace)=>{"use strict";var sce=eh(),_Ue=(e,t)=>{let n=sce(e,null,!0),r=sce(t,null,!0),i=n.compare(r);if(i===0)return null;let o=i>0,s=o?n:r,a=o?r:n,c=!!s.prerelease.length;if(!!a.prerelease.length&&!c){if(!a.patch&&!a.minor)return"major";if(a.compareMain(s)===0)return a.minor&&!a.patch?"minor":"patch"}let d=c?"pre":"";return n.major!==r.major?d+"major":n.minor!==r.minor?d+"minor":n.patch!==r.patch?d+"patch":"prerelease"};ace.exports=_Ue});var uce=ne((TSt,lce)=>{"use strict";var yUe=Go(),vUe=(e,t)=>new yUe(e,t).major;lce.exports=vUe});var pce=ne((ASt,dce)=>{"use strict";var bUe=Go(),wUe=(e,t)=>new bUe(e,t).minor;dce.exports=wUe});var fce=ne((OSt,mce)=>{"use strict";var xUe=Go(),CUe=(e,t)=>new xUe(e,t).patch;mce.exports=CUe});var gce=ne((MSt,hce)=>{"use strict";var EUe=eh(),IUe=(e,t)=>{let n=EUe(e,t);return n&&n.prerelease.length?n.prerelease:null};hce.exports=IUe});var ic=ne((DSt,yce)=>{"use strict";var _ce=Go(),SUe=(e,t,n)=>new _ce(e,n).compare(new _ce(t,n));yce.exports=SUe});var bce=ne((PSt,vce)=>{"use strict";var kUe=ic(),TUe=(e,t,n)=>kUe(t,e,n);vce.exports=TUe});var xce=ne((RSt,wce)=>{"use strict";var AUe=ic(),OUe=(e,t)=>AUe(e,t,!0);wce.exports=OUe});var RP=ne((NSt,Ece)=>{"use strict";var Cce=Go(),MUe=(e,t,n)=>{let r=new Cce(e,n),i=new Cce(t,n);return r.compare(i)||r.compareBuild(i)};Ece.exports=MUe});var Sce=ne(($St,Ice)=>{"use strict";var DUe=RP(),PUe=(e,t)=>e.sort((n,r)=>DUe(n,r,t));Ice.exports=PUe});var Tce=ne((LSt,kce)=>{"use strict";var RUe=RP(),NUe=(e,t)=>e.sort((n,r)=>RUe(r,n,t));kce.exports=NUe});var EC=ne((FSt,Ace)=>{"use strict";var $Ue=ic(),LUe=(e,t,n)=>$Ue(e,t,n)>0;Ace.exports=LUe});var NP=ne((jSt,Oce)=>{"use strict";var FUe=ic(),jUe=(e,t,n)=>FUe(e,t,n)<0;Oce.exports=jUe});var fH=ne((zSt,Mce)=>{"use strict";var zUe=ic(),BUe=(e,t,n)=>zUe(e,t,n)===0;Mce.exports=BUe});var hH=ne((BSt,Dce)=>{"use strict";var UUe=ic(),VUe=(e,t,n)=>UUe(e,t,n)!==0;Dce.exports=VUe});var $P=ne((USt,Pce)=>{"use strict";var HUe=ic(),ZUe=(e,t,n)=>HUe(e,t,n)>=0;Pce.exports=ZUe});var LP=ne((VSt,Rce)=>{"use strict";var qUe=ic(),GUe=(e,t,n)=>qUe(e,t,n)<=0;Rce.exports=GUe});var gH=ne((HSt,Nce)=>{"use strict";var WUe=fH(),KUe=hH(),JUe=EC(),YUe=$P(),QUe=NP(),XUe=LP(),e4e=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return WUe(e,n,r);case"!=":return KUe(e,n,r);case">":return JUe(e,n,r);case">=":return YUe(e,n,r);case"<":return QUe(e,n,r);case"<=":return XUe(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};Nce.exports=e4e});var Lce=ne((ZSt,$ce)=>{"use strict";var t4e=Go(),n4e=eh(),{safeRe:FP,t:jP}=$y(),r4e=(e,t)=>{if(e instanceof t4e)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let n=null;if(!t.rtl)n=e.match(t.includePrerelease?FP[jP.COERCEFULL]:FP[jP.COERCE]);else{let c=t.includePrerelease?FP[jP.COERCERTLFULL]:FP[jP.COERCERTL],u;for(;(u=c.exec(e))&&(!n||n.index+n[0].length!==e.length);)(!n||u.index+u[0].length!==n.index+n[0].length)&&(n=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(n===null)return null;let r=n[2],i=n[3]||"0",o=n[4]||"0",s=t.includePrerelease&&n[5]?`-${n[5]}`:"",a=t.includePrerelease&&n[6]?`+${n[6]}`:"";return n4e(`${r}.${i}.${o}${s}${a}`,t)};$ce.exports=r4e});var jce=ne((qSt,Fce)=>{"use strict";var _H=class{constructor(){this.max=1e3,this.map=new Map}get(t){let n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(t,n)}return this}};Fce.exports=_H});var oc=ne((GSt,Vce)=>{"use strict";var i4e=/\s+/g,yH=class e{constructor(t,n){if(n=s4e(n),t instanceof e)return t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease?t:new e(t.raw,n);if(t instanceof vH)return this.raw=t.value,this.set=[[t]],this.formatted=void 0,this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=t.trim().replace(i4e," "),this.set=this.raw.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!Bce(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&m4e(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let t=0;t<this.set.length;t++){t>0&&(this.formatted+="||");let n=this.set[t];for(let r=0;r<n.length;r++)r>0&&(this.formatted+=" "),this.formatted+=n[r].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(t){let r=((this.options.includePrerelease&&d4e)|(this.options.loose&&p4e))+":"+t,i=zce.get(r);if(i)return i;let o=this.options.loose,s=o?ra[bs.HYPHENRANGELOOSE]:ra[bs.HYPHENRANGE];t=t.replace(s,C4e(this.options.includePrerelease)),Br("hyphen replace",t),t=t.replace(ra[bs.COMPARATORTRIM],c4e),Br("comparator trim",t),t=t.replace(ra[bs.TILDETRIM],l4e),Br("tilde trim",t),t=t.replace(ra[bs.CARETTRIM],u4e),Br("caret trim",t);let a=t.split(" ").map(f=>f4e(f,this.options)).join(" ").split(/\s+/).map(f=>x4e(f,this.options));o&&(a=a.filter(f=>(Br("loose invalid filter",f,this.options),!!f.match(ra[bs.COMPARATORLOOSE])))),Br("range list",a);let c=new Map,u=a.map(f=>new vH(f,this.options));for(let f of u){if(Bce(f))return[f];c.set(f.value,f)}c.size>1&&c.has("")&&c.delete("");let d=[...c.values()];return zce.set(r,d),d}intersects(t,n){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some(r=>Uce(r,n)&&t.set.some(i=>Uce(i,n)&&r.every(o=>i.every(s=>o.intersects(s,n)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new a4e(t,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(E4e(this.set[n],t,this.options))return!0;return!1}};Vce.exports=yH;var o4e=jce(),zce=new o4e,s4e=AP(),vH=IC(),Br=CC(),a4e=Go(),{safeRe:ra,t:bs,comparatorTrimReplace:c4e,tildeTrimReplace:l4e,caretTrimReplace:u4e}=$y(),{FLAG_INCLUDE_PRERELEASE:d4e,FLAG_LOOSE:p4e}=xC(),Bce=e=>e.value==="<0.0.0-0",m4e=e=>e.value==="",Uce=(e,t)=>{let n=!0,r=e.slice(),i=r.pop();for(;n&&r.length;)n=r.every(o=>i.intersects(o,t)),i=r.pop();return n},f4e=(e,t)=>(Br("comp",e,t),e=_4e(e,t),Br("caret",e),e=h4e(e,t),Br("tildes",e),e=v4e(e,t),Br("xrange",e),e=w4e(e,t),Br("stars",e),e),ws=e=>!e||e.toLowerCase()==="x"||e==="*",h4e=(e,t)=>e.trim().split(/\s+/).map(n=>g4e(n,t)).join(" "),g4e=(e,t)=>{let n=t.loose?ra[bs.TILDELOOSE]:ra[bs.TILDE];return e.replace(n,(r,i,o,s,a)=>{Br("tilde",e,r,i,o,s,a);let c;return ws(i)?c="":ws(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:ws(s)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:a?(Br("replaceTilde pr",a),c=`>=${i}.${o}.${s}-${a} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${s} <${i}.${+o+1}.0-0`,Br("tilde return",c),c})},_4e=(e,t)=>e.trim().split(/\s+/).map(n=>y4e(n,t)).join(" "),y4e=(e,t)=>{Br("caret",e,t);let n=t.loose?ra[bs.CARETLOOSE]:ra[bs.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,(i,o,s,a,c)=>{Br("caret",e,i,o,s,a,c);let u;return ws(o)?u="":ws(s)?u=`>=${o}.0.0${r} <${+o+1}.0.0-0`:ws(a)?o==="0"?u=`>=${o}.${s}.0${r} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.0${r} <${+o+1}.0.0-0`:c?(Br("replaceCaret pr",c),o==="0"?s==="0"?u=`>=${o}.${s}.${a}-${c} <${o}.${s}.${+a+1}-0`:u=`>=${o}.${s}.${a}-${c} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.${a}-${c} <${+o+1}.0.0-0`):(Br("no pr"),o==="0"?s==="0"?u=`>=${o}.${s}.${a}${r} <${o}.${s}.${+a+1}-0`:u=`>=${o}.${s}.${a}${r} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.${a} <${+o+1}.0.0-0`),Br("caret return",u),u})},v4e=(e,t)=>(Br("replaceXRanges",e,t),e.split(/\s+/).map(n=>b4e(n,t)).join(" ")),b4e=(e,t)=>{e=e.trim();let n=t.loose?ra[bs.XRANGELOOSE]:ra[bs.XRANGE];return e.replace(n,(r,i,o,s,a,c)=>{Br("xRange",e,r,i,o,s,a,c);let u=ws(o),d=u||ws(s),f=d||ws(a),g=f;return i==="="&&g&&(i=""),c=t.includePrerelease?"-0":"",u?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&g?(d&&(s=0),a=0,i===">"?(i=">=",d?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",d?o=+o+1:s=+s+1),i==="<"&&(c="-0"),r=`${i+o}.${s}.${a}${c}`):d?r=`>=${o}.0.0${c} <${+o+1}.0.0-0`:f&&(r=`>=${o}.${s}.0${c} <${o}.${+s+1}.0-0`),Br("xRange return",r),r})},w4e=(e,t)=>(Br("replaceStars",e,t),e.trim().replace(ra[bs.STAR],"")),x4e=(e,t)=>(Br("replaceGTE0",e,t),e.trim().replace(ra[t.includePrerelease?bs.GTE0PRE:bs.GTE0],"")),C4e=e=>(t,n,r,i,o,s,a,c,u,d,f,g)=>(ws(r)?n="":ws(i)?n=`>=${r}.0.0${e?"-0":""}`:ws(o)?n=`>=${r}.${i}.0${e?"-0":""}`:s?n=`>=${n}`:n=`>=${n}${e?"-0":""}`,ws(u)?c="":ws(d)?c=`<${+u+1}.0.0-0`:ws(f)?c=`<${u}.${+d+1}.0-0`:g?c=`<=${u}.${d}.${f}-${g}`:e?c=`<${u}.${d}.${+f+1}-0`:c=`<=${c}`,`${n} ${c}`.trim()),E4e=(e,t,n)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let r=0;r<e.length;r++)if(Br(e[r].semver),e[r].semver!==vH.ANY&&e[r].semver.prerelease.length>0){let i=e[r].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}});var IC=ne((WSt,Kce)=>{"use strict";var SC=Symbol("SemVer ANY"),xH=class e{static get ANY(){return SC}constructor(t,n){if(n=Hce(n),t instanceof e){if(t.loose===!!n.loose)return t;t=t.value}t=t.trim().split(/\s+/).join(" "),wH("comparator",t,n),this.options=n,this.loose=!!n.loose,this.parse(t),this.semver===SC?this.value="":this.value=this.operator+this.semver.version,wH("comp",this)}parse(t){let n=this.options.loose?Zce[qce.COMPARATORLOOSE]:Zce[qce.COMPARATOR],r=t.match(n);if(!r)throw new TypeError(`Invalid comparator: ${t}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new Gce(r[2],this.options.loose):this.semver=SC}toString(){return this.value}test(t){if(wH("Comparator.test",t,this.options.loose),this.semver===SC||t===SC)return!0;if(typeof t=="string")try{t=new Gce(t,this.options)}catch{return!1}return bH(t,this.operator,this.semver,this.options)}intersects(t,n){if(!(t instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new Wce(t.value,n).test(this.value):t.operator===""?t.value===""?!0:new Wce(this.value,n).test(t.semver):(n=Hce(n),n.includePrerelease&&(this.value==="<0.0.0-0"||t.value==="<0.0.0-0")||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&t.operator.startsWith(">")||this.operator.startsWith("<")&&t.operator.startsWith("<")||this.semver.version===t.semver.version&&this.operator.includes("=")&&t.operator.includes("=")||bH(this.semver,"<",t.semver,n)&&this.operator.startsWith(">")&&t.operator.startsWith("<")||bH(this.semver,">",t.semver,n)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}};Kce.exports=xH;var Hce=AP(),{safeRe:Zce,t:qce}=$y(),bH=gH(),wH=CC(),Gce=Go(),Wce=oc()});var kC=ne((KSt,Jce)=>{"use strict";var I4e=oc(),S4e=(e,t,n)=>{try{t=new I4e(t,n)}catch{return!1}return t.test(e)};Jce.exports=S4e});var Qce=ne((JSt,Yce)=>{"use strict";var k4e=oc(),T4e=(e,t)=>new k4e(e,t).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));Yce.exports=T4e});var ele=ne((YSt,Xce)=>{"use strict";var A4e=Go(),O4e=oc(),M4e=(e,t,n)=>{let r=null,i=null,o=null;try{o=new O4e(t,n)}catch{return null}return e.forEach(s=>{o.test(s)&&(!r||i.compare(s)===-1)&&(r=s,i=new A4e(r,n))}),r};Xce.exports=M4e});var nle=ne((QSt,tle)=>{"use strict";var D4e=Go(),P4e=oc(),R4e=(e,t,n)=>{let r=null,i=null,o=null;try{o=new P4e(t,n)}catch{return null}return e.forEach(s=>{o.test(s)&&(!r||i.compare(s)===1)&&(r=s,i=new D4e(r,n))}),r};tle.exports=R4e});var ole=ne((XSt,ile)=>{"use strict";var CH=Go(),N4e=oc(),rle=EC(),$4e=(e,t)=>{e=new N4e(e,t);let n=new CH("0.0.0");if(e.test(n)||(n=new CH("0.0.0-0"),e.test(n)))return n;n=null;for(let r=0;r<e.set.length;++r){let i=e.set[r],o=null;i.forEach(s=>{let a=new CH(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||rle(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!n||rle(n,o))&&(n=o)}return n&&e.test(n)?n:null};ile.exports=$4e});var ale=ne((ekt,sle)=>{"use strict";var L4e=oc(),F4e=(e,t)=>{try{return new L4e(e,t).range||"*"}catch{return null}};sle.exports=F4e});var zP=ne((tkt,dle)=>{"use strict";var j4e=Go(),ule=IC(),{ANY:z4e}=ule,B4e=oc(),U4e=kC(),cle=EC(),lle=NP(),V4e=LP(),H4e=$P(),Z4e=(e,t,n,r)=>{e=new j4e(e,r),t=new B4e(t,r);let i,o,s,a,c;switch(n){case">":i=cle,o=V4e,s=lle,a=">",c=">=";break;case"<":i=lle,o=H4e,s=cle,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(U4e(e,t,r))return!1;for(let u=0;u<t.set.length;++u){let d=t.set[u],f=null,g=null;if(d.forEach(h=>{h.semver===z4e&&(h=new ule(">=0.0.0")),f=f||h,g=g||h,i(h.semver,f.semver,r)?f=h:s(h.semver,g.semver,r)&&(g=h)}),f.operator===a||f.operator===c||(!g.operator||g.operator===a)&&o(e,g.semver))return!1;if(g.operator===c&&s(e,g.semver))return!1}return!0};dle.exports=Z4e});var mle=ne((nkt,ple)=>{"use strict";var q4e=zP(),G4e=(e,t,n)=>q4e(e,t,">",n);ple.exports=G4e});var hle=ne((rkt,fle)=>{"use strict";var W4e=zP(),K4e=(e,t,n)=>W4e(e,t,"<",n);fle.exports=K4e});var yle=ne((ikt,_le)=>{"use strict";var gle=oc(),J4e=(e,t,n)=>(e=new gle(e,n),t=new gle(t,n),e.intersects(t,n));_le.exports=J4e});var ble=ne((okt,vle)=>{"use strict";var Y4e=kC(),Q4e=ic();vle.exports=(e,t,n)=>{let r=[],i=null,o=null,s=e.sort((d,f)=>Q4e(d,f,n));for(let d of s)Y4e(d,t,n)?(o=d,i||(i=d)):(o&&r.push([i,o]),o=null,i=null);i&&r.push([i,null]);let a=[];for(let[d,f]of r)d===f?a.push(d):!f&&d===s[0]?a.push("*"):f?d===s[0]?a.push(`<=${f}`):a.push(`${d} - ${f}`):a.push(`>=${d}`);let c=a.join(" || "),u=typeof t.raw=="string"?t.raw:String(t);return c.length<u.length?c:t}});var Sle=ne((skt,Ile)=>{"use strict";var wle=oc(),IH=IC(),{ANY:EH}=IH,TC=kC(),SH=ic(),X4e=(e,t,n={})=>{if(e===t)return!0;e=new wle(e,n),t=new wle(t,n);let r=!1;e:for(let i of e.set){for(let o of t.set){let s=tVe(i,o,n);if(r=r||s!==null,s)continue e}if(r)return!1}return!0},eVe=[new IH(">=0.0.0-0")],xle=[new IH(">=0.0.0")],tVe=(e,t,n)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===EH){if(t.length===1&&t[0].semver===EH)return!0;n.includePrerelease?e=eVe:e=xle}if(t.length===1&&t[0].semver===EH){if(n.includePrerelease)return!0;t=xle}let r=new Set,i,o;for(let h of e)h.operator===">"||h.operator===">="?i=Cle(i,h,n):h.operator==="<"||h.operator==="<="?o=Ele(o,h,n):r.add(h.semver);if(r.size>1)return null;let s;if(i&&o){if(s=SH(i.semver,o.semver,n),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let h of r){if(i&&!TC(h,String(i),n)||o&&!TC(h,String(o),n))return null;for(let v of t)if(!TC(h,String(v),n))return!1;return!0}let a,c,u,d,f=o&&!n.includePrerelease&&o.semver.prerelease.length?o.semver:!1,g=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1;f&&f.prerelease.length===1&&o.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let h of t){if(d=d||h.operator===">"||h.operator===">=",u=u||h.operator==="<"||h.operator==="<=",i){if(g&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===g.major&&h.semver.minor===g.minor&&h.semver.patch===g.patch&&(g=!1),h.operator===">"||h.operator===">="){if(a=Cle(i,h,n),a===h&&a!==i)return!1}else if(i.operator===">="&&!TC(i.semver,String(h),n))return!1}if(o){if(f&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===f.major&&h.semver.minor===f.minor&&h.semver.patch===f.patch&&(f=!1),h.operator==="<"||h.operator==="<="){if(c=Ele(o,h,n),c===h&&c!==o)return!1}else if(o.operator==="<="&&!TC(o.semver,String(h),n))return!1}if(!h.operator&&(o||i)&&s!==0)return!1}return!(i&&u&&!o&&s!==0||o&&d&&!i&&s!==0||g||f)},Cle=(e,t,n)=>{if(!e)return t;let r=SH(e.semver,t.semver,n);return r>0?e:r<0||t.operator===">"&&e.operator===">="?t:e},Ele=(e,t,n)=>{if(!e)return t;let r=SH(e.semver,t.semver,n);return r<0?e:r>0||t.operator==="<"&&e.operator==="<="?t:e};Ile.exports=X4e});var Ole=ne((akt,Ale)=>{"use strict";var kH=$y(),kle=xC(),nVe=Go(),Tle=pH(),rVe=eh(),iVe=ece(),oVe=nce(),sVe=oce(),aVe=cce(),cVe=uce(),lVe=pce(),uVe=fce(),dVe=gce(),pVe=ic(),mVe=bce(),fVe=xce(),hVe=RP(),gVe=Sce(),_Ve=Tce(),yVe=EC(),vVe=NP(),bVe=fH(),wVe=hH(),xVe=$P(),CVe=LP(),EVe=gH(),IVe=Lce(),SVe=IC(),kVe=oc(),TVe=kC(),AVe=Qce(),OVe=ele(),MVe=nle(),DVe=ole(),PVe=ale(),RVe=zP(),NVe=mle(),$Ve=hle(),LVe=yle(),FVe=ble(),jVe=Sle();Ale.exports={parse:rVe,valid:iVe,clean:oVe,inc:sVe,diff:aVe,major:cVe,minor:lVe,patch:uVe,prerelease:dVe,compare:pVe,rcompare:mVe,compareLoose:fVe,compareBuild:hVe,sort:gVe,rsort:_Ve,gt:yVe,lt:vVe,eq:bVe,neq:wVe,gte:xVe,lte:CVe,cmp:EVe,coerce:IVe,Comparator:SVe,Range:kVe,satisfies:TVe,toComparators:AVe,maxSatisfying:OVe,minSatisfying:MVe,minVersion:DVe,validRange:PVe,outside:RVe,gtr:NVe,ltr:$Ve,intersects:LVe,simplifyRange:FVe,subset:jVe,SemVer:nVe,re:kH.re,src:kH.src,tokens:kH.t,SEMVER_SPEC_VERSION:kle.SEMVER_SPEC_VERSION,RELEASE_TYPES:kle.RELEASE_TYPES,compareIdentifiers:Tle.compareIdentifiers,rcompareIdentifiers:Tle.rcompareIdentifiers}});var Jle=ne((eTt,Kle)=>{"use strict";var Gle=(e=0)=>t=>`\x1B[${38+e};5;${t}m`,Wle=(e=0)=>(t,n,r)=>`\x1B[${38+e};2;${t};${n};${r}m`;function s3e(){let e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(let[n,r]of Object.entries(t)){for(let[i,o]of Object.entries(r))t[i]={open:`\x1B[${o[0]}m`,close:`\x1B[${o[1]}m`},r[i]=t[i],e.set(o[0],o[1]);Object.defineProperty(t,n,{value:r,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="\x1B[39m",t.bgColor.close="\x1B[49m",t.color.ansi256=Gle(),t.color.ansi16m=Wle(),t.bgColor.ansi256=Gle(10),t.bgColor.ansi16m=Wle(10),Object.defineProperties(t,{rgbToAnsi256:{value:(n,r,i)=>n===r&&r===i?n<8?16:n>248?231:Math.round((n-8)/247*24)+232:16+36*Math.round(n/255*5)+6*Math.round(r/255*5)+Math.round(i/255*5),enumerable:!1},hexToRgb:{value:n=>{let r=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(n.toString(16));if(!r)return[0,0,0];let{colorString:i}=r.groups;i.length===3&&(i=i.split("").map(s=>s+s).join(""));let o=Number.parseInt(i,16);return[o>>16&255,o>>8&255,o&255]},enumerable:!1},hexToAnsi256:{value:n=>t.rgbToAnsi256(...t.hexToRgb(n)),enumerable:!1}}),t}Object.defineProperty(Kle,"exports",{enumerable:!0,get:s3e})});var sfe=ne(S1=>{"use strict";S1.byteLength=R5e;S1.toByteArray=$5e;S1.fromByteArray=j5e;var lu=[],dc=[],P5e=typeof Uint8Array<"u"?Uint8Array:Array,VZ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Mh=0,ife=VZ.length;Mh<ife;++Mh)lu[Mh]=VZ[Mh],dc[VZ.charCodeAt(Mh)]=Mh;var Mh,ife;dc[45]=62;dc[95]=63;function ofe(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function R5e(e){var t=ofe(e),n=t[0],r=t[1];return(n+r)*3/4-r}function N5e(e,t,n){return(t+n)*3/4-n}function $5e(e){var t,n=ofe(e),r=n[0],i=n[1],o=new P5e(N5e(e,r,i)),s=0,a=i>0?r-4:r,c;for(c=0;c<a;c+=4)t=dc[e.charCodeAt(c)]<<18|dc[e.charCodeAt(c+1)]<<12|dc[e.charCodeAt(c+2)]<<6|dc[e.charCodeAt(c+3)],o[s++]=t>>16&255,o[s++]=t>>8&255,o[s++]=t&255;return i===2&&(t=dc[e.charCodeAt(c)]<<2|dc[e.charCodeAt(c+1)]>>4,o[s++]=t&255),i===1&&(t=dc[e.charCodeAt(c)]<<10|dc[e.charCodeAt(c+1)]<<4|dc[e.charCodeAt(c+2)]>>2,o[s++]=t>>8&255,o[s++]=t&255),o}function L5e(e){return lu[e>>18&63]+lu[e>>12&63]+lu[e>>6&63]+lu[e&63]}function F5e(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(e[o+2]&255),i.push(L5e(r));return i.join("")}function j5e(e){for(var t,n=e.length,r=n%3,i=[],o=16383,s=0,a=n-r;s<a;s+=o)i.push(F5e(e,s,s+o>a?a:s+o));return r===1?(t=e[n-1],i.push(lu[t>>2]+lu[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],i.push(lu[t>>10]+lu[t>>4&63]+lu[t<<2&63]+"=")),i.join("")}});var Nye=ne((x$,Rye)=>{"use strict";(function(e,t){typeof x$=="object"&&typeof Rye<"u"?t(x$):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.leaflet={}))})(x$,function(e){"use strict";var t="1.9.4";function n(l){var p,_,w,I;for(_=1,w=arguments.length;_<w;_++){I=arguments[_];for(p in I)l[p]=I[p]}return l}var r=Object.create||(function(){function l(){}return function(p){return l.prototype=p,new l}})();function i(l,p){var _=Array.prototype.slice;if(l.bind)return l.bind.apply(l,_.call(arguments,1));var w=_.call(arguments,2);return function(){return l.apply(p,w.length?w.concat(_.call(arguments)):arguments)}}var o=0;function s(l){return"_leaflet_id"in l||(l._leaflet_id=++o),l._leaflet_id}function a(l,p,_){var w,I,T,j;return j=function(){w=!1,I&&(T.apply(_,I),I=!1)},T=function(){w?I=arguments:(l.apply(_,arguments),setTimeout(j,p),w=!0)},T}function c(l,p,_){var w=p[1],I=p[0],T=w-I;return l===w&&_?l:((l-I)%T+T)%T+I}function u(){return!1}function d(l,p){if(p===!1)return l;var _=Math.pow(10,p===void 0?6:p);return Math.round(l*_)/_}function f(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function g(l){return f(l).split(/\s+/)}function h(l,p){Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?r(l.options):{});for(var _ in p)l.options[_]=p[_];return l.options}function v(l,p,_){var w=[];for(var I in l)w.push(encodeURIComponent(_?I.toUpperCase():I)+"="+encodeURIComponent(l[I]));return(!p||p.indexOf("?")===-1?"?":"&")+w.join("&")}var x=/\{ *([\w_ -]+) *\}/g;function E(l,p){return l.replace(x,function(_,w){var I=p[w];if(I===void 0)throw new Error("No value provided for variable "+_);return typeof I=="function"&&(I=I(p)),I})}var C=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function S(l,p){for(var _=0;_<l.length;_++)if(l[_]===p)return _;return-1}var A="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function P(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var F=0;function B(l){var p=+new Date,_=Math.max(0,16-(p-F));return F=p+_,window.setTimeout(l,_)}var ee=window.requestAnimationFrame||P("RequestAnimationFrame")||B,D=window.cancelAnimationFrame||P("CancelAnimationFrame")||P("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function pe(l,p,_){if(_&&ee===B)l.call(p);else return ee.call(window,i(l,p))}function xe(l){l&&D.call(window,l)}var Ge={__proto__:null,extend:n,create:r,bind:i,get lastId(){return o},stamp:s,throttle:a,wrapNum:c,falseFn:u,formatNum:d,trim:f,splitWords:g,setOptions:h,getParamString:v,template:E,isArray:C,indexOf:S,emptyImageUrl:A,requestFn:ee,cancelFn:D,requestAnimFrame:pe,cancelAnimFrame:xe};function fe(){}fe.extend=function(l){var p=function(){h(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},_=p.__super__=this.prototype,w=r(_);w.constructor=p,p.prototype=w;for(var I in this)Object.prototype.hasOwnProperty.call(this,I)&&I!=="prototype"&&I!=="__super__"&&(p[I]=this[I]);return l.statics&&n(p,l.statics),l.includes&&(Se(l.includes),n.apply(null,[w].concat(l.includes))),n(w,l),delete w.statics,delete w.includes,w.options&&(w.options=_.options?r(_.options):{},n(w.options,l.options)),w._initHooks=[],w.callInitHooks=function(){if(!this._initHooksCalled){_.callInitHooks&&_.callInitHooks.call(this),this._initHooksCalled=!0;for(var T=0,j=w._initHooks.length;T<j;T++)w._initHooks[T].call(this)}},p},fe.include=function(l){var p=this.prototype.options;return n(this.prototype,l),l.options&&(this.prototype.options=p,this.mergeOptions(l.options)),this},fe.mergeOptions=function(l){return n(this.prototype.options,l),this},fe.addInitHook=function(l){var p=Array.prototype.slice.call(arguments,1),_=typeof l=="function"?l:function(){this[l].apply(this,p)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(_),this};function Se(l){if(!(typeof L>"u"||!L||!L.Mixin)){l=C(l)?l:[l];for(var p=0;p<l.length;p++)l[p]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Fe={on:function(l,p,_){if(typeof l=="object")for(var w in l)this._on(w,l[w],p);else{l=g(l);for(var I=0,T=l.length;I<T;I++)this._on(l[I],p,_)}return this},off:function(l,p,_){if(!arguments.length)delete this._events;else if(typeof l=="object")for(var w in l)this._off(w,l[w],p);else{l=g(l);for(var I=arguments.length===1,T=0,j=l.length;T<j;T++)I?this._off(l[T]):this._off(l[T],p,_)}return this},_on:function(l,p,_,w){if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}if(this._listens(l,p,_)===!1){_===this&&(_=void 0);var I={fn:p,ctx:_};w&&(I.once=!0),this._events=this._events||{},this._events[l]=this._events[l]||[],this._events[l].push(I)}},_off:function(l,p,_){var w,I,T;if(this._events&&(w=this._events[l],!!w)){if(arguments.length===1){if(this._firingCount)for(I=0,T=w.length;I<T;I++)w[I].fn=u;delete this._events[l];return}if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}var j=this._listens(l,p,_);if(j!==!1){var G=w[j];this._firingCount&&(G.fn=u,this._events[l]=w=w.slice()),w.splice(j,1)}}},fire:function(l,p,_){if(!this.listens(l,_))return this;var w=n({},p,{type:l,target:this,sourceTarget:p&&p.sourceTarget||this});if(this._events){var I=this._events[l];if(I){this._firingCount=this._firingCount+1||1;for(var T=0,j=I.length;T<j;T++){var G=I[T],W=G.fn;G.once&&this.off(l,W,G.ctx),W.call(G.ctx||this,w)}this._firingCount--}}return _&&this._propagateEvent(w),this},listens:function(l,p,_,w){typeof l!="string"&&console.warn('"string" type argument expected');var I=p;typeof p!="function"&&(w=!!p,I=void 0,_=void 0);var T=this._events&&this._events[l];if(T&&T.length&&this._listens(l,I,_)!==!1)return!0;if(w){for(var j in this._eventParents)if(this._eventParents[j].listens(l,p,_,w))return!0}return!1},_listens:function(l,p,_){if(!this._events)return!1;var w=this._events[l]||[];if(!p)return!!w.length;_===this&&(_=void 0);for(var I=0,T=w.length;I<T;I++)if(w[I].fn===p&&w[I].ctx===_)return I;return!1},once:function(l,p,_){if(typeof l=="object")for(var w in l)this._on(w,l[w],p,!0);else{l=g(l);for(var I=0,T=l.length;I<T;I++)this._on(l[I],p,_,!0)}return this},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[s(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[s(l)],this},_propagateEvent:function(l){for(var p in this._eventParents)this._eventParents[p].fire(l.type,n({layer:l.target,propagatedFrom:l.target},l),!0)}};Fe.addEventListener=Fe.on,Fe.removeEventListener=Fe.clearAllEventListeners=Fe.off,Fe.addOneTimeEventListener=Fe.once,Fe.fireEvent=Fe.fire,Fe.hasEventListeners=Fe.listens;var Me=fe.extend(Fe);function ce(l,p,_){this.x=_?Math.round(l):l,this.y=_?Math.round(p):p}var gt=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};ce.prototype={clone:function(){return new ce(this.x,this.y)},add:function(l){return this.clone()._add(ve(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(ve(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new ce(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new ce(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=gt(this.x),this.y=gt(this.y),this},distanceTo:function(l){l=ve(l);var p=l.x-this.x,_=l.y-this.y;return Math.sqrt(p*p+_*_)},equals:function(l){return l=ve(l),l.x===this.x&&l.y===this.y},contains:function(l){return l=ve(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+d(this.x)+", "+d(this.y)+")"}};function ve(l,p,_){return l instanceof ce?l:C(l)?new ce(l[0],l[1]):l==null?l:typeof l=="object"&&"x"in l&&"y"in l?new ce(l.x,l.y):new ce(l,p,_)}function ke(l,p){if(l)for(var _=p?[l,p]:l,w=0,I=_.length;w<I;w++)this.extend(_[w])}ke.prototype={extend:function(l){var p,_;if(!l)return this;if(l instanceof ce||typeof l[0]=="number"||"x"in l)p=_=ve(l);else if(l=We(l),p=l.min,_=l.max,!p||!_)return this;return!this.min&&!this.max?(this.min=p.clone(),this.max=_.clone()):(this.min.x=Math.min(p.x,this.min.x),this.max.x=Math.max(_.x,this.max.x),this.min.y=Math.min(p.y,this.min.y),this.max.y=Math.max(_.y,this.max.y)),this},getCenter:function(l){return ve((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return ve(this.min.x,this.max.y)},getTopRight:function(){return ve(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var p,_;return typeof l[0]=="number"||l instanceof ce?l=ve(l):l=We(l),l instanceof ke?(p=l.min,_=l.max):p=_=l,p.x>=this.min.x&&_.x<=this.max.x&&p.y>=this.min.y&&_.y<=this.max.y},intersects:function(l){l=We(l);var p=this.min,_=this.max,w=l.min,I=l.max,T=I.x>=p.x&&w.x<=_.x,j=I.y>=p.y&&w.y<=_.y;return T&&j},overlaps:function(l){l=We(l);var p=this.min,_=this.max,w=l.min,I=l.max,T=I.x>p.x&&w.x<_.x,j=I.y>p.y&&w.y<_.y;return T&&j},isValid:function(){return!!(this.min&&this.max)},pad:function(l){var p=this.min,_=this.max,w=Math.abs(p.x-_.x)*l,I=Math.abs(p.y-_.y)*l;return We(ve(p.x-w,p.y-I),ve(_.x+w,_.y+I))},equals:function(l){return l?(l=We(l),this.min.equals(l.getTopLeft())&&this.max.equals(l.getBottomRight())):!1}};function We(l,p){return!l||l instanceof ke?l:new ke(l,p)}function _t(l,p){if(l)for(var _=p?[l,p]:l,w=0,I=_.length;w<I;w++)this.extend(_[w])}_t.prototype={extend:function(l){var p=this._southWest,_=this._northEast,w,I;if(l instanceof Bt)w=l,I=l;else if(l instanceof _t){if(w=l._southWest,I=l._northEast,!w||!I)return this}else return l?this.extend(Gt(l)||Ot(l)):this;return!p&&!_?(this._southWest=new Bt(w.lat,w.lng),this._northEast=new Bt(I.lat,I.lng)):(p.lat=Math.min(w.lat,p.lat),p.lng=Math.min(w.lng,p.lng),_.lat=Math.max(I.lat,_.lat),_.lng=Math.max(I.lng,_.lng)),this},pad:function(l){var p=this._southWest,_=this._northEast,w=Math.abs(p.lat-_.lat)*l,I=Math.abs(p.lng-_.lng)*l;return new _t(new Bt(p.lat-w,p.lng-I),new Bt(_.lat+w,_.lng+I))},getCenter:function(){return new Bt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Bt(this.getNorth(),this.getWest())},getSouthEast:function(){return new Bt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){typeof l[0]=="number"||l instanceof Bt||"lat"in l?l=Gt(l):l=Ot(l);var p=this._southWest,_=this._northEast,w,I;return l instanceof _t?(w=l.getSouthWest(),I=l.getNorthEast()):w=I=l,w.lat>=p.lat&&I.lat<=_.lat&&w.lng>=p.lng&&I.lng<=_.lng},intersects:function(l){l=Ot(l);var p=this._southWest,_=this._northEast,w=l.getSouthWest(),I=l.getNorthEast(),T=I.lat>=p.lat&&w.lat<=_.lat,j=I.lng>=p.lng&&w.lng<=_.lng;return T&&j},overlaps:function(l){l=Ot(l);var p=this._southWest,_=this._northEast,w=l.getSouthWest(),I=l.getNorthEast(),T=I.lat>p.lat&&w.lat<_.lat,j=I.lng>p.lng&&w.lng<_.lng;return T&&j},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,p){return l?(l=Ot(l),this._southWest.equals(l.getSouthWest(),p)&&this._northEast.equals(l.getNorthEast(),p)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ot(l,p){return l instanceof _t?l:new _t(l,p)}function Bt(l,p,_){if(isNaN(l)||isNaN(p))throw new Error("Invalid LatLng object: ("+l+", "+p+")");this.lat=+l,this.lng=+p,_!==void 0&&(this.alt=+_)}Bt.prototype={equals:function(l,p){if(!l)return!1;l=Gt(l);var _=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return _<=(p===void 0?1e-9:p)},toString:function(l){return"LatLng("+d(this.lat,l)+", "+d(this.lng,l)+")"},distanceTo:function(l){return M.distance(this,Gt(l))},wrap:function(){return M.wrapLatLng(this)},toBounds:function(l){var p=180*l/40075017,_=p/Math.cos(Math.PI/180*this.lat);return Ot([this.lat-p,this.lng-_],[this.lat+p,this.lng+_])},clone:function(){return new Bt(this.lat,this.lng,this.alt)}};function Gt(l,p,_){return l instanceof Bt?l:C(l)&&typeof l[0]!="object"?l.length===3?new Bt(l[0],l[1],l[2]):l.length===2?new Bt(l[0],l[1]):null:l==null?l:typeof l=="object"&&"lat"in l?new Bt(l.lat,"lng"in l?l.lng:l.lon,l.alt):p===void 0?null:new Bt(l,p,_)}var Dn={latLngToPoint:function(l,p){var _=this.projection.project(l),w=this.scale(p);return this.transformation._transform(_,w)},pointToLatLng:function(l,p){var _=this.scale(p),w=this.transformation.untransform(l,_);return this.projection.unproject(w)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var p=this.projection.bounds,_=this.scale(l),w=this.transformation.transform(p.min,_),I=this.transformation.transform(p.max,_);return new ke(w,I)},infinite:!1,wrapLatLng:function(l){var p=this.wrapLng?c(l.lng,this.wrapLng,!0):l.lng,_=this.wrapLat?c(l.lat,this.wrapLat,!0):l.lat,w=l.alt;return new Bt(_,p,w)},wrapLatLngBounds:function(l){var p=l.getCenter(),_=this.wrapLatLng(p),w=p.lat-_.lat,I=p.lng-_.lng;if(w===0&&I===0)return l;var T=l.getSouthWest(),j=l.getNorthEast(),G=new Bt(T.lat-w,T.lng-I),W=new Bt(j.lat-w,j.lng-I);return new _t(G,W)}},M=n({},Dn,{wrapLng:[-180,180],R:6371e3,distance:function(l,p){var _=Math.PI/180,w=l.lat*_,I=p.lat*_,T=Math.sin((p.lat-l.lat)*_/2),j=Math.sin((p.lng-l.lng)*_/2),G=T*T+Math.cos(w)*Math.cos(I)*j*j,W=2*Math.atan2(Math.sqrt(G),Math.sqrt(1-G));return this.R*W}}),O=6378137,ie={R:O,MAX_LATITUDE:85.0511287798,project:function(l){var p=Math.PI/180,_=this.MAX_LATITUDE,w=Math.max(Math.min(_,l.lat),-_),I=Math.sin(w*p);return new ce(this.R*l.lng*p,this.R*Math.log((1+I)/(1-I))/2)},unproject:function(l){var p=180/Math.PI;return new Bt((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*p,l.x*p/this.R)},bounds:(function(){var l=O*Math.PI;return new ke([-l,-l],[l,l])})()};function Z(l,p,_,w){if(C(l)){this._a=l[0],this._b=l[1],this._c=l[2],this._d=l[3];return}this._a=l,this._b=p,this._c=_,this._d=w}Z.prototype={transform:function(l,p){return this._transform(l.clone(),p)},_transform:function(l,p){return p=p||1,l.x=p*(this._a*l.x+this._b),l.y=p*(this._c*l.y+this._d),l},untransform:function(l,p){return p=p||1,new ce((l.x/p-this._b)/this._a,(l.y/p-this._d)/this._c)}};function en(l,p,_,w){return new Z(l,p,_,w)}var Wn=n({},M,{code:"EPSG:3857",projection:ie,transformation:(function(){var l=.5/(Math.PI*ie.R);return en(l,.5,-l,.5)})()}),yr=n({},Wn,{code:"EPSG:900913"});function Yr(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function Ei(l,p){var _="",w,I,T,j,G,W;for(w=0,T=l.length;w<T;w++){for(G=l[w],I=0,j=G.length;I<j;I++)W=G[I],_+=(I?"L":"M")+W.x+" "+W.y;_+=p?mt.svg?"z":"x":""}return _||"M0 0"}var ts=document.documentElement.style,vr="ActiveXObject"in window,Ns=vr&&!document.addEventListener,bu="msLaunchUri"in navigator&&!("documentMode"in document),qd=sl("webkit"),Pe=sl("android"),ol=sl("android 2")||sl("android 3"),Mt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),lt=Pe&&sl("Google")&&Mt<537&&!("AudioNode"in window),Dt=!!window.opera,qe=!bu&&sl("chrome"),Ae=sl("gecko")&&!qd&&!Dt&&!vr,jt=!qe&&sl("safari"),It=sl("phantom"),po="OTransition"in ts,ZI=navigator.platform.indexOf("Win")===0,Lb=vr&&"transition"in ts,tL="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ol,z9="MozPerspective"in ts,cve=!window.L_DISABLE_3D&&(Lb||tL||z9)&&!po&&!It,Fb=typeof orientation<"u"||sl("mobile"),lve=Fb&&qd,uve=Fb&&tL,B9=!window.PointerEvent&&window.MSPointerEvent,U9=!!(window.PointerEvent||B9),V9="ontouchstart"in window||!!window.TouchEvent,dve=!window.L_NO_TOUCH&&(V9||U9),pve=Fb&&Dt,mve=Fb&&Ae,fve=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,hve=(function(){var l=!1;try{var p=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",u,p),window.removeEventListener("testPassiveEventSupport",u,p)}catch{}return l})(),gve=(function(){return!!document.createElement("canvas").getContext})(),nL=!!(document.createElementNS&&Yr("svg").createSVGRect),_ve=!!nL&&(function(){var l=document.createElement("div");return l.innerHTML="<svg/>",(l.firstChild&&l.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),yve=!nL&&(function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var p=l.firstChild;return p.style.behavior="url(#default#VML)",p&&typeof p.adj=="object"}catch{return!1}})(),vve=navigator.platform.indexOf("Mac")===0,bve=navigator.platform.indexOf("Linux")===0;function sl(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var mt={ie:vr,ielt9:Ns,edge:bu,webkit:qd,android:Pe,android23:ol,androidStock:lt,opera:Dt,chrome:qe,gecko:Ae,safari:jt,phantom:It,opera12:po,win:ZI,ie3d:Lb,webkit3d:tL,gecko3d:z9,any3d:cve,mobile:Fb,mobileWebkit:lve,mobileWebkit3d:uve,msPointer:B9,pointer:U9,touch:dve,touchNative:V9,mobileOpera:pve,mobileGecko:mve,retina:fve,passiveEvents:hve,canvas:gve,svg:nL,vml:yve,inlineSvg:_ve,mac:vve,linux:bve},H9=mt.msPointer?"MSPointerDown":"pointerdown",Z9=mt.msPointer?"MSPointerMove":"pointermove",q9=mt.msPointer?"MSPointerUp":"pointerup",G9=mt.msPointer?"MSPointerCancel":"pointercancel",rL={touchstart:H9,touchmove:Z9,touchend:q9,touchcancel:G9},W9={touchstart:Sve,touchmove:qI,touchend:qI,touchcancel:qI},tg={},K9=!1;function wve(l,p,_){return p==="touchstart"&&Ive(),W9[p]?(_=W9[p].bind(this,_),l.addEventListener(rL[p],_,!1),_):(console.warn("wrong event specified:",p),u)}function xve(l,p,_){if(!rL[p]){console.warn("wrong event specified:",p);return}l.removeEventListener(rL[p],_,!1)}function Cve(l){tg[l.pointerId]=l}function Eve(l){tg[l.pointerId]&&(tg[l.pointerId]=l)}function J9(l){delete tg[l.pointerId]}function Ive(){K9||(document.addEventListener(H9,Cve,!0),document.addEventListener(Z9,Eve,!0),document.addEventListener(q9,J9,!0),document.addEventListener(G9,J9,!0),K9=!0)}function qI(l,p){if(p.pointerType!==(p.MSPOINTER_TYPE_MOUSE||"mouse")){p.touches=[];for(var _ in tg)p.touches.push(tg[_]);p.changedTouches=[p],l(p)}}function Sve(l,p){p.MSPOINTER_TYPE_TOUCH&&p.pointerType===p.MSPOINTER_TYPE_TOUCH&&mo(p),qI(l,p)}function kve(l){var p={},_,w;for(w in l)_=l[w],p[w]=_&&_.bind?_.bind(l):_;return l=p,p.type="dblclick",p.detail=2,p.isTrusted=!1,p._simulated=!0,p}var Tve=200;function Ave(l,p){l.addEventListener("dblclick",p);var _=0,w;function I(T){if(T.detail!==1){w=T.detail;return}if(!(T.pointerType==="mouse"||T.sourceCapabilities&&!T.sourceCapabilities.firesTouchEvents)){var j=tG(T);if(!(j.some(function(W){return W instanceof HTMLLabelElement&&W.attributes.for})&&!j.some(function(W){return W instanceof HTMLInputElement||W instanceof HTMLSelectElement}))){var G=Date.now();G-_<=Tve?(w++,w===2&&p(kve(T))):w=1,_=G}}}return l.addEventListener("click",I),{dblclick:p,simDblclick:I}}function Ove(l,p){l.removeEventListener("dblclick",p.dblclick),l.removeEventListener("click",p.simDblclick)}var iL=KI(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),jb=KI(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Y9=jb==="webkitTransition"||jb==="OTransition"?jb+"End":"transitionend";function Q9(l){return typeof l=="string"?document.getElementById(l):l}function zb(l,p){var _=l.style[p]||l.currentStyle&&l.currentStyle[p];if((!_||_==="auto")&&document.defaultView){var w=document.defaultView.getComputedStyle(l,null);_=w?w[p]:null}return _==="auto"?null:_}function Hn(l,p,_){var w=document.createElement(l);return w.className=p||"",_&&_.appendChild(w),w}function Qr(l){var p=l.parentNode;p&&p.removeChild(l)}function GI(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function ng(l){var p=l.parentNode;p&&p.lastChild!==l&&p.appendChild(l)}function rg(l){var p=l.parentNode;p&&p.firstChild!==l&&p.insertBefore(l,p.firstChild)}function oL(l,p){if(l.classList!==void 0)return l.classList.contains(p);var _=WI(l);return _.length>0&&new RegExp("(^|\\s)"+p+"(\\s|$)").test(_)}function pn(l,p){if(l.classList!==void 0)for(var _=g(p),w=0,I=_.length;w<I;w++)l.classList.add(_[w]);else if(!oL(l,p)){var T=WI(l);sL(l,(T?T+" ":"")+p)}}function mi(l,p){l.classList!==void 0?l.classList.remove(p):sL(l,f((" "+WI(l)+" ").replace(" "+p+" "," ")))}function sL(l,p){l.className.baseVal===void 0?l.className=p:l.className.baseVal=p}function WI(l){return l.correspondingElement&&(l=l.correspondingElement),l.className.baseVal===void 0?l.className:l.className.baseVal}function Na(l,p){"opacity"in l.style?l.style.opacity=p:"filter"in l.style&&Mve(l,p)}function Mve(l,p){var _=!1,w="DXImageTransform.Microsoft.Alpha";try{_=l.filters.item(w)}catch{if(p===1)return}p=Math.round(p*100),_?(_.Enabled=p!==100,_.Opacity=p):l.style.filter+=" progid:"+w+"(opacity="+p+")"}function KI(l){for(var p=document.documentElement.style,_=0;_<l.length;_++)if(l[_]in p)return l[_];return!1}function Lm(l,p,_){var w=p||new ce(0,0);l.style[iL]=(mt.ie3d?"translate("+w.x+"px,"+w.y+"px)":"translate3d("+w.x+"px,"+w.y+"px,0)")+(_?" scale("+_+")":"")}function Ii(l,p){l._leaflet_pos=p,mt.any3d?Lm(l,p):(l.style.left=p.x+"px",l.style.top=p.y+"px")}function Fm(l){return l._leaflet_pos||new ce(0,0)}var Bb,Ub,aL;if("onselectstart"in document)Bb=function(){rn(window,"selectstart",mo)},Ub=function(){Sr(window,"selectstart",mo)};else{var Vb=KI(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Bb=function(){if(Vb){var l=document.documentElement.style;aL=l[Vb],l[Vb]="none"}},Ub=function(){Vb&&(document.documentElement.style[Vb]=aL,aL=void 0)}}function cL(){rn(window,"dragstart",mo)}function lL(){Sr(window,"dragstart",mo)}var JI,uL;function dL(l){for(;l.tabIndex===-1;)l=l.parentNode;l.style&&(YI(),JI=l,uL=l.style.outlineStyle,l.style.outlineStyle="none",rn(window,"keydown",YI))}function YI(){JI&&(JI.style.outlineStyle=uL,JI=void 0,uL=void 0,Sr(window,"keydown",YI))}function X9(l){do l=l.parentNode;while((!l.offsetWidth||!l.offsetHeight)&&l!==document.body);return l}function pL(l){var p=l.getBoundingClientRect();return{x:p.width/l.offsetWidth||1,y:p.height/l.offsetHeight||1,boundingClientRect:p}}var Dve={__proto__:null,TRANSFORM:iL,TRANSITION:jb,TRANSITION_END:Y9,get:Q9,getStyle:zb,create:Hn,remove:Qr,empty:GI,toFront:ng,toBack:rg,hasClass:oL,addClass:pn,removeClass:mi,setClass:sL,getClass:WI,setOpacity:Na,testProp:KI,setTransform:Lm,setPosition:Ii,getPosition:Fm,get disableTextSelection(){return Bb},get enableTextSelection(){return Ub},disableImageDrag:cL,enableImageDrag:lL,preventOutline:dL,restoreOutline:YI,getSizedParentNode:X9,getScale:pL};function rn(l,p,_,w){if(p&&typeof p=="object")for(var I in p)fL(l,I,p[I],_);else{p=g(p);for(var T=0,j=p.length;T<j;T++)fL(l,p[T],_,w)}return this}var al="_leaflet_events";function Sr(l,p,_,w){if(arguments.length===1)eG(l),delete l[al];else if(p&&typeof p=="object")for(var I in p)hL(l,I,p[I],_);else if(p=g(p),arguments.length===2)eG(l,function(G){return S(p,G)!==-1});else for(var T=0,j=p.length;T<j;T++)hL(l,p[T],_,w);return this}function eG(l,p){for(var _ in l[al]){var w=_.split(/\d/)[0];(!p||p(w))&&hL(l,w,null,null,_)}}var mL={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function fL(l,p,_,w){var I=p+s(_)+(w?"_"+s(w):"");if(l[al]&&l[al][I])return this;var T=function(G){return _.call(w||l,G||window.event)},j=T;!mt.touchNative&&mt.pointer&&p.indexOf("touch")===0?T=wve(l,p,T):mt.touch&&p==="dblclick"?T=Ave(l,T):"addEventListener"in l?p==="touchstart"||p==="touchmove"||p==="wheel"||p==="mousewheel"?l.addEventListener(mL[p]||p,T,mt.passiveEvents?{passive:!1}:!1):p==="mouseenter"||p==="mouseleave"?(T=function(G){G=G||window.event,_L(l,G)&&j(G)},l.addEventListener(mL[p],T,!1)):l.addEventListener(p,j,!1):l.attachEvent("on"+p,T),l[al]=l[al]||{},l[al][I]=T}function hL(l,p,_,w,I){I=I||p+s(_)+(w?"_"+s(w):"");var T=l[al]&&l[al][I];if(!T)return this;!mt.touchNative&&mt.pointer&&p.indexOf("touch")===0?xve(l,p,T):mt.touch&&p==="dblclick"?Ove(l,T):"removeEventListener"in l?l.removeEventListener(mL[p]||p,T,!1):l.detachEvent("on"+p,T),l[al][I]=null}function jm(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function gL(l){return fL(l,"wheel",jm),this}function Hb(l){return rn(l,"mousedown touchstart dblclick contextmenu",jm),l._leaflet_disable_click=!0,this}function mo(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function zm(l){return mo(l),jm(l),this}function tG(l){if(l.composedPath)return l.composedPath();for(var p=[],_=l.target;_;)p.push(_),_=_.parentNode;return p}function nG(l,p){if(!p)return new ce(l.clientX,l.clientY);var _=pL(p),w=_.boundingClientRect;return new ce((l.clientX-w.left)/_.x-p.clientLeft,(l.clientY-w.top)/_.y-p.clientTop)}var Pve=mt.linux&&mt.chrome?window.devicePixelRatio:mt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function rG(l){return mt.edge?l.wheelDeltaY/2:l.deltaY&&l.deltaMode===0?-l.deltaY/Pve:l.deltaY&&l.deltaMode===1?-l.deltaY*20:l.deltaY&&l.deltaMode===2?-l.deltaY*60:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?-l.detail*20:l.detail?l.detail/-32765*60:0}function _L(l,p){var _=p.relatedTarget;if(!_)return!0;try{for(;_&&_!==l;)_=_.parentNode}catch{return!1}return _!==l}var Rve={__proto__:null,on:rn,off:Sr,stopPropagation:jm,disableScrollPropagation:gL,disableClickPropagation:Hb,preventDefault:mo,stop:zm,getPropagationPath:tG,getMousePosition:nG,getWheelDelta:rG,isExternalTarget:_L,addListener:rn,removeListener:Sr},iG=Me.extend({run:function(l,p,_,w){this.stop(),this._el=l,this._inProgress=!0,this._duration=_||.25,this._easeOutPower=1/Math.max(w||.5,.2),this._startPos=Fm(l),this._offset=p.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=pe(this._animate,this),this._step()},_step:function(l){var p=+new Date-this._startTime,_=this._duration*1e3;p<_?this._runFrame(this._easeOut(p/_),l):(this._runFrame(1),this._complete())},_runFrame:function(l,p){var _=this._startPos.add(this._offset.multiplyBy(l));p&&_._round(),Ii(this._el,_),this.fire("step")},_complete:function(){xe(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),Fn=Me.extend({options:{crs:Wn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,p){p=h(this,p),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),p.maxBounds&&this.setMaxBounds(p.maxBounds),p.zoom!==void 0&&(this._zoom=this._limitZoom(p.zoom)),p.center&&p.zoom!==void 0&&this.setView(Gt(p.center),p.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=jb&&mt.any3d&&!mt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),rn(this._proxy,Y9,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,p,_){if(p=p===void 0?this._zoom:this._limitZoom(p),l=this._limitCenter(Gt(l),p,this.options.maxBounds),_=_||{},this._stop(),this._loaded&&!_.reset&&_!==!0){_.animate!==void 0&&(_.zoom=n({animate:_.animate},_.zoom),_.pan=n({animate:_.animate,duration:_.duration},_.pan));var w=this._zoom!==p?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,p,_.zoom):this._tryAnimatedPan(l,_.pan);if(w)return clearTimeout(this._sizeTimer),this}return this._resetView(l,p,_.pan&&_.pan.noMoveStart),this},setZoom:function(l,p){return this._loaded?this.setView(this.getCenter(),l,{zoom:p}):(this._zoom=l,this)},zoomIn:function(l,p){return l=l||(mt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+l,p)},zoomOut:function(l,p){return l=l||(mt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-l,p)},setZoomAround:function(l,p,_){var w=this.getZoomScale(p),I=this.getSize().divideBy(2),T=l instanceof ce?l:this.latLngToContainerPoint(l),j=T.subtract(I).multiplyBy(1-1/w),G=this.containerPointToLatLng(I.add(j));return this.setView(G,p,{zoom:_})},_getBoundsCenterZoom:function(l,p){p=p||{},l=l.getBounds?l.getBounds():Ot(l);var _=ve(p.paddingTopLeft||p.padding||[0,0]),w=ve(p.paddingBottomRight||p.padding||[0,0]),I=this.getBoundsZoom(l,!1,_.add(w));if(I=typeof p.maxZoom=="number"?Math.min(p.maxZoom,I):I,I===1/0)return{center:l.getCenter(),zoom:I};var T=w.subtract(_).divideBy(2),j=this.project(l.getSouthWest(),I),G=this.project(l.getNorthEast(),I),W=this.unproject(j.add(G).divideBy(2).add(T),I);return{center:W,zoom:I}},fitBounds:function(l,p){if(l=Ot(l),!l.isValid())throw new Error("Bounds are not valid.");var _=this._getBoundsCenterZoom(l,p);return this.setView(_.center,_.zoom,p)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,p){return this.setView(l,this._zoom,{pan:p})},panBy:function(l,p){if(l=ve(l).round(),p=p||{},!l.x&&!l.y)return this.fire("moveend");if(p.animate!==!0&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new iG,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),p.noMoveStart||this.fire("movestart"),p.animate!==!1){pn(this._mapPane,"leaflet-pan-anim");var _=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,_,p.duration||.25,p.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,p,_){if(_=_||{},_.animate===!1||!mt.any3d)return this.setView(l,p,_);this._stop();var w=this.project(this.getCenter()),I=this.project(l),T=this.getSize(),j=this._zoom;l=Gt(l),p=p===void 0?j:p;var G=Math.max(T.x,T.y),W=G*this.getZoomScale(j,p),le=I.distanceTo(w)||1,ze=1.42,Pt=ze*ze;function Cn(Si){var lS=Si?-1:1,xbe=Si?W:G,Cbe=W*W-G*G+lS*Pt*Pt*le*le,Ebe=2*xbe*Pt*le,TL=Cbe/Ebe,FG=Math.sqrt(TL*TL+1)-TL,Ibe=FG<1e-9?-18:Math.log(FG);return Ibe}function ns(Si){return(Math.exp(Si)-Math.exp(-Si))/2}function Xi(Si){return(Math.exp(Si)+Math.exp(-Si))/2}function La(Si){return ns(Si)/Xi(Si)}var $s=Cn(0);function lg(Si){return G*(Xi($s)/Xi($s+ze*Si))}function ybe(Si){return G*(Xi($s)*La($s+ze*Si)-ns($s))/Pt}function vbe(Si){return 1-Math.pow(1-Si,1.5)}var bbe=Date.now(),$G=(Cn(1)-$s)/ze,wbe=_.duration?1e3*_.duration:1e3*$G*.8;function LG(){var Si=(Date.now()-bbe)/wbe,lS=vbe(Si)*$G;Si<=1?(this._flyToFrame=pe(LG,this),this._move(this.unproject(w.add(I.subtract(w).multiplyBy(ybe(lS)/le)),j),this.getScaleZoom(G/lg(lS),j),{flyTo:!0})):this._move(l,p)._moveEnd(!0)}return this._moveStart(!0,_.noMoveStart),LG.call(this),this},flyToBounds:function(l,p){var _=this._getBoundsCenterZoom(l,p);return this.flyTo(_.center,_.zoom,p)},setMaxBounds:function(l){return l=Ot(l),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),l.isValid()?(this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(l){var p=this.options.minZoom;return this.options.minZoom=l,this._loaded&&p!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var p=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&p!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,p){this._enforcingBounds=!0;var _=this.getCenter(),w=this._limitCenter(_,this._zoom,Ot(l));return _.equals(w)||this.panTo(w,p),this._enforcingBounds=!1,this},panInside:function(l,p){p=p||{};var _=ve(p.paddingTopLeft||p.padding||[0,0]),w=ve(p.paddingBottomRight||p.padding||[0,0]),I=this.project(this.getCenter()),T=this.project(l),j=this.getPixelBounds(),G=We([j.min.add(_),j.max.subtract(w)]),W=G.getSize();if(!G.contains(T)){this._enforcingBounds=!0;var le=T.subtract(G.getCenter()),ze=G.extend(T).getSize().subtract(W);I.x+=le.x<0?-ze.x:ze.x,I.y+=le.y<0?-ze.y:ze.y,this.panTo(this.unproject(I),p),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=n({animate:!1,pan:!0},l===!0?{animate:!0}:l);var p=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var _=this.getSize(),w=p.divideBy(2).round(),I=_.divideBy(2).round(),T=w.subtract(I);return!T.x&&!T.y?this:(l.animate&&l.pan?this.panBy(T):(l.pan&&this._rawPanBy(T),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:p,newSize:_}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=n({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var p=i(this._handleGeolocationResponse,this),_=i(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(p,_,l):navigator.geolocation.getCurrentPosition(p,_,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var p=l.code,_=l.message||(p===1?"permission denied":p===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:p,message:"Geolocation error: "+_+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var p=l.coords.latitude,_=l.coords.longitude,w=new Bt(p,_),I=w.toBounds(l.coords.accuracy*2),T=this._locateOptions;if(T.setView){var j=this.getBoundsZoom(I);this.setView(w,T.maxZoom?Math.min(j,T.maxZoom):j)}var G={latlng:w,bounds:I,timestamp:l.timestamp};for(var W in l.coords)typeof l.coords[W]=="number"&&(G[W]=l.coords[W]);this.fire("locationfound",G)}},addHandler:function(l,p){if(!p)return this;var _=this[l]=new p(this);return this._handlers.push(_),this.options[l]&&_.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Qr(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(xe(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var l;for(l in this._layers)this._layers[l].remove();for(l in this._panes)Qr(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,p){var _="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),w=Hn("div",_,p||this._mapPane);return l&&(this._panes[l]=w),w},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),p=this.unproject(l.getBottomLeft()),_=this.unproject(l.getTopRight());return new _t(p,_)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,p,_){l=Ot(l),_=ve(_||[0,0]);var w=this.getZoom()||0,I=this.getMinZoom(),T=this.getMaxZoom(),j=l.getNorthWest(),G=l.getSouthEast(),W=this.getSize().subtract(_),le=We(this.project(G,w),this.project(j,w)).getSize(),ze=mt.any3d?this.options.zoomSnap:1,Pt=W.x/le.x,Cn=W.y/le.y,ns=p?Math.max(Pt,Cn):Math.min(Pt,Cn);return w=this.getScaleZoom(ns,w),ze&&(w=Math.round(w/(ze/100))*(ze/100),w=p?Math.ceil(w/ze)*ze:Math.floor(w/ze)*ze),Math.max(I,Math.min(T,w))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ce(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,p){var _=this._getTopLeftPoint(l,p);return new ke(_,_.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(l===void 0?this.getZoom():l)},getPane:function(l){return typeof l=="string"?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,p){var _=this.options.crs;return p=p===void 0?this._zoom:p,_.scale(l)/_.scale(p)},getScaleZoom:function(l,p){var _=this.options.crs;p=p===void 0?this._zoom:p;var w=_.zoom(l*_.scale(p));return isNaN(w)?1/0:w},project:function(l,p){return p=p===void 0?this._zoom:p,this.options.crs.latLngToPoint(Gt(l),p)},unproject:function(l,p){return p=p===void 0?this._zoom:p,this.options.crs.pointToLatLng(ve(l),p)},layerPointToLatLng:function(l){var p=ve(l).add(this.getPixelOrigin());return this.unproject(p)},latLngToLayerPoint:function(l){var p=this.project(Gt(l))._round();return p._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng(Gt(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds(Ot(l))},distance:function(l,p){return this.options.crs.distance(Gt(l),Gt(p))},containerPointToLayerPoint:function(l){return ve(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return ve(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var p=this.containerPointToLayerPoint(ve(l));return this.layerPointToLatLng(p)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Gt(l)))},mouseEventToContainerPoint:function(l){return nG(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var p=this._container=Q9(l);if(p){if(p._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");rn(p,"scroll",this._onScroll,this),this._containerId=s(p)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&mt.any3d,pn(l,"leaflet-container"+(mt.touch?" leaflet-touch":"")+(mt.retina?" leaflet-retina":"")+(mt.ielt9?" leaflet-oldie":"")+(mt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var p=zb(l,"position");p!=="absolute"&&p!=="relative"&&p!=="fixed"&&p!=="sticky"&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ii(this._mapPane,new ce(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(pn(l.markerPane,"leaflet-zoom-hide"),pn(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,p,_){Ii(this._mapPane,new ce(0,0));var w=!this._loaded;this._loaded=!0,p=this._limitZoom(p),this.fire("viewprereset");var I=this._zoom!==p;this._moveStart(I,_)._move(l,p)._moveEnd(I),this.fire("viewreset"),w&&this.fire("load")},_moveStart:function(l,p){return l&&this.fire("zoomstart"),p||this.fire("movestart"),this},_move:function(l,p,_,w){p===void 0&&(p=this._zoom);var I=this._zoom!==p;return this._zoom=p,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),w?_&&_.pinch&&this.fire("zoom",_):((I||_&&_.pinch)&&this.fire("zoom",_),this.fire("move",_)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return xe(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){Ii(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[s(this._container)]=this;var p=l?Sr:rn;p(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&p(window,"resize",this._onResize,this),mt.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){xe(this._resizeRequest),this._resizeRequest=pe(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,p){for(var _=[],w,I=p==="mouseout"||p==="mouseover",T=l.target||l.srcElement,j=!1;T;){if(w=this._targets[s(T)],w&&(p==="click"||p==="preclick")&&this._draggableMoved(w)){j=!0;break}if(w&&w.listens(p,!0)&&(I&&!_L(T,l)||(_.push(w),I))||T===this._container)break;T=T.parentNode}return!_.length&&!j&&!I&&this.listens(p,!0)&&(_=[this]),_},_isClickDisabled:function(l){for(;l&&l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var p=l.target||l.srcElement;if(!(!this._loaded||p._leaflet_disable_events||l.type==="click"&&this._isClickDisabled(p))){var _=l.type;_==="mousedown"&&dL(p),this._fireDOMEvent(l,_)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,p,_){if(l.type==="click"){var w=n({},l);w.type="preclick",this._fireDOMEvent(w,w.type,_)}var I=this._findEventTargets(l,p);if(_){for(var T=[],j=0;j<_.length;j++)_[j].listens(p,!0)&&T.push(_[j]);I=T.concat(I)}if(I.length){p==="contextmenu"&&mo(l);var G=I[0],W={originalEvent:l};if(l.type!=="keypress"&&l.type!=="keydown"&&l.type!=="keyup"){var le=G.getLatLng&&(!G._radius||G._radius<=10);W.containerPoint=le?this.latLngToContainerPoint(G.getLatLng()):this.mouseEventToContainerPoint(l),W.layerPoint=this.containerPointToLayerPoint(W.containerPoint),W.latlng=le?G.getLatLng():this.layerPointToLatLng(W.layerPoint)}for(j=0;j<I.length;j++)if(I[j].fire(p,W,!0),W.originalEvent._stopped||I[j].options.bubblingMouseEvents===!1&&S(this._mouseEvents,p)!==-1)return}},_draggableMoved:function(l){return l=l.dragging&&l.dragging.enabled()?l:this,l.dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,p=this._handlers.length;l<p;l++)this._handlers[l].disable()},whenReady:function(l,p){return this._loaded?l.call(p||this,{target:this}):this.on("load",l,p),this},_getMapPanePos:function(){return Fm(this._mapPane)||new ce(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,p){var _=l&&p!==void 0?this._getNewPixelOrigin(l,p):this.getPixelOrigin();return _.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,p){var _=this.getSize()._divideBy(2);return this.project(l,p)._subtract(_)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,p,_){var w=this._getNewPixelOrigin(_,p);return this.project(l,p)._subtract(w)},_latLngBoundsToNewLayerBounds:function(l,p,_){var w=this._getNewPixelOrigin(_,p);return We([this.project(l.getSouthWest(),p)._subtract(w),this.project(l.getNorthWest(),p)._subtract(w),this.project(l.getSouthEast(),p)._subtract(w),this.project(l.getNorthEast(),p)._subtract(w)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,p,_){if(!_)return l;var w=this.project(l,p),I=this.getSize().divideBy(2),T=new ke(w.subtract(I),w.add(I)),j=this._getBoundsOffset(T,_,p);return Math.abs(j.x)<=1&&Math.abs(j.y)<=1?l:this.unproject(w.add(j),p)},_limitOffset:function(l,p){if(!p)return l;var _=this.getPixelBounds(),w=new ke(_.min.add(l),_.max.add(l));return l.add(this._getBoundsOffset(w,p))},_getBoundsOffset:function(l,p,_){var w=We(this.project(p.getNorthEast(),_),this.project(p.getSouthWest(),_)),I=w.min.subtract(l.min),T=w.max.subtract(l.max),j=this._rebound(I.x,-T.x),G=this._rebound(I.y,-T.y);return new ce(j,G)},_rebound:function(l,p){return l+p>0?Math.round(l-p)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(p))},_limitZoom:function(l){var p=this.getMinZoom(),_=this.getMaxZoom(),w=mt.any3d?this.options.zoomSnap:1;return w&&(l=Math.round(l/w)*w),Math.max(p,Math.min(_,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){mi(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,p){var _=this._getCenterOffset(l)._trunc();return(p&&p.animate)!==!0&&!this.getSize().contains(_)?!1:(this.panBy(_,p),!0)},_createAnimProxy:function(){var l=this._proxy=Hn("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(p){var _=iL,w=this._proxy.style[_];Lm(this._proxy,this.project(p.center,p.zoom),this.getZoomScale(p.zoom,1)),w===this._proxy.style[_]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Qr(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),p=this.getZoom();Lm(this._proxy,this.project(l,p),this.getZoomScale(p,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,p,_){if(this._animatingZoom)return!0;if(_=_||{},!this._zoomAnimated||_.animate===!1||this._nothingToAnimate()||Math.abs(p-this._zoom)>this.options.zoomAnimationThreshold)return!1;var w=this.getZoomScale(p),I=this._getCenterOffset(l)._divideBy(1-1/w);return _.animate!==!0&&!this.getSize().contains(I)?!1:(pe(function(){this._moveStart(!0,_.noMoveStart||!1)._animateZoom(l,p,!0)},this),!0)},_animateZoom:function(l,p,_,w){this._mapPane&&(_&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=p,pn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:p,noUpdate:w}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&mi(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Nve(l,p){return new Fn(l,p)}var hc=fe.extend({options:{position:"topright"},initialize:function(l){h(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var p=this._map;return p&&p.removeControl(this),this.options.position=l,p&&p.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var p=this._container=this.onAdd(l),_=this.getPosition(),w=l._controlCorners[_];return pn(p,"leaflet-control"),_.indexOf("bottom")!==-1?w.insertBefore(p,w.firstChild):w.appendChild(p),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Qr(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),Zb=function(l){return new hc(l)};Fn.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},p="leaflet-",_=this._controlContainer=Hn("div",p+"control-container",this._container);function w(I,T){var j=p+I+" "+p+T;l[I+T]=Hn("div",j,_)}w("top","left"),w("top","right"),w("bottom","left"),w("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)Qr(this._controlCorners[l]);Qr(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var oG=hc.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,p,_,w){return _<w?-1:w<_?1:0}},initialize:function(l,p,_){h(this,_),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var w in l)this._addLayer(l[w],w);for(w in p)this._addLayer(p[w],w,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return hc.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,p){return this._addLayer(l,p),this._map?this._update():this},addOverlay:function(l,p){return this._addLayer(l,p,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var p=this._getLayer(s(l));return p&&this._layers.splice(this._layers.indexOf(p),1),this._map?this._update():this},expand:function(){pn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(pn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):mi(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return mi(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",p=this._container=Hn("div",l),_=this.options.collapsed;p.setAttribute("aria-haspopup",!0),Hb(p),gL(p);var w=this._section=Hn("section",l+"-list");_&&(this._map.on("click",this.collapse,this),rn(p,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var I=this._layersLink=Hn("a",l+"-toggle",p);I.href="#",I.title="Layers",I.setAttribute("role","button"),rn(I,{keydown:function(T){T.keyCode===13&&this._expandSafely()},click:function(T){mo(T),this._expandSafely()}},this),_||this.expand(),this._baseLayersList=Hn("div",l+"-base",w),this._separator=Hn("div",l+"-separator",w),this._overlaysList=Hn("div",l+"-overlays",w),p.appendChild(w)},_getLayer:function(l){for(var p=0;p<this._layers.length;p++)if(this._layers[p]&&s(this._layers[p].layer)===l)return this._layers[p]},_addLayer:function(l,p,_){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:p,overlay:_}),this.options.sortLayers&&this._layers.sort(i(function(w,I){return this.options.sortFunction(w.layer,I.layer,w.name,I.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;GI(this._baseLayersList),GI(this._overlaysList),this._layerControlInputs=[];var l,p,_,w,I=0;for(_=0;_<this._layers.length;_++)w=this._layers[_],this._addItem(w),p=p||w.overlay,l=l||!w.overlay,I+=w.overlay?0:1;return this.options.hideSingleBase&&(l=l&&I>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=p&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var p=this._getLayer(s(l.target)),_=p.overlay?l.type==="add"?"overlayadd":"overlayremove":l.type==="add"?"baselayerchange":null;_&&this._map.fire(_,p)},_createRadioElement:function(l,p){var _='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(p?' checked="checked"':"")+"/>",w=document.createElement("div");return w.innerHTML=_,w.firstChild},_addItem:function(l){var p=document.createElement("label"),_=this._map.hasLayer(l.layer),w;l.overlay?(w=document.createElement("input"),w.type="checkbox",w.className="leaflet-control-layers-selector",w.defaultChecked=_):w=this._createRadioElement("leaflet-base-layers_"+s(this),_),this._layerControlInputs.push(w),w.layerId=s(l.layer),rn(w,"click",this._onInputClick,this);var I=document.createElement("span");I.innerHTML=" "+l.name;var T=document.createElement("span");p.appendChild(T),T.appendChild(w),T.appendChild(I);var j=l.overlay?this._overlaysList:this._baseLayersList;return j.appendChild(p),this._checkDisabledLayers(),p},_onInputClick:function(){if(!this._preventClick){var l=this._layerControlInputs,p,_,w=[],I=[];this._handlingClick=!0;for(var T=l.length-1;T>=0;T--)p=l[T],_=this._getLayer(p.layerId).layer,p.checked?w.push(_):p.checked||I.push(_);for(T=0;T<I.length;T++)this._map.hasLayer(I[T])&&this._map.removeLayer(I[T]);for(T=0;T<w.length;T++)this._map.hasLayer(w[T])||this._map.addLayer(w[T]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var l=this._layerControlInputs,p,_,w=this._map.getZoom(),I=l.length-1;I>=0;I--)p=l[I],_=this._getLayer(p.layerId).layer,p.disabled=_.options.minZoom!==void 0&&w<_.options.minZoom||_.options.maxZoom!==void 0&&w>_.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var l=this._section;this._preventClick=!0,rn(l,"click",mo),this.expand();var p=this;setTimeout(function(){Sr(l,"click",mo),p._preventClick=!1})}}),$ve=function(l,p,_){return new oG(l,p,_)},yL=hc.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var p="leaflet-control-zoom",_=Hn("div",p+" leaflet-bar"),w=this.options;return this._zoomInButton=this._createButton(w.zoomInText,w.zoomInTitle,p+"-in",_,this._zoomIn),this._zoomOutButton=this._createButton(w.zoomOutText,w.zoomOutTitle,p+"-out",_,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),_},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,p,_,w,I){var T=Hn("a",_,w);return T.innerHTML=l,T.href="#",T.title=p,T.setAttribute("role","button"),T.setAttribute("aria-label",p),Hb(T),rn(T,"click",zm),rn(T,"click",I,this),rn(T,"click",this._refocusOnMap,this),T},_updateDisabled:function(){var l=this._map,p="leaflet-disabled";mi(this._zoomInButton,p),mi(this._zoomOutButton,p),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(pn(this._zoomOutButton,p),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(pn(this._zoomInButton,p),this._zoomInButton.setAttribute("aria-disabled","true"))}});Fn.mergeOptions({zoomControl:!0}),Fn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new yL,this.addControl(this.zoomControl))});var Lve=function(l){return new yL(l)},sG=hc.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var p="leaflet-control-scale",_=Hn("div",p),w=this.options;return this._addScales(w,p+"-line",_),l.on(w.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),_},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,p,_){l.metric&&(this._mScale=Hn("div",p,_)),l.imperial&&(this._iScale=Hn("div",p,_))},_update:function(){var l=this._map,p=l.getSize().y/2,_=l.distance(l.containerPointToLatLng([0,p]),l.containerPointToLatLng([this.options.maxWidth,p]));this._updateScales(_)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var p=this._getRoundNum(l),_=p<1e3?p+" m":p/1e3+" km";this._updateScale(this._mScale,_,p/l)},_updateImperial:function(l){var p=l*3.2808399,_,w,I;p>5280?(_=p/5280,w=this._getRoundNum(_),this._updateScale(this._iScale,w+" mi",w/_)):(I=this._getRoundNum(p),this._updateScale(this._iScale,I+" ft",I/p))},_updateScale:function(l,p,_){l.style.width=Math.round(this.options.maxWidth*_)+"px",l.innerHTML=p},_getRoundNum:function(l){var p=Math.pow(10,(Math.floor(l)+"").length-1),_=l/p;return _=_>=10?10:_>=5?5:_>=3?3:_>=2?2:1,p*_}}),Fve=function(l){return new sG(l)},jve='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',vL=hc.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(mt.inlineSvg?jve+" ":"")+"Leaflet</a>"},initialize:function(l){h(this,l),this._attributions={}},onAdd:function(l){l.attributionControl=this,this._container=Hn("div","leaflet-control-attribution"),Hb(this._container);for(var p in l._layers)l._layers[p].getAttribution&&this.addAttribution(l._layers[p].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var p in this._attributions)this._attributions[p]&&l.push(p);var _=[];this.options.prefix&&_.push(this.options.prefix),l.length&&_.push(l.join(", ")),this._container.innerHTML=_.join(' <span aria-hidden="true">|</span> ')}}});Fn.mergeOptions({attributionControl:!0}),Fn.addInitHook(function(){this.options.attributionControl&&new vL().addTo(this)});var zve=function(l){return new vL(l)};hc.Layers=oG,hc.Zoom=yL,hc.Scale=sG,hc.Attribution=vL,Zb.layers=$ve,Zb.zoom=Lve,Zb.scale=Fve,Zb.attribution=zve;var cl=fe.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});cl.addTo=function(l,p){return l.addHandler(p,this),this};var Bve={Events:Fe},aG=mt.touch?"touchstart mousedown":"mousedown",Gd=Me.extend({options:{clickTolerance:3},initialize:function(l,p,_,w){h(this,w),this._element=l,this._dragStartTarget=p||l,this._preventOutline=_},enable:function(){this._enabled||(rn(this._dragStartTarget,aG,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Gd._dragging===this&&this.finishDrag(!0),Sr(this._dragStartTarget,aG,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!oL(this._element,"leaflet-zoom-anim"))){if(l.touches&&l.touches.length!==1){Gd._dragging===this&&this.finishDrag();return}if(!(Gd._dragging||l.shiftKey||l.which!==1&&l.button!==1&&!l.touches)&&(Gd._dragging=this,this._preventOutline&&dL(this._element),cL(),Bb(),!this._moving)){this.fire("down");var p=l.touches?l.touches[0]:l,_=X9(this._element);this._startPoint=new ce(p.clientX,p.clientY),this._startPos=Fm(this._element),this._parentScale=pL(_);var w=l.type==="mousedown";rn(document,w?"mousemove":"touchmove",this._onMove,this),rn(document,w?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1){this._moved=!0;return}var p=l.touches&&l.touches.length===1?l.touches[0]:l,_=new ce(p.clientX,p.clientY)._subtract(this._startPoint);!_.x&&!_.y||Math.abs(_.x)+Math.abs(_.y)<this.options.clickTolerance||(_.x/=this._parentScale.x,_.y/=this._parentScale.y,mo(l),this._moved||(this.fire("dragstart"),this._moved=!0,pn(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),pn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(_),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),Ii(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(l){mi(document.body,"leaflet-dragging"),this._lastTarget&&(mi(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Sr(document,"mousemove touchmove",this._onMove,this),Sr(document,"mouseup touchend touchcancel",this._onUp,this),lL(),Ub();var p=this._moved&&this._moving;this._moving=!1,Gd._dragging=!1,p&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)})}});function cG(l,p,_){var w,I=[1,4,2,8],T,j,G,W,le,ze,Pt,Cn;for(T=0,ze=l.length;T<ze;T++)l[T]._code=Bm(l[T],p);for(G=0;G<4;G++){for(Pt=I[G],w=[],T=0,ze=l.length,j=ze-1;T<ze;j=T++)W=l[T],le=l[j],W._code&Pt?le._code&Pt||(Cn=QI(le,W,Pt,p,_),Cn._code=Bm(Cn,p),w.push(Cn)):(le._code&Pt&&(Cn=QI(le,W,Pt,p,_),Cn._code=Bm(Cn,p),w.push(Cn)),w.push(W));l=w}return l}function lG(l,p){var _,w,I,T,j,G,W,le,ze;if(!l||l.length===0)throw new Error("latlngs not passed");$a(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Pt=Gt([0,0]),Cn=Ot(l),ns=Cn.getNorthWest().distanceTo(Cn.getSouthWest())*Cn.getNorthEast().distanceTo(Cn.getNorthWest());ns<1700&&(Pt=bL(l));var Xi=l.length,La=[];for(_=0;_<Xi;_++){var $s=Gt(l[_]);La.push(p.project(Gt([$s.lat-Pt.lat,$s.lng-Pt.lng])))}for(G=W=le=0,_=0,w=Xi-1;_<Xi;w=_++)I=La[_],T=La[w],j=I.y*T.x-T.y*I.x,W+=(I.x+T.x)*j,le+=(I.y+T.y)*j,G+=j*3;G===0?ze=La[0]:ze=[W/G,le/G];var lg=p.unproject(ve(ze));return Gt([lg.lat+Pt.lat,lg.lng+Pt.lng])}function bL(l){for(var p=0,_=0,w=0,I=0;I<l.length;I++){var T=Gt(l[I]);p+=T.lat,_+=T.lng,w++}return Gt([p/w,_/w])}var Uve={__proto__:null,clipPolygon:cG,polygonCenter:lG,centroid:bL};function uG(l,p){if(!p||!l.length)return l.slice();var _=p*p;return l=Zve(l,_),l=Hve(l,_),l}function dG(l,p,_){return Math.sqrt(qb(l,p,_,!0))}function Vve(l,p,_){return qb(l,p,_)}function Hve(l,p){var _=l.length,w=typeof Uint8Array<"u"?Uint8Array:Array,I=new w(_);I[0]=I[_-1]=1,wL(l,I,p,0,_-1);var T,j=[];for(T=0;T<_;T++)I[T]&&j.push(l[T]);return j}function wL(l,p,_,w,I){var T=0,j,G,W;for(G=w+1;G<=I-1;G++)W=qb(l[G],l[w],l[I],!0),W>T&&(j=G,T=W);T>_&&(p[j]=1,wL(l,p,_,w,j),wL(l,p,_,j,I))}function Zve(l,p){for(var _=[l[0]],w=1,I=0,T=l.length;w<T;w++)qve(l[w],l[I])>p&&(_.push(l[w]),I=w);return I<T-1&&_.push(l[T-1]),_}var pG;function mG(l,p,_,w,I){var T=w?pG:Bm(l,_),j=Bm(p,_),G,W,le;for(pG=j;;){if(!(T|j))return[l,p];if(T&j)return!1;G=T||j,W=QI(l,p,G,_,I),le=Bm(W,_),G===T?(l=W,T=le):(p=W,j=le)}}function QI(l,p,_,w,I){var T=p.x-l.x,j=p.y-l.y,G=w.min,W=w.max,le,ze;return _&8?(le=l.x+T*(W.y-l.y)/j,ze=W.y):_&4?(le=l.x+T*(G.y-l.y)/j,ze=G.y):_&2?(le=W.x,ze=l.y+j*(W.x-l.x)/T):_&1&&(le=G.x,ze=l.y+j*(G.x-l.x)/T),new ce(le,ze,I)}function Bm(l,p){var _=0;return l.x<p.min.x?_|=1:l.x>p.max.x&&(_|=2),l.y<p.min.y?_|=4:l.y>p.max.y&&(_|=8),_}function qve(l,p){var _=p.x-l.x,w=p.y-l.y;return _*_+w*w}function qb(l,p,_,w){var I=p.x,T=p.y,j=_.x-I,G=_.y-T,W=j*j+G*G,le;return W>0&&(le=((l.x-I)*j+(l.y-T)*G)/W,le>1?(I=_.x,T=_.y):le>0&&(I+=j*le,T+=G*le)),j=l.x-I,G=l.y-T,w?j*j+G*G:new ce(I,T)}function $a(l){return!C(l[0])||typeof l[0][0]!="object"&&typeof l[0][0]<"u"}function fG(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),$a(l)}function hG(l,p){var _,w,I,T,j,G,W,le;if(!l||l.length===0)throw new Error("latlngs not passed");$a(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var ze=Gt([0,0]),Pt=Ot(l),Cn=Pt.getNorthWest().distanceTo(Pt.getSouthWest())*Pt.getNorthEast().distanceTo(Pt.getNorthWest());Cn<1700&&(ze=bL(l));var ns=l.length,Xi=[];for(_=0;_<ns;_++){var La=Gt(l[_]);Xi.push(p.project(Gt([La.lat-ze.lat,La.lng-ze.lng])))}for(_=0,w=0;_<ns-1;_++)w+=Xi[_].distanceTo(Xi[_+1])/2;if(w===0)le=Xi[0];else for(_=0,T=0;_<ns-1;_++)if(j=Xi[_],G=Xi[_+1],I=j.distanceTo(G),T+=I,T>w){W=(T-w)/I,le=[G.x-W*(G.x-j.x),G.y-W*(G.y-j.y)];break}var $s=p.unproject(ve(le));return Gt([$s.lat+ze.lat,$s.lng+ze.lng])}var Gve={__proto__:null,simplify:uG,pointToSegmentDistance:dG,closestPointOnSegment:Vve,clipSegment:mG,_getEdgeIntersection:QI,_getBitCode:Bm,_sqClosestPointOnSegment:qb,isFlat:$a,_flat:fG,polylineCenter:hG},xL={project:function(l){return new ce(l.lng,l.lat)},unproject:function(l){return new Bt(l.y,l.x)},bounds:new ke([-180,-90],[180,90])},CL={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ke([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(l){var p=Math.PI/180,_=this.R,w=l.lat*p,I=this.R_MINOR/_,T=Math.sqrt(1-I*I),j=T*Math.sin(w),G=Math.tan(Math.PI/4-w/2)/Math.pow((1-j)/(1+j),T/2);return w=-_*Math.log(Math.max(G,1e-10)),new ce(l.lng*p*_,w)},unproject:function(l){for(var p=180/Math.PI,_=this.R,w=this.R_MINOR/_,I=Math.sqrt(1-w*w),T=Math.exp(-l.y/_),j=Math.PI/2-2*Math.atan(T),G=0,W=.1,le;G<15&&Math.abs(W)>1e-7;G++)le=I*Math.sin(j),le=Math.pow((1-le)/(1+le),I/2),W=Math.PI/2-2*Math.atan(T*le)-j,j+=W;return new Bt(j*p,l.x*p/_)}},Wve={__proto__:null,LonLat:xL,Mercator:CL,SphericalMercator:ie},Kve=n({},M,{code:"EPSG:3395",projection:CL,transformation:(function(){var l=.5/(Math.PI*CL.R);return en(l,.5,-l,.5)})()}),gG=n({},M,{code:"EPSG:4326",projection:xL,transformation:en(1/180,1,-1/180,.5)}),Jve=n({},Dn,{projection:xL,transformation:en(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,p){var _=p.lng-l.lng,w=p.lat-l.lat;return Math.sqrt(_*_+w*w)},infinite:!0});Dn.Earth=M,Dn.EPSG3395=Kve,Dn.EPSG3857=Wn,Dn.EPSG900913=yr,Dn.EPSG4326=gG,Dn.Simple=Jve;var gc=Me.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[s(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[s(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var p=l.target;if(p.hasLayer(this)){if(this._map=p,this._zoomAnimated=p._zoomAnimated,this.getEvents){var _=this.getEvents();p.on(_,this),this.once("remove",function(){p.off(_,this)},this)}this.onAdd(p),this.fire("add"),p.fire("layeradd",{layer:this})}}});Fn.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var p=s(l);return this._layers[p]?this:(this._layers[p]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l),this)},removeLayer:function(l){var p=s(l);return this._layers[p]?(this._loaded&&l.onRemove(this),delete this._layers[p],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return s(l)in this._layers},eachLayer:function(l,p){for(var _ in this._layers)l.call(p,this._layers[_]);return this},_addLayers:function(l){l=l?C(l)?l:[l]:[];for(var p=0,_=l.length;p<_;p++)this.addLayer(l[p])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[s(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var p=s(l);this._zoomBoundLayers[p]&&(delete this._zoomBoundLayers[p],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,p=-1/0,_=this._getZoomSpan();for(var w in this._zoomBoundLayers){var I=this._zoomBoundLayers[w].options;l=I.minZoom===void 0?l:Math.min(l,I.minZoom),p=I.maxZoom===void 0?p:Math.max(p,I.maxZoom)}this._layersMaxZoom=p===-1/0?void 0:p,this._layersMinZoom=l===1/0?void 0:l,_!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ig=gc.extend({initialize:function(l,p){h(this,p),this._layers={};var _,w;if(l)for(_=0,w=l.length;_<w;_++)this.addLayer(l[_])},addLayer:function(l){var p=this.getLayerId(l);return this._layers[p]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var p=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[p]&&this._map.removeLayer(this._layers[p]),delete this._layers[p],this},hasLayer:function(l){var p=typeof l=="number"?l:this.getLayerId(l);return p in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var p=Array.prototype.slice.call(arguments,1),_,w;for(_ in this._layers)w=this._layers[_],w[l]&&w[l].apply(w,p);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,p){for(var _ in this._layers)l.call(p,this._layers[_]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return s(l)}}),Yve=function(l,p){return new ig(l,p)},wu=ig.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),ig.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),ig.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new _t;for(var p in this._layers){var _=this._layers[p];l.extend(_.getBounds?_.getBounds():_.getLatLng())}return l}}),Qve=function(l,p){return new wu(l,p)},og=fe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){h(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,p){var _=this._getIconUrl(l);if(!_){if(l==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var w=this._createImg(_,p&&p.tagName==="IMG"?p:null);return this._setIconStyles(w,l),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),w},_setIconStyles:function(l,p){var _=this.options,w=_[p+"Size"];typeof w=="number"&&(w=[w,w]);var I=ve(w),T=ve(p==="shadow"&&_.shadowAnchor||_.iconAnchor||I&&I.divideBy(2,!0));l.className="leaflet-marker-"+p+" "+(_.className||""),T&&(l.style.marginLeft=-T.x+"px",l.style.marginTop=-T.y+"px"),I&&(l.style.width=I.x+"px",l.style.height=I.y+"px")},_createImg:function(l,p){return p=p||document.createElement("img"),p.src=l,p},_getIconUrl:function(l){return mt.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});function Xve(l){return new og(l)}var Gb=og.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return typeof Gb.imagePath!="string"&&(Gb.imagePath=this._detectIconPath()),(this.options.imagePath||Gb.imagePath)+og.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var p=function(_,w,I){var T=w.exec(_);return T&&T[I]};return l=p(l,/^url\((['"])?(.+)\1\)$/,2),l&&p(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=Hn("div","leaflet-default-icon-path",document.body),p=zb(l,"background-image")||zb(l,"backgroundImage");if(document.body.removeChild(l),p=this._stripUrl(p),p)return p;var _=document.querySelector('link[href$="leaflet.css"]');return _?_.href.substring(0,_.href.length-11-1):""}}),_G=cl.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new Gd(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),pn(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&mi(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var p=this._marker,_=p._map,w=this._marker.options.autoPanSpeed,I=this._marker.options.autoPanPadding,T=Fm(p._icon),j=_.getPixelBounds(),G=_.getPixelOrigin(),W=We(j.min._subtract(G).add(I),j.max._subtract(G).subtract(I));if(!W.contains(T)){var le=ve((Math.max(W.max.x,T.x)-W.max.x)/(j.max.x-W.max.x)-(Math.min(W.min.x,T.x)-W.min.x)/(j.min.x-W.min.x),(Math.max(W.max.y,T.y)-W.max.y)/(j.max.y-W.max.y)-(Math.min(W.min.y,T.y)-W.min.y)/(j.min.y-W.min.y)).multiplyBy(w);_.panBy(le,{animate:!1}),this._draggable._newPos._add(le),this._draggable._startPos._add(le),Ii(p._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=pe(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&(xe(this._panRequest),this._panRequest=pe(this._adjustPan.bind(this,l)))},_onDrag:function(l){var p=this._marker,_=p._shadow,w=Fm(p._icon),I=p._map.layerPointToLatLng(w);_&&Ii(_,w),p._latlng=I,l.latlng=I,l.oldLatLng=this._oldLatLng,p.fire("move",l).fire("drag",l)},_onDragEnd:function(l){xe(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),XI=gc.extend({options:{icon:new Gb,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,p){h(this,p),this._latlng=Gt(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var p=this._latlng;return this._latlng=Gt(l),this.update(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,p="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),_=l.icon.createIcon(this._icon),w=!1;_!==this._icon&&(this._icon&&this._removeIcon(),w=!0,l.title&&(_.title=l.title),_.tagName==="IMG"&&(_.alt=l.alt||"")),pn(_,p),l.keyboard&&(_.tabIndex="0",_.setAttribute("role","button")),this._icon=_,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&rn(_,"focus",this._panOnFocus,this);var I=l.icon.createShadow(this._shadow),T=!1;I!==this._shadow&&(this._removeShadow(),T=!0),I&&(pn(I,p),I.alt=""),this._shadow=I,l.opacity<1&&this._updateOpacity(),w&&this.getPane().appendChild(this._icon),this._initInteraction(),I&&T&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Sr(this._icon,"focus",this._panOnFocus,this),Qr(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Qr(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&Ii(this._icon,l),this._shadow&&Ii(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var p=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(p)},_initInteraction:function(){if(this.options.interactive&&(pn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),_G)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new _G(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&Na(this._icon,l),this._shadow&&Na(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var p=this.options.icon.options,_=p.iconSize?ve(p.iconSize):ve(0,0),w=p.iconAnchor?ve(p.iconAnchor):ve(0,0);l.panInside(this._latlng,{paddingTopLeft:w,paddingBottomRight:_.subtract(w)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ebe(l,p){return new XI(l,p)}var Wd=gc.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return h(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),eS=Wd.extend({options:{fill:!0,radius:10},initialize:function(l,p){h(this,p),this._latlng=Gt(l),this._radius=this.options.radius},setLatLng:function(l){var p=this._latlng;return this._latlng=Gt(l),this.redraw(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var p=l&&l.radius||this._radius;return Wd.prototype.setStyle.call(this,l),this.setRadius(p),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,p=this._radiusY||l,_=this._clickTolerance(),w=[l+_,p+_];this._pxBounds=new ke(this._point.subtract(w),this._point.add(w))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function tbe(l,p){return new eS(l,p)}var EL=eS.extend({initialize:function(l,p,_){if(typeof p=="number"&&(p=n({},_,{radius:p})),h(this,p),this._latlng=Gt(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new _t(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:Wd.prototype.setStyle,_project:function(){var l=this._latlng.lng,p=this._latlng.lat,_=this._map,w=_.options.crs;if(w.distance===M.distance){var I=Math.PI/180,T=this._mRadius/M.R/I,j=_.project([p+T,l]),G=_.project([p-T,l]),W=j.add(G).divideBy(2),le=_.unproject(W).lat,ze=Math.acos((Math.cos(T*I)-Math.sin(p*I)*Math.sin(le*I))/(Math.cos(p*I)*Math.cos(le*I)))/I;(isNaN(ze)||ze===0)&&(ze=T/Math.cos(Math.PI/180*p)),this._point=W.subtract(_.getPixelOrigin()),this._radius=isNaN(ze)?0:W.x-_.project([le,l-ze]).x,this._radiusY=W.y-j.y}else{var Pt=w.unproject(w.project(this._latlng).subtract([this._mRadius,0]));this._point=_.latLngToLayerPoint(this._latlng),this._radius=this._point.x-_.latLngToLayerPoint(Pt).x}this._updateBounds()}});function nbe(l,p,_){return new EL(l,p,_)}var xu=Wd.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,p){h(this,p),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var p=1/0,_=null,w=qb,I,T,j=0,G=this._parts.length;j<G;j++)for(var W=this._parts[j],le=1,ze=W.length;le<ze;le++){I=W[le-1],T=W[le];var Pt=w(l,I,T,!0);Pt<p&&(p=Pt,_=w(l,I,T))}return _&&(_.distance=Math.sqrt(p)),_},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return hG(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(l,p){return p=p||this._defaultShape(),l=Gt(l),p.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new _t,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return $a(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var p=[],_=$a(l),w=0,I=l.length;w<I;w++)_?(p[w]=Gt(l[w]),this._bounds.extend(p[w])):p[w]=this._convertLatLngs(l[w]);return p},_project:function(){var l=new ke;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),p=new ce(l,l);this._rawPxBounds&&(this._pxBounds=new ke([this._rawPxBounds.min.subtract(p),this._rawPxBounds.max.add(p)]))},_projectLatlngs:function(l,p,_){var w=l[0]instanceof Bt,I=l.length,T,j;if(w){for(j=[],T=0;T<I;T++)j[T]=this._map.latLngToLayerPoint(l[T]),_.extend(j[T]);p.push(j)}else for(T=0;T<I;T++)this._projectLatlngs(l[T],p,_)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}var p=this._parts,_,w,I,T,j,G,W;for(_=0,I=0,T=this._rings.length;_<T;_++)for(W=this._rings[_],w=0,j=W.length;w<j-1;w++)G=mG(W[w],W[w+1],l,w,!0),G&&(p[I]=p[I]||[],p[I].push(G[0]),(G[1]!==W[w+1]||w===j-2)&&(p[I].push(G[1]),I++))}},_simplifyPoints:function(){for(var l=this._parts,p=this.options.smoothFactor,_=0,w=l.length;_<w;_++)l[_]=uG(l[_],p)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,p){var _,w,I,T,j,G,W=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(_=0,T=this._parts.length;_<T;_++)for(G=this._parts[_],w=0,j=G.length,I=j-1;w<j;I=w++)if(!(!p&&w===0)&&dG(l,G[I],G[w])<=W)return!0;return!1}});function rbe(l,p){return new xu(l,p)}xu._flat=fG;var sg=xu.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return lG(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(l){var p=xu.prototype._convertLatLngs.call(this,l),_=p.length;return _>=2&&p[0]instanceof Bt&&p[0].equals(p[_-1])&&p.pop(),p},_setLatLngs:function(l){xu.prototype._setLatLngs.call(this,l),$a(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return $a(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,p=this.options.weight,_=new ce(p,p);if(l=new ke(l.min.subtract(_),l.max.add(_)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}for(var w=0,I=this._rings.length,T;w<I;w++)T=cG(this._rings[w],l,!0),T.length&&this._parts.push(T)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var p=!1,_,w,I,T,j,G,W,le;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(T=0,W=this._parts.length;T<W;T++)for(_=this._parts[T],j=0,le=_.length,G=le-1;j<le;G=j++)w=_[j],I=_[G],w.y>l.y!=I.y>l.y&&l.x<(I.x-w.x)*(l.y-w.y)/(I.y-w.y)+w.x&&(p=!p);return p||xu.prototype._containsPoint.call(this,l,!0)}});function ibe(l,p){return new sg(l,p)}var Cu=wu.extend({initialize:function(l,p){h(this,p),this._layers={},l&&this.addData(l)},addData:function(l){var p=C(l)?l:l.features,_,w,I;if(p){for(_=0,w=p.length;_<w;_++)I=p[_],(I.geometries||I.geometry||I.features||I.coordinates)&&this.addData(I);return this}var T=this.options;if(T.filter&&!T.filter(l))return this;var j=tS(l,T);return j?(j.feature=iS(l),j.defaultOptions=j.options,this.resetStyle(j),T.onEachFeature&&T.onEachFeature(l,j),this.addLayer(j)):this},resetStyle:function(l){return l===void 0?this.eachLayer(this.resetStyle,this):(l.options=n({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(p){this._setLayerStyle(p,l)},this)},_setLayerStyle:function(l,p){l.setStyle&&(typeof p=="function"&&(p=p(l.feature)),l.setStyle(p))}});function tS(l,p){var _=l.type==="Feature"?l.geometry:l,w=_?_.coordinates:null,I=[],T=p&&p.pointToLayer,j=p&&p.coordsToLatLng||IL,G,W,le,ze;if(!w&&!_)return null;switch(_.type){case"Point":return G=j(w),yG(T,l,G,p);case"MultiPoint":for(le=0,ze=w.length;le<ze;le++)G=j(w[le]),I.push(yG(T,l,G,p));return new wu(I);case"LineString":case"MultiLineString":return W=nS(w,_.type==="LineString"?0:1,j),new xu(W,p);case"Polygon":case"MultiPolygon":return W=nS(w,_.type==="Polygon"?1:2,j),new sg(W,p);case"GeometryCollection":for(le=0,ze=_.geometries.length;le<ze;le++){var Pt=tS({geometry:_.geometries[le],type:"Feature",properties:l.properties},p);Pt&&I.push(Pt)}return new wu(I);case"FeatureCollection":for(le=0,ze=_.features.length;le<ze;le++){var Cn=tS(_.features[le],p);Cn&&I.push(Cn)}return new wu(I);default:throw new Error("Invalid GeoJSON object.")}}function yG(l,p,_,w){return l?l(p,_):new XI(_,w&&w.markersInheritOptions&&w)}function IL(l){return new Bt(l[1],l[0],l[2])}function nS(l,p,_){for(var w=[],I=0,T=l.length,j;I<T;I++)j=p?nS(l[I],p-1,_):(_||IL)(l[I]),w.push(j);return w}function SL(l,p){return l=Gt(l),l.alt!==void 0?[d(l.lng,p),d(l.lat,p),d(l.alt,p)]:[d(l.lng,p),d(l.lat,p)]}function rS(l,p,_,w){for(var I=[],T=0,j=l.length;T<j;T++)I.push(p?rS(l[T],$a(l[T])?0:p-1,_,w):SL(l[T],w));return!p&&_&&I.length>0&&I.push(I[0].slice()),I}function ag(l,p){return l.feature?n({},l.feature,{geometry:p}):iS(p)}function iS(l){return l.type==="Feature"||l.type==="FeatureCollection"?l:{type:"Feature",properties:{},geometry:l}}var kL={toGeoJSON:function(l){return ag(this,{type:"Point",coordinates:SL(this.getLatLng(),l)})}};XI.include(kL),EL.include(kL),eS.include(kL),xu.include({toGeoJSON:function(l){var p=!$a(this._latlngs),_=rS(this._latlngs,p?1:0,!1,l);return ag(this,{type:(p?"Multi":"")+"LineString",coordinates:_})}}),sg.include({toGeoJSON:function(l){var p=!$a(this._latlngs),_=p&&!$a(this._latlngs[0]),w=rS(this._latlngs,_?2:p?1:0,!0,l);return p||(w=[w]),ag(this,{type:(_?"Multi":"")+"Polygon",coordinates:w})}}),ig.include({toMultiPoint:function(l){var p=[];return this.eachLayer(function(_){p.push(_.toGeoJSON(l).geometry.coordinates)}),ag(this,{type:"MultiPoint",coordinates:p})},toGeoJSON:function(l){var p=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(p==="MultiPoint")return this.toMultiPoint(l);var _=p==="GeometryCollection",w=[];return this.eachLayer(function(I){if(I.toGeoJSON){var T=I.toGeoJSON(l);if(_)w.push(T.geometry);else{var j=iS(T);j.type==="FeatureCollection"?w.push.apply(w,j.features):w.push(j)}}}),_?ag(this,{geometries:w,type:"GeometryCollection"}):{type:"FeatureCollection",features:w}}});function vG(l,p){return new Cu(l,p)}var obe=vG,oS=gc.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,p,_){this._url=l,this._bounds=Ot(p),h(this,_)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(pn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Qr(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&ng(this._image),this},bringToBack:function(){return this._map&&rg(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=Ot(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l=this._url.tagName==="IMG",p=this._image=l?this._url:Hn("img");if(pn(p,"leaflet-image-layer"),this._zoomAnimated&&pn(p,"leaflet-zoom-animated"),this.options.className&&pn(p,this.options.className),p.onselectstart=u,p.onmousemove=u,p.onload=i(this.fire,this,"load"),p.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l){this._url=p.src;return}p.src=this._url,p.alt=this.options.alt},_animateZoom:function(l){var p=this._map.getZoomScale(l.zoom),_=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;Lm(this._image,_,p)},_reset:function(){var l=this._image,p=new ke(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),_=p.getSize();Ii(l,p.min),l.style.width=_.x+"px",l.style.height=_.y+"px"},_updateOpacity:function(){Na(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),sbe=function(l,p,_){return new oS(l,p,_)},bG=oS.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l=this._url.tagName==="VIDEO",p=this._image=l?this._url:Hn("video");if(pn(p,"leaflet-image-layer"),this._zoomAnimated&&pn(p,"leaflet-zoom-animated"),this.options.className&&pn(p,this.options.className),p.onselectstart=u,p.onmousemove=u,p.onloadeddata=i(this.fire,this,"load"),l){for(var _=p.getElementsByTagName("source"),w=[],I=0;I<_.length;I++)w.push(_[I].src);this._url=_.length>0?w:[p.src];return}C(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(p.style,"objectFit")&&(p.style.objectFit="fill"),p.autoplay=!!this.options.autoplay,p.loop=!!this.options.loop,p.muted=!!this.options.muted,p.playsInline=!!this.options.playsInline;for(var T=0;T<this._url.length;T++){var j=Hn("source");j.src=this._url[T],p.appendChild(j)}}});function abe(l,p,_){return new bG(l,p,_)}var wG=oS.extend({_initImage:function(){var l=this._image=this._url;pn(l,"leaflet-image-layer"),this._zoomAnimated&&pn(l,"leaflet-zoom-animated"),this.options.className&&pn(l,this.options.className),l.onselectstart=u,l.onmousemove=u}});function cbe(l,p,_){return new wG(l,p,_)}var ll=gc.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(l,p){l&&(l instanceof Bt||C(l))?(this._latlng=Gt(l),h(this,p)):(h(this,l),this._source=p),this.options.content&&(this._content=this.options.content)},openOn:function(l){return l=arguments.length?l:this._source._map,l.hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&Na(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&Na(this._container,1),this.bringToFront(),this.options.interactive&&(pn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(Na(this._container,0),this._removeTimeout=setTimeout(i(Qr,void 0,this._container),200)):Qr(this._container),this.options.interactive&&(mi(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=Gt(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ng(this._container),this},bringToBack:function(){return this._map&&rg(this._container),this},_prepareOpen:function(l){var p=this._source;if(!p._map)return!1;if(p instanceof wu){p=null;var _=this._source._layers;for(var w in _)if(_[w]._map){p=_[w];break}if(!p)return!1;this._source=p}if(!l)if(p.getCenter)l=p.getCenter();else if(p.getLatLng)l=p.getLatLng();else if(p.getBounds)l=p.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,p=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof p=="string")l.innerHTML=p;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(p)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),p=ve(this.options.offset),_=this._getAnchor();this._zoomAnimated?Ii(this._container,l.add(_)):p=p.add(l).add(_);var w=this._containerBottom=-p.y,I=this._containerLeft=-Math.round(this._containerWidth/2)+p.x;this._container.style.bottom=w+"px",this._container.style.left=I+"px"}},_getAnchor:function(){return[0,0]}});Fn.include({_initOverlay:function(l,p,_,w){var I=p;return I instanceof l||(I=new l(w).setContent(p)),_&&I.setLatLng(_),I}}),gc.include({_initOverlay:function(l,p,_,w){var I=_;return I instanceof l?(h(I,w),I._source=this):(I=p&&!w?p:new l(w,this),I.setContent(_)),I}});var sS=ll.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return l=arguments.length?l:this._source._map,!l.hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,ll.prototype.openOn.call(this,l)},onAdd:function(l){ll.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Wd||this._source.on("preclick",jm))},onRemove:function(l){ll.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Wd||this._source.off("preclick",jm))},getEvents:function(){var l=ll.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",p=this._container=Hn("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),_=this._wrapper=Hn("div",l+"-content-wrapper",p);if(this._contentNode=Hn("div",l+"-content",_),Hb(p),gL(this._contentNode),rn(p,"contextmenu",jm),this._tipContainer=Hn("div",l+"-tip-container",p),this._tip=Hn("div",l+"-tip",this._tipContainer),this.options.closeButton){var w=this._closeButton=Hn("a",l+"-close-button",p);w.setAttribute("role","button"),w.setAttribute("aria-label","Close popup"),w.href="#close",w.innerHTML='<span aria-hidden="true">&#215;</span>',rn(w,"click",function(I){mo(I),this.close()},this)}},_updateLayout:function(){var l=this._contentNode,p=l.style;p.width="",p.whiteSpace="nowrap";var _=l.offsetWidth;_=Math.min(_,this.options.maxWidth),_=Math.max(_,this.options.minWidth),p.width=_+1+"px",p.whiteSpace="",p.height="";var w=l.offsetHeight,I=this.options.maxHeight,T="leaflet-popup-scrolled";I&&w>I?(p.height=I+"px",pn(l,T)):mi(l,T),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var p=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),_=this._getAnchor();Ii(this._container,p.add(_))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var l=this._map,p=parseInt(zb(this._container,"marginBottom"),10)||0,_=this._container.offsetHeight+p,w=this._containerWidth,I=new ce(this._containerLeft,-_-this._containerBottom);I._add(Fm(this._container));var T=l.layerPointToContainerPoint(I),j=ve(this.options.autoPanPadding),G=ve(this.options.autoPanPaddingTopLeft||j),W=ve(this.options.autoPanPaddingBottomRight||j),le=l.getSize(),ze=0,Pt=0;T.x+w+W.x>le.x&&(ze=T.x+w-le.x+W.x),T.x-ze-G.x<0&&(ze=T.x-G.x),T.y+_+W.y>le.y&&(Pt=T.y+_-le.y+W.y),T.y-Pt-G.y<0&&(Pt=T.y-G.y),(ze||Pt)&&(this.options.keepInView&&(this._autopanning=!0),l.fire("autopanstart").panBy([ze,Pt]))}},_getAnchor:function(){return ve(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),lbe=function(l,p){return new sS(l,p)};Fn.mergeOptions({closePopupOnClick:!0}),Fn.include({openPopup:function(l,p,_){return this._initOverlay(sS,l,p,_).openOn(this),this},closePopup:function(l){return l=arguments.length?l:this._popup,l&&l.close(),this}}),gc.include({bindPopup:function(l,p){return this._popup=this._initOverlay(sS,this._popup,l,p),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&(this instanceof wu||(this._popup._source=this),this._popup._prepareOpen(l||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(!(!this._popup||!this._map)){zm(l);var p=l.layer||l.target;if(this._popup._source===p&&!(p instanceof Wd)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng);return}this._popup._source=p,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){l.originalEvent.keyCode===13&&this._openPopup(l)}});var aS=ll.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){ll.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){ll.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=ll.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){var l="leaflet-tooltip",p=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Hn("div",p),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+s(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var p,_,w=this._map,I=this._container,T=w.latLngToContainerPoint(w.getCenter()),j=w.layerPointToContainerPoint(l),G=this.options.direction,W=I.offsetWidth,le=I.offsetHeight,ze=ve(this.options.offset),Pt=this._getAnchor();G==="top"?(p=W/2,_=le):G==="bottom"?(p=W/2,_=0):G==="center"?(p=W/2,_=le/2):G==="right"?(p=0,_=le/2):G==="left"?(p=W,_=le/2):j.x<T.x?(G="right",p=0,_=le/2):(G="left",p=W+(ze.x+Pt.x)*2,_=le/2),l=l.subtract(ve(p,_,!0)).add(ze).add(Pt),mi(I,"leaflet-tooltip-right"),mi(I,"leaflet-tooltip-left"),mi(I,"leaflet-tooltip-top"),mi(I,"leaflet-tooltip-bottom"),pn(I,"leaflet-tooltip-"+G),Ii(I,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&Na(this._container,l)},_animateZoom:function(l){var p=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(p)},_getAnchor:function(){return ve(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ube=function(l,p){return new aS(l,p)};Fn.include({openTooltip:function(l,p,_){return this._initOverlay(aS,l,p,_).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),gc.include({bindTooltip:function(l,p){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(aS,this._tooltip,l,p),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(!(!l&&this._tooltipHandlersAdded)){var p=l?"off":"on",_={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?_.add=this._openTooltip:(_.mouseover=this._openTooltip,_.mouseout=this.closeTooltip,_.click=this._openTooltip,this._map?this._addFocusListeners():_.add=this._addFocusListeners),this._tooltip.options.sticky&&(_.mousemove=this._moveTooltip),this[p](_),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&(this instanceof wu||(this._tooltip._source=this),this._tooltip._prepareOpen(l)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(l){var p=typeof l.getElement=="function"&&l.getElement();p&&(rn(p,"focus",function(){this._tooltip._source=l,this.openTooltip()},this),rn(p,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(l){var p=typeof l.getElement=="function"&&l.getElement();p&&p.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(l){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var p=this;this._map.once("moveend",function(){p._openOnceFlag=!1,p._openTooltip(l)});return}this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0)}},_moveTooltip:function(l){var p=l.latlng,_,w;this._tooltip.options.sticky&&l.originalEvent&&(_=this._map.mouseEventToContainerPoint(l.originalEvent),w=this._map.containerPointToLayerPoint(_),p=this._map.layerPointToLatLng(w)),this._tooltip.setLatLng(p)}});var xG=og.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var p=l&&l.tagName==="DIV"?l:document.createElement("div"),_=this.options;if(_.html instanceof Element?(GI(p),p.appendChild(_.html)):p.innerHTML=_.html!==!1?_.html:"",_.bgPos){var w=ve(_.bgPos);p.style.backgroundPosition=-w.x+"px "+-w.y+"px"}return this._setIconStyles(p,"icon"),p},createShadow:function(){return null}});function dbe(l){return new xG(l)}og.Default=Gb;var Wb=gc.extend({options:{tileSize:256,opacity:1,updateWhenIdle:mt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){h(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),Qr(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ng(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(rg(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof ce?l:new ce(l,l)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var p=this.getPane().children,_=-l(-1/0,1/0),w=0,I=p.length,T;w<I;w++)T=p[w].style.zIndex,p[w]!==this._container&&T&&(_=l(_,+T));isFinite(_)&&(this.options.zIndex=_+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!mt.ielt9){Na(this._container,this.options.opacity);var l=+new Date,p=!1,_=!1;for(var w in this._tiles){var I=this._tiles[w];if(!(!I.current||!I.loaded)){var T=Math.min(1,(l-I.loaded)/200);Na(I.el,T),T<1?p=!0:(I.active?_=!0:this._onOpaqueTile(I),I.active=!0)}}_&&!this._noPrune&&this._pruneTiles(),p&&(xe(this._fadeFrame),this._fadeFrame=pe(this._updateOpacity,this))}},_onOpaqueTile:u,_initContainer:function(){this._container||(this._container=Hn("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,p=this.options.maxZoom;if(l!==void 0){for(var _ in this._levels)_=Number(_),this._levels[_].el.children.length||_===l?(this._levels[_].el.style.zIndex=p-Math.abs(l-_),this._onUpdateLevel(_)):(Qr(this._levels[_].el),this._removeTilesAtZoom(_),this._onRemoveLevel(_),delete this._levels[_]);var w=this._levels[l],I=this._map;return w||(w=this._levels[l]={},w.el=Hn("div","leaflet-tile-container leaflet-zoom-animated",this._container),w.el.style.zIndex=p,w.origin=I.project(I.unproject(I.getPixelOrigin()),l).round(),w.zoom=l,this._setZoomTransform(w,I.getCenter(),I.getZoom()),u(w.el.offsetWidth),this._onCreateLevel(w)),this._level=w,w}},_onUpdateLevel:u,_onRemoveLevel:u,_onCreateLevel:u,_pruneTiles:function(){if(this._map){var l,p,_=this._map.getZoom();if(_>this.options.maxZoom||_<this.options.minZoom){this._removeAllTiles();return}for(l in this._tiles)p=this._tiles[l],p.retain=p.current;for(l in this._tiles)if(p=this._tiles[l],p.current&&!p.active){var w=p.coords;this._retainParent(w.x,w.y,w.z,w.z-5)||this._retainChildren(w.x,w.y,w.z,w.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var p in this._tiles)this._tiles[p].coords.z===l&&this._removeTile(p)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)Qr(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,p,_,w){var I=Math.floor(l/2),T=Math.floor(p/2),j=_-1,G=new ce(+I,+T);G.z=+j;var W=this._tileCoordsToKey(G),le=this._tiles[W];return le&&le.active?(le.retain=!0,!0):(le&&le.loaded&&(le.retain=!0),j>w?this._retainParent(I,T,j,w):!1)},_retainChildren:function(l,p,_,w){for(var I=2*l;I<2*l+2;I++)for(var T=2*p;T<2*p+2;T++){var j=new ce(I,T);j.z=_+1;var G=this._tileCoordsToKey(j),W=this._tiles[G];if(W&&W.active){W.retain=!0;continue}else W&&W.loaded&&(W.retain=!0);_+1<w&&this._retainChildren(I,T,_+1,w)}},_resetView:function(l){var p=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),p,p)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var p=this.options;return p.minNativeZoom!==void 0&&l<p.minNativeZoom?p.minNativeZoom:p.maxNativeZoom!==void 0&&p.maxNativeZoom<l?p.maxNativeZoom:l},_setView:function(l,p,_,w){var I=Math.round(p);this.options.maxZoom!==void 0&&I>this.options.maxZoom||this.options.minZoom!==void 0&&I<this.options.minZoom?I=void 0:I=this._clampZoom(I);var T=this.options.updateWhenZooming&&I!==this._tileZoom;(!w||T)&&(this._tileZoom=I,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),I!==void 0&&this._update(l),_||this._pruneTiles(),this._noPrune=!!_),this._setZoomTransforms(l,p)},_setZoomTransforms:function(l,p){for(var _ in this._levels)this._setZoomTransform(this._levels[_],l,p)},_setZoomTransform:function(l,p,_){var w=this._map.getZoomScale(_,l.zoom),I=l.origin.multiplyBy(w).subtract(this._map._getNewPixelOrigin(p,_)).round();mt.any3d?Lm(l.el,I,w):Ii(l.el,I)},_resetGrid:function(){var l=this._map,p=l.options.crs,_=this._tileSize=this.getTileSize(),w=this._tileZoom,I=this._map.getPixelWorldBounds(this._tileZoom);I&&(this._globalTileRange=this._pxBoundsToTileRange(I)),this._wrapX=p.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,p.wrapLng[0]],w).x/_.x),Math.ceil(l.project([0,p.wrapLng[1]],w).x/_.y)],this._wrapY=p.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([p.wrapLat[0],0],w).y/_.x),Math.ceil(l.project([p.wrapLat[1],0],w).y/_.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var p=this._map,_=p._animatingZoom?Math.max(p._animateToZoom,p.getZoom()):p.getZoom(),w=p.getZoomScale(_,this._tileZoom),I=p.project(l,this._tileZoom).floor(),T=p.getSize().divideBy(w*2);return new ke(I.subtract(T),I.add(T))},_update:function(l){var p=this._map;if(p){var _=this._clampZoom(p.getZoom());if(l===void 0&&(l=p.getCenter()),this._tileZoom!==void 0){var w=this._getTiledPixelBounds(l),I=this._pxBoundsToTileRange(w),T=I.getCenter(),j=[],G=this.options.keepBuffer,W=new ke(I.getBottomLeft().subtract([G,-G]),I.getTopRight().add([G,-G]));if(!(isFinite(I.min.x)&&isFinite(I.min.y)&&isFinite(I.max.x)&&isFinite(I.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var le in this._tiles){var ze=this._tiles[le].coords;(ze.z!==this._tileZoom||!W.contains(new ce(ze.x,ze.y)))&&(this._tiles[le].current=!1)}if(Math.abs(_-this._tileZoom)>1){this._setView(l,_);return}for(var Pt=I.min.y;Pt<=I.max.y;Pt++)for(var Cn=I.min.x;Cn<=I.max.x;Cn++){var ns=new ce(Cn,Pt);if(ns.z=this._tileZoom,!!this._isValidTile(ns)){var Xi=this._tiles[this._tileCoordsToKey(ns)];Xi?Xi.current=!0:j.push(ns)}}if(j.sort(function($s,lg){return $s.distanceTo(T)-lg.distanceTo(T)}),j.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var La=document.createDocumentFragment();for(Cn=0;Cn<j.length;Cn++)this._addTile(j[Cn],La);this._level.el.appendChild(La)}}}},_isValidTile:function(l){var p=this._map.options.crs;if(!p.infinite){var _=this._globalTileRange;if(!p.wrapLng&&(l.x<_.min.x||l.x>_.max.x)||!p.wrapLat&&(l.y<_.min.y||l.y>_.max.y))return!1}if(!this.options.bounds)return!0;var w=this._tileCoordsToBounds(l);return Ot(this.options.bounds).overlaps(w)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var p=this._map,_=this.getTileSize(),w=l.scaleBy(_),I=w.add(_),T=p.unproject(w,l.z),j=p.unproject(I,l.z);return[T,j]},_tileCoordsToBounds:function(l){var p=this._tileCoordsToNwSe(l),_=new _t(p[0],p[1]);return this.options.noWrap||(_=this._map.wrapLatLngBounds(_)),_},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var p=l.split(":"),_=new ce(+p[0],+p[1]);return _.z=+p[2],_},_removeTile:function(l){var p=this._tiles[l];p&&(Qr(p.el),delete this._tiles[l],this.fire("tileunload",{tile:p.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){pn(l,"leaflet-tile");var p=this.getTileSize();l.style.width=p.x+"px",l.style.height=p.y+"px",l.onselectstart=u,l.onmousemove=u,mt.ielt9&&this.options.opacity<1&&Na(l,this.options.opacity)},_addTile:function(l,p){var _=this._getTilePos(l),w=this._tileCoordsToKey(l),I=this.createTile(this._wrapCoords(l),i(this._tileReady,this,l));this._initTile(I),this.createTile.length<2&&pe(i(this._tileReady,this,l,null,I)),Ii(I,_),this._tiles[w]={el:I,coords:l,current:!0},p.appendChild(I),this.fire("tileloadstart",{tile:I,coords:l})},_tileReady:function(l,p,_){p&&this.fire("tileerror",{error:p,tile:_,coords:l});var w=this._tileCoordsToKey(l);_=this._tiles[w],_&&(_.loaded=+new Date,this._map._fadeAnimated?(Na(_.el,0),xe(this._fadeFrame),this._fadeFrame=pe(this._updateOpacity,this)):(_.active=!0,this._pruneTiles()),p||(pn(_.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:_.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),mt.ielt9||!this._map._fadeAnimated?pe(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var p=new ce(this._wrapX?c(l.x,this._wrapX):l.x,this._wrapY?c(l.y,this._wrapY):l.y);return p.z=l.z,p},_pxBoundsToTileRange:function(l){var p=this.getTileSize();return new ke(l.min.unscaleBy(p).floor(),l.max.unscaleBy(p).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});function pbe(l){return new Wb(l)}var cg=Wb.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,p){this._url=l,p=h(this,p),p.detectRetina&&mt.retina&&p.maxZoom>0?(p.tileSize=Math.floor(p.tileSize/2),p.zoomReverse?(p.zoomOffset--,p.minZoom=Math.min(p.maxZoom,p.minZoom+1)):(p.zoomOffset++,p.maxZoom=Math.max(p.minZoom,p.maxZoom-1)),p.minZoom=Math.max(0,p.minZoom)):p.zoomReverse?p.minZoom=Math.min(p.maxZoom,p.minZoom):p.maxZoom=Math.max(p.minZoom,p.maxZoom),typeof p.subdomains=="string"&&(p.subdomains=p.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,p){return this._url===l&&p===void 0&&(p=!0),this._url=l,p||this.redraw(),this},createTile:function(l,p){var _=document.createElement("img");return rn(_,"load",i(this._tileOnLoad,this,p,_)),rn(_,"error",i(this._tileOnError,this,p,_)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(_.referrerPolicy=this.options.referrerPolicy),_.alt="",_.src=this.getTileUrl(l),_},getTileUrl:function(l){var p={r:mt.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var _=this._globalTileRange.max.y-l.y;this.options.tms&&(p.y=_),p["-y"]=_}return E(this._url,n(p,this.options))},_tileOnLoad:function(l,p){mt.ielt9?setTimeout(i(l,this,null,p),0):l(null,p)},_tileOnError:function(l,p,_){var w=this.options.errorTileUrl;w&&p.getAttribute("src")!==w&&(p.src=w),l(_,p)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,p=this.options.maxZoom,_=this.options.zoomReverse,w=this.options.zoomOffset;return _&&(l=p-l),l+w},_getSubdomain:function(l){var p=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[p]},_abortLoading:function(){var l,p;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&(p=this._tiles[l].el,p.onload=u,p.onerror=u,!p.complete)){p.src=A;var _=this._tiles[l].coords;Qr(p),delete this._tiles[l],this.fire("tileabort",{tile:p,coords:_})}},_removeTile:function(l){var p=this._tiles[l];if(p)return p.el.setAttribute("src",A),Wb.prototype._removeTile.call(this,l)},_tileReady:function(l,p,_){if(!(!this._map||_&&_.getAttribute("src")===A))return Wb.prototype._tileReady.call(this,l,p,_)}});function CG(l,p){return new cg(l,p)}var EG=cg.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,p){this._url=l;var _=n({},this.defaultWmsParams);for(var w in p)w in this.options||(_[w]=p[w]);p=h(this,p);var I=p.detectRetina&&mt.retina?2:1,T=this.getTileSize();_.width=T.x*I,_.height=T.y*I,this.wmsParams=_},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var p=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[p]=this._crs.code,cg.prototype.onAdd.call(this,l)},getTileUrl:function(l){var p=this._tileCoordsToNwSe(l),_=this._crs,w=We(_.project(p[0]),_.project(p[1])),I=w.min,T=w.max,j=(this._wmsVersion>=1.3&&this._crs===gG?[I.y,I.x,T.y,T.x]:[I.x,I.y,T.x,T.y]).join(","),G=cg.prototype.getTileUrl.call(this,l);return G+v(this.wmsParams,G,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+j},setParams:function(l,p){return n(this.wmsParams,l),p||this.redraw(),this}});function mbe(l,p){return new EG(l,p)}cg.WMS=EG,CG.wms=mbe;var Eu=gc.extend({options:{padding:.1},initialize:function(l){h(this,l),s(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),pn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,p){var _=this._map.getZoomScale(p,this._zoom),w=this._map.getSize().multiplyBy(.5+this.options.padding),I=this._map.project(this._center,p),T=w.multiplyBy(-_).add(I).subtract(this._map._getNewPixelOrigin(l,p));mt.any3d?Lm(this._container,T,_):Ii(this._container,T)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var l in this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,p=this._map.getSize(),_=this._map.containerPointToLayerPoint(p.multiplyBy(-l)).round();this._bounds=new ke(_,_.add(p.multiplyBy(1+l*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),IG=Eu.extend({options:{tolerance:0},getEvents:function(){var l=Eu.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Eu.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");rn(l,"mousemove",this._onMouseMove,this),rn(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),rn(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){xe(this._redrawRequest),delete this._ctx,Qr(this._container),Sr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var l;this._redrawBounds=null;for(var p in this._layers)l=this._layers[p],l._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Eu.prototype._update.call(this);var l=this._bounds,p=this._container,_=l.getSize(),w=mt.retina?2:1;Ii(p,l.min),p.width=w*_.x,p.height=w*_.y,p.style.width=_.x+"px",p.style.height=_.y+"px",mt.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){Eu.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[s(l)]=l;var p=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=p),this._drawLast=p,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var p=l._order,_=p.next,w=p.prev;_?_.prev=w:this._drawLast=w,w?w.next=_:this._drawFirst=_,delete l._order,delete this._layers[s(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if(typeof l.options.dashArray=="string"){var p=l.options.dashArray.split(/[, ]+/),_=[],w,I;for(I=0;I<p.length;I++){if(w=Number(p[I]),isNaN(w))return;_.push(w)}l.options._dashArray=_}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){this._map&&(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||pe(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var p=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ke,this._redrawBounds.extend(l._pxBounds.min.subtract([p,p])),this._redrawBounds.extend(l._pxBounds.max.add([p,p]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var p=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,p.x,p.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,p=this._redrawBounds;if(this._ctx.save(),p){var _=p.getSize();this._ctx.beginPath(),this._ctx.rect(p.min.x,p.min.y,_.x,_.y),this._ctx.clip()}this._drawing=!0;for(var w=this._drawFirst;w;w=w.next)l=w.layer,(!p||l._pxBounds&&l._pxBounds.intersects(p))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,p){if(this._drawing){var _,w,I,T,j=l._parts,G=j.length,W=this._ctx;if(G){for(W.beginPath(),_=0;_<G;_++){for(w=0,I=j[_].length;w<I;w++)T=j[_][w],W[w?"lineTo":"moveTo"](T.x,T.y);p&&W.closePath()}this._fillStroke(W,l)}}},_updateCircle:function(l){if(!(!this._drawing||l._empty())){var p=l._point,_=this._ctx,w=Math.max(Math.round(l._radius),1),I=(Math.max(Math.round(l._radiusY),1)||w)/w;I!==1&&(_.save(),_.scale(1,I)),_.beginPath(),_.arc(p.x,p.y/I,w,0,Math.PI*2,!1),I!==1&&_.restore(),this._fillStroke(_,l)}},_fillStroke:function(l,p){var _=p.options;_.fill&&(l.globalAlpha=_.fillOpacity,l.fillStyle=_.fillColor||_.color,l.fill(_.fillRule||"evenodd")),_.stroke&&_.weight!==0&&(l.setLineDash&&l.setLineDash(p.options&&p.options._dashArray||[]),l.globalAlpha=_.opacity,l.lineWidth=_.weight,l.strokeStyle=_.color,l.lineCap=_.lineCap,l.lineJoin=_.lineJoin,l.stroke())},_onClick:function(l){for(var p=this._map.mouseEventToLayerPoint(l),_,w,I=this._drawFirst;I;I=I.next)_=I.layer,_.options.interactive&&_._containsPoint(p)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(_))&&(w=_);this._fireEvent(w?[w]:!1,l)},_onMouseMove:function(l){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var p=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,p)}},_handleMouseOut:function(l){var p=this._hoveredLayer;p&&(mi(this._container,"leaflet-interactive"),this._fireEvent([p],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,p){if(!this._mouseHoverThrottled){for(var _,w,I=this._drawFirst;I;I=I.next)_=I.layer,_.options.interactive&&_._containsPoint(p)&&(w=_);w!==this._hoveredLayer&&(this._handleMouseOut(l),w&&(pn(this._container,"leaflet-interactive"),this._fireEvent([w],l,"mouseover"),this._hoveredLayer=w)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,l),this._mouseHoverThrottled=!0,setTimeout(i(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,p,_){this._map._fireDOMEvent(p,_||p.type,l)},_bringToFront:function(l){var p=l._order;if(p){var _=p.next,w=p.prev;if(_)_.prev=w;else return;w?w.next=_:_&&(this._drawFirst=_),p.prev=this._drawLast,this._drawLast.next=p,p.next=null,this._drawLast=p,this._requestRedraw(l)}},_bringToBack:function(l){var p=l._order;if(p){var _=p.next,w=p.prev;if(w)w.next=_;else return;_?_.prev=w:w&&(this._drawLast=w),p.prev=null,p.next=this._drawFirst,this._drawFirst.prev=p,this._drawFirst=p,this._requestRedraw(l)}}});function SG(l){return mt.canvas?new IG(l):null}var Kb=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch{}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),fbe={_initContainer:function(){this._container=Hn("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Eu.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var p=l._container=Kb("shape");pn(p,"leaflet-vml-shape "+(this.options.className||"")),p.coordsize="1 1",l._path=Kb("path"),p.appendChild(l._path),this._updateStyle(l),this._layers[s(l)]=l},_addPath:function(l){var p=l._container;this._container.appendChild(p),l.options.interactive&&l.addInteractiveTarget(p)},_removePath:function(l){var p=l._container;Qr(p),l.removeInteractiveTarget(p),delete this._layers[s(l)]},_updateStyle:function(l){var p=l._stroke,_=l._fill,w=l.options,I=l._container;I.stroked=!!w.stroke,I.filled=!!w.fill,w.stroke?(p||(p=l._stroke=Kb("stroke")),I.appendChild(p),p.weight=w.weight+"px",p.color=w.color,p.opacity=w.opacity,w.dashArray?p.dashStyle=C(w.dashArray)?w.dashArray.join(" "):w.dashArray.replace(/( *, *)/g," "):p.dashStyle="",p.endcap=w.lineCap.replace("butt","flat"),p.joinstyle=w.lineJoin):p&&(I.removeChild(p),l._stroke=null),w.fill?(_||(_=l._fill=Kb("fill")),I.appendChild(_),_.color=w.fillColor||w.color,_.opacity=w.fillOpacity):_&&(I.removeChild(_),l._fill=null)},_updateCircle:function(l){var p=l._point.round(),_=Math.round(l._radius),w=Math.round(l._radiusY||_);this._setPath(l,l._empty()?"M0 0":"AL "+p.x+","+p.y+" "+_+","+w+" 0,"+65535*360)},_setPath:function(l,p){l._path.v=p},_bringToFront:function(l){ng(l._container)},_bringToBack:function(l){rg(l._container)}},cS=mt.vml?Kb:Yr,Jb=Eu.extend({_initContainer:function(){this._container=cS("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=cS("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Qr(this._container),Sr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Eu.prototype._update.call(this);var l=this._bounds,p=l.getSize(),_=this._container;(!this._svgSize||!this._svgSize.equals(p))&&(this._svgSize=p,_.setAttribute("width",p.x),_.setAttribute("height",p.y)),Ii(_,l.min),_.setAttribute("viewBox",[l.min.x,l.min.y,p.x,p.y].join(" ")),this.fire("update")}},_initPath:function(l){var p=l._path=cS("path");l.options.className&&pn(p,l.options.className),l.options.interactive&&pn(p,"leaflet-interactive"),this._updateStyle(l),this._layers[s(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){Qr(l._path),l.removeInteractiveTarget(l._path),delete this._layers[s(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var p=l._path,_=l.options;p&&(_.stroke?(p.setAttribute("stroke",_.color),p.setAttribute("stroke-opacity",_.opacity),p.setAttribute("stroke-width",_.weight),p.setAttribute("stroke-linecap",_.lineCap),p.setAttribute("stroke-linejoin",_.lineJoin),_.dashArray?p.setAttribute("stroke-dasharray",_.dashArray):p.removeAttribute("stroke-dasharray"),_.dashOffset?p.setAttribute("stroke-dashoffset",_.dashOffset):p.removeAttribute("stroke-dashoffset")):p.setAttribute("stroke","none"),_.fill?(p.setAttribute("fill",_.fillColor||_.color),p.setAttribute("fill-opacity",_.fillOpacity),p.setAttribute("fill-rule",_.fillRule||"evenodd")):p.setAttribute("fill","none"))},_updatePoly:function(l,p){this._setPath(l,Ei(l._parts,p))},_updateCircle:function(l){var p=l._point,_=Math.max(Math.round(l._radius),1),w=Math.max(Math.round(l._radiusY),1)||_,I="a"+_+","+w+" 0 1,0 ",T=l._empty()?"M0 0":"M"+(p.x-_)+","+p.y+I+_*2+",0 "+I+-_*2+",0 ";this._setPath(l,T)},_setPath:function(l,p){l._path.setAttribute("d",p)},_bringToFront:function(l){ng(l._path)},_bringToBack:function(l){rg(l._path)}});mt.vml&&Jb.include(fbe);function kG(l){return mt.svg||mt.vml?new Jb(l):null}Fn.include({getRenderer:function(l){var p=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return p||(p=this._renderer=this._createRenderer()),this.hasLayer(p)||this.addLayer(p),p},_getPaneRenderer:function(l){if(l==="overlayPane"||l===void 0)return!1;var p=this._paneRenderers[l];return p===void 0&&(p=this._createRenderer({pane:l}),this._paneRenderers[l]=p),p},_createRenderer:function(l){return this.options.preferCanvas&&SG(l)||kG(l)}});var TG=sg.extend({initialize:function(l,p){sg.prototype.initialize.call(this,this._boundsToLatLngs(l),p)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return l=Ot(l),[l.getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});function hbe(l,p){return new TG(l,p)}Jb.create=cS,Jb.pointsToPath=Ei,Cu.geometryToLayer=tS,Cu.coordsToLatLng=IL,Cu.coordsToLatLngs=nS,Cu.latLngToCoords=SL,Cu.latLngsToCoords=rS,Cu.getFeature=ag,Cu.asFeature=iS,Fn.mergeOptions({boxZoom:!0});var AG=cl.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){rn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Sr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Qr(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||l.which!==1&&l.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Bb(),cL(),this._startPoint=this._map.mouseEventToContainerPoint(l),rn(document,{contextmenu:zm,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=Hn("div","leaflet-zoom-box",this._container),pn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var p=new ke(this._point,this._startPoint),_=p.getSize();Ii(this._box,p.min),this._box.style.width=_.x+"px",this._box.style.height=_.y+"px"},_finish:function(){this._moved&&(Qr(this._box),mi(this._container,"leaflet-crosshair")),Ub(),lL(),Sr(document,{contextmenu:zm,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if(!(l.which!==1&&l.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var p=new _t(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(p).fire("boxzoomend",{boxZoomBounds:p})}},_onKeyDown:function(l){l.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Fn.addInitHook("addHandler","boxZoom",AG),Fn.mergeOptions({doubleClickZoom:!0});var OG=cl.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var p=this._map,_=p.getZoom(),w=p.options.zoomDelta,I=l.originalEvent.shiftKey?_-w:_+w;p.options.doubleClickZoom==="center"?p.setZoom(I):p.setZoomAround(l.containerPoint,I)}});Fn.addInitHook("addHandler","doubleClickZoom",OG),Fn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var MG=cl.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new Gd(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}pn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){mi(this._map._container,"leaflet-grab"),mi(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var p=Ot(this._map.options.maxBounds);this._offsetLimit=We(this._map.latLngToContainerPoint(p.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(p.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var p=this._lastTime=+new Date,_=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(_),this._times.push(p),this._prunePositions(p)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),p=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=p.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,p){return l-(l-p)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var l=this._draggable._newPos.subtract(this._draggable._startPos),p=this._offsetLimit;l.x<p.min.x&&(l.x=this._viscousLimit(l.x,p.min.x)),l.y<p.min.y&&(l.y=this._viscousLimit(l.y,p.min.y)),l.x>p.max.x&&(l.x=this._viscousLimit(l.x,p.max.x)),l.y>p.max.y&&(l.y=this._viscousLimit(l.y,p.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,p=Math.round(l/2),_=this._initialWorldOffset,w=this._draggable._newPos.x,I=(w-p+_)%l+p-_,T=(w+p+_)%l-p-_,j=Math.abs(I+_)<Math.abs(T+_)?I:T;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=j},_onDragEnd:function(l){var p=this._map,_=p.options,w=!_.inertia||l.noInertia||this._times.length<2;if(p.fire("dragend",l),w)p.fire("moveend");else{this._prunePositions(+new Date);var I=this._lastPos.subtract(this._positions[0]),T=(this._lastTime-this._times[0])/1e3,j=_.easeLinearity,G=I.multiplyBy(j/T),W=G.distanceTo([0,0]),le=Math.min(_.inertiaMaxSpeed,W),ze=G.multiplyBy(le/W),Pt=le/(_.inertiaDeceleration*j),Cn=ze.multiplyBy(-Pt/2).round();!Cn.x&&!Cn.y?p.fire("moveend"):(Cn=p._limitOffset(Cn,p.options.maxBounds),pe(function(){p.panBy(Cn,{duration:Pt,easeLinearity:j,noMoveStart:!0,animate:!0})}))}}});Fn.addInitHook("addHandler","dragging",MG),Fn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var DG=cl.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),rn(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Sr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,p=document.documentElement,_=l.scrollTop||p.scrollTop,w=l.scrollLeft||p.scrollLeft;this._map._container.focus(),window.scrollTo(w,_)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var p=this._panKeys={},_=this.keyCodes,w,I;for(w=0,I=_.left.length;w<I;w++)p[_.left[w]]=[-1*l,0];for(w=0,I=_.right.length;w<I;w++)p[_.right[w]]=[l,0];for(w=0,I=_.down.length;w<I;w++)p[_.down[w]]=[0,l];for(w=0,I=_.up.length;w<I;w++)p[_.up[w]]=[0,-1*l]},_setZoomDelta:function(l){var p=this._zoomKeys={},_=this.keyCodes,w,I;for(w=0,I=_.zoomIn.length;w<I;w++)p[_.zoomIn[w]]=l;for(w=0,I=_.zoomOut.length;w<I;w++)p[_.zoomOut[w]]=-l},_addHooks:function(){rn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Sr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var p=l.keyCode,_=this._map,w;if(p in this._panKeys){if(!_._panAnim||!_._panAnim._inProgress)if(w=this._panKeys[p],l.shiftKey&&(w=ve(w).multiplyBy(3)),_.options.maxBounds&&(w=_._limitOffset(ve(w),_.options.maxBounds)),_.options.worldCopyJump){var I=_.wrapLatLng(_.unproject(_.project(_.getCenter()).add(w)));_.panTo(I)}else _.panBy(w)}else if(p in this._zoomKeys)_.setZoom(_.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[p]);else if(p===27&&_._popup&&_._popup.options.closeOnEscapeKey)_.closePopup();else return;zm(l)}}});Fn.addInitHook("addHandler","keyboard",DG),Fn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var PG=cl.extend({addHooks:function(){rn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Sr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var p=rG(l),_=this._map.options.wheelDebounceTime;this._delta+=p,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var w=Math.max(_-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),w),zm(l)},_performZoom:function(){var l=this._map,p=l.getZoom(),_=this._map.options.zoomSnap||0;l._stop();var w=this._delta/(this._map.options.wheelPxPerZoomLevel*4),I=4*Math.log(2/(1+Math.exp(-Math.abs(w))))/Math.LN2,T=_?Math.ceil(I/_)*_:I,j=l._limitZoom(p+(this._delta>0?T:-T))-p;this._delta=0,this._startTime=null,j&&(l.options.scrollWheelZoom==="center"?l.setZoom(p+j):l.setZoomAround(this._lastMousePos,p+j))}});Fn.addInitHook("addHandler","scrollWheelZoom",PG);var gbe=600;Fn.mergeOptions({tapHold:mt.touchNative&&mt.safari&&mt.mobile,tapTolerance:15});var RG=cl.extend({addHooks:function(){rn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Sr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),l.touches.length===1){var p=l.touches[0];this._startPos=this._newPos=new ce(p.clientX,p.clientY),this._holdTimeout=setTimeout(i(function(){this._cancel(),this._isTapValid()&&(rn(document,"touchend",mo),rn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",p))},this),gbe),rn(document,"touchend touchcancel contextmenu",this._cancel,this),rn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){Sr(document,"touchend",mo),Sr(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),Sr(document,"touchend touchcancel contextmenu",this._cancel,this),Sr(document,"touchmove",this._onMove,this)},_onMove:function(l){var p=l.touches[0];this._newPos=new ce(p.clientX,p.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,p){var _=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:p.screenX,screenY:p.screenY,clientX:p.clientX,clientY:p.clientY});_._simulated=!0,p.target.dispatchEvent(_)}});Fn.addInitHook("addHandler","tapHold",RG),Fn.mergeOptions({touchZoom:mt.touch,bounceAtZoomLimits:!0});var NG=cl.extend({addHooks:function(){pn(this._map._container,"leaflet-touch-zoom"),rn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){mi(this._map._container,"leaflet-touch-zoom"),Sr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var p=this._map;if(!(!l.touches||l.touches.length!==2||p._animatingZoom||this._zooming)){var _=p.mouseEventToContainerPoint(l.touches[0]),w=p.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=p.getSize()._divideBy(2),this._startLatLng=p.containerPointToLatLng(this._centerPoint),p.options.touchZoom!=="center"&&(this._pinchStartLatLng=p.containerPointToLatLng(_.add(w)._divideBy(2))),this._startDist=_.distanceTo(w),this._startZoom=p.getZoom(),this._moved=!1,this._zooming=!0,p._stop(),rn(document,"touchmove",this._onTouchMove,this),rn(document,"touchend touchcancel",this._onTouchEnd,this),mo(l)}},_onTouchMove:function(l){if(!(!l.touches||l.touches.length!==2||!this._zooming)){var p=this._map,_=p.mouseEventToContainerPoint(l.touches[0]),w=p.mouseEventToContainerPoint(l.touches[1]),I=_.distanceTo(w)/this._startDist;if(this._zoom=p.getScaleZoom(I,this._startZoom),!p.options.bounceAtZoomLimits&&(this._zoom<p.getMinZoom()&&I<1||this._zoom>p.getMaxZoom()&&I>1)&&(this._zoom=p._limitZoom(this._zoom)),p.options.touchZoom==="center"){if(this._center=this._startLatLng,I===1)return}else{var T=_._add(w)._divideBy(2)._subtract(this._centerPoint);if(I===1&&T.x===0&&T.y===0)return;this._center=p.unproject(p.project(this._pinchStartLatLng,this._zoom).subtract(T),this._zoom)}this._moved||(p._moveStart(!0,!1),this._moved=!0),xe(this._animRequest);var j=i(p._move,p,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=pe(j,this,!0),mo(l)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,xe(this._animRequest),Sr(document,"touchmove",this._onTouchMove,this),Sr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Fn.addInitHook("addHandler","touchZoom",NG),Fn.BoxZoom=AG,Fn.DoubleClickZoom=OG,Fn.Drag=MG,Fn.Keyboard=DG,Fn.ScrollWheelZoom=PG,Fn.TapHold=RG,Fn.TouchZoom=NG,e.Bounds=ke,e.Browser=mt,e.CRS=Dn,e.Canvas=IG,e.Circle=EL,e.CircleMarker=eS,e.Class=fe,e.Control=hc,e.DivIcon=xG,e.DivOverlay=ll,e.DomEvent=Rve,e.DomUtil=Dve,e.Draggable=Gd,e.Evented=Me,e.FeatureGroup=wu,e.GeoJSON=Cu,e.GridLayer=Wb,e.Handler=cl,e.Icon=og,e.ImageOverlay=oS,e.LatLng=Bt,e.LatLngBounds=_t,e.Layer=gc,e.LayerGroup=ig,e.LineUtil=Gve,e.Map=Fn,e.Marker=XI,e.Mixin=Bve,e.Path=Wd,e.Point=ce,e.PolyUtil=Uve,e.Polygon=sg,e.Polyline=xu,e.Popup=sS,e.PosAnimation=iG,e.Projection=Wve,e.Rectangle=TG,e.Renderer=Eu,e.SVG=Jb,e.SVGOverlay=wG,e.TileLayer=cg,e.Tooltip=aS,e.Transformation=Z,e.Util=Ge,e.VideoOverlay=bG,e.bind=i,e.bounds=We,e.canvas=SG,e.circle=nbe,e.circleMarker=tbe,e.control=Zb,e.divIcon=dbe,e.extend=n,e.featureGroup=Qve,e.geoJSON=vG,e.geoJson=obe,e.gridLayer=pbe,e.icon=Xve,e.imageOverlay=sbe,e.latLng=Gt,e.latLngBounds=Ot,e.layerGroup=Yve,e.map=Nve,e.marker=ebe,e.point=ve,e.polygon=ibe,e.polyline=rbe,e.popup=lbe,e.rectangle=hbe,e.setOptions=h,e.stamp=s,e.svg=kG,e.svgOverlay=cbe,e.tileLayer=CG,e.tooltip=ube,e.transformation=en,e.version=t,e.videoOverlay=abe;var _be=window.L;e.noConflict=function(){return window.L=_be,this},window.L=e})});var OL;function pS(){return OL}function ul(e){let t=OL;return OL=e,t}var UG=Symbol("NotFound");function dg(e){return e===UG||e?.name==="\u0275NotFound"}var Mo=null,mS=!1,ML=1,Rbe=null,ki=Symbol("SIGNAL");function Rt(e){let t=Mo;return Mo=e,t}function _S(){return Mo}var Um={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Jd(e){if(mS)throw new Error("");if(Mo===null)return;Mo.consumerOnSignalRead(e);let t=Mo.producersTail;if(t!==void 0&&t.producer===e)return;let n,r=Mo.recomputing;if(r&&(n=t!==void 0?t.nextProducer:Mo.producers,n!==void 0&&n.producer===e)){Mo.producersTail=n,n.lastReadVersion=e.version;return}let i=e.consumersTail;if(i!==void 0&&i.consumer===Mo&&(!r||$be(i,Mo)))return;let o=pg(Mo),s={producer:e,consumer:Mo,nextProducer:n,prevConsumer:i,lastReadVersion:e.version,nextConsumer:void 0};Mo.producersTail=s,t!==void 0?t.nextProducer=s:Mo.producers=s,o&&qG(e,s)}function VG(){ML++}function yS(e){if(!(pg(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===ML)){if(!e.producerMustRecompute(e)&&!Hm(e)){gS(e);return}e.producerRecomputeValue(e),gS(e)}}function DL(e){if(e.consumers===void 0)return;let t=mS;mS=!0;try{for(let n=e.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||Nbe(r)}}finally{mS=t}}function PL(){return Mo?.consumerAllowSignalWrites!==!1}function Nbe(e){e.dirty=!0,DL(e),e.consumerMarkedDirty?.(e)}function gS(e){e.dirty=!1,e.lastCleanEpoch=ML}function Yd(e){return e&&HG(e),Rt(e)}function HG(e){e.producersTail=void 0,e.recomputing=!0}function Vm(e,t){Rt(t),e&&ZG(e)}function ZG(e){e.recomputing=!1;let t=e.producersTail,n=t!==void 0?t.nextProducer:e.producers;if(n!==void 0){if(pg(e))do n=RL(n);while(n!==void 0);t!==void 0?t.nextProducer=void 0:e.producers=void 0}}function Hm(e){for(let t=e.producers;t!==void 0;t=t.nextProducer){let n=t.producer,r=t.lastReadVersion;if(r!==n.version||(yS(n),r!==n.version))return!0}return!1}function Qd(e){if(pg(e)){let t=e.producers;for(;t!==void 0;)t=RL(t)}e.producers=void 0,e.producersTail=void 0,e.consumers=void 0,e.consumersTail=void 0}function qG(e,t){let n=e.consumersTail,r=pg(e);if(n!==void 0?(t.nextConsumer=n.nextConsumer,n.nextConsumer=t):(t.nextConsumer=void 0,e.consumers=t),t.prevConsumer=n,e.consumersTail=t,!r)for(let i=e.producers;i!==void 0;i=i.nextProducer)qG(i.producer,i)}function RL(e){let t=e.producer,n=e.nextProducer,r=e.nextConsumer,i=e.prevConsumer;if(e.nextConsumer=void 0,e.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:t.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(t.consumers=r,!pg(t)){let o=t.producers;for(;o!==void 0;)o=RL(o)}return n}function pg(e){return e.consumerIsAlwaysLive||e.consumers!==void 0}function vS(e){Rbe?.(e)}function $be(e,t){let n=t.producersTail;if(n!==void 0){let r=t.producers;do{if(r===e)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function bS(e,t){return Object.is(e,t)}function Qb(e,t){let n=Object.create(Lbe);n.computation=e,t!==void 0&&(n.equal=t);let r=()=>{if(yS(n),Jd(n),n.value===Yb)throw n.error;return n.value};return r[ki]=n,vS(n),r}var fS=Symbol("UNSET"),hS=Symbol("COMPUTING"),Yb=Symbol("ERRORED"),Lbe=b(m({},Um),{value:fS,dirty:!0,error:null,equal:bS,kind:"computed",producerMustRecompute(e){return e.value===fS||e.value===hS},producerRecomputeValue(e){if(e.value===hS)throw new Error("");let t=e.value;e.value=hS;let n=Yd(e),r,i=!1;try{r=e.computation(),Rt(null),i=t!==fS&&t!==Yb&&r!==Yb&&e.equal(t,r)}catch(o){r=Yb,e.error=o}finally{Vm(e,n)}if(i){e.value=t;return}e.value=r,e.version++}});function Fbe(){throw new Error}var GG=Fbe;function WG(e){GG(e)}function NL(e){GG=e}var jbe=null;function $L(e,t){let n=Object.create(Xb);n.value=e,t!==void 0&&(n.equal=t);let r=()=>KG(n);return r[ki]=n,vS(n),[r,s=>Zm(n,s),s=>LL(n,s)]}function KG(e){return Jd(e),e.value}function Zm(e,t){PL()||WG(e),e.equal(e.value,t)||(e.value=t,zbe(e))}function LL(e,t){PL()||WG(e),Zm(e,t(e.value))}var Xb=b(m({},Um),{equal:bS,value:void 0,kind:"signal"});function zbe(e){e.version++,VG(),DL(e),jbe?.(e)}function Ct(e){return typeof e=="function"}function mg(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var wS=mg(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function qm(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var fn=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Ct(r))try{r()}catch(o){t=o instanceof wS?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{JG(o)}catch(s){t=t??[],s instanceof wS?t=[...t,...s.errors]:t.push(s)}}if(t)throw new wS(t)}}add(t){var n;if(t&&t!==this)if(this.closed)JG(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&qm(n,t)}remove(t){let{_finalizers:n}=this;n&&qm(n,t),t instanceof e&&t._removeParent(this)}};fn.EMPTY=(()=>{let e=new fn;return e.closed=!0,e})();var FL=fn.EMPTY;function xS(e){return e instanceof fn||e&&"closed"in e&&Ct(e.remove)&&Ct(e.add)&&Ct(e.unsubscribe)}function JG(e){Ct(e)?e():e.unsubscribe()}var yc={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var fg={setTimeout(e,t,...n){let{delegate:r}=fg;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=fg;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function CS(e){fg.setTimeout(()=>{let{onUnhandledError:t}=yc;if(t)t(e);else throw e})}function e0(){}var YG=jL("C",void 0,void 0);function QG(e){return jL("E",void 0,e)}function XG(e){return jL("N",e,void 0)}function jL(e,t,n){return{kind:e,value:t,error:n}}var Gm=null;function hg(e){if(yc.useDeprecatedSynchronousErrorHandling){let t=!Gm;if(t&&(Gm={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=Gm;if(Gm=null,n)throw r}}else e()}function eW(e){yc.useDeprecatedSynchronousErrorHandling&&Gm&&(Gm.errorThrown=!0,Gm.error=e)}var Wm=class extends fn{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,xS(t)&&t.add(this)):this.destination=Vbe}static create(t,n,r){return new Iu(t,n,r)}next(t){this.isStopped?BL(XG(t),this):this._next(t)}error(t){this.isStopped?BL(QG(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?BL(YG,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Bbe=Function.prototype.bind;function zL(e,t){return Bbe.call(e,t)}var UL=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){ES(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){ES(r)}else ES(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){ES(n)}}},Iu=class extends Wm{constructor(t,n,r){super();let i;if(Ct(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&yc.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&zL(t.next,o),error:t.error&&zL(t.error,o),complete:t.complete&&zL(t.complete,o)}):i=t}this.destination=new UL(i)}};function ES(e){yc.useDeprecatedSynchronousErrorHandling?eW(e):CS(e)}function Ube(e){throw e}function BL(e,t){let{onStoppedNotification:n}=yc;n&&fg.setTimeout(()=>n(e,t))}var Vbe={closed:!0,next:e0,error:Ube,complete:e0};var gg=typeof Symbol=="function"&&Symbol.observable||"@@observable";function rs(e){return e}function VL(...e){return HL(e)}function HL(e){return e.length===0?rs:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var Nt=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=Zbe(n)?n:new Iu(n,r,i);return hg(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=tW(r),new r((i,o)=>{let s=new Iu({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[gg](){return this}pipe(...n){return HL(n)(this)}toPromise(n){return n=tW(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function tW(e){var t;return(t=e??yc.Promise)!==null&&t!==void 0?t:Promise}function Hbe(e){return e&&Ct(e.next)&&Ct(e.error)&&Ct(e.complete)}function Zbe(e){return e&&e instanceof Wm||Hbe(e)&&xS(e)}function ZL(e){return Ct(e?.lift)}function Wt(e){return t=>{if(ZL(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function qt(e,t,n,r,i){return new qL(e,t,n,r,i)}var qL=class extends Wm{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function _g(){return Wt((e,t)=>{let n=null;e._refCount++;let r=qt(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var yg=class extends Nt{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,ZL(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new fn;let n=this.getSubject();t.add(this.source.subscribe(qt(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=fn.EMPTY)}return t}refCount(){return _g()(this)}};var nW=mg(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=(()=>{class e extends Nt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new IS(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new nW}next(n){hg(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){hg(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){hg(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?FL:(this.currentObservers=null,o.push(n),new fn(()=>{this.currentObservers=null,qm(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Nt;return n.source=this,n}}return e.create=(t,n)=>new IS(t,n),e})(),IS=class extends ge{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:FL}};var er=class extends ge{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var t0={now(){return(t0.delegate||Date).now()},delegate:void 0};var SS=class extends ge{constructor(t=1/0,n=1/0,r=t0){super(),this._bufferSize=t,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,n)}next(t){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(t),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(t),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!t.closed;s+=r?1:2)t.next(o[s]);return this._checkFinalizedStatuses(t),n}_trimBuffer(){let{_bufferSize:t,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*t;if(t<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var kS=class extends fn{constructor(t,n){super()}schedule(t,n=0){return this}};var n0={setInterval(e,t,...n){let{delegate:r}=n0;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=n0;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var TS=class extends kS{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,r=0){return n0.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&n0.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r=!1,i;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,qm(r,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var vg=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}};vg.now=t0.now;var AS=class extends vg{constructor(t,n=vg.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}};var r0=new AS(TS),rW=r0;var eo=new Nt(e=>e.complete());function OS(e){return e&&Ct(e.schedule)}function GL(e){return e[e.length-1]}function MS(e){return Ct(GL(e))?e.pop():void 0}function dl(e){return OS(GL(e))?e.pop():void 0}function iW(e,t){return typeof GL(e)=="number"?e.pop():t}function sW(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(d){try{u(r.next(d))}catch(f){s(f)}}function c(d){try{u(r.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):i(d.value).then(a,c)}u((r=r.apply(e,t||[])).next())})}function oW(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Km(e){return this instanceof Km?(this.v=e,this):new Km(e)}function aW(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(h){return function(v){return Promise.resolve(v).then(h,f)}}function a(h,v){r[h]&&(i[h]=function(x){return new Promise(function(E,C){o.push([h,x,E,C])>1||c(h,x)})},v&&(i[h]=v(i[h])))}function c(h,v){try{u(r[h](v))}catch(x){g(o[0][3],x)}}function u(h){h.value instanceof Km?Promise.resolve(h.value.v).then(d,f):g(o[0][2],h)}function d(h){c("next",h)}function f(h){c("throw",h)}function g(h,v){h(v),o.shift(),o.length&&c(o[0][0],o[0][1])}}function cW(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof oW=="function"?oW(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var bg=e=>e&&typeof e.length=="number"&&typeof e!="function";function DS(e){return Ct(e?.then)}function PS(e){return Ct(e[gg])}function RS(e){return Symbol.asyncIterator&&Ct(e?.[Symbol.asyncIterator])}function NS(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function qbe(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var $S=qbe();function LS(e){return Ct(e?.[$S])}function FS(e){return aW(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield Km(n.read());if(i)return yield Km(void 0);yield yield Km(r)}}finally{n.releaseLock()}})}function jS(e){return Ct(e?.getReader)}function tr(e){if(e instanceof Nt)return e;if(e!=null){if(PS(e))return Gbe(e);if(bg(e))return Wbe(e);if(DS(e))return Kbe(e);if(RS(e))return lW(e);if(LS(e))return Jbe(e);if(jS(e))return Ybe(e)}throw NS(e)}function Gbe(e){return new Nt(t=>{let n=e[gg]();if(Ct(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Wbe(e){return new Nt(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function Kbe(e){return new Nt(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,CS)})}function Jbe(e){return new Nt(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function lW(e){return new Nt(t=>{Qbe(e,t).catch(n=>t.error(n))})}function Ybe(e){return lW(FS(e))}function Qbe(e,t){var n,r,i,o;return sW(this,void 0,void 0,function*(){try{for(n=cW(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function Ls(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function zS(e,t=0){return Wt((n,r)=>{n.subscribe(qt(r,i=>Ls(r,e,()=>r.next(i),t),()=>Ls(r,e,()=>r.complete(),t),i=>Ls(r,e,()=>r.error(i),t)))})}function BS(e,t=0){return Wt((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function uW(e,t){return tr(e).pipe(BS(t),zS(t))}function dW(e,t){return tr(e).pipe(BS(t),zS(t))}function pW(e,t){return new Nt(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function mW(e,t){return new Nt(n=>{let r;return Ls(n,t,()=>{r=e[$S](),Ls(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>Ct(r?.return)&&r.return()})}function US(e,t){if(!e)throw new Error("Iterable cannot be null");return new Nt(n=>{Ls(n,t,()=>{let r=e[Symbol.asyncIterator]();Ls(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function fW(e,t){return US(FS(e),t)}function hW(e,t){if(e!=null){if(PS(e))return uW(e,t);if(bg(e))return pW(e,t);if(DS(e))return dW(e,t);if(RS(e))return US(e,t);if(LS(e))return mW(e,t);if(jS(e))return fW(e,t)}throw NS(e)}function Zr(e,t){return t?hW(e,t):tr(e)}function Xe(...e){let t=dl(e);return Zr(e,t)}function Xd(e,t){let n=Ct(e)?e:()=>e,r=i=>i.error(n());return new Nt(t?i=>t.schedule(r,0,i):r)}function VS(e){return!!e&&(e instanceof Nt||Ct(e.lift)&&Ct(e.subscribe))}var Su=mg(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function gW(e){return e instanceof Date&&!isNaN(e)}function et(e,t){return Wt((n,r)=>{let i=0;n.subscribe(qt(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:Xbe}=Array;function e0e(e,t){return Xbe(t)?e(...t):e(t)}function wg(e){return et(t=>e0e(e,t))}var{isArray:t0e}=Array,{getPrototypeOf:n0e,prototype:r0e,keys:i0e}=Object;function HS(e){if(e.length===1){let t=e[0];if(t0e(t))return{args:t,keys:null};if(o0e(t)){let n=i0e(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function o0e(e){return e&&typeof e=="object"&&n0e(e)===r0e}function ZS(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function xg(...e){let t=dl(e),n=MS(e),{args:r,keys:i}=HS(e);if(r.length===0)return Zr([],t);let o=new Nt(s0e(r,t,i?s=>ZS(i,s):rs));return n?o.pipe(wg(n)):o}function s0e(e,t,n=rs){return r=>{_W(t,()=>{let{length:i}=e,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)_W(t,()=>{let u=Zr(e[c],t),d=!1;u.subscribe(qt(r,f=>{o[c]=f,d||(d=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function _W(e,t,n){e?Ls(n,e,t):t()}function yW(e,t,n,r,i,o,s,a){let c=[],u=0,d=0,f=!1,g=()=>{f&&!c.length&&!u&&t.complete()},h=x=>u<r?v(x):c.push(x),v=x=>{o&&t.next(x),u++;let E=!1;tr(n(x,d++)).subscribe(qt(t,C=>{i?.(C),o?h(C):t.next(C)},()=>{E=!0},void 0,()=>{if(E)try{for(u--;c.length&&u<r;){let C=c.shift();s?Ls(t,s,()=>v(C)):v(C)}g()}catch(C){t.error(C)}}))};return e.subscribe(qt(t,h,()=>{f=!0,g()})),()=>{a?.()}}function hi(e,t,n=1/0){return Ct(t)?hi((r,i)=>et((o,s)=>t(r,o,i,s))(tr(e(r,i))),n):(typeof t=="number"&&(n=t),Wt((r,i)=>yW(r,i,e,n)))}function qS(e=1/0){return hi(rs,e)}function vW(){return qS(1)}function ep(...e){return vW()(Zr(e,dl(e)))}function ku(e){return new Nt(t=>{tr(e()).subscribe(t)})}function i0(...e){let t=MS(e),{args:n,keys:r}=HS(e),i=new Nt(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let d=0;d<s;d++){let f=!1;tr(n[d]).subscribe(qt(o,g=>{f||(f=!0,u--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(u||o.next(r?ZS(r,a):a),o.complete())}))}});return t?i.pipe(wg(t)):i}var a0e=["addListener","removeListener"],c0e=["addEventListener","removeEventListener"],l0e=["on","off"];function o0(e,t,n,r){if(Ct(n)&&(r=n,n=void 0),r)return o0(e,t,n).pipe(wg(r));let[i,o]=p0e(e)?c0e.map(s=>a=>e[s](t,a,n)):u0e(e)?a0e.map(bW(e,t)):d0e(e)?l0e.map(bW(e,t)):[];if(!i&&bg(e))return hi(s=>o0(s,t,n))(tr(e));if(!i)throw new TypeError("Invalid event target");return new Nt(s=>{let a=(...c)=>s.next(1<c.length?c:c[0]);return i(a),()=>o(a)})}function bW(e,t){return n=>r=>e[n](t,r)}function u0e(e){return Ct(e.addListener)&&Ct(e.removeListener)}function d0e(e){return Ct(e.on)&&Ct(e.off)}function p0e(e){return Ct(e.addEventListener)&&Ct(e.removeEventListener)}function s0(e=0,t,n=rW){let r=-1;return t!=null&&(OS(t)?n=t:r=t),new Nt(i=>{let o=gW(e)?+e-n.now():e;o<0&&(o=0);let s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function is(...e){let t=dl(e),n=iW(e,1/0),r=e;return r.length?r.length===1?tr(r[0]):qS(n)(Zr(r,t)):eo}function Kt(e,t){return Wt((n,r)=>{let i=0;n.subscribe(qt(r,o=>e.call(t,o,i++)&&r.next(o)))})}function wW(e){return Wt((t,n)=>{let r=!1,i=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,r){r=!1;let u=i;i=null,n.next(u)}s&&n.complete()},c=()=>{o=null,s&&n.complete()};t.subscribe(qt(n,u=>{r=!0,i=u,o||tr(e(u)).subscribe(o=qt(n,a,c))},()=>{s=!0,(!r||!o||o.closed)&&n.complete()}))})}function Cg(e,t=r0){return wW(()=>s0(e,t))}function pl(e){return Wt((t,n)=>{let r=null,i=!1,o;r=t.subscribe(qt(n,void 0,void 0,s=>{o=tr(e(s,pl(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function xW(e,t,n,r,i){return(o,s)=>{let a=n,c=t,u=0;o.subscribe(qt(s,d=>{let f=u++;c=a?e(c,d,f):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function tp(e,t){return Ct(t)?hi(e,t,1):hi(e,1)}function Tu(e,t=r0){return Wt((n,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let u=o;o=null,r.next(u)}};function c(){let u=s+e,d=t.now();if(d<u){i=this.schedule(void 0,u-d),r.add(i);return}a()}n.subscribe(qt(r,u=>{o=u,s=t.now(),i||(i=t.schedule(c,e),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function np(e){return Wt((t,n)=>{let r=!1;t.subscribe(qt(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function Xr(e){return e<=0?()=>eo:Wt((t,n)=>{let r=0;t.subscribe(qt(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function Eg(e){return et(()=>e)}function Ig(e,t=rs){return e=e??m0e,Wt((n,r)=>{let i,o=!0;n.subscribe(qt(r,s=>{let a=t(s);(o||!e(i,a))&&(o=!1,i=a,r.next(s))}))})}function m0e(e,t){return e===t}function GS(e=f0e){return Wt((t,n)=>{let r=!1;t.subscribe(qt(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function f0e(){return new Su}function ml(e){return Wt((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function fl(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Kt((i,o)=>e(i,o,r)):rs,Xr(1),n?np(t):GS(()=>new Su))}function Sg(e){return e<=0?()=>eo:Wt((t,n)=>{let r=[];t.subscribe(qt(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function WL(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Kt((i,o)=>e(i,o,r)):rs,Sg(1),n?np(t):GS(()=>new Su))}function WS(){return Wt((e,t)=>{let n,r=!1;e.subscribe(qt(t,i=>{let o=n;n=i,r&&t.next([o,i]),r=!0}))})}function KL(e,t){return Wt(xW(e,t,arguments.length>=2,!0))}function a0(e={}){let{connector:t=()=>new ge,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return o=>{let s,a,c,u=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},h=()=>{g(),s=c=void 0,d=f=!1},v=()=>{let x=s;h(),x?.unsubscribe()};return Wt((x,E)=>{u++,!f&&!d&&g();let C=c=c??t();E.add(()=>{u--,u===0&&!f&&!d&&(a=JL(v,i))}),C.subscribe(E),!s&&u>0&&(s=new Iu({next:S=>C.next(S),error:S=>{f=!0,g(),a=JL(h,n,S),C.error(S)},complete:()=>{d=!0,g(),a=JL(h,r),C.complete()}}),tr(x).subscribe(s))})(o)}}function JL(e,t,...n){if(t===!0){e();return}if(t===!1)return;let r=new Iu({next:()=>{r.unsubscribe(),e()}});return tr(t(...n)).subscribe(r)}function kg(e,t,n){let r,i=!1;return e&&typeof e=="object"?{bufferSize:r=1/0,windowTime:t=1/0,refCount:i=!1,scheduler:n}=e:r=e??1/0,a0({connector:()=>new SS(r,t,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function c0(e){return Kt((t,n)=>e<=n)}function Ui(...e){let t=dl(e);return Wt((n,r)=>{(t?ep(e,n,t):ep(e,n)).subscribe(r)})}function oi(e,t){return Wt((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(qt(r,c=>{i?.unsubscribe();let u=0,d=o++;tr(e(c,d)).subscribe(i=qt(r,f=>r.next(t?t(c,f,d,u++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function sr(e){return Wt((t,n)=>{tr(e).subscribe(qt(n,()=>n.complete(),e0)),!n.closed&&t.subscribe(n)})}function qr(e,t,n){let r=Ct(e)||t||n?{next:e,error:t,complete:n}:e;return r?Wt((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(qt(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):rs}function CW(e){let t=Rt(null);try{return e()}finally{Rt(t)}}var EW=b(m({},Um),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function IW(e){if(e.dirty=!1,e.version>0&&!Hm(e))return;e.version++;let t=Yd(e);try{e.cleanup(),e.fn()}finally{Vm(e,t)}}var QS="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ye=class extends Error{code;constructor(t,n){super(hl(t,n)),this.code=t}};function h0e(e){return`NG0${Math.abs(e)}`}function hl(e,t){return`${h0e(e)}${t?": "+t:""}`}var gl=globalThis;function Kn(e){for(let t in e)if(e[t]===Kn)return t;throw Error("")}function TW(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Ou(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(Ou).join(", ")}]`;if(e==null)return""+e;let t=e.overriddenName||e.name;if(t)return`${t}`;let n=e.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function XS(e,t){return e?t?`${e} ${t}`:e:t||""}var g0e=Kn({__forward_ref__:Kn});function gi(e){return e.__forward_ref__=gi,e.toString=function(){return Ou(this())},e}function fo(e){return aF(e)?e():e}function aF(e){return typeof e=="function"&&e.hasOwnProperty(g0e)&&e.__forward_ref__===gi}function re(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function tt(e){return{providers:e.providers||[],imports:e.imports||[]}}function m0(e){return _0e(e,ek)}function cF(e){return m0(e)!==null}function _0e(e,t){return e.hasOwnProperty(t)&&e[t]||null}function y0e(e){let t=e?.[ek]??null;return t||null}function QL(e){return e&&e.hasOwnProperty(JS)?e[JS]:null}var ek=Kn({\u0275prov:Kn}),JS=Kn({\u0275inj:Kn}),X=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=re({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function lF(e){return e&&!!e.\u0275providers}var uF=Kn({\u0275cmp:Kn}),dF=Kn({\u0275dir:Kn}),pF=Kn({\u0275pipe:Kn}),mF=Kn({\u0275mod:Kn}),u0=Kn({\u0275fac:Kn}),ef=Kn({__NG_ELEMENT_ID__:Kn}),SW=Kn({__NG_ENV_ID__:Kn});function _l(e){return typeof e=="string"?e:e==null?"":String(e)}function AW(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():_l(e)}var OW=Kn({ngErrorCode:Kn}),v0e=Kn({ngErrorMessage:Kn}),b0e=Kn({ngTokenPath:Kn});function fF(e,t){return MW("",-200,t)}function tk(e,t){throw new ye(-201,!1)}function MW(e,t,n){let r=new ye(t,e);return r[OW]=t,r[v0e]=e,n&&(r[b0e]=n),r}function w0e(e){return e[OW]}var XL;function DW(){return XL}function os(e){let t=XL;return XL=e,t}function hF(e,t,n){let r=m0(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(t!==void 0)return t;tk(e,"Injector")}var x0e={},Jm=x0e,C0e="__NG_DI_FLAG__",eF=class{injector;constructor(t){this.injector=t}retrieve(t,n){let r=Ym(n)||0;try{return this.injector.get(t,r&8?null:Jm,r)}catch(i){if(dg(i))return i;throw i}}};function E0e(e,t=0){let n=pS();if(n===void 0)throw new ye(-203,!1);if(n===null)return hF(e,void 0,t);{let r=I0e(t),i=n.retrieve(e,r);if(dg(i)){if(r.optional)return null;throw i}return i}}function Be(e,t=0){return(DW()||E0e)(fo(e),t)}function k(e,t){return Be(e,Ym(t))}function Ym(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function I0e(e){return{optional:!!(e&8),host:!!(e&1),self:!!(e&2),skipSelf:!!(e&4)}}function tF(e){let t=[];for(let n=0;n<e.length;n++){let r=fo(e[n]);if(Array.isArray(r)){if(r.length===0)throw new ye(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=S0e(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}t.push(Be(i,o))}else t.push(Be(r))}return t}function S0e(e){return e[C0e]}function rp(e,t){let n=e.hasOwnProperty(u0);return n?e[u0]:null}function PW(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function RW(e){return e.flat(Number.POSITIVE_INFINITY)}function nk(e,t){e.forEach(n=>Array.isArray(n)?nk(n,t):t(n))}function gF(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function f0(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function NW(e,t){let n=[];for(let r=0;r<e;r++)n.push(t);return n}function $W(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}function rk(e,t,n){let r=Ag(e,t);return r>=0?e[r|1]=n:(r=~r,$W(e,r,t,n)),r}function ik(e,t){let n=Ag(e,t);if(n>=0)return e[n|1]}function Ag(e,t){return k0e(e,t,1)}function k0e(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=e[o<<n];if(t===s)return o<<n;s>t?i=o:r=o+1}return~(i<<n)}var op={},Do=[],Mu=new X(""),_F=new X("",-1),yF=new X(""),d0=class{get(t,n=Jm){if(n===Jm){let i=MW("",-201);throw i.name="\u0275NotFound",i}return n}};function vF(e){return e[mF]||null}function Du(e){return e[uF]||null}function bF(e){return e[dF]||null}function LW(e){return e[pF]||null}function sp(e){return{\u0275providers:e}}function FW(...e){return{\u0275providers:wF(!0,e),\u0275fromNgModule:!0}}function wF(e,...t){let n=[],r=new Set,i,o=s=>{n.push(s)};return nk(t,s=>{let a=s;YS(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&jW(i,o),n}function jW(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];xF(i,o=>{t(o,r)})}}function YS(e,t,n,r){if(e=fo(e),!e)return!1;let i=null,o=QL(e),s=!o&&Du(e);if(!o&&!s){let c=e.ngModule;if(o=QL(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=e}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)YS(u,t,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{nk(o.imports,d=>{YS(d,t,n,r)&&(u||=[],u.push(d))})}finally{}u!==void 0&&jW(u,t)}if(!a){let u=rp(i)||(()=>new i);t({provide:i,useFactory:u,deps:Do},i),t({provide:yF,useValue:i,multi:!0},i),t({provide:Mu,useValue:()=>Be(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=e;xF(c,d=>{t(d,u)})}}else return!1;return i!==e&&e.providers!==void 0}function xF(e,t){for(let n of e)lF(n)&&(n=n.\u0275providers),Array.isArray(n)?xF(n,t):t(n)}var T0e=Kn({provide:String,useValue:Kn});function zW(e){return e!==null&&typeof e=="object"&&T0e in e}function A0e(e){return!!(e&&e.useExisting)}function O0e(e){return!!(e&&e.useFactory)}function Qm(e){return typeof e=="function"}function BW(e){return!!e.useClass}var h0=new X(""),KS={},kW={},YL;function Og(){return YL===void 0&&(YL=new d0),YL}var Dr=class{},Xm=class extends Dr{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,rF(t,s=>this.processProvider(s)),this.records.set(_F,Tg(void 0,this)),i.has("environment")&&this.records.set(Dr,Tg(void 0,this));let o=this.records.get(h0);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(yF,Do,{self:!0}))}retrieve(t,n){let r=Ym(n)||0;try{return this.get(t,Jm,r)}catch(i){if(dg(i))return i;throw i}}destroy(){l0(this),this._destroyed=!0;let t=Rt(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Rt(t)}}onDestroy(t){return l0(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){l0(this);let n=ul(this),r=os(void 0),i;try{return t()}finally{ul(n),os(r)}}get(t,n=Jm,r){if(l0(this),t.hasOwnProperty(SW))return t[SW](this);let i=Ym(r),o,s=ul(this),a=os(void 0);try{if(!(i&4)){let u=this.records.get(t);if(u===void 0){let d=N0e(t)&&m0(t);d&&this.injectableDefInScope(d)?u=Tg(nF(t),KS):u=null,this.records.set(t,u)}if(u!=null)return this.hydrate(t,u,i)}let c=i&2?Og():this.parent;return n=i&8&&n===Jm?null:n,c.get(t,n)}catch(c){let u=w0e(c);throw u===-200||u===-201?new ye(u,null):c}finally{os(a),ul(s)}}resolveInjectorInitializers(){let t=Rt(null),n=ul(this),r=os(void 0),i;try{let o=this.get(Mu,Do,{self:!0});for(let s of o)s()}finally{ul(n),os(r),Rt(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(Ou(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=fo(t);let n=Qm(t)?t:fo(t&&t.provide),r=D0e(t);if(!Qm(t)&&t.multi===!0){let i=this.records.get(n);i||(i=Tg(void 0,KS,!0),i.factory=()=>tF(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n,r){let i=Rt(null);try{if(n.value===kW)throw fF(Ou(t));return n.value===KS&&(n.value=kW,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&R0e(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Rt(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=fo(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function nF(e){let t=m0(e),n=t!==null?t.factory:rp(e);if(n!==null)return n;if(e instanceof X)throw new ye(204,!1);if(e instanceof Function)return M0e(e);throw new ye(204,!1)}function M0e(e){if(e.length>0)throw new ye(204,!1);let n=y0e(e);return n!==null?()=>n.factory(e):()=>new e}function D0e(e){if(zW(e))return Tg(void 0,e.useValue);{let t=CF(e);return Tg(t,KS)}}function CF(e,t,n){let r;if(Qm(e)){let i=fo(e);return rp(i)||nF(i)}else if(zW(e))r=()=>fo(e.useValue);else if(O0e(e))r=()=>e.useFactory(...tF(e.deps||[]));else if(A0e(e))r=(i,o)=>Be(fo(e.useExisting),o!==void 0&&o&8?8:void 0);else{let i=fo(e&&(e.useClass||e.provide));if(P0e(e))r=()=>new i(...tF(e.deps));else return rp(i)||nF(i)}return r}function l0(e){if(e.destroyed)throw new ye(205,!1)}function Tg(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function P0e(e){return!!e.deps}function R0e(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function N0e(e){return typeof e=="function"||typeof e=="object"&&e.ngMetadataName==="InjectionToken"}function rF(e,t){for(let n of e)Array.isArray(n)?rF(n,t):n&&lF(n)?rF(n.\u0275providers,t):t(n)}function ho(e,t){let n;e instanceof Xm?(l0(e),n=e):n=new eF(e);let r,i=ul(n),o=os(void 0);try{return t()}finally{ul(i),os(o)}}function UW(){return DW()!==void 0||pS()!=null}var vc=0,vt=1,zt=2,Vi=3,ja=4,ss=5,tf=6,Mg=7,_i=8,Pu=9,yl=10,ar=11,Dg=12,EF=13,nf=14,as=15,ap=16,rf=17,vl=18,g0=19,IF=20,Au=21,ok=22,Ru=23,pa=24,of=25,sf=26,Pr=27,VW=1,SF=6,cp=7,_0=8,af=9,si=10;function bl(e){return Array.isArray(e)&&typeof e[VW]=="object"}function bc(e){return Array.isArray(e)&&e[VW]===!0}function kF(e){return(e.flags&4)!==0}function lp(e){return e.componentOffset>-1}function Pg(e){return(e.flags&1)===1}function wl(e){return!!e.template}function Rg(e){return(e[zt]&512)!==0}function cf(e){return(e[zt]&256)===256}var TF="svg",HW="math";function za(e){for(;Array.isArray(e);)e=e[vc];return e}function AF(e,t){return za(t[e])}function wc(e,t){return za(t[e.index])}function y0(e,t){return e.data[t]}function sk(e,t){return e[t]}function OF(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}function Ba(e,t){let n=t[e];return bl(n)?n:n[vc]}function ZW(e){return(e[zt]&4)===4}function ak(e){return(e[zt]&128)===128}function qW(e){return bc(e[Vi])}function ma(e,t){return t==null?null:e[t]}function MF(e){e[rf]=0}function DF(e){e[zt]&1024||(e[zt]|=1024,ak(e)&&up(e))}function GW(e,t){for(;e>0;)t=t[nf],e--;return t}function v0(e){return!!(e[zt]&9216||e[pa]?.dirty)}function ck(e){e[yl].changeDetectionScheduler?.notify(8),e[zt]&64&&(e[zt]|=1024),v0(e)&&up(e)}function up(e){e[yl].changeDetectionScheduler?.notify(0);let t=ip(e);for(;t!==null&&!(t[zt]&8192||(t[zt]|=8192,!ak(t)));)t=ip(t)}function PF(e,t){if(cf(e))throw new ye(911,!1);e[Au]===null&&(e[Au]=[]),e[Au].push(t)}function WW(e,t){if(e[Au]===null)return;let n=e[Au].indexOf(t);n!==-1&&e[Au].splice(n,1)}function ip(e){let t=e[Vi];return bc(t)?t[Vi]:t}function RF(e){return e[Mg]??=[]}function NF(e){return e.cleanup??=[]}function KW(e,t,n,r){let i=RF(t);i.push(n),e.firstCreatePass&&NF(e).push(r,i.length-1)}var on={lFrame:sK(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var iF=!1;function JW(){return on.lFrame.elementDepthCount}function YW(){on.lFrame.elementDepthCount++}function $F(){on.lFrame.elementDepthCount--}function lk(){return on.bindingsEnabled}function LF(){return on.skipHydrationRootTNode!==null}function FF(e){return on.skipHydrationRootTNode===e}function jF(){on.skipHydrationRootTNode=null}function bt(){return on.lFrame.lView}function kr(){return on.lFrame.tView}function Je(e){return on.lFrame.contextLView=e,e[_i]}function Ye(e){return on.lFrame.contextLView=null,e}function Ti(){let e=zF();for(;e!==null&&e.type===64;)e=e.parent;return e}function zF(){return on.lFrame.currentTNode}function QW(){let e=on.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Ng(e,t){let n=on.lFrame;n.currentTNode=e,n.isParent=t}function BF(){return on.lFrame.isParent}function UF(){on.lFrame.isParent=!1}function XW(){return on.lFrame.contextLView}function VF(){return iF}function $g(e){let t=iF;return iF=e,t}function b0(){let e=on.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function HF(){return on.lFrame.bindingIndex}function eK(e){return on.lFrame.bindingIndex=e}function dp(){return on.lFrame.bindingIndex++}function w0(e){let t=on.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function tK(){return on.lFrame.inI18n}function nK(e,t){let n=on.lFrame;n.bindingIndex=n.bindingRootIndex=e,uk(t)}function rK(){return on.lFrame.currentDirectiveIndex}function uk(e){on.lFrame.currentDirectiveIndex=e}function iK(e){let t=on.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function dk(){return on.lFrame.currentQueryIndex}function x0(e){on.lFrame.currentQueryIndex=e}function $0e(e){let t=e[vt];return t.type===2?t.declTNode:t.type===1?e[ss]:null}function ZF(e,t,n){if(n&4){let i=t,o=e;for(;i=i.parent,i===null&&!(n&1);)if(i=$0e(o),i===null||(o=o[nf],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=on.lFrame=oK();return r.currentTNode=t,r.lView=e,!0}function pk(e){let t=oK(),n=e[vt];on.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function oK(){let e=on.lFrame,t=e===null?null:e.child;return t===null?sK(e):t}function sK(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function aK(){let e=on.lFrame;return on.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var qF=aK;function mk(){let e=aK();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function cK(e){return(on.lFrame.contextLView=GW(e,on.lFrame.contextLView))[_i]}function xc(){return on.lFrame.selectedIndex}function pp(e){on.lFrame.selectedIndex=e}function C0(){let e=on.lFrame;return y0(e.tView,e.selectedIndex)}function Nu(){on.lFrame.currentNamespace=TF}function E0(){L0e()}function L0e(){on.lFrame.currentNamespace=null}function lK(){return on.lFrame.currentNamespace}var uK=!0;function fk(){return uK}function I0(e){uK=e}function oF(e,t=null,n=null,r){let i=GF(e,t,n,r);return i.resolveInjectorInitializers(),i}function GF(e,t=null,n=null,r,i=new Set){let o=[n||Do,FW(e)];return r=r||(typeof e=="object"?void 0:Ou(e)),new Xm(o,t||Og(),r||null,i)}var ft=class e{static THROW_IF_NOT_FOUND=Jm;static NULL=new d0;static create(t,n){if(Array.isArray(t))return oF({name:""},n,t,"");{let r=t.name??"";return oF({name:r},t.parent,t.providers,r)}}static \u0275prov=re({token:e,providedIn:"any",factory:()=>Be(_F)});static __NG_ELEMENT_ID__=-1},yt=new X(""),no=(()=>{class e{static __NG_ELEMENT_ID__=F0e;static __NG_ENV_ID__=n=>n}return e})(),p0=class extends no{_lView;constructor(t){super(),this._lView=t}get destroyed(){return cf(this._lView)}onDestroy(t){let n=this._lView;return PF(n,t),()=>WW(n,t)}};function F0e(){return new p0(bt())}var to=class{_console=console;handleError(t){this._console.error("ERROR",t)}},Fs=new X("",{providedIn:"root",factory:()=>{let e=k(Dr),t;return n=>{e.destroyed&&!t?setTimeout(()=>{throw n}):(t??=e.get(to),t.handleError(n))}}}),dK={provide:Mu,useValue:()=>void k(to),multi:!0};function mp(e){return typeof e=="function"&&e[ki]!==void 0}function Pn(e,t){let[n,r,i]=$L(e,t?.equal),o=n,s=o[ki];return o.set=r,o.update=i,o.asReadonly=hk.bind(o),o}function hk(){let e=this[ki];if(e.readonlyFn===void 0){let t=()=>this();t[ki]=e,e.readonlyFn=t}return e.readonlyFn}function WF(e){return mp(e)&&typeof e.set=="function"}var lf=(()=>{class e{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=j0e}return e})();function j0e(){return new lf(bt(),Ti())}var Fa=class{},Lg=new X("",{providedIn:"root",factory:()=>!1});var KF=new X(""),JF=new X(""),xl=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new er(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Nt(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=re({token:e,providedIn:"root",factory:()=>new e})}return e})(),uf=(()=>{class e{internalPendingTasks=k(xl);scheduler=k(Fa);errorHandler=k(Fs);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=re({token:e,providedIn:"root",factory:()=>new e})}return e})();function df(...e){}var S0=(()=>{class e{static \u0275prov=re({token:e,providedIn:"root",factory:()=>new sF})}return e})(),sF=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let n=t.zone,r=this.queues.get(n);r.has(t)&&(r.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||r.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[n,r]of this.queues)n===null?t||=this.flushQueue(r):t||=n.run(()=>this.flushQueue(r));t||(this.dirtyEffectCount=0)}}flushQueue(t){let n=!1;for(let r of t)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function $0(e){return{toString:e}.toString()}function Z0e(e){return typeof e=="function"}var Ik=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function ZK(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var br=(()=>{let e=()=>qK;return e.ngInherit=!0,e})();function qK(e){return e.type.prototype.ngOnChanges&&(e.setInput=G0e),q0e}function q0e(){let e=WK(this),t=e?.current;if(t){let n=e.previous;if(n===op)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function G0e(e,t,n,r,i){let o=this.declaredInputs[r],s=WK(e)||W0e(e,{previous:op,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new Ik(u&&u.currentValue,n,c===op),ZK(e,t,i,n)}var GK="__ngSimpleChanges__";function WK(e){return e[GK]||null}function W0e(e,t){return e[GK]=t}var pK=[];var nr=function(e,t=null,n){for(let r=0;r<pK.length;r++){let i=pK[r];i(e,t,n)}};function K0e(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=qK(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function KK(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),u&&((e.viewHooks??=[]).push(n,u),(e.viewCheckHooks??=[]).push(n,u)),d!=null&&(e.destroyHooks??=[]).push(n,d)}}function bk(e,t,n){JK(e,t,3,n)}function wk(e,t,n,r){(e[zt]&3)===n&&JK(e,t,n,r)}function YF(e,t){let n=e[zt];(n&3)===t&&(n&=16383,n+=1,e[zt]=n)}function JK(e,t,n,r){let i=r!==void 0?e[rf]&65535:0,o=r??-1,s=t.length-1,a=0;for(let c=i;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[rf]+=65536),(a<o||o==-1)&&(J0e(e,n,t,c),e[rf]=(e[rf]&4294901760)+c+2),c++}function mK(e,t){nr(4,e,t);let n=Rt(null);try{t.call(e)}finally{Rt(n),nr(5,e,t)}}function J0e(e,t,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=e[s];i?e[zt]>>14<e[rf]>>16&&(e[zt]&3)===t&&(e[zt]+=16384,mK(a,o)):mK(a,o)}var jg=-1,mf=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r,i){this.factory=t,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function Y0e(e){return(e.flags&8)!==0}function Q0e(e){return(e.flags&16)!==0}function X0e(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{let o=i,s=n[++r];ewe(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function YK(e){return e===3||e===4||e===6}function ewe(e){return e.charCodeAt(0)===64}function zg(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?fK(e,n,i,null,t[++r]):fK(e,n,i,null,null))}}return e}function fK(e,t,n,r,i){let o=0,s=e.length;if(t===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===n){i!==null&&(e[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),i!==null&&e.splice(o++,0,i)}function QK(e){return e!==jg}function Sk(e){return e&32767}function twe(e){return e>>16}function kk(e,t){let n=twe(e),r=t;for(;n>0;)r=r[nf],n--;return r}var cj=!0;function Tk(e){let t=cj;return cj=e,t}var nwe=256,XK=nwe-1,e7=5,rwe=0,Cl={};function iwe(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ef)&&(r=n[ef]),r==null&&(r=n[ef]=rwe++);let i=r&XK,o=1<<i;t.data[e+(i>>e7)]|=o}function Ak(e,t){let n=t7(e,t);if(n!==-1)return n;let r=t[vt];r.firstCreatePass&&(e.injectorIndex=t.length,QF(r.data,e),QF(t,null),QF(r.blueprint,null));let i=qj(e,t),o=e.injectorIndex;if(QK(i)){let s=Sk(i),a=kk(i,t),c=a[vt].data;for(let u=0;u<8;u++)t[o+u]=a[s+u]|c[s+u]}return t[o+8]=i,o}function QF(e,t){e.push(0,0,0,0,0,0,0,0,t)}function t7(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function qj(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=s7(i),r===null)return jg;if(n++,i=i[nf],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return jg}function lj(e,t,n){iwe(e,t,n)}function owe(e,t){if(t==="class")return e.classes;if(t==="style")return e.styles;let n=e.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(YK(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===t)return n[i+1];i=i+2}}}return null}function n7(e,t,n){if(n&8||e!==void 0)return e;tk(t,"NodeInjector")}function r7(e,t,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=e[Pu],o=os(void 0);try{return i?i.get(t,r,n&8):hF(t,r,n&8)}finally{os(o)}}return n7(r,t,n)}function i7(e,t,n,r=0,i){if(e!==null){if(t[zt]&2048&&!(r&2)){let s=lwe(e,t,n,r,Cl);if(s!==Cl)return s}let o=o7(e,t,n,r,Cl);if(o!==Cl)return o}return r7(t,n,r,i)}function o7(e,t,n,r,i){let o=awe(n);if(typeof o=="function"){if(!ZF(t,e,r))return r&1?n7(i,n,r):r7(t,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))tk(n);else return s}finally{qF()}}else if(typeof o=="number"){let s=null,a=t7(e,t),c=jg,u=r&1?t[as][ss]:null;for((a===-1||r&4)&&(c=a===-1?qj(e,t):t[a+8],c===jg||!gK(r,!1)?a=-1:(s=t[vt],a=Sk(c),t=kk(c,t)));a!==-1;){let d=t[vt];if(hK(o,a,d.data)){let f=swe(a,t,n,s,r,u);if(f!==Cl)return f}c=t[a+8],c!==jg&&gK(r,t[vt].data[a+8]===u)&&hK(o,a,t)?(s=d,a=Sk(c),t=kk(c,t)):a=-1}}return i}function swe(e,t,n,r,i,o){let s=t[vt],a=s.data[e+8],c=r==null?lp(a)&&cj:r!=s&&(a.type&3)!==0,u=i&1&&o===a,d=xk(a,s,n,c,u);return d!==null?A0(t,s,d,a,i):Cl}function xk(e,t,n,r,i){let o=e.providerIndexes,s=t.data,a=o&1048575,c=e.directiveStart,u=e.directiveEnd,d=o>>20,f=r?a:a+d,g=i?a+d:u;for(let h=f;h<g;h++){let v=s[h];if(h<c&&n===v||h>=c&&v.type===n)return h}if(i){let h=s[c];if(h&&wl(h)&&h.type===n)return c}return null}function A0(e,t,n,r,i){let o=e[n],s=t.data;if(o instanceof mf){let a=o;if(a.resolving){let h=AW(s[n]);throw fF(h)}let c=Tk(a.canSeeViewProviders);a.resolving=!0;let u=s[n].type||s[n],d,f=a.injectImpl?os(a.injectImpl):null,g=ZF(e,r,0);try{o=e[n]=a.factory(void 0,i,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&K0e(n,s[n],t)}finally{f!==null&&os(f),Tk(c),a.resolving=!1,qF()}}return o}function awe(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(ef)?e[ef]:void 0;return typeof t=="number"?t>=0?t&XK:cwe:t}function hK(e,t,n){let r=1<<e;return!!(n[t+(e>>e7)]&r)}function gK(e,t){return!(e&2)&&!(e&1&&t)}var pf=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return i7(this._tNode,this._lView,t,Ym(r),n)}};function cwe(){return new pf(Ti(),bt())}function Jn(e){return $0(()=>{let t=e.prototype.constructor,n=t[u0]||uj(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[u0]||uj(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function uj(e){return aF(e)?()=>{let t=uj(fo(e));return t&&t()}:rp(e)}function lwe(e,t,n,r,i){let o=e,s=t;for(;o!==null&&s!==null&&s[zt]&2048&&!Rg(s);){let a=o7(o,s,n,r|2,Cl);if(a!==Cl)return a;let c=o.parent;if(!c){let u=s[IF];if(u){let d=u.get(n,Cl,r);if(d!==Cl)return d}c=s7(s),s=s[nf]}o=c}return i}function s7(e){let t=e[vt],n=t.type;return n===2?t.declTNode:n===1?e[ss]:null}function Gj(e){return owe(Ti(),e)}function uwe(){return Zg(Ti(),bt())}function Zg(e,t){return new nt(wc(e,t))}var nt=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=uwe}return e})();function a7(e){return e instanceof nt?e.nativeElement:e}function dwe(){return this._results[Symbol.iterator]()}var Ua=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ge}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=RW(t);(this._changesDetected=!PW(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=dwe};function c7(e){return(e.flags&128)===128}var Wj=(function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e})(Wj||{}),l7=new Map,pwe=0;function mwe(){return pwe++}function fwe(e){l7.set(e[g0],e)}function dj(e){l7.delete(e[g0])}var _K="__ngContext__";function Bg(e,t){bl(t)?(e[_K]=t[g0],fwe(t)):e[_K]=t}function u7(e){return p7(e[Dg])}function d7(e){return p7(e[ja])}function p7(e){for(;e!==null&&!bc(e);)e=e[ja];return e}var pj;function Kj(e){pj=e}function m7(){if(pj!==void 0)return pj;if(typeof document<"u")return document;throw new ye(210,!1)}var qg=new X("",{providedIn:"root",factory:()=>hwe}),hwe="ng",Hk=new X(""),Fu=new X("",{providedIn:"platform",factory:()=>"unknown"});var L0=new X(""),Gg=new X("",{providedIn:"root",factory:()=>m7().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var gwe="h",_we="b";var f7="r";var h7="di";var g7=!1,_7=new X("",{providedIn:"root",factory:()=>g7});var ywe=(e,t,n,r)=>{};function vwe(e,t,n,r){ywe(e,t,n,r)}function Zk(e){return(e.flags&32)===32}var bwe=()=>null;function y7(e,t,n=!1){return bwe(e,t,n)}function v7(e,t){let n=e.contentQueries;if(n!==null){let r=Rt(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=e.data[s];x0(o),a.contentQueries(2,t[s],s)}}}finally{Rt(r)}}}function mj(e,t,n){x0(0);let r=Rt(null);try{t(e,n)}finally{Rt(r)}}function Jj(e,t,n){if(kF(t)){let r=Rt(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=e.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{Rt(r)}}}var $u=(function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e})($u||{}),gk;function wwe(){if(gk===void 0&&(gk=null,gl.trustedTypes))try{gk=gl.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return gk}function qk(e){return wwe()?.createHTML(e)||e}var Lu=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${QS})`}},fj=class extends Lu{getTypeName(){return"HTML"}},hj=class extends Lu{getTypeName(){return"Style"}},gj=class extends Lu{getTypeName(){return"Script"}},_j=class extends Lu{getTypeName(){return"URL"}},yj=class extends Lu{getTypeName(){return"ResourceURL"}};function Sl(e){return e instanceof Lu?e.changingThisBreaksApplicationSecurity:e}function hp(e,t){let n=b7(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${QS})`)}return n===t}function b7(e){return e instanceof Lu&&e.getTypeName()||null}function Yj(e){return new fj(e)}function Qj(e){return new hj(e)}function Xj(e){return new gj(e)}function e2(e){return new _j(e)}function t2(e){return new yj(e)}function xwe(e){let t=new bj(e);return Cwe()?new vj(t):t}var vj=class{inertDocumentHelper;constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let n=new window.DOMParser().parseFromString(qk(t),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(t):(n.firstChild?.remove(),n)}catch{return null}}},bj=class{defaultDoc;inertDocument;constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let n=this.inertDocument.createElement("template");return n.innerHTML=qk(t),n}};function Cwe(){try{return!!new window.DOMParser().parseFromString(qk(""),"text/html")}catch{return!1}}var Ewe=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function F0(e){return e=String(e),e.match(Ewe)?e:"unsafe:"+e}function ju(e){let t={};for(let n of e.split(","))t[n]=!0;return t}function j0(...e){let t={};for(let n of e)for(let r in n)n.hasOwnProperty(r)&&(t[r]=!0);return t}var w7=ju("area,br,col,hr,img,wbr"),x7=ju("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),C7=ju("rp,rt"),Iwe=j0(C7,x7),Swe=j0(x7,ju("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),kwe=j0(C7,ju("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),yK=j0(w7,Swe,kwe,Iwe),E7=ju("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Twe=ju("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Awe=ju("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),Owe=j0(E7,Twe,Awe),Mwe=ju("script,style,template"),wj=class{sanitizedSomething=!1;buf=[];sanitizeChildren(t){let n=t.firstChild,r=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){i.push(n),n=Rwe(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let o=Pwe(n);if(o){n=o;break}n=i.pop()}}return this.buf.join("")}startElement(t){let n=vK(t).toLowerCase();if(!yK.hasOwnProperty(n))return this.sanitizedSomething=!0,!Mwe.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=t.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!Owe.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;E7[a]&&(c=F0(c)),this.buf.push(" ",s,'="',bK(c),'"')}return this.buf.push(">"),!0}endElement(t){let n=vK(t).toLowerCase();yK.hasOwnProperty(n)&&!w7.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(bK(t))}};function Dwe(e,t){return(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function Pwe(e){let t=e.nextSibling;if(t&&e!==t.previousSibling)throw I7(t);return t}function Rwe(e){let t=e.firstChild;if(t&&Dwe(e,t))throw I7(t);return t}function vK(e){let t=e.nodeName;return typeof t=="string"?t:"FORM"}function I7(e){return new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`)}var Nwe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$we=/([^\#-~ |!])/g;function bK(e){return e.replace(/&/g,"&amp;").replace(Nwe,function(t){let n=t.charCodeAt(0),r=t.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace($we,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var _k;function n2(e,t){let n=null;try{_k=_k||xwe(e);let r=t?String(t):"";n=_k.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=_k.getInertBodyElement(r)}while(r!==o);let a=new wj().sanitizeChildren(wK(n)||n);return qk(a)}finally{if(n){let r=wK(n)||n;for(;r.firstChild;)r.firstChild.remove()}}}function wK(e){return"content"in e&&Lwe(e)?e.content:null}function Lwe(e){return e.nodeType===Node.ELEMENT_NODE&&e.nodeName==="TEMPLATE"}var Hi=(function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e})(Hi||{});function r2(e){let t=Fwe();return t?t.sanitize(Hi.URL,e)||"":hp(e,"URL")?Sl(e):F0(_l(e))}function Fwe(){let e=bt();return e&&e[yl].sanitizer}var jwe=/^>|^->|<!--|-->|--!>|<!-$/g,zwe=/(<|>)/g,Bwe="\u200B$1\u200B";function Uwe(e){return e.replace(jwe,t=>t.replace(zwe,Bwe))}function i2(e){return e.ownerDocument.defaultView}function S7(e){return e instanceof Function?e():e}function Vwe(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}var k7="ng-template";function Hwe(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&Vwe(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(o2(e))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function o2(e){return e.type===4&&e.value!==k7}function Zwe(e,t,n){let r=e.type===4&&!n?k7:e.value;return t===r}function qwe(e,t,n){let r=4,i=e.attrs,o=i!==null?Kwe(i):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!Cc(r)&&!Cc(c))return!1;if(s&&Cc(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!Zwe(e,c,n)||c===""&&t.length===1){if(Cc(r))return!1;s=!0}}else if(r&8){if(i===null||!Hwe(e,i,c,n)){if(Cc(r))return!1;s=!0}}else{let u=t[++a],d=Gwe(c,i,o2(e),n);if(d===-1){if(Cc(r))return!1;s=!0;continue}if(u!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&u!==f){if(Cc(r))return!1;s=!0}}}}return Cc(r)||s}function Cc(e){return(e&1)===0}function Gwe(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let s=t[i];if(s===e)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Jwe(t,e)}function T7(e,t,n=!1){for(let r=0;r<t.length;r++)if(qwe(e,t[r],n))return!0;return!1}function Wwe(e){let t=e.attrs;if(t!=null){let n=t.indexOf(5);if((n&1)===0)return t[n+1]}return null}function Kwe(e){for(let t=0;t<e.length;t++){let n=e[t];if(YK(n))return t}return e.length}function Jwe(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function Ywe(e,t){e:for(let n=0;n<t.length;n++){let r=t[n];if(e.length===r.length){for(let i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function xK(e,t){return e?":not("+t.trim()+")":t}function Qwe(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Cc(s)&&(t+=xK(o,i),i=""),r=s,o=o||!Cc(r);n++}return i!==""&&(t+=xK(o,i)),t}function Xwe(e){return e.map(Qwe).join(",")}function exe(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!Cc(i))break;i=o}r++}return n.length&&t.push(1,...n),t}var Ro={};function txe(e,t){return e.createText(t)}function nxe(e,t,n){e.setValue(t,n)}function rxe(e,t){return e.createComment(Uwe(t))}function A7(e,t,n){return e.createElement(t,n)}function Ok(e,t,n,r,i){e.insertBefore(t,n,r,i)}function O7(e,t,n){e.appendChild(t,n)}function CK(e,t,n,r,i){r!==null?Ok(e,t,n,r,i):O7(e,t,n)}function M7(e,t,n,r){e.removeChild(null,t,n,r)}function ixe(e,t,n){e.setAttribute(t,"style",n)}function oxe(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function D7(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&X0e(e,t,r),i!==null&&oxe(e,t,i),o!==null&&ixe(e,t,o)}function s2(e,t,n,r,i,o,s,a,c,u,d){let f=Pr+r,g=f+i,h=sxe(f,g),v=typeof u=="function"?u():u;return h[vt]={type:e,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:v,incompleteFirstPass:!1,ssrId:d}}function sxe(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:Ro);return n}function axe(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=s2(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function a2(e,t,n,r,i,o,s,a,c,u,d){let f=t.blueprint.slice();return f[vc]=i,f[zt]=r|4|128|8|64|1024,(u!==null||e&&e[zt]&2048)&&(f[zt]|=2048),MF(f),f[Vi]=f[nf]=e,f[_i]=n,f[yl]=s||e&&e[yl],f[ar]=a||e&&e[ar],f[Pu]=c||e&&e[Pu]||null,f[ss]=o,f[g0]=mwe(),f[tf]=d,f[IF]=u,f[as]=t.type==2?e[as]:f,f}function cxe(e,t,n){let r=wc(t,e),i=axe(n),o=e[yl].rendererFactory,s=c2(e,a2(e,i,null,P7(n),r,t,null,o.createRenderer(r,n),null,null,null));return e[t.index]=s}function P7(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function R7(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function c2(e,t){return e[Dg]?e[EF][ja]=t:e[Dg]=t,e[EF]=t,t}function R(e=1){N7(kr(),bt(),xc()+e,!1)}function N7(e,t,n,r){if(!r)if((t[zt]&3)===3){let o=e.preOrderCheckHooks;o!==null&&bk(t,o,n)}else{let o=e.preOrderHooks;o!==null&&wk(t,o,0,n)}pp(n)}var Gk=(function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e})(Gk||{});function xj(e,t,n,r){let i=Rt(null);try{let[o,s,a]=e.inputs[n],c=null;(s&Gk.SignalBased)!==0&&(c=t[o][ki]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(t,r)),e.setInput!==null?e.setInput(t,c,r,n,o):ZK(t,c,o,r)}finally{Rt(i)}}var El=(function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e})(El||{}),lxe;function l2(e,t){return lxe(e,t)}var ff=new Set,Wk=(function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e})(Wk||{}),gp=new X(""),EK=new Set;function zu(e){EK.has(e)||(EK.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var $7=!1,Cj=class extends ge{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,UW()&&(this.destroyRef=k(no,{optional:!0})??void 0,this.pendingTasks=k(xl,{optional:!0})??void 0)}emit(t){let n=Rt(null);try{super.next(t)}finally{Rt(n)}}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof fn&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ue=Cj;function L7(e){let t,n;function r(){e=df;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function IK(e){return queueMicrotask(()=>e()),()=>{e=df}}var u2="isAngularZone",Mk=u2+"_ID",uxe=0,De=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ue(!1);onMicrotaskEmpty=new Ue(!1);onStable=new Ue(!1);onError=new Ue(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=$7}=t;if(typeof Zone>"u")throw new ye(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,mxe(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(u2)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new ye(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new ye(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,dxe,df,df);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},dxe={};function d2(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function pxe(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){L7(()=>{e.callbackScheduled=!1,Ej(e),e.isCheckStableRunning=!0,d2(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),Ej(e)}function mxe(e){let t=()=>{pxe(e)},n=uxe++;e._inner=e._inner.fork({name:"angular",properties:{[u2]:!0,[Mk]:n,[Mk+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(fxe(c))return r.invokeTask(o,s,a,c);try{return SK(e),r.invokeTask(o,s,a,c)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),kK(e)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return SK(e),r.invoke(o,s,a,c,u)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!hxe(c)&&t(),kK(e)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,Ej(e),d2(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function Ej(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function SK(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function kK(e){e._nesting--,d2(e)}var Dk=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ue;onMicrotaskEmpty=new Ue;onStable=new Ue;onError=new Ue;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function fxe(e){return F7(e,"__ignore_ng_zone__")}function hxe(e){return F7(e,"__scheduler_tick__")}function F7(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Kk=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=re({token:e,providedIn:"root",factory:()=>new e})}return e})(),p2=[0,1,2,3],m2=(()=>{class e{ngZone=k(De);scheduler=k(Fa);errorHandler=k(to,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){k(gp,{optional:!0})}execute(){let n=this.sequences.size>0;n&&nr(16),this.executing=!0;for(let r of p2)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&nr(17)}register(n){let{view:r}=n;r!==void 0?((r[of]??=[]).push(n),up(r),r[zt]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Wk.AFTER_NEXT_RENDER,n):n()}static \u0275prov=re({token:e,providedIn:"root",factory:()=>new e})}return e})(),O0=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,n,r,i,o,s=null){this.impl=t,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[of];t&&(this.view[of]=t.filter(n=>n!==this))}};function Oi(e,t){let n=t?.injector??k(ft);return zu("NgAfterNextRender"),_xe(e,n,t,!0)}function gxe(e){return e instanceof Function?[void 0,void 0,e,void 0]:[e.earlyRead,e.write,e.mixedReadWrite,e.read]}function _xe(e,t,n,r){let i=t.get(Kk);i.impl??=t.get(m2);let o=t.get(gp,null,{optional:!0}),s=n?.manualCleanup!==!0?t.get(no):null,a=t.get(lf,null,{optional:!0}),c=new O0(i.impl,gxe(e),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var j7=new X("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function z7(e,t,n){let r=e.get(j7);if(Array.isArray(t))for(let i of t)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(t),n?.detachedLeaveAnimationFns?.push(t);r.scheduler&&r.scheduler(e)}function yxe(e,t){let n=e.get(j7);if(t.detachedLeaveAnimationFns){for(let r of t.detachedLeaveAnimationFns)n.queue.delete(r);t.detachedLeaveAnimationFns=void 0}}function vxe(e,t){for(let[n,r]of t)z7(e,r.animateFns)}function TK(e,t,n,r){let i=e?.[sf]?.enter;t!==null&&i&&i.has(n.index)&&vxe(r,i)}function Fg(e,t,n,r,i,o,s,a){if(i!=null){let c,u=!1;bc(i)?c=i:bl(i)&&(u=!0,i=i[vc]);let d=za(i);e===0&&r!==null?(TK(a,r,o,n),s==null?O7(t,r,d):Ok(t,r,d,s||null,!0)):e===1&&r!==null?(TK(a,r,o,n),Ok(t,r,d,s||null,!0)):e===2?AK(a,o,n,f=>{M7(t,d,u,f)}):e===3&&AK(a,o,n,()=>{t.destroyNode(d)}),c!=null&&Oxe(t,e,n,c,o,r,s)}}function bxe(e,t){B7(e,t),t[vc]=null,t[ss]=null}function wxe(e,t,n,r,i,o){r[vc]=i,r[ss]=t,Yk(e,r,n,1,i,o)}function B7(e,t){t[yl].changeDetectionScheduler?.notify(9),Yk(e,t,t[ar],2,null,null)}function xxe(e){let t=e[Dg];if(!t)return XF(e[vt],e);for(;t;){let n=null;if(bl(t))n=t[Dg];else{let r=t[si];r&&(n=r)}if(!n){for(;t&&!t[ja]&&t!==e;)bl(t)&&XF(t[vt],t),t=t[Vi];t===null&&(t=e),bl(t)&&XF(t[vt],t),n=t&&t[ja]}t=n}}function f2(e,t){let n=e[af],r=n.indexOf(t);n.splice(r,1)}function Jk(e,t){if(cf(t))return;let n=t[ar];n.destroyNode&&Yk(e,t,n,3,null,null),xxe(t)}function XF(e,t){if(cf(t))return;let n=Rt(null);try{t[zt]&=-129,t[zt]|=256,t[pa]&&Qd(t[pa]),Ixe(e,t),Exe(e,t),t[vt].type===1&&t[ar].destroy();let r=t[ap];if(r!==null&&bc(t[Vi])){r!==t[Vi]&&f2(r,t);let i=t[vl];i!==null&&i.detachView(e)}dj(t)}finally{Rt(n)}}function AK(e,t,n,r){let i=e?.[sf];if(i==null||i.leave==null||!i.leave.has(t.index))return r(!1);e&&ff.add(e),z7(n,()=>{if(i.leave&&i.leave.has(t.index)){let s=i.leave.get(t.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let u=s.animateFns[c],{promise:d}=u();a.push(d)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),Cxe(e,r)}else e&&ff.delete(e),r(!1)},i)}function Cxe(e,t){let n=e[sf]?.running;if(n){n.then(()=>{e[sf].running=void 0,ff.delete(e),t(!0)});return}t(!1)}function Exe(e,t){let n=e.cleanup,r=t[Mg];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(t[Mg]=null);let i=t[Au];if(i!==null){t[Au]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=t[Ru];if(o!==null){t[Ru]=null;for(let s of o)s.destroy()}}function Ixe(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof mf)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];nr(4,a,c);try{c.call(a)}finally{nr(5,a,c)}}else{nr(4,i,o);try{o.call(i)}finally{nr(5,i,o)}}}}}function U7(e,t,n){return Sxe(e,t.parent,n)}function Sxe(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[vc];if(lp(r)){let{encapsulation:i}=e.data[r.directiveStart+r.componentOffset];if(i===$u.None||i===$u.Emulated)return null}return wc(r,n)}function V7(e,t,n){return Txe(e,t,n)}function kxe(e,t,n){return e.type&40?wc(e,n):null}var Txe=kxe,OK;function h2(e,t,n,r){let i=U7(e,r,t),o=t[ar],s=r.parent||t[ss],a=V7(s,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)CK(o,i,n[c],a,!1);else CK(o,i,n,a,!1);OK!==void 0&&OK(o,r,t,n,i)}function k0(e,t){if(t!==null){let n=t.type;if(n&3)return wc(t,e);if(n&4)return Ij(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return k0(e,r);{let i=e[t.index];return bc(i)?Ij(-1,i):za(i)}}else{if(n&128)return k0(e,t.next);if(n&32)return l2(t,e)()||za(e[t.index]);{let r=H7(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=ip(e[as]);return k0(i,r)}else return k0(e,t.next)}}}return null}function H7(e,t){if(t!==null){let r=e[as][ss],i=t.projection;return r.projection[i]}return null}function Ij(e,t){let n=si+e+1;if(n<t.length){let r=t[n],i=r[vt].firstChild;if(i!==null)return k0(r,i)}return t[cp]}function g2(e,t,n,r,i,o,s){for(;n!=null;){let a=r[Pu];if(n.type===128){n=n.next;continue}let c=r[n.index],u=n.type;if(s&&t===0&&(c&&Bg(za(c),r),n.flags|=2),!Zk(n))if(u&8)g2(e,t,n.child,r,i,o,!1),Fg(t,e,a,i,c,n,o,r);else if(u&32){let d=l2(n,r),f;for(;f=d();)Fg(t,e,a,i,f,n,o,r);Fg(t,e,a,i,c,n,o,r)}else u&16?Z7(e,t,r,n,i,o):Fg(t,e,a,i,c,n,o,r);n=s?n.projectionNext:n.next}}function Yk(e,t,n,r,i,o){g2(n,r,e.firstChild,t,i,o,!1)}function Axe(e,t,n){let r=t[ar],i=U7(e,n,t),o=n.parent||t[ss],s=V7(o,n,t);Z7(r,0,t,n,i,s)}function Z7(e,t,n,r,i,o){let s=n[as],c=s[ss].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];Fg(t,e,n[Pu],i,d,r,o,n)}else{let u=c,d=s[Vi];c7(r)&&(u.flags|=128),g2(e,t,u,d,i,o,!0)}}function Oxe(e,t,n,r,i,o,s){let a=r[cp],c=za(r);a!==c&&Fg(t,e,n,o,a,i,s);for(let u=si;u<r.length;u++){let d=r[u];Yk(d[vt],d,e,t,o,a)}}function Mxe(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:El.DashCase;i==null?e.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=El.Important),e.setStyle(n,r,i,o))}}function q7(e,t,n,r,i){let o=xc(),s=r&2;try{pp(-1),s&&t.length>Pr&&N7(e,t,Pr,!1),nr(s?2:0,i,n),n(r,i)}finally{pp(o),nr(s?3:1,i,n)}}function Qk(e,t,n){Lxe(e,t,n),(n.flags&64)===64&&Fxe(e,t,n)}function z0(e,t,n=wc){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(t,e):e[s];e[i++]=a}}}function Dxe(e,t,n,r){let o=r.get(_7,g7)||n===$u.ShadowDom,s=e.selectRootElement(t,o);return Pxe(s),s}function Pxe(e){Rxe(e)}var Rxe=()=>null;function Nxe(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function G7(e,t,n,r,i,o){let s=t[vt];if(b2(e,s,t,n,r)){lp(e)&&$xe(t,e.index);return}e.type&3&&(n=Nxe(n)),W7(e,t,n,r,i,o)}function W7(e,t,n,r,i,o){if(e.type&3){let s=wc(e,t);r=o!=null?o(r,e.value||"",n):r,i.setProperty(s,n,r)}else e.type&12}function $xe(e,t){let n=Ba(t,e);n[zt]&16||(n[zt]|=64)}function Lxe(e,t,n){let r=n.directiveStart,i=n.directiveEnd;lp(n)&&cxe(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||Ak(n,t);let o=n.initialInputs;for(let s=r;s<i;s++){let a=e.data[s],c=A0(t,e,s,n);if(Bg(c,t),o!==null&&Uxe(t,s-r,c,a,n,o),wl(a)){let u=Ba(n.index,t);u[_i]=A0(t,e,s,n)}}}function Fxe(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=rK();try{pp(o);for(let a=r;a<i;a++){let c=e.data[a],u=t[a];uk(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&jxe(c,u)}}finally{pp(-1),uk(s)}}function jxe(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function _2(e,t){let n=e.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];T7(t,o.selectors,!1)&&(r??=[],wl(o)?r.unshift(o):r.push(o))}return r}function zxe(e,t,n,r,i,o){let s=wc(e,t);Bxe(t[ar],s,o,e.value,n,r,i)}function Bxe(e,t,n,r,i,o,s){if(o==null)e.removeAttribute(t,i,n);else{let a=s==null?_l(o):s(o,r||"",i);e.setAttribute(t,i,a,n)}}function Uxe(e,t,n,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],u=s[a+1];xj(r,n,c,u)}}function y2(e,t,n,r,i){let o=Pr+n,s=t[vt],a=i(s,t,e,r,n);t[o]=a,Ng(e,!0);let c=e.type===2;return c?(D7(t[ar],a,e),(JW()===0||Pg(e))&&Bg(a,t),YW()):Bg(a,t),fk()&&(!c||!Zk(e))&&h2(s,t,a,e),e}function v2(e){let t=e;return BF()?UF():(t=t.parent,Ng(t,!1)),t}function Vxe(e,t){let n=e[Pu];if(!n)return;let r;try{r=n.get(Fs,null)}catch{r=null}r?.(t)}function b2(e,t,n,r,i){let o=e.inputs?.[r],s=e.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let u=s[c],d=s[c+1],f=t.data[u];xj(f,n[u],d,i),a=!0}if(o)for(let c of o){let u=n[c],d=t.data[c];xj(d,u,r,i),a=!0}return a}function Hxe(e,t){let n=Ba(t,e),r=n[vt];Zxe(r,n);let i=n[vc];i!==null&&n[tf]===null&&(n[tf]=y7(i,n[Pu])),nr(18),w2(r,n,n[_i]),nr(19,n[_i])}function Zxe(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function w2(e,t,n){pk(t);try{let r=e.viewQuery;r!==null&&mj(1,r,n);let i=e.template;i!==null&&q7(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[vl]?.finishViewCreation(e),e.staticContentQueries&&v7(e,t),e.staticViewQueries&&mj(2,e.viewQuery,n);let o=e.components;o!==null&&qxe(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[zt]&=-5,mk()}}function qxe(e,t){for(let n=0;n<t.length;n++)Hxe(e,t[n])}function B0(e,t,n,r){let i=Rt(null);try{let o=t.tView,a=e[zt]&4096?4096:16,c=a2(e,o,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=e[t.index];c[ap]=u;let d=e[vl];return d!==null&&(c[vl]=d.createEmbeddedView(o)),w2(o,c,n),c}finally{Rt(i)}}function Ug(e,t){return!t||t.firstChild===null||c7(e)}function M0(e,t,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=t[n.index];o!==null&&r.push(za(o)),bc(o)&&K7(o,r);let s=n.type;if(s&8)M0(e,t,n.child,r);else if(s&32){let a=l2(n,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=H7(t,n);if(Array.isArray(a))r.push(...a);else{let c=ip(t[as]);M0(c[vt],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function K7(e,t){for(let n=si;n<e.length;n++){let r=e[n],i=r[vt].firstChild;i!==null&&M0(r[vt],r,i,t)}e[cp]!==e[vc]&&t.push(e[cp])}function J7(e){if(e[of]!==null){for(let t of e[of])t.impl.addSequence(t);e[of].length=0}}var Y7=[];function Gxe(e){return e[pa]??Wxe(e)}function Wxe(e){let t=Y7.pop()??Object.create(Jxe);return t.lView=e,t}function Kxe(e){e.lView[pa]!==e&&(e.lView=null,Y7.push(e))}var Jxe=b(m({},Um),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{up(e.lView)},consumerOnSignalRead(){this.lView[pa]=this}});function Yxe(e){let t=e[pa]??Object.create(Qxe);return t.lView=e,t}var Qxe=b(m({},Um),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=ip(e.lView);for(;t&&!Q7(t[vt]);)t=ip(t);t&&DF(t)},consumerOnSignalRead(){this.lView[pa]=this}});function Q7(e){return e.type!==2}function X7(e){if(e[Ru]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[Ru])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[zt]&8192)}}var Xxe=100;function eJ(e,t=0){let r=e[yl].rendererFactory,i=!1;i||r.begin?.();try{eCe(e,t)}finally{i||r.end?.()}}function eCe(e,t){let n=VF();try{$g(!0),Sj(e,t);let r=0;for(;v0(e);){if(r===Xxe)throw new ye(103,!1);r++,Sj(e,1)}}finally{$g(n)}}function tCe(e,t,n,r){if(cf(t))return;let i=t[zt],o=!1,s=!1;pk(t);let a=!0,c=null,u=null;o||(Q7(e)?(u=Gxe(t),c=Yd(u)):_S()===null?(a=!1,u=Yxe(t),c=Yd(u)):t[pa]&&(Qd(t[pa]),t[pa]=null));try{MF(t),eK(e.bindingStartIndex),n!==null&&q7(e,t,n,2,r);let d=(i&3)===3;if(!o)if(d){let h=e.preOrderCheckHooks;h!==null&&bk(t,h,null)}else{let h=e.preOrderHooks;h!==null&&wk(t,h,0,null),YF(t,0)}if(s||nCe(t),X7(t),tJ(t,0),e.contentQueries!==null&&v7(e,t),!o)if(d){let h=e.contentCheckHooks;h!==null&&bk(t,h)}else{let h=e.contentHooks;h!==null&&wk(t,h,1),YF(t,1)}iCe(e,t);let f=e.components;f!==null&&rJ(t,f,0);let g=e.viewQuery;if(g!==null&&mj(2,g,r),!o)if(d){let h=e.viewCheckHooks;h!==null&&bk(t,h)}else{let h=e.viewHooks;h!==null&&wk(t,h,2),YF(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[ok]){for(let h of t[ok])h();t[ok]=null}o||(J7(t),t[zt]&=-73)}catch(d){throw o||up(t),d}finally{u!==null&&(Vm(u,c),a&&Kxe(u)),mk()}}function tJ(e,t){for(let n=u7(e);n!==null;n=d7(n))for(let r=si;r<n.length;r++){let i=n[r];nJ(i,t)}}function nCe(e){for(let t=u7(e);t!==null;t=d7(t)){if(!(t[zt]&2))continue;let n=t[af];for(let r=0;r<n.length;r++){let i=n[r];DF(i)}}}function rCe(e,t,n){nr(18);let r=Ba(t,e);nJ(r,n),nr(19,r[_i])}function nJ(e,t){ak(e)&&Sj(e,t)}function Sj(e,t){let r=e[vt],i=e[zt],o=e[pa],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&Hm(o)),s||=!1,o&&(o.dirty=!1),e[zt]&=-9217,s)tCe(r,e,r.template,e[_i]);else if(i&8192){let a=Rt(null);try{X7(e),tJ(e,1);let c=r.components;c!==null&&rJ(e,c,1),J7(e)}finally{Rt(a)}}}function rJ(e,t,n){for(let r=0;r<t.length;r++)rCe(e,t[r],n)}function iCe(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)pp(~i);else{let o=i,s=n[++r],a=n[++r];nK(s,o);let c=t[o];nr(24,c),a(2,c),nr(25,c)}}}finally{pp(-1)}}function x2(e,t){let n=VF()?64:1088;for(e[yl].changeDetectionScheduler?.notify(t);e;){e[zt]|=n;let r=ip(e);if(Rg(e)&&!r)return e;e=r}return null}function iJ(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function oJ(e,t){let n=si+t;if(n<e.length)return e[n]}function U0(e,t,n,r=!0){let i=t[vt];if(oCe(i,t,e,n),r){let s=Ij(n,e),a=t[ar],c=a.parentNode(e[cp]);c!==null&&wxe(i,e[ss],a,t,c,s)}let o=t[tf];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function sJ(e,t){let n=D0(e,t);return n!==void 0&&Jk(n[vt],n),n}function D0(e,t){if(e.length<=si)return;let n=si+t,r=e[n];if(r){let i=r[ap];i!==null&&i!==e&&f2(i,r),t>0&&(e[n-1][ja]=r[ja]);let o=f0(e,si+t);bxe(r[vt],r);let s=o[vl];s!==null&&s.detachView(o[vt]),r[Vi]=null,r[ja]=null,r[zt]&=-129}return r}function oCe(e,t,n,r){let i=si+r,o=n.length;r>0&&(n[i-1][ja]=t),r<o-si?(t[ja]=n[i],gF(n,si+r,t)):(n.push(t),t[ja]=null),t[Vi]=n;let s=t[ap];s!==null&&n!==s&&aJ(s,t);let a=t[vl];a!==null&&a.insertView(e),ck(t),t[zt]|=128}function aJ(e,t){let n=e[af],r=t[Vi];if(bl(r))e[zt]|=2;else{let i=r[Vi][as];t[as]!==i&&(e[zt]|=2)}n===null?e[af]=[t]:n.push(t)}var fp=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,n=t[vt];return M0(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n}get context(){return this._lView[_i]}set context(t){this._lView[_i]=t}get destroyed(){return cf(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Vi];if(bc(t)){let n=t[_0],r=n?n.indexOf(this):-1;r>-1&&(D0(t,r),f0(n,r))}this._attachedToViewContainer=!1}Jk(this._lView[vt],this._lView)}onDestroy(t){PF(this._lView,t)}markForCheck(){x2(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[zt]&=-129}reattach(){ck(this._lView),this._lView[zt]|=128}detectChanges(){this._lView[zt]|=1024,eJ(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ye(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=Rg(this._lView),n=this._lView[ap];n!==null&&!t&&f2(n,this._lView),B7(this._lView[vt],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new ye(902,!1);this._appRef=t;let n=Rg(this._lView),r=this._lView[ap];r!==null&&!n&&aJ(r,this._lView),ck(this._lView)}};var Po=(()=>{class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=sCe;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=B0(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new fp(o)}}return e})();function sCe(){return Xk(Ti(),bt())}function Xk(e,t){return e.type&4?new Po(t,e,Zg(e,t)):null}function Wg(e,t,n,r,i){let o=e.data[t];if(o===null)o=aCe(e,t,n,r,i),tK()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=QW();o.injectorIndex=s===null?-1:s.injectorIndex}return Ng(o,!0),o}function aCe(e,t,n,r,i){let o=zF(),s=BF(),a=s?o:o&&o.parent,c=e.data[t]=lCe(e,a,n,t,r,i);return cCe(e,c,o,s),c}function cCe(e,t,n,r){e.firstChild===null&&(e.firstChild=t),n!==null&&(r?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function lCe(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return LF()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Qrt=new RegExp(`^(\\d+)*(${_we}|${gwe})*(.*)`);function uCe(e){let t=e[SF]??[],r=e[Vi][ar],i=[];for(let o of t)o.data[h7]!==void 0?i.push(o):dCe(o,r);e[SF]=i}function dCe(e,t){let n=0,r=e.firstChild;if(r){let i=e.data[f7];for(;n<i;){let o=r.nextSibling;M7(t,r,!1),r=o,n++}}}var pCe=()=>null,mCe=()=>null;function Pk(e,t){return pCe(e,t)}function cJ(e,t,n){return mCe(e,t,n)}var lJ=class{},eT=class{},kj=class{resolveComponentFactory(t){throw new ye(917,!1)}},V0=class{static NULL=new kj},Ai=class{},rr=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>fCe()}return e})();function fCe(){let e=bt(),t=Ti(),n=Ba(t.index,e);return(bl(n)?n:e)[ar]}var uJ=(()=>{class e{static \u0275prov=re({token:e,providedIn:"root",factory:()=>null})}return e})();var Ck={},Tj=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){let i=this.injector.get(t,Ck,r);return i!==Ck||n===Ck?i:this.parentInjector.get(t,n,r)}};function Rk(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=XS(i,a);else if(o==2){let c=a,u=t[++s];r=XS(r,c+": "+u+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function Ee(e,t=0){let n=bt();if(n===null)return Be(e,t);let r=Ti();return i7(r,n,fo(e),t)}function C2(){let e="invalid";throw new Error(e)}function dJ(e,t,n,r,i){let o=r===null?null:{"":-1},s=i(e,n);if(s!==null){let a=s,c=null,u=null;for(let d of s)if(d.resolveHostDirectives!==null){[a,c,u]=d.resolveHostDirectives(s);break}_Ce(e,t,n,a,o,c,u)}o!==null&&r!==null&&hCe(n,r,o)}function hCe(e,t,n){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new ye(-301,!1);r.push(t[i],o)}}function gCe(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function _Ce(e,t,n,r,i,o,s){let a=r.length,c=!1;for(let g=0;g<a;g++){let h=r[g];!c&&wl(h)&&(c=!0,gCe(e,n,g)),lj(Ak(n,t),e,h.type)}CCe(n,e.data.length,a);for(let g=0;g<a;g++){let h=r[g];h.providersResolver&&h.providersResolver(h)}let u=!1,d=!1,f=R7(e,t,a,null);a>0&&(n.directiveToIndex=new Map);for(let g=0;g<a;g++){let h=r[g];if(n.mergedAttrs=zg(n.mergedAttrs,h.hostAttrs),vCe(e,n,t,f,h),xCe(f,h,i),s!==null&&s.has(h)){let[x,E]=s.get(h);n.directiveToIndex.set(h.type,[f,x+n.directiveStart,E+n.directiveStart])}else(o===null||!o.has(h))&&n.directiveToIndex.set(h.type,f);h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let v=h.type.prototype;!u&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),u=!0),!d&&(v.ngOnChanges||v.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),d=!0),f++}yCe(e,n,o)}function yCe(e,t,n){for(let r=t.directiveStart;r<t.directiveEnd;r++){let i=e.data[r];if(n===null||!n.has(i))MK(0,t,i,r),MK(1,t,i,r),PK(t,r,!1);else{let o=n.get(i);DK(0,t,o,r),DK(1,t,o,r),PK(t,r,!0)}}}function MK(e,t,n,r){let i=e===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;e===0?s=t.inputs??={}:s=t.outputs??={},s[o]??=[],s[o].push(r),pJ(t,o)}}function DK(e,t,n,r){let i=e===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;e===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),pJ(t,s)}}function pJ(e,t){t==="class"?e.flags|=8:t==="style"&&(e.flags|=16)}function PK(e,t,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=e;if(r===null||!n&&i===null||n&&o===null||o2(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&i.hasOwnProperty(c)){let u=i[c];for(let d of u)if(d===t){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){let u=o[c];for(let d=0;d<u.length;d+=2)if(u[d]===t){s??=[],s.push(u[d+1],r[a+1]);break}}a+=2}e.initialInputs??=[],e.initialInputs.push(s)}function vCe(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=rp(i.type,!0)),s=new mf(o,wl(i),Ee,null);e.blueprint[r]=s,n[r]=s,bCe(e,t,r,R7(e,n,i.hostVars,Ro),i)}function bCe(e,t,n,r,i){let o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;wCe(s)!=a&&s.push(a),s.push(n,r,o)}}function wCe(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function xCe(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;wl(t)&&(n[""]=e)}}function CCe(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function E2(e,t,n,r,i,o,s,a){let c=t[vt],u=c.consts,d=ma(u,s),f=Wg(c,e,n,r,d);return o&&dJ(c,t,f,ma(u,a),i),f.mergedAttrs=zg(f.mergedAttrs,f.attrs),f.attrs!==null&&Rk(f,f.attrs,!1),f.mergedAttrs!==null&&Rk(f,f.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,f),f}function I2(e,t){KK(e,t),kF(t)&&e.queries.elementEnd(t)}function ECe(e,t,n,r,i,o){let s=t.consts,a=ma(s,i),c=Wg(t,e,n,r,a);if(c.mergedAttrs=zg(c.mergedAttrs,c.attrs),o!=null){let u=ma(s,o);c.localNames=[];for(let d=0;d<u.length;d+=2)c.localNames.push(u[d],-1)}return c.attrs!==null&&Rk(c,c.attrs,!1),c.mergedAttrs!==null&&Rk(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function S2(e){return fJ(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function mJ(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function fJ(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function k2(e,t,n){return e[t]=n}function fa(e,t,n){if(n===Ro)return!1;let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function P0(e,t,n,r){let i=fa(e,t,n);return fa(e,t+1,r)||i}function ICe(e,t,n,r,i){let o=P0(e,t,n,r);return fa(e,t+2,i)||o}function SCe(e,t,n,r,i,o){let s=P0(e,t,n,r);return P0(e,t+2,i,o)||s}function Ek(e,t,n){return function r(i){let o=lp(e)?Ba(e.index,t):t;x2(o,5);let s=t[_i],a=RK(t,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=RK(t,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function RK(e,t,n,r){let i=Rt(null);try{return nr(6,t,n),n(r)!==!1}catch(o){return Vxe(e,o),!1}finally{nr(7,t,n),Rt(i)}}function hJ(e,t,n,r,i,o,s,a){let c=Pg(e),u=!1,d=null;if(!r&&c&&(d=TCe(t,n,o,e.index)),d!==null){let f=d.__ngLastListenerFn__||d;f.__ngNextListenerFn__=s,d.__ngLastListenerFn__=s,u=!0}else{let f=wc(e,n),g=r?r(f):f;vwe(n,g,o,a);let h=i.listen(g,o,a);if(!kCe(o)){let v=r?x=>r(za(x[e.index])):e.index;gJ(v,t,n,o,a,h,!1)}}return u}function kCe(e){return e.startsWith("animation")||e.startsWith("transition")}function TCe(e,t,n,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=t[Mg],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function gJ(e,t,n,r,i,o,s){let a=t.firstCreatePass?NF(t):null,c=RF(n),u=c.length;c.push(i,o),a&&a.push(r,e,u,(u+1)*(s?-1:1))}function NK(e,t,n,r,i,o){let s=t[n],a=t[vt],u=a.data[n].outputs[r],f=s[u].subscribe(o);gJ(e.index,a,t,i,o,f,!0)}var Aj=Symbol("BINDING");var Nk=class extends V0{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Du(t);return new hf(n,this.ngModule)}};function ACe(e){return Object.keys(e).map(t=>{let[n,r,i]=e[t],o={propName:n,templateName:t,isSignal:(r&Gk.SignalBased)!==0};return i&&(o.transform=i),o})}function OCe(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}function MCe(e,t,n){let r=t instanceof Dr?t:t?.injector;return r&&e.getStandaloneInjector!==null&&(r=e.getStandaloneInjector(r)||r),r?new Tj(n,r):n}function DCe(e){let t=e.get(Ai,null);if(t===null)throw new ye(407,!1);let n=e.get(uJ,null),r=e.get(Fa,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function PCe(e,t){let n=_J(e);return A7(t,n,n==="svg"?TF:n==="math"?HW:null)}function _J(e){return(e.selectors[0][0]||"div").toLowerCase()}var hf=class extends eT{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=ACe(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=OCe(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=Xwe(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,r,i,o,s){nr(22);let a=Rt(null);try{let c=this.componentDef,u=RCe(r,c,s,o),d=MCe(c,i||this.ngModule,t),f=DCe(d),g=f.rendererFactory.createRenderer(null,c),h=r?Dxe(g,r,c.encapsulation,d):PCe(c,g),v=s?.some($K)||o?.some(C=>typeof C!="function"&&C.bindings.some($K)),x=a2(null,u,null,512|P7(c),null,null,f,g,d,null,y7(h,d,!0));x[Pr]=h,pk(x);let E=null;try{let C=E2(Pr,x,2,"#host",()=>u.directiveRegistry,!0,0);D7(g,h,C),Bg(h,x),Qk(u,x,C),Jj(u,C,x),I2(u,C),n!==void 0&&$Ce(C,this.ngContentSelectors,n),E=Ba(C.index,x),x[_i]=E[_i],w2(u,x,null)}catch(C){throw E!==null&&dj(E),dj(x),C}finally{nr(23),mk()}return new $k(this.componentType,x,!!v)}finally{Rt(a)}}};function RCe(e,t,n,r){let i=e?["ng-version","20.3.14"]:exe(t.selectors[0]),o=null,s=null,a=0;if(n)for(let d of n)a+=d[Aj].requiredVars,d.create&&(d.targetIdx=0,(o??=[]).push(d)),d.update&&(d.targetIdx=0,(s??=[]).push(d));if(r)for(let d=0;d<r.length;d++){let f=r[d];if(typeof f!="function")for(let g of f.bindings){a+=g[Aj].requiredVars;let h=d+1;g.create&&(g.targetIdx=h,(o??=[]).push(g)),g.update&&(g.targetIdx=h,(s??=[]).push(g))}}let c=[t];if(r)for(let d of r){let f=typeof d=="function"?d:d.type,g=bF(f);c.push(g)}return s2(0,null,NCe(o,s),1,a,c,null,null,null,[i],null)}function NCe(e,t){return!e&&!t?null:n=>{if(n&1&&e)for(let r of e)r.create();if(n&2&&t)for(let r of t)r.update()}}function $K(e){let t=e[Aj].kind;return t==="input"||t==="twoWay"}var $k=class extends lJ{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=y0(n[vt],Pr),this.location=Zg(this._tNode,n),this.instance=Ba(this._tNode.index,n)[_i],this.hostView=this.changeDetectorRef=new fp(n,void 0),this.componentType=t}setInput(t,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let i=this._rootLView,o=b2(r,i[vt],i,t,n);this.previousInputValues.set(t,n);let s=Ba(r.index,i);x2(s,1)}get injector(){return new pf(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function $Ce(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Zi=(()=>{class e{static __NG_ELEMENT_ID__=LCe}return e})();function LCe(){let e=Ti();return vJ(e,bt())}var FCe=Zi,yJ=class extends FCe{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Zg(this._hostTNode,this._hostLView)}get injector(){return new pf(this._hostTNode,this._hostLView)}get parentInjector(){let t=qj(this._hostTNode,this._hostLView);if(QK(t)){let n=kk(t,this._hostLView),r=Sk(t),i=n[vt].data[r+8];return new pf(i,n)}else return new pf(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=LK(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-si}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Pk(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Ug(this._hostTNode,s)),a}createComponent(t,n,r,i,o,s,a){let c=t&&!Z0e(t),u;if(c)u=n;else{let E=n||{};u=E.index,r=E.injector,i=E.projectableNodes,o=E.environmentInjector||E.ngModuleRef,s=E.directives,a=E.bindings}let d=c?t:new hf(Du(t)),f=r||this.parentInjector;if(!o&&d.ngModule==null){let C=(c?f:this.parentInjector).get(Dr,null);C&&(o=C)}let g=Du(d.componentType??{}),h=Pk(this._lContainer,g?.id??null),v=h?.firstChild??null,x=d.create(f,i,v,o,s,a);return this.insertImpl(x.hostView,u,Ug(this._hostTNode,h)),x}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(qW(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=i[Vi],u=new yJ(c,c[ss],c[Vi]);u.detach(u.indexOf(t))}}let o=this._adjustIndex(n),s=this._lContainer;return U0(s,i,o,r),t.attachToViewContainerRef(),gF(ej(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=LK(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=D0(this._lContainer,n);r&&(f0(ej(this._lContainer),n),Jk(r[vt],r))}detach(t){let n=this._adjustIndex(t,-1),r=D0(this._lContainer,n);return r&&f0(ej(this._lContainer),n)!=null?new fp(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function LK(e){return e[_0]}function ej(e){return e[_0]||(e[_0]=[])}function vJ(e,t){let n,r=t[e.index];return bc(r)?n=r:(n=iJ(r,t,null,e),t[e.index]=n,c2(t,n)),zCe(n,t,e,r),new yJ(n,e,t)}function jCe(e,t){let n=e[ar],r=n.createComment(""),i=wc(t,e),o=n.parentNode(i);return Ok(n,o,r,n.nextSibling(i),!1),r}var zCe=VCe,BCe=()=>!1;function UCe(e,t,n){return BCe(e,t,n)}function VCe(e,t,n,r){if(e[cp])return;let i;n.type&8?i=za(r):i=jCe(t,n),e[cp]=i}var Oj=class e{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},Mj=class e{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new e(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)A2(t,n).matches!==null&&this.queries[n].setDirty()}},Lk=class{flags;read;predicate;constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=WCe(t):this.predicate=t}},Dj=class e{queries;constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},Pj=class e{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,n=-1){this.metadata=t,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(t,n,HCe(n,o)),this.matchTNodeWithReadOption(t,n,xk(n,t,o,!1,!1))}else r===Po?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,xk(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===nt||i===Zi||i===Po&&n.type&4)this.addMatch(n.index,-2);else{let o=xk(n,t,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function HCe(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function ZCe(e,t){return e.type&11?Zg(e,t):e.type&4?Xk(e,t):null}function qCe(e,t,n,r){return n===-1?ZCe(t,e):n===-2?GCe(e,t,r):A0(e,e[vt],n,t)}function GCe(e,t,n){if(n===nt)return Zg(t,e);if(n===Po)return Xk(t,e);if(n===Zi)return vJ(t,e)}function bJ(e,t,n,r){let i=t[vl].queries[r];if(i.matches===null){let o=e.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let d=o[u];a.push(qCe(t,d,s[c+1],n.metadata.read))}}i.matches=a}return i.matches}function Rj(e,t,n,r){let i=e.queries.getByIndex(n),o=i.matches;if(o!==null){let s=bJ(e,t,i,n);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let u=o[a+1],d=t[-c];for(let f=si;f<d.length;f++){let g=d[f];g[ap]===g[Vi]&&Rj(g[vt],g,u,r)}if(d[af]!==null){let f=d[af];for(let g=0;g<f.length;g++){let h=f[g];Rj(h[vt],h,u,r)}}}}}return r}function T2(e,t){return e[vl].queries[t].queryList}function wJ(e,t,n){let r=new Ua((n&4)===4);return KW(e,t,r,r.destroy),(t[vl]??=new Mj).queries.push(new Oj(r))-1}function xJ(e,t,n){let r=kr();return r.firstCreatePass&&(EJ(r,new Lk(e,t,n),-1),(t&2)===2&&(r.staticViewQueries=!0)),wJ(r,bt(),t)}function CJ(e,t,n,r){let i=kr();if(i.firstCreatePass){let o=Ti();EJ(i,new Lk(t,n,r),o.index),KCe(i,e),(n&2)===2&&(i.staticContentQueries=!0)}return wJ(i,bt(),n)}function WCe(e){return e.split(",").map(t=>t.trim())}function EJ(e,t,n){e.queries===null&&(e.queries=new Dj),e.queries.track(new Pj(t,n))}function KCe(e,t){let n=e.contentQueries||(e.contentQueries=[]),r=n.length?n[n.length-1]:-1;t!==r&&n.push(e.queries.length-1,t)}function A2(e,t){return e.queries.getByIndex(t)}function IJ(e,t){let n=e[vt],r=A2(n,t);return r.crossesNgTemplate?Rj(n,e,t,[]):bJ(n,e,r,t)}function SJ(e,t,n){let r,i=Qb(()=>{r._dirtyCounter();let o=JCe(r,e);if(t&&o===void 0)throw new ye(-951,!1);return o});return r=i[ki],r._dirtyCounter=Pn(0),r._flatValue=void 0,i}function O2(e){return SJ(!0,!1,e)}function M2(e){return SJ(!0,!0,e)}function kJ(e,t){let n=e[ki];n._lView=bt(),n._queryIndex=t,n._queryList=T2(n._lView,t),n._queryList.onDirty(()=>n._dirtyCounter.update(r=>r+1))}function JCe(e,t){let n=e._lView,r=e._queryIndex;if(n===void 0||r===void 0||n[zt]&4)return t?void 0:Do;let i=T2(n,r),o=IJ(n,r);return i.reset(o,a7),t?i.first:i._changesDetected||e._flatValue===void 0?e._flatValue=i.toArray():e._flatValue}var Il=class{},tT=class{};var Fk=class extends Il{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Nk(this);constructor(t,n,r,i=!0){super(),this.ngModuleType=t,this._parent=n;let o=vF(t);this._bootstrapComponents=S7(o.bootstrap),this._r3Injector=GF(t,n,[{provide:Il,useValue:this},{provide:V0,useValue:this.componentFactoryResolver},...r],Ou(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},jk=class extends tT{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Fk(this.moduleType,t,[])}};var R0=class extends Il{injector;componentFactoryResolver=new Nk(this);instance=null;constructor(t){super();let n=new Xm([...t.providers,{provide:Il,useValue:this},{provide:V0,useValue:this.componentFactoryResolver}],t.parent||Og(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function H0(e,t,n=null){return new R0({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var YCe=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=wF(!1,n.type),i=r.length>0?H0([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=re({token:e,providedIn:"environment",factory:()=>new e(Be(Dr))})}return e})();function Ve(e){return $0(()=>{let t=TJ(e),n=b(m({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Wj.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(YCe).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||$u.Emulated,styles:e.styles||Do,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&zu("NgStandalone"),AJ(n);let r=e.dependencies;return n.directiveDefs=FK(r,QCe),n.pipeDefs=FK(r,LW),n.id=tEe(n),n})}function QCe(e){return Du(e)||bF(e)}function it(e){return $0(()=>({type:e.type,bootstrap:e.bootstrap||Do,declarations:e.declarations||Do,imports:e.imports||Do,exports:e.exports||Do,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function XCe(e,t){if(e==null)return op;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=Gk.None,c=null),n[o]=[r,a,c],t[o]=s}return n}function eEe(e){if(e==null)return op;let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function Ne(e){return $0(()=>{let t=TJ(e);return AJ(t),t})}function cr(e){return{type:e.type,name:e.name,factory:null,pure:e.pure!==!1,standalone:e.standalone??!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function TJ(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||op,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||Do,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:XCe(e.inputs,t),outputs:eEe(e.outputs),debugInfo:null}}function AJ(e){e.features?.forEach(t=>t(e))}function FK(e,t){return e?()=>{let n=typeof e=="function"?e():e,r=[];for(let i of n){let o=t(i);o!==null&&r.push(o)}return r}:null}function tEe(e){let t=0,n=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let o of r.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function nEe(e){return Object.getPrototypeOf(e.prototype).constructor}function Jt(e){let t=nEe(e.type),n=!0,r=[e];for(;t;){let i;if(wl(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new ye(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let s=e;s.inputs=tj(e.inputs),s.declaredInputs=tj(e.declaredInputs),s.outputs=tj(e.outputs);let a=i.hostBindings;a&&aEe(e,a);let c=i.viewQuery,u=i.contentQueries;if(c&&oEe(e,c),u&&sEe(e,u),rEe(e,i),TW(e.outputs,i.outputs),wl(i)&&i.data.animation){let d=e.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(e),a===Jt&&(n=!1)}}t=Object.getPrototypeOf(t)}iEe(r)}function rEe(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n])}}function iEe(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=zg(i.hostAttrs,n=zg(n,i.hostAttrs))}}function tj(e){return e===op?{}:e===Do?[]:e}function oEe(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function sEe(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,o)=>{t(r,i,o),n(r,i,o)}:e.contentQueries=t}function aEe(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}function OJ(e,t,n,r,i,o,s,a){if(n.firstCreatePass){e.mergedAttrs=zg(e.mergedAttrs,e.attrs);let d=e.tView=s2(2,e,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,e),d.queries=n.queries.embeddedTView(e))}a&&(e.flags|=a),Ng(e,!1);let c=lEe(n,t,e,r);fk()&&h2(n,t,c,e),Bg(c,t);let u=iJ(c,t,c,e);t[r+Pr]=u,c2(t,u),UCe(u,e,t)}function cEe(e,t,n,r,i,o,s,a,c,u,d){let f=n+Pr,g;return t.firstCreatePass?(g=Wg(t,f,4,s||null,a||null),lk()&&dJ(t,e,g,ma(t.consts,u),_2),KK(t,g)):g=t.data[f],OJ(g,e,t,n,r,i,o,c),Pg(g)&&Qk(t,e,g),u!=null&&z0(e,g,d),g}function Vg(e,t,n,r,i,o,s,a,c,u,d){let f=n+Pr,g;if(t.firstCreatePass){if(g=Wg(t,f,4,s||null,a||null),u!=null){let h=ma(t.consts,u);g.localNames=[];for(let v=0;v<h.length;v+=2)g.localNames.push(h[v],-1)}}else g=t.data[f];return OJ(g,e,t,n,r,i,o,c),u!=null&&z0(e,g,d),g}function ot(e,t,n,r,i,o,s,a){let c=bt(),u=kr(),d=ma(u.consts,o);return cEe(c,u,e,t,n,r,i,d,void 0,s,a),ot}function Z0(e,t,n,r,i,o,s,a){let c=bt(),u=kr(),d=ma(u.consts,o);return Vg(c,u,e,t,n,r,i,d,void 0,s,a),Z0}var lEe=uEe;function uEe(e,t,n,r){return I0(!0),t[ar].createComment("")}var nT=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();var D2=new X("");function Bu(e){return!!e&&typeof e.then=="function"}function rT(e){return!!e&&typeof e.subscribe=="function"}var MJ=new X("");var P2=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=k(MJ,{optional:!0})??[];injector=k(ft);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=ho(this.injector,i);if(Bu(o))n.push(o);else if(rT(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),iT=new X("");function DJ(){NL(()=>{let e="";throw new ye(600,e)})}function PJ(e){return e.isBoundToModule}var dEe=10;var No=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=k(Fs);afterRenderManager=k(Kk);zonelessEnabled=k(Lg);rootEffectScheduler=k(S0);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ge;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=k(xl);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(et(n=>!n))}constructor(){k(gp,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=k(Dr);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=ft.NULL){return this._injector.get(De).run(()=>{nr(10);let s=n instanceof eT;if(!this._injector.get(P2).done){let v="";throw new ye(405,v)}let c;s?c=n:c=this._injector.get(V0).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let u=PJ(c)?void 0:this._injector.get(Il),d=r||c.selector,f=c.create(i,[],d,u),g=f.location.nativeElement,h=f.injector.get(D2,null);return h?.registerApplication(g),f.onDestroy(()=>{this.detachView(f.hostView),T0(this.components,f),h?.unregisterApplication(g)}),this._loadComponent(f),nr(11,f),f})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){nr(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Wk.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new ye(101,!1);let n=Rt(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Rt(n),this.afterTick.next(),nr(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ai,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<dEe;)nr(14),this.synchronizeOnce(),nr(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!v0(i))continue;let o=r&&!this.zonelessEnabled?0:1;eJ(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>v0(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;T0(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(iT,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>T0(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new ye(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function T0(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Yt(e,t,n,r){let i=bt(),o=dp();if(fa(i,o,t)){let s=kr(),a=C0();zxe(a,i,e,t,n,r)}return Yt}var oit=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Nj=class{destroy(t){}updateValue(t,n){}swap(t,n){let r=Math.min(t,n),i=Math.max(t,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(t,n){this.attach(n,this.detach(t))}};function nj(e,t,n,r,i){return e===n&&Object.is(t,r)?1:Object.is(i(e,t),i(n,r))?-1:0}function pEe(e,t,n){let r,i,o=0,s=e.length-1,a=void 0;if(Array.isArray(t)){let c=t.length-1;for(;o<=s&&o<=c;){let u=e.at(o),d=t[o],f=nj(o,u,o,d,n);if(f!==0){f<0&&e.updateValue(o,d),o++;continue}let g=e.at(s),h=t[c],v=nj(s,g,c,h,n);if(v!==0){v<0&&e.updateValue(s,h),s--,c--;continue}let x=n(o,u),E=n(s,g),C=n(o,d);if(Object.is(C,E)){let S=n(c,h);Object.is(S,x)?(e.swap(o,s),e.updateValue(s,h),c--,s--):e.move(s,o),e.updateValue(o,d),o++;continue}if(r??=new zk,i??=zK(e,o,s,n),$j(e,r,o,C))e.updateValue(o,d),o++,s++;else if(i.has(C))r.set(x,e.detach(o)),s--;else{let S=e.create(o,t[o]);e.attach(o,S),o++,s++}}for(;o<=c;)jK(e,r,n,o,t[o]),o++}else if(t!=null){let c=t[Symbol.iterator](),u=c.next();for(;!u.done&&o<=s;){let d=e.at(o),f=u.value,g=nj(o,d,o,f,n);if(g!==0)g<0&&e.updateValue(o,f),o++,u=c.next();else{r??=new zk,i??=zK(e,o,s,n);let h=n(o,f);if($j(e,r,o,h))e.updateValue(o,f),o++,s++,u=c.next();else if(!i.has(h))e.attach(o,e.create(o,f)),o++,s++,u=c.next();else{let v=n(o,d);r.set(v,e.detach(o)),s--}}}for(;!u.done;)jK(e,r,n,e.length,u.value),u=c.next()}for(;o<=s;)e.destroy(e.detach(s--));r?.forEach(c=>{e.destroy(c)})}function $j(e,t,n,r){return t!==void 0&&t.has(r)?(e.attach(n,t.get(r)),t.delete(r),!0):!1}function jK(e,t,n,r,i){if($j(e,t,r,n(r,i)))e.updateValue(r,i);else{let o=e.create(r,i);e.attach(r,o)}}function zK(e,t,n,r){let i=new Set;for(let o=t;o<=n;o++)i.add(r(o,e.at(o)));return i}var zk=class{kvMap=new Map;_vMap=void 0;has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let n=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(t,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,n){if(this.kvMap.has(t)){let r=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(t,n)}forEach(t){for(let[n,r]of this.kvMap)if(t(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),t(r,n)}}};function wt(e,t,n,r,i,o,s,a){zu("NgControlFlow");let c=bt(),u=kr(),d=ma(u.consts,o);return Vg(c,u,e,t,n,r,i,d,256,s,a),_p}function _p(e,t,n,r,i,o,s,a){zu("NgControlFlow");let c=bt(),u=kr(),d=ma(u.consts,o);return Vg(c,u,e,t,n,r,i,d,512,s,a),_p}function xt(e,t){zu("NgControlFlow");let n=bt(),r=dp(),i=n[r]!==Ro?n[r]:-1,o=i!==-1?Bk(n,Pr+i):void 0,s=0;if(fa(n,r,e)){let a=Rt(null);try{if(o!==void 0&&sJ(o,s),e!==-1){let c=Pr+e,u=Bk(n,c),d=zj(n[vt],c),f=cJ(u,d,n),g=B0(n,d,t,{dehydratedView:f});U0(u,g,s,Ug(d,f))}}finally{Rt(a)}}else if(o!==void 0){let a=oJ(o,s);a!==void 0&&(a[_i]=t)}}var Lj=class{lContainer;$implicit;$index;constructor(t,n,r){this.lContainer=t,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-si}};function q0(e){return e}function kl(e,t){return t}var Fj=class{hasEmptyBlock;trackByFn;liveCollection;constructor(t,n,r){this.hasEmptyBlock=t,this.trackByFn=n,this.liveCollection=r}};function go(e,t,n,r,i,o,s,a,c,u,d,f,g){zu("NgControlFlow");let h=bt(),v=kr(),x=c!==void 0,E=bt(),C=a?s.bind(E[as][_i]):s,S=new Fj(x,C);E[Pr+e]=S,Vg(h,v,e+1,t,n,r,i,ma(v.consts,o),256),x&&Vg(h,v,e+2,c,u,d,f,ma(v.consts,g),512)}var jj=class extends Nj{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(t,n,r){super(),this.lContainer=t,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-si}at(t){return this.getLView(t)[_i].$implicit}attach(t,n){let r=n[tf];this.needsIndexUpdate||=t!==this.length,U0(this.lContainer,n,t,Ug(this.templateTNode,r)),mEe(this.lContainer,t)}detach(t){return this.needsIndexUpdate||=t!==this.length-1,fEe(this.lContainer,t),hEe(this.lContainer,t)}create(t,n){let r=Pk(this.lContainer,this.templateTNode.tView.ssrId),i=B0(this.hostLView,this.templateTNode,new Lj(this.lContainer,n,t),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(t){Jk(t[vt],t),this.operationsCounter?.recordDestroy()}updateValue(t,n){this.getLView(t)[_i].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[_i].$index=t}getLView(t){return gEe(this.lContainer,t)}};function _o(e){let t=Rt(null),n=xc();try{let r=bt(),i=r[vt],o=r[n],s=n+1,a=Bk(r,s);if(o.liveCollection===void 0){let u=zj(i,s);o.liveCollection=new jj(a,r,u)}else o.liveCollection.reset();let c=o.liveCollection;if(pEe(c,e,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let u=dp(),d=c.length===0;if(fa(r,u,d)){let f=n+2,g=Bk(r,f);if(d){let h=zj(i,f),v=cJ(g,h,r),x=B0(r,h,void 0,{dehydratedView:v});U0(g,x,0,Ug(h,v))}else i.firstUpdatePass&&uCe(g),sJ(g,0)}}}finally{Rt(t)}}function Bk(e,t){return e[t]}function mEe(e,t){if(e.length<=si)return;let n=si+t,r=e[n],i=r?r[sf]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[Pu];yxe(o,i),ff.delete(r),i.detachedLeaveAnimationFns=void 0}}function fEe(e,t){if(e.length<=si)return;let n=si+t,r=e[n],i=r?r[sf]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function hEe(e,t){return D0(e,t)}function gEe(e,t){return oJ(e,t)}function zj(e,t){return y0(e,t)}function K(e,t,n){let r=bt(),i=dp();if(fa(r,i,t)){let o=kr(),s=C0();G7(s,r,e,t,r[ar],n)}return K}function Bj(e,t,n,r,i){b2(t,e,n,i?"class":"style",r)}function N(e,t,n,r){let i=bt(),o=i[vt],s=e+Pr,a=o.firstCreatePass?E2(s,i,2,t,_2,lk(),n,r):o.data[s];if(y2(a,i,e,t,RJ),Pg(a)){let c=i[vt];Qk(c,i,a),Jj(c,a,i)}return r!=null&&z0(i,a),N}function $(){let e=kr(),t=Ti(),n=v2(t);return e.firstCreatePass&&I2(e,n),FF(n)&&jF(),$F(),n.classesWithoutHost!=null&&Y0e(n)&&Bj(e,n,bt(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&Q0e(n)&&Bj(e,n,bt(),n.stylesWithoutHost,!1),$}function Vt(e,t,n,r){return N(e,t,n,r),$(),Vt}function yo(e,t,n,r){let i=bt(),o=i[vt],s=e+Pr,a=o.firstCreatePass?ECe(s,o,2,t,n,r):o.data[s];return y2(a,i,e,t,RJ),r!=null&&z0(i,a),yo}function $o(){let e=Ti(),t=v2(e);return FF(t)&&jF(),$F(),$o}function cs(e,t,n,r){return yo(e,t,n,r),$o(),cs}var RJ=(e,t,n,r,i)=>(I0(!0),A7(t[ar],r,lK()));function _f(e,t,n){let r=bt(),i=r[vt],o=e+Pr,s=i.firstCreatePass?E2(o,r,8,"ng-container",_2,lk(),t,n):i.data[o];if(y2(s,r,e,"ng-container",_Ee),Pg(s)){let a=r[vt];Qk(a,r,s),Jj(a,s,r)}return n!=null&&z0(r,s),_f}function yf(){let e=kr(),t=Ti(),n=v2(t);return e.firstCreatePass&&I2(e,n),yf}function Kg(e,t,n){return _f(e,t,n),yf(),Kg}var _Ee=(e,t,n,r,i)=>(I0(!0),rxe(t[ar],""));function Qt(){return bt()}function Ic(e,t,n){let r=bt(),i=dp();if(fa(r,i,t)){let o=kr(),s=C0();W7(s,r,e,t,r[ar],n)}return Ic}var yk=void 0;function yEe(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return t===1&&n===0?1:5}var vEe=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yk,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yk,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yk,"{1} 'at' {0}",yk],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",yEe],rj={};function js(e){let t=bEe(e),n=BK(t);if(n)return n;let r=t.split("-")[0];if(n=BK(r),n)return n;if(r==="en")return vEe;throw new ye(701,!1)}function BK(e){return e in rj||(rj[e]=gl.ng&&gl.ng.common&&gl.ng.common.locales&&gl.ng.common.locales[e]),rj[e]}var ai=(function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e})(ai||{});function bEe(e){return e.toLowerCase().replace(/_/g,"-")}var G0="en-US";var wEe=G0;function NJ(e){typeof e=="string"&&(wEe=e.toLowerCase().replace(/_/g,"-"))}function Te(e,t,n){let r=bt(),i=kr(),o=Ti();return $J(i,r,r[ar],o,e,t,n),Te}function Jg(e,t,n){let r=bt(),i=kr(),o=Ti();return(o.type&3||n)&&hJ(o,i,r,n,r[ar],e,t,Ek(o,r,t)),Jg}function $J(e,t,n,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=Ek(r,t,o),hJ(r,e,t,s,n,i,o,c)&&(a=!1)),a){let u=r.outputs?.[i],d=r.hostDirectiveOutputs?.[i];if(d&&d.length)for(let f=0;f<d.length;f+=2){let g=d[f],h=d[f+1];c??=Ek(r,t,o),NK(r,t,g,h,i,c)}if(u&&u.length)for(let f of u)c??=Ek(r,t,o),NK(r,t,f,i,i,c)}}function H(e=1){return cK(e)}function xEe(e,t){let n=null,r=Wwe(e);for(let i=0;i<t.length;i++){let o=t[i];if(o==="*"){n=i;continue}if(r===null?T7(e,o,!0):Ywe(r,o))return i}return n}function lr(e){let t=bt()[as][ss];if(!t.projection){let n=e?e.length:1,r=t.projection=NW(n,null),i=r.slice(),o=t.child;for(;o!==null;){if(o.type!==128){let s=e?xEe(o,e):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function Ht(e,t=0,n,r,i,o){let s=bt(),a=kr(),c=r?e+1:null;c!==null&&Vg(s,a,c,r,i,o,null,n);let u=Wg(a,Pr+e,16,null,n||null);u.projection===null&&(u.projection=t),UF();let f=!s[tf]||LF();s[as][ss].projection[u.projection]===null&&c!==null?CEe(s,a,c):f&&!Zk(u)&&Axe(a,s,u)}function CEe(e,t,n){let r=Pr+n,i=t.data[r],o=e[r],s=Pk(o,i.tView.ssrId),a=B0(e,i,void 0,{dehydratedView:s});U0(o,a,0,Ug(i,s))}function Rr(e,t,n,r){CJ(e,t,n,r)}function Zn(e,t,n){xJ(e,t,n)}function St(e){let t=bt(),n=kr(),r=dk();x0(r+1);let i=A2(n,r);if(e.dirty&&ZW(t)===((i.metadata.flags&2)===2)){if(i.matches===null)e.reset([]);else{let o=IJ(t,r);e.reset(o,a7),e.notifyOnChanges()}return!0}return!1}function kt(){return T2(bt(),dk())}function R2(e,t,n,r,i){kJ(t,CJ(e,n,r,i))}function Yg(e,t,n,r){kJ(e,xJ(t,n,r))}function oT(e=1){x0(dk()+e)}function Lo(e){let t=XW();return sk(t,Pr+e)}function vk(e,t){return e<<17|t<<2}function gf(e){return e>>17&32767}function EEe(e){return(e&2)==2}function IEe(e,t){return e&131071|t<<17}function Uj(e){return e|2}function Hg(e){return(e&131068)>>2}function ij(e,t){return e&-131069|t<<2}function SEe(e){return(e&1)===1}function Vj(e){return e|1}function kEe(e,t,n,r,i,o){let s=o?t.classBindings:t.styleBindings,a=gf(s),c=Hg(s);e[r]=n;let u=!1,d;if(Array.isArray(n)){let f=n;d=f[1],(d===null||Ag(f,d)>0)&&(u=!0)}else d=n;if(i)if(c!==0){let g=gf(e[a+1]);e[r+1]=vk(g,a),g!==0&&(e[g+1]=ij(e[g+1],r)),e[a+1]=IEe(e[a+1],r)}else e[r+1]=vk(a,0),a!==0&&(e[a+1]=ij(e[a+1],r)),a=r;else e[r+1]=vk(c,0),a===0?a=r:e[c+1]=ij(e[c+1],r),c=r;u&&(e[r+1]=Uj(e[r+1])),UK(e,d,r,!0),UK(e,d,r,!1),TEe(t,d,e,r,o),s=vk(a,c),o?t.classBindings=s:t.styleBindings=s}function TEe(e,t,n,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&Ag(o,t)>=0&&(n[r+1]=Vj(n[r+1]))}function UK(e,t,n,r){let i=e[n+1],o=t===null,s=r?gf(i):Hg(i),a=!1;for(;s!==0&&(a===!1||o);){let c=e[s],u=e[s+1];AEe(c,t)&&(a=!0,e[s+1]=r?Vj(u):Uj(u)),s=r?gf(u):Hg(u)}a&&(e[n+1]=r?Uj(i):Vj(i))}function AEe(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Ag(e,t)>=0:!1}var Ec={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function OEe(e){return e.substring(Ec.key,Ec.keyEnd)}function MEe(e){return DEe(e),LJ(e,FJ(e,0,Ec.textEnd))}function LJ(e,t){let n=Ec.textEnd;return n===t?-1:(t=Ec.keyEnd=PEe(e,Ec.key=t,n),FJ(e,t,n))}function DEe(e){Ec.key=0,Ec.keyEnd=0,Ec.value=0,Ec.valueEnd=0,Ec.textEnd=e.length}function FJ(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function PEe(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}function ls(e,t,n){return jJ(e,t,n,!1),ls}function at(e,t){return jJ(e,t,null,!0),at}function zs(e){NEe(BEe,REe,e,!0)}function REe(e,t){for(let n=MEe(t);n>=0;n=LJ(t,n))rk(e,OEe(t),!0)}function jJ(e,t,n,r){let i=bt(),o=kr(),s=w0(2);if(o.firstUpdatePass&&BJ(o,e,s,r),t!==Ro&&fa(i,s,t)){let a=o.data[xc()];UJ(o,a,i,i[ar],e,i[s+1]=VEe(t,n),r,s)}}function NEe(e,t,n,r){let i=kr(),o=w0(2);i.firstUpdatePass&&BJ(i,null,o,r);let s=bt();if(n!==Ro&&fa(s,o,n)){let a=i.data[xc()];if(VJ(a,r)&&!zJ(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=XS(c,n||"")),Bj(i,a,s,n,r)}else UEe(i,a,s,s[ar],s[o+1],s[o+1]=zEe(e,t,n),r,o)}}function zJ(e,t){return t>=e.expandoStartIndex}function BJ(e,t,n,r){let i=e.data;if(i[n+1]===null){let o=i[xc()],s=zJ(e,n);VJ(o,r)&&t===null&&!s&&(t=!1),t=$Ee(i,o,t,r),kEe(i,o,t,n,s,r)}}function $Ee(e,t,n,r){let i=iK(e),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=oj(null,e,t,n,r),n=N0(n,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==i)if(n=oj(i,e,t,n,r),o===null){let c=LEe(e,t,r);c!==void 0&&Array.isArray(c)&&(c=oj(null,e,t,c[1],r),c=N0(c,t.attrs,r),FEe(e,t,r,c))}else o=jEe(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function LEe(e,t,n){let r=n?t.classBindings:t.styleBindings;if(Hg(r)!==0)return e[gf(r)]}function FEe(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[gf(i)]=r}function jEe(e,t,n){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=e[o].hostAttrs;r=N0(r,s,n)}return N0(r,t.attrs,n)}function oj(e,t,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=t[a],r=N0(r,o.hostAttrs,i),o!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function N0(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),rk(e,s,n?!0:t[++o]))}return e===void 0?null:e}function zEe(e,t,n){if(n==null||n==="")return Do;let r=[],i=Sl(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)e(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&e(r,o,i[o]);else typeof i=="string"&&t(r,i);return r}function BEe(e,t,n){let r=String(t);r!==""&&!r.includes(" ")&&rk(e,r,n)}function UEe(e,t,n,r,i,o,s,a){i===Ro&&(i=Do);let c=0,u=0,d=0<i.length?i[0]:null,f=0<o.length?o[0]:null;for(;d!==null||f!==null;){let g=c<i.length?i[c+1]:void 0,h=u<o.length?o[u+1]:void 0,v=null,x;d===f?(c+=2,u+=2,g!==h&&(v=f,x=h)):f===null||d!==null&&d<f?(c+=2,v=d):(u+=2,v=f,x=h),v!==null&&UJ(e,t,n,r,v,x,s,a),d=c<i.length?i[c]:null,f=u<o.length?o[u]:null}}function UJ(e,t,n,r,i,o,s,a){if(!(t.type&3))return;let c=e.data,u=c[a+1],d=SEe(u)?VK(c,t,n,i,Hg(u),s):void 0;if(!Uk(d)){Uk(o)||EEe(u)&&(o=VK(c,null,n,i,a,s));let f=AF(xc(),n);Mxe(r,s,f,i,o)}}function VK(e,t,n,r,i,o){let s=t===null,a;for(;i>0;){let c=e[i],u=Array.isArray(c),d=u?c[1]:c,f=d===null,g=n[i+1];g===Ro&&(g=f?Do:void 0);let h=f?ik(g,r):d===r?g:void 0;if(u&&!Uk(h)&&(h=ik(c,r)),Uk(h)&&(a=h,s))return a;let v=e[i+1];i=s?gf(v):Hg(v)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(a=ik(c,r))}return a}function Uk(e){return e!==void 0}function VEe(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=Ou(Sl(e)))),e}function VJ(e,t){return(e.flags&(t?8:16))!==0}function J(e,t=""){let n=bt(),r=kr(),i=e+Pr,o=r.firstCreatePass?Wg(r,i,1,t,null):r.data[i],s=HEe(r,n,o,t,e);n[i]=s,fk()&&h2(r,n,s,o),Ng(o,!1)}var HEe=(e,t,n,r,i)=>(I0(!0),txe(t[ar],r));function ZEe(e,t,n,r=""){return fa(e,dp(),n)?t+_l(n)+r:Ro}function qEe(e,t,n,r,i,o=""){let s=HF(),a=P0(e,s,n,i);return w0(2),a?t+_l(n)+r+_l(i)+o:Ro}function GEe(e,t,n,r,i,o,s,a=""){let c=HF(),u=ICe(e,c,n,i,s);return w0(3),u?t+_l(n)+r+_l(i)+o+_l(s)+a:Ro}function sn(e){return vn("",e),sn}function vn(e,t,n){let r=bt(),i=ZEe(r,e,t,n);return i!==Ro&&N2(r,xc(),i),vn}function sT(e,t,n,r,i){let o=bt(),s=qEe(o,e,t,n,r,i);return s!==Ro&&N2(o,xc(),s),sT}function aT(e,t,n,r,i,o,s){let a=bt(),c=GEe(a,e,t,n,r,i,o,s);return c!==Ro&&N2(a,xc(),c),aT}function N2(e,t,n){let r=AF(t,e);nxe(e[ar],r,n)}function yp(e,t,n){WF(t)&&(t=t());let r=bt(),i=dp();if(fa(r,i,t)){let o=kr(),s=C0();G7(s,r,e,t,r[ar],n)}return yp}function vf(e,t){let n=WF(e);return n&&e.set(t),n}function vp(e,t){let n=bt(),r=kr(),i=Ti();return $J(r,n,n[ar],i,e,t),vp}function WEe(e,t,n){let r=kr();if(r.firstCreatePass){let i=wl(e);Hj(n,r.data,r.blueprint,i,!0),Hj(t,r.data,r.blueprint,i,!1)}}function Hj(e,t,n,r,i){if(e=fo(e),Array.isArray(e))for(let o=0;o<e.length;o++)Hj(e[o],t,n,r,i);else{let o=kr(),s=bt(),a=Ti(),c=Qm(e)?e:fo(e.provide),u=CF(e),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(Qm(e)||!e.multi){let h=new mf(u,i,Ee,null),v=aj(c,t,i?d:d+g,f);v===-1?(lj(Ak(a,s),o,c),sj(o,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(h),s.push(h)):(n[v]=h,s[v]=h)}else{let h=aj(c,t,d+g,f),v=aj(c,t,d,d+g),x=h>=0&&n[h],E=v>=0&&n[v];if(i&&!E||!i&&!x){lj(Ak(a,s),o,c);let C=YEe(i?JEe:KEe,n.length,i,r,u,e);!i&&E&&(n[v].providerFactory=C),sj(o,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(C),s.push(C)}else{let C=HJ(n[i?v:h],u,!i&&r);sj(o,e,h>-1?h:v,C)}!i&&r&&E&&n[v].componentProviders++}}}function sj(e,t,n,r){let i=Qm(t),o=BW(t);if(i||o){let c=(o?fo(t.useClass):t).prototype.ngOnDestroy;if(c){let u=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let d=u.indexOf(n);d===-1?u.push(n,[r,c]):u[d+1].push(r,c)}else u.push(n,c)}}}function HJ(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function aj(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function KEe(e,t,n,r,i){return Zj(this.multi,[])}function JEe(e,t,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=A0(r,r[vt],this.providerFactory.index,i);s=c.slice(0,a),Zj(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],Zj(o,s);return s}function Zj(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function YEe(e,t,n,r,i,o){let s=new mf(e,n,Ee,null);return s.multi=[],s.index=t,s.componentProviders=0,HJ(s,i,r&&!n),s}function En(e,t=[]){return n=>{n.providersResolver=(r,i)=>WEe(r,i?i(e):e,t)}}function $2(e,t,n,r,i){return ZJ(bt(),b0(),e,t,n,r,i)}function L2(e,t,n,r,i,o,s){return XEe(bt(),b0(),e,t,n,r,i,o,s)}function F2(e,t){let n=e[t];return n===Ro?void 0:n}function QEe(e,t,n,r,i,o){let s=t+n;return fa(e,s,i)?k2(e,s+1,o?r.call(o,i):r(i)):F2(e,s+1)}function ZJ(e,t,n,r,i,o,s){let a=t+n;return P0(e,a,i,o)?k2(e,a+2,s?r.call(s,i,o):r(i,o)):F2(e,a+2)}function XEe(e,t,n,r,i,o,s,a,c){let u=t+n;return SCe(e,u,i,o,s,a)?k2(e,u+4,c?r.call(c,i,o,s,a):r(i,o,s,a)):F2(e,u+4)}function qn(e,t){let n=kr(),r,i=e+Pr;n.firstCreatePass?(r=eIe(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=rp(r.type,!0)),s,a=os(Ee);try{let c=Tk(!1),u=o();return Tk(c),OF(n,bt(),i,u),u}finally{os(a)}}function eIe(e,t){if(t)for(let n=t.length-1;n>=0;n--){let r=t[n];if(e===r.name)return r}}function ur(e,t,n){let r=e+Pr,i=bt(),o=sk(i,r);return qJ(i,r)?QEe(i,b0(),t,o.transform,n,o):o.transform(n)}function Qg(e,t,n,r){let i=e+Pr,o=bt(),s=sk(o,i);return qJ(o,i)?ZJ(o,b0(),t,s.transform,n,r,s):s.transform(n,r)}function qJ(e,t){return e[vt].data[t].pure}function Tl(e,t){return Xk(e,t)}var Vk=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},j2=(()=>{class e{compileModuleSync(n){return new jk(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=vF(n),o=S7(i.declarations).reduce((s,a)=>{let c=Du(a);return c&&s.push(new hf(c)),s},[]);return new Vk(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var tIe=(()=>{class e{zone=k(De);changeDetectionScheduler=k(Fa);applicationRef=k(No);applicationErrorHandler=k(Fs);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),GJ=new X("",{factory:()=>!1});function z2({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new De(b(m({},U2()),{scheduleInRootZone:n})),[{provide:De,useFactory:e},{provide:Mu,multi:!0,useFactory:()=>{let r=k(tIe,{optional:!0});return()=>r.initialize()}},{provide:Mu,multi:!0,useFactory:()=>{let r=k(nIe);return()=>{r.initialize()}}},t===!0?{provide:KF,useValue:!0}:[],{provide:JF,useValue:n??$7},{provide:Fs,useFactory:()=>{let r=k(De),i=k(Dr),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(to),o.handleError(s))})}}}]}function B2(e){let t=e?.ignoreChangesOutsideZone,n=e?.scheduleInRootZone,r=z2({ngZoneFactory:()=>{let i=U2(e);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&zu("NgZone_CoalesceEvent"),new De(i)},ignoreChangesOutsideZone:t,scheduleInRootZone:n});return sp([{provide:GJ,useValue:!0},{provide:Lg,useValue:!1},r])}function U2(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var nIe=(()=>{class e{subscription=new fn;initialized=!1;zone=k(De);pendingTasks=k(xl);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{De.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{De.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var WJ=(()=>{class e{applicationErrorHandler=k(Fs);appRef=k(No);taskService=k(xl);ngZone=k(De);zonelessEnabled=k(Lg);tracing=k(gp,{optional:!0});disableScheduling=k(KF,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new fn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Mk):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(JF,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Dk||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?IK:L7;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Mk+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,IK(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function rIe(){return typeof $localize<"u"&&$localize.locale||G0}var Xg=new X("",{providedIn:"root",factory:()=>k(Xg,{optional:!0,skipSelf:!0})||rIe()});var cT=class{destroyed=!1;listeners=null;errorHandler=k(to,{optional:!0});destroyRef=k(no);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(t){if(this.destroyed)throw new ye(953,!1);return(this.listeners??=[]).push(t),{unsubscribe:()=>{let n=this.listeners?.indexOf(t);n!==void 0&&n!==-1&&this.listeners?.splice(n,1)}}}emit(t){if(this.destroyed){console.warn(hl(953,!1));return}if(this.listeners===null)return;let n=Rt(null);try{for(let r of this.listeners)try{r(t)}catch(i){this.errorHandler?.handleError(i)}}finally{Rt(n)}}};function ci(e){return CW(e)}function us(e,t){return Qb(e,t?.equal)}var V2=class{[ki];constructor(t){this[ki]=t}destroy(){this[ki].destroy()}};function Uu(e,t){let n=t?.injector??k(ft),r=t?.manualCleanup!==!0?n.get(no):null,i,o=n.get(lf,null,{optional:!0}),s=n.get(Fa);return o!==null?(i=sIe(o.view,s,e),r instanceof p0&&r._lView===o.view&&(r=null)):i=aIe(e,n.get(S0),s),i.injector=n,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new V2(i)}var KJ=b(m({},EW),{cleanupFns:void 0,zone:null,onDestroyFn:df,run(){let e=$g(!1);try{IW(this)}finally{$g(e)}},cleanup(){if(!this.cleanupFns?.length)return;let e=Rt(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],Rt(e)}}}),iIe=b(m({},KJ),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Qd(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}}),oIe=b(m({},KJ),{consumerMarkedDirty(){this.view[zt]|=8192,up(this.view),this.notifier.notify(13)},destroy(){Qd(this),this.onDestroyFn(),this.cleanup(),this.view[Ru]?.delete(this)}});function sIe(e,t,n){let r=Object.create(oIe);return r.view=e,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=t,r.fn=JJ(r,n),e[Ru]??=new Set,e[Ru].add(r),r.consumerMarkedDirty(r),r}function aIe(e,t,n){let r=Object.create(iIe);return r.fn=JJ(r,e),r.scheduler=t,r.notifier=n,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function JJ(e,t){return()=>{t(n=>(e.cleanupFns??=[]).push(n))}}var dT=Symbol("InputSignalNode#UNSET"),sY=b(m({},Xb),{transformFn:void 0,applyValueToInputSignal(e,t){Zm(e,t)}});function aY(e,t){let n=Object.create(sY);n.value=e,n.transformFn=t?.transform;function r(){if(Jd(n),n.value===dT){let i=null;throw new ye(-950,i)}return n.value}return r[ki]=n,r}var K0=class{attributeName;constructor(t){this.attributeName=t}__NG_ELEMENT_ID__=()=>Gj(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},cY=new X("");cY.__NG_ELEMENT_ID__=e=>{let t=Ti();if(t===null)throw new ye(204,!1);if(t.type&2)return t.value;if(e&8)return null;throw new ye(204,!1)};function YJ(e,t){return aY(e,t)}function SIe(e){return aY(dT,e)}var lY=(YJ.required=SIe,YJ);function QJ(e,t){return O2(t)}function kIe(e,t){return M2(t)}var J0=(QJ.required=kIe,QJ);function XJ(e,t){return O2(t)}function TIe(e,t){return M2(t)}var uY=(XJ.required=TIe,XJ);function dY(e,t){let n=Object.create(sY),r=new cT;n.value=e;function i(){return Jd(n),eY(n.value),n.value}return i[ki]=n,i.asReadonly=hk.bind(i),i.set=o=>{n.equal(n.value,o)||(Zm(n,o),r.emit(o))},i.update=o=>{eY(n.value),i.set(o(n.value))},i.subscribe=r.subscribe.bind(r),i.destroyRef=r.destroyRef,i}function eY(e){if(e===dT)throw new ye(952,!1)}function tY(e,t){return dY(e,t)}function AIe(e){return dY(dT,e)}var Y0=(tY.required=AIe,tY);var Z2=new X(""),OIe=new X("");function W0(e){return!e.moduleRef}function MIe(e){let t=W0(e)?e.r3Injector:e.moduleRef.injector,n=t.get(De);return n.run(()=>{W0(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(Fs),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),W0(e)){let o=()=>t.destroy(),s=e.platformInjector.get(Z2);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>e.moduleRef.destroy(),s=e.platformInjector.get(Z2);s.add(o),e.moduleRef.onDestroy(()=>{T0(e.allPlatformModules,e.moduleRef),i.unsubscribe(),s.delete(o)})}return PIe(r,n,()=>{let o=t.get(xl),s=o.add(),a=t.get(P2);return a.runInitializers(),a.donePromise.then(()=>{let c=t.get(Xg,G0);if(NJ(c||G0),!t.get(OIe,!0))return W0(e)?t.get(No):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(W0(e)){let d=t.get(No);return e.rootComponent!==void 0&&d.bootstrap(e.rootComponent),d}else return DIe?.(e.moduleRef,e.allPlatformModules),e.moduleRef}).finally(()=>void o.remove(s))})})}var DIe;function PIe(e,t,n){try{let r=n();return Bu(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e(r)),r}}var lT=null;function RIe(e=[],t){return ft.create({name:t,providers:[{provide:h0,useValue:"platform"},{provide:Z2,useValue:new Set([()=>lT=null])},...e]})}function NIe(e=[]){if(lT)return lT;let t=RIe(e);return lT=t,DJ(),$Ie(t),t}function $Ie(e){let t=e.get(Hk,null);ho(e,()=>{t?.forEach(n=>n())})}var Tr=(()=>{class e{static __NG_ELEMENT_ID__=LIe}return e})();function LIe(e){return FIe(Ti(),bt(),(e&16)===16)}function FIe(e,t,n){if(lp(e)&&!n){let r=Ba(e.index,t);return new fp(r,r)}else if(e.type&175){let r=t[as];return new fp(r,t)}return null}var q2=class{constructor(){}supports(t){return S2(t)}create(t){return new G2(t)}},jIe=(e,t)=>t,G2=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||jIe}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<nY(r,i,o)?n:r,a=nY(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,d=c-i;if(u!=d){for(let g=0;g<u;g++){let h=g<o.length?o[g]:o[g]=0,v=h+g;d<=v&&v<u&&(o[g]=h+1)}let f=s.previousIndex;o[f]=d-u}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!S2(t))throw new ye(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,mJ(t,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new W2(n,r),o,i)),t}_verifyReinsertion(t,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let i=n===null?this._itHead:n._next;return t._next=i,t._prev=n,i===null?this._itTail=t:i._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new uT),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new uT),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},W2=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,n){this.item=t,this.trackById=n}},K2=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},uT=class{map=new Map;put(t){let n=t.trackById,r=this.map.get(n);r||(r=new K2,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,i=this.map.get(r);return i?i.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function nY(e,t,n){let r=e.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function rY(){return new pT([new q2])}var pT=(()=>{class e{factories;static \u0275prov=re({token:e,providedIn:"root",factory:rY});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:()=>{let r=k(e,{optional:!0,skipSelf:!0});return e.create(n,r||rY())}}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new ye(901,!1)}}return e})();function pY(e){let{rootComponent:t,appProviders:n,platformProviders:r,platformRef:i}=e;nr(8);try{let o=i?.injector??NIe(r),s=[z2({}),{provide:Fa,useExisting:WJ},dK,...n||[]],a=new R0({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return MIe({r3Injector:a.injector,platformInjector:o,rootComponent:t})}catch(o){return Promise.reject(o)}finally{nr(9)}}function Nr(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function Al(e,t=NaN){return!isNaN(parseFloat(e))&&!isNaN(Number(e))?Number(e):t}var H2=Symbol("NOT_SET"),mY=new Set,zIe=b(m({},Xb),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,value:H2,cleanup:null,consumerMarkedDirty(){if(this.sequence.impl.executing){if(this.sequence.lastPhase===null||this.sequence.lastPhase<this.phase)return;this.sequence.erroredOrDestroyed=!0}this.sequence.scheduler.notify(7)},phaseFn(e){if(this.sequence.lastPhase=this.phase,!this.dirty)return this.signal;if(this.dirty=!1,this.value!==H2&&!Hm(this))return this.signal;try{for(let i of this.cleanup??mY)i()}finally{this.cleanup?.clear()}let t=[];e!==void 0&&t.push(e),t.push(this.registerCleanupFn);let n=Yd(this),r;try{r=this.userFn.apply(null,t)}finally{Vm(this,n)}return(this.value===H2||!this.equal(this.value,r))&&(this.value=r,this.version++),this.signal}}),J2=class extends O0{scheduler;lastPhase=null;nodes=[void 0,void 0,void 0,void 0];constructor(t,n,r,i,o,s=null){super(t,[void 0,void 0,void 0,void 0],r,!1,o.get(no),s),this.scheduler=i;for(let a of p2){let c=n[a];if(c===void 0)continue;let u=Object.create(zIe);u.sequence=this,u.phase=a,u.userFn=c,u.dirty=!0,u.signal=()=>(Jd(u),u.value),u.signal[ki]=u,u.registerCleanupFn=d=>(u.cleanup??=new Set).add(d),this.nodes[a]=u,this.hooks[a]=d=>u.phaseFn(d)}}afterRun(){super.afterRun(),this.lastPhase=null}destroy(){super.destroy();for(let t of this.nodes)if(t)try{for(let n of t.cleanup??mY)n()}finally{Qd(t)}}};function fY(e,t){let n=t?.injector??k(ft),r=n.get(Fa),i=n.get(Kk),o=n.get(gp,null,{optional:!0});i.impl??=n.get(m2);let s=e;typeof s=="function"&&(s={mixedReadWrite:e});let a=n.get(lf,null,{optional:!0}),c=new J2(i.impl,[s.earlyRead,s.write,s.mixedReadWrite,s.read],a?.view,r,n,o?.snapshot(null));return i.impl.register(c),c}function mT(e,t){let n=Du(e),r=t.elementInjector||Og();return new hf(n).create(r,t.projectableNodes,t.hostElement,t.environmentInjector,t.directives,t.bindings)}var _Y=null;function Va(){return _Y}function Q2(e){_Y??=e}var Q0=class{},X2=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:()=>k(yY),providedIn:"platform"})}return e})();var yY=(()=>{class e extends X2{_location;_history;_doc=k(yt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Va().getBaseHref(this._doc)}onPopState(n){let r=Va().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Va().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function vY(e,t){return e?t?e.endsWith("/")?t.startsWith("/")?e+t.slice(1):e+t:t.startsWith("/")?e+t:`${e}/${t}`:e:t}function hY(e){let t=e.search(/#|\?|$/);return e[t-1]==="/"?e.slice(0,t-1)+e.slice(t):e}function bp(e){return e&&e[0]!=="?"?`?${e}`:e}var fT=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:()=>k(wY),providedIn:"root"})}return e})(),bY=new X(""),wY=(()=>{class e extends fT{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(yt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return vY(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+bp(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+bp(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+bp(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(Be(X2),Be(bY,8))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),wp=(()=>{class e{_subject=new ge;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=VIe(hY(gY(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+bp(r))}normalize(n){return e.stripTrailingSlash(UIe(this._basePath,gY(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+bp(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+bp(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=bp;static joinWithSlash=vY;static stripTrailingSlash=hY;static \u0275fac=function(r){return new(r||e)(Be(fT))};static \u0275prov=re({token:e,factory:()=>BIe(),providedIn:"root"})}return e})();function BIe(){return new wp(Be(fT))}function UIe(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function gY(e){return e.replace(/\/index.html$/,"")}function VIe(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var lz=(function(e){return e[e.Decimal=0]="Decimal",e[e.Percent=1]="Percent",e[e.Currency=2]="Currency",e[e.Scientific=3]="Scientific",e})(lz||{});var Fo=(function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e})(Fo||{}),dr=(function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e})(dr||{}),Bs=(function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e})(Bs||{}),Us={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function kY(e){return js(e)[ai.LocaleId]}function TY(e,t,n){let r=js(e),i=[r[ai.DayPeriodsFormat],r[ai.DayPeriodsStandalone]],o=Ha(i,t);return Ha(o,n)}function AY(e,t,n){let r=js(e),i=[r[ai.DaysFormat],r[ai.DaysStandalone]],o=Ha(i,t);return Ha(o,n)}function OY(e,t,n){let r=js(e),i=[r[ai.MonthsFormat],r[ai.MonthsStandalone]],o=Ha(i,t);return Ha(o,n)}function MY(e,t){let r=js(e)[ai.Eras];return Ha(r,t)}function X0(e,t){let n=js(e);return Ha(n[ai.DateFormat],t)}function ew(e,t){let n=js(e);return Ha(n[ai.TimeFormat],t)}function tw(e,t){let r=js(e)[ai.DateTimeFormat];return Ha(r,t)}function Ol(e,t){let n=js(e),r=n[ai.NumberSymbols][t];if(typeof r>"u"){if(t===Us.CurrencyDecimal)return n[ai.NumberSymbols][Us.Decimal];if(t===Us.CurrencyGroup)return n[ai.NumberSymbols][Us.Group]}return r}function DY(e,t){return js(e)[ai.NumberFormats][t]}function PY(e){if(!e[ai.ExtraData])throw new ye(2303,!1)}function RY(e){let t=js(e);return PY(t),(t[ai.ExtraData][2]||[]).map(r=>typeof r=="string"?ez(r):[ez(r[0]),ez(r[1])])}function NY(e,t,n){let r=js(e);PY(r);let i=[r[ai.ExtraData][0],r[ai.ExtraData][1]],o=Ha(i,t)||[];return Ha(o,n)||[]}function Ha(e,t){for(let n=t;n>-1;n--)if(typeof e[n]<"u")return e[n];throw new ye(2304,!1)}function ez(e){let[t,n]=e.split(":");return{hours:+t,minutes:+n}}var HIe=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,hT={},ZIe=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function $Y(e,t,n,r){let i=eSe(e);t=Hu(n,t)||t;let s=[],a;for(;t;)if(a=ZIe.exec(t),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;t=d}else{s.push(t);break}let c=i.getTimezoneOffset();r&&(c=FY(r,c),i=XIe(i,r));let u="";return s.forEach(d=>{let f=YIe(d);u+=f?f(i,n,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function bT(e,t,n){let r=new Date(0);return r.setFullYear(e,t,n),r.setHours(0,0,0),r}function Hu(e,t){let n=kY(e);if(hT[n]??={},hT[n][t])return hT[n][t];let r="";switch(t){case"shortDate":r=X0(e,Bs.Short);break;case"mediumDate":r=X0(e,Bs.Medium);break;case"longDate":r=X0(e,Bs.Long);break;case"fullDate":r=X0(e,Bs.Full);break;case"shortTime":r=ew(e,Bs.Short);break;case"mediumTime":r=ew(e,Bs.Medium);break;case"longTime":r=ew(e,Bs.Long);break;case"fullTime":r=ew(e,Bs.Full);break;case"short":let i=Hu(e,"shortTime"),o=Hu(e,"shortDate");r=gT(tw(e,Bs.Short),[i,o]);break;case"medium":let s=Hu(e,"mediumTime"),a=Hu(e,"mediumDate");r=gT(tw(e,Bs.Medium),[s,a]);break;case"long":let c=Hu(e,"longTime"),u=Hu(e,"longDate");r=gT(tw(e,Bs.Long),[c,u]);break;case"full":let d=Hu(e,"fullTime"),f=Hu(e,"fullDate");r=gT(tw(e,Bs.Full),[d,f]);break}return r&&(hT[n][t]=r),r}function gT(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(n,r){return t!=null&&r in t?t[r]:n})),e}function Sc(e,t,n="-",r,i){let o="";(e<0||i&&e<=0)&&(i?e=-e+1:(e=-e,o=n));let s=String(e);for(;s.length<t;)s="0"+s;return r&&(s=s.slice(s.length-t)),o+s}function qIe(e,t){return Sc(e,3).substring(0,t)}function Mi(e,t,n=0,r=!1,i=!1){return function(o,s){let a=GIe(e,o);if((n>0||a>-n)&&(a+=n),e===3)a===0&&n===-12&&(a=12);else if(e===6)return qIe(a,t);let c=Ol(s,Us.MinusSign);return Sc(a,t,c,r,i)}}function GIe(e,t){switch(e){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new ye(2301,!1)}}function Ar(e,t,n=Fo.Format,r=!1){return function(i,o){return WIe(i,o,e,t,n,r)}}function WIe(e,t,n,r,i,o){switch(n){case 2:return OY(t,i,r)[e.getMonth()];case 1:return AY(t,i,r)[e.getDay()];case 0:let s=e.getHours(),a=e.getMinutes();if(o){let u=RY(t),d=NY(t,i,r),f=u.findIndex(g=>{if(Array.isArray(g)){let[h,v]=g,x=s>=h.hours&&a>=h.minutes,E=s<v.hours||s===v.hours&&a<v.minutes;if(h.hours<v.hours){if(x&&E)return!0}else if(x||E)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return TY(t,i,r)[s<12?0:1];case 3:return MY(t,r)[e.getFullYear()<=0?0:1];default:let c=n;throw new ye(2302,!1)}}function _T(e){return function(t,n,r){let i=-1*r,o=Ol(n,Us.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(e){case 0:return(i>=0?"+":"")+Sc(s,2,o)+Sc(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Sc(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Sc(s,2,o)+":"+Sc(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Sc(s,2,o)+":"+Sc(Math.abs(i%60),2,o);default:throw new ye(2310,!1)}}}var KIe=0,vT=4;function JIe(e){let t=bT(e,KIe,1).getDay();return bT(e,0,1+(t<=vT?vT:vT+7)-t)}function LY(e){let t=e.getDay(),n=t===0?-3:vT-t;return bT(e.getFullYear(),e.getMonth(),e.getDate()+n)}function tz(e,t=!1){return function(n,r){let i;if(t){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=LY(n),s=JIe(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Sc(i,e,Ol(r,Us.MinusSign))}}function yT(e,t=!1){return function(n,r){let o=LY(n).getFullYear();return Sc(o,e,Ol(r,Us.MinusSign),t)}}var nz={};function YIe(e){if(nz[e])return nz[e];let t;switch(e){case"G":case"GG":case"GGG":t=Ar(3,dr.Abbreviated);break;case"GGGG":t=Ar(3,dr.Wide);break;case"GGGGG":t=Ar(3,dr.Narrow);break;case"y":t=Mi(0,1,0,!1,!0);break;case"yy":t=Mi(0,2,0,!0,!0);break;case"yyy":t=Mi(0,3,0,!1,!0);break;case"yyyy":t=Mi(0,4,0,!1,!0);break;case"Y":t=yT(1);break;case"YY":t=yT(2,!0);break;case"YYY":t=yT(3);break;case"YYYY":t=yT(4);break;case"M":case"L":t=Mi(1,1,1);break;case"MM":case"LL":t=Mi(1,2,1);break;case"MMM":t=Ar(2,dr.Abbreviated);break;case"MMMM":t=Ar(2,dr.Wide);break;case"MMMMM":t=Ar(2,dr.Narrow);break;case"LLL":t=Ar(2,dr.Abbreviated,Fo.Standalone);break;case"LLLL":t=Ar(2,dr.Wide,Fo.Standalone);break;case"LLLLL":t=Ar(2,dr.Narrow,Fo.Standalone);break;case"w":t=tz(1);break;case"ww":t=tz(2);break;case"W":t=tz(1,!0);break;case"d":t=Mi(2,1);break;case"dd":t=Mi(2,2);break;case"c":case"cc":t=Mi(7,1);break;case"ccc":t=Ar(1,dr.Abbreviated,Fo.Standalone);break;case"cccc":t=Ar(1,dr.Wide,Fo.Standalone);break;case"ccccc":t=Ar(1,dr.Narrow,Fo.Standalone);break;case"cccccc":t=Ar(1,dr.Short,Fo.Standalone);break;case"E":case"EE":case"EEE":t=Ar(1,dr.Abbreviated);break;case"EEEE":t=Ar(1,dr.Wide);break;case"EEEEE":t=Ar(1,dr.Narrow);break;case"EEEEEE":t=Ar(1,dr.Short);break;case"a":case"aa":case"aaa":t=Ar(0,dr.Abbreviated);break;case"aaaa":t=Ar(0,dr.Wide);break;case"aaaaa":t=Ar(0,dr.Narrow);break;case"b":case"bb":case"bbb":t=Ar(0,dr.Abbreviated,Fo.Standalone,!0);break;case"bbbb":t=Ar(0,dr.Wide,Fo.Standalone,!0);break;case"bbbbb":t=Ar(0,dr.Narrow,Fo.Standalone,!0);break;case"B":case"BB":case"BBB":t=Ar(0,dr.Abbreviated,Fo.Format,!0);break;case"BBBB":t=Ar(0,dr.Wide,Fo.Format,!0);break;case"BBBBB":t=Ar(0,dr.Narrow,Fo.Format,!0);break;case"h":t=Mi(3,1,-12);break;case"hh":t=Mi(3,2,-12);break;case"H":t=Mi(3,1);break;case"HH":t=Mi(3,2);break;case"m":t=Mi(4,1);break;case"mm":t=Mi(4,2);break;case"s":t=Mi(5,1);break;case"ss":t=Mi(5,2);break;case"S":t=Mi(6,1);break;case"SS":t=Mi(6,2);break;case"SSS":t=Mi(6,3);break;case"Z":case"ZZ":case"ZZZ":t=_T(0);break;case"ZZZZZ":t=_T(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=_T(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=_T(2);break;default:return null}return nz[e]=t,t}function FY(e,t){e=e.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function QIe(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function XIe(e,t,n){let i=e.getTimezoneOffset(),o=FY(t,i);return QIe(e,-1*(o-i))}function eSe(e){if(xY(e))return e;if(typeof e=="number"&&!isNaN(e))return new Date(e);if(typeof e=="string"){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){let[i,o=1,s=1]=e.split("-").map(a=>+a);return bT(i,o-1,s)}let n=parseFloat(e);if(!isNaN(e-n))return new Date(n);let r;if(r=e.match(HIe))return tSe(r)}let t=new Date(e);if(!xY(t))throw new ye(2311,!1);return t}function tSe(e){let t=new Date(0),n=0,r=0,i=e[8]?t.setUTCFullYear:t.setFullYear,o=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),r=Number(e[9]+e[11])),i.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));let s=Number(e[4]||0)-n,a=Number(e[5]||0)-r,c=Number(e[6]||0),u=Math.floor(parseFloat("0."+(e[7]||0))*1e3);return o.call(t,s,a,c,u),t}function xY(e){return e instanceof Date&&!isNaN(e.valueOf())}var nSe=/^(\d+)?\.((\d+)(-(\d+))?)?$/,CY=22,wT=".",nw="0",rSe=";",iSe=",",rz="#";function oSe(e,t,n,r,i,o,s=!1){let a="",c=!1;if(!isFinite(e))a=Ol(n,Us.Infinity);else{let u=cSe(e);s&&(u=aSe(u));let d=t.minInt,f=t.minFrac,g=t.maxFrac;if(o){let S=o.match(nSe);if(S===null)throw new ye(2306,!1);let A=S[1],P=S[3],F=S[5];A!=null&&(d=iz(A)),P!=null&&(f=iz(P)),F!=null?g=iz(F):P!=null&&f>g&&(g=f)}lSe(u,f,g);let h=u.digits,v=u.integerLen,x=u.exponent,E=[];for(c=h.every(S=>!S);v<d;v++)h.unshift(0);for(;v<0;v++)h.unshift(0);v>0?E=h.splice(v,h.length):(E=h,h=[0]);let C=[];for(h.length>=t.lgSize&&C.unshift(h.splice(-t.lgSize,h.length).join(""));h.length>t.gSize;)C.unshift(h.splice(-t.gSize,h.length).join(""));h.length&&C.unshift(h.join("")),a=C.join(Ol(n,r)),E.length&&(a+=Ol(n,i)+E.join("")),x&&(a+=Ol(n,Us.Exponential)+"+"+x)}return e<0&&!c?a=t.negPre+a+t.negSuf:a=t.posPre+a+t.posSuf,a}function jY(e,t,n){let r=DY(t,lz.Decimal),i=sSe(r,Ol(t,Us.MinusSign));return oSe(e,i,t,Us.Group,Us.Decimal,n)}function sSe(e,t="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=e.split(rSe),i=r[0],o=r[1],s=i.indexOf(wT)!==-1?i.split(wT):[i.substring(0,i.lastIndexOf(nw)+1),i.substring(i.lastIndexOf(nw)+1)],a=s[0],c=s[1]||"";n.posPre=a.substring(0,a.indexOf(rz));for(let d=0;d<c.length;d++){let f=c.charAt(d);f===nw?n.minFrac=n.maxFrac=d+1:f===rz?n.maxFrac=d+1:n.posSuf+=f}let u=a.split(iSe);if(n.gSize=u[1]?u[1].length:0,n.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,o){let d=i.length-n.posPre.length-n.posSuf.length,f=o.indexOf(rz);n.negPre=o.substring(0,f).replace(/'/g,""),n.negSuf=o.slice(f+d).replace(/'/g,"")}else n.negPre=t+n.posPre,n.negSuf=n.posSuf;return n}function aSe(e){if(e.digits[0]===0)return e;let t=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(t===0?e.digits.push(0,0):t===1&&e.digits.push(0),e.integerLen+=2),e}function cSe(e){let t=Math.abs(e)+"",n=0,r,i,o,s,a;for((i=t.indexOf(wT))>-1&&(t=t.replace(wT,"")),(o=t.search(/e/i))>0?(i<0&&(i=o),i+=+t.slice(o+1),t=t.substring(0,o)):i<0&&(i=t.length),o=0;t.charAt(o)===nw;o++);if(o===(a=t.length))r=[0],i=1;else{for(a--;t.charAt(a)===nw;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(t.charAt(o))}return i>CY&&(r=r.splice(0,CY-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function lSe(e,t,n){if(t>n)throw new ye(2307,!1);let r=e.digits,i=r.length-e.integerLen,o=Math.min(Math.max(t,i),n),s=o+e.integerLen,a=r[s];if(s>0){r.splice(Math.max(e.integerLen,s));for(let f=s;f<r.length;f++)r[f]=0}else{i=Math.max(0,i),e.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let f=1;f<s;f++)r[f]=0}if(a>=5)if(s-1<0){for(let f=0;f>s;f--)r.unshift(0),e.integerLen++;r.unshift(1),e.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,u=t+e.integerLen,d=r.reduceRight(function(f,g,h,v){return g=g+f,v[h]=g<10?g:g-10,c&&(v[h]===0&&h>=u?v.pop():c=!1),g>=10?1:0},0);d&&(r.unshift(d),e.integerLen++)}function iz(e){let t=parseInt(e);if(isNaN(t))throw new ye(2305,!1);return t}var oz=/\s+/,EY=[],rw=(()=>{class e{_ngEl;_renderer;initialClasses=EY;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(oz):EY}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(oz):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(oz).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||e)(Ee(nt),Ee(rr))};static \u0275dir=Ne({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return e})();var xT=class{$implicit;ngForOf;index;count;constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Ml=(()=>{class e{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new xT(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),IY(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);IY(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(Ee(Zi),Ee(Po),Ee(pT))};static \u0275dir=Ne({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return e})();function IY(e,t){e.context.$implicit=t.item}var ha=(()=>{class e{_viewContainer;_context=new CT;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){SY(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){SY(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(Ee(Zi),Ee(Po))};static \u0275dir=Ne({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return e})(),CT=class{$implicit=null;ngIf=null};function SY(e,t){if(e&&!e.createEmbeddedView)throw new ye(2020,!1)}var sz=class{_viewContainerRef;_templateRef;_created=!1;constructor(t,n){this._viewContainerRef=t,this._templateRef=n}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}},ET=(()=>{class e{_defaultViews=[];_defaultUsed=!1;_caseCount=0;_lastCaseCheckIndex=0;_lastCasesMatched=!1;_ngSwitch;set ngSwitch(n){this._ngSwitch=n,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(n){this._defaultViews.push(n)}_matchCase(n){let r=n===this._ngSwitch;return this._lastCasesMatched||=r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(n){if(this._defaultViews.length>0&&n!==this._defaultUsed){this._defaultUsed=n;for(let r of this._defaultViews)r.enforceState(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ne({type:e,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}})}return e})(),uz=(()=>{class e{ngSwitch;_view;ngSwitchCase;constructor(n,r,i){this.ngSwitch=i,i._addCase(),this._view=new sz(n,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static \u0275fac=function(r){return new(r||e)(Ee(Zi),Ee(Po),Ee(ET,9))};static \u0275dir=Ne({type:e,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}})}return e})();var iw=(()=>{class e{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(n){this._viewContainerRef=n}ngOnChanges(n){if(this._shouldRecreateView(n)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let i=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,i,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(n){return!!n.ngTemplateOutlet||!!n.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(n,r,i)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,i):!1,get:(n,r,i)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,i)}})}static \u0275fac=function(r){return new(r||e)(Ee(Zi))};static \u0275dir=Ne({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[br]})}return e})();function IT(e,t){return new ye(2100,!1)}var az=class{createSubscription(t,n,r){return ci(()=>t.subscribe({next:n,error:r}))}dispose(t){ci(()=>t.unsubscribe())}},cz=class{createSubscription(t,n,r){return t.then(i=>n?.(i),i=>r?.(i)),{unsubscribe:()=>{n=null,r=null}}}dispose(t){t.unsubscribe()}},uSe=new cz,dSe=new az,dz=(()=>{class e{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=k(Fs);constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r),r=>this.applicationErrorHandler(r))}_selectStrategy(n){if(Bu(n))return uSe;if(rT(n))return dSe;throw IT(e,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||e)(Ee(Tr,16))};static \u0275pipe=cr({name:"async",type:e,pure:!1})}return e})();var pSe=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,pz=(()=>{class e{transform(n){if(n==null)return null;if(typeof n!="string")throw IT(e,n);return n.replace(pSe,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static \u0275fac=function(r){return new(r||e)};static \u0275pipe=cr({name:"titlecase",type:e,pure:!0})}return e})();var mSe="mediumDate",zY=new X(""),BY=new X(""),mz=(()=>{class e{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??mSe,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return $Y(n,s,o||this.locale,a)}catch(s){throw IT(e,s.message)}}static \u0275fac=function(r){return new(r||e)(Ee(Xg,16),Ee(zY,24),Ee(BY,24))};static \u0275pipe=cr({name:"date",type:e,pure:!0})}return e})();var fz=(()=>{class e{transform(n){return JSON.stringify(n,null,2)}static \u0275fac=function(r){return new(r||e)};static \u0275pipe=cr({name:"json",type:e,pure:!1})}return e})();var hz=(()=>{class e{_locale;constructor(n){this._locale=n}transform(n,r,i){if(!fSe(n))return null;i||=this._locale;try{let o=hSe(n);return jY(o,i,r)}catch(o){throw IT(e,o.message)}}static \u0275fac=function(r){return new(r||e)(Ee(Xg,16))};static \u0275pipe=cr({name:"number",type:e,pure:!0})}return e})();function fSe(e){return!(e==null||e===""||e!==e)}function hSe(e){if(typeof e=="string"&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if(typeof e!="number")throw new ye(2309,!1);return e}var ro=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({})}return e})();function ow(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var bf=class{};var gz="browser";function Zu(e){return e===gz}var sw=class{_doc;constructor(t){this._doc=t}manager},ST=(()=>{class e extends sw{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||e)(Be(yt))};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})(),TT=new X(""),wz=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof ST));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof ST);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new ye(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(Be(TT),Be(De))};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})(),_z="ng-app-id";function UY(e){for(let t of e)t.remove()}function VY(e,t){let n=t.createElement("style");return n.textContent=e,n}function gSe(e,t,n,r){let i=e.head?.querySelectorAll(`style[${_z}="${t}"],link[${_z}="${t}"]`);if(i)for(let o of i)o.removeAttribute(_z),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function vz(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var xz=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,gSe(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,VY);r?.forEach(i=>this.addUsage(i,this.external,vz))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(UY(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])UY(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,VY(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,vz(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(Be(yt),Be(qg),Be(Gg,8),Be(Fu))};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})(),yz={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Cz=/%COMP%/g;var ZY="%COMP%",_Se=`_nghost-${ZY}`,ySe=`_ngcontent-${ZY}`,vSe=!0,bSe=new X("",{providedIn:"root",factory:()=>vSe});function wSe(e){return ySe.replace(Cz,e)}function xSe(e){return _Se.replace(Cz,e)}function qY(e,t){return t.map(n=>n.replace(Cz,e))}var Ez=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,c=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new aw(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof kT?i.applyToHost(n):i instanceof cw&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case $u.Emulated:o=new kT(c,u,r,this.appId,d,s,a,f,g);break;case $u.ShadowDom:return new bz(c,u,n,r,s,a,this.nonce,f,g);default:o=new cw(c,u,r,d,s,a,f,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||e)(Be(wz),Be(xz),Be(qg),Be(bSe),Be(yt),Be(De),Be(Gg),Be(gp,8))};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})(),aw=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,i,o){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(yz[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(HY(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(HY(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new ye(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=yz[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=yz[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(El.DashCase|El.Important)?t.style.setProperty(n,r,i&El.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&El.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r,i){if(typeof t=="string"&&(t=Va().getGlobalEventTarget(this.doc,t),!t))throw new ye(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,n,o)),this.eventManager.addEventListener(t,n,o,i)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;t(n)===!1&&n.preventDefault()}}};function HY(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var bz=class extends aw{sharedStylesHost;hostEl;shadowRoot;constructor(t,n,r,i,o,s,a,c,u){super(t,o,s,c,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=i.styles;d=qY(i.id,d);for(let g of d){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=g,this.shadowRoot.appendChild(h)}let f=i.getExternalStyles?.();if(f)for(let g of f){let h=vz(g,o);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},cw=class extends aw{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,i,o,s,a,c,u){super(t,o,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=u?qY(u,d):d,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&ff.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},kT=class extends cw{contentAttr;hostAttr;constructor(t,n,r,i,o,s,a,c,u){let d=i+"-"+r.id;super(t,n,r,o,s,a,c,u,d),this.contentAttr=wSe(d),this.hostAttr=xSe(d)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}};var AT=class e extends Q0{supportsDOMEvents=!0;static makeCurrent(){Q2(new e)}onAndCancel(t,n,r,i){return t.addEventListener(n,r,i),()=>{t.removeEventListener(n,r,i)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=CSe();return n==null?null:ESe(n)}resetBaseElement(){lw=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return ow(document.cookie,t)}},lw=null;function CSe(){return lw=lw||document.head.querySelector("base"),lw?lw.getAttribute("href"):null}function ESe(e){return new URL(e,document.baseURI).pathname}var ISe=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})(),GY=["alt","control","meta","shift"],SSe={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kSe={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},WY=(()=>{class e extends sw{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Va().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),GY.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=SSe[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),GY.forEach(s=>{if(s!==i){let a=kSe[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(Be(yt))};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})();function Iz(e,t,n){let r=m({rootComponent:e,platformRef:n?.platformRef},TSe(t));return pY(r)}function TSe(e){return{appProviders:[...PSe,...e?.providers??[]],platformProviders:DSe}}function ASe(){AT.makeCurrent()}function OSe(){return new to}function MSe(){return Kj(document),document}var DSe=[{provide:Fu,useValue:gz},{provide:Hk,useValue:ASe,multi:!0},{provide:yt,useFactory:MSe}];var PSe=[{provide:h0,useValue:"root"},{provide:to,useFactory:OSe},{provide:TT,useClass:ST,multi:!0,deps:[yt]},{provide:TT,useClass:WY,multi:!0,deps:[yt]},Ez,xz,wz,{provide:Ai,useExisting:Ez},{provide:bf,useClass:ISe},[]];var r_=class{},uw=class{},xp=class e{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let i=(t.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=t.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(t,n){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var MT=class{encodeKey(t){return KY(t)}encodeValue(t){return KY(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function RSe(e,t){let n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var NSe=/%(\d[a-f0-9])/gi,$Se={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function KY(e){return encodeURIComponent(e).replace(NSe,(t,n)=>$Se[n]??t)}function OT(e){return`${e}`}var qu=class e{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new MT,t.fromString){if(t.fromObject)throw new ye(2805,!1);this.map=RSe(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{let r=t.fromObject[n],i=Array.isArray(r)?r.map(OT):[OT(r)];this.map.set(n,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){let n=[];return Object.keys(t).forEach(r=>{let i=t[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let n=(t.op==="a"?this.map.get(t.param):void 0)||[];n.push(OT(t.value)),this.map.set(t.param,n);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],i=r.indexOf(OT(t.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var DT=class{map=new Map;set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function LSe(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function JY(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function YY(e){return typeof Blob<"u"&&e instanceof Blob}function QY(e){return typeof FormData<"u"&&e instanceof FormData}function FSe(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var XY="Content-Type",eQ="Accept",nQ="X-Request-URL",rQ="text/plain",iQ="application/json",jSe=`${iQ}, ${rQ}, */*`,t_=class e{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(t,n,r,i){this.url=n,this.method=t.toUpperCase();let o;if(LSe(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new ye(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),this.transferCache=o.transferCache}if(this.headers??=new xp,this.context??=new DT,!this.params)this.params=new qu,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||JY(this.body)||YY(this.body)||QY(this.body)||FSe(this.body)?this.body:this.body instanceof qu?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||QY(this.body)?null:YY(this.body)?this.body.type||null:JY(this.body)?null:typeof this.body=="string"?rQ:this.body instanceof qu?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?iQ:null}clone(t={}){let n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=t.keepalive??this.keepalive,s=t.priority||this.priority,a=t.cache||this.cache,c=t.mode||this.mode,u=t.redirect||this.redirect,d=t.credentials||this.credentials,f=t.referrer||this.referrer,g=t.integrity||this.integrity,h=t.transferCache??this.transferCache,v=t.timeout??this.timeout,x=t.body!==void 0?t.body:this.body,E=t.withCredentials??this.withCredentials,C=t.reportProgress??this.reportProgress,S=t.headers||this.headers,A=t.params||this.params,P=t.context??this.context;return t.setHeaders!==void 0&&(S=Object.keys(t.setHeaders).reduce((F,B)=>F.set(B,t.setHeaders[B]),S)),t.setParams&&(A=Object.keys(t.setParams).reduce((F,B)=>F.set(B,t.setParams[B]),A)),new e(n,r,x,{params:A,headers:S,context:P,reportProgress:C,responseType:i,withCredentials:E,transferCache:h,keepalive:o,cache:a,priority:s,timeout:v,mode:c,redirect:u,credentials:d,referrer:f,integrity:g})}},wf=(function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e})(wf||{}),i_=class{headers;status;statusText;url;ok;type;redirected;constructor(t,n=200,r="OK"){this.headers=t.headers||new xp,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.redirected=t.redirected,this.ok=this.status>=200&&this.status<300}},PT=class e extends i_{constructor(t={}){super(t)}type=wf.ResponseHeader;clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},dw=class e extends i_{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=wf.Response;clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0,redirected:t.redirected??this.redirected})}},n_=class extends i_{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},zSe=200,BSe=204;function Sz(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,credentials:e.credentials,transferCache:e.transferCache,timeout:e.timeout,keepalive:e.keepalive,priority:e.priority,cache:e.cache,mode:e.mode,redirect:e.redirect,integrity:e.integrity,referrer:e.referrer}}var o_=(()=>{class e{handler;constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof t_)o=n;else{let c;i.headers instanceof xp?c=i.headers:c=new xp(i.headers);let u;i.params&&(i.params instanceof qu?u=i.params:u=new qu({fromObject:i.params})),o=new t_(n,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,integrity:i.integrity,timeout:i.timeout})}let s=Xe(o).pipe(tp(c=>this.handler.handle(c)));if(n instanceof t_||i.observe==="events")return s;let a=s.pipe(Kt(c=>c instanceof dw));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(et(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new ye(2806,!1);return c.body}));case"blob":return a.pipe(et(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new ye(2807,!1);return c.body}));case"text":return a.pipe(et(c=>{if(c.body!==null&&typeof c.body!="string")throw new ye(2808,!1);return c.body}));case"json":default:return a.pipe(et(c=>c.body))}case"response":return a;default:throw new ye(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new qu().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,Sz(i,r))}post(n,r,i={}){return this.request("POST",n,Sz(i,r))}put(n,r,i={}){return this.request("PUT",n,Sz(i,r))}static \u0275fac=function(r){return new(r||e)(Be(r_))};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})();var USe=new X("");function oQ(e,t){return t(e)}function VSe(e,t){return(n,r)=>t.intercept(n,{handle:i=>e(i,r)})}function HSe(e,t,n){return(r,i)=>ho(n,()=>t(r,o=>e(o,i)))}var sQ=new X(""),Tz=new X(""),aQ=new X(""),Az=new X("",{providedIn:"root",factory:()=>!0});function ZSe(){let e=null;return(t,n)=>{e===null&&(e=(k(sQ,{optional:!0})??[]).reduceRight(VSe,oQ));let r=k(uf);if(k(Az)){let o=r.add();return e(t,n).pipe(ml(o))}else return e(t,n)}}var RT=(()=>{class e extends r_{backend;injector;chain=null;pendingTasks=k(uf);contributeToStability=k(Az);constructor(n,r){super(),this.backend=n,this.injector=r}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Tz),...this.injector.get(aQ,[])]));this.chain=r.reduceRight((i,o)=>HSe(i,o,this.injector),oQ)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(ml(r))}else return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||e)(Be(uw),Be(Dr))};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})();var qSe=/^\)\]\}',?\n/,GSe=RegExp(`^${nQ}:`,"m");function WSe(e){return"responseURL"in e&&e.responseURL?e.responseURL:GSe.test(e.getAllResponseHeaders())?e.getResponseHeader(nQ):null}var kz=(()=>{class e{xhrFactory;constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new ye(-2800,!1);let r=this.xhrFactory;return Xe(null).pipe(oi(()=>new Nt(o=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((E,C)=>s.setRequestHeader(E,C.join(","))),n.headers.has(eQ)||s.setRequestHeader(eQ,jSe),!n.headers.has(XY)){let E=n.detectContentTypeHeader();E!==null&&s.setRequestHeader(XY,E)}if(n.timeout&&(s.timeout=n.timeout),n.responseType){let E=n.responseType.toLowerCase();s.responseType=E!=="json"?E:"text"}let a=n.serializeBody(),c=null,u=()=>{if(c!==null)return c;let E=s.statusText||"OK",C=new xp(s.getAllResponseHeaders()),S=WSe(s)||n.url;return c=new PT({headers:C,status:s.status,statusText:E,url:S}),c},d=()=>{let{headers:E,status:C,statusText:S,url:A}=u(),P=null;C!==BSe&&(P=typeof s.response>"u"?s.responseText:s.response),C===0&&(C=P?zSe:0);let F=C>=200&&C<300;if(n.responseType==="json"&&typeof P=="string"){let B=P;P=P.replace(qSe,"");try{P=P!==""?JSON.parse(P):null}catch(ee){P=B,F&&(F=!1,P={error:ee,text:P})}}F?(o.next(new dw({body:P,headers:E,status:C,statusText:S,url:A||void 0})),o.complete()):o.error(new n_({error:P,headers:E,status:C,statusText:S,url:A||void 0}))},f=E=>{let{url:C}=u(),S=new n_({error:E,status:s.status||0,statusText:s.statusText||"Unknown Error",url:C||void 0});o.error(S)},g=f;n.timeout&&(g=E=>{let{url:C}=u(),S=new n_({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:C||void 0});o.error(S)});let h=!1,v=E=>{h||(o.next(u()),h=!0);let C={type:wf.DownloadProgress,loaded:E.loaded};E.lengthComputable&&(C.total=E.total),n.responseType==="text"&&s.responseText&&(C.partialText=s.responseText),o.next(C)},x=E=>{let C={type:wf.UploadProgress,loaded:E.loaded};E.lengthComputable&&(C.total=E.total),o.next(C)};return s.addEventListener("load",d),s.addEventListener("error",f),s.addEventListener("timeout",g),s.addEventListener("abort",f),n.reportProgress&&(s.addEventListener("progress",v),a!==null&&s.upload&&s.upload.addEventListener("progress",x)),s.send(a),o.next({type:wf.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",d),s.removeEventListener("timeout",g),n.reportProgress&&(s.removeEventListener("progress",v),a!==null&&s.upload&&s.upload.removeEventListener("progress",x)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||e)(Be(bf))};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})(),cQ=new X(""),KSe="XSRF-TOKEN",JSe=new X("",{providedIn:"root",factory:()=>KSe}),YSe="X-XSRF-TOKEN",QSe=new X("",{providedIn:"root",factory:()=>YSe}),pw=class{},XSe=(()=>{class e{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(n,r){this.doc=n,this.cookieName=r}getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=ow(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||e)(Be(yt),Be(JSe))};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})(),eke=/^(?:https?:)?\/\//i;function tke(e,t){if(!k(cQ)||e.method==="GET"||e.method==="HEAD"||eke.test(e.url))return t(e);let n=k(pw).getToken(),r=k(QSe);return n!=null&&!e.headers.has(r)&&(e=e.clone({headers:e.headers.set(r,n)})),t(e)}var Oz=(function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e})(Oz||{});function nke(e,t){return{\u0275kind:e,\u0275providers:t}}function Mz(...e){let t=[o_,kz,RT,{provide:r_,useExisting:RT},{provide:uw,useFactory:()=>k(USe,{optional:!0})??k(kz)},{provide:Tz,useValue:tke,multi:!0},{provide:cQ,useValue:!0},{provide:pw,useClass:XSe}];for(let n of e)t.push(...n.\u0275providers);return sp(t)}var tQ=new X("");function Dz(){return nke(Oz.LegacyInterceptors,[{provide:tQ,useFactory:ZSe},{provide:Tz,useExisting:tQ,multi:!0}])}var uQ=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||e)(Be(yt))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var mw=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:function(r){let i=null;return r?i=new(r||e):i=Be(rke),i},providedIn:"root"})}return e})(),rke=(()=>{class e extends mw{_doc;constructor(n){super(),this._doc=n}sanitize(n,r){if(r==null)return null;switch(n){case Hi.NONE:return r;case Hi.HTML:return hp(r,"HTML")?Sl(r):n2(this._doc,String(r)).toString();case Hi.STYLE:return hp(r,"Style")?Sl(r):r;case Hi.SCRIPT:if(hp(r,"Script"))return Sl(r);throw new ye(5200,!1);case Hi.URL:return hp(r,"URL")?Sl(r):F0(String(r));case Hi.RESOURCE_URL:if(hp(r,"ResourceURL"))return Sl(r);throw new ye(5201,!1);default:throw new ye(5202,!1)}}bypassSecurityTrustHtml(n){return Yj(n)}bypassSecurityTrustStyle(n){return Qj(n)}bypassSecurityTrustScript(n){return Xj(n)}bypassSecurityTrustUrl(n){return e2(n)}bypassSecurityTrustResourceUrl(n){return t2(n)}static \u0275fac=function(r){return new(r||e)(Be(yt))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var tn="primary",Sw=Symbol("RouteTitle"),Fz=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function d_(e){return new Fz(e)}function ike(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=e[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function oke(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Dl(e[n],t[n]))return!1;return!0}function Dl(e,t){let n=e?jz(e):void 0,r=t?jz(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!yQ(e[i],t[i]))return!1;return!0}function jz(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function yQ(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function vQ(e){return e.length>0?e[e.length-1]:null}function Ku(e){return VS(e)?e:Bu(e)?Zr(Promise.resolve(e)):Xe(e)}var ske={exact:wQ,subset:xQ},bQ={exact:ake,subset:cke,ignored:()=>!0};function dQ(e,t,n){return ske[n.paths](e.root,t.root,n.matrixParams)&&bQ[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function ake(e,t){return Dl(e,t)}function wQ(e,t,n){if(!Cf(e.segments,t.segments)||!LT(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!wQ(e.children[r],t.children[r],n))return!1;return!0}function cke(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>yQ(e[n],t[n]))}function xQ(e,t,n){return CQ(e,t,t.segments,n)}function CQ(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!Cf(i,n)||t.hasChildren()||!LT(i,n,r))}else if(e.segments.length===n.length){if(!Cf(e.segments,n)||!LT(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!xQ(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!Cf(e.segments,i)||!LT(e.segments,i,r)||!e.children[tn]?!1:CQ(e.children[tn],t,o,r)}}function LT(e,t,n){return t.every((r,i)=>bQ[n](e[i].parameters,r.parameters))}var Wu=class{root;queryParams;fragment;_queryParamMap;constructor(t=new Yn([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=d_(this.queryParams),this._queryParamMap}toString(){return dke.serialize(this)}},Yn=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return FT(this)}},xf=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=d_(this.parameters),this._parameterMap}toString(){return IQ(this)}};function lke(e,t){return Cf(e,t)&&e.every((n,r)=>Dl(n.parameters,t[r].parameters))}function Cf(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function uke(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===tn&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==tn&&(n=n.concat(t(i,r)))}),n}var JT=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:()=>new p_,providedIn:"root"})}return e})(),p_=class{parse(t){let n=new Bz(t);return new Wu(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${fw(t.root,!0)}`,r=fke(t.queryParams),i=typeof t.fragment=="string"?`#${pke(t.fragment)}`:"";return`${n}${r}${i}`}},dke=new p_;function FT(e){return e.segments.map(t=>IQ(t)).join("/")}function fw(e,t){if(!e.hasChildren())return FT(e);if(t){let n=e.children[tn]?fw(e.children[tn],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==tn&&r.push(`${i}:${fw(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=uke(e,(r,i)=>i===tn?[fw(e.children[tn],!1)]:[`${i}:${fw(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[tn]!=null?`${FT(e)}/${n[0]}`:`${FT(e)}/(${n.join("//")})`}}function EQ(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function NT(e){return EQ(e).replace(/%3B/gi,";")}function pke(e){return encodeURI(e)}function zz(e){return EQ(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function jT(e){return decodeURIComponent(e)}function pQ(e){return jT(e.replace(/\+/g,"%20"))}function IQ(e){return`${zz(e.path)}${mke(e.parameters)}`}function mke(e){return Object.entries(e).map(([t,n])=>`;${zz(t)}=${zz(n)}`).join("")}function fke(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${NT(n)}=${NT(i)}`).join("&"):`${NT(n)}=${NT(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var hke=/^[^\/()?;#]+/;function Rz(e){let t=e.match(hke);return t?t[0]:""}var gke=/^[^\/()?;=#]+/;function _ke(e){let t=e.match(gke);return t?t[0]:""}var yke=/^[^=?&#]+/;function vke(e){let t=e.match(yke);return t?t[0]:""}var bke=/^[^&#]+/;function wke(e){let t=e.match(bke);return t?t[0]:""}var Bz=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yn([],{}):new Yn([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[tn]=new Yn(t,n)),r}parseSegment(){let t=Rz(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new ye(4009,!1);return this.capture(t),new xf(jT(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=_ke(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Rz(this.remaining);i&&(r=i,this.capture(r))}t[jT(n)]=jT(r)}parseQueryParam(t){let n=vke(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=wke(this.remaining);s&&(r=s,this.capture(r))}let i=pQ(n),o=pQ(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Rz(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ye(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=tn);let s=this.parseChildren();n[o??tn]=Object.keys(s).length===1&&s[tn]?s[tn]:new Yn([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new ye(4011,!1)}};function SQ(e){return e.segments.length>0?new Yn([],{[tn]:e}):e}function kQ(e){let t={};for(let[r,i]of Object.entries(e.children)){let o=kQ(i);if(r===tn&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new Yn(e.segments,t);return xke(n)}function xke(e){if(e.numberOfChildren===1&&e.children[tn]){let t=e.children[tn];return new Yn(e.segments.concat(t.segments),t.children)}return e}function m_(e){return e instanceof Wu}function Cke(e,t,n=null,r=null){let i=TQ(e);return AQ(i,t,n,r)}function TQ(e){let t;function n(o){let s={};for(let c of o.children){let u=n(c);s[c.outlet]=u}let a=new Yn(o.url,s);return o===e&&(t=a),a}let r=n(e.root),i=SQ(r);return t??i}function AQ(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return Nz(i,i,i,n,r);let o=Eke(t);if(o.toRoot())return Nz(i,i,new Yn([],{}),n,r);let s=Ike(o,i,e),a=s.processChildren?gw(s.segmentGroup,s.index,o.commands):MQ(s.segmentGroup,s.index,o.commands);return Nz(i,s.segmentGroup,a,n,r)}function zT(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function vw(e){return typeof e=="object"&&e!=null&&e.outlets}function Nz(e,t,n,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let s;e===t?s=n:s=OQ(e,t,n);let a=SQ(kQ(s));return new Wu(a,o,i)}function OQ(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=OQ(o,t,n)}),new Yn(e.segments,r)}var BT=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&zT(r[0]))throw new ye(4003,!1);let i=r.find(vw);if(i&&i!==vQ(r))throw new ye(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Eke(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new BT(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new BT(n,t,r)}var c_=class{segmentGroup;processChildren;index;constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function Ike(e,t,n){if(e.isAbsolute)return new c_(t,!0,0);if(!n)return new c_(t,!1,NaN);if(n.parent===null)return new c_(n,!0,0);let r=zT(e.commands[0])?0:1,i=n.segments.length-1+r;return Ske(n,i,e.numberOfDoubleDots)}function Ske(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new ye(4005,!1);i=r.segments.length}return new c_(r,!1,i-o)}function kke(e){return vw(e[0])?e[0].outlets:{[tn]:e}}function MQ(e,t,n){if(e??=new Yn([],{}),e.segments.length===0&&e.hasChildren())return gw(e,t,n);let r=Tke(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new Yn(e.segments.slice(0,r.pathIndex),{});return o.children[tn]=new Yn(e.segments.slice(r.pathIndex),e.children),gw(o,0,i)}else return r.match&&i.length===0?new Yn(e.segments,{}):r.match&&!e.hasChildren()?Uz(e,t,n):r.match?gw(e,0,i):Uz(e,t,n)}function gw(e,t,n){if(n.length===0)return new Yn(e.segments,{});{let r=kke(n),i={};if(Object.keys(r).some(o=>o!==tn)&&e.children[tn]&&e.numberOfChildren===1&&e.children[tn].segments.length===0){let o=gw(e.children[tn],t,n);return new Yn(e.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=MQ(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Yn(e.segments,i)}}function Tke(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let s=e.segments[i],a=n[r];if(vw(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!fQ(c,u,s))return o;r+=2}else{if(!fQ(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Uz(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(vw(o)){let c=Ake(o.outlets);return new Yn(r,c)}if(i===0&&zT(n[0])){let c=e.segments[t];r.push(new xf(c.path,mQ(n[0]))),i++;continue}let s=vw(o)?o.outlets[tn]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&zT(a)?(r.push(new xf(s,mQ(a))),i+=2):(r.push(new xf(s,{})),i++)}return new Yn(r,{})}function Ake(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=Uz(new Yn([],{}),0,r))}),t}function mQ(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function fQ(e,t,n){return e==n.path&&Dl(t,n.parameters)}var _w="imperative",vo=(function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e})(vo||{}),Za=class{id;url;constructor(t,n){this.id=t,this.url=n}},f_=class extends Za{type=vo.NavigationStart;navigationTrigger;restoredState;constructor(t,n,r="imperative",i=null){super(t,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Cp=class extends Za{urlAfterRedirects;type=vo.NavigationEnd;constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Vs=(function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e[e.Aborted=4]="Aborted",e})(Vs||{}),UT=(function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e})(UT||{}),Gu=class extends Za{reason;code;type=vo.NavigationCancel;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ep=class extends Za{reason;code;type=vo.NavigationSkipped;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}},bw=class extends Za{error;target;type=vo.NavigationError;constructor(t,n,r,i){super(t,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},VT=class extends Za{urlAfterRedirects;state;type=vo.RoutesRecognized;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vz=class extends Za{urlAfterRedirects;state;type=vo.GuardsCheckStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hz=class extends Za{urlAfterRedirects;state;shouldActivate;type=vo.GuardsCheckEnd;constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Zz=class extends Za{urlAfterRedirects;state;type=vo.ResolveStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qz=class extends Za{urlAfterRedirects;state;type=vo.ResolveEnd;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gz=class{route;type=vo.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Wz=class{route;type=vo.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Kz=class{snapshot;type=vo.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jz=class{snapshot;type=vo.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yz=class{snapshot;type=vo.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qz=class{snapshot;type=vo.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ww=class{},h_=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function Oke(e){return!(e instanceof ww)&&!(e instanceof h_)}function Mke(e,t){return e.providers&&!e._injector&&(e._injector=H0(e.providers,t,`Route: ${e.path}`)),e._injector??t}function kc(e){return e.outlet||tn}function Dke(e,t){let n=e.filter(r=>kc(r)===t);return n.push(...e.filter(r=>kc(r)!==t)),n}function __(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Xz=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return __(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new kw(this.rootInjector)}},kw=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Xz(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||e)(Be(Dr))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),HT=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=eB(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=eB(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=tB(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return tB(t,this._root).map(n=>n.value)}};function eB(e,t){if(e===t.value)return t;for(let n of t.children){let r=eB(e,n);if(r)return r}return null}function tB(e,t){if(e===t.value)return[t];for(let n of t.children){let r=tB(e,n);if(r.length)return r.unshift(t),r}return[]}var ga=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function a_(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var ZT=class extends HT{snapshot;constructor(t,n){super(t),this.snapshot=n,uB(this,t)}toString(){return this.snapshot.toString()}};function DQ(e){let t=Pke(e),n=new er([new xf("",{})]),r=new er({}),i=new er({}),o=new er({}),s=new er(""),a=new Ef(n,r,o,s,i,tn,e,t.root);return a.snapshot=t.root,new ZT(new ga(a,[]),t)}function Pke(e){let t={},n={},r={},o=new l_([],t,r,"",n,tn,e,null,{});return new GT("",new ga(o,[]))}var Ef=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,r,i,o,s,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(et(u=>u[Sw]))??Xe(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(et(t=>d_(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(et(t=>d_(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function qT(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:m(m({},t.params),e.params),data:m(m({},t.data),e.data),resolve:m(m(m(m({},e.data),t.data),i?.data),e._resolvedData)}:r={params:m({},e.params),data:m({},e.data),resolve:m(m({},e.data),e._resolvedData??{})},i&&RQ(i)&&(r.resolve[Sw]=i.title),r}var l_=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Sw]}constructor(t,n,r,i,o,s,a,c,u){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=d_(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=d_(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},GT=class extends HT{url;constructor(t,n){super(n),this.url=t,uB(this,n)}toString(){return PQ(this._root)}};function uB(e,t){t.value._routerState=e,t.children.forEach(n=>uB(e,n))}function PQ(e){let t=e.children.length>0?` { ${e.children.map(PQ).join(", ")} } `:"";return`${e.value}${t}`}function $z(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Dl(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Dl(t.params,n.params)||e.paramsSubject.next(n.params),oke(t.url,n.url)||e.urlSubject.next(n.url),Dl(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function nB(e,t){let n=Dl(e.params,t.params)&&lke(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||nB(e.parent,t.parent))}function RQ(e){return typeof e.title=="string"||e.title===null}var Rke=new X(""),NQ=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=tn;activateEvents=new Ue;deactivateEvents=new Ue;attachEvents=new Ue;detachEvents=new Ue;routerOutletData=lY();parentContexts=k(kw);location=k(Zi);changeDetector=k(Tr);inputBinder=k(YT,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ye(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ye(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ye(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new ye(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new rB(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ne({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[br]})}return e})(),rB=class{route;childContexts;parent;outletData;constructor(t,n,r,i){this.route=t,this.childContexts=n,this.parent=r,this.outletData=i}get(t,n){return t===Ef?this.route:t===kw?this.childContexts:t===Rke?this.outletData:this.parent.get(t,n)}},YT=new X("");var $Q=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Ve({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Vt(0,"router-outlet")},dependencies:[NQ],encapsulation:2})}return e})();function dB(e){let t=e.children&&e.children.map(dB),n=t?b(m({},e),{children:t}):m({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==tn&&(n.component=$Q),n}function Nke(e,t,n){let r=xw(e,t._root,n?n._root:void 0);return new ZT(r,t)}function xw(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=$ke(e,t,n);return new ga(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>xw(e,a)),s}}let r=Lke(t.value),i=t.children.map(o=>xw(e,o));return new ga(r,i)}}function $ke(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return xw(e,r,i);return xw(e,r)})}function Lke(e){return new Ef(new er(e.url),new er(e.params),new er(e.queryParams),new er(e.fragment),new er(e.data),e.outlet,e.component,e)}var Cw=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},LQ="ngNavigationCancelingError";function WT(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=m_(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=FQ(!1,Vs.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function FQ(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[LQ]=!0,n.cancellationCode=t,n}function Fke(e){return jQ(e)&&m_(e.url)}function jQ(e){return!!e&&e[LQ]}var jke=(e,t,n,r)=>et(i=>(new iB(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),iB=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),$z(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=a_(n);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=a_(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=a_(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=a_(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Qz(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Jz(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if($z(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),$z(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},KT=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},u_=class{component;route;constructor(t,n){this.component=t,this.route=n}};function zke(e,t,n){let r=e._root,i=t?t._root:null;return hw(r,i,n,[r.value])}function Bke(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function y_(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!cF(e)?e:t.get(e):r}function hw(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=a_(t);return e.children.forEach(s=>{Uke(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>yw(a,n.getContext(s),i)),i}function Uke(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=Vke(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new KT(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?hw(e,t,a?a.children:null,r,i):hw(e,t,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new u_(a.outlet.component,s))}else s&&yw(t,a,i),i.canActivateChecks.push(new KT(r)),o.component?hw(e,null,a?a.children:null,r,i):hw(e,null,n,r,i);return i}function Vke(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!Cf(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Cf(e.url,t.url)||!Dl(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!nB(e,t)||!Dl(e.queryParams,t.queryParams);case"paramsChange":default:return!nB(e,t)}}function yw(e,t,n){let r=a_(e),i=e.value;Object.entries(r).forEach(([o,s])=>{i.component?t?yw(s,t.children.getContext(o),n):yw(s,null,n):yw(s,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new u_(t.outlet.component,i)):n.canDeactivateChecks.push(new u_(null,i)):n.canDeactivateChecks.push(new u_(null,i))}function Tw(e){return typeof e=="function"}function Hke(e){return typeof e=="boolean"}function Zke(e){return e&&Tw(e.canLoad)}function qke(e){return e&&Tw(e.canActivate)}function Gke(e){return e&&Tw(e.canActivateChild)}function Wke(e){return e&&Tw(e.canDeactivate)}function Kke(e){return e&&Tw(e.canMatch)}function zQ(e){return e instanceof Su||e?.name==="EmptyError"}var $T=Symbol("INITIAL_VALUE");function g_(){return oi(e=>xg(e.map(t=>t.pipe(Xr(1),Ui($T)))).pipe(et(t=>{for(let n of t)if(n!==!0){if(n===$T)return $T;if(n===!1||Jke(n))return n}return!0}),Kt(t=>t!==$T),Xr(1)))}function Jke(e){return m_(e)||e instanceof Cw}function Yke(e,t){return hi(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?Xe(b(m({},n),{guardsResult:!0})):Qke(s,r,i,e).pipe(hi(a=>a&&Hke(a)?Xke(r,o,e,t):Xe(a)),et(a=>b(m({},n),{guardsResult:a})))})}function Qke(e,t,n,r){return Zr(e).pipe(hi(i=>iTe(i.component,i.route,n,t,r)),fl(i=>i!==!0,!0))}function Xke(e,t,n,r){return Zr(t).pipe(tp(i=>ep(tTe(i.route.parent,r),eTe(i.route,r),rTe(e,i.path,n),nTe(e,i.route,n))),fl(i=>i!==!0,!0))}function eTe(e,t){return e!==null&&t&&t(new Yz(e)),Xe(!0)}function tTe(e,t){return e!==null&&t&&t(new Kz(e)),Xe(!0)}function nTe(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return Xe(!0);let i=r.map(o=>ku(()=>{let s=__(t)??n,a=y_(o,s),c=qke(a)?a.canActivate(t,e):ho(s,()=>a(t,e));return Ku(c).pipe(fl())}));return Xe(i).pipe(g_())}function rTe(e,t,n){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>Bke(s)).filter(s=>s!==null).map(s=>ku(()=>{let a=s.guards.map(c=>{let u=__(s.node)??n,d=y_(c,u),f=Gke(d)?d.canActivateChild(r,e):ho(u,()=>d(r,e));return Ku(f).pipe(fl())});return Xe(a).pipe(g_())}));return Xe(o).pipe(g_())}function iTe(e,t,n,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return Xe(!0);let s=o.map(a=>{let c=__(t)??i,u=y_(a,c),d=Wke(u)?u.canDeactivate(e,t,n,r):ho(c,()=>u(e,t,n,r));return Ku(d).pipe(fl())});return Xe(s).pipe(g_())}function oTe(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return Xe(!0);let o=i.map(s=>{let a=y_(s,e),c=Zke(a)?a.canLoad(t,n):ho(e,()=>a(t,n));return Ku(c)});return Xe(o).pipe(g_(),BQ(r))}function BQ(e){return VL(qr(t=>{if(typeof t!="boolean")throw WT(e,t)}),et(t=>t===!0))}function sTe(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return Xe(!0);let o=i.map(s=>{let a=y_(s,e),c=Kke(a)?a.canMatch(t,n):ho(e,()=>a(t,n));return Ku(c)});return Xe(o).pipe(g_(),BQ(r))}var Ew=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Iw=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function s_(e){return Xd(new Ew(e))}function aTe(e){return Xd(new ye(4e3,!1))}function cTe(e){return Xd(FQ(!1,Vs.GuardRejected))}var oB=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Xe(r);if(i.numberOfChildren>1||!i.children[tn])return aTe(`${t.redirectTo}`);i=i.children[tn]}}applyRedirectCommands(t,n,r,i,o){return lTe(n,i,o).pipe(et(s=>{if(s instanceof Wu)throw new Iw(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),t,r);if(s[0]==="/")throw new Iw(a);return a}))}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new Wu(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,i)}),new Yn(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new ye(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}};function lTe(e,t,n){if(typeof e=="string")return Xe(e);let r=e,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:u,data:d,title:f}=t;return Ku(ho(n,()=>r({params:u,data:d,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:f})))}var sB={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function uTe(e,t,n,r,i){let o=UQ(e,t,n);return o.matched?(r=Mke(t,r),sTe(r,t,n,i).pipe(et(s=>s===!0?o:m({},sB)))):Xe(o)}function UQ(e,t,n){if(t.path==="**")return dTe(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?m({},sB):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||ike)(n,e,t);if(!i)return m({},sB);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?m(m({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function dTe(e){return{matched:!0,parameters:e.length>0?vQ(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function hQ(e,t,n,r){return n.length>0&&fTe(e,n,r)?{segmentGroup:new Yn(t,mTe(r,new Yn(n,e.children))),slicedSegments:[]}:n.length===0&&hTe(e,n,r)?{segmentGroup:new Yn(e.segments,pTe(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new Yn(e.segments,e.children),slicedSegments:n}}function pTe(e,t,n,r){let i={};for(let o of n)if(QT(e,t,o)&&!r[kc(o)]){let s=new Yn([],{});i[kc(o)]=s}return m(m({},r),i)}function mTe(e,t){let n={};n[tn]=t;for(let r of e)if(r.path===""&&kc(r)!==tn){let i=new Yn([],{});n[kc(r)]=i}return n}function fTe(e,t,n){return n.some(r=>QT(e,t,r)&&kc(r)!==tn)}function hTe(e,t,n){return n.some(r=>QT(e,t,r))}function QT(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function gTe(e,t,n){return t.length===0&&!e.children[n]}var aB=class{};function _Te(e,t,n,r,i,o,s="emptyOnly"){return new cB(e,t,n,r,i,s,o).recognize()}var yTe=31,cB=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,r,i,o,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new oB(this.urlSerializer,this.urlTree)}noMatchError(t){return new ye(4002,`'${t.segmentGroup}'`)}recognize(){let t=hQ(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(et(({children:n,rootSnapshot:r})=>{let i=new ga(r,n),o=new GT("",i),s=Cke(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let n=new l_([],Object.freeze({}),Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),tn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,tn,n).pipe(et(r=>({children:r,rootSnapshot:n})),pl(r=>{if(r instanceof Iw)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ew?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,o):this.processSegment(t,n,r,r.segments,i,!0,o).pipe(et(s=>s instanceof ga?[s]:[]))}processChildren(t,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Zr(o).pipe(tp(s=>{let a=r.children[s],c=Dke(n,s);return this.processSegmentGroup(t,c,a,s,i)}),KL((s,a)=>(s.push(...a),s)),np(null),WL(),hi(s=>{if(s===null)return s_(r);let a=VQ(s);return vTe(a),Xe(a)}))}processSegment(t,n,r,i,o,s,a){return Zr(n).pipe(tp(c=>this.processSegmentAgainstRoute(c._injector??t,n,c,r,i,o,s,a).pipe(pl(u=>{if(u instanceof Ew)return Xe(null);throw u}))),fl(c=>!!c),pl(c=>{if(zQ(c))return gTe(r,i,o)?Xe(new aB):s_(r);throw c}))}processSegmentAgainstRoute(t,n,r,i,o,s,a,c){return kc(r)!==s&&(s===tn||!QT(i,o,r))?s_(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,s,c):s_(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=UQ(n,i,o);if(!c)return s_(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>yTe&&(this.allowRedirects=!1));let h=new l_(o,u,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,gQ(i),kc(i),i.component??i._loadedComponent??null,i,_Q(i)),v=qT(h,a,this.paramsInheritanceStrategy);return h.params=Object.freeze(v.params),h.data=Object.freeze(v.data),this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,h,t).pipe(oi(E=>this.applyRedirects.lineralizeSegments(i,E)),hi(E=>this.processSegment(t,r,n,E.concat(g),s,!1,a)))}matchSegmentAgainstRoute(t,n,r,i,o,s){let a=uTe(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(oi(c=>c.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(oi(({routes:u})=>{let d=r._loadedInjector??t,{parameters:f,consumedSegments:g,remainingSegments:h}=c,v=new l_(g,f,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,gQ(r),kc(r),r.component??r._loadedComponent??null,r,_Q(r)),x=qT(v,s,this.paramsInheritanceStrategy);v.params=Object.freeze(x.params),v.data=Object.freeze(x.data);let{segmentGroup:E,slicedSegments:C}=hQ(n,g,h,u);if(C.length===0&&E.hasChildren())return this.processChildren(d,u,E,v).pipe(et(A=>new ga(v,A)));if(u.length===0&&C.length===0)return Xe(new ga(v,[]));let S=kc(r)===o;return this.processSegment(d,u,E,C,S?tn:o,!0,v).pipe(et(A=>new ga(v,A instanceof ga?[A]:[])))}))):s_(n)))}getChildConfig(t,n,r){return n.children?Xe({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?Xe({routes:n._loadedRoutes,injector:n._loadedInjector}):oTe(t,n,r,this.urlSerializer).pipe(hi(i=>i?this.configLoader.loadChildren(t,n).pipe(qr(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):cTe(n))):Xe({routes:[],injector:t})}};function vTe(e){e.sort((t,n)=>t.value.outlet===tn?-1:n.value.outlet===tn?1:t.value.outlet.localeCompare(n.value.outlet))}function bTe(e){let t=e.value.routeConfig;return t&&t.path===""}function VQ(e){let t=[],n=new Set;for(let r of e){if(!bTe(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=VQ(r.children);t.push(new ga(r.value,i))}return t.filter(r=>!n.has(r))}function gQ(e){return e.data||{}}function _Q(e){return e.resolve||{}}function wTe(e,t,n,r,i,o){return hi(s=>_Te(e,t,n,r,s.extractedUrl,i,o).pipe(et(({state:a,tree:c})=>b(m({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function xTe(e,t){return hi(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Xe(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of HQ(c))s.add(u);let a=0;return Zr(s).pipe(tp(c=>o.has(c)?CTe(c,r,e,t):(c.data=qT(c,c.parent,e).resolve,Xe(void 0))),qr(()=>a++),Sg(1),hi(c=>a===s.size?Xe(n):eo))})}function HQ(e){let t=e.children.map(n=>HQ(n)).flat();return[e,...t]}function CTe(e,t,n,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!RQ(i)&&(o[Sw]=i.title),ku(()=>(e.data=qT(e,e.parent,n).resolve,ETe(o,e,t,r).pipe(et(s=>(e._resolvedData=s,e.data=m(m({},e.data),s),null)))))}function ETe(e,t,n,r){let i=jz(e);if(i.length===0)return Xe({});let o={};return Zr(i).pipe(hi(s=>ITe(e[s],t,n,r).pipe(fl(),qr(a=>{if(a instanceof Cw)throw WT(new p_,a);o[s]=a}))),Sg(1),et(()=>o),pl(s=>zQ(s)?eo:Xd(s)))}function ITe(e,t,n,r){let i=__(t)??r,o=y_(e,i),s=o.resolve?o.resolve(t,n):ho(i,()=>o(t,n));return Ku(s)}function Lz(e){return oi(t=>{let n=e(t);return n?Zr(n).pipe(et(()=>t)):Xe(t)})}var ZQ=(()=>{class e{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===tn);return r}getResolvedTitleForRoute(n){return n.data[Sw]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:()=>k(STe),providedIn:"root"})}return e})(),STe=(()=>{class e extends ZQ{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(Be(uQ))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),XT=new X("",{providedIn:"root",factory:()=>({})}),eA=new X(""),qQ=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=k(j2);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Xe(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Ku(ho(n,()=>r.loadComponent())).pipe(et(GQ),oi(WQ),qr(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),ml(()=>{this.componentLoaders.delete(r)})),o=new yg(i,()=>new ge).pipe(_g());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Xe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=kTe(r,this.compiler,n,this.onLoadEndListener).pipe(ml(()=>{this.childrenLoaders.delete(r)})),s=new yg(o,()=>new ge).pipe(_g());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function kTe(e,t,n,r){return Ku(ho(n,()=>e.loadChildren())).pipe(et(GQ),oi(WQ),hi(i=>i instanceof tT||Array.isArray(i)?Xe(i):Zr(t.compileModuleAsync(i))),et(i=>{r&&r(e);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(eA,[],{optional:!0,self:!0}).flat()),{routes:s.map(dB),injector:o}}))}function TTe(e){return e&&typeof e=="object"&&"default"in e}function GQ(e){return TTe(e)?e.default:e}function WQ(e){return Xe(e)}var pB=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:()=>k(ATe),providedIn:"root"})}return e})(),ATe=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),KQ=new X("");var JQ=new X(""),YQ=(()=>{class e{currentNavigation=Pn(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new ge;transitionAbortWithErrorSubject=new ge;configLoader=k(qQ);environmentInjector=k(Dr);destroyRef=k(no);urlSerializer=k(JT);rootContexts=k(kw);location=k(wp);inputBindingEnabled=k(YT,{optional:!0})!==null;titleStrategy=k(ZQ);options=k(XT,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=k(pB);createViewTransition=k(KQ,{optional:!0});navigationErrorHandler=k(JQ,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Xe(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Gz(i)),r=i=>this.events.next(new Wz(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;ci(()=>{this.transitions?.next(b(m({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new er(null),this.transitions.pipe(Kt(r=>r!==null),oi(r=>{let i=!1;return Xe(r).pipe(oi(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Vs.SupersededByNewNavigation),eo;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?b(m({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Ep(o.id,this.urlSerializer.serialize(o.rawUrl),"",UT.IgnoredSameUrlNavigation)),o.resolve(!1),eo;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Xe(o).pipe(oi(c=>(this.events.next(new f_(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?eo:Promise.resolve(c))),wTe(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),qr(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(d=>(d.finalUrl=c.urlAfterRedirects,d));let u=new VT(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:u,source:d,restoredState:f,extras:g}=o,h=new f_(c,this.urlSerializer.serialize(u),d,f);this.events.next(h);let v=DQ(this.rootComponentType).snapshot;return this.currentTransition=r=b(m({},o),{targetSnapshot:v,urlAfterRedirects:u,extras:b(m({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(x=>(x.finalUrl=u,x)),Xe(r)}else return this.events.next(new Ep(o.id,this.urlSerializer.serialize(o.extractedUrl),"",UT.IgnoredByUrlHandlingStrategy)),o.resolve(!1),eo}),qr(o=>{let s=new Vz(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),et(o=>(this.currentTransition=r=b(m({},o),{guards:zke(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),Yke(this.environmentInjector,o=>this.events.next(o)),qr(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw WT(this.urlSerializer,o.guardsResult);let s=new Hz(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Kt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Vs.GuardRejected),!1)),Lz(o=>{if(o.guards.canActivateChecks.length!==0)return Xe(o).pipe(qr(s=>{let a=new Zz(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),oi(s=>{let a=!1;return Xe(s).pipe(xTe(this.paramsInheritanceStrategy,this.environmentInjector),qr({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Vs.NoDataFromResolver)}}))}),qr(s=>{let a=new qz(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),Lz(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent){let u=__(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(u,a.routeConfig).pipe(qr(d=>{a.component=d}),et(()=>{})))}for(let u of a.children)c.push(...s(u));return c};return xg(s(o.targetSnapshot.root)).pipe(np(null),Xr(1))}),Lz(()=>this.afterPreactivation()),oi(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Zr(a).pipe(et(()=>r)):Xe(r)}),et(o=>{let s=Nke(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=b(m({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),qr(()=>{this.events.next(new ww)}),jke(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Xr(1),sr(new Nt(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Kt(()=>!i&&!r.targetRouterState),qr(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Vs.Aborted)}))),qr({next:o=>{i=!0,this.lastSuccessfulNavigation=ci(this.currentNavigation),this.events.next(new Cp(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),sr(this.transitionAbortWithErrorSubject.pipe(qr(o=>{throw o}))),ml(()=>{i||this.cancelNavigationTransition(r,"",Vs.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),pl(o=>{if(this.destroyed)return r.resolve(!1),eo;if(i=!0,jQ(o))this.events.next(new Gu(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),Fke(o)?this.events.next(new h_(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new bw(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=ho(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Cw){let{message:c,cancellationCode:u}=WT(this.urlSerializer,a);this.events.next(new Gu(r.id,this.urlSerializer.serialize(r.extractedUrl),c,u)),this.events.next(new h_(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return eo}))}))}cancelNavigationTransition(n,r,i){let o=new Gu(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=ci(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function OTe(e){return e!==_w}var MTe=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:()=>k(DTe),providedIn:"root"})}return e})(),lB=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},DTe=(()=>{class e extends lB{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Jn(e)))(i||e)}})();static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),QQ=(()=>{class e{urlSerializer=k(JT);options=k(XT,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=k(wp);urlHandlingStrategy=k(pB);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Wu;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Wu?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=DQ(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:()=>k(PTe),providedIn:"root"})}return e})(),PTe=(()=>{class e extends QQ{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof f_?this.updateStateMemento():n instanceof Ep?this.commitTransition(r):n instanceof VT?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof ww?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Gu&&n.code!==Vs.SupersededByNewNavigation&&n.code!==Vs.Redirect?this.restoreHistory(r):n instanceof bw?this.restoreHistory(r,!0):n instanceof Cp&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,c=m(m({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",c)}else{let a=m(m({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Jn(e)))(i||e)}})();static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function XQ(e,t){e.events.pipe(Kt(n=>n instanceof Cp||n instanceof Gu||n instanceof bw||n instanceof Ep),et(n=>n instanceof Cp||n instanceof Ep?0:(n instanceof Gu?n.code===Vs.Redirect||n.code===Vs.SupersededByNewNavigation:!1)?2:1),Kt(n=>n!==2),Xr(1)).subscribe(()=>{t()})}var RTe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},NTe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},mB=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=k(nT);stateManager=k(QQ);options=k(XT,{optional:!0})||{};pendingTasks=k(xl);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=k(YQ);urlSerializer=k(JT);location=k(wp);urlHandlingStrategy=k(pB);injector=k(Dr);_events=new ge;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=k(MTe);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=k(eA,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!k(YT,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new fn;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=ci(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Gu&&r.code!==Vs.Redirect&&r.code!==Vs.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Cp)this.navigated=!0;else if(r instanceof h_){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=m({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||OTe(i.source)},s);this.scheduleNavigation(a,_w,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Oke(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),_w,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=m({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(Fs)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return ci(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(dB),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=m(m({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=TQ(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),f=this.currentUrlTree.root}return AQ(f,n,d,u??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=m_(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,_w,null,r)}navigate(n,r={skipLocationChange:!1}){return $Te(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(hl(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=m({},RTe):r===!1?i=m({},NTe):i=r,m_(n))return dQ(this.currentUrlTree,n,i);let o=this.parseUrl(n);return dQ(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((f,g)=>{a=f,c=g});let d=this.pendingTasks.add();return XQ(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function $Te(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new ye(4008,!1)}var LTe=new X("");function fB(e,...t){return sp([{provide:eA,multi:!0,useValue:e},[],{provide:Ef,useFactory:FTe,deps:[mB]},{provide:iT,multi:!0,useFactory:jTe},t.map(n=>n.\u0275providers)])}function FTe(e){return e.routerState.root}function jTe(){let e=k(ft);return t=>{let n=e.get(No);if(t!==n.components[0])return;let r=e.get(mB),i=e.get(zTe);e.get(BTe)===1&&r.initialNavigation(),e.get(UTe,null,{optional:!0})?.setUpPreloading(),e.get(LTe,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var zTe=new X("",{factory:()=>new ge}),BTe=new X("",{providedIn:"root",factory:()=>1});var UTe=new X("");var eX=[];function tX(e,t){let r=!t?.manualCleanup?t?.injector?.get(no)??k(no):null,i=HTe(t?.equal),o;t?.requireSync?o=Pn({kind:0},{equal:i}):o=Pn({kind:1,value:t?.initialValue},{equal:i});let s,a=e.subscribe({next:c=>o.set({kind:1,value:c}),error:c=>{o.set({kind:2,error:c}),s?.()},complete:()=>{s?.()}});if(t?.requireSync&&o().kind===0)throw new ye(601,!1);return s=r?.onDestroy(a.unsubscribe.bind(a)),us(()=>{let c=o();switch(c.kind){case 1:return c.value;case 2:throw c.error;case 0:throw new ye(601,!1)}},{equal:t?.equal})}function HTe(e=Object.is){return(t,n)=>t.kind===1&&n.kind===1&&e(t.value,n.value)}function yB(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Sf=yB();function aX(e){Sf=e}var Mw={exec:()=>null};function Qn(e,t=""){let n=typeof e=="string"?e:e.source,r={replace:(i,o)=>{let s=typeof o=="string"?o:o.source;return s=s.replace(ds.caret,"$1"),n=n.replace(i,s),r},getRegex:()=>new RegExp(n,t)};return r}var ds={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},ZTe=/^(?:[ \t]*(?:\n|$))+/,qTe=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,GTe=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Dw=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,WTe=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,vB=/(?:[*+-]|\d{1,9}[.)])/,cX=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,lX=Qn(cX).replace(/bull/g,vB).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),KTe=Qn(cX).replace(/bull/g,vB).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),bB=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,JTe=/^[^\n]+/,wB=/(?!\s*\])(?:\\.|[^\[\]\\])+/,YTe=Qn(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",wB).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),QTe=Qn(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,vB).getRegex(),oA="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",xB=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,XTe=Qn("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",xB).replace("tag",oA).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),uX=Qn(bB).replace("hr",Dw).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",oA).getRegex(),eAe=Qn(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",uX).getRegex(),CB={blockquote:eAe,code:qTe,def:YTe,fences:GTe,heading:WTe,hr:Dw,html:XTe,lheading:lX,list:QTe,newline:ZTe,paragraph:uX,table:Mw,text:JTe},nX=Qn("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Dw).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",oA).getRegex(),tAe=b(m({},CB),{lheading:KTe,table:nX,paragraph:Qn(bB).replace("hr",Dw).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",nX).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",oA).getRegex()}),nAe=b(m({},CB),{html:Qn(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",xB).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Mw,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Qn(bB).replace("hr",Dw).replace("heading",` *#{1,6} *[^
]`).replace("lheading",lX).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()}),rAe=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,iAe=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,dX=/^( {2,}|\\)\n(?!\s*$)/,oAe=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,sA=/[\p{P}\p{S}]/u,EB=/[\s\p{P}\p{S}]/u,pX=/[^\s\p{P}\p{S}]/u,sAe=Qn(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,EB).getRegex(),mX=/(?!~)[\p{P}\p{S}]/u,aAe=/(?!~)[\s\p{P}\p{S}]/u,cAe=/(?:[^\s\p{P}\p{S}]|~)/u,lAe=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,fX=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,uAe=Qn(fX,"u").replace(/punct/g,sA).getRegex(),dAe=Qn(fX,"u").replace(/punct/g,mX).getRegex(),hX="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",pAe=Qn(hX,"gu").replace(/notPunctSpace/g,pX).replace(/punctSpace/g,EB).replace(/punct/g,sA).getRegex(),mAe=Qn(hX,"gu").replace(/notPunctSpace/g,cAe).replace(/punctSpace/g,aAe).replace(/punct/g,mX).getRegex(),fAe=Qn("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,pX).replace(/punctSpace/g,EB).replace(/punct/g,sA).getRegex(),hAe=Qn(/\\(punct)/,"gu").replace(/punct/g,sA).getRegex(),gAe=Qn(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),_Ae=Qn(xB).replace("(?:-->|$)","-->").getRegex(),yAe=Qn("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",_Ae).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),rA=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,vAe=Qn(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",rA).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),gX=Qn(/^!?\[(label)\]\[(ref)\]/).replace("label",rA).replace("ref",wB).getRegex(),_X=Qn(/^!?\[(ref)\](?:\[\])?/).replace("ref",wB).getRegex(),bAe=Qn("reflink|nolink(?!\\()","g").replace("reflink",gX).replace("nolink",_X).getRegex(),IB={_backpedal:Mw,anyPunctuation:hAe,autolink:gAe,blockSkip:lAe,br:dX,code:iAe,del:Mw,emStrongLDelim:uAe,emStrongRDelimAst:pAe,emStrongRDelimUnd:fAe,escape:rAe,link:vAe,nolink:_X,punctuation:sAe,reflink:gX,reflinkSearch:bAe,tag:yAe,text:oAe,url:Mw},wAe=b(m({},IB),{link:Qn(/^!?\[(label)\]\((.*?)\)/).replace("label",rA).getRegex(),reflink:Qn(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",rA).getRegex()}),hB=b(m({},IB),{emStrongRDelimAst:mAe,emStrongLDelim:dAe,url:Qn(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),xAe=b(m({},hB),{br:Qn(dX).replace("{2,}","*").getRegex(),text:Qn(hB.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),tA={normal:CB,gfm:tAe,pedantic:nAe},Aw={normal:IB,gfm:hB,breaks:xAe,pedantic:wAe},CAe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},rX=e=>CAe[e];function Pl(e,t){if(t){if(ds.escapeTest.test(e))return e.replace(ds.escapeReplace,rX)}else if(ds.escapeTestNoEncode.test(e))return e.replace(ds.escapeReplaceNoEncode,rX);return e}function iX(e){try{e=encodeURI(e).replace(ds.percentDecode,"%")}catch{return null}return e}function oX(e,t){let n=e.replace(ds.findPipe,(o,s,a)=>{let c=!1,u=s;for(;--u>=0&&a[u]==="\\";)c=!c;return c?"|":" |"}),r=n.split(ds.splitPipe),i=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(ds.slashPipe,"|");return r}function Ow(e,t,n){let r=e.length;if(r===0)return"";let i=0;for(;i<r;){let o=e.charAt(r-i-1);if(o===t&&!n)i++;else if(o!==t&&n)i++;else break}return e.slice(0,r-i)}function EAe(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return n>0?-2:-1}function sX(e,t,n,r,i){let o=t.href,s=t.title||null,a=e[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;let c={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:o,title:s,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,c}function IAe(e,t,n){let r=e.match(n.other.indentCodeCompensation);if(r===null)return t;let i=r[1];return t.split(`
`).map(o=>{let s=o.match(n.other.beginningSpace);if(s===null)return o;let[a]=s;return a.length>=i.length?o.slice(i.length):o}).join(`
`)}var iA=class{options;rules;lexer;constructor(e){this.options=e||Sf}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Ow(n,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let n=t[0],r=IAe(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){let r=Ow(n,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Ow(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let n=Ow(t[0],`
`).split(`
`),r="",i="",o=[];for(;n.length>0;){let s=!1,a=[],c;for(c=0;c<n.length;c++)if(this.rules.other.blockquoteStart.test(n[c]))a.push(n[c]),s=!0;else if(!s)a.push(n[c]);else break;n=n.slice(c);let u=a.join(`
`),d=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${u}`:u,i=i?`${i}
${d}`:d;let f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,o,!0),this.lexer.state.top=f,n.length===0)break;let g=o.at(-1);if(g?.type==="code")break;if(g?.type==="blockquote"){let h=g,v=h.raw+`
`+n.join(`
`),x=this.blockquote(v);o[o.length-1]=x,r=r.substring(0,r.length-h.raw.length)+x.raw,i=i.substring(0,i.length-h.text.length)+x.text;break}else if(g?.type==="list"){let h=g,v=h.raw+`
`+n.join(`
`),x=this.list(v);o[o.length-1]=x,r=r.substring(0,r.length-g.raw.length)+x.raw,i=i.substring(0,i.length-h.raw.length)+x.raw,n=v.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:o,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim(),r=n.length>1,i={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");let o=this.rules.other.listItemRegex(n),s=!1;for(;e;){let c=!1,u="",d="";if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;u=t[0],e=e.substring(u.length);let f=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,C=>" ".repeat(3*C.length)),g=e.split(`
`,1)[0],h=!f.trim(),v=0;if(this.options.pedantic?(v=2,d=f.trimStart()):h?v=t[1].length+1:(v=t[2].search(this.rules.other.nonSpaceChar),v=v>4?1:v,d=f.slice(v),v+=t[1].length),h&&this.rules.other.blankLine.test(g)&&(u+=g+`
`,e=e.substring(g.length+1),c=!0),!c){let C=this.rules.other.nextBulletRegex(v),S=this.rules.other.hrRegex(v),A=this.rules.other.fencesBeginRegex(v),P=this.rules.other.headingBeginRegex(v),F=this.rules.other.htmlBeginRegex(v);for(;e;){let B=e.split(`
`,1)[0],ee;if(g=B,this.options.pedantic?(g=g.replace(this.rules.other.listReplaceNesting,"  "),ee=g):ee=g.replace(this.rules.other.tabCharGlobal,"    "),A.test(g)||P.test(g)||F.test(g)||C.test(g)||S.test(g))break;if(ee.search(this.rules.other.nonSpaceChar)>=v||!g.trim())d+=`
`+ee.slice(v);else{if(h||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||A.test(f)||P.test(f)||S.test(f))break;d+=`
`+g}!h&&!g.trim()&&(h=!0),u+=B+`
`,e=e.substring(B.length+1),f=ee.slice(v)}}i.loose||(s?i.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(s=!0));let x=null,E;this.options.gfm&&(x=this.rules.other.listIsTask.exec(d),x&&(E=x[0]!=="[ ] ",d=d.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:u,task:!!x,checked:E,loose:!1,text:d,tokens:[]}),i.raw+=u}let a=i.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let c=0;c<i.items.length;c++)if(this.lexer.state.top=!1,i.items[c].tokens=this.lexer.blockTokens(i.items[c].text,[]),!i.loose){let u=i.items[c].tokens.filter(f=>f.type==="space"),d=u.length>0&&u.some(f=>this.rules.other.anyLine.test(f.raw));i.loose=d}if(i.loose)for(let c=0;c<i.items.length;c++)i.items[c].loose=!0;return i}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:r,title:i}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let n=oX(t[1]),r=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===r.length){for(let s of r)this.rules.other.tableAlignRight.test(s)?o.align.push("right"):this.rules.other.tableAlignCenter.test(s)?o.align.push("center"):this.rules.other.tableAlignLeft.test(s)?o.align.push("left"):o.align.push(null);for(let s=0;s<n.length;s++)o.header.push({text:n[s],tokens:this.lexer.inline(n[s]),header:!0,align:o.align[s]});for(let s of i)o.rows.push(oX(s,o.header.length).map((a,c)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:o.align[c]})));return o}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let o=Ow(n.slice(0,-1),"\\");if((n.length-o.length)%2===0)return}else{let o=EAe(t[2],"()");if(o===-2)return;if(o>-1){let a=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let r=t[2],i="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(r);o&&(r=o[1],i=o[3])}else i=t[3]?t[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),sX(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=t[r.toLowerCase()];if(!i){let o=n[0].charAt(0);return{type:"text",raw:o,text:o}}return sX(n,i,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(r[1]||r[2]||"")||!n||this.rules.inline.punctuation.exec(n)){let o=[...r[0]].length-1,s,a,c=o,u=0,d=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(d.lastIndex=0,t=t.slice(-1*e.length+o);(r=d.exec(t))!=null;){if(s=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!s)continue;if(a=[...s].length,r[3]||r[4]){c+=a;continue}else if((r[5]||r[6])&&o%3&&!((o+a)%3)){u+=a;continue}if(c-=a,c>0)continue;a=Math.min(a,a+c+u);let f=[...r[0]][0].length,g=e.slice(0,o+r.index+f+a);if(Math.min(o,a)%2){let v=g.slice(1,-1);return{type:"em",raw:g,text:v,tokens:this.lexer.inlineTokens(v)}}let h=g.slice(2,-2);return{type:"strong",raw:g,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(n),i=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&i&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let n,r;return t[2]==="@"?(n=t[1],r="mailto:"+n):(n=t[1],r=n),{type:"link",raw:t[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let n,r;if(t[2]==="@")n=t[0],r="mailto:"+n;else{let i;do i=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(i!==t[0]);n=t[0],t[1]==="www."?r="http://"+t[0]:r=t[0]}return{type:"link",raw:t[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}},Ju=class gB{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Sf,this.options.tokenizer=this.options.tokenizer||new iA,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:ds,block:tA.normal,inline:Aw.normal};this.options.pedantic?(n.block=tA.pedantic,n.inline=Aw.pedantic):this.options.gfm&&(n.block=tA.gfm,this.options.breaks?n.inline=Aw.breaks:n.inline=Aw.gfm),this.tokenizer.rules=n}static get rules(){return{block:tA,inline:Aw}}static lex(t,n){return new gB(n).lex(t)}static lexInline(t,n){return new gB(n).inlineTokens(t)}lex(t){t=t.replace(ds.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],r=!1){for(this.options.pedantic&&(t=t.replace(ds.tabCharGlobal,"    ").replace(ds.spaceLine,""));t;){let i;if(this.options.extensions?.block?.some(s=>(i=s.call({lexer:this},t,n))?(t=t.substring(i.raw.length),n.push(i),!0):!1))continue;if(i=this.tokenizer.space(t)){t=t.substring(i.raw.length);let s=n.at(-1);i.raw.length===1&&s!==void 0?s.raw+=`
`:n.push(i);continue}if(i=this.tokenizer.code(t)){t=t.substring(i.raw.length);let s=n.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue.at(-1).src=s.text):n.push(i);continue}if(i=this.tokenizer.fences(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.heading(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.hr(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.blockquote(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.list(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.html(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.def(t)){t=t.substring(i.raw.length);let s=n.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=`
`+i.raw,s.text+=`
`+i.raw,this.inlineQueue.at(-1).src=s.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.lheading(t)){t=t.substring(i.raw.length),n.push(i);continue}let o=t;if(this.options.extensions?.startBlock){let s=1/0,a=t.slice(1),c;this.options.extensions.startBlock.forEach(u=>{c=u.call({lexer:this},a),typeof c=="number"&&c>=0&&(s=Math.min(s,c))}),s<1/0&&s>=0&&(o=t.substring(0,s+1))}if(this.state.top&&(i=this.tokenizer.paragraph(o))){let s=n.at(-1);r&&s?.type==="paragraph"?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):n.push(i),r=o.length!==t.length,t=t.substring(i.raw.length);continue}if(i=this.tokenizer.text(t)){t=t.substring(i.raw.length);let s=n.at(-1);s?.type==="text"?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):n.push(i);continue}if(t){let s="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(s);break}else throw new Error(s)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let r=t,i=null;if(this.tokens.links){let a=Object.keys(this.tokens.links);if(a.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)a.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let o=!1,s="";for(;t;){o||(s=""),o=!1;let a;if(this.options.extensions?.inline?.some(u=>(a=u.call({lexer:this},t,n))?(t=t.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.escape(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.tag(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.link(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(a.raw.length);let u=n.at(-1);a.type==="text"&&u?.type==="text"?(u.raw+=a.raw,u.text+=a.text):n.push(a);continue}if(a=this.tokenizer.emStrong(t,r,s)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.codespan(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.br(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.del(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.autolink(t)){t=t.substring(a.raw.length),n.push(a);continue}if(!this.state.inLink&&(a=this.tokenizer.url(t))){t=t.substring(a.raw.length),n.push(a);continue}let c=t;if(this.options.extensions?.startInline){let u=1/0,d=t.slice(1),f;this.options.extensions.startInline.forEach(g=>{f=g.call({lexer:this},d),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(c=t.substring(0,u+1))}if(a=this.tokenizer.inlineText(c)){t=t.substring(a.raw.length),a.raw.slice(-1)!=="_"&&(s=a.raw.slice(-1)),o=!0;let u=n.at(-1);u?.type==="text"?(u.raw+=a.raw,u.text+=a.text):n.push(a);continue}if(t){let u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return n}},Ip=class{options;parser;constructor(e){this.options=e||Sf}space(e){return""}code({text:e,lang:t,escaped:n}){let r=(t||"").match(ds.notSpaceStart)?.[0],i=e.replace(ds.endingNewline,"")+`
`;return r?'<pre><code class="language-'+Pl(r)+'">'+(n?i:Pl(i,!0))+`</code></pre>
`:"<pre><code>"+(n?i:Pl(i,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,n=e.start,r="";for(let s=0;s<e.items.length;s++){let a=e.items[s];r+=this.listitem(a)}let i=t?"ol":"ul",o=t&&n!==1?' start="'+n+'"':"";return"<"+i+o+`>
`+r+"</"+i+`>
`}listitem(e){let t="";if(e.task){let n=this.checkbox({checked:!!e.checked});e.loose?e.tokens[0]?.type==="paragraph"?(e.tokens[0].text=n+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=n+" "+Pl(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:n+" ",text:n+" ",escaped:!0}):t+=n+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let i=0;i<e.header.length;i++)n+=this.tablecell(e.header[i]);t+=this.tablerow({text:n});let r="";for(let i=0;i<e.rows.length;i++){let o=e.rows[i];n="";for(let s=0;s<o.length;s++)n+=this.tablecell(o[s]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Pl(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){let r=this.parser.parseInline(n),i=iX(e);if(i===null)return r;e=i;let o='<a href="'+e+'"';return t&&(o+=' title="'+Pl(t)+'"'),o+=">"+r+"</a>",o}image({href:e,title:t,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));let i=iX(e);if(i===null)return Pl(n);e=i;let o=`<img src="${e}" alt="${n}"`;return t&&(o+=` title="${Pl(t)}"`),o+=">",o}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Pl(e.text)}},SB=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},Yu=class _B{options;renderer;textRenderer;constructor(t){this.options=t||Sf,this.options.renderer=this.options.renderer||new Ip,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new SB}static parse(t,n){return new _B(n).parse(t)}static parseInline(t,n){return new _B(n).parseInline(t)}parse(t,n=!0){let r="";for(let i=0;i<t.length;i++){let o=t[i];if(this.options.extensions?.renderers?.[o.type]){let a=o,c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){r+=c||"";continue}}let s=o;switch(s.type){case"space":{r+=this.renderer.space(s);continue}case"hr":{r+=this.renderer.hr(s);continue}case"heading":{r+=this.renderer.heading(s);continue}case"code":{r+=this.renderer.code(s);continue}case"table":{r+=this.renderer.table(s);continue}case"blockquote":{r+=this.renderer.blockquote(s);continue}case"list":{r+=this.renderer.list(s);continue}case"html":{r+=this.renderer.html(s);continue}case"paragraph":{r+=this.renderer.paragraph(s);continue}case"text":{let a=s,c=this.renderer.text(a);for(;i+1<t.length&&t[i+1].type==="text";)a=t[++i],c+=`
`+this.renderer.text(a);n?r+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c,escaped:!0}]}):r+=c;continue}default:{let a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}parseInline(t,n=this.renderer){let r="";for(let i=0;i<t.length;i++){let o=t[i];if(this.options.extensions?.renderers?.[o.type]){let a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){r+=a||"";continue}}let s=o;switch(s.type){case"escape":{r+=n.text(s);break}case"html":{r+=n.html(s);break}case"link":{r+=n.link(s);break}case"image":{r+=n.image(s);break}case"strong":{r+=n.strong(s);break}case"em":{r+=n.em(s);break}case"codespan":{r+=n.codespan(s);break}case"br":{r+=n.br(s);break}case"del":{r+=n.del(s);break}case"text":{r+=n.text(s);break}default:{let a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}},nA=class{options;block;constructor(t){this.options=t||Sf}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?Ju.lex:Ju.lexInline}provideParser(){return this.block?Yu.parse:Yu.parseInline}},SAe=class{defaults=yB();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Yu;Renderer=Ip;TextRenderer=SB;Lexer=Ju;Tokenizer=iA;Hooks=nA;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(let r of e)switch(n=n.concat(t.call(this,r)),r.type){case"table":{let i=r;for(let o of i.header)n=n.concat(this.walkTokens(o.tokens,t));for(let o of i.rows)for(let s of o)n=n.concat(this.walkTokens(s.tokens,t));break}case"list":{let i=r;n=n.concat(this.walkTokens(i.items,t));break}default:{let i=r;this.defaults.extensions?.childTokens?.[i.type]?this.defaults.extensions.childTokens[i.type].forEach(o=>{let s=i[o].flat(1/0);n=n.concat(this.walkTokens(s,t))}):i.tokens&&(n=n.concat(this.walkTokens(i.tokens,t)))}}return n}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{let r=m({},n);if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){let o=t.renderers[i.name];o?t.renderers[i.name]=function(...s){let a=i.renderer.apply(this,s);return a===!1&&(a=o.apply(this,s)),a}:t.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=t[i.level];o?o.unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&(i.level==="block"?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:i.level==="inline"&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),r.extensions=t),n.renderer){let i=this.defaults.renderer||new Ip(this.defaults);for(let o in n.renderer){if(!(o in i))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let s=o,a=n.renderer[s],c=i[s];i[s]=(...u)=>{let d=a.apply(i,u);return d===!1&&(d=c.apply(i,u)),d||""}}r.renderer=i}if(n.tokenizer){let i=this.defaults.tokenizer||new iA(this.defaults);for(let o in n.tokenizer){if(!(o in i))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let s=o,a=n.tokenizer[s],c=i[s];i[s]=(...u)=>{let d=a.apply(i,u);return d===!1&&(d=c.apply(i,u)),d}}r.tokenizer=i}if(n.hooks){let i=this.defaults.hooks||new nA;for(let o in n.hooks){if(!(o in i))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let s=o,a=n.hooks[s],c=i[s];nA.passThroughHooks.has(o)?i[s]=u=>{if(this.defaults.async)return Promise.resolve(a.call(i,u)).then(f=>c.call(i,f));let d=a.call(i,u);return c.call(i,d)}:i[s]=(...u)=>{let d=a.apply(i,u);return d===!1&&(d=c.apply(i,u)),d}}r.hooks=i}if(n.walkTokens){let i=this.defaults.walkTokens,o=n.walkTokens;r.walkTokens=function(s){let a=[];return a.push(o.call(this,s)),i&&(a=a.concat(i.call(this,s))),a}}this.defaults=m(m({},this.defaults),r)}),this}setOptions(e){return this.defaults=m(m({},this.defaults),e),this}lexer(e,t){return Ju.lex(e,t??this.defaults)}parser(e,t){return Yu.parse(e,t??this.defaults)}parseMarkdown(e){return(n,r)=>{let i=m({},r),o=m(m({},this.defaults),i),s=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&i.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));o.hooks&&(o.hooks.options=o,o.hooks.block=e);let a=o.hooks?o.hooks.provideLexer():e?Ju.lex:Ju.lexInline,c=o.hooks?o.hooks.provideParser():e?Yu.parse:Yu.parseInline;if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(n):n).then(u=>a(u,o)).then(u=>o.hooks?o.hooks.processAllTokens(u):u).then(u=>o.walkTokens?Promise.all(this.walkTokens(u,o.walkTokens)).then(()=>u):u).then(u=>c(u,o)).then(u=>o.hooks?o.hooks.postprocess(u):u).catch(s);try{o.hooks&&(n=o.hooks.preprocess(n));let u=a(n,o);o.hooks&&(u=o.hooks.processAllTokens(u)),o.walkTokens&&this.walkTokens(u,o.walkTokens);let d=c(u,o);return o.hooks&&(d=o.hooks.postprocess(d)),d}catch(u){return s(u)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let r="<p>An error occurred:</p><pre>"+Pl(n.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(n);throw n}}},If=new SAe;function zn(e,t){return If.parse(e,t)}zn.options=zn.setOptions=function(e){return If.setOptions(e),zn.defaults=If.defaults,aX(zn.defaults),zn};zn.getDefaults=yB;zn.defaults=Sf;zn.use=function(...e){return If.use(...e),zn.defaults=If.defaults,aX(zn.defaults),zn};zn.walkTokens=function(e,t){return If.walkTokens(e,t)};zn.parseInline=If.parseInline;zn.Parser=Yu;zn.parser=Yu.parse;zn.Renderer=Ip;zn.TextRenderer=SB;zn.Lexer=Ju;zn.lexer=Ju.lex;zn.Tokenizer=iA;zn.Hooks=nA;zn.parse=zn;var hmt=zn.options,gmt=zn.setOptions,_mt=zn.use,ymt=zn.walkTokens,vmt=zn.parseInline;var bmt=Yu.parse,wmt=Ju.lex;var kAe=["*"],TAe="Copy",AAe="Copied",OAe=(()=>{let t=class t{constructor(){this._buttonClick$=new ge,this.copied=tX(this._buttonClick$.pipe(oi(()=>is(Xe(!0),s0(3e3).pipe(Eg(!1)))),Ig(),kg(1))),this.copiedText=us(()=>this.copied()?AAe:TAe)}onCopyToClipboardClick(){this._buttonClick$.next()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Ve({type:t,selectors:[["markdown-clipboard"]],decls:2,vars:3,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,o){i&1&&(yo(0,"button",0),Jg("click",function(){return o.onCopyToClipboardClick()}),J(1),$o()),i&2&&(at("copied",o.copied()),R(),sn(o.copiedText()))},encapsulation:2,changeDetection:0});let e=t;return e})(),MAe=new X("CLIPBOARD_OPTIONS");var kB=(function(e){return e.CommandLine="command-line",e.LineHighlight="line-highlight",e.LineNumbers="line-numbers",e})(kB||{}),DAe=new X("MARKED_EXTENSIONS"),PAe=new X("MARKED_OPTIONS"),RAe=new X("MERMAID_OPTIONS"),yX=new X("SANITIZE");function NAe(e){return typeof e=="function"}var $Ae="[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information",LAe="[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information",FAe="[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information",jAe="[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information",zAe="[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function",BAe="[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information";var vX=(()=>{let t=class t{get options(){return this._options}set options(r){this._options=m(m({},this.DEFAULT_MARKED_OPTIONS),r)}get renderer(){return this.options.renderer}set renderer(r){this.options.renderer=r}constructor(r,i,o,s,a,c,u,d){this.clipboardOptions=r,this.extensions=i,this.mermaidOptions=s,this.platform=a,this.sanitize=c,this.http=u,this.sanitizer=d,this.DEFAULT_MARKED_OPTIONS={renderer:new Ip},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:void 0,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new ge,this.reload$=this._reload$.asObservable(),this.options=o}parse(r,i=this.DEFAULT_PARSE_OPTIONS){let{decodeHtml:o,inline:s,emoji:a,mermaid:c,disableSanitizer:u}=i,d=m(m({},this.options),i.markedOptions),f=d.renderer||this.renderer||new Ip;this.extensions&&(this.renderer=this.extendsRendererForExtensions(f)),c&&(this.renderer=this.extendsRendererForMermaid(f));let g=this.trimIndentation(r),h=o?this.decodeHtml(g):g,v=a?this.parseEmoji(h):h,x=this.parseMarked(v,d,s);return u?x:this.sanitizeHtml(x)}render(r,i=this.DEFAULT_RENDER_OPTIONS,o){let{clipboard:s,clipboardOptions:a,katex:c,katexOptions:u,mermaid:d,mermaidOptions:f}=i;c&&this.renderKatex(r,m(m({},this.DEFAULT_KATEX_OPTIONS),u)),d&&this.renderMermaid(r,m(m(m({},this.DEFAULT_MERMAID_OPTIONS),this.mermaidOptions),f)),s&&this.renderClipboard(r,o,m(m(m({},this.DEFAULT_CLIPBOARD_OPTIONS),this.clipboardOptions),a)),this.highlight(r)}reload(){this._reload$.next()}getSource(r){if(!this.http)throw new Error(BAe);return this.http.get(r,{responseType:"text"}).pipe(et(i=>this.handleExtension(r,i)))}highlight(r){if(!Zu(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;r||(r=document);let i=r.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(i,o=>o.classList.add("language-none")),Prism.highlightAllUnder(r)}decodeHtml(r){if(!Zu(this.platform))return r;let i=document.createElement("textarea");return i.innerHTML=r,i.value}extendsRendererForExtensions(r){let i=r;return i.\u0275NgxMarkdownRendererExtendedForExtensions===!0||(this.extensions?.length>0&&zn.use(...this.extensions),i.\u0275NgxMarkdownRendererExtendedForExtensions=!0),r}extendsRendererForMermaid(r){let i=r;if(i.\u0275NgxMarkdownRendererExtendedForMermaid===!0)return r;let o=r.code;return r.code=s=>s.lang==="mermaid"?`<div class="mermaid">${s.text}</div>`:o(s),i.\u0275NgxMarkdownRendererExtendedForMermaid=!0,r}handleExtension(r,i){let o=r.lastIndexOf("://"),s=o>-1?r.substring(o+4):r,a=s.lastIndexOf("/"),c=a>-1?s.substring(a+1).split("?")[0]:"",u=c.lastIndexOf("."),d=u>-1?c.substring(u+1):"";return d&&d!=="md"?"```"+d+`
`+i+"\n```":i}parseMarked(r,i,o=!1){if(i.renderer){let s=m({},i.renderer);delete s.\u0275NgxMarkdownRendererExtendedForExtensions,delete s.\u0275NgxMarkdownRendererExtendedForMermaid,delete i.renderer,zn.use({renderer:s})}return o?zn.parseInline(r,i):zn.parse(r,i)}parseEmoji(r){if(!Zu(this.platform))return r;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error($Ae);return joypixels.shortnameToUnicode(r)}renderKatex(r,i){if(Zu(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error(LAe);renderMathInElement(r,i)}}renderClipboard(r,i,o){if(!Zu(this.platform))return;if(typeof ClipboardJS>"u")throw new Error(jAe);if(!i)throw new Error(zAe);let{buttonComponent:s,buttonTemplate:a}=o,c=r.querySelectorAll("pre");for(let u=0;u<c.length;u++){let d=c.item(u),f=document.createElement("div");f.style.position="relative",d.parentNode.insertBefore(f,d),f.appendChild(d);let g=document.createElement("div");g.classList.add("markdown-clipboard-toolbar"),g.style.position="absolute",g.style.top=".5em",g.style.right=".5em",g.style.zIndex="1",f.insertAdjacentElement("beforeend",g),f.onmouseenter=()=>g.classList.add("hover"),f.onmouseleave=()=>g.classList.remove("hover");let h;if(s){let x=i.createComponent(s);h=x.hostView,x.changeDetectorRef.markForCheck()}else if(a)h=i.createEmbeddedView(a);else{let x=i.createComponent(OAe);h=x.hostView,x.changeDetectorRef.markForCheck()}let v;h.rootNodes.forEach(x=>{g.appendChild(x),v=new ClipboardJS(x,{text:()=>d.innerText})}),h.onDestroy(()=>v.destroy())}}renderMermaid(r,i=this.DEFAULT_MERMAID_OPTIONS){if(!Zu(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.initialize>"u")throw new Error(FAe);let o=r.querySelectorAll(".mermaid");o.length!==0&&(mermaid.initialize(i),mermaid.run({nodes:o}))}trimIndentation(r){if(!r)return"";let i;return r.split(`
`).map(o=>{let s=i;return o.length>0&&(s=isNaN(s)?o.search(/\S|$/):Math.min(o.search(/\S|$/),s)),isNaN(i)&&(i=s),s?o.substring(s):o}).join(`
`)}sanitizeHtml(r){return y(this,null,function*(){return NAe(this.sanitize)?this.sanitize(yield r):this.sanitize!==Hi.NONE?this.sanitizer.sanitize(this.sanitize,r)??"":r})}};t.\u0275fac=function(i){return new(i||t)(Be(MAe,8),Be(DAe,8),Be(PAe,8),Be(RAe,8),Be(Fu),Be(yX),Be(o_,8),Be(mw))},t.\u0275prov=re({token:t,factory:t.\u0275fac});let e=t;return e})(),bX=(()=>{let t=class t{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(r){this._disableSanitizer=this.coerceBooleanProperty(r)}get inline(){return this._inline}set inline(r){this._inline=this.coerceBooleanProperty(r)}get clipboard(){return this._clipboard}set clipboard(r){this._clipboard=this.coerceBooleanProperty(r)}get emoji(){return this._emoji}set emoji(r){this._emoji=this.coerceBooleanProperty(r)}get katex(){return this._katex}set katex(r){this._katex=this.coerceBooleanProperty(r)}get mermaid(){return this._mermaid}set mermaid(r){this._mermaid=this.coerceBooleanProperty(r)}get lineHighlight(){return this._lineHighlight}set lineHighlight(r){this._lineHighlight=this.coerceBooleanProperty(r)}get lineNumbers(){return this._lineNumbers}set lineNumbers(r){this._lineNumbers=this.coerceBooleanProperty(r)}get commandLine(){return this._commandLine}set commandLine(r){this._commandLine=this.coerceBooleanProperty(r)}constructor(r,i,o){this.element=r,this.markdownService=i,this.viewContainerRef=o,this.error=new Ue,this.load=new Ue,this.ready=new Ue,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this.destroyed$=new ge}ngOnChanges(){this.loadContent()}loadContent(){if(this.data!=null){this.handleData();return}if(this.src!=null){this.handleSrc();return}}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(sr(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(r,i=!1){return y(this,null,function*(){let o={decodeHtml:i,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,disableSanitizer:this.disableSanitizer},s={clipboard:this.clipboard,clipboardOptions:this.getClipboardOptions(),katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},a=yield this.markdownService.parse(r,o);this.element.nativeElement.innerHTML=a,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,s,this.viewContainerRef),this.ready.emit()})}coerceBooleanProperty(r){return r!=null&&`${String(r)}`!="false"}getClipboardOptions(){if(this.clipboardButtonComponent||this.clipboardButtonTemplate)return{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate}}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:r=>{this.render(r).then(()=>{this.load.emit(r)})},error:r=>this.error.emit(r)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,kB.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,kB.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(r,i){let o=r.querySelectorAll("pre");for(let s=0;s<o.length;s++){let a=i instanceof Array?i:[i];o.item(s).classList.add(...a)}}setPluginOptions(r,i){let o=r.querySelectorAll("pre");for(let s=0;s<o.length;s++)Object.keys(i).forEach(a=>{let c=i[a];if(c){let u=this.toLispCase(a);o.item(s).setAttribute(u,c.toString())}})}toLispCase(r){let i=r.match(/([A-Z])/g);if(!i)return r;let o=r.toString();for(let s=0,a=i.length;s<a;s++)o=o.replace(new RegExp(i[s]),"-"+i[s].toLowerCase());return o.slice(0,1)==="-"&&(o=o.slice(1)),o}};t.\u0275fac=function(i){return new(i||t)(Ee(nt),Ee(vX),Ee(Zi))},t.\u0275cmp=Ve({type:t,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},features:[br],ngContentSelectors:kAe,decls:1,vars:0,template:function(i,o){i&1&&(lr(),Ht(0))},encapsulation:2});let e=t;return e})();function TB(e){return[vX,e?.loader??[],e?.clipboardOptions??[],e?.markedOptions??[],e?.mermaidOptions??[],e?.markedExtensions??[],VAe(e?.sanitize)??[]]}function UAe(e){return e!=null&&e.provide!=null}function VAe(e){return UAe(e)?e:{provide:yX,useValue:e??Hi.HTML}}var wX=(()=>{let t=class t{static forRoot(r){return{ngModule:t,providers:[TB(r)]}}static forChild(){return{ngModule:t}}};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=it({type:t}),t.\u0275inj=tt({});let e=t;return e})();var xX={providers:[B2({eventCoalescing:!0}),fB(eX),TB(),Mz(Dz())]};var ps={};Kd(ps,{BRAND:()=>gOe,DIRTY:()=>kf,EMPTY_PATH:()=>WAe,INVALID:()=>Et,NEVER:()=>XOe,OK:()=>jo,ParseStatus:()=>bo,Schema:()=>hn,ZodAny:()=>lA,ZodArray:()=>Nw,ZodBigInt:()=>DB,ZodBoolean:()=>PB,ZodBranded:()=>$w,ZodCatch:()=>VB,ZodDate:()=>RB,ZodDefault:()=>UB,ZodDiscriminatedUnion:()=>uA,ZodEffects:()=>E_,ZodEnum:()=>fA,ZodError:()=>Nl,ZodFirstPartyTypeKind:()=>Y,ZodFunction:()=>pA,ZodIntersection:()=>FB,ZodIssueCode:()=>de,ZodLazy:()=>jB,ZodLiteral:()=>zB,ZodMap:()=>DX,ZodNaN:()=>NX,ZodNativeEnum:()=>BB,ZodNever:()=>Tf,ZodNull:()=>$B,ZodNullable:()=>I_,ZodNumber:()=>MB,ZodObject:()=>x_,ZodOptional:()=>kp,ZodParsedType:()=>je,ZodPipeline:()=>Lw,ZodPromise:()=>hA,ZodReadonly:()=>HB,ZodRecord:()=>dA,ZodSchema:()=>hn,ZodSet:()=>PX,ZodString:()=>mA,ZodSymbol:()=>OX,ZodTransformer:()=>E_,ZodTuple:()=>C_,ZodType:()=>hn,ZodUndefined:()=>NB,ZodUnion:()=>LB,ZodUnknown:()=>Rw,ZodVoid:()=>MX,addIssueToContext:()=>Oe,any:()=>IOe,array:()=>AOe,bigint:()=>bOe,boolean:()=>jX,coerce:()=>QOe,custom:()=>$X,date:()=>wOe,datetimeRegex:()=>AX,defaultErrorMap:()=>Qu,discriminatedUnion:()=>DOe,effect:()=>HOe,enum:()=>BOe,function:()=>FOe,getErrorMap:()=>v_,getParsedType:()=>Rl,instanceof:()=>yOe,intersection:()=>POe,isAborted:()=>aA,isAsync:()=>b_,isDirty:()=>cA,isValid:()=>Sp,late:()=>_Oe,lazy:()=>jOe,literal:()=>zOe,makeIssue:()=>Pw,map:()=>$Oe,nan:()=>vOe,nativeEnum:()=>UOe,never:()=>kOe,null:()=>EOe,nullable:()=>qOe,number:()=>FX,object:()=>zX,objectUtil:()=>CX,oboolean:()=>YOe,onumber:()=>JOe,optional:()=>ZOe,ostring:()=>KOe,pipeline:()=>WOe,preprocess:()=>GOe,promise:()=>VOe,quotelessJson:()=>ZAe,record:()=>NOe,set:()=>LOe,setErrorMap:()=>GAe,strictObject:()=>OOe,string:()=>LX,symbol:()=>xOe,transformer:()=>HOe,tuple:()=>ROe,undefined:()=>COe,union:()=>MOe,unknown:()=>SOe,util:()=>An,void:()=>TOe});var An;(function(e){e.assertEqual=i=>{};function t(i){}e.assertIs=t;function n(i){throw new Error}e.assertNever=n,e.arrayToEnum=i=>{let o={};for(let s of i)o[s]=s;return o},e.getValidEnumValues=i=>{let o=e.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),s={};for(let a of o)s[a]=i[a];return e.objectValues(s)},e.objectValues=i=>e.objectKeys(i).map(function(o){return i[o]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},e.find=(i,o)=>{for(let s of i)if(o(s))return s},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,o=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(o)}e.joinValues=r,e.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(An||(An={}));var CX=(function(e){return e.mergeShapes=(t,n)=>m(m({},t),n),e})(CX||{}),je=An.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Rl=e=>{switch(typeof e){case"undefined":return je.undefined;case"string":return je.string;case"number":return Number.isNaN(e)?je.nan:je.number;case"boolean":return je.boolean;case"function":return je.function;case"bigint":return je.bigint;case"symbol":return je.symbol;case"object":return Array.isArray(e)?je.array:e===null?je.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?je.promise:typeof Map<"u"&&e instanceof Map?je.map:typeof Set<"u"&&e instanceof Set?je.set:typeof Date<"u"&&e instanceof Date?je.date:je.object;default:return je.unknown}};var de=An.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),ZAe=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),Nl=(()=>{class e extends Error{get errors(){return this.issues}constructor(n){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=n}format(n){let r=n||function(s){return s.message},i={_errors:[]},o=s=>{for(let a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(o);else if(a.code==="invalid_return_type")o(a.returnTypeError);else if(a.code==="invalid_arguments")o(a.argumentsError);else if(a.path.length===0)i._errors.push(r(a));else{let c=i,u=0;for(;u<a.path.length;){let d=a.path[u];u===a.path.length-1?(c[d]=c[d]||{_errors:[]},c[d]._errors.push(r(a))):c[d]=c[d]||{_errors:[]},c=c[d],u++}}};return o(this),i}static assert(n){if(!(n instanceof e))throw new Error(`Not a ZodError: ${n}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,An.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(n=r=>r.message){let r=Object.create(null),i=[];for(let o of this.issues)if(o.path.length>0){let s=o.path[0];r[s]=r[s]||[],r[s].push(n(o))}else i.push(n(o));return{formErrors:i,fieldErrors:r}}get formErrors(){return this.flatten()}}return e.create=t=>new e(t),e})();var qAe=(e,t)=>{let n;switch(e.code){case de.invalid_type:e.received===je.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case de.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,An.jsonStringifyReplacer)}`;break;case de.unrecognized_keys:n=`Unrecognized key(s) in object: ${An.joinValues(e.keys,", ")}`;break;case de.invalid_union:n="Invalid input";break;case de.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${An.joinValues(e.options)}`;break;case de.invalid_enum_value:n=`Invalid enum value. Expected ${An.joinValues(e.options)}, received '${e.received}'`;break;case de.invalid_arguments:n="Invalid function arguments";break;case de.invalid_return_type:n="Invalid function return type";break;case de.invalid_date:n="Invalid date";break;case de.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:An.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case de.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case de.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case de.custom:n="Invalid input";break;case de.invalid_intersection_types:n="Intersection results could not be merged";break;case de.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case de.not_finite:n="Number must be finite";break;default:n=t.defaultError,An.assertNever(e)}return{message:n}},Qu=qAe;var EX=Qu;function GAe(e){EX=e}function v_(){return EX}var Pw=e=>{let{data:t,path:n,errorMaps:r,issueData:i}=e,o=[...n,...i.path||[]],s=b(m({},i),{path:o});if(i.message!==void 0)return b(m({},i),{path:o,message:i.message});let a="",c=r.filter(u=>!!u).slice().reverse();for(let u of c)a=u(s,{data:t,defaultError:a}).message;return b(m({},i),{path:o,message:a})},WAe=[];function Oe(e,t){let n=v_(),r=Pw({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Qu?void 0:Qu].filter(i=>!!i)});e.common.issues.push(r)}var bo=class e{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){let r=[];for(let i of n){if(i.status==="aborted")return Et;i.status==="dirty"&&t.dirty(),r.push(i.value)}return{status:t.value,value:r}}static mergeObjectAsync(t,n){return y(this,null,function*(){let r=[];for(let i of n){let o=yield i.key,s=yield i.value;r.push({key:o,value:s})}return e.mergeObjectSync(t,r)})}static mergeObjectSync(t,n){let r={};for(let i of n){let{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return Et;o.status==="dirty"&&t.dirty(),s.status==="dirty"&&t.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(r[o.value]=s.value)}return{status:t.value,value:r}}},Et=Object.freeze({status:"aborted"}),kf=e=>({status:"dirty",value:e}),jo=e=>({status:"valid",value:e}),aA=e=>e.status==="aborted",cA=e=>e.status==="dirty",Sp=e=>e.status==="valid",b_=e=>typeof Promise<"u"&&e instanceof Promise;var st=(function(e){return e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message,e})(st||{});var qa=class{constructor(t,n,r,i){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},IX=(e,t)=>{if(Sp(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let n=new Nl(e.common.issues);return this._error=n,this._error}}};function an(e){if(!e)return{};let{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(s,a)=>{let{message:c}=e;return s.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:c??r??a.defaultError}:s.code!=="invalid_type"?{message:a.defaultError}:{message:c??n??a.defaultError}},description:i}}var hn=class{get description(){return this._def.description}_getType(t){return Rl(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Rl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new bo,ctx:{common:t.parent.common,data:t.data,parsedType:Rl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){let n=this._parse(t);if(b_(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){let n=this._parse(t);return Promise.resolve(n)}parse(t,n){let r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){let r={common:{issues:[],async:n?.async??!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Rl(t)},i=this._parseSync({data:t,path:r.path,parent:r});return IX(r,i)}"~validate"(t){let n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Rl(t)};if(!this["~standard"].async)try{let r=this._parseSync({data:t,path:[],parent:n});return Sp(r)?{value:r.value}:{issues:n.common.issues}}catch(r){r?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(r=>Sp(r)?{value:r.value}:{issues:n.common.issues})}parseAsync(t,n){return y(this,null,function*(){let r=yield this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error})}safeParseAsync(t,n){return y(this,null,function*(){let r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Rl(t)},i=this._parse({data:t,path:r.path,parent:r}),o=yield b_(i)?i:Promise.resolve(i);return IX(r,o)})}refine(t,n){let r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,o)=>{let s=t(i),a=()=>o.addIssue(m({code:de.custom},r(i)));return typeof Promise<"u"&&s instanceof Promise?s.then(c=>c?!0:(a(),!1)):s?!0:(a(),!1)})}refinement(t,n){return this._refinement((r,i)=>t(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(t){return new E_({schema:this,typeName:Y.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return kp.create(this,this._def)}nullable(){return I_.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Nw.create(this)}promise(){return hA.create(this,this._def)}or(t){return LB.create([this,t],this._def)}and(t){return FB.create(this,t,this._def)}transform(t){return new E_(b(m({},an(this._def)),{schema:this,typeName:Y.ZodEffects,effect:{type:"transform",transform:t}}))}default(t){let n=typeof t=="function"?t:()=>t;return new UB(b(m({},an(this._def)),{innerType:this,defaultValue:n,typeName:Y.ZodDefault}))}brand(){return new $w(m({typeName:Y.ZodBranded,type:this},an(this._def)))}catch(t){let n=typeof t=="function"?t:()=>t;return new VB(b(m({},an(this._def)),{innerType:this,catchValue:n,typeName:Y.ZodCatch}))}describe(t){let n=this.constructor;return new n(b(m({},this._def),{description:t}))}pipe(t){return Lw.create(this,t)}readonly(){return HB.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},KAe=/^c[^\s-]{8,}$/i,JAe=/^[0-9a-z]+$/,YAe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,QAe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,XAe=/^[a-z0-9_-]{21}$/i,eOe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,tOe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,nOe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,rOe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",AB,iOe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,oOe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,sOe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,aOe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,cOe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,lOe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,kX="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",uOe=new RegExp(`^${kX}$`);function TX(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);let n=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function dOe(e){return new RegExp(`^${TX(e)}$`)}function AX(e){let t=`${kX}T${TX(e)}`,n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function pOe(e,t){return!!((t==="v4"||!t)&&iOe.test(e)||(t==="v6"||!t)&&sOe.test(e))}function mOe(e,t){if(!eOe.test(e))return!1;try{let[n]=e.split(".");if(!n)return!1;let r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&i?.typ!=="JWT"||!i.alg||t&&i.alg!==t)}catch{return!1}}function fOe(e,t){return!!((t==="v4"||!t)&&oOe.test(e)||(t==="v6"||!t)&&aOe.test(e))}var mA=(()=>{class e extends hn{_parse(n){if(this._def.coerce&&(n.data=String(n.data)),this._getType(n)!==je.string){let s=this._getOrReturnCtx(n);return Oe(s,{code:de.invalid_type,expected:je.string,received:s.parsedType}),Et}let i=new bo,o;for(let s of this._def.checks)if(s.kind==="min")n.data.length<s.value&&(o=this._getOrReturnCtx(n,o),Oe(o,{code:de.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")n.data.length>s.value&&(o=this._getOrReturnCtx(n,o),Oe(o,{code:de.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){let a=n.data.length>s.value,c=n.data.length<s.value;(a||c)&&(o=this._getOrReturnCtx(n,o),a?Oe(o,{code:de.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):c&&Oe(o,{code:de.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")nOe.test(n.data)||(o=this._getOrReturnCtx(n,o),Oe(o,{validation:"email",code:de.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")AB||(AB=new RegExp(rOe,"u")),AB.test(n.data)||(o=this._getOrReturnCtx(n,o),Oe(o,{validation:"emoji",code:de.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")QAe.test(n.data)||(o=this._getOrReturnCtx(n,o),Oe(o,{validation:"uuid",code:de.invalid_string,message:s.message}),i.dirty());else if(s.kind==="nanoid")XAe.test(n.data)||(o=this._getOrReturnCtx(n,o),Oe(o,{validation:"nanoid",code:de.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")KAe.test(n.data)||(o=this._getOrReturnCtx(n,o),Oe(o,{validation:"cuid",code:de.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")JAe.test(n.data)||(o=this._getOrReturnCtx(n,o),Oe(o,{validation:"cuid2",code:de.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")YAe.test(n.data)||(o=this._getOrReturnCtx(n,o),Oe(o,{validation:"ulid",code:de.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(n.data)}catch{o=this._getOrReturnCtx(n,o),Oe(o,{validation:"url",code:de.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(n.data)||(o=this._getOrReturnCtx(n,o),Oe(o,{validation:"regex",code:de.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?n.data=n.data.trim():s.kind==="includes"?n.data.includes(s.value,s.position)||(o=this._getOrReturnCtx(n,o),Oe(o,{code:de.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?n.data=n.data.toLowerCase():s.kind==="toUpperCase"?n.data=n.data.toUpperCase():s.kind==="startsWith"?n.data.startsWith(s.value)||(o=this._getOrReturnCtx(n,o),Oe(o,{code:de.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?n.data.endsWith(s.value)||(o=this._getOrReturnCtx(n,o),Oe(o,{code:de.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?AX(s).test(n.data)||(o=this._getOrReturnCtx(n,o),Oe(o,{code:de.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="date"?uOe.test(n.data)||(o=this._getOrReturnCtx(n,o),Oe(o,{code:de.invalid_string,validation:"date",message:s.message}),i.dirty()):s.kind==="time"?dOe(s).test(n.data)||(o=this._getOrReturnCtx(n,o),Oe(o,{code:de.invalid_string,validation:"time",message:s.message}),i.dirty()):s.kind==="duration"?tOe.test(n.data)||(o=this._getOrReturnCtx(n,o),Oe(o,{validation:"duration",code:de.invalid_string,message:s.message}),i.dirty()):s.kind==="ip"?pOe(n.data,s.version)||(o=this._getOrReturnCtx(n,o),Oe(o,{validation:"ip",code:de.invalid_string,message:s.message}),i.dirty()):s.kind==="jwt"?mOe(n.data,s.alg)||(o=this._getOrReturnCtx(n,o),Oe(o,{validation:"jwt",code:de.invalid_string,message:s.message}),i.dirty()):s.kind==="cidr"?fOe(n.data,s.version)||(o=this._getOrReturnCtx(n,o),Oe(o,{validation:"cidr",code:de.invalid_string,message:s.message}),i.dirty()):s.kind==="base64"?cOe.test(n.data)||(o=this._getOrReturnCtx(n,o),Oe(o,{validation:"base64",code:de.invalid_string,message:s.message}),i.dirty()):s.kind==="base64url"?lOe.test(n.data)||(o=this._getOrReturnCtx(n,o),Oe(o,{validation:"base64url",code:de.invalid_string,message:s.message}),i.dirty()):An.assertNever(s);return{status:i.value,value:n.data}}_regex(n,r,i){return this.refinement(o=>n.test(o),m({validation:r,code:de.invalid_string},st.errToObj(i)))}_addCheck(n){return new e(b(m({},this._def),{checks:[...this._def.checks,n]}))}email(n){return this._addCheck(m({kind:"email"},st.errToObj(n)))}url(n){return this._addCheck(m({kind:"url"},st.errToObj(n)))}emoji(n){return this._addCheck(m({kind:"emoji"},st.errToObj(n)))}uuid(n){return this._addCheck(m({kind:"uuid"},st.errToObj(n)))}nanoid(n){return this._addCheck(m({kind:"nanoid"},st.errToObj(n)))}cuid(n){return this._addCheck(m({kind:"cuid"},st.errToObj(n)))}cuid2(n){return this._addCheck(m({kind:"cuid2"},st.errToObj(n)))}ulid(n){return this._addCheck(m({kind:"ulid"},st.errToObj(n)))}base64(n){return this._addCheck(m({kind:"base64"},st.errToObj(n)))}base64url(n){return this._addCheck(m({kind:"base64url"},st.errToObj(n)))}jwt(n){return this._addCheck(m({kind:"jwt"},st.errToObj(n)))}ip(n){return this._addCheck(m({kind:"ip"},st.errToObj(n)))}cidr(n){return this._addCheck(m({kind:"cidr"},st.errToObj(n)))}datetime(n){return typeof n=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:n}):this._addCheck(m({kind:"datetime",precision:typeof n?.precision>"u"?null:n?.precision,offset:n?.offset??!1,local:n?.local??!1},st.errToObj(n?.message)))}date(n){return this._addCheck({kind:"date",message:n})}time(n){return typeof n=="string"?this._addCheck({kind:"time",precision:null,message:n}):this._addCheck(m({kind:"time",precision:typeof n?.precision>"u"?null:n?.precision},st.errToObj(n?.message)))}duration(n){return this._addCheck(m({kind:"duration"},st.errToObj(n)))}regex(n,r){return this._addCheck(m({kind:"regex",regex:n},st.errToObj(r)))}includes(n,r){return this._addCheck(m({kind:"includes",value:n,position:r?.position},st.errToObj(r?.message)))}startsWith(n,r){return this._addCheck(m({kind:"startsWith",value:n},st.errToObj(r)))}endsWith(n,r){return this._addCheck(m({kind:"endsWith",value:n},st.errToObj(r)))}min(n,r){return this._addCheck(m({kind:"min",value:n},st.errToObj(r)))}max(n,r){return this._addCheck(m({kind:"max",value:n},st.errToObj(r)))}length(n,r){return this._addCheck(m({kind:"length",value:n},st.errToObj(r)))}nonempty(n){return this.min(1,st.errToObj(n))}trim(){return new e(b(m({},this._def),{checks:[...this._def.checks,{kind:"trim"}]}))}toLowerCase(){return new e(b(m({},this._def),{checks:[...this._def.checks,{kind:"toLowerCase"}]}))}toUpperCase(){return new e(b(m({},this._def),{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}get isDatetime(){return!!this._def.checks.find(n=>n.kind==="datetime")}get isDate(){return!!this._def.checks.find(n=>n.kind==="date")}get isTime(){return!!this._def.checks.find(n=>n.kind==="time")}get isDuration(){return!!this._def.checks.find(n=>n.kind==="duration")}get isEmail(){return!!this._def.checks.find(n=>n.kind==="email")}get isURL(){return!!this._def.checks.find(n=>n.kind==="url")}get isEmoji(){return!!this._def.checks.find(n=>n.kind==="emoji")}get isUUID(){return!!this._def.checks.find(n=>n.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(n=>n.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(n=>n.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(n=>n.kind==="cuid2")}get isULID(){return!!this._def.checks.find(n=>n.kind==="ulid")}get isIP(){return!!this._def.checks.find(n=>n.kind==="ip")}get isCIDR(){return!!this._def.checks.find(n=>n.kind==="cidr")}get isBase64(){return!!this._def.checks.find(n=>n.kind==="base64")}get isBase64url(){return!!this._def.checks.find(n=>n.kind==="base64url")}get minLength(){let n=null;for(let r of this._def.checks)r.kind==="min"&&(n===null||r.value>n)&&(n=r.value);return n}get maxLength(){let n=null;for(let r of this._def.checks)r.kind==="max"&&(n===null||r.value<n)&&(n=r.value);return n}}return e.create=t=>new e(m({checks:[],typeName:Y.ZodString,coerce:t?.coerce??!1},an(t))),e})();function hOe(e,t){let n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r,o=Number.parseInt(e.toFixed(i).replace(".","")),s=Number.parseInt(t.toFixed(i).replace(".",""));return o%s/10**i}var MB=(()=>{class e extends hn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(n){if(this._def.coerce&&(n.data=Number(n.data)),this._getType(n)!==je.number){let s=this._getOrReturnCtx(n);return Oe(s,{code:de.invalid_type,expected:je.number,received:s.parsedType}),Et}let i,o=new bo;for(let s of this._def.checks)s.kind==="int"?An.isInteger(n.data)||(i=this._getOrReturnCtx(n,i),Oe(i,{code:de.invalid_type,expected:"integer",received:"float",message:s.message}),o.dirty()):s.kind==="min"?(s.inclusive?n.data<s.value:n.data<=s.value)&&(i=this._getOrReturnCtx(n,i),Oe(i,{code:de.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),o.dirty()):s.kind==="max"?(s.inclusive?n.data>s.value:n.data>=s.value)&&(i=this._getOrReturnCtx(n,i),Oe(i,{code:de.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),o.dirty()):s.kind==="multipleOf"?hOe(n.data,s.value)!==0&&(i=this._getOrReturnCtx(n,i),Oe(i,{code:de.not_multiple_of,multipleOf:s.value,message:s.message}),o.dirty()):s.kind==="finite"?Number.isFinite(n.data)||(i=this._getOrReturnCtx(n,i),Oe(i,{code:de.not_finite,message:s.message}),o.dirty()):An.assertNever(s);return{status:o.value,value:n.data}}gte(n,r){return this.setLimit("min",n,!0,st.toString(r))}gt(n,r){return this.setLimit("min",n,!1,st.toString(r))}lte(n,r){return this.setLimit("max",n,!0,st.toString(r))}lt(n,r){return this.setLimit("max",n,!1,st.toString(r))}setLimit(n,r,i,o){return new e(b(m({},this._def),{checks:[...this._def.checks,{kind:n,value:r,inclusive:i,message:st.toString(o)}]}))}_addCheck(n){return new e(b(m({},this._def),{checks:[...this._def.checks,n]}))}int(n){return this._addCheck({kind:"int",message:st.toString(n)})}positive(n){return this._addCheck({kind:"min",value:0,inclusive:!1,message:st.toString(n)})}negative(n){return this._addCheck({kind:"max",value:0,inclusive:!1,message:st.toString(n)})}nonpositive(n){return this._addCheck({kind:"max",value:0,inclusive:!0,message:st.toString(n)})}nonnegative(n){return this._addCheck({kind:"min",value:0,inclusive:!0,message:st.toString(n)})}multipleOf(n,r){return this._addCheck({kind:"multipleOf",value:n,message:st.toString(r)})}finite(n){return this._addCheck({kind:"finite",message:st.toString(n)})}safe(n){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:st.toString(n)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:st.toString(n)})}get minValue(){let n=null;for(let r of this._def.checks)r.kind==="min"&&(n===null||r.value>n)&&(n=r.value);return n}get maxValue(){let n=null;for(let r of this._def.checks)r.kind==="max"&&(n===null||r.value<n)&&(n=r.value);return n}get isInt(){return!!this._def.checks.find(n=>n.kind==="int"||n.kind==="multipleOf"&&An.isInteger(n.value))}get isFinite(){let n=null,r=null;for(let i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(r===null||i.value>r)&&(r=i.value):i.kind==="max"&&(n===null||i.value<n)&&(n=i.value)}return Number.isFinite(r)&&Number.isFinite(n)}}return e.create=t=>new e(m({checks:[],typeName:Y.ZodNumber,coerce:t?.coerce||!1},an(t))),e})(),DB=(()=>{class e extends hn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(n){if(this._def.coerce)try{n.data=BigInt(n.data)}catch{return this._getInvalidInput(n)}if(this._getType(n)!==je.bigint)return this._getInvalidInput(n);let i,o=new bo;for(let s of this._def.checks)s.kind==="min"?(s.inclusive?n.data<s.value:n.data<=s.value)&&(i=this._getOrReturnCtx(n,i),Oe(i,{code:de.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),o.dirty()):s.kind==="max"?(s.inclusive?n.data>s.value:n.data>=s.value)&&(i=this._getOrReturnCtx(n,i),Oe(i,{code:de.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),o.dirty()):s.kind==="multipleOf"?n.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(n,i),Oe(i,{code:de.not_multiple_of,multipleOf:s.value,message:s.message}),o.dirty()):An.assertNever(s);return{status:o.value,value:n.data}}_getInvalidInput(n){let r=this._getOrReturnCtx(n);return Oe(r,{code:de.invalid_type,expected:je.bigint,received:r.parsedType}),Et}gte(n,r){return this.setLimit("min",n,!0,st.toString(r))}gt(n,r){return this.setLimit("min",n,!1,st.toString(r))}lte(n,r){return this.setLimit("max",n,!0,st.toString(r))}lt(n,r){return this.setLimit("max",n,!1,st.toString(r))}setLimit(n,r,i,o){return new e(b(m({},this._def),{checks:[...this._def.checks,{kind:n,value:r,inclusive:i,message:st.toString(o)}]}))}_addCheck(n){return new e(b(m({},this._def),{checks:[...this._def.checks,n]}))}positive(n){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:st.toString(n)})}negative(n){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:st.toString(n)})}nonpositive(n){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:st.toString(n)})}nonnegative(n){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:st.toString(n)})}multipleOf(n,r){return this._addCheck({kind:"multipleOf",value:n,message:st.toString(r)})}get minValue(){let n=null;for(let r of this._def.checks)r.kind==="min"&&(n===null||r.value>n)&&(n=r.value);return n}get maxValue(){let n=null;for(let r of this._def.checks)r.kind==="max"&&(n===null||r.value<n)&&(n=r.value);return n}}return e.create=t=>new e(m({checks:[],typeName:Y.ZodBigInt,coerce:t?.coerce??!1},an(t))),e})(),PB=(()=>{class e extends hn{_parse(n){if(this._def.coerce&&(n.data=!!n.data),this._getType(n)!==je.boolean){let i=this._getOrReturnCtx(n);return Oe(i,{code:de.invalid_type,expected:je.boolean,received:i.parsedType}),Et}return jo(n.data)}}return e.create=t=>new e(m({typeName:Y.ZodBoolean,coerce:t?.coerce||!1},an(t))),e})(),RB=(()=>{class e extends hn{_parse(n){if(this._def.coerce&&(n.data=new Date(n.data)),this._getType(n)!==je.date){let s=this._getOrReturnCtx(n);return Oe(s,{code:de.invalid_type,expected:je.date,received:s.parsedType}),Et}if(Number.isNaN(n.data.getTime())){let s=this._getOrReturnCtx(n);return Oe(s,{code:de.invalid_date}),Et}let i=new bo,o;for(let s of this._def.checks)s.kind==="min"?n.data.getTime()<s.value&&(o=this._getOrReturnCtx(n,o),Oe(o,{code:de.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?n.data.getTime()>s.value&&(o=this._getOrReturnCtx(n,o),Oe(o,{code:de.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):An.assertNever(s);return{status:i.value,value:new Date(n.data.getTime())}}_addCheck(n){return new e(b(m({},this._def),{checks:[...this._def.checks,n]}))}min(n,r){return this._addCheck({kind:"min",value:n.getTime(),message:st.toString(r)})}max(n,r){return this._addCheck({kind:"max",value:n.getTime(),message:st.toString(r)})}get minDate(){let n=null;for(let r of this._def.checks)r.kind==="min"&&(n===null||r.value>n)&&(n=r.value);return n!=null?new Date(n):null}get maxDate(){let n=null;for(let r of this._def.checks)r.kind==="max"&&(n===null||r.value<n)&&(n=r.value);return n!=null?new Date(n):null}}return e.create=t=>new e(m({checks:[],coerce:t?.coerce||!1,typeName:Y.ZodDate},an(t))),e})(),OX=(()=>{class e extends hn{_parse(n){if(this._getType(n)!==je.symbol){let i=this._getOrReturnCtx(n);return Oe(i,{code:de.invalid_type,expected:je.symbol,received:i.parsedType}),Et}return jo(n.data)}}return e.create=t=>new e(m({typeName:Y.ZodSymbol},an(t))),e})(),NB=(()=>{class e extends hn{_parse(n){if(this._getType(n)!==je.undefined){let i=this._getOrReturnCtx(n);return Oe(i,{code:de.invalid_type,expected:je.undefined,received:i.parsedType}),Et}return jo(n.data)}}return e.create=t=>new e(m({typeName:Y.ZodUndefined},an(t))),e})(),$B=(()=>{class e extends hn{_parse(n){if(this._getType(n)!==je.null){let i=this._getOrReturnCtx(n);return Oe(i,{code:de.invalid_type,expected:je.null,received:i.parsedType}),Et}return jo(n.data)}}return e.create=t=>new e(m({typeName:Y.ZodNull},an(t))),e})(),lA=(()=>{class e extends hn{constructor(){super(...arguments),this._any=!0}_parse(n){return jo(n.data)}}return e.create=t=>new e(m({typeName:Y.ZodAny},an(t))),e})(),Rw=(()=>{class e extends hn{constructor(){super(...arguments),this._unknown=!0}_parse(n){return jo(n.data)}}return e.create=t=>new e(m({typeName:Y.ZodUnknown},an(t))),e})(),Tf=(()=>{class e extends hn{_parse(n){let r=this._getOrReturnCtx(n);return Oe(r,{code:de.invalid_type,expected:je.never,received:r.parsedType}),Et}}return e.create=t=>new e(m({typeName:Y.ZodNever},an(t))),e})(),MX=(()=>{class e extends hn{_parse(n){if(this._getType(n)!==je.undefined){let i=this._getOrReturnCtx(n);return Oe(i,{code:de.invalid_type,expected:je.void,received:i.parsedType}),Et}return jo(n.data)}}return e.create=t=>new e(m({typeName:Y.ZodVoid},an(t))),e})(),Nw=(()=>{class e extends hn{_parse(n){let{ctx:r,status:i}=this._processInputParams(n),o=this._def;if(r.parsedType!==je.array)return Oe(r,{code:de.invalid_type,expected:je.array,received:r.parsedType}),Et;if(o.exactLength!==null){let a=r.data.length>o.exactLength.value,c=r.data.length<o.exactLength.value;(a||c)&&(Oe(r,{code:a?de.too_big:de.too_small,minimum:c?o.exactLength.value:void 0,maximum:a?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),i.dirty())}if(o.minLength!==null&&r.data.length<o.minLength.value&&(Oe(r,{code:de.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),i.dirty()),o.maxLength!==null&&r.data.length>o.maxLength.value&&(Oe(r,{code:de.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),i.dirty()),r.common.async)return Promise.all([...r.data].map((a,c)=>o.type._parseAsync(new qa(r,a,r.path,c)))).then(a=>bo.mergeArray(i,a));let s=[...r.data].map((a,c)=>o.type._parseSync(new qa(r,a,r.path,c)));return bo.mergeArray(i,s)}get element(){return this._def.type}min(n,r){return new e(b(m({},this._def),{minLength:{value:n,message:st.toString(r)}}))}max(n,r){return new e(b(m({},this._def),{maxLength:{value:n,message:st.toString(r)}}))}length(n,r){return new e(b(m({},this._def),{exactLength:{value:n,message:st.toString(r)}}))}nonempty(n){return this.min(1,n)}}return e.create=(t,n)=>new e(m({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Y.ZodArray},an(n))),e})();function w_(e){if(e instanceof x_){let t={};for(let n in e.shape){let r=e.shape[n];t[n]=kp.create(w_(r))}return new x_(b(m({},e._def),{shape:()=>t}))}else return e instanceof Nw?new Nw(b(m({},e._def),{type:w_(e.element)})):e instanceof kp?kp.create(w_(e.unwrap())):e instanceof I_?I_.create(w_(e.unwrap())):e instanceof C_?C_.create(e.items.map(t=>w_(t))):e}var x_=(()=>{class e extends hn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let n=this._def.shape(),r=An.objectKeys(n);return this._cached={shape:n,keys:r},this._cached}_parse(n){if(this._getType(n)!==je.object){let d=this._getOrReturnCtx(n);return Oe(d,{code:de.invalid_type,expected:je.object,received:d.parsedType}),Et}let{status:i,ctx:o}=this._processInputParams(n),{shape:s,keys:a}=this._getCached(),c=[];if(!(this._def.catchall instanceof Tf&&this._def.unknownKeys==="strip"))for(let d in o.data)a.includes(d)||c.push(d);let u=[];for(let d of a){let f=s[d],g=o.data[d];u.push({key:{status:"valid",value:d},value:f._parse(new qa(o,g,o.path,d)),alwaysSet:d in o.data})}if(this._def.catchall instanceof Tf){let d=this._def.unknownKeys;if(d==="passthrough")for(let f of c)u.push({key:{status:"valid",value:f},value:{status:"valid",value:o.data[f]}});else if(d==="strict")c.length>0&&(Oe(o,{code:de.unrecognized_keys,keys:c}),i.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let d=this._def.catchall;for(let f of c){let g=o.data[f];u.push({key:{status:"valid",value:f},value:d._parse(new qa(o,g,o.path,f)),alwaysSet:f in o.data})}}return o.common.async?Promise.resolve().then(()=>y(this,null,function*(){let d=[];for(let f of u){let g=yield f.key,h=yield f.value;d.push({key:g,value:h,alwaysSet:f.alwaysSet})}return d})).then(d=>bo.mergeObjectSync(i,d)):bo.mergeObjectSync(i,u)}get shape(){return this._def.shape()}strict(n){return st.errToObj,new e(m(b(m({},this._def),{unknownKeys:"strict"}),n!==void 0?{errorMap:(r,i)=>{let o=this._def.errorMap?.(r,i).message??i.defaultError;return r.code==="unrecognized_keys"?{message:st.errToObj(n).message??o}:{message:o}}}:{}))}strip(){return new e(b(m({},this._def),{unknownKeys:"strip"}))}passthrough(){return new e(b(m({},this._def),{unknownKeys:"passthrough"}))}extend(n){return new e(b(m({},this._def),{shape:()=>m(m({},this._def.shape()),n)}))}merge(n){return new e({unknownKeys:n._def.unknownKeys,catchall:n._def.catchall,shape:()=>m(m({},this._def.shape()),n._def.shape()),typeName:Y.ZodObject})}setKey(n,r){return this.augment({[n]:r})}catchall(n){return new e(b(m({},this._def),{catchall:n}))}pick(n){let r={};for(let i of An.objectKeys(n))n[i]&&this.shape[i]&&(r[i]=this.shape[i]);return new e(b(m({},this._def),{shape:()=>r}))}omit(n){let r={};for(let i of An.objectKeys(this.shape))n[i]||(r[i]=this.shape[i]);return new e(b(m({},this._def),{shape:()=>r}))}deepPartial(){return w_(this)}partial(n){let r={};for(let i of An.objectKeys(this.shape)){let o=this.shape[i];n&&!n[i]?r[i]=o:r[i]=o.optional()}return new e(b(m({},this._def),{shape:()=>r}))}required(n){let r={};for(let i of An.objectKeys(this.shape))if(n&&!n[i])r[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof kp;)s=s._def.innerType;r[i]=s}return new e(b(m({},this._def),{shape:()=>r}))}keyof(){return RX(An.objectKeys(this.shape))}}return e.create=(t,n)=>new e(m({shape:()=>t,unknownKeys:"strip",catchall:Tf.create(),typeName:Y.ZodObject},an(n))),e.strictCreate=(t,n)=>new e(m({shape:()=>t,unknownKeys:"strict",catchall:Tf.create(),typeName:Y.ZodObject},an(n))),e.lazycreate=(t,n)=>new e(m({shape:t,unknownKeys:"strip",catchall:Tf.create(),typeName:Y.ZodObject},an(n))),e})(),LB=(()=>{class e extends hn{_parse(n){let{ctx:r}=this._processInputParams(n),i=this._def.options;function o(s){for(let c of s)if(c.result.status==="valid")return c.result;for(let c of s)if(c.result.status==="dirty")return r.common.issues.push(...c.ctx.common.issues),c.result;let a=s.map(c=>new Nl(c.ctx.common.issues));return Oe(r,{code:de.invalid_union,unionErrors:a}),Et}if(r.common.async)return Promise.all(i.map(s=>y(this,null,function*(){let a=b(m({},r),{common:b(m({},r.common),{issues:[]}),parent:null});return{result:yield s._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}}))).then(o);{let s,a=[];for(let u of i){let d=b(m({},r),{common:b(m({},r.common),{issues:[]}),parent:null}),f=u._parseSync({data:r.data,path:r.path,parent:d});if(f.status==="valid")return f;f.status==="dirty"&&!s&&(s={result:f,ctx:d}),d.common.issues.length&&a.push(d.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;let c=a.map(u=>new Nl(u));return Oe(r,{code:de.invalid_union,unionErrors:c}),Et}}get options(){return this._def.options}}return e.create=(t,n)=>new e(m({options:t,typeName:Y.ZodUnion},an(n))),e})(),Xu=e=>e instanceof jB?Xu(e.schema):e instanceof E_?Xu(e.innerType()):e instanceof zB?[e.value]:e instanceof fA?e.options:e instanceof BB?An.objectValues(e.enum):e instanceof UB?Xu(e._def.innerType):e instanceof NB?[void 0]:e instanceof $B?[null]:e instanceof kp?[void 0,...Xu(e.unwrap())]:e instanceof I_?[null,...Xu(e.unwrap())]:e instanceof $w||e instanceof HB?Xu(e.unwrap()):e instanceof VB?Xu(e._def.innerType):[],uA=class e extends hn{_parse(t){let{ctx:n}=this._processInputParams(t);if(n.parsedType!==je.object)return Oe(n,{code:de.invalid_type,expected:je.object,received:n.parsedType}),Et;let r=this.discriminator,i=n.data[r],o=this.optionsMap.get(i);return o?n.common.async?o._parseAsync({data:n.data,path:n.path,parent:n}):o._parseSync({data:n.data,path:n.path,parent:n}):(Oe(n,{code:de.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Et)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){let i=new Map;for(let o of n){let s=Xu(o.shape[t]);if(!s.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(let a of s){if(i.has(a))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(a)}`);i.set(a,o)}}return new e(m({typeName:Y.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:i},an(r)))}};function OB(e,t){let n=Rl(e),r=Rl(t);if(e===t)return{valid:!0,data:e};if(n===je.object&&r===je.object){let i=An.objectKeys(t),o=An.objectKeys(e).filter(a=>i.indexOf(a)!==-1),s=m(m({},e),t);for(let a of o){let c=OB(e[a],t[a]);if(!c.valid)return{valid:!1};s[a]=c.data}return{valid:!0,data:s}}else if(n===je.array&&r===je.array){if(e.length!==t.length)return{valid:!1};let i=[];for(let o=0;o<e.length;o++){let s=e[o],a=t[o],c=OB(s,a);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===je.date&&r===je.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}var FB=(()=>{class e extends hn{_parse(n){let{status:r,ctx:i}=this._processInputParams(n),o=(s,a)=>{if(aA(s)||aA(a))return Et;let c=OB(s.value,a.value);return c.valid?((cA(s)||cA(a))&&r.dirty(),{status:r.value,value:c.data}):(Oe(i,{code:de.invalid_intersection_types}),Et)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,a])=>o(s,a)):o(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}return e.create=(t,n,r)=>new e(m({left:t,right:n,typeName:Y.ZodIntersection},an(r))),e})(),C_=(()=>{class e extends hn{_parse(n){let{status:r,ctx:i}=this._processInputParams(n);if(i.parsedType!==je.array)return Oe(i,{code:de.invalid_type,expected:je.array,received:i.parsedType}),Et;if(i.data.length<this._def.items.length)return Oe(i,{code:de.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Et;!this._def.rest&&i.data.length>this._def.items.length&&(Oe(i,{code:de.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let s=[...i.data].map((a,c)=>{let u=this._def.items[c]||this._def.rest;return u?u._parse(new qa(i,a,i.path,c)):null}).filter(a=>!!a);return i.common.async?Promise.all(s).then(a=>bo.mergeArray(r,a)):bo.mergeArray(r,s)}get items(){return this._def.items}rest(n){return new e(b(m({},this._def),{rest:n}))}}return e.create=(t,n)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new e(m({items:t,typeName:Y.ZodTuple,rest:null},an(n)))},e})(),dA=class e extends hn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==je.object)return Oe(r,{code:de.invalid_type,expected:je.object,received:r.parsedType}),Et;let i=[],o=this._def.keyType,s=this._def.valueType;for(let a in r.data)i.push({key:o._parse(new qa(r,a,r.path,a)),value:s._parse(new qa(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?bo.mergeObjectAsync(n,i):bo.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof hn?new e(m({keyType:t,valueType:n,typeName:Y.ZodRecord},an(r))):new e(m({keyType:mA.create(),valueType:t,typeName:Y.ZodRecord},an(n)))}},DX=(()=>{class e extends hn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(n){let{status:r,ctx:i}=this._processInputParams(n);if(i.parsedType!==je.map)return Oe(i,{code:de.invalid_type,expected:je.map,received:i.parsedType}),Et;let o=this._def.keyType,s=this._def.valueType,a=[...i.data.entries()].map(([c,u],d)=>({key:o._parse(new qa(i,c,i.path,[d,"key"])),value:s._parse(new qa(i,u,i.path,[d,"value"]))}));if(i.common.async){let c=new Map;return Promise.resolve().then(()=>y(this,null,function*(){for(let u of a){let d=yield u.key,f=yield u.value;if(d.status==="aborted"||f.status==="aborted")return Et;(d.status==="dirty"||f.status==="dirty")&&r.dirty(),c.set(d.value,f.value)}return{status:r.value,value:c}}))}else{let c=new Map;for(let u of a){let d=u.key,f=u.value;if(d.status==="aborted"||f.status==="aborted")return Et;(d.status==="dirty"||f.status==="dirty")&&r.dirty(),c.set(d.value,f.value)}return{status:r.value,value:c}}}}return e.create=(t,n,r)=>new e(m({valueType:n,keyType:t,typeName:Y.ZodMap},an(r))),e})(),PX=(()=>{class e extends hn{_parse(n){let{status:r,ctx:i}=this._processInputParams(n);if(i.parsedType!==je.set)return Oe(i,{code:de.invalid_type,expected:je.set,received:i.parsedType}),Et;let o=this._def;o.minSize!==null&&i.data.size<o.minSize.value&&(Oe(i,{code:de.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),r.dirty()),o.maxSize!==null&&i.data.size>o.maxSize.value&&(Oe(i,{code:de.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),r.dirty());let s=this._def.valueType;function a(u){let d=new Set;for(let f of u){if(f.status==="aborted")return Et;f.status==="dirty"&&r.dirty(),d.add(f.value)}return{status:r.value,value:d}}let c=[...i.data.values()].map((u,d)=>s._parse(new qa(i,u,i.path,d)));return i.common.async?Promise.all(c).then(u=>a(u)):a(c)}min(n,r){return new e(b(m({},this._def),{minSize:{value:n,message:st.toString(r)}}))}max(n,r){return new e(b(m({},this._def),{maxSize:{value:n,message:st.toString(r)}}))}size(n,r){return this.min(n,r).max(n,r)}nonempty(n){return this.min(1,n)}}return e.create=(t,n)=>new e(m({valueType:t,minSize:null,maxSize:null,typeName:Y.ZodSet},an(n))),e})(),pA=class e extends hn{constructor(){super(...arguments),this.validate=this.implement}_parse(t){let{ctx:n}=this._processInputParams(t);if(n.parsedType!==je.function)return Oe(n,{code:de.invalid_type,expected:je.function,received:n.parsedType}),Et;function r(a,c){return Pw({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,v_(),Qu].filter(u=>!!u),issueData:{code:de.invalid_arguments,argumentsError:c}})}function i(a,c){return Pw({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,v_(),Qu].filter(u=>!!u),issueData:{code:de.invalid_return_type,returnTypeError:c}})}let o={errorMap:n.common.contextualErrorMap},s=n.data;if(this._def.returns instanceof hA){let a=this;return jo(function(...c){return y(this,null,function*(){let u=new Nl([]),d=yield a._def.args.parseAsync(c,o).catch(h=>{throw u.addIssue(r(c,h)),u}),f=yield Reflect.apply(s,this,d);return yield a._def.returns._def.type.parseAsync(f,o).catch(h=>{throw u.addIssue(i(f,h)),u})})})}else{let a=this;return jo(function(...c){let u=a._def.args.safeParse(c,o);if(!u.success)throw new Nl([r(c,u.error)]);let d=Reflect.apply(s,this,u.data),f=a._def.returns.safeParse(d,o);if(!f.success)throw new Nl([i(d,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new e(b(m({},this._def),{args:C_.create(t).rest(Rw.create())}))}returns(t){return new e(b(m({},this._def),{returns:t}))}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new e(m({args:t||C_.create([]).rest(Rw.create()),returns:n||Rw.create(),typeName:Y.ZodFunction},an(r)))}},jB=(()=>{class e extends hn{get schema(){return this._def.getter()}_parse(n){let{ctx:r}=this._processInputParams(n);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}return e.create=(t,n)=>new e(m({getter:t,typeName:Y.ZodLazy},an(n))),e})(),zB=(()=>{class e extends hn{_parse(n){if(n.data!==this._def.value){let r=this._getOrReturnCtx(n);return Oe(r,{received:r.data,code:de.invalid_literal,expected:this._def.value}),Et}return{status:"valid",value:n.data}}get value(){return this._def.value}}return e.create=(t,n)=>new e(m({value:t,typeName:Y.ZodLiteral},an(n))),e})();function RX(e,t){return new fA(m({values:e,typeName:Y.ZodEnum},an(t)))}var fA=(()=>{class e extends hn{_parse(n){if(typeof n.data!="string"){let r=this._getOrReturnCtx(n),i=this._def.values;return Oe(r,{expected:An.joinValues(i),received:r.parsedType,code:de.invalid_type}),Et}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(n.data)){let r=this._getOrReturnCtx(n),i=this._def.values;return Oe(r,{received:r.data,code:de.invalid_enum_value,options:i}),Et}return jo(n.data)}get options(){return this._def.values}get enum(){let n={};for(let r of this._def.values)n[r]=r;return n}get Values(){let n={};for(let r of this._def.values)n[r]=r;return n}get Enum(){let n={};for(let r of this._def.values)n[r]=r;return n}extract(n,r=this._def){return e.create(n,m(m({},this._def),r))}exclude(n,r=this._def){return e.create(this.options.filter(i=>!n.includes(i)),m(m({},this._def),r))}}return e.create=RX,e})(),BB=(()=>{class e extends hn{_parse(n){let r=An.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(n);if(i.parsedType!==je.string&&i.parsedType!==je.number){let o=An.objectValues(r);return Oe(i,{expected:An.joinValues(o),received:i.parsedType,code:de.invalid_type}),Et}if(this._cache||(this._cache=new Set(An.getValidEnumValues(this._def.values))),!this._cache.has(n.data)){let o=An.objectValues(r);return Oe(i,{received:i.data,code:de.invalid_enum_value,options:o}),Et}return jo(n.data)}get enum(){return this._def.values}}return e.create=(t,n)=>new e(m({values:t,typeName:Y.ZodNativeEnum},an(n))),e})(),hA=(()=>{class e extends hn{unwrap(){return this._def.type}_parse(n){let{ctx:r}=this._processInputParams(n);if(r.parsedType!==je.promise&&r.common.async===!1)return Oe(r,{code:de.invalid_type,expected:je.promise,received:r.parsedType}),Et;let i=r.parsedType===je.promise?r.data:Promise.resolve(r.data);return jo(i.then(o=>this._def.type.parseAsync(o,{path:r.path,errorMap:r.common.contextualErrorMap})))}}return e.create=(t,n)=>new e(m({type:t,typeName:Y.ZodPromise},an(n))),e})(),E_=(()=>{class e extends hn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Y.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(n){let{status:r,ctx:i}=this._processInputParams(n),o=this._def.effect||null,s={addIssue:a=>{Oe(i,a),a.fatal?r.abort():r.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),o.type==="preprocess"){let a=o.transform(i.data,s);if(i.common.async)return Promise.resolve(a).then(c=>y(this,null,function*(){if(r.value==="aborted")return Et;let u=yield this._def.schema._parseAsync({data:c,path:i.path,parent:i});return u.status==="aborted"?Et:u.status==="dirty"?kf(u.value):r.value==="dirty"?kf(u.value):u}));{if(r.value==="aborted")return Et;let c=this._def.schema._parseSync({data:a,path:i.path,parent:i});return c.status==="aborted"?Et:c.status==="dirty"?kf(c.value):r.value==="dirty"?kf(c.value):c}}if(o.type==="refinement"){let a=c=>{let u=o.refinement(c,s);if(i.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(i.common.async===!1){let c=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return c.status==="aborted"?Et:(c.status==="dirty"&&r.dirty(),a(c.value),{status:r.value,value:c.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(c=>c.status==="aborted"?Et:(c.status==="dirty"&&r.dirty(),a(c.value).then(()=>({status:r.value,value:c.value}))))}if(o.type==="transform")if(i.common.async===!1){let a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Sp(a))return Et;let c=o.transform(a.value,s);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:c}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>Sp(a)?Promise.resolve(o.transform(a.value,s)).then(c=>({status:r.value,value:c})):Et);An.assertNever(o)}}return e.create=(t,n,r)=>new e(m({schema:t,typeName:Y.ZodEffects,effect:n},an(r))),e.createWithPreprocess=(t,n,r)=>new e(m({schema:n,effect:{type:"preprocess",transform:t},typeName:Y.ZodEffects},an(r))),e})();var kp=(()=>{class e extends hn{_parse(n){return this._getType(n)===je.undefined?jo(void 0):this._def.innerType._parse(n)}unwrap(){return this._def.innerType}}return e.create=(t,n)=>new e(m({innerType:t,typeName:Y.ZodOptional},an(n))),e})(),I_=(()=>{class e extends hn{_parse(n){return this._getType(n)===je.null?jo(null):this._def.innerType._parse(n)}unwrap(){return this._def.innerType}}return e.create=(t,n)=>new e(m({innerType:t,typeName:Y.ZodNullable},an(n))),e})(),UB=(()=>{class e extends hn{_parse(n){let{ctx:r}=this._processInputParams(n),i=r.data;return r.parsedType===je.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}return e.create=(t,n)=>new e(m({innerType:t,typeName:Y.ZodDefault,defaultValue:typeof n.default=="function"?n.default:()=>n.default},an(n))),e})(),VB=(()=>{class e extends hn{_parse(n){let{ctx:r}=this._processInputParams(n),i=b(m({},r),{common:b(m({},r.common),{issues:[]})}),o=this._def.innerType._parse({data:i.data,path:i.path,parent:m({},i)});return b_(o)?o.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Nl(i.common.issues)},input:i.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Nl(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}return e.create=(t,n)=>new e(m({innerType:t,typeName:Y.ZodCatch,catchValue:typeof n.catch=="function"?n.catch:()=>n.catch},an(n))),e})(),NX=(()=>{class e extends hn{_parse(n){if(this._getType(n)!==je.nan){let i=this._getOrReturnCtx(n);return Oe(i,{code:de.invalid_type,expected:je.nan,received:i.parsedType}),Et}return{status:"valid",value:n.data}}}return e.create=t=>new e(m({typeName:Y.ZodNaN},an(t))),e})(),gOe=Symbol("zod_brand"),$w=class extends hn{_parse(t){let{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}},Lw=class e extends hn{_parse(t){let{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return y(this,null,function*(){let o=yield this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Et:o.status==="dirty"?(n.dirty(),kf(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})});{let i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Et:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(t,n){return new e({in:t,out:n,typeName:Y.ZodPipeline})}},HB=(()=>{class e extends hn{_parse(n){let r=this._def.innerType._parse(n),i=o=>(Sp(o)&&(o.value=Object.freeze(o.value)),o);return b_(r)?r.then(o=>i(o)):i(r)}unwrap(){return this._def.innerType}}return e.create=(t,n)=>new e(m({innerType:t,typeName:Y.ZodReadonly},an(n))),e})();function SX(e,t){let n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function $X(e,t={},n){return e?lA.create().superRefine((r,i)=>{let o=e(r);if(o instanceof Promise)return o.then(s=>{if(!s){let a=SX(t,r),c=a.fatal??n??!0;i.addIssue(b(m({code:"custom"},a),{fatal:c}))}});if(!o){let s=SX(t,r),a=s.fatal??n??!0;i.addIssue(b(m({code:"custom"},s),{fatal:a}))}}):lA.create()}var _Oe={object:x_.lazycreate},Y=(function(e){return e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly",e})(Y||{});var yOe=(e,t={message:`Input not instance of ${e.name}`})=>$X(n=>n instanceof e,t),LX=mA.create,FX=MB.create,vOe=NX.create,bOe=DB.create,jX=PB.create,wOe=RB.create,xOe=OX.create,COe=NB.create,EOe=$B.create,IOe=lA.create,SOe=Rw.create,kOe=Tf.create,TOe=MX.create,AOe=Nw.create,zX=x_.create,OOe=x_.strictCreate,MOe=LB.create,DOe=uA.create,POe=FB.create,ROe=C_.create,NOe=dA.create,$Oe=DX.create,LOe=PX.create,FOe=pA.create,jOe=jB.create,zOe=zB.create,BOe=fA.create,UOe=BB.create,VOe=hA.create,HOe=E_.create,ZOe=kp.create,qOe=I_.create,GOe=E_.createWithPreprocess,WOe=Lw.create,KOe=()=>LX().optional(),JOe=()=>FX().optional(),YOe=()=>jX().optional(),QOe={string:e=>mA.create(b(m({},e),{coerce:!0})),number:e=>MB.create(b(m({},e),{coerce:!0})),boolean:e=>PB.create(b(m({},e),{coerce:!0})),bigint:e=>DB.create(b(m({},e),{coerce:!0})),date:e=>RB.create(b(m({},e),{coerce:!0}))};var XOe=Et;var va={};Kd(va,{$ZodAny:()=>pO,$ZodArray:()=>hO,$ZodAsyncError:()=>Tc,$ZodBase64:()=>nO,$ZodBase64URL:()=>rO,$ZodBigInt:()=>Yw,$ZodBigIntFormat:()=>cO,$ZodBoolean:()=>F_,$ZodCIDRv4:()=>eO,$ZodCIDRv6:()=>tO,$ZodCUID:()=>UA,$ZodCUID2:()=>VA,$ZodCatch:()=>OO,$ZodCheck:()=>pr,$ZodCheckBigIntFormat:()=>DU,$ZodCheckEndsWith:()=>HU,$ZodCheckGreaterThan:()=>OA,$ZodCheckIncludes:()=>UU,$ZodCheckLengthEquals:()=>FU,$ZodCheckLessThan:()=>AA,$ZodCheckLowerCase:()=>zU,$ZodCheckMaxLength:()=>$U,$ZodCheckMaxSize:()=>PU,$ZodCheckMimeType:()=>qU,$ZodCheckMinLength:()=>LU,$ZodCheckMinSize:()=>RU,$ZodCheckMultipleOf:()=>OU,$ZodCheckNumberFormat:()=>MU,$ZodCheckOverwrite:()=>GU,$ZodCheckProperty:()=>ZU,$ZodCheckRegex:()=>jU,$ZodCheckSizeEquals:()=>NU,$ZodCheckStartsWith:()=>VU,$ZodCheckStringFormat:()=>L_,$ZodCheckUpperCase:()=>BU,$ZodCodec:()=>B_,$ZodCustom:()=>FO,$ZodCustomStringFormat:()=>sO,$ZodDate:()=>fO,$ZodDefault:()=>SO,$ZodDiscriminatedUnion:()=>gO,$ZodE164:()=>iO,$ZodEmail:()=>FA,$ZodEmoji:()=>zA,$ZodEncodeError:()=>Tp,$ZodEnum:()=>wO,$ZodError:()=>qw,$ZodFile:()=>CO,$ZodFunction:()=>NO,$ZodGUID:()=>$A,$ZodIPv4:()=>YA,$ZodIPv6:()=>QA,$ZodISODate:()=>WA,$ZodISODateTime:()=>GA,$ZodISODuration:()=>JA,$ZodISOTime:()=>KA,$ZodIntersection:()=>_O,$ZodJWT:()=>oO,$ZodKSUID:()=>qA,$ZodLazy:()=>LO,$ZodLiteral:()=>xO,$ZodMAC:()=>XA,$ZodMap:()=>vO,$ZodNaN:()=>MO,$ZodNanoID:()=>BA,$ZodNever:()=>z_,$ZodNonOptional:()=>TO,$ZodNull:()=>dO,$ZodNullable:()=>IO,$ZodNumber:()=>Jw,$ZodNumberFormat:()=>aO,$ZodObject:()=>YU,$ZodObjectJIT:()=>QU,$ZodOptional:()=>Df,$ZodPipe:()=>DO,$ZodPrefault:()=>kO,$ZodPromise:()=>$O,$ZodReadonly:()=>PO,$ZodRealError:()=>Hs,$ZodRecord:()=>yO,$ZodRegistry:()=>V_,$ZodSet:()=>bO,$ZodString:()=>Rp,$ZodStringFormat:()=>ir,$ZodSuccess:()=>AO,$ZodSymbol:()=>lO,$ZodTemplateLiteral:()=>RO,$ZodTransform:()=>EO,$ZodTuple:()=>Xw,$ZodType:()=>Ut,$ZodULID:()=>HA,$ZodURL:()=>jA,$ZodUUID:()=>LA,$ZodUndefined:()=>uO,$ZodUnion:()=>Qw,$ZodUnknown:()=>j_,$ZodVoid:()=>mO,$ZodXID:()=>ZA,$brand:()=>jw,$constructor:()=>V,$input:()=>VO,$output:()=>UO,Doc:()=>Kw,JSONSchema:()=>hte,JSONSchemaGenerator:()=>Ex,NEVER:()=>S_,TimePrecision:()=>GO,_any:()=>fM,_array:()=>XU,_base64:()=>vx,_base64url:()=>bx,_bigint:()=>aM,_boolean:()=>oM,_catch:()=>gPe,_check:()=>fte,_cidrv4:()=>_x,_cidrv6:()=>yx,_coercedBigint:()=>cM,_coercedBoolean:()=>sM,_coercedDate:()=>_M,_coercedNumber:()=>XO,_coercedString:()=>ZO,_cuid:()=>ux,_cuid2:()=>dx,_custom:()=>IM,_date:()=>gM,_decode:()=>wA,_decodeAsync:()=>CA,_default:()=>mPe,_discriminatedUnion:()=>tPe,_e164:()=>wx,_email:()=>rx,_emoji:()=>cx,_encode:()=>bA,_encodeAsync:()=>xA,_endsWith:()=>ey,_enum:()=>aPe,_file:()=>EM,_float32:()=>tM,_float64:()=>nM,_gt:()=>Ll,_gte:()=>zo,_guid:()=>H_,_includes:()=>Q_,_int:()=>eM,_int32:()=>rM,_int64:()=>lM,_intersection:()=>nPe,_ipv4:()=>hx,_ipv6:()=>gx,_isoDate:()=>KO,_isoDateTime:()=>WO,_isoDuration:()=>YO,_isoTime:()=>JO,_jwt:()=>xx,_ksuid:()=>fx,_lazy:()=>bPe,_length:()=>Nf,_literal:()=>lPe,_lowercase:()=>J_,_lt:()=>$l,_lte:()=>qs,_mac:()=>qO,_map:()=>oPe,_max:()=>qs,_maxLength:()=>Rf,_maxSize:()=>Pf,_mime:()=>ty,_min:()=>zo,_minLength:()=>td,_minSize:()=>$p,_multipleOf:()=>Np,_nan:()=>yM,_nanoid:()=>lx,_nativeEnum:()=>cPe,_negative:()=>bM,_never:()=>G_,_nonnegative:()=>xM,_nonoptional:()=>fPe,_nonpositive:()=>wM,_normalize:()=>ny,_null:()=>mM,_nullable:()=>pPe,_number:()=>QO,_optional:()=>dPe,_overwrite:()=>Ac,_parse:()=>D_,_parseAsync:()=>P_,_pipe:()=>_Pe,_positive:()=>vM,_promise:()=>wPe,_property:()=>CM,_readonly:()=>yPe,_record:()=>iPe,_refine:()=>SM,_regex:()=>K_,_safeDecode:()=>IA,_safeDecodeAsync:()=>kA,_safeEncode:()=>EA,_safeEncodeAsync:()=>SA,_safeParse:()=>R_,_safeParseAsync:()=>N_,_set:()=>sPe,_size:()=>W_,_slugify:()=>Cx,_startsWith:()=>X_,_string:()=>HO,_stringFormat:()=>$f,_stringbool:()=>OM,_success:()=>hPe,_superRefine:()=>kM,_symbol:()=>dM,_templateLiteral:()=>vPe,_toLowerCase:()=>iy,_toUpperCase:()=>oy,_transform:()=>uPe,_trim:()=>ry,_tuple:()=>rPe,_uint32:()=>iM,_uint64:()=>uM,_ulid:()=>px,_undefined:()=>pM,_union:()=>ePe,_unknown:()=>q_,_uppercase:()=>Y_,_url:()=>Z_,_uuid:()=>ix,_uuidv4:()=>ox,_uuidv6:()=>sx,_uuidv7:()=>ax,_void:()=>hM,_xid:()=>mx,clone:()=>$r,config:()=>li,decode:()=>GX,decodeAsync:()=>KX,describe:()=>TM,encode:()=>qX,encodeAsync:()=>WX,flattenError:()=>O_,formatError:()=>M_,globalConfig:()=>Fw,globalRegistry:()=>Xn,isValidBase64:()=>JU,isValidBase64URL:()=>gee,isValidJWT:()=>_ee,locales:()=>U_,meta:()=>AM,parse:()=>Wa,parseAsync:()=>ed,prettifyError:()=>vA,regexes:()=>Zs,registry:()=>nx,safeDecode:()=>YX,safeDecodeAsync:()=>XX,safeEncode:()=>JX,safeEncodeAsync:()=>QX,safeParse:()=>Of,safeParseAsync:()=>$_,toDotPath:()=>ZX,toJSONSchema:()=>Ka,treeifyError:()=>yA,util:()=>me,version:()=>WU});var S_=Object.freeze({status:"aborted"});function V(e,t,n){function r(a,c){if(a._zod||Object.defineProperty(a,"_zod",{value:{def:c,constr:s,traits:new Set},enumerable:!1}),a._zod.traits.has(e))return;a._zod.traits.add(e),t(a,c);let u=s.prototype,d=Object.keys(u);for(let f=0;f<d.length;f++){let g=d[f];g in a||(a[g]=u[g].bind(a))}}let i=n?.Parent??Object;class o extends i{}Object.defineProperty(o,"name",{value:e});function s(a){var c;let u=n?.Parent?new o:this;r(u,a),(c=u._zod).deferred??(c.deferred=[]);for(let d of u._zod.deferred)d();return u}return Object.defineProperty(s,"init",{value:r}),Object.defineProperty(s,Symbol.hasInstance,{value:a=>n?.Parent&&a instanceof n.Parent?!0:a?._zod?.traits?.has(e)}),Object.defineProperty(s,"name",{value:e}),s}var jw=Symbol("zod_brand"),Tc=class extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},Tp=class extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}},Fw={};function li(e){return e&&Object.assign(Fw,e),Fw}var me={};Kd(me,{BIGINT_FORMAT_RANGES:()=>eU,Class:()=>qB,NUMBER_FORMAT_RANGES:()=>XB,aborted:()=>Pp,allowsEval:()=>KB,assert:()=>oMe,assertEqual:()=>tMe,assertIs:()=>rMe,assertNever:()=>iMe,assertNotEqual:()=>nMe,assignProp:()=>Op,base64ToUint8Array:()=>UX,base64urlToUint8Array:()=>xMe,cached:()=>T_,captureStackTrace:()=>_A,cleanEnum:()=>wMe,cleanRegex:()=>Uw,clone:()=>$r,cloneDef:()=>aMe,createTransparentProxy:()=>mMe,defineLazy:()=>On,esc:()=>gA,escapeRegex:()=>Ga,extend:()=>gMe,finalizeIssue:()=>ya,floatSafeRemainder:()=>GB,getElementAtPath:()=>cMe,getEnumValues:()=>Bw,getLengthableOrigin:()=>Zw,getParsedType:()=>pMe,getSizableOrigin:()=>Hw,hexToUint8Array:()=>EMe,isObject:()=>Af,isPlainObject:()=>Dp,issue:()=>A_,joinValues:()=>Q,jsonStringifyReplacer:()=>k_,merge:()=>yMe,mergeDefs:()=>Mp,normalizeParams:()=>be,nullish:()=>Ap,numKeys:()=>dMe,objectClone:()=>sMe,omit:()=>hMe,optionalKeys:()=>QB,partial:()=>vMe,pick:()=>fMe,prefixIssues:()=>_a,primitiveTypes:()=>YB,promiseAllObject:()=>lMe,propertyKeyTypes:()=>Vw,randomString:()=>uMe,required:()=>bMe,safeExtend:()=>_Me,shallowClone:()=>JB,slugify:()=>WB,stringifyPrimitive:()=>_e,uint8ArrayToBase64:()=>VX,uint8ArrayToBase64url:()=>CMe,uint8ArrayToHex:()=>IMe,unwrapMessage:()=>zw});function tMe(e){return e}function nMe(e){return e}function rMe(e){}function iMe(e){throw new Error}function oMe(e){}function Bw(e){let t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,i])=>t.indexOf(+r)===-1).map(([r,i])=>i)}function Q(e,t="|"){return e.map(n=>_e(n)).join(t)}function k_(e,t){return typeof t=="bigint"?t.toString():t}function T_(e){return{get value(){{let n=e();return Object.defineProperty(this,"value",{value:n}),n}throw new Error("cached value already set")}}}function Ap(e){return e==null}function Uw(e){let t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function GB(e,t){let n=(e.toString().split(".")[1]||"").length,r=t.toString(),i=(r.split(".")[1]||"").length;if(i===0&&/\d?e-\d?/.test(r)){let c=r.match(/\d?e-(\d?)/);c?.[1]&&(i=Number.parseInt(c[1]))}let o=n>i?n:i,s=Number.parseInt(e.toFixed(o).replace(".","")),a=Number.parseInt(t.toFixed(o).replace(".",""));return s%a/10**o}var BX=Symbol("evaluating");function On(e,t,n){let r;Object.defineProperty(e,t,{get(){if(r!==BX)return r===void 0&&(r=BX,r=n()),r},set(i){Object.defineProperty(e,t,{value:i})},configurable:!0})}function sMe(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function Op(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Mp(...e){let t={};for(let n of e){let r=Object.getOwnPropertyDescriptors(n);Object.assign(t,r)}return Object.defineProperties({},t)}function aMe(e){return Mp(e._zod.def)}function cMe(e,t){return t?t.reduce((n,r)=>n?.[r],e):e}function lMe(e){let t=Object.keys(e),n=t.map(r=>e[r]);return Promise.all(n).then(r=>{let i={};for(let o=0;o<t.length;o++)i[t[o]]=r[o];return i})}function uMe(e=10){let t="abcdefghijklmnopqrstuvwxyz",n="";for(let r=0;r<e;r++)n+=t[Math.floor(Math.random()*t.length)];return n}function gA(e){return JSON.stringify(e)}function WB(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}var _A="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Af(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}var KB=T_(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{let e=Function;return new e(""),!0}catch{return!1}});function Dp(e){if(Af(e)===!1)return!1;let t=e.constructor;if(t===void 0||typeof t!="function")return!0;let n=t.prototype;return!(Af(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function JB(e){return Dp(e)?m({},e):Array.isArray(e)?[...e]:e}function dMe(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}var pMe=e=>{let t=typeof e;switch(t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(e)?"array":e===null?"null":e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?"promise":typeof Map<"u"&&e instanceof Map?"map":typeof Set<"u"&&e instanceof Set?"set":typeof Date<"u"&&e instanceof Date?"date":typeof File<"u"&&e instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${t}`)}},Vw=new Set(["string","number","symbol"]),YB=new Set(["string","number","bigint","boolean","symbol","undefined"]);function Ga(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function $r(e,t,n){let r=new e._zod.constr(t??e._zod.def);return(!t||n?.parent)&&(r._zod.parent=e),r}function be(e){let t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?b(m({},t),{error:()=>t.error}):t}function mMe(e){let t;return new Proxy({},{get(n,r,i){return t??(t=e()),Reflect.get(t,r,i)},set(n,r,i,o){return t??(t=e()),Reflect.set(t,r,i,o)},has(n,r){return t??(t=e()),Reflect.has(t,r)},deleteProperty(n,r){return t??(t=e()),Reflect.deleteProperty(t,r)},ownKeys(n){return t??(t=e()),Reflect.ownKeys(t)},getOwnPropertyDescriptor(n,r){return t??(t=e()),Reflect.getOwnPropertyDescriptor(t,r)},defineProperty(n,r,i){return t??(t=e()),Reflect.defineProperty(t,r,i)}})}function _e(e){return typeof e=="bigint"?e.toString()+"n":typeof e=="string"?`"${e}"`:`${e}`}function QB(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}var XB={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},eU={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function fMe(e,t){let n=e._zod.def,r=Mp(e._zod.def,{get shape(){let i={};for(let o in t){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);t[o]&&(i[o]=n.shape[o])}return Op(this,"shape",i),i},checks:[]});return $r(e,r)}function hMe(e,t){let n=e._zod.def,r=Mp(e._zod.def,{get shape(){let i=m({},e._zod.def.shape);for(let o in t){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);t[o]&&delete i[o]}return Op(this,"shape",i),i},checks:[]});return $r(e,r)}function gMe(e,t){if(!Dp(t))throw new Error("Invalid input to extend: expected a plain object");let n=e._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let i=Mp(e._zod.def,{get shape(){let o=m(m({},e._zod.def.shape),t);return Op(this,"shape",o),o},checks:[]});return $r(e,i)}function _Me(e,t){if(!Dp(t))throw new Error("Invalid input to safeExtend: expected a plain object");let n=b(m({},e._zod.def),{get shape(){let r=m(m({},e._zod.def.shape),t);return Op(this,"shape",r),r},checks:e._zod.def.checks});return $r(e,n)}function yMe(e,t){let n=Mp(e._zod.def,{get shape(){let r=m(m({},e._zod.def.shape),t._zod.def.shape);return Op(this,"shape",r),r},get catchall(){return t._zod.def.catchall},checks:[]});return $r(e,n)}function vMe(e,t,n){let r=Mp(t._zod.def,{get shape(){let i=t._zod.def.shape,o=m({},i);if(n)for(let s in n){if(!(s in i))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(o[s]=e?new e({type:"optional",innerType:i[s]}):i[s])}else for(let s in i)o[s]=e?new e({type:"optional",innerType:i[s]}):i[s];return Op(this,"shape",o),o},checks:[]});return $r(t,r)}function bMe(e,t,n){let r=Mp(t._zod.def,{get shape(){let i=t._zod.def.shape,o=m({},i);if(n)for(let s in n){if(!(s in o))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(o[s]=new e({type:"nonoptional",innerType:i[s]}))}else for(let s in i)o[s]=new e({type:"nonoptional",innerType:i[s]});return Op(this,"shape",o),o},checks:[]});return $r(t,r)}function Pp(e,t=0){if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(e.issues[n]?.continue!==!0)return!0;return!1}function _a(e,t){return t.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(e),n})}function zw(e){return typeof e=="string"?e:e?.message}function ya(e,t,n){let r=b(m({},e),{path:e.path??[]});if(!e.message){let i=zw(e.inst?._zod.def?.error?.(e))??zw(t?.error?.(e))??zw(n.customError?.(e))??zw(n.localeError?.(e))??"Invalid input";r.message=i}return delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function Hw(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}function Zw(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function A_(...e){let[t,n,r]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:r}:m({},t)}function wMe(e){return Object.entries(e).filter(([t,n])=>Number.isNaN(Number.parseInt(t,10))).map(t=>t[1])}function UX(e){let t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}function VX(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return btoa(t)}function xMe(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),n="=".repeat((4-t.length%4)%4);return UX(t+n)}function CMe(e){return VX(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function EMe(e){let t=e.replace(/^0x/,"");if(t.length%2!==0)throw new Error("Invalid hex string length");let n=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)n[r/2]=Number.parseInt(t.slice(r,r+2),16);return n}function IMe(e){return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")}var qB=class{constructor(...t){}};var HX=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,k_,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},qw=V("$ZodError",HX),Hs=V("$ZodError",HX,{Parent:Error});function O_(e,t=n=>n.message){let n={},r=[];for(let i of e.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}}function M_(e,t=n=>n.message){let n={_errors:[]},r=i=>{for(let o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(s=>r({issues:s}));else if(o.code==="invalid_key")r({issues:o.issues});else if(o.code==="invalid_element")r({issues:o.issues});else if(o.path.length===0)n._errors.push(t(o));else{let s=n,a=0;for(;a<o.path.length;){let c=o.path[a];a===o.path.length-1?(s[c]=s[c]||{_errors:[]},s[c]._errors.push(t(o))):s[c]=s[c]||{_errors:[]},s=s[c],a++}}};return r(e),n}function yA(e,t=n=>n.message){let n={errors:[]},r=(i,o=[])=>{var s,a;for(let c of i.issues)if(c.code==="invalid_union"&&c.errors.length)c.errors.map(u=>r({issues:u},c.path));else if(c.code==="invalid_key")r({issues:c.issues},c.path);else if(c.code==="invalid_element")r({issues:c.issues},c.path);else{let u=[...o,...c.path];if(u.length===0){n.errors.push(t(c));continue}let d=n,f=0;for(;f<u.length;){let g=u[f],h=f===u.length-1;typeof g=="string"?(d.properties??(d.properties={}),(s=d.properties)[g]??(s[g]={errors:[]}),d=d.properties[g]):(d.items??(d.items=[]),(a=d.items)[g]??(a[g]={errors:[]}),d=d.items[g]),h&&d.errors.push(t(c)),f++}}};return r(e),n}function ZX(e){let t=[],n=e.map(r=>typeof r=="object"?r.key:r);for(let r of n)typeof r=="number"?t.push(`[${r}]`):typeof r=="symbol"?t.push(`[${JSON.stringify(String(r))}]`):/[^\w$]/.test(r)?t.push(`[${JSON.stringify(r)}]`):(t.length&&t.push("."),t.push(r));return t.join("")}function vA(e){let t=[],n=[...e.issues].sort((r,i)=>(r.path??[]).length-(i.path??[]).length);for(let r of n)t.push(`\u2716 ${r.message}`),r.path?.length&&t.push(`  \u2192 at ${ZX(r.path)}`);return t.join(`
`)}var D_=e=>(t,n,r,i)=>{let o=r?Object.assign(r,{async:!1}):{async:!1},s=t._zod.run({value:n,issues:[]},o);if(s instanceof Promise)throw new Tc;if(s.issues.length){let a=new(i?.Err??e)(s.issues.map(c=>ya(c,o,li())));throw _A(a,i?.callee),a}return s.value},Wa=D_(Hs),P_=e=>(t,n,r,i)=>y(null,null,function*(){let o=r?Object.assign(r,{async:!0}):{async:!0},s=t._zod.run({value:n,issues:[]},o);if(s instanceof Promise&&(s=yield s),s.issues.length){let a=new(i?.Err??e)(s.issues.map(c=>ya(c,o,li())));throw _A(a,i?.callee),a}return s.value}),ed=P_(Hs),R_=e=>(t,n,r)=>{let i=r?b(m({},r),{async:!1}):{async:!1},o=t._zod.run({value:n,issues:[]},i);if(o instanceof Promise)throw new Tc;return o.issues.length?{success:!1,error:new(e??qw)(o.issues.map(s=>ya(s,i,li())))}:{success:!0,data:o.value}},Of=R_(Hs),N_=e=>(t,n,r)=>y(null,null,function*(){let i=r?Object.assign(r,{async:!0}):{async:!0},o=t._zod.run({value:n,issues:[]},i);return o instanceof Promise&&(o=yield o),o.issues.length?{success:!1,error:new e(o.issues.map(s=>ya(s,i,li())))}:{success:!0,data:o.value}}),$_=N_(Hs),bA=e=>(t,n,r)=>{let i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return D_(e)(t,n,i)},qX=bA(Hs),wA=e=>(t,n,r)=>D_(e)(t,n,r),GX=wA(Hs),xA=e=>(t,n,r)=>y(null,null,function*(){let i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return P_(e)(t,n,i)}),WX=xA(Hs),CA=e=>(t,n,r)=>y(null,null,function*(){return P_(e)(t,n,r)}),KX=CA(Hs),EA=e=>(t,n,r)=>{let i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return R_(e)(t,n,i)},JX=EA(Hs),IA=e=>(t,n,r)=>R_(e)(t,n,r),YX=IA(Hs),SA=e=>(t,n,r)=>y(null,null,function*(){let i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return N_(e)(t,n,i)}),QX=SA(Hs),kA=e=>(t,n,r)=>y(null,null,function*(){return N_(e)(t,n,r)}),XX=kA(Hs);var Zs={};Kd(Zs,{base64:()=>gU,base64url:()=>TA,bigint:()=>xU,boolean:()=>IU,browserEmail:()=>RMe,cidrv4:()=>fU,cidrv6:()=>hU,cuid:()=>tU,cuid2:()=>nU,date:()=>yU,datetime:()=>bU,domain:()=>LMe,duration:()=>aU,e164:()=>_U,email:()=>lU,emoji:()=>uU,extendedDuration:()=>kMe,guid:()=>cU,hex:()=>FMe,hostname:()=>$Me,html5Email:()=>MMe,idnEmail:()=>PMe,integer:()=>CU,ipv4:()=>dU,ipv6:()=>pU,ksuid:()=>oU,lowercase:()=>TU,mac:()=>mU,md5_base64:()=>zMe,md5_base64url:()=>BMe,md5_hex:()=>jMe,nanoid:()=>sU,null:()=>SU,number:()=>EU,rfc5322Email:()=>DMe,sha1_base64:()=>VMe,sha1_base64url:()=>HMe,sha1_hex:()=>UMe,sha256_base64:()=>qMe,sha256_base64url:()=>GMe,sha256_hex:()=>ZMe,sha384_base64:()=>KMe,sha384_base64url:()=>JMe,sha384_hex:()=>WMe,sha512_base64:()=>QMe,sha512_base64url:()=>XMe,sha512_hex:()=>YMe,string:()=>wU,time:()=>vU,ulid:()=>rU,undefined:()=>kU,unicodeEmail:()=>eee,uppercase:()=>AU,uuid:()=>Mf,uuid4:()=>TMe,uuid6:()=>AMe,uuid7:()=>OMe,xid:()=>iU});var tU=/^[cC][^\s-]{8,}$/,nU=/^[0-9a-z]+$/,rU=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,iU=/^[0-9a-vA-V]{20}$/,oU=/^[A-Za-z0-9]{27}$/,sU=/^[a-zA-Z0-9_-]{21}$/,aU=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,kMe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,cU=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Mf=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,TMe=Mf(4),AMe=Mf(6),OMe=Mf(7),lU=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,MMe=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,DMe=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,eee=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,PMe=eee,RMe=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,NMe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function uU(){return new RegExp(NMe,"u")}var dU=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,pU=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,mU=e=>{let t=Ga(e??":");return new RegExp(`^(?:[0-9A-F]{2}${t}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${t}){5}[0-9a-f]{2}$`)},fU=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,hU=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,gU=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,TA=/^[A-Za-z0-9_-]*$/,$Me=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,LMe=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,_U=/^\+(?:[0-9]){6,14}[0-9]$/,tee="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",yU=new RegExp(`^${tee}$`);function nee(e){let t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function vU(e){return new RegExp(`^${nee(e)}$`)}function bU(e){let t=nee({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let r=`${t}(?:${n.join("|")})`;return new RegExp(`^${tee}T(?:${r})$`)}var wU=e=>{let t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},xU=/^-?\d+n?$/,CU=/^-?\d+$/,EU=/^-?\d+(?:\.\d+)?/,IU=/^(?:true|false)$/i,SU=/^null$/i;var kU=/^undefined$/i;var TU=/^[^A-Z]*$/,AU=/^[^a-z]*$/,FMe=/^[0-9a-fA-F]*$/;function Gw(e,t){return new RegExp(`^[A-Za-z0-9+/]{${e}}${t}$`)}function Ww(e){return new RegExp(`^[A-Za-z0-9_-]{${e}}$`)}var jMe=/^[0-9a-fA-F]{32}$/,zMe=Gw(22,"=="),BMe=Ww(22),UMe=/^[0-9a-fA-F]{40}$/,VMe=Gw(27,"="),HMe=Ww(27),ZMe=/^[0-9a-fA-F]{64}$/,qMe=Gw(43,"="),GMe=Ww(43),WMe=/^[0-9a-fA-F]{96}$/,KMe=Gw(64,""),JMe=Ww(64),YMe=/^[0-9a-fA-F]{128}$/,QMe=Gw(86,"=="),XMe=Ww(86);var pr=V("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),iee={number:"number",bigint:"bigint",object:"date"},AA=V("$ZodCheckLessThan",(e,t)=>{pr.init(e,t);let n=iee[typeof t.value];e._zod.onattach.push(r=>{let i=r._zod.bag,o=(t.inclusive?i.maximum:i.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<o&&(t.inclusive?i.maximum=t.value:i.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),OA=V("$ZodCheckGreaterThan",(e,t)=>{pr.init(e,t);let n=iee[typeof t.value];e._zod.onattach.push(r=>{let i=r._zod.bag,o=(t.inclusive?i.minimum:i.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>o&&(t.inclusive?i.minimum=t.value:i.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),OU=V("$ZodCheckMultipleOf",(e,t)=>{pr.init(e,t),e._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):GB(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),MU=V("$ZodCheckNumberFormat",(e,t)=>{pr.init(e,t),t.format=t.format||"float64";let n=t.format?.includes("int"),r=n?"int":"number",[i,o]=XB[t.format];e._zod.onattach.push(s=>{let a=s._zod.bag;a.format=t.format,a.minimum=i,a.maximum=o,n&&(a.pattern=CU)}),e._zod.check=s=>{let a=s.value;if(n){if(!Number.isInteger(a)){s.issues.push({expected:r,format:t.format,code:"invalid_type",continue:!1,input:a,inst:e});return}if(!Number.isSafeInteger(a)){a>0?s.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):s.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort});return}}a<i&&s.issues.push({origin:"number",input:a,code:"too_small",minimum:i,inclusive:!0,inst:e,continue:!t.abort}),a>o&&s.issues.push({origin:"number",input:a,code:"too_big",maximum:o,inst:e})}}),DU=V("$ZodCheckBigIntFormat",(e,t)=>{pr.init(e,t);let[n,r]=eU[t.format];e._zod.onattach.push(i=>{let o=i._zod.bag;o.format=t.format,o.minimum=n,o.maximum=r}),e._zod.check=i=>{let o=i.value;o<n&&i.issues.push({origin:"bigint",input:o,code:"too_small",minimum:n,inclusive:!0,inst:e,continue:!t.abort}),o>r&&i.issues.push({origin:"bigint",input:o,code:"too_big",maximum:r,inst:e})}}),PU=V("$ZodCheckMaxSize",(e,t)=>{var n;pr.init(e,t),(n=e._zod.def).when??(n.when=r=>{let i=r.value;return!Ap(i)&&i.size!==void 0}),e._zod.onattach.push(r=>{let i=r._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<i&&(r._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let i=r.value;i.size<=t.maximum||r.issues.push({origin:Hw(i),code:"too_big",maximum:t.maximum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),RU=V("$ZodCheckMinSize",(e,t)=>{var n;pr.init(e,t),(n=e._zod.def).when??(n.when=r=>{let i=r.value;return!Ap(i)&&i.size!==void 0}),e._zod.onattach.push(r=>{let i=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>i&&(r._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let i=r.value;i.size>=t.minimum||r.issues.push({origin:Hw(i),code:"too_small",minimum:t.minimum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),NU=V("$ZodCheckSizeEquals",(e,t)=>{var n;pr.init(e,t),(n=e._zod.def).when??(n.when=r=>{let i=r.value;return!Ap(i)&&i.size!==void 0}),e._zod.onattach.push(r=>{let i=r._zod.bag;i.minimum=t.size,i.maximum=t.size,i.size=t.size}),e._zod.check=r=>{let i=r.value,o=i.size;if(o===t.size)return;let s=o>t.size;r.issues.push(b(m({origin:Hw(i)},s?{code:"too_big",maximum:t.size}:{code:"too_small",minimum:t.size}),{inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort}))}}),$U=V("$ZodCheckMaxLength",(e,t)=>{var n;pr.init(e,t),(n=e._zod.def).when??(n.when=r=>{let i=r.value;return!Ap(i)&&i.length!==void 0}),e._zod.onattach.push(r=>{let i=r._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<i&&(r._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let i=r.value;if(i.length<=t.maximum)return;let s=Zw(i);r.issues.push({origin:s,code:"too_big",maximum:t.maximum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),LU=V("$ZodCheckMinLength",(e,t)=>{var n;pr.init(e,t),(n=e._zod.def).when??(n.when=r=>{let i=r.value;return!Ap(i)&&i.length!==void 0}),e._zod.onattach.push(r=>{let i=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>i&&(r._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let i=r.value;if(i.length>=t.minimum)return;let s=Zw(i);r.issues.push({origin:s,code:"too_small",minimum:t.minimum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),FU=V("$ZodCheckLengthEquals",(e,t)=>{var n;pr.init(e,t),(n=e._zod.def).when??(n.when=r=>{let i=r.value;return!Ap(i)&&i.length!==void 0}),e._zod.onattach.push(r=>{let i=r._zod.bag;i.minimum=t.length,i.maximum=t.length,i.length=t.length}),e._zod.check=r=>{let i=r.value,o=i.length;if(o===t.length)return;let s=Zw(i),a=o>t.length;r.issues.push(b(m({origin:s},a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length}),{inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort}))}}),L_=V("$ZodCheckStringFormat",(e,t)=>{var n,r;pr.init(e,t),e._zod.onattach.push(i=>{let o=i._zod.bag;o.format=t.format,t.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=i=>{t.pattern.lastIndex=0,!t.pattern.test(i.value)&&i.issues.push(b(m({origin:"string",code:"invalid_format",format:t.format,input:i.value},t.pattern?{pattern:t.pattern.toString()}:{}),{inst:e,continue:!t.abort}))}):(r=e._zod).check??(r.check=()=>{})}),jU=V("$ZodCheckRegex",(e,t)=>{L_.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),zU=V("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=TU),L_.init(e,t)}),BU=V("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=AU),L_.init(e,t)}),UU=V("$ZodCheckIncludes",(e,t)=>{pr.init(e,t);let n=Ga(t.includes),r=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(i=>{let o=i._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),e._zod.check=i=>{i.value.includes(t.includes,t.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:i.value,inst:e,continue:!t.abort})}}),VU=V("$ZodCheckStartsWith",(e,t)=>{pr.init(e,t);let n=new RegExp(`^${Ga(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{let i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),HU=V("$ZodCheckEndsWith",(e,t)=>{pr.init(e,t);let n=new RegExp(`.*${Ga(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{let i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}});function ree(e,t,n){e.issues.length&&t.issues.push(..._a(n,e.issues))}var ZU=V("$ZodCheckProperty",(e,t)=>{pr.init(e,t),e._zod.check=n=>{let r=t.schema._zod.run({value:n.value[t.property],issues:[]},{});if(r instanceof Promise)return r.then(i=>ree(i,n,t.property));ree(r,n,t.property)}}),qU=V("$ZodCheckMimeType",(e,t)=>{pr.init(e,t);let n=new Set(t.mime);e._zod.onattach.push(r=>{r._zod.bag.mime=t.mime}),e._zod.check=r=>{n.has(r.value.type)||r.issues.push({code:"invalid_value",values:t.mime,input:r.value.type,inst:e,continue:!t.abort})}}),GU=V("$ZodCheckOverwrite",(e,t)=>{pr.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});var Kw=class{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}let r=t.split(`
`).filter(s=>s),i=Math.min(...r.map(s=>s.length-s.trimStart().length)),o=r.map(s=>s.slice(i)).map(s=>" ".repeat(this.indent*2)+s);for(let s of o)this.content.push(s)}compile(){let t=Function,n=this?.args,i=[...(this?.content??[""]).map(o=>`  ${o}`)];return new t(...n,i.join(`
`))}};var WU={major:4,minor:1,patch:13};var Ut=V("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=WU;let r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(let i of r)for(let o of i._zod.onattach)o(e);if(r.length===0)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let i=(s,a,c)=>{let u=Pp(s),d;for(let f of a){if(f._zod.def.when){if(!f._zod.def.when(s))continue}else if(u)continue;let g=s.issues.length,h=f._zod.check(s);if(h instanceof Promise&&c?.async===!1)throw new Tc;if(d||h instanceof Promise)d=(d??Promise.resolve()).then(()=>y(null,null,function*(){yield h,s.issues.length!==g&&(u||(u=Pp(s,g)))}));else{if(s.issues.length===g)continue;u||(u=Pp(s,g))}}return d?d.then(()=>s):s},o=(s,a,c)=>{if(Pp(s))return s.aborted=!0,s;let u=i(a,r,c);if(u instanceof Promise){if(c.async===!1)throw new Tc;return u.then(d=>e._zod.parse(d,c))}return e._zod.parse(u,c)};e._zod.run=(s,a)=>{if(a.skipChecks)return e._zod.parse(s,a);if(a.direction==="backward"){let u=e._zod.parse({value:s.value,issues:[]},b(m({},a),{skipChecks:!0}));return u instanceof Promise?u.then(d=>o(d,s,a)):o(u,s,a)}let c=e._zod.parse(s,a);if(c instanceof Promise){if(a.async===!1)throw new Tc;return c.then(u=>i(u,r,a))}return i(c,r,a)}}e["~standard"]={validate:i=>{try{let o=Of(e,i);return o.success?{value:o.data}:{issues:o.error?.issues}}catch{return $_(e,i).then(s=>s.success?{value:s.data}:{issues:s.error?.issues})}},vendor:"zod",version:1}}),Rp=V("$ZodString",(e,t)=>{Ut.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??wU(e._zod.bag),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),ir=V("$ZodStringFormat",(e,t)=>{L_.init(e,t),Rp.init(e,t)}),$A=V("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=cU),ir.init(e,t)}),LA=V("$ZodUUID",(e,t)=>{if(t.version){let r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Mf(r))}else t.pattern??(t.pattern=Mf());ir.init(e,t)}),FA=V("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=lU),ir.init(e,t)}),jA=V("$ZodURL",(e,t)=>{ir.init(e,t),e._zod.check=n=>{try{let r=n.value.trim(),i=new URL(r);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=i.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),zA=V("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=uU()),ir.init(e,t)}),BA=V("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=sU),ir.init(e,t)}),UA=V("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=tU),ir.init(e,t)}),VA=V("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=nU),ir.init(e,t)}),HA=V("$ZodULID",(e,t)=>{t.pattern??(t.pattern=rU),ir.init(e,t)}),ZA=V("$ZodXID",(e,t)=>{t.pattern??(t.pattern=iU),ir.init(e,t)}),qA=V("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=oU),ir.init(e,t)}),GA=V("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=bU(t)),ir.init(e,t)}),WA=V("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=yU),ir.init(e,t)}),KA=V("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=vU(t)),ir.init(e,t)}),JA=V("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=aU),ir.init(e,t)}),YA=V("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=dU),ir.init(e,t),e._zod.bag.format="ipv4"}),QA=V("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=pU),ir.init(e,t),e._zod.bag.format="ipv6",e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),XA=V("$ZodMAC",(e,t)=>{t.pattern??(t.pattern=mU(t.delimiter)),ir.init(e,t),e._zod.bag.format="mac"}),eO=V("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=fU),ir.init(e,t)}),tO=V("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=hU),ir.init(e,t),e._zod.check=n=>{let r=n.value.split("/");try{if(r.length!==2)throw new Error;let[i,o]=r;if(!o)throw new Error;let s=Number(o);if(`${s}`!==o)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${i}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function JU(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}var nO=V("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=gU),ir.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=n=>{JU(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function gee(e){if(!TA.test(e))return!1;let t=e.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return JU(n)}var rO=V("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=TA),ir.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=n=>{gee(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),iO=V("$ZodE164",(e,t)=>{t.pattern??(t.pattern=_U),ir.init(e,t)});function _ee(e,t=null){try{let n=e.split(".");if(n.length!==3)return!1;let[r]=n;if(!r)return!1;let i=JSON.parse(atob(r));return!("typ"in i&&i?.typ!=="JWT"||!i.alg||t&&(!("alg"in i)||i.alg!==t))}catch{return!1}}var oO=V("$ZodJWT",(e,t)=>{ir.init(e,t),e._zod.check=n=>{_ee(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),sO=V("$ZodCustomStringFormat",(e,t)=>{ir.init(e,t),e._zod.check=n=>{t.fn(n.value)||n.issues.push({code:"invalid_format",format:t.format,input:n.value,inst:e,continue:!t.abort})}}),Jw=V("$ZodNumber",(e,t)=>{Ut.init(e,t),e._zod.pattern=e._zod.bag.pattern??EU,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}let i=n.value;if(typeof i=="number"&&!Number.isNaN(i)&&Number.isFinite(i))return n;let o=typeof i=="number"?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return n.issues.push(m({expected:"number",code:"invalid_type",input:i,inst:e},o?{received:o}:{})),n}}),aO=V("$ZodNumberFormat",(e,t)=>{MU.init(e,t),Jw.init(e,t)}),F_=V("$ZodBoolean",(e,t)=>{Ut.init(e,t),e._zod.pattern=IU,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=!!n.value}catch{}let i=n.value;return typeof i=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:e}),n}}),Yw=V("$ZodBigInt",(e,t)=>{Ut.init(e,t),e._zod.pattern=xU,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=BigInt(n.value)}catch{}return typeof n.value=="bigint"||n.issues.push({expected:"bigint",code:"invalid_type",input:n.value,inst:e}),n}}),cO=V("$ZodBigIntFormat",(e,t)=>{DU.init(e,t),Yw.init(e,t)}),lO=V("$ZodSymbol",(e,t)=>{Ut.init(e,t),e._zod.parse=(n,r)=>{let i=n.value;return typeof i=="symbol"||n.issues.push({expected:"symbol",code:"invalid_type",input:i,inst:e}),n}}),uO=V("$ZodUndefined",(e,t)=>{Ut.init(e,t),e._zod.pattern=kU,e._zod.values=new Set([void 0]),e._zod.optin="optional",e._zod.optout="optional",e._zod.parse=(n,r)=>{let i=n.value;return typeof i>"u"||n.issues.push({expected:"undefined",code:"invalid_type",input:i,inst:e}),n}}),dO=V("$ZodNull",(e,t)=>{Ut.init(e,t),e._zod.pattern=SU,e._zod.values=new Set([null]),e._zod.parse=(n,r)=>{let i=n.value;return i===null||n.issues.push({expected:"null",code:"invalid_type",input:i,inst:e}),n}}),pO=V("$ZodAny",(e,t)=>{Ut.init(e,t),e._zod.parse=n=>n}),j_=V("$ZodUnknown",(e,t)=>{Ut.init(e,t),e._zod.parse=n=>n}),z_=V("$ZodNever",(e,t)=>{Ut.init(e,t),e._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)}),mO=V("$ZodVoid",(e,t)=>{Ut.init(e,t),e._zod.parse=(n,r)=>{let i=n.value;return typeof i>"u"||n.issues.push({expected:"void",code:"invalid_type",input:i,inst:e}),n}}),fO=V("$ZodDate",(e,t)=>{Ut.init(e,t),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=new Date(n.value)}catch{}let i=n.value,o=i instanceof Date;return o&&!Number.isNaN(i.getTime())||n.issues.push(b(m({expected:"date",code:"invalid_type",input:i},o?{received:"Invalid Date"}:{}),{inst:e})),n}});function see(e,t,n){e.issues.length&&t.issues.push(..._a(n,e.issues)),t.value[n]=e.value}var hO=V("$ZodArray",(e,t)=>{Ut.init(e,t),e._zod.parse=(n,r)=>{let i=n.value;if(!Array.isArray(i))return n.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),n;n.value=Array(i.length);let o=[];for(let s=0;s<i.length;s++){let a=i[s],c=t.element._zod.run({value:a,issues:[]},r);c instanceof Promise?o.push(c.then(u=>see(u,n,s))):see(c,n,s)}return o.length?Promise.all(o).then(()=>n):n}});function NA(e,t,n,r){e.issues.length&&t.issues.push(..._a(n,e.issues)),e.value===void 0?n in r&&(t.value[n]=void 0):t.value[n]=e.value}function yee(e){let t=Object.keys(e.shape);for(let r of t)if(!e.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);let n=QB(e.shape);return b(m({},e),{keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)})}function vee(e,t,n,r,i,o){let s=[],a=i.keySet,c=i.catchall._zod,u=c.def.type;for(let d in t){if(a.has(d))continue;if(u==="never"){s.push(d);continue}let f=c.run({value:t[d],issues:[]},r);f instanceof Promise?e.push(f.then(g=>NA(g,n,d,t))):NA(f,n,d,t)}return s.length&&n.issues.push({code:"unrecognized_keys",keys:s,input:t,inst:o}),e.length?Promise.all(e).then(()=>n):n}var YU=V("$ZodObject",(e,t)=>{if(Ut.init(e,t),!Object.getOwnPropertyDescriptor(t,"shape")?.get){let a=t.shape;Object.defineProperty(t,"shape",{get:()=>{let c=m({},a);return Object.defineProperty(t,"shape",{value:c}),c}})}let r=T_(()=>yee(t));On(e._zod,"propValues",()=>{let a=t.shape,c={};for(let u in a){let d=a[u]._zod;if(d.values){c[u]??(c[u]=new Set);for(let f of d.values)c[u].add(f)}}return c});let i=Af,o=t.catchall,s;e._zod.parse=(a,c)=>{s??(s=r.value);let u=a.value;if(!i(u))return a.issues.push({expected:"object",code:"invalid_type",input:u,inst:e}),a;a.value={};let d=[],f=s.shape;for(let g of s.keys){let v=f[g]._zod.run({value:u[g],issues:[]},c);v instanceof Promise?d.push(v.then(x=>NA(x,a,g,u))):NA(v,a,g,u)}return o?vee(d,u,a,c,r.value,e):d.length?Promise.all(d).then(()=>a):a}}),QU=V("$ZodObjectJIT",(e,t)=>{YU.init(e,t);let n=e._zod.parse,r=T_(()=>yee(t)),i=g=>{let h=new Kw(["shape","payload","ctx"]),v=r.value,x=A=>{let P=gA(A);return`shape[${P}]._zod.run({ value: input[${P}], issues: [] }, ctx)`};h.write("const input = payload.value;");let E=Object.create(null),C=0;for(let A of v.keys)E[A]=`key_${C++}`;h.write("const newResult = {};");for(let A of v.keys){let P=E[A],F=gA(A);h.write(`const ${P} = ${x(A)};`),h.write(`
        if (${P}.issues.length) {
          payload.issues = payload.issues.concat(${P}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${F}, ...iss.path] : [${F}]
          })));
        }
        
        
        if (${P}.value === undefined) {
          if (${F} in input) {
            newResult[${F}] = undefined;
          }
        } else {
          newResult[${F}] = ${P}.value;
        }
        
      `)}h.write("payload.value = newResult;"),h.write("return payload;");let S=h.compile();return(A,P)=>S(g,A,P)},o,s=Af,a=!Fw.jitless,u=a&&KB.value,d=t.catchall,f;e._zod.parse=(g,h)=>{f??(f=r.value);let v=g.value;return s(v)?a&&u&&h?.async===!1&&h.jitless!==!0?(o||(o=i(t.shape)),g=o(g,h),d?vee([],v,g,h,f,e):g):n(g,h):(g.issues.push({expected:"object",code:"invalid_type",input:v,inst:e}),g)}});function aee(e,t,n,r){for(let o of e)if(o.issues.length===0)return t.value=o.value,t;let i=e.filter(o=>!Pp(o));return i.length===1?(t.value=i[0].value,i[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(o=>o.issues.map(s=>ya(s,r,li())))}),t)}var Qw=V("$ZodUnion",(e,t)=>{Ut.init(e,t),On(e._zod,"optin",()=>t.options.some(i=>i._zod.optin==="optional")?"optional":void 0),On(e._zod,"optout",()=>t.options.some(i=>i._zod.optout==="optional")?"optional":void 0),On(e._zod,"values",()=>{if(t.options.every(i=>i._zod.values))return new Set(t.options.flatMap(i=>Array.from(i._zod.values)))}),On(e._zod,"pattern",()=>{if(t.options.every(i=>i._zod.pattern)){let i=t.options.map(o=>o._zod.pattern);return new RegExp(`^(${i.map(o=>Uw(o.source)).join("|")})$`)}});let n=t.options.length===1,r=t.options[0]._zod.run;e._zod.parse=(i,o)=>{if(n)return r(i,o);let s=!1,a=[];for(let c of t.options){let u=c._zod.run({value:i.value,issues:[]},o);if(u instanceof Promise)a.push(u),s=!0;else{if(u.issues.length===0)return u;a.push(u)}}return s?Promise.all(a).then(c=>aee(c,i,e,o)):aee(a,i,e,o)}}),gO=V("$ZodDiscriminatedUnion",(e,t)=>{Qw.init(e,t);let n=e._zod.parse;On(e._zod,"propValues",()=>{let i={};for(let o of t.options){let s=o._zod.propValues;if(!s||Object.keys(s).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(o)}"`);for(let[a,c]of Object.entries(s)){i[a]||(i[a]=new Set);for(let u of c)i[a].add(u)}}return i});let r=T_(()=>{let i=t.options,o=new Map;for(let s of i){let a=s._zod.propValues?.[t.discriminator];if(!a||a.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(s)}"`);for(let c of a){if(o.has(c))throw new Error(`Duplicate discriminator value "${String(c)}"`);o.set(c,s)}}return o});e._zod.parse=(i,o)=>{let s=i.value;if(!Af(s))return i.issues.push({code:"invalid_type",expected:"object",input:s,inst:e}),i;let a=r.value.get(s?.[t.discriminator]);return a?a._zod.run(i,o):t.unionFallback?n(i,o):(i.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:s,path:[t.discriminator],inst:e}),i)}}),_O=V("$ZodIntersection",(e,t)=>{Ut.init(e,t),e._zod.parse=(n,r)=>{let i=n.value,o=t.left._zod.run({value:i,issues:[]},r),s=t.right._zod.run({value:i,issues:[]},r);return o instanceof Promise||s instanceof Promise?Promise.all([o,s]).then(([c,u])=>cee(n,c,u)):cee(n,o,s)}});function KU(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Dp(e)&&Dp(t)){let n=Object.keys(t),r=Object.keys(e).filter(o=>n.indexOf(o)!==-1),i=m(m({},e),t);for(let o of r){let s=KU(e[o],t[o]);if(!s.valid)return{valid:!1,mergeErrorPath:[o,...s.mergeErrorPath]};i[o]=s.data}return{valid:!0,data:i}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t[r],s=KU(i,o);if(!s.valid)return{valid:!1,mergeErrorPath:[r,...s.mergeErrorPath]};n.push(s.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function cee(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),Pp(e))return e;let r=KU(t.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}var Xw=V("$ZodTuple",(e,t)=>{Ut.init(e,t);let n=t.items;e._zod.parse=(r,i)=>{let o=r.value;if(!Array.isArray(o))return r.issues.push({input:o,inst:e,expected:"tuple",code:"invalid_type"}),r;r.value=[];let s=[],a=[...n].reverse().findIndex(d=>d._zod.optin!=="optional"),c=a===-1?0:n.length-a;if(!t.rest){let d=o.length>n.length,f=o.length<c-1;if(d||f)return r.issues.push(b(m({},d?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length}),{input:o,inst:e,origin:"array"})),r}let u=-1;for(let d of n){if(u++,u>=o.length&&u>=c)continue;let f=d._zod.run({value:o[u],issues:[]},i);f instanceof Promise?s.push(f.then(g=>MA(g,r,u))):MA(f,r,u)}if(t.rest){let d=o.slice(n.length);for(let f of d){u++;let g=t.rest._zod.run({value:f,issues:[]},i);g instanceof Promise?s.push(g.then(h=>MA(h,r,u))):MA(g,r,u)}}return s.length?Promise.all(s).then(()=>r):r}});function MA(e,t,n){e.issues.length&&t.issues.push(..._a(n,e.issues)),t.value[n]=e.value}var yO=V("$ZodRecord",(e,t)=>{Ut.init(e,t),e._zod.parse=(n,r)=>{let i=n.value;if(!Dp(i))return n.issues.push({expected:"record",code:"invalid_type",input:i,inst:e}),n;let o=[],s=t.keyType._zod.values;if(s){n.value={};let a=new Set;for(let u of s)if(typeof u=="string"||typeof u=="number"||typeof u=="symbol"){a.add(typeof u=="number"?u.toString():u);let d=t.valueType._zod.run({value:i[u],issues:[]},r);d instanceof Promise?o.push(d.then(f=>{f.issues.length&&n.issues.push(..._a(u,f.issues)),n.value[u]=f.value})):(d.issues.length&&n.issues.push(..._a(u,d.issues)),n.value[u]=d.value)}let c;for(let u in i)a.has(u)||(c=c??[],c.push(u));c&&c.length>0&&n.issues.push({code:"unrecognized_keys",input:i,inst:e,keys:c})}else{n.value={};for(let a of Reflect.ownKeys(i)){if(a==="__proto__")continue;let c=t.keyType._zod.run({value:a,issues:[]},r);if(c instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(c.issues.length){n.issues.push({code:"invalid_key",origin:"record",issues:c.issues.map(d=>ya(d,r,li())),input:a,path:[a],inst:e}),n.value[c.value]=c.value;continue}let u=t.valueType._zod.run({value:i[a],issues:[]},r);u instanceof Promise?o.push(u.then(d=>{d.issues.length&&n.issues.push(..._a(a,d.issues)),n.value[c.value]=d.value})):(u.issues.length&&n.issues.push(..._a(a,u.issues)),n.value[c.value]=u.value)}}return o.length?Promise.all(o).then(()=>n):n}}),vO=V("$ZodMap",(e,t)=>{Ut.init(e,t),e._zod.parse=(n,r)=>{let i=n.value;if(!(i instanceof Map))return n.issues.push({expected:"map",code:"invalid_type",input:i,inst:e}),n;let o=[];n.value=new Map;for(let[s,a]of i){let c=t.keyType._zod.run({value:s,issues:[]},r),u=t.valueType._zod.run({value:a,issues:[]},r);c instanceof Promise||u instanceof Promise?o.push(Promise.all([c,u]).then(([d,f])=>{lee(d,f,n,s,i,e,r)})):lee(c,u,n,s,i,e,r)}return o.length?Promise.all(o).then(()=>n):n}});function lee(e,t,n,r,i,o,s){e.issues.length&&(Vw.has(typeof r)?n.issues.push(..._a(r,e.issues)):n.issues.push({code:"invalid_key",origin:"map",input:i,inst:o,issues:e.issues.map(a=>ya(a,s,li()))})),t.issues.length&&(Vw.has(typeof r)?n.issues.push(..._a(r,t.issues)):n.issues.push({origin:"map",code:"invalid_element",input:i,inst:o,key:r,issues:t.issues.map(a=>ya(a,s,li()))})),n.value.set(e.value,t.value)}var bO=V("$ZodSet",(e,t)=>{Ut.init(e,t),e._zod.parse=(n,r)=>{let i=n.value;if(!(i instanceof Set))return n.issues.push({input:i,inst:e,expected:"set",code:"invalid_type"}),n;let o=[];n.value=new Set;for(let s of i){let a=t.valueType._zod.run({value:s,issues:[]},r);a instanceof Promise?o.push(a.then(c=>uee(c,n))):uee(a,n)}return o.length?Promise.all(o).then(()=>n):n}});function uee(e,t){e.issues.length&&t.issues.push(...e.issues),t.value.add(e.value)}var wO=V("$ZodEnum",(e,t)=>{Ut.init(e,t);let n=Bw(t.entries),r=new Set(n);e._zod.values=r,e._zod.pattern=new RegExp(`^(${n.filter(i=>Vw.has(typeof i)).map(i=>typeof i=="string"?Ga(i):i.toString()).join("|")})$`),e._zod.parse=(i,o)=>{let s=i.value;return r.has(s)||i.issues.push({code:"invalid_value",values:n,input:s,inst:e}),i}}),xO=V("$ZodLiteral",(e,t)=>{if(Ut.init(e,t),t.values.length===0)throw new Error("Cannot create literal schema with no valid values");let n=new Set(t.values);e._zod.values=n,e._zod.pattern=new RegExp(`^(${t.values.map(r=>typeof r=="string"?Ga(r):r?Ga(r.toString()):String(r)).join("|")})$`),e._zod.parse=(r,i)=>{let o=r.value;return n.has(o)||r.issues.push({code:"invalid_value",values:t.values,input:o,inst:e}),r}}),CO=V("$ZodFile",(e,t)=>{Ut.init(e,t),e._zod.parse=(n,r)=>{let i=n.value;return i instanceof File||n.issues.push({expected:"file",code:"invalid_type",input:i,inst:e}),n}}),EO=V("$ZodTransform",(e,t)=>{Ut.init(e,t),e._zod.parse=(n,r)=>{if(r.direction==="backward")throw new Tp(e.constructor.name);let i=t.transform(n.value,n);if(r.async)return(i instanceof Promise?i:Promise.resolve(i)).then(s=>(n.value=s,n));if(i instanceof Promise)throw new Tc;return n.value=i,n}});function dee(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}var Df=V("$ZodOptional",(e,t)=>{Ut.init(e,t),e._zod.optin="optional",e._zod.optout="optional",On(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),On(e._zod,"pattern",()=>{let n=t.innerType._zod.pattern;return n?new RegExp(`^(${Uw(n.source)})?$`):void 0}),e._zod.parse=(n,r)=>{if(t.innerType._zod.optin==="optional"){let i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>dee(o,n.value)):dee(i,n.value)}return n.value===void 0?n:t.innerType._zod.run(n,r)}}),IO=V("$ZodNullable",(e,t)=>{Ut.init(e,t),On(e._zod,"optin",()=>t.innerType._zod.optin),On(e._zod,"optout",()=>t.innerType._zod.optout),On(e._zod,"pattern",()=>{let n=t.innerType._zod.pattern;return n?new RegExp(`^(${Uw(n.source)}|null)$`):void 0}),On(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,r)=>n.value===null?n:t.innerType._zod.run(n,r)}),SO=V("$ZodDefault",(e,t)=>{Ut.init(e,t),e._zod.optin="optional",On(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);if(n.value===void 0)return n.value=t.defaultValue,n;let i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>pee(o,t)):pee(i,t)}});function pee(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}var kO=V("$ZodPrefault",(e,t)=>{Ut.init(e,t),e._zod.optin="optional",On(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,r))}),TO=V("$ZodNonOptional",(e,t)=>{Ut.init(e,t),On(e._zod,"values",()=>{let n=t.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),e._zod.parse=(n,r)=>{let i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>mee(o,e)):mee(i,e)}});function mee(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}var AO=V("$ZodSuccess",(e,t)=>{Ut.init(e,t),e._zod.parse=(n,r)=>{if(r.direction==="backward")throw new Tp("ZodSuccess");let i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>(n.value=o.issues.length===0,n)):(n.value=i.issues.length===0,n)}}),OO=V("$ZodCatch",(e,t)=>{Ut.init(e,t),On(e._zod,"optin",()=>t.innerType._zod.optin),On(e._zod,"optout",()=>t.innerType._zod.optout),On(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);let i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>(n.value=o.value,o.issues.length&&(n.value=t.catchValue(b(m({},n),{error:{issues:o.issues.map(s=>ya(s,r,li()))},input:n.value})),n.issues=[]),n)):(n.value=i.value,i.issues.length&&(n.value=t.catchValue(b(m({},n),{error:{issues:i.issues.map(o=>ya(o,r,li()))},input:n.value})),n.issues=[]),n)}}),MO=V("$ZodNaN",(e,t)=>{Ut.init(e,t),e._zod.parse=(n,r)=>((typeof n.value!="number"||!Number.isNaN(n.value))&&n.issues.push({input:n.value,inst:e,expected:"nan",code:"invalid_type"}),n)}),DO=V("$ZodPipe",(e,t)=>{Ut.init(e,t),On(e._zod,"values",()=>t.in._zod.values),On(e._zod,"optin",()=>t.in._zod.optin),On(e._zod,"optout",()=>t.out._zod.optout),On(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,r)=>{if(r.direction==="backward"){let o=t.out._zod.run(n,r);return o instanceof Promise?o.then(s=>DA(s,t.in,r)):DA(o,t.in,r)}let i=t.in._zod.run(n,r);return i instanceof Promise?i.then(o=>DA(o,t.out,r)):DA(i,t.out,r)}});function DA(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}var B_=V("$ZodCodec",(e,t)=>{Ut.init(e,t),On(e._zod,"values",()=>t.in._zod.values),On(e._zod,"optin",()=>t.in._zod.optin),On(e._zod,"optout",()=>t.out._zod.optout),On(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,r)=>{if((r.direction||"forward")==="forward"){let o=t.in._zod.run(n,r);return o instanceof Promise?o.then(s=>PA(s,t,r)):PA(o,t,r)}else{let o=t.out._zod.run(n,r);return o instanceof Promise?o.then(s=>PA(s,t,r)):PA(o,t,r)}}});function PA(e,t,n){if(e.issues.length)return e.aborted=!0,e;if((n.direction||"forward")==="forward"){let i=t.transform(e.value,e);return i instanceof Promise?i.then(o=>RA(e,o,t.out,n)):RA(e,i,t.out,n)}else{let i=t.reverseTransform(e.value,e);return i instanceof Promise?i.then(o=>RA(e,o,t.in,n)):RA(e,i,t.in,n)}}function RA(e,t,n,r){return e.issues.length?(e.aborted=!0,e):n._zod.run({value:t,issues:e.issues},r)}var PO=V("$ZodReadonly",(e,t)=>{Ut.init(e,t),On(e._zod,"propValues",()=>t.innerType._zod.propValues),On(e._zod,"values",()=>t.innerType._zod.values),On(e._zod,"optin",()=>t.innerType?._zod?.optin),On(e._zod,"optout",()=>t.innerType?._zod?.optout),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);let i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then(fee):fee(i)}});function fee(e){return e.value=Object.freeze(e.value),e}var RO=V("$ZodTemplateLiteral",(e,t)=>{Ut.init(e,t);let n=[];for(let r of t.parts)if(typeof r=="object"&&r!==null){if(!r._zod.pattern)throw new Error(`Invalid template literal part, no pattern found: ${[...r._zod.traits].shift()}`);let i=r._zod.pattern instanceof RegExp?r._zod.pattern.source:r._zod.pattern;if(!i)throw new Error(`Invalid template literal part: ${r._zod.traits}`);let o=i.startsWith("^")?1:0,s=i.endsWith("$")?i.length-1:i.length;n.push(i.slice(o,s))}else if(r===null||YB.has(typeof r))n.push(Ga(`${r}`));else throw new Error(`Invalid template literal part: ${r}`);e._zod.pattern=new RegExp(`^${n.join("")}$`),e._zod.parse=(r,i)=>typeof r.value!="string"?(r.issues.push({input:r.value,inst:e,expected:"template_literal",code:"invalid_type"}),r):(e._zod.pattern.lastIndex=0,e._zod.pattern.test(r.value)||r.issues.push({input:r.value,inst:e,code:"invalid_format",format:t.format??"template_literal",pattern:e._zod.pattern.source}),r)}),NO=V("$ZodFunction",(e,t)=>(Ut.init(e,t),e._def=t,e._zod.def=t,e.implement=n=>{if(typeof n!="function")throw new Error("implement() must be called with a function");return function(...r){let i=e._def.input?Wa(e._def.input,r):r,o=Reflect.apply(n,this,i);return e._def.output?Wa(e._def.output,o):o}},e.implementAsync=n=>{if(typeof n!="function")throw new Error("implementAsync() must be called with a function");return function(...r){return y(this,null,function*(){let i=e._def.input?yield ed(e._def.input,r):r,o=yield Reflect.apply(n,this,i);return e._def.output?yield ed(e._def.output,o):o})}},e._zod.parse=(n,r)=>typeof n.value!="function"?(n.issues.push({code:"invalid_type",expected:"function",input:n.value,inst:e}),n):(e._def.output&&e._def.output._zod.def.type==="promise"?n.value=e.implementAsync(n.value):n.value=e.implement(n.value),n),e.input=(...n)=>{let r=e.constructor;return Array.isArray(n[0])?new r({type:"function",input:new Xw({type:"tuple",items:n[0],rest:n[1]}),output:e._def.output}):new r({type:"function",input:n[0],output:e._def.output})},e.output=n=>{let r=e.constructor;return new r({type:"function",input:e._def.input,output:n})},e)),$O=V("$ZodPromise",(e,t)=>{Ut.init(e,t),e._zod.parse=(n,r)=>Promise.resolve(n.value).then(i=>t.innerType._zod.run({value:i,issues:[]},r))}),LO=V("$ZodLazy",(e,t)=>{Ut.init(e,t),On(e._zod,"innerType",()=>t.getter()),On(e._zod,"pattern",()=>e._zod.innerType?._zod?.pattern),On(e._zod,"propValues",()=>e._zod.innerType?._zod?.propValues),On(e._zod,"optin",()=>e._zod.innerType?._zod?.optin??void 0),On(e._zod,"optout",()=>e._zod.innerType?._zod?.optout??void 0),e._zod.parse=(n,r)=>e._zod.innerType._zod.run(n,r)}),FO=V("$ZodCustom",(e,t)=>{pr.init(e,t),Ut.init(e,t),e._zod.parse=(n,r)=>n,e._zod.check=n=>{let r=n.value,i=t.fn(r);if(i instanceof Promise)return i.then(o=>hee(o,n,r,e));hee(i,n,r,e)}});function hee(e,t,n,r){if(!e){let i={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(i.params=r._zod.def.params),t.issues.push(A_(i))}}var U_={};Kd(U_,{ar:()=>bee,az:()=>wee,be:()=>Cee,bg:()=>Eee,ca:()=>Iee,cs:()=>See,da:()=>kee,de:()=>Tee,en:()=>jO,eo:()=>Aee,es:()=>Oee,fa:()=>Mee,fi:()=>Dee,fr:()=>Pee,frCA:()=>Ree,he:()=>Nee,hu:()=>$ee,id:()=>Lee,is:()=>Fee,it:()=>jee,ja:()=>zee,ka:()=>Bee,kh:()=>Uee,km:()=>zO,ko:()=>Vee,lt:()=>Zee,mk:()=>qee,ms:()=>Gee,nl:()=>Wee,no:()=>Kee,ota:()=>Jee,pl:()=>Qee,ps:()=>Yee,pt:()=>Xee,ru:()=>tte,sl:()=>nte,sv:()=>rte,ta:()=>ite,th:()=>ote,tr:()=>ste,ua:()=>ate,uk:()=>BO,ur:()=>cte,vi:()=>lte,yo:()=>pte,zhCN:()=>ute,zhTW:()=>dte});var tDe=()=>{let e={string:{unit:"\u062D\u0631\u0641",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},file:{unit:"\u0628\u0627\u064A\u062A",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},array:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},set:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u0645\u062F\u062E\u0644",email:"\u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",url:"\u0631\u0627\u0628\u0637",emoji:"\u0625\u064A\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u064A\u062E \u0648\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",date:"\u062A\u0627\u0631\u064A\u062E \u0628\u0645\u0639\u064A\u0627\u0631 ISO",time:"\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",duration:"\u0645\u062F\u0629 \u0628\u0645\u0639\u064A\u0627\u0631 ISO",ipv4:"\u0639\u0646\u0648\u0627\u0646 IPv4",ipv6:"\u0639\u0646\u0648\u0627\u0646 IPv6",cidrv4:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv4",cidrv6:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv6",base64:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64-encoded",base64url:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64url-encoded",json_string:"\u0646\u064E\u0635 \u0639\u0644\u0649 \u0647\u064A\u0626\u0629 JSON",e164:"\u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0628\u0645\u0639\u064A\u0627\u0631 E.164",jwt:"JWT",template_literal:"\u0645\u062F\u062E\u0644"};return i=>{switch(i.code){case"invalid_type":return`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${i.expected}\u060C \u0648\u0644\u0643\u0646 \u062A\u0645 \u0625\u062F\u062E\u0627\u0644 ${n(i.input)}`;case"invalid_value":return i.values.length===1?`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${_e(i.values[0])}`:`\u0627\u062E\u062A\u064A\u0627\u0631 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062A\u0648\u0642\u0639 \u0627\u0646\u062A\u0642\u0627\u0621 \u0623\u062D\u062F \u0647\u0630\u0647 \u0627\u0644\u062E\u064A\u0627\u0631\u0627\u062A: ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?` \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${i.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${o} ${i.maximum.toString()} ${s.unit??"\u0639\u0646\u0635\u0631"}`:`\u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${i.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${o} ${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${i.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${o} ${i.minimum.toString()} ${s.unit}`:`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${i.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${o} ${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0628\u062F\u0623 \u0628\u0640 "${i.prefix}"`:o.format==="ends_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0646\u062A\u0647\u064A \u0628\u0640 "${o.suffix}"`:o.format==="includes"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u062A\u0636\u0645\u0651\u064E\u0646 "${o.includes}"`:o.format==="regex"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0637\u0627\u0628\u0642 \u0627\u0644\u0646\u0645\u0637 ${o.pattern}`:`${r[o.format]??i.format} \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644`}case"not_multiple_of":return`\u0631\u0642\u0645 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0645\u0646 \u0645\u0636\u0627\u0639\u0641\u0627\u062A ${i.divisor}`;case"unrecognized_keys":return`\u0645\u0639\u0631\u0641${i.keys.length>1?"\u0627\u062A":""} \u063A\u0631\u064A\u0628${i.keys.length>1?"\u0629":""}: ${Q(i.keys,"\u060C ")}`;case"invalid_key":return`\u0645\u0639\u0631\u0641 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${i.origin}`;case"invalid_union":return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644";case"invalid_element":return`\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${i.origin}`;default:return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644"}}};function bee(){return{localeError:tDe()}}var nDe=()=>{let e={string:{unit:"simvol",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"element",verb:"olmal\u0131d\u0131r"},set:{unit:"element",verb:"olmal\u0131d\u0131r"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return i=>{switch(i.code){case"invalid_type":return`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${i.expected}, daxil olan ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${_e(i.values[0])}`:`Yanl\u0131\u015F se\xE7im: a\u015Fa\u011F\u0131dak\u0131lardan biri olmal\u0131d\u0131r: ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${i.origin??"d\u0259y\u0259r"} ${o}${i.maximum.toString()} ${s.unit??"element"}`:`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${i.origin??"d\u0259y\u0259r"} ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${i.origin} ${o}${i.minimum.toString()} ${s.unit}`:`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${i.origin} ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Yanl\u0131\u015F m\u0259tn: "${o.prefix}" il\u0259 ba\u015Flamal\u0131d\u0131r`:o.format==="ends_with"?`Yanl\u0131\u015F m\u0259tn: "${o.suffix}" il\u0259 bitm\u0259lidir`:o.format==="includes"?`Yanl\u0131\u015F m\u0259tn: "${o.includes}" daxil olmal\u0131d\u0131r`:o.format==="regex"?`Yanl\u0131\u015F m\u0259tn: ${o.pattern} \u015Fablonuna uy\u011Fun olmal\u0131d\u0131r`:`Yanl\u0131\u015F ${r[o.format]??i.format}`}case"not_multiple_of":return`Yanl\u0131\u015F \u0259d\u0259d: ${i.divisor} il\u0259 b\xF6l\xFCn\u0259 bil\u0259n olmal\u0131d\u0131r`;case"unrecognized_keys":return`Tan\u0131nmayan a\xE7ar${i.keys.length>1?"lar":""}: ${Q(i.keys,", ")}`;case"invalid_key":return`${i.origin} daxilind\u0259 yanl\u0131\u015F a\xE7ar`;case"invalid_union":return"Yanl\u0131\u015F d\u0259y\u0259r";case"invalid_element":return`${i.origin} daxilind\u0259 yanl\u0131\u015F d\u0259y\u0259r`;default:return"Yanl\u0131\u015F d\u0259y\u0259r"}}};function wee(){return{localeError:nDe()}}function xee(e,t,n,r){let i=Math.abs(e),o=i%10,s=i%100;return s>=11&&s<=19?r:o===1?t:o>=2&&o<=4?n:r}var rDe=()=>{let e={string:{unit:{one:"\u0441\u0456\u043C\u0432\u0430\u043B",few:"\u0441\u0456\u043C\u0432\u0430\u043B\u044B",many:"\u0441\u0456\u043C\u0432\u0430\u043B\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u044B",many:"\u0431\u0430\u0439\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u043B\u0456\u043A";case"object":{if(Array.isArray(i))return"\u043C\u0430\u0441\u0456\u045E";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u0443\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0430\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0456 \u0447\u0430\u0441",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0447\u0430\u0441",duration:"ISO \u043F\u0440\u0430\u0446\u044F\u0433\u043B\u0430\u0441\u0446\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0430\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0430\u0441",cidrv4:"IPv4 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",base64:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64",base64url:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64url",json_string:"JSON \u0440\u0430\u0434\u043E\u043A",e164:"\u043D\u0443\u043C\u0430\u0440 E.164",jwt:"JWT",template_literal:"\u0443\u0432\u043E\u0434"};return i=>{switch(i.code){case"invalid_type":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u045E\u0441\u044F ${i.expected}, \u0430\u0442\u0440\u044B\u043C\u0430\u043D\u0430 ${n(i.input)}`;case"invalid_value":return i.values.length===1?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F ${_e(i.values[0])}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0432\u0430\u0440\u044B\u044F\u043D\u0442: \u0447\u0430\u043A\u0430\u045E\u0441\u044F \u0430\u0434\u0437\u0456\u043D \u0437 ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);if(s){let a=Number(i.maximum),c=xee(a,s.unit.one,s.unit.few,s.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${i.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${s.verb} ${o}${i.maximum.toString()} ${c}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${i.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);if(s){let a=Number(i.minimum),c=xee(a,s.unit.one,s.unit.few,s.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${i.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${s.verb} ${o}${i.minimum.toString()} ${c}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${i.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u043F\u0430\u0447\u044B\u043D\u0430\u0446\u0446\u0430 \u0437 "${o.prefix}"`:o.format==="ends_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u0430\u043A\u0430\u043D\u0447\u0432\u0430\u0446\u0446\u0430 \u043D\u0430 "${o.suffix}"`:o.format==="includes"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u043C\u044F\u0448\u0447\u0430\u0446\u044C "${o.includes}"`:o.format==="regex"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0430\u0434\u043F\u0430\u0432\u044F\u0434\u0430\u0446\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${o.pattern}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B ${r[o.format]??i.format}`}case"not_multiple_of":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043B\u0456\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0431\u044B\u0446\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${i.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u0430\u0437\u043D\u0430\u043D\u044B ${i.keys.length>1?"\u043A\u043B\u044E\u0447\u044B":"\u043A\u043B\u044E\u0447"}: ${Q(i.keys,", ")}`;case"invalid_key":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043A\u043B\u044E\u0447 \u0443 ${i.origin}`;case"invalid_union":return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434";case"invalid_element":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u0430\u0435 \u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435 \u045E ${i.origin}`;default:return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434"}}};function Cee(){return{localeError:rDe()}}var iDe=e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(e))return"\u043C\u0430\u0441\u0438\u0432";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return t},oDe=()=>{let e={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},file:{unit:"\u0431\u0430\u0439\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"}};function t(r){return e[r]??null}let n={regex:"\u0432\u0445\u043E\u0434",email:"\u0438\u043C\u0435\u0439\u043B \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0436\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u043F\u0440\u043E\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u043E\u0441\u0442",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"base64-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",base64url:"base64url-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",json_string:"JSON \u043D\u0438\u0437",e164:"E.164 \u043D\u043E\u043C\u0435\u0440",jwt:"JWT",template_literal:"\u0432\u0445\u043E\u0434"};return r=>{switch(r.code){case"invalid_type":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${r.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D ${iDe(r.input)}`;case"invalid_value":return r.values.length===1?`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${_e(r.values[0])}`:`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u043E\u043F\u0446\u0438\u044F: \u043E\u0447\u0430\u043A\u0432\u0430\u043D\u043E \u0435\u0434\u043D\u043E \u043E\u0442 ${Q(r.values,"|")}`;case"too_big":{let i=r.inclusive?"<=":"<",o=t(r.origin);return o?`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${r.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${i}${r.maximum.toString()} ${o.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430"}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${r.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0431\u044A\u0434\u0435 ${i}${r.maximum.toString()}`}case"too_small":{let i=r.inclusive?">=":">",o=t(r.origin);return o?`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${r.origin} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${i}${r.minimum.toString()} ${o.unit}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${r.origin} \u0434\u0430 \u0431\u044A\u0434\u0435 ${i}${r.minimum.toString()}`}case"invalid_format":{let i=r;if(i.format==="starts_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u0432\u0430 \u0441 "${i.prefix}"`;if(i.format==="ends_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u0432\u044A\u0440\u0448\u0432\u0430 \u0441 "${i.suffix}"`;if(i.format==="includes")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0432\u043A\u043B\u044E\u0447\u0432\u0430 "${i.includes}"`;if(i.format==="regex")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0441\u044A\u0432\u043F\u0430\u0434\u0430 \u0441 ${i.pattern}`;let o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D";return i.format==="emoji"&&(o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),i.format==="datetime"&&(o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),i.format==="date"&&(o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),i.format==="time"&&(o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),i.format==="duration"&&(o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),`${o} ${n[i.format]??r.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E \u0447\u0438\u0441\u043B\u043E: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0431\u044A\u0434\u0435 \u043A\u0440\u0430\u0442\u043D\u043E \u043D\u0430 ${r.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0437\u043F\u043E\u0437\u043D\u0430\u0442${r.keys.length>1?"\u0438":""} \u043A\u043B\u044E\u0447${r.keys.length>1?"\u043E\u0432\u0435":""}: ${Q(r.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043A\u043B\u044E\u0447 \u0432 ${r.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434";case"invalid_element":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442 \u0432 ${r.origin}`;default:return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434"}}};function Eee(){return{localeError:oDe()}}var sDe=()=>{let e={string:{unit:"car\xE0cters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"entrada",email:"adre\xE7a electr\xF2nica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adre\xE7a IPv4",ipv6:"adre\xE7a IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return i=>{switch(i.code){case"invalid_type":return`Tipus inv\xE0lid: s'esperava ${i.expected}, s'ha rebut ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Valor inv\xE0lid: s'esperava ${_e(i.values[0])}`:`Opci\xF3 inv\xE0lida: s'esperava una de ${Q(i.values," o ")}`;case"too_big":{let o=i.inclusive?"com a m\xE0xim":"menys de",s=t(i.origin);return s?`Massa gran: s'esperava que ${i.origin??"el valor"} contingu\xE9s ${o} ${i.maximum.toString()} ${s.unit??"elements"}`:`Massa gran: s'esperava que ${i.origin??"el valor"} fos ${o} ${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?"com a m\xEDnim":"m\xE9s de",s=t(i.origin);return s?`Massa petit: s'esperava que ${i.origin} contingu\xE9s ${o} ${i.minimum.toString()} ${s.unit}`:`Massa petit: s'esperava que ${i.origin} fos ${o} ${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Format inv\xE0lid: ha de comen\xE7ar amb "${o.prefix}"`:o.format==="ends_with"?`Format inv\xE0lid: ha d'acabar amb "${o.suffix}"`:o.format==="includes"?`Format inv\xE0lid: ha d'incloure "${o.includes}"`:o.format==="regex"?`Format inv\xE0lid: ha de coincidir amb el patr\xF3 ${o.pattern}`:`Format inv\xE0lid per a ${r[o.format]??i.format}`}case"not_multiple_of":return`N\xFAmero inv\xE0lid: ha de ser m\xFAltiple de ${i.divisor}`;case"unrecognized_keys":return`Clau${i.keys.length>1?"s":""} no reconeguda${i.keys.length>1?"s":""}: ${Q(i.keys,", ")}`;case"invalid_key":return`Clau inv\xE0lida a ${i.origin}`;case"invalid_union":return"Entrada inv\xE0lida";case"invalid_element":return`Element inv\xE0lid a ${i.origin}`;default:return"Entrada inv\xE0lida"}}};function Iee(){return{localeError:sDe()}}var aDe=()=>{let e={string:{unit:"znak\u016F",verb:"m\xEDt"},file:{unit:"bajt\u016F",verb:"m\xEDt"},array:{unit:"prvk\u016F",verb:"m\xEDt"},set:{unit:"prvk\u016F",verb:"m\xEDt"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u010D\xEDslo";case"string":return"\u0159et\u011Bzec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":{if(Array.isArray(i))return"pole";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"regul\xE1rn\xED v\xFDraz",email:"e-mailov\xE1 adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a \u010Das ve form\xE1tu ISO",date:"datum ve form\xE1tu ISO",time:"\u010Das ve form\xE1tu ISO",duration:"doba trv\xE1n\xED ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64",base64url:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64url",json_string:"\u0159et\u011Bzec ve form\xE1tu JSON",e164:"\u010D\xEDslo E.164",jwt:"JWT",template_literal:"vstup"};return i=>{switch(i.code){case"invalid_type":return`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${i.expected}, obdr\u017Eeno ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${_e(i.values[0])}`:`Neplatn\xE1 mo\u017Enost: o\u010Dek\xE1v\xE1na jedna z hodnot ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${i.origin??"hodnota"} mus\xED m\xEDt ${o}${i.maximum.toString()} ${s.unit??"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${i.origin??"hodnota"} mus\xED b\xFDt ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${i.origin??"hodnota"} mus\xED m\xEDt ${o}${i.minimum.toString()} ${s.unit??"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${i.origin??"hodnota"} mus\xED b\xFDt ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED za\u010D\xEDnat na "${o.prefix}"`:o.format==="ends_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED kon\u010Dit na "${o.suffix}"`:o.format==="includes"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED obsahovat "${o.includes}"`:o.format==="regex"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED odpov\xEDdat vzoru ${o.pattern}`:`Neplatn\xFD form\xE1t ${r[o.format]??i.format}`}case"not_multiple_of":return`Neplatn\xE9 \u010D\xEDslo: mus\xED b\xFDt n\xE1sobkem ${i.divisor}`;case"unrecognized_keys":return`Nezn\xE1m\xE9 kl\xED\u010De: ${Q(i.keys,", ")}`;case"invalid_key":return`Neplatn\xFD kl\xED\u010D v ${i.origin}`;case"invalid_union":return"Neplatn\xFD vstup";case"invalid_element":return`Neplatn\xE1 hodnota v ${i.origin}`;default:return"Neplatn\xFD vstup"}}};function See(){return{localeError:aDe()}}var cDe=()=>{let e={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},t={string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"s\xE6t",file:"fil"};function n(s){return e[s]??null}function r(s){return t[s]??s}let i=s=>{let a=typeof s;switch(a){case"number":return Number.isNaN(s)?"NaN":"tal";case"object":return Array.isArray(s)?"liste":s===null?"null":Object.getPrototypeOf(s)!==Object.prototype&&s.constructor?s.constructor.name:"objekt"}return a},o={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkesl\xE6t",date:"ISO-dato",time:"ISO-klokkesl\xE6t",duration:"ISO-varighed",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return s=>{switch(s.code){case"invalid_type":return`Ugyldigt input: forventede ${r(s.expected)}, fik ${r(i(s.input))}`;case"invalid_value":return s.values.length===1?`Ugyldig v\xE6rdi: forventede ${_e(s.values[0])}`:`Ugyldigt valg: forventede en af f\xF8lgende ${Q(s.values,"|")}`;case"too_big":{let a=s.inclusive?"<=":"<",c=n(s.origin),u=r(s.origin);return c?`For stor: forventede ${u??"value"} ${c.verb} ${a} ${s.maximum.toString()} ${c.unit??"elementer"}`:`For stor: forventede ${u??"value"} havde ${a} ${s.maximum.toString()}`}case"too_small":{let a=s.inclusive?">=":">",c=n(s.origin),u=r(s.origin);return c?`For lille: forventede ${u} ${c.verb} ${a} ${s.minimum.toString()} ${c.unit}`:`For lille: forventede ${u} havde ${a} ${s.minimum.toString()}`}case"invalid_format":{let a=s;return a.format==="starts_with"?`Ugyldig streng: skal starte med "${a.prefix}"`:a.format==="ends_with"?`Ugyldig streng: skal ende med "${a.suffix}"`:a.format==="includes"?`Ugyldig streng: skal indeholde "${a.includes}"`:a.format==="regex"?`Ugyldig streng: skal matche m\xF8nsteret ${a.pattern}`:`Ugyldig ${o[a.format]??s.format}`}case"not_multiple_of":return`Ugyldigt tal: skal v\xE6re deleligt med ${s.divisor}`;case"unrecognized_keys":return`${s.keys.length>1?"Ukendte n\xF8gler":"Ukendt n\xF8gle"}: ${Q(s.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8gle i ${s.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xE6rdi i ${s.origin}`;default:return"Ugyldigt input"}}};function kee(){return{localeError:cDe()}}var lDe=()=>{let e={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"Zahl";case"object":{if(Array.isArray(i))return"Array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"};return i=>{switch(i.code){case"invalid_type":return`Ung\xFCltige Eingabe: erwartet ${i.expected}, erhalten ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Ung\xFCltige Eingabe: erwartet ${_e(i.values[0])}`:`Ung\xFCltige Option: erwartet eine von ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`Zu gro\xDF: erwartet, dass ${i.origin??"Wert"} ${o}${i.maximum.toString()} ${s.unit??"Elemente"} hat`:`Zu gro\xDF: erwartet, dass ${i.origin??"Wert"} ${o}${i.maximum.toString()} ist`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`Zu klein: erwartet, dass ${i.origin} ${o}${i.minimum.toString()} ${s.unit} hat`:`Zu klein: erwartet, dass ${i.origin} ${o}${i.minimum.toString()} ist`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Ung\xFCltiger String: muss mit "${o.prefix}" beginnen`:o.format==="ends_with"?`Ung\xFCltiger String: muss mit "${o.suffix}" enden`:o.format==="includes"?`Ung\xFCltiger String: muss "${o.includes}" enthalten`:o.format==="regex"?`Ung\xFCltiger String: muss dem Muster ${o.pattern} entsprechen`:`Ung\xFCltig: ${r[o.format]??i.format}`}case"not_multiple_of":return`Ung\xFCltige Zahl: muss ein Vielfaches von ${i.divisor} sein`;case"unrecognized_keys":return`${i.keys.length>1?"Unbekannte Schl\xFCssel":"Unbekannter Schl\xFCssel"}: ${Q(i.keys,", ")}`;case"invalid_key":return`Ung\xFCltiger Schl\xFCssel in ${i.origin}`;case"invalid_union":return"Ung\xFCltige Eingabe";case"invalid_element":return`Ung\xFCltiger Wert in ${i.origin}`;default:return"Ung\xFCltige Eingabe"}}};function Tee(){return{localeError:lDe()}}var uDe=e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":{if(Array.isArray(e))return"array";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return t},dDe=()=>{let e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function t(r){return e[r]??null}let n={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return r=>{switch(r.code){case"invalid_type":return`Invalid input: expected ${r.expected}, received ${uDe(r.input)}`;case"invalid_value":return r.values.length===1?`Invalid input: expected ${_e(r.values[0])}`:`Invalid option: expected one of ${Q(r.values,"|")}`;case"too_big":{let i=r.inclusive?"<=":"<",o=t(r.origin);return o?`Too big: expected ${r.origin??"value"} to have ${i}${r.maximum.toString()} ${o.unit??"elements"}`:`Too big: expected ${r.origin??"value"} to be ${i}${r.maximum.toString()}`}case"too_small":{let i=r.inclusive?">=":">",o=t(r.origin);return o?`Too small: expected ${r.origin} to have ${i}${r.minimum.toString()} ${o.unit}`:`Too small: expected ${r.origin} to be ${i}${r.minimum.toString()}`}case"invalid_format":{let i=r;return i.format==="starts_with"?`Invalid string: must start with "${i.prefix}"`:i.format==="ends_with"?`Invalid string: must end with "${i.suffix}"`:i.format==="includes"?`Invalid string: must include "${i.includes}"`:i.format==="regex"?`Invalid string: must match pattern ${i.pattern}`:`Invalid ${n[i.format]??r.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${r.divisor}`;case"unrecognized_keys":return`Unrecognized key${r.keys.length>1?"s":""}: ${Q(r.keys,", ")}`;case"invalid_key":return`Invalid key in ${r.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${r.origin}`;default:return"Invalid input"}}};function jO(){return{localeError:dDe()}}var pDe=e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombro";case"object":{if(Array.isArray(e))return"tabelo";if(e===null)return"senvalora";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return t},mDe=()=>{let e={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function t(r){return e[r]??null}let n={regex:"enigo",email:"retadreso",url:"URL",emoji:"emo\u011Dio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-da\u016Dro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"};return r=>{switch(r.code){case"invalid_type":return`Nevalida enigo: atendi\u011Dis ${r.expected}, ricevi\u011Dis ${pDe(r.input)}`;case"invalid_value":return r.values.length===1?`Nevalida enigo: atendi\u011Dis ${_e(r.values[0])}`:`Nevalida opcio: atendi\u011Dis unu el ${Q(r.values,"|")}`;case"too_big":{let i=r.inclusive?"<=":"<",o=t(r.origin);return o?`Tro granda: atendi\u011Dis ke ${r.origin??"valoro"} havu ${i}${r.maximum.toString()} ${o.unit??"elementojn"}`:`Tro granda: atendi\u011Dis ke ${r.origin??"valoro"} havu ${i}${r.maximum.toString()}`}case"too_small":{let i=r.inclusive?">=":">",o=t(r.origin);return o?`Tro malgranda: atendi\u011Dis ke ${r.origin} havu ${i}${r.minimum.toString()} ${o.unit}`:`Tro malgranda: atendi\u011Dis ke ${r.origin} estu ${i}${r.minimum.toString()}`}case"invalid_format":{let i=r;return i.format==="starts_with"?`Nevalida karaktraro: devas komenci\u011Di per "${i.prefix}"`:i.format==="ends_with"?`Nevalida karaktraro: devas fini\u011Di per "${i.suffix}"`:i.format==="includes"?`Nevalida karaktraro: devas inkluzivi "${i.includes}"`:i.format==="regex"?`Nevalida karaktraro: devas kongrui kun la modelo ${i.pattern}`:`Nevalida ${n[i.format]??r.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${r.divisor}`;case"unrecognized_keys":return`Nekonata${r.keys.length>1?"j":""} \u015Dlosilo${r.keys.length>1?"j":""}: ${Q(r.keys,", ")}`;case"invalid_key":return`Nevalida \u015Dlosilo en ${r.origin}`;case"invalid_union":return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${r.origin}`;default:return"Nevalida enigo"}}};function Aee(){return{localeError:mDe()}}var fDe=()=>{let e={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},t={string:"texto",number:"n\xFAmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"n\xFAmero grande",symbol:"s\xEDmbolo",undefined:"indefinido",null:"nulo",function:"funci\xF3n",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeraci\xF3n",union:"uni\xF3n",literal:"literal",promise:"promesa",void:"vac\xEDo",never:"nunca",unknown:"desconocido",any:"cualquiera"};function n(s){return e[s]??null}function r(s){return t[s]??s}let i=s=>{let a=typeof s;switch(a){case"number":return Number.isNaN(s)?"NaN":"number";case"object":return Array.isArray(s)?"array":s===null?"null":Object.getPrototypeOf(s)!==Object.prototype?s.constructor.name:"object"}return a},o={regex:"entrada",email:"direcci\xF3n de correo electr\xF3nico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duraci\xF3n ISO",ipv4:"direcci\xF3n IPv4",ipv6:"direcci\xF3n IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return s=>{switch(s.code){case"invalid_type":return`Entrada inv\xE1lida: se esperaba ${r(s.expected)}, recibido ${r(i(s.input))}`;case"invalid_value":return s.values.length===1?`Entrada inv\xE1lida: se esperaba ${_e(s.values[0])}`:`Opci\xF3n inv\xE1lida: se esperaba una de ${Q(s.values,"|")}`;case"too_big":{let a=s.inclusive?"<=":"<",c=n(s.origin),u=r(s.origin);return c?`Demasiado grande: se esperaba que ${u??"valor"} tuviera ${a}${s.maximum.toString()} ${c.unit??"elementos"}`:`Demasiado grande: se esperaba que ${u??"valor"} fuera ${a}${s.maximum.toString()}`}case"too_small":{let a=s.inclusive?">=":">",c=n(s.origin),u=r(s.origin);return c?`Demasiado peque\xF1o: se esperaba que ${u} tuviera ${a}${s.minimum.toString()} ${c.unit}`:`Demasiado peque\xF1o: se esperaba que ${u} fuera ${a}${s.minimum.toString()}`}case"invalid_format":{let a=s;return a.format==="starts_with"?`Cadena inv\xE1lida: debe comenzar con "${a.prefix}"`:a.format==="ends_with"?`Cadena inv\xE1lida: debe terminar en "${a.suffix}"`:a.format==="includes"?`Cadena inv\xE1lida: debe incluir "${a.includes}"`:a.format==="regex"?`Cadena inv\xE1lida: debe coincidir con el patr\xF3n ${a.pattern}`:`Inv\xE1lido ${o[a.format]??s.format}`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: debe ser m\xFAltiplo de ${s.divisor}`;case"unrecognized_keys":return`Llave${s.keys.length>1?"s":""} desconocida${s.keys.length>1?"s":""}: ${Q(s.keys,", ")}`;case"invalid_key":return`Llave inv\xE1lida en ${r(s.origin)}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido en ${r(s.origin)}`;default:return"Entrada inv\xE1lida"}}};function Oee(){return{localeError:fDe()}}var hDe=()=>{let e={string:{unit:"\u06A9\u0627\u0631\u0627\u06A9\u062A\u0631",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},file:{unit:"\u0628\u0627\u06CC\u062A",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},array:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},set:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(i))return"\u0622\u0631\u0627\u06CC\u0647";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u0648\u0631\u0648\u062F\u06CC",email:"\u0622\u062F\u0631\u0633 \u0627\u06CC\u0645\u06CC\u0644",url:"URL",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u06CC\u062E \u0648 \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",date:"\u062A\u0627\u0631\u06CC\u062E \u0627\u06CC\u0632\u0648",time:"\u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",duration:"\u0645\u062F\u062A \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",ipv4:"IPv4 \u0622\u062F\u0631\u0633",ipv6:"IPv6 \u0622\u062F\u0631\u0633",cidrv4:"IPv4 \u062F\u0627\u0645\u0646\u0647",cidrv6:"IPv6 \u062F\u0627\u0645\u0646\u0647",base64:"base64-encoded \u0631\u0634\u062A\u0647",base64url:"base64url-encoded \u0631\u0634\u062A\u0647",json_string:"JSON \u0631\u0634\u062A\u0647",e164:"E.164 \u0639\u062F\u062F",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u06CC"};return i=>{switch(i.code){case"invalid_type":return`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${i.expected} \u0645\u06CC\u200C\u0628\u0648\u062F\u060C ${n(i.input)} \u062F\u0631\u06CC\u0627\u0641\u062A \u0634\u062F`;case"invalid_value":return i.values.length===1?`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${_e(i.values[0])} \u0645\u06CC\u200C\u0628\u0648\u062F`:`\u06AF\u0632\u06CC\u0646\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A \u06CC\u06A9\u06CC \u0627\u0632 ${Q(i.values,"|")} \u0645\u06CC\u200C\u0628\u0648\u062F`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${i.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${o}${i.maximum.toString()} ${s.unit??"\u0639\u0646\u0635\u0631"} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${i.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${o}${i.maximum.toString()} \u0628\u0627\u0634\u062F`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${i.origin} \u0628\u0627\u06CC\u062F ${o}${i.minimum.toString()} ${s.unit} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${i.origin} \u0628\u0627\u06CC\u062F ${o}${i.minimum.toString()} \u0628\u0627\u0634\u062F`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${o.prefix}" \u0634\u0631\u0648\u0639 \u0634\u0648\u062F`:o.format==="ends_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${o.suffix}" \u062A\u0645\u0627\u0645 \u0634\u0648\u062F`:o.format==="includes"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0634\u0627\u0645\u0644 "${o.includes}" \u0628\u0627\u0634\u062F`:o.format==="regex"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 \u0627\u0644\u06AF\u0648\u06CC ${o.pattern} \u0645\u0637\u0627\u0628\u0642\u062A \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F`:`${r[o.format]??i.format} \u0646\u0627\u0645\u0639\u062A\u0628\u0631`}case"not_multiple_of":return`\u0639\u062F\u062F \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0645\u0636\u0631\u0628 ${i.divisor} \u0628\u0627\u0634\u062F`;case"unrecognized_keys":return`\u06A9\u0644\u06CC\u062F${i.keys.length>1?"\u0647\u0627\u06CC":""} \u0646\u0627\u0634\u0646\u0627\u0633: ${Q(i.keys,", ")}`;case"invalid_key":return`\u06A9\u0644\u06CC\u062F \u0646\u0627\u0634\u0646\u0627\u0633 \u062F\u0631 ${i.origin}`;case"invalid_union":return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631";case"invalid_element":return`\u0645\u0642\u062F\u0627\u0631 \u0646\u0627\u0645\u0639\u062A\u0628\u0631 \u062F\u0631 ${i.origin}`;default:return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631"}}};function Mee(){return{localeError:hDe()}}var gDe=()=>{let e={string:{unit:"merkki\xE4",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"p\xE4iv\xE4m\xE4\xE4r\xE4n"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"s\xE4\xE4nn\xF6llinen lauseke",email:"s\xE4hk\xF6postiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-p\xE4iv\xE4m\xE4\xE4r\xE4",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"};return i=>{switch(i.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${i.expected}, oli ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Virheellinen sy\xF6te: t\xE4ytyy olla ${_e(i.values[0])}`:`Virheellinen valinta: t\xE4ytyy olla yksi seuraavista: ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`Liian suuri: ${s.subject} t\xE4ytyy olla ${o}${i.maximum.toString()} ${s.unit}`.trim():`Liian suuri: arvon t\xE4ytyy olla ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`Liian pieni: ${s.subject} t\xE4ytyy olla ${o}${i.minimum.toString()} ${s.unit}`.trim():`Liian pieni: arvon t\xE4ytyy olla ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Virheellinen sy\xF6te: t\xE4ytyy alkaa "${o.prefix}"`:o.format==="ends_with"?`Virheellinen sy\xF6te: t\xE4ytyy loppua "${o.suffix}"`:o.format==="includes"?`Virheellinen sy\xF6te: t\xE4ytyy sis\xE4lt\xE4\xE4 "${o.includes}"`:o.format==="regex"?`Virheellinen sy\xF6te: t\xE4ytyy vastata s\xE4\xE4nn\xF6llist\xE4 lauseketta ${o.pattern}`:`Virheellinen ${r[o.format]??i.format}`}case"not_multiple_of":return`Virheellinen luku: t\xE4ytyy olla luvun ${i.divisor} monikerta`;case"unrecognized_keys":return`${i.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${Q(i.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen sy\xF6te"}}};function Dee(){return{localeError:gDe()}}var _De=()=>{let e={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"nombre";case"object":{if(Array.isArray(i))return"tableau";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"entr\xE9e",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return i=>{switch(i.code){case"invalid_type":return`Entr\xE9e invalide : ${i.expected} attendu, ${n(i.input)} re\xE7u`;case"invalid_value":return i.values.length===1?`Entr\xE9e invalide : ${_e(i.values[0])} attendu`:`Option invalide : une valeur parmi ${Q(i.values,"|")} attendue`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`Trop grand : ${i.origin??"valeur"} doit ${s.verb} ${o}${i.maximum.toString()} ${s.unit??"\xE9l\xE9ment(s)"}`:`Trop grand : ${i.origin??"valeur"} doit \xEAtre ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`Trop petit : ${i.origin} doit ${s.verb} ${o}${i.minimum.toString()} ${s.unit}`:`Trop petit : ${i.origin} doit \xEAtre ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${o.prefix}"`:o.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${o.suffix}"`:o.format==="includes"?`Cha\xEEne invalide : doit inclure "${o.includes}"`:o.format==="regex"?`Cha\xEEne invalide : doit correspondre au mod\xE8le ${o.pattern}`:`${r[o.format]??i.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${i.divisor}`;case"unrecognized_keys":return`Cl\xE9${i.keys.length>1?"s":""} non reconnue${i.keys.length>1?"s":""} : ${Q(i.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${i.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${i.origin}`;default:return"Entr\xE9e invalide"}}};function Pee(){return{localeError:_De()}}var yDe=()=>{let e={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"entr\xE9e",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return i=>{switch(i.code){case"invalid_type":return`Entr\xE9e invalide : attendu ${i.expected}, re\xE7u ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Entr\xE9e invalide : attendu ${_e(i.values[0])}`:`Option invalide : attendu l'une des valeurs suivantes ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"\u2264":"<",s=t(i.origin);return s?`Trop grand : attendu que ${i.origin??"la valeur"} ait ${o}${i.maximum.toString()} ${s.unit}`:`Trop grand : attendu que ${i.origin??"la valeur"} soit ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?"\u2265":">",s=t(i.origin);return s?`Trop petit : attendu que ${i.origin} ait ${o}${i.minimum.toString()} ${s.unit}`:`Trop petit : attendu que ${i.origin} soit ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${o.prefix}"`:o.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${o.suffix}"`:o.format==="includes"?`Cha\xEEne invalide : doit inclure "${o.includes}"`:o.format==="regex"?`Cha\xEEne invalide : doit correspondre au motif ${o.pattern}`:`${r[o.format]??i.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${i.divisor}`;case"unrecognized_keys":return`Cl\xE9${i.keys.length>1?"s":""} non reconnue${i.keys.length>1?"s":""} : ${Q(i.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${i.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${i.origin}`;default:return"Entr\xE9e invalide"}}};function Ree(){return{localeError:yDe()}}var vDe=()=>{let e={string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA",gender:"f"},number:{label:"\u05DE\u05E1\u05E4\u05E8",gender:"m"},boolean:{label:"\u05E2\u05E8\u05DA \u05D1\u05D5\u05DC\u05D9\u05D0\u05E0\u05D9",gender:"m"},bigint:{label:"BigInt",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA",gender:"m"},array:{label:"\u05DE\u05E2\u05E8\u05DA",gender:"m"},object:{label:"\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8",gender:"m"},null:{label:"\u05E2\u05E8\u05DA \u05E8\u05D9\u05E7 (null)",gender:"m"},undefined:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05DE\u05D5\u05D2\u05D3\u05E8 (undefined)",gender:"m"},symbol:{label:"\u05E1\u05D9\u05DE\u05D1\u05D5\u05DC (Symbol)",gender:"m"},function:{label:"\u05E4\u05D5\u05E0\u05E7\u05E6\u05D9\u05D4",gender:"f"},map:{label:"\u05DE\u05E4\u05D4 (Map)",gender:"f"},set:{label:"\u05E7\u05D1\u05D5\u05E6\u05D4 (Set)",gender:"f"},file:{label:"\u05E7\u05D5\u05D1\u05E5",gender:"m"},promise:{label:"Promise",gender:"m"},NaN:{label:"NaN",gender:"m"},unknown:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05D9\u05D3\u05D5\u05E2",gender:"m"},value:{label:"\u05E2\u05E8\u05DA",gender:"m"}},t={string:{unit:"\u05EA\u05D5\u05D5\u05D9\u05DD",shortLabel:"\u05E7\u05E6\u05E8",longLabel:"\u05D0\u05E8\u05D5\u05DA"},file:{unit:"\u05D1\u05D9\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},array:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},set:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},number:{unit:"",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"}},n=u=>u?e[u]:void 0,r=u=>{let d=n(u);return d?d.label:u??e.unknown.label},i=u=>`\u05D4${r(u)}`,o=u=>(n(u)?.gender??"m")==="f"?"\u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05D9\u05D5\u05EA":"\u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA",s=u=>u?t[u]??null:null,a=u=>{let d=typeof u;switch(d){case"number":return Number.isNaN(u)?"NaN":"number";case"object":return Array.isArray(u)?"array":u===null?"null":Object.getPrototypeOf(u)!==Object.prototype&&u.constructor?u.constructor.name:"object";default:return d}},c={regex:{label:"\u05E7\u05DC\u05D8",gender:"m"},email:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC",gender:"f"},url:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05E8\u05E9\u05EA",gender:"f"},emoji:{label:"\u05D0\u05D9\u05DE\u05D5\u05D2'\u05D9",gender:"m"},uuid:{label:"UUID",gender:"m"},nanoid:{label:"nanoid",gender:"m"},guid:{label:"GUID",gender:"m"},cuid:{label:"cuid",gender:"m"},cuid2:{label:"cuid2",gender:"m"},ulid:{label:"ULID",gender:"m"},xid:{label:"XID",gender:"m"},ksuid:{label:"KSUID",gender:"m"},datetime:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA \u05D5\u05D6\u05DE\u05DF ISO",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA ISO",gender:"m"},time:{label:"\u05D6\u05DE\u05DF ISO",gender:"m"},duration:{label:"\u05DE\u05E9\u05DA \u05D6\u05DE\u05DF ISO",gender:"m"},ipv4:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv4",gender:"f"},ipv6:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv6",gender:"f"},cidrv4:{label:"\u05D8\u05D5\u05D5\u05D7 IPv4",gender:"m"},cidrv6:{label:"\u05D8\u05D5\u05D5\u05D7 IPv6",gender:"m"},base64:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64",gender:"f"},base64url:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64 \u05DC\u05DB\u05EA\u05D5\u05D1\u05D5\u05EA \u05E8\u05E9\u05EA",gender:"f"},json_string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA JSON",gender:"f"},e164:{label:"\u05DE\u05E1\u05E4\u05E8 E.164",gender:"m"},jwt:{label:"JWT",gender:"m"},ends_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},includes:{label:"\u05E7\u05DC\u05D8",gender:"m"},lowercase:{label:"\u05E7\u05DC\u05D8",gender:"m"},starts_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},uppercase:{label:"\u05E7\u05DC\u05D8",gender:"m"}};return u=>{switch(u.code){case"invalid_type":{let d=u.expected,f=r(d),g=a(u.input),h=e[g]?.label??g;return`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${f}, \u05D4\u05EA\u05E7\u05D1\u05DC ${h}`}case"invalid_value":{if(u.values.length===1)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05E2\u05E8\u05DA \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA ${_e(u.values[0])}`;let d=u.values.map(h=>_e(h));if(u.values.length===2)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${d[0]} \u05D0\u05D5 ${d[1]}`;let f=d[d.length-1];return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${d.slice(0,-1).join(", ")} \u05D0\u05D5 ${f}`}case"too_big":{let d=s(u.origin),f=i(u.origin??"value");if(u.origin==="string")return`${d?.longLabel??"\u05D0\u05E8\u05D5\u05DA"} \u05DE\u05D3\u05D9: ${f} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${u.maximum.toString()} ${d?.unit??""} ${u.inclusive?"\u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA":"\u05DC\u05DB\u05DC \u05D4\u05D9\u05D5\u05EA\u05E8"}`.trim();if(u.origin==="number"){let v=u.inclusive?`\u05E7\u05D8\u05DF \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${u.maximum}`:`\u05E7\u05D8\u05DF \u05DE-${u.maximum}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${f} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${v}`}if(u.origin==="array"||u.origin==="set"){let v=u.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA",x=u.inclusive?`${u.maximum} ${d?.unit??""} \u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA`:`\u05E4\u05D7\u05D5\u05EA \u05DE-${u.maximum} ${d?.unit??""}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${f} ${v} \u05DC\u05D4\u05DB\u05D9\u05DC ${x}`.trim()}let g=u.inclusive?"<=":"<",h=o(u.origin??"value");return d?.unit?`${d.longLabel} \u05DE\u05D3\u05D9: ${f} ${h} ${g}${u.maximum.toString()} ${d.unit}`:`${d?.longLabel??"\u05D2\u05D3\u05D5\u05DC"} \u05DE\u05D3\u05D9: ${f} ${h} ${g}${u.maximum.toString()}`}case"too_small":{let d=s(u.origin),f=i(u.origin??"value");if(u.origin==="string")return`${d?.shortLabel??"\u05E7\u05E6\u05E8"} \u05DE\u05D3\u05D9: ${f} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${u.minimum.toString()} ${d?.unit??""} ${u.inclusive?"\u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8":"\u05DC\u05E4\u05D7\u05D5\u05EA"}`.trim();if(u.origin==="number"){let v=u.inclusive?`\u05D2\u05D3\u05D5\u05DC \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${u.minimum}`:`\u05D2\u05D3\u05D5\u05DC \u05DE-${u.minimum}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${f} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${v}`}if(u.origin==="array"||u.origin==="set"){let v=u.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA";if(u.minimum===1&&u.inclusive){let E=(u.origin==="set","\u05DC\u05E4\u05D7\u05D5\u05EA \u05E4\u05E8\u05D9\u05D8 \u05D0\u05D7\u05D3");return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${f} ${v} \u05DC\u05D4\u05DB\u05D9\u05DC ${E}`}let x=u.inclusive?`${u.minimum} ${d?.unit??""} \u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8`:`\u05D9\u05D5\u05EA\u05E8 \u05DE-${u.minimum} ${d?.unit??""}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${f} ${v} \u05DC\u05D4\u05DB\u05D9\u05DC ${x}`.trim()}let g=u.inclusive?">=":">",h=o(u.origin??"value");return d?.unit?`${d.shortLabel} \u05DE\u05D3\u05D9: ${f} ${h} ${g}${u.minimum.toString()} ${d.unit}`:`${d?.shortLabel??"\u05E7\u05D8\u05DF"} \u05DE\u05D3\u05D9: ${f} ${h} ${g}${u.minimum.toString()}`}case"invalid_format":{let d=u;if(d.format==="starts_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D7\u05D9\u05DC \u05D1 "${d.prefix}"`;if(d.format==="ends_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05E1\u05EA\u05D9\u05D9\u05DD \u05D1 "${d.suffix}"`;if(d.format==="includes")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05DB\u05DC\u05D5\u05DC "${d.includes}"`;if(d.format==="regex")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D0\u05D9\u05DD \u05DC\u05EA\u05D1\u05E0\u05D9\u05EA ${d.pattern}`;let f=c[d.format],g=f?.label??d.format,v=(f?.gender??"m")==="f"?"\u05EA\u05E7\u05D9\u05E0\u05D4":"\u05EA\u05E7\u05D9\u05DF";return`${g} \u05DC\u05D0 ${v}`}case"not_multiple_of":return`\u05DE\u05E1\u05E4\u05E8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA \u05DE\u05DB\u05E4\u05DC\u05D4 \u05E9\u05DC ${u.divisor}`;case"unrecognized_keys":return`\u05DE\u05E4\u05EA\u05D7${u.keys.length>1?"\u05D5\u05EA":""} \u05DC\u05D0 \u05DE\u05D6\u05D5\u05D4${u.keys.length>1?"\u05D9\u05DD":"\u05D4"}: ${Q(u.keys,", ")}`;case"invalid_key":return"\u05E9\u05D3\u05D4 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8";case"invalid_union":return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF";case"invalid_element":return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${i(u.origin??"array")}`;default:return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF"}}};function Nee(){return{localeError:vDe()}}var bDe=()=>{let e={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"sz\xE1m";case"object":{if(Array.isArray(i))return"t\xF6mb";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"bemenet",email:"email c\xEDm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO id\u0151b\xE9lyeg",date:"ISO d\xE1tum",time:"ISO id\u0151",duration:"ISO id\u0151intervallum",ipv4:"IPv4 c\xEDm",ipv6:"IPv6 c\xEDm",cidrv4:"IPv4 tartom\xE1ny",cidrv6:"IPv6 tartom\xE1ny",base64:"base64-k\xF3dolt string",base64url:"base64url-k\xF3dolt string",json_string:"JSON string",e164:"E.164 sz\xE1m",jwt:"JWT",template_literal:"bemenet"};return i=>{switch(i.code){case"invalid_type":return`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${i.expected}, a kapott \xE9rt\xE9k ${n(i.input)}`;case"invalid_value":return i.values.length===1?`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${_e(i.values[0])}`:`\xC9rv\xE9nytelen opci\xF3: valamelyik \xE9rt\xE9k v\xE1rt ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`T\xFAl nagy: ${i.origin??"\xE9rt\xE9k"} m\xE9rete t\xFAl nagy ${o}${i.maximum.toString()} ${s.unit??"elem"}`:`T\xFAl nagy: a bemeneti \xE9rt\xE9k ${i.origin??"\xE9rt\xE9k"} t\xFAl nagy: ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${i.origin} m\xE9rete t\xFAl kicsi ${o}${i.minimum.toString()} ${s.unit}`:`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${i.origin} t\xFAl kicsi ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\xC9rv\xE9nytelen string: "${o.prefix}" \xE9rt\xE9kkel kell kezd\u0151dnie`:o.format==="ends_with"?`\xC9rv\xE9nytelen string: "${o.suffix}" \xE9rt\xE9kkel kell v\xE9gz\u0151dnie`:o.format==="includes"?`\xC9rv\xE9nytelen string: "${o.includes}" \xE9rt\xE9ket kell tartalmaznia`:o.format==="regex"?`\xC9rv\xE9nytelen string: ${o.pattern} mint\xE1nak kell megfelelnie`:`\xC9rv\xE9nytelen ${r[o.format]??i.format}`}case"not_multiple_of":return`\xC9rv\xE9nytelen sz\xE1m: ${i.divisor} t\xF6bbsz\xF6r\xF6s\xE9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${i.keys.length>1?"s":""}: ${Q(i.keys,", ")}`;case"invalid_key":return`\xC9rv\xE9nytelen kulcs ${i.origin}`;case"invalid_union":return"\xC9rv\xE9nytelen bemenet";case"invalid_element":return`\xC9rv\xE9nytelen \xE9rt\xE9k: ${i.origin}`;default:return"\xC9rv\xE9nytelen bemenet"}}};function $ee(){return{localeError:bDe()}}var wDe=()=>{let e={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"};return i=>{switch(i.code){case"invalid_type":return`Input tidak valid: diharapkan ${i.expected}, diterima ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Input tidak valid: diharapkan ${_e(i.values[0])}`:`Pilihan tidak valid: diharapkan salah satu dari ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`Terlalu besar: diharapkan ${i.origin??"value"} memiliki ${o}${i.maximum.toString()} ${s.unit??"elemen"}`:`Terlalu besar: diharapkan ${i.origin??"value"} menjadi ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`Terlalu kecil: diharapkan ${i.origin} memiliki ${o}${i.minimum.toString()} ${s.unit}`:`Terlalu kecil: diharapkan ${i.origin} menjadi ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`String tidak valid: harus dimulai dengan "${o.prefix}"`:o.format==="ends_with"?`String tidak valid: harus berakhir dengan "${o.suffix}"`:o.format==="includes"?`String tidak valid: harus menyertakan "${o.includes}"`:o.format==="regex"?`String tidak valid: harus sesuai pola ${o.pattern}`:`${r[o.format]??i.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${i.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${i.keys.length>1?"s":""}: ${Q(i.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${i.origin}`;case"invalid_union":return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${i.origin}`;default:return"Input tidak valid"}}};function Lee(){return{localeError:wDe()}}var xDe=e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"n\xFAmer";case"object":{if(Array.isArray(e))return"fylki";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return t},CDe=()=>{let e={string:{unit:"stafi",verb:"a\xF0 hafa"},file:{unit:"b\xE6ti",verb:"a\xF0 hafa"},array:{unit:"hluti",verb:"a\xF0 hafa"},set:{unit:"hluti",verb:"a\xF0 hafa"}};function t(r){return e[r]??null}let n={regex:"gildi",email:"netfang",url:"vefsl\xF3\xF0",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og t\xEDmi",date:"ISO dagsetning",time:"ISO t\xEDmi",duration:"ISO t\xEDmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 t\xF6lugildi",jwt:"JWT",template_literal:"gildi"};return r=>{switch(r.code){case"invalid_type":return`Rangt gildi: \xDE\xFA sl\xF3st inn ${xDe(r.input)} \xFEar sem \xE1 a\xF0 vera ${r.expected}`;case"invalid_value":return r.values.length===1?`Rangt gildi: gert r\xE1\xF0 fyrir ${_e(r.values[0])}`:`\xD3gilt val: m\xE1 vera eitt af eftirfarandi ${Q(r.values,"|")}`;case"too_big":{let i=r.inclusive?"<=":"<",o=t(r.origin);return o?`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${r.origin??"gildi"} hafi ${i}${r.maximum.toString()} ${o.unit??"hluti"}`:`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${r.origin??"gildi"} s\xE9 ${i}${r.maximum.toString()}`}case"too_small":{let i=r.inclusive?">=":">",o=t(r.origin);return o?`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${r.origin} hafi ${i}${r.minimum.toString()} ${o.unit}`:`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${r.origin} s\xE9 ${i}${r.minimum.toString()}`}case"invalid_format":{let i=r;return i.format==="starts_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 byrja \xE1 "${i.prefix}"`:i.format==="ends_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 enda \xE1 "${i.suffix}"`:i.format==="includes"?`\xD3gildur strengur: ver\xF0ur a\xF0 innihalda "${i.includes}"`:i.format==="regex"?`\xD3gildur strengur: ver\xF0ur a\xF0 fylgja mynstri ${i.pattern}`:`Rangt ${n[i.format]??r.format}`}case"not_multiple_of":return`R\xF6ng tala: ver\xF0ur a\xF0 vera margfeldi af ${r.divisor}`;case"unrecognized_keys":return`\xD3\xFEekkt ${r.keys.length>1?"ir lyklar":"ur lykill"}: ${Q(r.keys,", ")}`;case"invalid_key":return`Rangur lykill \xED ${r.origin}`;case"invalid_union":return"Rangt gildi";case"invalid_element":return`Rangt gildi \xED ${r.origin}`;default:return"Rangt gildi"}}};function Fee(){return{localeError:CDe()}}var EDe=()=>{let e={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"numero";case"object":{if(Array.isArray(i))return"vettore";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"};return i=>{switch(i.code){case"invalid_type":return`Input non valido: atteso ${i.expected}, ricevuto ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Input non valido: atteso ${_e(i.values[0])}`:`Opzione non valida: atteso uno tra ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`Troppo grande: ${i.origin??"valore"} deve avere ${o}${i.maximum.toString()} ${s.unit??"elementi"}`:`Troppo grande: ${i.origin??"valore"} deve essere ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`Troppo piccolo: ${i.origin} deve avere ${o}${i.minimum.toString()} ${s.unit}`:`Troppo piccolo: ${i.origin} deve essere ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Stringa non valida: deve iniziare con "${o.prefix}"`:o.format==="ends_with"?`Stringa non valida: deve terminare con "${o.suffix}"`:o.format==="includes"?`Stringa non valida: deve includere "${o.includes}"`:o.format==="regex"?`Stringa non valida: deve corrispondere al pattern ${o.pattern}`:`Invalid ${r[o.format]??i.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${i.divisor}`;case"unrecognized_keys":return`Chiav${i.keys.length>1?"i":"e"} non riconosciut${i.keys.length>1?"e":"a"}: ${Q(i.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${i.origin}`;case"invalid_union":return"Input non valido";case"invalid_element":return`Valore non valido in ${i.origin}`;default:return"Input non valido"}}};function jee(){return{localeError:EDe()}}var IDe=()=>{let e={string:{unit:"\u6587\u5B57",verb:"\u3067\u3042\u308B"},file:{unit:"\u30D0\u30A4\u30C8",verb:"\u3067\u3042\u308B"},array:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"},set:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u6570\u5024";case"object":{if(Array.isArray(i))return"\u914D\u5217";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u5165\u529B\u5024",email:"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9",url:"URL",emoji:"\u7D75\u6587\u5B57",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u6642",date:"ISO\u65E5\u4ED8",time:"ISO\u6642\u523B",duration:"ISO\u671F\u9593",ipv4:"IPv4\u30A2\u30C9\u30EC\u30B9",ipv6:"IPv6\u30A2\u30C9\u30EC\u30B9",cidrv4:"IPv4\u7BC4\u56F2",cidrv6:"IPv6\u7BC4\u56F2",base64:"base64\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",base64url:"base64url\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",json_string:"JSON\u6587\u5B57\u5217",e164:"E.164\u756A\u53F7",jwt:"JWT",template_literal:"\u5165\u529B\u5024"};return i=>{switch(i.code){case"invalid_type":return`\u7121\u52B9\u306A\u5165\u529B: ${i.expected}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F\u304C\u3001${n(i.input)}\u304C\u5165\u529B\u3055\u308C\u307E\u3057\u305F`;case"invalid_value":return i.values.length===1?`\u7121\u52B9\u306A\u5165\u529B: ${_e(i.values[0])}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F`:`\u7121\u52B9\u306A\u9078\u629E: ${Q(i.values,"\u3001")}\u306E\u3044\u305A\u308C\u304B\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"too_big":{let o=i.inclusive?"\u4EE5\u4E0B\u3067\u3042\u308B":"\u3088\u308A\u5C0F\u3055\u3044",s=t(i.origin);return s?`\u5927\u304D\u3059\u304E\u308B\u5024: ${i.origin??"\u5024"}\u306F${i.maximum.toString()}${s.unit??"\u8981\u7D20"}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5927\u304D\u3059\u304E\u308B\u5024: ${i.origin??"\u5024"}\u306F${i.maximum.toString()}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"too_small":{let o=i.inclusive?"\u4EE5\u4E0A\u3067\u3042\u308B":"\u3088\u308A\u5927\u304D\u3044",s=t(i.origin);return s?`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${i.origin}\u306F${i.minimum.toString()}${s.unit}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${i.origin}\u306F${i.minimum.toString()}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${o.prefix}"\u3067\u59CB\u307E\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:o.format==="ends_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${o.suffix}"\u3067\u7D42\u308F\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:o.format==="includes"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${o.includes}"\u3092\u542B\u3080\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:o.format==="regex"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: \u30D1\u30BF\u30FC\u30F3${o.pattern}\u306B\u4E00\u81F4\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u7121\u52B9\u306A${r[o.format]??i.format}`}case"not_multiple_of":return`\u7121\u52B9\u306A\u6570\u5024: ${i.divisor}\u306E\u500D\u6570\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"unrecognized_keys":return`\u8A8D\u8B58\u3055\u308C\u3066\u3044\u306A\u3044\u30AD\u30FC${i.keys.length>1?"\u7FA4":""}: ${Q(i.keys,"\u3001")}`;case"invalid_key":return`${i.origin}\u5185\u306E\u7121\u52B9\u306A\u30AD\u30FC`;case"invalid_union":return"\u7121\u52B9\u306A\u5165\u529B";case"invalid_element":return`${i.origin}\u5185\u306E\u7121\u52B9\u306A\u5024`;default:return"\u7121\u52B9\u306A\u5165\u529B"}}};function zee(){return{localeError:IDe()}}var SDe=e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"\u10E0\u10D8\u10EA\u10EE\u10D5\u10D8";case"object":{if(Array.isArray(e))return"\u10DB\u10D0\u10E1\u10D8\u10D5\u10D8";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return{string:"\u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",boolean:"\u10D1\u10E3\u10DA\u10D4\u10D0\u10DC\u10D8",undefined:"undefined",bigint:"bigint",symbol:"symbol",function:"\u10E4\u10E3\u10DC\u10E5\u10EA\u10D8\u10D0"}[t]??t},kDe=()=>{let e={string:{unit:"\u10E1\u10D8\u10DB\u10D1\u10DD\u10DA\u10DD",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},file:{unit:"\u10D1\u10D0\u10D8\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},array:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},set:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"}};function t(r){return e[r]??null}let n={regex:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0",email:"\u10D4\u10DA-\u10E4\u10DD\u10E1\u10E2\u10D8\u10E1 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",url:"URL",emoji:"\u10D4\u10DB\u10DD\u10EF\u10D8",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8-\u10D3\u10E0\u10DD",date:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8",time:"\u10D3\u10E0\u10DD",duration:"\u10EE\u10D0\u10DC\u10D2\u10E0\u10EB\u10DA\u10D8\u10D5\u10DD\u10D1\u10D0",ipv4:"IPv4 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",ipv6:"IPv6 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",cidrv4:"IPv4 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",cidrv6:"IPv6 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",base64:"base64-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",base64url:"base64url-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",json_string:"JSON \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",e164:"E.164 \u10DC\u10DD\u10DB\u10D4\u10E0\u10D8",jwt:"JWT",template_literal:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"};return r=>{switch(r.code){case"invalid_type":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${r.expected}, \u10DB\u10D8\u10E6\u10D4\u10D1\u10E3\u10DA\u10D8 ${SDe(r.input)}`;case"invalid_value":return r.values.length===1?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${_e(r.values[0])}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D5\u10D0\u10E0\u10D8\u10D0\u10DC\u10E2\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8\u10D0 \u10D4\u10E0\u10D7-\u10D4\u10E0\u10D7\u10D8 ${Q(r.values,"|")}-\u10D3\u10D0\u10DC`;case"too_big":{let i=r.inclusive?"<=":"<",o=t(r.origin);return o?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${r.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} ${o.verb} ${i}${r.maximum.toString()} ${o.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${r.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} \u10D8\u10E7\u10DD\u10E1 ${i}${r.maximum.toString()}`}case"too_small":{let i=r.inclusive?">=":">",o=t(r.origin);return o?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${r.origin} ${o.verb} ${i}${r.minimum.toString()} ${o.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${r.origin} \u10D8\u10E7\u10DD\u10E1 ${i}${r.minimum.toString()}`}case"invalid_format":{let i=r;return i.format==="starts_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10EC\u10E7\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${i.prefix}"-\u10D8\u10D7`:i.format==="ends_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10DB\u10D7\u10D0\u10D5\u10E0\u10D3\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${i.suffix}"-\u10D8\u10D7`:i.format==="includes"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1 "${i.includes}"-\u10E1`:i.format==="regex"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D4\u10E1\u10D0\u10D1\u10D0\u10DB\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 \u10E8\u10D0\u10D1\u10DA\u10DD\u10DC\u10E1 ${i.pattern}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 ${n[i.format]??r.format}`}case"not_multiple_of":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E0\u10D8\u10EA\u10EE\u10D5\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10E7\u10DD\u10E1 ${r.divisor}-\u10D8\u10E1 \u10EF\u10D4\u10E0\u10D0\u10D3\u10D8`;case"unrecognized_keys":return`\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1${r.keys.length>1?"\u10D4\u10D1\u10D8":"\u10D8"}: ${Q(r.keys,", ")}`;case"invalid_key":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1\u10D8 ${r.origin}-\u10E8\u10D8`;case"invalid_union":return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0";case"invalid_element":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0 ${r.origin}-\u10E8\u10D8`;default:return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"}}};function Bee(){return{localeError:kDe()}}var TDe=()=>{let e={string:{unit:"\u178F\u17BD\u17A2\u1780\u17D2\u179F\u179A",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},file:{unit:"\u1794\u17C3",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},array:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},set:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"\u1798\u17B7\u1793\u1798\u17C2\u1793\u1787\u17B6\u179B\u17C1\u1781 (NaN)":"\u179B\u17C1\u1781";case"object":{if(Array.isArray(i))return"\u17A2\u17B6\u179A\u17C1 (Array)";if(i===null)return"\u1782\u17D2\u1798\u17B6\u1793\u178F\u1798\u17D2\u179B\u17C3 (null)";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B",email:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793\u17A2\u17CA\u17B8\u1798\u17C2\u179B",url:"URL",emoji:"\u179F\u1789\u17D2\u1789\u17B6\u17A2\u17B6\u179A\u1798\u17D2\u1798\u178E\u17CD",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 \u1793\u17B7\u1784\u1798\u17C9\u17C4\u1784 ISO",date:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 ISO",time:"\u1798\u17C9\u17C4\u1784 ISO",duration:"\u179A\u1799\u17C8\u1796\u17C1\u179B ISO",ipv4:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",ipv6:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",cidrv4:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",cidrv6:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",base64:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64",base64url:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64url",json_string:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A JSON",e164:"\u179B\u17C1\u1781 E.164",jwt:"JWT",template_literal:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B"};return i=>{switch(i.code){case"invalid_type":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${i.expected} \u1794\u17C9\u17BB\u1793\u17D2\u178F\u17C2\u1791\u1791\u17BD\u179B\u1794\u17B6\u1793 ${n(i.input)}`;case"invalid_value":return i.values.length===1?`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${_e(i.values[0])}`:`\u1787\u1798\u17D2\u179A\u17BE\u179F\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1787\u17B6\u1798\u17BD\u1799\u1780\u17D2\u1793\u17BB\u1784\u1785\u17C6\u178E\u17C4\u1798 ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${i.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${o} ${i.maximum.toString()} ${s.unit??"\u1792\u17B6\u178F\u17BB"}`:`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${i.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${o} ${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${i.origin} ${o} ${i.minimum.toString()} ${s.unit}`:`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${i.origin} ${o} ${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1785\u17B6\u1794\u17CB\u1795\u17D2\u178F\u17BE\u1798\u178A\u17C4\u1799 "${o.prefix}"`:o.format==="ends_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1794\u1789\u17D2\u1785\u1794\u17CB\u178A\u17C4\u1799 "${o.suffix}"`:o.format==="includes"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1798\u17B6\u1793 "${o.includes}"`:o.format==="regex"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1795\u17D2\u1782\u17BC\u1795\u17D2\u1782\u1784\u1793\u17B9\u1784\u1791\u1798\u17D2\u179A\u1784\u17CB\u178A\u17C2\u179B\u1794\u17B6\u1793\u1780\u17C6\u178E\u178F\u17CB ${o.pattern}`:`\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 ${r[o.format]??i.format}`}case"not_multiple_of":return`\u179B\u17C1\u1781\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1787\u17B6\u1796\u17A0\u17BB\u1782\u17BB\u178E\u1793\u17C3 ${i.divisor}`;case"unrecognized_keys":return`\u179A\u1780\u1783\u17BE\u1789\u179F\u17C4\u1798\u17B7\u1793\u179F\u17D2\u1782\u17B6\u179B\u17CB\u17D6 ${Q(i.keys,", ")}`;case"invalid_key":return`\u179F\u17C4\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${i.origin}`;case"invalid_union":return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C";case"invalid_element":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${i.origin}`;default:return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C"}}};function zO(){return{localeError:TDe()}}function Uee(){return zO()}var ADe=()=>{let e={string:{unit:"\uBB38\uC790",verb:"to have"},file:{unit:"\uBC14\uC774\uD2B8",verb:"to have"},array:{unit:"\uAC1C",verb:"to have"},set:{unit:"\uAC1C",verb:"to have"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\uC785\uB825",email:"\uC774\uBA54\uC77C \uC8FC\uC18C",url:"URL",emoji:"\uC774\uBAA8\uC9C0",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \uB0A0\uC9DC\uC2DC\uAC04",date:"ISO \uB0A0\uC9DC",time:"ISO \uC2DC\uAC04",duration:"ISO \uAE30\uAC04",ipv4:"IPv4 \uC8FC\uC18C",ipv6:"IPv6 \uC8FC\uC18C",cidrv4:"IPv4 \uBC94\uC704",cidrv6:"IPv6 \uBC94\uC704",base64:"base64 \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",base64url:"base64url \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",json_string:"JSON \uBB38\uC790\uC5F4",e164:"E.164 \uBC88\uD638",jwt:"JWT",template_literal:"\uC785\uB825"};return i=>{switch(i.code){case"invalid_type":return`\uC798\uBABB\uB41C \uC785\uB825: \uC608\uC0C1 \uD0C0\uC785\uC740 ${i.expected}, \uBC1B\uC740 \uD0C0\uC785\uC740 ${n(i.input)}\uC785\uB2C8\uB2E4`;case"invalid_value":return i.values.length===1?`\uC798\uBABB\uB41C \uC785\uB825: \uAC12\uC740 ${_e(i.values[0])} \uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C \uC635\uC158: ${Q(i.values,"\uB610\uB294 ")} \uC911 \uD558\uB098\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"too_big":{let o=i.inclusive?"\uC774\uD558":"\uBBF8\uB9CC",s=o==="\uBBF8\uB9CC"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",a=t(i.origin),c=a?.unit??"\uC694\uC18C";return a?`${i.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${i.maximum.toString()}${c} ${o}${s}`:`${i.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${i.maximum.toString()} ${o}${s}`}case"too_small":{let o=i.inclusive?"\uC774\uC0C1":"\uCD08\uACFC",s=o==="\uC774\uC0C1"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",a=t(i.origin),c=a?.unit??"\uC694\uC18C";return a?`${i.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${i.minimum.toString()}${c} ${o}${s}`:`${i.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${i.minimum.toString()} ${o}${s}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${o.prefix}"(\uC73C)\uB85C \uC2DC\uC791\uD574\uC57C \uD569\uB2C8\uB2E4`:o.format==="ends_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${o.suffix}"(\uC73C)\uB85C \uB05D\uB098\uC57C \uD569\uB2C8\uB2E4`:o.format==="includes"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${o.includes}"\uC744(\uB97C) \uD3EC\uD568\uD574\uC57C \uD569\uB2C8\uB2E4`:o.format==="regex"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \uC815\uADDC\uC2DD ${o.pattern} \uD328\uD134\uACFC \uC77C\uCE58\uD574\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C ${r[o.format]??i.format}`}case"not_multiple_of":return`\uC798\uBABB\uB41C \uC22B\uC790: ${i.divisor}\uC758 \uBC30\uC218\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"unrecognized_keys":return`\uC778\uC2DD\uD560 \uC218 \uC5C6\uB294 \uD0A4: ${Q(i.keys,", ")}`;case"invalid_key":return`\uC798\uBABB\uB41C \uD0A4: ${i.origin}`;case"invalid_union":return"\uC798\uBABB\uB41C \uC785\uB825";case"invalid_element":return`\uC798\uBABB\uB41C \uAC12: ${i.origin}`;default:return"\uC798\uBABB\uB41C \uC785\uB825"}}};function Vee(){return{localeError:ADe()}}var ODe=e=>tx(typeof e,e),tx=(e,t=void 0)=>{switch(e){case"number":return Number.isNaN(t)?"NaN":"skai\u010Dius";case"bigint":return"sveikasis skai\u010Dius";case"string":return"eilut\u0117";case"boolean":return"login\u0117 reik\u0161m\u0117";case"undefined":case"void":return"neapibr\u0117\u017Eta reik\u0161m\u0117";case"function":return"funkcija";case"symbol":return"simbolis";case"object":return t===void 0?"ne\u017Einomas objektas":t===null?"nulin\u0117 reik\u0161m\u0117":Array.isArray(t)?"masyvas":Object.getPrototypeOf(t)!==Object.prototype&&t.constructor?t.constructor.name:"objektas";case"null":return"nulin\u0117 reik\u0161m\u0117"}return e},ex=e=>e.charAt(0).toUpperCase()+e.slice(1);function Hee(e){let t=Math.abs(e),n=t%10,r=t%100;return r>=11&&r<=19||n===0?"many":n===1?"one":"few"}var MDe=()=>{let e={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne ilgesn\u0117 kaip",notInclusive:"turi b\u016Bti trumpesn\u0117 kaip"},bigger:{inclusive:"turi b\u016Bti ne trumpesn\u0117 kaip",notInclusive:"turi b\u016Bti ilgesn\u0117 kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne didesnis kaip",notInclusive:"turi b\u016Bti ma\u017Eesnis kaip"},bigger:{inclusive:"turi b\u016Bti ne ma\u017Eesnis kaip",notInclusive:"turi b\u016Bti didesnis kaip"}}},array:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}},set:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}}};function t(r,i,o,s){let a=e[r]??null;return a===null?a:{unit:a.unit[i],verb:a.verb[s][o?"inclusive":"notInclusive"]}}let n={regex:"\u012Fvestis",email:"el. pa\u0161to adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm\u0117",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 u\u017Ekoduota eilut\u0117",base64url:"base64url u\u017Ekoduota eilut\u0117",json_string:"JSON eilut\u0117",e164:"E.164 numeris",jwt:"JWT",template_literal:"\u012Fvestis"};return r=>{switch(r.code){case"invalid_type":return`Gautas tipas ${ODe(r.input)}, o tik\u0117tasi - ${tx(r.expected)}`;case"invalid_value":return r.values.length===1?`Privalo b\u016Bti ${_e(r.values[0])}`:`Privalo b\u016Bti vienas i\u0161 ${Q(r.values,"|")} pasirinkim\u0173`;case"too_big":{let i=tx(r.origin),o=t(r.origin,Hee(Number(r.maximum)),r.inclusive??!1,"smaller");if(o?.verb)return`${ex(i??r.origin??"reik\u0161m\u0117")} ${o.verb} ${r.maximum.toString()} ${o.unit??"element\u0173"}`;let s=r.inclusive?"ne didesnis kaip":"ma\u017Eesnis kaip";return`${ex(i??r.origin??"reik\u0161m\u0117")} turi b\u016Bti ${s} ${r.maximum.toString()} ${o?.unit}`}case"too_small":{let i=tx(r.origin),o=t(r.origin,Hee(Number(r.minimum)),r.inclusive??!1,"bigger");if(o?.verb)return`${ex(i??r.origin??"reik\u0161m\u0117")} ${o.verb} ${r.minimum.toString()} ${o.unit??"element\u0173"}`;let s=r.inclusive?"ne ma\u017Eesnis kaip":"didesnis kaip";return`${ex(i??r.origin??"reik\u0161m\u0117")} turi b\u016Bti ${s} ${r.minimum.toString()} ${o?.unit}`}case"invalid_format":{let i=r;return i.format==="starts_with"?`Eilut\u0117 privalo prasid\u0117ti "${i.prefix}"`:i.format==="ends_with"?`Eilut\u0117 privalo pasibaigti "${i.suffix}"`:i.format==="includes"?`Eilut\u0117 privalo \u012Ftraukti "${i.includes}"`:i.format==="regex"?`Eilut\u0117 privalo atitikti ${i.pattern}`:`Neteisingas ${n[i.format]??r.format}`}case"not_multiple_of":return`Skai\u010Dius privalo b\u016Bti ${r.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpa\u017Eint${r.keys.length>1?"i":"as"} rakt${r.keys.length>1?"ai":"as"}: ${Q(r.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":return"Klaidinga \u012Fvestis";case"invalid_element":{let i=tx(r.origin);return`${ex(i??r.origin??"reik\u0161m\u0117")} turi klaiding\u0105 \u012Fvest\u012F`}default:return"Klaidinga \u012Fvestis"}}};function Zee(){return{localeError:MDe()}}var DDe=()=>{let e={string:{unit:"\u0437\u043D\u0430\u0446\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},file:{unit:"\u0431\u0430\u0458\u0442\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},array:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},set:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0431\u0440\u043E\u0458";case"object":{if(Array.isArray(i))return"\u043D\u0438\u0437\u0430";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u0432\u043D\u0435\u0441",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u043D\u0430 \u0435-\u043F\u043E\u0448\u0442\u0430",url:"URL",emoji:"\u0435\u043C\u043E\u045F\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0443\u043C \u0438 \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0443\u043C",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u0432\u0440\u0435\u043C\u0435\u0442\u0440\u0430\u0435\u045A\u0435",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441\u0430",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441\u0430",cidrv4:"IPv4 \u043E\u043F\u0441\u0435\u0433",cidrv6:"IPv6 \u043E\u043F\u0441\u0435\u0433",base64:"base64-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",base64url:"base64url-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",json_string:"JSON \u043D\u0438\u0437\u0430",e164:"E.164 \u0431\u0440\u043E\u0458",jwt:"JWT",template_literal:"\u0432\u043D\u0435\u0441"};return i=>{switch(i.code){case"invalid_type":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${i.expected}, \u043F\u0440\u0438\u043C\u0435\u043D\u043E ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Invalid input: expected ${_e(i.values[0])}`:`\u0413\u0440\u0435\u0448\u0430\u043D\u0430 \u043E\u043F\u0446\u0438\u0458\u0430: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 \u0435\u0434\u043D\u0430 ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${i.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0438\u043C\u0430 ${o}${i.maximum.toString()} ${s.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438"}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${i.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0431\u0438\u0434\u0435 ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${i.origin} \u0434\u0430 \u0438\u043C\u0430 ${o}${i.minimum.toString()} ${s.unit}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${i.origin} \u0434\u0430 \u0431\u0438\u0434\u0435 ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u043D\u0443\u0432\u0430 \u0441\u043E "${o.prefix}"`:o.format==="ends_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u0432\u0440\u0448\u0443\u0432\u0430 \u0441\u043E "${o.suffix}"`:o.format==="includes"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0432\u043A\u043B\u0443\u0447\u0443\u0432\u0430 "${o.includes}"`:o.format==="regex"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u043E\u0434\u0433\u043E\u0430\u0440\u0430 \u043D\u0430 \u043F\u0430\u0442\u0435\u0440\u043D\u043E\u0442 ${o.pattern}`:`Invalid ${r[o.format]??i.format}`}case"not_multiple_of":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0431\u0440\u043E\u0458: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0431\u0438\u0434\u0435 \u0434\u0435\u043B\u0438\u0432 \u0441\u043E ${i.divisor}`;case"unrecognized_keys":return`${i.keys.length>1?"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D\u0438 \u043A\u043B\u0443\u0447\u0435\u0432\u0438":"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D \u043A\u043B\u0443\u0447"}: ${Q(i.keys,", ")}`;case"invalid_key":return`\u0413\u0440\u0435\u0448\u0435\u043D \u043A\u043B\u0443\u0447 \u0432\u043E ${i.origin}`;case"invalid_union":return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441";case"invalid_element":return`\u0413\u0440\u0435\u0448\u043D\u0430 \u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442 \u0432\u043E ${i.origin}`;default:return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441"}}};function qee(){return{localeError:DDe()}}var PDe=()=>{let e={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"nombor";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"};return i=>{switch(i.code){case"invalid_type":return`Input tidak sah: dijangka ${i.expected}, diterima ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Input tidak sah: dijangka ${_e(i.values[0])}`:`Pilihan tidak sah: dijangka salah satu daripada ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`Terlalu besar: dijangka ${i.origin??"nilai"} ${s.verb} ${o}${i.maximum.toString()} ${s.unit??"elemen"}`:`Terlalu besar: dijangka ${i.origin??"nilai"} adalah ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`Terlalu kecil: dijangka ${i.origin} ${s.verb} ${o}${i.minimum.toString()} ${s.unit}`:`Terlalu kecil: dijangka ${i.origin} adalah ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`String tidak sah: mesti bermula dengan "${o.prefix}"`:o.format==="ends_with"?`String tidak sah: mesti berakhir dengan "${o.suffix}"`:o.format==="includes"?`String tidak sah: mesti mengandungi "${o.includes}"`:o.format==="regex"?`String tidak sah: mesti sepadan dengan corak ${o.pattern}`:`${r[o.format]??i.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${i.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${Q(i.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${i.origin}`;case"invalid_union":return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${i.origin}`;default:return"Input tidak sah"}}};function Gee(){return{localeError:PDe()}}var RDe=()=>{let e={string:{unit:"tekens",verb:"te hebben"},file:{unit:"bytes",verb:"te hebben"},array:{unit:"elementen",verb:"te hebben"},set:{unit:"elementen",verb:"te hebben"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"getal";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"};return i=>{switch(i.code){case"invalid_type":return`Ongeldige invoer: verwacht ${i.expected}, ontving ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Ongeldige invoer: verwacht ${_e(i.values[0])}`:`Ongeldige optie: verwacht \xE9\xE9n van ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`Te groot: verwacht dat ${i.origin??"waarde"} ${s.verb} ${o}${i.maximum.toString()} ${s.unit??"elementen"}`:`Te groot: verwacht dat ${i.origin??"waarde"} ${o}${i.maximum.toString()} is`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`Te klein: verwacht dat ${i.origin} ${s.verb} ${o}${i.minimum.toString()} ${s.unit}`:`Te klein: verwacht dat ${i.origin} ${o}${i.minimum.toString()} is`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Ongeldige tekst: moet met "${o.prefix}" beginnen`:o.format==="ends_with"?`Ongeldige tekst: moet op "${o.suffix}" eindigen`:o.format==="includes"?`Ongeldige tekst: moet "${o.includes}" bevatten`:o.format==="regex"?`Ongeldige tekst: moet overeenkomen met patroon ${o.pattern}`:`Ongeldig: ${r[o.format]??i.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${i.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${i.keys.length>1?"s":""}: ${Q(i.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${i.origin}`;case"invalid_union":return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${i.origin}`;default:return"Ongeldige invoer"}}};function Wee(){return{localeError:RDe()}}var NDe=()=>{let e={string:{unit:"tegn",verb:"\xE5 ha"},file:{unit:"bytes",verb:"\xE5 ha"},array:{unit:"elementer",verb:"\xE5 inneholde"},set:{unit:"elementer",verb:"\xE5 inneholde"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"tall";case"object":{if(Array.isArray(i))return"liste";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return i=>{switch(i.code){case"invalid_type":return`Ugyldig input: forventet ${i.expected}, fikk ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Ugyldig verdi: forventet ${_e(i.values[0])}`:`Ugyldig valg: forventet en av ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`For stor(t): forventet ${i.origin??"value"} til \xE5 ha ${o}${i.maximum.toString()} ${s.unit??"elementer"}`:`For stor(t): forventet ${i.origin??"value"} til \xE5 ha ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`For lite(n): forventet ${i.origin} til \xE5 ha ${o}${i.minimum.toString()} ${s.unit}`:`For lite(n): forventet ${i.origin} til \xE5 ha ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Ugyldig streng: m\xE5 starte med "${o.prefix}"`:o.format==="ends_with"?`Ugyldig streng: m\xE5 ende med "${o.suffix}"`:o.format==="includes"?`Ugyldig streng: m\xE5 inneholde "${o.includes}"`:o.format==="regex"?`Ugyldig streng: m\xE5 matche m\xF8nsteret ${o.pattern}`:`Ugyldig ${r[o.format]??i.format}`}case"not_multiple_of":return`Ugyldig tall: m\xE5 v\xE6re et multiplum av ${i.divisor}`;case"unrecognized_keys":return`${i.keys.length>1?"Ukjente n\xF8kler":"Ukjent n\xF8kkel"}: ${Q(i.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8kkel i ${i.origin}`;case"invalid_union":return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${i.origin}`;default:return"Ugyldig input"}}};function Kee(){return{localeError:NDe()}}var $De=()=>{let e={string:{unit:"harf",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"unsur",verb:"olmal\u0131d\u0131r"},set:{unit:"unsur",verb:"olmal\u0131d\u0131r"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"numara";case"object":{if(Array.isArray(i))return"saf";if(i===null)return"gayb";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"giren",email:"epostag\xE2h",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO heng\xE2m\u0131",date:"ISO tarihi",time:"ISO zaman\u0131",duration:"ISO m\xFCddeti",ipv4:"IPv4 ni\u015F\xE2n\u0131",ipv6:"IPv6 ni\u015F\xE2n\u0131",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-\u015Fifreli metin",base64url:"base64url-\u015Fifreli metin",json_string:"JSON metin",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"giren"};return i=>{switch(i.code){case"invalid_type":return`F\xE2sit giren: umulan ${i.expected}, al\u0131nan ${n(i.input)}`;case"invalid_value":return i.values.length===1?`F\xE2sit giren: umulan ${_e(i.values[0])}`:`F\xE2sit tercih: m\xFBteberler ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`Fazla b\xFCy\xFCk: ${i.origin??"value"}, ${o}${i.maximum.toString()} ${s.unit??"elements"} sahip olmal\u0131yd\u0131.`:`Fazla b\xFCy\xFCk: ${i.origin??"value"}, ${o}${i.maximum.toString()} olmal\u0131yd\u0131.`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`Fazla k\xFC\xE7\xFCk: ${i.origin}, ${o}${i.minimum.toString()} ${s.unit} sahip olmal\u0131yd\u0131.`:`Fazla k\xFC\xE7\xFCk: ${i.origin}, ${o}${i.minimum.toString()} olmal\u0131yd\u0131.`}case"invalid_format":{let o=i;return o.format==="starts_with"?`F\xE2sit metin: "${o.prefix}" ile ba\u015Flamal\u0131.`:o.format==="ends_with"?`F\xE2sit metin: "${o.suffix}" ile bitmeli.`:o.format==="includes"?`F\xE2sit metin: "${o.includes}" ihtiv\xE2 etmeli.`:o.format==="regex"?`F\xE2sit metin: ${o.pattern} nak\u015F\u0131na uymal\u0131.`:`F\xE2sit ${r[o.format]??i.format}`}case"not_multiple_of":return`F\xE2sit say\u0131: ${i.divisor} kat\u0131 olmal\u0131yd\u0131.`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar ${i.keys.length>1?"s":""}: ${Q(i.keys,", ")}`;case"invalid_key":return`${i.origin} i\xE7in tan\u0131nmayan anahtar var.`;case"invalid_union":return"Giren tan\u0131namad\u0131.";case"invalid_element":return`${i.origin} i\xE7in tan\u0131nmayan k\u0131ymet var.`;default:return"K\u0131ymet tan\u0131namad\u0131."}}};function Jee(){return{localeError:$De()}}var LDe=()=>{let e={string:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},file:{unit:"\u0628\u0627\u06CC\u067C\u0633",verb:"\u0648\u0644\u0631\u064A"},array:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},set:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(i))return"\u0627\u0631\u06D0";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u0648\u0631\u0648\u062F\u064A",email:"\u0628\u0631\u06CC\u069A\u0646\u0627\u0644\u06CC\u06A9",url:"\u06CC\u0648 \u0622\u0631 \u0627\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0646\u06CC\u067C\u0647 \u0627\u0648 \u0648\u062E\u062A",date:"\u0646\u06D0\u067C\u0647",time:"\u0648\u062E\u062A",duration:"\u0645\u0648\u062F\u0647",ipv4:"\u062F IPv4 \u067E\u062A\u0647",ipv6:"\u062F IPv6 \u067E\u062A\u0647",cidrv4:"\u062F IPv4 \u0633\u0627\u062D\u0647",cidrv6:"\u062F IPv6 \u0633\u0627\u062D\u0647",base64:"base64-encoded \u0645\u062A\u0646",base64url:"base64url-encoded \u0645\u062A\u0646",json_string:"JSON \u0645\u062A\u0646",e164:"\u062F E.164 \u0634\u0645\u06D0\u0631\u0647",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u064A"};return i=>{switch(i.code){case"invalid_type":return`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${i.expected} \u0648\u0627\u06CC, \u0645\u06AB\u0631 ${n(i.input)} \u062A\u0631\u0644\u0627\u0633\u0647 \u0634\u0648`;case"invalid_value":return i.values.length===1?`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${_e(i.values[0])} \u0648\u0627\u06CC`:`\u0646\u0627\u0633\u0645 \u0627\u0646\u062A\u062E\u0627\u0628: \u0628\u0627\u06CC\u062F \u06CC\u0648 \u0644\u0647 ${Q(i.values,"|")} \u0685\u062E\u0647 \u0648\u0627\u06CC`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${i.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${o}${i.maximum.toString()} ${s.unit??"\u0639\u0646\u0635\u0631\u0648\u0646\u0647"} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${i.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${o}${i.maximum.toString()} \u0648\u064A`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${i.origin} \u0628\u0627\u06CC\u062F ${o}${i.minimum.toString()} ${s.unit} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${i.origin} \u0628\u0627\u06CC\u062F ${o}${i.minimum.toString()} \u0648\u064A`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${o.prefix}" \u0633\u0631\u0647 \u067E\u06CC\u0644 \u0634\u064A`:o.format==="ends_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${o.suffix}" \u0633\u0631\u0647 \u067E\u0627\u06CC \u062A\u0647 \u0648\u0631\u0633\u064A\u0696\u064A`:o.format==="includes"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F "${o.includes}" \u0648\u0644\u0631\u064A`:o.format==="regex"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F ${o.pattern} \u0633\u0631\u0647 \u0645\u0637\u0627\u0628\u0642\u062A \u0648\u0644\u0631\u064A`:`${r[o.format]??i.format} \u0646\u0627\u0633\u0645 \u062F\u06CC`}case"not_multiple_of":return`\u0646\u0627\u0633\u0645 \u0639\u062F\u062F: \u0628\u0627\u06CC\u062F \u062F ${i.divisor} \u0645\u0636\u0631\u0628 \u0648\u064A`;case"unrecognized_keys":return`\u0646\u0627\u0633\u0645 ${i.keys.length>1?"\u06A9\u0644\u06CC\u0689\u0648\u0646\u0647":"\u06A9\u0644\u06CC\u0689"}: ${Q(i.keys,", ")}`;case"invalid_key":return`\u0646\u0627\u0633\u0645 \u06A9\u0644\u06CC\u0689 \u067E\u0647 ${i.origin} \u06A9\u06D0`;case"invalid_union":return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A";case"invalid_element":return`\u0646\u0627\u0633\u0645 \u0639\u0646\u0635\u0631 \u067E\u0647 ${i.origin} \u06A9\u06D0`;default:return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A"}}};function Yee(){return{localeError:LDe()}}var FDe=()=>{let e={string:{unit:"znak\xF3w",verb:"mie\u0107"},file:{unit:"bajt\xF3w",verb:"mie\u0107"},array:{unit:"element\xF3w",verb:"mie\u0107"},set:{unit:"element\xF3w",verb:"mie\u0107"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"liczba";case"object":{if(Array.isArray(i))return"tablica";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"wyra\u017Cenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ci\u0105g znak\xF3w zakodowany w formacie base64",base64url:"ci\u0105g znak\xF3w zakodowany w formacie base64url",json_string:"ci\u0105g znak\xF3w w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wej\u015Bcie"};return i=>{switch(i.code){case"invalid_type":return`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${i.expected}, otrzymano ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${_e(i.values[0])}`:`Nieprawid\u0142owa opcja: oczekiwano jednej z warto\u015Bci ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`Za du\u017Ca warto\u015B\u0107: oczekiwano, \u017Ce ${i.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${o}${i.maximum.toString()} ${s.unit??"element\xF3w"}`:`Zbyt du\u017C(y/a/e): oczekiwano, \u017Ce ${i.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`Za ma\u0142a warto\u015B\u0107: oczekiwano, \u017Ce ${i.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${o}${i.minimum.toString()} ${s.unit??"element\xF3w"}`:`Zbyt ma\u0142(y/a/e): oczekiwano, \u017Ce ${i.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zaczyna\u0107 si\u0119 od "${o.prefix}"`:o.format==="ends_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi ko\u0144czy\u0107 si\u0119 na "${o.suffix}"`:o.format==="includes"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zawiera\u0107 "${o.includes}"`:o.format==="regex"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi odpowiada\u0107 wzorcowi ${o.pattern}`:`Nieprawid\u0142ow(y/a/e) ${r[o.format]??i.format}`}case"not_multiple_of":return`Nieprawid\u0142owa liczba: musi by\u0107 wielokrotno\u015Bci\u0105 ${i.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${i.keys.length>1?"s":""}: ${Q(i.keys,", ")}`;case"invalid_key":return`Nieprawid\u0142owy klucz w ${i.origin}`;case"invalid_union":return"Nieprawid\u0142owe dane wej\u015Bciowe";case"invalid_element":return`Nieprawid\u0142owa warto\u015B\u0107 w ${i.origin}`;default:return"Nieprawid\u0142owe dane wej\u015Bciowe"}}};function Qee(){return{localeError:FDe()}}var jDe=()=>{let e={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"n\xFAmero";case"object":{if(Array.isArray(i))return"array";if(i===null)return"nulo";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"padr\xE3o",email:"endere\xE7o de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"dura\xE7\xE3o ISO",ipv4:"endere\xE7o IPv4",ipv6:"endere\xE7o IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return i=>{switch(i.code){case"invalid_type":return`Tipo inv\xE1lido: esperado ${i.expected}, recebido ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Entrada inv\xE1lida: esperado ${_e(i.values[0])}`:`Op\xE7\xE3o inv\xE1lida: esperada uma das ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`Muito grande: esperado que ${i.origin??"valor"} tivesse ${o}${i.maximum.toString()} ${s.unit??"elementos"}`:`Muito grande: esperado que ${i.origin??"valor"} fosse ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`Muito pequeno: esperado que ${i.origin} tivesse ${o}${i.minimum.toString()} ${s.unit}`:`Muito pequeno: esperado que ${i.origin} fosse ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Texto inv\xE1lido: deve come\xE7ar com "${o.prefix}"`:o.format==="ends_with"?`Texto inv\xE1lido: deve terminar com "${o.suffix}"`:o.format==="includes"?`Texto inv\xE1lido: deve incluir "${o.includes}"`:o.format==="regex"?`Texto inv\xE1lido: deve corresponder ao padr\xE3o ${o.pattern}`:`${r[o.format]??i.format} inv\xE1lido`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: deve ser m\xFAltiplo de ${i.divisor}`;case"unrecognized_keys":return`Chave${i.keys.length>1?"s":""} desconhecida${i.keys.length>1?"s":""}: ${Q(i.keys,", ")}`;case"invalid_key":return`Chave inv\xE1lida em ${i.origin}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido em ${i.origin}`;default:return"Campo inv\xE1lido"}}};function Xee(){return{localeError:jDe()}}function ete(e,t,n,r){let i=Math.abs(e),o=i%10,s=i%100;return s>=11&&s<=19?r:o===1?t:o>=2&&o<=4?n:r}var zDe=()=>{let e={string:{unit:{one:"\u0441\u0438\u043C\u0432\u043E\u043B",few:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",many:"\u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u0430",many:"\u0431\u0430\u0439\u0442"},verb:"\u0438\u043C\u0435\u0442\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(i))return"\u043C\u0430\u0441\u0441\u0438\u0432";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u0432\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u044F",duration:"ISO \u0434\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64",base64url:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64url",json_string:"JSON \u0441\u0442\u0440\u043E\u043A\u0430",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0432\u043E\u0434"};return i=>{switch(i.code){case"invalid_type":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${i.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ${n(i.input)}`;case"invalid_value":return i.values.length===1?`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${_e(i.values[0])}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0434\u043D\u043E \u0438\u0437 ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);if(s){let a=Number(i.maximum),c=ete(a,s.unit.one,s.unit.few,s.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${i.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${o}${i.maximum.toString()} ${c}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${i.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);if(s){let a=Number(i.minimum),c=ete(a,s.unit.one,s.unit.few,s.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${i.origin} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${o}${i.minimum.toString()} ${c}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${i.origin} \u0431\u0443\u0434\u0435\u0442 ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u043D\u0430\u0447\u0438\u043D\u0430\u0442\u044C\u0441\u044F \u0441 "${o.prefix}"`:o.format==="ends_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0437\u0430\u043A\u0430\u043D\u0447\u0438\u0432\u0430\u0442\u044C\u0441\u044F \u043D\u0430 "${o.suffix}"`:o.format==="includes"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C "${o.includes}"`:o.format==="regex"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${o.pattern}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 ${r[o.format]??i.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0447\u0438\u0441\u043B\u043E: \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${i.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u043E\u0437\u043D\u0430\u043D\u043D${i.keys.length>1?"\u044B\u0435":"\u044B\u0439"} \u043A\u043B\u044E\u0447${i.keys.length>1?"\u0438":""}: ${Q(i.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043B\u044E\u0447 \u0432 ${i.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435";case"invalid_element":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432 ${i.origin}`;default:return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435"}}};function tte(){return{localeError:zDe()}}var BDe=()=>{let e={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0161tevilo";case"object":{if(Array.isArray(i))return"tabela";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"vnos",email:"e-po\u0161tni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in \u010Das",date:"ISO datum",time:"ISO \u010Das",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 \u0161tevilka",jwt:"JWT",template_literal:"vnos"};return i=>{switch(i.code){case"invalid_type":return`Neveljaven vnos: pri\u010Dakovano ${i.expected}, prejeto ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Neveljaven vnos: pri\u010Dakovano ${_e(i.values[0])}`:`Neveljavna mo\u017Enost: pri\u010Dakovano eno izmed ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`Preveliko: pri\u010Dakovano, da bo ${i.origin??"vrednost"} imelo ${o}${i.maximum.toString()} ${s.unit??"elementov"}`:`Preveliko: pri\u010Dakovano, da bo ${i.origin??"vrednost"} ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`Premajhno: pri\u010Dakovano, da bo ${i.origin} imelo ${o}${i.minimum.toString()} ${s.unit}`:`Premajhno: pri\u010Dakovano, da bo ${i.origin} ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Neveljaven niz: mora se za\u010Deti z "${o.prefix}"`:o.format==="ends_with"?`Neveljaven niz: mora se kon\u010Dati z "${o.suffix}"`:o.format==="includes"?`Neveljaven niz: mora vsebovati "${o.includes}"`:o.format==="regex"?`Neveljaven niz: mora ustrezati vzorcu ${o.pattern}`:`Neveljaven ${r[o.format]??i.format}`}case"not_multiple_of":return`Neveljavno \u0161tevilo: mora biti ve\u010Dkratnik ${i.divisor}`;case"unrecognized_keys":return`Neprepoznan${i.keys.length>1?"i klju\u010Di":" klju\u010D"}: ${Q(i.keys,", ")}`;case"invalid_key":return`Neveljaven klju\u010D v ${i.origin}`;case"invalid_union":return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${i.origin}`;default:return"Neveljaven vnos"}}};function nte(){return{localeError:BDe()}}var UDe=()=>{let e={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att inneh\xE5lla"},set:{unit:"objekt",verb:"att inneh\xE5lla"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"antal";case"object":{if(Array.isArray(i))return"lista";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"regulj\xE4rt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad str\xE4ng",base64url:"base64url-kodad str\xE4ng",json_string:"JSON-str\xE4ng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"};return i=>{switch(i.code){case"invalid_type":return`Ogiltig inmatning: f\xF6rv\xE4ntat ${i.expected}, fick ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Ogiltig inmatning: f\xF6rv\xE4ntat ${_e(i.values[0])}`:`Ogiltigt val: f\xF6rv\xE4ntade en av ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`F\xF6r stor(t): f\xF6rv\xE4ntade ${i.origin??"v\xE4rdet"} att ha ${o}${i.maximum.toString()} ${s.unit??"element"}`:`F\xF6r stor(t): f\xF6rv\xE4ntat ${i.origin??"v\xE4rdet"} att ha ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`F\xF6r lite(t): f\xF6rv\xE4ntade ${i.origin??"v\xE4rdet"} att ha ${o}${i.minimum.toString()} ${s.unit}`:`F\xF6r lite(t): f\xF6rv\xE4ntade ${i.origin??"v\xE4rdet"} att ha ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Ogiltig str\xE4ng: m\xE5ste b\xF6rja med "${o.prefix}"`:o.format==="ends_with"?`Ogiltig str\xE4ng: m\xE5ste sluta med "${o.suffix}"`:o.format==="includes"?`Ogiltig str\xE4ng: m\xE5ste inneh\xE5lla "${o.includes}"`:o.format==="regex"?`Ogiltig str\xE4ng: m\xE5ste matcha m\xF6nstret "${o.pattern}"`:`Ogiltig(t) ${r[o.format]??i.format}`}case"not_multiple_of":return`Ogiltigt tal: m\xE5ste vara en multipel av ${i.divisor}`;case"unrecognized_keys":return`${i.keys.length>1?"Ok\xE4nda nycklar":"Ok\xE4nd nyckel"}: ${Q(i.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${i.origin??"v\xE4rdet"}`;case"invalid_union":return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xE4rde i ${i.origin??"v\xE4rdet"}`;default:return"Ogiltig input"}}};function rte(){return{localeError:UDe()}}var VDe=()=>{let e={string:{unit:"\u0B8E\u0BB4\u0BC1\u0BA4\u0BCD\u0BA4\u0BC1\u0B95\u0BCD\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},file:{unit:"\u0BAA\u0BC8\u0B9F\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},array:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},set:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"\u0B8E\u0BA3\u0BCD \u0B85\u0BB2\u0BCD\u0BB2\u0BBE\u0BA4\u0BA4\u0BC1":"\u0B8E\u0BA3\u0BCD";case"object":{if(Array.isArray(i))return"\u0B85\u0BA3\u0BBF";if(i===null)return"\u0BB5\u0BC6\u0BB1\u0BC1\u0BAE\u0BC8";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1",email:"\u0BAE\u0BBF\u0BA9\u0BCD\u0BA9\u0B9E\u0BCD\u0B9A\u0BB2\u0BCD \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0BA4\u0BC7\u0BA4\u0BBF \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",date:"ISO \u0BA4\u0BC7\u0BA4\u0BBF",time:"ISO \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",duration:"ISO \u0B95\u0BBE\u0BB2 \u0B85\u0BB3\u0BB5\u0BC1",ipv4:"IPv4 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",ipv6:"IPv6 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",cidrv4:"IPv4 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",cidrv6:"IPv6 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",base64:"base64-encoded \u0B9A\u0BB0\u0BAE\u0BCD",base64url:"base64url-encoded \u0B9A\u0BB0\u0BAE\u0BCD",json_string:"JSON \u0B9A\u0BB0\u0BAE\u0BCD",e164:"E.164 \u0B8E\u0BA3\u0BCD",jwt:"JWT",template_literal:"input"};return i=>{switch(i.code){case"invalid_type":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${i.expected}, \u0BAA\u0BC6\u0BB1\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${n(i.input)}`;case"invalid_value":return i.values.length===1?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${_e(i.values[0])}`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0BB0\u0BC1\u0BAA\u0BCD\u0BAA\u0BAE\u0BCD: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${Q(i.values,"|")} \u0B87\u0BB2\u0BCD \u0B92\u0BA9\u0BCD\u0BB1\u0BC1`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${i.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${o}${i.maximum.toString()} ${s.unit??"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD"} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${i.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${o}${i.maximum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${i.origin} ${o}${i.minimum.toString()} ${s.unit} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${i.origin} ${o}${i.minimum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${o.prefix}" \u0B87\u0BB2\u0BCD \u0BA4\u0BCA\u0B9F\u0B99\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:o.format==="ends_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${o.suffix}" \u0B87\u0BB2\u0BCD \u0BAE\u0BC1\u0B9F\u0BBF\u0BB5\u0B9F\u0BC8\u0BAF \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:o.format==="includes"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${o.includes}" \u0B90 \u0B89\u0BB3\u0BCD\u0BB3\u0B9F\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:o.format==="regex"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: ${o.pattern} \u0BAE\u0BC1\u0BB1\u0BC8\u0BAA\u0BBE\u0B9F\u0BCD\u0B9F\u0BC1\u0B9F\u0BA9\u0BCD \u0BAA\u0BCA\u0BB0\u0BC1\u0BA8\u0BCD\u0BA4 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 ${r[o.format]??i.format}`}case"not_multiple_of":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B8E\u0BA3\u0BCD: ${i.divisor} \u0B87\u0BA9\u0BCD \u0BAA\u0BB2\u0BAE\u0BBE\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;case"unrecognized_keys":return`\u0B85\u0B9F\u0BC8\u0BAF\u0BBE\u0BB3\u0BAE\u0BCD \u0BA4\u0BC6\u0BB0\u0BBF\u0BAF\u0BBE\u0BA4 \u0BB5\u0BBF\u0B9A\u0BC8${i.keys.length>1?"\u0B95\u0BB3\u0BCD":""}: ${Q(i.keys,", ")}`;case"invalid_key":return`${i.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0B9A\u0BC8`;case"invalid_union":return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1";case"invalid_element":return`${i.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1`;default:return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1"}}};function ite(){return{localeError:VDe()}}var HDe=()=>{let e={string:{unit:"\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},file:{unit:"\u0E44\u0E1A\u0E15\u0E4C",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},array:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},set:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"\u0E44\u0E21\u0E48\u0E43\u0E0A\u0E48\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02 (NaN)":"\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02";case"object":{if(Array.isArray(i))return"\u0E2D\u0E32\u0E23\u0E4C\u0E40\u0E23\u0E22\u0E4C (Array)";if(i===null)return"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E04\u0E48\u0E32 (null)";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19",email:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48\u0E2D\u0E35\u0E40\u0E21\u0E25",url:"URL",emoji:"\u0E2D\u0E34\u0E42\u0E21\u0E08\u0E34",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",date:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E1A\u0E1A ISO",time:"\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",duration:"\u0E0A\u0E48\u0E27\u0E07\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",ipv4:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv4",ipv6:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv6",cidrv4:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv4",cidrv6:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv6",base64:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64",base64url:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64 \u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A URL",json_string:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A JSON",e164:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E1B\u0E23\u0E30\u0E40\u0E17\u0E28 (E.164)",jwt:"\u0E42\u0E17\u0E40\u0E04\u0E19 JWT",template_literal:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19"};return i=>{switch(i.code){case"invalid_type":return`\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${i.expected} \u0E41\u0E15\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A ${n(i.input)}`;case"invalid_value":return i.values.length===1?`\u0E04\u0E48\u0E32\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${_e(i.values[0])}`:`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19\u0E2B\u0E19\u0E36\u0E48\u0E07\u0E43\u0E19 ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"\u0E44\u0E21\u0E48\u0E40\u0E01\u0E34\u0E19":"\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32",s=t(i.origin);return s?`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${i.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${i.maximum.toString()} ${s.unit??"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23"}`:`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${i.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?"\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22":"\u0E21\u0E32\u0E01\u0E01\u0E27\u0E48\u0E32",s=t(i.origin);return s?`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${i.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${i.minimum.toString()} ${s.unit}`:`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${i.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E02\u0E36\u0E49\u0E19\u0E15\u0E49\u0E19\u0E14\u0E49\u0E27\u0E22 "${o.prefix}"`:o.format==="ends_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E25\u0E07\u0E17\u0E49\u0E32\u0E22\u0E14\u0E49\u0E27\u0E22 "${o.suffix}"`:o.format==="includes"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35 "${o.includes}" \u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21`:o.format==="regex"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14 ${o.pattern}`:`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: ${r[o.format]??i.format}`}case"not_multiple_of":return`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E2B\u0E32\u0E23\u0E14\u0E49\u0E27\u0E22 ${i.divisor} \u0E44\u0E14\u0E49\u0E25\u0E07\u0E15\u0E31\u0E27`;case"unrecognized_keys":return`\u0E1E\u0E1A\u0E04\u0E35\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E44\u0E21\u0E48\u0E23\u0E39\u0E49\u0E08\u0E31\u0E01: ${Q(i.keys,", ")}`;case"invalid_key":return`\u0E04\u0E35\u0E22\u0E4C\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${i.origin}`;case"invalid_union":return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E44\u0E21\u0E48\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E22\u0E39\u0E40\u0E19\u0E35\u0E22\u0E19\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E44\u0E27\u0E49";case"invalid_element":return`\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${i.origin}`;default:return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"}}};function ote(){return{localeError:HDe()}}var ZDe=e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":{if(Array.isArray(e))return"array";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return t},qDe=()=>{let e={string:{unit:"karakter",verb:"olmal\u0131"},file:{unit:"bayt",verb:"olmal\u0131"},array:{unit:"\xF6\u011Fe",verb:"olmal\u0131"},set:{unit:"\xF6\u011Fe",verb:"olmal\u0131"}};function t(r){return e[r]??null}let n={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO s\xFCre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral\u0131\u011F\u0131",cidrv6:"IPv6 aral\u0131\u011F\u0131",base64:"base64 ile \u015Fifrelenmi\u015F metin",base64url:"base64url ile \u015Fifrelenmi\u015F metin",json_string:"JSON dizesi",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"\u015Eablon dizesi"};return r=>{switch(r.code){case"invalid_type":return`Ge\xE7ersiz de\u011Fer: beklenen ${r.expected}, al\u0131nan ${ZDe(r.input)}`;case"invalid_value":return r.values.length===1?`Ge\xE7ersiz de\u011Fer: beklenen ${_e(r.values[0])}`:`Ge\xE7ersiz se\xE7enek: a\u015Fa\u011F\u0131dakilerden biri olmal\u0131: ${Q(r.values,"|")}`;case"too_big":{let i=r.inclusive?"<=":"<",o=t(r.origin);return o?`\xC7ok b\xFCy\xFCk: beklenen ${r.origin??"de\u011Fer"} ${i}${r.maximum.toString()} ${o.unit??"\xF6\u011Fe"}`:`\xC7ok b\xFCy\xFCk: beklenen ${r.origin??"de\u011Fer"} ${i}${r.maximum.toString()}`}case"too_small":{let i=r.inclusive?">=":">",o=t(r.origin);return o?`\xC7ok k\xFC\xE7\xFCk: beklenen ${r.origin} ${i}${r.minimum.toString()} ${o.unit}`:`\xC7ok k\xFC\xE7\xFCk: beklenen ${r.origin} ${i}${r.minimum.toString()}`}case"invalid_format":{let i=r;return i.format==="starts_with"?`Ge\xE7ersiz metin: "${i.prefix}" ile ba\u015Flamal\u0131`:i.format==="ends_with"?`Ge\xE7ersiz metin: "${i.suffix}" ile bitmeli`:i.format==="includes"?`Ge\xE7ersiz metin: "${i.includes}" i\xE7ermeli`:i.format==="regex"?`Ge\xE7ersiz metin: ${i.pattern} desenine uymal\u0131`:`Ge\xE7ersiz ${n[i.format]??r.format}`}case"not_multiple_of":return`Ge\xE7ersiz say\u0131: ${r.divisor} ile tam b\xF6l\xFCnebilmeli`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar${r.keys.length>1?"lar":""}: ${Q(r.keys,", ")}`;case"invalid_key":return`${r.origin} i\xE7inde ge\xE7ersiz anahtar`;case"invalid_union":return"Ge\xE7ersiz de\u011Fer";case"invalid_element":return`${r.origin} i\xE7inde ge\xE7ersiz de\u011Fer`;default:return"Ge\xE7ersiz de\u011Fer"}}};function ste(){return{localeError:qDe()}}var GDe=()=>{let e={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},file:{unit:"\u0431\u0430\u0439\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(i))return"\u043C\u0430\u0441\u0438\u0432";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u0435\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0457 \u043F\u043E\u0448\u0442\u0438",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0434\u0430\u0442\u0430 \u0442\u0430 \u0447\u0430\u0441 ISO",date:"\u0434\u0430\u0442\u0430 ISO",time:"\u0447\u0430\u0441 ISO",duration:"\u0442\u0440\u0438\u0432\u0430\u043B\u0456\u0441\u0442\u044C ISO",ipv4:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv4",ipv6:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv6",cidrv4:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv4",cidrv6:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv6",base64:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64",base64url:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64url",json_string:"\u0440\u044F\u0434\u043E\u043A JSON",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"};return i=>{switch(i.code){case"invalid_type":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${i.expected}, \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ${n(i.input)}`;case"invalid_value":return i.values.length===1?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${_e(i.values[0])}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0430 \u043E\u043F\u0446\u0456\u044F: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F \u043E\u0434\u043D\u0435 \u0437 ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${i.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} ${s.verb} ${o}${i.maximum.toString()} ${s.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432"}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${i.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} \u0431\u0443\u0434\u0435 ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${i.origin} ${s.verb} ${o}${i.minimum.toString()} ${s.unit}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${i.origin} \u0431\u0443\u0434\u0435 ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043F\u043E\u0447\u0438\u043D\u0430\u0442\u0438\u0441\u044F \u0437 "${o.prefix}"`:o.format==="ends_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0437\u0430\u043A\u0456\u043D\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u043D\u0430 "${o.suffix}"`:o.format==="includes"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043C\u0456\u0441\u0442\u0438\u0442\u0438 "${o.includes}"`:o.format==="regex"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u0430\u0442\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${o.pattern}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 ${r[o.format]??i.format}`}case"not_multiple_of":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0447\u0438\u0441\u043B\u043E: \u043F\u043E\u0432\u0438\u043D\u043D\u043E \u0431\u0443\u0442\u0438 \u043A\u0440\u0430\u0442\u043D\u0438\u043C ${i.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u043E\u0437\u043F\u0456\u0437\u043D\u0430\u043D\u0438\u0439 \u043A\u043B\u044E\u0447${i.keys.length>1?"\u0456":""}: ${Q(i.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u043A\u043B\u044E\u0447 \u0443 ${i.origin}`;case"invalid_union":return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456";case"invalid_element":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F \u0443 ${i.origin}`;default:return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"}}};function BO(){return{localeError:GDe()}}function ate(){return BO()}var WDe=()=>{let e={string:{unit:"\u062D\u0631\u0648\u0641",verb:"\u06C1\u0648\u0646\u0627"},file:{unit:"\u0628\u0627\u0626\u0679\u0633",verb:"\u06C1\u0648\u0646\u0627"},array:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"},set:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0646\u0645\u0628\u0631";case"object":{if(Array.isArray(i))return"\u0622\u0631\u06D2";if(i===null)return"\u0646\u0644";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u0627\u0646 \u067E\u0679",email:"\u0627\u06CC \u0645\u06CC\u0644 \u0627\u06CC\u0688\u0631\u06CC\u0633",url:"\u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",uuidv4:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 4",uuidv6:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 6",nanoid:"\u0646\u06CC\u0646\u0648 \u0622\u0626\u06CC \u0688\u06CC",guid:"\u062C\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid2:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC 2",ulid:"\u06CC\u0648 \u0627\u06CC\u0644 \u0622\u0626\u06CC \u0688\u06CC",xid:"\u0627\u06CC\u06A9\u0633 \u0622\u0626\u06CC \u0688\u06CC",ksuid:"\u06A9\u06D2 \u0627\u06CC\u0633 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",datetime:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0688\u06CC\u0679 \u0679\u0627\u0626\u0645",date:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u062A\u0627\u0631\u06CC\u062E",time:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0648\u0642\u062A",duration:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0645\u062F\u062A",ipv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0627\u06CC\u0688\u0631\u06CC\u0633",ipv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0627\u06CC\u0688\u0631\u06CC\u0633",cidrv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0631\u06CC\u0646\u062C",cidrv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0631\u06CC\u0646\u062C",base64:"\u0628\u06CC\u0633 64 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",base64url:"\u0628\u06CC\u0633 64 \u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",json_string:"\u062C\u06D2 \u0627\u06CC\u0633 \u0627\u0648 \u0627\u06CC\u0646 \u0633\u0679\u0631\u0646\u06AF",e164:"\u0627\u06CC 164 \u0646\u0645\u0628\u0631",jwt:"\u062C\u06D2 \u0688\u0628\u0644\u06CC\u0648 \u0679\u06CC",template_literal:"\u0627\u0646 \u067E\u0679"};return i=>{switch(i.code){case"invalid_type":return`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${i.expected} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627\u060C ${n(i.input)} \u0645\u0648\u0635\u0648\u0644 \u06C1\u0648\u0627`;case"invalid_value":return i.values.length===1?`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${_e(i.values[0])} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`:`\u063A\u0644\u0637 \u0622\u067E\u0634\u0646: ${Q(i.values,"|")} \u0645\u06CC\u06BA \u0633\u06D2 \u0627\u06CC\u06A9 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`\u0628\u06C1\u062A \u0628\u0691\u0627: ${i.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u06D2 ${o}${i.maximum.toString()} ${s.unit??"\u0639\u0646\u0627\u0635\u0631"} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0628\u0691\u0627: ${i.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u0627 ${o}${i.maximum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${i.origin} \u06A9\u06D2 ${o}${i.minimum.toString()} ${s.unit} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${i.origin} \u06A9\u0627 ${o}${i.minimum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${o.prefix}" \u0633\u06D2 \u0634\u0631\u0648\u0639 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:o.format==="ends_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${o.suffix}" \u067E\u0631 \u062E\u062A\u0645 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:o.format==="includes"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${o.includes}" \u0634\u0627\u0645\u0644 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:o.format==="regex"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \u067E\u06CC\u0679\u0631\u0646 ${o.pattern} \u0633\u06D2 \u0645\u06CC\u0686 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:`\u063A\u0644\u0637 ${r[o.format]??i.format}`}case"not_multiple_of":return`\u063A\u0644\u0637 \u0646\u0645\u0628\u0631: ${i.divisor} \u06A9\u0627 \u0645\u0636\u0627\u0639\u0641 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;case"unrecognized_keys":return`\u063A\u06CC\u0631 \u062A\u0633\u0644\u06CC\u0645 \u0634\u062F\u06C1 \u06A9\u06CC${i.keys.length>1?"\u0632":""}: ${Q(i.keys,"\u060C ")}`;case"invalid_key":return`${i.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u06A9\u06CC`;case"invalid_union":return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679";case"invalid_element":return`${i.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u0648\u06CC\u0644\u06CC\u0648`;default:return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679"}}};function cte(){return{localeError:WDe()}}var KDe=()=>{let e={string:{unit:"k\xFD t\u1EF1",verb:"c\xF3"},file:{unit:"byte",verb:"c\xF3"},array:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"},set:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"s\u1ED1";case"object":{if(Array.isArray(i))return"m\u1EA3ng";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u0111\u1EA7u v\xE0o",email:"\u0111\u1ECBa ch\u1EC9 email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ng\xE0y gi\u1EDD ISO",date:"ng\xE0y ISO",time:"gi\u1EDD ISO",duration:"kho\u1EA3ng th\u1EDDi gian ISO",ipv4:"\u0111\u1ECBa ch\u1EC9 IPv4",ipv6:"\u0111\u1ECBa ch\u1EC9 IPv6",cidrv4:"d\u1EA3i IPv4",cidrv6:"d\u1EA3i IPv6",base64:"chu\u1ED7i m\xE3 h\xF3a base64",base64url:"chu\u1ED7i m\xE3 h\xF3a base64url",json_string:"chu\u1ED7i JSON",e164:"s\u1ED1 E.164",jwt:"JWT",template_literal:"\u0111\u1EA7u v\xE0o"};return i=>{switch(i.code){case"invalid_type":return`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${i.expected}, nh\u1EADn \u0111\u01B0\u1EE3c ${n(i.input)}`;case"invalid_value":return i.values.length===1?`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${_e(i.values[0])}`:`T\xF9y ch\u1ECDn kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i m\u1ED9t trong c\xE1c gi\xE1 tr\u1ECB ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${i.origin??"gi\xE1 tr\u1ECB"} ${s.verb} ${o}${i.maximum.toString()} ${s.unit??"ph\u1EA7n t\u1EED"}`:`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${i.origin??"gi\xE1 tr\u1ECB"} ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${i.origin} ${s.verb} ${o}${i.minimum.toString()} ${s.unit}`:`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${i.origin} ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i b\u1EAFt \u0111\u1EA7u b\u1EB1ng "${o.prefix}"`:o.format==="ends_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i k\u1EBFt th\xFAc b\u1EB1ng "${o.suffix}"`:o.format==="includes"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i bao g\u1ED3m "${o.includes}"`:o.format==="regex"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i kh\u1EDBp v\u1EDBi m\u1EABu ${o.pattern}`:`${r[o.format]??i.format} kh\xF4ng h\u1EE3p l\u1EC7`}case"not_multiple_of":return`S\u1ED1 kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i l\xE0 b\u1ED9i s\u1ED1 c\u1EE7a ${i.divisor}`;case"unrecognized_keys":return`Kh\xF3a kh\xF4ng \u0111\u01B0\u1EE3c nh\u1EADn d\u1EA1ng: ${Q(i.keys,", ")}`;case"invalid_key":return`Kh\xF3a kh\xF4ng h\u1EE3p l\u1EC7 trong ${i.origin}`;case"invalid_union":return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7";case"invalid_element":return`Gi\xE1 tr\u1ECB kh\xF4ng h\u1EE3p l\u1EC7 trong ${i.origin}`;default:return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7"}}};function lte(){return{localeError:KDe()}}var JDe=()=>{let e={string:{unit:"\u5B57\u7B26",verb:"\u5305\u542B"},file:{unit:"\u5B57\u8282",verb:"\u5305\u542B"},array:{unit:"\u9879",verb:"\u5305\u542B"},set:{unit:"\u9879",verb:"\u5305\u542B"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"\u975E\u6570\u5B57(NaN)":"\u6570\u5B57";case"object":{if(Array.isArray(i))return"\u6570\u7EC4";if(i===null)return"\u7A7A\u503C(null)";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u8F93\u5165",email:"\u7535\u5B50\u90AE\u4EF6",url:"URL",emoji:"\u8868\u60C5\u7B26\u53F7",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u671F\u65F6\u95F4",date:"ISO\u65E5\u671F",time:"ISO\u65F6\u95F4",duration:"ISO\u65F6\u957F",ipv4:"IPv4\u5730\u5740",ipv6:"IPv6\u5730\u5740",cidrv4:"IPv4\u7F51\u6BB5",cidrv6:"IPv6\u7F51\u6BB5",base64:"base64\u7F16\u7801\u5B57\u7B26\u4E32",base64url:"base64url\u7F16\u7801\u5B57\u7B26\u4E32",json_string:"JSON\u5B57\u7B26\u4E32",e164:"E.164\u53F7\u7801",jwt:"JWT",template_literal:"\u8F93\u5165"};return i=>{switch(i.code){case"invalid_type":return`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${i.expected}\uFF0C\u5B9E\u9645\u63A5\u6536 ${n(i.input)}`;case"invalid_value":return i.values.length===1?`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${_e(i.values[0])}`:`\u65E0\u6548\u9009\u9879\uFF1A\u671F\u671B\u4EE5\u4E0B\u4E4B\u4E00 ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${i.origin??"\u503C"} ${o}${i.maximum.toString()} ${s.unit??"\u4E2A\u5143\u7D20"}`:`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${i.origin??"\u503C"} ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${i.origin} ${o}${i.minimum.toString()} ${s.unit}`:`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${i.origin} ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${o.prefix}" \u5F00\u5934`:o.format==="ends_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${o.suffix}" \u7ED3\u5C3E`:o.format==="includes"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u5305\u542B "${o.includes}"`:o.format==="regex"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u6EE1\u8DB3\u6B63\u5219\u8868\u8FBE\u5F0F ${o.pattern}`:`\u65E0\u6548${r[o.format]??i.format}`}case"not_multiple_of":return`\u65E0\u6548\u6570\u5B57\uFF1A\u5FC5\u987B\u662F ${i.divisor} \u7684\u500D\u6570`;case"unrecognized_keys":return`\u51FA\u73B0\u672A\u77E5\u7684\u952E(key): ${Q(i.keys,", ")}`;case"invalid_key":return`${i.origin} \u4E2D\u7684\u952E(key)\u65E0\u6548`;case"invalid_union":return"\u65E0\u6548\u8F93\u5165";case"invalid_element":return`${i.origin} \u4E2D\u5305\u542B\u65E0\u6548\u503C(value)`;default:return"\u65E0\u6548\u8F93\u5165"}}};function ute(){return{localeError:JDe()}}var YDe=()=>{let e={string:{unit:"\u5B57\u5143",verb:"\u64C1\u6709"},file:{unit:"\u4F4D\u5143\u7D44",verb:"\u64C1\u6709"},array:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"},set:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u8F38\u5165",email:"\u90F5\u4EF6\u5730\u5740",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u65E5\u671F\u6642\u9593",date:"ISO \u65E5\u671F",time:"ISO \u6642\u9593",duration:"ISO \u671F\u9593",ipv4:"IPv4 \u4F4D\u5740",ipv6:"IPv6 \u4F4D\u5740",cidrv4:"IPv4 \u7BC4\u570D",cidrv6:"IPv6 \u7BC4\u570D",base64:"base64 \u7DE8\u78BC\u5B57\u4E32",base64url:"base64url \u7DE8\u78BC\u5B57\u4E32",json_string:"JSON \u5B57\u4E32",e164:"E.164 \u6578\u503C",jwt:"JWT",template_literal:"\u8F38\u5165"};return i=>{switch(i.code){case"invalid_type":return`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${i.expected}\uFF0C\u4F46\u6536\u5230 ${n(i.input)}`;case"invalid_value":return i.values.length===1?`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${_e(i.values[0])}`:`\u7121\u6548\u7684\u9078\u9805\uFF1A\u9810\u671F\u70BA\u4EE5\u4E0B\u5176\u4E2D\u4E4B\u4E00 ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${i.origin??"\u503C"} \u61C9\u70BA ${o}${i.maximum.toString()} ${s.unit??"\u500B\u5143\u7D20"}`:`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${i.origin??"\u503C"} \u61C9\u70BA ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${i.origin} \u61C9\u70BA ${o}${i.minimum.toString()} ${s.unit}`:`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${i.origin} \u61C9\u70BA ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${o.prefix}" \u958B\u982D`:o.format==="ends_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${o.suffix}" \u7D50\u5C3E`:o.format==="includes"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u5305\u542B "${o.includes}"`:o.format==="regex"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u7B26\u5408\u683C\u5F0F ${o.pattern}`:`\u7121\u6548\u7684 ${r[o.format]??i.format}`}case"not_multiple_of":return`\u7121\u6548\u7684\u6578\u5B57\uFF1A\u5FC5\u9808\u70BA ${i.divisor} \u7684\u500D\u6578`;case"unrecognized_keys":return`\u7121\u6CD5\u8B58\u5225\u7684\u9375\u503C${i.keys.length>1?"\u5011":""}\uFF1A${Q(i.keys,"\u3001")}`;case"invalid_key":return`${i.origin} \u4E2D\u6709\u7121\u6548\u7684\u9375\u503C`;case"invalid_union":return"\u7121\u6548\u7684\u8F38\u5165\u503C";case"invalid_element":return`${i.origin} \u4E2D\u6709\u7121\u6548\u7684\u503C`;default:return"\u7121\u6548\u7684\u8F38\u5165\u503C"}}};function dte(){return{localeError:YDe()}}var QDe=()=>{let e={string:{unit:"\xE0mi",verb:"n\xED"},file:{unit:"bytes",verb:"n\xED"},array:{unit:"nkan",verb:"n\xED"},set:{unit:"nkan",verb:"n\xED"}};function t(i){return e[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"n\u1ECD\u0301mb\xE0";case"object":{if(Array.isArray(i))return"akop\u1ECD";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9",email:"\xE0d\xEDr\u1EB9\u0301s\xEC \xECm\u1EB9\u0301l\xEC",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\xE0k\xF3k\xF2 ISO",date:"\u1ECDj\u1ECD\u0301 ISO",time:"\xE0k\xF3k\xF2 ISO",duration:"\xE0k\xF3k\xF2 t\xF3 p\xE9 ISO",ipv4:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv4",ipv6:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv6",cidrv4:"\xE0gb\xE8gb\xE8 IPv4",cidrv6:"\xE0gb\xE8gb\xE8 IPv6",base64:"\u1ECD\u0300r\u1ECD\u0300 t\xED a k\u1ECD\u0301 n\xED base64",base64url:"\u1ECD\u0300r\u1ECD\u0300 base64url",json_string:"\u1ECD\u0300r\u1ECD\u0300 JSON",e164:"n\u1ECD\u0301mb\xE0 E.164",jwt:"JWT",template_literal:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9"};return i=>{switch(i.code){case"invalid_type":return`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${i.expected}, \xE0m\u1ECD\u0300 a r\xED ${n(i.input)}`;case"invalid_value":return i.values.length===1?`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${_e(i.values[0])}`:`\xC0\u1E63\xE0y\xE0n a\u1E63\xEC\u1E63e: yan \u1ECD\u0300kan l\xE1ra ${Q(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=t(i.origin);return s?`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${i.origin??"iye"} ${s.verb} ${o}${i.maximum} ${s.unit}`:`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 ${o}${i.maximum}`}case"too_small":{let o=i.inclusive?">=":">",s=t(i.origin);return s?`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${i.origin} ${s.verb} ${o}${i.minimum} ${s.unit}`:`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 ${o}${i.minimum}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\u1EB9\u0300r\u1EB9\u0300 p\u1EB9\u0300l\xFA "${o.prefix}"`:o.format==="ends_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 par\xED p\u1EB9\u0300l\xFA "${o.suffix}"`:o.format==="includes"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 n\xED "${o.includes}"`:o.format==="regex"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\xE1 \xE0p\u1EB9\u1EB9r\u1EB9 mu ${o.pattern}`:`A\u1E63\xEC\u1E63e: ${r[o.format]??i.format}`}case"not_multiple_of":return`N\u1ECD\u0301mb\xE0 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 j\u1EB9\u0301 \xE8y\xE0 p\xEDp\xEDn ti ${i.divisor}`;case"unrecognized_keys":return`B\u1ECDt\xECn\xEC \xE0\xECm\u1ECD\u0300: ${Q(i.keys,", ")}`;case"invalid_key":return`B\u1ECDt\xECn\xEC a\u1E63\xEC\u1E63e n\xEDn\xFA ${i.origin}`;case"invalid_union":return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e";case"invalid_element":return`Iye a\u1E63\xEC\u1E63e n\xEDn\xFA ${i.origin}`;default:return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e"}}};function pte(){return{localeError:QDe()}}var mte,UO=Symbol("ZodOutput"),VO=Symbol("ZodInput"),V_=class{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...n){let r=n[0];if(this._map.set(t,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){let n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){let n=t._zod.parent;if(n){let r=m({},this.get(n)??{});delete r.id;let i=m(m({},r),this._map.get(t));return Object.keys(i).length?i:void 0}return this._map.get(t)}has(t){return this._map.has(t)}};function nx(){return new V_}(mte=globalThis).__zod_globalRegistry??(mte.__zod_globalRegistry=nx());var Xn=globalThis.__zod_globalRegistry;function HO(e,t){return new e(m({type:"string"},be(t)))}function ZO(e,t){return new e(m({type:"string",coerce:!0},be(t)))}function rx(e,t){return new e(m({type:"string",format:"email",check:"string_format",abort:!1},be(t)))}function H_(e,t){return new e(m({type:"string",format:"guid",check:"string_format",abort:!1},be(t)))}function ix(e,t){return new e(m({type:"string",format:"uuid",check:"string_format",abort:!1},be(t)))}function ox(e,t){return new e(m({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4"},be(t)))}function sx(e,t){return new e(m({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6"},be(t)))}function ax(e,t){return new e(m({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7"},be(t)))}function Z_(e,t){return new e(m({type:"string",format:"url",check:"string_format",abort:!1},be(t)))}function cx(e,t){return new e(m({type:"string",format:"emoji",check:"string_format",abort:!1},be(t)))}function lx(e,t){return new e(m({type:"string",format:"nanoid",check:"string_format",abort:!1},be(t)))}function ux(e,t){return new e(m({type:"string",format:"cuid",check:"string_format",abort:!1},be(t)))}function dx(e,t){return new e(m({type:"string",format:"cuid2",check:"string_format",abort:!1},be(t)))}function px(e,t){return new e(m({type:"string",format:"ulid",check:"string_format",abort:!1},be(t)))}function mx(e,t){return new e(m({type:"string",format:"xid",check:"string_format",abort:!1},be(t)))}function fx(e,t){return new e(m({type:"string",format:"ksuid",check:"string_format",abort:!1},be(t)))}function hx(e,t){return new e(m({type:"string",format:"ipv4",check:"string_format",abort:!1},be(t)))}function gx(e,t){return new e(m({type:"string",format:"ipv6",check:"string_format",abort:!1},be(t)))}function qO(e,t){return new e(m({type:"string",format:"mac",check:"string_format",abort:!1},be(t)))}function _x(e,t){return new e(m({type:"string",format:"cidrv4",check:"string_format",abort:!1},be(t)))}function yx(e,t){return new e(m({type:"string",format:"cidrv6",check:"string_format",abort:!1},be(t)))}function vx(e,t){return new e(m({type:"string",format:"base64",check:"string_format",abort:!1},be(t)))}function bx(e,t){return new e(m({type:"string",format:"base64url",check:"string_format",abort:!1},be(t)))}function wx(e,t){return new e(m({type:"string",format:"e164",check:"string_format",abort:!1},be(t)))}function xx(e,t){return new e(m({type:"string",format:"jwt",check:"string_format",abort:!1},be(t)))}var GO={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function WO(e,t){return new e(m({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null},be(t)))}function KO(e,t){return new e(m({type:"string",format:"date",check:"string_format"},be(t)))}function JO(e,t){return new e(m({type:"string",format:"time",check:"string_format",precision:null},be(t)))}function YO(e,t){return new e(m({type:"string",format:"duration",check:"string_format"},be(t)))}function QO(e,t){return new e(m({type:"number",checks:[]},be(t)))}function XO(e,t){return new e(m({type:"number",coerce:!0,checks:[]},be(t)))}function eM(e,t){return new e(m({type:"number",check:"number_format",abort:!1,format:"safeint"},be(t)))}function tM(e,t){return new e(m({type:"number",check:"number_format",abort:!1,format:"float32"},be(t)))}function nM(e,t){return new e(m({type:"number",check:"number_format",abort:!1,format:"float64"},be(t)))}function rM(e,t){return new e(m({type:"number",check:"number_format",abort:!1,format:"int32"},be(t)))}function iM(e,t){return new e(m({type:"number",check:"number_format",abort:!1,format:"uint32"},be(t)))}function oM(e,t){return new e(m({type:"boolean"},be(t)))}function sM(e,t){return new e(m({type:"boolean",coerce:!0},be(t)))}function aM(e,t){return new e(m({type:"bigint"},be(t)))}function cM(e,t){return new e(m({type:"bigint",coerce:!0},be(t)))}function lM(e,t){return new e(m({type:"bigint",check:"bigint_format",abort:!1,format:"int64"},be(t)))}function uM(e,t){return new e(m({type:"bigint",check:"bigint_format",abort:!1,format:"uint64"},be(t)))}function dM(e,t){return new e(m({type:"symbol"},be(t)))}function pM(e,t){return new e(m({type:"undefined"},be(t)))}function mM(e,t){return new e(m({type:"null"},be(t)))}function fM(e){return new e({type:"any"})}function q_(e){return new e({type:"unknown"})}function G_(e,t){return new e(m({type:"never"},be(t)))}function hM(e,t){return new e(m({type:"void"},be(t)))}function gM(e,t){return new e(m({type:"date"},be(t)))}function _M(e,t){return new e(m({type:"date",coerce:!0},be(t)))}function yM(e,t){return new e(m({type:"nan"},be(t)))}function $l(e,t){return new AA(b(m({check:"less_than"},be(t)),{value:e,inclusive:!1}))}function qs(e,t){return new AA(b(m({check:"less_than"},be(t)),{value:e,inclusive:!0}))}function Ll(e,t){return new OA(b(m({check:"greater_than"},be(t)),{value:e,inclusive:!1}))}function zo(e,t){return new OA(b(m({check:"greater_than"},be(t)),{value:e,inclusive:!0}))}function vM(e){return Ll(0,e)}function bM(e){return $l(0,e)}function wM(e){return qs(0,e)}function xM(e){return zo(0,e)}function Np(e,t){return new OU(b(m({check:"multiple_of"},be(t)),{value:e}))}function Pf(e,t){return new PU(b(m({check:"max_size"},be(t)),{maximum:e}))}function $p(e,t){return new RU(b(m({check:"min_size"},be(t)),{minimum:e}))}function W_(e,t){return new NU(b(m({check:"size_equals"},be(t)),{size:e}))}function Rf(e,t){return new $U(b(m({check:"max_length"},be(t)),{maximum:e}))}function td(e,t){return new LU(b(m({check:"min_length"},be(t)),{minimum:e}))}function Nf(e,t){return new FU(b(m({check:"length_equals"},be(t)),{length:e}))}function K_(e,t){return new jU(b(m({check:"string_format",format:"regex"},be(t)),{pattern:e}))}function J_(e){return new zU(m({check:"string_format",format:"lowercase"},be(e)))}function Y_(e){return new BU(m({check:"string_format",format:"uppercase"},be(e)))}function Q_(e,t){return new UU(b(m({check:"string_format",format:"includes"},be(t)),{includes:e}))}function X_(e,t){return new VU(b(m({check:"string_format",format:"starts_with"},be(t)),{prefix:e}))}function ey(e,t){return new HU(b(m({check:"string_format",format:"ends_with"},be(t)),{suffix:e}))}function CM(e,t,n){return new ZU(m({check:"property",property:e,schema:t},be(n)))}function ty(e,t){return new qU(m({check:"mime_type",mime:e},be(t)))}function Ac(e){return new GU({check:"overwrite",tx:e})}function ny(e){return Ac(t=>t.normalize(e))}function ry(){return Ac(e=>e.trim())}function iy(){return Ac(e=>e.toLowerCase())}function oy(){return Ac(e=>e.toUpperCase())}function Cx(){return Ac(e=>WB(e))}function XU(e,t,n){return new e(m({type:"array",element:t},be(n)))}function ePe(e,t,n){return new e(m({type:"union",options:t},be(n)))}function tPe(e,t,n,r){return new e(m({type:"union",options:n,discriminator:t},be(r)))}function nPe(e,t,n){return new e({type:"intersection",left:t,right:n})}function rPe(e,t,n,r){let i=n instanceof Ut,o=i?r:n,s=i?n:null;return new e(m({type:"tuple",items:t,rest:s},be(o)))}function iPe(e,t,n,r){return new e(m({type:"record",keyType:t,valueType:n},be(r)))}function oPe(e,t,n,r){return new e(m({type:"map",keyType:t,valueType:n},be(r)))}function sPe(e,t,n){return new e(m({type:"set",valueType:t},be(n)))}function aPe(e,t,n){let r=Array.isArray(t)?Object.fromEntries(t.map(i=>[i,i])):t;return new e(m({type:"enum",entries:r},be(n)))}function cPe(e,t,n){return new e(m({type:"enum",entries:t},be(n)))}function lPe(e,t,n){return new e(m({type:"literal",values:Array.isArray(t)?t:[t]},be(n)))}function EM(e,t){return new e(m({type:"file"},be(t)))}function uPe(e,t){return new e({type:"transform",transform:t})}function dPe(e,t){return new e({type:"optional",innerType:t})}function pPe(e,t){return new e({type:"nullable",innerType:t})}function mPe(e,t,n){return new e({type:"default",innerType:t,get defaultValue(){return typeof n=="function"?n():JB(n)}})}function fPe(e,t,n){return new e(m({type:"nonoptional",innerType:t},be(n)))}function hPe(e,t){return new e({type:"success",innerType:t})}function gPe(e,t,n){return new e({type:"catch",innerType:t,catchValue:typeof n=="function"?n:()=>n})}function _Pe(e,t,n){return new e({type:"pipe",in:t,out:n})}function yPe(e,t){return new e({type:"readonly",innerType:t})}function vPe(e,t,n){return new e(m({type:"template_literal",parts:t},be(n)))}function bPe(e,t){return new e({type:"lazy",getter:t})}function wPe(e,t){return new e({type:"promise",innerType:t})}function IM(e,t,n){let r=be(n);return r.abort??(r.abort=!0),new e(m({type:"custom",check:"custom",fn:t},r))}function SM(e,t,n){return new e(m({type:"custom",check:"custom",fn:t},be(n)))}function kM(e){let t=fte(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(A_(r,n.value,t._zod.def));else{let i=r;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=t),i.continue??(i.continue=!t._zod.def.abort),n.issues.push(A_(i))}},e(n.value,n)));return t}function fte(e,t){let n=new pr(m({check:"custom"},be(t)));return n._zod.check=e,n}function TM(e){let t=new pr({check:"describe"});return t._zod.onattach=[n=>{let r=Xn.get(n)??{};Xn.add(n,b(m({},r),{description:e}))}],t._zod.check=()=>{},t}function AM(e){let t=new pr({check:"meta"});return t._zod.onattach=[n=>{let r=Xn.get(n)??{};Xn.add(n,m(m({},r),e))}],t._zod.check=()=>{},t}function OM(e,t){let n=be(t),r=n.truthy??["true","1","yes","on","y","enabled"],i=n.falsy??["false","0","no","off","n","disabled"];n.case!=="sensitive"&&(r=r.map(h=>typeof h=="string"?h.toLowerCase():h),i=i.map(h=>typeof h=="string"?h.toLowerCase():h));let o=new Set(r),s=new Set(i),a=e.Codec??B_,c=e.Boolean??F_,u=e.String??Rp,d=new u({type:"string",error:n.error}),f=new c({type:"boolean",error:n.error}),g=new a({type:"pipe",in:d,out:f,transform:(h,v)=>{let x=h;return n.case!=="sensitive"&&(x=x.toLowerCase()),o.has(x)?!0:s.has(x)?!1:(v.issues.push({code:"invalid_value",expected:"stringbool",values:[...o,...s],input:v.value,inst:g,continue:!1}),{})},reverseTransform:(h,v)=>h===!0?r[0]||"true":i[0]||"false",error:n.error});return g}function $f(e,t,n,r={}){let i=be(r),o=m(b(m({},be(r)),{check:"string_format",type:"string",format:t,fn:typeof n=="function"?n:a=>n.test(a)}),i);return n instanceof RegExp&&(o.pattern=n),new e(o)}var Ex=class{constructor(t){this.counter=0,this.metadataRegistry=t?.metadata??Xn,this.target=t?.target??"draft-2020-12",this.unrepresentable=t?.unrepresentable??"throw",this.override=t?.override??(()=>{}),this.io=t?.io??"output",this.seen=new Map}process(t,n={path:[],schemaPath:[]}){var r;let i=t._zod.def,o={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},s=this.seen.get(t);if(s)return s.count++,n.schemaPath.includes(t)&&(s.cycle=n.path),s.schema;let a={schema:{},count:1,cycle:void 0,path:n.path};this.seen.set(t,a);let c=t._zod.toJSONSchema?.();if(c)a.schema=c;else{let f=b(m({},n),{schemaPath:[...n.schemaPath,t],path:n.path}),g=t._zod.parent;if(g)a.ref=g,this.process(g,f),this.seen.get(g).isParent=!0;else{let h=a.schema;switch(i.type){case"string":{let v=h;v.type="string";let{minimum:x,maximum:E,format:C,patterns:S,contentEncoding:A}=t._zod.bag;if(typeof x=="number"&&(v.minLength=x),typeof E=="number"&&(v.maxLength=E),C&&(v.format=o[C]??C,v.format===""&&delete v.format),A&&(v.contentEncoding=A),S&&S.size>0){let P=[...S];P.length===1?v.pattern=P[0].source:P.length>1&&(a.schema.allOf=[...P.map(F=>b(m({},this.target==="draft-7"||this.target==="draft-4"||this.target==="openapi-3.0"?{type:"string"}:{}),{pattern:F.source}))])}break}case"number":{let v=h,{minimum:x,maximum:E,format:C,multipleOf:S,exclusiveMaximum:A,exclusiveMinimum:P}=t._zod.bag;typeof C=="string"&&C.includes("int")?v.type="integer":v.type="number",typeof P=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(v.minimum=P,v.exclusiveMinimum=!0):v.exclusiveMinimum=P),typeof x=="number"&&(v.minimum=x,typeof P=="number"&&this.target!=="draft-4"&&(P>=x?delete v.minimum:delete v.exclusiveMinimum)),typeof A=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(v.maximum=A,v.exclusiveMaximum=!0):v.exclusiveMaximum=A),typeof E=="number"&&(v.maximum=E,typeof A=="number"&&this.target!=="draft-4"&&(A<=E?delete v.maximum:delete v.exclusiveMaximum)),typeof S=="number"&&(v.multipleOf=S);break}case"boolean":{let v=h;v.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{this.target==="openapi-3.0"?(h.type="string",h.nullable=!0,h.enum=[null]):h.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{h.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{let v=h,{minimum:x,maximum:E}=t._zod.bag;typeof x=="number"&&(v.minItems=x),typeof E=="number"&&(v.maxItems=E),v.type="array",v.items=this.process(i.element,b(m({},f),{path:[...f.path,"items"]}));break}case"object":{let v=h;v.type="object",v.properties={};let x=i.shape;for(let S in x)v.properties[S]=this.process(x[S],b(m({},f),{path:[...f.path,"properties",S]}));let E=new Set(Object.keys(x)),C=new Set([...E].filter(S=>{let A=i.shape[S]._zod;return this.io==="input"?A.optin===void 0:A.optout===void 0}));C.size>0&&(v.required=Array.from(C)),i.catchall?._zod.def.type==="never"?v.additionalProperties=!1:i.catchall?i.catchall&&(v.additionalProperties=this.process(i.catchall,b(m({},f),{path:[...f.path,"additionalProperties"]}))):this.io==="output"&&(v.additionalProperties=!1);break}case"union":{let v=h,x=i.discriminator!==void 0,E=i.options.map((C,S)=>this.process(C,b(m({},f),{path:[...f.path,x?"oneOf":"anyOf",S]})));x?v.oneOf=E:v.anyOf=E;break}case"intersection":{let v=h,x=this.process(i.left,b(m({},f),{path:[...f.path,"allOf",0]})),E=this.process(i.right,b(m({},f),{path:[...f.path,"allOf",1]})),C=A=>"allOf"in A&&Object.keys(A).length===1,S=[...C(x)?x.allOf:[x],...C(E)?E.allOf:[E]];v.allOf=S;break}case"tuple":{let v=h;v.type="array";let x=this.target==="draft-2020-12"?"prefixItems":"items",E=this.target==="draft-2020-12"||this.target==="openapi-3.0"?"items":"additionalItems",C=i.items.map((F,B)=>this.process(F,b(m({},f),{path:[...f.path,x,B]}))),S=i.rest?this.process(i.rest,b(m({},f),{path:[...f.path,E,...this.target==="openapi-3.0"?[i.items.length]:[]]})):null;this.target==="draft-2020-12"?(v.prefixItems=C,S&&(v.items=S)):this.target==="openapi-3.0"?(v.items={anyOf:C},S&&v.items.anyOf.push(S),v.minItems=C.length,S||(v.maxItems=C.length)):(v.items=C,S&&(v.additionalItems=S));let{minimum:A,maximum:P}=t._zod.bag;typeof A=="number"&&(v.minItems=A),typeof P=="number"&&(v.maxItems=P);break}case"record":{let v=h;v.type="object",(this.target==="draft-7"||this.target==="draft-2020-12")&&(v.propertyNames=this.process(i.keyType,b(m({},f),{path:[...f.path,"propertyNames"]}))),v.additionalProperties=this.process(i.valueType,b(m({},f),{path:[...f.path,"additionalProperties"]}));break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{let v=h,x=Bw(i.entries);x.every(E=>typeof E=="number")&&(v.type="number"),x.every(E=>typeof E=="string")&&(v.type="string"),v.enum=x;break}case"literal":{let v=h,x=[];for(let E of i.values)if(E===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof E=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");x.push(Number(E))}else x.push(E);if(x.length!==0)if(x.length===1){let E=x[0];v.type=E===null?"null":typeof E,this.target==="draft-4"||this.target==="openapi-3.0"?v.enum=[E]:v.const=E}else x.every(E=>typeof E=="number")&&(v.type="number"),x.every(E=>typeof E=="string")&&(v.type="string"),x.every(E=>typeof E=="boolean")&&(v.type="string"),x.every(E=>E===null)&&(v.type="null"),v.enum=x;break}case"file":{let v=h,x={type:"string",format:"binary",contentEncoding:"binary"},{minimum:E,maximum:C,mime:S}=t._zod.bag;E!==void 0&&(x.minLength=E),C!==void 0&&(x.maxLength=C),S?S.length===1?(x.contentMediaType=S[0],Object.assign(v,x)):v.anyOf=S.map(A=>b(m({},x),{contentMediaType:A})):Object.assign(v,x);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{let v=this.process(i.innerType,f);this.target==="openapi-3.0"?(a.ref=i.innerType,h.nullable=!0):h.anyOf=[v,{type:"null"}];break}case"nonoptional":{this.process(i.innerType,f),a.ref=i.innerType;break}case"success":{let v=h;v.type="boolean";break}case"default":{this.process(i.innerType,f),a.ref=i.innerType,h.default=JSON.parse(JSON.stringify(i.defaultValue));break}case"prefault":{this.process(i.innerType,f),a.ref=i.innerType,this.io==="input"&&(h._prefault=JSON.parse(JSON.stringify(i.defaultValue)));break}case"catch":{this.process(i.innerType,f),a.ref=i.innerType;let v;try{v=i.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}h.default=v;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{let v=h,x=t._zod.pattern;if(!x)throw new Error("Pattern not found in template literal");v.type="string",v.pattern=x.source;break}case"pipe":{let v=this.io==="input"?i.in._zod.def.type==="transform"?i.out:i.in:i.out;this.process(v,f),a.ref=v;break}case"readonly":{this.process(i.innerType,f),a.ref=i.innerType,h.readOnly=!0;break}case"promise":{this.process(i.innerType,f),a.ref=i.innerType;break}case"optional":{this.process(i.innerType,f),a.ref=i.innerType;break}case"lazy":{let v=t._zod.innerType;this.process(v,f),a.ref=v;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}case"function":{if(this.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema");break}default:}}}let u=this.metadataRegistry.get(t);return u&&Object.assign(a.schema,u),this.io==="input"&&ms(t)&&(delete a.schema.examples,delete a.schema.default),this.io==="input"&&a.schema._prefault&&((r=a.schema).default??(r.default=a.schema._prefault)),delete a.schema._prefault,this.seen.get(t).schema}emit(t,n){let r={cycles:n?.cycles??"ref",reused:n?.reused??"inline",external:n?.external??void 0},i=this.seen.get(t);if(!i)throw new Error("Unprocessed schema. This is a bug in Zod.");let o=d=>{let f=this.target==="draft-2020-12"?"$defs":"definitions";if(r.external){let x=r.external.registry.get(d[0])?.id,E=r.external.uri??(S=>S);if(x)return{ref:E(x)};let C=d[1].defId??d[1].schema.id??`schema${this.counter++}`;return d[1].defId=C,{defId:C,ref:`${E("__shared")}#/${f}/${C}`}}if(d[1]===i)return{ref:"#"};let h=`#/${f}/`,v=d[1].schema.id??`__schema${this.counter++}`;return{defId:v,ref:h+v}},s=d=>{if(d[1].schema.$ref)return;let f=d[1],{ref:g,defId:h}=o(d);f.def=m({},f.schema),h&&(f.defId=h);let v=f.schema;for(let x in v)delete v[x];v.$ref=g};if(r.cycles==="throw")for(let d of this.seen.entries()){let f=d[1];if(f.cycle)throw new Error(`Cycle detected: #/${f.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let d of this.seen.entries()){let f=d[1];if(t===d[0]){s(d);continue}if(r.external){let h=r.external.registry.get(d[0])?.id;if(t!==d[0]&&h){s(d);continue}}if(this.metadataRegistry.get(d[0])?.id){s(d);continue}if(f.cycle){s(d);continue}if(f.count>1&&r.reused==="ref"){s(d);continue}}let a=(d,f)=>{let g=this.seen.get(d),h=g.def??g.schema,v=m({},h);if(g.ref===null)return;let x=g.ref;if(g.ref=null,x){a(x,f);let E=this.seen.get(x).schema;E.$ref&&(f.target==="draft-7"||f.target==="draft-4"||f.target==="openapi-3.0")?(h.allOf=h.allOf??[],h.allOf.push(E)):(Object.assign(h,E),Object.assign(h,v))}g.isParent||this.override({zodSchema:d,jsonSchema:h,path:g.path??[]})};for(let d of[...this.seen.entries()].reverse())a(d[0],{target:this.target});let c={};if(this.target==="draft-2020-12"?c.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?c.$schema="http://json-schema.org/draft-07/schema#":this.target==="draft-4"?c.$schema="http://json-schema.org/draft-04/schema#":this.target==="openapi-3.0"||console.warn(`Invalid target: ${this.target}`),r.external?.uri){let d=r.external.registry.get(t)?.id;if(!d)throw new Error("Schema is missing an `id` property");c.$id=r.external.uri(d)}Object.assign(c,i.def);let u=r.external?.defs??{};for(let d of this.seen.entries()){let f=d[1];f.def&&f.defId&&(u[f.defId]=f.def)}r.external||Object.keys(u).length>0&&(this.target==="draft-2020-12"?c.$defs=u:c.definitions=u);try{return JSON.parse(JSON.stringify(c))}catch{throw new Error("Error converting schema to JSON.")}}};function Ka(e,t){if(e instanceof V_){let r=new Ex(t),i={};for(let a of e._idmap.entries()){let[c,u]=a;r.process(u)}let o={},s={registry:e,uri:t?.uri,defs:i};for(let a of e._idmap.entries()){let[c,u]=a;o[c]=r.emit(u,b(m({},t),{external:s}))}if(Object.keys(i).length>0){let a=r.target==="draft-2020-12"?"$defs":"definitions";o.__shared={[a]:i}}return{schemas:o}}let n=new Ex(t);return n.process(e),n.emit(e,t)}function ms(e,t){let n=t??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);let r=e._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return ms(r.element,n);if(r.type==="set")return ms(r.valueType,n);if(r.type==="lazy")return ms(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return ms(r.innerType,n);if(r.type==="intersection")return ms(r.left,n)||ms(r.right,n);if(r.type==="record"||r.type==="map")return ms(r.keyType,n)||ms(r.valueType,n);if(r.type==="pipe")return ms(r.in,n)||ms(r.out,n);if(r.type==="object"){for(let i in r.shape)if(ms(r.shape[i],n))return!0;return!1}if(r.type==="union"){for(let i of r.options)if(ms(i,n))return!0;return!1}if(r.type==="tuple"){for(let i of r.items)if(ms(i,n))return!0;return!!(r.rest&&ms(r.rest,n))}return!1}var hte={};function sy(e){return!!e._zod}function Lf(e,t){return sy(e)?Of(e,t):e.safeParse(t)}function MM(e){var t,n;if(!e)return;let r;if(sy(e)?r=(n=(t=e._zod)===null||t===void 0?void 0:t.def)===null||n===void 0?void 0:n.shape:r=e.shape,!!r){if(typeof r=="function")try{return r()}catch{return}return r}}function yte(e){var t;if(sy(e)){let s=(t=e._zod)===null||t===void 0?void 0:t.def;if(s){if(s.value!==void 0)return s.value;if(Array.isArray(s.values)&&s.values.length>0)return s.values[0]}}let r=e._def;if(r){if(r.value!==void 0)return r.value;if(Array.isArray(r.values)&&r.values.length>0)return r.values[0]}let i=e.value;if(i!==void 0)return i}var rd={};Kd(rd,{$brand:()=>jw,$input:()=>VO,$output:()=>UO,NEVER:()=>S_,TimePrecision:()=>GO,ZodAny:()=>Ste,ZodArray:()=>Ote,ZodBase64:()=>M4,ZodBase64URL:()=>D4,ZodBigInt:()=>Ox,ZodBigIntFormat:()=>N4,ZodBoolean:()=>Ax,ZodCIDRv4:()=>A4,ZodCIDRv6:()=>O4,ZodCUID:()=>x4,ZodCUID2:()=>C4,ZodCatch:()=>Gte,ZodCodec:()=>Z4,ZodCustom:()=>VM,ZodCustomStringFormat:()=>kx,ZodDate:()=>BM,ZodDefault:()=>Bte,ZodDiscriminatedUnion:()=>Mte,ZodE164:()=>P4,ZodEmail:()=>y4,ZodEmoji:()=>b4,ZodEnum:()=>Ix,ZodError:()=>kPe,ZodFile:()=>Fte,ZodFirstPartyTypeKind:()=>W4,ZodFunction:()=>nne,ZodGUID:()=>LM,ZodIPv4:()=>k4,ZodIPv6:()=>T4,ZodISODate:()=>PM,ZodISODateTime:()=>DM,ZodISODuration:()=>NM,ZodISOTime:()=>RM,ZodIntersection:()=>Dte,ZodIssueCode:()=>K4,ZodJWT:()=>R4,ZodKSUID:()=>S4,ZodLazy:()=>Xte,ZodLiteral:()=>Lte,ZodMAC:()=>wte,ZodMap:()=>Nte,ZodNaN:()=>Kte,ZodNanoID:()=>w4,ZodNever:()=>Tte,ZodNonOptional:()=>V4,ZodNull:()=>Ete,ZodNullable:()=>zte,ZodNumber:()=>Tx,ZodNumberFormat:()=>ay,ZodObject:()=>UM,ZodOptional:()=>U4,ZodPipe:()=>H4,ZodPrefault:()=>Vte,ZodPromise:()=>tne,ZodReadonly:()=>Jte,ZodRealError:()=>Gs,ZodRecord:()=>z4,ZodSet:()=>$te,ZodString:()=>Sx,ZodStringFormat:()=>wr,ZodSuccess:()=>qte,ZodSymbol:()=>xte,ZodTemplateLiteral:()=>Qte,ZodTransform:()=>jte,ZodTuple:()=>Pte,ZodType:()=>gn,ZodULID:()=>E4,ZodURL:()=>zM,ZodUUID:()=>nd,ZodUndefined:()=>Cte,ZodUnion:()=>F4,ZodUnknown:()=>kte,ZodVoid:()=>Ate,ZodXID:()=>I4,_ZodString:()=>_4,_default:()=>Ute,_function:()=>SRe,any:()=>$4,array:()=>Ie,base64:()=>WPe,base64url:()=>KPe,bigint:()=>sRe,boolean:()=>fr,catch:()=>Wte,check:()=>kRe,cidrv4:()=>qPe,cidrv6:()=>GPe,clone:()=>$r,codec:()=>CRe,coerce:()=>J4,config:()=>li,core:()=>va,cuid:()=>FPe,cuid2:()=>jPe,custom:()=>q4,date:()=>pRe,decode:()=>l4,decodeAsync:()=>d4,describe:()=>TRe,discriminatedUnion:()=>j4,e164:()=>JPe,email:()=>APe,emoji:()=>$Pe,encode:()=>c4,encodeAsync:()=>u4,endsWith:()=>ey,enum:()=>Ks,file:()=>vRe,flattenError:()=>O_,float32:()=>nRe,float64:()=>rRe,formatError:()=>M_,function:()=>SRe,getErrorMap:()=>RRe,globalRegistry:()=>Xn,gt:()=>Ll,gte:()=>zo,guid:()=>OPe,hash:()=>tRe,hex:()=>eRe,hostname:()=>XPe,httpUrl:()=>NPe,includes:()=>Q_,instanceof:()=>ORe,int:()=>g4,int32:()=>iRe,int64:()=>aRe,intersection:()=>Mx,ipv4:()=>VPe,ipv6:()=>ZPe,iso:()=>$M,json:()=>DRe,jwt:()=>YPe,keyof:()=>mRe,ksuid:()=>UPe,lazy:()=>ene,length:()=>Nf,literal:()=>ht,locales:()=>U_,looseObject:()=>Ws,lowercase:()=>J_,lt:()=>$l,lte:()=>qs,mac:()=>HPe,map:()=>gRe,maxLength:()=>Rf,maxSize:()=>Pf,meta:()=>ARe,mime:()=>ty,minLength:()=>td,minSize:()=>$p,multipleOf:()=>Np,nan:()=>xRe,nanoid:()=>LPe,nativeEnum:()=>yRe,negative:()=>bM,never:()=>L4,nonnegative:()=>xM,nonoptional:()=>Zte,nonpositive:()=>wM,normalize:()=>ny,null:()=>Ite,nullable:()=>FM,nullish:()=>bRe,number:()=>mr,object:()=>Re,optional:()=>cn,overwrite:()=>Ac,parse:()=>i4,parseAsync:()=>o4,partialRecord:()=>hRe,pipe:()=>jM,positive:()=>vM,prefault:()=>Hte,preprocess:()=>G4,prettifyError:()=>vA,promise:()=>IRe,property:()=>CM,readonly:()=>Yte,record:()=>Gr,refine:()=>rne,regex:()=>K_,regexes:()=>Zs,registry:()=>nx,safeDecode:()=>m4,safeDecodeAsync:()=>h4,safeEncode:()=>p4,safeEncodeAsync:()=>f4,safeParse:()=>s4,safeParseAsync:()=>a4,set:()=>_Re,setErrorMap:()=>PRe,size:()=>W_,slugify:()=>Cx,startsWith:()=>X_,strictObject:()=>fRe,string:()=>U,stringFormat:()=>QPe,stringbool:()=>MRe,success:()=>wRe,superRefine:()=>ine,symbol:()=>lRe,templateLiteral:()=>ERe,toJSONSchema:()=>Ka,toLowerCase:()=>iy,toUpperCase:()=>oy,transform:()=>B4,treeifyError:()=>yA,trim:()=>ry,tuple:()=>Rte,uint32:()=>oRe,uint64:()=>cRe,ulid:()=>zPe,undefined:()=>uRe,union:()=>Fr,unknown:()=>Lr,uppercase:()=>Y_,url:()=>v4,util:()=>me,uuid:()=>MPe,uuidv4:()=>DPe,uuidv6:()=>PPe,uuidv7:()=>RPe,void:()=>dRe,xid:()=>BPe});var $M={};Kd($M,{ZodISODate:()=>PM,ZodISODateTime:()=>DM,ZodISODuration:()=>NM,ZodISOTime:()=>RM,date:()=>t4,datetime:()=>e4,duration:()=>r4,time:()=>n4});var DM=V("ZodISODateTime",(e,t)=>{GA.init(e,t),wr.init(e,t)});function e4(e){return WO(DM,e)}var PM=V("ZodISODate",(e,t)=>{WA.init(e,t),wr.init(e,t)});function t4(e){return KO(PM,e)}var RM=V("ZodISOTime",(e,t)=>{KA.init(e,t),wr.init(e,t)});function n4(e){return JO(RM,e)}var NM=V("ZodISODuration",(e,t)=>{JA.init(e,t),wr.init(e,t)});function r4(e){return YO(NM,e)}var bte=(e,t)=>{qw.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>M_(e,n)},flatten:{value:n=>O_(e,n)},addIssue:{value:n=>{e.issues.push(n),e.message=JSON.stringify(e.issues,k_,2)}},addIssues:{value:n=>{e.issues.push(...n),e.message=JSON.stringify(e.issues,k_,2)}},isEmpty:{get(){return e.issues.length===0}}})},kPe=V("ZodError",bte),Gs=V("ZodError",bte,{Parent:Error});var i4=D_(Gs),o4=P_(Gs),s4=R_(Gs),a4=N_(Gs),c4=bA(Gs),l4=wA(Gs),u4=xA(Gs),d4=CA(Gs),p4=EA(Gs),m4=IA(Gs),f4=SA(Gs),h4=kA(Gs);var gn=V("ZodType",(e,t)=>(Ut.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(me.mergeDefs(t,{checks:[...t.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]})),e.clone=(n,r)=>$r(e,n,r),e.brand=()=>e,e.register=(n,r)=>(n.add(e,r),e),e.parse=(n,r)=>i4(e,n,r,{callee:e.parse}),e.safeParse=(n,r)=>s4(e,n,r),e.parseAsync=(n,r)=>y(null,null,function*(){return o4(e,n,r,{callee:e.parseAsync})}),e.safeParseAsync=(n,r)=>y(null,null,function*(){return a4(e,n,r)}),e.spa=e.safeParseAsync,e.encode=(n,r)=>c4(e,n,r),e.decode=(n,r)=>l4(e,n,r),e.encodeAsync=(n,r)=>y(null,null,function*(){return u4(e,n,r)}),e.decodeAsync=(n,r)=>y(null,null,function*(){return d4(e,n,r)}),e.safeEncode=(n,r)=>p4(e,n,r),e.safeDecode=(n,r)=>m4(e,n,r),e.safeEncodeAsync=(n,r)=>y(null,null,function*(){return f4(e,n,r)}),e.safeDecodeAsync=(n,r)=>y(null,null,function*(){return h4(e,n,r)}),e.refine=(n,r)=>e.check(rne(n,r)),e.superRefine=n=>e.check(ine(n)),e.overwrite=n=>e.check(Ac(n)),e.optional=()=>cn(e),e.nullable=()=>FM(e),e.nullish=()=>cn(FM(e)),e.nonoptional=n=>Zte(e,n),e.array=()=>Ie(e),e.or=n=>Fr([e,n]),e.and=n=>Mx(e,n),e.transform=n=>jM(e,B4(n)),e.default=n=>Ute(e,n),e.prefault=n=>Hte(e,n),e.catch=n=>Wte(e,n),e.pipe=n=>jM(e,n),e.readonly=()=>Yte(e),e.describe=n=>{let r=e.clone();return Xn.add(r,{description:n}),r},Object.defineProperty(e,"description",{get(){return Xn.get(e)?.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return Xn.get(e);let r=e.clone();return Xn.add(r,n[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),_4=V("_ZodString",(e,t)=>{Rp.init(e,t),gn.init(e,t);let n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...r)=>e.check(K_(...r)),e.includes=(...r)=>e.check(Q_(...r)),e.startsWith=(...r)=>e.check(X_(...r)),e.endsWith=(...r)=>e.check(ey(...r)),e.min=(...r)=>e.check(td(...r)),e.max=(...r)=>e.check(Rf(...r)),e.length=(...r)=>e.check(Nf(...r)),e.nonempty=(...r)=>e.check(td(1,...r)),e.lowercase=r=>e.check(J_(r)),e.uppercase=r=>e.check(Y_(r)),e.trim=()=>e.check(ry()),e.normalize=(...r)=>e.check(ny(...r)),e.toLowerCase=()=>e.check(iy()),e.toUpperCase=()=>e.check(oy()),e.slugify=()=>e.check(Cx())}),Sx=V("ZodString",(e,t)=>{Rp.init(e,t),_4.init(e,t),e.email=n=>e.check(rx(y4,n)),e.url=n=>e.check(Z_(zM,n)),e.jwt=n=>e.check(xx(R4,n)),e.emoji=n=>e.check(cx(b4,n)),e.guid=n=>e.check(H_(LM,n)),e.uuid=n=>e.check(ix(nd,n)),e.uuidv4=n=>e.check(ox(nd,n)),e.uuidv6=n=>e.check(sx(nd,n)),e.uuidv7=n=>e.check(ax(nd,n)),e.nanoid=n=>e.check(lx(w4,n)),e.guid=n=>e.check(H_(LM,n)),e.cuid=n=>e.check(ux(x4,n)),e.cuid2=n=>e.check(dx(C4,n)),e.ulid=n=>e.check(px(E4,n)),e.base64=n=>e.check(vx(M4,n)),e.base64url=n=>e.check(bx(D4,n)),e.xid=n=>e.check(mx(I4,n)),e.ksuid=n=>e.check(fx(S4,n)),e.ipv4=n=>e.check(hx(k4,n)),e.ipv6=n=>e.check(gx(T4,n)),e.cidrv4=n=>e.check(_x(A4,n)),e.cidrv6=n=>e.check(yx(O4,n)),e.e164=n=>e.check(wx(P4,n)),e.datetime=n=>e.check(e4(n)),e.date=n=>e.check(t4(n)),e.time=n=>e.check(n4(n)),e.duration=n=>e.check(r4(n))});function U(e){return HO(Sx,e)}var wr=V("ZodStringFormat",(e,t)=>{ir.init(e,t),_4.init(e,t)}),y4=V("ZodEmail",(e,t)=>{FA.init(e,t),wr.init(e,t)});function APe(e){return rx(y4,e)}var LM=V("ZodGUID",(e,t)=>{$A.init(e,t),wr.init(e,t)});function OPe(e){return H_(LM,e)}var nd=V("ZodUUID",(e,t)=>{LA.init(e,t),wr.init(e,t)});function MPe(e){return ix(nd,e)}function DPe(e){return ox(nd,e)}function PPe(e){return sx(nd,e)}function RPe(e){return ax(nd,e)}var zM=V("ZodURL",(e,t)=>{jA.init(e,t),wr.init(e,t)});function v4(e){return Z_(zM,e)}function NPe(e){return Z_(zM,m({protocol:/^https?$/,hostname:Zs.domain},me.normalizeParams(e)))}var b4=V("ZodEmoji",(e,t)=>{zA.init(e,t),wr.init(e,t)});function $Pe(e){return cx(b4,e)}var w4=V("ZodNanoID",(e,t)=>{BA.init(e,t),wr.init(e,t)});function LPe(e){return lx(w4,e)}var x4=V("ZodCUID",(e,t)=>{UA.init(e,t),wr.init(e,t)});function FPe(e){return ux(x4,e)}var C4=V("ZodCUID2",(e,t)=>{VA.init(e,t),wr.init(e,t)});function jPe(e){return dx(C4,e)}var E4=V("ZodULID",(e,t)=>{HA.init(e,t),wr.init(e,t)});function zPe(e){return px(E4,e)}var I4=V("ZodXID",(e,t)=>{ZA.init(e,t),wr.init(e,t)});function BPe(e){return mx(I4,e)}var S4=V("ZodKSUID",(e,t)=>{qA.init(e,t),wr.init(e,t)});function UPe(e){return fx(S4,e)}var k4=V("ZodIPv4",(e,t)=>{YA.init(e,t),wr.init(e,t)});function VPe(e){return hx(k4,e)}var wte=V("ZodMAC",(e,t)=>{XA.init(e,t),wr.init(e,t)});function HPe(e){return qO(wte,e)}var T4=V("ZodIPv6",(e,t)=>{QA.init(e,t),wr.init(e,t)});function ZPe(e){return gx(T4,e)}var A4=V("ZodCIDRv4",(e,t)=>{eO.init(e,t),wr.init(e,t)});function qPe(e){return _x(A4,e)}var O4=V("ZodCIDRv6",(e,t)=>{tO.init(e,t),wr.init(e,t)});function GPe(e){return yx(O4,e)}var M4=V("ZodBase64",(e,t)=>{nO.init(e,t),wr.init(e,t)});function WPe(e){return vx(M4,e)}var D4=V("ZodBase64URL",(e,t)=>{rO.init(e,t),wr.init(e,t)});function KPe(e){return bx(D4,e)}var P4=V("ZodE164",(e,t)=>{iO.init(e,t),wr.init(e,t)});function JPe(e){return wx(P4,e)}var R4=V("ZodJWT",(e,t)=>{oO.init(e,t),wr.init(e,t)});function YPe(e){return xx(R4,e)}var kx=V("ZodCustomStringFormat",(e,t)=>{sO.init(e,t),wr.init(e,t)});function QPe(e,t,n={}){return $f(kx,e,t,n)}function XPe(e){return $f(kx,"hostname",Zs.hostname,e)}function eRe(e){return $f(kx,"hex",Zs.hex,e)}function tRe(e,t){let n=t?.enc??"hex",r=`${e}_${n}`,i=Zs[r];if(!i)throw new Error(`Unrecognized hash format: ${r}`);return $f(kx,r,i,t)}var Tx=V("ZodNumber",(e,t)=>{Jw.init(e,t),gn.init(e,t),e.gt=(r,i)=>e.check(Ll(r,i)),e.gte=(r,i)=>e.check(zo(r,i)),e.min=(r,i)=>e.check(zo(r,i)),e.lt=(r,i)=>e.check($l(r,i)),e.lte=(r,i)=>e.check(qs(r,i)),e.max=(r,i)=>e.check(qs(r,i)),e.int=r=>e.check(g4(r)),e.safe=r=>e.check(g4(r)),e.positive=r=>e.check(Ll(0,r)),e.nonnegative=r=>e.check(zo(0,r)),e.negative=r=>e.check($l(0,r)),e.nonpositive=r=>e.check(qs(0,r)),e.multipleOf=(r,i)=>e.check(Np(r,i)),e.step=(r,i)=>e.check(Np(r,i)),e.finite=()=>e;let n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function mr(e){return QO(Tx,e)}var ay=V("ZodNumberFormat",(e,t)=>{aO.init(e,t),Tx.init(e,t)});function g4(e){return eM(ay,e)}function nRe(e){return tM(ay,e)}function rRe(e){return nM(ay,e)}function iRe(e){return rM(ay,e)}function oRe(e){return iM(ay,e)}var Ax=V("ZodBoolean",(e,t)=>{F_.init(e,t),gn.init(e,t)});function fr(e){return oM(Ax,e)}var Ox=V("ZodBigInt",(e,t)=>{Yw.init(e,t),gn.init(e,t),e.gte=(r,i)=>e.check(zo(r,i)),e.min=(r,i)=>e.check(zo(r,i)),e.gt=(r,i)=>e.check(Ll(r,i)),e.gte=(r,i)=>e.check(zo(r,i)),e.min=(r,i)=>e.check(zo(r,i)),e.lt=(r,i)=>e.check($l(r,i)),e.lte=(r,i)=>e.check(qs(r,i)),e.max=(r,i)=>e.check(qs(r,i)),e.positive=r=>e.check(Ll(BigInt(0),r)),e.negative=r=>e.check($l(BigInt(0),r)),e.nonpositive=r=>e.check(qs(BigInt(0),r)),e.nonnegative=r=>e.check(zo(BigInt(0),r)),e.multipleOf=(r,i)=>e.check(Np(r,i));let n=e._zod.bag;e.minValue=n.minimum??null,e.maxValue=n.maximum??null,e.format=n.format??null});function sRe(e){return aM(Ox,e)}var N4=V("ZodBigIntFormat",(e,t)=>{cO.init(e,t),Ox.init(e,t)});function aRe(e){return lM(N4,e)}function cRe(e){return uM(N4,e)}var xte=V("ZodSymbol",(e,t)=>{lO.init(e,t),gn.init(e,t)});function lRe(e){return dM(xte,e)}var Cte=V("ZodUndefined",(e,t)=>{uO.init(e,t),gn.init(e,t)});function uRe(e){return pM(Cte,e)}var Ete=V("ZodNull",(e,t)=>{dO.init(e,t),gn.init(e,t)});function Ite(e){return mM(Ete,e)}var Ste=V("ZodAny",(e,t)=>{pO.init(e,t),gn.init(e,t)});function $4(){return fM(Ste)}var kte=V("ZodUnknown",(e,t)=>{j_.init(e,t),gn.init(e,t)});function Lr(){return q_(kte)}var Tte=V("ZodNever",(e,t)=>{z_.init(e,t),gn.init(e,t)});function L4(e){return G_(Tte,e)}var Ate=V("ZodVoid",(e,t)=>{mO.init(e,t),gn.init(e,t)});function dRe(e){return hM(Ate,e)}var BM=V("ZodDate",(e,t)=>{fO.init(e,t),gn.init(e,t),e.min=(r,i)=>e.check(zo(r,i)),e.max=(r,i)=>e.check(qs(r,i));let n=e._zod.bag;e.minDate=n.minimum?new Date(n.minimum):null,e.maxDate=n.maximum?new Date(n.maximum):null});function pRe(e){return gM(BM,e)}var Ote=V("ZodArray",(e,t)=>{hO.init(e,t),gn.init(e,t),e.element=t.element,e.min=(n,r)=>e.check(td(n,r)),e.nonempty=n=>e.check(td(1,n)),e.max=(n,r)=>e.check(Rf(n,r)),e.length=(n,r)=>e.check(Nf(n,r)),e.unwrap=()=>e.element});function Ie(e,t){return XU(Ote,e,t)}function mRe(e){let t=e._zod.def.shape;return Ks(Object.keys(t))}var UM=V("ZodObject",(e,t)=>{QU.init(e,t),gn.init(e,t),me.defineLazy(e,"shape",()=>t.shape),e.keyof=()=>Ks(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone(b(m({},e._zod.def),{catchall:n})),e.passthrough=()=>e.clone(b(m({},e._zod.def),{catchall:Lr()})),e.loose=()=>e.clone(b(m({},e._zod.def),{catchall:Lr()})),e.strict=()=>e.clone(b(m({},e._zod.def),{catchall:L4()})),e.strip=()=>e.clone(b(m({},e._zod.def),{catchall:void 0})),e.extend=n=>me.extend(e,n),e.safeExtend=n=>me.safeExtend(e,n),e.merge=n=>me.merge(e,n),e.pick=n=>me.pick(e,n),e.omit=n=>me.omit(e,n),e.partial=(...n)=>me.partial(U4,e,n[0]),e.required=(...n)=>me.required(V4,e,n[0])});function Re(e,t){let n=m({type:"object",shape:e??{}},me.normalizeParams(t));return new UM(n)}function fRe(e,t){return new UM(m({type:"object",shape:e,catchall:L4()},me.normalizeParams(t)))}function Ws(e,t){return new UM(m({type:"object",shape:e,catchall:Lr()},me.normalizeParams(t)))}var F4=V("ZodUnion",(e,t)=>{Qw.init(e,t),gn.init(e,t),e.options=t.options});function Fr(e,t){return new F4(m({type:"union",options:e},me.normalizeParams(t)))}var Mte=V("ZodDiscriminatedUnion",(e,t)=>{F4.init(e,t),gO.init(e,t)});function j4(e,t,n){return new Mte(m({type:"union",options:t,discriminator:e},me.normalizeParams(n)))}var Dte=V("ZodIntersection",(e,t)=>{_O.init(e,t),gn.init(e,t)});function Mx(e,t){return new Dte({type:"intersection",left:e,right:t})}var Pte=V("ZodTuple",(e,t)=>{Xw.init(e,t),gn.init(e,t),e.rest=n=>e.clone(b(m({},e._zod.def),{rest:n}))});function Rte(e,t,n){let r=t instanceof Ut,i=r?n:t,o=r?t:null;return new Pte(m({type:"tuple",items:e,rest:o},me.normalizeParams(i)))}var z4=V("ZodRecord",(e,t)=>{yO.init(e,t),gn.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function Gr(e,t,n){return new z4(m({type:"record",keyType:e,valueType:t},me.normalizeParams(n)))}function hRe(e,t,n){let r=$r(e);return r._zod.values=void 0,new z4(m({type:"record",keyType:r,valueType:t},me.normalizeParams(n)))}var Nte=V("ZodMap",(e,t)=>{vO.init(e,t),gn.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function gRe(e,t,n){return new Nte(m({type:"map",keyType:e,valueType:t},me.normalizeParams(n)))}var $te=V("ZodSet",(e,t)=>{bO.init(e,t),gn.init(e,t),e.min=(...n)=>e.check($p(...n)),e.nonempty=n=>e.check($p(1,n)),e.max=(...n)=>e.check(Pf(...n)),e.size=(...n)=>e.check(W_(...n))});function _Re(e,t){return new $te(m({type:"set",valueType:e},me.normalizeParams(t)))}var Ix=V("ZodEnum",(e,t)=>{wO.init(e,t),gn.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);let n=new Set(Object.keys(t.entries));e.extract=(r,i)=>{let o={};for(let s of r)if(n.has(s))o[s]=t.entries[s];else throw new Error(`Key ${s} not found in enum`);return new Ix(b(m(b(m({},t),{checks:[]}),me.normalizeParams(i)),{entries:o}))},e.exclude=(r,i)=>{let o=m({},t.entries);for(let s of r)if(n.has(s))delete o[s];else throw new Error(`Key ${s} not found in enum`);return new Ix(b(m(b(m({},t),{checks:[]}),me.normalizeParams(i)),{entries:o}))}});function Ks(e,t){let n=Array.isArray(e)?Object.fromEntries(e.map(r=>[r,r])):e;return new Ix(m({type:"enum",entries:n},me.normalizeParams(t)))}function yRe(e,t){return new Ix(m({type:"enum",entries:e},me.normalizeParams(t)))}var Lte=V("ZodLiteral",(e,t)=>{xO.init(e,t),gn.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function ht(e,t){return new Lte(m({type:"literal",values:Array.isArray(e)?e:[e]},me.normalizeParams(t)))}var Fte=V("ZodFile",(e,t)=>{CO.init(e,t),gn.init(e,t),e.min=(n,r)=>e.check($p(n,r)),e.max=(n,r)=>e.check(Pf(n,r)),e.mime=(n,r)=>e.check(ty(Array.isArray(n)?n:[n],r))});function vRe(e){return EM(Fte,e)}var jte=V("ZodTransform",(e,t)=>{EO.init(e,t),gn.init(e,t),e._zod.parse=(n,r)=>{if(r.direction==="backward")throw new Tp(e.constructor.name);n.addIssue=o=>{if(typeof o=="string")n.issues.push(me.issue(o,n.value,t));else{let s=o;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),n.issues.push(me.issue(s))}};let i=t.transform(n.value,n);return i instanceof Promise?i.then(o=>(n.value=o,n)):(n.value=i,n)}});function B4(e){return new jte({type:"transform",transform:e})}var U4=V("ZodOptional",(e,t)=>{Df.init(e,t),gn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function cn(e){return new U4({type:"optional",innerType:e})}var zte=V("ZodNullable",(e,t)=>{IO.init(e,t),gn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function FM(e){return new zte({type:"nullable",innerType:e})}function bRe(e){return cn(FM(e))}var Bte=V("ZodDefault",(e,t)=>{SO.init(e,t),gn.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Ute(e,t){return new Bte({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():me.shallowClone(t)}})}var Vte=V("ZodPrefault",(e,t)=>{kO.init(e,t),gn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Hte(e,t){return new Vte({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():me.shallowClone(t)}})}var V4=V("ZodNonOptional",(e,t)=>{TO.init(e,t),gn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Zte(e,t){return new V4(m({type:"nonoptional",innerType:e},me.normalizeParams(t)))}var qte=V("ZodSuccess",(e,t)=>{AO.init(e,t),gn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function wRe(e){return new qte({type:"success",innerType:e})}var Gte=V("ZodCatch",(e,t)=>{OO.init(e,t),gn.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Wte(e,t){return new Gte({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}var Kte=V("ZodNaN",(e,t)=>{MO.init(e,t),gn.init(e,t)});function xRe(e){return yM(Kte,e)}var H4=V("ZodPipe",(e,t)=>{DO.init(e,t),gn.init(e,t),e.in=t.in,e.out=t.out});function jM(e,t){return new H4({type:"pipe",in:e,out:t})}var Z4=V("ZodCodec",(e,t)=>{H4.init(e,t),B_.init(e,t)});function CRe(e,t,n){return new Z4({type:"pipe",in:e,out:t,transform:n.decode,reverseTransform:n.encode})}var Jte=V("ZodReadonly",(e,t)=>{PO.init(e,t),gn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Yte(e){return new Jte({type:"readonly",innerType:e})}var Qte=V("ZodTemplateLiteral",(e,t)=>{RO.init(e,t),gn.init(e,t)});function ERe(e,t){return new Qte(m({type:"template_literal",parts:e},me.normalizeParams(t)))}var Xte=V("ZodLazy",(e,t)=>{LO.init(e,t),gn.init(e,t),e.unwrap=()=>e._zod.def.getter()});function ene(e){return new Xte({type:"lazy",getter:e})}var tne=V("ZodPromise",(e,t)=>{$O.init(e,t),gn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function IRe(e){return new tne({type:"promise",innerType:e})}var nne=V("ZodFunction",(e,t)=>{NO.init(e,t),gn.init(e,t)});function SRe(e){return new nne({type:"function",input:Array.isArray(e?.input)?Rte(e?.input):e?.input??Ie(Lr()),output:e?.output??Lr()})}var VM=V("ZodCustom",(e,t)=>{FO.init(e,t),gn.init(e,t)});function kRe(e){let t=new pr({check:"custom"});return t._zod.check=e,t}function q4(e,t){return IM(VM,e??(()=>!0),t)}function rne(e,t={}){return SM(VM,e,t)}function ine(e){return kM(e)}var TRe=TM,ARe=AM;function ORe(e,t={error:`Input not instance of ${e.name}`}){let n=new VM(m({type:"custom",check:"custom",fn:r=>r instanceof e,abort:!0},me.normalizeParams(t)));return n._zod.bag.Class=e,n}var MRe=(...e)=>OM({Codec:Z4,Boolean:Ax,String:Sx},...e);function DRe(e){let t=ene(()=>Fr([U(e),mr(),fr(),Ite(),Ie(t),Gr(U(),t)]));return t}function G4(e,t){return jM(B4(e),t)}var K4={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function PRe(e){li({customError:e})}function RRe(){return li().customError}var W4;W4||(W4={});var J4={};Kd(J4,{bigint:()=>FRe,boolean:()=>LRe,date:()=>jRe,number:()=>$Re,string:()=>NRe});function NRe(e){return ZO(Sx,e)}function $Re(e){return XO(Tx,e)}function LRe(e){return sM(Ax,e)}function FRe(e){return cM(Ox,e)}function jRe(e){return _M(BM,e)}li(jO());var ly="2025-06-18";var one=[ly,"2025-03-26","2024-11-05","2024-10-07"],ZM="2.0",Fl=q4(e=>e!==null&&(typeof e=="object"||typeof e=="function")),sne=Fr([U(),mr().int()]),ane=U(),zRe=Ws({progressToken:sne.optional()}),Oc=Ws({_meta:zRe.optional()}),Js=Re({method:U(),params:Oc.optional()}),uy=Ws({_meta:Gr(U(),Lr()).optional()}),Mc=Re({method:U(),params:uy.optional()}),Ja=Ws({_meta:Gr(U(),Lr()).optional()}),qM=Fr([U(),mr().int()]),cne=Re(m({jsonrpc:ht(ZM),id:qM},Js.shape)).strict(),GM=e=>cne.safeParse(e).success,lne=Re(m({jsonrpc:ht(ZM)},Mc.shape)).strict(),une=e=>lne.safeParse(e).success,dne=Re({jsonrpc:ht(ZM),id:qM,result:Ja}).strict(),Dx=e=>dne.safeParse(e).success,Gi=(function(e){return e[e.ConnectionClosed=-32e3]="ConnectionClosed",e[e.RequestTimeout=-32001]="RequestTimeout",e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.UrlElicitationRequired=-32042]="UrlElicitationRequired",e})(Gi||{}),pne=Re({jsonrpc:ht(ZM),id:qM,error:Re({code:mr().int(),message:U(),data:cn(Lr())})}).strict(),mne=e=>pne.safeParse(e).success,WM=Fr([cne,lne,dne,pne]),Ff=Ja.strict(),BRe=uy.extend({requestId:qM,reason:U().optional()}),KM=Mc.extend({method:ht("notifications/cancelled"),params:BRe}),URe=Re({src:U(),mimeType:U().optional(),sizes:Ie(U()).optional()}),Px=Re({icons:Ie(URe).optional()}),cy=Re({name:U(),title:U().optional()}),fne=cy.extend(b(m(m({},cy.shape),Px.shape),{version:U(),websiteUrl:U().optional()})),VRe=Mx(Re({applyDefaults:fr().optional()}),Gr(U(),Lr())),HRe=G4(e=>e&&typeof e=="object"&&!Array.isArray(e)&&Object.keys(e).length===0?{form:{}}:e,Mx(Re({form:VRe.optional(),url:Fl.optional()}),Gr(U(),Lr()).optional())),ZRe=Re({experimental:Gr(U(),Fl).optional(),sampling:Re({context:Fl.optional(),tools:Fl.optional()}).optional(),elicitation:HRe.optional(),roots:Re({listChanged:fr().optional()}).optional()}),qRe=Oc.extend({protocolVersion:U(),capabilities:ZRe,clientInfo:fne}),GRe=Js.extend({method:ht("initialize"),params:qRe});var WRe=Re({experimental:Gr(U(),Fl).optional(),logging:Fl.optional(),completions:Fl.optional(),prompts:cn(Re({listChanged:cn(fr())})),resources:Re({subscribe:fr().optional(),listChanged:fr().optional()}).optional(),tools:Re({listChanged:fr().optional()}).optional()}),X4=Ja.extend({protocolVersion:U(),capabilities:WRe,serverInfo:fne,instructions:U().optional()}),hne=Mc.extend({method:ht("notifications/initialized")}),gne=e=>hne.safeParse(e).success,JM=Js.extend({method:ht("ping")}),KRe=Re({progress:mr(),total:cn(mr()),message:cn(U())}),JRe=Re(b(m(m({},uy.shape),KRe.shape),{progressToken:sne})),dy=Mc.extend({method:ht("notifications/progress"),params:JRe}),YRe=Oc.extend({cursor:ane.optional()}),YM=Js.extend({params:YRe.optional()}),QM=Ja.extend({nextCursor:cn(ane)}),_ne=Re({uri:U(),mimeType:cn(U()),_meta:Gr(U(),Lr()).optional()}),yne=_ne.extend({text:U()}),eV=U().refine(e=>{try{return atob(e),!0}catch{return!1}},{message:"Invalid Base64 string"}),vne=_ne.extend({blob:eV}),bne=Re(b(m(m({},cy.shape),Px.shape),{uri:U(),description:cn(U()),mimeType:cn(U()),_meta:cn(Ws({}))})),QRe=Re(b(m(m({},cy.shape),Px.shape),{uriTemplate:U(),description:cn(U()),mimeType:cn(U()),_meta:cn(Ws({}))})),XRe=YM.extend({method:ht("resources/list")}),py=QM.extend({resources:Ie(bne)}),e1e=YM.extend({method:ht("resources/templates/list")}),tV=QM.extend({resourceTemplates:Ie(QRe)}),nV=Oc.extend({uri:U()}),t1e=nV,n1e=Js.extend({method:ht("resources/read"),params:t1e}),Rx=Ja.extend({contents:Ie(Fr([yne,vne]))}),rV=Mc.extend({method:ht("notifications/resources/list_changed")}),r1e=nV,i1e=Js.extend({method:ht("resources/subscribe"),params:r1e}),o1e=nV,s1e=Js.extend({method:ht("resources/unsubscribe"),params:o1e}),a1e=uy.extend({uri:U()}),c1e=Mc.extend({method:ht("notifications/resources/updated"),params:a1e}),l1e=Re({name:U(),description:cn(U()),required:cn(fr())}),u1e=Re(b(m(m({},cy.shape),Px.shape),{description:cn(U()),arguments:cn(Ie(l1e)),_meta:cn(Ws({}))})),d1e=YM.extend({method:ht("prompts/list")}),Nx=QM.extend({prompts:Ie(u1e)}),p1e=Oc.extend({name:U(),arguments:Gr(U(),U()).optional()}),m1e=Js.extend({method:ht("prompts/get"),params:p1e}),wne=Re({type:ht("text"),text:U(),_meta:Gr(U(),Lr()).optional()}),xne=Re({type:ht("image"),data:eV,mimeType:U(),_meta:Gr(U(),Lr()).optional()}),Cne=Re({type:ht("audio"),data:eV,mimeType:U(),_meta:Gr(U(),Lr()).optional()}),f1e=Re({type:ht("tool_use"),name:U(),id:U(),input:Re({}).passthrough(),_meta:cn(Re({}).passthrough())}).passthrough(),h1e=Re({type:ht("resource"),resource:Fr([yne,vne]),_meta:Gr(U(),Lr()).optional()}),g1e=bne.extend({type:ht("resource_link")}),iV=Fr([wne,xne,Cne,g1e,h1e]),_1e=Re({role:Ks(["user","assistant"]),content:iV}),$x=Ja.extend({description:cn(U()),messages:Ie(_1e)}),y1e=Mc.extend({method:ht("notifications/prompts/list_changed")}),v1e=Re({title:U().optional(),readOnlyHint:fr().optional(),destructiveHint:fr().optional(),idempotentHint:fr().optional(),openWorldHint:fr().optional()}),Ene=Re(b(m(m({},cy.shape),Px.shape),{description:U().optional(),inputSchema:Re({type:ht("object"),properties:Gr(U(),Fl).optional(),required:Ie(U()).optional()}).catchall(Lr()),outputSchema:Re({type:ht("object"),properties:Gr(U(),Fl).optional(),required:Ie(U()).optional()}).catchall(Lr()).optional(),annotations:cn(v1e),_meta:Gr(U(),Lr()).optional()})),b1e=YM.extend({method:ht("tools/list")}),Lx=QM.extend({tools:Ie(Ene)}),jf=Ja.extend({content:Ie(iV).default([]),structuredContent:Gr(U(),Lr()).optional(),isError:cn(fr())}),F_t=jf.or(Ja.extend({toolResult:Lr()})),w1e=Oc.extend({name:U(),arguments:cn(Gr(U(),Lr()))}),x1e=Js.extend({method:ht("tools/call"),params:w1e}),C1e=Mc.extend({method:ht("notifications/tools/list_changed")}),Ine=Ks(["debug","info","notice","warning","error","critical","alert","emergency"]),E1e=Oc.extend({level:Ine}),I1e=Js.extend({method:ht("logging/setLevel"),params:E1e}),S1e=uy.extend({level:Ine,logger:U().optional(),data:Lr()}),oV=Mc.extend({method:ht("notifications/message"),params:S1e}),k1e=Re({name:U().optional()}),T1e=Re({hints:cn(Ie(k1e)),costPriority:cn(mr().min(0).max(1)),speedPriority:cn(mr().min(0).max(1)),intelligencePriority:cn(mr().min(0).max(1))}),A1e=Re({mode:cn(Ks(["auto","required","none"]))}),O1e=Re({type:ht("tool_result"),toolUseId:U().describe("The unique identifier for the corresponding tool call."),content:Ie(iV).default([]),structuredContent:Re({}).passthrough().optional(),isError:cn(fr()),_meta:cn(Re({}).passthrough())}).passthrough(),HM=j4("type",[wne,xne,Cne,f1e,O1e]),M1e=Re({role:Ks(["user","assistant"]),content:Fr([HM,Ie(HM)]),_meta:cn(Re({}).passthrough())}).passthrough(),D1e=Oc.extend({messages:Ie(M1e),modelPreferences:T1e.optional(),systemPrompt:U().optional(),includeContext:Ks(["none","thisServer","allServers"]).optional(),temperature:mr().optional(),maxTokens:mr().int(),stopSequences:Ie(U()).optional(),metadata:Fl.optional(),tools:cn(Ie(Ene)),toolChoice:cn(A1e)}),sV=Js.extend({method:ht("sampling/createMessage"),params:D1e}),P1e=Ja.extend({model:U(),stopReason:cn(Ks(["endTurn","stopSequence","maxTokens","toolUse"]).or(U())),role:Ks(["user","assistant"]),content:Fr([HM,Ie(HM)])}),R1e=Re({type:ht("boolean"),title:U().optional(),description:U().optional(),default:fr().optional()}),N1e=Re({type:ht("string"),title:U().optional(),description:U().optional(),minLength:mr().optional(),maxLength:mr().optional(),format:Ks(["email","uri","date","date-time"]).optional(),default:U().optional()}),$1e=Re({type:Ks(["number","integer"]),title:U().optional(),description:U().optional(),minimum:mr().optional(),maximum:mr().optional(),default:mr().optional()}),L1e=Re({type:ht("string"),title:U().optional(),description:U().optional(),enum:Ie(U()),default:U().optional()}),F1e=Re({type:ht("string"),title:U().optional(),description:U().optional(),oneOf:Ie(Re({const:U(),title:U()})),default:U().optional()}),j1e=Re({type:ht("string"),title:U().optional(),description:U().optional(),enum:Ie(U()),enumNames:Ie(U()).optional(),default:U().optional()}),z1e=Fr([L1e,F1e]),B1e=Re({type:ht("array"),title:U().optional(),description:U().optional(),minItems:mr().optional(),maxItems:mr().optional(),items:Re({type:ht("string"),enum:Ie(U())}),default:Ie(U()).optional()}),U1e=Re({type:ht("array"),title:U().optional(),description:U().optional(),minItems:mr().optional(),maxItems:mr().optional(),items:Re({anyOf:Ie(Re({const:U(),title:U()}))}),default:Ie(U()).optional()}),V1e=Fr([B1e,U1e]),H1e=Fr([j1e,z1e,V1e]),Z1e=Fr([H1e,R1e,N1e,$1e]),q1e=Oc.extend({mode:ht("form").optional(),message:U(),requestedSchema:Re({type:ht("object"),properties:Gr(U(),Z1e),required:Ie(U()).optional()})}),G1e=Oc.extend({mode:ht("url"),message:U(),elicitationId:U(),url:U().url()}),W1e=Fr([q1e,G1e]),Fx=Js.extend({method:ht("elicitation/create"),params:W1e}),K1e=uy.extend({elicitationId:U()}),J1e=Mc.extend({method:ht("notifications/elicitation/complete"),params:K1e}),jx=Ja.extend({action:Ks(["accept","decline","cancel"]),content:Gr(U(),Fr([U(),mr(),fr(),Ie(U())])).optional()}),Y1e=Re({type:ht("ref/resource"),uri:U()});var Q1e=Re({type:ht("ref/prompt"),name:U()}),X1e=Oc.extend({ref:Fr([Q1e,Y1e]),argument:Re({name:U(),value:U()}),context:Re({arguments:Gr(U(),U()).optional()}).optional()}),eNe=Js.extend({method:ht("completion/complete"),params:X1e});var aV=Ja.extend({completion:Ws({values:Ie(U()).max(100),total:cn(mr().int()),hasMore:cn(fr())})}),tNe=Re({uri:U().startsWith("file://"),name:U().optional(),_meta:Gr(U(),Lr()).optional()}),nNe=Js.extend({method:ht("roots/list")}),rNe=Ja.extend({roots:Ie(tNe)}),iNe=Mc.extend({method:ht("notifications/roots/list_changed")}),j_t=Fr([JM,GRe,eNe,I1e,m1e,d1e,XRe,e1e,n1e,i1e,s1e,x1e,b1e]),z_t=Fr([KM,dy,hne,iNe]),B_t=Fr([Ff,P1e,jx,rNe]),U_t=Fr([JM,sV,Fx,nNe]),V_t=Fr([KM,dy,oV,c1e,rV,C1e,y1e,J1e]),H_t=Fr([Ff,X4,aV,$x,Nx,py,tV,Rx,jf,Lx]),qi=class e extends Error{constructor(t,n,r){super(`MCP error ${t}: ${n}`),this.code=t,this.data=r,this.name="McpError"}static fromError(t,n,r){if(t===Gi.UrlElicitationRequired&&r){let i=r;if(i.elicitations)return new Q4(i.elicitations,n)}return new e(t,n,r)}},Q4=class extends qi{constructor(t,n=`URL elicitation${t.length>1?"s":""} required`){super(Gi.UrlElicitationRequired,n,{elicitations:t})}get elicitations(){var t,n;return(n=(t=this.data)===null||t===void 0?void 0:t.elicitations)!==null&&n!==void 0?n:[]}};var oNe=Symbol("Let zodToJsonSchema decide on which parser to use");var Oyt=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function cV(e){let t=MM(e),n=t?.method;if(!n)throw new Error("Schema is missing a method literal");let r=yte(n);if(typeof r!="string")throw new Error("Schema method literal must be a string");return r}function lV(e,t){let n=Lf(e,t);if(!n.success)throw n.error;return n.data}var dNe=6e4,XM=class{constructor(t){this._options=t,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(KM,n=>{let r=this._requestHandlerAbortControllers.get(n.params.requestId);r?.abort(n.params.reason)}),this.setNotificationHandler(dy,n=>{this._onprogress(n)}),this.setRequestHandler(JM,n=>({}))}_setupTimeout(t,n,r,i,o=!1){this._timeoutInfo.set(t,{timeoutId:setTimeout(i,n),startTime:Date.now(),timeout:n,maxTotalTimeout:r,resetTimeoutOnProgress:o,onTimeout:i})}_resetTimeout(t){let n=this._timeoutInfo.get(t);if(!n)return!1;let r=Date.now()-n.startTime;if(n.maxTotalTimeout&&r>=n.maxTotalTimeout)throw this._timeoutInfo.delete(t),qi.fromError(Gi.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:n.maxTotalTimeout,totalElapsed:r});return clearTimeout(n.timeoutId),n.timeoutId=setTimeout(n.onTimeout,n.timeout),!0}_cleanupTimeout(t){let n=this._timeoutInfo.get(t);n&&(clearTimeout(n.timeoutId),this._timeoutInfo.delete(t))}connect(t){return y(this,null,function*(){var n,r,i;this._transport=t;let o=(n=this.transport)===null||n===void 0?void 0:n.onclose;this._transport.onclose=()=>{o?.(),this._onclose()};let s=(r=this.transport)===null||r===void 0?void 0:r.onerror;this._transport.onerror=c=>{s?.(c),this._onerror(c)};let a=(i=this._transport)===null||i===void 0?void 0:i.onmessage;this._transport.onmessage=(c,u)=>{a?.(c,u),Dx(c)||mne(c)?this._onresponse(c):GM(c)?this._onrequest(c,u):une(c)?this._onnotification(c):this._onerror(new Error(`Unknown message type: ${JSON.stringify(c)}`))},yield this._transport.start()})}_onclose(){var t;let n=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,(t=this.onclose)===null||t===void 0||t.call(this);let r=qi.fromError(Gi.ConnectionClosed,"Connection closed");for(let i of n.values())i(r)}_onerror(t){var n;(n=this.onerror)===null||n===void 0||n.call(this,t)}_onnotification(t){var n;let r=(n=this._notificationHandlers.get(t.method))!==null&&n!==void 0?n:this.fallbackNotificationHandler;r!==void 0&&Promise.resolve().then(()=>r(t)).catch(i=>this._onerror(new Error(`Uncaught error in notification handler: ${i}`)))}_onrequest(t,n){var r,i;let o=(r=this._requestHandlers.get(t.method))!==null&&r!==void 0?r:this.fallbackRequestHandler,s=this._transport;if(o===void 0){s?.send({jsonrpc:"2.0",id:t.id,error:{code:Gi.MethodNotFound,message:"Method not found"}}).catch(u=>this._onerror(new Error(`Failed to send an error response: ${u}`)));return}let a=new AbortController;this._requestHandlerAbortControllers.set(t.id,a);let c={signal:a.signal,sessionId:s?.sessionId,_meta:(i=t.params)===null||i===void 0?void 0:i._meta,sendNotification:u=>this.notification(u,{relatedRequestId:t.id}),sendRequest:(u,d,f)=>this.request(u,d,b(m({},f),{relatedRequestId:t.id})),authInfo:n?.authInfo,requestId:t.id,requestInfo:n?.requestInfo};Promise.resolve().then(()=>o(t,c)).then(u=>{if(!a.signal.aborted)return s?.send({result:u,jsonrpc:"2.0",id:t.id})},u=>{var d;if(!a.signal.aborted)return s?.send({jsonrpc:"2.0",id:t.id,error:m({code:Number.isSafeInteger(u.code)?u.code:Gi.InternalError,message:(d=u.message)!==null&&d!==void 0?d:"Internal error"},u.data!==void 0&&{data:u.data})})}).catch(u=>this._onerror(new Error(`Failed to send response: ${u}`))).finally(()=>{this._requestHandlerAbortControllers.delete(t.id)})}_onprogress(t){let c=t.params,{progressToken:n}=c,r=se(c,["progressToken"]),i=Number(n),o=this._progressHandlers.get(i);if(!o){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(t)}`));return}let s=this._responseHandlers.get(i),a=this._timeoutInfo.get(i);if(a&&s&&a.resetTimeoutOnProgress)try{this._resetTimeout(i)}catch(u){s(u);return}o(r)}_onresponse(t){let n=Number(t.id),r=this._responseHandlers.get(n);if(r===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(t)}`));return}if(this._responseHandlers.delete(n),this._progressHandlers.delete(n),this._cleanupTimeout(n),Dx(t))r(t);else{let i=qi.fromError(t.error.code,t.error.message,t.error.data);r(i)}}get transport(){return this._transport}close(){return y(this,null,function*(){var t;yield(t=this._transport)===null||t===void 0?void 0:t.close()})}request(t,n,r){let{relatedRequestId:i,resumptionToken:o,onresumptiontoken:s}=r??{};return new Promise((a,c)=>{var u,d,f,g,h,v;if(!this._transport){c(new Error("Not connected"));return}((u=this._options)===null||u===void 0?void 0:u.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(t.method),(d=r?.signal)===null||d===void 0||d.throwIfAborted();let x=this._requestMessageId++,E=b(m({},t),{jsonrpc:"2.0",id:x});r?.onprogress&&(this._progressHandlers.set(x,r.onprogress),E.params=b(m({},t.params),{_meta:b(m({},((f=t.params)===null||f===void 0?void 0:f._meta)||{}),{progressToken:x})}));let C=P=>{var F;this._responseHandlers.delete(x),this._progressHandlers.delete(x),this._cleanupTimeout(x),(F=this._transport)===null||F===void 0||F.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:x,reason:String(P)}},{relatedRequestId:i,resumptionToken:o,onresumptiontoken:s}).catch(B=>this._onerror(new Error(`Failed to send cancellation: ${B}`))),c(P)};this._responseHandlers.set(x,P=>{var F;if(!(!((F=r?.signal)===null||F===void 0)&&F.aborted)){if(P instanceof Error)return c(P);try{let B=Lf(n,P.result);B.success?a(B.data):c(B.error)}catch(B){c(B)}}}),(g=r?.signal)===null||g===void 0||g.addEventListener("abort",()=>{var P;C((P=r?.signal)===null||P===void 0?void 0:P.reason)});let S=(h=r?.timeout)!==null&&h!==void 0?h:dNe,A=()=>C(qi.fromError(Gi.RequestTimeout,"Request timed out",{timeout:S}));this._setupTimeout(x,S,r?.maxTotalTimeout,A,(v=r?.resetTimeoutOnProgress)!==null&&v!==void 0?v:!1),this._transport.send(E,{relatedRequestId:i,resumptionToken:o,onresumptiontoken:s}).catch(P=>{this._cleanupTimeout(x),c(P)})})}notification(t,n){return y(this,null,function*(){var r,i;if(!this._transport)throw new Error("Not connected");if(this.assertNotificationCapability(t.method),((i=(r=this._options)===null||r===void 0?void 0:r.debouncedNotificationMethods)!==null&&i!==void 0?i:[]).includes(t.method)&&!t.params&&!n?.relatedRequestId){if(this._pendingDebouncedNotifications.has(t.method))return;this._pendingDebouncedNotifications.add(t.method),Promise.resolve().then(()=>{var c;if(this._pendingDebouncedNotifications.delete(t.method),!this._transport)return;let u=b(m({},t),{jsonrpc:"2.0"});(c=this._transport)===null||c===void 0||c.send(u,n).catch(d=>this._onerror(d))});return}let a=b(m({},t),{jsonrpc:"2.0"});yield this._transport.send(a,n)})}setRequestHandler(t,n){let r=cV(t);this.assertRequestHandlerCapability(r),this._requestHandlers.set(r,(i,o)=>{let s=lV(t,i);return Promise.resolve(n(s,o))})}removeRequestHandler(t){this._requestHandlers.delete(t)}assertCanSetRequestHandler(t){if(this._requestHandlers.has(t))throw new Error(`A request handler for ${t} already exists, which would be overridden`)}setNotificationHandler(t,n){let r=cV(t);this._notificationHandlers.set(r,i=>{let o=lV(t,i);return Promise.resolve(n(o))})}removeNotificationHandler(t){this._notificationHandlers.delete(t)}};function Sne(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function kne(e,t){let n=m({},e);for(let r in t){let i=r,o=t[i];if(o===void 0)continue;let s=n[i];Sne(s)&&Sne(o)?n[i]=m(m({},s),o):n[i]=o}return n}var _oe=_c(K3(),1),yoe=_c(goe(),1);function tze(){let e=new _oe.Ajv({strict:!1,validateFormats:!0,validateSchema:!1,allErrors:!0});return(0,yoe.default)(e),e}var FD=class{constructor(t){this._ajv=t??tze()}getValidator(t){var n;let r="$id"in t&&typeof t.$id=="string"?(n=this._ajv.getSchema(t.$id))!==null&&n!==void 0?n:this._ajv.compile(t):this._ajv.compile(t);return i=>r(i)?{valid:!0,data:i,errorMessage:void 0}:{valid:!1,data:void 0,errorMessage:this._ajv.errorsText(r.errors)}}};function jD(e,t){if(!(!e||t===null||typeof t!="object")){if(e.type==="object"&&e.properties&&typeof e.properties=="object"){let n=t,r=e.properties;for(let i of Object.keys(r)){let o=r[i];n[i]===void 0&&Object.prototype.hasOwnProperty.call(o,"default")&&(n[i]=o.default),n[i]!==void 0&&jD(o,n[i])}}if(Array.isArray(e.anyOf))for(let n of e.anyOf)jD(n,t);if(Array.isArray(e.oneOf))for(let n of e.oneOf)jD(n,t)}}function nze(e){if(!e)return{supportsFormMode:!1,supportsUrlMode:!1};let t=e.form!==void 0,n=e.url!==void 0;return{supportsFormMode:t||!t&&!n,supportsUrlMode:n}}var zD=class e extends XM{constructor(t,n){var r,i;super(n),this._clientInfo=t,this._cachedToolOutputValidators=new Map,this._capabilities=(r=n?.capabilities)!==null&&r!==void 0?r:{},this._jsonSchemaValidator=(i=n?.jsonSchemaValidator)!==null&&i!==void 0?i:new FD}registerCapabilities(t){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=kne(this._capabilities,t)}setRequestHandler(t,n){var r,i,o;let s=MM(t),a=s?.method;if(!a)throw new Error("Schema is missing a method literal");let c;if(sy(a)){let d=a,f=(r=d._zod)===null||r===void 0?void 0:r.def;c=(i=f?.value)!==null&&i!==void 0?i:d.value}else{let d=a,f=d._def;c=(o=f?.value)!==null&&o!==void 0?o:d.value}if(typeof c!="string")throw new Error("Schema method literal must be a string");if(c==="elicitation/create"){let d=(f,g)=>y(this,null,function*(){var h,v,x;let E=Lf(Fx,f);if(!E.success){let pe=E.error instanceof Error?E.error.message:String(E.error);throw new qi(Gi.InvalidParams,`Invalid elicitation request: ${pe}`)}let{params:C}=E.data,S=(h=C.mode)!==null&&h!==void 0?h:"form",{supportsFormMode:A,supportsUrlMode:P}=nze(this._capabilities.elicitation);if(S==="form"&&!A)throw new qi(Gi.InvalidParams,"Client does not support form-mode elicitation requests");if(S==="url"&&!P)throw new qi(Gi.InvalidParams,"Client does not support URL-mode elicitation requests");let F=yield Promise.resolve(n(f,g)),B=Lf(jx,F);if(!B.success){let pe=B.error instanceof Error?B.error.message:String(B.error);throw new qi(Gi.InvalidParams,`Invalid elicitation result: ${pe}`)}let ee=B.data,D=S==="form"?C.requestedSchema:void 0;if(S==="form"&&ee.action==="accept"&&ee.content&&D&&!((x=(v=this._capabilities.elicitation)===null||v===void 0?void 0:v.form)===null||x===void 0)&&x.applyDefaults)try{jD(D,ee.content)}catch{}return ee});return super.setRequestHandler(t,d)}return super.setRequestHandler(t,n)}assertCapability(t,n){var r;if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r[t]))throw new Error(`Server does not support ${t} (required for ${n})`)}connect(t,n){return y(this,null,function*(){if(yield fi(e.prototype,this,"connect").call(this,t),t.sessionId===void 0)try{let r=yield this.request({method:"initialize",params:{protocolVersion:ly,capabilities:this._capabilities,clientInfo:this._clientInfo}},X4,n);if(r===void 0)throw new Error(`Server sent invalid initialize result: ${r}`);if(!one.includes(r.protocolVersion))throw new Error(`Server's protocol version is not supported: ${r.protocolVersion}`);this._serverCapabilities=r.capabilities,this._serverVersion=r.serverInfo,t.setProtocolVersion&&t.setProtocolVersion(r.protocolVersion),this._instructions=r.instructions,yield this.notification({method:"notifications/initialized"})}catch(r){throw this.close(),r}})}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(t){var n,r,i,o,s;switch(t){case"logging/setLevel":if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n.logging))throw new Error(`Server does not support logging (required for ${t})`);break;case"prompts/get":case"prompts/list":if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r.prompts))throw new Error(`Server does not support prompts (required for ${t})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!(!((i=this._serverCapabilities)===null||i===void 0)&&i.resources))throw new Error(`Server does not support resources (required for ${t})`);if(t==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${t})`);break;case"tools/call":case"tools/list":if(!(!((o=this._serverCapabilities)===null||o===void 0)&&o.tools))throw new Error(`Server does not support tools (required for ${t})`);break;case"completion/complete":if(!(!((s=this._serverCapabilities)===null||s===void 0)&&s.completions))throw new Error(`Server does not support completions (required for ${t})`);break;case"initialize":break;case"ping":break}}assertNotificationCapability(t){var n;switch(t){case"notifications/roots/list_changed":if(!(!((n=this._capabilities.roots)===null||n===void 0)&&n.listChanged))throw new Error(`Client does not support roots list changed notifications (required for ${t})`);break;case"notifications/initialized":break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(t){switch(t){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${t})`);break;case"elicitation/create":if(!this._capabilities.elicitation)throw new Error(`Client does not support elicitation capability (required for ${t})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${t})`);break;case"ping":break}}ping(t){return y(this,null,function*(){return this.request({method:"ping"},Ff,t)})}complete(t,n){return y(this,null,function*(){return this.request({method:"completion/complete",params:t},aV,n)})}setLoggingLevel(t,n){return y(this,null,function*(){return this.request({method:"logging/setLevel",params:{level:t}},Ff,n)})}getPrompt(t,n){return y(this,null,function*(){return this.request({method:"prompts/get",params:t},$x,n)})}listPrompts(t,n){return y(this,null,function*(){return this.request({method:"prompts/list",params:t},Nx,n)})}listResources(t,n){return y(this,null,function*(){return this.request({method:"resources/list",params:t},py,n)})}listResourceTemplates(t,n){return y(this,null,function*(){return this.request({method:"resources/templates/list",params:t},tV,n)})}readResource(t,n){return y(this,null,function*(){return this.request({method:"resources/read",params:t},Rx,n)})}subscribeResource(t,n){return y(this,null,function*(){return this.request({method:"resources/subscribe",params:t},Ff,n)})}unsubscribeResource(t,n){return y(this,null,function*(){return this.request({method:"resources/unsubscribe",params:t},Ff,n)})}callTool(i){return y(this,arguments,function*(t,n=jf,r){let o=yield this.request({method:"tools/call",params:t},n,r),s=this.getToolOutputValidator(t.name);if(s){if(!o.structuredContent&&!o.isError)throw new qi(Gi.InvalidRequest,`Tool ${t.name} has an output schema but did not return structured content`);if(o.structuredContent)try{let a=s(o.structuredContent);if(!a.valid)throw new qi(Gi.InvalidParams,`Structured content does not match the tool's output schema: ${a.errorMessage}`)}catch(a){throw a instanceof qi?a:new qi(Gi.InvalidParams,`Failed to validate structured content: ${a instanceof Error?a.message:String(a)}`)}}return o})}cacheToolOutputSchemas(t){this._cachedToolOutputValidators.clear();for(let n of t)if(n.outputSchema){let r=this._jsonSchemaValidator.getValidator(n.outputSchema);this._cachedToolOutputValidators.set(n.name,r)}}getToolOutputValidator(t){return this._cachedToolOutputValidators.get(t)}listTools(t,n){return y(this,null,function*(){let r=yield this.request({method:"tools/list",params:t},Lx,n);return this.cacheToolOutputSchemas(r.tools),r})}sendRootsListChanged(){return y(this,null,function*(){return this.notification({method:"notifications/roots/list_changed"})})}};function BD(e){return e?e instanceof Headers?Object.fromEntries(e.entries()):Array.isArray(e)?Object.fromEntries(e):m({},e):{}}function voe(e=fetch,t){return t?(n,r)=>y(null,null,function*(){let i=b(m(m({},t),r),{headers:r?.headers?m(m({},BD(t.headers)),BD(r.headers)):t.headers});return e(n,i)}):e}var r6;r6=globalThis.crypto;function rze(e){return y(this,null,function*(){return(yield r6).getRandomValues(new Uint8Array(e))})}function ize(e){return y(this,null,function*(){let t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~",n=Math.pow(2,8)-Math.pow(2,8)%t.length,r="";for(;r.length<e;){let i=yield rze(e-r.length);for(let o of i)o<n&&(r+=t[o%t.length])}return r})}function oze(e){return y(this,null,function*(){return yield ize(e)})}function sze(e){return y(this,null,function*(){let t=yield(yield r6).subtle.digest("SHA-256",new TextEncoder().encode(e));return btoa(String.fromCharCode(...new Uint8Array(t))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")})}function i6(e){return y(this,null,function*(){if(e||(e=43),e<43||e>128)throw`Expected a length between 43 and 128. Received ${e}.`;let t=yield oze(e),n=yield sze(t);return{code_verifier:t,code_challenge:n}})}var Eo=v4().superRefine((e,t)=>{if(!URL.canParse(e))return t.addIssue({code:K4.custom,message:"URL must be parseable",fatal:!0}),S_}).refine(e=>{let t=new URL(e);return t.protocol!=="javascript:"&&t.protocol!=="data:"&&t.protocol!=="vbscript:"},{message:"URL cannot use javascript:, data:, or vbscript: scheme"}),woe=Ws({resource:U().url(),authorization_servers:Ie(Eo).optional(),jwks_uri:U().url().optional(),scopes_supported:Ie(U()).optional(),bearer_methods_supported:Ie(U()).optional(),resource_signing_alg_values_supported:Ie(U()).optional(),resource_name:U().optional(),resource_documentation:U().optional(),resource_policy_uri:U().url().optional(),resource_tos_uri:U().url().optional(),tls_client_certificate_bound_access_tokens:fr().optional(),authorization_details_types_supported:Ie(U()).optional(),dpop_signing_alg_values_supported:Ie(U()).optional(),dpop_bound_access_tokens_required:fr().optional()}),o6=Ws({issuer:U(),authorization_endpoint:Eo,token_endpoint:Eo,registration_endpoint:Eo.optional(),scopes_supported:Ie(U()).optional(),response_types_supported:Ie(U()),response_modes_supported:Ie(U()).optional(),grant_types_supported:Ie(U()).optional(),token_endpoint_auth_methods_supported:Ie(U()).optional(),token_endpoint_auth_signing_alg_values_supported:Ie(U()).optional(),service_documentation:Eo.optional(),revocation_endpoint:Eo.optional(),revocation_endpoint_auth_methods_supported:Ie(U()).optional(),revocation_endpoint_auth_signing_alg_values_supported:Ie(U()).optional(),introspection_endpoint:U().optional(),introspection_endpoint_auth_methods_supported:Ie(U()).optional(),introspection_endpoint_auth_signing_alg_values_supported:Ie(U()).optional(),code_challenge_methods_supported:Ie(U()).optional(),client_id_metadata_document_supported:fr().optional()}),aze=Ws({issuer:U(),authorization_endpoint:Eo,token_endpoint:Eo,userinfo_endpoint:Eo.optional(),jwks_uri:Eo,registration_endpoint:Eo.optional(),scopes_supported:Ie(U()).optional(),response_types_supported:Ie(U()),response_modes_supported:Ie(U()).optional(),grant_types_supported:Ie(U()).optional(),acr_values_supported:Ie(U()).optional(),subject_types_supported:Ie(U()),id_token_signing_alg_values_supported:Ie(U()),id_token_encryption_alg_values_supported:Ie(U()).optional(),id_token_encryption_enc_values_supported:Ie(U()).optional(),userinfo_signing_alg_values_supported:Ie(U()).optional(),userinfo_encryption_alg_values_supported:Ie(U()).optional(),userinfo_encryption_enc_values_supported:Ie(U()).optional(),request_object_signing_alg_values_supported:Ie(U()).optional(),request_object_encryption_alg_values_supported:Ie(U()).optional(),request_object_encryption_enc_values_supported:Ie(U()).optional(),token_endpoint_auth_methods_supported:Ie(U()).optional(),token_endpoint_auth_signing_alg_values_supported:Ie(U()).optional(),display_values_supported:Ie(U()).optional(),claim_types_supported:Ie(U()).optional(),claims_supported:Ie(U()).optional(),service_documentation:U().optional(),claims_locales_supported:Ie(U()).optional(),ui_locales_supported:Ie(U()).optional(),claims_parameter_supported:fr().optional(),request_parameter_supported:fr().optional(),request_uri_parameter_supported:fr().optional(),require_request_uri_registration:fr().optional(),op_policy_uri:Eo.optional(),op_tos_uri:Eo.optional(),client_id_metadata_document_supported:fr().optional()}),xoe=Re(m(m({},aze.shape),o6.pick({code_challenge_methods_supported:!0}).shape)),s6=Re({access_token:U(),id_token:U().optional(),token_type:U(),expires_in:mr().optional(),scope:U().optional(),refresh_token:U().optional()}).strip(),Coe=Re({error:U(),error_description:U().optional(),error_uri:U().optional()}),boe=Eo.optional().or(ht("").transform(()=>{})),cze=Re({redirect_uris:Ie(Eo),token_endpoint_auth_method:U().optional(),grant_types:Ie(U()).optional(),response_types:Ie(U()).optional(),client_name:U().optional(),client_uri:Eo.optional(),logo_uri:boe,scope:U().optional(),contacts:Ie(U()).optional(),tos_uri:boe,policy_uri:U().optional(),jwks_uri:Eo.optional(),jwks:$4().optional(),software_id:U().optional(),software_version:U().optional(),software_statement:U().optional()}).strip(),lze=Re({client_id:U(),client_secret:U().optional(),client_id_issued_at:mr().optional(),client_secret_expires_at:mr().optional()}).strip(),Eoe=cze.merge(lze),xxt=Re({error:U(),error_description:U().optional()}).strip(),Cxt=Re({token:U(),token_type_hint:U().optional()}).strip();function Ioe(e){let t=typeof e=="string"?new URL(e):new URL(e.href);return t.hash="",t}function Soe({requestedResource:e,configuredResource:t}){let n=typeof e=="string"?new URL(e):new URL(e.href),r=typeof t=="string"?new URL(t):new URL(t.href);if(n.origin!==r.origin||n.pathname.length<r.pathname.length)return!1;let i=n.pathname.endsWith("/")?n.pathname:n.pathname+"/",o=r.pathname.endsWith("/")?r.pathname:r.pathname+"/";return i.startsWith(o)}var Di=class extends Error{constructor(t,n){super(t),this.errorUri=n,this.name=this.constructor.name}toResponseObject(){let t={error:this.errorCode,error_description:this.message};return this.errorUri&&(t.error_uri=this.errorUri),t}get errorCode(){return this.constructor.errorCode}},koe=(()=>{class e extends Di{}return e.errorCode="invalid_request",e})(),UD=(()=>{class e extends Di{}return e.errorCode="invalid_client",e})(),VD=(()=>{class e extends Di{}return e.errorCode="invalid_grant",e})(),HD=(()=>{class e extends Di{}return e.errorCode="unauthorized_client",e})(),Toe=(()=>{class e extends Di{}return e.errorCode="unsupported_grant_type",e})(),Aoe=(()=>{class e extends Di{}return e.errorCode="invalid_scope",e})(),Ooe=(()=>{class e extends Di{}return e.errorCode="access_denied",e})(),Ty=(()=>{class e extends Di{}return e.errorCode="server_error",e})(),Moe=(()=>{class e extends Di{}return e.errorCode="temporarily_unavailable",e})(),Doe=(()=>{class e extends Di{}return e.errorCode="unsupported_response_type",e})(),Poe=(()=>{class e extends Di{}return e.errorCode="unsupported_token_type",e})(),Roe=(()=>{class e extends Di{}return e.errorCode="invalid_token",e})(),Noe=(()=>{class e extends Di{}return e.errorCode="method_not_allowed",e})(),$oe=(()=>{class e extends Di{}return e.errorCode="too_many_requests",e})(),ZD=(()=>{class e extends Di{}return e.errorCode="invalid_client_metadata",e})(),Loe=(()=>{class e extends Di{}return e.errorCode="insufficient_scope",e})();var Foe={[koe.errorCode]:koe,[UD.errorCode]:UD,[VD.errorCode]:VD,[HD.errorCode]:HD,[Toe.errorCode]:Toe,[Aoe.errorCode]:Aoe,[Ooe.errorCode]:Ooe,[Ty.errorCode]:Ty,[Moe.errorCode]:Moe,[Doe.errorCode]:Doe,[Poe.errorCode]:Poe,[Roe.errorCode]:Roe,[Noe.errorCode]:Noe,[$oe.errorCode]:$oe,[ZD.errorCode]:ZD,[Loe.errorCode]:Loe};var ud=class extends Error{constructor(t){super(t??"Unauthorized")}};function uze(e){return["client_secret_basic","client_secret_post","none"].includes(e)}var a6="code",c6="S256";function zoe(e,t){let n=e.client_secret!==void 0;return t.length===0?n?"client_secret_post":"none":"token_endpoint_auth_method"in e&&e.token_endpoint_auth_method&&uze(e.token_endpoint_auth_method)&&t.includes(e.token_endpoint_auth_method)?e.token_endpoint_auth_method:n&&t.includes("client_secret_basic")?"client_secret_basic":n&&t.includes("client_secret_post")?"client_secret_post":t.includes("none")?"none":n?"client_secret_post":"none"}function Boe(e,t,n,r){let{client_id:i,client_secret:o}=t;switch(e){case"client_secret_basic":dze(i,o,n);return;case"client_secret_post":pze(i,o,r);return;case"none":mze(i,r);return;default:throw new Error(`Unsupported client authentication method: ${e}`)}}function dze(e,t,n){if(!t)throw new Error("client_secret_basic authentication requires a client_secret");let r=btoa(`${e}:${t}`);n.set("Authorization",`Basic ${r}`)}function pze(e,t,n){n.set("client_id",e),t&&n.set("client_secret",t)}function mze(e,t){t.set("client_id",e)}function d6(e){return y(this,null,function*(){let t=e instanceof Response?e.status:void 0,n=e instanceof Response?yield e.text():e;try{let r=Coe.parse(JSON.parse(n)),{error:i,error_description:o,error_uri:s}=r,a=Foe[i]||Ty;return new a(o||"",s)}catch(r){let i=`${t?`HTTP ${t}: `:""}Invalid OAuth error response: ${r}. Raw body: ${n}`;return new Ty(i)}})}function pC(e,t){return y(this,null,function*(){var n,r;try{return yield l6(e,t)}catch(i){if(i instanceof UD||i instanceof HD)return yield(n=e.invalidateCredentials)===null||n===void 0?void 0:n.call(e,"all"),yield l6(e,t);if(i instanceof VD)return yield(r=e.invalidateCredentials)===null||r===void 0?void 0:r.call(e,"tokens"),yield l6(e,t);throw i}})}function l6(s,a){return y(this,arguments,function*(e,{serverUrl:t,authorizationCode:n,scope:r,resourceMetadataUrl:i,fetchFn:o}){var c,u;let d,f;try{d=yield gze(t,{resourceMetadataUrl:i},o),d.authorization_servers&&d.authorization_servers.length>0&&(f=d.authorization_servers[0])}catch{}f||(f=new URL("/",t));let g=yield hze(t,e,d),h=yield wze(f,{fetchFn:o}),v=yield Promise.resolve(e.clientInformation());if(!v){if(n!==void 0)throw new Error("Existing OAuth client information is required when exchanging an authorization code");let A=h?.client_id_metadata_document_supported===!0,P=e.clientMetadataUrl;if(P&&!fze(P))throw new ZD(`clientMetadataUrl must be a valid HTTPS URL with a non-root pathname, got: ${P}`);if(A&&P)v={client_id:P},yield(c=e.saveClientInformation)===null||c===void 0?void 0:c.call(e,v);else{if(!e.saveClientInformation)throw new Error("OAuth client information must be saveable for dynamic registration");let B=yield Ize(f,{metadata:h,clientMetadata:e.clientMetadata,fetchFn:o});yield e.saveClientInformation(B),v=B}}if(n!==void 0){let A=yield e.codeVerifier(),P=yield Cze(f,{metadata:h,clientInformation:v,authorizationCode:n,codeVerifier:A,redirectUri:e.redirectUrl,resource:g,addClientAuthentication:e.addClientAuthentication,fetchFn:o});return yield e.saveTokens(P),"AUTHORIZED"}let x=yield e.tokens();if(x?.refresh_token)try{let A=yield Eze(f,{metadata:h,clientInformation:v,refreshToken:x.refresh_token,resource:g,addClientAuthentication:e.addClientAuthentication,fetchFn:o});return yield e.saveTokens(A),"AUTHORIZED"}catch(A){if(!(!(A instanceof Di)||A instanceof Ty))throw A}let E=e.state?yield e.state():void 0,{authorizationUrl:C,codeVerifier:S}=yield xze(f,{metadata:h,clientInformation:v,state:E,redirectUrl:e.redirectUrl,scope:r||((u=d?.scopes_supported)===null||u===void 0?void 0:u.join(" "))||e.clientMetadata.scope,resource:g});return yield e.saveCodeVerifier(S),yield e.redirectToAuthorization(C),"REDIRECT"})}function fze(e){if(!e)return!1;try{let t=new URL(e);return t.protocol==="https:"&&t.pathname!=="/"}catch{return!1}}function hze(e,t,n){return y(this,null,function*(){let r=Ioe(e);if(t.validateResourceURL)return yield t.validateResourceURL(r,n?.resource);if(n){if(!Soe({requestedResource:r,configuredResource:n.resource}))throw new Error(`Protected resource ${n.resource} does not match expected ${r} (or origin)`);return new URL(n.resource)}})}function p6(e){let t=e.headers.get("WWW-Authenticate");if(!t)return{};let[n,r]=t.split(" ");if(n.toLowerCase()!=="bearer"||!r)return{};let i=u6(e,"resource_metadata")||void 0,o;if(i)try{o=new URL(i)}catch{}let s=u6(e,"scope")||void 0,a=u6(e,"error")||void 0;return{resourceMetadataUrl:o,scope:s,error:a}}function u6(e,t){let n=e.headers.get("WWW-Authenticate");if(!n)return null;let r=new RegExp(`${t}=(?:"([^"]+)"|([^\\s,]+))`),i=n.match(r);return i?i[1]||i[2]:null}function gze(r,i){return y(this,arguments,function*(e,t,n=fetch){let o=yield vze(e,"oauth-protected-resource",n,{protocolVersion:t?.protocolVersion,metadataUrl:t?.resourceMetadataUrl});if(!o||o.status===404)throw new Error("Resource server does not implement OAuth 2.0 Protected Resource Metadata.");if(!o.ok)throw new Error(`HTTP ${o.status} trying to load well-known OAuth protected resource metadata.`);return woe.parse(yield o.json())})}function m6(r,i){return y(this,arguments,function*(e,t,n=fetch){try{return yield n(e,{headers:t})}catch(o){if(o instanceof TypeError)return t?m6(e,void 0,n):void 0;throw o}})}function _ze(e,t="",n={}){return t.endsWith("/")&&(t=t.slice(0,-1)),n.prependPathname?`${t}/.well-known/${e}`:`/.well-known/${e}${t}`}function joe(r,i){return y(this,arguments,function*(e,t,n=fetch){return yield m6(e,{"MCP-Protocol-Version":t},n)})}function yze(e,t){return!e||e.status>=400&&e.status<500&&t!=="/"}function vze(e,t,n,r){return y(this,null,function*(){var i,o;let s=new URL(e),a=(i=r?.protocolVersion)!==null&&i!==void 0?i:ly,c;if(r?.metadataUrl)c=new URL(r.metadataUrl);else{let d=_ze(t,s.pathname);c=new URL(d,(o=r?.metadataServerUrl)!==null&&o!==void 0?o:s),c.search=s.search}let u=yield joe(c,a,n);if(!r?.metadataUrl&&yze(u,s.pathname)){let d=new URL(`/.well-known/${t}`,s);u=yield joe(d,a,n)}return u})}function bze(e){let t=typeof e=="string"?new URL(e):e,n=t.pathname!=="/",r=[];if(!n)return r.push({url:new URL("/.well-known/oauth-authorization-server",t.origin),type:"oauth"}),r.push({url:new URL("/.well-known/openid-configuration",t.origin),type:"oidc"}),r;let i=t.pathname;return i.endsWith("/")&&(i=i.slice(0,-1)),r.push({url:new URL(`/.well-known/oauth-authorization-server${i}`,t.origin),type:"oauth"}),r.push({url:new URL(`/.well-known/openid-configuration${i}`,t.origin),type:"oidc"}),r.push({url:new URL(`${i}/.well-known/openid-configuration`,t.origin),type:"oidc"}),r}function wze(r){return y(this,arguments,function*(e,{fetchFn:t=fetch,protocolVersion:n=ly}={}){let i={"MCP-Protocol-Version":n,Accept:"application/json"},o=bze(e);for(let{url:s,type:a}of o){let c=yield m6(s,i,t);if(c){if(!c.ok){if(c.status>=400&&c.status<500)continue;throw new Error(`HTTP ${c.status} trying to load ${a==="oauth"?"OAuth":"OpenID provider"} metadata from ${s}`)}return a==="oauth"?o6.parse(yield c.json()):xoe.parse(yield c.json())}}})}function xze(a,c){return y(this,arguments,function*(e,{metadata:t,clientInformation:n,redirectUrl:r,scope:i,state:o,resource:s}){let u;if(t){if(u=new URL(t.authorization_endpoint),!t.response_types_supported.includes(a6))throw new Error(`Incompatible auth server: does not support response type ${a6}`);if(t.code_challenge_methods_supported&&!t.code_challenge_methods_supported.includes(c6))throw new Error(`Incompatible auth server: does not support code challenge method ${c6}`)}else u=new URL("/authorize",e);let d=yield i6(),f=d.code_verifier,g=d.code_challenge;return u.searchParams.set("response_type",a6),u.searchParams.set("client_id",n.client_id),u.searchParams.set("code_challenge",g),u.searchParams.set("code_challenge_method",c6),u.searchParams.set("redirect_uri",String(r)),o&&u.searchParams.set("state",o),i&&u.searchParams.set("scope",i),i?.includes("offline_access")&&u.searchParams.append("prompt","consent"),s&&u.searchParams.set("resource",s.href),{authorizationUrl:u,codeVerifier:f}})}function Cze(u,d){return y(this,arguments,function*(e,{metadata:t,clientInformation:n,authorizationCode:r,codeVerifier:i,redirectUri:o,resource:s,addClientAuthentication:a,fetchFn:c}){var f;let g="authorization_code",h=t?.token_endpoint?new URL(t.token_endpoint):new URL("/token",e);if(t?.grant_types_supported&&!t.grant_types_supported.includes(g))throw new Error(`Incompatible auth server: does not support grant type ${g}`);let v=new Headers({"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}),x=new URLSearchParams({grant_type:g,code:r,code_verifier:i,redirect_uri:String(o)});if(a)a(v,x,e,t);else{let C=(f=t?.token_endpoint_auth_methods_supported)!==null&&f!==void 0?f:[],S=zoe(n,C);Boe(S,n,v,x)}s&&x.set("resource",s.href);let E=yield(c??fetch)(h,{method:"POST",headers:v,body:x});if(!E.ok)throw yield d6(E);return s6.parse(yield E.json())})}function Eze(a,c){return y(this,arguments,function*(e,{metadata:t,clientInformation:n,refreshToken:r,resource:i,addClientAuthentication:o,fetchFn:s}){var u;let d="refresh_token",f;if(t){if(f=new URL(t.token_endpoint),t.grant_types_supported&&!t.grant_types_supported.includes(d))throw new Error(`Incompatible auth server: does not support grant type ${d}`)}else f=new URL("/token",e);let g=new Headers({"Content-Type":"application/x-www-form-urlencoded"}),h=new URLSearchParams({grant_type:d,refresh_token:r});if(o)o(g,h,e,t);else{let x=(u=t?.token_endpoint_auth_methods_supported)!==null&&u!==void 0?u:[],E=zoe(n,x);Boe(E,n,g,h)}i&&h.set("resource",i.href);let v=yield(s??fetch)(f,{method:"POST",headers:g,body:h});if(!v.ok)throw yield d6(v);return s6.parse(m({refresh_token:r},yield v.json()))})}function Ize(i,o){return y(this,arguments,function*(e,{metadata:t,clientMetadata:n,fetchFn:r}){let s;if(t){if(!t.registration_endpoint)throw new Error("Incompatible auth server: does not support dynamic client registration");s=new URL(t.registration_endpoint)}else s=new URL("/register",e);let a=yield(r??fetch)(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!a.ok)throw yield d6(a);return Eoe.parse(yield a.json())})}var qD=class extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}};function f6(e){}function Uoe(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:t=f6,onError:n=f6,onRetry:r=f6,onComment:i}=e,o="",s=!0,a,c="",u="";function d(x){let E=s?x.replace(/^\xEF\xBB\xBF/,""):x,[C,S]=Sze(`${o}${E}`);for(let A of C)f(A);o=S,s=!1}function f(x){if(x===""){h();return}if(x.startsWith(":")){i&&i(x.slice(x.startsWith(": ")?2:1));return}let E=x.indexOf(":");if(E!==-1){let C=x.slice(0,E),S=x[E+1]===" "?2:1,A=x.slice(E+S);g(C,A,x);return}g(x,"",x)}function g(x,E,C){switch(x){case"event":u=E;break;case"data":c=`${c}${E}
`;break;case"id":a=E.includes("\0")?void 0:E;break;case"retry":/^\d+$/.test(E)?r(parseInt(E,10)):n(new qD(`Invalid \`retry\` value: "${E}"`,{type:"invalid-retry",value:E,line:C}));break;default:n(new qD(`Unknown field "${x.length>20?`${x.slice(0,20)}\u2026`:x}"`,{type:"unknown-field",field:x,value:E,line:C}));break}}function h(){c.length>0&&t({id:a,event:u||void 0,data:c.endsWith(`
`)?c.slice(0,-1):c}),a=void 0,c="",u=""}function v(x={}){o&&x.consume&&f(o),s=!0,a=void 0,c="",u="",o=""}return{feed:d,reset:v}}function Sze(e){let t=[],n="",r=0;for(;r<e.length;){let i=e.indexOf("\r",r),o=e.indexOf(`
`,r),s=-1;if(i!==-1&&o!==-1?s=Math.min(i,o):i!==-1?i===e.length-1?s=-1:s=i:o!==-1&&(s=o),s===-1){n=e.slice(r);break}else{let a=e.slice(r,s);t.push(a),r=s+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}var GD=class extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let i;super({start(o){i=Uoe({onEvent:s=>{o.enqueue(s)},onError(s){t==="terminate"?o.error(s):typeof t=="function"&&t(s)},onRetry:n,onComment:r})},transform(o){i.feed(o)}})}};var kze={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2},Wf=class extends Error{constructor(t,n){super(`Streamable HTTP error: ${n}`),this.code=t}},WD=class{constructor(t,n){var r;this._hasCompletedAuthFlow=!1,this._url=t,this._resourceMetadataUrl=void 0,this._scope=void 0,this._requestInit=n?.requestInit,this._authProvider=n?.authProvider,this._fetch=n?.fetch,this._fetchWithInit=voe(n?.fetch,n?.requestInit),this._sessionId=n?.sessionId,this._reconnectionOptions=(r=n?.reconnectionOptions)!==null&&r!==void 0?r:kze}_authThenStart(){return y(this,null,function*(){var t;if(!this._authProvider)throw new ud("No auth provider");let n;try{n=yield pC(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit})}catch(r){throw(t=this.onerror)===null||t===void 0||t.call(this,r),r}if(n!=="AUTHORIZED")throw new ud;return yield this._startOrAuthSse({resumptionToken:void 0})})}_commonHeaders(){return y(this,null,function*(){var t;let n={};if(this._authProvider){let i=yield this._authProvider.tokens();i&&(n.Authorization=`Bearer ${i.access_token}`)}this._sessionId&&(n["mcp-session-id"]=this._sessionId),this._protocolVersion&&(n["mcp-protocol-version"]=this._protocolVersion);let r=BD((t=this._requestInit)===null||t===void 0?void 0:t.headers);return new Headers(m(m({},n),r))})}_startOrAuthSse(t){return y(this,null,function*(){var n,r,i;let{resumptionToken:o}=t;try{let s=yield this._commonHeaders();s.set("Accept","text/event-stream"),o&&s.set("last-event-id",o);let a=yield((n=this._fetch)!==null&&n!==void 0?n:fetch)(this._url,{method:"GET",headers:s,signal:(r=this._abortController)===null||r===void 0?void 0:r.signal});if(!a.ok){if(a.status===401&&this._authProvider)return yield this._authThenStart();if(a.status===405)return;throw new Wf(a.status,`Failed to open SSE stream: ${a.statusText}`)}this._handleSseStream(a.body,t,!0)}catch(s){throw(i=this.onerror)===null||i===void 0||i.call(this,s),s}})}_getNextReconnectionDelay(t){if(this._serverRetryMs!==void 0)return this._serverRetryMs;let n=this._reconnectionOptions.initialReconnectionDelay,r=this._reconnectionOptions.reconnectionDelayGrowFactor,i=this._reconnectionOptions.maxReconnectionDelay;return Math.min(n*Math.pow(r,t),i)}_scheduleReconnection(t,n=0){var r;let i=this._reconnectionOptions.maxRetries;if(i>0&&n>=i){(r=this.onerror)===null||r===void 0||r.call(this,new Error(`Maximum reconnection attempts (${i}) exceeded.`));return}let o=this._getNextReconnectionDelay(n);setTimeout(()=>{this._startOrAuthSse(t).catch(s=>{var a;(a=this.onerror)===null||a===void 0||a.call(this,new Error(`Failed to reconnect SSE stream: ${s instanceof Error?s.message:String(s)}`)),this._scheduleReconnection(t,n+1)})},o)}_handleSseStream(t,n,r){if(!t)return;let{onresumptiontoken:i,replayMessageId:o}=n,s,a=!1;y(this,null,function*(){var u,d,f,g;try{let h=t.pipeThrough(new TextDecoderStream).pipeThrough(new GD({onRetry:x=>{this._serverRetryMs=x}})).getReader();for(;;){let{value:x,done:E}=yield h.read();if(E)break;if(x.id&&(s=x.id,a=!0,i?.(x.id)),!x.event||x.event==="message")try{let C=WM.parse(JSON.parse(x.data));o!==void 0&&Dx(C)&&(C.id=o),(u=this.onmessage)===null||u===void 0||u.call(this,C)}catch(C){(d=this.onerror)===null||d===void 0||d.call(this,C)}}(r||a)&&this._abortController&&!this._abortController.signal.aborted&&this._scheduleReconnection({resumptionToken:s,onresumptiontoken:i,replayMessageId:o},0)}catch(h){if((f=this.onerror)===null||f===void 0||f.call(this,new Error(`SSE stream disconnected: ${h}`)),(r||a)&&this._abortController&&!this._abortController.signal.aborted)try{this._scheduleReconnection({resumptionToken:s,onresumptiontoken:i,replayMessageId:o},0)}catch(x){(g=this.onerror)===null||g===void 0||g.call(this,new Error(`Failed to reconnect: ${x instanceof Error?x.message:String(x)}`))}}})}start(){return y(this,null,function*(){if(this._abortController)throw new Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController})}finishAuth(t){return y(this,null,function*(){if(!this._authProvider)throw new ud("No auth provider");if((yield pC(this._authProvider,{serverUrl:this._url,authorizationCode:t,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit}))!=="AUTHORIZED")throw new ud("Failed to authorize")})}close(){return y(this,null,function*(){var t,n;(t=this._abortController)===null||t===void 0||t.abort(),(n=this.onclose)===null||n===void 0||n.call(this)})}send(t,n){return y(this,null,function*(){var r,i,o,s;try{let{resumptionToken:a,onresumptiontoken:c}=n||{};if(a){this._startOrAuthSse({resumptionToken:a,replayMessageId:GM(t)?t.id:void 0}).catch(E=>{var C;return(C=this.onerror)===null||C===void 0?void 0:C.call(this,E)});return}let u=yield this._commonHeaders();u.set("content-type","application/json"),u.set("accept","application/json, text/event-stream");let d=b(m({},this._requestInit),{method:"POST",headers:u,body:JSON.stringify(t),signal:(r=this._abortController)===null||r===void 0?void 0:r.signal}),f=yield((i=this._fetch)!==null&&i!==void 0?i:fetch)(this._url,d),g=f.headers.get("mcp-session-id");if(g&&(this._sessionId=g),!f.ok){if(f.status===401&&this._authProvider){if(this._hasCompletedAuthFlow)throw new Wf(401,"Server returned 401 after successful authentication");let{resourceMetadataUrl:C,scope:S}=p6(f);if(this._resourceMetadataUrl=C,this._scope=S,(yield pC(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit}))!=="AUTHORIZED")throw new ud;return this._hasCompletedAuthFlow=!0,this.send(t)}if(f.status===403&&this._authProvider){let{resourceMetadataUrl:C,scope:S,error:A}=p6(f);if(A==="insufficient_scope"){let P=f.headers.get("WWW-Authenticate");if(this._lastUpscopingHeader===P)throw new Wf(403,"Server returned 403 after trying upscoping");if(S&&(this._scope=S),C&&(this._resourceMetadataUrl=C),this._lastUpscopingHeader=P??void 0,(yield pC(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetch}))!=="AUTHORIZED")throw new ud;return this.send(t)}}let E=yield f.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${f.status}): ${E}`)}if(this._hasCompletedAuthFlow=!1,this._lastUpscopingHeader=void 0,f.status===202){gne(t)&&this._startOrAuthSse({resumptionToken:void 0}).catch(E=>{var C;return(C=this.onerror)===null||C===void 0?void 0:C.call(this,E)});return}let v=(Array.isArray(t)?t:[t]).filter(E=>"method"in E&&"id"in E&&E.id!==void 0).length>0,x=f.headers.get("content-type");if(v)if(x?.includes("text/event-stream"))this._handleSseStream(f.body,{onresumptiontoken:c},!1);else if(x?.includes("application/json")){let E=yield f.json(),C=Array.isArray(E)?E.map(S=>WM.parse(S)):[WM.parse(E)];for(let S of C)(o=this.onmessage)===null||o===void 0||o.call(this,S)}else throw new Wf(-1,`Unexpected content type: ${x}`)}catch(a){throw(s=this.onerror)===null||s===void 0||s.call(this,a),a}})}get sessionId(){return this._sessionId}terminateSession(){return y(this,null,function*(){var t,n,r;if(this._sessionId)try{let i=yield this._commonHeaders(),o=b(m({},this._requestInit),{method:"DELETE",headers:i,signal:(t=this._abortController)===null||t===void 0?void 0:t.signal}),s=yield((n=this._fetch)!==null&&n!==void 0?n:fetch)(this._url,o);if(!s.ok&&s.status!==405)throw new Wf(s.status,`Failed to terminate session: ${s.statusText}`);this._sessionId=void 0}catch(i){throw(r=this.onerror)===null||r===void 0||r.call(this,i),i}})}setProtocolVersion(t){this._protocolVersion=t}get protocolVersion(){return this._protocolVersion}resumeStream(t,n){return y(this,null,function*(){yield this._startOrAuthSse({resumptionToken:t,onresumptiontoken:n?.onresumptiontoken})})}};function KD(e){var t;return e.title!==void 0&&e.title!==""?e.title:!((t=e.annotations)===null||t===void 0)&&t.title?e.annotations.title:e.name}var Tze=Object.defineProperty,ae=(e,t)=>{for(var n in t)Tze(e,n,{get:t[n],enumerable:!0})};function mC(e,t=Zl){e=e.trim();let n=e.indexOf("```");if(n===-1)return t(e);let r=e.substring(n+3);r.startsWith(`json
`)?r=r.substring(5):r.startsWith("json")?r=r.substring(4):r.startsWith(`
`)&&(r=r.substring(1));let i=r.indexOf("```"),o=r;return i!==-1&&(o=r.substring(0,i)),t(o.trim())}function Zl(e){if(typeof e>"u")return null;try{return JSON.parse(e)}catch{}let t="",n=[],r=!1,i=!1;for(let o of e){if(r)o==='"'&&!i?r=!1:o===`
`&&!i?o="\\n":o==="\\"?i=!i:i=!1;else if(o==='"')r=!0,i=!1;else if(o==="{")n.push("}");else if(o==="[")n.push("]");else if(o==="}"||o==="]")if(n&&n[n.length-1]===o)n.pop();else return null;t+=o}r&&(t+='"');for(let o=n.length-1;o>=0;o-=1)t+=n[o];try{return JSON.parse(t)}catch{return null}}function Zp(e,t){return e.lc_error_code=t,e.message=`${e.message}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langchain/errors/${t}/
`,e}var Qoe=_c(Hoe(),1),Xoe=_c(Yoe(),1);function ese(e,t){return t?.[e]||(0,Qoe.default)(e)}function tse(e,t){return t?.[e]||(0,Xoe.default)(e)}function JD(e,t,n){let r={};for(let i in e)Object.hasOwn(e,i)&&(r[t(i,n)]=e[i]);return r}var g6={};ae(g6,{Serializable:()=>vi,get_lc_unique_name:()=>Ay});function nse(e){return Array.isArray(e)?[...e]:m({},e)}function Nze(e,t){let n=nse(e);for(let[r,i]of Object.entries(t)){let[o,...s]=r.split(".").reverse(),a=n;for(let c of s.reverse()){if(a[c]===void 0)break;a[c]=nse(a[c]),a=a[c]}a[o]!==void 0&&(a[o]={lc:1,type:"secret",id:[i]})}return n}function Ay(e){let t=Object.getPrototypeOf(e);return typeof e.lc_name=="function"&&(typeof t.lc_name!="function"||e.lc_name()!==t.lc_name())?e.lc_name():e.name}var vi=class rse{lc_serializable=!1;lc_kwargs;static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Ay(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(t,...n){this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(t||{}).filter(([r])=>this.lc_serializable_keys?.includes(r))):this.lc_kwargs=t??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof rse||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();let t={},n={},r=Object.keys(this.lc_kwargs).reduce((i,o)=>(i[o]=o in this?this[o]:this.lc_kwargs[o],i),{});for(let i=Object.getPrototypeOf(this);i;i=Object.getPrototypeOf(i))Object.assign(t,Reflect.get(i,"lc_aliases",this)),Object.assign(n,Reflect.get(i,"lc_secrets",this)),Object.assign(r,Reflect.get(i,"lc_attributes",this));return Object.keys(n).forEach(i=>{let o=this,s=r,[a,...c]=i.split(".").reverse();for(let u of c.reverse()){if(!(u in o)||o[u]===void 0)return;(!(u in s)||s[u]===void 0)&&(typeof o[u]=="object"&&o[u]!=null?s[u]={}:Array.isArray(o[u])&&(s[u]=[])),o=o[u],s=s[u]}a in o&&o[a]!==void 0&&(s[a]=s[a]||o[a])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:JD(Object.keys(n).length?Nze(r,n):r,ese,t)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}};function qp(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="tool_call")}function ise(e){return!!(e&&typeof e=="object"&&"toolCall"in e&&e.toolCall!=null&&typeof e.toolCall=="object"&&"id"in e.toolCall&&typeof e.toolCall.id=="string")}var Oy=class extends Error{output;constructor(e,t){super(e),this.output=t}};var ose=Symbol.for("ls:tracing_async_local_storage"),Gp=Symbol.for("lc:context_variables"),sse=e=>{globalThis[ose]=e},Wp=()=>globalThis[ose];function ta(e){return typeof e=="object"&&e!==null&&"type"in e&&typeof e.type=="string"&&"source_type"in e&&(e.source_type==="url"||e.source_type==="base64"||e.source_type==="text"||e.source_type==="id")}function My(e){return ta(e)&&e.source_type==="url"&&"url"in e&&typeof e.url=="string"}function Dy(e){return ta(e)&&e.source_type==="base64"&&"data"in e&&typeof e.data=="string"}function ase(e){return ta(e)&&e.source_type==="text"&&"text"in e&&typeof e.text=="string"}function YD(e){return ta(e)&&e.source_type==="id"&&"id"in e&&typeof e.id=="string"}function QD(e){if(ta(e)){if(e.source_type==="url")return{type:"image_url",image_url:{url:e.url}};if(e.source_type==="base64"){if(!e.mime_type)throw new Error("mime_type key is required for base64 data.");return{type:"image_url",image_url:{url:`data:${e.mime_type};base64,${e.data}`}}}}throw new Error("Unsupported source type. Only 'url' and 'base64' are supported.")}function fC(e){let t=e.split(";")[0].split("/");if(t.length!==2)throw new Error(`Invalid mime type: "${e}" - does not match type/subtype format.`);let n=t[0].trim(),r=t[1].trim();if(n===""||r==="")throw new Error(`Invalid mime type: "${e}" - type or subtype is empty.`);let i={};for(let o of e.split(";").slice(1)){let s=o.split("=");if(s.length!==2)throw new Error(`Invalid parameter syntax in mime type: "${e}".`);let a=s[0].trim(),c=s[1].trim();if(a==="")throw new Error(`Invalid parameter syntax in mime type: "${e}".`);i[a]=c}return{type:n,subtype:r,parameters:i}}function Kp({dataUrl:e,asTypedArray:t=!1}){let n=e.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/),r;if(n){r=n[1].toLowerCase();let i=t?Uint8Array.from(atob(n[2]),o=>o.charCodeAt(0)):n[2];return{mime_type:r,data:i}}}function Py(e,t){if(e.type==="text"){if(!t.fromStandardTextBlock)throw new Error(`Converter for ${t.providerName} does not implement \`fromStandardTextBlock\` method.`);return t.fromStandardTextBlock(e)}if(e.type==="image"){if(!t.fromStandardImageBlock)throw new Error(`Converter for ${t.providerName} does not implement \`fromStandardImageBlock\` method.`);return t.fromStandardImageBlock(e)}if(e.type==="audio"){if(!t.fromStandardAudioBlock)throw new Error(`Converter for ${t.providerName} does not implement \`fromStandardAudioBlock\` method.`);return t.fromStandardAudioBlock(e)}if(e.type==="file"){if(!t.fromStandardFileBlock)throw new Error(`Converter for ${t.providerName} does not implement \`fromStandardFileBlock\` method.`);return t.fromStandardFileBlock(e)}throw new Error(`Unable to convert content block type '${e.type}' to provider-specific format: not recognized.`)}function rt(e,t){return $t(e)&&e.type===t}function $t(e){return typeof e=="object"&&e!==null}function na(e){return Array.isArray(e)}function $e(e){return typeof e=="string"}function ba(e){return typeof e=="number"}function XD(e){return e instanceof Uint8Array}function _6(e){try{return JSON.parse(e)}catch{return}}var dd=e=>e();function $ze(e){if(e.type==="char_location"&&$e(e.document_title)&&ba(e.start_char_index)&&ba(e.end_char_index)&&$e(e.cited_text)){let t=e,{document_title:s,start_char_index:a,end_char_index:c,cited_text:u}=t,d=se(t,["document_title","start_char_index","end_char_index","cited_text"]);return b(m({},d),{type:"citation",source:"char",title:s??void 0,startIndex:a,endIndex:c,citedText:u})}if(e.type==="page_location"&&$e(e.document_title)&&ba(e.start_page_number)&&ba(e.end_page_number)&&$e(e.cited_text)){let n=e,{document_title:s,start_page_number:a,end_page_number:c,cited_text:u}=n,d=se(n,["document_title","start_page_number","end_page_number","cited_text"]);return b(m({},d),{type:"citation",source:"page",title:s??void 0,startIndex:a,endIndex:c,citedText:u})}if(e.type==="content_block_location"&&$e(e.document_title)&&ba(e.start_block_index)&&ba(e.end_block_index)&&$e(e.cited_text)){let r=e,{document_title:s,start_block_index:a,end_block_index:c,cited_text:u}=r,d=se(r,["document_title","start_block_index","end_block_index","cited_text"]);return b(m({},d),{type:"citation",source:"block",title:s??void 0,startIndex:a,endIndex:c,citedText:u})}if(e.type==="web_search_result_location"&&$e(e.url)&&$e(e.title)&&$e(e.encrypted_index)&&$e(e.cited_text)){let i=e,{url:s,title:a,encrypted_index:c,cited_text:u}=i,d=se(i,["url","title","encrypted_index","cited_text"]);return b(m({},d),{type:"citation",source:"url",url:s,title:a,startIndex:Number(c),endIndex:Number(c),citedText:u})}if(e.type==="search_result_location"&&$e(e.source)&&$e(e.title)&&ba(e.start_block_index)&&ba(e.end_block_index)&&$e(e.cited_text)){let o=e,{source:s,title:a,start_block_index:c,end_block_index:u,cited_text:d}=o,f=se(o,["source","title","start_block_index","end_block_index","cited_text"]);return b(m({},f),{type:"citation",source:"search",url:s,title:a??void 0,startIndex:c,endIndex:u,citedText:d})}}function lse(e){if(rt(e,"document")&&$t(e.source)&&"type"in e.source){if(e.source.type==="base64"&&$e(e.source.media_type)&&$e(e.source.data))return{type:"file",mimeType:e.source.media_type,data:e.source.data};if(e.source.type==="url"&&$e(e.source.url))return{type:"file",url:e.source.url};if(e.source.type==="file"&&$e(e.source.file_id))return{type:"file",fileId:e.source.file_id};if(e.source.type==="text"&&$e(e.source.data))return{type:"file",mimeType:String(e.source.media_type??"text/plain"),data:e.source.data}}else if(rt(e,"image")&&$t(e.source)&&"type"in e.source){if(e.source.type==="base64"&&$e(e.source.media_type)&&$e(e.source.data))return{type:"image",mimeType:e.source.media_type,data:e.source.data};if(e.source.type==="url"&&$e(e.source.url))return{type:"image",url:e.source.url};if(e.source.type==="file"&&$e(e.source.file_id))return{type:"image",fileId:e.source.file_id}}}function use(e){function*t(){for(let n of e){let r=lse(n);r?yield r:yield n}}return Array.from(t())}function cse(e){function*t(){let n=typeof e.content=="string"?[{type:"text",text:e.content}]:e.content;for(let o of n){if(rt(o,"text")&&$e(o.text)){let r=o,{text:s,citations:a}=r,c=se(r,["text","citations"]);if(na(a)&&a.length){let u=a.reduce((d,f)=>{let g=$ze(f);return g?[...d,g]:d},[]);yield b(m({},c),{type:"text",text:s,annotations:u});continue}else{yield b(m({},c),{type:"text",text:s});continue}}else if(rt(o,"thinking")&&$e(o.thinking)){let i=o,{thinking:s,signature:a}=i,c=se(i,["thinking","signature"]);yield b(m({},c),{type:"reasoning",reasoning:s,signature:a});continue}else if(rt(o,"redacted_thinking")){yield{type:"non_standard",value:o};continue}else if(rt(o,"tool_use")&&$e(o.name)&&$e(o.id)){yield{type:"tool_call",id:o.id,name:o.name,args:o.input};continue}else if(rt(o,"input_json_delta")){if(Lze(e)&&e.tool_call_chunks?.length){let s=e.tool_call_chunks[0];yield{type:"tool_call_chunk",id:s.id,name:s.name,args:s.args,index:s.index};continue}}else if(rt(o,"server_tool_use")&&$e(o.name)&&$e(o.id)){let{name:s,id:a}=o;if(s==="web_search"){let c=dd(()=>{if(typeof o.input=="string")return o.input;if($t(o.input)&&$e(o.input.query))return o.input.query;if($e(o.partial_json)){let u=_6(o.partial_json);if(u?.query)return u.query}return""});yield{id:a,type:"server_tool_call",name:"web_search",args:{query:c}};continue}else if(o.name==="code_execution"){let c=dd(()=>{if(typeof o.input=="string")return o.input;if($t(o.input)&&$e(o.input.code))return o.input.code;if($e(o.partial_json)){let u=_6(o.partial_json);if(u?.code)return u.code}return""});yield{id:a,type:"server_tool_call",name:"code_execution",args:{code:c}};continue}}else if(rt(o,"web_search_tool_result")&&$e(o.tool_use_id)&&na(o.content)){let{content:s,tool_use_id:a}=o,c=s.reduce((u,d)=>rt(d,"web_search_result")?[...u,d.url]:u,[]);yield{type:"server_tool_call_result",name:"web_search",toolCallId:a,status:"success",output:{urls:c}};continue}else if(rt(o,"code_execution_tool_result")&&$e(o.tool_use_id)&&$t(o.content)){yield{type:"server_tool_call_result",name:"code_execution",toolCallId:o.tool_use_id,status:"success",output:o.content};continue}else if(rt(o,"mcp_tool_use")){yield{id:o.id,type:"server_tool_call",name:"mcp_tool_use",args:o.input};continue}else if(rt(o,"mcp_tool_result")&&$e(o.tool_use_id)&&$t(o.content)){yield{type:"server_tool_call_result",name:"mcp_tool_use",toolCallId:o.tool_use_id,status:"success",output:o.content};continue}else if(rt(o,"container_upload")){yield{type:"server_tool_call",name:"container_upload",args:o.input};continue}else if(rt(o,"search_result")){yield{id:o.id,type:"non_standard",value:o};continue}else if(rt(o,"tool_result")){yield{id:o.id,type:"non_standard",value:o};continue}else{let s=lse(o);if(s){yield s;continue}}yield{type:"non_standard",value:o}}}return Array.from(t())}var dse={translateContent:cse,translateContentChunk:cse};function Lze(e){return typeof e?._getType=="function"&&typeof e.concat=="function"&&e._getType()==="ai"}function Fze(e){return My(e)?{type:e.type,mimeType:e.mime_type,url:e.url,metadata:e.metadata}:Dy(e)?{type:e.type,mimeType:e.mime_type??"application/octet-stream",data:e.data,metadata:e.metadata}:YD(e)?{type:e.type,mimeType:e.mime_type,fileId:e.id,metadata:e.metadata}:e}function pse(e){return e.map(Fze)}function mse(e){return!!(rt(e,"image_url")&&$t(e.image_url)||rt(e,"input_audio")&&$t(e.input_audio)||rt(e,"file")&&$t(e.file))}function fse(e){if(rt(e,"image_url")&&$t(e.image_url)&&$e(e.image_url.url)){let t=Kp({dataUrl:e.image_url.url});return t?{type:"image",mimeType:t.mime_type,data:t.data}:{type:"image",url:e.image_url.url}}else{if(rt(e,"input_audio")&&$t(e.input_audio)&&$e(e.input_audio.data)&&$e(e.input_audio.format))return{type:"audio",data:e.input_audio.data,mimeType:`audio/${e.input_audio.format}`};if(rt(e,"file")&&$t(e.file)&&$e(e.file.data)){let t=Kp({dataUrl:e.file.data});if(t)return{type:"file",data:t.data,mimeType:t.mime_type};if($e(e.file.file_id))return{type:"file",fileId:e.file.file_id}}}return e}function jze(e){let t=[];typeof e.content=="string"?t.push({type:"text",text:e.content}):t.push(...eP(e.content));for(let n of e.tool_calls??[])t.push({type:"tool_call",id:n.id,name:n.name,args:n.args});return t}function zze(e){let t=[];typeof e.content=="string"?t.push({type:"text",text:e.content}):t.push(...eP(e.content));for(let n of e.tool_calls??[])t.push({type:"tool_call",id:n.id,name:n.name,args:n.args});return t}function eP(e){let t=[];for(let n of e)mse(n)?t.push(fse(n)):t.push(n);return t}function Bze(e){if(e.type==="url_citation"){let{url:t,title:n,start_index:r,end_index:i}=e;return{type:"citation",url:t,title:n,startIndex:r,endIndex:i}}if(e.type==="file_citation"){let{file_id:t,filename:n,index:r}=e;return{type:"citation",title:n,startIndex:r,endIndex:r,fileId:t}}return e}function hse(e){function*t(){$t(e.additional_kwargs?.reasoning)&&na(e.additional_kwargs.reasoning.summary)&&(yield{type:"reasoning",reasoning:e.additional_kwargs.reasoning.summary.reduce((o,s)=>$t(s)&&$e(s.text)?`${o}${s.text}`:o,"")});let n=typeof e.content=="string"?[{type:"text",text:e.content}]:e.content;for(let i of n)if(rt(i,"text")){let r=i,{text:o,annotations:s}=r,a=se(r,["text","annotations"]);Array.isArray(s)?yield b(m({},a),{type:"text",text:String(o),annotations:s.map(Bze)}):yield b(m({},a),{type:"text",text:String(o)})}for(let i of e.tool_calls??[])yield{type:"tool_call",id:i.id,name:i.name,args:i.args};if($t(e.additional_kwargs)&&na(e.additional_kwargs.tool_outputs))for(let i of e.additional_kwargs.tool_outputs){if(rt(i,"web_search_call")){yield{id:i.id,type:"server_tool_call",name:"web_search",args:{query:i.query}};continue}else if(rt(i,"file_search_call")){yield{id:i.id,type:"server_tool_call",name:"file_search",args:{query:i.query}};continue}else if(rt(i,"computer_call")){yield{type:"non_standard",value:i};continue}else if(rt(i,"code_interpreter_call")){if($e(i.code)&&(yield{id:i.id,type:"server_tool_call",name:"code_interpreter",args:{code:i.code}}),na(i.outputs)){let o=dd(()=>{if(i.status!=="in_progress"){if(i.status==="completed")return 0;if(i.status==="incomplete")return 127;if(i.status!=="interpreting"&&i.status==="failed")return 1}});for(let s of i.outputs)if(rt(s,"logs")){yield{type:"server_tool_call_result",toolCallId:i.id??"",status:"success",output:{type:"code_interpreter_output",returnCode:o??0,stderr:[0,void 0].includes(o)?void 0:String(s.logs),stdout:[0,void 0].includes(o)?String(s.logs):void 0}};continue}}continue}else if(rt(i,"mcp_call")){yield{id:i.id,type:"server_tool_call",name:"mcp_call",args:i.input};continue}else if(rt(i,"mcp_list_tools")){yield{id:i.id,type:"server_tool_call",name:"mcp_list_tools",args:i.input};continue}else if(rt(i,"mcp_approval_request")){yield{type:"non_standard",value:i};continue}else if(rt(i,"image_generation_call")){yield{type:"non_standard",value:i};continue}$t(i)&&(yield{type:"non_standard",value:i})}}return Array.from(t())}function Uze(e){function*t(){yield*mn(hse(e));for(let n of e.tool_call_chunks??[])yield{type:"tool_call_chunk",id:n.id,name:n.name,args:n.args}}return Array.from(t())}var gse={translateContent:e=>typeof e.content=="string"?jze(e):hse(e),translateContentChunk:e=>typeof e.content=="string"?zze(e):Uze(e)};function tP(e){return typeof e=="object"&&e!==null&&"type"in e&&"content"in e&&(typeof e.content=="string"||Array.isArray(e.content))}function _se(e,t="pretty"){return t==="pretty"?Vze(e):JSON.stringify(e)}function Vze(e){let t=[],n=` ${e.type.charAt(0).toUpperCase()+e.type.slice(1)} Message `,r=Math.floor((80-n.length)/2),i="=".repeat(r),o=n.length%2===0?i:`${i}=`;if(t.push(`${i}${n}${o}`),e.type==="ai"){let s=e;if(s.tool_calls&&s.tool_calls.length>0){t.push("Tool Calls:");for(let a of s.tool_calls){t.push(`  ${a.name} (${a.id})`),t.push(` Call ID: ${a.id}`),t.push("  Args:");for(let[c,u]of Object.entries(a.args))t.push(`    ${c}: ${u}`)}}}if(e.type==="tool"){let s=e;s.name&&t.push(`Name: ${s.name}`)}return typeof e.content=="string"&&e.content.trim()&&(t.length>1&&t.push(""),t.push(e.content)),t.join(`
`)}var y6=Symbol.for("langchain.message");function Ho(e,t){return typeof e=="string"?e===""?t:typeof t=="string"?e+t:Array.isArray(t)&&t.length===0?e:Array.isArray(t)&&t.some(n=>ta(n))?[{type:"text",source_type:"text",text:e},...t]:[{type:"text",text:e},...t]:Array.isArray(t)?Kf(e,t)??[...e,...t]:t===""?e:Array.isArray(e)&&e.some(n=>ta(n))?[...e,{type:"file",source_type:"text",text:t}]:[...e,{type:"text",text:t}]}function nP(e,t){return e==="error"||t==="error"?"error":"success"}function Hze(e,t){function n(r,i){if(typeof r!="object"||r===null||r===void 0)return r;if(i>=t)return Array.isArray(r)?"[Array]":"[Object]";if(Array.isArray(r))return r.map(s=>n(s,i+1));let o={};for(let s of Object.keys(r))o[s]=n(r[s],i+1);return o}return JSON.stringify(n(e,0),null,2)}var bi=class extends vi{lc_namespace=["langchain_core","messages"];lc_serializable=!0;get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}[y6]=!0;id;name;content;additional_kwargs;response_metadata;_getType(){return this.type}getType(){return this._getType()}constructor(e){let t=typeof e=="string"||Array.isArray(e)?{content:e}:e;t.additional_kwargs||(t.additional_kwargs={}),t.response_metadata||(t.response_metadata={}),super(t),this.name=t.name,t.content===void 0&&t.contentBlocks!==void 0?(this.content=t.contentBlocks,this.response_metadata=m({output_version:"v1"},t.response_metadata)):t.content!==void 0?(this.content=t.content??[],this.response_metadata=t.response_metadata):(this.content=[],this.response_metadata=t.response_metadata),this.additional_kwargs=t.additional_kwargs,this.id=t.id}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(e=>typeof e=="string"?e:e.type==="text"?e.text:"").join(""):""}get contentBlocks(){let e=typeof this.content=="string"?[{type:"text",text:this.content}]:this.content;return[pse,eP,use].reduce((r,i)=>i(r),e)}toDict(){return{type:this.getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}static isInstance(e){return typeof e=="object"&&e!==null&&y6 in e&&e[y6]===!0&&tP(e)}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;let t=Hze(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${t}`}toFormattedString(e="pretty"){return _se(this,e)}};function yse(e){return Array.isArray(e)&&e.every(t=>typeof t.index=="number")}function Wr(e={},t={}){let n=m({},e);for(let[r,i]of Object.entries(t))if(n[r]==null)n[r]=i;else{if(i==null)continue;if(typeof n[r]!=typeof i||Array.isArray(n[r])!==Array.isArray(i))throw new Error(`field[${r}] already exists in the message chunk, but with a different type.`);if(typeof n[r]=="string"){if(r==="type")continue;["id","name","output_version","model_provider"].includes(r)?n[r]=i:n[r]+=i}else if(typeof n[r]=="object"&&!Array.isArray(n[r]))n[r]=Wr(n[r],i);else if(Array.isArray(n[r]))n[r]=Kf(n[r],i);else{if(n[r]===i)continue;console.warn(`field[${r}] already exists in this message chunk and value has unsupported type.`)}}return n}function Kf(e,t){if(!(e===void 0&&t===void 0)){if(e===void 0||t===void 0)return e||t;{let n=[...e];for(let r of t)if(typeof r=="object"&&r!==null&&"index"in r&&typeof r.index=="number"){let i=n.findIndex(o=>{let s=typeof o=="object",a="index"in o&&o.index===r.index,c="id"in o&&"id"in r&&o?.id===r?.id,u=!("id"in o)||!o?.id||!("id"in r)||!r?.id;return s&&a&&(c||u)});i!==-1&&typeof n[i]=="object"&&n[i]!==null?n[i]=Wr(n[i],r):n.push(r)}else{if(typeof r=="object"&&r!==null&&"text"in r&&r.text==="")continue;n.push(r)}return n}}}function rP(e,t){if(!e&&!t)throw new Error("Cannot merge two undefined objects.");if(!e||!t)return e||t;if(typeof e!=typeof t)throw new Error(`Cannot merge objects of different types.
Left ${typeof e}
Right ${typeof t}`);if(typeof e=="string"&&typeof t=="string")return e+t;if(Array.isArray(e)&&Array.isArray(t))return Kf(e,t);if(typeof e=="object"&&typeof t=="object")return Wr(e,t);if(e===t)return e;throw new Error(`Can not merge objects of different types.
Left ${e}
Right ${t}`)}var gs=class vse extends bi{static isInstance(t){if(!super.isInstance(t))return!1;let n=Object.getPrototypeOf(t);for(;n!==null;){if(n===vse.prototype)return!0;n=Object.getPrototypeOf(n)}return!1}};function iP(e){return typeof e.role=="string"}function Gn(e){return typeof e?._getType=="function"}function Lc(e){return gs.isInstance(e)}var v6={};ae(v6,{ToolMessage:()=>io,ToolMessageChunk:()=>Jp,defaultToolCallParser:()=>gC,isDirectToolOutput:()=>hC,isToolMessage:()=>pd,isToolMessageChunk:()=>b6});function hC(e){return e!=null&&typeof e=="object"&&"lc_direct_tool_output"in e&&e.lc_direct_tool_output===!0}var io=class extends bi{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}lc_direct_tool_output=!0;type="tool";status;tool_call_id;metadata;artifact;constructor(e,t,n){let r=typeof e=="string"||Array.isArray(e)?{content:e,name:n,tool_call_id:t}:e;super(r),this.tool_call_id=r.tool_call_id,this.artifact=r.artifact,this.status=r.status,this.metadata=r.metadata}static isInstance(e){return super.isInstance(e)&&e.type==="tool"}get _printableFields(){return b(m({},super._printableFields),{tool_call_id:this.tool_call_id,artifact:this.artifact})}},Jp=class extends gs{type="tool";tool_call_id;status;artifact;constructor(e){super(e),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}concat(e){let t=this.constructor;return new t({content:Ho(this.content,e.content),additional_kwargs:Wr(this.additional_kwargs,e.additional_kwargs),response_metadata:Wr(this.response_metadata,e.response_metadata),artifact:rP(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:this.id??e.id,status:nP(this.status,e.status)})}get _printableFields(){return b(m({},super._printableFields),{tool_call_id:this.tool_call_id,artifact:this.artifact})}};function gC(e){let t=[],n=[];for(let r of e)if(r.function){let i=r.function.name;try{let o=JSON.parse(r.function.arguments);t.push({name:i||"",args:o||{},id:r.id})}catch{n.push({name:i,args:r.function.arguments,id:r.id,error:"Malformed args."})}}else continue;return[t,n]}function pd(e){return typeof e=="object"&&e!==null&&"getType"in e&&typeof e.getType=="function"&&e.getType()==="tool"}function b6(e){return e._getType()==="tool"}function w6(e){switch(e){case"csv":return"text/csv";case"doc":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"html":return"text/html";case"md":return"text/markdown";case"pdf":return"application/pdf";case"txt":return"text/plain";case"xls":return"application/vnd.ms-excel";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"gif":return"image/gif";case"jpeg":return"image/jpeg";case"jpg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";case"flv":return"video/flv";case"mkv":return"video/mkv";case"mov":return"video/mov";case"mp4":return"video/mp4";case"mpeg":return"video/mpeg";case"mpg":return"video/mpg";case"three_gp":return"video/three_gp";case"webm":return"video/webm";case"wmv":return"video/wmv";default:return"application/octet-stream"}}function Zze(e){if($t(e.document)&&$t(e.document.source)){let t=$t(e.document)&&$e(e.document.format)?e.document.format:"",n=w6(t);if($t(e.document.source)){if($t(e.document.source.s3Location)&&$e(e.document.source.s3Location.uri))return{type:"file",mimeType:n,fileId:e.document.source.s3Location.uri};if(XD(e.document.source.bytes))return{type:"file",mimeType:n,data:e.document.source.bytes};if($e(e.document.source.text))return{type:"file",mimeType:n,data:Buffer.from(e.document.source.text).toString("base64")};if(na(e.document.source.content)){let r=e.document.source.content.reduce((i,o)=>$t(o)&&$e(o.text)?i+o.text:i,"");return{type:"file",mimeType:n,data:r}}}}return{type:"non_standard",value:e}}function qze(e){if(rt(e,"image")&&$t(e.image)){let t=$t(e.image)&&$e(e.image.format)?e.image.format:"",n=w6(t);if($t(e.image.source)){if($t(e.image.source.s3Location)&&$e(e.image.source.s3Location.uri))return{type:"image",mimeType:n,fileId:e.image.source.s3Location.uri};if(XD(e.image.source.bytes))return{type:"image",mimeType:n,data:e.image.source.bytes}}}return{type:"non_standard",value:e}}function Gze(e){if(rt(e,"video")&&$t(e.video)){let t=$t(e.video)&&$e(e.video.format)?e.video.format:"",n=w6(t);if($t(e.video.source)){if($t(e.video.source.s3Location)&&$e(e.video.source.s3Location.uri))return{type:"video",mimeType:n,fileId:e.video.source.s3Location.uri};if(XD(e.video.source.bytes))return{type:"video",mimeType:n,data:e.video.source.bytes}}}return{type:"non_standard",value:e}}function bse(e){function*t(){let n=typeof e.content=="string"?[{type:"text",text:e.content}]:e.content;for(let r of n){if(rt(r,"cache_point")){yield{type:"non_standard",value:r};continue}else if(rt(r,"citations_content")&&$t(r.citationsContent)){let i=na(r.citationsContent.content)?r.citationsContent.content.reduce((s,a)=>$t(a)&&$e(a.text)?s+a.text:s,""):"",o=na(r.citationsContent.citations)?r.citationsContent.citations.reduce((s,a)=>{if($t(a)){let c=na(a.sourceContent)?a.sourceContent.reduce((d,f)=>$t(f)&&$e(f.text)?d+f.text:d,""):"",u=dd(()=>{if($t(a.location)){let d=a.location.documentChar||a.location.documentPage||a.location.documentChunk;if($t(d))return{source:ba(d.documentIndex)?d.documentIndex.toString():void 0,startIndex:ba(d.start)?d.start:void 0,endIndex:ba(d.end)?d.end:void 0}}return{}});s.push(m({type:"citation",citedText:c},u))}return s},[]):[];yield{type:"text",text:i,annotations:o};continue}else if(rt(r,"document")&&$t(r.document)){yield Zze(r);continue}else if(rt(r,"guard_content")){yield{type:"non_standard",value:r};continue}else if(rt(r,"image")&&$t(r.image)){yield qze(r);continue}else if(rt(r,"reasoning_content")&&$e(r.reasoningText)){yield{type:"reasoning",reasoning:r.reasoningText};continue}else if(rt(r,"text")&&$e(r.text)){yield{type:"text",text:r.text};continue}else if(rt(r,"tool_result")){yield{type:"non_standard",value:r};continue}else{if(rt(r,"tool_call"))continue;if(rt(r,"video")&&$t(r.video)){yield Gze(r);continue}}yield{type:"non_standard",value:r}}}return Array.from(t())}var wse={translateContent:bse,translateContentChunk:bse};function xse(e){function*t(){let n=typeof e.content=="string"?[{type:"text",text:e.content}]:e.content;for(let r of n){if(rt(r,"text")&&$e(r.text)){yield{type:"text",text:r.text};continue}else if(rt(r,"inlineData")&&$t(r.inlineData)&&$e(r.inlineData.mimeType)&&$e(r.inlineData.data)){yield{type:"file",mimeType:r.inlineData.mimeType,data:r.inlineData.data};continue}else if(rt(r,"functionCall")&&$t(r.functionCall)&&$e(r.functionCall.name)&&$t(r.functionCall.args)){yield{type:"tool_call",id:e.id,name:r.functionCall.name,args:r.functionCall.args};continue}else if(rt(r,"functionResponse")){yield{type:"non_standard",value:r};continue}else if(rt(r,"fileData")&&$t(r.fileData)&&$e(r.fileData.mimeType)&&$e(r.fileData.fileUri)){yield{type:"file",mimeType:r.fileData.mimeType,fileId:r.fileData.fileUri};continue}else if(rt(r,"executableCode")){yield{type:"non_standard",value:r};continue}else if(rt(r,"codeExecutionResult")){yield{type:"non_standard",value:r};continue}yield{type:"non_standard",value:r}}}return Array.from(t())}var Cse={translateContent:xse,translateContentChunk:xse};function Ese(e){function*t(){let n=typeof e.content=="string"?[{type:"text",text:e.content}]:e.content;for(let r of n){if(rt(r,"reasoning")&&$e(r.reasoning)){let i=dd(()=>{let o=n.indexOf(r);if(na(e.additional_kwargs?.signatures)&&o>=0)return e.additional_kwargs.signatures.at(o)});$e(i)?yield{type:"reasoning",reasoning:r.reasoning,signature:i}:yield{type:"reasoning",reasoning:r.reasoning};continue}else if(rt(r,"text")&&$e(r.text)){yield{type:"text",text:r.text};continue}else if(rt(r,"image_url")){if($e(r.image_url))if(r.image_url.startsWith("data:")){let i=/^data:([^;]+);base64,(.+)$/,o=r.image_url.match(i);o?yield{type:"image",data:o[2],mimeType:o[1]}:yield{type:"image",url:r.image_url}}else yield{type:"image",url:r.image_url};continue}else if(rt(r,"media")&&$e(r.mimeType)&&$e(r.data)){yield{type:"file",mimeType:r.mimeType,data:r.data};continue}yield{type:"non_standard",value:r}}}return Array.from(t())}var Ise={translateContent:Ese,translateContentChunk:Ese};globalThis.lc_block_translators_registry??=new Map([["anthropic",dse],["bedrock-converse",wse],["google-genai",Cse],["google-vertexai",Ise],["openai",gse]]);function x6(e){return globalThis.lc_block_translators_registry.get(e)}function oP(e,t){return Wr(e??{},t??{})}function Sse(e,t){let n={};return(e?.audio!==void 0||t?.audio!==void 0)&&(n.audio=(e?.audio??0)+(t?.audio??0)),(e?.image!==void 0||t?.image!==void 0)&&(n.image=(e?.image??0)+(t?.image??0)),(e?.video!==void 0||t?.video!==void 0)&&(n.video=(e?.video??0)+(t?.video??0)),(e?.document!==void 0||t?.document!==void 0)&&(n.document=(e?.document??0)+(t?.document??0)),(e?.text!==void 0||t?.text!==void 0)&&(n.text=(e?.text??0)+(t?.text??0)),n}function Wze(e,t){let n=m({},Sse(e,t));return(e?.cache_read!==void 0||t?.cache_read!==void 0)&&(n.cache_read=(e?.cache_read??0)+(t?.cache_read??0)),(e?.cache_creation!==void 0||t?.cache_creation!==void 0)&&(n.cache_creation=(e?.cache_creation??0)+(t?.cache_creation??0)),n}function Kze(e,t){let n=m({},Sse(e,t));return(e?.reasoning!==void 0||t?.reasoning!==void 0)&&(n.reasoning=(e?.reasoning??0)+(t?.reasoning??0)),n}function sP(e,t){return{input_tokens:(e?.input_tokens??0)+(t?.input_tokens??0),output_tokens:(e?.output_tokens??0)+(t?.output_tokens??0),total_tokens:(e?.total_tokens??0)+(t?.total_tokens??0),input_token_details:Wze(e?.input_token_details,t?.input_token_details),output_token_details:Kze(e?.output_token_details,t?.output_token_details)}}var Sn=class extends bi{type="ai";tool_calls=[];invalid_tool_calls=[];usage_metadata;get lc_aliases(){return b(m({},super.lc_aliases),{tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"})}constructor(e){let t;if(typeof e=="string"||Array.isArray(e))t={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:{}};else{t=e;let n=t.additional_kwargs?.tool_calls,r=t.tool_calls;n!=null&&n.length>0&&(r===void 0||r.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `pnpm install @langchain/anthropic`,","pnpm install @langchain/openai`, etc."].join(" "));try{if(n!=null&&r===void 0){let[i,o]=gC(n);t.tool_calls=i??[],t.invalid_tool_calls=o??[]}else t.tool_calls=t.tool_calls??[],t.invalid_tool_calls=t.invalid_tool_calls??[]}catch{t.tool_calls=[],t.invalid_tool_calls=[]}if(t.response_metadata!==void 0&&"output_version"in t.response_metadata&&t.response_metadata.output_version==="v1"&&(t.contentBlocks=t.content,t.content=void 0),t.contentBlocks!==void 0){t.contentBlocks.push(...t.tool_calls.map(o=>({type:"tool_call",id:o.id,name:o.name,args:o.args})));let i=t.contentBlocks.filter(o=>o.type==="tool_call").filter(o=>!t.tool_calls?.some(s=>s.id===o.id&&s.name===o.name));i.length>0&&(t.tool_calls=i.map(o=>({type:"tool_call",id:o.id,name:o.name,args:o.args})))}}super(t),typeof t!="string"&&(this.tool_calls=t.tool_calls??this.tool_calls,this.invalid_tool_calls=t.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=t.usage_metadata}static lc_name(){return"AIMessage"}get contentBlocks(){if(this.response_metadata&&"output_version"in this.response_metadata&&this.response_metadata.output_version==="v1")return this.content;if(this.response_metadata&&"model_provider"in this.response_metadata&&typeof this.response_metadata.model_provider=="string"){let t=x6(this.response_metadata.model_provider);if(t)return t.translateContent(this)}let e=super.contentBlocks;if(this.tool_calls){let t=this.tool_calls.filter(n=>!e.some(r=>r.id===n.id&&r.name===n.name));e.push(...t.map(n=>b(m({},n),{type:"tool_call",id:n.id,name:n.name,args:n.args})))}return e}get _printableFields(){return b(m({},super._printableFields),{tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata})}static isInstance(e){return super.isInstance(e)&&e.type==="ai"}};function Io(e){return e._getType()==="ai"}function Jf(e){return e._getType()==="ai"}var Cr=class extends gs{type="ai";tool_calls=[];invalid_tool_calls=[];tool_call_chunks=[];usage_metadata;constructor(e){let t;if(typeof e=="string"||Array.isArray(e))t={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0||e.tool_call_chunks.length===0)t=b(m({},e),{tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0});else{let r=(e.tool_call_chunks??[]).reduce((s,a)=>{let c=s.findIndex(([u])=>"id"in a&&a.id&&"index"in a&&a.index!==void 0?a.id===u.id&&a.index===u.index:"id"in a&&a.id?a.id===u.id:"index"in a&&a.index!==void 0?a.index===u.index:!1);return c!==-1?s[c].push(a):s.push([a]),s},[]),i=[],o=[];for(let s of r){let a=null,c=s[0]?.name??"",u=s.map(g=>g.args||"").join(""),d=u.length?u:"{}",f=s[0]?.id;try{if(a=Zl(d),!f||a===null||typeof a!="object"||Array.isArray(a))throw new Error("Malformed tool call chunk args.");i.push({name:c,args:a,id:f,type:"tool_call"})}catch{o.push({name:c,args:d,id:f,error:"Malformed args.",type:"invalid_tool_call"})}}t=b(m({},e),{tool_calls:i,invalid_tool_calls:o,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0})}super(t),this.tool_call_chunks=t.tool_call_chunks??this.tool_call_chunks,this.tool_calls=t.tool_calls??this.tool_calls,this.invalid_tool_calls=t.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=t.usage_metadata}get lc_aliases(){return b(m({},super.lc_aliases),{tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"})}static lc_name(){return"AIMessageChunk"}get contentBlocks(){if(this.response_metadata&&"output_version"in this.response_metadata&&this.response_metadata.output_version==="v1")return this.content;if(this.response_metadata&&"model_provider"in this.response_metadata&&typeof this.response_metadata.model_provider=="string"){let t=x6(this.response_metadata.model_provider);if(t)return t.translateContent(this)}let e=super.contentBlocks;if(this.tool_calls&&typeof this.content!="string"){let t=this.content.filter(n=>n.type==="tool_call").map(n=>n.id);for(let n of this.tool_calls)n.id&&!t.includes(n.id)&&e.push(b(m({},n),{type:"tool_call",id:n.id,name:n.name,args:n.args}))}return e}get _printableFields(){return b(m({},super._printableFields),{tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata})}concat(e){let t={content:Ho(this.content,e.content),additional_kwargs:Wr(this.additional_kwargs,e.additional_kwargs),response_metadata:oP(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){let r=Kf(this.tool_call_chunks,e.tool_call_chunks);r!==void 0&&r.length>0&&(t.tool_call_chunks=r)}(this.usage_metadata!==void 0||e.usage_metadata!==void 0)&&(t.usage_metadata=sP(this.usage_metadata,e.usage_metadata));let n=this.constructor;return new n(t)}static isInstance(e){return super.isInstance(e)&&e.type==="ai"}};var _s=class kse extends bi{static lc_name(){return"ChatMessage"}type="generic";role;static _chatMessageClass(){return kse}constructor(t,n){(typeof t=="string"||Array.isArray(t))&&(t={content:t,role:n}),super(t),this.role=t.role}static isInstance(t){return super.isInstance(t)&&t.type==="generic"}get _printableFields(){return b(m({},super._printableFields),{role:this.role})}},md=class extends gs{static lc_name(){return"ChatMessageChunk"}type="generic";role;constructor(e,t){(typeof e=="string"||Array.isArray(e))&&(e={content:e,role:t}),super(e),this.role=e.role}concat(e){let t=this.constructor;return new t({content:Ho(this.content,e.content),additional_kwargs:Wr(this.additional_kwargs,e.additional_kwargs),response_metadata:Wr(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="generic"}get _printableFields(){return b(m({},super._printableFields),{role:this.role})}};function Tse(e){return e._getType()==="generic"}function Ase(e){return e._getType()==="generic"}var Yp=class extends bi{static lc_name(){return"FunctionMessage"}type="function";name;constructor(e){super(e),this.name=e.name}},fd=class extends gs{static lc_name(){return"FunctionMessageChunk"}type="function";concat(e){let t=this.constructor;return new t({content:Ho(this.content,e.content),additional_kwargs:Wr(this.additional_kwargs,e.additional_kwargs),response_metadata:Wr(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}};function Ose(e){return e._getType()==="function"}function Mse(e){return e._getType()==="function"}var Pi=class extends bi{static lc_name(){return"HumanMessage"}type="human";constructor(e){super(e)}static isInstance(e){return super.isInstance(e)&&e.type==="human"}},hd=class extends gs{static lc_name(){return"HumanMessageChunk"}type="human";constructor(e){super(e)}concat(e){let t=this.constructor;return new t({content:Ho(this.content,e.content),additional_kwargs:Wr(this.additional_kwargs,e.additional_kwargs),response_metadata:Wr(this.response_metadata,e.response_metadata),id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="human"}};function Dse(e){return e.getType()==="human"}function Pse(e){return e.getType()==="human"}var Zo=class aP extends bi{static lc_name(){return"SystemMessage"}type="system";constructor(t){super(t)}concat(t){if(typeof t=="string")return new aP(b(m({},this),{content:Ho(this.content,t)}));if(aP.isInstance(t))return new aP(b(m({},this),{additional_kwargs:m(m({},this.additional_kwargs),t.additional_kwargs),response_metadata:m(m({},this.response_metadata),t.response_metadata),content:Ho(this.content,t.content)}));throw new Error("Unexpected chunk type for system message")}static isInstance(t){return super.isInstance(t)&&t.type==="system"}},tc=class extends gs{static lc_name(){return"SystemMessageChunk"}type="system";constructor(e){super(e)}concat(e){let t=this.constructor;return new t({content:Ho(this.content,e.content),additional_kwargs:Wr(this.additional_kwargs,e.additional_kwargs),response_metadata:Wr(this.response_metadata,e.response_metadata),id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="system"}};function Rse(e){return e._getType()==="system"}function Nse(e){return e._getType()==="system"}var Yf=class extends bi{type="remove";id;constructor(e){super(b(m({},e),{content:[]})),this.id=e.id}get _printableFields(){return b(m({},super._printableFields),{id:this.id})}static isInstance(e){return super.isInstance(e)&&e.type==="remove"}};var cP=e=>e();function Jze(e){return qp(e)?e:typeof e.id=="string"&&e.type==="function"&&typeof e.function=="object"&&e.function!==null&&"arguments"in e.function&&typeof e.function.arguments=="string"&&"name"in e.function&&typeof e.function.name=="string"?{id:e.id,args:JSON.parse(e.function.arguments),name:e.function.name,type:"tool_call"}:e}function Yze(e){return typeof e=="object"&&e!=null&&e.lc===1&&Array.isArray(e.id)&&e.kwargs!=null&&typeof e.kwargs=="object"}function C6(e){let t,n;if(Yze(e)){let o=e.id.at(-1);o==="HumanMessage"||o==="HumanMessageChunk"?t="user":o==="AIMessage"||o==="AIMessageChunk"?t="assistant":o==="SystemMessage"||o==="SystemMessageChunk"?t="system":o==="FunctionMessage"||o==="FunctionMessageChunk"?t="function":o==="ToolMessage"||o==="ToolMessageChunk"?t="tool":t="unknown",n=e.kwargs}else{let r=e,{type:o}=r,s=se(r,["type"]);t=o,n=s}if(t==="human"||t==="user")return new Pi(n);if(t==="ai"||t==="assistant"){let i=n,{tool_calls:o}=i,s=se(i,["tool_calls"]);if(!Array.isArray(o))return new Sn(n);let a=o.map(Jze);return new Sn(b(m({},s),{tool_calls:a}))}else{if(t==="system")return new Zo(n);if(t==="developer")return new Zo(b(m({},n),{additional_kwargs:b(m({},n.additional_kwargs),{__openai_role__:"developer"})}));if(t==="tool"&&"tool_call_id"in n)return new io(b(m({},n),{content:n.content,tool_call_id:n.tool_call_id,name:n.name}));if(t==="remove"&&"id"in n&&typeof n.id=="string")return new Yf(b(m({},n),{id:n.id}));throw Zp(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(e,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function ys(e){if(typeof e=="string")return new Pi(e);if(Gn(e))return e;if(Array.isArray(e)){let[n,r]=e;return C6({type:n,content:r})}else if(iP(e)){let t=e,{role:n}=t,r=se(t,["role"]);return C6(b(m({},r),{type:n}))}else return C6(e)}function Ry(e,t="Human",n="AI"){let r=[];for(let i of e){let o;if(i._getType()==="human")o=t;else if(i._getType()==="ai")o=n;else if(i._getType()==="system")o="System";else if(i._getType()==="tool")o="Tool";else if(i._getType()==="generic")o=i.role;else throw new Error(`Got unsupported message type: ${i._getType()}`);let s=i.name?`${i.name}, `:"",a=typeof i.content=="string"?i.content:JSON.stringify(i.content,null,2);r.push(`${o}: ${s}${a}`)}return r.join(`
`)}function Qze(e){if(e.data!==void 0)return e;{let t=e;return{type:t.type,data:{content:t.text,role:t.role,name:void 0,tool_call_id:void 0}}}}function _C(e){let t=Qze(e);switch(t.type){case"human":return new Pi(t.data);case"ai":return new Sn(t.data);case"system":return new Zo(t.data);case"function":if(t.data.name===void 0)throw new Error("Name must be defined for function messages");return new Yp(t.data);case"tool":if(t.data.tool_call_id===void 0)throw new Error("Tool call ID must be defined for tool messages");return new io(t.data);case"generic":if(t.data.role===void 0)throw new Error("Role must be defined for chat messages");return new _s(t.data);default:throw new Error(`Got unexpected type: ${t.type}`)}}function $se(e){return e.map(_C)}function Lse(e){return e.map(t=>t.toDict())}function Qf(e){let t=e._getType();if(t==="human")return new hd(m({},e));if(t==="ai"){let n=m({},e);return"tool_calls"in n&&(n=b(m({},n),{tool_call_chunks:n.tool_calls?.map(r=>b(m({},r),{type:"tool_call_chunk",index:void 0,args:JSON.stringify(r.args)}))})),new Cr(m({},n))}else{if(t==="system")return new tc(m({},e));if(t==="function")return new fd(m({},e));if(_s.isInstance(e))return new md(m({},e));throw new Error("Unknown message type.")}}var I6={};ae(I6,{getEnv:()=>uP,getEnvironmentVariable:()=>Kr,getRuntimeEnvironment:()=>S6,isBrowser:()=>Fse,isDeno:()=>lP,isJsDom:()=>zse,isNode:()=>Bse,isWebWorker:()=>jse});var Fse=()=>typeof window<"u"&&typeof window.document<"u",jse=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",zse=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),lP=()=>typeof Deno<"u",Bse=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!lP(),uP=()=>{let e;return Fse()?e="browser":Bse()?e="node":jse()?e="webworker":zse()?e="jsdom":lP()?e="deno":e="other",e},E6;function S6(){return E6===void 0&&(E6={library:"langchain-js",runtime:uP()}),E6}function Kr(e){try{return typeof process<"u"?process.env?.[e]:lP()?Deno?.env.get(e):void 0}catch{return}}var Use=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function Xze(e){return typeof e=="string"&&Use.test(e)}var Fc=Xze;function eBe(e){if(!Fc(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=t&255,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=t&255,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=t&255,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=t&255,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=t&255,n}var dP=eBe;var So=[];for(pP=0;pP<256;++pP)So.push((pP+256).toString(16).slice(1));var pP;function nc(e,t=0){return(So[e[t+0]]+So[e[t+1]]+So[e[t+2]]+So[e[t+3]]+"-"+So[e[t+4]]+So[e[t+5]]+"-"+So[e[t+6]]+So[e[t+7]]+"-"+So[e[t+8]]+So[e[t+9]]+"-"+So[e[t+10]]+So[e[t+11]]+So[e[t+12]]+So[e[t+13]]+So[e[t+14]]+So[e[t+15]]).toLowerCase()}var mP,tBe=new Uint8Array(16);function Xf(){if(!mP&&(mP=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!mP))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return mP(tBe)}var k6,fP,T6=0,A6=0;function nBe(e,t,n){var r=t&&n||0,i=t||new Array(16);e=e||{};var o=e.node,s=e.clockseq;if(e._v6||(o||(o=k6),s==null&&(s=fP)),o==null||s==null){var a=e.random||(e.rng||Xf)();o==null&&(o=[a[0],a[1],a[2],a[3],a[4],a[5]],!k6&&!e._v6&&(o[0]|=1,k6=o)),s==null&&(s=(a[6]<<8|a[7])&16383,fP===void 0&&!e._v6&&(fP=s))}var c=e.msecs!==void 0?e.msecs:Date.now(),u=e.nsecs!==void 0?e.nsecs:A6+1,d=c-T6+(u-A6)/1e4;if(d<0&&e.clockseq===void 0&&(s=s+1&16383),(d<0||c>T6)&&e.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");T6=c,A6=u,fP=s,c+=122192928e5;var f=((c&268435455)*1e4+u)%4294967296;i[r++]=f>>>24&255,i[r++]=f>>>16&255,i[r++]=f>>>8&255,i[r++]=f&255;var g=c/4294967296*1e4&268435455;i[r++]=g>>>8&255,i[r++]=g&255,i[r++]=g>>>24&15|16,i[r++]=g>>>16&255,i[r++]=s>>>8|128,i[r++]=s&255;for(var h=0;h<6;++h)i[r+h]=o[h];return t||nc(i)}var Vse=nBe;function O6(e){var t=typeof e=="string"?dP(e):e,n=rBe(t);return typeof e=="string"?nc(n):n}function rBe(e,t=!1){return Uint8Array.of((e[6]&15)<<4|e[7]>>4&15,(e[7]&15)<<4|(e[4]&240)>>4,(e[4]&15)<<4|(e[5]&240)>>4,(e[5]&15)<<4|(e[0]&240)>>4,(e[0]&15)<<4|(e[1]&240)>>4,(e[1]&15)<<4|(e[2]&240)>>4,96|e[2]&15,e[3],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function iBe(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}var oBe="6ba7b810-9dad-11d1-80b4-00c04fd430c8",sBe="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function M6(e,t,n){function r(i,o,s,a){var c;if(typeof i=="string"&&(i=iBe(i)),typeof o=="string"&&(o=dP(o)),((c=o)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=n(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,s){a=a||0;for(var d=0;d<16;++d)s[a+d]=u[d];return s}return nc(u)}try{r.name=e}catch{}return r.DNS=oBe,r.URL=sBe,r}var aBe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),D6={randomUUID:aBe};function cBe(e,t,n){if(D6.randomUUID&&!t&&!e)return D6.randomUUID();e=e||{};var r=e.random||(e.rng||Xf)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return nc(r)}var ei=cBe;function lBe(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}function P6(e,t){return e<<t|e>>>32-t}function uBe(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){var r=unescape(encodeURIComponent(e));e=[];for(var i=0;i<r.length;++i)e.push(r.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,s=Math.ceil(o/16),a=new Array(s),c=0;c<s;++c){for(var u=new Uint32Array(16),d=0;d<16;++d)u[d]=e[c*64+d*4]<<24|e[c*64+d*4+1]<<16|e[c*64+d*4+2]<<8|e[c*64+d*4+3];a[c]=u}a[s-1][14]=(e.length-1)*8/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=(e.length-1)*8&4294967295;for(var f=0;f<s;++f){for(var g=new Uint32Array(80),h=0;h<16;++h)g[h]=a[f][h];for(var v=16;v<80;++v)g[v]=P6(g[v-3]^g[v-8]^g[v-14]^g[v-16],1);for(var x=n[0],E=n[1],C=n[2],S=n[3],A=n[4],P=0;P<80;++P){var F=Math.floor(P/20),B=P6(x,5)+lBe(F,E,C,S)+A+t[F]+g[P]>>>0;A=S,S=C,C=P6(E,30)>>>0,E=x,x=B}n[0]=n[0]+x>>>0,n[1]=n[1]+E>>>0,n[2]=n[2]+C>>>0,n[3]=n[3]+S>>>0,n[4]=n[4]+A>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var Hse=uBe;var dBe=M6("v5",80,Hse),rc=dBe;function Zse(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qse(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Zse(Object(n),!0).forEach(function(r){pBe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zse(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pBe(e,t,n){return(t=mBe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mBe(e){var t=fBe(e,"string");return typeof t=="symbol"?t:t+""}function fBe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hP(e={},t,n=0){var r=Vse(qse(qse({},e),{},{_v6:!0}),new Uint8Array(16));if(r=O6(r),t){for(var i=0;i<16;i++)t[n+i]=r[i];return t}return nc(r)}var Gse=null,Wse=null,jc=0;function hBe(e,t,n){e=e||{};var r=t&&n||0,i=t||new Uint8Array(16),o=e.random||(e.rng||Xf)(),s=e.msecs!==void 0?e.msecs:Date.now(),a=e.seq!==void 0?e.seq:null,c=Wse,u=Gse;return s>jc&&e.msecs===void 0&&(jc=s,a!==null&&(c=null,u=null)),a!==null&&(a>2147483647&&(a=2147483647),c=a>>>19&4095,u=a&524287),(c===null||u===null)&&(c=o[6]&127,c=c<<8|o[7],u=o[8]&63,u=u<<8|o[9],u=u<<5|o[10]>>>3),s+1e4>jc&&a===null?++u>524287&&(u=0,++c>4095&&(c=0,jc++)):jc=s,Wse=c,Gse=u,i[r++]=jc/1099511627776&255,i[r++]=jc/4294967296&255,i[r++]=jc/16777216&255,i[r++]=jc/65536&255,i[r++]=jc/256&255,i[r++]=jc&255,i[r++]=c>>>4&15|112,i[r++]=c&255,i[r++]=u>>>13&63|128,i[r++]=u>>>5&255,i[r++]=u<<3&255|o[10]&7,i[r++]=o[11],i[r++]=o[12],i[r++]=o[13],i[r++]=o[14],i[r++]=o[15],t||nc(i)}var R6=hBe;var N6={};ae(N6,{BaseCallbackHandler:()=>gd,callbackHandlerPrefersStreaming:()=>yC,isBaseCallbackHandler:()=>$6});var gBe=class{};function yC(e){return"lc_prefer_streaming"in e&&e.lc_prefer_streaming}var gd=class extends gBe{lc_serializable=!1;get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Ay(this.constructor)]}lc_kwargs;ignoreLLM=!1;ignoreChain=!1;ignoreAgent=!1;ignoreRetriever=!1;ignoreCustomEvent=!1;raiseError=!1;awaitHandlers=Kr("LANGCHAIN_CALLBACKS_BACKGROUND")==="false";constructor(e){super(),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return vi.prototype.toJSON.call(this)}toJSONNotImplemented(){return vi.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class t extends gd{name=ei();constructor(){super(),Object.assign(this,e)}}return new t}},$6=e=>{let t=e;return t!==void 0&&typeof t.copy=="function"&&typeof t.name=="string"&&typeof t.awaitHandlers=="boolean"};var Jse="gen_ai.operation.name",Yse="gen_ai.system",L6="gen_ai.request.model",Qse="gen_ai.response.model",F6="gen_ai.usage.input_tokens",j6="gen_ai.usage.output_tokens",z6="gen_ai.usage.total_tokens",Xse="gen_ai.request.max_tokens",eae="gen_ai.request.temperature",tae="gen_ai.request.top_p",nae="gen_ai.request.frequency_penalty",rae="gen_ai.request.presence_penalty",iae="gen_ai.response.finish_reasons",oae="gen_ai.prompt",sae="gen_ai.completion",aae="gen_ai.request.extra_query",cae="gen_ai.request.extra_body",lae="gen_ai.serialized.name",uae="gen_ai.serialized.signature",dae="gen_ai.serialized.doc",pae="gen_ai.response.id",mae="gen_ai.response.service_tier",fae="gen_ai.response.system_fingerprint",hae="gen_ai.usage.input_token_details",gae="gen_ai.usage.output_token_details",_ae="langsmith.trace.session_id",yae="langsmith.trace.session_name",vae="langsmith.span.kind",bae="langsmith.trace.name",wae="langsmith.metadata",B6="langsmith.span.tags";var xae="langsmith.request.streaming",Cae="langsmith.request.headers";var yBe=(...e)=>fetch(...e),Eae=Symbol.for("ls:fetch_implementation");var Iae=()=>{let e=globalThis[Eae];return e?typeof e=="function"&&"Headers"in e&&"Request"in e&&"Response"in e:!1},Sae=e=>(...t)=>y(null,null,function*(){if(e||Ri("DEBUG")==="true"){let[r,i]=t;console.log(`\u2192 ${i?.method||"GET"} ${r}`)}let n=yield(globalThis[Eae]??yBe)(...t);return(e||Ri("DEBUG")==="true")&&console.log(`\u2190 ${n.status} ${n.statusText} ${n.url}`),n});var vC=()=>Ri("PROJECT")??wa("LANGCHAIN_SESSION")??"default";var kae={};function Ny(e){kae[e]||(console.warn(e),kae[e]=!0)}var vBe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Xt(e,t){if(!vBe.test(e)){let n=t!==void 0?`Invalid UUID for ${t}: ${e}`:`Invalid UUID: ${e}`;throw new Error(n)}return e}function gP(e){let t=typeof e=="string"?Date.parse(e):e;return R6({msecs:t,seq:0})}var _P="0.3.82";var ql,bBe=()=>typeof window<"u"&&typeof window.document<"u",wBe=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",xBe=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),Tae=()=>typeof Deno<"u",CBe=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!Tae(),H6=()=>ql||(typeof Bun<"u"?ql="bun":bBe()?ql="browser":CBe()?ql="node":wBe()?ql="webworker":xBe()?ql="jsdom":Tae()?ql="deno":ql="other",ql),U6;function yP(){if(U6===void 0){let e=H6(),t=IBe();U6=m({library:"langsmith",runtime:e,sdk:"langsmith-js",sdk_version:_P},t)}return U6}function Z6(){let e=EBe(),t={},n=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(let[r,i]of Object.entries(e))typeof i=="string"&&!n.includes(r)&&!r.toLowerCase().includes("key")&&!r.toLowerCase().includes("secret")&&!r.toLowerCase().includes("token")&&(r==="LANGCHAIN_REVISION_ID"?t.revision_id=i:t[r]=i);return t}function EBe(){let e={};try{if(typeof process<"u"&&process.env)for(let[t,n]of Object.entries(process.env))(t.startsWith("LANGCHAIN_")||t.startsWith("LANGSMITH_"))&&n!=null&&((t.toLowerCase().includes("key")||t.toLowerCase().includes("secret")||t.toLowerCase().includes("token"))&&typeof n=="string"?e[t]=n.slice(0,2)+"*".repeat(n.length-4)+n.slice(-2):e[t]=n)}catch{}return e}function wa(e){try{return typeof process<"u"?process.env?.[e]:void 0}catch{return}}function Ri(e){return wa(`LANGSMITH_${e}`)||wa(`LANGCHAIN_${e}`)}var V6;function IBe(){if(V6!==void 0)return V6;let e=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],t={};for(let n of e){let r=wa(n);r!==void 0&&(t[n]=r)}return V6=t,t}function vP(){return wa("OTEL_ENABLED")==="true"||Ri("OTEL_ENABLED")==="true"}var W6=class{constructor(){Object.defineProperty(this,"hasWarned",{enumerable:!0,configurable:!0,writable:!0,value:!1})}startActiveSpan(t,...n){!this.hasWarned&&vP()&&(console.warn('You have enabled OTEL export via the `OTEL_ENABLED` or `LANGSMITH_OTEL_ENABLED` environment variable, but have not initialized the required OTEL instances. Please add:\n```\nimport { initializeOTEL } from "langsmith/experimental/otel/setup";\ninitializeOTEL();\n```\nat the beginning of your code.'),this.hasWarned=!0);let r;if(n.length===1&&typeof n[0]=="function"?r=n[0]:n.length===2&&typeof n[1]=="function"?r=n[1]:n.length===3&&typeof n[2]=="function"&&(r=n[2]),typeof r=="function")return r()}},K6=class{constructor(){Object.defineProperty(this,"mockTracer",{enumerable:!0,configurable:!0,writable:!0,value:new W6})}getTracer(t,n){return this.mockTracer}getActiveSpan(){}setSpan(t,n){return t}getSpan(t){}setSpanContext(t,n){return t}getTracerProvider(){}setGlobalTracerProvider(t){return!1}},J6=class{active(){return{}}with(t,n){return n()}},q6=Symbol.for("ls:otel_trace"),G6=Symbol.for("ls:otel_context"),Aae=Symbol.for("ls:otel_get_default_otlp_tracer_provider"),SBe=new K6,kBe=new J6,Y6=class{getTraceInstance(){return globalThis[q6]??SBe}getContextInstance(){return globalThis[G6]??kBe}initializeGlobalInstances(t){globalThis[q6]===void 0&&(globalThis[q6]=t.trace),globalThis[G6]===void 0&&(globalThis[G6]=t.context)}setDefaultOTLPTracerComponents(t){globalThis[Aae]=t}getDefaultOTLPTracerComponents(){return globalThis[Aae]??void 0}},Q6=new Y6;function bP(){return Q6.getTraceInstance()}function Oae(){return Q6.getContextInstance()}function Mae(){return Q6.getDefaultOTLPTracerComponents()}var TBe={llm:"chat",tool:"execute_tool",retriever:"embeddings",embedding:"embeddings",prompt:"chat"};function ABe(e){return TBe[e]||e}var wP=class{constructor(){Object.defineProperty(this,"spans",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}exportBatch(t,n){for(let r of t)try{if(!r.run)continue;if(r.operation==="post"){let i=this.createSpanForRun(r,r.run,n.get(r.id));i&&!r.run.end_time&&this.spans.set(r.id,i)}else this.updateSpanForRun(r,r.run)}catch(i){console.error(`Error processing operation ${r.id}:`,i)}}createSpanForRun(t,n,r){let i=r&&bP().getSpan(r);if(i)try{return this.finishSpanSetup(i,n,t)}catch(o){console.error(`Failed to create span for run ${t.id}:`,o);return}}finishSpanSetup(t,n,r){return this.setSpanAttributes(t,n,r),n.error?(t.setStatus({code:2}),t.recordException(new Error(n.error))):t.setStatus({code:1}),n.end_time&&t.end(new Date(n.end_time)),t}updateSpanForRun(t,n){try{let r=this.spans.get(t.id);if(!r){console.debug(`No span found for run ${t.id} during update`);return}this.setSpanAttributes(r,n,t),n.error?(r.setStatus({code:2}),r.recordException(new Error(n.error))):r.setStatus({code:1});let i=n.end_time;i&&(r.end(new Date(i)),this.spans.delete(t.id))}catch(r){console.error(`Failed to update span for run ${t.id}:`,r)}}extractModelName(t){if(t.extra?.metadata){let n=t.extra.metadata;if(n.ls_model_name)return n.ls_model_name;if(n.invocation_params){let r=n.invocation_params;if(r.model)return r.model;if(r.model_name)return r.model_name}}}setSpanAttributes(t,n,r){if("run_type"in n&&n.run_type){t.setAttribute(vae,n.run_type);let a=ABe(n.run_type||"chain");t.setAttribute(Jse,a)}"name"in n&&n.name&&t.setAttribute(bae,n.name),"session_id"in n&&n.session_id&&t.setAttribute(_ae,n.session_id),"session_name"in n&&n.session_name&&t.setAttribute(yae,n.session_name),this.setGenAiSystem(t,n);let i=this.extractModelName(n);i&&t.setAttribute(L6,i),"prompt_tokens"in n&&typeof n.prompt_tokens=="number"&&t.setAttribute(F6,n.prompt_tokens),"completion_tokens"in n&&typeof n.completion_tokens=="number"&&t.setAttribute(j6,n.completion_tokens),"total_tokens"in n&&typeof n.total_tokens=="number"&&t.setAttribute(z6,n.total_tokens),this.setInvocationParameters(t,n);let o=n.extra?.metadata||{};for(let[a,c]of Object.entries(o))c!=null&&t.setAttribute(`${wae}.${a}`,String(c));let s=n.tags;if(s&&Array.isArray(s)?t.setAttribute(B6,s.join(", ")):s&&t.setAttribute(B6,String(s)),"serialized"in n&&typeof n.serialized=="object"){let a=n.serialized;a.name&&t.setAttribute(lae,String(a.name)),a.signature&&t.setAttribute(uae,String(a.signature)),a.doc&&t.setAttribute(dae,String(a.doc))}this.setIOAttributes(t,r)}setGenAiSystem(t,n){let r="langchain",i=this.extractModelName(n);if(i){let o=i.toLowerCase();o.includes("anthropic")||o.startsWith("claude")?r="anthropic":o.includes("bedrock")?r="aws.bedrock":o.includes("azure")&&o.includes("openai")?r="az.ai.openai":o.includes("azure")&&o.includes("inference")?r="az.ai.inference":o.includes("cohere")?r="cohere":o.includes("deepseek")?r="deepseek":o.includes("gemini")?r="gemini":o.includes("groq")?r="groq":o.includes("watson")||o.includes("ibm")?r="ibm.watsonx.ai":o.includes("mistral")?r="mistral_ai":o.includes("gpt")||o.includes("openai")?r="openai":o.includes("perplexity")||o.includes("sonar")?r="perplexity":o.includes("vertex")?r="vertex_ai":(o.includes("xai")||o.includes("grok"))&&(r="xai")}t.setAttribute(Yse,r)}setInvocationParameters(t,n){if(!n.extra?.metadata?.invocation_params)return;let r=n.extra.metadata.invocation_params;r.max_tokens!==void 0&&t.setAttribute(Xse,r.max_tokens),r.temperature!==void 0&&t.setAttribute(eae,r.temperature),r.top_p!==void 0&&t.setAttribute(tae,r.top_p),r.frequency_penalty!==void 0&&t.setAttribute(nae,r.frequency_penalty),r.presence_penalty!==void 0&&t.setAttribute(rae,r.presence_penalty)}setIOAttributes(t,n){if(n.run.inputs)try{let r=n.run.inputs;typeof r=="object"&&r!==null&&(r.model&&Array.isArray(r.messages)&&t.setAttribute(L6,r.model),r.stream!==void 0&&t.setAttribute(xae,r.stream),r.extra_headers&&t.setAttribute(Cae,JSON.stringify(r.extra_headers)),r.extra_query&&t.setAttribute(aae,JSON.stringify(r.extra_query)),r.extra_body&&t.setAttribute(cae,JSON.stringify(r.extra_body))),t.setAttribute(oae,JSON.stringify(r))}catch(r){console.debug(`Failed to process inputs for run ${n.id}`,r)}if(n.run.outputs)try{let r=n.run.outputs,i=this.getUnifiedRunTokens(r);if(i&&(t.setAttribute(F6,i[0]),t.setAttribute(j6,i[1]),t.setAttribute(z6,i[0]+i[1])),r&&typeof r=="object"){if(r.model&&t.setAttribute(Qse,String(r.model)),r.id&&t.setAttribute(pae,r.id),r.choices&&Array.isArray(r.choices)){let o=r.choices.map(s=>s.finish_reason).filter(s=>s).map(String);o.length>0&&t.setAttribute(iae,o.join(", "))}if(r.service_tier&&t.setAttribute(mae,r.service_tier),r.system_fingerprint&&t.setAttribute(fae,r.system_fingerprint),r.usage_metadata&&typeof r.usage_metadata=="object"){let o=r.usage_metadata;o.input_token_details&&t.setAttribute(hae,JSON.stringify(o.input_token_details)),o.output_token_details&&t.setAttribute(gae,JSON.stringify(o.output_token_details))}}t.setAttribute(sae,JSON.stringify(r))}catch(r){console.debug(`Failed to process outputs for run ${n.id}`,r)}}getUnifiedRunTokens(t){if(!t)return null;let n=this.extractUnifiedRunTokens(t.usage_metadata);if(n)return n;let r=Object.keys(t);for(let s of r){let a=t[s];if(!(!a||typeof a!="object")&&(n=this.extractUnifiedRunTokens(a.usage_metadata),n||a.lc===1&&a.kwargs&&typeof a.kwargs=="object"&&(n=this.extractUnifiedRunTokens(a.kwargs.usage_metadata),n)))return n}let i=t.generations||[];if(!Array.isArray(i))return null;let o=Array.isArray(i[0])?i.flat():i;for(let s of o)if(typeof s=="object"&&s.message&&typeof s.message=="object"&&s.message.kwargs&&typeof s.message.kwargs=="object"&&(n=this.extractUnifiedRunTokens(s.message.kwargs.usage_metadata),n))return n;return null}extractUnifiedRunTokens(t){return!t||typeof t!="object"||typeof t.input_tokens!="number"||typeof t.output_tokens!="number"?null:[t.input_tokens,t.output_tokens]}};var OBe=Object.prototype.toString,MBe=e=>OBe.call(e)==="[object Error]",DBe=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function X6(e){if(!(e&&MBe(e)&&e.name==="TypeError"&&typeof e.message=="string"))return!1;let{message:n,stack:r}=e;return n==="Load failed"?r===void 0||"__sentry_captured__"in e:n.startsWith("error sending request for url")?!0:DBe.has(n)}function PBe(e){if(typeof e=="number"){if(e<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(e))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(e!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function xP(e,t,{min:n=0,allowInfinity:r=!1}={}){if(t!==void 0){if(typeof t!="number"||Number.isNaN(t))throw new TypeError(`Expected \`${e}\` to be a number${r?" or Infinity":""}.`);if(!r&&!Number.isFinite(t))throw new TypeError(`Expected \`${e}\` to be a finite number.`);if(t<n)throw new TypeError(`Expected \`${e}\` to be \u2265 ${n}.`)}}var eH=class extends Error{constructor(t){super(),t instanceof Error?(this.originalError=t,{message:t}=t):(this.originalError=new Error(t),this.originalError.stack=this.stack),this.name="AbortError",this.message=t}};function RBe(e,t){let n=Math.max(1,e+1),r=t.randomize?Math.random()+1:1,i=Math.round(r*t.minTimeout*t.factor**(n-1));return i=Math.min(i,t.maxTimeout),i}function Dae(e,t){return Number.isFinite(t)?t-(performance.now()-e):t}function NBe(o){return y(this,arguments,function*({error:e,attemptNumber:t,retriesConsumed:n,startTime:r,options:i}){let s=e instanceof Error?e:new TypeError(`Non-error was thrown: "${e}". You should only throw errors.`);if(s instanceof eH)throw s.originalError;let a=Number.isFinite(i.retries)?Math.max(0,i.retries-n):i.retries,c=i.maxRetryTime??Number.POSITIVE_INFINITY,u=Object.freeze({error:s,attemptNumber:t,retriesLeft:a,retriesConsumed:n});if(yield i.onFailedAttempt(u),Dae(r,c)<=0)throw s;let d=yield i.shouldConsumeRetry(u),f=Dae(r,c);if(f<=0||a<=0)throw s;if(s instanceof TypeError&&!X6(s)){if(d)throw s;return i.signal?.throwIfAborted(),!1}if(!(yield i.shouldRetry(u)))throw s;if(!d)return i.signal?.throwIfAborted(),!1;let g=RBe(n,i),h=Math.min(g,f);return h>0&&(yield new Promise((v,x)=>{let E=()=>{clearTimeout(C),i.signal?.removeEventListener("abort",E),x(i.signal.reason)},C=setTimeout(()=>{i.signal?.removeEventListener("abort",E),v()},h);i.unref&&C.unref?.(),i.signal?.addEventListener("abort",E,{once:!0})})),i.signal?.throwIfAborted(),!0})}function tH(n){return y(this,arguments,function*(e,t={}){if(t=m({},t),PBe(t.retries),Object.hasOwn(t,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");t.retries??=10,t.factor??=2,t.minTimeout??=1e3,t.maxTimeout??=Number.POSITIVE_INFINITY,t.maxRetryTime??=Number.POSITIVE_INFINITY,t.randomize??=!1,t.onFailedAttempt??=()=>{},t.shouldRetry??=()=>!0,t.shouldConsumeRetry??=()=>!0,xP("factor",t.factor,{min:0,allowInfinity:!1}),xP("minTimeout",t.minTimeout,{min:0,allowInfinity:!1}),xP("maxTimeout",t.maxTimeout,{min:0,allowInfinity:!0}),xP("maxRetryTime",t.maxRetryTime,{min:0,allowInfinity:!0}),t.factor>0||(t.factor=1),t.signal?.throwIfAborted();let r=0,i=0,o=performance.now();for(;!Number.isFinite(t.retries)||i<=t.retries;){r++;try{t.signal?.throwIfAborted();let s=yield e(r);return t.signal?.throwIfAborted(),s}catch(s){(yield NBe({error:s,attemptNumber:r,retriesConsumed:i,startTime:o,options:t}))&&i++}}throw new Error("Retry attempts exhausted without throwing an error.")})}var TP=_c(kP(),1);var HBe=[408,425,429,500,502,503,504],wC=class{constructor(t){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxQueueSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queueSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.maxConcurrency=t.maxConcurrency??1/0,this.maxRetries=t.maxRetries??6,this.maxQueueSizeBytes=t.maxQueueSizeBytes,"default"in TP.default?this.queue=new TP.default.default({concurrency:this.maxConcurrency}):this.queue=new TP.default({concurrency:this.maxConcurrency}),this.onFailedResponseHook=t?.onFailedResponseHook}call(t,...n){return this.callWithOptions({},t,...n)}callWithOptions(t,n,...r){let i=t.sizeBytes??0;if(this.maxQueueSizeBytes!==void 0&&i>0&&this.queueSizeBytes+i>this.maxQueueSizeBytes)return Promise.reject(new Error(`Queue size limit (${this.maxQueueSizeBytes} bytes) exceeded. Current queue size: ${this.queueSizeBytes} bytes, attempted addition: ${i} bytes.`));i>0&&(this.queueSizeBytes+=i);let o=this.onFailedResponseHook,s=this.queue.add(()=>tH(()=>n(...r).catch(c=>{throw c instanceof Error?c:new Error(c)}),{onFailedAttempt(u){return y(this,arguments,function*({error:c}){if(c.message.startsWith("Cancel")||c.message.startsWith("TimeoutError")||c.name==="TimeoutError"||c.message.startsWith("AbortError")||c?.code==="ECONNABORTED")throw c;let d=c?.response;if(o&&(yield o(d)))return;let f=d?.status??c?.status;if(f&&!HBe.includes(+f))throw c})},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0});return i>0&&(s=s.finally(()=>{this.queueSizeBytes-=i})),t.signal?Promise.race([s,new Promise((a,c)=>{t.signal?.addEventListener("abort",()=>{c(new Error("AbortError"))})})]):s}};function cH(e){return typeof e?._getType=="function"}function lH(e){let t={type:e._getType(),data:{content:e.content}};return e?.additional_kwargs&&Object.keys(e.additional_kwargs).length>0&&(t.data.additional_kwargs=m({},e.additional_kwargs)),t}var zVe=_c(Ole(),1);function yd(e){if(!e||e.split("/").length>2||e.startsWith("/")||e.endsWith("/")||e.split(":").length>2)throw new Error(`Invalid identifier format: ${e}`);let[t,n]=e.split(":"),r=n||"latest";if(t.includes("/")){let[i,o]=t.split("/",2);if(!i||!o)throw new Error(`Invalid identifier format: ${e}`);return[i,o,r]}else{if(!t)throw new Error(`Invalid identifier format: ${e}`);return["-",t,r]}}var TH=class extends Error{constructor(t){super(t),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}};function ut(e,t,n){return y(this,null,function*(){let r;if(e.ok){n&&(r=yield e.text());return}if(e.status===403)try{(yield e.json())?.error==="org_scoped_key_requires_workspace"&&(r="This API key is org-scoped and requires workspace specification. Please provide 'workspaceId' parameter, or set LANGSMITH_WORKSPACE_ID environment variable.")}catch{let a=new Error(`${e.status} ${e.statusText}`);throw a.status=e?.status,a}if(r===void 0)try{r=yield e.text()}catch{r=""}let i=`Failed to ${t}. Received status [${e.status}]: ${e.statusText}. Message: ${r}`;if(e.status===409)throw new TH(i);let o=new Error(i);throw o.status=e.status,o})}var Mle="ERR_CONFLICTING_ENDPOINTS",BP=class extends Error{constructor(){super("You cannot provide both LANGSMITH_ENDPOINT / LANGCHAIN_ENDPOINT and LANGSMITH_RUNS_ENDPOINTS."),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:Mle}),this.name="ConflictingEndpointsError"}};function Dle(e){return typeof e=="object"&&e!==null&&e.code===Mle}var Ple="[...]",BVe={result:"[Circular]"},VP=[],Fy=[],UVe=new TextEncoder;function VVe(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function UP(e){return UVe.encode(e)}function Rle(e){if(e&&typeof e=="object"&&e!==null){if(e instanceof Map)return Object.fromEntries(e);if(e instanceof Set)return Array.from(e);if(e instanceof Date)return e.toISOString();if(e instanceof RegExp)return e.toString();if(e instanceof Error)return{name:e.name,message:e.message}}else if(typeof e=="bigint")return e.toString();return e}function HVe(e){return function(t,n){if(e){let r=e.call(this,t,n);if(r!==void 0)return r}return Rle(n)}}function ia(e,t,n,r,i){try{let o=JSON.stringify(e,HVe(n),r);return UP(o)}catch(o){if(!o.message?.includes("Converting circular structure to JSON"))return console.warn(`[WARNING]: LangSmith received unserializable value.${t?`
Context: ${t}`:""}`),UP("[Unserializable]");Ri("SUPPRESS_CIRCULAR_JSON_WARNINGS")!=="true"&&console.warn(`[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. ${t?`
Context: ${t}`:""}`),typeof i>"u"&&(i=VVe()),OH(e,"",0,[],void 0,0,i);let s;try{Fy.length===0?s=JSON.stringify(e,n,r):s=JSON.stringify(e,ZVe(n),r)}catch{return UP("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;VP.length!==0;){let a=VP.pop();a.length===4?Object.defineProperty(a[0],a[1],a[3]):a[0][a[1]]=a[2]}}return UP(s)}}function AH(e,t,n,r){var i=Object.getOwnPropertyDescriptor(r,n);i.get!==void 0?i.configurable?(Object.defineProperty(r,n,{value:e}),VP.push([r,n,t,i])):Fy.push([t,n,e]):(r[n]=e,VP.push([r,n,t]))}function OH(e,t,n,r,i,o,s){o+=1;var a;if(typeof e=="object"&&e!==null){for(a=0;a<r.length;a++)if(r[a]===e){AH(BVe,e,t,i);return}if(typeof s.depthLimit<"u"&&o>s.depthLimit){AH(Ple,e,t,i);return}if(typeof s.edgesLimit<"u"&&n+1>s.edgesLimit){AH(Ple,e,t,i);return}if(r.push(e),Array.isArray(e))for(a=0;a<e.length;a++)OH(e[a],a,a,r,e,o,s);else{e=Rle(e);var c=Object.keys(e);for(a=0;a<c.length;a++){var u=c[a];OH(e[u],u,a,r,e,o,s)}}r.pop()}}function ZVe(e){return e=typeof e<"u"?e:function(t,n){return n},function(t,n){if(Fy.length>0)for(var r=0;r<Fy.length;r++){var i=Fy[r];if(i[1]===t&&i[0]===n){n=i[2],Fy.splice(r,1);break}}return e.call(this,t,n)}}function Nle(e,t){let n=yP(),r=t??Z6(),i=e.extra??{},o=i.metadata;return e.extra=b(m({},i),{runtime:m(m({},n),i?.runtime),metadata:m(m(m({},r),r.revision_id||"revision_id"in e&&e.revision_id?{revision_id:("revision_id"in e?e.revision_id:void 0)??r.revision_id}:{}),o)}),e}var qVe=e=>{let t=e?.toString()??Ri("TRACING_SAMPLING_RATE");if(t===void 0)return;let n=parseFloat(t);if(n<0||n>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${n}`);return n},GVe=e=>{let n=e.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return n==="localhost"||n==="127.0.0.1"||n==="::1"};function WVe(e){return y(this,null,function*(){let t=[];try{for(var n=ue(e),r,i,o;r=!(i=yield n.next()).done;r=!1){let s=i.value;t.push(s)}}catch{o=[i]}finally{try{r&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o[0]}}return t})}function HP(e){if(e!==void 0)return e.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}var KVe=e=>y(null,null,function*(){if(e?.status===429){let t=parseInt(e.headers.get("retry-after")??"10",10)*1e3;if(t>0)return yield new Promise(n=>setTimeout(n,t)),!0}return!1});function $le(e){return typeof e=="number"?Number(e.toFixed(4)):e}var JVe=24*1024*1024,jle=1024*1024*1024,YVe=1e4,QVe=100,Lle="https://api.smith.langchain.com",MH=class{constructor(t){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"maxSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSizeBytes=t??jle}peek(){return this.items[0]}push(t){let n,r=new Promise(o=>{n=o}),i=ia(t.item,`Serializing run with id: ${t.item.id}`).length;return this.sizeBytes+i>this.maxSizeBytes&&this.items.length>0?(console.warn(`AutoBatchQueue size limit (${this.maxSizeBytes} bytes) exceeded. Dropping run with id: ${t.item.id}. Current queue size: ${this.sizeBytes} bytes, attempted addition: ${i} bytes.`),n(),r):(this.items.push({action:t.action,payload:t.item,otelContext:t.otelContext,apiKey:t.apiKey,apiUrl:t.apiUrl,itemPromiseResolve:n,itemPromise:r,size:i}),this.sizeBytes+=i,r)}pop({upToSizeBytes:t,upToSize:n}){if(t<1)throw new Error("Number of bytes to pop off may not be less than 1.");let r=[],i=0;for(;i+(this.peek()?.size??0)<t&&this.items.length>0&&r.length<n;){let o=this.items.shift();o&&(r.push(o),i+=o.size,this.sizeBytes-=o.size)}if(r.length===0&&this.items.length>0){let o=this.items.shift();r.push(o),i+=o.size,this.sizeBytes-=o.size}return[r.map(o=>({action:o.action,item:o.payload,otelContext:o.otelContext,apiKey:o.apiKey,apiUrl:o.apiUrl,size:o.size})),()=>r.forEach(o=>o.itemPromiseResolve())]}},_d=class e{get _fetch(){return this.fetchImplementation||Sae(this.debug)}constructor(t={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"workspaceId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSizeLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:wa("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"langSmithToOTELTranslator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchImplementation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cachedLSEnvVarsForMetadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"multipartStreamingDisabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:wa("LANGSMITH_DEBUG")==="true"});let n=e.getDefaultClientConfig();if(this.tracingSampleRate=qVe(t.tracingSamplingRate),this.apiUrl=HP(t.apiUrl??n.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=HP(t.apiKey??n.apiKey),this.webUrl=HP(t.webUrl??n.webUrl),this.webUrl?.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.workspaceId=HP(t.workspaceId??Ri("WORKSPACE_ID")),this.timeout_ms=t.timeout_ms??9e4,this.caller=new wC(b(m({},t.callerOptions??{}),{maxRetries:4,debug:t.debug??this.debug})),this.traceBatchConcurrency=t.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=t.debug??this.debug,this.fetchImplementation=t.fetchImplementation;let r=t.maxIngestMemoryBytes??jle;this.batchIngestCaller=new wC(b(m({maxRetries:4,maxConcurrency:this.traceBatchConcurrency,maxQueueSizeBytes:r},t.callerOptions??{}),{onFailedResponseHook:KVe,debug:t.debug??this.debug})),this.hideInputs=t.hideInputs??t.anonymizer??n.hideInputs,this.hideOutputs=t.hideOutputs??t.anonymizer??n.hideOutputs,this.autoBatchTracing=t.autoBatchTracing??this.autoBatchTracing,this.autoBatchQueue=new MH(r),this.blockOnRootRunFinalization=t.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=t.batchSizeBytesLimit,this.batchSizeLimit=t.batchSizeLimit,this.fetchOptions=t.fetchOptions||{},this.manualFlushMode=t.manualFlushMode??this.manualFlushMode,vP()&&(this.langSmithToOTELTranslator=new wP),this.cachedLSEnvVarsForMetadata=Z6()}static getDefaultClientConfig(){let t=Ri("API_KEY"),n=Ri("ENDPOINT")??Lle,r=Ri("HIDE_INPUTS")==="true",i=Ri("HIDE_OUTPUTS")==="true";return{apiUrl:n,apiKey:t,webUrl:void 0,hideInputs:r,hideOutputs:i}}getHostUrl(){return this.webUrl?this.webUrl:GVe(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){let t={"User-Agent":`langsmith-js/${_P}`};return this.apiKey&&(t["x-api-key"]=`${this.apiKey}`),this.workspaceId&&(t["x-tenant-id"]=this.workspaceId),t}_getPlatformEndpointPath(t){return this.apiUrl.slice(-3)!=="/v1"&&this.apiUrl.slice(-4)!=="/v1/"?`/v1/platform/${t}`:`/platform/${t}`}processInputs(t){return y(this,null,function*(){return this.hideInputs===!1?t:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(t):t})}processOutputs(t){return y(this,null,function*(){return this.hideOutputs===!1?t:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(t):t})}prepareRunCreateOrUpdateInputs(t){return y(this,null,function*(){let n=m({},t);return n.inputs!==void 0&&(n.inputs=yield this.processInputs(n.inputs)),n.outputs!==void 0&&(n.outputs=yield this.processOutputs(n.outputs)),n})}_getResponse(t,n){return y(this,null,function*(){let r=n?.toString()??"",i=`${this.apiUrl}${t}?${r}`;return yield this.caller.call(()=>y(this,null,function*(){let s=yield this._fetch(i,m({method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));return yield ut(s,`fetch ${t}`),s}))})}_get(t,n){return y(this,null,function*(){return(yield this._getResponse(t,n)).json()})}_getPaginated(i){return he(this,arguments,function*(t,n=new URLSearchParams,r){let o=Number(n.get("offset"))||0,s=Number(n.get("limit"))||100;for(;;){n.set("offset",String(o)),n.set("limit",String(s));let a=`${this.apiUrl}${t}?${n}`,c=yield new z(this.caller.call(()=>y(this,null,function*(){let d=yield this._fetch(a,m({method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));return yield ut(d,`fetch ${t}`),d}))),u=r?r(yield new z(c.json())):yield new z(c.json());if(u.length===0||(yield u,u.length<s))break;o+=u.length}})}_getCursorPaginatedList(t,n=null,r="POST",i="runs"){return he(this,null,function*(){let o=n?m({},n):{};for(;;){let s=JSON.stringify(o),a=yield new z(this.caller.call(()=>y(this,null,function*(){let d=yield this._fetch(`${this.apiUrl}${t}`,b(m({method:r,headers:b(m({},this.headers),{"Content-Type":"application/json"}),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:s}));return yield ut(d,`fetch ${t}`),d}))),c=yield new z(a.json());if(!c||!c[i])break;yield c[i];let u=c.cursors;if(!u||!u.next)break;o.cursor=u.next}})}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(t,n=!1){if(this.tracingSampleRate===void 0)return t;if(n){let r=[];for(let i of t)this.filteredPostUuids.has(i.trace_id)?i.id===i.trace_id&&this.filteredPostUuids.delete(i.trace_id):r.push(i);return r}else{let r=[];for(let i of t){let o=i.trace_id??i.id;this.filteredPostUuids.has(o)||(i.id===o?this._shouldSample()?r.push(i):this.filteredPostUuids.add(o):r.push(i))}return r}}_getBatchSizeLimitBytes(){return y(this,null,function*(){let t=yield this._ensureServerInfo();return this.batchSizeBytesLimit??t.batch_ingest_config?.size_limit_bytes??JVe})}_getBatchSizeLimit(){return y(this,null,function*(){let t=yield this._ensureServerInfo();return this.batchSizeLimit??t.batch_ingest_config?.size_limit??QVe})}_getDatasetExamplesMultiPartSupport(){return y(this,null,function*(){return(yield this._ensureServerInfo()).instance_flags?.dataset_examples_multipart_enabled??!1})}drainAutoBatchQueue({batchSizeLimitBytes:t,batchSizeLimit:n}){let r=[];for(;this.autoBatchQueue.items.length>0;){let[i,o]=this.autoBatchQueue.pop({upToSizeBytes:t,upToSize:n});if(!i.length){o();break}let s=i.reduce((u,d)=>{let f=d.apiUrl??this.apiUrl,g=d.apiKey??this.apiKey,v=d.apiKey===this.apiKey&&d.apiUrl===this.apiUrl?"default":`${f}|${g}`;return u[v]||(u[v]=[]),u[v].push(d),u},{}),a=[];for(let[u,d]of Object.entries(s)){let f=this._processBatch(d,{apiUrl:u==="default"?void 0:u.split("|")[0],apiKey:u==="default"?void 0:u.split("|")[1]});a.push(f)}let c=Promise.all(a).finally(o);r.push(c)}return Promise.all(r)}_processBatch(t,n){return y(this,null,function*(){if(!t.length)return;let r=t.reduce((i,o)=>i+(o.size??0),0);try{if(this.langSmithToOTELTranslator!==void 0)this._sendBatchToOTELTranslator(t);else{let i={runCreates:t.filter(s=>s.action==="create").map(s=>s.item),runUpdates:t.filter(s=>s.action==="update").map(s=>s.item)},o=yield this._ensureServerInfo();if(o?.batch_ingest_config?.use_multipart_endpoint){let s=o?.instance_flags?.gzip_body_enabled;yield this.multipartIngestRuns(i,b(m({},n),{useGzip:s,sizeBytes:r}))}else yield this.batchIngestRuns(i,b(m({},n),{sizeBytes:r}))}}catch(i){console.error("Error exporting batch:",i)}})}_sendBatchToOTELTranslator(t){if(this.langSmithToOTELTranslator!==void 0){let n=new Map,r=[];for(let i of t)i.item.id&&i.otelContext&&(n.set(i.item.id,i.otelContext),i.action==="create"?r.push({operation:"post",id:i.item.id,trace_id:i.item.trace_id??i.item.id,run:i.item}):r.push({operation:"patch",id:i.item.id,trace_id:i.item.trace_id??i.item.id,run:i.item}));this.langSmithToOTELTranslator.exportBatch(r,n)}}processRunOperation(t){return y(this,null,function*(){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,t.item=Nle(t.item,this.cachedLSEnvVarsForMetadata);let n=this.autoBatchQueue.push(t);if(this.manualFlushMode)return n;let r=yield this._getBatchSizeLimitBytes(),i=yield this._getBatchSizeLimit();return(this.autoBatchQueue.sizeBytes>r||this.autoBatchQueue.items.length>i)&&this.drainAutoBatchQueue({batchSizeLimitBytes:r,batchSizeLimit:i}),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue({batchSizeLimitBytes:r,batchSizeLimit:i})},this.autoBatchAggregationDelayMs)),n})}_getServerInfo(){return y(this,null,function*(){let n=yield(yield this.caller.call(()=>y(this,null,function*(){let r=yield this._fetch(`${this.apiUrl}/info`,m({method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(YVe)},this.fetchOptions));return yield ut(r,"get server info"),r}))).json();return this.debug&&console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify(n,null,2)+`
`),n})}_ensureServerInfo(){return y(this,null,function*(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=y(this,null,function*(){if(this._serverInfo===void 0)try{this._serverInfo=yield this._getServerInfo()}catch(t){console.warn(`[LANGSMITH]: Failed to fetch info on supported operations. Falling back to batch operations and default limits. Info: ${t.status??"Unspecified status code"} ${t.message}`)}return this._serverInfo??{}})),this._getServerInfoPromise.then(t=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),t))})}_getSettings(){return y(this,null,function*(){return this.settings||(this.settings=this._get("/settings")),yield this.settings})}flush(){return y(this,null,function*(){let t=yield this._getBatchSizeLimitBytes(),n=yield this._getBatchSizeLimit();yield this.drainAutoBatchQueue({batchSizeLimitBytes:t,batchSizeLimit:n})})}_cloneCurrentOTELContext(){let t=bP(),n=Oae();if(this.langSmithToOTELTranslator!==void 0){let r=t.getActiveSpan();if(r)return t.setSpan(n.active(),r)}}createRun(t,n){return y(this,null,function*(){if(!this._filterForSampling([t]).length)return;let r=b(m({},this.headers),{"Content-Type":"application/json"}),i=t.project_name;delete t.project_name;let o=yield this.prepareRunCreateOrUpdateInputs(b(m({session_name:i},t),{start_time:t.start_time??Date.now()}));if(this.autoBatchTracing&&o.trace_id!==void 0&&o.dotted_order!==void 0){let c=this._cloneCurrentOTELContext();this.processRunOperation({action:"create",item:o,otelContext:c,apiKey:n?.apiKey,apiUrl:n?.apiUrl}).catch(console.error);return}let s=Nle(o,this.cachedLSEnvVarsForMetadata);n?.apiKey!==void 0&&(r["x-api-key"]=n.apiKey),n?.workspaceId!==void 0&&(r["x-tenant-id"]=n.workspaceId);let a=ia(s,`Creating run with id: ${s.id}`);yield this.caller.call(()=>y(this,null,function*(){let c=yield this._fetch(`${n?.apiUrl??this.apiUrl}/runs`,b(m({method:"POST",headers:r,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:a}));return yield ut(c,"create run",!0),c}))})}batchIngestRuns(i,o){return y(this,arguments,function*({runCreates:t,runUpdates:n},r){if(t===void 0&&n===void 0)return;let s=yield Promise.all(t?.map(d=>this.prepareRunCreateOrUpdateInputs(d))??[]),a=yield Promise.all(n?.map(d=>this.prepareRunCreateOrUpdateInputs(d))??[]);if(s.length>0&&a.length>0){let d=s.reduce((g,h)=>(h.id&&(g[h.id]=h),g),{}),f=[];for(let g of a)g.id!==void 0&&d[g.id]?d[g.id]=m(m({},d[g.id]),g):f.push(g);s=Object.values(d),a=f}let c={post:s,patch:a};if(!c.post.length&&!c.patch.length)return;let u={post:[],patch:[]};for(let d of["post","patch"]){let f=d,g=c[f].reverse(),h=g.pop();for(;h!==void 0;)u[f].push(h),h=g.pop()}if(u.post.length>0||u.patch.length>0){let d=u.post.map(f=>f.id).concat(u.patch.map(f=>f.id)).join(",");yield this._postBatchIngestRuns(ia(u,`Ingesting runs with ids: ${d}`),r)}})}_postBatchIngestRuns(t,n){return y(this,null,function*(){let r=b(m({},this.headers),{"Content-Type":"application/json",Accept:"application/json"});n?.apiKey!==void 0&&(r["x-api-key"]=n.apiKey),yield this.batchIngestCaller.callWithOptions({sizeBytes:n?.sizeBytes},()=>y(this,null,function*(){let i=yield this._fetch(`${n?.apiUrl??this.apiUrl}/runs/batch`,b(m({method:"POST",headers:r,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:t}));return yield ut(i,"batch create run",!0),i}))})}multipartIngestRuns(i,o){return y(this,arguments,function*({runCreates:t,runUpdates:n},r){if(t===void 0&&n===void 0)return;let s={},a=[];for(let v of t??[]){let x=yield this.prepareRunCreateOrUpdateInputs(v);x.id!==void 0&&x.attachments!==void 0&&(s[x.id]=x.attachments),delete x.attachments,a.push(x)}let c=[];for(let v of n??[])c.push(yield this.prepareRunCreateOrUpdateInputs(v));if(a.find(v=>v.trace_id===void 0||v.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(c.find(v=>v.trace_id===void 0||v.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(a.length>0&&c.length>0){let v=a.reduce((E,C)=>(C.id&&(E[C.id]=C),E),{}),x=[];for(let E of c)E.id!==void 0&&v[E.id]?v[E.id]=m(m({},v[E.id]),E):x.push(E);a=Object.values(v),c=x}if(a.length===0&&c.length===0)return;let f=[],g=[];for(let[v,x]of[["post",a],["patch",c]])for(let E of x){let h=E,{inputs:C,outputs:S,events:A,extra:P,error:F,serialized:B,attachments:ee}=h,D=se(h,["inputs","outputs","events","extra","error","serialized","attachments"]),pe={inputs:C,outputs:S,events:A,extra:P,error:F,serialized:B},xe=ia(D,`Serializing for multipart ingestion of run with id: ${D.id}`);g.push({name:`${v}.${D.id}`,payload:new Blob([xe],{type:`application/json; length=${xe.length}`})});for(let[Ge,fe]of Object.entries(pe)){if(fe===void 0)continue;let Se=ia(fe,`Serializing ${Ge} for multipart ingestion of run with id: ${D.id}`);g.push({name:`${v}.${D.id}.${Ge}`,payload:new Blob([Se],{type:`application/json; length=${Se.length}`})})}if(D.id!==void 0){let Ge=s[D.id];if(Ge){delete s[D.id];for(let[fe,Se]of Object.entries(Ge)){let Fe,Me;if(Array.isArray(Se)?[Fe,Me]=Se:(Fe=Se.mimeType,Me=Se.data),fe.includes(".")){console.warn(`Skipping attachment '${fe}' for run ${D.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}g.push({name:`attachment.${D.id}.${fe}`,payload:new Blob([Me],{type:`${Fe}; length=${Me.byteLength}`})})}}}f.push(`trace=${D.trace_id},id=${D.id}`)}yield this._sendMultipartRequest(g,f.join("; "),r)})}_createNodeFetchBody(t,n){return y(this,null,function*(){let r=[];for(let s of t)r.push(new Blob([`--${n}\r
`])),r.push(new Blob([`Content-Disposition: form-data; name="${s.name}"\r
`,`Content-Type: ${s.payload.type}\r
\r
`])),r.push(s.payload),r.push(new Blob([`\r
`]));return r.push(new Blob([`--${n}--\r
`])),yield new Blob(r).arrayBuffer()})}_createMultipartStream(t,n){return y(this,null,function*(){let r=new TextEncoder;return new ReadableStream({start(s){return y(this,null,function*(){let a=c=>y(null,null,function*(){typeof c=="string"?s.enqueue(r.encode(c)):s.enqueue(c)});for(let c of t){yield a(`--${n}\r
`),yield a(`Content-Disposition: form-data; name="${c.name}"\r
`),yield a(`Content-Type: ${c.payload.type}\r
\r
`);let d=c.payload.stream().getReader();try{let f;for(;!(f=yield d.read()).done;)s.enqueue(f.value)}finally{d.releaseLock()}yield a(`\r
`)}yield a(`--${n}--\r
`),s.close()})}})})}_sendMultipartRequest(t,n,r){return y(this,null,function*(){let i="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),o=Iae(),s=()=>this._createNodeFetchBody(t,i),a=()=>this._createMultipartStream(t,i),c=u=>y(this,null,function*(){return this.batchIngestCaller.callWithOptions({sizeBytes:r?.sizeBytes},()=>y(this,null,function*(){let d=yield u(),f=b(m({},this.headers),{"Content-Type":`multipart/form-data; boundary=${i}`});r?.apiKey!==void 0&&(f["x-api-key"]=r.apiKey);let g=d;r?.useGzip&&typeof d=="object"&&"pipeThrough"in d&&(g=d.pipeThrough(new CompressionStream("gzip")),f["Content-Encoding"]="gzip");let h=yield this._fetch(`${r?.apiUrl??this.apiUrl}/runs/multipart`,m({method:"POST",headers:f,body:g,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));return yield ut(h,"Failed to send multipart request",!0),h}))});try{let u,d=!1;!o&&!this.multipartStreamingDisabled&&H6()!=="bun"?(d=!0,u=yield c(a)):u=yield c(s),(!this.multipartStreamingDisabled||d)&&u.status===422&&(r?.apiUrl??this.apiUrl)!==Lle&&(console.warn(`Streaming multipart upload to ${r?.apiUrl??this.apiUrl}/runs/multipart failed. This usually means the host does not support chunked uploads. Retrying with a buffered upload for operation "${n}".`),this.multipartStreamingDisabled=!0,u=yield c(s))}catch(u){console.warn(`${u.message.trim()}

Context: ${n}`)}})}updateRun(t,n,r){return y(this,null,function*(){Xt(t),n.inputs&&(n.inputs=yield this.processInputs(n.inputs)),n.outputs&&(n.outputs=yield this.processOutputs(n.outputs));let i=b(m({},n),{id:t});if(!this._filterForSampling([i],!0).length)return;if(this.autoBatchTracing&&i.trace_id!==void 0&&i.dotted_order!==void 0){let a=this._cloneCurrentOTELContext();if(n.end_time!==void 0&&i.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){yield this.processRunOperation({action:"update",item:i,otelContext:a,apiKey:r?.apiKey,apiUrl:r?.apiUrl}).catch(console.error);return}else this.processRunOperation({action:"update",item:i,otelContext:a,apiKey:r?.apiKey,apiUrl:r?.apiUrl}).catch(console.error);return}let o=b(m({},this.headers),{"Content-Type":"application/json"});r?.apiKey!==void 0&&(o["x-api-key"]=r.apiKey),r?.workspaceId!==void 0&&(o["x-tenant-id"]=r.workspaceId);let s=ia(n,`Serializing payload to update run with id: ${t}`);yield this.caller.call(()=>y(this,null,function*(){let a=yield this._fetch(`${r?.apiUrl??this.apiUrl}/runs/${t}`,b(m({method:"PATCH",headers:o,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:s}));return yield ut(a,"update run",!0),a}))})}readRun(r){return y(this,arguments,function*(t,{loadChildRuns:n}={loadChildRuns:!1}){Xt(t);let i=yield this._get(`/runs/${t}`);return n&&(i=yield this._loadChildRuns(i)),i})}getRunUrl(i){return y(this,arguments,function*({runId:t,run:n,projectOpts:r}){if(n!==void 0){let o;n.session_id?o=n.session_id:r?.projectName?o=(yield this.readProject({projectName:r?.projectName})).id:r?.projectId?o=r?.projectId:o=(yield this.readProject({projectName:Ri("PROJECT")||"default"})).id;let s=yield this._getTenantId();return`${this.getHostUrl()}/o/${s}/projects/p/${o}/r/${n.id}?poll=true`}else if(t!==void 0){let o=yield this.readRun(t);if(!o.app_path)throw new Error(`Run ${t} has no app_path`);return`${this.getHostUrl()}${o.app_path}`}else throw new Error("Must provide either runId or run")})}_loadChildRuns(t){return y(this,null,function*(){let n=yield WVe(this.listRuns({isRoot:!1,projectId:t.session_id,traceId:t.trace_id})),r={},i={};n.sort((o,s)=>(o?.dotted_order??"").localeCompare(s?.dotted_order??""));for(let o of n){if(o.parent_run_id===null||o.parent_run_id===void 0)throw new Error(`Child run ${o.id} has no parent`);o.dotted_order?.startsWith(t.dotted_order??"")&&o.id!==t.id&&(o.parent_run_id in r||(r[o.parent_run_id]=[]),r[o.parent_run_id].push(o),i[o.id]=o)}t.child_runs=r[t.id]||[];for(let o in r)o!==t.id&&(i[o].child_runs=r[o]);return t})}listRuns(t){return he(this,null,function*(){let{projectId:n,projectName:r,parentRunId:i,traceId:o,referenceExampleId:s,startTime:a,executionOrder:c,isRoot:u,runType:d,error:f,id:g,query:h,filter:v,traceFilter:x,treeFilter:E,limit:C,select:S,order:A}=t,P=[];if(n&&(P=Array.isArray(n)?n:[n]),r){let fe=Array.isArray(r)?r:[r],Se=yield new z(Promise.all(fe.map(Fe=>this.readProject({projectName:Fe}).then(Me=>Me.id))));P.push(...Se)}let F=["app_path","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],B={session:P.length?P:null,run_type:d,reference_example:s,query:h,filter:v,trace_filter:x,tree_filter:E,execution_order:c,parent_run:i,start_time:a?a.toISOString():null,error:f,id:g,limit:C,trace:o,select:S||F,is_root:u,order:A};B.select.includes("child_run_ids")&&Ny("Deprecated: 'child_run_ids' in the listRuns select parameter is deprecated and will be removed in a future version.");let ee=0;try{for(var D=ue(this._getCursorPaginatedList("/runs/query",B)),pe,xe,Ge;pe=!(xe=yield new z(D.next())).done;pe=!1){let fe=xe.value;if(C){if(ee>=C)break;if(fe.length+ee>C){let Se=fe.slice(0,C-ee);yield*mn(Se);break}ee+=fe.length,yield*mn(fe)}else yield*mn(fe)}}catch{Ge=[xe]}finally{try{pe&&(xe=D.return)&&(yield new z(xe.call(D)))}finally{if(Ge)throw Ge[0]}}})}listGroupRuns(t){return he(this,null,function*(){let{projectId:n,projectName:r,groupBy:i,filter:o,startTime:s,endTime:a,limit:c,offset:u}=t,f={session_id:n||(yield new z(this.readProject({projectName:r}))).id,group_by:i,filter:o,start_time:s?s.toISOString():null,end_time:a?a.toISOString():null,limit:Number(c)||100},g=Number(u)||0,h="/runs/group",v=`${this.apiUrl}${h}`;for(;;){let x=b(m({},f),{offset:g}),E=Object.fromEntries(Object.entries(x).filter(([B,ee])=>ee!==void 0)),C=JSON.stringify(E),S=yield new z(this.caller.call(()=>y(this,null,function*(){let B=yield this._fetch(v,b(m({method:"POST",headers:b(m({},this.headers),{"Content-Type":"application/json"}),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:C}));return yield ut(B,`Failed to fetch ${h}`),B}))),A=yield new z(S.json()),{groups:P,total:F}=A;if(P.length===0)break;for(let B of P)yield B;if(g+=P.length,g>=F)break}})}getRunStats(C){return y(this,arguments,function*({id:t,trace:n,parentRun:r,runType:i,projectNames:o,projectIds:s,referenceExampleIds:a,startTime:c,endTime:u,error:d,query:f,filter:g,traceFilter:h,treeFilter:v,isRoot:x,dataSourceType:E}){let S=s||[];o&&(S=[...s||[],...yield Promise.all(o.map(D=>this.readProject({projectName:D}).then(pe=>pe.id)))]);let P=Object.fromEntries(Object.entries({id:t,trace:n,parent_run:r,run_type:i,session:S,reference_example:a,start_time:c,end_time:u,error:d,query:f,filter:g,trace_filter:h,tree_filter:v,is_root:x,data_source_type:E}).filter(([D,pe])=>pe!==void 0)),F=JSON.stringify(P);return yield(yield this.caller.call(()=>y(this,null,function*(){let D=yield this._fetch(`${this.apiUrl}/runs/stats`,b(m({method:"POST",headers:b(m({},this.headers),{"Content-Type":"application/json"}),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:F}));return yield ut(D,"get run stats"),D}))).json()})}shareRun(r){return y(this,arguments,function*(t,{shareId:n}={}){let i={run_id:t,share_token:n||ei()};Xt(t);let o=JSON.stringify(i),a=yield(yield this.caller.call(()=>y(this,null,function*(){let c=yield this._fetch(`${this.apiUrl}/runs/${t}/share`,b(m({method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:o}));return yield ut(c,"share run"),c}))).json();if(a===null||!("share_token"in a))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${a.share_token}/r`})}unshareRun(t){return y(this,null,function*(){Xt(t),yield this.caller.call(()=>y(this,null,function*(){let n=yield this._fetch(`${this.apiUrl}/runs/${t}/share`,m({method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));return yield ut(n,"unshare run",!0),n}))})}readRunSharedLink(t){return y(this,null,function*(){Xt(t);let r=yield(yield this.caller.call(()=>y(this,null,function*(){let i=yield this._fetch(`${this.apiUrl}/runs/${t}/share`,m({method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));return yield ut(i,"read run shared link"),i}))).json();if(!(r===null||!("share_token"in r)))return`${this.getHostUrl()}/public/${r.share_token}/r`})}listSharedRuns(r){return y(this,arguments,function*(t,{runIds:n}={}){let i=new URLSearchParams({share_token:t});if(n!==void 0)for(let a of n)i.append("id",a);return Xt(t),yield(yield this.caller.call(()=>y(this,null,function*(){let a=yield this._fetch(`${this.apiUrl}/public/${t}/runs${i}`,m({method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));return yield ut(a,"list shared runs"),a}))).json()})}readDatasetSharedSchema(t,n){return y(this,null,function*(){if(!t&&!n)throw new Error("Either datasetId or datasetName must be given");t||(t=(yield this.readDataset({datasetName:n})).id),Xt(t);let i=yield(yield this.caller.call(()=>y(this,null,function*(){let o=yield this._fetch(`${this.apiUrl}/datasets/${t}/share`,m({method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));return yield ut(o,"read dataset shared schema"),o}))).json();return i.url=`${this.getHostUrl()}/public/${i.share_token}/d`,i})}shareDataset(t,n){return y(this,null,function*(){if(!t&&!n)throw new Error("Either datasetId or datasetName must be given");t||(t=(yield this.readDataset({datasetName:n})).id);let r={dataset_id:t};Xt(t);let i=JSON.stringify(r),s=yield(yield this.caller.call(()=>y(this,null,function*(){let a=yield this._fetch(`${this.apiUrl}/datasets/${t}/share`,b(m({method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:i}));return yield ut(a,"share dataset"),a}))).json();return s.url=`${this.getHostUrl()}/public/${s.share_token}/d`,s})}unshareDataset(t){return y(this,null,function*(){Xt(t),yield this.caller.call(()=>y(this,null,function*(){let n=yield this._fetch(`${this.apiUrl}/datasets/${t}/share`,m({method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));return yield ut(n,"unshare dataset",!0),n}))})}readSharedDataset(t){return y(this,null,function*(){return Xt(t),yield(yield this.caller.call(()=>y(this,null,function*(){let i=yield this._fetch(`${this.apiUrl}/public/${t}/datasets`,m({method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));return yield ut(i,"read shared dataset"),i}))).json()})}listSharedExamples(t,n){return y(this,null,function*(){let r={};n?.exampleIds&&(r.id=n.exampleIds);let i=new URLSearchParams;Object.entries(r).forEach(([a,c])=>{Array.isArray(c)?c.forEach(u=>i.append(a,u)):i.append(a,c)});let o=yield this.caller.call(()=>y(this,null,function*(){let a=yield this._fetch(`${this.apiUrl}/public/${t}/examples?${i.toString()}`,m({method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));return yield ut(a,"list shared examples"),a})),s=yield o.json();if(!o.ok)throw"detail"in s?new Error(`Failed to list shared examples.
Status: ${o.status}
Message: ${Array.isArray(s.detail)?s.detail.join(`
`):"Unspecified error"}`):new Error(`Failed to list shared examples: ${o.status} ${o.statusText}`);return s.map(a=>b(m({},a),{_hostUrl:this.getHostUrl()}))})}createProject(a){return y(this,arguments,function*({projectName:t,description:n=null,metadata:r=null,upsert:i=!1,projectExtra:o=null,referenceDatasetId:s=null}){let c=i?"?upsert=true":"",u=`${this.apiUrl}/sessions${c}`,d=o||{};r&&(d.metadata=r);let f={name:t,extra:d,description:n};s!==null&&(f.reference_dataset_id=s);let g=JSON.stringify(f);return yield(yield this.caller.call(()=>y(this,null,function*(){let x=yield this._fetch(u,b(m({method:"POST",headers:b(m({},this.headers),{"Content-Type":"application/json"}),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:g}));return yield ut(x,"create project"),x}))).json()})}updateProject(a,c){return y(this,arguments,function*(t,{name:n=null,description:r=null,metadata:i=null,projectExtra:o=null,endTime:s=null}){let u=`${this.apiUrl}/sessions/${t}`,d=o;i&&(d=b(m({},d||{}),{metadata:i}));let f=JSON.stringify({name:n,extra:d,description:r,end_time:s?new Date(s).toISOString():null});return yield(yield this.caller.call(()=>y(this,null,function*(){let v=yield this._fetch(u,b(m({method:"PATCH",headers:b(m({},this.headers),{"Content-Type":"application/json"}),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:f}));return yield ut(v,"update project"),v}))).json()})}hasProject(r){return y(this,arguments,function*({projectId:t,projectName:n}){let i="/sessions",o=new URLSearchParams;if(t!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(t!==void 0)Xt(t),i+=`/${t}`;else if(n!==void 0)o.append("name",n);else throw new Error("Must provide projectName or projectId");let s=yield this.caller.call(()=>y(this,null,function*(){let a=yield this._fetch(`${this.apiUrl}${i}?${o}`,m({method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));return yield ut(a,"has project"),a}));try{let a=yield s.json();return s.ok?Array.isArray(a)?a.length>0:!0:!1}catch{return!1}})}readProject(i){return y(this,arguments,function*({projectId:t,projectName:n,includeStats:r}){let o="/sessions",s=new URLSearchParams;if(t!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(t!==void 0)Xt(t),o+=`/${t}`;else if(n!==void 0)s.append("name",n);else throw new Error("Must provide projectName or projectId");r!==void 0&&s.append("include_stats",r.toString());let a=yield this._get(o,s),c;if(Array.isArray(a)){if(a.length===0)throw new Error(`Project[id=${t}, name=${n}] not found`);c=a[0]}else c=a;return c})}getProjectUrl(r){return y(this,arguments,function*({projectId:t,projectName:n}){if(t===void 0&&n===void 0)throw new Error("Must provide either projectName or projectId");let i=yield this.readProject({projectId:t,projectName:n}),o=yield this._getTenantId();return`${this.getHostUrl()}/o/${o}/projects/p/${i.id}`})}getDatasetUrl(r){return y(this,arguments,function*({datasetId:t,datasetName:n}){if(t===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");let i=yield this.readDataset({datasetId:t,datasetName:n}),o=yield this._getTenantId();return`${this.getHostUrl()}/o/${o}/datasets/${i.id}`})}_getTenantId(){return y(this,null,function*(){if(this._tenantId!==null)return this._tenantId;let t=new URLSearchParams({limit:"1"});try{for(var n=ue(this._getPaginated("/sessions",t)),r,i,o;r=!(i=yield n.next()).done;r=!1){let s=i.value;return this._tenantId=s[0].tenant_id,s[0].tenant_id}}catch{o=[i]}finally{try{r&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o[0]}}throw new Error("No projects found to resolve tenant.")})}listProjects(){return he(this,arguments,function*({projectIds:t,name:n,nameContains:r,referenceDatasetId:i,referenceDatasetName:o,includeStats:s,datasetVersion:a,referenceFree:c,metadata:u}={}){let d=new URLSearchParams;if(t!==void 0)for(let x of t)d.append("id",x);if(n!==void 0&&d.append("name",n),r!==void 0&&d.append("name_contains",r),i!==void 0)d.append("reference_dataset",i);else if(o!==void 0){let x=yield new z(this.readDataset({datasetName:o}));d.append("reference_dataset",x.id)}s!==void 0&&d.append("include_stats",s.toString()),a!==void 0&&d.append("dataset_version",a),c!==void 0&&d.append("reference_free",c.toString()),u!==void 0&&d.append("metadata",JSON.stringify(u));try{for(var f=ue(this._getPaginated("/sessions",d)),g,h,v;g=!(h=yield new z(f.next())).done;g=!1){let x=h.value;yield*mn(x)}}catch{v=[h]}finally{try{g&&(h=f.return)&&(yield new z(h.call(f)))}finally{if(v)throw v[0]}}})}deleteProject(r){return y(this,arguments,function*({projectId:t,projectName:n}){let i;if(t===void 0&&n===void 0)throw new Error("Must provide projectName or projectId");if(t!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");t===void 0?i=(yield this.readProject({projectName:n})).id:i=t,Xt(i),yield this.caller.call(()=>y(this,null,function*(){let o=yield this._fetch(`${this.apiUrl}/sessions/${i}`,m({method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));return yield ut(o,`delete session ${i} (${n})`,!0),o}))})}uploadCsv(c){return y(this,arguments,function*({csvFile:t,fileName:n,inputKeys:r,outputKeys:i,description:o,dataType:s,name:a}){let u=`${this.apiUrl}/datasets/upload`,d=new FormData;return d.append("file",t,n),r.forEach(h=>{d.append("input_keys",h)}),i.forEach(h=>{d.append("output_keys",h)}),o&&d.append("description",o),s&&d.append("data_type",s),a&&d.append("name",a),yield(yield this.caller.call(()=>y(this,null,function*(){let h=yield this._fetch(u,b(m({method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:d}));return yield ut(h,"upload CSV"),h}))).json()})}createDataset(a){return y(this,arguments,function*(t,{description:n,dataType:r,inputsSchema:i,outputsSchema:o,metadata:s}={}){let c={name:t,description:n,extra:s?{metadata:s}:void 0};r&&(c.data_type=r),i&&(c.inputs_schema_definition=i),o&&(c.outputs_schema_definition=o);let u=JSON.stringify(c);return yield(yield this.caller.call(()=>y(this,null,function*(){let g=yield this._fetch(`${this.apiUrl}/datasets`,b(m({method:"POST",headers:b(m({},this.headers),{"Content-Type":"application/json"}),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:u}));return yield ut(g,"create dataset"),g}))).json()})}readDataset(r){return y(this,arguments,function*({datasetId:t,datasetName:n}){let i="/datasets",o=new URLSearchParams({limit:"1"});if(t&&n)throw new Error("Must provide either datasetName or datasetId, not both");if(t)Xt(t),i+=`/${t}`;else if(n)o.append("name",n);else throw new Error("Must provide datasetName or datasetId");let s=yield this._get(i,o),a;if(Array.isArray(s)){if(s.length===0)throw new Error(`Dataset[id=${t}, name=${n}] not found`);a=s[0]}else a=s;return a})}hasDataset(r){return y(this,arguments,function*({datasetId:t,datasetName:n}){try{return yield this.readDataset({datasetId:t,datasetName:n}),!0}catch(i){if(i instanceof Error&&i.message.toLocaleLowerCase().includes("not found"))return!1;throw i}})}diffDatasetVersions(o){return y(this,arguments,function*({datasetId:t,datasetName:n,fromVersion:r,toVersion:i}){let s=t;if(s===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");if(s!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");s===void 0&&(s=(yield this.readDataset({datasetName:n})).id);let a=new URLSearchParams({from_version:typeof r=="string"?r:r.toISOString(),to_version:typeof i=="string"?i:i.toISOString()});return yield this._get(`/datasets/${s}/versions/diff`,a)})}readDatasetOpenaiFinetuning(r){return y(this,arguments,function*({datasetId:t,datasetName:n}){let i="/datasets";if(t===void 0)if(n!==void 0)t=(yield this.readDataset({datasetName:n})).id;else throw new Error("Must provide either datasetName or datasetId");return(yield(yield this._getResponse(`${i}/${t}/openai_ft`)).text()).trim().split(`
`).map(c=>JSON.parse(c))})}listDatasets(){return he(this,arguments,function*({limit:t=100,offset:n=0,datasetIds:r,datasetName:i,datasetNameContains:o,metadata:s}={}){let a="/datasets",c=new URLSearchParams({limit:t.toString(),offset:n.toString()});if(r!==void 0)for(let h of r)c.append("id",h);i!==void 0&&c.append("name",i),o!==void 0&&c.append("name_contains",o),s!==void 0&&c.append("metadata",JSON.stringify(s));try{for(var u=ue(this._getPaginated(a,c)),d,f,g;d=!(f=yield new z(u.next())).done;d=!1){let h=f.value;yield*mn(h)}}catch{g=[f]}finally{try{d&&(f=u.return)&&(yield new z(f.call(u)))}finally{if(g)throw g[0]}}})}updateDataset(t){return y(this,null,function*(){let c=t,{datasetId:n,datasetName:r}=c,i=se(c,["datasetId","datasetName"]);if(!n&&!r)throw new Error("Must provide either datasetName or datasetId");let o=n??(yield this.readDataset({datasetName:r})).id;Xt(o);let s=JSON.stringify(i);return yield(yield this.caller.call(()=>y(this,null,function*(){let u=yield this._fetch(`${this.apiUrl}/datasets/${o}`,b(m({method:"PATCH",headers:b(m({},this.headers),{"Content-Type":"application/json"}),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:s}));return yield ut(u,"update dataset"),u}))).json()})}updateDatasetTag(t){return y(this,null,function*(){let{datasetId:n,datasetName:r,asOf:i,tag:o}=t;if(!n&&!r)throw new Error("Must provide either datasetName or datasetId");let s=n??(yield this.readDataset({datasetName:r})).id;Xt(s);let a=JSON.stringify({as_of:typeof i=="string"?i:i.toISOString(),tag:o});yield this.caller.call(()=>y(this,null,function*(){let c=yield this._fetch(`${this.apiUrl}/datasets/${s}/tags`,b(m({method:"PUT",headers:b(m({},this.headers),{"Content-Type":"application/json"}),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:a}));return yield ut(c,"update dataset tags",!0),c}))})}deleteDataset(r){return y(this,arguments,function*({datasetId:t,datasetName:n}){let i="/datasets",o=t;if(t!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(n!==void 0&&(o=(yield this.readDataset({datasetName:n})).id),o!==void 0)Xt(o),i+=`/${o}`;else throw new Error("Must provide datasetName or datasetId");yield this.caller.call(()=>y(this,null,function*(){let s=yield this._fetch(this.apiUrl+i,m({method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));return yield ut(s,`delete ${i}`,!0),s}))})}indexDataset(i){return y(this,arguments,function*({datasetId:t,datasetName:n,tag:r}){let o=t;if(!o&&!n)throw new Error("Must provide either datasetName or datasetId");if(o&&n)throw new Error("Must provide either datasetName or datasetId, not both");o||(o=(yield this.readDataset({datasetName:n})).id),Xt(o);let a=JSON.stringify({tag:r});yield(yield this.caller.call(()=>y(this,null,function*(){let u=yield this._fetch(`${this.apiUrl}/datasets/${o}/index`,b(m({method:"POST",headers:b(m({},this.headers),{"Content-Type":"application/json"}),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:a}));return yield ut(u,"index dataset"),u}))).json()})}similarExamples(o,s,a){return y(this,arguments,function*(t,n,r,{filter:i}={}){let c={limit:r,inputs:t};i!==void 0&&(c.filter=i),Xt(n);let u=JSON.stringify(c);return(yield(yield this.caller.call(()=>y(this,null,function*(){let g=yield this._fetch(`${this.apiUrl}/datasets/${n}/search`,b(m({headers:b(m({},this.headers),{"Content-Type":"application/json"}),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{method:"POST",body:u}));return yield ut(g,"fetch similar examples"),g}))).json()).examples})}createExample(t,n,r){return y(this,null,function*(){if(Fle(t)&&(n!==void 0||r!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let i=n?r?.datasetId:t.dataset_id,o=n?r?.datasetName:t.dataset_name;if(i===void 0&&o===void 0)throw new Error("Must provide either datasetName or datasetId");if(i!==void 0&&o!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");i===void 0&&(i=(yield this.readDataset({datasetName:o})).id);let s=(n?r?.createdAt:t.created_at)||new Date,a;Fle(t)?a=t:a={inputs:t,outputs:n,created_at:s?.toISOString(),id:r?.exampleId,metadata:r?.metadata,split:r?.split,source_run_id:r?.sourceRunId,use_source_run_io:r?.useSourceRunIO,use_source_run_attachments:r?.useSourceRunAttachments,attachments:r?.attachments};let c=yield this._uploadExamplesMultipart(i,[a]);return yield this.readExample(c.example_ids?.[0]??ei())})}createExamples(t){return y(this,null,function*(){if(Array.isArray(t)){if(t.length===0)return[];let S=t,A=S[0].dataset_id,P=S[0].dataset_name;if(A===void 0&&P===void 0)throw new Error("Must provide either datasetName or datasetId");if(A!==void 0&&P!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");A===void 0&&(A=(yield this.readDataset({datasetName:P})).id);let F=yield this._uploadExamplesMultipart(A,S);return yield Promise.all(F.example_ids.map(ee=>this.readExample(ee)))}let{inputs:n,outputs:r,metadata:i,splits:o,sourceRunIds:s,useSourceRunIOs:a,useSourceRunAttachments:c,attachments:u,exampleIds:d,datasetId:f,datasetName:g}=t;if(n===void 0)throw new Error("Must provide inputs when using legacy parameters");let h=f,v=g;if(h===void 0&&v===void 0)throw new Error("Must provide either datasetName or datasetId");if(h!==void 0&&v!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");h===void 0&&(h=(yield this.readDataset({datasetName:v})).id);let x=n.map((S,A)=>({dataset_id:h,inputs:S,outputs:r?.[A],metadata:i?.[A],split:o?.[A],id:d?.[A],attachments:u?.[A],source_run_id:s?.[A],use_source_run_io:a?.[A],use_source_run_attachments:c?.[A]})),E=yield this._uploadExamplesMultipart(h,x);return yield Promise.all(E.example_ids.map(S=>this.readExample(S)))})}createLLMExample(t,n,r){return y(this,null,function*(){return this.createExample({input:t},{output:n},r)})}createChatExample(t,n,r){return y(this,null,function*(){let i=t.map(s=>cH(s)?lH(s):s),o=cH(n)?lH(n):n;return this.createExample({input:i},{output:o},r)})}readExample(t){return y(this,null,function*(){Xt(t);let n=`/examples/${t}`,a=yield this._get(n),{attachment_urls:i}=a,s=se(a,["attachment_urls"]);return i&&(s.attachments=Object.entries(i).reduce((c,[u,d])=>(c[u.slice(11)]={presigned_url:d.presigned_url,mime_type:d.mime_type},c),{})),s})}listExamples(){return he(this,arguments,function*({datasetId:t,datasetName:n,exampleIds:r,asOf:i,splits:o,inlineS3Urls:s,metadata:a,limit:c,offset:u,filter:d,includeAttachments:f}={}){let g;if(t!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(t!==void 0)g=t;else if(n!==void 0)g=(yield new z(this.readDataset({datasetName:n}))).id;else throw new Error("Must provide a datasetName or datasetId");let h=new URLSearchParams({dataset:g}),v=i?typeof i=="string"?i:i?.toISOString():void 0;v&&h.append("as_of",v);let x=s??!0;if(h.append("inline_s3_urls",x.toString()),r!==void 0)for(let B of r)h.append("id",B);if(o!==void 0)for(let B of o)h.append("splits",B);if(a!==void 0){let B=JSON.stringify(a);h.append("metadata",B)}c!==void 0&&h.append("limit",c.toString()),u!==void 0&&h.append("offset",u.toString()),d!==void 0&&h.append("filter",d),f===!0&&["attachment_urls","outputs","metadata"].forEach(B=>h.append("select",B));let E=0;try{for(var S=ue(this._getPaginated("/examples",h)),A,P,F;A=!(P=yield new z(S.next())).done;A=!1){let B=P.value;for(let ee of B){let C=ee,{attachment_urls:D}=C,xe=se(C,["attachment_urls"]);D&&(xe.attachments=Object.entries(D).reduce((Ge,[fe,Se])=>(Ge[fe.slice(11)]={presigned_url:Se.presigned_url,mime_type:Se.mime_type||void 0},Ge),{})),yield xe,E++}if(c!==void 0&&E>=c)break}}catch{F=[P]}finally{try{A&&(P=S.return)&&(yield new z(P.call(S)))}finally{if(F)throw F[0]}}})}deleteExample(t){return y(this,null,function*(){Xt(t);let n=`/examples/${t}`;yield this.caller.call(()=>y(this,null,function*(){let r=yield this._fetch(this.apiUrl+n,m({method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));return yield ut(r,`delete ${n}`,!0),r}))})}updateExample(t,n){return y(this,null,function*(){let r;n?r=t:r=t.id,Xt(r);let i;n?i=m({id:r},n):i=t;let o;return i.dataset_id!==void 0?o=i.dataset_id:o=(yield this.readExample(r)).dataset_id,this._updateExamplesMultipart(o,[i])})}updateExamples(t){return y(this,null,function*(){let n;return t[0].dataset_id===void 0?n=(yield this.readExample(t[0].id)).dataset_id:n=t[0].dataset_id,this._updateExamplesMultipart(n,t)})}readDatasetVersion(o){return y(this,arguments,function*({datasetId:t,datasetName:n,asOf:r,tag:i}){let s;if(t?s=t:s=(yield this.readDataset({datasetName:n})).id,Xt(s),r&&i||!r&&!i)throw new Error("Exactly one of asOf and tag must be specified.");let a=new URLSearchParams;return r!==void 0&&a.append("as_of",typeof r=="string"?r:r.toISOString()),i!==void 0&&a.append("tag",i),yield(yield this.caller.call(()=>y(this,null,function*(){let u=yield this._fetch(`${this.apiUrl}/datasets/${s}/version?${a.toString()}`,m({method:"GET",headers:m({},this.headers),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));return yield ut(u,"read dataset version"),u}))).json()})}listDatasetSplits(i){return y(this,arguments,function*({datasetId:t,datasetName:n,asOf:r}){let o;if(t===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(t!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");t===void 0?o=(yield this.readDataset({datasetName:n})).id:o=t,Xt(o);let s=new URLSearchParams,a=r?typeof r=="string"?r:r?.toISOString():void 0;return a&&s.append("as_of",a),yield this._get(`/datasets/${o}/splits`,s)})}updateDatasetSplits(s){return y(this,arguments,function*({datasetId:t,datasetName:n,splitName:r,exampleIds:i,remove:o=!1}){let a;if(t===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(t!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");t===void 0?a=(yield this.readDataset({datasetName:n})).id:a=t,Xt(a);let c={split_name:r,examples:i.map(d=>(Xt(d),d)),remove:o},u=JSON.stringify(c);yield this.caller.call(()=>y(this,null,function*(){let d=yield this._fetch(`${this.apiUrl}/datasets/${a}/splits`,b(m({method:"PUT",headers:b(m({},this.headers),{"Content-Type":"application/json"}),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:u}));return yield ut(d,"update dataset splits",!0),d}))})}evaluateRun(s,a){return y(this,arguments,function*(t,n,{sourceInfo:r,loadChildRuns:i,referenceExample:o}={loadChildRuns:!1}){Ny("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let c;if(typeof t=="string")c=yield this.readRun(t,{loadChildRuns:i});else if(typeof t=="object"&&"id"in t)c=t;else throw new Error(`Invalid run type: ${typeof t}`);c.reference_example_id!==null&&c.reference_example_id!==void 0&&(o=yield this.readExample(c.reference_example_id));let u=yield n.evaluateRun(c,o),[d,f]=yield this._logEvaluationFeedback(u,c,r);return f[0]})}createFeedback(v,x,E){return y(this,arguments,function*(t,n,{score:r,value:i,correction:o,comment:s,sourceInfo:a,feedbackSourceType:c="api",sourceRunId:u,feedbackId:d,feedbackConfig:f,projectId:g,comparativeExperimentId:h}){if(!t&&!g)throw new Error("One of runId or projectId must be provided");if(t&&g)throw new Error("Only one of runId or projectId can be provided");let C={type:c??"api",metadata:a??{}};u!==void 0&&C?.metadata!==void 0&&!C.metadata.__run&&(C.metadata.__run={run_id:u}),C?.metadata!==void 0&&C.metadata.__run?.run_id!==void 0&&Xt(C.metadata.__run.run_id);let S={id:d??ei(),run_id:t,key:n,score:$le(r),value:i,correction:o,comment:s,feedback_source:C,comparative_experiment_id:h,feedbackConfig:f,session_id:g},A=JSON.stringify(S),P=`${this.apiUrl}/feedback`;return yield this.caller.call(()=>y(this,null,function*(){let F=yield this._fetch(P,b(m({method:"POST",headers:b(m({},this.headers),{"Content-Type":"application/json"}),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:A}));return yield ut(F,"create feedback",!0),F})),S})}updateFeedback(s,a){return y(this,arguments,function*(t,{score:n,value:r,correction:i,comment:o}){let c={};n!=null&&(c.score=$le(n)),r!=null&&(c.value=r),i!=null&&(c.correction=i),o!=null&&(c.comment=o),Xt(t);let u=JSON.stringify(c);yield this.caller.call(()=>y(this,null,function*(){let d=yield this._fetch(`${this.apiUrl}/feedback/${t}`,b(m({method:"PATCH",headers:b(m({},this.headers),{"Content-Type":"application/json"}),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:u}));return yield ut(d,"update feedback",!0),d}))})}readFeedback(t){return y(this,null,function*(){Xt(t);let n=`/feedback/${t}`;return yield this._get(n)})}deleteFeedback(t){return y(this,null,function*(){Xt(t);let n=`/feedback/${t}`;yield this.caller.call(()=>y(this,null,function*(){let r=yield this._fetch(this.apiUrl+n,m({method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));return yield ut(r,`delete ${n}`,!0),r}))})}listFeedback(){return he(this,arguments,function*({runIds:t,feedbackKeys:n,feedbackSourceTypes:r}={}){let i=new URLSearchParams;if(t)for(let u of t)Xt(u),i.append("run",u);if(n)for(let u of n)i.append("key",u);if(r)for(let u of r)i.append("source",u);try{for(var o=ue(this._getPaginated("/feedback",i)),s,a,c;s=!(a=yield new z(o.next())).done;s=!1){let u=a.value;yield*mn(u)}}catch{c=[a]}finally{try{s&&(a=o.return)&&(yield new z(a.call(o)))}finally{if(c)throw c[0]}}})}createPresignedFeedbackToken(o,s){return y(this,arguments,function*(t,n,{expiration:r,feedbackConfig:i}={}){let a={run_id:t,feedback_key:n,feedback_config:i};r?typeof r=="string"?a.expires_at=r:(r?.hours||r?.minutes||r?.days)&&(a.expires_in=r):a.expires_in={hours:3};let c=JSON.stringify(a);return yield(yield this.caller.call(()=>y(this,null,function*(){let d=yield this._fetch(`${this.apiUrl}/feedback/tokens`,b(m({method:"POST",headers:b(m({},this.headers),{"Content-Type":"application/json"}),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:c}));return yield ut(d,"create presigned feedback token"),d}))).json()})}createComparativeExperiment(c){return y(this,arguments,function*({name:t,experimentIds:n,referenceDatasetId:r,createdAt:i,description:o,metadata:s,id:a}){if(n.length===0)throw new Error("At least one experiment is required");if(r||(r=(yield this.readProject({projectId:n[0]})).reference_dataset_id),!r==null)throw new Error("A reference dataset is required");let u={id:a,name:t,experiment_ids:n,reference_dataset_id:r,description:o,created_at:(i??new Date)?.toISOString(),extra:{}};s&&(u.extra.metadata=s);let d=JSON.stringify(u);return(yield this.caller.call(()=>y(this,null,function*(){let g=yield this._fetch(`${this.apiUrl}/datasets/comparative`,b(m({method:"POST",headers:b(m({},this.headers),{"Content-Type":"application/json"}),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:d}));return yield ut(g,"create comparative experiment"),g}))).json()})}listPresignedFeedbackTokens(t){return he(this,null,function*(){Xt(t);let n=new URLSearchParams({run_id:t});try{for(var r=ue(this._getPaginated("/feedback/tokens",n)),i,o,s;i=!(o=yield new z(r.next())).done;i=!1){let a=o.value;yield*mn(a)}}catch{s=[o]}finally{try{i&&(o=r.return)&&(yield new z(o.call(r)))}finally{if(s)throw s[0]}}})}_selectEvalResults(t){let n;return"results"in t?n=t.results:Array.isArray(t)?n=t:n=[t],n}_logEvaluationFeedback(t,n,r){return y(this,null,function*(){let i=this._selectEvalResults(t),o=[];for(let s of i){let a=r||{};s.evaluatorInfo&&(a=m(m({},s.evaluatorInfo),a));let c=null;s.targetRunId?c=s.targetRunId:n&&(c=n.id),o.push(yield this.createFeedback(c,s.key,{score:s.score,value:s.value,comment:s.comment,correction:s.correction,sourceInfo:a,sourceRunId:s.sourceRunId,feedbackConfig:s.feedbackConfig,feedbackSourceType:"model"}))}return[i,o]})}logEvaluationFeedback(t,n,r){return y(this,null,function*(){let[i]=yield this._logEvaluationFeedback(t,n,r);return i})}listAnnotationQueues(){return he(this,arguments,function*(t={}){let{queueIds:n,name:r,nameContains:i,limit:o}=t,s=new URLSearchParams;n&&n.forEach((g,h)=>{Xt(g,`queueIds[${h}]`),s.append("ids",g)}),r&&s.append("name",r),i&&s.append("name_contains",i),s.append("limit",(o!==void 0?Math.min(o,100):100).toString());let a=0;try{for(var c=ue(this._getPaginated("/annotation-queues",s)),u,d,f;u=!(d=yield new z(c.next())).done;u=!1){let g=d.value;if(yield*mn(g),a++,o!==void 0&&a>=o)break}}catch{f=[d]}finally{try{u&&(d=c.return)&&(yield new z(d.call(c)))}finally{if(f)throw f[0]}}})}createAnnotationQueue(t){return y(this,null,function*(){let{name:n,description:r,queueId:i,rubricInstructions:o}=t,s={name:n,description:r,id:i||ei(),rubric_instructions:o},a=JSON.stringify(Object.fromEntries(Object.entries(s).filter(([u,d])=>d!==void 0)));return(yield this.caller.call(()=>y(this,null,function*(){let u=yield this._fetch(`${this.apiUrl}/annotation-queues`,b(m({method:"POST",headers:b(m({},this.headers),{"Content-Type":"application/json"}),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:a}));return yield ut(u,"create annotation queue"),u}))).json()})}readAnnotationQueue(t){return y(this,null,function*(){return(yield this.caller.call(()=>y(this,null,function*(){let r=yield this._fetch(`${this.apiUrl}/annotation-queues/${Xt(t,"queueId")}`,m({method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));return yield ut(r,"read annotation queue"),r}))).json()})}updateAnnotationQueue(t,n){return y(this,null,function*(){let{name:r,description:i,rubricInstructions:o}=n,s=JSON.stringify({name:r,description:i,rubric_instructions:o});yield this.caller.call(()=>y(this,null,function*(){let a=yield this._fetch(`${this.apiUrl}/annotation-queues/${Xt(t,"queueId")}`,b(m({method:"PATCH",headers:b(m({},this.headers),{"Content-Type":"application/json"}),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:s}));return yield ut(a,"update annotation queue",!0),a}))})}deleteAnnotationQueue(t){return y(this,null,function*(){yield this.caller.call(()=>y(this,null,function*(){let n=yield this._fetch(`${this.apiUrl}/annotation-queues/${Xt(t,"queueId")}`,m({method:"DELETE",headers:b(m({},this.headers),{Accept:"application/json"}),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));return yield ut(n,"delete annotation queue",!0),n}))})}addRunsToAnnotationQueue(t,n){return y(this,null,function*(){let r=JSON.stringify(n.map((i,o)=>Xt(i,`runIds[${o}]`).toString()));yield this.caller.call(()=>y(this,null,function*(){let i=yield this._fetch(`${this.apiUrl}/annotation-queues/${Xt(t,"queueId")}/runs`,b(m({method:"POST",headers:b(m({},this.headers),{"Content-Type":"application/json"}),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:r}));return yield ut(i,"add runs to annotation queue",!0),i}))})}getRunFromAnnotationQueue(t,n){return y(this,null,function*(){let r=`/annotation-queues/${Xt(t,"queueId")}/run`;return(yield this.caller.call(()=>y(this,null,function*(){let o=yield this._fetch(`${this.apiUrl}${r}/${n}`,m({method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));return yield ut(o,"get run from annotation queue"),o}))).json()})}deleteRunFromAnnotationQueue(t,n){return y(this,null,function*(){yield this.caller.call(()=>y(this,null,function*(){let r=yield this._fetch(`${this.apiUrl}/annotation-queues/${Xt(t,"queueId")}/runs/${Xt(n,"queueRunId")}`,m({method:"DELETE",headers:b(m({},this.headers),{Accept:"application/json"}),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));return yield ut(r,"delete run from annotation queue",!0),r}))})}getSizeFromAnnotationQueue(t){return y(this,null,function*(){return(yield this.caller.call(()=>y(this,null,function*(){let r=yield this._fetch(`${this.apiUrl}/annotation-queues/${Xt(t,"queueId")}/size`,m({method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));return yield ut(r,"get size from annotation queue"),r}))).json()})}_currentTenantIsOwner(t){return y(this,null,function*(){let n=yield this._getSettings();return t=="-"||n.tenant_handle===t})}_ownerConflictError(t,n){return y(this,null,function*(){let r=yield this._getSettings();return new Error(`Cannot ${t} for another tenant.

      Current tenant: ${r.tenant_handle}

      Requested tenant: ${n}`)})}_getLatestCommitHash(t){return y(this,null,function*(){let r=yield(yield this.caller.call(()=>y(this,null,function*(){let i=yield this._fetch(`${this.apiUrl}/commits/${t}/?limit=1&offset=0`,m({method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));return yield ut(i,"get latest commit hash"),i}))).json();if(r.commits.length!==0)return r.commits[0].commit_hash})}_likeOrUnlikePrompt(t,n){return y(this,null,function*(){let[r,i,o]=yd(t),s=JSON.stringify({like:n});return(yield this.caller.call(()=>y(this,null,function*(){let c=yield this._fetch(`${this.apiUrl}/likes/${r}/${i}`,b(m({method:"POST",headers:b(m({},this.headers),{"Content-Type":"application/json"}),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:s}));return yield ut(c,`${n?"like":"unlike"} prompt`),c}))).json()})}_getPromptUrl(t){return y(this,null,function*(){let[n,r,i]=yd(t);if(yield this._currentTenantIsOwner(n)){let o=yield this._getSettings();return i!=="latest"?`${this.getHostUrl()}/prompts/${r}/${i.substring(0,8)}?organizationId=${o.id}`:`${this.getHostUrl()}/prompts/${r}?organizationId=${o.id}`}else return i!=="latest"?`${this.getHostUrl()}/hub/${n}/${r}/${i.substring(0,8)}`:`${this.getHostUrl()}/hub/${n}/${r}`})}promptExists(t){return y(this,null,function*(){return!!(yield this.getPrompt(t))})}likePrompt(t){return y(this,null,function*(){return this._likeOrUnlikePrompt(t,!0)})}unlikePrompt(t){return y(this,null,function*(){return this._likeOrUnlikePrompt(t,!1)})}listCommits(t){return he(this,null,function*(){try{for(var n=ue(this._getPaginated(`/commits/${t}/`,new URLSearchParams,a=>a.commits)),r,i,o;r=!(i=yield new z(n.next())).done;r=!1){let s=i.value;yield*mn(s)}}catch{o=[i]}finally{try{r&&(i=n.return)&&(yield new z(i.call(n)))}finally{if(o)throw o[0]}}})}listPrompts(t){return he(this,null,function*(){let n=new URLSearchParams;n.append("sort_field",t?.sortField??"updated_at"),n.append("sort_direction","desc"),n.append("is_archived",(!!t?.isArchived).toString()),t?.isPublic!==void 0&&n.append("is_public",t.isPublic.toString()),t?.query&&n.append("query",t.query);try{for(var r=ue(this._getPaginated("/repos",n,c=>c.repos)),i,o,s;i=!(o=yield new z(r.next())).done;i=!1){let a=o.value;yield*mn(a)}}catch{s=[o]}finally{try{i&&(o=r.return)&&(yield new z(o.call(r)))}finally{if(s)throw s[0]}}})}getPrompt(t){return y(this,null,function*(){let[n,r,i]=yd(t),s=yield(yield this.caller.call(()=>y(this,null,function*(){let a=yield this._fetch(`${this.apiUrl}/repos/${n}/${r}`,m({method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));return a?.status===404?null:(yield ut(a,"get prompt"),a)})))?.json();return s?.repo?s.repo:null})}createPrompt(t,n){return y(this,null,function*(){let r=yield this._getSettings();if(n?.isPublic&&!r.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle.
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);let[i,o,s]=yd(t);if(!(yield this._currentTenantIsOwner(i)))throw yield this._ownerConflictError("create a prompt",i);let a=b(m(m(m({repo_handle:o},n?.description&&{description:n.description}),n?.readme&&{readme:n.readme}),n?.tags&&{tags:n.tags}),{is_public:!!n?.isPublic}),c=JSON.stringify(a),u=yield this.caller.call(()=>y(this,null,function*(){let f=yield this._fetch(`${this.apiUrl}/repos/`,b(m({method:"POST",headers:b(m({},this.headers),{"Content-Type":"application/json"}),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:c}));return yield ut(f,"create prompt"),f})),{repo:d}=yield u.json();return d})}createCommit(t,n,r){return y(this,null,function*(){if(!(yield this.promptExists(t)))throw new Error("Prompt does not exist, you must create it first.");let[i,o,s]=yd(t),a=r?.parentCommitHash==="latest"||!r?.parentCommitHash?yield this._getLatestCommitHash(`${i}/${o}`):r?.parentCommitHash,c={manifest:JSON.parse(JSON.stringify(n)),parent_commit:a},u=JSON.stringify(c),f=yield(yield this.caller.call(()=>y(this,null,function*(){let g=yield this._fetch(`${this.apiUrl}/commits/${i}/${o}`,b(m({method:"POST",headers:b(m({},this.headers),{"Content-Type":"application/json"}),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:u}));return yield ut(g,"create commit"),g}))).json();return this._getPromptUrl(`${i}/${o}${f.commit_hash?`:${f.commit_hash}`:""}`)})}updateExamplesMultipart(r){return y(this,arguments,function*(t,n=[]){return this._updateExamplesMultipart(t,n)})}_updateExamplesMultipart(r){return y(this,arguments,function*(t,n=[]){if(!(yield this._getDatasetExamplesMultiPartSupport()))throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");let i=new FormData;for(let a of n){let c=a.id,u=m(m({},a.metadata&&{metadata:a.metadata}),a.split&&{split:a.split}),d=ia(u,`Serializing body for example with id: ${c}`),f=new Blob([d],{type:"application/json"});if(i.append(c,f),a.inputs){let g=ia(a.inputs,`Serializing inputs for example with id: ${c}`),h=new Blob([g],{type:"application/json"});i.append(`${c}.inputs`,h)}if(a.outputs){let g=ia(a.outputs,`Serializing outputs whle updating example with id: ${c}`),h=new Blob([g],{type:"application/json"});i.append(`${c}.outputs`,h)}if(a.attachments)for(let[g,h]of Object.entries(a.attachments)){let v,x;Array.isArray(h)?[v,x]=h:(v=h.mimeType,x=h.data);let E=new Blob([x],{type:`${v}; length=${x.byteLength}`});i.append(`${c}.attachment.${g}`,E)}if(a.attachments_operations){let g=ia(a.attachments_operations,`Serializing attachments while updating example with id: ${c}`),h=new Blob([g],{type:"application/json"});i.append(`${c}.attachments_operations`,h)}}let o=t??n[0]?.dataset_id;return(yield this.caller.call(()=>y(this,null,function*(){let a=yield this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${o}/examples`)}`,b(m({method:"PATCH",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:i}));return yield ut(a,"update examples"),a}))).json()})}uploadExamplesMultipart(r){return y(this,arguments,function*(t,n=[]){return this._uploadExamplesMultipart(t,n)})}_uploadExamplesMultipart(r){return y(this,arguments,function*(t,n=[]){if(!(yield this._getDatasetExamplesMultiPartSupport()))throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");let i=new FormData;for(let s of n){let a=(s.id??ei()).toString(),c=m(m(m(m(m({created_at:s.created_at},s.metadata&&{metadata:s.metadata}),s.split&&{split:s.split}),s.source_run_id&&{source_run_id:s.source_run_id}),s.use_source_run_io&&{use_source_run_io:s.use_source_run_io}),s.use_source_run_attachments&&{use_source_run_attachments:s.use_source_run_attachments}),u=ia(c,`Serializing body for uploaded example with id: ${a}`),d=new Blob([u],{type:"application/json"});if(i.append(a,d),s.inputs){let f=ia(s.inputs,`Serializing inputs for uploaded example with id: ${a}`),g=new Blob([f],{type:"application/json"});i.append(`${a}.inputs`,g)}if(s.outputs){let f=ia(s.outputs,`Serializing outputs for uploaded example with id: ${a}`),g=new Blob([f],{type:"application/json"});i.append(`${a}.outputs`,g)}if(s.attachments)for(let[f,g]of Object.entries(s.attachments)){let h,v;Array.isArray(g)?[h,v]=g:(h=g.mimeType,v=g.data);let x=new Blob([v],{type:`${h}; length=${v.byteLength}`});i.append(`${a}.attachment.${f}`,x)}}return(yield this.caller.call(()=>y(this,null,function*(){let s=yield this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${t}/examples`)}`,b(m({method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:i}));return yield ut(s,"upload examples"),s}))).json()})}updatePrompt(t,n){return y(this,null,function*(){if(!(yield this.promptExists(t)))throw new Error("Prompt does not exist, you must create it first.");let[r,i]=yd(t);if(!(yield this._currentTenantIsOwner(r)))throw yield this._ownerConflictError("update a prompt",r);let o={};if(n?.description!==void 0&&(o.description=n.description),n?.readme!==void 0&&(o.readme=n.readme),n?.tags!==void 0&&(o.tags=n.tags),n?.isPublic!==void 0&&(o.is_public=n.isPublic),n?.isArchived!==void 0&&(o.is_archived=n.isArchived),Object.keys(o).length===0)throw new Error("No valid update options provided");let s=JSON.stringify(o);return(yield this.caller.call(()=>y(this,null,function*(){let c=yield this._fetch(`${this.apiUrl}/repos/${r}/${i}`,b(m({method:"PATCH",headers:b(m({},this.headers),{"Content-Type":"application/json"}),signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions),{body:s}));return yield ut(c,"update prompt"),c}))).json()})}deletePrompt(t){return y(this,null,function*(){if(!(yield this.promptExists(t)))throw new Error("Prompt does not exist, you must create it first.");let[n,r,i]=yd(t);if(!(yield this._currentTenantIsOwner(n)))throw yield this._ownerConflictError("delete a prompt",n);return(yield this.caller.call(()=>y(this,null,function*(){let s=yield this._fetch(`${this.apiUrl}/repos/${n}/${r}`,m({method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));return yield ut(s,"delete prompt"),s}))).json()})}pullPromptCommit(t,n){return y(this,null,function*(){let[r,i,o]=yd(t),a=yield(yield this.caller.call(()=>y(this,null,function*(){let c=yield this._fetch(`${this.apiUrl}/commits/${r}/${i}/${o}${n?.includeModel?"?include_model=true":""}`,m({method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)},this.fetchOptions));return yield ut(c,"pull prompt commit"),c}))).json();return{owner:r,repo:i,commit_hash:a.commit_hash,manifest:a.manifest,examples:a.examples}})}_pullPrompt(t,n){return y(this,null,function*(){let r=yield this.pullPromptCommit(t,{includeModel:n?.includeModel});return JSON.stringify(r.manifest)})}pushPrompt(t,n){return y(this,null,function*(){return(yield this.promptExists(t))?n&&Object.keys(n).some(i=>i!=="object")&&(yield this.updatePrompt(t,{description:n?.description,readme:n?.readme,tags:n?.tags,isPublic:n?.isPublic})):yield this.createPrompt(t,{description:n?.description,readme:n?.readme,tags:n?.tags,isPublic:n?.isPublic}),n?.object?yield this.createCommit(t,n?.object,{parentCommitHash:n?.parentCommitHash}):yield this._getPromptUrl(t)})}clonePublicDataset(r){return y(this,arguments,function*(t,n={}){let{sourceApiUrl:i=this.apiUrl,datasetName:o}=n,[s,a]=this.parseTokenOrUrl(t,i),c=new e({apiUrl:s,apiKey:"placeholder"}),u=yield c.readSharedDataset(a),d=o||u.name;try{if(yield this.hasDataset({datasetId:d})){console.log(`Dataset ${d} already exists in your tenant. Skipping.`);return}}catch{}let f=yield c.listSharedExamples(a),g=yield this.createDataset(d,{description:u.description,dataType:u.data_type||"kv",inputsSchema:u.inputs_schema_definition??void 0,outputsSchema:u.outputs_schema_definition??void 0});try{yield this.createExamples({inputs:f.map(h=>h.inputs),outputs:f.flatMap(h=>h.outputs?[h.outputs]:[]),datasetId:g.id})}catch(h){throw console.error(`An error occurred while creating dataset ${d}. You should delete it manually.`),h}})}parseTokenOrUrl(t,n,r=2,i="dataset"){try{return Xt(t),[n,t]}catch{}try{let s=new URL(t).pathname.split("/").filter(a=>a!=="");if(s.length>=r){let a=s[s.length-r];return[n,a]}else throw new Error(`Invalid public ${i} URL: ${t}`)}catch{throw new Error(`Invalid public ${i} URL or token: ${t}`)}}awaitPendingTraceBatches(){return y(this,null,function*(){if(this.manualFlushMode)return console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve();yield Promise.all([...this.autoBatchQueue.items.map(({itemPromise:t})=>t),this.batchIngestCaller.queue.onIdle()]),this.langSmithToOTELTranslator!==void 0&&(yield Mae()?.DEFAULT_LANGSMITH_SPAN_PROCESSOR?.forceFlush())})}};function Fle(e){return"dataset_id"in e||"dataset_name"in e}var zle=e=>e!==void 0?e:!!["TRACING_V2","TRACING"].find(n=>Ri(n)==="true");var Wl=Symbol.for("lc:context_variables"),ZP=Symbol.for("langsmith:replica_trace_roots");function DH(e,t){if(Wl in e)return e[Wl][t]}function Ble(e,t,n){let r=Wl in e?e[Wl]:{};r[t]=n,e[Wl]=r}var AC=36,OC="6ba7b810-9dad-11d1-80b4-00c04fd430c8";function Ule(e){let n=Object.keys(e).sort().map(r=>`${r}:${e[r]??""}`).join("|");return rc(n,OC)}function XVe(e){return e.replace(/[-:.]/g,"")}function Hle(e,t=1){let n=t.toFixed(0).slice(0,3).padStart(3,"0");return`${new Date(e).toISOString().slice(0,-1)}${n}Z`}function PH(e,t,n=1){let r=Hle(e,n);return{dottedOrder:XVe(r)+t,microsecondPrecisionDatestring:r}}var qP=class e{constructor(t,n,r,i){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=t,this.tags=n,this.project_name=r,this.replicas=i}static fromHeader(t){let n=t.split(","),r={},i=[],o,s;for(let a of n){let[c,u]=a.split("="),d=decodeURIComponent(u);c==="langsmith-metadata"?r=JSON.parse(d):c==="langsmith-tags"?i=d.split(","):c==="langsmith-project"?o=d:c==="langsmith-replicas"&&(s=JSON.parse(d))}return new e(r,i,o,s)}toHeader(){let t=[];return this.metadata&&Object.keys(this.metadata).length>0&&t.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&t.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&t.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),t.join(",")}},zc=class e{constructor(t){if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"distributedParentId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_serialized_start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Zle(t)){Object.assign(this,m({},t));return}let n=e.getDefaultConfig(),a=t,{metadata:r}=a,i=se(a,["metadata"]),o=i.client??e.getSharedClient(),s=m(m({},r),i?.extra?.metadata);if(i.extra=b(m({},i.extra),{metadata:s}),"id"in i&&i.id==null&&delete i.id,Object.assign(this,b(m(m({},n),i),{client:o})),this.execution_order??=1,this.child_execution_order??=1,this.dotted_order||(this._serialized_start_time=Hle(this.start_time,this.execution_order)),this.id||(this.id=gP(this._serialized_start_time??this.start_time)),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.replicas=r3e(this.replicas),!this.dotted_order){let{dottedOrder:c}=PH(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+c:this.dotted_order=c}}set metadata(t){this.extra=b(m({},this.extra),{metadata:m(m({},this.extra?.metadata),t)})}get metadata(){return this.extra?.metadata}static getDefaultConfig(){let t=Date.now();return{run_type:"chain",project_name:vC(),child_runs:[],api_url:wa("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:wa("LANGCHAIN_API_KEY"),caller_options:{},start_time:t,serialized:{},inputs:{},extra:{}}}static getSharedClient(){return e.sharedClient||(e.sharedClient=new _d),e.sharedClient}createChild(t){let n=this.child_execution_order+1,r=this.replicas?.map(d=>{let h=d,{reroot:f}=h;return se(h,["reroot"])}),i=t.replicas??r,o=new e(b(m({},t),{parent_run:this,project_name:this.project_name,replicas:i,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:n,child_execution_order:n}));Wl in this&&(o[Wl]=this[Wl]);let s=Symbol.for("lc:child_config"),a=t.extra?.[s]??this.extra[s];if(t3e(a)){let d=m({},a),f=e3e(d.callbacks)?d.callbacks.copy?.():void 0;f&&(Object.assign(f,{_parentRunId:o.id}),f.handlers?.find(qle)?.updateFromRunTree?.(o),d.callbacks=f),o.extra[s]=d}let c=new Set,u=this;for(;u!=null&&!c.has(u.id);)c.add(u.id),u.child_execution_order=Math.max(u.child_execution_order,n),u=u.parent_run;return this.child_runs.push(o),o}end(o,s){return y(this,arguments,function*(t,n,r=Date.now(),i){this.outputs=this.outputs??t,this.error=this.error??n,this.end_time=this.end_time??r,i&&Object.keys(i).length>0&&(this.extra=this.extra?b(m({},this.extra),{metadata:m(m({},this.extra.metadata),i)}):{metadata:i})})}_convertToCreate(t,n,r=!0){let i=t.extra??{};if(i?.runtime?.library===void 0&&(i.runtime||(i.runtime={}),n))for(let[a,c]of Object.entries(n))i.runtime[a]||(i.runtime[a]=c);let o,s;return r?(s=t.parent_run?.id??t.parent_run_id,o=[]):(o=t.child_runs.map(a=>this._convertToCreate(a,n,r)),s=void 0),{id:t.id,name:t.name,start_time:t._serialized_start_time??t.start_time,end_time:t.end_time,run_type:t.run_type,reference_example_id:t.reference_example_id,extra:i,serialized:t.serialized,error:t.error,inputs:t.inputs,outputs:t.outputs,session_name:t.project_name,child_runs:o,parent_run_id:s,trace_id:t.trace_id,dotted_order:t.dotted_order,tags:t.tags,attachments:t.attachments,events:t.events}}_sliceParentId(t,n){if(n.dotted_order){let r=n.dotted_order.split("."),i=null;for(let o=0;o<r.length;o++)if(r[o].slice(-AC)===t){i=o;break}if(i!==null){let o=r.slice(i+1);n.dotted_order=o.join("."),o.length>0?n.trace_id=o[0].slice(-AC):n.trace_id=n.id}}n.parent_run_id===t&&(n.parent_run_id=void 0)}_setReplicaTraceRoot(t,n){let r=DH(this,ZP)??{};r[t]=n,Ble(this,ZP,r);for(let i of this.child_runs)i._setReplicaTraceRoot(t,n)}_remapForProject(t){let{projectName:n,runtimeEnv:r,excludeChildRuns:i=!0,reroot:o=!1,distributedParentId:s,apiUrl:a,apiKey:c,workspaceId:u}=t,d=this._convertToCreate(this,r,i);if(n===this.project_name)return b(m({},d),{session_name:n});if(o){if(s)this._sliceParentId(s,d);else if(d.parent_run_id=void 0,d.dotted_order){let S=d.dotted_order.split(".");S.length>0&&(d.dotted_order=S[S.length-1],d.trace_id=d.id)}let C=Ule({projectName:n,apiUrl:a,apiKey:c,workspaceId:u});this._setReplicaTraceRoot(C,d.id)}let f;if(!o){let C=DH(this,ZP)??{},S=Ule({projectName:n,apiUrl:a,apiKey:c,workspaceId:u});if(f=C[S],f&&(d.trace_id=f,d.dotted_order)){let A=d.dotted_order.split("."),P=null;for(let F=0;F<A.length;F++)if(A[F].slice(-AC)===f){P=F;break}if(P!==null){let F=A.slice(P);d.dotted_order=F.join(".")}}}let g=d.id,h=rc(`${g}:${n}`,OC),v;d.trace_id?v=rc(`${d.trace_id}:${n}`,OC):v=h;let x;d.parent_run_id&&(x=rc(`${d.parent_run_id}:${n}`,OC));let E;return d.dotted_order&&(E=d.dotted_order.split(".").map(A=>{let P=A.slice(-AC),F=rc(`${P}:${n}`,OC);return A.slice(0,-AC)+F}).join(".")),b(m({},d),{id:h,trace_id:v,parent_run_id:x,dotted_order:E,session_name:n})}postRun(t=!0){return y(this,null,function*(){try{let n=yP();if(this.replicas&&this.replicas.length>0)for(let{projectName:r,apiKey:i,apiUrl:o,workspaceId:s,reroot:a}of this.replicas){let c=this._remapForProject({projectName:r??this.project_name,runtimeEnv:n,excludeChildRuns:!0,reroot:a,distributedParentId:this.distributedParentId,apiUrl:o,apiKey:i,workspaceId:s});yield this.client.createRun(c,{apiKey:i,apiUrl:o,workspaceId:s})}else{let r=this._convertToCreate(this,n,t);yield this.client.createRun(r)}if(!t){Ny("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(let r of this.child_runs)yield r.postRun(!1)}}catch(n){console.error(`Error in postRun for run ${this.id}:`,n)}})}patchRun(t){return y(this,null,function*(){if(this.replicas&&this.replicas.length>0)for(let{projectName:n,apiKey:r,apiUrl:i,workspaceId:o,updates:s,reroot:a}of this.replicas){let c=this._remapForProject({projectName:n??this.project_name,runtimeEnv:void 0,excludeChildRuns:!0,reroot:a,distributedParentId:this.distributedParentId,apiUrl:i,apiKey:r,workspaceId:o}),u=m({id:c.id,name:c.name,run_type:c.run_type,start_time:c.start_time,outputs:c.outputs,error:c.error,parent_run_id:c.parent_run_id,session_name:c.session_name,reference_example_id:c.reference_example_id,end_time:c.end_time,dotted_order:c.dotted_order,trace_id:c.trace_id,events:c.events,tags:c.tags,extra:c.extra,attachments:this.attachments},s);t?.excludeInputs||(u.inputs=c.inputs),yield this.client.updateRun(c.id,u,{apiKey:r,apiUrl:i,workspaceId:o})}else try{let n={name:this.name,run_type:this.run_type,start_time:this._serialized_start_time??this.start_time,end_time:this.end_time,error:this.error,outputs:this.outputs,parent_run_id:this.parent_run?.id??this.parent_run_id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};t?.excludeInputs||(n.inputs=this.inputs),yield this.client.updateRun(this.id,n)}catch(n){console.error(`Error in patchRun for run ${this.id}`,n)}})}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(t){this.events||(this.events=[]),typeof t=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:t}):this.events.push(b(m({},t),{time:t.time??new Date().toISOString()}))}static fromRunnableConfig(t,n){let r=t?.callbacks,i,o,s,a=zle();if(r){let u=r?.getParentRunId?.()??"",d=r?.handlers?.find(f=>f?.name=="langchain_tracer");i=d?.getRun?.(u),o=d?.projectName,s=d?.client,a=a||!!d}return i?new e({name:i.name,id:i.id,trace_id:i.trace_id,dotted_order:i.dotted_order,client:s,tracingEnabled:a,project_name:o,tags:[...new Set((i?.tags??[]).concat(t?.tags??[]))],extra:{metadata:m(m({},i?.extra?.metadata),t?.metadata)}}).createChild(n):new e(b(m({},n),{client:s,tracingEnabled:a,project_name:o}))}static fromDottedOrder(t){return this.fromHeaders({"langsmith-trace":t})}static fromHeaders(t,n){let r="get"in t&&typeof t.get=="function"?{"langsmith-trace":t.get("langsmith-trace"),baggage:t.get("baggage")}:t,i=r["langsmith-trace"];if(!i||typeof i!="string")return;let o=i.trim(),s=o.split(".").map(d=>{let[f,g]=d.split("Z");return{strTime:f,time:Date.parse(f+"Z"),uuid:g}}),a=s[0].uuid,c=b(m({},n),{name:n?.name??"parent",run_type:n?.run_type??"chain",start_time:n?.start_time??Date.now(),id:s.at(-1)?.uuid,trace_id:a,dotted_order:o});if(r.baggage&&typeof r.baggage=="string"){let d=qP.fromHeader(r.baggage);c.metadata=d.metadata,c.tags=d.tags,c.project_name=d.project_name,c.replicas=d.replicas}let u=new e(c);return u.distributedParentId=u.id,u}toHeaders(t){let n={"langsmith-trace":this.dotted_order,baggage:new qP(this.extra?.metadata,this.tags,this.project_name,this.replicas).toHeader()};if(t)for(let[r,i]of Object.entries(n))t.set(r,i);return n}};Object.defineProperty(zc,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function Zle(e){return e!=null&&typeof e.createChild=="function"&&typeof e.postRun=="function"}function qle(e){return typeof e=="object"&&e!=null&&typeof e.name=="string"&&e.name==="langchain_tracer"}function Vle(e){return Array.isArray(e)&&e.some(t=>qle(t))}function e3e(e){return typeof e=="object"&&e!=null&&Array.isArray(e.handlers)}function t3e(e){return e!=null&&typeof e.callbacks=="object"&&(Vle(e.callbacks?.handlers)||Vle(e.callbacks))}function n3e(){let e=wa("LANGSMITH_RUNS_ENDPOINTS");if(!e)return[];try{let t=JSON.parse(e);if(Array.isArray(t)){let n=[];for(let r of t){if(typeof r!="object"||r===null){console.warn(`Invalid item type in LANGSMITH_RUNS_ENDPOINTS: expected object, got ${typeof r}`);continue}if(typeof r.api_url!="string"){console.warn(`Invalid api_url type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof r.api_url}`);continue}if(typeof r.api_key!="string"){console.warn(`Invalid api_key type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof r.api_key}`);continue}n.push({apiUrl:r.api_url.replace(/\/$/,""),apiKey:r.api_key})}return n}else if(typeof t=="object"&&t!==null){i3e(t);let n=[];for(let[r,i]of Object.entries(t)){let o=r.replace(/\/$/,"");if(typeof i=="string")n.push({apiUrl:o,apiKey:i});else{console.warn(`Invalid value type in LANGSMITH_RUNS_ENDPOINTS for URL ${r}: expected string, got ${typeof i}`);continue}}return n}else return console.warn(`Invalid LANGSMITH_RUNS_ENDPOINTS \u2013 must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey, got ${typeof t}`),[]}catch(t){if(Dle(t))throw t;return console.warn("Invalid LANGSMITH_RUNS_ENDPOINTS \u2013 must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey"),[]}}function r3e(e){return e?e.map(t=>Array.isArray(t)?{projectName:t[0],updates:t[1]}:t):n3e()}function i3e(e){if(Object.keys(e).length>0&&Ri("ENDPOINT"))throw new BP}var $H={};ae($H,{BaseTracer:()=>ko,isBaseTracer:()=>th});var o3e=e=>{if(e)return e.events=e.events??[],e.child_runs=e.child_runs??[],e};function NH(e,t){if(e)return new zc(b(m({},e),{start_time:e._serialized_start_time??e.start_time,parent_run:NH(t),child_runs:e.child_runs.map(n=>NH(n)).filter(n=>n!==void 0),extra:b(m({},e.extra),{runtime:S6()}),tracingEnabled:!1}))}function RH(e,t){return e&&!Array.isArray(e)&&typeof e=="object"?e:{[t]:e}}function th(e){return typeof e._addRunToRunMap=="function"}var ko=class extends gd{runMap=new Map;runTreeMap=new Map;usesRunTreeMap=!1;constructor(e){super(...arguments)}copy(){return this}getRunById(e){if(e!==void 0)return this.usesRunTreeMap?o3e(this.runTreeMap.get(e)):this.runMap.get(e)}stringifyError(e){return e instanceof Error?e.message+(e?.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,t){e.child_runs.push(t)}_addRunToRunMap(e){let{dottedOrder:t,microsecondPrecisionDatestring:n}=PH(new Date(e.start_time).getTime(),e.id,e.execution_order),r=m({},e),i=this.getRunById(r.parent_run_id);if(r.parent_run_id!==void 0?i&&(this._addChildRun(i,r),i.child_execution_order=Math.max(i.child_execution_order,r.child_execution_order),r.trace_id=i.trace_id,i.dotted_order!==void 0&&(r.dotted_order=[i.dotted_order,t].join("."),r._serialized_start_time=n)):(r.trace_id=r.id,r.dotted_order=t,r._serialized_start_time=n),this.usesRunTreeMap){let o=NH(r,i);o!==void 0&&this.runTreeMap.set(r.id,o)}else this.runMap.set(r.id,r);return r}_endTrace(e){return y(this,null,function*(){let t=e.parent_run_id!==void 0&&this.getRunById(e.parent_run_id);t?t.child_execution_order=Math.max(t.child_execution_order,e.child_execution_order):yield this.persistRun(e),yield this.onRunUpdate?.(e),this.usesRunTreeMap?this.runTreeMap.delete(e.id):this.runMap.delete(e.id)})}_getExecutionOrder(e){let t=e!==void 0&&this.getRunById(e);return t?t.child_execution_order+1:1}_createRunForLLMStart(e,t,n,r,i,o,s,a){let c=this._getExecutionOrder(r),u=Date.now(),d=s?b(m({},i),{metadata:s}):i,f={id:n,name:a??e.id[e.id.length-1],parent_run_id:r,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{prompts:t},execution_order:c,child_runs:[],child_execution_order:c,run_type:"llm",extra:d??{},tags:o||[]};return this._addRunToRunMap(f)}handleLLMStart(e,t,n,r,i,o,s,a){return y(this,null,function*(){let c=this.getRunById(n)??this._createRunForLLMStart(e,t,n,r,i,o,s,a);return yield this.onRunCreate?.(c),yield this.onLLMStart?.(c),c})}_createRunForChatModelStart(e,t,n,r,i,o,s,a){let c=this._getExecutionOrder(r),u=Date.now(),d=s?b(m({},i),{metadata:s}):i,f={id:n,name:a??e.id[e.id.length-1],parent_run_id:r,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{messages:t},execution_order:c,child_runs:[],child_execution_order:c,run_type:"llm",extra:d??{},tags:o||[]};return this._addRunToRunMap(f)}handleChatModelStart(e,t,n,r,i,o,s,a){return y(this,null,function*(){let c=this.getRunById(n)??this._createRunForChatModelStart(e,t,n,r,i,o,s,a);return yield this.onRunCreate?.(c),yield this.onLLMStart?.(c),c})}handleLLMEnd(e,t,n,r,i){return y(this,null,function*(){let o=this.getRunById(t);if(!o||o?.run_type!=="llm")throw new Error("No LLM run to end.");return o.end_time=Date.now(),o.outputs=e,o.events.push({name:"end",time:new Date(o.end_time).toISOString()}),o.extra=m(m({},o.extra),i),yield this.onLLMEnd?.(o),yield this._endTrace(o),o})}handleLLMError(e,t,n,r,i){return y(this,null,function*(){let o=this.getRunById(t);if(!o||o?.run_type!=="llm")throw new Error("No LLM run to end.");return o.end_time=Date.now(),o.error=this.stringifyError(e),o.events.push({name:"error",time:new Date(o.end_time).toISOString()}),o.extra=m(m({},o.extra),i),yield this.onLLMError?.(o),yield this._endTrace(o),o})}_createRunForChainStart(e,t,n,r,i,o,s,a){let c=this._getExecutionOrder(r),u=Date.now(),d={id:n,name:a??e.id[e.id.length-1],parent_run_id:r,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:t,execution_order:c,child_execution_order:c,run_type:s??"chain",child_runs:[],extra:o?{metadata:o}:{},tags:i||[]};return this._addRunToRunMap(d)}handleChainStart(e,t,n,r,i,o,s,a){return y(this,null,function*(){let c=this.getRunById(n)??this._createRunForChainStart(e,t,n,r,i,o,s,a);return yield this.onRunCreate?.(c),yield this.onChainStart?.(c),c})}handleChainEnd(e,t,n,r,i){return y(this,null,function*(){let o=this.getRunById(t);if(!o)throw new Error("No chain run to end.");return o.end_time=Date.now(),o.outputs=RH(e,"output"),o.events.push({name:"end",time:new Date(o.end_time).toISOString()}),i?.inputs!==void 0&&(o.inputs=RH(i.inputs,"input")),yield this.onChainEnd?.(o),yield this._endTrace(o),o})}handleChainError(e,t,n,r,i){return y(this,null,function*(){let o=this.getRunById(t);if(!o)throw new Error("No chain run to end.");return o.end_time=Date.now(),o.error=this.stringifyError(e),o.events.push({name:"error",time:new Date(o.end_time).toISOString()}),i?.inputs!==void 0&&(o.inputs=RH(i.inputs,"input")),yield this.onChainError?.(o),yield this._endTrace(o),o})}_createRunForToolStart(e,t,n,r,i,o,s){let a=this._getExecutionOrder(r),c=Date.now(),u={id:n,name:s??e.id[e.id.length-1],parent_run_id:r,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{input:t},execution_order:a,child_execution_order:a,run_type:"tool",child_runs:[],extra:o?{metadata:o}:{},tags:i||[]};return this._addRunToRunMap(u)}handleToolStart(e,t,n,r,i,o,s){return y(this,null,function*(){let a=this.getRunById(n)??this._createRunForToolStart(e,t,n,r,i,o,s);return yield this.onRunCreate?.(a),yield this.onToolStart?.(a),a})}handleToolEnd(e,t){return y(this,null,function*(){let n=this.getRunById(t);if(!n||n?.run_type!=="tool")throw new Error("No tool run to end");return n.end_time=Date.now(),n.outputs={output:e},n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),yield this.onToolEnd?.(n),yield this._endTrace(n),n})}handleToolError(e,t){return y(this,null,function*(){let n=this.getRunById(t);if(!n||n?.run_type!=="tool")throw new Error("No tool run to end");return n.end_time=Date.now(),n.error=this.stringifyError(e),n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),yield this.onToolError?.(n),yield this._endTrace(n),n})}handleAgentAction(e,t){return y(this,null,function*(){let n=this.getRunById(t);if(!n||n?.run_type!=="chain")return;let r=n;r.actions=r.actions||[],r.actions.push(e),r.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),yield this.onAgentAction?.(n)})}handleAgentEnd(e,t){return y(this,null,function*(){let n=this.getRunById(t);!n||n?.run_type!=="chain"||(n.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),yield this.onAgentEnd?.(n))})}_createRunForRetrieverStart(e,t,n,r,i,o,s){let a=this._getExecutionOrder(r),c=Date.now(),u={id:n,name:s??e.id[e.id.length-1],parent_run_id:r,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{query:t},execution_order:a,child_execution_order:a,run_type:"retriever",child_runs:[],extra:o?{metadata:o}:{},tags:i||[]};return this._addRunToRunMap(u)}handleRetrieverStart(e,t,n,r,i,o,s){return y(this,null,function*(){let a=this.getRunById(n)??this._createRunForRetrieverStart(e,t,n,r,i,o,s);return yield this.onRunCreate?.(a),yield this.onRetrieverStart?.(a),a})}handleRetrieverEnd(e,t){return y(this,null,function*(){let n=this.getRunById(t);if(!n||n?.run_type!=="retriever")throw new Error("No retriever run to end");return n.end_time=Date.now(),n.outputs={documents:e},n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),yield this.onRetrieverEnd?.(n),yield this._endTrace(n),n})}handleRetrieverError(e,t){return y(this,null,function*(){let n=this.getRunById(t);if(!n||n?.run_type!=="retriever")throw new Error("No retriever run to end");return n.end_time=Date.now(),n.error=this.stringifyError(e),n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),yield this.onRetrieverError?.(n),yield this._endTrace(n),n})}handleText(e,t){return y(this,null,function*(){let n=this.getRunById(t);!n||n?.run_type!=="chain"||(n.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),yield this.onText?.(n))})}handleLLMNewToken(e,t,n,r,i,o){return y(this,null,function*(){let s=this.getRunById(n);if(!s||s?.run_type!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return s.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:t,chunk:o?.chunk}}),yield this.onLLMNewToken?.(s,e,{chunk:o?.chunk}),s})}};var LH=_c(Jle(),1),FH={};ae(FH,{ConsoleCallbackHandler:()=>GP});function xs(e,t){return`${e.open}${t}${e.close}`}function sc(e,t){try{return JSON.stringify(e,null,2)}catch{return t}}function Yle(e){return typeof e=="string"?e.trim():e==null?e:sc(e,e.toString())}function Qp(e){if(!e.end_time)return"";let t=e.end_time-e.start_time;return t<1e3?`${t}ms`:`${(t/1e3).toFixed(2)}s`}var{color:oa}=LH.default,GP=class extends ko{name="console_callback_handler";persistRun(e){return Promise.resolve()}getParents(e){let t=[],n=e;for(;n.parent_run_id;){let r=this.runMap.get(n.parent_run_id);if(r)t.push(r),n=r;else break}return t}getBreadcrumbs(e){let n=[...this.getParents(e).reverse(),e].map((r,i,o)=>{let s=`${r.execution_order}:${r.run_type}:${r.name}`;return i===o.length-1?xs(LH.default.bold,s):s}).join(" > ");return xs(oa.grey,n)}onChainStart(e){let t=this.getBreadcrumbs(e);console.log(`${xs(oa.green,"[chain/start]")} [${t}] Entering Chain run with input: ${sc(e.inputs,"[inputs]")}`)}onChainEnd(e){let t=this.getBreadcrumbs(e);console.log(`${xs(oa.cyan,"[chain/end]")} [${t}] [${Qp(e)}] Exiting Chain run with output: ${sc(e.outputs,"[outputs]")}`)}onChainError(e){let t=this.getBreadcrumbs(e);console.log(`${xs(oa.red,"[chain/error]")} [${t}] [${Qp(e)}] Chain run errored with error: ${sc(e.error,"[error]")}`)}onLLMStart(e){let t=this.getBreadcrumbs(e),n="prompts"in e.inputs?{prompts:e.inputs.prompts.map(r=>r.trim())}:e.inputs;console.log(`${xs(oa.green,"[llm/start]")} [${t}] Entering LLM run with input: ${sc(n,"[inputs]")}`)}onLLMEnd(e){let t=this.getBreadcrumbs(e);console.log(`${xs(oa.cyan,"[llm/end]")} [${t}] [${Qp(e)}] Exiting LLM run with output: ${sc(e.outputs,"[response]")}`)}onLLMError(e){let t=this.getBreadcrumbs(e);console.log(`${xs(oa.red,"[llm/error]")} [${t}] [${Qp(e)}] LLM run errored with error: ${sc(e.error,"[error]")}`)}onToolStart(e){let t=this.getBreadcrumbs(e);console.log(`${xs(oa.green,"[tool/start]")} [${t}] Entering Tool run with input: "${Yle(e.inputs.input)}"`)}onToolEnd(e){let t=this.getBreadcrumbs(e);console.log(`${xs(oa.cyan,"[tool/end]")} [${t}] [${Qp(e)}] Exiting Tool run with output: "${Yle(e.outputs?.output)}"`)}onToolError(e){let t=this.getBreadcrumbs(e);console.log(`${xs(oa.red,"[tool/error]")} [${t}] [${Qp(e)}] Tool run errored with error: ${sc(e.error,"[error]")}`)}onRetrieverStart(e){let t=this.getBreadcrumbs(e);console.log(`${xs(oa.green,"[retriever/start]")} [${t}] Entering Retriever run with input: ${sc(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){let t=this.getBreadcrumbs(e);console.log(`${xs(oa.cyan,"[retriever/end]")} [${t}] [${Qp(e)}] Exiting Retriever run with output: ${sc(e.outputs,"[outputs]")}`)}onRetrieverError(e){let t=this.getBreadcrumbs(e);console.log(`${xs(oa.red,"[retriever/error]")} [${t}] [${Qp(e)}] Retriever run errored with error: ${sc(e.error,"[error]")}`)}onAgentAction(e){let t=e,n=this.getBreadcrumbs(e);console.log(`${xs(oa.blue,"[agent/action]")} [${n}] Agent selected action: ${sc(t.actions[t.actions.length-1],"[action]")}`)}};var jH,WP=()=>{if(jH===void 0){let e=Kr("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};jH=new _d(e)}return jH};var BH=class{getStore(){}run(t,n){return n()}},zH=Symbol.for("ls:tracing_async_local_storage"),a3e=new BH,UH=class{getInstance(){return globalThis[zH]??a3e}initializeGlobalInstance(t){globalThis[zH]===void 0&&(globalThis[zH]=t)}},c3e=new UH;function Qle(e=!1){let t=c3e.getInstance().getStore();if(!e&&t===void 0)throw new Error(`Could not get the current run tree.

Please make sure you are calling this method within a traceable function and that tracing is enabled.`);return t}var uTt=Symbol.for("langsmith:traceable:root");function KP(e){return typeof e=="function"&&"langsmith:traceable"in e}var VH={};ae(VH,{LangChainTracer:()=>MC});var MC=class Xle extends ko{name="langchain_tracer";projectName;exampleId;client;replicas;usesRunTreeMap=!0;constructor(t={}){super(t);let{exampleId:n,projectName:r,client:i,replicas:o}=t;this.projectName=r??vC(),this.replicas=o,this.exampleId=n,this.client=i??WP();let s=Xle.getTraceableRunTree();s&&this.updateFromRunTree(s)}persistRun(t){return y(this,null,function*(){})}onRunCreate(t){return y(this,null,function*(){yield this.getRunTreeWithTracingConfig(t.id)?.postRun()})}onRunUpdate(t){return y(this,null,function*(){yield this.getRunTreeWithTracingConfig(t.id)?.patchRun()})}getRun(t){return this.runTreeMap.get(t)}updateFromRunTree(t){this.runTreeMap.set(t.id,t);let n=t,r=new Set;for(;n.parent_run&&!(r.has(n.id)||(r.add(n.id),!n.parent_run));)n=n.parent_run;r.clear();let i=[n];for(;i.length>0;){let o=i.shift();!o||r.has(o.id)||(r.add(o.id),this.runTreeMap.set(o.id,o),o.child_runs&&i.push(...o.child_runs))}this.client=t.client??this.client,this.replicas=t.replicas??this.replicas,this.projectName=t.project_name??this.projectName,this.exampleId=t.reference_example_id??this.exampleId}getRunTreeWithTracingConfig(t){let n=this.runTreeMap.get(t);if(n)return new zc(b(m({},n),{client:this.client,project_name:this.projectName,replicas:this.replicas,reference_example_id:this.exampleId,tracingEnabled:!0}))}static getTraceableRunTree(){try{return Qle(!0)}catch{return}}};var JP=_c(kP(),1);var nh;function l3e(){let e="default"in JP.default?JP.default.default:JP.default;return new e({autoStart:!0,concurrency:1})}function u3e(){return typeof nh>"u"&&(nh=l3e()),nh}function ui(e,t){return y(this,null,function*(){if(t===!0){let n=Wp();n!==void 0?yield n.run(void 0,()=>y(null,null,function*(){return e()})):yield e()}else nh=u3e(),nh.add(()=>y(null,null,function*(){let n=Wp();n!==void 0?yield n.run(void 0,()=>y(null,null,function*(){return e()})):yield e()}))})}function eue(){return y(this,null,function*(){let e=WP();yield Promise.allSettled([typeof nh<"u"?nh.onIdle():Promise.resolve(),e.awaitPendingTraceBatches()])})}var HH={};ae(HH,{awaitAllCallbacks:()=>eue,consumeCallback:()=>ui});var tue=e=>e!==void 0?e:!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(n=>Kr(n)==="true");function ZH(e){let t=Wp();return t===void 0?void 0:t.getStore()?.[Gp]?.[e]}var d3e=Symbol("lc:configure_hooks"),nue=()=>ZH(d3e)||[];var GH={};ae(GH,{BaseCallbackManager:()=>rue,BaseRunManager:()=>PC,CallbackManager:()=>wi,CallbackManagerForChainRun:()=>oue,CallbackManagerForLLMRun:()=>qH,CallbackManagerForRetrieverRun:()=>iue,CallbackManagerForToolRun:()=>sue,ensureHandler:()=>jy,parseCallbackConfigArg:()=>rh});function rh(e){return e?Array.isArray(e)||"name"in e?{callbacks:e}:e:{}}var rue=class{setHandler(e){return this.setHandlers([e])}},PC=class{constructor(e,t,n,r,i,o,s,a){this.runId=e,this.handlers=t,this.inheritableHandlers=n,this.tags=r,this.inheritableTags=i,this.metadata=o,this.inheritableMetadata=s,this._parentRunId=a}get parentRunId(){return this._parentRunId}handleText(e){return y(this,null,function*(){yield Promise.all(this.handlers.map(t=>ui(()=>y(this,null,function*(){try{yield t.handleText?.(e,this.runId,this._parentRunId,this.tags)}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleText: ${n}`),t.raiseError)throw n}}),t.awaitHandlers)))})}handleCustomEvent(e,t,n,r,i){return y(this,null,function*(){yield Promise.all(this.handlers.map(o=>ui(()=>y(this,null,function*(){try{yield o.handleCustomEvent?.(e,t,this.runId,this.tags,this.metadata)}catch(s){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleCustomEvent: ${s}`),o.raiseError)throw s}}),o.awaitHandlers)))})}},iue=class extends PC{getChild(e){let t=new wi(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}handleRetrieverEnd(e){return y(this,null,function*(){yield Promise.all(this.handlers.map(t=>ui(()=>y(this,null,function*(){if(!t.ignoreRetriever)try{yield t.handleRetrieverEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetriever`),t.raiseError)throw n}}),t.awaitHandlers)))})}handleRetrieverError(e){return y(this,null,function*(){yield Promise.all(this.handlers.map(t=>ui(()=>y(this,null,function*(){if(!t.ignoreRetriever)try{yield t.handleRetrieverError?.(e,this.runId,this._parentRunId,this.tags)}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetrieverError: ${n}`),t.raiseError)throw e}}),t.awaitHandlers)))})}},qH=class extends PC{handleLLMNewToken(e,t,n,r,i,o){return y(this,null,function*(){yield Promise.all(this.handlers.map(s=>ui(()=>y(this,null,function*(){if(!s.ignoreLLM)try{yield s.handleLLMNewToken?.(e,t??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,o)}catch(a){if((s.raiseError?console.error:console.warn)(`Error in handler ${s.constructor.name}, handleLLMNewToken: ${a}`),s.raiseError)throw a}}),s.awaitHandlers)))})}handleLLMError(e,t,n,r,i){return y(this,null,function*(){yield Promise.all(this.handlers.map(o=>ui(()=>y(this,null,function*(){if(!o.ignoreLLM)try{yield o.handleLLMError?.(e,this.runId,this._parentRunId,this.tags,i)}catch(s){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleLLMError: ${s}`),o.raiseError)throw s}}),o.awaitHandlers)))})}handleLLMEnd(e,t,n,r,i){return y(this,null,function*(){yield Promise.all(this.handlers.map(o=>ui(()=>y(this,null,function*(){if(!o.ignoreLLM)try{yield o.handleLLMEnd?.(e,this.runId,this._parentRunId,this.tags,i)}catch(s){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleLLMEnd: ${s}`),o.raiseError)throw s}}),o.awaitHandlers)))})}},oue=class extends PC{getChild(e){let t=new wi(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}handleChainError(e,t,n,r,i){return y(this,null,function*(){yield Promise.all(this.handlers.map(o=>ui(()=>y(this,null,function*(){if(!o.ignoreChain)try{yield o.handleChainError?.(e,this.runId,this._parentRunId,this.tags,i)}catch(s){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleChainError: ${s}`),o.raiseError)throw s}}),o.awaitHandlers)))})}handleChainEnd(e,t,n,r,i){return y(this,null,function*(){yield Promise.all(this.handlers.map(o=>ui(()=>y(this,null,function*(){if(!o.ignoreChain)try{yield o.handleChainEnd?.(e,this.runId,this._parentRunId,this.tags,i)}catch(s){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleChainEnd: ${s}`),o.raiseError)throw s}}),o.awaitHandlers)))})}handleAgentAction(e){return y(this,null,function*(){yield Promise.all(this.handlers.map(t=>ui(()=>y(this,null,function*(){if(!t.ignoreAgent)try{yield t.handleAgentAction?.(e,this.runId,this._parentRunId,this.tags)}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentAction: ${n}`),t.raiseError)throw n}}),t.awaitHandlers)))})}handleAgentEnd(e){return y(this,null,function*(){yield Promise.all(this.handlers.map(t=>ui(()=>y(this,null,function*(){if(!t.ignoreAgent)try{yield t.handleAgentEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentEnd: ${n}`),t.raiseError)throw n}}),t.awaitHandlers)))})}},sue=class extends PC{getChild(e){let t=new wi(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}handleToolError(e){return y(this,null,function*(){yield Promise.all(this.handlers.map(t=>ui(()=>y(this,null,function*(){if(!t.ignoreAgent)try{yield t.handleToolError?.(e,this.runId,this._parentRunId,this.tags)}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolError: ${n}`),t.raiseError)throw n}}),t.awaitHandlers)))})}handleToolEnd(e){return y(this,null,function*(){yield Promise.all(this.handlers.map(t=>ui(()=>y(this,null,function*(){if(!t.ignoreAgent)try{yield t.handleToolEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolEnd: ${n}`),t.raiseError)throw n}}),t.awaitHandlers)))})}},wi=class DC extends rue{handlers=[];inheritableHandlers=[];tags=[];inheritableTags=[];metadata={};inheritableMetadata={};name="callback_manager";_parentRunId;constructor(t,n){super(),this.handlers=n?.handlers??this.handlers,this.inheritableHandlers=n?.inheritableHandlers??this.inheritableHandlers,this.tags=n?.tags??this.tags,this.inheritableTags=n?.inheritableTags??this.inheritableTags,this.metadata=n?.metadata??this.metadata,this.inheritableMetadata=n?.inheritableMetadata??this.inheritableMetadata,this._parentRunId=t}getParentRunId(){return this._parentRunId}handleLLMStart(t,n,r=void 0,i=void 0,o=void 0,s=void 0,a=void 0,c=void 0){return y(this,null,function*(){return Promise.all(n.map((u,d)=>y(this,null,function*(){let f=d===0&&r?r:ei();return yield Promise.all(this.handlers.map(g=>{if(!g.ignoreLLM)return th(g)&&g._createRunForLLMStart(t,[u],f,this._parentRunId,o,this.tags,this.metadata,c),ui(()=>y(this,null,function*(){try{yield g.handleLLMStart?.(t,[u],f,this._parentRunId,o,this.tags,this.metadata,c)}catch(h){if((g.raiseError?console.error:console.warn)(`Error in handler ${g.constructor.name}, handleLLMStart: ${h}`),g.raiseError)throw h}}),g.awaitHandlers)})),new qH(f,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})))})}handleChatModelStart(t,n,r=void 0,i=void 0,o=void 0,s=void 0,a=void 0,c=void 0){return y(this,null,function*(){return Promise.all(n.map((u,d)=>y(this,null,function*(){let f=d===0&&r?r:ei();return yield Promise.all(this.handlers.map(g=>{if(!g.ignoreLLM)return th(g)&&g._createRunForChatModelStart(t,[u],f,this._parentRunId,o,this.tags,this.metadata,c),ui(()=>y(this,null,function*(){try{if(g.handleChatModelStart)yield g.handleChatModelStart?.(t,[u],f,this._parentRunId,o,this.tags,this.metadata,c);else if(g.handleLLMStart){let h=Ry(u);yield g.handleLLMStart?.(t,[h],f,this._parentRunId,o,this.tags,this.metadata,c)}}catch(h){if((g.raiseError?console.error:console.warn)(`Error in handler ${g.constructor.name}, handleLLMStart: ${h}`),g.raiseError)throw h}}),g.awaitHandlers)})),new qH(f,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})))})}handleChainStart(c,u){return y(this,arguments,function*(t,n,r=ei(),i=void 0,o=void 0,s=void 0,a=void 0){return yield Promise.all(this.handlers.map(d=>{if(!d.ignoreChain)return th(d)&&d._createRunForChainStart(t,n,r,this._parentRunId,this.tags,this.metadata,i,a),ui(()=>y(this,null,function*(){try{yield d.handleChainStart?.(t,n,r,this._parentRunId,this.tags,this.metadata,i,a)}catch(f){if((d.raiseError?console.error:console.warn)(`Error in handler ${d.constructor.name}, handleChainStart: ${f}`),d.raiseError)throw f}}),d.awaitHandlers)})),new oue(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})}handleToolStart(c,u){return y(this,arguments,function*(t,n,r=ei(),i=void 0,o=void 0,s=void 0,a=void 0){return yield Promise.all(this.handlers.map(d=>{if(!d.ignoreAgent)return th(d)&&d._createRunForToolStart(t,n,r,this._parentRunId,this.tags,this.metadata,a),ui(()=>y(this,null,function*(){try{yield d.handleToolStart?.(t,n,r,this._parentRunId,this.tags,this.metadata,a)}catch(f){if((d.raiseError?console.error:console.warn)(`Error in handler ${d.constructor.name}, handleToolStart: ${f}`),d.raiseError)throw f}}),d.awaitHandlers)})),new sue(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})}handleRetrieverStart(c,u){return y(this,arguments,function*(t,n,r=ei(),i=void 0,o=void 0,s=void 0,a=void 0){return yield Promise.all(this.handlers.map(d=>{if(!d.ignoreRetriever)return th(d)&&d._createRunForRetrieverStart(t,n,r,this._parentRunId,this.tags,this.metadata,a),ui(()=>y(this,null,function*(){try{yield d.handleRetrieverStart?.(t,n,r,this._parentRunId,this.tags,this.metadata,a)}catch(f){if((d.raiseError?console.error:console.warn)(`Error in handler ${d.constructor.name}, handleRetrieverStart: ${f}`),d.raiseError)throw f}}),d.awaitHandlers)})),new iue(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})}handleCustomEvent(t,n,r,i,o){return y(this,null,function*(){yield Promise.all(this.handlers.map(s=>ui(()=>y(this,null,function*(){if(!s.ignoreCustomEvent)try{yield s.handleCustomEvent?.(t,n,r,this.tags,this.metadata)}catch(a){if((s.raiseError?console.error:console.warn)(`Error in handler ${s.constructor.name}, handleCustomEvent: ${a}`),s.raiseError)throw a}}),s.awaitHandlers)))})}addHandler(t,n=!0){this.handlers.push(t),n&&this.inheritableHandlers.push(t)}removeHandler(t){this.handlers=this.handlers.filter(n=>n!==t),this.inheritableHandlers=this.inheritableHandlers.filter(n=>n!==t)}setHandlers(t,n=!0){this.handlers=[],this.inheritableHandlers=[];for(let r of t)this.addHandler(r,n)}addTags(t,n=!0){this.removeTags(t),this.tags.push(...t),n&&this.inheritableTags.push(...t)}removeTags(t){this.tags=this.tags.filter(n=>!t.includes(n)),this.inheritableTags=this.inheritableTags.filter(n=>!t.includes(n))}addMetadata(t,n=!0){this.metadata=m(m({},this.metadata),t),n&&(this.inheritableMetadata=m(m({},this.inheritableMetadata),t))}removeMetadata(t){for(let n of Object.keys(t))delete this.metadata[n],delete this.inheritableMetadata[n]}copy(t=[],n=!0){let r=new DC(this._parentRunId);for(let i of this.handlers){let o=this.inheritableHandlers.includes(i);r.addHandler(i,o)}for(let i of this.tags){let o=this.inheritableTags.includes(i);r.addTags([i],o)}for(let i of Object.keys(this.metadata)){let o=Object.keys(this.inheritableMetadata).includes(i);r.addMetadata({[i]:this.metadata[i]},o)}for(let i of t)r.handlers.filter(o=>o.name==="console_callback_handler").some(o=>o.name===i.name)||r.addHandler(i,n);return r}static fromHandlers(t){class n extends gd{name=ei();constructor(){super(),Object.assign(this,t)}}let r=new this;return r.addHandler(new n),r}static configure(t,n,r,i,o,s,a){return this._configureSync(t,n,r,i,o,s,a)}static _configureSync(t,n,r,i,o,s,a){let c;(t||n)&&(Array.isArray(t)||!t?(c=new DC,c.setHandlers(t?.map(jy)??[],!0)):c=t,c=c.copy(Array.isArray(n)?n.map(jy):n?.handlers,!1));let u=Kr("LANGCHAIN_VERBOSE")==="true"||a?.verbose,d=MC.getTraceableRunTree()?.tracingEnabled||tue(),f=d||(Kr("LANGCHAIN_TRACING")??!1);if(u||f){if(c||(c=new DC),u&&!c.handlers.some(g=>g.name===GP.prototype.name)){let g=new GP;c.addHandler(g,!0)}if(f&&!c.handlers.some(g=>g.name==="langchain_tracer")&&d){let g=new MC;c.addHandler(g,!0)}if(d){let g=MC.getTraceableRunTree();g&&c._parentRunId===void 0&&(c._parentRunId=g.id,c.handlers.find(v=>v.name==="langchain_tracer")?.updateFromRunTree(g))}}for(let{contextVar:g,inheritable:h=!0,handlerClass:v,envVar:x}of nue()){let E=x&&Kr(x)==="true"&&v,C,S=g!==void 0?ZH(g):void 0;S&&$6(S)?C=S:E&&(C=new v({})),C!==void 0&&(c||(c=new DC),c.handlers.some(A=>A.name===C.name)||c.addHandler(C,h))}return(r||i)&&c&&(c.addTags(r??[]),c.addTags(i??[],!1)),(o||s)&&c&&(c.addMetadata(o??{}),c.addMetadata(s??{},!1)),c}};function jy(e){return"name"in e?e:gd.fromMethods(e)}var WH=class{getStore(){}run(e,t){return t()}enterWith(e){}},p3e=new WH,aue=Symbol.for("lc:child_config"),m3e=class{getInstance(){return Wp()??p3e}getRunnableConfig(){return this.getInstance().getStore()?.extra?.[aue]}runWithConfig(e,t,n){let r=wi._configureSync(e?.callbacks,void 0,e?.tags,void 0,e?.metadata),i=this.getInstance(),o=i.getStore(),s=r?.getParentRunId(),a=r?.handlers?.find(u=>u?.name==="langchain_tracer"),c;return a&&s?c=a.getRunTreeWithTracingConfig(s):n||(c=new zc({name:"<runnable_lambda>",tracingEnabled:!1})),c&&(c.extra=b(m({},c.extra),{[aue]:e})),o!==void 0&&o[Gp]!==void 0&&(c===void 0&&(c={}),c[Gp]=o[Gp]),i.run(c,t)}initializeGlobalInstance(e){Wp()===void 0&&sse(e)}},gr=new m3e;var KH={};ae(KH,{AsyncLocalStorageProviderSingleton:()=>gr,MockAsyncLocalStorage:()=>WH,_CONTEXT_VARIABLES_KEY:()=>Gp});var YP=25;function oo(e){return y(this,null,function*(){return wi._configureSync(e?.callbacks,void 0,e?.tags,void 0,e?.metadata)})}function so(...e){let t={};for(let n of e.filter(r=>!!r))for(let r of Object.keys(n))if(r==="metadata")t[r]=m(m({},t[r]),n[r]);else if(r==="tags"){let i=t[r]??[];t[r]=[...new Set(i.concat(n[r]??[]))]}else if(r==="configurable")t[r]=m(m({},t[r]),n[r]);else if(r==="timeout")t.timeout===void 0?t.timeout=n.timeout:n.timeout!==void 0&&(t.timeout=Math.min(t.timeout,n.timeout));else if(r==="signal")t.signal===void 0?t.signal=n.signal:n.signal!==void 0&&("any"in AbortSignal?t.signal=AbortSignal.any([t.signal,n.signal]):t.signal=n.signal);else if(r==="callbacks"){let i=t.callbacks,o=n.callbacks;if(Array.isArray(o))if(!i)t.callbacks=o;else if(Array.isArray(i))t.callbacks=i.concat(o);else{let s=i.copy();for(let a of o)s.addHandler(jy(a),!0);t.callbacks=s}else if(o)if(!i)t.callbacks=o;else if(Array.isArray(i)){let s=o.copy();for(let a of i)s.addHandler(jy(a),!0);t.callbacks=s}else t.callbacks=new wi(o._parentRunId,{handlers:i.handlers.concat(o.handlers),inheritableHandlers:i.inheritableHandlers.concat(o.inheritableHandlers),tags:Array.from(new Set(i.tags.concat(o.tags))),inheritableTags:Array.from(new Set(i.inheritableTags.concat(o.inheritableTags))),metadata:m(m({},i.metadata),o.metadata)})}else{let i=r;t[i]=n[i]??t[i]}return t}var f3e=new Set(["string","number","boolean"]);function wn(e){let t=gr.getRunnableConfig(),n={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(t){let r=t,{runId:i,runName:o}=r,s=se(r,["runId","runName"]);n=Object.entries(s).reduce((a,[c,u])=>(u!==void 0&&(a[c]=u),a),n)}if(e&&(n=Object.entries(e).reduce((i,[o,s])=>(s!==void 0&&(i[o]=s),i),n)),n?.configurable)for(let i of Object.keys(n.configurable))f3e.has(typeof n.configurable[i])&&!n.metadata?.[i]&&(n.metadata||(n.metadata={}),n.metadata[i]=n.configurable[i]);if(n.timeout!==void 0){if(n.timeout<=0)throw new Error("Timeout must be a positive number");let i=AbortSignal.timeout(n.timeout);n.signal!==void 0?"any"in AbortSignal&&(n.signal=AbortSignal.any([n.signal,i])):n.signal=i,delete n.timeout}return n}function kn(e={},{callbacks:t,maxConcurrency:n,recursionLimit:r,runName:i,configurable:o,runId:s}={}){let a=wn(e);return t!==void 0&&(delete a.runName,a.callbacks=t),r!==void 0&&(a.recursionLimit=r),n!==void 0&&(a.maxConcurrency=n),i!==void 0&&(a.runName=i),o!==void 0&&(a.configurable=m(m({},a.configurable),o)),s!==void 0&&delete a.runId,a}function Cs(e){if(e)return{configurable:e.configurable,recursionLimit:e.recursionLimit,callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,maxConcurrency:e.maxConcurrency,timeout:e.timeout,signal:e.signal,store:e.store}}function ac(e,t){return y(this,null,function*(){if(t===void 0)return e;let n;return Promise.race([e.catch(r=>{if(!t?.aborted)throw r}),new Promise((r,i)=>{n=()=>{i(Xp(t))},t.addEventListener("abort",n),t.aborted&&i(Xp(t))})]).finally(()=>t.removeEventListener("abort",n))})}function Xp(e){return e?.reason instanceof Error?e.reason:typeof e?.reason=="string"?new Error(e.reason):new Error("Aborted")}var YH={};ae(YH,{AsyncGeneratorWithSetup:()=>em,IterableReadableStream:()=>Ni,atee:()=>QP,concat:()=>xa,pipeGeneratorWithSetup:()=>QH});var Ni=class JH extends ReadableStream{reader;ensureReader(){this.reader||(this.reader=this.getReader())}next(){return y(this,null,function*(){this.ensureReader();try{let t=yield this.reader.read();return t.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:t.value}}catch(t){throw this.reader.releaseLock(),t}})}return(){return y(this,null,function*(){if(this.ensureReader(),this.locked){let t=this.reader.cancel();this.reader.releaseLock(),yield t}return{done:!0,value:void 0}})}throw(t){return y(this,null,function*(){if(this.ensureReader(),this.locked){let n=this.reader.cancel();this.reader.releaseLock(),yield n}throw t})}[Symbol.asyncIterator](){return this}[Symbol.asyncDispose](){return y(this,null,function*(){yield this.return()})}static fromReadableStream(t){let n=t.getReader();return new JH({start(r){return i();function i(){return n.read().then(({done:o,value:s})=>{if(o){r.close();return}return r.enqueue(s),i()})}},cancel(){n.releaseLock()}})}static fromAsyncGenerator(t){return new JH({pull(r){return y(this,null,function*(){let{value:i,done:o}=yield t.next();o&&r.close(),r.enqueue(i)})},cancel(r){return y(this,null,function*(){yield t.return(r)})}})}};function QP(e,t=2){let n=Array.from({length:t},()=>[]);return n.map(function(i){return he(this,null,function*(){for(;;)if(i.length===0){let o=yield new z(e.next());for(let s of n)s.push(o)}else{if(i[0].done)return;yield i.shift().value}})})}function xa(e,t){if(Array.isArray(e)&&Array.isArray(t))return e.concat(t);if(typeof e=="string"&&typeof t=="string")return e+t;if(typeof e=="number"&&typeof t=="number")return e+t;if("concat"in e&&typeof e.concat=="function")return e.concat(t);if(typeof e=="object"&&typeof t=="object"){let n=m({},e);for(let[r,i]of Object.entries(t))r in n&&!Array.isArray(n[r])?n[r]=xa(n[r],i):n[r]=i;return n}else throw new Error(`Cannot concat ${typeof e} and ${typeof t}`)}var em=class{generator;setup;config;signal;firstResult;firstResultUsed=!1;constructor(e){this.generator=e.generator,this.config=e.config,this.signal=e.signal??this.config?.signal,this.setup=new Promise((t,n)=>{gr.runWithConfig(Cs(e.config),()=>y(this,null,function*(){this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(t,n):this.firstResult.then(r=>t(void 0),n)}),!0)})}next(...e){return y(this,null,function*(){return this.signal?.throwIfAborted(),this.firstResultUsed?gr.runWithConfig(Cs(this.config),this.signal?()=>y(this,null,function*(){return ac(this.generator.next(...e),this.signal)}):()=>y(this,null,function*(){return this.generator.next(...e)}),!0):(this.firstResultUsed=!0,this.firstResult)})}return(e){return y(this,null,function*(){return this.generator.return(e)})}throw(e){return y(this,null,function*(){return this.generator.throw(e)})}[Symbol.asyncIterator](){return this}[Symbol.asyncDispose](){return y(this,null,function*(){yield this.return()})}};function QH(e,t,n,r,...i){return y(this,null,function*(){let o=new em({generator:t,startSetup:n,signal:r}),s=yield o.setup;return{output:e(o,s,...i),setup:s}})}var h3e=Object.prototype.hasOwnProperty;function eR(e,t){return h3e.call(e,t)}function tR(e){if(Array.isArray(e)){let n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=""+r;return n}if(Object.keys)return Object.keys(e);let t=[];for(let n in e)eR(e,n)&&t.push(n);return t}function Es(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function nR(e){let t=0,n=e.length,r;for(;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function vd(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function rR(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function XP(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(XP(e[n]))return!0}else if(typeof e=="object"){let n=tR(e),r=n.length;for(var t=0;t<r;t++)if(XP(e[n[t]]))return!0}}return!1}function cue(e,t){let n=[e];for(let r in t){let i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(`${r}: ${i}`)}return n.join(`
`)}var iR=class extends Error{constructor(e,t,n,r,i){super(cue(e,{name:t,index:n,operation:r,tree:i})),this.name=t,this.index=n,this.operation=r,this.tree=i,Object.setPrototypeOf(this,new.target.prototype),this.message=cue(e,{name:t,index:n,operation:r,tree:i})}};var XH={};ae(XH,{JsonPatchError:()=>di,_areEquals:()=>RC,applyOperation:()=>ih,applyPatch:()=>tm,applyReducer:()=>y3e,deepClone:()=>g3e,getValueByPointer:()=>oR,validate:()=>lue,validator:()=>sR});var di=iR,g3e=Es,zy={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){let r=oR(n,this.path);r&&(r=Es(r));let i=ih(n,{op:"remove",path:this.from}).removed;return ih(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){let r=oR(n,this.from);return ih(n,{op:"add",path:this.path,value:Es(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:RC(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},_3e={add:function(e,t,n){return nR(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:zy.move,copy:zy.copy,test:zy.test,_get:zy._get};function oR(e,t){if(t=="")return e;var n={op:"_get",path:t};return ih(e,n),n.value}function ih(e,t,n=!1,r=!0,i=!0,o=0){if(n&&(typeof n=="function"?n(t,0,e,t.path):sR(t,0)),t.path===""){let s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=oR(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=RC(e,t.value),s.test===!1)throw new di("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new di("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}}else{r||(e=Es(e));let a=(t.path||"").split("/"),c=e,u=1,d=a.length,f,g,h;for(typeof n=="function"?h=n:h=sR;;){if(g=a[u],g&&g.indexOf("~")!=-1&&(g=rR(g)),i&&(g=="__proto__"||g=="prototype"&&u>0&&a[u-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&f===void 0&&(c[g]===void 0?f=a.slice(0,u).join("/"):u==d-1&&(f=t.path),f!==void 0&&h(t,0,e,f)),u++,Array.isArray(c)){if(g==="-")g=c.length;else{if(n&&!nR(g))throw new di("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);nR(g)&&(g=~~g)}if(u>=d){if(n&&t.op==="add"&&g>c.length)throw new di("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);let v=_3e[t.op].call(t,c,g,e);if(v.test===!1)throw new di("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return v}}else if(u>=d){let v=zy[t.op].call(t,c,g,e);if(v.test===!1)throw new di("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return v}if(c=c[g],n&&u<d&&(!c||typeof c!="object"))throw new di("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function tm(e,t,n,r=!0,i=!0){if(n&&!Array.isArray(t))throw new di("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Es(e));let o=new Array(t.length);for(let s=0,a=t.length;s<a;s++)o[s]=ih(e,t[s],n,!0,i,s),e=o[s].newDocument;return o.newDocument=e,o}function y3e(e,t,n){let r=ih(e,t);if(r.test===!1)throw new di("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function sR(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new di("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(zy[e.op]){if(typeof e.path!="string")throw new di("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new di('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new di("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new di("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&XP(e.value))throw new di("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new di("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new di("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},a=lue([s],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new di("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new di("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function lue(e,t,n){try{if(!Array.isArray(e))throw new di("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)tm(Es(t),Es(e),n||!0);else{n=n||sR;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof di)return i;throw i}}function RC(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,s;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!RC(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(o=a.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=o;i--!==0;)if(s=a[i],!RC(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}function uue(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=tR(t),s=tR(e),a=!1,c=!1,u=s.length-1;u>=0;u--){var d=s[u],f=e[d];if(eR(t,d)&&!(t[d]===void 0&&f!==void 0&&Array.isArray(t)===!1)){var g=t[d];typeof f=="object"&&f!=null&&typeof g=="object"&&g!=null&&Array.isArray(f)===Array.isArray(g)?uue(f,g,n,r+"/"+vd(d),i):f!==g&&(a=!0,i&&n.push({op:"test",path:r+"/"+vd(d),value:Es(f)}),n.push({op:"replace",path:r+"/"+vd(d),value:Es(g)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+vd(d),value:Es(f)}),n.push({op:"remove",path:r+"/"+vd(d)}),c=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}),a=!0)}if(!(!c&&o.length==s.length))for(var u=0;u<o.length;u++){var d=o[u];!eR(e,d)&&t[d]!==void 0&&n.push({op:"add",path:r+"/"+vd(d),value:Es(t[d])})}}}function nm(e,t,n=!1){var r=[];return uue(e,t,r,"",n),r}var qAt=b(m({},XH),{JsonPatchError:iR,deepClone:Es,escapePathComponent:vd,unescapePathComponent:rR});var t5={};ae(t5,{LogStreamCallbackHandler:()=>cR,RunLog:()=>aR,RunLogPatch:()=>Kl,isLogStreamHandler:()=>n5});var Kl=class{ops;constructor(e){this.ops=e.ops??[]}concat(e){let t=this.ops.concat(e.ops),n=tm({},t);return new aR({ops:t,state:n[n.length-1].newDocument})}},aR=class e5 extends Kl{state;constructor(t){super(t),this.state=t.state}concat(t){let n=this.ops.concat(t.ops),r=tm(this.state,t.ops);return new e5({ops:n,state:r[r.length-1].newDocument})}static fromRunLogPatch(t){let n=tm({},t.ops);return new e5({ops:t.ops,state:n[n.length-1].newDocument})}},n5=e=>e.name==="log_stream_tracer";function due(e,t){return y(this,null,function*(){if(t==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");let{inputs:n}=e;if(["retriever","llm","prompt"].includes(e.run_type))return n;if(!(Object.keys(n).length===1&&n?.input===""))return n.input})}function pue(e,t){return y(this,null,function*(){let{outputs:n}=e;return t==="original"||["retriever","llm","prompt"].includes(e.run_type)?n:n!==void 0&&Object.keys(n).length===1&&n?.output!==void 0?n.output:n})}function v3e(e){return e!==void 0&&e.message!==void 0}var cR=class extends ko{autoClose=!0;includeNames;includeTypes;includeTags;excludeNames;excludeTypes;excludeTags;_schemaFormat="original";rootId;keyMapByRunId={};counterMapByRunName={};transformStream;writer;receiveStream;name="log_stream_tracer";lc_prefer_streaming=!0;constructor(e){super(m({_awaitHandler:!0},e)),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this._schemaFormat=e?._schemaFormat??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Ni.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}persistRun(e){return y(this,null,function*(){})}_includeRun(e){if(e.id===this.rootId)return!1;let t=e.tags??[],n=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(n=n||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(n=n||t.find(r=>this.includeTags?.includes(r))!==void 0),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(n=n&&t.every(r=>!this.excludeTags?.includes(r))),n}tapOutputIterable(e,t){return he(this,null,function*(){try{for(var n=ue(t),r,i,o;r=!(i=yield new z(n.next())).done;r=!1){let s=i.value;if(e!==this.rootId){let a=this.keyMapByRunId[e];a&&(yield new z(this.writer.write(new Kl({ops:[{op:"add",path:`/logs/${a}/streamed_output/-`,value:s}]}))))}yield s}}catch{o=[i]}finally{try{r&&(i=n.return)&&(yield new z(i.call(n)))}finally{if(o)throw o[0]}}})}onRunCreate(e){return y(this,null,function*(){if(this.rootId===void 0&&(this.rootId=e.id,yield this.writer.write(new Kl({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;let t=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=t===1?e.name:`${e.name}:${t}`;let n={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:e.extra?.metadata??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(n.inputs=yield due(e,this._schemaFormat)),yield this.writer.write(new Kl({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:n}]}))})}onRunUpdate(e){return y(this,null,function*(){try{let t=this.keyMapByRunId[e.id];if(t===void 0)return;let n=[];this._schemaFormat==="streaming_events"&&n.push({op:"replace",path:`/logs/${t}/inputs`,value:yield due(e,this._schemaFormat)}),n.push({op:"add",path:`/logs/${t}/final_output`,value:yield pue(e,this._schemaFormat)}),e.end_time!==void 0&&n.push({op:"add",path:`/logs/${t}/end_time`,value:new Date(e.end_time).toISOString()});let r=new Kl({ops:n});yield this.writer.write(r)}finally{if(e.id===this.rootId){let t=new Kl({ops:[{op:"replace",path:"/final_output",value:yield pue(e,this._schemaFormat)}]});yield this.writer.write(t),this.autoClose&&(yield this.writer.close())}}})}onLLMNewToken(e,t,n){return y(this,null,function*(){let r=this.keyMapByRunId[e.id];if(r===void 0)return;let i=e.inputs.messages!==void 0,o;i?v3e(n?.chunk)?o=n?.chunk:o=new Cr({id:`run-${e.id}`,content:t}):o=t;let s=new Kl({ops:[{op:"add",path:`/logs/${r}/streamed_output_str/-`,value:t},{op:"add",path:`/logs/${r}/streamed_output/-`,value:o}]});yield this.writer.write(s)})}};var r5={};ae(r5,{ChatGenerationChunk:()=>Ca,GenerationChunk:()=>Jl,RUN_KEY:()=>oh});var oh="__run",Jl=class mue{text;generationInfo;constructor(t){this.text=t.text,this.generationInfo=t.generationInfo}concat(t){return new mue({text:this.text+t.text,generationInfo:m(m({},this.generationInfo),t.generationInfo)})}},Ca=class fue extends Jl{message;constructor(t){super(t),this.message=t.message}concat(t){return new fue({text:this.text+t.text,generationInfo:m(m({},this.generationInfo),t.generationInfo),message:this.message.concat(t.message)})}};function lR({name:e,serialized:t}){return e!==void 0?e:t?.name!==void 0?t.name:t?.id!==void 0&&Array.isArray(t?.id)?t.id[t.id.length-1]:"Unnamed"}var hue=e=>e.name==="event_stream_tracer",gue=class extends ko{autoClose=!0;includeNames;includeTypes;includeTags;excludeNames;excludeTypes;excludeTags;runInfoMap=new Map;tappedPromises=new Map;transformStream;writer;receiveStream;name="event_stream_tracer";lc_prefer_streaming=!0;constructor(e){super(m({_awaitHandler:!0},e)),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Ni.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}persistRun(e){return y(this,null,function*(){})}_includeRun(e){let t=e.tags??[],n=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(n=n||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(n=n||t.find(r=>this.includeTags?.includes(r))!==void 0),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(n=n&&t.every(r=>!this.excludeTags?.includes(r))),n}tapOutputIterable(e,t){return he(this,null,function*(){let n=yield new z(t.next());if(n.done)return;let r=this.runInfoMap.get(e);if(r===void 0){yield n.value;return}function i(v,x){return v==="llm"&&typeof x=="string"?new Jl({text:x}):x}let o=this.tappedPromises.get(e);if(o===void 0){let v;o=new Promise(x=>{v=x}),this.tappedPromises.set(e,o);try{let x={event:`on_${r.runType}_stream`,run_id:e,name:r.name,tags:r.tags,metadata:r.metadata,data:{}};yield new z(this.send(b(m({},x),{data:{chunk:i(r.runType,n.value)}}),r)),yield n.value;try{for(var s=ue(t),a,c,u;a=!(c=yield new z(s.next())).done;a=!1){let E=c.value;r.runType!=="tool"&&r.runType!=="retriever"&&(yield new z(this.send(b(m({},x),{data:{chunk:i(r.runType,E)}}),r))),yield E}}catch{u=[c]}finally{try{a&&(c=s.return)&&(yield new z(c.call(s)))}finally{if(u)throw u[0]}}}finally{v?.()}}else{yield n.value;try{for(var d=ue(t),f,g,h;f=!(g=yield new z(d.next())).done;f=!1){let v=g.value;yield v}}catch{h=[g]}finally{try{f&&(g=d.return)&&(yield new z(g.call(d)))}finally{if(h)throw h[0]}}}})}send(e,t){return y(this,null,function*(){this._includeRun(t)&&(yield this.writer.write(e))})}sendEndEvent(e,t){return y(this,null,function*(){let n=this.tappedPromises.get(e.run_id);n!==void 0?n.then(()=>{this.send(e,t)}):yield this.send(e,t)})}onLLMStart(e){return y(this,null,function*(){let t=lR(e),n=e.inputs.messages!==void 0?"chat_model":"llm",r={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:n,inputs:e.inputs};this.runInfoMap.set(e.id,r);let i=`on_${n}_start`;yield this.send({event:i,data:{input:e.inputs},name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},r)})}onLLMNewToken(e,t,n){return y(this,null,function*(){let r=this.runInfoMap.get(e.id),i,o;if(r===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(r.runType==="chat_model")o="on_chat_model_stream",n?.chunk===void 0?i=new Cr({content:t,id:`run-${e.id}`}):i=n.chunk.message;else if(r.runType==="llm")o="on_llm_stream",n?.chunk===void 0?i=new Jl({text:t}):i=n.chunk;else throw new Error(`Unexpected run type ${r.runType}`);yield this.send({event:o,data:{chunk:i},run_id:e.id,name:r.name,tags:r.tags,metadata:r.metadata},r)}})}onLLMEnd(e){return y(this,null,function*(){let t=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let n;if(t===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);let r=e.outputs?.generations,i;if(t.runType==="chat_model"){for(let o of r??[]){if(i!==void 0)break;i=o[0]?.message}n="on_chat_model_end"}else if(t.runType==="llm")i={generations:r?.map(o=>o.map(s=>({text:s.text,generationInfo:s.generationInfo}))),llmOutput:e.outputs?.llmOutput??{}},n="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${t.runType}`);yield this.sendEndEvent({event:n,data:{output:i,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)})}onChainStart(e){return y(this,null,function*(){let t=lR(e),n=e.run_type??"chain",r={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:e.run_type},i={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(i={},r.inputs={}):e.inputs.input!==void 0?(i.input=e.inputs.input,r.inputs=e.inputs.input):(i.input=e.inputs,r.inputs=e.inputs),this.runInfoMap.set(e.id,r),yield this.send({event:`on_${n}_start`,data:i,name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},r)})}onChainEnd(e){return y(this,null,function*(){let t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),t===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);let n=`on_${e.run_type}_end`,r=e.inputs??t.inputs??{},o={output:e.outputs?.output??e.outputs,input:r};r.input&&Object.keys(r).length===1&&(o.input=r.input,t.inputs=r.input),yield this.sendEndEvent({event:n,data:o,run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata??{}},t)})}onToolStart(e){return y(this,null,function*(){let t=lR(e),n={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,n),yield this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:t,run_id:e.id,tags:e.tags??[],metadata:e.extra?.metadata??{}},n)})}onToolEnd(e){return y(this,null,function*(){let t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),t===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(t.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);let n=e.outputs?.output===void 0?e.outputs:e.outputs.output;yield this.sendEndEvent({event:"on_tool_end",data:{output:n,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)})}onRetrieverStart(e){return y(this,null,function*(){let t=lR(e),r={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,r),yield this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},r)})}onRetrieverEnd(e){return y(this,null,function*(){let t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),t===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);yield this.sendEndEvent({event:"on_retriever_end",data:{output:e.outputs?.documents??e.outputs,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)})}handleCustomEvent(e,t,n){return y(this,null,function*(){let r=this.runInfoMap.get(n);if(r===void 0)throw new Error(`handleCustomEvent: Run ID ${n} not found in run map.`);yield this.send({event:"on_custom_event",run_id:n,name:e,tags:r.tags,metadata:r.metadata,data:t},r)})}finish(){return y(this,null,function*(){let e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})})}};var b3e=Object.prototype.toString,w3e=e=>b3e.call(e)==="[object Error]",x3e=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function i5(e){if(!(e&&w3e(e)&&e.name==="TypeError"&&typeof e.message=="string"))return!1;let{message:n,stack:r}=e;return n==="Load failed"?r===void 0||"__sentry_captured__"in e:n.startsWith("error sending request for url")?!0:x3e.has(n)}function C3e(e){if(typeof e=="number"){if(e<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(e))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(e!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function uR(e,t,{min:n=0,allowInfinity:r=!1}={}){if(t!==void 0){if(typeof t!="number"||Number.isNaN(t))throw new TypeError(`Expected \`${e}\` to be a number${r?" or Infinity":""}.`);if(!r&&!Number.isFinite(t))throw new TypeError(`Expected \`${e}\` to be a finite number.`);if(t<n)throw new TypeError(`Expected \`${e}\` to be \u2265 ${n}.`)}}var o5=class extends Error{constructor(t){super(),t instanceof Error?(this.originalError=t,{message:t}=t):(this.originalError=new Error(t),this.originalError.stack=this.stack),this.name="AbortError",this.message=t}};function E3e(e,t){let n=Math.max(1,e+1),r=t.randomize?Math.random()+1:1,i=Math.round(r*t.minTimeout*t.factor**(n-1));return i=Math.min(i,t.maxTimeout),i}function _ue(e,t){return Number.isFinite(t)?t-(performance.now()-e):t}function I3e(o){return y(this,arguments,function*({error:e,attemptNumber:t,retriesConsumed:n,startTime:r,options:i}){let s=e instanceof Error?e:new TypeError(`Non-error was thrown: "${e}". You should only throw errors.`);if(s instanceof o5)throw s.originalError;let a=Number.isFinite(i.retries)?Math.max(0,i.retries-n):i.retries,c=i.maxRetryTime??Number.POSITIVE_INFINITY,u=Object.freeze({error:s,attemptNumber:t,retriesLeft:a,retriesConsumed:n});if(yield i.onFailedAttempt(u),_ue(r,c)<=0)throw s;let d=yield i.shouldConsumeRetry(u),f=_ue(r,c);if(f<=0||a<=0)throw s;if(s instanceof TypeError&&!i5(s)){if(d)throw s;return i.signal?.throwIfAborted(),!1}if(!(yield i.shouldRetry(u)))throw s;if(!d)return i.signal?.throwIfAborted(),!1;let g=E3e(n,i),h=Math.min(g,f);return h>0&&(yield new Promise((v,x)=>{let E=()=>{clearTimeout(C),i.signal?.removeEventListener("abort",E),x(i.signal.reason)},C=setTimeout(()=>{i.signal?.removeEventListener("abort",E),v()},h);i.unref&&C.unref?.(),i.signal?.addEventListener("abort",E,{once:!0})})),i.signal?.throwIfAborted(),!0})}function By(n){return y(this,arguments,function*(e,t={}){if(t=m({},t),C3e(t.retries),Object.hasOwn(t,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");t.retries??=10,t.factor??=2,t.minTimeout??=1e3,t.maxTimeout??=Number.POSITIVE_INFINITY,t.maxRetryTime??=Number.POSITIVE_INFINITY,t.randomize??=!1,t.onFailedAttempt??=()=>{},t.shouldRetry??=()=>!0,t.shouldConsumeRetry??=()=>!0,uR("factor",t.factor,{min:0,allowInfinity:!1}),uR("minTimeout",t.minTimeout,{min:0,allowInfinity:!1}),uR("maxTimeout",t.maxTimeout,{min:0,allowInfinity:!0}),uR("maxRetryTime",t.maxRetryTime,{min:0,allowInfinity:!0}),t.factor>0||(t.factor=1),t.signal?.throwIfAborted();let r=0,i=0,o=performance.now();for(;!Number.isFinite(t.retries)||i<=t.retries;){r++;try{t.signal?.throwIfAborted();let s=yield e(r);return t.signal?.throwIfAborted(),s}catch(s){(yield I3e({error:s,attemptNumber:r,retriesConsumed:i,startTime:o,options:t}))&&i++}}throw new Error("Retry attempts exhausted without throwing an error.")})}var dR=_c(kP(),1),s5={};ae(s5,{AsyncCaller:()=>bd});var S3e=[400,401,402,403,404,405,406,407,409],k3e=e=>{if(e.message.startsWith("Cancel")||e.message.startsWith("AbortError")||e.name==="AbortError"||e?.code==="ECONNABORTED")throw e;let t=e?.response?.status??e?.status;if(t&&S3e.includes(+t))throw e;if(e?.error?.code==="insufficient_quota"){let n=new Error(e?.message);throw n.name="InsufficientQuotaError",n}},bd=class{maxConcurrency;maxRetries;onFailedAttempt;queue;constructor(e){this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??k3e;let t="default"in dR.default?dR.default.default:dR.default;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add(()=>By(()=>e(...t).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt:({error:n})=>this.onFailedAttempt?.(n),retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...n){if(e.signal){let r;return Promise.race([this.call(t,...n),new Promise((i,o)=>{r=()=>{o(Xp(e.signal))},e.signal?.addEventListener("abort",r)})]).finally(()=>{e.signal&&r&&e.signal.removeEventListener("abort",r)})}return this.call(t,...n)}fetch(...e){return this.call(()=>fetch(...e).then(t=>t.ok?t:Promise.reject(t)))}};var a5=class extends ko{name="RootListenersTracer";rootId;config;argOnStart;argOnEnd;argOnError;constructor({config:e,onStart:t,onEnd:n,onError:r}){super({_awaitHandler:!0}),this.config=e,this.argOnStart=t,this.argOnEnd=n,this.argOnError=r}persistRun(e){return Promise.resolve()}onRunCreate(e){return y(this,null,function*(){this.rootId||(this.rootId=e.id,this.argOnStart&&(yield this.argOnStart(e,this.config)))})}onRunUpdate(e){return y(this,null,function*(){e.id===this.rootId&&(e.error?this.argOnError&&(yield this.argOnError(e,this.config)):this.argOnEnd&&(yield this.argOnEnd(e,this.config)))})}};function NC(e){return e?e.lc_runnable:!1}var yue=class{includeNames;includeTypes;includeTags;excludeNames;excludeTypes;excludeTags;constructor(e){this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,t){let n=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0,r=e.tags??[];return this.includeNames!==void 0&&(n=n||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(t)),this.includeTags!==void 0&&(n=n||r.some(i=>this.includeTags?.includes(i))),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(t)),this.excludeTags!==void 0&&(n=n&&r.every(i=>!this.excludeTags?.includes(i))),n}};function Ur(e){if(typeof e!="object"||e===null)return!1;let t=e;if(!("_zod"in t))return!1;let n=t._zod;return typeof n=="object"&&n!==null&&"def"in n}function Vr(e){if(typeof e!="object"||e===null)return!1;let t=e;if(!("_def"in t)||"_zod"in t)return!1;let n=t._def;return typeof n=="object"&&n!=null&&"typeName"in n}function vue(e){return Ur(e)&&console.warn("[WARNING] Attempting to use Zod 4 schema in a context where Zod 3 schema is expected. This may cause unexpected behavior."),Vr(e)}function Is(e){return!e||typeof e!="object"||Array.isArray(e)?!1:!!(Ur(e)||Vr(e))}function c5(e){return typeof e=="object"&&e!==null&&"_def"in e&&typeof e._def=="object"&&e._def!==null&&"typeName"in e._def&&e._def.typeName==="ZodLiteral"}function l5(e){return Ur(e)?typeof e=="object"&&e!==null&&"_zod"in e&&typeof e._zod=="object"&&e._zod!==null&&"def"in e._zod&&typeof e._zod.def=="object"&&e._zod.def!==null&&"type"in e._zod.def&&e._zod.def.type==="literal":!1}function bue(e){return!!(c5(e)||l5(e))}function mR(e,t){return y(this,null,function*(){if(Ur(e))try{return{success:!0,data:yield ed(e,t)}}catch(n){return{success:!1,error:n}}if(Vr(e))return yield e.safeParseAsync(t);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")})}function rm(e,t){return y(this,null,function*(){if(Ur(e))return yield ed(e,t);if(Vr(e))return yield e.parseAsync(t);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")})}function wue(e,t){if(Ur(e))try{return{success:!0,data:Wa(e,t)}}catch(n){return{success:!1,error:n}}if(Vr(e))return e.safeParse(t);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function Vy(e,t){if(Ur(e))return Wa(e,t);if(Vr(e))return e.parse(t);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function Bc(e){if(Ur(e))return Xn.get(e)?.description;if(Vr(e)||"description"in e&&typeof e.description=="string")return e.description}function xue(e){if(!Is(e))return!1;if(Vr(e)){let t=e._def;if(t.typeName==="ZodObject"){let n=e;return!n.shape||Object.keys(n.shape).length===0}if(t.typeName==="ZodRecord")return!0}if(Ur(e)){let t=e._zod.def;if(t.type==="object"){let n=e;return!n.shape||Object.keys(n.shape).length===0}if(t.type==="record")return!0}return typeof e=="object"&&e!==null&&!("shape"in e)}function Hy(e){return Is(e)?Vr(e)?e._def.typeName==="ZodString":Ur(e)?e._zod.def.type==="string":!1:!1}function fR(e){return typeof e=="object"&&e!==null&&"_def"in e&&typeof e._def=="object"&&e._def!==null&&"typeName"in e._def&&e._def.typeName==="ZodObject"}function cc(e){return Ur(e)?typeof e=="object"&&e!==null&&"_zod"in e&&typeof e._zod=="object"&&e._zod!==null&&"def"in e._zod&&typeof e._zod.def=="object"&&e._zod.def!==null&&"type"in e._zod.def&&e._zod.def.type==="object":!1}function LC(e){return Ur(e)?typeof e=="object"&&e!==null&&"_zod"in e&&typeof e._zod=="object"&&e._zod!==null&&"def"in e._zod&&typeof e._zod.def=="object"&&e._zod.def!==null&&"type"in e._zod.def&&e._zod.def.type==="array":!1}function Ea(e){return!!(fR(e)||cc(e))}function sh(e){if(Vr(e))return e.shape;if(Ur(e))return e._zod.def.shape;throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function hR(e,t){if(Vr(e))return e.extend(t);if(Ur(e))return me.extend(e,t);throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function Zy(e){if(Vr(e))return e.partial();if(Ur(e))return me.partial(Df,e,void 0);throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function Uy(e,t=!1){if(Vr(e))return e.strict();if(cc(e)){let n=e._zod.def.shape;if(t)for(let[o,s]of Object.entries(e._zod.def.shape)){if(cc(s)){let c=Uy(s,t);n[o]=c}else if(LC(s)){let c=s._zod.def.element;cc(c)&&(c=Uy(c,t)),n[o]=$r(s,b(m({},s._zod.def),{element:c}))}else n[o]=s;let a=Xn.get(s);a&&Xn.add(n[o],a)}let r=$r(e,b(m({},e._zod.def),{shape:n,catchall:G_(z_)})),i=Xn.get(e);return i&&Xn.add(r,i),r}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function pR(e,t=!1){if(fR(e))return e.passthrough();if(cc(e)){let n=e._zod.def.shape;if(t)for(let[o,s]of Object.entries(e._zod.def.shape)){if(cc(s)){let c=pR(s,t);n[o]=c}else if(LC(s)){let c=s._zod.def.element;cc(c)&&(c=pR(c,t)),n[o]=$r(s,b(m({},s._zod.def),{element:c}))}else n[o]=s;let a=Xn.get(s);a&&Xn.add(n[o],a)}let r=$r(e,b(m({},e._zod.def),{shape:n,catchall:q_(j_)})),i=Xn.get(e);return i&&Xn.add(r,i),r}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function u5(e){if(Vr(e))try{let t=e.parse(void 0);return()=>t}catch{return}if(Ur(e))try{let t=Wa(e,void 0);return()=>t}catch{return}}function T3e(e){return Vr(e)&&"typeName"in e._def&&e._def.typeName==="ZodEffects"}function A3e(e){return Ur(e)&&e._zod.def.type==="pipe"}function $C(e,t,n){let r=n.get(e);if(r!==void 0)return r;if(Vr(e))return T3e(e)?$C(e._def.schema,t,n):e;if(Ur(e)){let i=e;if(A3e(e)&&(i=$C(e._zod.def.in,t,n)),t){if(cc(i)){let s=i._zod.def.shape;for(let[a,c]of Object.entries(i._zod.def.shape))s[a]=$C(c,t,n);i=$r(i,b(m({},i._zod.def),{shape:s}))}else if(LC(i)){let s=$C(i._zod.def.element,t,n);i=$r(i,b(m({},i._zod.def),{element:s}))}}let o=Xn.get(e);return o&&Xn.add(i,o),n.set(e,i),i}throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function gR(e,t=!1){return $C(e,t,new WeakMap)}function Cue(e,t){if(Vr(e)){let n=sh(e),r={};for(let[i,o]of Object.entries(n))t(i,o)?r[i]=o.optional():r[i]=o;return e.extend(r)}if(Ur(e)){let n=sh(e),r=m({},e._zod.def.shape);for(let[s,a]of Object.entries(n))t(s,a)&&(r[s]=new Df({type:"optional",innerType:a}));let i=$r(e,b(m({},e._zod.def),{shape:r})),o=Xn.get(e);return o&&Xn.add(i,o),i}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function _R(e){return e instanceof Error&&(e.constructor.name==="ZodError"||e.constructor.name==="$ZodError")}function d5(e){return e.replace(/[^a-zA-Z-_0-9]/g,"_")}var O3e=["*","_","`"];function M3e(e){let t="";for(let[n,r]of Object.entries(e))t+=`	classDef ${n} ${r};
`;return t}function Eue(e,t,n){let{firstNode:r,lastNode:i,nodeColors:o,withStyles:s=!0,curveStyle:a="linear",wrapLabelNWords:c=9}=n??{},u=s?`%%{init: {'flowchart': {'curve': '${a}'}}}%%
graph TD;
`:`graph TD;
`;if(s){let h="default",v={[h]:"{0}({1})"};r!==void 0&&(v[r]="{0}([{1}]):::first"),i!==void 0&&(v[i]="{0}([{1}]):::last");for(let[x,E]of Object.entries(e)){let C=E.name.split(":").pop()??"",A=O3e.some(F=>C.startsWith(F)&&C.endsWith(F))?`<p>${C}</p>`:C;Object.keys(E.metadata??{}).length&&(A+=`<hr/><small><em>${Object.entries(E.metadata??{}).map(([F,B])=>`${F} = ${B}`).join(`
`)}</em></small>`);let P=(v[x]??v[h]).replace("{0}",d5(x)).replace("{1}",A);u+=`	${P}
`}}let d={};for(let h of t){let v=h.source.split(":"),x=h.target.split(":"),E=v.filter((C,S)=>C===x[S]).join(":");d[E]||(d[E]=[]),d[E].push(h)}let f=new Set;function g(h,v){let x=h.length===1&&h[0].source===h[0].target;if(v&&!x){let E=v.split(":").pop();if(f.has(E))throw new Error(`Found duplicate subgraph '${E}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);f.add(E),u+=`	subgraph ${E}
`}for(let E of h){let{source:C,target:S,data:A,conditional:P}=E,F="";if(A!==void 0){let B=A,ee=B.split(" ");ee.length>c&&(B=Array.from({length:Math.ceil(ee.length/c)},(D,pe)=>ee.slice(pe*c,(pe+1)*c).join(" ")).join("&nbsp;<br>&nbsp;")),F=P?` -. &nbsp;${B}&nbsp; .-> `:` -- &nbsp;${B}&nbsp; --> `}else F=P?" -.-> ":" --> ";u+=`	${d5(C)}${F}${d5(S)};
`}for(let E in d)E.startsWith(`${v}:`)&&E!==v&&g(d[E],E);v&&!x&&(u+=`	end
`)}g(d[""]??[],"");for(let h in d)!h.includes(":")&&h!==""&&g(d[h],h);return s&&(u+=M3e(o??{})),u}function Iue(e,t){return y(this,null,function*(){let n=t?.backgroundColor??"white",r=t?.imageType??"png",i=btoa(e);n!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(n)||(n=`!${n}`));let o=`https://mermaid.ink/img/${i}?bgColor=${n}&type=${r}`,s=yield fetch(o);if(!s.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${s.status}`,`Status text: ${s.statusText}`].join(`
`));return yield s.blob()})}var kue=Symbol("Let zodToJsonSchema decide on which parser to use"),Sue={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},Tue=e=>typeof e=="string"?b(m({},Sue),{name:e}):m(m({},Sue),e);var Aue=e=>{let t=Tue(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return b(m({},t),{flags:{hasReferencedOpenAiAnyType:!1},currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,i])=>[i._def,{def:i._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))})};var yR=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")};function Jr(e){if(e.target!=="openAi")return{};let t=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:e.$refStrategy==="relative"?yR(t,e.currentPath):t.join("/")}}function p5(e,t,n,r){r?.errorMessages&&n&&(e.errorMessage=b(m({},e.errorMessage),{[t]:n}))}function Nn(e,t,n,r,i){e[t]=n,p5(e,t,r,i)}function Oue(e,t){let n={type:"array"};return e.type?._def&&e.type?._def?.typeName!==Y.ZodAny&&(n.items=Lt(e.type._def,b(m({},t),{currentPath:[...t.currentPath,"items"]}))),e.minLength&&Nn(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&Nn(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(Nn(n,"minItems",e.exactLength.value,e.exactLength.message,t),Nn(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function Mue(e,t){let n={type:"integer",format:"int64"};if(!e.checks)return n;for(let r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?Nn(n,"minimum",r.value,r.message,t):Nn(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),Nn(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?Nn(n,"maximum",r.value,r.message,t):Nn(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),Nn(n,"maximum",r.value,r.message,t));break;case"multipleOf":Nn(n,"multipleOf",r.value,r.message,t);break}return n}function Due(){return{type:"boolean"}}function vR(e,t){return Lt(e.type._def,t)}var Pue=(e,t)=>Lt(e.innerType._def,t);function m5(e,t,n){let r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map(i=>m5(e,t,i))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return D3e(e,t)}}var D3e=(e,t)=>{let n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(let r of e.checks)switch(r.kind){case"min":Nn(n,"minimum",r.value,r.message,t);break;case"max":Nn(n,"maximum",r.value,r.message,t);break}return n};function Rue(e,t){return b(m({},Lt(e.innerType._def,t)),{default:e.defaultValue()})}function Nue(e,t){return t.effectStrategy==="input"?Lt(e.schema._def,t):Jr(t)}function $ue(e){return{type:"string",enum:Array.from(e.values)}}var P3e=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function Lue(e,t){let n=[Lt(e.left._def,b(m({},t),{currentPath:[...t.currentPath,"allOf","0"]})),Lt(e.right._def,b(m({},t),{currentPath:[...t.currentPath,"allOf","1"]}))].filter(o=>!!o),r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,i=[];return n.forEach(o=>{if(P3e(o))i.push(...o.allOf),o.unevaluatedProperties===void 0&&(r=void 0);else{let a=o;if("additionalProperties"in o&&o.additionalProperties===!1){let s=o,{additionalProperties:c}=s;a=se(s,["additionalProperties"])}else r=void 0;i.push(a)}}),i.length?m({allOf:i},r):void 0}function Fue(e,t){let n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}var f5,Uc={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(f5===void 0&&(f5=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),f5),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function bR(e,t){let n={type:"string"};if(e.checks)for(let r of e.checks)switch(r.kind){case"min":Nn(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":Nn(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Vc(n,"email",r.message,t);break;case"format:idn-email":Vc(n,"idn-email",r.message,t);break;case"pattern:zod":Ss(n,Uc.email,r.message,t);break}break;case"url":Vc(n,"uri",r.message,t);break;case"uuid":Vc(n,"uuid",r.message,t);break;case"regex":Ss(n,r.regex,r.message,t);break;case"cuid":Ss(n,Uc.cuid,r.message,t);break;case"cuid2":Ss(n,Uc.cuid2,r.message,t);break;case"startsWith":Ss(n,RegExp(`^${h5(r.value,t)}`),r.message,t);break;case"endsWith":Ss(n,RegExp(`${h5(r.value,t)}$`),r.message,t);break;case"datetime":Vc(n,"date-time",r.message,t);break;case"date":Vc(n,"date",r.message,t);break;case"time":Vc(n,"time",r.message,t);break;case"duration":Vc(n,"duration",r.message,t);break;case"length":Nn(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),Nn(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":Ss(n,RegExp(h5(r.value,t)),r.message,t);break;case"ip":r.version!=="v6"&&Vc(n,"ipv4",r.message,t),r.version!=="v4"&&Vc(n,"ipv6",r.message,t);break;case"base64url":Ss(n,Uc.base64url,r.message,t);break;case"jwt":Ss(n,Uc.jwt,r.message,t);break;case"cidr":r.version!=="v6"&&Ss(n,Uc.ipv4Cidr,r.message,t),r.version!=="v4"&&Ss(n,Uc.ipv6Cidr,r.message,t);break;case"emoji":Ss(n,Uc.emoji(),r.message,t);break;case"ulid":Ss(n,Uc.ulid,r.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":Vc(n,"binary",r.message,t);break;case"contentEncoding:base64":Nn(n,"contentEncoding","base64",r.message,t);break;case"pattern:zod":Ss(n,Uc.base64,r.message,t);break}break;case"nanoid":Ss(n,Uc.nanoid,r.message,t);break;case"toLowerCase":case"toUpperCase":case"trim":break;default:}return n}function h5(e,t){return t.patternStrategy==="escape"?N3e(e):e}var R3e=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function N3e(e){let t="";for(let n=0;n<e.length;n++)R3e.has(e[n])||(t+="\\"),t+=e[n];return t}function Vc(e,t,n,r){e.format||e.anyOf?.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push(m({format:e.format},e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}})),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push(m({format:t},n&&r.errorMessages&&{errorMessage:{format:n}}))):Nn(e,"format",t,n,r)}function Ss(e,t,n,r){e.pattern||e.allOf?.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push(m({pattern:e.pattern},e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}})),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push(m({pattern:jue(t,r)},n&&r.errorMessages&&{errorMessage:{pattern:n}}))):Nn(e,"pattern",jue(t,r),n,r)}function jue(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;let n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source,i="",o=!1,s=!1,a=!1;for(let c=0;c<r.length;c++){if(o){i+=r[c],o=!1;continue}if(n.i){if(s){if(r[c].match(/[a-z]/)){a?(i+=r[c],i+=`${r[c-2]}-${r[c]}`.toUpperCase(),a=!1):r[c+1]==="-"&&r[c+2]?.match(/[a-z]/)?(i+=r[c],a=!0):i+=`${r[c]}${r[c].toUpperCase()}`;continue}}else if(r[c].match(/[a-z]/)){i+=`[${r[c]}${r[c].toUpperCase()}]`;continue}}if(n.m){if(r[c]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(r[c]==="$"){i+=`($|(?=[\r
]))`;continue}}if(n.s&&r[c]==="."){i+=s?`${r[c]}\r
`:`[${r[c]}\r
]`;continue}i+=r[c],r[c]==="\\"?o=!0:s&&r[c]==="]"?s=!1:!s&&r[c]==="["&&(s=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return i}function wR(e,t){if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&e.keyType?._def.typeName===Y.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((o,s)=>b(m({},o),{[s]:Lt(e.valueType._def,b(m({},t),{currentPath:[...t.currentPath,"properties",s]}))??Jr(t)}),{}),additionalProperties:t.rejectedAdditionalProperties};let n={type:"object",additionalProperties:Lt(e.valueType._def,b(m({},t),{currentPath:[...t.currentPath,"additionalProperties"]}))??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(e.keyType?._def.typeName===Y.ZodString&&e.keyType._def.checks?.length){let r=bR(e.keyType._def,t),{type:o}=r,s=se(r,["type"]);return b(m({},n),{propertyNames:s})}else{if(e.keyType?._def.typeName===Y.ZodEnum)return b(m({},n),{propertyNames:{enum:e.keyType._def.values}});if(e.keyType?._def.typeName===Y.ZodBranded&&e.keyType._def.type._def.typeName===Y.ZodString&&e.keyType._def.type._def.checks?.length){let i=vR(e.keyType._def,t),{type:o}=i,s=se(i,["type"]);return b(m({},n),{propertyNames:s})}}return n}function zue(e,t){if(t.mapStrategy==="record")return wR(e,t);let n=Lt(e.keyType._def,b(m({},t),{currentPath:[...t.currentPath,"items","items","0"]}))||Jr(t),r=Lt(e.valueType._def,b(m({},t),{currentPath:[...t.currentPath,"items","items","1"]}))||Jr(t);return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function Bue(e){let t=e.values,r=Object.keys(e.values).filter(o=>typeof t[t[o]]!="number").map(o=>t[o]),i=Array.from(new Set(r.map(o=>typeof o)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:r}}function Uue(e){return e.target==="openAi"?void 0:{not:Jr(b(m({},e),{currentPath:[...e.currentPath,"not"]}))}}function Vue(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var FC={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Zue(e,t){if(t.target==="openApi3")return Hue(e,t);let n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in FC&&(!r._def.checks||!r._def.checks.length))){let r=n.reduce((i,o)=>{let s=FC[o._def.typeName];return s&&!i.includes(s)?[...i,s]:i},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){let r=n.reduce((i,o)=>{let s=typeof o._def.value;switch(s){case"string":case"number":case"boolean":return[...i,s];case"bigint":return[...i,"integer"];case"object":return o._def.value===null?[...i,"null"]:i;case"symbol":case"undefined":case"function":default:return i}},[]);if(r.length===n.length){let i=r.filter((o,s,a)=>a.indexOf(o)===s);return{type:i.length>1?i:i[0],enum:n.reduce((o,s)=>o.includes(s._def.value)?o:[...o,s._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,i)=>[...r,...i._def.values.filter(o=>!r.includes(o))],[])};return Hue(e,t)}var Hue=(e,t)=>{let n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,i)=>Lt(r._def,b(m({},t),{currentPath:[...t.currentPath,"anyOf",`${i}`]}))).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function que(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:FC[e.innerType._def.typeName],nullable:!0}:{type:[FC[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){let r=Lt(e.innerType._def,b(m({},t),{currentPath:[...t.currentPath]}));return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&b(m({},r),{nullable:!0})}let n=Lt(e.innerType._def,b(m({},t),{currentPath:[...t.currentPath,"anyOf","0"]}));return n&&{anyOf:[n,{type:"null"}]}}function Gue(e,t){let n={type:"number"};if(!e.checks)return n;for(let r of e.checks)switch(r.kind){case"int":n.type="integer",p5(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?Nn(n,"minimum",r.value,r.message,t):Nn(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),Nn(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?Nn(n,"maximum",r.value,r.message,t):Nn(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),Nn(n,"maximum",r.value,r.message,t));break;case"multipleOf":Nn(n,"multipleOf",r.value,r.message,t);break}return n}function Wue(e,t){let n=t.target==="openAi",r={type:"object",properties:{}},i=[],o=e.shape();for(let a in o){let c=o[a];if(c===void 0||c._def===void 0)continue;let u=L3e(c);u&&n&&(c._def.typeName==="ZodOptional"&&(c=c._def.innerType),c.isNullable()||(c=c.nullable()),u=!1);let d=Lt(c._def,b(m({},t),{currentPath:[...t.currentPath,"properties",a],propertyPath:[...t.currentPath,"properties",a]}));d!==void 0&&(r.properties[a]=d,u||i.push(a))}i.length&&(r.required=i);let s=$3e(e,t);return s!==void 0&&(r.additionalProperties=s),r}function $3e(e,t){if(e.catchall._def.typeName!=="ZodNever")return Lt(e.catchall._def,b(m({},t),{currentPath:[...t.currentPath,"additionalProperties"]}));switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function L3e(e){try{return e.isOptional()}catch{return!0}}var Kue=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return Lt(e.innerType._def,t);let n=Lt(e.innerType._def,b(m({},t),{currentPath:[...t.currentPath,"anyOf","1"]}));return n?{anyOf:[{not:Jr(t)},n]}:Jr(t)};var Jue=(e,t)=>{if(t.pipeStrategy==="input")return Lt(e.in._def,t);if(t.pipeStrategy==="output")return Lt(e.out._def,t);let n=Lt(e.in._def,b(m({},t),{currentPath:[...t.currentPath,"allOf","0"]})),r=Lt(e.out._def,b(m({},t),{currentPath:[...t.currentPath,"allOf",n?"1":"0"]}));return{allOf:[n,r].filter(i=>i!==void 0)}};function Yue(e,t){return Lt(e.type._def,t)}function Que(e,t){let r={type:"array",uniqueItems:!0,items:Lt(e.valueType._def,b(m({},t),{currentPath:[...t.currentPath,"items"]}))};return e.minSize&&Nn(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&Nn(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function Xue(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>Lt(n._def,b(m({},t),{currentPath:[...t.currentPath,"items",`${r}`]}))).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:Lt(e.rest._def,b(m({},t),{currentPath:[...t.currentPath,"additionalItems"]}))}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>Lt(n._def,b(m({},t),{currentPath:[...t.currentPath,"items",`${r}`]}))).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function ede(e){return{not:Jr(e)}}function tde(e){return Jr(e)}var nde=(e,t)=>Lt(e.innerType._def,t);var rde=(e,t,n)=>{switch(t){case Y.ZodString:return bR(e,n);case Y.ZodNumber:return Gue(e,n);case Y.ZodObject:return Wue(e,n);case Y.ZodBigInt:return Mue(e,n);case Y.ZodBoolean:return Due();case Y.ZodDate:return m5(e,n);case Y.ZodUndefined:return ede(n);case Y.ZodNull:return Vue(n);case Y.ZodArray:return Oue(e,n);case Y.ZodUnion:case Y.ZodDiscriminatedUnion:return Zue(e,n);case Y.ZodIntersection:return Lue(e,n);case Y.ZodTuple:return Xue(e,n);case Y.ZodRecord:return wR(e,n);case Y.ZodLiteral:return Fue(e,n);case Y.ZodEnum:return $ue(e);case Y.ZodNativeEnum:return Bue(e);case Y.ZodNullable:return que(e,n);case Y.ZodOptional:return Kue(e,n);case Y.ZodMap:return zue(e,n);case Y.ZodSet:return Que(e,n);case Y.ZodLazy:return()=>e.getter()._def;case Y.ZodPromise:return Yue(e,n);case Y.ZodNaN:case Y.ZodNever:return Uue(n);case Y.ZodEffects:return Nue(e,n);case Y.ZodAny:return Jr(n);case Y.ZodUnknown:return tde(n);case Y.ZodDefault:return Rue(e,n);case Y.ZodBranded:return vR(e,n);case Y.ZodReadonly:return nde(e,n);case Y.ZodCatch:return Pue(e,n);case Y.ZodPipeline:return Jue(e,n);case Y.ZodFunction:case Y.ZodVoid:case Y.ZodSymbol:return;default:return(r=>{})(t)}};function Lt(e,t,n=!1){let r=t.seen.get(e);if(t.override){let a=t.override?.(e,t,r,n);if(a!==kue)return a}if(r&&!n){let a=F3e(r,t);if(a!==void 0)return a}let i={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,i);let o=rde(e,e.typeName,t),s=typeof o=="function"?Lt(o(),t):o;if(s&&j3e(e,t,s),t.postProcess){let a=t.postProcess(s,e,t);return i.jsonSchema=s,a}return i.jsonSchema=s,s}var F3e=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:yR(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),Jr(t)):t.$refStrategy==="seen"?Jr(t):void 0}},j3e=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n);var ide=(e,t)=>{let n=Aue(t),r=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((c,[u,d])=>b(m({},c),{[u]:Lt(d._def,b(m({},n),{currentPath:[...n.basePath,n.definitionPath,u]}),!0)??Jr(n)}),{}):void 0,i=typeof t=="string"?t:t?.nameStrategy==="title"?void 0:t?.name,o=Lt(e._def,i===void 0?n:b(m({},n),{currentPath:[...n.basePath,n.definitionPath,i]}),!1)??Jr(n),s=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;s!==void 0&&(o.title=s),n.flags.hasReferencedOpenAiAnyType&&(r||(r={}),r[n.openAiAnyTypeName]||(r[n.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:n.$refStrategy==="relative"?"1":[...n.basePath,n.definitionPath,n.openAiAnyTypeName].join("/")}}));let a=i===void 0?r?b(m({},o),{[n.definitionPath]:r}):o:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:b(m({},r),{[i]:o})};return n.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in a||"oneOf"in a||"allOf"in a||"type"in a&&Array.isArray(a.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),a};function Yl(e,t){let n=typeof e;if(n!==typeof t)return!1;if(Array.isArray(e)){if(!Array.isArray(t))return!1;let r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;i++)if(!Yl(e[i],t[i]))return!1;return!0}if(n==="object"){if(!e||!t)return e===t;let r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(let s of r)if(!Yl(e[s],t[s]))return!1;return!0}return e===t}function Ia(e){return encodeURI(z3e(e))}function z3e(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var B3e={prefixItems:!0,items:!0,allOf:!0,anyOf:!0,oneOf:!0},U3e={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependentSchemas:!0},V3e={id:!0,$id:!0,$ref:!0,$schema:!0,$anchor:!0,$vocabulary:!0,$comment:!0,default:!0,enum:!0,const:!0,required:!0,type:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0},H3e=typeof self<"u"&&self.location&&self.location.origin!=="null"?new URL(self.location.origin+self.location.pathname+location.search):new URL("https://github.com/cfworker");function Hc(e,t=Object.create(null),n=H3e,r=""){if(e&&typeof e=="object"&&!Array.isArray(e)){let o=e.$id||e.id;if(o){let s=new URL(o,n.href);s.hash.length>1?t[s.href]=e:(s.hash="",r===""?n=s:Hc(e,t,n))}}else if(e!==!0&&e!==!1)return t;let i=n.href+(r?"#"+r:"");if(t[i]!==void 0)throw new Error(`Duplicate schema URI "${i}".`);if(t[i]=e,e===!0||e===!1)return t;if(e.__absolute_uri__===void 0&&Object.defineProperty(e,"__absolute_uri__",{enumerable:!1,value:i}),e.$ref&&e.__absolute_ref__===void 0){let o=new URL(e.$ref,n.href);o.hash=o.hash,Object.defineProperty(e,"__absolute_ref__",{enumerable:!1,value:o.href})}if(e.$recursiveRef&&e.__absolute_recursive_ref__===void 0){let o=new URL(e.$recursiveRef,n.href);o.hash=o.hash,Object.defineProperty(e,"__absolute_recursive_ref__",{enumerable:!1,value:o.href})}if(e.$anchor){let o=new URL("#"+e.$anchor,n.href);t[o.href]=e}for(let o in e){if(V3e[o])continue;let s=`${r}/${Ia(o)}`,a=e[o];if(Array.isArray(a)){if(B3e[o]){let c=a.length;for(let u=0;u<c;u++)Hc(a[u],t,n,`${s}/${u}`)}}else if(U3e[o])for(let c in a)Hc(a[c],t,n,`${s}/${Ia(c)}`);else Hc(a,t,n,s)}return t}var Z3e=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,q3e=[0,31,28,31,30,31,30,31,31,30,31,30,31],G3e=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,W3e=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,K3e=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,J3e=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Y3e=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)(?:\.(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,Q3e=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,X3e=/^(?:\/(?:[^~/]|~0|~1)*)*$/,e6e=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,t6e=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,n6e=e=>{if(e[0]==='"')return!1;let[t,n,...r]=e.split("@");return!t||!n||r.length!==0||t.length>64||n.length>253||t[0]==="."||t.endsWith(".")||t.includes("..")||!/^[a-z0-9.-]+$/i.test(n)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(t)?!1:n.split(".").every(i=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(i))},r6e=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,i6e=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,o6e=e=>e.length>1&&e.length<80&&(/^P\d+([.,]\d+)?W$/.test(e)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(e)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(e));function Ql(e){return e.test.bind(e)}var g5={date:ode,time:sde.bind(void 0,!1),"date-time":c6e,duration:o6e,uri:d6e,"uri-reference":Ql(K3e),"uri-template":Ql(J3e),url:Ql(Y3e),email:n6e,hostname:Ql(W3e),ipv4:Ql(r6e),ipv6:Ql(i6e),regex:m6e,uuid:Ql(Q3e),"json-pointer":Ql(X3e),"json-pointer-uri-fragment":Ql(e6e),"relative-json-pointer":Ql(t6e)};function s6e(e){return e%4===0&&(e%100!==0||e%400===0)}function ode(e){let t=e.match(Z3e);if(!t)return!1;let n=+t[1],r=+t[2],i=+t[3];return r>=1&&r<=12&&i>=1&&i<=(r==2&&s6e(n)?29:q3e[r])}function sde(e,t){let n=t.match(G3e);if(!n)return!1;let r=+n[1],i=+n[2],o=+n[3],s=!!n[5];return(r<=23&&i<=59&&o<=59||r==23&&i==59&&o==60)&&(!e||s)}var a6e=/t|\s/i;function c6e(e){let t=e.split(a6e);return t.length==2&&ode(t[0])&&sde(!0,t[1])}var l6e=/\/|:/,u6e=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function d6e(e){return l6e.test(e)&&u6e.test(e)}var p6e=/[^\\]\\Z/;function m6e(e){if(p6e.test(e))return!1;try{return new RegExp(e,"u"),!0}catch{return!1}}function ade(e){let t=0,n=e.length,r=0,i;for(;r<n;)t++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<n&&(i=e.charCodeAt(r),(i&64512)==56320&&r++);return t}function Or(e,t,n="2019-09",r=Hc(t),i=!0,o=null,s="#",a="#",c=Object.create(null)){if(t===!0)return{valid:!0,errors:[]};if(t===!1)return{valid:!1,errors:[{instanceLocation:s,keyword:"false",keywordLocation:s,error:"False boolean schema."}]};let u=typeof e,d;switch(u){case"boolean":case"number":case"string":d=u;break;case"object":e===null?d="null":Array.isArray(e)?d="array":d="object";break;default:throw new Error(`Instances of "${u}" type are not supported.`)}let{$ref:f,$recursiveRef:g,$recursiveAnchor:h,type:v,const:x,enum:E,required:C,not:S,anyOf:A,allOf:P,oneOf:F,if:B,then:ee,else:D,format:pe,properties:xe,patternProperties:Ge,additionalProperties:fe,unevaluatedProperties:Se,minProperties:Fe,maxProperties:Me,propertyNames:ce,dependentRequired:gt,dependentSchemas:ve,dependencies:ke,prefixItems:We,items:_t,additionalItems:Ot,unevaluatedItems:Bt,contains:Gt,minContains:Dn,maxContains:M,minItems:O,maxItems:ie,uniqueItems:Z,minimum:en,maximum:Wn,exclusiveMinimum:yr,exclusiveMaximum:Yr,multipleOf:Ei,minLength:ts,maxLength:vr,pattern:Ns,__absolute_ref__:bu,__absolute_recursive_ref__:qd}=t,Pe=[];if(h===!0&&o===null&&(o=t),g==="#"){let Mt=o===null?r[qd]:o,lt=`${a}/$recursiveRef`,Dt=Or(e,o===null?t:o,n,r,i,Mt,s,lt,c);Dt.valid||Pe.push({instanceLocation:s,keyword:"$recursiveRef",keywordLocation:lt,error:"A subschema had errors."},...Dt.errors)}if(f!==void 0){let lt=r[bu||f];if(lt===void 0){let Ae=`Unresolved $ref "${f}".`;throw bu&&bu!==f&&(Ae+=`  Absolute URI "${bu}".`),Ae+=`
Known schemas:
- ${Object.keys(r).join(`
- `)}`,new Error(Ae)}let Dt=`${a}/$ref`,qe=Or(e,lt,n,r,i,o,s,Dt,c);if(qe.valid||Pe.push({instanceLocation:s,keyword:"$ref",keywordLocation:Dt,error:"A subschema had errors."},...qe.errors),n==="4"||n==="7")return{valid:Pe.length===0,errors:Pe}}if(Array.isArray(v)){let Mt=v.length,lt=!1;for(let Dt=0;Dt<Mt;Dt++)if(d===v[Dt]||v[Dt]==="integer"&&d==="number"&&e%1===0&&e===e){lt=!0;break}lt||Pe.push({instanceLocation:s,keyword:"type",keywordLocation:`${a}/type`,error:`Instance type "${d}" is invalid. Expected "${v.join('", "')}".`})}else v==="integer"?(d!=="number"||e%1||e!==e)&&Pe.push({instanceLocation:s,keyword:"type",keywordLocation:`${a}/type`,error:`Instance type "${d}" is invalid. Expected "${v}".`}):v!==void 0&&d!==v&&Pe.push({instanceLocation:s,keyword:"type",keywordLocation:`${a}/type`,error:`Instance type "${d}" is invalid. Expected "${v}".`});if(x!==void 0&&(d==="object"||d==="array"?Yl(e,x)||Pe.push({instanceLocation:s,keyword:"const",keywordLocation:`${a}/const`,error:`Instance does not match ${JSON.stringify(x)}.`}):e!==x&&Pe.push({instanceLocation:s,keyword:"const",keywordLocation:`${a}/const`,error:`Instance does not match ${JSON.stringify(x)}.`})),E!==void 0&&(d==="object"||d==="array"?E.some(Mt=>Yl(e,Mt))||Pe.push({instanceLocation:s,keyword:"enum",keywordLocation:`${a}/enum`,error:`Instance does not match any of ${JSON.stringify(E)}.`}):E.some(Mt=>e===Mt)||Pe.push({instanceLocation:s,keyword:"enum",keywordLocation:`${a}/enum`,error:`Instance does not match any of ${JSON.stringify(E)}.`})),S!==void 0){let Mt=`${a}/not`;Or(e,S,n,r,i,o,s,Mt).valid&&Pe.push({instanceLocation:s,keyword:"not",keywordLocation:Mt,error:'Instance matched "not" schema.'})}let ol=[];if(A!==void 0){let Mt=`${a}/anyOf`,lt=Pe.length,Dt=!1;for(let qe=0;qe<A.length;qe++){let Ae=A[qe],jt=Object.create(c),It=Or(e,Ae,n,r,i,h===!0?o:null,s,`${Mt}/${qe}`,jt);Pe.push(...It.errors),Dt=Dt||It.valid,It.valid&&ol.push(jt)}Dt?Pe.length=lt:Pe.splice(lt,0,{instanceLocation:s,keyword:"anyOf",keywordLocation:Mt,error:"Instance does not match any subschemas."})}if(P!==void 0){let Mt=`${a}/allOf`,lt=Pe.length,Dt=!0;for(let qe=0;qe<P.length;qe++){let Ae=P[qe],jt=Object.create(c),It=Or(e,Ae,n,r,i,h===!0?o:null,s,`${Mt}/${qe}`,jt);Pe.push(...It.errors),Dt=Dt&&It.valid,It.valid&&ol.push(jt)}Dt?Pe.length=lt:Pe.splice(lt,0,{instanceLocation:s,keyword:"allOf",keywordLocation:Mt,error:"Instance does not match every subschema."})}if(F!==void 0){let Mt=`${a}/oneOf`,lt=Pe.length,Dt=F.filter((qe,Ae)=>{let jt=Object.create(c),It=Or(e,qe,n,r,i,h===!0?o:null,s,`${Mt}/${Ae}`,jt);return Pe.push(...It.errors),It.valid&&ol.push(jt),It.valid}).length;Dt===1?Pe.length=lt:Pe.splice(lt,0,{instanceLocation:s,keyword:"oneOf",keywordLocation:Mt,error:`Instance does not match exactly one subschema (${Dt} matches).`})}if((d==="object"||d==="array")&&Object.assign(c,...ol),B!==void 0){let Mt=`${a}/if`;if(Or(e,B,n,r,i,o,s,Mt,c).valid){if(ee!==void 0){let Dt=Or(e,ee,n,r,i,o,s,`${a}/then`,c);Dt.valid||Pe.push({instanceLocation:s,keyword:"if",keywordLocation:Mt,error:'Instance does not match "then" schema.'},...Dt.errors)}}else if(D!==void 0){let Dt=Or(e,D,n,r,i,o,s,`${a}/else`,c);Dt.valid||Pe.push({instanceLocation:s,keyword:"if",keywordLocation:Mt,error:'Instance does not match "else" schema.'},...Dt.errors)}}if(d==="object"){if(C!==void 0)for(let qe of C)qe in e||Pe.push({instanceLocation:s,keyword:"required",keywordLocation:`${a}/required`,error:`Instance does not have required property "${qe}".`});let Mt=Object.keys(e);if(Fe!==void 0&&Mt.length<Fe&&Pe.push({instanceLocation:s,keyword:"minProperties",keywordLocation:`${a}/minProperties`,error:`Instance does not have at least ${Fe} properties.`}),Me!==void 0&&Mt.length>Me&&Pe.push({instanceLocation:s,keyword:"maxProperties",keywordLocation:`${a}/maxProperties`,error:`Instance does not have at least ${Me} properties.`}),ce!==void 0){let qe=`${a}/propertyNames`;for(let Ae in e){let jt=`${s}/${Ia(Ae)}`,It=Or(Ae,ce,n,r,i,o,jt,qe);It.valid||Pe.push({instanceLocation:s,keyword:"propertyNames",keywordLocation:qe,error:`Property name "${Ae}" does not match schema.`},...It.errors)}}if(gt!==void 0){let qe=`${a}/dependantRequired`;for(let Ae in gt)if(Ae in e){let jt=gt[Ae];for(let It of jt)It in e||Pe.push({instanceLocation:s,keyword:"dependentRequired",keywordLocation:qe,error:`Instance has "${Ae}" but does not have "${It}".`})}}if(ve!==void 0)for(let qe in ve){let Ae=`${a}/dependentSchemas`;if(qe in e){let jt=Or(e,ve[qe],n,r,i,o,s,`${Ae}/${Ia(qe)}`,c);jt.valid||Pe.push({instanceLocation:s,keyword:"dependentSchemas",keywordLocation:Ae,error:`Instance has "${qe}" but does not match dependant schema.`},...jt.errors)}}if(ke!==void 0){let qe=`${a}/dependencies`;for(let Ae in ke)if(Ae in e){let jt=ke[Ae];if(Array.isArray(jt))for(let It of jt)It in e||Pe.push({instanceLocation:s,keyword:"dependencies",keywordLocation:qe,error:`Instance has "${Ae}" but does not have "${It}".`});else{let It=Or(e,jt,n,r,i,o,s,`${qe}/${Ia(Ae)}`);It.valid||Pe.push({instanceLocation:s,keyword:"dependencies",keywordLocation:qe,error:`Instance has "${Ae}" but does not match dependant schema.`},...It.errors)}}}let lt=Object.create(null),Dt=!1;if(xe!==void 0){let qe=`${a}/properties`;for(let Ae in xe){if(!(Ae in e))continue;let jt=`${s}/${Ia(Ae)}`,It=Or(e[Ae],xe[Ae],n,r,i,o,jt,`${qe}/${Ia(Ae)}`);if(It.valid)c[Ae]=lt[Ae]=!0;else if(Dt=i,Pe.push({instanceLocation:s,keyword:"properties",keywordLocation:qe,error:`Property "${Ae}" does not match schema.`},...It.errors),Dt)break}}if(!Dt&&Ge!==void 0){let qe=`${a}/patternProperties`;for(let Ae in Ge){let jt=new RegExp(Ae,"u"),It=Ge[Ae];for(let po in e){if(!jt.test(po))continue;let ZI=`${s}/${Ia(po)}`,Lb=Or(e[po],It,n,r,i,o,ZI,`${qe}/${Ia(Ae)}`);Lb.valid?c[po]=lt[po]=!0:(Dt=i,Pe.push({instanceLocation:s,keyword:"patternProperties",keywordLocation:qe,error:`Property "${po}" matches pattern "${Ae}" but does not match associated schema.`},...Lb.errors))}}}if(!Dt&&fe!==void 0){let qe=`${a}/additionalProperties`;for(let Ae in e){if(lt[Ae])continue;let jt=`${s}/${Ia(Ae)}`,It=Or(e[Ae],fe,n,r,i,o,jt,qe);It.valid?c[Ae]=!0:(Dt=i,Pe.push({instanceLocation:s,keyword:"additionalProperties",keywordLocation:qe,error:`Property "${Ae}" does not match additional properties schema.`},...It.errors))}}else if(!Dt&&Se!==void 0){let qe=`${a}/unevaluatedProperties`;for(let Ae in e)if(!c[Ae]){let jt=`${s}/${Ia(Ae)}`,It=Or(e[Ae],Se,n,r,i,o,jt,qe);It.valid?c[Ae]=!0:Pe.push({instanceLocation:s,keyword:"unevaluatedProperties",keywordLocation:qe,error:`Property "${Ae}" does not match unevaluated properties schema.`},...It.errors)}}}else if(d==="array"){ie!==void 0&&e.length>ie&&Pe.push({instanceLocation:s,keyword:"maxItems",keywordLocation:`${a}/maxItems`,error:`Array has too many items (${e.length} > ${ie}).`}),O!==void 0&&e.length<O&&Pe.push({instanceLocation:s,keyword:"minItems",keywordLocation:`${a}/minItems`,error:`Array has too few items (${e.length} < ${O}).`});let Mt=e.length,lt=0,Dt=!1;if(We!==void 0){let qe=`${a}/prefixItems`,Ae=Math.min(We.length,Mt);for(;lt<Ae;lt++){let jt=Or(e[lt],We[lt],n,r,i,o,`${s}/${lt}`,`${qe}/${lt}`);if(c[lt]=!0,!jt.valid&&(Dt=i,Pe.push({instanceLocation:s,keyword:"prefixItems",keywordLocation:qe,error:"Items did not match schema."},...jt.errors),Dt))break}}if(_t!==void 0){let qe=`${a}/items`;if(Array.isArray(_t)){let Ae=Math.min(_t.length,Mt);for(;lt<Ae;lt++){let jt=Or(e[lt],_t[lt],n,r,i,o,`${s}/${lt}`,`${qe}/${lt}`);if(c[lt]=!0,!jt.valid&&(Dt=i,Pe.push({instanceLocation:s,keyword:"items",keywordLocation:qe,error:"Items did not match schema."},...jt.errors),Dt))break}}else for(;lt<Mt;lt++){let Ae=Or(e[lt],_t,n,r,i,o,`${s}/${lt}`,qe);if(c[lt]=!0,!Ae.valid&&(Dt=i,Pe.push({instanceLocation:s,keyword:"items",keywordLocation:qe,error:"Items did not match schema."},...Ae.errors),Dt))break}if(!Dt&&Ot!==void 0){let Ae=`${a}/additionalItems`;for(;lt<Mt;lt++){let jt=Or(e[lt],Ot,n,r,i,o,`${s}/${lt}`,Ae);c[lt]=!0,jt.valid||(Dt=i,Pe.push({instanceLocation:s,keyword:"additionalItems",keywordLocation:Ae,error:"Items did not match additional items schema."},...jt.errors))}}}if(Gt!==void 0)if(Mt===0&&Dn===void 0)Pe.push({instanceLocation:s,keyword:"contains",keywordLocation:`${a}/contains`,error:"Array is empty. It must contain at least one item matching the schema."});else if(Dn!==void 0&&Mt<Dn)Pe.push({instanceLocation:s,keyword:"minContains",keywordLocation:`${a}/minContains`,error:`Array has less items (${Mt}) than minContains (${Dn}).`});else{let qe=`${a}/contains`,Ae=Pe.length,jt=0;for(let It=0;It<Mt;It++){let po=Or(e[It],Gt,n,r,i,o,`${s}/${It}`,qe);po.valid?(c[It]=!0,jt++):Pe.push(...po.errors)}jt>=(Dn||0)&&(Pe.length=Ae),Dn===void 0&&M===void 0&&jt===0?Pe.splice(Ae,0,{instanceLocation:s,keyword:"contains",keywordLocation:qe,error:"Array does not contain item matching schema."}):Dn!==void 0&&jt<Dn?Pe.push({instanceLocation:s,keyword:"minContains",keywordLocation:`${a}/minContains`,error:`Array must contain at least ${Dn} items matching schema. Only ${jt} items were found.`}):M!==void 0&&jt>M&&Pe.push({instanceLocation:s,keyword:"maxContains",keywordLocation:`${a}/maxContains`,error:`Array may contain at most ${M} items matching schema. ${jt} items were found.`})}if(!Dt&&Bt!==void 0){let qe=`${a}/unevaluatedItems`;for(lt;lt<Mt;lt++){if(c[lt])continue;let Ae=Or(e[lt],Bt,n,r,i,o,`${s}/${lt}`,qe);c[lt]=!0,Ae.valid||Pe.push({instanceLocation:s,keyword:"unevaluatedItems",keywordLocation:qe,error:"Items did not match unevaluated items schema."},...Ae.errors)}}if(Z)for(let qe=0;qe<Mt;qe++){let Ae=e[qe],jt=typeof Ae=="object"&&Ae!==null;for(let It=0;It<Mt;It++){if(qe===It)continue;let po=e[It];(Ae===po||jt&&(typeof po=="object"&&po!==null)&&Yl(Ae,po))&&(Pe.push({instanceLocation:s,keyword:"uniqueItems",keywordLocation:`${a}/uniqueItems`,error:`Duplicate items at indexes ${qe} and ${It}.`}),qe=Number.MAX_SAFE_INTEGER,It=Number.MAX_SAFE_INTEGER)}}}else if(d==="number"){if(n==="4"?(en!==void 0&&(yr===!0&&e<=en||e<en)&&Pe.push({instanceLocation:s,keyword:"minimum",keywordLocation:`${a}/minimum`,error:`${e} is less than ${yr?"or equal to ":""} ${en}.`}),Wn!==void 0&&(Yr===!0&&e>=Wn||e>Wn)&&Pe.push({instanceLocation:s,keyword:"maximum",keywordLocation:`${a}/maximum`,error:`${e} is greater than ${Yr?"or equal to ":""} ${Wn}.`})):(en!==void 0&&e<en&&Pe.push({instanceLocation:s,keyword:"minimum",keywordLocation:`${a}/minimum`,error:`${e} is less than ${en}.`}),Wn!==void 0&&e>Wn&&Pe.push({instanceLocation:s,keyword:"maximum",keywordLocation:`${a}/maximum`,error:`${e} is greater than ${Wn}.`}),yr!==void 0&&e<=yr&&Pe.push({instanceLocation:s,keyword:"exclusiveMinimum",keywordLocation:`${a}/exclusiveMinimum`,error:`${e} is less than ${yr}.`}),Yr!==void 0&&e>=Yr&&Pe.push({instanceLocation:s,keyword:"exclusiveMaximum",keywordLocation:`${a}/exclusiveMaximum`,error:`${e} is greater than or equal to ${Yr}.`})),Ei!==void 0){let Mt=e%Ei;Math.abs(0-Mt)>=11920929e-14&&Math.abs(Ei-Mt)>=11920929e-14&&Pe.push({instanceLocation:s,keyword:"multipleOf",keywordLocation:`${a}/multipleOf`,error:`${e} is not a multiple of ${Ei}.`})}}else if(d==="string"){let Mt=ts===void 0&&vr===void 0?0:ade(e);ts!==void 0&&Mt<ts&&Pe.push({instanceLocation:s,keyword:"minLength",keywordLocation:`${a}/minLength`,error:`String is too short (${Mt} < ${ts}).`}),vr!==void 0&&Mt>vr&&Pe.push({instanceLocation:s,keyword:"maxLength",keywordLocation:`${a}/maxLength`,error:`String is too long (${Mt} > ${vr}).`}),Ns!==void 0&&!new RegExp(Ns,"u").test(e)&&Pe.push({instanceLocation:s,keyword:"pattern",keywordLocation:`${a}/pattern`,error:"String does not match pattern."}),pe!==void 0&&g5[pe]&&!g5[pe](e)&&Pe.push({instanceLocation:s,keyword:"format",keywordLocation:`${a}/format`,error:`String does not match format "${pe}".`})}return{valid:Pe.length===0,errors:Pe}}var xR=class{schema;draft;shortCircuit;lookup;constructor(t,n="2019-09",r=!0){this.schema=t,this.draft=n,this.shortCircuit=r,this.lookup=Hc(t)}validate(t){return Or(t,this.schema,this.draft,this.lookup,this.shortCircuit)}addSchema(t,n){n&&(t=b(m({},t),{$id:n})),Hc(t,this.lookup)}};var _5={};ae(_5,{Validator:()=>xR,deepCompareStrict:()=>Yl,toJsonSchema:()=>$i,validatesOnlyStrings:()=>qy});function $i(e){if(Ur(e)){let t=gR(e,!0);if(cc(t)){let n=Uy(t,!0);return Ka(n)}else return Ka(e)}return Vr(e)?ide(e):e}function qy(e){if(!e||typeof e!="object"||Object.keys(e).length===0||Array.isArray(e))return!1;if("type"in e)return typeof e.type=="string"?e.type==="string":Array.isArray(e.type)?e.type.every(t=>t==="string"):!1;if("enum"in e)return Array.isArray(e.enum)&&e.enum.length>0&&e.enum.every(t=>typeof t=="string");if("const"in e)return typeof e.const=="string";if("allOf"in e&&Array.isArray(e.allOf))return e.allOf.some(t=>qy(t));if("anyOf"in e&&Array.isArray(e.anyOf)||"oneOf"in e&&Array.isArray(e.oneOf)){let t="anyOf"in e?e.anyOf:e.oneOf;return t.length>0&&t.every(n=>qy(n))}if("not"in e)return!1;if("$ref"in e&&typeof e.$ref=="string"){let t=e.$ref,n=Hc(e);return n[t]?qy(n[t]):!1}return!1}var y5={};ae(y5,{Graph:()=>ah});function f6e(e,t){if(e!==void 0&&!Fc(e))return e;if(NC(t))try{let n=t.getName();return n=n.startsWith("Runnable")?n.slice(8):n,n}catch{return t.getName()}else return t.name??"UnknownSchema"}function h6e(e){return NC(e.data)?{type:"runnable",data:{id:e.data.lc_id,name:e.data.getName()}}:{type:"schema",data:b(m({},$i(e.data.schema)),{title:e.data.name})}}var ah=class ude{nodes={};edges=[];constructor(t){this.nodes=t?.nodes??this.nodes,this.edges=t?.edges??this.edges}toJSON(){let t={};return Object.values(this.nodes).forEach((n,r)=>{t[n.id]=Fc(n.id)?r:n.id}),{nodes:Object.values(this.nodes).map(n=>m({id:t[n.id]},h6e(n))),edges:this.edges.map(n=>{let r={source:t[n.source],target:t[n.target]};return typeof n.data<"u"&&(r.data=n.data),typeof n.conditional<"u"&&(r.conditional=n.conditional),r})}}addNode(t,n,r){if(n!==void 0&&this.nodes[n]!==void 0)throw new Error(`Node with id ${n} already exists`);let i=n??ei(),o={id:i,data:t,name:f6e(n,t),metadata:r};return this.nodes[i]=o,o}removeNode(t){delete this.nodes[t.id],this.edges=this.edges.filter(n=>n.source!==t.id&&n.target!==t.id)}addEdge(t,n,r,i){if(this.nodes[t.id]===void 0)throw new Error(`Source node ${t.id} not in graph`);if(this.nodes[n.id]===void 0)throw new Error(`Target node ${n.id} not in graph`);let o={source:t.id,target:n.id,data:r,conditional:i};return this.edges.push(o),o}firstNode(){return cde(this)}lastNode(){return lde(this)}extend(t,n=""){let r=n;Object.values(t.nodes).map(u=>u.id).every(Fc)&&(r="");let o=u=>r?`${r}:${u}`:u;Object.entries(t.nodes).forEach(([u,d])=>{this.nodes[o(u)]=b(m({},d),{id:o(u)})});let s=t.edges.map(u=>b(m({},u),{source:o(u.source),target:o(u.target)}));this.edges=[...this.edges,...s];let a=t.firstNode(),c=t.lastNode();return[a?{id:o(a.id),data:a.data}:void 0,c?{id:o(c.id),data:c.data}:void 0]}trimFirstNode(){let t=this.firstNode();t&&cde(this,[t.id])&&this.removeNode(t)}trimLastNode(){let t=this.lastNode();t&&lde(this,[t.id])&&this.removeNode(t)}reid(){let t=Object.fromEntries(Object.values(this.nodes).map(i=>[i.id,i.name])),n=new Map;Object.values(t).forEach(i=>{n.set(i,(n.get(i)||0)+1)});let r=i=>{let o=t[i];return Fc(i)&&n.get(o)===1?o:i};return new ude({nodes:Object.fromEntries(Object.entries(this.nodes).map(([i,o])=>[r(i),b(m({},o),{id:r(i)})])),edges:this.edges.map(i=>b(m({},i),{source:r(i.source),target:r(i.target)}))})}drawMermaid(t){let{withStyles:n,curveStyle:r,nodeColors:i={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:o}=t??{},s=this.reid(),a=s.firstNode(),c=s.lastNode();return Eue(s.nodes,s.edges,{firstNode:a?.id,lastNode:c?.id,withStyles:n,curveStyle:r,nodeColors:i,wrapLabelNWords:o})}drawMermaidPng(t){return y(this,null,function*(){let n=this.drawMermaid(t);return Iue(n,{backgroundColor:t?.backgroundColor})})}};function cde(e,t=[]){let n=new Set(e.edges.filter(i=>!t.includes(i.source)).map(i=>i.target)),r=[];for(let i of Object.values(e.nodes))!t.includes(i.id)&&!n.has(i.id)&&r.push(i);return r.length===1?r[0]:void 0}function lde(e,t=[]){let n=new Set(e.edges.filter(i=>!t.includes(i.target)).map(i=>i.source)),r=[];for(let i of Object.values(e.nodes))!t.includes(i.id)&&!n.has(i.id)&&r.push(i);return r.length===1?r[0]:void 0}function dde(e){let t=new TextEncoder,n=new ReadableStream({start(i){return y(this,null,function*(){try{for(var o=ue(e),s,a,c;s=!(a=yield o.next()).done;s=!1){let u=a.value;i.enqueue(t.encode(`event: data
data: ${JSON.stringify(u)}

`))}}catch{c=[a]}finally{try{s&&(a=o.return)&&(yield a.call(o))}finally{if(c)throw c[0]}}i.enqueue(t.encode(`event: end

`)),i.close()})}});return Ni.fromReadableStream(n)}function v5(e){return typeof e=="object"&&e!==null&&typeof e[Symbol.iterator]=="function"&&typeof e.next=="function"}var pde=e=>e!=null&&typeof e=="object"&&"next"in e&&typeof e.next=="function";function CR(e){return typeof e=="object"&&e!==null&&typeof e[Symbol.asyncIterator]=="function"}function*b5(e,t){for(;;){let{value:n,done:r}=gr.runWithConfig(Cs(e),t.next.bind(t),!0);if(r)break;yield n}}function ER(e,t){return he(this,null,function*(){let n=t[Symbol.asyncIterator]();for(;;){let{value:r,done:i}=yield new z(gr.runWithConfig(Cs(e),n.next.bind(t),!0));if(i)break;yield r}})}function Li(e,t){return e&&!Array.isArray(e)&&!(e instanceof Date)&&typeof e=="object"?e:{[t]:e}}var dt=class extends vi{lc_runnable=!0;name;getName(e){let t=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${t}${e}`:t}withRetry(e){return new SR(m({bound:this,kwargs:{},config:{},maxAttemptNumber:e?.stopAfterAttempt},e))}withConfig(e){return new ni({bound:this,config:e,kwargs:{}})}withFallbacks(e){let t=Array.isArray(e)?e:e.fallbacks;return new w5({runnable:this,fallbacks:t})}_getOptionsList(e,t=0){if(Array.isArray(e)&&e.length!==t)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${t} inputs`);if(Array.isArray(e))return e.map(wn);if(t>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");let n=Object.fromEntries(Object.entries(e).filter(([r])=>r!=="runId"));return Array.from({length:t},(r,i)=>wn(i===0?e:n))}return Array.from({length:t},()=>wn(e))}batch(e,t,n){return y(this,null,function*(){let r=this._getOptionsList(t??{},e.length),i=r[0]?.maxConcurrency??n?.maxConcurrency,o=new bd({maxConcurrency:i,onFailedAttempt:a=>{throw a}}),s=e.map((a,c)=>o.call(()=>y(this,null,function*(){try{return yield this.invoke(a,r[c])}catch(u){if(n?.returnExceptions)return u;throw u}})));return Promise.all(s)})}_streamIterator(e,t){return he(this,null,function*(){yield this.invoke(e,t)})}stream(e,t){return y(this,null,function*(){let n=wn(t),r=new em({generator:this._streamIterator(e,n),config:n});return yield r.setup,Ni.fromAsyncGenerator(r)})}_separateRunnableConfigFromCallOptions(e){let t;e===void 0?t=wn(e):t=wn({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});let n=m({},e);return delete n.callbacks,delete n.tags,delete n.metadata,delete n.runName,delete n.configurable,delete n.recursionLimit,delete n.maxConcurrency,delete n.runId,delete n.timeout,delete n.signal,[t,n]}_callWithConfig(e,t,n){return y(this,null,function*(){let r=wn(n),o=yield(yield oo(r))?.handleChainStart(this.toJSON(),Li(t,"input"),r.runId,r?.runType,void 0,void 0,r?.runName??this.getName());delete r.runId;let s;try{let a=e.call(this,t,r,o);s=yield ac(a,n?.signal)}catch(a){throw yield o?.handleChainError(a),a}return yield o?.handleChainEnd(Li(s,"output")),s})}_batchWithConfig(e,t,n,r){return y(this,null,function*(){let i=this._getOptionsList(n??{},t.length),o=yield Promise.all(i.map(oo)),s=yield Promise.all(o.map((c,u)=>y(this,null,function*(){let d=yield c?.handleChainStart(this.toJSON(),Li(t[u],"input"),i[u].runId,i[u].runType,void 0,void 0,i[u].runName??this.getName());return delete i[u].runId,d}))),a;try{let c=e.call(this,t,i,s,r);a=yield ac(c,i?.[0]?.signal)}catch(c){throw yield Promise.all(s.map(u=>u?.handleChainError(c))),c}return yield Promise.all(s.map(c=>c?.handleChainEnd(Li(a,"output")))),a})}_concatOutputChunks(e,t){return xa(e,t)}_transformStreamWithConfig(e,t,n){return he(this,null,function*(){let r,i=!0,o,s=!0,a=wn(n),c=yield new z(oo(a)),u=this;function d(){return he(this,null,function*(){try{for(var E=ue(e),C,S,A;C=!(S=yield new z(E.next())).done;C=!1){let P=S.value;if(i)if(r===void 0)r=P;else try{r=u._concatOutputChunks(r,P)}catch{r=void 0,i=!1}yield P}}catch{A=[S]}finally{try{C&&(S=E.return)&&(yield new z(S.call(E)))}finally{if(A)throw A[0]}}})}let f;try{let E=yield new z(QH(t.bind(this),d(),()=>y(this,null,function*(){return c?.handleChainStart(this.toJSON(),{input:""},a.runId,a.runType,void 0,void 0,a.runName??this.getName())}),n?.signal,a));delete a.runId,f=E.setup;let C=f?.handlers.find(hue),S=E.output;C!==void 0&&f!==void 0&&(S=C.tapOutputIterable(f.runId,S));let A=f?.handlers.find(n5);A!==void 0&&f!==void 0&&(S=A.tapOutputIterable(f.runId,S));try{for(var g=ue(S),h,v,x;h=!(v=yield new z(g.next())).done;h=!1){let P=v.value;if(yield P,s)if(o===void 0)o=P;else try{o=this._concatOutputChunks(o,P)}catch{o=void 0,s=!1}}}catch{x=[v]}finally{try{h&&(v=g.return)&&(yield new z(v.call(g)))}finally{if(x)throw x[0]}}}catch(E){throw yield new z(f?.handleChainError(E,void 0,void 0,void 0,{inputs:Li(r,"input")})),E}yield new z(f?.handleChainEnd(o??{},void 0,void 0,void 0,{inputs:Li(r,"input")}))})}getGraph(e){let t=new ah,n=t.addNode({name:`${this.getName()}Input`,schema:ps.any()}),r=t.addNode(this),i=t.addNode({name:`${this.getName()}Output`,schema:ps.any()});return t.addEdge(n,r),t.addEdge(r,i),t}pipe(e){return new Er({first:this,last:ti(e)})}pick(e){return this.pipe(new x5(e))}assign(e){return this.pipe(new zC(new im({steps:e})))}transform(e,t){return he(this,null,function*(){let n;try{for(var r=ue(e),i,o,s;i=!(o=yield new z(r.next())).done;i=!1){let a=o.value;n===void 0?n=a:n=this._concatOutputChunks(n,a)}}catch{s=[o]}finally{try{i&&(o=r.return)&&(yield new z(o.call(r)))}finally{if(s)throw s[0]}}yield*mn(this._streamIterator(n,wn(t)))})}streamLog(e,t,n){return he(this,null,function*(){let r=new cR(b(m({},n),{autoClose:!1,_schemaFormat:"original"})),i=wn(t);yield*mn(this._streamLog(e,r,i))})}_streamLog(e,t,n){return he(this,null,function*(){let{callbacks:r}=n;if(r===void 0)n.callbacks=[t];else if(Array.isArray(r))n.callbacks=r.concat([t]);else{let f=r.copy();f.addHandler(t,!0),n.callbacks=f}let i=this.stream(e,n);function o(){return y(this,null,function*(){try{let x=yield i;try{for(var f=ue(x),g,h,v;g=!(h=yield f.next()).done;g=!1){let E=h.value;let C=new Kl({ops:[{op:"add",path:"/streamed_output/-",value:E}]});yield t.writer.write(C)}}catch{v=[h]}finally{try{g&&(h=f.return)&&(yield h.call(f))}finally{if(v)throw v[0]}}}finally{yield t.writer.close()}})}let s=o();try{try{for(var a=ue(t),c,u,d;c=!(u=yield new z(a.next())).done;c=!1){let f=u.value;yield f}}catch{d=[u]}finally{try{c&&(u=a.return)&&(yield new z(u.call(a)))}finally{if(d)throw d[0]}}}finally{yield new z(s)}})}streamEvents(e,t,n){let r;if(t.version==="v1")r=this._streamEventsV1(e,t,n);else if(t.version==="v2")r=this._streamEventsV2(e,t,n);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return t.encoding==="text/event-stream"?dde(r):Ni.fromAsyncGenerator(r)}_streamEventsV2(e,t,n){return he(this,null,function*(){let r=new gue(b(m({},n),{autoClose:!1})),i=wn(t),o=i.runId??ei();i.runId=o;let s=i.callbacks;if(s===void 0)i.callbacks=[r];else if(Array.isArray(s))i.callbacks=s.concat(r);else{let C=s.copy();C.addHandler(r,!0),i.callbacks=C}let a=new AbortController,c=this;function u(){return y(this,null,function*(){let C,S=null;try{t?.signal?"any"in AbortSignal?C=AbortSignal.any([a.signal,t.signal]):(C=t.signal,S=()=>{a.abort()},t.signal.addEventListener("abort",S,{once:!0})):C=a.signal;let ee=yield c.stream(e,b(m({},i),{signal:C})),D=r.tapOutputIterable(o,ee);try{for(var A=ue(D),P,F,B;P=!(F=yield A.next()).done;P=!1){let pe=F.value;if(a.signal.aborted)break}}catch{B=[F]}finally{try{P&&(F=A.return)&&(yield F.call(A))}finally{if(B)throw B[0]}}}finally{yield r.finish(),C&&S&&C.removeEventListener("abort",S)}})}let d=u(),f=!1,g;try{try{for(var h=ue(r),v,x,E;v=!(x=yield new z(h.next())).done;v=!1){let C=x.value;if(!f){C.data.input=e,f=!0,g=C.run_id,yield C;continue}C.run_id===g&&C.event.endsWith("_end")&&C.data?.input&&delete C.data.input,yield C}}catch{E=[x]}finally{try{v&&(x=h.return)&&(yield new z(x.call(h)))}finally{if(E)throw E[0]}}}finally{a.abort(),yield new z(d)}})}_streamEventsV1(e,t,n){return he(this,null,function*(){let r,i=!1,o=wn(t),s=o.tags??[],a=o.metadata??{},c=o.runName??this.getName(),u=new cR(b(m({},n),{autoClose:!1,_schemaFormat:"streaming_events"})),d=new yue(m({},n)),f=this._streamLog(e,u,o);try{for(var h=ue(f),v,x,E;v=!(x=yield new z(h.next())).done;v=!1){let C=x.value;if(r?r=r.concat(C):r=aR.fromRunLogPatch(C),r.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!i){i=!0;let F=m({},r.state),B={run_id:F.id,event:`on_${F.type}_start`,name:c,tags:s,metadata:a,data:{input:e}};d.includeEvent(B,F.type)&&(yield B)}let S=C.ops.filter(F=>F.path.startsWith("/logs/")).map(F=>F.path.split("/")[2]),A=[...new Set(S)];for(let F of A){let B,ee={},D=r.state.logs[F];if(D.end_time===void 0?D.streamed_output.length>0?B="stream":B="start":B="end",B==="start")D.inputs!==void 0&&(ee.input=D.inputs);else if(B==="end")D.inputs!==void 0&&(ee.input=D.inputs),ee.output=D.final_output;else if(B==="stream"){let pe=D.streamed_output.length;if(pe!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${pe} instead. Encountered in: "${D.name}"`);ee={chunk:D.streamed_output[0]},D.streamed_output=[]}yield{event:`on_${D.type}_${B}`,name:D.name,run_id:D.id,tags:D.tags,metadata:D.metadata,data:ee}}let{state:P}=r;if(P.streamed_output.length>0){let F=P.streamed_output.length;if(F!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${F} instead. Encountered in: "${P.name}"`);let B={chunk:P.streamed_output[0]};P.streamed_output=[];let ee={event:`on_${P.type}_stream`,run_id:P.id,tags:s,metadata:a,name:c,data:B};d.includeEvent(ee,P.type)&&(yield ee)}}}catch{E=[x]}finally{try{v&&(x=h.return)&&(yield new z(x.call(h)))}finally{if(E)throw E[0]}}let g=r?.state;if(g!==void 0){let C={event:`on_${g.type}_end`,name:c,run_id:g.id,tags:s,metadata:a,data:{output:g.final_output}};d.includeEvent(C,g.type)&&(yield C)}})}static isRunnable(e){return NC(e)}withListeners({onStart:e,onEnd:t,onError:n}){return new ni({bound:this,config:{},configFactories:[r=>({callbacks:[new a5({config:r,onStart:e,onEnd:t,onError:n})]})]})}asTool(e){return y6e(this,e)}},ni=class mde extends dt{static lc_name(){return"RunnableBinding"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;bound;config;kwargs;configFactories;constructor(t){super(t),this.bound=t.bound,this.kwargs=t.kwargs,this.config=t.config,this.configFactories=t.configFactories}getName(t){return this.bound.getName(t)}_mergeConfig(...t){return y(this,null,function*(){let n=so(this.config,...t);return so(n,...this.configFactories?yield Promise.all(this.configFactories.map(r=>y(this,null,function*(){return yield r(n)}))):[])})}withConfig(t){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:m(m({},this.config),t)})}withRetry(t){return new SR(m({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:t?.stopAfterAttempt},t))}invoke(t,n){return y(this,null,function*(){return this.bound.invoke(t,yield this._mergeConfig(n,this.kwargs))})}batch(t,n,r){return y(this,null,function*(){let i=Array.isArray(n)?yield Promise.all(n.map(o=>y(this,null,function*(){return this._mergeConfig(wn(o),this.kwargs)}))):yield this._mergeConfig(wn(n),this.kwargs);return this.bound.batch(t,i,r)})}_concatOutputChunks(t,n){return this.bound._concatOutputChunks(t,n)}_streamIterator(t,n){return he(this,null,function*(){yield*mn(this.bound._streamIterator(t,yield new z(this._mergeConfig(wn(n),this.kwargs))))})}stream(t,n){return y(this,null,function*(){return this.bound.stream(t,yield this._mergeConfig(wn(n),this.kwargs))})}transform(t,n){return he(this,null,function*(){yield*mn(this.bound.transform(t,yield new z(this._mergeConfig(wn(n),this.kwargs))))})}streamEvents(t,n,r){let i=this,o=function(){return he(this,null,function*(){yield*mn(i.bound.streamEvents(t,b(m({},yield new z(i._mergeConfig(wn(n),i.kwargs))),{version:n.version}),r))})};return Ni.fromAsyncGenerator(o())}static isRunnableBinding(t){return t.bound&&dt.isRunnable(t.bound)}withListeners({onStart:t,onEnd:n,onError:r}){return new mde({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[i=>({callbacks:[new a5({config:i,onStart:t,onEnd:n,onError:r})]})]})}},fde=class hde extends dt{static lc_name(){return"RunnableEach"}lc_serializable=!0;lc_namespace=["langchain_core","runnables"];bound;constructor(t){super(t),this.bound=t.bound}invoke(t,n){return y(this,null,function*(){return this._callWithConfig(this._invoke.bind(this),t,n)})}_invoke(t,n,r){return y(this,null,function*(){return this.bound.batch(t,kn(n,{callbacks:r?.getChild()}))})}withListeners({onStart:t,onEnd:n,onError:r}){return new hde({bound:this.bound.withListeners({onStart:t,onEnd:n,onError:r})})}},SR=class e extends ni{static lc_name(){return"RunnableRetry"}lc_namespace=["langchain_core","runnables"];maxAttemptNumber=3;onFailedAttempt=()=>{};constructor(t){super(t),this.maxAttemptNumber=t.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=t.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(t,n,r){let i=t>1?`retry:attempt:${t}`:void 0;return kn(n,{callbacks:r?.getChild(i)})}_invoke(t,n,r){return y(this,null,function*(){return By(i=>fi(e.prototype,this,"invoke").call(this,t,this._patchConfigForRetry(i,n,r)),{onFailedAttempt:({error:i})=>this.onFailedAttempt(i,t),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})})}invoke(t,n){return y(this,null,function*(){return this._callWithConfig(this._invoke.bind(this),t,n)})}_batch(t,n,r,i){return y(this,null,function*(){let o={};try{yield By(s=>y(this,null,function*(){let a=t.map((g,h)=>h).filter(g=>o[g.toString()]===void 0||o[g.toString()]instanceof Error),c=a.map(g=>t[g]),u=a.map(g=>this._patchConfigForRetry(s,n?.[g],r?.[g])),d=yield fi(e.prototype,this,"batch").call(this,c,u,b(m({},i),{returnExceptions:!0})),f;for(let g=0;g<d.length;g+=1){let h=d[g],v=a[g];h instanceof Error&&f===void 0&&(f=h,f.input=c[g]),o[v.toString()]=h}if(f)throw f;return d}),{onFailedAttempt:({error:s})=>this.onFailedAttempt(s,s.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(s){if(i?.returnExceptions!==!0)throw s}return Object.keys(o).sort((s,a)=>parseInt(s,10)-parseInt(a,10)).map(s=>o[parseInt(s,10)])})}batch(t,n,r){return y(this,null,function*(){return this._batchWithConfig(this._batch.bind(this),t,n,r)})}},Er=class jC extends dt{static lc_name(){return"RunnableSequence"}first;middle=[];last;omitSequenceTags=!1;lc_serializable=!0;lc_namespace=["langchain_core","runnables"];constructor(t){super(t),this.first=t.first,this.middle=t.middle??this.middle,this.last=t.last,this.name=t.name,this.omitSequenceTags=t.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}invoke(t,n){return y(this,null,function*(){let r=wn(n),o=yield(yield oo(r))?.handleChainStart(this.toJSON(),Li(t,"input"),r.runId,void 0,void 0,void 0,r?.runName);delete r.runId;let s=t,a;try{let c=[this.first,...this.middle];for(let u=0;u<c.length;u+=1){let f=c[u].invoke(s,kn(r,{callbacks:o?.getChild(this.omitSequenceTags?void 0:`seq:step:${u+1}`)}));s=yield ac(f,n?.signal)}if(n?.signal?.aborted)throw Xp(n.signal);a=yield this.last.invoke(s,kn(r,{callbacks:o?.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(c){throw yield o?.handleChainError(c),c}return yield o?.handleChainEnd(Li(a,"output")),a})}batch(t,n,r){return y(this,null,function*(){let i=this._getOptionsList(n??{},t.length),o=yield Promise.all(i.map(oo)),s=yield Promise.all(o.map((c,u)=>y(this,null,function*(){let d=yield c?.handleChainStart(this.toJSON(),Li(t[u],"input"),i[u].runId,void 0,void 0,void 0,i[u].runName);return delete i[u].runId,d}))),a=t;try{for(let c=0;c<this.steps.length;c+=1){let d=this.steps[c].batch(a,s.map((f,g)=>{let h=f?.getChild(this.omitSequenceTags?void 0:`seq:step:${c+1}`);return kn(i[g],{callbacks:h})}),r);a=yield ac(d,i[0]?.signal)}}catch(c){throw yield Promise.all(s.map(u=>u?.handleChainError(c))),c}return yield Promise.all(s.map(c=>c?.handleChainEnd(Li(a,"output")))),a})}_concatOutputChunks(t,n){return this.last._concatOutputChunks(t,n)}_streamIterator(t,n){return he(this,null,function*(){let r=yield new z(oo(n)),f=n??{},{runId:i}=f,o=se(f,["runId"]),s=yield new z(r?.handleChainStart(this.toJSON(),Li(t,"input"),i,void 0,void 0,void 0,o?.runName)),a=[this.first,...this.middle,this.last],c=!0,u;function d(){return he(this,null,function*(){yield t})}try{let E=a[0].transform(d(),kn(o,{callbacks:s?.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let C=1;C<a.length;C+=1){let S=a[C];E=yield new z(S.transform(E,kn(o,{callbacks:s?.getChild(this.omitSequenceTags?void 0:`seq:step:${C+1}`)})))}try{for(var g=ue(E),h,v,x;h=!(v=yield new z(g.next())).done;h=!1){let C=v.value;if(n?.signal?.throwIfAborted(),yield C,c)if(u===void 0)u=C;else try{u=this._concatOutputChunks(u,C)}catch{u=void 0,c=!1}}}catch{x=[v]}finally{try{h&&(v=g.return)&&(yield new z(v.call(g)))}finally{if(x)throw x[0]}}}catch(E){throw yield new z(s?.handleChainError(E)),E}yield new z(s?.handleChainEnd(Li(u,"output")))})}getGraph(t){let n=new ah,r=null;return this.steps.forEach((i,o)=>{let s=i.getGraph(t);o!==0&&s.trimFirstNode(),o!==this.steps.length-1&&s.trimLastNode(),n.extend(s);let a=s.firstNode();if(!a)throw new Error(`Runnable ${i} has no first node`);r&&n.addEdge(r,a),r=s.lastNode()}),n}pipe(t){return jC.isRunnableSequence(t)?new jC({first:this.first,middle:this.middle.concat([this.last,t.first,...t.middle]),last:t.last,name:this.name??t.name}):new jC({first:this.first,middle:[...this.middle,this.last],last:ti(t),name:this.name})}static isRunnableSequence(t){return Array.isArray(t.middle)&&dt.isRunnable(t)}static from([t,...n],r){let i={};return typeof r=="string"?i.name=r:r!==void 0&&(i=r),new jC(b(m({},i),{first:ti(t),middle:n.slice(0,-1).map(ti),last:ti(n[n.length-1])}))}},im=class gde extends dt{static lc_name(){return"RunnableMap"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;steps;getStepsKeys(){return Object.keys(this.steps)}constructor(t){super(t),this.steps={};for(let[n,r]of Object.entries(t.steps))this.steps[n]=ti(r)}static from(t){return new gde({steps:t})}invoke(t,n){return y(this,null,function*(){let r=wn(n),o=yield(yield oo(r))?.handleChainStart(this.toJSON(),{input:t},r.runId,void 0,void 0,void 0,r?.runName);delete r.runId;let s={};try{let a=Object.entries(this.steps).map(d=>y(this,[d],function*([c,u]){s[c]=yield u.invoke(t,kn(r,{callbacks:o?.getChild(`map:key:${c}`)}))}));yield ac(Promise.all(a),n?.signal)}catch(a){throw yield o?.handleChainError(a),a}return yield o?.handleChainEnd(s),s})}_transform(t,n,r){return he(this,null,function*(){let i=m({},this.steps),o=QP(t,Object.keys(i).length),s=new Map(Object.entries(i).map(([a,c],u)=>{let d=c.transform(o[u],kn(r,{callbacks:n?.getChild(`map:key:${a}`)}));return[a,d.next().then(f=>({key:a,gen:d,result:f}))]}));for(;s.size;){let a=Promise.race(s.values()),{key:c,result:u,gen:d}=yield new z(ac(a,r?.signal));s.delete(c),u.done||(yield{[c]:u.value},s.set(c,d.next().then(f=>({key:c,gen:d,result:f}))))}})}transform(t,n){return this._transformStreamWithConfig(t,this._transform.bind(this),n)}stream(t,n){return y(this,null,function*(){function r(){return he(this,null,function*(){yield t})}let i=wn(n),o=new em({generator:this.transform(r(),i),config:i});return yield o.setup,Ni.fromAsyncGenerator(o)})}},g6e=class _de extends dt{lc_serializable=!1;lc_namespace=["langchain_core","runnables"];func;constructor(t){if(super(t),!KP(t.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=t.func}invoke(t,n){return y(this,null,function*(){let[r]=this._getOptionsList(n??{},1),i=yield oo(r),o=this.func(kn(r,{callbacks:i}),t);return ac(o,r?.signal)})}_streamIterator(t,n){return he(this,null,function*(){let[r]=this._getOptionsList(n??{},1),i=yield new z(this.invoke(t,n));if(CR(i)){try{for(var o=ue(i),s,a,c;s=!(a=yield new z(o.next())).done;s=!1){let u=a.value;r?.signal?.throwIfAborted(),yield u}}catch{c=[a]}finally{try{s&&(a=o.return)&&(yield new z(a.call(o)))}finally{if(c)throw c[0]}}return}if(pde(i)){for(;;){r?.signal?.throwIfAborted();let u=i.next();if(u.done)break;yield u.value}return}yield i})}static from(t){return new _de({func:t})}};function _6e(e){if(KP(e))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}var Ir=class yde extends dt{static lc_name(){return"RunnableLambda"}lc_namespace=["langchain_core","runnables"];func;constructor(t){if(KP(t.func))return g6e.from(t.func);super(t),_6e(t.func),this.func=t.func}static from(t){return new yde({func:t})}_invoke(t,n,r){return y(this,null,function*(){return new Promise((i,o)=>{let s=kn(n,{callbacks:r?.getChild(),recursionLimit:(n?.recursionLimit??YP)-1});gr.runWithConfig(Cs(s),()=>y(this,null,function*(){try{let f=yield this.func(t,m({},s));if(f&&dt.isRunnable(f)){if(n?.recursionLimit===0)throw new Error("Recursion limit reached.");f=yield f.invoke(t,b(m({},s),{recursionLimit:(s.recursionLimit??YP)-1}))}else if(CR(f)){let g;try{for(var a=ue(ER(s,f)),c,u,d;c=!(u=yield a.next()).done;c=!1){let h=u.value;if(n?.signal?.throwIfAborted(),g===void 0)g=h;else try{g=this._concatOutputChunks(g,h)}catch{g=h}}}catch{d=[u]}finally{try{c&&(u=a.return)&&(yield u.call(a))}finally{if(d)throw d[0]}}f=g}else if(v5(f)){let g;for(let h of b5(s,f))if(n?.signal?.throwIfAborted(),g===void 0)g=h;else try{g=this._concatOutputChunks(g,h)}catch{g=h}f=g}i(f)}catch(f){o(f)}}))})})}invoke(t,n){return y(this,null,function*(){return this._callWithConfig(this._invoke.bind(this),t,n)})}_transform(t,n,r){return he(this,null,function*(){let i;try{for(var a=ue(t),c,u,d;c=!(u=yield new z(a.next())).done;c=!1){let A=u.value;if(i===void 0)i=A;else try{i=this._concatOutputChunks(i,A)}catch{i=A}}}catch{d=[u]}finally{try{c&&(u=a.return)&&(yield new z(u.call(a)))}finally{if(d)throw d[0]}}let o=kn(r,{callbacks:n?.getChild(),recursionLimit:(r?.recursionLimit??YP)-1}),s=yield new z(new Promise((A,P)=>{gr.runWithConfig(Cs(o),()=>y(this,null,function*(){try{let F=yield this.func(i,b(m({},o),{config:o}));A(F)}catch(F){P(F)}}))}));if(s&&dt.isRunnable(s)){if(r?.recursionLimit===0)throw new Error("Recursion limit reached.");let A=yield new z(s.stream(i,o));try{for(var f=ue(A),g,h,v;g=!(h=yield new z(f.next())).done;g=!1){let P=h.value;yield P}}catch{v=[h]}finally{try{g&&(h=f.return)&&(yield new z(h.call(f)))}finally{if(v)throw v[0]}}}else if(CR(s))try{for(var x=ue(ER(o,s)),E,C,S;E=!(C=yield new z(x.next())).done;E=!1){let A=C.value;r?.signal?.throwIfAborted(),yield A}}catch{S=[C]}finally{try{E&&(C=x.return)&&(yield new z(C.call(x)))}finally{if(S)throw S[0]}}else if(v5(s))for(let A of b5(o,s))r?.signal?.throwIfAborted(),yield A;else yield s})}transform(t,n){return this._transformStreamWithConfig(t,this._transform.bind(this),n)}stream(t,n){return y(this,null,function*(){function r(){return he(this,null,function*(){yield t})}let i=wn(n),o=new em({generator:this.transform(r(),i),config:i});return yield o.setup,Ni.fromAsyncGenerator(o)})}},vde=class extends im{},w5=class extends dt{static lc_name(){return"RunnableWithFallbacks"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;runnable;fallbacks;constructor(e){super(e),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(let e of this.fallbacks)yield e}invoke(e,t){return y(this,null,function*(){let n=wn(t),r=yield oo(n),u=n,{runId:i}=u,o=se(u,["runId"]),s=yield r?.handleChainStart(this.toJSON(),Li(e,"input"),i,void 0,void 0,void 0,o?.runName),a=kn(o,{callbacks:s?.getChild()});return yield gr.runWithConfig(a,()=>y(this,null,function*(){let d;for(let f of this.runnables()){n?.signal?.throwIfAborted();try{let g=yield f.invoke(e,a);return yield s?.handleChainEnd(Li(g,"output")),g}catch(g){d===void 0&&(d=g)}}throw d===void 0?new Error("No error stored at end of fallback."):(yield s?.handleChainError(d),d)}))})}_streamIterator(e,t){return he(this,null,function*(){let n=wn(t),r=yield new z(oo(n)),d=n,{runId:i}=d,o=se(d,["runId"]),s=yield new z(r?.handleChainStart(this.toJSON(),Li(e,"input"),i,void 0,void 0,void 0,o?.runName)),a,c;for(let x of this.runnables()){n?.signal?.throwIfAborted();let E=kn(o,{callbacks:s?.getChild()});try{let C=yield new z(x.stream(e,E));c=ER(E,C);break}catch(C){a===void 0&&(a=C)}}if(c===void 0){let x=a??new Error("No error stored at end of fallback.");throw yield new z(s?.handleChainError(x)),x}let u;try{try{for(var f=ue(c),g,h,v;g=!(h=yield new z(f.next())).done;g=!1){let x=h.value;yield x;try{u=u===void 0?u:this._concatOutputChunks(u,x)}catch{u=void 0}}}catch{v=[h]}finally{try{g&&(h=f.return)&&(yield new z(h.call(f)))}finally{if(v)throw v[0]}}}catch(x){throw yield new z(s?.handleChainError(x)),x}yield new z(s?.handleChainEnd(Li(u,"output")))})}batch(e,t,n){return y(this,null,function*(){if(n?.returnExceptions)throw new Error("Not implemented.");let r=this._getOptionsList(t??{},e.length),i=yield Promise.all(r.map(a=>oo(a))),o=yield Promise.all(i.map((a,c)=>y(this,null,function*(){let u=yield a?.handleChainStart(this.toJSON(),Li(e[c],"input"),r[c].runId,void 0,void 0,void 0,r[c].runName);return delete r[c].runId,u}))),s;for(let a of this.runnables()){r[0].signal?.throwIfAborted();try{let c=yield a.batch(e,o.map((u,d)=>kn(r[d],{callbacks:u?.getChild()})),n);return yield Promise.all(o.map((u,d)=>u?.handleChainEnd(Li(c[d],"output")))),c}catch(c){s===void 0&&(s=c)}}throw s?(yield Promise.all(o.map(a=>a?.handleChainError(s))),s):new Error("No error stored at end of fallbacks.")})}};function ti(e){if(typeof e=="function")return new Ir({func:e});if(dt.isRunnable(e))return e;if(!Array.isArray(e)&&typeof e=="object"){let t={};for(let[n,r]of Object.entries(e))t[n]=ti(r);return new im({steps:t})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}var zC=class extends dt{static lc_name(){return"RunnableAssign"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;mapper;constructor(e){e instanceof im&&(e={mapper:e}),super(e),this.mapper=e.mapper}invoke(e,t){return y(this,null,function*(){let n=yield this.mapper.invoke(e,t);return m(m({},e),n)})}_transform(e,t,n){return he(this,null,function*(){let r=this.mapper.getStepsKeys(),[i,o]=QP(e),s=this.mapper.transform(o,kn(n,{callbacks:t?.getChild()})),a=s.next();try{for(var c=ue(i),u,d,f;u=!(d=yield new z(c.next())).done;u=!1){let E=d.value;if(typeof E!="object"||Array.isArray(E))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof E}`);let C=Object.fromEntries(Object.entries(E).filter(([S])=>!r.includes(S)));Object.keys(C).length>0&&(yield C)}}catch{f=[d]}finally{try{u&&(d=c.return)&&(yield new z(d.call(c)))}finally{if(f)throw f[0]}}yield(yield new z(a)).value;try{for(var g=ue(s),h,v,x;h=!(v=yield new z(g.next())).done;h=!1){let E=v.value;yield E}}catch{x=[v]}finally{try{h&&(v=g.return)&&(yield new z(v.call(g)))}finally{if(x)throw x[0]}}})}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}stream(e,t){return y(this,null,function*(){function n(){return he(this,null,function*(){yield e})}let r=wn(t),i=new em({generator:this.transform(n(),r),config:r});return yield i.setup,Ni.fromAsyncGenerator(i)})}},x5=class extends dt{static lc_name(){return"RunnablePick"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;keys;constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e}),super(e),this.keys=e.keys}_pick(e){return y(this,null,function*(){if(typeof this.keys=="string")return e[this.keys];{let t=this.keys.map(n=>[n,e[n]]).filter(n=>n[1]!==void 0);return t.length===0?void 0:Object.fromEntries(t)}})}invoke(e,t){return y(this,null,function*(){return this._callWithConfig(this._pick.bind(this),e,t)})}_transform(e){return he(this,null,function*(){try{for(var t=ue(e),n,r,i;n=!(r=yield new z(t.next())).done;n=!1){let o=r.value;let s=yield new z(this._pick(o));s!==void 0&&(yield s)}}catch{i=[r]}finally{try{n&&(r=t.return)&&(yield new z(r.call(t)))}finally{if(i)throw i[0]}}})}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}stream(e,t){return y(this,null,function*(){function n(){return he(this,null,function*(){yield e})}let r=wn(t),i=new em({generator:this.transform(n(),r),config:r});return yield i.setup,Ni.fromAsyncGenerator(i)})}},IR=class extends ni{name;description;schema;constructor(e){let t=Er.from([Ir.from(n=>y(this,null,function*(){let r;if(qp(n))try{r=yield rm(this.schema,n.args)}catch{throw new Oy("Received tool input did not match expected schema",JSON.stringify(n.args))}else r=n;return r})).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:t,config:e.config??{}}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}};function y6e(e,t){let n=t.name??e.getName(),r=t.description??Bc(t.schema);return Hy(t.schema)?new IR({name:n,description:r,schema:ps.object({input:ps.string()}).transform(i=>i.input),bound:e}):new IR({name:n,description:r,schema:t.schema,bound:e})}var lc=class extends dt{static lc_name(){return"RunnablePassthrough"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;func;constructor(e){super(e),e&&(this.func=e.func)}invoke(e,t){return y(this,null,function*(){let n=wn(t);return this.func&&(yield this.func(e,n)),this._callWithConfig(r=>Promise.resolve(r),e,n)})}transform(e,t){return he(this,null,function*(){let n=wn(t),r,i=!0;try{for(var o=ue(this._transformStreamWithConfig(e,d=>d,n)),s,a,c;s=!(a=yield new z(o.next())).done;s=!1){let u=a.value;if(yield u,i)if(r===void 0)r=u;else try{r=xa(r,u)}catch{r=void 0,i=!1}}}catch{c=[a]}finally{try{s&&(a=o.return)&&(yield new z(a.call(o)))}finally{if(c)throw c[0]}}this.func&&r!==void 0&&(yield new z(this.func(r,n)))})}static assign(e){return new zC(new im({steps:e}))}};var bde=class extends dt{static lc_name(){return"RouterRunnable"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;runnables;constructor(e){super(e),this.runnables=e.runnables}invoke(e,t){return y(this,null,function*(){let{key:n,input:r}=e,i=this.runnables[n];if(i===void 0)throw new Error(`No runnable associated with key "${n}".`);return i.invoke(r,wn(t))})}batch(e,t,n){return y(this,null,function*(){let r=e.map(f=>f.key),i=e.map(f=>f.input);if(r.find(f=>this.runnables[f]===void 0)!==void 0)throw new Error("One or more keys do not have a corresponding runnable.");let s=r.map(f=>this.runnables[f]),a=this._getOptionsList(t??{},e.length),c=a[0]?.maxConcurrency??n?.maxConcurrency,u=c&&c>0?c:e.length,d=[];for(let f=0;f<i.length;f+=u){let g=i.slice(f,f+u).map((v,x)=>s[x].invoke(v,a[x])),h=yield Promise.all(g);d.push(h)}return d.flat()})}stream(e,t){return y(this,null,function*(){let{key:n,input:r}=e,i=this.runnables[n];if(i===void 0)throw new Error(`No runnable associated with key "${n}".`);return i.stream(r,t)})}};var wde=class extends dt{static lc_name(){return"RunnableBranch"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;default;branches;constructor(e){super(e),this.branches=e.branches,this.default=e.default}static from(e){if(e.length<1)throw new Error("RunnableBranch requires at least one branch");let n=e.slice(0,-1).map(([i,o])=>[ti(i),ti(o)]),r=ti(e[e.length-1]);return new this({branches:n,default:r})}_invoke(e,t,n){return y(this,null,function*(){let r;for(let i=0;i<this.branches.length;i+=1){let[o,s]=this.branches[i];if(yield o.invoke(e,kn(t,{callbacks:n?.getChild(`condition:${i+1}`)}))){r=yield s.invoke(e,kn(t,{callbacks:n?.getChild(`branch:${i+1}`)}));break}}return r||(r=yield this.default.invoke(e,kn(t,{callbacks:n?.getChild("branch:default")}))),r})}invoke(n){return y(this,arguments,function*(e,t={}){return this._callWithConfig(this._invoke,e,t)})}_streamIterator(e,t){return he(this,null,function*(){let n=yield new z(oo(t)),r=yield new z(n?.handleChainStart(this.toJSON(),Li(e,"input"),t?.runId,void 0,void 0,void 0,t?.runName)),i,o=!0,s;try{for(let x=0;x<this.branches.length;x+=1){let[E,C]=this.branches[x];if(yield new z(E.invoke(e,kn(t,{callbacks:r?.getChild(`condition:${x+1}`)})))){s=yield new z(C.stream(e,kn(t,{callbacks:r?.getChild(`branch:${x+1}`)})));try{for(var a=ue(s),c,u,d;c=!(u=yield new z(a.next())).done;c=!1){let A=u.value;if(yield A,o)if(i===void 0)i=A;else try{i=xa(i,A)}catch{i=void 0,o=!1}}}catch{d=[u]}finally{try{c&&(u=a.return)&&(yield new z(u.call(a)))}finally{if(d)throw d[0]}}break}}if(s===void 0){s=yield new z(this.default.stream(e,kn(t,{callbacks:r?.getChild("branch:default")})));try{for(var f=ue(s),g,h,v;g=!(h=yield new z(f.next())).done;g=!1){let x=h.value;if(yield x,o)if(i===void 0)i=x;else try{i=xa(i,x)}catch{i=void 0,o=!1}}}catch{v=[h]}finally{try{g&&(h=f.return)&&(yield new z(h.call(f)))}finally{if(v)throw v[0]}}}}catch(x){throw yield new z(r?.handleChainError(x)),x}yield new z(r?.handleChainEnd(i??{}))})}};var kR=(e,t)=>{let n=[...new Set(t?.map(i=>{if(typeof i=="string")return i;let o=new i({});if(!("getType"in o)||typeof o.getType!="function")throw new Error("Invalid type provided.");return o.getType()}))],r=e.getType();return n.some(i=>i===r)};function Sde(e,t){return Array.isArray(e)?xde(e,t):Ir.from(n=>xde(n,e))}function xde(e,t={}){let{includeNames:n,excludeNames:r,includeTypes:i,excludeTypes:o,includeIds:s,excludeIds:a}=t,c=[];for(let u of e)if(!(r&&u.name&&r.includes(u.name))){{if(o&&kR(u,o))continue;if(a&&u.id&&a.includes(u.id))continue}i||s||n?(n&&u.name&&n.some(d=>d===u.name)||i&&kR(u,i)||s&&u.id&&s.some(d=>d===u.id))&&c.push(u):c.push(u)}return c}function kde(e){return Array.isArray(e)?Cde(e):Ir.from(Cde)}function Cde(e){if(!e.length)return[];let t=[];for(let n of e){let r=n,i=t.pop();if(!i)t.push(r);else if(r.getType()==="tool"||r.getType()!==i.getType())t.push(i,r);else{let o=Qf(i),s=Qf(r),a=o.concat(s);typeof o.content=="string"&&typeof s.content=="string"&&(a.content=`${o.content}
${s.content}`),t.push(b6e(a))}}return t}function Tde(e,t){if(Array.isArray(e)){let n=e;if(!t)throw new Error("Options parameter is required when providing messages.");return Ede(n,t)}else{let n=e;return Ir.from(r=>Ede(r,n)).withConfig({runName:"trim_messages"})}}function Ede(e,t){return y(this,null,function*(){let{maxTokens:n,tokenCounter:r,strategy:i="last",allowPartial:o=!1,endOn:s,startOn:a,includeSystem:c=!1,textSplitter:u}=t;if(a&&i==="first")throw new Error("`startOn` should only be specified if `strategy` is 'last'.");if(c&&i==="first")throw new Error("`includeSystem` should only be specified if `strategy` is 'last'.");let d;"getNumTokens"in r?d=g=>y(null,null,function*(){return(yield Promise.all(g.map(v=>r.getNumTokens(v.content)))).reduce((v,x)=>v+x,0)}):d=g=>y(null,null,function*(){return r(g)});let f=E5;if(u&&("splitText"in u?f=u.splitText:f=g=>y(null,null,function*(){return u(g)})),i==="first")return Ade(e,{maxTokens:n,tokenCounter:d,textSplitter:f,partialStrategy:o?"first":void 0,endOn:s});if(i==="last")return v6e(e,{maxTokens:n,tokenCounter:d,textSplitter:f,allowPartial:o,includeSystem:c,startOn:a,endOn:s});throw new Error(`Unrecognized strategy: '${i}'. Must be one of 'first' or 'last'.`)})}function Ade(e,t){return y(this,null,function*(){let{maxTokens:n,tokenCounter:r,textSplitter:i,partialStrategy:o,endOn:s}=t,a=[...e],c=0;for(let u=0;u<a.length;u+=1){let d=u>0?a.slice(0,-u):a;if((yield r(d))<=n){c=a.length-u;break}}if(c<a.length&&o){let u=!1;if(Array.isArray(a[c].content)){let d=a[c];if(typeof d.content=="string")throw new Error("Expected content to be an array.");let f=d.content.length,g=o==="last"?[...d.content].reverse():d.content;for(let h=1;h<=f;h+=1){let v=o==="first"?g.slice(0,h):g.slice(-h),x=Object.fromEntries(Object.entries(d).filter(([S])=>S!=="type"&&!S.startsWith("lc_"))),E=C5(d.getType(),b(m({},x),{content:v})),C=[...a.slice(0,c),E];if((yield r(C))<=n)a=C,c+=1,u=!0;else break}u&&o==="last"&&(d.content=[...g].reverse())}if(!u){let d=a[c],f;if(Array.isArray(d.content)&&d.content.some(g=>typeof g=="string"||g.type==="text")?f=d.content.find(h=>h.type==="text"&&h.text)?.text:typeof d.content=="string"&&(f=d.content),f){let g=yield i(f),h=g.length;o==="last"&&g.reverse();for(let v=0;v<h-1;v+=1)if(g.pop(),d.content=g.join(""),(yield r([...a.slice(0,c),d]))<=n){o==="last"&&(d.content=[...g].reverse().join("")),a=[...a.slice(0,c),d],c+=1;break}}}}if(s){let u=Array.isArray(s)?s:[s];for(;c>0&&!kR(a[c-1],u);)c-=1}return a.slice(0,c)})}function v6e(e,t){return y(this,null,function*(){let d=t,{allowPartial:n=!1,includeSystem:r=!1,endOn:i,startOn:o}=d,s=se(d,["allowPartial","includeSystem","endOn","startOn"]),a=e.map(f=>{let g=Object.fromEntries(Object.entries(f).filter(([h])=>h!=="type"&&!h.startsWith("lc_")));return C5(f.getType(),g,Lc(f))});if(i){let f=Array.isArray(i)?i:[i];for(;a.length>0&&!kR(a[a.length-1],f);)a=a.slice(0,-1)}let c=r&&a[0]?.getType()==="system",u=c?a.slice(0,1).concat(a.slice(1).reverse()):a.reverse();return u=yield Ade(u,b(m({},s),{partialStrategy:n?"last":void 0,endOn:o})),c?[u[0],...u.slice(1).reverse()]:u.reverse()})}var Ide={human:{message:Pi,messageChunk:hd},ai:{message:Sn,messageChunk:Cr},system:{message:Zo,messageChunk:tc},developer:{message:Zo,messageChunk:tc},tool:{message:io,messageChunk:Jp},function:{message:Yp,messageChunk:fd},generic:{message:_s,messageChunk:md},remove:{message:Yf,messageChunk:Yf}};function C5(e,t,n){let r,i;switch(e){case"human":n?r=new hd(t):i=new Pi(t);break;case"ai":if(n){let o=m({},t);"tool_calls"in o&&(o=b(m({},o),{tool_call_chunks:o.tool_calls?.map(s=>b(m({},s),{type:"tool_call_chunk",index:void 0,args:JSON.stringify(s.args)}))})),r=new Cr(o)}else i=new Sn(t);break;case"system":n?r=new tc(t):i=new Zo(t);break;case"developer":n?r=new tc(b(m({},t),{additional_kwargs:b(m({},t.additional_kwargs),{__openai_role__:"developer"})})):i=new Zo(b(m({},t),{additional_kwargs:b(m({},t.additional_kwargs),{__openai_role__:"developer"})}));break;case"tool":if("tool_call_id"in t)n?r=new Jp(t):i=new io(t);else throw new Error("Can not convert ToolMessage to ToolMessageChunk if 'tool_call_id' field is not defined.");break;case"function":if(n)r=new fd(t);else{if(!t.name)throw new Error("FunctionMessage must have a 'name' field");i=new Yp(t)}break;case"generic":if("role"in t)n?r=new md(t):i=new _s(t);else throw new Error("Can not convert ChatMessage to ChatMessageChunk if 'role' field is not defined.");break;default:throw new Error(`Unrecognized message type ${e}`)}if(n&&r)return r;if(i)return i;throw new Error(`Unrecognized message type ${e}`)}function b6e(e){let t=e.getType(),n,r=Object.fromEntries(Object.entries(e).filter(([i])=>!["type","tool_call_chunks"].includes(i)&&!i.startsWith("lc_")));if(t in Ide&&(n=C5(t,r)),!n)throw new Error(`Unrecognized message chunk class ${t}. Supported classes are ${Object.keys(Ide)}`);return n}function E5(e){let t=e.split(`
`);return Promise.resolve([...t.slice(0,-1).map(n=>`${n}
`),t[t.length-1]])}var Ode=["tool_call","tool_call_chunk","invalid_tool_call","server_tool_call","server_tool_call_chunk","server_tool_call_result"];var Mde=["image","video","audio","text-plain","file"];var Dde=["text","reasoning",...Ode,...Mde];var I5={};ae(I5,{AIMessage:()=>Sn,AIMessageChunk:()=>Cr,BaseMessage:()=>bi,BaseMessageChunk:()=>gs,ChatMessage:()=>_s,ChatMessageChunk:()=>md,FunctionMessage:()=>Yp,FunctionMessageChunk:()=>fd,HumanMessage:()=>Pi,HumanMessageChunk:()=>hd,KNOWN_BLOCK_TYPES:()=>Dde,RemoveMessage:()=>Yf,SystemMessage:()=>Zo,SystemMessageChunk:()=>tc,ToolMessage:()=>io,ToolMessageChunk:()=>Jp,_isMessageFieldWithRole:()=>iP,_mergeDicts:()=>Wr,_mergeLists:()=>Kf,_mergeObj:()=>rP,_mergeStatus:()=>nP,coerceMessageLikeToMessage:()=>ys,convertToChunk:()=>Qf,convertToOpenAIImageBlock:()=>QD,convertToProviderContentBlock:()=>Py,defaultTextSplitter:()=>E5,defaultToolCallParser:()=>gC,filterMessages:()=>Sde,getBufferString:()=>Ry,iife:()=>cP,isAIMessage:()=>Io,isAIMessageChunk:()=>Jf,isBase64ContentBlock:()=>Dy,isBaseMessage:()=>Gn,isBaseMessageChunk:()=>Lc,isChatMessage:()=>Tse,isChatMessageChunk:()=>Ase,isDataContentBlock:()=>ta,isDirectToolOutput:()=>hC,isFunctionMessage:()=>Ose,isFunctionMessageChunk:()=>Mse,isHumanMessage:()=>Dse,isHumanMessageChunk:()=>Pse,isIDContentBlock:()=>YD,isMessage:()=>tP,isOpenAIToolCallArray:()=>yse,isPlainTextContentBlock:()=>ase,isSystemMessage:()=>Rse,isSystemMessageChunk:()=>Nse,isToolMessage:()=>pd,isToolMessageChunk:()=>b6,isURLContentBlock:()=>My,mapChatMessagesToStoredMessages:()=>Lse,mapStoredMessageToChatMessage:()=>_C,mapStoredMessagesToChatMessages:()=>$se,mergeContent:()=>Ho,mergeMessageRuns:()=>kde,mergeResponseMetadata:()=>oP,mergeUsageMetadata:()=>sP,parseBase64DataUrl:()=>Kp,parseMimeType:()=>fC,trimMessages:()=>Tde});var Pde=class e extends ni{runnable;inputMessagesKey;outputMessagesKey;historyMessagesKey;getMessageHistory;constructor(t){let n=Ir.from((s,a)=>this._enterHistory(s,a??{})).withConfig({runName:"loadHistory"}),r=t.historyMessagesKey??t.inputMessagesKey;r&&(n=lc.assign({[r]:n}).withConfig({runName:"insertHistory"}));let i=n.pipe(t.runnable.withListeners({onEnd:(s,a)=>this._exitHistory(s,a??{})})).withConfig({runName:"RunnableWithMessageHistory"}),o=t.config??{};super(b(m({},t),{config:o,bound:i})),this.runnable=t.runnable,this.getMessageHistory=t.getMessageHistory,this.inputMessagesKey=t.inputMessagesKey,this.outputMessagesKey=t.outputMessagesKey,this.historyMessagesKey=t.historyMessagesKey}_getInputMessages(t){let n;if(typeof t=="object"&&!Array.isArray(t)&&!Gn(t)){let r;this.inputMessagesKey?r=this.inputMessagesKey:Object.keys(t).length===1?r=Object.keys(t)[0]:r="input",Array.isArray(t[r])&&Array.isArray(t[r][0])?n=t[r][0]:n=t[r]}else n=t;if(typeof n=="string")return[new Pi(n)];if(Array.isArray(n))return n;if(Gn(n))return[n];throw new Error(`Expected a string, BaseMessage, or array of BaseMessages.
Got ${JSON.stringify(n,null,2)}`)}_getOutputMessages(t){let n;if(!Array.isArray(t)&&!Gn(t)&&typeof t!="string"){let r;this.outputMessagesKey!==void 0?r=this.outputMessagesKey:Object.keys(t).length===1?r=Object.keys(t)[0]:r="output",t.generations!==void 0?n=t.generations[0][0].message:n=t[r]}else n=t;if(typeof n=="string")return[new Sn(n)];if(Array.isArray(n))return n;if(Gn(n))return[n];throw new Error(`Expected a string, BaseMessage, or array of BaseMessages. Received: ${JSON.stringify(n,null,2)}`)}_enterHistory(t,n){return y(this,null,function*(){let i=yield(n?.configurable?.messageHistory).getMessages();return this.historyMessagesKey===void 0?i.concat(this._getInputMessages(t)):i})}_exitHistory(t,n){return y(this,null,function*(){let r=n.configurable?.messageHistory,i;Array.isArray(t.inputs)&&Array.isArray(t.inputs[0])?i=t.inputs[0]:i=t.inputs;let o=this._getInputMessages(i);if(this.historyMessagesKey===void 0){let c=yield r.getMessages();o=o.slice(c.length)}let s=t.outputs;if(!s)throw new Error(`Output values from 'Run' undefined. Run: ${JSON.stringify(t,null,2)}`);let a=this._getOutputMessages(s);yield r.addMessages([...o,...a])})}_mergeConfig(...t){return y(this,null,function*(){let n=yield fi(e.prototype,this,"_mergeConfig").call(this,...t);if(!n.configurable||!n.configurable.sessionId){let i={[this.inputMessagesKey??"input"]:"foo"},o={configurable:{sessionId:"123"}};throw new Error(`sessionId is required. Pass it in as part of the config argument to .invoke() or .stream()
eg. chain.invoke(${JSON.stringify(i)}, ${JSON.stringify(o)})`)}let{sessionId:r}=n.configurable;return n.configurable.messageHistory=yield this.getMessageHistory(r),n})}};var S5={};ae(S5,{RouterRunnable:()=>bde,Runnable:()=>dt,RunnableAssign:()=>zC,RunnableBinding:()=>ni,RunnableBranch:()=>wde,RunnableEach:()=>fde,RunnableLambda:()=>Ir,RunnableMap:()=>im,RunnableParallel:()=>vde,RunnablePassthrough:()=>lc,RunnablePick:()=>x5,RunnableRetry:()=>SR,RunnableSequence:()=>Er,RunnableToolLike:()=>IR,RunnableWithFallbacks:()=>w5,RunnableWithMessageHistory:()=>Pde,_coerceToRunnable:()=>ti,ensureConfig:()=>wn,getCallbackManagerForConfig:()=>oo,mergeConfigs:()=>so,patchConfig:()=>kn,pickRunnableConfigKeys:()=>Cs,raceWithSignal:()=>ac});var Gy=class extends dt{parseResultWithPrompt(e,t,n){return this.parseResult(e,n)}_baseMessageToString(e){return typeof e.content=="string"?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}invoke(e,t){return y(this,null,function*(){return typeof e=="string"?this._callWithConfig((n,r)=>y(this,null,function*(){return this.parseResult([{text:n}],r?.callbacks)}),e,b(m({},t),{runType:"parser"})):this._callWithConfig((n,r)=>y(this,null,function*(){return this.parseResult([{message:n,text:this._baseMessageToString(n)}],r?.callbacks)}),e,b(m({},t),{runType:"parser"}))})}},wd=class extends Gy{parseResult(e,t){return this.parse(e[0].text,t)}parseWithPrompt(e,t,n){return y(this,null,function*(){return this.parse(e,n)})}_type(){throw new Error("_type not implemented")}},Sa=class extends Error{llmOutput;observation;sendToLLM;constructor(e,t,n,r=!1){if(super(e),this.llmOutput=t,this.observation=n,this.sendToLLM=r,r&&(n===void 0||t===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");Zp(this,"OUTPUT_PARSING_FAILURE")}};var xd=class extends wd{_transform(e){return he(this,null,function*(){try{for(var t=ue(e),n,r,i;n=!(r=yield new z(t.next())).done;n=!1){let o=r.value;typeof o=="string"?yield this.parseResult([{text:o}]):yield this.parseResult([{message:o,text:this._baseMessageToString(o)}])}}catch{i=[r]}finally{try{n&&(r=t.return)&&(yield new z(r.call(t)))}finally{if(i)throw i[0]}}})}transform(e,t){return he(this,null,function*(){yield*mn(this._transformStreamWithConfig(e,this._transform.bind(this),b(m({},t),{runType:"parser"})))})}},Xl=class extends xd{diff=!1;constructor(e){super(e),this.diff=e?.diff??this.diff}_transform(e){return he(this,null,function*(){let t,n;try{for(var r=ue(e),i,o,s;i=!(o=yield new z(r.next())).done;i=!1){let a=o.value;if(typeof a!="string"&&typeof a.content!="string")throw new Error("Cannot handle non-string output.");let c;if(Lc(a)){if(typeof a.content!="string")throw new Error("Cannot handle non-string message output.");c=new Ca({message:a,text:a.content})}else if(Gn(a)){if(typeof a.content!="string")throw new Error("Cannot handle non-string message output.");c=new Ca({message:Qf(a),text:a.content})}else c=new Jl({text:a});n===void 0?n=c:n=n.concat(c);let u=yield new z(this.parsePartialResult([n]));u!=null&&!Yl(u,t)&&(this.diff?yield this._diff(t,u):yield u,t=u)}}catch{s=[o]}finally{try{i&&(o=r.return)&&(yield new z(o.call(r)))}finally{if(s)throw s[0]}}})}getFormatInstructions(){return""}};var k5={};ae(k5,{applyPatch:()=>tm,compare:()=>nm});var BC=class extends Xl{static lc_name(){return"JsonOutputParser"}lc_namespace=["langchain_core","output_parsers"];lc_serializable=!0;_concatOutputChunks(e,t){return this.diff?super._concatOutputChunks(e,t):t}_diff(e,t){if(t)return e?nm(e,t):[{op:"replace",path:"",value:t}]}parsePartialResult(e){return y(this,null,function*(){return mC(e[0].text)})}parse(e){return y(this,null,function*(){return mC(e,JSON.parse)})}getFormatInstructions(){return""}};var Rde=class extends xd{static lc_name(){return"BytesOutputParser"}lc_namespace=["langchain_core","output_parsers","bytes"];lc_serializable=!0;textEncoder=new TextEncoder;parse(e){return Promise.resolve(this.textEncoder.encode(e))}getFormatInstructions(){return""}};var Wy=class extends xd{re;_transform(e){return he(this,null,function*(){let t="";try{for(var n=ue(e),r,i,o;r=!(i=yield new z(n.next())).done;r=!1){let s=i.value;if(typeof s=="string"?t+=s:t+=s.content,this.re){let a=[...t.matchAll(this.re)];if(a.length>1){let c=0;for(let u of a.slice(0,-1))yield[u[1]],c+=(u.index??0)+u[0].length;t=t.slice(c)}}else{let a=yield new z(this.parse(t));if(a.length>1){for(let c of a.slice(0,-1))yield[c];t=a[a.length-1]}}}}catch{o=[i]}finally{try{r&&(i=n.return)&&(yield new z(i.call(n)))}finally{if(o)throw o[0]}}for(let s of yield new z(this.parse(t)))yield[s]})}},Nde=class extends Wy{static lc_name(){return"CommaSeparatedListOutputParser"}lc_namespace=["langchain_core","output_parsers","list"];lc_serializable=!0;parse(e){return y(this,null,function*(){try{return e.trim().split(",").map(t=>t.trim())}catch{throw new Sa(`Could not parse output: ${e}`,e)}})}getFormatInstructions(){return"Your response should be a list of comma separated values, eg: `foo, bar, baz`"}},$de=class extends Wy{lc_namespace=["langchain_core","output_parsers","list"];length;separator;constructor({length:e,separator:t}){super(...arguments),this.length=e,this.separator=t||","}parse(e){return y(this,null,function*(){try{let t=e.trim().split(this.separator).map(n=>n.trim());if(this.length!==void 0&&t.length!==this.length)throw new Sa(`Incorrect number of items. Expected ${this.length}, got ${t.length}.`);return t}catch(t){throw Object.getPrototypeOf(t)===Sa.prototype?t:new Sa(`Could not parse output: ${e}`)}})}getFormatInstructions(){return`Your response should be a list of ${this.length===void 0?"":`${this.length} `}items separated by "${this.separator}" (eg: \`foo${this.separator} bar${this.separator} baz\`)`}},Lde=class extends Wy{static lc_name(){return"NumberedListOutputParser"}lc_namespace=["langchain_core","output_parsers","list"];lc_serializable=!0;getFormatInstructions(){return`Your response should be a numbered list with each item on a new line. For example: 

1. foo

2. bar

3. baz`}re=/\d+\.\s([^\n]+)/g;parse(e){return y(this,null,function*(){return[...e.matchAll(this.re)??[]].map(t=>t[1])})}},Fde=class extends Wy{static lc_name(){return"NumberedListOutputParser"}lc_namespace=["langchain_core","output_parsers","list"];lc_serializable=!0;getFormatInstructions(){return`Your response should be a numbered list with each item on a new line. For example: 

1. foo

2. bar

3. baz`}re=/^\s*[-*]\s([^\n]+)$/gm;parse(e){return y(this,null,function*(){return[...e.matchAll(this.re)??[]].map(t=>t[1])})}};var TR=class extends xd{static lc_name(){return"StrOutputParser"}lc_namespace=["langchain_core","output_parsers","string"];lc_serializable=!0;parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}_textContentToString(e){return e.text}_imageUrlContentToString(e){throw new Error('Cannot coerce a multimodal "image_url" message part into a string.')}_messageContentToString(e){switch(e.type){case"text":case"text_delta":if("text"in e)return this._textContentToString(e);break;case"image_url":if("image_url"in e)return this._imageUrlContentToString(e);break;default:throw new Error(`Cannot coerce "${e.type}" message part into a string.`)}throw new Error(`Invalid content type: ${e.type}`)}_baseMessageContentToString(e){return e.reduce((t,n)=>t+this._messageContentToString(n),"")}};var Ky=class extends wd{static lc_name(){return"StructuredOutputParser"}lc_namespace=["langchain","output_parsers","structured"];toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),this.schema=e}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){let t=ps.object(Object.fromEntries(Object.entries(e).map(([n,r])=>[n,ps.string().describe(r)])));return new this(t)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify($i(this.schema))}
\`\`\`
`}parse(e){return y(this,null,function*(){try{let t=e.trim(),r=(t.match(/^```(?:json)?\s*([\s\S]*?)```/)?.[1]||t.match(/```json\s*([\s\S]*?)```/)?.[1]||t).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(i,o)=>`"${o.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return yield rm(this.schema,JSON.parse(r))}catch(t){throw new Sa(`Failed to parse. Text: "${e}". Error: ${t}`,e)}})}},T5=class extends Ky{static lc_name(){return"JsonMarkdownStructuredOutputParser"}getFormatInstructions(e){let t=e?.interpolationDepth??1;if(t<1)throw new Error("f string interpolation depth must be at least 1");return`Return a markdown code snippet with a JSON object formatted to look like:
\`\`\`json
${this._schemaToInstruction($i(this.schema)).replaceAll("{","{".repeat(t)).replaceAll("}","}".repeat(t))}
\`\`\``}_schemaToInstruction(e,t=2){let n=e;if("type"in n){let r=!1,i;if(Array.isArray(n.type)){let a=n.type.findIndex(c=>c==="null");a!==-1&&(r=!0,n.type.splice(a,1)),i=n.type.join(" | ")}else i=n.type;if(n.type==="object"&&n.properties){let a=n.description?` // ${n.description}`:"";return`{
${Object.entries(n.properties).map(([u,d])=>{let f=n.required?.includes(u)?"":" (optional)";return`${" ".repeat(t)}"${u}": ${this._schemaToInstruction(d,t+2)}${f}`}).join(`
`)}
${" ".repeat(t-2)}}${a}`}if(n.type==="array"&&n.items){let a=n.description?` // ${n.description}`:"";return`array[
${" ".repeat(t)}${this._schemaToInstruction(n.items,t+2)}
${" ".repeat(t-2)}] ${a}`}let o=r?" (nullable)":"",s=n.description?` // ${n.description}`:"";return`${i}${s}${o}`}if("anyOf"in n)return n.anyOf.map(r=>this._schemaToInstruction(r,t)).join(`
${" ".repeat(t-2)}`);throw new Error("unsupported schema type")}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){let t=ps.object(Object.fromEntries(Object.entries(e).map(([n,r])=>[n,ps.string().describe(r)])));return new this(t)}},jde=class extends wd{structuredInputParser;constructor({inputSchema:e}){super(...arguments),this.structuredInputParser=new T5(e)}parse(e){return y(this,null,function*(){let t;try{t=yield this.structuredInputParser.parse(e)}catch(n){throw new Sa(`Failed to parse. Text: "${e}". Error: ${n}`,e)}return this.outputProcessor(t)})}getFormatInstructions(){return this.structuredInputParser.getFormatInstructions()}};var w6e=function(){let e={};e.parser=function(M,O){return new n(M,O)},e.SAXParser=n,e.SAXStream=u,e.createStream=c,e.MAX_BUFFER_LENGTH=65536;let t=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function n(M,O){if(!(this instanceof n))return new n(M,O);var ie=this;i(ie),ie.q=ie.c="",ie.bufferCheckPosition=e.MAX_BUFFER_LENGTH,ie.opt=O||{},ie.opt.lowercase=ie.opt.lowercase||ie.opt.lowercasetags,ie.looseCase=ie.opt.lowercase?"toLowerCase":"toUpperCase",ie.tags=[],ie.closed=ie.closedRoot=ie.sawRoot=!1,ie.tag=ie.error=null,ie.strict=!!M,ie.noscript=!!(M||ie.opt.noscript),ie.state=D.BEGIN,ie.strictEntities=ie.opt.strictEntities,ie.ENTITIES=ie.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),ie.attribList=[],ie.opt.xmlns&&(ie.ns=Object.create(v)),ie.trackPosition=ie.opt.position!==!1,ie.trackPosition&&(ie.position=ie.line=ie.column=0),xe(ie,"onready")}Object.create||(Object.create=function(M){function O(){}O.prototype=M;var ie=new O;return ie}),Object.keys||(Object.keys=function(M){var O=[];for(var ie in M)M.hasOwnProperty(ie)&&O.push(ie);return O});function r(M){for(var O=Math.max(e.MAX_BUFFER_LENGTH,10),ie=0,Z=0,en=t.length;Z<en;Z++){var Wn=M[t[Z]].length;if(Wn>O)switch(t[Z]){case"textNode":fe(M);break;case"cdata":Ge(M,"oncdata",M.cdata),M.cdata="";break;case"script":Ge(M,"onscript",M.script),M.script="";break;default:Fe(M,"Max buffer length exceeded: "+t[Z])}ie=Math.max(ie,Wn)}var yr=e.MAX_BUFFER_LENGTH-ie;M.bufferCheckPosition=yr+M.position}function i(M){for(var O=0,ie=t.length;O<ie;O++)M[t[O]]=""}function o(M){fe(M),M.cdata!==""&&(Ge(M,"oncdata",M.cdata),M.cdata=""),M.script!==""&&(Ge(M,"onscript",M.script),M.script="")}n.prototype={end:function(){Me(this)},write:Dn,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var s=ReadableStream;s||(s=function(){});var a=e.EVENTS.filter(function(M){return M!=="error"&&M!=="end"});function c(M,O){return new u(M,O)}function u(M,O){if(!(this instanceof u))return new u(M,O);s.apply(this),this._parser=new n(M,O),this.writable=!0,this.readable=!0;var ie=this;this._parser.onend=function(){ie.emit("end")},this._parser.onerror=function(Z){ie.emit("error",Z),ie._parser.error=null},this._decoder=null,a.forEach(function(Z){Object.defineProperty(ie,"on"+Z,{get:function(){return ie._parser["on"+Z]},set:function(en){if(!en)return ie.removeAllListeners(Z),ie._parser["on"+Z]=en,en;ie.on(Z,en)},enumerable:!0,configurable:!1})})}u.prototype=Object.create(s.prototype,{constructor:{value:u}}),u.prototype.write=function(M){return this._parser.write(M.toString()),this.emit("data",M),!0},u.prototype.end=function(M){return M&&M.length&&this.write(M),this._parser.end(),!0},u.prototype.on=function(M,O){var ie=this;return!ie._parser["on"+M]&&a.indexOf(M)!==-1&&(ie._parser["on"+M]=function(){var Z=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);Z.splice(0,0,M),ie.emit.apply(ie,Z)}),s.prototype.on.call(ie,M,O)};var d="[CDATA[",f="DOCTYPE",g="http://www.w3.org/XML/1998/namespace",h="http://www.w3.org/2000/xmlns/",v={xml:g,xmlns:h},x=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,E=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,C=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,S=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function A(M){return M===" "||M===`
`||M==="\r"||M==="	"}function P(M){return M==='"'||M==="'"}function F(M){return M===">"||A(M)}function B(M,O){return M.test(O)}function ee(M,O){return!B(M,O)}var D=0;e.STATE={BEGIN:D++,BEGIN_WHITESPACE:D++,TEXT:D++,TEXT_ENTITY:D++,OPEN_WAKA:D++,SGML_DECL:D++,SGML_DECL_QUOTED:D++,DOCTYPE:D++,DOCTYPE_QUOTED:D++,DOCTYPE_DTD:D++,DOCTYPE_DTD_QUOTED:D++,COMMENT_STARTING:D++,COMMENT:D++,COMMENT_ENDING:D++,COMMENT_ENDED:D++,CDATA:D++,CDATA_ENDING:D++,CDATA_ENDING_2:D++,PROC_INST:D++,PROC_INST_BODY:D++,PROC_INST_ENDING:D++,OPEN_TAG:D++,OPEN_TAG_SLASH:D++,ATTRIB:D++,ATTRIB_NAME:D++,ATTRIB_NAME_SAW_WHITE:D++,ATTRIB_VALUE:D++,ATTRIB_VALUE_QUOTED:D++,ATTRIB_VALUE_CLOSED:D++,ATTRIB_VALUE_UNQUOTED:D++,ATTRIB_VALUE_ENTITY_Q:D++,ATTRIB_VALUE_ENTITY_U:D++,CLOSE_TAG:D++,CLOSE_TAG_SAW_WHITE:D++,SCRIPT:D++,SCRIPT_ENDING:D++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(M){var O=e.ENTITIES[M],ie=typeof O=="number"?String.fromCharCode(O):O;e.ENTITIES[M]=ie});for(var pe in e.STATE)e.STATE[e.STATE[pe]]=pe;D=e.STATE;function xe(M,O,ie){M[O]&&M[O](ie)}function Ge(M,O,ie){M.textNode&&fe(M),xe(M,O,ie)}function fe(M){M.textNode=Se(M.opt,M.textNode),M.textNode&&xe(M,"ontext",M.textNode),M.textNode=""}function Se(M,O){return M.trim&&(O=O.trim()),M.normalize&&(O=O.replace(/\s+/g," ")),O}function Fe(M,O){return fe(M),M.trackPosition&&(O+=`
Line: `+M.line+`
Column: `+M.column+`
Char: `+M.c),O=new Error(O),M.error=O,xe(M,"onerror",O),M}function Me(M){return M.sawRoot&&!M.closedRoot&&ce(M,"Unclosed root tag"),M.state!==D.BEGIN&&M.state!==D.BEGIN_WHITESPACE&&M.state!==D.TEXT&&Fe(M,"Unexpected end"),fe(M),M.c="",M.closed=!0,xe(M,"onend"),n.call(M,M.strict,M.opt),M}function ce(M,O){if(typeof M!="object"||!(M instanceof n))throw new Error("bad call to strictFail");M.strict&&Fe(M,O)}function gt(M){M.strict||(M.tagName=M.tagName[M.looseCase]());var O=M.tags[M.tags.length-1]||M,ie=M.tag={name:M.tagName,attributes:{}};M.opt.xmlns&&(ie.ns=O.ns),M.attribList.length=0,Ge(M,"onopentagstart",ie)}function ve(M,O){var ie=M.indexOf(":"),Z=ie<0?["",M]:M.split(":"),en=Z[0],Wn=Z[1];return O&&M==="xmlns"&&(en="xmlns",Wn=""),{prefix:en,local:Wn}}function ke(M){if(M.strict||(M.attribName=M.attribName[M.looseCase]()),M.attribList.indexOf(M.attribName)!==-1||M.tag.attributes.hasOwnProperty(M.attribName)){M.attribName=M.attribValue="";return}if(M.opt.xmlns){var O=ve(M.attribName,!0),ie=O.prefix,Z=O.local;if(ie==="xmlns")if(Z==="xml"&&M.attribValue!==g)ce(M,"xml: prefix must be bound to "+g+`
Actual: `+M.attribValue);else if(Z==="xmlns"&&M.attribValue!==h)ce(M,"xmlns: prefix must be bound to "+h+`
Actual: `+M.attribValue);else{var en=M.tag,Wn=M.tags[M.tags.length-1]||M;en.ns===Wn.ns&&(en.ns=Object.create(Wn.ns)),en.ns[Z]=M.attribValue}M.attribList.push([M.attribName,M.attribValue])}else M.tag.attributes[M.attribName]=M.attribValue,Ge(M,"onattribute",{name:M.attribName,value:M.attribValue});M.attribName=M.attribValue=""}function We(M,O){if(M.opt.xmlns){var ie=M.tag,Z=ve(M.tagName);ie.prefix=Z.prefix,ie.local=Z.local,ie.uri=ie.ns[Z.prefix]||"",ie.prefix&&!ie.uri&&(ce(M,"Unbound namespace prefix: "+JSON.stringify(M.tagName)),ie.uri=Z.prefix);var en=M.tags[M.tags.length-1]||M;ie.ns&&en.ns!==ie.ns&&Object.keys(ie.ns).forEach(function(ol){Ge(M,"onopennamespace",{prefix:ol,uri:ie.ns[ol]})});for(var Wn=0,yr=M.attribList.length;Wn<yr;Wn++){var Yr=M.attribList[Wn],Ei=Yr[0],ts=Yr[1],vr=ve(Ei,!0),Ns=vr.prefix,bu=vr.local,qd=Ns===""?"":ie.ns[Ns]||"",Pe={name:Ei,value:ts,prefix:Ns,local:bu,uri:qd};Ns&&Ns!=="xmlns"&&!qd&&(ce(M,"Unbound namespace prefix: "+JSON.stringify(Ns)),Pe.uri=Ns),M.tag.attributes[Ei]=Pe,Ge(M,"onattribute",Pe)}M.attribList.length=0}M.tag.isSelfClosing=!!O,M.sawRoot=!0,M.tags.push(M.tag),Ge(M,"onopentag",M.tag),O||(!M.noscript&&M.tagName.toLowerCase()==="script"?M.state=D.SCRIPT:M.state=D.TEXT,M.tag=null,M.tagName=""),M.attribName=M.attribValue="",M.attribList.length=0}function _t(M){if(!M.tagName){ce(M,"Weird empty close tag."),M.textNode+="</>",M.state=D.TEXT;return}if(M.script){if(M.tagName!=="script"){M.script+="</"+M.tagName+">",M.tagName="",M.state=D.SCRIPT;return}Ge(M,"onscript",M.script),M.script=""}var O=M.tags.length,ie=M.tagName;M.strict||(ie=ie[M.looseCase]());for(var Z=ie;O--;){var en=M.tags[O];if(en.name!==Z)ce(M,"Unexpected close tag");else break}if(O<0){ce(M,"Unmatched closing tag: "+M.tagName),M.textNode+="</"+M.tagName+">",M.state=D.TEXT;return}M.tagName=ie;for(var Wn=M.tags.length;Wn-- >O;){var yr=M.tag=M.tags.pop();M.tagName=M.tag.name,Ge(M,"onclosetag",M.tagName);var Yr={};for(var Ei in yr.ns)Yr[Ei]=yr.ns[Ei];var ts=M.tags[M.tags.length-1]||M;M.opt.xmlns&&yr.ns!==ts.ns&&Object.keys(yr.ns).forEach(function(vr){var Ns=yr.ns[vr];Ge(M,"onclosenamespace",{prefix:vr,uri:Ns})})}O===0&&(M.closedRoot=!0),M.tagName=M.attribValue=M.attribName="",M.attribList.length=0,M.state=D.TEXT}function Ot(M){var O=M.entity,ie=O.toLowerCase(),Z,en="";return M.ENTITIES[O]?M.ENTITIES[O]:M.ENTITIES[ie]?M.ENTITIES[ie]:(O=ie,O.charAt(0)==="#"&&(O.charAt(1)==="x"?(O=O.slice(2),Z=parseInt(O,16),en=Z.toString(16)):(O=O.slice(1),Z=parseInt(O,10),en=Z.toString(10))),O=O.replace(/^0+/,""),isNaN(Z)||en.toLowerCase()!==O?(ce(M,"Invalid character entity"),"&"+M.entity+";"):String.fromCodePoint(Z))}function Bt(M,O){O==="<"?(M.state=D.OPEN_WAKA,M.startTagPosition=M.position):A(O)||(ce(M,"Non-whitespace before first tag."),M.textNode=O,M.state=D.TEXT)}function Gt(M,O){var ie="";return O<M.length&&(ie=M.charAt(O)),ie}function Dn(M){var O=this;if(this.error)throw this.error;if(O.closed)return Fe(O,"Cannot write after close. Assign an onready handler.");if(M===null)return Me(O);typeof M=="object"&&(M=M.toString());for(var ie=0,Z="";Z=Gt(M,ie++),O.c=Z,!!Z;)switch(O.trackPosition&&(O.position++,Z===`
`?(O.line++,O.column=0):O.column++),O.state){case D.BEGIN:if(O.state=D.BEGIN_WHITESPACE,Z==="\uFEFF")continue;Bt(O,Z);continue;case D.BEGIN_WHITESPACE:Bt(O,Z);continue;case D.TEXT:if(O.sawRoot&&!O.closedRoot){for(var en=ie-1;Z&&Z!=="<"&&Z!=="&";)Z=Gt(M,ie++),Z&&O.trackPosition&&(O.position++,Z===`
`?(O.line++,O.column=0):O.column++);O.textNode+=M.substring(en,ie-1)}Z==="<"&&!(O.sawRoot&&O.closedRoot&&!O.strict)?(O.state=D.OPEN_WAKA,O.startTagPosition=O.position):(!A(Z)&&(!O.sawRoot||O.closedRoot)&&ce(O,"Text data outside of root node."),Z==="&"?O.state=D.TEXT_ENTITY:O.textNode+=Z);continue;case D.SCRIPT:Z==="<"?O.state=D.SCRIPT_ENDING:O.script+=Z;continue;case D.SCRIPT_ENDING:Z==="/"?O.state=D.CLOSE_TAG:(O.script+="<"+Z,O.state=D.SCRIPT);continue;case D.OPEN_WAKA:if(Z==="!")O.state=D.SGML_DECL,O.sgmlDecl="";else if(!A(Z))if(B(x,Z))O.state=D.OPEN_TAG,O.tagName=Z;else if(Z==="/")O.state=D.CLOSE_TAG,O.tagName="";else if(Z==="?")O.state=D.PROC_INST,O.procInstName=O.procInstBody="";else{if(ce(O,"Unencoded <"),O.startTagPosition+1<O.position){var Wn=O.position-O.startTagPosition;Z=new Array(Wn).join(" ")+Z}O.textNode+="<"+Z,O.state=D.TEXT}continue;case D.SGML_DECL:(O.sgmlDecl+Z).toUpperCase()===d?(Ge(O,"onopencdata"),O.state=D.CDATA,O.sgmlDecl="",O.cdata=""):O.sgmlDecl+Z==="--"?(O.state=D.COMMENT,O.comment="",O.sgmlDecl=""):(O.sgmlDecl+Z).toUpperCase()===f?(O.state=D.DOCTYPE,(O.doctype||O.sawRoot)&&ce(O,"Inappropriately located doctype declaration"),O.doctype="",O.sgmlDecl=""):Z===">"?(Ge(O,"onsgmldeclaration",O.sgmlDecl),O.sgmlDecl="",O.state=D.TEXT):(P(Z)&&(O.state=D.SGML_DECL_QUOTED),O.sgmlDecl+=Z);continue;case D.SGML_DECL_QUOTED:Z===O.q&&(O.state=D.SGML_DECL,O.q=""),O.sgmlDecl+=Z;continue;case D.DOCTYPE:Z===">"?(O.state=D.TEXT,Ge(O,"ondoctype",O.doctype),O.doctype=!0):(O.doctype+=Z,Z==="["?O.state=D.DOCTYPE_DTD:P(Z)&&(O.state=D.DOCTYPE_QUOTED,O.q=Z));continue;case D.DOCTYPE_QUOTED:O.doctype+=Z,Z===O.q&&(O.q="",O.state=D.DOCTYPE);continue;case D.DOCTYPE_DTD:O.doctype+=Z,Z==="]"?O.state=D.DOCTYPE:P(Z)&&(O.state=D.DOCTYPE_DTD_QUOTED,O.q=Z);continue;case D.DOCTYPE_DTD_QUOTED:O.doctype+=Z,Z===O.q&&(O.state=D.DOCTYPE_DTD,O.q="");continue;case D.COMMENT:Z==="-"?O.state=D.COMMENT_ENDING:O.comment+=Z;continue;case D.COMMENT_ENDING:Z==="-"?(O.state=D.COMMENT_ENDED,O.comment=Se(O.opt,O.comment),O.comment&&Ge(O,"oncomment",O.comment),O.comment=""):(O.comment+="-"+Z,O.state=D.COMMENT);continue;case D.COMMENT_ENDED:Z!==">"?(ce(O,"Malformed comment"),O.comment+="--"+Z,O.state=D.COMMENT):O.state=D.TEXT;continue;case D.CDATA:Z==="]"?O.state=D.CDATA_ENDING:O.cdata+=Z;continue;case D.CDATA_ENDING:Z==="]"?O.state=D.CDATA_ENDING_2:(O.cdata+="]"+Z,O.state=D.CDATA);continue;case D.CDATA_ENDING_2:Z===">"?(O.cdata&&Ge(O,"oncdata",O.cdata),Ge(O,"onclosecdata"),O.cdata="",O.state=D.TEXT):Z==="]"?O.cdata+="]":(O.cdata+="]]"+Z,O.state=D.CDATA);continue;case D.PROC_INST:Z==="?"?O.state=D.PROC_INST_ENDING:A(Z)?O.state=D.PROC_INST_BODY:O.procInstName+=Z;continue;case D.PROC_INST_BODY:if(!O.procInstBody&&A(Z))continue;Z==="?"?O.state=D.PROC_INST_ENDING:O.procInstBody+=Z;continue;case D.PROC_INST_ENDING:Z===">"?(Ge(O,"onprocessinginstruction",{name:O.procInstName,body:O.procInstBody}),O.procInstName=O.procInstBody="",O.state=D.TEXT):(O.procInstBody+="?"+Z,O.state=D.PROC_INST_BODY);continue;case D.OPEN_TAG:B(E,Z)?O.tagName+=Z:(gt(O),Z===">"?We(O):Z==="/"?O.state=D.OPEN_TAG_SLASH:(A(Z)||ce(O,"Invalid character in tag name"),O.state=D.ATTRIB));continue;case D.OPEN_TAG_SLASH:Z===">"?(We(O,!0),_t(O)):(ce(O,"Forward-slash in opening tag not followed by >"),O.state=D.ATTRIB);continue;case D.ATTRIB:if(A(Z))continue;Z===">"?We(O):Z==="/"?O.state=D.OPEN_TAG_SLASH:B(x,Z)?(O.attribName=Z,O.attribValue="",O.state=D.ATTRIB_NAME):ce(O,"Invalid attribute name");continue;case D.ATTRIB_NAME:Z==="="?O.state=D.ATTRIB_VALUE:Z===">"?(ce(O,"Attribute without value"),O.attribValue=O.attribName,ke(O),We(O)):A(Z)?O.state=D.ATTRIB_NAME_SAW_WHITE:B(E,Z)?O.attribName+=Z:ce(O,"Invalid attribute name");continue;case D.ATTRIB_NAME_SAW_WHITE:if(Z==="=")O.state=D.ATTRIB_VALUE;else{if(A(Z))continue;ce(O,"Attribute without value"),O.tag.attributes[O.attribName]="",O.attribValue="",Ge(O,"onattribute",{name:O.attribName,value:""}),O.attribName="",Z===">"?We(O):B(x,Z)?(O.attribName=Z,O.state=D.ATTRIB_NAME):(ce(O,"Invalid attribute name"),O.state=D.ATTRIB)}continue;case D.ATTRIB_VALUE:if(A(Z))continue;P(Z)?(O.q=Z,O.state=D.ATTRIB_VALUE_QUOTED):(ce(O,"Unquoted attribute value"),O.state=D.ATTRIB_VALUE_UNQUOTED,O.attribValue=Z);continue;case D.ATTRIB_VALUE_QUOTED:if(Z!==O.q){Z==="&"?O.state=D.ATTRIB_VALUE_ENTITY_Q:O.attribValue+=Z;continue}ke(O),O.q="",O.state=D.ATTRIB_VALUE_CLOSED;continue;case D.ATTRIB_VALUE_CLOSED:A(Z)?O.state=D.ATTRIB:Z===">"?We(O):Z==="/"?O.state=D.OPEN_TAG_SLASH:B(x,Z)?(ce(O,"No whitespace between attributes"),O.attribName=Z,O.attribValue="",O.state=D.ATTRIB_NAME):ce(O,"Invalid attribute name");continue;case D.ATTRIB_VALUE_UNQUOTED:if(!F(Z)){Z==="&"?O.state=D.ATTRIB_VALUE_ENTITY_U:O.attribValue+=Z;continue}ke(O),Z===">"?We(O):O.state=D.ATTRIB;continue;case D.CLOSE_TAG:if(O.tagName)Z===">"?_t(O):B(E,Z)?O.tagName+=Z:O.script?(O.script+="</"+O.tagName,O.tagName="",O.state=D.SCRIPT):(A(Z)||ce(O,"Invalid tagname in closing tag"),O.state=D.CLOSE_TAG_SAW_WHITE);else{if(A(Z))continue;ee(x,Z)?O.script?(O.script+="</"+Z,O.state=D.SCRIPT):ce(O,"Invalid tagname in closing tag."):O.tagName=Z}continue;case D.CLOSE_TAG_SAW_WHITE:if(A(Z))continue;Z===">"?_t(O):ce(O,"Invalid characters in closing tag");continue;case D.TEXT_ENTITY:case D.ATTRIB_VALUE_ENTITY_Q:case D.ATTRIB_VALUE_ENTITY_U:var yr,Yr;switch(O.state){case D.TEXT_ENTITY:yr=D.TEXT,Yr="textNode";break;case D.ATTRIB_VALUE_ENTITY_Q:yr=D.ATTRIB_VALUE_QUOTED,Yr="attribValue";break;case D.ATTRIB_VALUE_ENTITY_U:yr=D.ATTRIB_VALUE_UNQUOTED,Yr="attribValue";break}if(Z===";")if(O.opt.unparsedEntities){var Ei=Ot(O);O.entity="",O.state=yr,O.write(Ei)}else O[Yr]+=Ot(O),O.entity="",O.state=yr;else B(O.entity.length?S:C,Z)?O.entity+=Z:(ce(O,"Invalid character in entity name"),O[Yr]+="&"+O.entity+Z,O.entity="",O.state=yr);continue;default:throw new Error(O,"Unknown state: "+O.state)}return O.position>=O.bufferCheckPosition&&r(O),O}return String.fromCodePoint||(function(){var M=String.fromCharCode,O=Math.floor,ie=function(){var Z=16384,en=[],Wn,yr,Yr=-1,Ei=arguments.length;if(!Ei)return"";for(var ts="";++Yr<Ei;){var vr=Number(arguments[Yr]);if(!isFinite(vr)||vr<0||vr>1114111||O(vr)!==vr)throw RangeError("Invalid code point: "+vr);vr<=65535?en.push(vr):(vr-=65536,Wn=(vr>>10)+55296,yr=vr%1024+56320,en.push(Wn,yr)),(Yr+1===Ei||en.length>Z)&&(ts+=M.apply(null,en),en.length=0)}return ts};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:ie,configurable:!0,writable:!0}):String.fromCodePoint=ie})(),e},zde=w6e();var AR=`The output should be formatted as a XML file.
1. Output should conform to the tags below. 
2. If tags are not given, make them on your own.
3. Remember to always open and close all the tags.

As an example, for the tags ["foo", "bar", "baz"]:
1. String "<foo>
   <bar>
      <baz></baz>
   </bar>
</foo>" is a well-formatted instance of the schema. 
2. String "<foo>
   <bar>
   </foo>" is a badly-formatted instance.
3. String "<foo>
   <tag>
   </tag>
</foo>" is a badly-formatted instance.

Here are the output tags:
\`\`\`
{tags}
\`\`\``,Bde=class extends Xl{tags;constructor(e){super(e),this.tags=e?.tags}static lc_name(){return"XMLOutputParser"}lc_namespace=["langchain_core","output_parsers"];lc_serializable=!0;_diff(e,t){if(t)return e?nm(e,t):[{op:"replace",path:"",value:t}]}parsePartialResult(e){return y(this,null,function*(){return OR(e[0].text)})}parse(e){return y(this,null,function*(){return OR(e)})}getFormatInstructions(){return!!(this.tags&&this.tags.length>0)?AR.replace("{tags}",this.tags?.join(", ")??""):AR}},x6e=e=>e.split(`
`).map(t=>t.replace(/^\s+/,"")).join(`
`).trim(),Ude=e=>{if(Object.keys(e).length===0)return{};let t={};return e.children.length>0?(t[e.name]=e.children.map(Ude),t):(t[e.name]=e.text??void 0,t)};function OR(e){let t=x6e(e),n=zde.parser(!0),r={},i=[];n.onopentag=a=>{let c={name:a.name,attributes:a.attributes,children:[],text:"",isSelfClosing:a.isSelfClosing};i.length>0?i[i.length-1].children.push(c):r=c,a.isSelfClosing||i.push(c)},n.onclosetag=()=>{if(i.length>0){let a=i.pop();i.length===0&&a&&(r=a)}},n.ontext=a=>{if(i.length>0){let c=i[i.length-1];c.text+=a}},n.onattribute=a=>{if(i.length>0){let c=i[i.length-1];c.attributes[a.name]=a.value}};let o=/```(xml)?(.*)```/s.exec(t),s=o?o[2]:t;return n.write(s).close(),r&&r.name==="?xml"&&(r=r.children[0]),Ude(r)}var A5={};ae(A5,{AsymmetricStructuredOutputParser:()=>jde,BaseCumulativeTransformOutputParser:()=>Xl,BaseLLMOutputParser:()=>Gy,BaseOutputParser:()=>wd,BaseTransformOutputParser:()=>xd,BytesOutputParser:()=>Rde,CommaSeparatedListOutputParser:()=>Nde,CustomListOutputParser:()=>$de,JsonMarkdownStructuredOutputParser:()=>T5,JsonOutputParser:()=>BC,ListOutputParser:()=>Wy,MarkdownListOutputParser:()=>Fde,NumberedListOutputParser:()=>Lde,OutputParserException:()=>Sa,StringOutputParser:()=>TR,StructuredOutputParser:()=>Ky,XMLOutputParser:()=>Bde,XML_FORMAT_INSTRUCTIONS:()=>AR,parseJsonMarkdown:()=>mC,parsePartialJson:()=>Zl,parseXMLMarkdown:()=>OR});var eu=class extends dt{lc_serializable=!0;lc_namespace=["langchain_core","prompts",this._getPromptType()];get lc_attributes(){return{partialVariables:void 0}}inputVariables;outputParser;partialVariables;metadata;tags;constructor(e){super(e);let{inputVariables:t}=e;if(t.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}mergePartialAndUserVariables(e){return y(this,null,function*(){let t=this.partialVariables??{},n={};for(let[i,o]of Object.entries(t))typeof o=="string"?n[i]=o:n[i]=yield o();return m(m({},n),e)})}invoke(e,t){return y(this,null,function*(){let n=m(m({},this.metadata),t?.metadata),r=[...this.tags??[],...t?.tags??[]];return this._callWithConfig(i=>this.formatPromptValue(i),e,b(m({},t),{tags:r,metadata:n,runType:"prompt"}))})}};var O5={};ae(O5,{BasePromptValue:()=>MR,ChatPromptValue:()=>VC,ImagePromptValue:()=>M5,StringPromptValue:()=>UC});var MR=class extends vi{},UC=class extends MR{static lc_name(){return"StringPromptValue"}lc_namespace=["langchain_core","prompt_values"];lc_serializable=!0;value;constructor(e){super({value:e}),this.value=e}toString(){return this.value}toChatMessages(){return[new Pi(this.value)]}},VC=class extends MR{lc_namespace=["langchain_core","prompt_values"];lc_serializable=!0;static lc_name(){return"ChatPromptValue"}messages;constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),this.messages=e.messages}toString(){return Ry(this.messages)}toChatMessages(){return this.messages}},M5=class extends MR{lc_namespace=["langchain_core","prompt_values"];lc_serializable=!0;static lc_name(){return"ImagePromptValue"}imageUrl;value;constructor(e){"imageUrl"in e||(e={imageUrl:e}),super(e),this.imageUrl=e.imageUrl}toString(){return this.imageUrl.url}toChatMessages(){return[new Pi({content:[{type:"image_url",image_url:{detail:this.imageUrl.detail,url:this.imageUrl.url}}]})]}};var Cd=class extends eu{formatPromptValue(e){return y(this,null,function*(){let t=yield this.format(e);return new UC(t)})}};var C6e=Object.prototype.toString,Yy=Array.isArray||function(t){return C6e.call(t)==="[object Array]"};function P5(e){return typeof e=="function"}function E6e(e){return Yy(e)?"array":typeof e}function D5(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Vde(e,t){return e!=null&&typeof e=="object"&&t in e}function I6e(e,t){return e!=null&&typeof e!="object"&&e.hasOwnProperty&&e.hasOwnProperty(t)}var S6e=RegExp.prototype.test;function k6e(e,t){return S6e.call(e,t)}var T6e=/\S/;function A6e(e){return!k6e(T6e,e)}var O6e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function M6e(e){return String(e).replace(/[&<>"'`=\/]/g,function(n){return O6e[n]})}var D6e=/\s*/,P6e=/\s+/,Hde=/\s*=/,R6e=/\s*\}/,N6e=/#|\^|\/|>|\{|&|=|!/;function $6e(e,t){if(!e)return[];var n=!1,r=[],i=[],o=[],s=!1,a=!1,c="",u=0;function d(){if(s&&!a)for(;o.length;)delete i[o.pop()];else o=[];s=!1,a=!1}var f,g,h;function v(D){if(typeof D=="string"&&(D=D.split(P6e,2)),!Yy(D)||D.length!==2)throw new Error("Invalid tags: "+D);f=new RegExp(D5(D[0])+"\\s*"),g=new RegExp("\\s*"+D5(D[1])),h=new RegExp("\\s*"+D5("}"+D[1]))}v(t||uc.tags);for(var x=new ZC(e),E,C,S,A,P,F;!x.eos();){if(E=x.pos,S=x.scanUntil(f),S)for(var B=0,ee=S.length;B<ee;++B)A=S.charAt(B),A6e(A)?(o.push(i.length),c+=A):(a=!0,n=!0,c+=" "),i.push(["text",A,E,E+1]),E+=1,A===`
`&&(d(),c="",u=0,n=!1);if(!x.scan(f))break;if(s=!0,C=x.scan(N6e)||"name",x.scan(D6e),C==="="?(S=x.scanUntil(Hde),x.scan(Hde),x.scanUntil(g)):C==="{"?(S=x.scanUntil(h),x.scan(R6e),x.scanUntil(g),C="&"):S=x.scanUntil(g),!x.scan(g))throw new Error("Unclosed tag at "+x.pos);if(C==">"?P=[C,S,E,x.pos,c,u,n]:P=[C,S,E,x.pos],u++,i.push(P),C==="#"||C==="^")r.push(P);else if(C==="/"){if(F=r.pop(),!F)throw new Error('Unopened section "'+S+'" at '+E);if(F[1]!==S)throw new Error('Unclosed section "'+F[1]+'" at '+E)}else C==="name"||C==="{"||C==="&"?a=!0:C==="="&&v(S)}if(d(),F=r.pop(),F)throw new Error('Unclosed section "'+F[1]+'" at '+x.pos);return F6e(L6e(i))}function L6e(e){for(var t=[],n,r,i=0,o=e.length;i<o;++i)n=e[i],n&&(n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(t.push(n),r=n));return t}function F6e(e){for(var t=[],n=t,r=[],i,o,s=0,a=e.length;s<a;++s)switch(i=e[s],i[0]){case"#":case"^":n.push(i),r.push(i),n=i[4]=[];break;case"/":o=r.pop(),o[5]=i[2],n=r.length>0?r[r.length-1][4]:t;break;default:n.push(i)}return t}function ZC(e){this.string=e,this.tail=e,this.pos=0}ZC.prototype.eos=function(){return this.tail===""};ZC.prototype.scan=function(t){var n=this.tail.match(t);if(!n||n.index!==0)return"";var r=n[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r};ZC.prototype.scanUntil=function(t){var n=this.tail.search(t),r;switch(n){case-1:r=this.tail,this.tail="";break;case 0:r="";break;default:r=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=r.length,r};function Jy(e,t){this.view=e,this.cache={".":this.view},this.parent=t}Jy.prototype.push=function(t){return new Jy(t,this)};Jy.prototype.lookup=function(t){var n=this.cache,r;if(n.hasOwnProperty(t))r=n[t];else{for(var i=this,o,s,a,c=!1;i;){if(t.indexOf(".")>0)for(o=i.view,s=t.split("."),a=0;o!=null&&a<s.length;)a===s.length-1&&(c=Vde(o,s[a])||I6e(o,s[a])),o=o[s[a++]];else o=i.view[t],c=Vde(i.view,t);if(c){r=o;break}i=i.parent}n[t]=r}return P5(r)&&(r=r.call(this.view)),r};function ks(){this.templateCache={_cache:{},set:function(t,n){this._cache[t]=n},get:function(t){return this._cache[t]},clear:function(){this._cache={}}}}ks.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};ks.prototype.parse=function(t,n){var r=this.templateCache,i=t+":"+(n||uc.tags).join(":"),o=typeof r<"u",s=o?r.get(i):void 0;return s==null&&(s=$6e(t,n),o&&r.set(i,s)),s};ks.prototype.render=function(t,n,r,i){var o=this.getConfigTags(i),s=this.parse(t,o),a=n instanceof Jy?n:new Jy(n,void 0);return this.renderTokens(s,a,r,t,i)};ks.prototype.renderTokens=function(t,n,r,i,o){for(var s="",a,c,u,d=0,f=t.length;d<f;++d)u=void 0,a=t[d],c=a[0],c==="#"?u=this.renderSection(a,n,r,i,o):c==="^"?u=this.renderInverted(a,n,r,i,o):c===">"?u=this.renderPartial(a,n,r,o):c==="&"?u=this.unescapedValue(a,n):c==="name"?u=this.escapedValue(a,n,o):c==="text"&&(u=this.rawValue(a)),u!==void 0&&(s+=u);return s};ks.prototype.renderSection=function(t,n,r,i,o){var s=this,a="",c=n.lookup(t[1]);function u(g){return s.render(g,n,r,o)}if(c){if(Yy(c))for(var d=0,f=c.length;d<f;++d)a+=this.renderTokens(t[4],n.push(c[d]),r,i,o);else if(typeof c=="object"||typeof c=="string"||typeof c=="number")a+=this.renderTokens(t[4],n.push(c),r,i,o);else if(P5(c)){if(typeof i!="string")throw new Error("Cannot use higher-order sections without the original template");c=c.call(n.view,i.slice(t[3],t[5]),u),c!=null&&(a+=c)}else a+=this.renderTokens(t[4],n,r,i,o);return a}};ks.prototype.renderInverted=function(t,n,r,i,o){var s=n.lookup(t[1]);if(!s||Yy(s)&&s.length===0)return this.renderTokens(t[4],n,r,i,o)};ks.prototype.indentPartial=function(t,n,r){for(var i=n.replace(/[^ \t]/g,""),o=t.split(`
`),s=0;s<o.length;s++)o[s].length&&(s>0||!r)&&(o[s]=i+o[s]);return o.join(`
`)};ks.prototype.renderPartial=function(t,n,r,i){if(r){var o=this.getConfigTags(i),s=P5(r)?r(t[1]):r[t[1]];if(s!=null){var a=t[6],c=t[5],u=t[4],d=s;c==0&&u&&(d=this.indentPartial(s,u,a));var f=this.parse(d,o);return this.renderTokens(f,n,r,d,i)}}};ks.prototype.unescapedValue=function(t,n){var r=n.lookup(t[1]);if(r!=null)return r};ks.prototype.escapedValue=function(t,n,r){var i=this.getConfigEscape(r)||uc.escape,o=n.lookup(t[1]);if(o!=null)return typeof o=="number"&&i===uc.escape?String(o):i(o)};ks.prototype.rawValue=function(t){return t[1]};ks.prototype.getConfigTags=function(t){return Yy(t)?t:t&&typeof t=="object"?t.tags:void 0};ks.prototype.getConfigEscape=function(t){if(t&&typeof t=="object"&&!Yy(t))return t.escape};var uc={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){HC.templateCache=e},get templateCache(){return HC.templateCache}},HC=new ks;uc.clearCache=function(){return HC.clearCache()};uc.parse=function(t,n){return HC.parse(t,n)};uc.render=function(t,n,r,i){if(typeof t!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+E6e(t)+'" was given as the first argument for mustache#render(template, view, partials)');return HC.render(t,n,r,i)};uc.escape=M6e;uc.Scanner=ZC;uc.Context=Jy;uc.Writer=ks;var DR=uc;function Zde(){DR.escape=e=>e}var ch=e=>{let t=e.split(""),n=[],r=(o,s)=>{for(let a=s;a<t.length;a+=1)if(o.includes(t[a]))return a;return-1},i=0;for(;i<t.length;)if(t[i]==="{"&&i+1<t.length&&t[i+1]==="{")n.push({type:"literal",text:"{"}),i+=2;else if(t[i]==="}"&&i+1<t.length&&t[i+1]==="}")n.push({type:"literal",text:"}"}),i+=2;else if(t[i]==="{"){let o=r("}",i);if(o<0)throw new Error("Unclosed '{' in template.");n.push({type:"variable",name:t.slice(i+1,o).join("")}),i=o+1}else{if(t[i]==="}")throw new Error("Single '}' in template.");{let o=r("{}",i),s=(o<0?t.slice(i):t.slice(i,o)).join("");n.push({type:"literal",text:s}),i=o<0?t.length:o}}return n},qde=(e,t=[])=>{let n=[];for(let r of e)if(r[0]==="name"){let i=r[1].includes(".")?r[1].split(".")[0]:r[1];n.push({type:"variable",name:i})}else if(["#","&","^",">"].includes(r[0])){if(n.push({type:"variable",name:r[1]}),r[0]==="#"&&r.length>4&&Array.isArray(r[4])){let i=[...t,r[1]],o=qde(r[4],i);n.push(...o)}}else n.push({type:"literal",text:r[1]});return n},Qy=e=>{Zde();let t=DR.parse(e);return qde(t)},R5=(e,t)=>ch(e).reduce((n,r)=>{if(r.type==="variable"){if(r.name in t){let i=typeof t[r.name]=="string"?t[r.name]:JSON.stringify(t[r.name]);return n+i}throw new Error(`(f-string) Missing value for input ${r.name}`)}return n+r.text},""),N5=(e,t)=>(Zde(),DR.render(e,t)),qC={"f-string":R5,mustache:N5},$5={"f-string":ch,mustache:Qy},Wo=(e,t,n)=>{try{return qC[t](e,n)}catch(r){throw Zp(r,"INVALID_PROMPT_INPUT")}},lh=(e,t)=>$5[t](e),Ed=(e,t,n)=>{if(!(t in qC)){let r=Object.keys(qC);throw new Error(`Invalid template format. Got \`${t}\`;
                         should be one of ${r}`)}try{let r=n.reduce((i,o)=>(i[o]="foo",i),{});Array.isArray(e)?e.forEach(i=>{if(i.type==="text"&&"text"in i&&typeof i.text=="string")Wo(i.text,t,r);else if(i.type==="image_url"){if(typeof i.image_url=="string")Wo(i.image_url,t,r);else if(typeof i.image_url=="object"&&i.image_url!==null&&"url"in i.image_url&&typeof i.image_url.url=="string"){let o=i.image_url.url;Wo(o,t,r)}}else throw new Error(`Invalid message template received. ${JSON.stringify(i,null,2)}`)}):Wo(e,t,r)}catch(r){throw new Error(`Invalid prompt schema: ${r.message}`)}};var Zc=class GC extends Cd{static lc_name(){return"PromptTemplate"}template;templateFormat="f-string";validateTemplate=!0;additionalContentFields;constructor(t){if(super(t),t.templateFormat==="mustache"&&t.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,t),this.validateTemplate){if(this.templateFormat==="mustache")throw new Error("Mustache templates cannot be validated.");let n=this.inputVariables;this.partialVariables&&(n=n.concat(Object.keys(this.partialVariables))),Ed(this.template,this.templateFormat,n)}}_getPromptType(){return"prompt"}format(t){return y(this,null,function*(){let n=yield this.mergePartialAndUserVariables(t);return Wo(this.template,this.templateFormat,n)})}static fromExamples(t,n,r,i=`

`,o=""){let s=[o,...t,n].join(i);return new GC({inputVariables:r,template:s})}static fromTemplate(t,n){let s=n??{},{templateFormat:r="f-string"}=s,i=se(s,["templateFormat"]),o=new Set;return lh(t,r).forEach(a=>{a.type==="variable"&&o.add(a.name)}),new GC(m({inputVariables:[...o],templateFormat:r,template:t},i))}partial(t){return y(this,null,function*(){let n=this.inputVariables.filter(o=>!(o in t)),r=m(m({},this.partialVariables??{}),t),i=b(m({},this),{inputVariables:n,partialVariables:r});return new GC(i)})}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static deserialize(t){return y(this,null,function*(){if(!t.template)throw new Error("Prompt template must have a template");return new GC({inputVariables:t.input_variables,template:t.template,templateFormat:t.template_format})})}};var Xy=class Gde extends eu{static lc_name(){return"ImagePromptTemplate"}lc_namespace=["langchain_core","prompts","image"];template;templateFormat="f-string";validateTemplate=!0;additionalContentFields;constructor(t){if(super(t),this.template=t.template,this.templateFormat=t.templateFormat??this.templateFormat,this.validateTemplate=t.validateTemplate??this.validateTemplate,this.additionalContentFields=t.additionalContentFields,this.validateTemplate){let n=this.inputVariables;this.partialVariables&&(n=n.concat(Object.keys(this.partialVariables))),Ed([{type:"image_url",image_url:this.template}],this.templateFormat,n)}}_getPromptType(){return"prompt"}partial(t){return y(this,null,function*(){let n=this.inputVariables.filter(o=>!(o in t)),r=m(m({},this.partialVariables??{}),t),i=b(m({},this),{inputVariables:n,partialVariables:r});return new Gde(i)})}format(t){return y(this,null,function*(){let n={};for(let[s,a]of Object.entries(this.template))typeof a=="string"?n[s]=Wo(a,this.templateFormat,t):n[s]=a;let r=t.url||n.url,i=t.detail||n.detail;if(!r)throw new Error("Must provide either an image URL.");if(typeof r!="string")throw new Error("url must be a string.");let o={url:r};return i&&(o.detail=i),o})}formatPromptValue(t){return y(this,null,function*(){let n=yield this.format(t);return new M5(n)})}};var WC=class extends dt{lc_namespace=["langchain_core","prompts","dict"];lc_serializable=!0;template;templateFormat;inputVariables;static lc_name(){return"DictPromptTemplate"}constructor(e){let t=e.templateFormat??"f-string",n=L5(e.template,t);super(m({inputVariables:n},e)),this.template=e.template,this.templateFormat=t,this.inputVariables=n}format(e){return y(this,null,function*(){return F5(this.template,e,this.templateFormat)})}invoke(e){return y(this,null,function*(){return yield this._callWithConfig(this.format.bind(this),e,{runType:"prompt"})})}};function L5(e,t){let n=[];for(let r of Object.values(e))if(typeof r=="string")lh(r,t).forEach(i=>{i.type==="variable"&&n.push(i.name)});else if(Array.isArray(r))for(let i of r)typeof i=="string"?lh(i,t).forEach(o=>{o.type==="variable"&&n.push(o.name)}):typeof i=="object"&&n.push(...L5(i,t));else typeof r=="object"&&r!==null&&n.push(...L5(r,t));return Array.from(new Set(n))}function F5(e,t,n){let r={};for(let[i,o]of Object.entries(e))if(typeof o=="string")r[i]=Wo(o,n,t);else if(Array.isArray(o)){let s=[];for(let a of o)typeof a=="string"?s.push(Wo(a,n,t)):typeof a=="object"&&s.push(F5(a,t,n));r[i]=s}else typeof o=="object"&&o!==null?r[i]=F5(o,t,n):r[i]=o;return r}var KC=class extends dt{lc_namespace=["langchain_core","prompts","chat"];lc_serializable=!0;invoke(e,t){return y(this,null,function*(){return this._callWithConfig(n=>this.formatMessages(n),e,b(m({},t),{runType:"prompt"}))})}},RR=class extends KC{static lc_name(){return"MessagesPlaceholder"}variableName;optional;constructor(e){typeof e=="string"&&(e={variableName:e}),super(e),this.variableName=e.variableName,this.optional=e.optional??!1}get inputVariables(){return[this.variableName]}formatMessages(e){return y(this,null,function*(){let t=e[this.variableName];if(this.optional&&!t)return[];if(!t){let r=new Error(`Field "${this.variableName}" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages as an input value. Received: undefined`);throw r.name="InputFormatError",r}let n;try{Array.isArray(t)?n=t.map(ys):n=[ys(t)]}catch(r){let i=typeof t=="string"?t:JSON.stringify(t,null,2),o=new Error([`Field "${this.variableName}" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages or coerceable values as input.`,`Received value: ${i}`,`Additional message: ${r.message}`].join(`

`));throw o.name="InputFormatError",o.lc_error_code=r.lc_error_code,o}return n})}},j5=class extends KC{prompt;constructor(e){"prompt"in e||(e={prompt:e}),super(e),this.prompt=e.prompt}get inputVariables(){return this.prompt.inputVariables}formatMessages(e){return y(this,null,function*(){return[yield this.format(e)]})}},JC=class extends eu{constructor(e){super(e)}format(e){return y(this,null,function*(){return(yield this.formatPromptValue(e)).toString()})}formatPromptValue(e){return y(this,null,function*(){let t=yield this.formatMessages(e);return new VC(t)})}},z5=class extends j5{static lc_name(){return"ChatMessagePromptTemplate"}role;constructor(e,t){"prompt"in e||(e={prompt:e,role:t}),super(e),this.role=e.role}format(e){return y(this,null,function*(){return new _s(yield this.prompt.format(e),this.role)})}static fromTemplate(e,t,n){return new this(Zc.fromTemplate(e,{templateFormat:n?.templateFormat}),t)}};function j6e(e){return e===null||typeof e!="object"||Array.isArray(e)?!1:Object.keys(e).length===1&&"text"in e&&typeof e.text=="string"}function z6e(e){return e===null||typeof e!="object"||Array.isArray(e)?!1:"image_url"in e&&(typeof e.image_url=="string"||typeof e.image_url=="object"&&e.image_url!==null&&"url"in e.image_url&&typeof e.image_url.url=="string")}var B5=class extends KC{lc_namespace=["langchain_core","prompts","chat"];lc_serializable=!0;inputVariables=[];additionalOptions={};prompt;messageClass;static _messageClass(){throw new Error("Can not invoke _messageClass from inside _StringImageMessagePromptTemplate")}chatMessageClass;constructor(e,t){if("prompt"in e||(e={prompt:e}),super(e),this.prompt=e.prompt,Array.isArray(this.prompt)){let n=[];this.prompt.forEach(r=>{"inputVariables"in r&&(n=n.concat(r.inputVariables))}),this.inputVariables=n}else this.inputVariables=this.prompt.inputVariables;this.additionalOptions=t??this.additionalOptions}createMessage(e){let t=this.constructor;if(t._messageClass()){let n=t._messageClass();return new n({content:e})}else if(t.chatMessageClass){let n=t.chatMessageClass();return new n({content:e,role:this.getRoleFromMessageClass(n.lc_name())})}else throw new Error("No message class defined")}getRoleFromMessageClass(e){switch(e){case"HumanMessage":return"human";case"AIMessage":return"ai";case"SystemMessage":return"system";case"ChatMessage":return"chat";default:throw new Error("Invalid message class name")}}static fromTemplate(e,t){if(typeof e=="string")return new this(Zc.fromTemplate(e,t));let n=[];for(let r of e)if(typeof r=="string")n.push(Zc.fromTemplate(r,t));else if(r!==null)if(j6e(r)){let i="";typeof r.text=="string"&&(i=r.text??"");let o=b(m({},t),{additionalContentFields:r});n.push(Zc.fromTemplate(i,o))}else if(z6e(r)){let i=r.image_url??"",o,s=[];if(typeof i=="string"){let a;t?.templateFormat==="mustache"?a=Qy(i):a=ch(i);let c=a.flatMap(u=>u.type==="variable"?[u.name]:[]);if((c?.length??0)>0){if(c.length>1)throw new Error(`Only one format variable allowed per image template.
Got: ${c}
From: ${i}`);s=[c[0]]}else s=[];i={url:i},o=new Xy({template:i,inputVariables:s,templateFormat:t?.templateFormat,additionalContentFields:r})}else if(typeof i=="object"){if("url"in i){let a;t?.templateFormat==="mustache"?a=Qy(i.url):a=ch(i.url),s=a.flatMap(c=>c.type==="variable"?[c.name]:[])}else s=[];o=new Xy({template:i,inputVariables:s,templateFormat:t?.templateFormat,additionalContentFields:r})}else throw new Error("Invalid image template");n.push(o)}else typeof r=="object"&&n.push(new WC({template:r,templateFormat:t?.templateFormat}));return new this({prompt:n,additionalOptions:t})}format(e){return y(this,null,function*(){if(this.prompt instanceof Cd){let t=yield this.prompt.format(e);return this.createMessage(t)}else{let t=[];for(let n of this.prompt){let r={};if(!("inputVariables"in n))throw new Error(`Prompt ${n} does not have inputVariables defined.`);for(let i of n.inputVariables)r||(r={[i]:e[i]}),r=b(m({},r),{[i]:e[i]});if(n instanceof Cd){let i=yield n.format(r),o;"additionalContentFields"in n&&(o=n.additionalContentFields),i!==""&&t.push(b(m({},o),{type:"text",text:i}))}else if(n instanceof Xy){let i=yield n.format(r),o;"additionalContentFields"in n&&(o=n.additionalContentFields),t.push(b(m({},o),{type:"image_url",image_url:i}))}else if(n instanceof WC){let i=yield n.format(r),o;"additionalContentFields"in n&&(o=n.additionalContentFields),t.push(m(m({},o),i))}}return this.createMessage(t)}})}formatMessages(e){return y(this,null,function*(){return[yield this.format(e)]})}},om=class extends B5{static _messageClass(){return Pi}static lc_name(){return"HumanMessagePromptTemplate"}},YC=class extends B5{static _messageClass(){return Sn}static lc_name(){return"AIMessagePromptTemplate"}},sm=class extends B5{static _messageClass(){return Zo}static lc_name(){return"SystemMessagePromptTemplate"}};function B6e(e){return typeof e.formatMessages=="function"}function U6e(e,t){if(B6e(e)||Gn(e))return e;if(Array.isArray(e)&&e[0]==="placeholder"){let i=e[1];if(t?.templateFormat==="mustache"&&typeof i=="string"&&i.slice(0,2)==="{{"&&i.slice(-2)==="}}"){let o=i.slice(2,-2);return new RR({variableName:o,optional:!0})}else if(typeof i=="string"&&i[0]==="{"&&i[i.length-1]==="}"){let o=i.slice(1,-1);return new RR({variableName:o,optional:!0})}throw new Error(`Invalid placeholder template for format ${t?.templateFormat??'"f-string"'}: "${e[1]}". Expected a variable name surrounded by ${t?.templateFormat==="mustache"?"double":"single"} curly braces.`)}let n=ys(e),r;if(typeof n.content=="string"?r=n.content:r=n.content.map(i=>"text"in i?b(m({},i),{text:i.text}):"image_url"in i?b(m({},i),{image_url:i.image_url}):i),n._getType()==="human")return om.fromTemplate(r,t);if(n._getType()==="ai")return YC.fromTemplate(r,t);if(n._getType()==="system")return sm.fromTemplate(r,t);if(_s.isInstance(n))return z5.fromTemplate(n.content,n.role,t);throw new Error(`Could not coerce message prompt template from input. Received message type: "${n._getType()}".`)}function V6e(e){return e.constructor.lc_name()==="MessagesPlaceholder"}var tu=class PR extends JC{static lc_name(){return"ChatPromptTemplate"}get lc_aliases(){return{promptMessages:"messages"}}promptMessages;validateTemplate=!0;templateFormat="f-string";constructor(t){if(super(t),t.templateFormat==="mustache"&&t.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,t),this.validateTemplate){let n=new Set;for(let a of this.promptMessages)if(!(a instanceof bi))for(let c of a.inputVariables)n.add(c);let r=this.inputVariables,i=new Set(this.partialVariables?r.concat(Object.keys(this.partialVariables)):r),o=new Set([...i].filter(a=>!n.has(a)));if(o.size>0)throw new Error(`Input variables \`${[...o]}\` are not used in any of the prompt messages.`);let s=new Set([...n].filter(a=>!i.has(a)));if(s.size>0)throw new Error(`Input variables \`${[...s]}\` are used in prompt messages but not in the prompt template.`)}}_getPromptType(){return"chat"}_parseImagePrompts(t,n){return y(this,null,function*(){if(typeof t.content=="string")return t;let r=yield Promise.all(t.content.map(i=>y(this,null,function*(){if(i.type!=="image_url")return i;let o="";typeof i.image_url=="string"?o=i.image_url:typeof i.image_url=="object"&&i.image_url!==null&&"url"in i.image_url&&typeof i.image_url.url=="string"&&(o=i.image_url.url);let a=yield Zc.fromTemplate(o,{templateFormat:this.templateFormat}).format(n);return typeof i.image_url=="object"&&i.image_url!==null&&"url"in i.image_url?i.image_url.url=a:i.image_url=a,i})));return t.content=r,t})}formatMessages(t){return y(this,null,function*(){let n=yield this.mergePartialAndUserVariables(t),r=[];for(let i of this.promptMessages)if(i instanceof bi)r.push(yield this._parseImagePrompts(i,n));else{let o;this.templateFormat==="mustache"?o=m({},n):o=i.inputVariables.reduce((a,c)=>{if(!(c in n)&&!(V6e(i)&&i.optional))throw Zp(new Error(`Missing value for input variable \`${c.toString()}\``),"INVALID_PROMPT_INPUT");return a[c]=n[c],a},{});let s=yield i.formatMessages(o);r=r.concat(s)}return r})}partial(t){return y(this,null,function*(){let n=this.inputVariables.filter(o=>!(o in t)),r=m(m({},this.partialVariables??{}),t),i=b(m({},this),{inputVariables:n,partialVariables:r});return new PR(i)})}static fromTemplate(t,n){let r=Zc.fromTemplate(t,n),i=new om({prompt:r});return this.fromMessages([i])}static fromMessages(t,n){let r=t.reduce((s,a)=>s.concat(a instanceof PR?a.promptMessages:[U6e(a,n)]),[]),i=t.reduce((s,a)=>a instanceof PR?Object.assign(s,a.partialVariables):s,Object.create(null)),o=new Set;for(let s of r)if(!(s instanceof bi))for(let a of s.inputVariables)a in i||o.add(a);return new this(b(m({},n),{inputVariables:[...o],promptMessages:r,partialVariables:i,templateFormat:n?.templateFormat}))}};var Wde=class U5 extends Cd{lc_serializable=!1;examples;exampleSelector;examplePrompt;suffix="";exampleSeparator=`

`;prefix="";templateFormat="f-string";validateTemplate=!0;constructor(t){if(super(t),Object.assign(this,t),this.examples!==void 0&&this.exampleSelector!==void 0)throw new Error("Only one of 'examples' and 'example_selector' should be provided");if(this.examples===void 0&&this.exampleSelector===void 0)throw new Error("One of 'examples' and 'example_selector' should be provided");if(this.validateTemplate){let n=this.inputVariables;this.partialVariables&&(n=n.concat(Object.keys(this.partialVariables))),Ed(this.prefix+this.suffix,this.templateFormat,n)}}_getPromptType(){return"few_shot"}static lc_name(){return"FewShotPromptTemplate"}getExamples(t){return y(this,null,function*(){if(this.examples!==void 0)return this.examples;if(this.exampleSelector!==void 0)return this.exampleSelector.selectExamples(t);throw new Error("One of 'examples' and 'example_selector' should be provided")})}partial(t){return y(this,null,function*(){let n=this.inputVariables.filter(o=>!(o in t)),r=m(m({},this.partialVariables??{}),t),i=b(m({},this),{inputVariables:n,partialVariables:r});return new U5(i)})}format(t){return y(this,null,function*(){let n=yield this.mergePartialAndUserVariables(t),r=yield this.getExamples(n),i=yield Promise.all(r.map(s=>this.examplePrompt.format(s))),o=[this.prefix,...i,this.suffix].join(this.exampleSeparator);return Wo(o,this.templateFormat,n)})}serialize(){if(this.exampleSelector||!this.examples)throw new Error("Serializing an example selector is not currently supported");if(this.outputParser!==void 0)throw new Error("Serializing an output parser is not currently supported");return{_type:this._getPromptType(),input_variables:this.inputVariables,example_prompt:this.examplePrompt.serialize(),example_separator:this.exampleSeparator,suffix:this.suffix,prefix:this.prefix,template_format:this.templateFormat,examples:this.examples}}static deserialize(t){return y(this,null,function*(){let{example_prompt:n}=t;if(!n)throw new Error("Missing example prompt");let r=yield Zc.deserialize(n),i;if(Array.isArray(t.examples))i=t.examples;else throw new Error("Invalid examples format. Only list or string are supported.");return new U5({inputVariables:t.input_variables,examplePrompt:r,examples:i,exampleSeparator:t.example_separator,prefix:t.prefix,suffix:t.suffix,templateFormat:t.template_format})})}},Kde=class Jde extends JC{lc_serializable=!0;examples;exampleSelector;examplePrompt;suffix="";exampleSeparator=`

`;prefix="";templateFormat="f-string";validateTemplate=!0;_getPromptType(){return"few_shot_chat"}static lc_name(){return"FewShotChatMessagePromptTemplate"}constructor(t){if(super(t),this.examples=t.examples,this.examplePrompt=t.examplePrompt,this.exampleSeparator=t.exampleSeparator??`

`,this.exampleSelector=t.exampleSelector,this.prefix=t.prefix??"",this.suffix=t.suffix??"",this.templateFormat=t.templateFormat??"f-string",this.validateTemplate=t.validateTemplate??!0,this.examples!==void 0&&this.exampleSelector!==void 0)throw new Error("Only one of 'examples' and 'example_selector' should be provided");if(this.examples===void 0&&this.exampleSelector===void 0)throw new Error("One of 'examples' and 'example_selector' should be provided");if(this.validateTemplate){let n=this.inputVariables;this.partialVariables&&(n=n.concat(Object.keys(this.partialVariables))),Ed(this.prefix+this.suffix,this.templateFormat,n)}}getExamples(t){return y(this,null,function*(){if(this.examples!==void 0)return this.examples;if(this.exampleSelector!==void 0)return this.exampleSelector.selectExamples(t);throw new Error("One of 'examples' and 'example_selector' should be provided")})}formatMessages(t){return y(this,null,function*(){let n=yield this.mergePartialAndUserVariables(t),r=yield this.getExamples(n);r=r.map(o=>{let s={};return this.examplePrompt.inputVariables.forEach(a=>{s[a]=o[a]}),s});let i=[];for(let o of r){let s=yield this.examplePrompt.formatMessages(o);i.push(...s)}return i})}format(t){return y(this,null,function*(){let n=yield this.mergePartialAndUserVariables(t),r=yield this.getExamples(n),o=(yield Promise.all(r.map(a=>this.examplePrompt.formatMessages(a)))).flat().map(a=>a.content),s=[this.prefix,...o,this.suffix].join(this.exampleSeparator);return Wo(s,this.templateFormat,n)})}partial(t){return y(this,null,function*(){let n=this.inputVariables.filter(o=>!(o in t)),r=m(m({},this.partialVariables??{}),t),i=b(m({},this),{inputVariables:n,partialVariables:r});return new Jde(i)})}};var Yde=class NR extends eu{static lc_name(){return"PipelinePromptTemplate"}pipelinePrompts;finalPrompt;constructor(t){super(b(m({},t),{inputVariables:[]})),this.pipelinePrompts=t.pipelinePrompts,this.finalPrompt=t.finalPrompt,this.inputVariables=this.computeInputValues()}computeInputValues(){let t=this.pipelinePrompts.map(r=>r.name),n=this.pipelinePrompts.map(r=>r.prompt.inputVariables.filter(i=>!t.includes(i))).flat();return[...new Set(n)]}static extractRequiredInputValues(t,n){return n.reduce((r,i)=>(r[i]=t[i],r),{})}formatPipelinePrompts(t){return y(this,null,function*(){let n=yield this.mergePartialAndUserVariables(t);for(let{name:r,prompt:i}of this.pipelinePrompts){let o=NR.extractRequiredInputValues(n,i.inputVariables);i instanceof tu?n[r]=yield i.formatMessages(o):n[r]=yield i.format(o)}return NR.extractRequiredInputValues(n,this.finalPrompt.inputVariables)})}formatPromptValue(t){return y(this,null,function*(){return this.finalPrompt.formatPromptValue(yield this.formatPipelinePrompts(t))})}format(t){return y(this,null,function*(){return this.finalPrompt.format(yield this.formatPipelinePrompts(t))})}partial(t){return y(this,null,function*(){let n=m({},this);return n.inputVariables=this.inputVariables.filter(r=>!(r in t)),n.partialVariables=m(m({},this.partialVariables??{}),t),new NR(n)})}serialize(){throw new Error("Not implemented.")}_getPromptType(){return"pipeline"}};function Qde(e){return typeof e=="object"&&e!=null&&"withStructuredOutput"in e&&typeof e.withStructuredOutput=="function"}function H6e(e){return typeof e=="object"&&e!=null&&"lc_id"in e&&Array.isArray(e.lc_id)&&e.lc_id.join("/")==="langchain_core/runnables/RunnableBinding"}var Xde=class epe extends tu{schema;method;lc_namespace=["langchain_core","prompts","structured"];get lc_aliases(){return b(m({},super.lc_aliases),{schema:"schema_"})}constructor(t){super(t),this.schema=t.schema,this.method=t.method}pipe(t){if(Qde(t))return super.pipe(t.withStructuredOutput(this.schema));if(H6e(t)&&Qde(t.bound))return super.pipe(new ni({bound:t.bound.withStructuredOutput(this.schema,...this.method?[{method:this.method}]:[]),kwargs:t.kwargs??{},config:t.config,configFactories:t.configFactories}));throw new Error('Structured prompts need to be piped to a language model that supports the "withStructuredOutput()" method.')}static fromMessagesAndSchema(t,n,r){return epe.fromMessages(t,{schema:n,method:r})}};var V5={};ae(V5,{AIMessagePromptTemplate:()=>YC,BaseChatPromptTemplate:()=>JC,BaseMessagePromptTemplate:()=>KC,BaseMessageStringPromptTemplate:()=>j5,BasePromptTemplate:()=>eu,BaseStringPromptTemplate:()=>Cd,ChatMessagePromptTemplate:()=>z5,ChatPromptTemplate:()=>tu,DEFAULT_FORMATTER_MAPPING:()=>qC,DEFAULT_PARSER_MAPPING:()=>$5,DictPromptTemplate:()=>WC,FewShotChatMessagePromptTemplate:()=>Kde,FewShotPromptTemplate:()=>Wde,HumanMessagePromptTemplate:()=>om,ImagePromptTemplate:()=>Xy,MessagesPlaceholder:()=>RR,PipelinePromptTemplate:()=>Yde,PromptTemplate:()=>Zc,StructuredPrompt:()=>Xde,SystemMessagePromptTemplate:()=>sm,checkValidTemplate:()=>Ed,interpolateFString:()=>R5,interpolateMustache:()=>N5,parseFString:()=>ch,parseMustache:()=>Qy,parseTemplate:()=>lh,renderTemplate:()=>Wo});var $R=class e{formatToolForOpenAI(t){let n=i=>{if(!i||typeof i!="object")return i;let o=m({},i);if(i.type==="array"){if(!i.items)throw new Error("Array schema for key is missing 'items'.");Array.isArray(i.items)?o.items=i.items.map(s=>n(s)):o.items=n(i.items)}if(i.type==="object"&&i.properties){o.properties={};for(let[s,a]of Object.entries(i.properties))o.properties[s]=n(a)}return o},r={};return Object.entries(t.inputSchema.properties).forEach(([i,o])=>{let s=t.annotations?.[i]?.description||`user questions on ${t.title}`;r[i]=b(m({},n(o)),{description:s})}),{type:"function",function:{name:t.name,description:t.description.trim(),parameters:{type:"object",properties:r,required:t.inputSchema.required}}}}formatMultipleTools(t){return t.map(n=>this.formatToolForOpenAI(n))}static \u0275fac=function(n){return new(n||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})};function QC(e,t){return e.lc_error_code=t,e.message=`${e.message}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langchain/errors/${t}/
`,e}function pt(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n}function q(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}var H5=function(){let{crypto:e}=globalThis;if(e?.randomUUID)return H5=e.randomUUID.bind(e),e.randomUUID();let t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function XC(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}var eE=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){let t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};var Le=class extends Error{},Wi=class e extends Le{constructor(t,n,r,i){super(`${e.makeMessage(t,n,r)}`),this.status=t,this.headers=i,this.requestID=i?.get("x-request-id"),this.error=n;let o=n;this.code=o?.code,this.param=o?.param,this.type=o?.type}static makeMessage(t,n,r){let i=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return t&&i?`${t} ${i}`:t?`${t} status code (no body)`:i||"(no status code or body)"}static generate(t,n,r,i){if(!t||!i)return new am({message:r,cause:eE(n)});let o=n?.error;return t===400?new ev(t,o,r,i):t===401?new tv(t,o,r,i):t===403?new nv(t,o,r,i):t===404?new rv(t,o,r,i):t===409?new iv(t,o,r,i):t===422?new ov(t,o,r,i):t===429?new sv(t,o,r,i):t>=500?new av(t,o,r,i):new e(t,o,r,i)}},pi=class extends Wi{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}},am=class extends Wi{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}},nu=class extends am{constructor({message:t}={}){super({message:t??"Request timed out."})}},ev=class extends Wi{},tv=class extends Wi{},nv=class extends Wi{},rv=class extends Wi{},iv=class extends Wi{},ov=class extends Wi{},sv=class extends Wi{},av=class extends Wi{},cv=class extends Le{constructor(){super("Could not parse response content as the length limit was reached")}},lv=class extends Le{constructor(){super("Could not parse response content as the request was rejected by the content filter")}},ru=class extends Error{constructor(t){super(t)}};var G6e=/^[a-z][a-z0-9+.-]*:/i,tpe=e=>G6e.test(e),Ko=e=>(Ko=Array.isArray,Ko(e)),Z5=Ko;function q5(e){return typeof e!="object"?{}:e??{}}function npe(e){if(!e)return!0;for(let t in e)return!1;return!0}function rpe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function tE(e){return e!=null&&typeof e=="object"&&!Array.isArray(e)}var ipe=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Le(`${e} must be an integer`);if(t<0)throw new Le(`${e} must be a positive integer`);return t};var ope=e=>{try{return JSON.parse(e)}catch{return}};var iu=e=>new Promise(t=>setTimeout(t,e));var cm="6.9.1";var lpe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function W6e(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}var K6e=()=>{let e=W6e();if(e==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cm,"X-Stainless-OS":ape(Deno.build.os),"X-Stainless-Arch":spe(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cm,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(e==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cm,"X-Stainless-OS":ape(globalThis.process.platform??"unknown"),"X-Stainless-Arch":spe(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};let t=J6e();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cm,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cm,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function J6e(){if(typeof navigator>"u"||!navigator)return null;let e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:t,pattern:n}of e){let r=n.exec(navigator.userAgent);if(r){let i=r[1]||0,o=r[2]||0,s=r[3]||0;return{browser:t,version:`${i}.${o}.${s}`}}}return null}var spe=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",ape=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown"),cpe,upe=()=>cpe??(cpe=K6e());function dpe(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function G5(...e){let t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function LR(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return G5({start(){},pull(r){return y(this,null,function*(){let{done:i,value:o}=yield t.next();i?r.close():r.enqueue(o)})},cancel(){return y(this,null,function*(){yield t.return?.()})}})}function W5(e){if(e[Symbol.asyncIterator])return e;let t=e.getReader();return{next(){return y(this,null,function*(){try{let r=yield t.read();return r?.done&&t.releaseLock(),r}catch(r){throw t.releaseLock(),r}})},return(){return y(this,null,function*(){let r=t.cancel();return t.releaseLock(),yield r,{done:!0,value:void 0}})},[Symbol.asyncIterator](){return this}}}function ppe(e){return y(this,null,function*(){if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){yield e[Symbol.asyncIterator]().return?.();return}let t=e.getReader(),n=t.cancel();t.releaseLock(),yield n})}var mpe=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});var FR="RFC3986",K5=e=>String(e),jR={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:K5},J5="RFC1738";var zR=(e,t)=>(zR=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),zR(e,t)),ou=(()=>{let e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})();var Y5=1024,fpe=(e,t,n,r,i)=>{if(e.length===0)return e;let o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let s="";for(let a=0;a<o.length;a+=Y5){let c=o.length>=Y5?o.slice(a,a+Y5):o,u=[];for(let d=0;d<c.length;++d){let f=c.charCodeAt(d);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||i===J5&&(f===40||f===41)){u[u.length]=c.charAt(d);continue}if(f<128){u[u.length]=ou[f];continue}if(f<2048){u[u.length]=ou[192|f>>6]+ou[128|f&63];continue}if(f<55296||f>=57344){u[u.length]=ou[224|f>>12]+ou[128|f>>6&63]+ou[128|f&63];continue}d+=1,f=65536+((f&1023)<<10|c.charCodeAt(d)&1023),u[u.length]=ou[240|f>>18]+ou[128|f>>12&63]+ou[128|f>>6&63]+ou[128|f&63]}s+=u.join("")}return s};function hpe(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function Q5(e,t){if(Ko(e)){let n=[];for(let r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)}var _pe={brackets(e){return String(e)+"[]"},comma:"comma",indices(e,t){return String(e)+"["+t+"]"},repeat(e){return String(e)}},ype=function(e,t){Array.prototype.push.apply(e,Ko(t)?t:[t])},gpe,Ki={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:fpe,encodeValuesOnly:!1,format:FR,formatter:K5,indices:!1,serializeDate(e){return(gpe??(gpe=Function.prototype.call.bind(Date.prototype.toISOString)))(e)},skipNulls:!1,strictNullHandling:!1};function X6e(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"}var X5={};function vpe(e,t,n,r,i,o,s,a,c,u,d,f,g,h,v,x,E,C){let S=e,A=C,P=0,F=!1;for(;(A=A.get(X5))!==void 0&&!F;){let xe=A.get(e);if(P+=1,typeof xe<"u"){if(xe===P)throw new RangeError("Cyclic object value");F=!0}typeof A.get(X5)>"u"&&(P=0)}if(typeof u=="function"?S=u(t,S):S instanceof Date?S=g?.(S):n==="comma"&&Ko(S)&&(S=Q5(S,function(xe){return xe instanceof Date?g?.(xe):xe})),S===null){if(o)return c&&!x?c(t,Ki.encoder,E,"key",h):t;S=""}if(X6e(S)||hpe(S)){if(c){let xe=x?t:c(t,Ki.encoder,E,"key",h);return[v?.(xe)+"="+v?.(c(S,Ki.encoder,E,"value",h))]}return[v?.(t)+"="+v?.(String(S))]}let B=[];if(typeof S>"u")return B;let ee;if(n==="comma"&&Ko(S))x&&c&&(S=Q5(S,c)),ee=[{value:S.length>0?S.join(",")||null:void 0}];else if(Ko(u))ee=u;else{let xe=Object.keys(S);ee=d?xe.sort(d):xe}let D=a?String(t).replace(/\./g,"%2E"):String(t),pe=r&&Ko(S)&&S.length===1?D+"[]":D;if(i&&Ko(S)&&S.length===0)return pe+"[]";for(let xe=0;xe<ee.length;++xe){let Ge=ee[xe],fe=typeof Ge=="object"&&typeof Ge.value<"u"?Ge.value:S[Ge];if(s&&fe===null)continue;let Se=f&&a?Ge.replace(/\./g,"%2E"):Ge,Fe=Ko(S)?typeof n=="function"?n(pe,Se):pe:pe+(f?"."+Se:"["+Se+"]");C.set(e,P);let Me=new WeakMap;Me.set(X5,C),ype(B,vpe(fe,Fe,n,r,i,o,s,a,n==="comma"&&x&&Ko(S)?null:c,u,d,f,g,h,v,x,E,Me))}return B}function eHe(e=Ki){if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");let t=e.charset||Ki.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=FR;if(typeof e.format<"u"){if(!zR(jR,e.format))throw new TypeError("Unknown format option provided.");n=e.format}let r=jR[n],i=Ki.filter;(typeof e.filter=="function"||Ko(e.filter))&&(i=e.filter);let o;if(e.arrayFormat&&e.arrayFormat in _pe?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=Ki.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");let s=typeof e.allowDots>"u"?e.encodeDotInKeys?!0:Ki.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Ki.addQueryPrefix,allowDots:s,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Ki.allowEmptyArrays,arrayFormat:o,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ki.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?Ki.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Ki.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:Ki.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:Ki.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Ki.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Ki.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Ki.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ki.strictNullHandling}}function eZ(e,t={}){let n=e,r=eHe(t),i,o;typeof r.filter=="function"?(o=r.filter,n=o("",n)):Ko(r.filter)&&(o=r.filter,i=o);let s=[];if(typeof n!="object"||n===null)return"";let a=_pe[r.arrayFormat],c=a==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);let u=new WeakMap;for(let g=0;g<i.length;++g){let h=i[g];r.skipNulls&&n[h]===null||ype(s,vpe(n[h],h,a,c,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}let d=s.join(r.delimiter),f=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),d.length>0?f+d:""}function xpe(e){let t=0;for(let i of e)t+=i.length;let n=new Uint8Array(t),r=0;for(let i of e)n.set(i,r),r+=i.length;return n}var bpe;function uv(e){let t;return(bpe??(t=new globalThis.TextEncoder,bpe=t.encode.bind(t)))(e)}var wpe;function tZ(e){let t;return(wpe??(t=new globalThis.TextDecoder,wpe=t.decode.bind(t)))(e)}var ka,Ta,uh=class{constructor(){ka.set(this,void 0),Ta.set(this,void 0),pt(this,ka,new Uint8Array,"f"),pt(this,Ta,null,"f")}decode(t){if(t==null)return[];let n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?uv(t):t;pt(this,ka,xpe([q(this,ka,"f"),n]),"f");let r=[],i;for(;(i=nHe(q(this,ka,"f"),q(this,Ta,"f")))!=null;){if(i.carriage&&q(this,Ta,"f")==null){pt(this,Ta,i.index,"f");continue}if(q(this,Ta,"f")!=null&&(i.index!==q(this,Ta,"f")+1||i.carriage)){r.push(tZ(q(this,ka,"f").subarray(0,q(this,Ta,"f")-1))),pt(this,ka,q(this,ka,"f").subarray(q(this,Ta,"f")),"f"),pt(this,Ta,null,"f");continue}let o=q(this,Ta,"f")!==null?i.preceding-1:i.preceding,s=tZ(q(this,ka,"f").subarray(0,o));r.push(s),pt(this,ka,q(this,ka,"f").subarray(i.index),"f"),pt(this,Ta,null,"f")}return r}flush(){return q(this,ka,"f").length?this.decode(`
`):[]}};ka=new WeakMap,Ta=new WeakMap;uh.NEWLINE_CHARS=new Set([`
`,"\r"]);uh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function nHe(e,t){for(let i=t??0;i<e.length;i++){if(e[i]===10)return{preceding:i,index:i+1,carriage:!1};if(e[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function Cpe(e){for(let r=0;r<e.length-1;r++){if(e[r]===10&&e[r+1]===10||e[r]===13&&e[r+1]===13)return r+2;if(e[r]===13&&e[r+1]===10&&r+3<e.length&&e[r+2]===13&&e[r+3]===10)return r+4}return-1}var UR={off:0,error:200,warn:300,info:400,debug:500},nZ=(e,t,n)=>{if(e){if(rpe(UR,e))return e;xi(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(UR))}`)}};function nE(){}function BR(e,t,n){return!t||UR[e]>UR[n]?nE:t[e].bind(t)}var rHe={error:nE,warn:nE,info:nE,debug:nE},Epe=new WeakMap;function xi(e){let t=e.logger,n=e.logLevel??"off";if(!t)return rHe;let r=Epe.get(t);if(r&&r[0]===n)return r[1];let i={error:BR("error",t,n),warn:BR("warn",t,n),info:BR("info",t,n),debug:BR("debug",t,n)};return Epe.set(t,[n,i]),i}var Id=e=>(e.options&&(e.options=m({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);var rE,su=class e{constructor(t,n,r){this.iterator=t,rE.set(this,void 0),this.controller=n,pt(this,rE,r,"f")}static fromSSEResponse(t,n,r){let i=!1,o=r?xi(r):console;function s(){return he(this,null,function*(){if(i)throw new Le("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{try{for(var c=ue(iHe(t,n)),u,d,f;u=!(d=yield new z(c.next())).done;u=!1){let g=d.value;if(!a){if(g.data.startsWith("[DONE]")){a=!0;continue}if(g.event===null||!g.event.startsWith("thread.")){let h;try{h=JSON.parse(g.data)}catch(v){throw o.error("Could not parse message into JSON:",g.data),o.error("From chunk:",g.raw),v}if(h&&h.error)throw new Wi(void 0,h.error,void 0,t.headers);yield h}else{let h;try{h=JSON.parse(g.data)}catch(v){throw console.error("Could not parse message into JSON:",g.data),console.error("From chunk:",g.raw),v}if(g.event=="error")throw new Wi(void 0,h.error,h.message,void 0);yield{event:g.event,data:h}}}}}catch{f=[d]}finally{try{u&&(d=c.return)&&(yield new z(d.call(c)))}finally{if(f)throw f[0]}}a=!0}catch(g){if(XC(g))return;throw g}finally{a||n.abort()}})}return new e(s,n,r)}static fromReadableStream(t,n,r){let i=!1;function o(){return he(this,null,function*(){let a=new uh,c=W5(t);try{for(var u=ue(c),d,f,g;d=!(f=yield new z(u.next())).done;d=!1){let h=f.value;for(let v of a.decode(h))yield v}}catch{g=[f]}finally{try{d&&(f=u.return)&&(yield new z(f.call(u)))}finally{if(g)throw g[0]}}for(let h of a.flush())yield h})}function s(){return he(this,null,function*(){if(i)throw new Le("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{try{for(var c=ue(o()),u,d,f;u=!(d=yield new z(c.next())).done;u=!1){let g=d.value;a||g&&(yield JSON.parse(g))}}catch{f=[d]}finally{try{u&&(d=c.return)&&(yield new z(d.call(c)))}finally{if(f)throw f[0]}}a=!0}catch(g){if(XC(g))return;throw g}finally{a||n.abort()}})}return new e(s,n,r)}[(rE=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){let t=[],n=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){let s=r.next();t.push(s),n.push(s)}return o.shift()}});return[new e(()=>i(t),this.controller,q(this,rE,"f")),new e(()=>i(n),this.controller,q(this,rE,"f"))]}toReadableStream(){let t=this,n;return G5({start(){return y(this,null,function*(){n=t[Symbol.asyncIterator]()})},pull(i){return y(this,null,function*(){try{let{value:o,done:s}=yield n.next();if(s)return i.close();let a=uv(JSON.stringify(o)+`
`);i.enqueue(a)}catch(o){i.error(o)}})},cancel(){return y(this,null,function*(){yield n.return?.()})}})}};function iHe(e,t){return he(this,null,function*(){if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Le("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Le("Attempted to iterate over a response with no body");let n=new rZ,r=new uh,i=W5(e.body);try{for(var o=ue(oHe(i)),s,a,c;s=!(a=yield new z(o.next())).done;s=!1){let u=a.value;for(let d of r.decode(u)){let f=n.decode(d);f&&(yield f)}}}catch{c=[a]}finally{try{s&&(a=o.return)&&(yield new z(a.call(o)))}finally{if(c)throw c[0]}}for(let u of r.flush()){let d=n.decode(u);d&&(yield d)}})}function oHe(e){return he(this,null,function*(){let t=new Uint8Array;try{for(var n=ue(e),r,i,o;r=!(i=yield new z(n.next())).done;r=!1){let s=i.value;if(s==null)continue;let a=s instanceof ArrayBuffer?new Uint8Array(s):typeof s=="string"?uv(s):s,c=new Uint8Array(t.length+a.length);c.set(t),c.set(a,t.length),t=c;let u;for(;(u=Cpe(t))!==-1;)yield t.slice(0,u),t=t.slice(u)}}catch{o=[i]}finally{try{r&&(i=n.return)&&(yield new z(i.call(n)))}finally{if(o)throw o[0]}}t.length>0&&(yield t)})}var rZ=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;let o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,r,i]=sHe(t,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}};function sHe(e,t){let n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}function VR(e,t){return y(this,null,function*(){let{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:o}=t,s=yield y(null,null,function*(){if(t.options.stream)return xi(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):su.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;let c=n.headers.get("content-type")?.split(";")[0]?.trim();if(c?.includes("application/json")||c?.endsWith("+json")){let f=yield n.json();return iZ(f,n)}return yield n.text()});return xi(e).debug(`[${r}] response parsed`,Id({retryOfRequestLogID:i,url:n.url,status:n.status,body:s,durationMs:Date.now()-o})),s})}function iZ(e,t){return!e||typeof e!="object"||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}var iE,dh=class e extends Promise{constructor(t,n,r=VR){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,iE.set(this,void 0),pt(this,iE,t,"f")}_thenUnwrap(t){return new e(q(this,iE,"f"),this.responsePromise,(n,r)=>y(this,null,function*(){return iZ(t(yield this.parseResponse(n,r),r),r.response)}))}asResponse(){return this.responsePromise.then(t=>t.response)}withResponse(){return y(this,null,function*(){let[t,n]=yield Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n,request_id:n.headers.get("x-request-id")}})}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(q(this,iE,"f"),t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}};iE=new WeakMap;var HR,oE=class{constructor(t,n,r,i){HR.set(this,void 0),pt(this,HR,t,"f"),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}getNextPage(){return y(this,null,function*(){let t=this.nextPageRequestOptions();if(!t)throw new Le("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return yield q(this,HR,"f").requestAPIList(this.constructor,t)})}iterPages(){return he(this,null,function*(){let t=this;for(yield t;t.hasNextPage();)t=yield new z(t.getNextPage()),yield t})}[(HR=new WeakMap,Symbol.asyncIterator)](){return he(this,null,function*(){try{for(var t=ue(this.iterPages()),n,r,i;n=!(r=yield new z(t.next())).done;n=!1){let o=r.value;for(let s of o.getPaginatedItems())yield s}}catch{i=[r]}finally{try{n&&(r=t.return)&&(yield new z(r.call(t)))}finally{if(i)throw i[0]}}})}},sE=class extends dh{constructor(t,n,r){super(t,n,(i,o)=>y(null,null,function*(){return new r(i,o.response,yield VR(i,o),o.options)}))}[Symbol.asyncIterator](){return he(this,null,function*(){let t=yield new z(this);try{for(var n=ue(t),r,i,o;r=!(i=yield new z(n.next())).done;r=!1){let s=i.value;yield s}}catch{o=[i]}finally{try{r&&(i=n.return)&&(yield new z(i.call(n)))}finally{if(o)throw o[0]}}})}},au=class extends oE{constructor(t,n,r,i){super(t,n,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}},un=class extends oE{constructor(t,n,r,i){super(t,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){let t=this.getPaginatedItems(),n=t[t.length-1]?.id;return n?b(m({},this.options),{query:b(m({},q5(this.options.query)),{after:n})}):null}},Sd=class extends oE{constructor(t,n,r,i){super(t,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){let t=this.last_id;return t?b(m({},this.options),{query:b(m({},q5(this.options.query)),{after:t})}):null}};var aZ=()=>{if(typeof File>"u"){let{process:e}=globalThis,t=typeof e?.versions?.node=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function dv(e,t,n){return aZ(),new File(e,t??"unknown_file",n)}function aE(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}var ZR=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function",cZ=(e,t)=>y(null,null,function*(){return oZ(e.body)?b(m({},e),{body:yield Spe(e.body,t)}):e}),Aa=(e,t)=>y(null,null,function*(){return b(m({},e),{body:yield Spe(e.body,t)})}),Ipe=new WeakMap;function cHe(e){let t=typeof e=="function"?e:e.fetch,n=Ipe.get(t);if(n)return n;let r=y(null,null,function*(){try{let i="Response"in t?t.Response:(yield t("data:,")).constructor,o=new FormData;return o.toString()!==(yield new i(o).text())}catch{return!0}});return Ipe.set(t,r),r}var Spe=(e,t)=>y(null,null,function*(){if(!(yield cHe(t)))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");let n=new FormData;return yield Promise.all(Object.entries(e||{}).map(([r,i])=>sZ(n,r,i))),n}),kpe=e=>e instanceof Blob&&"name"in e,lHe=e=>typeof e=="object"&&e!==null&&(e instanceof Response||ZR(e)||kpe(e)),oZ=e=>{if(lHe(e))return!0;if(Array.isArray(e))return e.some(oZ);if(e&&typeof e=="object"){for(let t in e)if(oZ(e[t]))return!0}return!1},sZ=(e,t,n)=>y(null,null,function*(){if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")e.append(t,String(n));else if(n instanceof Response)e.append(t,dv([yield n.blob()],aE(n)));else if(ZR(n))e.append(t,dv([yield new Response(LR(n)).blob()],aE(n)));else if(kpe(n))e.append(t,n,aE(n));else if(Array.isArray(n))yield Promise.all(n.map(r=>sZ(e,t+"[]",r)));else if(typeof n=="object")yield Promise.all(Object.entries(n).map(([r,i])=>sZ(e,`${t}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}});var Tpe=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",uHe=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&Tpe(e),dHe=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";function cE(e,t,n){return y(this,null,function*(){if(aZ(),e=yield e,uHe(e))return e instanceof File?e:dv([yield e.arrayBuffer()],e.name);if(dHe(e)){let i=yield e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),dv(yield lZ(i),t,n)}let r=yield lZ(e);if(t||(t=aE(e)),!n?.type){let i=r.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(n=b(m({},n),{type:i}))}return dv(r,t,n)})}function lZ(e){return y(this,null,function*(){let t=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(Tpe(e))t.push(e instanceof Blob?e:yield e.arrayBuffer());else if(ZR(e))try{for(var n=ue(e),r,i,o;r=!(i=yield n.next()).done;r=!1){let s=i.value;t.push(...yield lZ(s))}}catch{o=[i]}finally{try{r&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o[0]}}else{let s=e?.constructor?.name;throw new Error(`Unexpected data type: ${typeof e}${s?`; constructor: ${s}`:""}${pHe(e)}`)}return t})}function pHe(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}var oe=class{constructor(t){this._client=t}};function Ope(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}var Ape=Object.freeze(Object.create(null)),fHe=(e=Ope)=>function(n,...r){if(n.length===1)return n[0];let i=!1,o=[],s=n.reduce((d,f,g)=>{/[?#]/.test(f)&&(i=!0);let h=r[g],v=(i?encodeURIComponent:e)(""+h);return g!==r.length&&(h==null||typeof h=="object"&&h.toString===Object.getPrototypeOf(Object.getPrototypeOf(h.hasOwnProperty??Ape)??Ape)?.toString)&&(v=h+"",o.push({start:d.length+f.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(h).slice(8,-1)} is not a valid path parameter`})),d+f+(g===r.length?"":v)},""),a=s.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi"),u;for(;(u=c.exec(a))!==null;)o.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(o.sort((d,f)=>d.start-f.start),o.length>0){let d=0,f=o.reduce((g,h)=>{let v=" ".repeat(h.start-d),x="^".repeat(h.length);return d=h.start+h.length,g+v+x},"");throw new Le(`Path parameters result in path with invalid segments:
${o.map(g=>g.error).join(`
`)}
${s}
${f}`)}return s},te=fHe(Ope);var ph=class extends oe{list(t,n={},r){return this._client.getAPIList(te`/chat/completions/${t}/messages`,un,m({query:n},r))}};function lE(e){return e!==void 0&&"function"in e&&e.function!==void 0}function Mpe(e,t){let n=m({},e);return Object.defineProperties(n,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:t,enumerable:!1}}),n}function uE(e){return e?.$brand==="auto-parseable-response-format"}function mh(e){return e?.$brand==="auto-parseable-tool"}function Dpe(e,t){return!t||!uZ(t)?b(m({},e),{choices:e.choices.map(n=>(Rpe(n.message.tool_calls),b(m({},n),{message:m(b(m({},n.message),{parsed:null}),n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0)})))}):dE(e,t)}function dE(e,t){let n=e.choices.map(r=>{if(r.finish_reason==="length")throw new cv;if(r.finish_reason==="content_filter")throw new lv;return Rpe(r.message.tool_calls),b(m({},r),{message:b(m(m({},r.message),r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(i=>yHe(t,i))??void 0}:void 0),{parsed:r.message.content&&!r.message.refusal?_He(t,r.message.content):null})})});return b(m({},e),{choices:n})}function _He(e,t){return e.response_format?.type!=="json_schema"?null:e.response_format?.type==="json_schema"?"$parseRaw"in e.response_format?e.response_format.$parseRaw(t):JSON.parse(t):null}function yHe(e,t){let n=e.tools?.find(r=>lE(r)&&r.function?.name===t.function.name);return b(m({},t),{function:b(m({},t.function),{parsed_arguments:mh(n)?n.$parseRaw(t.function.arguments):n?.function.strict?JSON.parse(t.function.arguments):null})})}function Ppe(e,t){if(!e||!("tools"in e)||!e.tools)return!1;let n=e.tools?.find(r=>lE(r)&&r.function?.name===t.function.name);return lE(n)&&(mh(n)||n?.function.strict||!1)}function uZ(e){return uE(e.response_format)?!0:e.tools?.some(t=>mh(t)||t.type==="function"&&t.function.strict===!0)??!1}function Rpe(e){for(let t of e||[])if(t.type!=="function")throw new Le(`Currently only \`function\` tool calls are supported; Received \`${t.type}\``)}function Npe(e){for(let t of e??[]){if(t.type!=="function")throw new Le(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(t.function.strict!==!0)throw new Le(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var pv=e=>e?.role==="assistant",dZ=e=>e?.role==="tool";var pZ,qR,GR,pE,mE,WR,fE,kd,hE,KR,JR,mv,$pe,lm=class{constructor(){pZ.add(this),this.controller=new AbortController,qR.set(this,void 0),GR.set(this,()=>{}),pE.set(this,()=>{}),mE.set(this,void 0),WR.set(this,()=>{}),fE.set(this,()=>{}),kd.set(this,{}),hE.set(this,!1),KR.set(this,!1),JR.set(this,!1),mv.set(this,!1),pt(this,qR,new Promise((t,n)=>{pt(this,GR,t,"f"),pt(this,pE,n,"f")}),"f"),pt(this,mE,new Promise((t,n)=>{pt(this,WR,t,"f"),pt(this,fE,n,"f")}),"f"),q(this,qR,"f").catch(()=>{}),q(this,mE,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emitFinal(),this._emit("end")},q(this,pZ,"m",$pe).bind(this))},0)}_connected(){this.ended||(q(this,GR,"f").call(this),this._emit("connect"))}get ended(){return q(this,hE,"f")}get errored(){return q(this,KR,"f")}get aborted(){return q(this,JR,"f")}abort(){this.controller.abort()}on(t,n){return(q(this,kd,"f")[t]||(q(this,kd,"f")[t]=[])).push({listener:n}),this}off(t,n){let r=q(this,kd,"f")[t];if(!r)return this;let i=r.findIndex(o=>o.listener===n);return i>=0&&r.splice(i,1),this}once(t,n){return(q(this,kd,"f")[t]||(q(this,kd,"f")[t]=[])).push({listener:n,once:!0}),this}emitted(t){return new Promise((n,r)=>{pt(this,mv,!0,"f"),t!=="error"&&this.once("error",r),this.once(t,n)})}done(){return y(this,null,function*(){pt(this,mv,!0,"f"),yield q(this,mE,"f")})}_emit(t,...n){if(q(this,hE,"f"))return;t==="end"&&(pt(this,hE,!0,"f"),q(this,WR,"f").call(this));let r=q(this,kd,"f")[t];if(r&&(q(this,kd,"f")[t]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),t==="abort"){let i=n[0];!q(this,mv,"f")&&!r?.length&&Promise.reject(i),q(this,pE,"f").call(this,i),q(this,fE,"f").call(this,i),this._emit("end");return}if(t==="error"){let i=n[0];!q(this,mv,"f")&&!r?.length&&Promise.reject(i),q(this,pE,"f").call(this,i),q(this,fE,"f").call(this,i),this._emit("end")}}_emitFinal(){}};qR=new WeakMap,GR=new WeakMap,pE=new WeakMap,mE=new WeakMap,WR=new WeakMap,fE=new WeakMap,kd=new WeakMap,hE=new WeakMap,KR=new WeakMap,JR=new WeakMap,mv=new WeakMap,pZ=new WeakSet,$pe=function(t){if(pt(this,KR,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new pi),t instanceof pi)return pt(this,JR,!0,"f"),this._emit("abort",t);if(t instanceof Le)return this._emit("error",t);if(t instanceof Error){let n=new Le(t.message);return n.cause=t,this._emit("error",n)}return this._emit("error",new Le(String(t)))};function Lpe(e){return typeof e.parse=="function"}var Ts,mZ,YR,fZ,hZ,gZ,Fpe,jpe,vHe=10,fv=class extends lm{constructor(){super(...arguments),Ts.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(t){this._chatCompletions.push(t),this._emit("chatCompletion",t);let n=t.choices[0]?.message;return n&&this._addMessage(n),t}_addMessage(t,n=!0){if("content"in t||(t.content=null),this.messages.push(t),n){if(this._emit("message",t),dZ(t)&&t.content)this._emit("functionToolCallResult",t.content);else if(pv(t)&&t.tool_calls)for(let r of t.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}finalChatCompletion(){return y(this,null,function*(){yield this.done();let t=this._chatCompletions[this._chatCompletions.length-1];if(!t)throw new Le("stream ended without producing a ChatCompletion");return t})}finalContent(){return y(this,null,function*(){return yield this.done(),q(this,Ts,"m",mZ).call(this)})}finalMessage(){return y(this,null,function*(){return yield this.done(),q(this,Ts,"m",YR).call(this)})}finalFunctionToolCall(){return y(this,null,function*(){return yield this.done(),q(this,Ts,"m",fZ).call(this)})}finalFunctionToolCallResult(){return y(this,null,function*(){return yield this.done(),q(this,Ts,"m",hZ).call(this)})}totalUsage(){return y(this,null,function*(){return yield this.done(),q(this,Ts,"m",gZ).call(this)})}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){let t=this._chatCompletions[this._chatCompletions.length-1];t&&this._emit("finalChatCompletion",t);let n=q(this,Ts,"m",YR).call(this);n&&this._emit("finalMessage",n);let r=q(this,Ts,"m",mZ).call(this);r&&this._emit("finalContent",r);let i=q(this,Ts,"m",fZ).call(this);i&&this._emit("finalFunctionToolCall",i);let o=q(this,Ts,"m",hZ).call(this);o!=null&&this._emit("finalFunctionToolCallResult",o),this._chatCompletions.some(s=>s.usage)&&this._emit("totalUsage",q(this,Ts,"m",gZ).call(this))}_createChatCompletion(t,n,r){return y(this,null,function*(){let i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),q(this,Ts,"m",Fpe).call(this,n);let o=yield t.chat.completions.create(b(m({},n),{stream:!1}),b(m({},r),{signal:this.controller.signal}));return this._connected(),this._addChatCompletion(dE(o,n))})}_runChatCompletion(t,n,r){return y(this,null,function*(){for(let i of n.messages)this._addMessage(i,!1);return yield this._createChatCompletion(t,n,r)})}_runTools(t,n,r){return y(this,null,function*(){let i="tool",h=n,{tool_choice:o="auto",stream:s}=h,a=se(h,["tool_choice","stream"]),c=typeof o!="string"&&o.type==="function"&&o?.function?.name,{maxChatCompletions:u=vHe}=r||{},d=n.tools.map(v=>{if(mh(v)){if(!v.$callback)throw new Le("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:v.$callback,name:v.function.name,description:v.function.description||"",parameters:v.function.parameters,parse:v.$parseRaw,strict:!0}}}return v}),f={};for(let v of d)v.type==="function"&&(f[v.function.name||v.function.function.name]=v.function);let g="tools"in n?d.map(v=>v.type==="function"?{type:"function",function:{name:v.function.name||v.function.function.name,parameters:v.function.parameters,description:v.function.description,strict:v.function.strict}}:v):void 0;for(let v of n.messages)this._addMessage(v,!1);for(let v=0;v<u;++v){let E=(yield this._createChatCompletion(t,b(m({},a),{tool_choice:o,tools:g,messages:[...this.messages]}),r)).choices[0]?.message;if(!E)throw new Le("missing message in ChatCompletion response");if(!E.tool_calls?.length)return;for(let C of E.tool_calls){if(C.type!=="function")continue;let S=C.id,{name:A,arguments:P}=C.function,F=f[A];if(F){if(c&&c!==A){let pe=`Invalid tool_call: ${JSON.stringify(A)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:i,tool_call_id:S,content:pe});continue}}else{let pe=`Invalid tool_call: ${JSON.stringify(A)}. Available options are: ${Object.keys(f).map(xe=>JSON.stringify(xe)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:S,content:pe});continue}let B;try{B=Lpe(F)?yield F.parse(P):P}catch(pe){let xe=pe instanceof Error?pe.message:String(pe);this._addMessage({role:i,tool_call_id:S,content:xe});continue}let ee=yield F.function(B,this),D=q(this,Ts,"m",jpe).call(this,ee);if(this._addMessage({role:i,tool_call_id:S,content:D}),c)return}}})}};Ts=new WeakSet,mZ=function(){return q(this,Ts,"m",YR).call(this).content??null},YR=function(){let t=this.messages.length;for(;t-- >0;){let n=this.messages[t];if(pv(n))return b(m({},n),{content:n.content??null,refusal:n.refusal??null})}throw new Le("stream ended without producing a ChatCompletionMessage with role=assistant")},fZ=function(){for(let t=this.messages.length-1;t>=0;t--){let n=this.messages[t];if(pv(n)&&n?.tool_calls?.length)return n.tool_calls.filter(r=>r.type==="function").at(-1)?.function}},hZ=function(){for(let t=this.messages.length-1;t>=0;t--){let n=this.messages[t];if(dZ(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(i=>i.type==="function"&&i.id===n.tool_call_id)))return n.content}},gZ=function(){let t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(let{usage:n}of this._chatCompletions)n&&(t.completion_tokens+=n.completion_tokens,t.prompt_tokens+=n.prompt_tokens,t.total_tokens+=n.total_tokens);return t},Fpe=function(t){if(t.n!=null&&t.n>1)throw new Le("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},jpe=function(t){return typeof t=="string"?t:t===void 0?"undefined":JSON.stringify(t)};var gE=class e extends fv{static runTools(t,n,r){let i=new e,o=b(m({},r),{headers:b(m({},r?.headers),{"X-Stainless-Helper-Method":"runTools"})});return i._run(()=>i._runTools(t,n,o)),i}_addMessage(t,n=!0){super._addMessage(t,n),pv(t)&&t.content&&this._emit("content",t.content)}};var ao={STR:1,NUM:2,ARR:4,OBJ:8,NULL:16,BOOL:32,NAN:64,INFINITY:128,MINUS_INFINITY:256,INF:384,SPECIAL:496,ATOM:499,COLLECTION:12,ALL:511},_Z=class extends Error{},yZ=class extends Error{};function bHe(e,t=ao.ALL){if(typeof e!="string")throw new TypeError(`expecting str, got ${typeof e}`);if(!e.trim())throw new Error(`${e} is empty`);return wHe(e.trim(),t)}var wHe=(e,t)=>{let n=e.length,r=0,i=g=>{throw new _Z(`${g} at position ${r}`)},o=g=>{throw new yZ(`${g} at position ${r}`)},s=()=>(f(),r>=n&&i("Unexpected end of input"),e[r]==='"'?a():e[r]==="{"?c():e[r]==="["?u():e.substring(r,r+4)==="null"||ao.NULL&t&&n-r<4&&"null".startsWith(e.substring(r))?(r+=4,null):e.substring(r,r+4)==="true"||ao.BOOL&t&&n-r<4&&"true".startsWith(e.substring(r))?(r+=4,!0):e.substring(r,r+5)==="false"||ao.BOOL&t&&n-r<5&&"false".startsWith(e.substring(r))?(r+=5,!1):e.substring(r,r+8)==="Infinity"||ao.INFINITY&t&&n-r<8&&"Infinity".startsWith(e.substring(r))?(r+=8,1/0):e.substring(r,r+9)==="-Infinity"||ao.MINUS_INFINITY&t&&1<n-r&&n-r<9&&"-Infinity".startsWith(e.substring(r))?(r+=9,-1/0):e.substring(r,r+3)==="NaN"||ao.NAN&t&&n-r<3&&"NaN".startsWith(e.substring(r))?(r+=3,NaN):d()),a=()=>{let g=r,h=!1;for(r++;r<n&&(e[r]!=='"'||h&&e[r-1]==="\\");)h=e[r]==="\\"?!h:!1,r++;if(e.charAt(r)=='"')try{return JSON.parse(e.substring(g,++r-Number(h)))}catch(v){o(String(v))}else if(ao.STR&t)try{return JSON.parse(e.substring(g,r-Number(h))+'"')}catch{return JSON.parse(e.substring(g,e.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},c=()=>{r++,f();let g={};try{for(;e[r]!=="}";){if(f(),r>=n&&ao.OBJ&t)return g;let h=a();f(),r++;try{let v=s();Object.defineProperty(g,h,{value:v,writable:!0,enumerable:!0,configurable:!0})}catch(v){if(ao.OBJ&t)return g;throw v}f(),e[r]===","&&r++}}catch{if(ao.OBJ&t)return g;i("Expected '}' at end of object")}return r++,g},u=()=>{r++;let g=[];try{for(;e[r]!=="]";)g.push(s()),f(),e[r]===","&&r++}catch{if(ao.ARR&t)return g;i("Expected ']' at end of array")}return r++,g},d=()=>{if(r===0){e==="-"&&ao.NUM&t&&i("Not sure what '-' is");try{return JSON.parse(e)}catch(h){if(ao.NUM&t)try{return e[e.length-1]==="."?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch{}o(String(h))}}let g=r;for(e[r]==="-"&&r++;e[r]&&!",]}".includes(e[r]);)r++;r==n&&!(ao.NUM&t)&&i("Unterminated number literal");try{return JSON.parse(e.substring(g,r))}catch{e.substring(g,r)==="-"&&ao.NUM&t&&i("Not sure what '-' is");try{return JSON.parse(e.substring(g,e.lastIndexOf("e")))}catch(v){o(String(v))}}},f=()=>{for(;r<n&&` 
\r	`.includes(e[r]);)r++};return s()},vZ=e=>bHe(e,ao.ALL^ao.NUM);var Ji,Td,hv,um,bZ,QR,wZ,xZ,CZ,XR,EZ,zpe,fh=class e extends fv{constructor(t){super(),Ji.add(this),Td.set(this,void 0),hv.set(this,void 0),um.set(this,void 0),pt(this,Td,t,"f"),pt(this,hv,[],"f")}get currentChatCompletionSnapshot(){return q(this,um,"f")}static fromReadableStream(t){let n=new e(null);return n._run(()=>n._fromReadableStream(t)),n}static createChatCompletion(t,n,r){let i=new e(n);return i._run(()=>i._runChatCompletion(t,b(m({},n),{stream:!0}),b(m({},r),{headers:b(m({},r?.headers),{"X-Stainless-Helper-Method":"stream"})}))),i}_createChatCompletion(t,n,r){return y(this,null,function*(){fi(e.prototype,this,"_createChatCompletion");let i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),q(this,Ji,"m",bZ).call(this);let o=yield t.chat.completions.create(b(m({},n),{stream:!0}),b(m({},r),{signal:this.controller.signal}));this._connected();try{for(var s=ue(o),a,c,u;a=!(c=yield s.next()).done;a=!1){let d=c.value;q(this,Ji,"m",wZ).call(this,d)}}catch{u=[c]}finally{try{a&&(c=s.return)&&(yield c.call(s))}finally{if(u)throw u[0]}}if(o.controller.signal?.aborted)throw new pi;return this._addChatCompletion(q(this,Ji,"m",XR).call(this))})}_fromReadableStream(t,n){return y(this,null,function*(){let r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),q(this,Ji,"m",bZ).call(this),this._connected();let i=su.fromReadableStream(t,this.controller),o;try{for(var s=ue(i),a,c,u;a=!(c=yield s.next()).done;a=!1){let d=c.value;o&&o!==d.id&&this._addChatCompletion(q(this,Ji,"m",XR).call(this)),q(this,Ji,"m",wZ).call(this,d),o=d.id}}catch{u=[c]}finally{try{a&&(c=s.return)&&(yield c.call(s))}finally{if(u)throw u[0]}}if(i.controller.signal?.aborted)throw new pi;return this._addChatCompletion(q(this,Ji,"m",XR).call(this))})}[(Td=new WeakMap,hv=new WeakMap,um=new WeakMap,Ji=new WeakSet,bZ=function(){this.ended||pt(this,um,void 0,"f")},QR=function(n){let r=q(this,hv,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},q(this,hv,"f")[n.index]=r,r)},wZ=function(n){if(this.ended)return;let r=q(this,Ji,"m",zpe).call(this,n);this._emit("chunk",n,r);for(let i of n.choices){let o=r.choices[i.index];i.delta.content!=null&&o.message?.role==="assistant"&&o.message?.content&&(this._emit("content",i.delta.content,o.message.content),this._emit("content.delta",{delta:i.delta.content,snapshot:o.message.content,parsed:o.message.parsed})),i.delta.refusal!=null&&o.message?.role==="assistant"&&o.message?.refusal&&this._emit("refusal.delta",{delta:i.delta.refusal,snapshot:o.message.refusal}),i.logprobs?.content!=null&&o.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:i.logprobs?.content,snapshot:o.logprobs?.content??[]}),i.logprobs?.refusal!=null&&o.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:i.logprobs?.refusal,snapshot:o.logprobs?.refusal??[]});let s=q(this,Ji,"m",QR).call(this,o);o.finish_reason&&(q(this,Ji,"m",CZ).call(this,o),s.current_tool_call_index!=null&&q(this,Ji,"m",xZ).call(this,o,s.current_tool_call_index));for(let a of i.delta.tool_calls??[])s.current_tool_call_index!==a.index&&(q(this,Ji,"m",CZ).call(this,o),s.current_tool_call_index!=null&&q(this,Ji,"m",xZ).call(this,o,s.current_tool_call_index)),s.current_tool_call_index=a.index;for(let a of i.delta.tool_calls??[]){let c=o.message.tool_calls?.[a.index];c?.type&&(c?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:c.function?.name,index:a.index,arguments:c.function.arguments,parsed_arguments:c.function.parsed_arguments,arguments_delta:a.function?.arguments??""}):(c?.type,void 0))}}},xZ=function(n,r){if(q(this,Ji,"m",QR).call(this,n).done_tool_calls.has(r))return;let o=n.message.tool_calls?.[r];if(!o)throw new Error("no tool call snapshot");if(!o.type)throw new Error("tool call snapshot missing `type`");if(o.type==="function"){let s=q(this,Td,"f")?.tools?.find(a=>lE(a)&&a.function.name===o.function.name);this._emit("tool_calls.function.arguments.done",{name:o.function.name,index:r,arguments:o.function.arguments,parsed_arguments:mh(s)?s.$parseRaw(o.function.arguments):s?.function.strict?JSON.parse(o.function.arguments):null})}else o.type},CZ=function(n){let r=q(this,Ji,"m",QR).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;let i=q(this,Ji,"m",EZ).call(this);this._emit("content.done",{content:n.message.content,parsed:i?i.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},XR=function(){if(this.ended)throw new Le("stream has ended, this shouldn't happen");let n=q(this,um,"f");if(!n)throw new Le("request ended without sending any chunks");return pt(this,um,void 0,"f"),pt(this,hv,[],"f"),xHe(n,q(this,Td,"f"))},EZ=function(){let n=q(this,Td,"f")?.response_format;return uE(n)?n:null},zpe=function(n){var r,i,o,s;let a=q(this,um,"f"),d=n,{choices:c}=d,u=se(d,["choices"]);a?Object.assign(a,u):a=pt(this,um,b(m({},u),{choices:[]}),"f");for(let x of n.choices){let E=x,{delta:C,finish_reason:S,index:A,logprobs:P=null}=E,F=se(E,["delta","finish_reason","index","logprobs"]);let B=a.choices[A];if(B||(B=a.choices[A]=m({finish_reason:S,index:A,message:{},logprobs:P},F)),P)if(!B.logprobs)B.logprobs=Object.assign({},P);else{let f=P,{content:Se,refusal:Fe}=f,Me=se(f,["content","refusal"]);Object.assign(B.logprobs,Me),Se&&((r=B.logprobs).content??(r.content=[]),B.logprobs.content.push(...Se)),Fe&&((i=B.logprobs).refusal??(i.refusal=[]),B.logprobs.refusal.push(...Fe))}if(S&&(B.finish_reason=S,q(this,Td,"f")&&uZ(q(this,Td,"f")))){if(S==="length")throw new cv;if(S==="content_filter")throw new lv}if(Object.assign(B,F),!C)continue;let g=C,{content:ee,refusal:D,function_call:pe,role:xe,tool_calls:Ge}=g,fe=se(g,["content","refusal","function_call","role","tool_calls"]);if(Object.assign(B.message,fe),D&&(B.message.refusal=(B.message.refusal||"")+D),xe&&(B.message.role=xe),pe&&(B.message.function_call?(pe.name&&(B.message.function_call.name=pe.name),pe.arguments&&((o=B.message.function_call).arguments??(o.arguments=""),B.message.function_call.arguments+=pe.arguments)):B.message.function_call=pe),ee&&(B.message.content=(B.message.content||"")+ee,!B.message.refusal&&q(this,Ji,"m",EZ).call(this)&&(B.message.parsed=vZ(B.message.content))),Ge){B.message.tool_calls||(B.message.tool_calls=[]);for(let h of Ge){let v=h,{index:Se,id:Fe,type:Me,function:ce}=v,gt=se(v,["index","id","type","function"]);let ve=(s=B.message.tool_calls)[Se]??(s[Se]={});Object.assign(ve,gt),Fe&&(ve.id=Fe),Me&&(ve.type=Me),ce&&(ve.function??(ve.function={name:ce.name??"",arguments:""})),ce?.name&&(ve.function.name=ce.name),ce?.arguments&&(ve.function.arguments+=ce.arguments,Ppe(q(this,Td,"f"),ve)&&(ve.function.parsed_arguments=vZ(ve.function.arguments)))}}}return a},Symbol.asyncIterator)](){let t=[],n=[],r=!1;return this.on("chunk",i=>{let o=n.shift();o?o.resolve(i):t.push(i)}),this.on("end",()=>{r=!0;for(let i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(let o of n)o.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(let o of n)o.reject(i);n.length=0}),{next:()=>y(this,null,function*(){return t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,s)=>n.push({resolve:o,reject:s})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0})}),return:()=>y(this,null,function*(){return this.abort(),{value:void 0,done:!0}})}}toReadableStream(){return new su(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};function xHe(e,t){let u=e,{id:n,choices:r,created:i,model:o,system_fingerprint:s}=u,a=se(u,["id","choices","created","model","system_fingerprint"]),c=m(b(m({},a),{id:n,choices:r.map(x=>{var E=x,{message:d,finish_reason:f,index:g,logprobs:h}=E,v=se(E,["message","finish_reason","index","logprobs"]);if(!f)throw new Le(`missing finish_reason for choice ${g}`);let B=d,{content:C=null,function_call:S,tool_calls:A}=B,P=se(B,["content","function_call","tool_calls"]),F=d.role;if(!F)throw new Le(`missing role for choice ${g}`);if(S){let{arguments:ee,name:D}=S;if(ee==null)throw new Le(`missing function_call.arguments for choice ${g}`);if(!D)throw new Le(`missing function_call.name for choice ${g}`);return b(m({},v),{message:{content:C,function_call:{arguments:ee,name:D},role:F,refusal:d.refusal??null},finish_reason:f,index:g,logprobs:h})}return A?b(m({},v),{index:g,finish_reason:f,logprobs:h,message:b(m({},P),{role:F,content:C,refusal:d.refusal??null,tool_calls:A.map((ee,D)=>{let ce=ee,{function:pe,type:xe,id:Ge}=ce,fe=se(ce,["function","type","id"]),gt=pe||{},{arguments:Se,name:Fe}=gt,Me=se(gt,["arguments","name"]);if(Ge==null)throw new Le(`missing choices[${g}].tool_calls[${D}].id
${e1(e)}`);if(xe==null)throw new Le(`missing choices[${g}].tool_calls[${D}].type
${e1(e)}`);if(Fe==null)throw new Le(`missing choices[${g}].tool_calls[${D}].function.name
${e1(e)}`);if(Se==null)throw new Le(`missing choices[${g}].tool_calls[${D}].function.arguments
${e1(e)}`);return b(m({},fe),{id:Ge,type:xe,function:b(m({},Me),{name:Fe,arguments:Se})})})})}):b(m({},v),{message:b(m({},P),{content:C,role:F,refusal:d.refusal??null}),finish_reason:f,index:g,logprobs:h})}),created:i,model:o,object:"chat.completion"}),s?{system_fingerprint:s}:{});return Dpe(c,t)}function e1(e){return JSON.stringify(e)}var _E=class e extends fh{static fromReadableStream(t){let n=new e(null);return n._run(()=>n._fromReadableStream(t)),n}static runTools(t,n,r){let i=new e(n),o=b(m({},r),{headers:b(m({},r?.headers),{"X-Stainless-Helper-Method":"runTools"})});return i._run(()=>i._runTools(t,n,o)),i}};var Ad=class extends oe{constructor(){super(...arguments),this.messages=new ph(this._client)}create(t,n){return this._client.post("/chat/completions",b(m({body:t},n),{stream:t.stream??!1}))}retrieve(t,n){return this._client.get(te`/chat/completions/${t}`,n)}update(t,n,r){return this._client.post(te`/chat/completions/${t}`,m({body:n},r))}list(t={},n){return this._client.getAPIList("/chat/completions",un,m({query:t},n))}delete(t,n){return this._client.delete(te`/chat/completions/${t}`,n)}parse(t,n){return Npe(t.tools),this._client.chat.completions.create(t,b(m({},n),{headers:b(m({},n?.headers),{"X-Stainless-Helper-Method":"chat.completions.parse"})}))._thenUnwrap(r=>dE(r,t))}runTools(t,n){return t.stream?_E.runTools(this._client,t,n):gE.runTools(this._client,t,n)}stream(t,n){return fh.createChatCompletion(this._client,t,n)}};Ad.Messages=ph;var yE=(()=>{class e extends oe{constructor(){super(...arguments),this.completions=new Ad(this._client)}}return e.Completions=Ad,e})();var Bpe=Symbol("brand.privateNullableHeaders");function*EHe(e){if(!e)return;if(Bpe in e){let{values:r,nulls:i}=e;yield*mn(r.entries());for(let o of i)yield[o,null];return}let t=!1,n;e instanceof Headers?n=e.entries():Z5(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let r of n){let i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");let o=Z5(r[1])?r[1]:[r[1]],s=!1;for(let a of o)a!==void 0&&(t&&!s&&(s=!0,yield[i,null]),yield[i,a])}}var Ce=e=>{let t=new Headers,n=new Set;for(let r of e){let i=new Set;for(let[o,s]of EHe(r)){let a=o.toLowerCase();i.has(a)||(t.delete(o),i.add(a)),s===null?(t.delete(o),n.add(a)):(t.append(o,s),n.delete(a))}}return{[Bpe]:!0,values:t,nulls:n}};var gv=class extends oe{create(t,n){return this._client.post("/audio/speech",b(m({body:t},n),{headers:Ce([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0}))}};var _v=class extends oe{create(t,n){return this._client.post("/audio/transcriptions",Aa(b(m({body:t},n),{stream:t.stream??!1,__metadata:{model:t.model}}),this._client))}};var yv=class extends oe{create(t,n){return this._client.post("/audio/translations",Aa(b(m({body:t},n),{__metadata:{model:t.model}}),this._client))}};var vE=(()=>{class e extends oe{constructor(){super(...arguments),this.transcriptions=new _v(this._client),this.translations=new yv(this._client),this.speech=new gv(this._client)}}return e.Transcriptions=_v,e.Translations=yv,e.Speech=gv,e})();var hh=class extends oe{create(t,n){return this._client.post("/batches",m({body:t},n))}retrieve(t,n){return this._client.get(te`/batches/${t}`,n)}list(t={},n){return this._client.getAPIList("/batches",un,m({query:t},n))}cancel(t,n){return this._client.post(te`/batches/${t}/cancel`,n)}};var vv=class extends oe{create(t,n){return this._client.post("/assistants",b(m({body:t},n),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},n?.headers])}))}retrieve(t,n){return this._client.get(te`/assistants/${t}`,b(m({},n),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},n?.headers])}))}update(t,n,r){return this._client.post(te`/assistants/${t}`,b(m({body:n},r),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}list(t={},n){return this._client.getAPIList("/assistants",un,b(m({query:t},n),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},n?.headers])}))}delete(t,n){return this._client.delete(te`/assistants/${t}`,b(m({},n),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},n?.headers])}))}};var bv=class extends oe{create(t,n){return this._client.post("/realtime/sessions",b(m({body:t},n),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},n?.headers])}))}};var wv=class extends oe{create(t,n){return this._client.post("/realtime/transcription_sessions",b(m({body:t},n),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},n?.headers])}))}};var t1=(()=>{class e extends oe{constructor(){super(...arguments),this.sessions=new bv(this._client),this.transcriptionSessions=new wv(this._client)}}return e.Sessions=bv,e.TranscriptionSessions=wv,e})();var xv=class extends oe{create(t,n){return this._client.post("/chatkit/sessions",b(m({body:t},n),{headers:Ce([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])}))}cancel(t,n){return this._client.post(te`/chatkit/sessions/${t}/cancel`,b(m({},n),{headers:Ce([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])}))}};var Cv=class extends oe{retrieve(t,n){return this._client.get(te`/chatkit/threads/${t}`,b(m({},n),{headers:Ce([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])}))}list(t={},n){return this._client.getAPIList("/chatkit/threads",Sd,b(m({query:t},n),{headers:Ce([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])}))}delete(t,n){return this._client.delete(te`/chatkit/threads/${t}`,b(m({},n),{headers:Ce([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])}))}listItems(t,n={},r){return this._client.getAPIList(te`/chatkit/threads/${t}/items`,Sd,b(m({query:n},r),{headers:Ce([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])}))}};var n1=(()=>{class e extends oe{constructor(){super(...arguments),this.sessions=new xv(this._client),this.threads=new Cv(this._client)}}return e.Sessions=xv,e.Threads=Cv,e})();var Ev=class extends oe{create(t,n,r){return this._client.post(te`/threads/${t}/messages`,b(m({body:n},r),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}retrieve(t,n,r){let{thread_id:i}=n;return this._client.get(te`/threads/${i}/messages/${t}`,b(m({},r),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}update(t,n,r){let s=n,{thread_id:i}=s,o=se(s,["thread_id"]);return this._client.post(te`/threads/${i}/messages/${t}`,b(m({body:o},r),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}list(t,n={},r){return this._client.getAPIList(te`/threads/${t}/messages`,un,b(m({query:n},r),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}delete(t,n,r){let{thread_id:i}=n;return this._client.delete(te`/threads/${i}/messages/${t}`,b(m({},r),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}};var Iv=class extends oe{retrieve(t,n,r){let a=n,{thread_id:i,run_id:o}=a,s=se(a,["thread_id","run_id"]);return this._client.get(te`/threads/${i}/runs/${o}/steps/${t}`,b(m({query:s},r),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}list(t,n,r){let s=n,{thread_id:i}=s,o=se(s,["thread_id"]);return this._client.getAPIList(te`/threads/${i}/runs/${t}/steps`,un,b(m({query:o},r),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}};var Upe=e=>{if(typeof Buffer<"u"){let t=Buffer.from(e,"base64");return Array.from(new Float32Array(t.buffer,t.byteOffset,t.length/Float32Array.BYTES_PER_ELEMENT))}else{let t=atob(e),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};var dm=e=>{if(typeof globalThis.process<"u")return globalThis.process.env?.[e]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(e)?.trim()};var To,_h,IZ,cu,r1,qc,yh,Sv,gh,s1,Oa,i1,o1,xE,bE,wE,Vpe,Hpe,Zpe,qpe,Gpe,Wpe,Kpe,Od=class extends lm{constructor(){super(...arguments),To.add(this),IZ.set(this,[]),cu.set(this,{}),r1.set(this,{}),qc.set(this,void 0),yh.set(this,void 0),Sv.set(this,void 0),gh.set(this,void 0),s1.set(this,void 0),Oa.set(this,void 0),i1.set(this,void 0),o1.set(this,void 0),xE.set(this,void 0)}[(IZ=new WeakMap,cu=new WeakMap,r1=new WeakMap,qc=new WeakMap,yh=new WeakMap,Sv=new WeakMap,gh=new WeakMap,s1=new WeakMap,Oa=new WeakMap,i1=new WeakMap,o1=new WeakMap,xE=new WeakMap,To=new WeakSet,Symbol.asyncIterator)](){let t=[],n=[],r=!1;return this.on("event",i=>{let o=n.shift();o?o.resolve(i):t.push(i)}),this.on("end",()=>{r=!0;for(let i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(let o of n)o.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(let o of n)o.reject(i);n.length=0}),{next:()=>y(this,null,function*(){return t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,s)=>n.push({resolve:o,reject:s})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0})}),return:()=>y(this,null,function*(){return this.abort(),{value:void 0,done:!0}})}}static fromReadableStream(t){let n=new _h;return n._run(()=>n._fromReadableStream(t)),n}_fromReadableStream(t,n){return y(this,null,function*(){let r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();let i=su.fromReadableStream(t,this.controller);try{for(var o=ue(i),s,a,c;s=!(a=yield o.next()).done;s=!1){let u=a.value;q(this,To,"m",bE).call(this,u)}}catch{c=[a]}finally{try{s&&(a=o.return)&&(yield a.call(o))}finally{if(c)throw c[0]}}if(i.controller.signal?.aborted)throw new pi;return this._addRun(q(this,To,"m",wE).call(this))})}toReadableStream(){return new su(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(t,n,r,i){let o=new _h;return o._run(()=>o._runToolAssistantStream(t,n,r,b(m({},i),{headers:b(m({},i?.headers),{"X-Stainless-Helper-Method":"stream"})}))),o}_createToolAssistantStream(t,n,r,i){return y(this,null,function*(){let o=i?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));let s=b(m({},r),{stream:!0}),a=yield t.submitToolOutputs(n,s,b(m({},i),{signal:this.controller.signal}));this._connected();try{for(var c=ue(a),u,d,f;u=!(d=yield c.next()).done;u=!1){let g=d.value;q(this,To,"m",bE).call(this,g)}}catch{f=[d]}finally{try{u&&(d=c.return)&&(yield d.call(c))}finally{if(f)throw f[0]}}if(a.controller.signal?.aborted)throw new pi;return this._addRun(q(this,To,"m",wE).call(this))})}static createThreadAssistantStream(t,n,r){let i=new _h;return i._run(()=>i._threadAssistantStream(t,n,b(m({},r),{headers:b(m({},r?.headers),{"X-Stainless-Helper-Method":"stream"})}))),i}static createAssistantStream(t,n,r,i){let o=new _h;return o._run(()=>o._runAssistantStream(t,n,r,b(m({},i),{headers:b(m({},i?.headers),{"X-Stainless-Helper-Method":"stream"})}))),o}currentEvent(){return q(this,i1,"f")}currentRun(){return q(this,o1,"f")}currentMessageSnapshot(){return q(this,qc,"f")}currentRunStepSnapshot(){return q(this,xE,"f")}finalRunSteps(){return y(this,null,function*(){return yield this.done(),Object.values(q(this,cu,"f"))})}finalMessages(){return y(this,null,function*(){return yield this.done(),Object.values(q(this,r1,"f"))})}finalRun(){return y(this,null,function*(){if(yield this.done(),!q(this,yh,"f"))throw Error("Final run was not received.");return q(this,yh,"f")})}_createThreadAssistantStream(t,n,r){return y(this,null,function*(){let i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));let o=b(m({},n),{stream:!0}),s=yield t.createAndRun(o,b(m({},r),{signal:this.controller.signal}));this._connected();try{for(var a=ue(s),c,u,d;c=!(u=yield a.next()).done;c=!1){let f=u.value;q(this,To,"m",bE).call(this,f)}}catch{d=[u]}finally{try{c&&(u=a.return)&&(yield u.call(a))}finally{if(d)throw d[0]}}if(s.controller.signal?.aborted)throw new pi;return this._addRun(q(this,To,"m",wE).call(this))})}_createAssistantStream(t,n,r,i){return y(this,null,function*(){let o=i?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));let s=b(m({},r),{stream:!0}),a=yield t.create(n,s,b(m({},i),{signal:this.controller.signal}));this._connected();try{for(var c=ue(a),u,d,f;u=!(d=yield c.next()).done;u=!1){let g=d.value;q(this,To,"m",bE).call(this,g)}}catch{f=[d]}finally{try{u&&(d=c.return)&&(yield d.call(c))}finally{if(f)throw f[0]}}if(a.controller.signal?.aborted)throw new pi;return this._addRun(q(this,To,"m",wE).call(this))})}static accumulateDelta(t,n){for(let[r,i]of Object.entries(n)){if(!t.hasOwnProperty(r)){t[r]=i;continue}let o=t[r];if(o==null){t[r]=i;continue}if(r==="index"||r==="type"){t[r]=i;continue}if(typeof o=="string"&&typeof i=="string")o+=i;else if(typeof o=="number"&&typeof i=="number")o+=i;else if(tE(o)&&tE(i))o=this.accumulateDelta(o,i);else if(Array.isArray(o)&&Array.isArray(i)){if(o.every(s=>typeof s=="string"||typeof s=="number")){o.push(...i);continue}for(let s of i){if(!tE(s))throw new Error(`Expected array delta entry to be an object but got: ${s}`);let a=s.index;if(a==null)throw console.error(s),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);let c=o[a];c==null?o.push(s):o[a]=this.accumulateDelta(c,s)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${o}`);t[r]=o}return t}_addRun(t){return t}_threadAssistantStream(t,n,r){return y(this,null,function*(){return yield this._createThreadAssistantStream(n,t,r)})}_runAssistantStream(t,n,r,i){return y(this,null,function*(){return yield this._createAssistantStream(n,t,r,i)})}_runToolAssistantStream(t,n,r,i){return y(this,null,function*(){return yield this._createToolAssistantStream(n,t,r,i)})}};_h=Od,bE=function(t){if(!this.ended)switch(pt(this,i1,t,"f"),q(this,To,"m",Zpe).call(this,t),t.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":q(this,To,"m",Kpe).call(this,t);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":q(this,To,"m",Hpe).call(this,t);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":q(this,To,"m",Vpe).call(this,t);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier");default:}},wE=function(){if(this.ended)throw new Le("stream has ended, this shouldn't happen");if(!q(this,yh,"f"))throw Error("Final run has not been received");return q(this,yh,"f")},Vpe=function(t){let[n,r]=q(this,To,"m",Gpe).call(this,t,q(this,qc,"f"));pt(this,qc,n,"f"),q(this,r1,"f")[n.id]=n;for(let i of r){let o=n.content[i.index];o?.type=="text"&&this._emit("textCreated",o.text)}switch(t.event){case"thread.message.created":this._emit("messageCreated",t.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",t.data.delta,n),t.data.delta.content)for(let i of t.data.delta.content){if(i.type=="text"&&i.text){let o=i.text,s=n.content[i.index];if(s&&s.type=="text")this._emit("textDelta",o,s.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=q(this,Sv,"f")){if(q(this,gh,"f"))switch(q(this,gh,"f").type){case"text":this._emit("textDone",q(this,gh,"f").text,q(this,qc,"f"));break;case"image_file":this._emit("imageFileDone",q(this,gh,"f").image_file,q(this,qc,"f"));break}pt(this,Sv,i.index,"f")}pt(this,gh,n.content[i.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(q(this,Sv,"f")!==void 0){let i=t.data.content[q(this,Sv,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,q(this,qc,"f"));break;case"text":this._emit("textDone",i.text,q(this,qc,"f"));break}}q(this,qc,"f")&&this._emit("messageDone",t.data),pt(this,qc,void 0,"f")}},Hpe=function(t){let n=q(this,To,"m",qpe).call(this,t);switch(pt(this,xE,n,"f"),t.event){case"thread.run.step.created":this._emit("runStepCreated",t.data);break;case"thread.run.step.delta":let r=t.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(let o of r.step_details.tool_calls)o.index==q(this,s1,"f")?this._emit("toolCallDelta",o,n.step_details.tool_calls[o.index]):(q(this,Oa,"f")&&this._emit("toolCallDone",q(this,Oa,"f")),pt(this,s1,o.index,"f"),pt(this,Oa,n.step_details.tool_calls[o.index],"f"),q(this,Oa,"f")&&this._emit("toolCallCreated",q(this,Oa,"f")));this._emit("runStepDelta",t.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":pt(this,xE,void 0,"f"),t.data.step_details.type=="tool_calls"&&q(this,Oa,"f")&&(this._emit("toolCallDone",q(this,Oa,"f")),pt(this,Oa,void 0,"f")),this._emit("runStepDone",t.data,n);break;case"thread.run.step.in_progress":break}},Zpe=function(t){q(this,IZ,"f").push(t),this._emit("event",t)},qpe=function(t){switch(t.event){case"thread.run.step.created":return q(this,cu,"f")[t.data.id]=t.data,t.data;case"thread.run.step.delta":let n=q(this,cu,"f")[t.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=t.data;if(r.delta){let i=_h.accumulateDelta(n,r.delta);q(this,cu,"f")[t.data.id]=i}return q(this,cu,"f")[t.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":q(this,cu,"f")[t.data.id]=t.data;break}if(q(this,cu,"f")[t.data.id])return q(this,cu,"f")[t.data.id];throw new Error("No snapshot available")},Gpe=function(t,n){let r=[];switch(t.event){case"thread.message.created":return[t.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=t.data;if(i.delta.content)for(let o of i.delta.content)if(o.index in n.content){let s=n.content[o.index];n.content[o.index]=q(this,To,"m",Wpe).call(this,o,s)}else n.content[o.index]=o,r.push(o);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Wpe=function(t,n){return _h.accumulateDelta(n,t)},Kpe=function(t){switch(pt(this,o1,t.data,"f"),t.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":pt(this,yh,t.data,"f"),q(this,Oa,"f")&&(this._emit("toolCallDone",q(this,Oa,"f")),pt(this,Oa,void 0,"f"));break;case"thread.run.cancelling":break}};var a1=(()=>{class e extends oe{constructor(){super(...arguments),this.steps=new Iv(this._client)}create(n,r,i){let a=r,{include:o}=a,s=se(a,["include"]);return this._client.post(te`/threads/${n}/runs`,b(m({query:{include:o},body:s},i),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},i?.headers]),stream:r.stream??!1}))}retrieve(n,r,i){let{thread_id:o}=r;return this._client.get(te`/threads/${o}/runs/${n}`,b(m({},i),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}update(n,r,i){let a=r,{thread_id:o}=a,s=se(a,["thread_id"]);return this._client.post(te`/threads/${o}/runs/${n}`,b(m({body:s},i),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}list(n,r={},i){return this._client.getAPIList(te`/threads/${n}/runs`,un,b(m({query:r},i),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}cancel(n,r,i){let{thread_id:o}=r;return this._client.post(te`/threads/${o}/runs/${n}/cancel`,b(m({},i),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}createAndPoll(n,r,i){return y(this,null,function*(){let o=yield this.create(n,r,i);return yield this.poll(o.id,{thread_id:n},i)})}createAndStream(n,r,i){return Od.createAssistantStream(n,this._client.beta.threads.runs,r,i)}poll(n,r,i){return y(this,null,function*(){let o=Ce([i?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":i?.pollIntervalMs?.toString()??void 0}]);for(;;){let{data:s,response:a}=yield this.retrieve(n,r,b(m({},i),{headers:m(m({},i?.headers),o)})).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let c=5e3;if(i?.pollIntervalMs)c=i.pollIntervalMs;else{let u=a.headers.get("openai-poll-after-ms");if(u){let d=parseInt(u);isNaN(d)||(c=d)}}yield iu(c);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}})}stream(n,r,i){return Od.createAssistantStream(n,this._client.beta.threads.runs,r,i)}submitToolOutputs(n,r,i){let a=r,{thread_id:o}=a,s=se(a,["thread_id"]);return this._client.post(te`/threads/${o}/runs/${n}/submit_tool_outputs`,b(m({body:s},i),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},i?.headers]),stream:r.stream??!1}))}submitToolOutputsAndPoll(n,r,i){return y(this,null,function*(){let o=yield this.submitToolOutputs(n,r,i);return yield this.poll(o.id,r,i)})}submitToolOutputsStream(n,r,i){return Od.createToolAssistantStream(n,this._client.beta.threads.runs,r,i)}}return e.Steps=Iv,e})();var c1=(()=>{class e extends oe{constructor(){super(...arguments),this.runs=new a1(this._client),this.messages=new Ev(this._client)}create(n={},r){return this._client.post("/threads",b(m({body:n},r),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}retrieve(n,r){return this._client.get(te`/threads/${n}`,b(m({},r),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}update(n,r,i){return this._client.post(te`/threads/${n}`,b(m({body:r},i),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}delete(n,r){return this._client.delete(te`/threads/${n}`,b(m({},r),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}createAndRun(n,r){return this._client.post("/threads/runs",b(m({body:n},r),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1}))}createAndRunPoll(n,r){return y(this,null,function*(){let i=yield this.createAndRun(n,r);return yield this.runs.poll(i.id,{thread_id:i.thread_id},r)})}createAndRunStream(n,r){return Od.createThreadAssistantStream(n,this._client.beta.threads,r)}}return e.Runs=a1,e.Messages=Ev,e})();var CE=(()=>{class e extends oe{constructor(){super(...arguments),this.realtime=new t1(this._client),this.chatkit=new n1(this._client),this.assistants=new vv(this._client),this.threads=new c1(this._client)}}return e.Realtime=t1,e.ChatKit=n1,e.Assistants=vv,e.Threads=c1,e})();var vh=class extends oe{create(t,n){return this._client.post("/completions",b(m({body:t},n),{stream:t.stream??!1}))}};var kv=class extends oe{retrieve(t,n,r){let{container_id:i}=n;return this._client.get(te`/containers/${i}/files/${t}/content`,b(m({},r),{headers:Ce([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0}))}};var l1=(()=>{class e extends oe{constructor(){super(...arguments),this.content=new kv(this._client)}create(n,r,i){return this._client.post(te`/containers/${n}/files`,Aa(m({body:r},i),this._client))}retrieve(n,r,i){let{container_id:o}=r;return this._client.get(te`/containers/${o}/files/${n}`,i)}list(n,r={},i){return this._client.getAPIList(te`/containers/${n}/files`,un,m({query:r},i))}delete(n,r,i){let{container_id:o}=r;return this._client.delete(te`/containers/${o}/files/${n}`,b(m({},i),{headers:Ce([{Accept:"*/*"},i?.headers])}))}}return e.Content=kv,e})();var EE=(()=>{class e extends oe{constructor(){super(...arguments),this.files=new l1(this._client)}create(n,r){return this._client.post("/containers",m({body:n},r))}retrieve(n,r){return this._client.get(te`/containers/${n}`,r)}list(n={},r){return this._client.getAPIList("/containers",un,m({query:n},r))}delete(n,r){return this._client.delete(te`/containers/${n}`,b(m({},r),{headers:Ce([{Accept:"*/*"},r?.headers])}))}}return e.Files=l1,e})();var Tv=class extends oe{create(t,n,r){let s=n,{include:i}=s,o=se(s,["include"]);return this._client.post(te`/conversations/${t}/items`,m({query:{include:i},body:o},r))}retrieve(t,n,r){let s=n,{conversation_id:i}=s,o=se(s,["conversation_id"]);return this._client.get(te`/conversations/${i}/items/${t}`,m({query:o},r))}list(t,n={},r){return this._client.getAPIList(te`/conversations/${t}/items`,Sd,m({query:n},r))}delete(t,n,r){let{conversation_id:i}=n;return this._client.delete(te`/conversations/${i}/items/${t}`,r)}};var IE=(()=>{class e extends oe{constructor(){super(...arguments),this.items=new Tv(this._client)}create(n={},r){return this._client.post("/conversations",m({body:n},r))}retrieve(n,r){return this._client.get(te`/conversations/${n}`,r)}update(n,r,i){return this._client.post(te`/conversations/${n}`,m({body:r},i))}delete(n,r){return this._client.delete(te`/conversations/${n}`,r)}}return e.Items=Tv,e})();var bh=class extends oe{create(t,n){let r=!!t.encoding_format,i=r?t.encoding_format:"base64";r&&xi(this._client).debug("embeddings/user defined encoding_format:",t.encoding_format);let o=this._client.post("/embeddings",m({body:b(m({},t),{encoding_format:i})},n));return r?o:(xi(this._client).debug("embeddings/decoding base64 embeddings from base64"),o._thenUnwrap(s=>(s&&s.data&&s.data.forEach(a=>{let c=a.embedding;a.embedding=Upe(c)}),s)))}};var Av=class extends oe{retrieve(t,n,r){let{eval_id:i,run_id:o}=n;return this._client.get(te`/evals/${i}/runs/${o}/output_items/${t}`,r)}list(t,n,r){let s=n,{eval_id:i}=s,o=se(s,["eval_id"]);return this._client.getAPIList(te`/evals/${i}/runs/${t}/output_items`,un,m({query:o},r))}};var u1=(()=>{class e extends oe{constructor(){super(...arguments),this.outputItems=new Av(this._client)}create(n,r,i){return this._client.post(te`/evals/${n}/runs`,m({body:r},i))}retrieve(n,r,i){let{eval_id:o}=r;return this._client.get(te`/evals/${o}/runs/${n}`,i)}list(n,r={},i){return this._client.getAPIList(te`/evals/${n}/runs`,un,m({query:r},i))}delete(n,r,i){let{eval_id:o}=r;return this._client.delete(te`/evals/${o}/runs/${n}`,i)}cancel(n,r,i){let{eval_id:o}=r;return this._client.post(te`/evals/${o}/runs/${n}`,i)}}return e.OutputItems=Av,e})();var SE=(()=>{class e extends oe{constructor(){super(...arguments),this.runs=new u1(this._client)}create(n,r){return this._client.post("/evals",m({body:n},r))}retrieve(n,r){return this._client.get(te`/evals/${n}`,r)}update(n,r,i){return this._client.post(te`/evals/${n}`,m({body:r},i))}list(n={},r){return this._client.getAPIList("/evals",un,m({query:n},r))}delete(n,r){return this._client.delete(te`/evals/${n}`,r)}}return e.Runs=u1,e})();var wh=class extends oe{create(t,n){return this._client.post("/files",Aa(m({body:t},n),this._client))}retrieve(t,n){return this._client.get(te`/files/${t}`,n)}list(t={},n){return this._client.getAPIList("/files",un,m({query:t},n))}delete(t,n){return this._client.delete(te`/files/${t}`,n)}content(t,n){return this._client.get(te`/files/${t}/content`,b(m({},n),{headers:Ce([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0}))}waitForProcessing(i){return y(this,arguments,function*(t,{pollInterval:n=5e3,maxWait:r=1800*1e3}={}){let o=new Set(["processed","error","deleted"]),s=Date.now(),a=yield this.retrieve(t);for(;!a.status||!o.has(a.status);)if(yield iu(n),a=yield this.retrieve(t),Date.now()-s>r)throw new nu({message:`Giving up on waiting for file ${t} to finish processing after ${r} milliseconds.`});return a})}};var Ov=class extends oe{};var Mv=class extends oe{run(t,n){return this._client.post("/fine_tuning/alpha/graders/run",m({body:t},n))}validate(t,n){return this._client.post("/fine_tuning/alpha/graders/validate",m({body:t},n))}};var d1=(()=>{class e extends oe{constructor(){super(...arguments),this.graders=new Mv(this._client)}}return e.Graders=Mv,e})();var Dv=class extends oe{create(t,n,r){return this._client.getAPIList(te`/fine_tuning/checkpoints/${t}/permissions`,au,m({body:n,method:"post"},r))}retrieve(t,n={},r){return this._client.get(te`/fine_tuning/checkpoints/${t}/permissions`,m({query:n},r))}delete(t,n,r){let{fine_tuned_model_checkpoint:i}=n;return this._client.delete(te`/fine_tuning/checkpoints/${i}/permissions/${t}`,r)}};var p1=(()=>{class e extends oe{constructor(){super(...arguments),this.permissions=new Dv(this._client)}}return e.Permissions=Dv,e})();var Pv=class extends oe{list(t,n={},r){return this._client.getAPIList(te`/fine_tuning/jobs/${t}/checkpoints`,un,m({query:n},r))}};var m1=(()=>{class e extends oe{constructor(){super(...arguments),this.checkpoints=new Pv(this._client)}create(n,r){return this._client.post("/fine_tuning/jobs",m({body:n},r))}retrieve(n,r){return this._client.get(te`/fine_tuning/jobs/${n}`,r)}list(n={},r){return this._client.getAPIList("/fine_tuning/jobs",un,m({query:n},r))}cancel(n,r){return this._client.post(te`/fine_tuning/jobs/${n}/cancel`,r)}listEvents(n,r={},i){return this._client.getAPIList(te`/fine_tuning/jobs/${n}/events`,un,m({query:r},i))}pause(n,r){return this._client.post(te`/fine_tuning/jobs/${n}/pause`,r)}resume(n,r){return this._client.post(te`/fine_tuning/jobs/${n}/resume`,r)}}return e.Checkpoints=Pv,e})();var kE=(()=>{class e extends oe{constructor(){super(...arguments),this.methods=new Ov(this._client),this.jobs=new m1(this._client),this.checkpoints=new p1(this._client),this.alpha=new d1(this._client)}}return e.Methods=Ov,e.Jobs=m1,e.Checkpoints=p1,e.Alpha=d1,e})();var Rv=class extends oe{};var TE=(()=>{class e extends oe{constructor(){super(...arguments),this.graderModels=new Rv(this._client)}}return e.GraderModels=Rv,e})();var xh=class extends oe{createVariation(t,n){return this._client.post("/images/variations",Aa(m({body:t},n),this._client))}edit(t,n){return this._client.post("/images/edits",Aa(b(m({body:t},n),{stream:t.stream??!1}),this._client))}generate(t,n){return this._client.post("/images/generations",b(m({body:t},n),{stream:t.stream??!1}))}};var Ch=class extends oe{retrieve(t,n){return this._client.get(te`/models/${t}`,n)}list(t){return this._client.getAPIList("/models",au,t)}delete(t,n){return this._client.delete(te`/models/${t}`,n)}};var Eh=class extends oe{create(t,n){return this._client.post("/moderations",m({body:t},n))}};var Nv=class extends oe{accept(t,n,r){return this._client.post(te`/realtime/calls/${t}/accept`,b(m({body:n},r),{headers:Ce([{Accept:"*/*"},r?.headers])}))}hangup(t,n){return this._client.post(te`/realtime/calls/${t}/hangup`,b(m({},n),{headers:Ce([{Accept:"*/*"},n?.headers])}))}refer(t,n,r){return this._client.post(te`/realtime/calls/${t}/refer`,b(m({body:n},r),{headers:Ce([{Accept:"*/*"},r?.headers])}))}reject(t,n={},r){return this._client.post(te`/realtime/calls/${t}/reject`,b(m({body:n},r),{headers:Ce([{Accept:"*/*"},r?.headers])}))}};var $v=class extends oe{create(t,n){return this._client.post("/realtime/client_secrets",m({body:t},n))}};var AE=(()=>{class e extends oe{constructor(){super(...arguments),this.clientSecrets=new $v(this._client),this.calls=new Nv(this._client)}}return e.ClientSecrets=$v,e.Calls=Nv,e})();function Jpe(e,t){return!t||!t5e(t)?b(m({},e),{output_parsed:null,output:e.output.map(n=>n.type==="function_call"?b(m({},n),{parsed_arguments:null}):n.type==="message"?b(m({},n),{content:n.content.map(r=>b(m({},r),{parsed:null}))}):n)}):SZ(e,t)}function SZ(e,t){let n=e.output.map(i=>{if(i.type==="function_call")return b(m({},i),{parsed_arguments:i5e(t,i)});if(i.type==="message"){let o=i.content.map(s=>s.type==="output_text"?b(m({},s),{parsed:e5e(t,s.text)}):s);return b(m({},i),{content:o})}return i}),r=Object.assign({},e,{output:n});return Object.getOwnPropertyDescriptor(e,"output_text")||f1(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(let i of r.output)if(i.type==="message"){for(let o of i.content)if(o.type==="output_text"&&o.parsed!==null)return o.parsed}return null}}),r}function e5e(e,t){return e.text?.format?.type!=="json_schema"?null:"$parseRaw"in e.text?.format?(e.text?.format).$parseRaw(t):JSON.parse(t)}function t5e(e){return!!uE(e.text?.format)}function n5e(e){return e?.$brand==="auto-parseable-tool"}function r5e(e,t){return e.find(n=>n.type==="function"&&n.name===t)}function i5e(e,t){let n=r5e(e.tools??[],t.name);return b(m(m({},t),t),{parsed_arguments:n5e(n)?n.$parseRaw(t.arguments):n?.strict?JSON.parse(t.arguments):null})}function f1(e){let t=[];for(let n of e.output)if(n.type==="message")for(let r of n.content)r.type==="output_text"&&t.push(r.text);e.output_text=t.join("")}var Lv,h1,pm,g1,Ype,Qpe,Xpe,eme,_1=class e extends lm{constructor(t){super(),Lv.add(this),h1.set(this,void 0),pm.set(this,void 0),g1.set(this,void 0),pt(this,h1,t,"f")}static createResponse(t,n,r){let i=new e(n);return i._run(()=>i._createOrRetrieveResponse(t,n,b(m({},r),{headers:b(m({},r?.headers),{"X-Stainless-Helper-Method":"stream"})}))),i}_createOrRetrieveResponse(t,n,r){return y(this,null,function*(){let i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),q(this,Lv,"m",Ype).call(this);let o,s=null;"response_id"in n?(o=yield t.responses.retrieve(n.response_id,{stream:!0},b(m({},r),{signal:this.controller.signal,stream:!0})),s=n.starting_after??null):o=yield t.responses.create(b(m({},n),{stream:!0}),b(m({},r),{signal:this.controller.signal})),this._connected();try{for(var a=ue(o),c,u,d;c=!(u=yield a.next()).done;c=!1){let f=u.value;q(this,Lv,"m",Qpe).call(this,f,s)}}catch{d=[u]}finally{try{c&&(u=a.return)&&(yield u.call(a))}finally{if(d)throw d[0]}}if(o.controller.signal?.aborted)throw new pi;return q(this,Lv,"m",Xpe).call(this)})}[(h1=new WeakMap,pm=new WeakMap,g1=new WeakMap,Lv=new WeakSet,Ype=function(){this.ended||pt(this,pm,void 0,"f")},Qpe=function(n,r){if(this.ended)return;let i=(s,a)=>{(r==null||a.sequence_number>r)&&this._emit(s,a)},o=q(this,Lv,"m",eme).call(this,n);switch(i("event",n),n.type){case"response.output_text.delta":{let s=o.output[n.output_index];if(!s)throw new Le(`missing output at index ${n.output_index}`);if(s.type==="message"){let a=s.content[n.content_index];if(!a)throw new Le(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new Le(`expected content to be 'output_text', got ${a.type}`);i("response.output_text.delta",b(m({},n),{snapshot:a.text}))}break}case"response.function_call_arguments.delta":{let s=o.output[n.output_index];if(!s)throw new Le(`missing output at index ${n.output_index}`);s.type==="function_call"&&i("response.function_call_arguments.delta",b(m({},n),{snapshot:s.arguments}));break}default:i(n.type,n);break}},Xpe=function(){if(this.ended)throw new Le("stream has ended, this shouldn't happen");let n=q(this,pm,"f");if(!n)throw new Le("request ended without sending any events");pt(this,pm,void 0,"f");let r=o5e(n,q(this,h1,"f"));return pt(this,g1,r,"f"),r},eme=function(n){let r=q(this,pm,"f");if(!r){if(n.type!=="response.created")throw new Le(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=pt(this,pm,n.response,"f"),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{let i=r.output[n.output_index];if(!i)throw new Le(`missing output at index ${n.output_index}`);let o=i.type,s=n.part;o==="message"&&s.type!=="reasoning_text"?i.content.push(s):o==="reasoning"&&s.type==="reasoning_text"&&(i.content||(i.content=[]),i.content.push(s));break}case"response.output_text.delta":{let i=r.output[n.output_index];if(!i)throw new Le(`missing output at index ${n.output_index}`);if(i.type==="message"){let o=i.content[n.content_index];if(!o)throw new Le(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new Le(`expected content to be 'output_text', got ${o.type}`);o.text+=n.delta}break}case"response.function_call_arguments.delta":{let i=r.output[n.output_index];if(!i)throw new Le(`missing output at index ${n.output_index}`);i.type==="function_call"&&(i.arguments+=n.delta);break}case"response.reasoning_text.delta":{let i=r.output[n.output_index];if(!i)throw new Le(`missing output at index ${n.output_index}`);if(i.type==="reasoning"){let o=i.content?.[n.content_index];if(!o)throw new Le(`missing content at index ${n.content_index}`);if(o.type!=="reasoning_text")throw new Le(`expected content to be 'reasoning_text', got ${o.type}`);o.text+=n.delta}break}case"response.completed":{pt(this,pm,n.response,"f");break}}return r},Symbol.asyncIterator)](){let t=[],n=[],r=!1;return this.on("event",i=>{let o=n.shift();o?o.resolve(i):t.push(i)}),this.on("end",()=>{r=!0;for(let i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(let o of n)o.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(let o of n)o.reject(i);n.length=0}),{next:()=>y(this,null,function*(){return t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,s)=>n.push({resolve:o,reject:s})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0})}),return:()=>y(this,null,function*(){return this.abort(),{value:void 0,done:!0}})}}finalResponse(){return y(this,null,function*(){yield this.done();let t=q(this,g1,"f");if(!t)throw new Le("stream ended without producing a ChatCompletion");return t})}};function o5e(e,t){return Jpe(e,t)}var Fv=class extends oe{list(t,n={},r){return this._client.getAPIList(te`/responses/${t}/input_items`,un,m({query:n},r))}};var jv=class extends oe{count(t={},n){return this._client.post("/responses/input_tokens",m({body:t},n))}};var OE=(()=>{class e extends oe{constructor(){super(...arguments),this.inputItems=new Fv(this._client),this.inputTokens=new jv(this._client)}create(n,r){return this._client.post("/responses",b(m({body:n},r),{stream:n.stream??!1}))._thenUnwrap(i=>("object"in i&&i.object==="response"&&f1(i),i))}retrieve(n,r={},i){return this._client.get(te`/responses/${n}`,b(m({query:r},i),{stream:r?.stream??!1}))._thenUnwrap(o=>("object"in o&&o.object==="response"&&f1(o),o))}delete(n,r){return this._client.delete(te`/responses/${n}`,b(m({},r),{headers:Ce([{Accept:"*/*"},r?.headers])}))}parse(n,r){return this._client.responses.create(n,r)._thenUnwrap(i=>SZ(i,n))}stream(n,r){return _1.createResponse(this._client,n,r)}cancel(n,r){return this._client.post(te`/responses/${n}/cancel`,r)}}return e.InputItems=Fv,e.InputTokens=jv,e})();var zv=class extends oe{create(t,n,r){return this._client.post(te`/uploads/${t}/parts`,Aa(m({body:n},r),this._client))}};var ME=(()=>{class e extends oe{constructor(){super(...arguments),this.parts=new zv(this._client)}create(n,r){return this._client.post("/uploads",m({body:n},r))}cancel(n,r){return this._client.post(te`/uploads/${n}/cancel`,r)}complete(n,r,i){return this._client.post(te`/uploads/${n}/complete`,m({body:r},i))}}return e.Parts=zv,e})();var tme=e=>y(null,null,function*(){let t=yield Promise.allSettled(e),n=t.filter(i=>i.status==="rejected");if(n.length){for(let i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}let r=[];for(let i of t)i.status==="fulfilled"&&r.push(i.value);return r});var Bv=class extends oe{create(t,n,r){return this._client.post(te`/vector_stores/${t}/file_batches`,b(m({body:n},r),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}retrieve(t,n,r){let{vector_store_id:i}=n;return this._client.get(te`/vector_stores/${i}/file_batches/${t}`,b(m({},r),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}cancel(t,n,r){let{vector_store_id:i}=n;return this._client.post(te`/vector_stores/${i}/file_batches/${t}/cancel`,b(m({},r),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}createAndPoll(t,n,r){return y(this,null,function*(){let i=yield this.create(t,n);return yield this.poll(t,i.id,r)})}listFiles(t,n,r){let s=n,{vector_store_id:i}=s,o=se(s,["vector_store_id"]);return this._client.getAPIList(te`/vector_stores/${i}/file_batches/${t}/files`,un,b(m({query:o},r),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}poll(t,n,r){return y(this,null,function*(){let i=Ce([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){let{data:o,response:s}=yield this.retrieve(n,{vector_store_id:t},b(m({},r),{headers:i})).withResponse();switch(o.status){case"in_progress":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{let c=s.headers.get("openai-poll-after-ms");if(c){let u=parseInt(c);isNaN(u)||(a=u)}}yield iu(a);break;case"failed":case"cancelled":case"completed":return o}}})}uploadAndPoll(o,s,a){return y(this,arguments,function*(t,{files:n,fileIds:r=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");let c=i?.maxConcurrency??5,u=Math.min(c,n.length),d=this._client,f=n.values(),g=[...r];function h(x){return y(this,null,function*(){for(let E of x){let C=yield d.files.create({file:E,purpose:"assistants"},i);g.push(C.id)}})}let v=Array(u).fill(f).map(h);return yield tme(v),yield this.createAndPoll(t,{file_ids:g})})}};var Uv=class extends oe{create(t,n,r){return this._client.post(te`/vector_stores/${t}/files`,b(m({body:n},r),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}retrieve(t,n,r){let{vector_store_id:i}=n;return this._client.get(te`/vector_stores/${i}/files/${t}`,b(m({},r),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}update(t,n,r){let s=n,{vector_store_id:i}=s,o=se(s,["vector_store_id"]);return this._client.post(te`/vector_stores/${i}/files/${t}`,b(m({body:o},r),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}list(t,n={},r){return this._client.getAPIList(te`/vector_stores/${t}/files`,un,b(m({query:n},r),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}delete(t,n,r){let{vector_store_id:i}=n;return this._client.delete(te`/vector_stores/${i}/files/${t}`,b(m({},r),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}createAndPoll(t,n,r){return y(this,null,function*(){let i=yield this.create(t,n,r);return yield this.poll(t,i.id,r)})}poll(t,n,r){return y(this,null,function*(){let i=Ce([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){let o=yield this.retrieve(n,{vector_store_id:t},b(m({},r),{headers:i})).withResponse(),s=o.data;switch(s.status){case"in_progress":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{let c=o.response.headers.get("openai-poll-after-ms");if(c){let u=parseInt(c);isNaN(u)||(a=u)}}yield iu(a);break;case"failed":case"completed":return s}}})}upload(t,n,r){return y(this,null,function*(){let i=yield this._client.files.create({file:n,purpose:"assistants"},r);return this.create(t,{file_id:i.id},r)})}uploadAndPoll(t,n,r){return y(this,null,function*(){let i=yield this.upload(t,n,r);return yield this.poll(t,i.id,r)})}content(t,n,r){let{vector_store_id:i}=n;return this._client.getAPIList(te`/vector_stores/${i}/files/${t}/content`,au,b(m({},r),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}};var DE=(()=>{class e extends oe{constructor(){super(...arguments),this.files=new Uv(this._client),this.fileBatches=new Bv(this._client)}create(n,r){return this._client.post("/vector_stores",b(m({body:n},r),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}retrieve(n,r){return this._client.get(te`/vector_stores/${n}`,b(m({},r),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}update(n,r,i){return this._client.post(te`/vector_stores/${n}`,b(m({body:r},i),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}list(n={},r){return this._client.getAPIList("/vector_stores",un,b(m({query:n},r),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}delete(n,r){return this._client.delete(te`/vector_stores/${n}`,b(m({},r),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}search(n,r,i){return this._client.getAPIList(te`/vector_stores/${n}/search`,au,b(m({body:r,method:"post"},i),{headers:Ce([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}}return e.Files=Uv,e.FileBatches=Bv,e})();var Ih=class extends oe{create(t,n){return this._client.post("/videos",cZ(m({body:t},n),this._client))}retrieve(t,n){return this._client.get(te`/videos/${t}`,n)}list(t={},n){return this._client.getAPIList("/videos",Sd,m({query:t},n))}delete(t,n){return this._client.delete(te`/videos/${t}`,n)}downloadContent(t,n={},r){return this._client.get(te`/videos/${t}/content`,b(m({query:n},r),{headers:Ce([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0}))}remix(t,n,r){return this._client.post(te`/videos/${t}/remix`,cZ(m({body:n},r),this._client))}};var Vv,nme,y1,Sh=class extends oe{constructor(){super(...arguments),Vv.add(this)}unwrap(o,s){return y(this,arguments,function*(t,n,r=this._client.webhookSecret,i=300){return yield this.verifySignature(t,n,r,i),JSON.parse(t)})}verifySignature(o,s){return y(this,arguments,function*(t,n,r=this._client.webhookSecret,i=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");q(this,Vv,"m",nme).call(this,r);let a=Ce([n]).values,c=q(this,Vv,"m",y1).call(this,a,"webhook-signature"),u=q(this,Vv,"m",y1).call(this,a,"webhook-timestamp"),d=q(this,Vv,"m",y1).call(this,a,"webhook-id"),f=parseInt(u,10);if(isNaN(f))throw new ru("Invalid webhook timestamp format");let g=Math.floor(Date.now()/1e3);if(g-f>i)throw new ru("Webhook timestamp is too old");if(f>g+i)throw new ru("Webhook timestamp is too new");let h=c.split(" ").map(C=>C.startsWith("v1,")?C.substring(3):C),v=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),x=d?`${d}.${u}.${t}`:`${u}.${t}`,E=yield crypto.subtle.importKey("raw",v,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(let C of h)try{let S=Buffer.from(C,"base64");if(yield crypto.subtle.verify("HMAC",E,S,new TextEncoder().encode(x)))return}catch{continue}throw new ru("The given webhook signature does not match the expected signature")})}};Vv=new WeakSet,nme=function(t){if(typeof t!="string"||t.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},y1=function(t,n){if(!t)throw new Error("Headers are required");let r=t.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var kZ,TZ,v1,rme,Tt=class{constructor(a={}){var c=a,{baseURL:t=dm("OPENAI_BASE_URL"),apiKey:n=dm("OPENAI_API_KEY"),organization:r=dm("OPENAI_ORG_ID")??null,project:i=dm("OPENAI_PROJECT_ID")??null,webhookSecret:o=dm("OPENAI_WEBHOOK_SECRET")??null}=c,s=se(c,["baseURL","apiKey","organization","project","webhookSecret"]);if(kZ.add(this),v1.set(this,void 0),this.completions=new vh(this),this.chat=new yE(this),this.embeddings=new bh(this),this.files=new wh(this),this.images=new xh(this),this.audio=new vE(this),this.moderations=new Eh(this),this.models=new Ch(this),this.fineTuning=new kE(this),this.graders=new TE(this),this.vectorStores=new DE(this),this.webhooks=new Sh(this),this.beta=new CE(this),this.batches=new hh(this),this.uploads=new ME(this),this.responses=new OE(this),this.realtime=new AE(this),this.conversations=new IE(this),this.evals=new SE(this),this.containers=new EE(this),this.videos=new Ih(this),n===void 0)throw new Le("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");let u=b(m({apiKey:n,organization:r,project:i,webhookSecret:o},s),{baseURL:t||"https://api.openai.com/v1"});if(!u.dangerouslyAllowBrowser&&lpe())throw new Le(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=u.baseURL,this.timeout=u.timeout??TZ.DEFAULT_TIMEOUT,this.logger=u.logger??console;let d="warn";this.logLevel=d,this.logLevel=nZ(u.logLevel,"ClientOptions.logLevel",this)??nZ(dm("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??d,this.fetchOptions=u.fetchOptions,this.maxRetries=u.maxRetries??2,this.fetch=u.fetch??dpe(),pt(this,v1,mpe,"f"),this._options=u,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=i,this.webhookSecret=o}withOptions(t){return new this.constructor(m(b(m({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret}),t))}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){}authHeaders(t){return y(this,null,function*(){return Ce([{Authorization:`Bearer ${this.apiKey}`}])})}stringifyQuery(t){return eZ(t,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${cm}`}defaultIdempotencyKey(){return`stainless-node-retry-${H5()}`}makeStatusError(t,n,r,i){return Wi.generate(t,n,r,i)}_callApiKey(){return y(this,null,function*(){let t=this._options.apiKey;if(typeof t!="function")return!1;let n;try{n=yield t()}catch(r){throw r instanceof Le?r:new Le(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new Le(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0})}buildURL(t,n,r){let i=!q(this,kZ,"m",rme).call(this)&&r||this.baseURL,o=tpe(t)?new URL(t):new URL(i+(i.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),s=this.defaultQuery();return npe(s)||(n=m(m({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}prepareOptions(t){return y(this,null,function*(){yield this._callApiKey()})}prepareRequest(i,o){return y(this,arguments,function*(t,{url:n,options:r}){})}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,r){return this.request(Promise.resolve(r).then(i=>m({method:t,path:n},i)))}request(t,n=null){return new dh(this,this.makeRequest(t,n,void 0))}makeRequest(t,n,r){return y(this,null,function*(){let i=yield t,o=i.maxRetries??this.maxRetries;n==null&&(n=o),yield this.prepareOptions(i);let{req:s,url:a,timeout:c}=yield this.buildRequest(i,{retryCount:o-n});yield this.prepareRequest(s,{url:a,options:i});let u="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),d=r===void 0?"":`, retryOf: ${r}`,f=Date.now();if(xi(this).debug(`[${u}] sending request`,Id({retryOfRequestLogID:r,method:i.method,url:a,options:i,headers:s.headers})),i.signal?.aborted)throw new pi;let g=new AbortController,h=yield this.fetchWithTimeout(a,s,c,g).catch(eE),v=Date.now();if(h instanceof globalThis.Error){let C=`retrying, ${n} attempts remaining`;if(i.signal?.aborted)throw new pi;let S=XC(h)||/timed? ?out/i.test(String(h)+("cause"in h?String(h.cause):""));if(n)return xi(this).info(`[${u}] connection ${S?"timed out":"failed"} - ${C}`),xi(this).debug(`[${u}] connection ${S?"timed out":"failed"} (${C})`,Id({retryOfRequestLogID:r,url:a,durationMs:v-f,message:h.message})),this.retryRequest(i,n,r??u);throw xi(this).info(`[${u}] connection ${S?"timed out":"failed"} - error; no more retries left`),xi(this).debug(`[${u}] connection ${S?"timed out":"failed"} (error; no more retries left)`,Id({retryOfRequestLogID:r,url:a,durationMs:v-f,message:h.message})),S?new nu:new am({cause:h})}let x=[...h.headers.entries()].filter(([C])=>C==="x-request-id").map(([C,S])=>", "+C+": "+JSON.stringify(S)).join(""),E=`[${u}${d}${x}] ${s.method} ${a} ${h.ok?"succeeded":"failed"} with status ${h.status} in ${v-f}ms`;if(!h.ok){let C=yield this.shouldRetry(h);if(n&&C){let ee=`retrying, ${n} attempts remaining`;return yield ppe(h.body),xi(this).info(`${E} - ${ee}`),xi(this).debug(`[${u}] response error (${ee})`,Id({retryOfRequestLogID:r,url:h.url,status:h.status,headers:h.headers,durationMs:v-f})),this.retryRequest(i,n,r??u,h.headers)}let S=C?"error; no more retries left":"error; not retryable";xi(this).info(`${E} - ${S}`);let A=yield h.text().catch(ee=>eE(ee).message),P=ope(A),F=P?void 0:A;throw xi(this).debug(`[${u}] response error (${S})`,Id({retryOfRequestLogID:r,url:h.url,status:h.status,headers:h.headers,message:F,durationMs:Date.now()-f})),this.makeStatusError(h.status,P,F,h.headers)}return xi(this).info(E),xi(this).debug(`[${u}] response start`,Id({retryOfRequestLogID:r,url:h.url,status:h.status,headers:h.headers,durationMs:v-f})),{response:h,options:i,controller:g,requestLogID:u,retryOfRequestLogID:r,startTime:f}})}getAPIList(t,n,r){return this.requestAPIList(n,m({method:"get",path:t},r))}requestAPIList(t,n){let r=this.makeRequest(n,null,void 0);return new sE(this,r,t)}fetchWithTimeout(t,n,r,i){return y(this,null,function*(){let f=n||{},{signal:o,method:s}=f,a=se(f,["signal","method"]);o&&o.addEventListener("abort",()=>i.abort());let c=setTimeout(()=>i.abort(),r),u=globalThis.ReadableStream&&a.body instanceof globalThis.ReadableStream||typeof a.body=="object"&&a.body!==null&&Symbol.asyncIterator in a.body,d=m(b(m({signal:i.signal},u?{duplex:"half"}:{}),{method:"GET"}),a);s&&(d.method=s.toUpperCase());try{return yield this.fetch.call(void 0,t,d)}finally{clearTimeout(c)}})}shouldRetry(t){return y(this,null,function*(){let n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500})}retryRequest(t,n,r,i){return y(this,null,function*(){let o,s=i?.get("retry-after-ms");if(s){let c=parseFloat(s);Number.isNaN(c)||(o=c)}let a=i?.get("retry-after");if(a&&!o){let c=parseFloat(a);Number.isNaN(c)?o=Date.parse(a)-Date.now():o=c*1e3}if(!(o&&0<=o&&o<60*1e3)){let c=t.maxRetries??this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,c)}return yield iu(o),this.makeRequest(t,n-1,r)})}calculateDefaultRetryTimeoutMillis(t,n){let o=n-t,s=Math.min(.5*Math.pow(2,o),8),a=1-Math.random()*.25;return s*a*1e3}buildRequest(r){return y(this,arguments,function*(t,{retryCount:n=0}={}){let i=m({},t),{method:o,path:s,query:a,defaultBaseURL:c}=i,u=this.buildURL(s,a,c);"timeout"in i&&ipe("timeout",i.timeout),i.timeout=i.timeout??this.timeout;let{bodyHeaders:d,body:f}=this.buildBody({options:i}),g=yield this.buildHeaders({options:t,method:o,bodyHeaders:d,retryCount:n});return{req:m(m(m(m(m({method:o,headers:g},i.signal&&{signal:i.signal}),globalThis.ReadableStream&&f instanceof globalThis.ReadableStream&&{duplex:"half"}),f&&{body:f}),this.fetchOptions??{}),i.fetchOptions??{}),url:u,timeout:i.timeout}})}buildHeaders(o){return y(this,arguments,function*({options:t,method:n,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=t.idempotencyKey);let a=Ce([s,b(m(m({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),upe()),{"OpenAI-Organization":this.organization,"OpenAI-Project":this.project}),yield this.authHeaders(t),this._options.defaultHeaders,r,t.headers]);return this.validateHeaders(a),a.values})}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};let r=Ce([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&r.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:LR(t)}:q(this,v1,"f").call(this,{body:t,headers:r})}};TZ=Tt,v1=new WeakMap,kZ=new WeakSet,rme=function(){return this.baseURL!=="https://api.openai.com/v1"};Tt.OpenAI=TZ;Tt.DEFAULT_TIMEOUT=6e5;Tt.OpenAIError=Le;Tt.APIError=Wi;Tt.APIConnectionError=am;Tt.APIConnectionTimeoutError=nu;Tt.APIUserAbortError=pi;Tt.NotFoundError=rv;Tt.ConflictError=iv;Tt.RateLimitError=sv;Tt.BadRequestError=ev;Tt.AuthenticationError=tv;Tt.InternalServerError=av;Tt.PermissionDeniedError=nv;Tt.UnprocessableEntityError=ov;Tt.InvalidWebhookSignatureError=ru;Tt.toFile=cE;Tt.Completions=vh;Tt.Chat=yE;Tt.Embeddings=bh;Tt.Files=wh;Tt.Images=xh;Tt.Audio=vE;Tt.Moderations=Eh;Tt.Models=Ch;Tt.FineTuning=kE;Tt.Graders=TE;Tt.VectorStores=DE;Tt.Webhooks=Sh;Tt.Beta=CE;Tt.Batches=hh;Tt.Uploads=ME;Tt.Responses=OE;Tt.Realtime=AE;Tt.Conversations=IE;Tt.Evals=SE;Tt.Containers=EE;Tt.Videos=Ih;function mm(e){if(!e||typeof e!="object")return e;let t;return e.constructor.name===nu.name&&"message"in e&&typeof e.message=="string"?(t=new Error(e.message),t.name="TimeoutError"):e.constructor.name===pi.name&&"message"in e&&typeof e.message=="string"?(t=new Error(e.message),t.name="AbortError"):"status"in e&&e.status===400&&"message"in e&&typeof e.message=="string"&&e.message.includes("tool_calls")?t=QC(e,"INVALID_TOOL_RESULTS"):"status"in e&&e.status===401?t=QC(e,"MODEL_AUTHENTICATION"):"status"in e&&e.status===429?t=QC(e,"MODEL_RATE_LIMIT"):"status"in e&&e.status===404?t=QC(e,"MODEL_NOT_FOUND"):t=e,t}var Md=e=>e();function Dd(e){return e?!!(/^o\d/.test(e??"")||e.startsWith("gpt-5")&&!e.startsWith("gpt-5-chat")):!1}function p5e(e){return e.role!=="system"&&e.role!=="developer"&&e.role!=="assistant"&&e.role!=="user"&&e.role!=="function"&&e.role!=="tool"&&console.warn(`Unknown message role: ${e.role}`),e.role}function Pd(e){let t=e._getType();switch(t){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":if(!_s.isInstance(e))throw new Error("Invalid generic chat message");return p5e(e);default:throw new Error(`Unknown message type: ${t}`)}}function fm(e){let{azureOpenAIApiDeploymentName:t,azureOpenAIApiInstanceName:n,azureOpenAIApiKey:r,azureOpenAIBasePath:i,baseURL:o,azureADTokenProvider:s,azureOpenAIEndpoint:a}=e;if((r||s)&&i&&t)return`${i}/${t}`;if((r||s)&&a&&t)return`${a}/openai/deployments/${t}`;if(r||s){if(!n)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!t)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${n}.openai.azure.com/openai/deployments/${t}`}return o}function OZ(e){return typeof Headers<"u"&&e!==null&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Headers]"}function ime(e){let t=Md(()=>{if(OZ(e))return e;if(Array.isArray(e))return new Headers(e);if(typeof e=="object"&&e!==null&&"values"in e&&OZ(e.values))return e.values;if(typeof e=="object"&&e!==null){let n=Object.entries(e).filter(([,r])=>typeof r=="string").map(([r,i])=>[r,i]);return new Headers(n)}return new Headers});return Object.fromEntries(t.entries())}function ome(){let e=uP();return(e==="node"||e==="deno")&&(e=`(${e}/${process.version}; ${process.platform}; ${process.arch})`),e}function hm(e,t=!1,n="1.0.0"){let r=ime(e),i=ome(),o=`langchainjs${t?"-azure":""}-openai`;return b(m({},r),{"User-Agent":r["User-Agent"]?`${o}/${n} (${i})${r["User-Agent"]}`:`${o}/${n} (${i})`})}function PE(e){return e!==void 0&&Array.isArray(e.lc_namespace)}function RE(e){return e!==void 0&&dt.isRunnable(e)&&"lc_name"in e.constructor&&typeof e.constructor.lc_name=="function"&&e.constructor.lc_name()==="RunnableToolLike"}function NE(e){return!!e&&typeof e=="object"&&"name"in e&&"schema"in e&&(Is(e.schema)||e.schema!=null&&typeof e.schema=="object"&&"type"in e.schema&&typeof e.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(e.schema.type))}function kh(e){return NE(e)||RE(e)||PE(e)}var MZ={};ae(MZ,{convertToOpenAIFunction:()=>DZ,convertToOpenAITool:()=>PZ,isLangChainTool:()=>kh,isRunnableToolLike:()=>RE,isStructuredTool:()=>PE,isStructuredToolParams:()=>NE});function DZ(e,t){let n=typeof t=="number"?void 0:t;return m({name:e.name,description:e.description,parameters:$i(e.schema)},n?.strict!==void 0?{strict:n.strict}:{})}function PZ(e,t){let n=typeof t=="number"?void 0:t,r;return kh(e)?r={type:"function",function:DZ(e)}:r=e,n?.strict!==void 0&&(r.function.strict=n.strict),r}var RZ={};ae(RZ,{extendInteropZodObject:()=>hR,getInteropZodDefaultGetter:()=>u5,getInteropZodObjectShape:()=>sh,getSchemaDescription:()=>Bc,interopParse:()=>Vy,interopParseAsync:()=>rm,interopSafeParse:()=>wue,interopSafeParseAsync:()=>mR,interopZodObjectMakeFieldsOptional:()=>Cue,interopZodObjectPartial:()=>Zy,interopZodObjectPassthrough:()=>pR,interopZodObjectStrict:()=>Uy,interopZodTransformInputSchema:()=>gR,isInteropZodError:()=>_R,isInteropZodLiteral:()=>bue,isInteropZodObject:()=>Ea,isInteropZodSchema:()=>Is,isShapelessZodSchema:()=>xue,isSimpleStringZodSchema:()=>Hy,isZodArrayV4:()=>LC,isZodLiteralV3:()=>c5,isZodLiteralV4:()=>l5,isZodObjectV3:()=>fR,isZodObjectV4:()=>cc,isZodSchema:()=>vue,isZodSchemaV3:()=>Vr,isZodSchemaV4:()=>Ur});function sme(e,t){let n;return kh(e)?n=PZ(e):n=e,t?.strict!==void 0&&(n.function.strict=t.strict),n}function m5e(e){return e.anyOf!==void 0&&Array.isArray(e.anyOf)}function ame(e){let t=["namespace functions {",""];for(let n of e)n.description&&t.push(`// ${n.description}`),Object.keys(n.parameters.properties??{}).length>0?(t.push(`type ${n.name} = (_: {`),t.push(cme(n.parameters,0)),t.push("}) => any;")):t.push(`type ${n.name} = () => any;`),t.push("");return t.push("} // namespace functions"),t.join(`
`)}function cme(e,t){let n=[];for(let[r,i]of Object.entries(e.properties??{}))i.description&&t<2&&n.push(`// ${i.description}`),e.required?.includes(r)?n.push(`${r}: ${b1(i,t)},`):n.push(`${r}?: ${b1(i,t)},`);return n.map(r=>" ".repeat(t)+r).join(`
`)}function b1(e,t){if(m5e(e))return e.anyOf.map(n=>b1(n,t)).join(" | ");switch(e.type){case"string":return e.enum?e.enum.map(n=>`"${n}"`).join(" | "):"string";case"number":return e.enum?e.enum.map(n=>`${n}`).join(" | "):"number";case"integer":return e.enum?e.enum.map(n=>`${n}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",cme(e,t+2),"}"].join(`
`);case"array":return e.items?`${b1(e.items,t)}[]`:"any[]";default:return""}}function w1(e){if(e)return e==="any"||e==="required"?"required":e==="auto"?"auto":e==="none"?"none":typeof e=="string"?{type:"function",function:{name:e}}:e}function Hv(e){return"type"in e&&e.type!=="function"}function lme(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type!=="function"}function Th(e){return typeof e=="object"&&e!==null&&"metadata"in e&&typeof e.metadata=="object"&&e.metadata!==null&&"customTool"in e.metadata&&typeof e.metadata.customTool=="object"&&e.metadata.customTool!==null}function x1(e){return"type"in e&&e.type==="custom"&&"custom"in e&&typeof e.custom=="object"&&e.custom!==null}function ume(e){if(e.type==="custom_tool_call")return b(m({},e),{type:"tool_call",call_id:e.id,id:e.call_id,name:e.name,isCustomTool:!0,args:{input:e.input}})}function dme(e){return e.type==="tool_call"&&"isCustomTool"in e&&e.isCustomTool===!0}function pme(e){let t=()=>{if(e.custom.format){if(e.custom.format.type==="grammar")return{type:"grammar",definition:e.custom.format.grammar.definition,syntax:e.custom.format.grammar.syntax};if(e.custom.format.type==="text")return{type:"text"}}};return{type:"custom",name:e.custom.name,description:e.custom.description,format:t()}}function mme(e){let t=()=>{if(e.format){if(e.format.type==="grammar")return{type:"grammar",grammar:{definition:e.format.definition,syntax:e.format.syntax}};if(e.format.type==="text")return{type:"text"}}};return{type:"custom",custom:{name:e.name,description:e.description,format:t()}}}var hme=Symbol("Let zodToJsonSchema decide on which parser to use"),fme={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},gme=e=>typeof e=="string"?b(m({},fme),{basePath:["#"],definitions:{},name:e}):m(b(m({},fme),{basePath:["#"],definitions:{}}),e);var $E=e=>"_def"in e?e._def:e;function _me(e){if(!e)return!0;for(let t in e)return!1;return!0}var yme=e=>{let t=gme(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return b(m({},t),{currentPath:n,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(t.definitions).map(([r,i])=>[$E(i),{def:$E(i),path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))})};function NZ(e,t,n,r){r?.errorMessages&&n&&(e.errorMessage=b(m({},e.errorMessage),{[t]:n}))}function $n(e,t,n,r,i){e[t]=n,NZ(e,t,r,i)}function vme(){return{}}function bme(e,t){let n={type:"array"};return e.type?._def?.typeName!==Y.ZodAny&&(n.items=At(e.type._def,b(m({},t),{currentPath:[...t.currentPath,"items"]}))),e.minLength&&$n(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&$n(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&($n(n,"minItems",e.exactLength.value,e.exactLength.message,t),$n(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function wme(e,t){let n={type:"integer",format:"int64"};if(!e.checks)return n;for(let r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?$n(n,"minimum",r.value,r.message,t):$n(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),$n(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?$n(n,"maximum",r.value,r.message,t):$n(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),$n(n,"maximum",r.value,r.message,t));break;case"multipleOf":$n(n,"multipleOf",r.value,r.message,t);break}return n}function xme(){return{type:"boolean"}}function Cme(e,t){return At(e.type._def,t)}var Eme=(e,t)=>At(e.innerType._def,t);function $Z(e,t,n){let r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((i,o)=>$Z(e,t,i))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return f5e(e,t)}}var f5e=(e,t)=>{let n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(let r of e.checks)switch(r.kind){case"min":$n(n,"minimum",r.value,r.message,t);break;case"max":$n(n,"maximum",r.value,r.message,t);break}return n};function Ime(e,t){return b(m({},At(e.innerType._def,t)),{default:e.defaultValue()})}function Sme(e,t,n){return t.effectStrategy==="input"?At(e.schema._def,t,n):{}}function kme(e){return{type:"string",enum:[...e.values]}}var h5e=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function Tme(e,t){let n=[At(e.left._def,b(m({},t),{currentPath:[...t.currentPath,"allOf","0"]})),At(e.right._def,b(m({},t),{currentPath:[...t.currentPath,"allOf","1"]}))].filter(o=>!!o),r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,i=[];return n.forEach(o=>{if(h5e(o))i.push(...o.allOf),o.unevaluatedProperties===void 0&&(r=void 0);else{let a=o;if("additionalProperties"in o&&o.additionalProperties===!1){let s=o,{additionalProperties:c}=s;a=se(s,["additionalProperties"])}else r=void 0;i.push(a)}}),i.length?m({allOf:i},r):void 0}function Ame(e,t){let n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}var LZ,Ah={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(LZ===void 0&&(LZ=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),LZ),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function C1(e,t){let n={type:"string"};function r(i){return t.patternStrategy==="escape"?g5e(i):i}if(e.checks)for(let i of e.checks)switch(i.kind){case"min":$n(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,i.value):i.value,i.message,t);break;case"max":$n(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,i.value):i.value,i.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Gc(n,"email",i.message,t);break;case"format:idn-email":Gc(n,"idn-email",i.message,t);break;case"pattern:zod":Wc(n,Ah.email,i.message,t);break}break;case"url":Gc(n,"uri",i.message,t);break;case"uuid":Gc(n,"uuid",i.message,t);break;case"regex":Wc(n,i.regex,i.message,t);break;case"cuid":Wc(n,Ah.cuid,i.message,t);break;case"cuid2":Wc(n,Ah.cuid2,i.message,t);break;case"startsWith":Wc(n,RegExp(`^${r(i.value)}`),i.message,t);break;case"endsWith":Wc(n,RegExp(`${r(i.value)}$`),i.message,t);break;case"datetime":Gc(n,"date-time",i.message,t);break;case"date":Gc(n,"date",i.message,t);break;case"time":Gc(n,"time",i.message,t);break;case"duration":Gc(n,"duration",i.message,t);break;case"length":$n(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,i.value):i.value,i.message,t),$n(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,i.value):i.value,i.message,t);break;case"includes":{Wc(n,RegExp(r(i.value)),i.message,t);break}case"ip":{i.version!=="v6"&&Gc(n,"ipv4",i.message,t),i.version!=="v4"&&Gc(n,"ipv6",i.message,t);break}case"emoji":Wc(n,Ah.emoji,i.message,t);break;case"ulid":{Wc(n,Ah.ulid,i.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{Gc(n,"binary",i.message,t);break}case"contentEncoding:base64":{$n(n,"contentEncoding","base64",i.message,t);break}case"pattern:zod":{Wc(n,Ah.base64,i.message,t);break}}break}case"nanoid":Wc(n,Ah.nanoid,i.message,t);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return n}var g5e=e=>Array.from(e).map(t=>/[a-zA-Z0-9]/.test(t)?t:`\\${t}`).join(""),Gc=(e,t,n,r)=>{e.format||e.anyOf?.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push(m({format:e.format},e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}})),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push(m({format:t},n&&r.errorMessages&&{errorMessage:{format:n}}))):$n(e,"format",t,n,r)},Wc=(e,t,n,r)=>{e.pattern||e.allOf?.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push(m({pattern:e.pattern},e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}})),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push(m({pattern:Ome(t,r)},n&&r.errorMessages&&{errorMessage:{pattern:n}}))):$n(e,"pattern",Ome(t,r),n,r)},Ome=(e,t)=>{let n=typeof e=="function"?e():e;if(!t.applyRegexFlags||!n.flags)return n.source;let r={i:n.flags.includes("i"),m:n.flags.includes("m"),s:n.flags.includes("s")},i=r.i?n.source.toLowerCase():n.source,o="",s=!1,a=!1,c=!1;for(let u=0;u<i.length;u++){if(s){o+=i[u],s=!1;continue}if(r.i){if(a){if(i[u].match(/[a-z]/)){c?(o+=i[u],o+=`${i[u-2]}-${i[u]}`.toUpperCase(),c=!1):i[u+1]==="-"&&i[u+2]?.match(/[a-z]/)?(o+=i[u],c=!0):o+=`${i[u]}${i[u].toUpperCase()}`;continue}}else if(i[u].match(/[a-z]/)){o+=`[${i[u]}${i[u].toUpperCase()}]`;continue}}if(r.m){if(i[u]==="^"){o+=`(^|(?<=[\r
]))`;continue}else if(i[u]==="$"){o+=`($|(?=[\r
]))`;continue}}if(r.s&&i[u]==="."){o+=a?`${i[u]}\r
`:`[${i[u]}\r
]`;continue}o+=i[u],i[u]==="\\"?s=!0:a&&i[u]==="]"?a=!1:!a&&i[u]==="["&&(a=!0)}try{let u=new RegExp(o)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),n.source}return o};function E1(e,t){if(t.target==="openApi3"&&e.keyType?._def.typeName===Y.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,i)=>b(m({},r),{[i]:At(e.valueType._def,b(m({},t),{currentPath:[...t.currentPath,"properties",i]}))??{}}),{}),additionalProperties:!1};let n={type:"object",additionalProperties:At(e.valueType._def,b(m({},t),{currentPath:[...t.currentPath,"additionalProperties"]}))??{}};if(t.target==="openApi3")return n;if(e.keyType?._def.typeName===Y.ZodString&&e.keyType._def.checks?.length){let r=Object.entries(C1(e.keyType._def,t)).reduce((i,[o,s])=>o==="type"?i:b(m({},i),{[o]:s}),{});return b(m({},n),{propertyNames:r})}else if(e.keyType?._def.typeName===Y.ZodEnum)return b(m({},n),{propertyNames:{enum:e.keyType._def.values}});return n}function Mme(e,t){if(t.mapStrategy==="record")return E1(e,t);let n=At(e.keyType._def,b(m({},t),{currentPath:[...t.currentPath,"items","items","0"]}))||{},r=At(e.valueType._def,b(m({},t),{currentPath:[...t.currentPath,"items","items","1"]}))||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function Dme(e){let t=e.values,r=Object.keys(e.values).filter(o=>typeof t[t[o]]!="number").map(o=>t[o]),i=Array.from(new Set(r.map(o=>typeof o)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:r}}function Pme(){return{not:{}}}function Rme(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var LE={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function $me(e,t){if(t.target==="openApi3")return Nme(e,t);let n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in LE&&(!r._def.checks||!r._def.checks.length))){let r=n.reduce((i,o)=>{let s=LE[o._def.typeName];return s&&!i.includes(s)?[...i,s]:i},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){let r=n.reduce((i,o)=>{let s=typeof o._def.value;switch(s){case"string":case"number":case"boolean":return[...i,s];case"bigint":return[...i,"integer"];case"object":if(o._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(r.length===n.length){let i=r.filter((o,s,a)=>a.indexOf(o)===s);return{type:i.length>1?i:i[0],enum:n.reduce((o,s)=>o.includes(s._def.value)?o:[...o,s._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,i)=>[...r,...i._def.values.filter(o=>!r.includes(o))],[])};return Nme(e,t)}var Nme=(e,t)=>{let n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,i)=>At(r._def,b(m({},t),{currentPath:[...t.currentPath,"anyOf",`${i}`]}))).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function Lme(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"||t.nullableStrategy==="property"?{type:LE[e.innerType._def.typeName],nullable:!0}:{type:[LE[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){let r=At(e.innerType._def,b(m({},t),{currentPath:[...t.currentPath]}));return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&b(m({},r),{nullable:!0})}let n=At(e.innerType._def,b(m({},t),{currentPath:[...t.currentPath,"anyOf","0"]}));return n&&{anyOf:[n,{type:"null"}]}}function Fme(e,t){let n={type:"number"};if(!e.checks)return n;for(let r of e.checks)switch(r.kind){case"int":n.type="integer",NZ(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?$n(n,"minimum",r.value,r.message,t):$n(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),$n(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?$n(n,"maximum",r.value,r.message,t):$n(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),$n(n,"maximum",r.value,r.message,t));break;case"multipleOf":$n(n,"multipleOf",r.value,r.message,t);break}return n}function _5e(e,t){return t.removeAdditionalStrategy==="strict"?e.catchall._def.typeName==="ZodNever"?e.unknownKeys!=="strict":At(e.catchall._def,b(m({},t),{currentPath:[...t.currentPath,"additionalProperties"]}))??!0:e.catchall._def.typeName==="ZodNever"?e.unknownKeys==="passthrough":At(e.catchall._def,b(m({},t),{currentPath:[...t.currentPath,"additionalProperties"]}))??!0}function jme(e,t){let n=b(m({type:"object"},Object.entries(e.shape()).reduce((r,[i,o])=>{if(o===void 0||o._def===void 0)return r;let s=[...t.currentPath,"properties",i],a=At(o._def,b(m({},t),{currentPath:s,propertyPath:s}));if(a===void 0)return r;if(t.openaiStrictMode&&o.isOptional()&&!o.isNullable()&&typeof o._def?.defaultValue>"u")throw new Error(`Zod field at \`${s.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);return{properties:b(m({},r.properties),{[i]:a}),required:o.isOptional()&&!t.openaiStrictMode?r.required:[...r.required,i]}},{properties:{},required:[]})),{additionalProperties:_5e(e,t)});return n.required.length||delete n.required,n}var zme=(e,t)=>{if(t.propertyPath&&t.currentPath.slice(0,t.propertyPath.length).toString()===t.propertyPath.toString())return At(e.innerType._def,b(m({},t),{currentPath:t.currentPath}));let n=At(e.innerType._def,b(m({},t),{currentPath:[...t.currentPath,"anyOf","1"]}));return n?{anyOf:[{not:{}},n]}:{}};var Bme=(e,t)=>{if(t.pipeStrategy==="input")return At(e.in._def,t);if(t.pipeStrategy==="output")return At(e.out._def,t);let n=At(e.in._def,b(m({},t),{currentPath:[...t.currentPath,"allOf","0"]})),r=At(e.out._def,b(m({},t),{currentPath:[...t.currentPath,"allOf",n?"1":"0"]}));return{allOf:[n,r].filter(i=>i!==void 0)}};function Ume(e,t){return At(e.type._def,t)}function Vme(e,t){let r={type:"array",uniqueItems:!0,items:At(e.valueType._def,b(m({},t),{currentPath:[...t.currentPath,"items"]}))};return e.minSize&&$n(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&$n(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function Hme(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>At(n._def,b(m({},t),{currentPath:[...t.currentPath,"items",`${r}`]}))).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:At(e.rest._def,b(m({},t),{currentPath:[...t.currentPath,"additionalItems"]}))}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>At(n._def,b(m({},t),{currentPath:[...t.currentPath,"items",`${r}`]}))).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function Zme(){return{not:{}}}function qme(){return{}}var Gme=(e,t)=>At(e.innerType._def,t);function At(e,t,n=!1){let r=t.seen.get(e);if(t.override){let s=t.override?.(e,t,r,n);if(s!==hme)return s}if(r&&!n){let s=y5e(r,t);if(s!==void 0)return"$ref"in s&&t.seenRefs.add(s.$ref),s}let i={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,i);let o=b5e(e,e.typeName,t,n);return o&&w5e(e,t,o),i.jsonSchema=o,o}var y5e=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"extract-to-root":let n=e.path.slice(t.basePath.length+1).join("_");return n!==t.name&&t.nameStrategy==="duplicate-ref"&&(t.definitions[n]=e.def),{$ref:[...t.basePath,t.definitionPath,n].join("/")};case"relative":return{$ref:v5e(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,i)=>t.currentPath[i]===r)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},v5e=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},b5e=(e,t,n,r)=>{switch(t){case Y.ZodString:return C1(e,n);case Y.ZodNumber:return Fme(e,n);case Y.ZodObject:return jme(e,n);case Y.ZodBigInt:return wme(e,n);case Y.ZodBoolean:return xme();case Y.ZodDate:return $Z(e,n);case Y.ZodUndefined:return Zme();case Y.ZodNull:return Rme(n);case Y.ZodArray:return bme(e,n);case Y.ZodUnion:case Y.ZodDiscriminatedUnion:return $me(e,n);case Y.ZodIntersection:return Tme(e,n);case Y.ZodTuple:return Hme(e,n);case Y.ZodRecord:return E1(e,n);case Y.ZodLiteral:return Ame(e,n);case Y.ZodEnum:return kme(e);case Y.ZodNativeEnum:return Dme(e);case Y.ZodNullable:return Lme(e,n);case Y.ZodOptional:return zme(e,n);case Y.ZodMap:return Mme(e,n);case Y.ZodSet:return Vme(e,n);case Y.ZodLazy:return At(e.getter()._def,n);case Y.ZodPromise:return Ume(e,n);case Y.ZodNaN:case Y.ZodNever:return Pme();case Y.ZodEffects:return Sme(e,n,r);case Y.ZodAny:return vme();case Y.ZodUnknown:return qme();case Y.ZodDefault:return Ime(e,n);case Y.ZodBranded:return Cme(e,n);case Y.ZodReadonly:return Gme(e,n);case Y.ZodCatch:return Eme(e,n);case Y.ZodPipeline:return Bme(e,n);case Y.ZodFunction:case Y.ZodVoid:case Y.ZodSymbol:return;default:return(i=>{})(t)}},w5e=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n);var FZ=(e,t)=>{let n=yme(t),r=typeof t=="string"?t:t?.nameStrategy==="title"?void 0:t?.name,i=At(e._def,r===void 0?n:b(m({},n),{currentPath:[...n.basePath,n.definitionPath,r]}),!1)??{},o=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;o!==void 0&&(i.title=o);let s=(()=>{if(_me(n.definitions))return;let c={},u=new Set;for(let d=0;d<500;d++){let f=Object.entries(n.definitions).filter(([g])=>!u.has(g));if(f.length===0)break;for(let[g,h]of f)c[g]=At($E(h),b(m({},n),{currentPath:[...n.basePath,n.definitionPath,g]}),!0)??{},u.add(g)}return c})(),a=r===void 0?s?b(m({},i),{[n.definitionPath]:s}):i:n.nameStrategy==="duplicate-ref"?m(m({},i),s||n.seenRefs.size?{[n.definitionPath]:m(m({},s),n.seenRefs.size?{[r]:i}:void 0)}:void 0):{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,r].join("/"),[n.definitionPath]:b(m({},s),{[r]:i})};return n.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":n.target==="jsonSchema2019-09"&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),a};function Wme(e){if(e.type!=="object")throw new Error(`Root schema must have type: 'object' but got type: ${e.type?`'${e.type}'`:"undefined"}`);let t=structuredClone(e);return Rd(t,[],t)}function jZ(e){if(typeof e=="boolean")return!1;if(e.type==="null")return!0;for(let t of e.oneOf??[])if(jZ(t))return!0;for(let t of e.anyOf??[])if(jZ(t))return!0;return!1}function Rd(e,t,n){if(typeof e=="boolean")throw new TypeError(`Expected object schema but got boolean; path=${t.join("/")}`);if(!Oh(e))throw new TypeError(`Expected ${JSON.stringify(e)} to be an object; path=${t.join("/")}`);let r=e.$defs;if(Oh(r))for(let[g,h]of Object.entries(r))Rd(h,[...t,"$defs",g],n);let i=e.definitions;if(Oh(i))for(let[g,h]of Object.entries(i))Rd(h,[...t,"definitions",g],n);e.type==="object"&&!("additionalProperties"in e)&&(e.additionalProperties=!1);let s=e.required??[],a=e.properties;if(Oh(a)){for(let[g,h]of Object.entries(a))if(!jZ(h)&&!s.includes(g))throw new Error(`Zod field at \`${[...t,"properties",g].join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);e.required=Object.keys(a),e.properties=Object.fromEntries(Object.entries(a).map(([g,h])=>[g,Rd(h,[...t,"properties",g],n)]))}let c=e.items;Oh(c)&&(e.items=Rd(c,[...t,"items"],n));let u=e.anyOf;Array.isArray(u)&&(e.anyOf=u.map((g,h)=>Rd(g,[...t,"anyOf",String(h)],n)));let d=e.allOf;if(Array.isArray(d))if(d.length===1){let g=Rd(d[0],[...t,"allOf","0"],n);Object.assign(e,g),delete e.allOf}else e.allOf=d.map((g,h)=>Rd(g,[...t,"allOf",String(h)],n));e.default===null&&delete e.default;let f=e.$ref;if(f&&C5e(e,1)){if(typeof f!="string")throw new TypeError(`Received non-string $ref - ${f}; path=${t.join("/")}`);let g=x5e(n,f);if(typeof g=="boolean")throw new Error(`Expected \`$ref: ${f}\` to resolve to an object schema but got boolean`);if(!Oh(g))throw new Error(`Expected \`$ref: ${f}\` to resolve to an object but got ${JSON.stringify(g)}`);return Object.assign(e,m(m({},g),e)),delete e.$ref,Rd(e,t,n)}return e}function x5e(e,t){if(!t.startsWith("#/"))throw new Error(`Unexpected $ref format ${JSON.stringify(t)}; Does not start with #/`);let n=t.slice(2).split("/"),r=e;for(let i of n){if(!Oh(r))throw new Error(`encountered non-object entry while resolving ${t} - ${JSON.stringify(r)}`);let o=r[i];if(o===void 0)throw new Error(`Key ${i} not found while resolving ${t}`);r=o}return r}function Oh(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function C5e(e,t){let n=0;for(let r in e)if(n++,n>t)return!0;return!1}function E5e(e,t){return FZ(e,{openaiStrictMode:!0,name:t.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function I5e(e){return Wme(Ka(e,{target:"draft-7"}))}function S5e(e){return"_zod"in e}function Kme(e,t,n){return Mpe({type:"json_schema",json_schema:b(m({},n),{name:t,strict:!0,schema:S5e(e)?I5e(e):E5e(e,{name:t})})},r=>e.parse(JSON.parse(r)))}var Jme=["jsonSchema","functionCalling","jsonMode"];function Yme(e,t){if(typeof t<"u"&&!Jme.includes(t))throw new Error(`Invalid method: ${t}. Supported methods are: ${Jme.join(", ")}`);let n=!e.startsWith("gpt-3")&&!e.startsWith("gpt-4-")&&e!=="gpt-4";if(n&&!t)return"jsonSchema";if(!n&&t==="jsonSchema")throw new Error(`JSON Schema is not supported for model "${e}". Please use a different method, e.g. "functionCalling" or "jsonMode".`);return t??"functionCalling"}function k5e(e,t){let n=m({},e);return Object.defineProperties(n,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:t,enumerable:!1}}),n}function Qme(e,t,n){if(Vr(e))return Kme(e,t,n);if(Ur(e))return k5e({type:"json_schema",json_schema:b(m({},n),{name:t,strict:!0,schema:Ka(e,{cycles:"ref",reused:"ref",override(r){r.jsonSchema.title=t}})})},r=>Wa(e,JSON.parse(r)));throw new Error("Unsupported schema response format")}function Xme(e,t){if(t&&typeof t=="object"&&"images"in t&&Array.isArray(t.images)){let n=t.images.filter(r=>typeof r?.image_url?.url=="string").map(r=>({type:"image",url:r.image_url.url}));return[{type:"text",text:e},...n]}return e}var T5e={"gpt-4.1-nano":{maxInputTokens:1047576,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"text-embedding-3-small":{maxInputTokens:8191,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1536,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4":{maxInputTokens:8192,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o1-pro":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-2024-05-13":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-2024-08-06":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4.1-mini":{maxInputTokens:1047576,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o3-deep-research":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-3.5-turbo":{maxInputTokens:16385,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!1,imageUrlInputs:!1,pdfToolMessage:!1,imageToolMessage:!1,toolChoice:!0},"text-embedding-3-large":{maxInputTokens:8191,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:3072,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4-turbo":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o1-preview":{maxInputTokens:128e3,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o3-mini":{maxInputTokens:2e5,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"codex-mini-latest":{maxInputTokens:2e5,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-nano":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-codex":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4.1":{maxInputTokens:1047576,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o4-mini":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},o1:{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-mini":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o1-mini":{maxInputTokens:128e3,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"text-embedding-ada-002":{maxInputTokens:8192,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1536,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o3-pro":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-2024-11-20":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},o3:{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o4-mini-deep-research":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-chat-latest":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-mini":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-pro":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:272e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0}},efe=T5e;var Qe="0123456789abcdef".split(""),A5e=[-2147483648,8388608,32768,128],Kc=[24,16,8,0],I1=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],co=[];function Jc(e,t){t?(co[0]=co[16]=co[1]=co[2]=co[3]=co[4]=co[5]=co[6]=co[7]=co[8]=co[9]=co[10]=co[11]=co[12]=co[13]=co[14]=co[15]=0,this.blocks=co):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}Jc.prototype.update=function(e){if(!this.finalized){var t,n=typeof e;if(n!=="string"){if(n==="object"){if(e===null)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(e)))throw new Error(ERROR)}else throw new Error(ERROR);t=!0}for(var r,i=0,o,s=e.length,a=this.blocks;i<s;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,this.block=a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),t)for(o=this.start;i<s&&o<64;++i)a[o>>>2]|=e[i]<<Kc[o++&3];else for(o=this.start;i<s&&o<64;++i)r=e.charCodeAt(i),r<128?a[o>>>2]|=r<<Kc[o++&3]:r<2048?(a[o>>>2]|=(192|r>>>6)<<Kc[o++&3],a[o>>>2]|=(128|r&63)<<Kc[o++&3]):r<55296||r>=57344?(a[o>>>2]|=(224|r>>>12)<<Kc[o++&3],a[o>>>2]|=(128|r>>>6&63)<<Kc[o++&3],a[o>>>2]|=(128|r&63)<<Kc[o++&3]):(r=65536+((r&1023)<<10|e.charCodeAt(++i)&1023),a[o>>>2]|=(240|r>>>18)<<Kc[o++&3],a[o>>>2]|=(128|r>>>12&63)<<Kc[o++&3],a[o>>>2]|=(128|r>>>6&63)<<Kc[o++&3],a[o>>>2]|=(128|r&63)<<Kc[o++&3]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=a[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};Jc.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>>2]|=A5e[t&3],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}};Jc.prototype.hash=function(){var e=this.h0,t=this.h1,n=this.h2,r=this.h3,i=this.h4,o=this.h5,s=this.h6,a=this.h7,c=this.blocks,u,d,f,g,h,v,x,E,C,S,A;for(u=16;u<64;++u)h=c[u-15],d=(h>>>7|h<<25)^(h>>>18|h<<14)^h>>>3,h=c[u-2],f=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10,c[u]=c[u-16]+d+c[u-7]+f<<0;for(A=t&n,u=0;u<64;u+=4)this.first?(this.is224?(E=300032,h=c[0]-1413257819,a=h-150054599<<0,r=h+24177077<<0):(E=704751109,h=c[0]-210244248,a=h-1521486534<<0,r=h+143694565<<0),this.first=!1):(d=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),f=(i>>>6|i<<26)^(i>>>11|i<<21)^(i>>>25|i<<7),E=e&t,g=E^e&n^A,x=i&o^~i&s,h=a+f+x+I1[u]+c[u],v=d+g,a=r+h<<0,r=h+v<<0),d=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),f=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),C=r&e,g=C^r&t^E,x=s&a^~s&i,h=o+f+x+I1[u+1]+c[u+1],v=d+g,s=n+h<<0,n=h+v<<0,d=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),f=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),S=n&r,g=S^n&e^C,x=o&s^~o&a,h=i+f+x+I1[u+2]+c[u+2],v=d+g,o=t+h<<0,t=h+v<<0,d=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),f=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),A=t&n,g=A^t&r^S,x=o&s^~o&a,h=i+f+x+I1[u+3]+c[u+3],v=d+g,i=e+h<<0,e=h+v<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0,this.h4=this.h4+i<<0,this.h5=this.h5+o<<0,this.h6=this.h6+s<<0,this.h7=this.h7+a<<0};Jc.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,i=this.h4,o=this.h5,s=this.h6,a=this.h7,c=Qe[e>>>28&15]+Qe[e>>>24&15]+Qe[e>>>20&15]+Qe[e>>>16&15]+Qe[e>>>12&15]+Qe[e>>>8&15]+Qe[e>>>4&15]+Qe[e&15]+Qe[t>>>28&15]+Qe[t>>>24&15]+Qe[t>>>20&15]+Qe[t>>>16&15]+Qe[t>>>12&15]+Qe[t>>>8&15]+Qe[t>>>4&15]+Qe[t&15]+Qe[n>>>28&15]+Qe[n>>>24&15]+Qe[n>>>20&15]+Qe[n>>>16&15]+Qe[n>>>12&15]+Qe[n>>>8&15]+Qe[n>>>4&15]+Qe[n&15]+Qe[r>>>28&15]+Qe[r>>>24&15]+Qe[r>>>20&15]+Qe[r>>>16&15]+Qe[r>>>12&15]+Qe[r>>>8&15]+Qe[r>>>4&15]+Qe[r&15]+Qe[i>>>28&15]+Qe[i>>>24&15]+Qe[i>>>20&15]+Qe[i>>>16&15]+Qe[i>>>12&15]+Qe[i>>>8&15]+Qe[i>>>4&15]+Qe[i&15]+Qe[o>>>28&15]+Qe[o>>>24&15]+Qe[o>>>20&15]+Qe[o>>>16&15]+Qe[o>>>12&15]+Qe[o>>>8&15]+Qe[o>>>4&15]+Qe[o&15]+Qe[s>>>28&15]+Qe[s>>>24&15]+Qe[s>>>20&15]+Qe[s>>>16&15]+Qe[s>>>12&15]+Qe[s>>>8&15]+Qe[s>>>4&15]+Qe[s&15];return this.is224||(c+=Qe[a>>>28&15]+Qe[a>>>24&15]+Qe[a>>>20&15]+Qe[a>>>16&15]+Qe[a>>>12&15]+Qe[a>>>8&15]+Qe[a>>>4&15]+Qe[a&15]),c};Jc.prototype.toString=Jc.prototype.hex;Jc.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,i=this.h4,o=this.h5,s=this.h6,a=this.h7,c=[e>>>24&255,e>>>16&255,e>>>8&255,e&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255,r>>>24&255,r>>>16&255,r>>>8&255,r&255,i>>>24&255,i>>>16&255,i>>>8&255,i&255,o>>>24&255,o>>>16&255,o>>>8&255,o&255,s>>>24&255,s>>>16&255,s>>>8&255,s&255];return this.is224||c.push(a>>>24&255,a>>>16&255,a>>>8&255,a&255),c};Jc.prototype.array=Jc.prototype.digest;Jc.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e};var Zv=(...e)=>new Jc(!1,!0).update(e.join("")).hex();var zZ={};ae(zZ,{sha256:()=>Zv});var BZ={};ae(BZ,{BaseCache:()=>nfe,InMemoryCache:()=>UZ,defaultHashKeyEncoder:()=>tfe,deserializeStoredGeneration:()=>O5e,serializeGeneration:()=>M5e});var tfe=(...e)=>Zv(e.join("_"));function O5e(e){return e.message!==void 0?{text:e.text,message:_C(e.message)}:{text:e.text}}function M5e(e){let t={text:e.text};return e.message!==void 0&&(t.message=e.message.toDict()),t}var nfe=class{keyEncoder=tfe;makeDefaultKeyEncoder(e){this.keyEncoder=e}},D5e=new Map,UZ=class rfe extends nfe{cache;constructor(t){super(),this.cache=t??new Map}lookup(t,n){return Promise.resolve(this.cache.get(this.keyEncoder(t,n))??null)}update(t,n,r){return y(this,null,function*(){this.cache.set(this.keyEncoder(t,n),r)})}static global(){return new rfe(D5e)}};var afe=_c(sfe(),1);var z5e=Object.defineProperty,B5e=(e,t,n)=>t in e?z5e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,U5e=(e,t,n)=>(B5e(e,typeof t!="symbol"?t+"":t,n),n);function V5e(e,t){let n=Array.from({length:e.length},(r,i)=>({start:i,end:i+1}));for(;n.length>1;){let r=null;for(let i=0;i<n.length-1;i++){let o=e.slice(n[i].start,n[i+1].end),s=t.get(o.join(","));s!=null&&(r==null||s<r[0])&&(r=[s,i])}if(r!=null){let i=r[1];n[i]={start:n[i].start,end:n[i+1].end},n.splice(i+1,1)}else break}return n}function H5e(e,t){return e.length===1?[t.get(e.join(","))]:V5e(e,t).map(n=>t.get(e.slice(n.start,n.end).join(","))).filter(n=>n!=null)}function Z5e(e){return e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var HZ=class{specialTokens;inverseSpecialTokens;patStr;textEncoder=new TextEncoder;textDecoder=new TextDecoder("utf-8");rankMap=new Map;textMap=new Map;constructor(e,t){this.patStr=e.pat_str;let n=e.bpe_ranks.split(`
`).filter(Boolean).reduce((r,i)=>{let[o,s,...a]=i.split(" "),c=Number.parseInt(s,10);return a.forEach((u,d)=>r[u]=c+d),r},{});for(let[r,i]of Object.entries(n)){let o=afe.default.toByteArray(r);this.rankMap.set(o.join(","),i),this.textMap.set(i,o)}this.specialTokens=m(m({},e.special_tokens),t),this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((r,[i,o])=>(r[o]=this.textEncoder.encode(i),r),{})}encode(e,t=[],n="all"){let r=new RegExp(this.patStr,"ug"),i=HZ.specialTokenRegex(Object.keys(this.specialTokens)),o=[],s=new Set(t==="all"?Object.keys(this.specialTokens):t),a=new Set(n==="all"?Object.keys(this.specialTokens).filter(u=>!s.has(u)):n);if(a.size>0){let u=HZ.specialTokenRegex([...a]),d=e.match(u);if(d!=null)throw new Error(`The text contains a special token that is not allowed: ${d[0]}`)}let c=0;for(;;){let u=null,d=c;for(;i.lastIndex=d,u=i.exec(e),!(u==null||s.has(u[0]));)d=u.index+1;let f=u?.index??e.length;for(let h of e.substring(c,f).matchAll(r)){let v=this.textEncoder.encode(h[0]),x=this.rankMap.get(v.join(","));if(x!=null){o.push(x);continue}o.push(...H5e(v,this.rankMap))}if(u==null)break;let g=this.specialTokens[u[0]];o.push(g),c=u.index+u[0].length}return o}decode(e){let t=[],n=0;for(let o=0;o<e.length;++o){let s=e[o],a=this.textMap.get(s)??this.inverseSpecialTokens[s];a!=null&&(t.push(a),n+=a.length)}let r=new Uint8Array(n),i=0;for(let o of t)r.set(o,i),i+=o.length;return this.textDecoder.decode(r)}},k1=HZ;U5e(k1,"specialTokenRegex",e=>new RegExp(e.map(t=>Z5e(t)).join("|"),"g"));function ZZ(e){switch(e){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":case"gpt-5":case"gpt-5-2025-08-07":case"gpt-5-nano":case"gpt-5-nano-2025-08-07":case"gpt-5-mini":case"gpt-5-mini-2025-08-07":case"gpt-5-chat-latest":return"o200k_base";default:throw new Error("Unknown model")}}var qZ={};ae(qZ,{encodingForModel:()=>A1,getEncoding:()=>cfe});var T1={},q5e=new bd({});function cfe(e){return y(this,null,function*(){return e in T1||(T1[e]=q5e.fetch(`https://tiktoken.pages.dev/js/${e}.json`).then(t=>t.json()).then(t=>new k1(t)).catch(t=>{throw delete T1[e],t})),yield T1[e]})}function A1(e){return y(this,null,function*(){return cfe(ZZ(e))})}var GZ={};ae(GZ,{BaseLangChain:()=>M1,BaseLanguageModel:()=>jE,calculateMaxTokens:()=>ufe,getEmbeddingContextSize:()=>G5e,getModelContextSize:()=>lfe,getModelNameForTiktoken:()=>O1,isOpenAITool:()=>FE});var O1=e=>e.startsWith("gpt-5")?"gpt-5":e.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":e.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":e.startsWith("gpt-4-32k")?"gpt-4-32k":e.startsWith("gpt-4-")?"gpt-4":e.startsWith("gpt-4o")?"gpt-4o":e,G5e=e=>{switch(e){case"text-embedding-ada-002":return 8191;default:return 2046}},lfe=e=>{switch(O1(e)){case"gpt-5":case"gpt-5-turbo":case"gpt-5-turbo-preview":return 4e5;case"gpt-4o":case"gpt-4o-mini":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":return 128e3;case"gpt-4-turbo":case"gpt-4-turbo-preview":case"gpt-4-turbo-2024-04-09":case"gpt-4-0125-preview":case"gpt-4-1106-preview":return 128e3;case"gpt-4-32k":case"gpt-4-32k-0314":case"gpt-4-32k-0613":return 32768;case"gpt-4":case"gpt-4-0314":case"gpt-4-0613":return 8192;case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-16k-0613":return 16384;case"gpt-3.5-turbo":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-1106":case"gpt-3.5-turbo-0125":return 4096;case"text-davinci-003":case"text-davinci-002":return 4097;case"text-davinci-001":return 2049;case"text-curie-001":case"text-babbage-001":case"text-ada-001":return 2048;case"code-davinci-002":case"code-davinci-001":return 8e3;case"code-cushman-001":return 2048;case"claude-3-5-sonnet-20241022":case"claude-3-5-sonnet-20240620":case"claude-3-opus-20240229":case"claude-3-sonnet-20240229":case"claude-3-haiku-20240307":case"claude-2.1":return 2e5;case"claude-2.0":case"claude-instant-1.2":return 1e5;case"gemini-1.5-pro":case"gemini-1.5-pro-latest":case"gemini-1.5-flash":case"gemini-1.5-flash-latest":return 1e6;case"gemini-pro":case"gemini-pro-vision":return 32768;default:return 4097}};function FE(e){return typeof e!="object"||!e?!1:!!("type"in e&&e.type==="function"&&"function"in e&&typeof e.function=="object"&&e.function&&"name"in e.function&&"parameters"in e.function)}var ufe=n=>y(null,[n],function*({prompt:e,modelName:t}){let r;try{r=(yield A1(O1(t))).encode(e).length}catch{console.warn("Failed to calculate number of tokens, falling back to approximate count"),r=Math.ceil(e.length/4)}return lfe(t)-r}),W5e=()=>!1,M1=class extends dt{verbose;callbacks;tags;metadata;get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),this.verbose=e.verbose??W5e(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}},jE=class extends M1{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}caller;cache;constructor(r){var i=r,{callbacks:e,callbackManager:t}=i,n=se(i,["callbacks","callbackManager"]);let a=n,{cache:o}=a,s=se(a,["cache"]);super(m({callbacks:e??t},s)),typeof o=="object"?this.cache=o:o?this.cache=UZ.global():this.cache=void 0,this.caller=new bd(n??{})}_encoding;getNumTokens(e){return y(this,null,function*(){let t;typeof e=="string"?t=e:t=e.map(r=>typeof r=="string"?r:r.type==="text"&&"text"in r?r.text:"").join("");let n=Math.ceil(t.length/4);if(!this._encoding)try{this._encoding=yield A1("modelName"in this?O1(this.modelName):"gpt2")}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}if(this._encoding)try{n=this._encoding.encode(t).length}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}return n})}static _convertInputToPromptValue(e){return typeof e=="string"?new UC(e):Array.isArray(e)?new VC(e.map(ys)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall(n){var r=n,{config:e}=r,t=se(r,["config"]);let i=b(m(m({},this._identifyingParams()),t),{_type:this._llmType(),_model:this._modelType()});return Object.entries(i).filter(([a,c])=>c!==void 0).map(([a,c])=>`${a}:${JSON.stringify(c)}`).sort().join(",")}serialize(){return b(m({},this._identifyingParams()),{_type:this._llmType(),_model:this._modelType()})}static deserialize(e){return y(this,null,function*(){throw new Error("Use .toJSON() instead")})}get profile(){return{}}};var dfe=e=>e();function D1(e){let t=e.constructor;return new t(b(m({},e),{content:e.contentBlocks,response_metadata:b(m({},e.response_metadata),{output_version:"v1"})}))}var KZ={};ae(KZ,{BaseChatModel:()=>gm,SimpleChatModel:()=>K5e});function WZ(e){let t=[];for(let n of e){let r=n;if(Array.isArray(n.content))for(let i=0;i<n.content.length;i++){let o=n.content[i];(My(o)||Dy(o))&&r===n&&(r=new n.constructor(b(m({},r),{content:[...n.content.slice(0,i),QD(o),...n.content.slice(i+1)]})))}t.push(r)}return t}var gm=class Dh extends jE{lc_namespace=["langchain","chat_models",this._llmType()];disableStreaming=!1;outputVersion;get callKeys(){return[...super.callKeys,"outputVersion"]}constructor(t){super(t),this.outputVersion=dfe(()=>{let n=t.outputVersion??Kr("LC_OUTPUT_VERSION");return n&&["v0","v1"].includes(n)?n:"v0"})}_separateRunnableConfigFromCallOptionsCompat(t){let[n,r]=super._separateRunnableConfigFromCallOptions(t);return r.signal=n.signal,[n,r]}invoke(t,n){return y(this,null,function*(){let r=Dh._convertInputToPromptValue(t);return(yield this.generatePrompt([r],n,n?.callbacks)).generations[0][0].message})}_streamResponseChunks(t,n,r){return he(this,null,function*(){throw new Error("Not implemented.")})}_streamIterator(t,n){return he(this,null,function*(){if(this._streamResponseChunks===Dh.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(t,n);else{let c=Dh._convertInputToPromptValue(t).toChatMessages(),[u,d]=this._separateRunnableConfigFromCallOptionsCompat(n),f=m(m({},u.metadata),this.getLsParams(d)),g=yield new z(wi.configure(u.callbacks,this.callbacks,u.tags,this.tags,f,this.metadata,{verbose:this.verbose})),h={options:d,invocation_params:this?.invocationParams(d),batch_size:1},v=d.outputVersion??this.outputVersion,x=yield new z(g?.handleChatModelStart(this.toJSON(),[WZ(c)],u.runId,void 0,h,void 0,void 0,u.runName)),E,C;try{try{for(var r=ue(this._streamResponseChunks(c,d,x?.[0])),i,o,s;i=!(o=yield new z(r.next())).done;i=!1){let S=o.value;if(S.message.id==null){let A=x?.at(0)?.runId;A!=null&&S.message._updateId(`run-${A}`)}S.message.response_metadata=m(m({},S.generationInfo),S.message.response_metadata),v==="v1"?yield D1(S.message):yield S.message,E?E=E.concat(S):E=S,Jf(S.message)&&S.message.usage_metadata!==void 0&&(C={tokenUsage:{promptTokens:S.message.usage_metadata.input_tokens,completionTokens:S.message.usage_metadata.output_tokens,totalTokens:S.message.usage_metadata.total_tokens}})}}catch{s=[o]}finally{try{i&&(o=r.return)&&(yield new z(o.call(r)))}finally{if(s)throw s[0]}}}catch(S){throw yield new z(Promise.all((x??[]).map(A=>A?.handleLLMError(S)))),S}yield new z(Promise.all((x??[]).map(S=>S?.handleLLMEnd({generations:[[E]],llmOutput:C}))))}})}getLsParams(t){let n=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:t.stop,ls_provider:n}}_generateUncached(t,n,r,i){return y(this,null,function*(){let o=t.map(E=>E.map(ys)),s;if(i!==void 0&&i.length===o.length)s=i;else{let E=m(m({},r.metadata),this.getLsParams(n)),C=yield wi.configure(r.callbacks,this.callbacks,r.tags,this.tags,E,this.metadata,{verbose:this.verbose}),S={options:n,invocation_params:this?.invocationParams(n),batch_size:1};s=yield C?.handleChatModelStart(this.toJSON(),o.map(WZ),r.runId,void 0,S,void 0,void 0,r.runName)}let a=n.outputVersion??this.outputVersion,c=[],u=[];if(!!s?.[0].handlers.find(yC)&&!this.disableStreaming&&o.length===1&&this._streamResponseChunks!==Dh.prototype._streamResponseChunks)try{let E=yield this._streamResponseChunks(o[0],n,s?.[0]),C,S;try{for(var g=ue(E),h,v,x;h=!(v=yield g.next()).done;h=!1){let A=v.value;if(A.message.id==null){let P=s?.at(0)?.runId;P!=null&&A.message._updateId(`run-${P}`)}C===void 0?C=A:C=xa(C,A),Jf(A.message)&&A.message.usage_metadata!==void 0&&(S={tokenUsage:{promptTokens:A.message.usage_metadata.input_tokens,completionTokens:A.message.usage_metadata.output_tokens,totalTokens:A.message.usage_metadata.total_tokens}})}}catch{x=[v]}finally{try{h&&(v=g.return)&&(yield v.call(g))}finally{if(x)throw x[0]}}if(C===void 0)throw new Error("Received empty response from chat model call.");c.push([C]),yield s?.[0].handleLLMEnd({generations:c,llmOutput:S})}catch(E){throw yield s?.[0].handleLLMError(E),E}else{let E=yield Promise.allSettled(o.map((C,S)=>y(this,null,function*(){let A=yield this._generate(C,b(m({},n),{promptIndex:S}),s?.[S]);if(a==="v1")for(let P of A.generations)P.message=D1(P.message);return A})));yield Promise.all(E.map((C,S)=>y(this,null,function*(){if(C.status==="fulfilled"){let A=C.value;for(let P of A.generations){if(P.message.id==null){let F=s?.at(0)?.runId;F!=null&&P.message._updateId(`run-${F}`)}P.message.response_metadata=m(m({},P.generationInfo),P.message.response_metadata)}return A.generations.length===1&&(A.generations[0].message.response_metadata=m(m({},A.llmOutput),A.generations[0].message.response_metadata)),c[S]=A.generations,u[S]=A.llmOutput,s?.[S]?.handleLLMEnd({generations:[A.generations],llmOutput:A.llmOutput})}else return yield s?.[S]?.handleLLMError(C.reason),Promise.reject(C.reason)})))}let f={generations:c,llmOutput:u.length?this._combineLLMOutput?.(...u):void 0};return Object.defineProperty(f,oh,{value:s?{runIds:s?.map(E=>E.runId)}:void 0,configurable:!0}),f})}_generateCached(s){return y(this,arguments,function*({messages:t,cache:n,llmStringKey:r,parsedOptions:i,handledOptions:o}){let a=t.map(S=>S.map(ys)),c=m(m({},o.metadata),this.getLsParams(i)),u=yield wi.configure(o.callbacks,this.callbacks,o.tags,this.tags,c,this.metadata,{verbose:this.verbose}),d={options:i,invocation_params:this?.invocationParams(i),batch_size:1},f=yield u?.handleChatModelStart(this.toJSON(),a.map(WZ),o.runId,void 0,d,void 0,void 0,o.runName),g=[],v=(yield Promise.allSettled(a.map((S,A)=>y(this,null,function*(){let P=Dh._convertInputToPromptValue(S).toString(),F=yield n.lookup(P,r);return F==null&&g.push(A),F})))).map((S,A)=>({result:S,runManager:f?.[A]})).filter(({result:S})=>S.status==="fulfilled"&&S.value!=null||S.status==="rejected"),x=i.outputVersion??this.outputVersion,E=[];yield Promise.all(v.map((F,B)=>y(this,[F,B],function*({result:S,runManager:A},P){if(S.status==="fulfilled"){let ee=S.value;return E[P]=ee.map(D=>("message"in D&&Gn(D.message)&&Io(D.message)&&(D.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0},x==="v1"&&(D.message=D1(D.message))),D.generationInfo=b(m({},D.generationInfo),{tokenUsage:{}}),D)),ee.length&&(yield A?.handleLLMNewToken(ee[0].text)),A?.handleLLMEnd({generations:[ee]},void 0,void 0,void 0,{cached:!0})}else return yield A?.handleLLMError(S.reason,void 0,void 0,void 0,{cached:!0}),Promise.reject(S.reason)})));let C={generations:E,missingPromptIndices:g,startedRunManagers:f};return Object.defineProperty(C,oh,{value:f?{runIds:f?.map(S=>S.runId)}:void 0,configurable:!0}),C})}generate(t,n,r){return y(this,null,function*(){let i;Array.isArray(n)?i={stop:n}:i=n;let o=t.map(v=>v.map(ys)),[s,a]=this._separateRunnableConfigFromCallOptionsCompat(i);if(s.callbacks=s.callbacks??r,!this.cache)return this._generateUncached(o,a,s);let{cache:c}=this,u=this._getSerializedCacheKeyParametersForCall(a),{generations:d,missingPromptIndices:f,startedRunManagers:g}=yield this._generateCached({messages:o,cache:c,llmStringKey:u,parsedOptions:a,handledOptions:s}),h={};if(f.length>0){let v=yield this._generateUncached(f.map(x=>o[x]),a,s,g!==void 0?f.map(x=>g?.[x]):void 0);yield Promise.all(v.generations.map((x,E)=>y(this,null,function*(){let C=f[E];d[C]=x;let S=Dh._convertInputToPromptValue(o[C]).toString();return c.update(S,u,x)}))),h=v.llmOutput??{}}return{generations:d,llmOutput:h}})}invocationParams(t){return{}}_modelType(){return"base_chat_model"}generatePrompt(t,n,r){return y(this,null,function*(){let i=t.map(o=>o.toChatMessages());return this.generate(i,n,r)})}withStructuredOutput(t,n){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(n?.strict)throw new Error('"strict" mode is not supported for this model by default.');let r=t,i=n?.name,o=Bc(r)??"A function available to call.",s=n?.method,a=n?.includeRaw;if(s==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let c=i??"extract",u;Is(r)?u=[{type:"function",function:{name:c,description:o,parameters:$i(r)}}]:("name"in r&&(c=r.name),u=[{type:"function",function:{name:c,description:o,parameters:r}}]);let d=this.bindTools(u),f=Ir.from(x=>{if(!Cr.isInstance(x))throw new Error("Input is not an AIMessageChunk.");if(!x.tool_calls||x.tool_calls.length===0)throw new Error("No tool calls found in the response.");let E=x.tool_calls.find(C=>C.name===c);if(!E)throw new Error(`No tool call found with name ${c}.`);return E.args});if(!a)return d.pipe(f).withConfig({runName:"StructuredOutput"});let g=lc.assign({parsed:(x,E)=>f.invoke(x.raw,E)}),h=lc.assign({parsed:()=>null}),v=g.withFallbacks({fallbacks:[h]});return Er.from([{raw:d},v]).withConfig({runName:"StructuredOutputRunnable"})}},K5e=class extends gm{_generate(e,t,n){return y(this,null,function*(){let r=yield this._call(e,t,n),i=new Sn(r);if(typeof i.content!="string")throw new Error("Cannot generate with a simple chat model when output is not a string.");return{generations:[{text:i.content,message:i}]}})}};function Ph(e,t){if(e.function===void 0)return;let n;if(t?.partial)try{n=Zl(e.function.arguments??"{}")}catch{return}else try{n=JSON.parse(e.function.arguments)}catch(i){throw new Sa([`Function "${e.function.name}" arguments:`,"",e.function.arguments,"","are not valid JSON.",`Error: ${i.message}`].join(`
`))}let r={name:e.function.name,args:n,type:"tool_call"};return t?.returnId&&(r.id=e.id),r}function P1(e){if(e.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:e.id,type:"function",function:{name:e.name,arguments:JSON.stringify(e.args)}}}function Rh(e,t){return{name:e.function?.name,args:e.function?.arguments,id:e.id,error:t,type:"invalid_tool_call"}}var JZ=class extends Xl{static lc_name(){return"JsonOutputToolsParser"}returnId=!1;lc_namespace=["langchain","output_parsers","openai_tools"];lc_serializable=!0;constructor(e){super(e),this.returnId=e?.returnId??this.returnId}_diff(){throw new Error("Not supported.")}parse(){return y(this,null,function*(){throw new Error("Not implemented.")})}parseResult(e){return y(this,null,function*(){return yield this.parsePartialResult(e,!1)})}parsePartialResult(e,t=!0){return y(this,null,function*(){let n=e[0].message,r;if(Io(n)&&n.tool_calls?.length?r=n.tool_calls.map(o=>{let c=o,{id:s}=c,a=se(c,["id"]);return this.returnId?m({id:s},a):a}):n.additional_kwargs.tool_calls!==void 0&&(r=JSON.parse(JSON.stringify(n.additional_kwargs.tool_calls)).map(s=>Ph(s,{returnId:this.returnId,partial:t}))),!r)return[];let i=[];for(let o of r)if(o!==void 0){let s={type:o.name,args:o.args,id:o.id};i.push(s)}return i})}},zE=class e extends JZ{static lc_name(){return"JsonOutputKeyToolsParser"}lc_namespace=["langchain","output_parsers","openai_tools"];lc_serializable=!0;returnId=!1;keyName;returnSingle=!1;zodSchema;constructor(t){super(t),this.keyName=t.keyName,this.returnSingle=t.returnSingle??this.returnSingle,this.zodSchema=t.zodSchema}_validateResult(t){return y(this,null,function*(){if(this.zodSchema===void 0)return t;let n=yield mR(this.zodSchema,t);if(n.success)return n.data;throw new Sa(`Failed to parse. Text: "${JSON.stringify(t,null,2)}". Error: ${JSON.stringify(n.error?.issues)}`,JSON.stringify(t,null,2))})}parsePartialResult(t){return y(this,null,function*(){let r=(yield fi(e.prototype,this,"parsePartialResult").call(this,t)).filter(o=>o.type===this.keyName),i=r;if(r.length)return this.returnId||(i=r.map(o=>o.args)),this.returnSingle?i[0]:i})}parseResult(t){return y(this,null,function*(){let r=(yield fi(e.prototype,this,"parsePartialResult").call(this,t,!1)).filter(s=>s.type===this.keyName),i=r;return r.length?(this.returnId||(i=r.map(s=>s.args)),this.returnSingle?this._validateResult(i[0]):yield Promise.all(i.map(s=>this._validateResult(s)))):void 0})}};var YZ={};ae(YZ,{JsonOutputKeyToolsParser:()=>zE,JsonOutputToolsParser:()=>JZ,convertLangChainToolCallToOpenAI:()=>P1,makeInvalidToolCall:()=>Rh,parseToolCall:()=>Ph});var Nh=class e extends gm{temperature;topP;frequencyPenalty;presencePenalty;n;logitBias;model="gpt-3.5-turbo";modelKwargs;stop;stopSequences;user;timeout;streaming=!1;streamUsage=!0;maxTokens;logprobs;topLogprobs;apiKey;organization;__includeRawResponse;client;clientConfig;supportsStrictToolCalling;audio;modalities;reasoning;zdrEnabled;service_tier;promptCacheKey;verbosity;defaultOptions;_llmType(){return"openai"}static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed","reasoning","service_tier"]}lc_serializable=!0;get lc_secrets(){return{apiKey:"OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{apiKey:"openai_api_key",modelName:"model"}}get lc_serializable_keys(){return["configuration","logprobs","topLogprobs","prefixMessages","supportsStrictToolCalling","modalities","audio","temperature","maxTokens","topP","frequencyPenalty","presencePenalty","n","logitBias","user","streaming","streamUsage","model","modelName","modelKwargs","stop","stopSequences","timeout","apiKey","cache","maxConcurrency","maxRetries","verbose","callbacks","tags","metadata","disableStreaming","zdrEnabled","reasoning","promptCacheKey","verbosity"]}getLsParams(t){let n=this.invocationParams(t);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:n.temperature??void 0,ls_max_tokens:n.max_tokens??void 0,ls_stop:t.stop}}_identifyingParams(){return m(m({model_name:this.model},this.invocationParams()),this.clientConfig)}identifyingParams(){return this._identifyingParams()}constructor(t){super(t??{});let n=typeof t?.configuration?.apiKey=="string"||typeof t?.configuration?.apiKey=="function"?t?.configuration?.apiKey:void 0;this.apiKey=t?.apiKey??n??Kr("OPENAI_API_KEY"),this.organization=t?.configuration?.organization??Kr("OPENAI_ORGANIZATION"),this.model=t?.model??t?.modelName??this.model,this.modelKwargs=t?.modelKwargs??{},this.timeout=t?.timeout,this.temperature=t?.temperature??this.temperature,this.topP=t?.topP??this.topP,this.frequencyPenalty=t?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=t?.presencePenalty??this.presencePenalty,this.logprobs=t?.logprobs,this.topLogprobs=t?.topLogprobs,this.n=t?.n??this.n,this.logitBias=t?.logitBias,this.stop=t?.stopSequences??t?.stop,this.stopSequences=this.stop,this.user=t?.user,this.__includeRawResponse=t?.__includeRawResponse,this.audio=t?.audio,this.modalities=t?.modalities,this.reasoning=t?.reasoning,this.maxTokens=t?.maxCompletionTokens??t?.maxTokens,this.promptCacheKey=t?.promptCacheKey??this.promptCacheKey,this.verbosity=t?.verbosity??this.verbosity,this.disableStreaming=t?.disableStreaming===!0,this.streaming=t?.streaming===!0,this.disableStreaming&&(this.streaming=!1),t?.streaming===!1&&(this.disableStreaming=!0),this.streamUsage=t?.streamUsage??this.streamUsage,this.disableStreaming&&(this.streamUsage=!1),this.clientConfig=m({apiKey:this.apiKey,organization:this.organization,dangerouslyAllowBrowser:!0},t?.configuration),t?.supportsStrictToolCalling!==void 0&&(this.supportsStrictToolCalling=t.supportsStrictToolCalling),t?.service_tier!==void 0&&(this.service_tier=t.service_tier),this.zdrEnabled=t?.zdrEnabled??!1}_getReasoningParams(t){if(!Dd(this.model))return;let n;return this.reasoning!==void 0&&(n=m(m({},n),this.reasoning)),t?.reasoning!==void 0&&(n=m(m({},n),t.reasoning)),n}_getResponseFormat(t){return t&&t.type==="json_schema"&&t.json_schema.schema&&Is(t.json_schema.schema)?Qme(t.json_schema.schema,t.json_schema.name,{description:t.json_schema.description}):t}_combineCallOptions(t){return m(m({},this.defaultOptions),t??{})}_getClientOptions(t){if(!this.client){let r={baseURL:this.clientConfig.baseURL},i=fm(r),o=b(m({},this.clientConfig),{baseURL:i,timeout:this.timeout,maxRetries:0});o.baseURL||delete o.baseURL,o.defaultHeaders=hm(o.defaultHeaders),this.client=new Tt(o)}return m(m({},this.clientConfig),t)}_convertChatOpenAIToolToCompletionsTool(t,n){return Th(t)?mme(t.metadata.customTool):FE(t)?n?.strict!==void 0?b(m({},t),{function:b(m({},t.function),{strict:n.strict})}):t:sme(t,n)}bindTools(t,n){let r;return n?.strict!==void 0?r=n.strict:this.supportsStrictToolCalling!==void 0&&(r=this.supportsStrictToolCalling),this.withConfig(m({tools:t.map(i=>Hv(i)||Th(i)?i:this._convertChatOpenAIToolToCompletionsTool(i,{strict:r}))},n))}stream(t,n){return y(this,null,function*(){return fi(e.prototype,this,"stream").call(this,t,this._combineCallOptions(n))})}invoke(t,n){return y(this,null,function*(){return fi(e.prototype,this,"invoke").call(this,t,this._combineCallOptions(n))})}_combineLLMOutput(...t){return t.reduce((n,r)=>(r&&r.tokenUsage&&(n.tokenUsage.completionTokens+=r.tokenUsage.completionTokens??0,n.tokenUsage.promptTokens+=r.tokenUsage.promptTokens??0,n.tokenUsage.totalTokens+=r.tokenUsage.totalTokens??0),n),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}getNumTokensFromMessages(t){return y(this,null,function*(){let n=0,r=0,i=0;this.model==="gpt-3.5-turbo-0301"?(r=4,i=-1):(r=3,i=1);let o=yield Promise.all(t.map(s=>y(this,null,function*(){let a=yield this.getNumTokens(s.content),c=yield this.getNumTokens(Pd(s)),u=s.name!==void 0?i+(yield this.getNumTokens(s.name)):0,d=a+r+c+u,f=s;if(f._getType()==="function"&&(d-=2),f.additional_kwargs?.function_call&&(d+=3),f?.additional_kwargs.function_call?.name&&(d+=yield this.getNumTokens(f.additional_kwargs.function_call?.name)),f.additional_kwargs.function_call?.arguments)try{d+=yield this.getNumTokens(JSON.stringify(JSON.parse(f.additional_kwargs.function_call?.arguments)))}catch(g){console.error("Error parsing function arguments",g,JSON.stringify(f.additional_kwargs.function_call)),d+=yield this.getNumTokens(f.additional_kwargs.function_call?.arguments)}return n+=d,d})));return n+=3,{totalCount:n,countPerMessage:o}})}_getNumTokensFromGenerations(t){return y(this,null,function*(){return(yield Promise.all(t.map(r=>y(this,null,function*(){return r.message.additional_kwargs?.function_call?(yield this.getNumTokensFromMessages([r.message])).countPerMessage[0]:yield this.getNumTokens(r.message.content)})))).reduce((r,i)=>r+i,0)})}_getEstimatedTokenCountFromPrompt(t,n,r){return y(this,null,function*(){let i=(yield this.getNumTokensFromMessages(t)).totalCount;if(n&&r!=="auto"){let o=ame(n);i+=yield this.getNumTokens(o),i+=9}return n&&t.find(o=>o._getType()==="system")&&(i-=4),r==="none"?i+=1:typeof r=="object"&&(i+=(yield this.getNumTokens(r.name))+4),i})}get profile(){return efe[this.model]??{}}_getStructuredOutputMethod(t){let n=m({},t);if(!this.model.startsWith("gpt-3")&&!this.model.startsWith("gpt-4-")&&this.model!=="gpt-4"){if(n?.method===void 0)return"jsonSchema"}else n.method==="jsonSchema"&&console.warn(`[WARNING]: JSON Schema is not supported for model "${this.model}". Falling back to tool calling.`);return n.method}withStructuredOutput(t,n){let r,i,{schema:o,name:s,includeRaw:a}=b(m({},n),{schema:t});if(n?.strict!==void 0&&n.method==="jsonMode")throw new Error("Argument `strict` is only supported for `method` = 'function_calling'");let c=Yme(this.model,n?.method);if(c==="jsonMode"){Is(o)?i=Ky.fromZodSchema(o):i=new BC;let g=$i(o);r=this.withConfig({outputVersion:"v0",response_format:{type:"json_object"},ls_structured_output_format:{kwargs:{method:"json_mode"},schema:m({title:s??"extract"},g)}})}else if(c==="jsonSchema"){let g={name:s??"extract",description:Bc(o),schema:o,strict:n?.strict},h=$i(g.schema);if(r=this.withConfig({outputVersion:"v0",response_format:{type:"json_schema",json_schema:g},ls_structured_output_format:{kwargs:{method:"json_schema"},schema:m({title:g.name,description:g.description},h)}}),Is(o)){let v=Ky.fromZodSchema(o);i=Ir.from(x=>"parsed"in x.additional_kwargs?x.additional_kwargs.parsed:v)}else i=new BC}else{let g=s??"extract";if(Is(o)){let h=$i(o);r=this.withConfig(m({outputVersion:"v0",tools:[{type:"function",function:{name:g,description:h.description,parameters:h}}],tool_choice:{type:"function",function:{name:g}},ls_structured_output_format:{kwargs:{method:"function_calling"},schema:m({title:g},h)}},n?.strict!==void 0?{strict:n.strict}:{})),i=new zE({returnSingle:!0,keyName:g,zodSchema:o})}else{let h;typeof o.name=="string"&&typeof o.parameters=="object"&&o.parameters!=null?(h=o,g=o.name):(g=o.title??g,h={name:g,description:o.description??"",parameters:o});let v=$i(o);r=this.withConfig(m({outputVersion:"v0",tools:[{type:"function",function:h}],tool_choice:{type:"function",function:{name:g}},ls_structured_output_format:{kwargs:{method:"function_calling"},schema:m({title:g},v)}},n?.strict!==void 0?{strict:n.strict}:{})),i=new zE({returnSingle:!0,keyName:g})}}if(!a)return r.pipe(i);let u=lc.assign({parsed:(g,h)=>i.invoke(g.raw,h)}),d=lc.assign({parsed:()=>null}),f=u.withFallbacks({fallbacks:[d]});return Er.from([{raw:r},f])}};var R1={providerName:"ChatOpenAI",fromStandardTextBlock(e){return{type:"text",text:e.text}},fromStandardImageBlock(e){if(e.source_type==="url")return{type:"image_url",image_url:m({url:e.url},e.metadata?.detail?{detail:e.metadata.detail}:{})};if(e.source_type==="base64"){let t=`data:${e.mime_type??""};base64,${e.data}`;return{type:"image_url",image_url:m({url:t},e.metadata?.detail?{detail:e.metadata.detail}:{})}}throw new Error(`Image content blocks with source_type ${e.source_type} are not supported for ChatOpenAI`)},fromStandardAudioBlock(e){if(e.source_type==="url"){let t=Kp({dataUrl:e.url});if(!t)throw new Error(`URL audio blocks with source_type ${e.source_type} must be formatted as a data URL for ChatOpenAI`);let n=t.mime_type||e.mime_type||"",r;try{r=fC(n)}catch{throw new Error(`Audio blocks with source_type ${e.source_type} must have mime type of audio/wav or audio/mp3`)}if(r.type!=="audio"||r.subtype!=="wav"&&r.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${e.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:r.subtype,data:t.data}}}if(e.source_type==="base64"){let t;try{t=fC(e.mime_type??"")}catch{throw new Error(`Audio blocks with source_type ${e.source_type} must have mime type of audio/wav or audio/mp3`)}if(t.type!=="audio"||t.subtype!=="wav"&&t.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${e.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:t.subtype,data:e.data}}}throw new Error(`Audio content blocks with source_type ${e.source_type} are not supported for ChatOpenAI`)},fromStandardFileBlock(e){if(e.source_type==="url"){if(!Kp({dataUrl:e.url}))throw new Error(`URL file blocks with source_type ${e.source_type} must be formatted as a data URL for ChatOpenAI`);return{type:"file",file:m({file_data:e.url},e.metadata?.filename||e.metadata?.name?{filename:e.metadata?.filename||e.metadata?.name}:{})}}if(e.source_type==="base64")return{type:"file",file:m({file_data:`data:${e.mime_type??""};base64,${e.data}`},e.metadata?.filename||e.metadata?.name||e.metadata?.title?{filename:e.metadata?.filename||e.metadata?.name||e.metadata?.title}:{})};if(e.source_type==="id")return{type:"file",file:{file_id:e.id}};throw new Error(`File content blocks with source_type ${e.source_type} are not supported for ChatOpenAI`)}},QZ=({message:e,rawResponse:t,includeRawResponse:n})=>{let r=e.tool_calls;switch(e.role){case"assistant":{let i=[],o=[];for(let u of r??[])try{i.push(Ph(u,{returnId:!0}))}catch(d){o.push(Rh(u,d.message))}let s={function_call:e.function_call,tool_calls:r};n!==void 0&&(s.__raw_response=t);let a=m({model_provider:"openai",model_name:t.model},t.system_fingerprint?{usage:m({},t.usage),system_fingerprint:t.system_fingerprint}:{});e.audio&&(s.audio=e.audio);let c=Xme(e.content||"",t.choices?.[0]?.message);return new Sn({content:c,tool_calls:i,invalid_tool_calls:o,additional_kwargs:s,response_metadata:a,id:t.id})}default:return new _s(e.content||"",e.role??"unknown")}},XZ=({delta:e,rawResponse:t,includeRawResponse:n,defaultRole:r})=>{let i=e.role??r,o=e.content??"",s;e.function_call?s={function_call:e.function_call}:e.tool_calls?s={tool_calls:e.tool_calls}:s={},n&&(s.__raw_response=t),e.audio&&(s.audio=b(m({},e.audio),{index:t.choices[0].index}));let a={model_provider:"openai",usage:m({},t.usage)};if(i==="user")return new hd({content:o,response_metadata:a});if(i==="assistant"){let c=[];if(Array.isArray(e.tool_calls))for(let u of e.tool_calls)c.push({name:u.function?.name,args:u.function?.arguments,id:u.id,index:u.index,type:"tool_call_chunk"});return new Cr({content:o,tool_call_chunks:c,additional_kwargs:s,id:t.id,response_metadata:a})}else return i==="system"?new tc({content:o,response_metadata:a}):i==="developer"?new tc({content:o,response_metadata:a,additional_kwargs:{__openai_role__:"developer"}}):i==="function"?new fd({content:o,additional_kwargs:s,name:e.name,response_metadata:a}):i==="tool"?new Jp({content:o,additional_kwargs:s,tool_call_id:e.tool_call_id,response_metadata:a}):new md({content:o,role:i,response_metadata:a})},pfe=e=>{if(e.type==="image"){if(e.url)return{type:"image_url",image_url:{url:e.url}};if(e.data)return{type:"image_url",image_url:{url:`data:${e.mimeType};base64,${e.data}`}}}if(e.type==="audio"&&e.data){let t=cP(()=>{let[,n]=e.mimeType.split("/");return n==="wav"||n==="mp3"?n:"wav"});return{type:"input_audio",input_audio:{data:e.data.toString(),format:t}}}if(e.type==="file"){if(e.data)return{type:"file",file:{file_data:e.data.toString()}};if(e.fileId)return{type:"file",file:{file_id:e.fileId}}}},mfe=({message:e,model:t})=>{let n=Pd(e);if(n==="system"&&Dd(t)&&(n="developer"),n==="developer")return{role:"developer",content:e.contentBlocks.filter(i=>i.type==="text")};if(n==="system")return{role:"system",content:e.contentBlocks.filter(i=>i.type==="text")};if(n==="assistant")return{role:"assistant",content:e.contentBlocks.filter(i=>i.type==="text")};if(n==="tool"&&io.isInstance(e))return{role:"tool",tool_call_id:e.tool_call_id,content:e.contentBlocks.filter(i=>i.type==="text")};if(n==="function")return{role:"function",name:e.name??"",content:e.contentBlocks.filter(i=>i.type==="text").join("")};function*r(i){for(let o of i){o.type==="text"&&(yield{type:"text",text:o.text});let s=pfe(o);s&&(yield s)}}return{role:"user",content:Array.from(r(e.contentBlocks))}},BE=({messages:e,model:t})=>e.flatMap(n=>{if("output_version"in n.response_metadata&&n.response_metadata?.output_version==="v1")return mfe({message:n});let r=Pd(n);r==="system"&&Dd(t)&&(r="developer");let i=typeof n.content=="string"?n.content:n.content.map(s=>ta(s)?Py(s,R1):s),o={role:r,content:i};if(n.name!=null&&(o.name=n.name),n.additional_kwargs.function_call!=null&&(o.function_call=n.additional_kwargs.function_call,o.content=""),Sn.isInstance(n)&&n.tool_calls?.length?(o.tool_calls=n.tool_calls.map(P1),o.content=""):(n.additional_kwargs.tool_calls!=null&&(o.tool_calls=n.additional_kwargs.tool_calls),io.isInstance(n)&&n.tool_call_id!=null&&(o.tool_call_id=n.tool_call_id)),n.additional_kwargs.audio&&typeof n.additional_kwargs.audio=="object"&&"id"in n.additional_kwargs.audio){let s={role:"assistant",audio:{id:n.additional_kwargs.audio.id}};return[o,s]}return o});var N1=class extends Nh{invocationParams(e,t){let n;e?.strict!==void 0?n=e.strict:this.supportsStrictToolCalling!==void 0&&(n=this.supportsStrictToolCalling);let r={};e?.stream_options!==void 0?r={stream_options:e.stream_options}:this.streamUsage&&(this.streaming||t?.streaming)&&(r={stream_options:{include_usage:!0}});let i=b(m(m(m(b(m({model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:e?.stop??this.stopSequences,user:this.user,stream:this.streaming,functions:e?.functions,function_call:e?.function_call,tools:e?.tools?.length?e.tools.map(s=>this._convertChatOpenAIToolToCompletionsTool(s,{strict:n})):void 0,tool_choice:w1(e?.tool_choice),response_format:this._getResponseFormat(e?.response_format),seed:e?.seed},r),{parallel_tool_calls:e?.parallel_tool_calls}),this.audio||e?.audio?{audio:this.audio||e?.audio}:{}),this.modalities||e?.modalities?{modalities:this.modalities||e?.modalities}:{}),this.modelKwargs),{prompt_cache_key:e?.promptCacheKey??this.promptCacheKey,verbosity:e?.verbosity??this.verbosity});e?.prediction!==void 0&&(i.prediction=e.prediction),this.service_tier!==void 0&&(i.service_tier=this.service_tier),e?.service_tier!==void 0&&(i.service_tier=e.service_tier);let o=this._getReasoningParams(e);return o!==void 0&&o.effort!==void 0&&(i.reasoning_effort=o.effort),Dd(i.model)?i.max_completion_tokens=this.maxTokens===-1?void 0:this.maxTokens:i.max_tokens=this.maxTokens===-1?void 0:this.maxTokens,i}_generate(e,t,n){return y(this,null,function*(){let r={},i=this.invocationParams(t),o=BE({messages:e,model:this.model});if(i.stream){let d=this._streamResponseChunks(e,t,n),f={};try{for(var s=ue(d),a,c,u;a=!(c=yield s.next()).done;a=!1){let C=c.value;C.message.response_metadata=m(m({},C.generationInfo),C.message.response_metadata);let S=C.generationInfo?.completion??0;f[S]===void 0?f[S]=C:f[S]=f[S].concat(C)}}catch{u=[c]}finally{try{a&&(c=s.return)&&(yield c.call(s))}finally{if(u)throw u[0]}}let g=Object.entries(f).sort(([C],[S])=>parseInt(C,10)-parseInt(S,10)).map(([C,S])=>S),{functions:h,function_call:v}=this.invocationParams(t),x=yield this._getEstimatedTokenCountFromPrompt(e,h,v),E=yield this._getNumTokensFromGenerations(g);return r.input_tokens=x,r.output_tokens=E,r.total_tokens=x+E,{generations:g,llmOutput:{estimatedTokenUsage:{promptTokens:r.input_tokens,completionTokens:r.output_tokens,totalTokens:r.total_tokens}}}}else{let d=yield this.completionWithRetry(b(m({},i),{stream:!1,messages:o}),m({signal:t?.signal},t?.options)),{completion_tokens:f,prompt_tokens:g,total_tokens:h,prompt_tokens_details:v,completion_tokens_details:x}=d?.usage??{};f&&(r.output_tokens=(r.output_tokens??0)+f),g&&(r.input_tokens=(r.input_tokens??0)+g),h&&(r.total_tokens=(r.total_tokens??0)+h),(v?.audio_tokens!==null||v?.cached_tokens!==null)&&(r.input_token_details=m(m({},v?.audio_tokens!==null&&{audio:v?.audio_tokens}),v?.cached_tokens!==null&&{cache_read:v?.cached_tokens})),(x?.audio_tokens!==null||x?.reasoning_tokens!==null)&&(r.output_token_details=m(m({},x?.audio_tokens!==null&&{audio:x?.audio_tokens}),x?.reasoning_tokens!==null&&{reasoning:x?.reasoning_tokens}));let E=[];for(let C of d?.choices??[]){let A={text:C.message?.content??"",message:this._convertCompletionsMessageToBaseMessage(C.message??{role:"assistant"},d)};A.generationInfo=m(m({},C.finish_reason?{finish_reason:C.finish_reason}:{}),C.logprobs?{logprobs:C.logprobs}:{}),Io(A.message)&&(A.message.usage_metadata=r),A.message=new Sn(Object.fromEntries(Object.entries(A.message).filter(([P])=>!P.startsWith("lc_")))),E.push(A)}return{generations:E,llmOutput:{tokenUsage:{promptTokens:r.input_tokens,completionTokens:r.output_tokens,totalTokens:r.total_tokens}}}}})}_streamResponseChunks(e,t,n){return he(this,null,function*(){let r=BE({messages:e,model:this.model}),i=b(m({},this.invocationParams(t,{streaming:!0})),{messages:r,stream:!0}),o,s=yield new z(this.completionWithRetry(i,t)),a;try{for(var c=ue(s),u,d,f;u=!(d=yield new z(c.next())).done;u=!1){let g=d.value;let h=g?.choices?.[0];if(g.usage&&(a=g.usage),!h)continue;let{delta:v}=h;if(!v)continue;let x=this._convertCompletionsDeltaToBaseMessageChunk(v,g,o);o=v.role??o;let E={prompt:t.promptIndex??0,completion:h.index??0};if(typeof x.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}let C=m({},E);h.finish_reason!=null&&(C.finish_reason=h.finish_reason,C.system_fingerprint=g.system_fingerprint,C.model_name=g.model,C.service_tier=g.service_tier),this.logprobs&&(C.logprobs=h.logprobs);let S=new Ca({message:x,text:x.content,generationInfo:C});yield S,yield new z(n?.handleLLMNewToken(S.text??"",E,void 0,void 0,void 0,{chunk:S}))}}catch{f=[d]}finally{try{u&&(d=c.return)&&(yield new z(d.call(c)))}finally{if(f)throw f[0]}}if(a){let g=m(m({},a.prompt_tokens_details?.audio_tokens!==null&&{audio:a.prompt_tokens_details?.audio_tokens}),a.prompt_tokens_details?.cached_tokens!==null&&{cache_read:a.prompt_tokens_details?.cached_tokens}),h=m(m({},a.completion_tokens_details?.audio_tokens!==null&&{audio:a.completion_tokens_details?.audio_tokens}),a.completion_tokens_details?.reasoning_tokens!==null&&{reasoning:a.completion_tokens_details?.reasoning_tokens});yield new Ca({message:new Cr({content:"",response_metadata:{usage:m({},a)},usage_metadata:m(m({input_tokens:a.prompt_tokens,output_tokens:a.completion_tokens,total_tokens:a.total_tokens},Object.keys(g).length>0&&{input_token_details:g}),Object.keys(h).length>0&&{output_token_details:h})}),text:""})}if(t.signal?.aborted)throw new Error("AbortError")})}completionWithRetry(e,t){return y(this,null,function*(){let n=this._getClientOptions(t),r=e.response_format&&e.response_format.type==="json_schema";return this.caller.call(()=>y(this,null,function*(){try{return r&&!e.stream?yield this.client.chat.completions.parse(e,n):yield this.client.chat.completions.create(e,n)}catch(i){throw mm(i)}}))})}_convertCompletionsDeltaToBaseMessageChunk(e,t,n){return XZ({delta:e,rawResponse:t,includeRawResponse:this.__includeRawResponse,defaultRole:n})}_convertCompletionsMessageToBaseMessage(e,t){return QZ({message:e,rawResponse:t,includeRawResponse:this.__includeRawResponse})}};var $1="__openai_function_call_ids__",e8=e=>{let t=m({},e?.input_tokens_details?.cached_tokens!=null&&{cache_read:e?.input_tokens_details?.cached_tokens}),n=m({},e?.output_tokens_details?.reasoning_tokens!=null&&{reasoning:e?.output_tokens_details?.reasoning_tokens});return{input_tokens:e?.input_tokens??0,output_tokens:e?.output_tokens??0,total_tokens:e?.total_tokens??0,input_token_details:t,output_token_details:n}},L1=e=>{if(e.error){let a=new Error(e.error.message);throw a.name=e.error.code,a}let t,n=[],r=[],i=[],o={model_provider:"openai",model:e.model,created_at:e.created_at,id:e.id,incomplete_details:e.incomplete_details,metadata:e.metadata,object:e.object,status:e.status,user:e.user,service_tier:e.service_tier,model_name:e.model},s={};for(let a of e.output)if(a.type==="message")t=a.id,n.push(...a.content.flatMap(c=>c.type==="output_text"?("parsed"in c&&c.parsed!=null&&(s.parsed=c.parsed),{type:"text",text:c.text,annotations:c.annotations}):c.type==="refusal"?(s.refusal=c.refusal,[]):c));else if(a.type==="function_call"){let c={function:{name:a.name,arguments:a.arguments},id:a.call_id};try{r.push(Ph(c,{returnId:!0}))}catch(u){let d;typeof u=="object"&&u!=null&&"message"in u&&typeof u.message=="string"&&(d=u.message),i.push(Rh(c,d))}s[$1]??={},a.id&&(s[$1][a.call_id]=a.id)}else if(a.type==="reasoning")s.reasoning=a;else if(a.type==="custom_tool_call"){let c=ume(a);c?r.push(c):i.push(Rh(a,"Malformed custom tool call"))}else s.tool_outputs??=[],s.tool_outputs.push(a);return new Sn({id:t,content:n,tool_calls:r,invalid_tool_calls:i,usage_metadata:e8(e.usage),additional_kwargs:s,response_metadata:o})},vfe=e=>{let t=(e.summary.length>1?e.summary.reduce((n,r)=>{let i=n[n.length-1];return i.index===r.index?i.text+=r.text:n.push(r),n},[m({},e.summary[0])]):e.summary).map(n=>Object.fromEntries(Object.entries(n).filter(([r])=>r!=="index")));return b(m({},e),{summary:t})},t8=e=>{let t=[],n={},r,i=[],o={model_provider:"openai"},s={},a;if(e.type==="response.output_text.delta")t.push({type:"text",text:e.delta,index:e.content_index});else if(e.type==="response.output_text.annotation.added")t.push({type:"text",text:"",annotations:[e.annotation],index:e.content_index});else if(e.type==="response.output_item.added"&&e.item.type==="message")a=e.item.id;else if(e.type==="response.output_item.added"&&e.item.type==="function_call")i.push({type:"tool_call_chunk",name:e.item.name,args:e.item.arguments,id:e.item.call_id,index:e.output_index}),s[$1]={[e.item.call_id]:e.item.id};else if(e.type==="response.output_item.done"&&["web_search_call","file_search_call","computer_call","code_interpreter_call","mcp_call","mcp_list_tools","mcp_approval_request","image_generation_call","custom_tool_call"].includes(e.item.type))s.tool_outputs=[e.item];else if(e.type==="response.created")o.id=e.response.id,o.model_name=e.response.model,o.model=e.response.model;else if(e.type==="response.completed"){let c=L1(e.response);r=e8(e.response.usage),e.response.text?.format?.type==="json_schema"&&(s.parsed??=JSON.parse(c.text));for(let[u,d]of Object.entries(e.response))u!=="id"&&(o[u]=d)}else if(e.type==="response.function_call_arguments.delta"||e.type==="response.custom_tool_call_input.delta")i.push({type:"tool_call_chunk",args:e.delta,index:e.output_index});else if(e.type==="response.web_search_call.completed"||e.type==="response.file_search_call.completed")n={tool_outputs:{id:e.item_id,type:e.type.replace("response.","").replace(".completed",""),status:"completed"}};else if(e.type==="response.refusal.done")s.refusal=e.refusal;else if(e.type==="response.output_item.added"&&"item"in e&&e.item.type==="reasoning"){let c=e.item.summary?e.item.summary.map((u,d)=>b(m({},u),{index:d})):void 0;s.reasoning=m({id:e.item.id,type:e.item.type},c?{summary:c}:{})}else if(e.type==="response.reasoning_summary_part.added")s.reasoning={type:"reasoning",summary:[b(m({},e.part),{index:e.summary_index})]};else if(e.type==="response.reasoning_summary_text.delta")s.reasoning={type:"reasoning",summary:[{text:e.delta,type:"summary_text",index:e.summary_index}]};else return e.type==="response.image_generation_call.partial_image",null;return new Ca({text:t.map(c=>c.text).join(""),message:new Cr({id:a,content:t,tool_call_chunks:i,usage_metadata:r,additional_kwargs:s,response_metadata:o}),generationInfo:n})},bfe=e=>{let t=Sn.isInstance(e)&&e.response_metadata?.model_provider==="openai";function*n(){let r=Md(()=>{try{let C=Pd(e);return C==="system"||C==="developer"||C==="assistant"||C==="user"?C:"assistant"}catch{return"assistant"}}),i,o=new Set,s=new Set,a=new Map,c=new Map;function*u(){if(!i)return;let C=i.content;(typeof C=="string"&&C.length>0||Array.isArray(C)&&C.length>0)&&(yield i),i=void 0}let d=C=>{i||(i={type:"message",role:r,content:[]}),typeof i.content=="string"?i.content=i.content.length>0?[{type:"input_text",text:i.content},...C]:[...C]:i.content.push(...C)},f=C=>{if(typeof C=="string")return C;try{return JSON.stringify(C??{})}catch{return"{}"}},g=C=>{let S=Md(()=>{let A=C.metadata?.detail;return A==="low"||A==="high"||A==="auto"?A:"auto"});if(C.fileId)return{type:"input_image",detail:S,file_id:C.fileId};if(C.url)return{type:"input_image",detail:S,image_url:C.url};if(C.data){let A=typeof C.data=="string"?C.data:Buffer.from(C.data).toString("base64"),P=C.mimeType??"image/png";return{type:"input_image",detail:S,image_url:`data:${P};base64,${A}`}}},h=C=>{let S=C.metadata?.filename??C.metadata?.name??C.metadata?.title;if(C.fileId&&typeof S=="string")return m({type:"input_file",file_id:C.fileId},S?{filename:S}:{});if(C.url&&typeof S=="string")return m({type:"input_file",file_url:C.url},S?{filename:S}:{});if(C.data&&typeof S=="string"){let A=typeof C.data=="string"?C.data:Buffer.from(C.data).toString("base64"),P=C.mimeType??"application/octet-stream";return m({type:"input_file",file_data:`data:${P};base64,${A}`},S?{filename:S}:{})}},v=C=>{let S=Md(()=>{if(Array.isArray(C.summary)){let B=C.summary?.map(ee=>ee?.text).filter(ee=>typeof ee=="string")??[];if(B.length>0)return B}return C.reasoning?[C.reasoning]:[]}),A=S.length>0?S.map(F=>({type:"summary_text",text:F})):[{type:"summary_text",text:""}],P={type:"reasoning",id:C.id??"",summary:A};return C.reasoning&&(P.content=[{type:"reasoning_text",text:C.reasoning}]),P},x=C=>({type:"function_call",name:C.name??"",call_id:C.id??"",arguments:f(C.args)}),E=C=>{let S=f(C.output),A=C.status==="success"?"completed":C.status==="error"?"incomplete":void 0;return m({type:"function_call_output",call_id:C.toolCallId??"",output:S},A?{status:A}:{})};for(let C of e.contentBlocks)if(C.type==="text")d([{type:"input_text",text:C.text}]);else if(C.type!=="invalid_tool_call"){if(C.type==="reasoning")yield*mn(u()),yield v(C);else if(C.type==="tool_call"){yield*mn(u());let S=C.id??"";S&&(o.add(S),a.delete(S)),yield x(C)}else if(C.type==="tool_call_chunk"){if(C.id){let S=a.get(C.id)??{name:C.name,args:[]};C.name&&(S.name=C.name),C.args&&S.args.push(C.args),a.set(C.id,S)}}else if(C.type==="server_tool_call"){yield*mn(u());let S=C.id??"";S&&(s.add(S),c.delete(S)),yield x(C)}else if(C.type==="server_tool_call_chunk"){if(C.id){let S=c.get(C.id)??{name:C.name,args:[]};C.name&&(S.name=C.name),C.args&&S.args.push(C.args),c.set(C.id,S)}}else if(C.type==="server_tool_call_result")yield*mn(u()),yield E(C);else if(C.type!=="audio")if(C.type==="file"){let S=h(C);S&&d([S])}else if(C.type==="image"){let S=g(C);S&&d([S])}else if(C.type==="video"){let S=h(C);S&&d([S])}else C.type==="text-plain"?C.text&&d([{type:"input_text",text:C.text}]):C.type==="non_standard"&&t&&(yield*mn(u()),yield C.value)}yield*mn(u());for(let[C,S]of a){if(!C||o.has(C))continue;let A=S.args.join("");!S.name&&!A||(yield{type:"function_call",call_id:C,name:S.name??"",arguments:A})}for(let[C,S]of c){if(!C||s.has(C))continue;let A=S.args.join("");!S.name&&!A||(yield{type:"function_call",call_id:C,name:S.name??"",arguments:A})}}return Array.from(n())},F1=({messages:e,zdrEnabled:t,model:n})=>e.flatMap(r=>{let i=r.response_metadata;if(i?.output_version==="v1")return bfe(r);let o=r.additional_kwargs,s=Pd(r);if(s==="system"&&Dd(n)&&(s="developer"),s==="function")throw new Error("Function messages are not supported in Responses API");if(s==="tool"){let a=r;return o?.type==="computer_call_output"?{type:"computer_call_output",output:(()=>{if(typeof a.content=="string")return{type:"computer_screenshot",image_url:a.content};if(Array.isArray(a.content)){let u=a.content.find(f=>f.type==="computer_screenshot");if(u)return u;let d=a.content.find(f=>f.type==="image_url");if(d)return{type:"computer_screenshot",image_url:typeof d.image_url=="string"?d.image_url:d.image_url.url}}throw new Error("Invalid computer call output")})(),call_id:a.tool_call_id}:a.additional_kwargs?.customTool?{type:"custom_tool_call_output",call_id:a.tool_call_id,output:a.content}:{type:"function_call_output",call_id:a.tool_call_id,id:a.id?.startsWith("fc_")?a.id:void 0,output:typeof a.content!="string"?JSON.stringify(a.content):a.content}}if(s==="assistant"){if(!t&&i?.output!=null&&Array.isArray(i?.output)&&i?.output.length>0&&i?.output.every(g=>"type"in g))return i?.output;let a=[];if(o?.reasoning&&!t){let g=vfe(o.reasoning);a.push(g)}let{content:c}=r;o?.refusal&&(typeof c=="string"&&(c=[{type:"output_text",text:c,annotations:[]}]),c=[...c,{type:"refusal",refusal:o.refusal}]),(typeof c=="string"||c.length>0)&&a.push(b(m({type:"message",role:"assistant"},r.id&&!t&&r.id.startsWith("msg_")?{id:r.id}:{}),{content:Md(()=>typeof c=="string"?c:c.flatMap(g=>g.type==="text"?{type:"output_text",text:g.text,annotations:g.annotations??[]}:g.type==="output_text"||g.type==="refusal"?g:[]))}));let u=o?.[$1];Sn.isInstance(r)&&r.tool_calls?.length?a.push(...r.tool_calls.map(g=>dme(g)?{type:"custom_tool_call",id:g.call_id,call_id:g.id??"",input:g.args.input,name:g.name}:m({type:"function_call",name:g.name,arguments:JSON.stringify(g.args),call_id:g.id},t?{}:{id:u?.[g.id]}))):o?.tool_calls&&a.push(...o.tool_calls.map(g=>m({type:"function_call",name:g.function.name,call_id:g.id,arguments:g.function.arguments},t?{}:{id:u?.[g.id]})));let d=i?.output?.length?i?.output:o.tool_outputs,f=["computer_call","mcp_call","code_interpreter_call","image_generation_call"];if(d!=null){let h=d?.filter(v=>f.includes(v.type));h.length>0&&a.push(...h)}return a}if(s==="user"||s==="system"||s==="developer"){if(typeof r.content=="string")return{type:"message",role:s,content:r.content};let a=[],c=r.content.flatMap(u=>{if(u.type==="mcp_approval_response"&&a.push({type:"mcp_approval_response",approval_request_id:u.approval_request_id,approve:u.approve}),ta(u))return Py(u,R1);if(u.type==="text")return{type:"input_text",text:u.text};if(u.type==="image_url"){let d=Md(()=>{if(typeof u.image_url=="string")return u.image_url;if(typeof u.image_url=="object"&&u.image_url!==null&&"url"in u.image_url)return u.image_url.url}),f=Md(()=>{if(typeof u.image_url=="string")return"auto";if(typeof u.image_url=="object"&&u.image_url!==null&&"detail"in u.image_url)return u.image_url.detail});return{type:"input_image",image_url:d,detail:f}}return u.type==="input_text"||u.type==="input_image"||u.type==="input_file"?u:[]});return c.length>0&&a.push({type:"message",role:s,content:c}),a}return console.warn(`Unsupported role found when converting to OpenAI Responses API: ${s}`),[]});var j1=class extends Nh{invocationParams(e){let t;e?.strict!==void 0?t=e.strict:this.supportsStrictToolCalling!==void 0&&(t=this.supportsStrictToolCalling);let n=m(m({model:this.model,temperature:this.temperature,top_p:this.topP,user:this.user,stream:this.streaming,previous_response_id:e?.previous_response_id,truncation:e?.truncation,include:e?.include,tools:e?.tools?.length?this._reduceChatOpenAITools(e.tools,{stream:this.streaming,strict:t}):void 0,tool_choice:lme(e?.tool_choice)?e?.tool_choice:(()=>{let i=w1(e?.tool_choice);if(typeof i=="object"&&"type"in i){if(i.type==="function")return{type:"function",name:i.function.name};if(i.type==="allowed_tools")return{type:"allowed_tools",mode:i.allowed_tools.mode,tools:i.allowed_tools.tools};if(i.type==="custom")return{type:"custom",name:i.custom.name}}})(),text:(()=>{if(e?.text)return e.text;let i=this._getResponseFormat(e?.response_format);return i?.type==="json_schema"?i.json_schema.schema!=null?{format:{type:"json_schema",schema:i.json_schema.schema,description:i.json_schema.description,name:i.json_schema.name,strict:i.json_schema.strict},verbosity:e?.verbosity}:void 0:{format:i,verbosity:e?.verbosity}})(),parallel_tool_calls:e?.parallel_tool_calls,max_output_tokens:this.maxTokens===-1?void 0:this.maxTokens,prompt_cache_key:e?.promptCacheKey??this.promptCacheKey},this.zdrEnabled?{store:!1}:{}),this.modelKwargs),r=this._getReasoningParams(e);return r!==void 0&&(n.reasoning=r),n}_generate(e,t){return y(this,null,function*(){let n=this.invocationParams(t);if(n.stream){let a=this._streamResponseChunks(e,t),c;try{for(var r=ue(a),i,o,s;i=!(o=yield r.next()).done;i=!1){let u=o.value;u.message.response_metadata=m(m({},u.generationInfo),u.message.response_metadata),c=c?.concat(u)??u}}catch{s=[o]}finally{try{i&&(o=r.return)&&(yield o.call(r))}finally{if(s)throw s[0]}}return{generations:c?[c]:[],llmOutput:{estimatedTokenUsage:c?.message?.usage_metadata}}}else{let a=yield this.completionWithRetry(b(m({input:F1({messages:e,zdrEnabled:this.zdrEnabled??!1,model:this.model})},n),{stream:!1}),m({signal:t?.signal},t?.options));return{generations:[{text:a.output_text,message:L1(a)}],llmOutput:{id:a.id,estimatedTokenUsage:a.usage?{promptTokens:a.usage.input_tokens,completionTokens:a.usage.output_tokens,totalTokens:a.usage.total_tokens}:void 0}}}})}_streamResponseChunks(e,t,n){return he(this,null,function*(){let r=yield new z(this.completionWithRetry(b(m({},this.invocationParams(t)),{input:F1({messages:e,zdrEnabled:this.zdrEnabled??!1,model:this.model}),stream:!0}),t));try{for(var i=ue(r),o,s,a;o=!(s=yield new z(i.next())).done;o=!1){let c=s.value;let u=t8(c);u!=null&&(yield u,yield new z(n?.handleLLMNewToken(u.text||"",{prompt:t.promptIndex??0,completion:0},void 0,void 0,void 0,{chunk:u})))}}catch{a=[s]}finally{try{o&&(s=i.return)&&(yield new z(s.call(i)))}finally{if(a)throw a[0]}}})}completionWithRetry(e,t){return y(this,null,function*(){return this.caller.call(()=>y(this,null,function*(){let n=this._getClientOptions(t);try{return e.text?.format?.type==="json_schema"&&!e.stream?yield this.client.responses.parse(e,n):yield this.client.responses.create(e,n)}catch(r){throw mm(r)}}))})}_reduceChatOpenAITools(e,t){let n=[];for(let r of e)if(Hv(r))r.type==="image_generation"&&t?.stream&&(r.partial_images=1),n.push(r);else if(Th(r)){let i=r.metadata.customTool;n.push({type:"custom",name:i.name,description:i.description,format:i.format})}else FE(r)?n.push({type:"function",name:r.function.name,parameters:r.function.parameters,description:r.function.description,strict:t?.strict??null}):x1(r)&&n.push(pme(r));return n}};var z1=class wfe extends Nh{useResponsesApi=!1;responses;completions;get lc_serializable_keys(){return[...super.lc_serializable_keys,"useResponsesApi"]}get callKeys(){return[...super.callKeys,"useResponsesApi"]}constructor(t){super(t),this.fields=t,this.useResponsesApi=t?.useResponsesApi??!1,this.responses=t?.responses??new j1(t),this.completions=t?.completions??new N1(t)}_useResponsesApi(t){let n=t?.tools?.some(Hv),r=t?.previous_response_id!=null||t?.text!=null||t?.truncation!=null||t?.include!=null||t?.reasoning?.summary!=null||this.reasoning?.summary!=null,i=t?.tools?.some(x1)||t?.tools?.some(Th);return this.useResponsesApi||n||r||i}getLsParams(t){let n=this._combineCallOptions(t);return this._useResponsesApi(t)?this.responses.getLsParams(n):this.completions.getLsParams(n)}invocationParams(t){let n=this._combineCallOptions(t);return this._useResponsesApi(t)?this.responses.invocationParams(n):this.completions.invocationParams(n)}_generate(t,n,r){return y(this,null,function*(){return this._useResponsesApi(n)?this.responses._generate(t,n):this.completions._generate(t,n,r)})}_streamResponseChunks(t,n,r){return he(this,null,function*(){if(this._useResponsesApi(n)){yield*mn(this.responses._streamResponseChunks(t,this._combineCallOptions(n),r));return}yield*mn(this.completions._streamResponseChunks(t,this._combineCallOptions(n),r))})}withConfig(t){let n=new wfe(this.fields);return n.defaultOptions=m(m({},this.defaultOptions),t),n}};var n8={};ae(n8,{BaseLLM:()=>r8,LLM:()=>B1});var r8=class UE extends jE{lc_namespace=["langchain","llms",this._llmType()];invoke(t,n){return y(this,null,function*(){let r=UE._convertInputToPromptValue(t);return(yield this.generatePrompt([r],n,n?.callbacks)).generations[0][0].text})}_streamResponseChunks(t,n,r){return he(this,null,function*(){throw new Error("Not implemented.")})}_separateRunnableConfigFromCallOptionsCompat(t){let[n,r]=super._separateRunnableConfigFromCallOptions(t);return r.signal=n.signal,[n,r]}_streamIterator(t,n){return he(this,null,function*(){if(this._streamResponseChunks===UE.prototype._streamResponseChunks)yield this.invoke(t,n);else{let a=UE._convertInputToPromptValue(t),[c,u]=this._separateRunnableConfigFromCallOptionsCompat(n),d=yield new z(wi.configure(c.callbacks,this.callbacks,c.tags,this.tags,c.metadata,this.metadata,{verbose:this.verbose})),f={options:u,invocation_params:this?.invocationParams(u),batch_size:1},g=yield new z(d?.handleLLMStart(this.toJSON(),[a.toString()],c.runId,void 0,f,void 0,void 0,c.runName)),h=new Jl({text:""});try{try{for(var r=ue(this._streamResponseChunks(a.toString(),u,g?.[0])),i,o,s;i=!(o=yield new z(r.next())).done;i=!1){let v=o.value;h?h=h.concat(v):h=v,typeof v.text=="string"&&(yield v.text)}}catch{s=[o]}finally{try{i&&(o=r.return)&&(yield new z(o.call(r)))}finally{if(s)throw s[0]}}}catch(v){throw yield new z(Promise.all((g??[]).map(x=>x?.handleLLMError(v)))),v}yield new z(Promise.all((g??[]).map(v=>v?.handleLLMEnd({generations:[[h]]}))))}})}generatePrompt(t,n,r){return y(this,null,function*(){let i=t.map(o=>o.toString());return this.generate(i,n,r)})}invocationParams(t){return{}}_flattenLLMResult(t){let n=[];for(let r=0;r<t.generations.length;r+=1){let i=t.generations[r];if(r===0)n.push({generations:[i],llmOutput:t.llmOutput});else{let o=t.llmOutput?b(m({},t.llmOutput),{tokenUsage:{}}):void 0;n.push({generations:[i],llmOutput:o})}}return n}_generateUncached(t,n,r,i){return y(this,null,function*(){let o;if(i!==void 0&&i.length===t.length)o=i;else{let h=yield wi.configure(r.callbacks,this.callbacks,r.tags,this.tags,r.metadata,this.metadata,{verbose:this.verbose}),v={options:n,invocation_params:this?.invocationParams(n),batch_size:t.length};o=yield h?.handleLLMStart(this.toJSON(),t,r.runId,void 0,v,void 0,void 0,r?.runName)}let s=!!o?.[0].handlers.find(yC),a;if(s&&t.length===1&&this._streamResponseChunks!==UE.prototype._streamResponseChunks)try{let h=yield this._streamResponseChunks(t[0],n,o?.[0]),v;try{for(var u=ue(h),d,f,g;d=!(f=yield u.next()).done;d=!1){let x=f.value;v===void 0?v=x:v=xa(v,x)}}catch{g=[f]}finally{try{d&&(f=u.return)&&(yield f.call(u))}finally{if(g)throw g[0]}}if(v===void 0)throw new Error("Received empty response from chat model call.");a={generations:[[v]],llmOutput:{}},yield o?.[0].handleLLMEnd(a)}catch(h){throw yield o?.[0].handleLLMError(h),h}else{try{a=yield this._generate(t,n,o?.[0])}catch(v){throw yield Promise.all((o??[]).map(x=>x?.handleLLMError(v))),v}let h=this._flattenLLMResult(a);yield Promise.all((o??[]).map((v,x)=>v?.handleLLMEnd(h[x])))}let c=o?.map(h=>h.runId)||void 0;return Object.defineProperty(a,oh,{value:c?{runIds:c}:void 0,configurable:!0}),a})}_generateCached(a){return y(this,arguments,function*({prompts:t,cache:n,llmStringKey:r,parsedOptions:i,handledOptions:o,runId:s}){let c=yield wi.configure(o.callbacks,this.callbacks,o.tags,this.tags,o.metadata,this.metadata,{verbose:this.verbose}),u={options:i,invocation_params:this?.invocationParams(i),batch_size:t.length},d=yield c?.handleLLMStart(this.toJSON(),t,s,void 0,u,void 0,void 0,o?.runName),f=[],h=(yield Promise.allSettled(t.map((E,C)=>y(this,null,function*(){let S=yield n.lookup(E,r);return S==null&&f.push(C),S})))).map((E,C)=>({result:E,runManager:d?.[C]})).filter(({result:E})=>E.status==="fulfilled"&&E.value!=null||E.status==="rejected"),v=[];yield Promise.all(h.map((A,P)=>y(this,[A,P],function*({result:E,runManager:C},S){if(E.status==="fulfilled"){let F=E.value;return v[S]=F.map(B=>(B.generationInfo=b(m({},B.generationInfo),{tokenUsage:{}}),B)),F.length&&(yield C?.handleLLMNewToken(F[0].text)),C?.handleLLMEnd({generations:[F]},void 0,void 0,void 0,{cached:!0})}else return yield C?.handleLLMError(E.reason,void 0,void 0,void 0,{cached:!0}),Promise.reject(E.reason)})));let x={generations:v,missingPromptIndices:f,startedRunManagers:d};return Object.defineProperty(x,oh,{value:d?{runIds:d?.map(E=>E.runId)}:void 0,configurable:!0}),x})}generate(t,n,r){return y(this,null,function*(){if(!Array.isArray(t))throw new Error("Argument 'prompts' is expected to be a string[]");let i;Array.isArray(n)?i={stop:n}:i=n;let[o,s]=this._separateRunnableConfigFromCallOptionsCompat(i);if(o.callbacks=o.callbacks??r,!this.cache)return this._generateUncached(t,s,o);let{cache:a}=this,c=this._getSerializedCacheKeyParametersForCall(s),{generations:u,missingPromptIndices:d,startedRunManagers:f}=yield this._generateCached({prompts:t,cache:a,llmStringKey:c,parsedOptions:s,handledOptions:o,runId:o.runId}),g={};if(d.length>0){let h=yield this._generateUncached(d.map(v=>t[v]),s,o,f!==void 0?d.map(v=>f?.[v]):void 0);yield Promise.all(h.generations.map((v,x)=>y(this,null,function*(){let E=d[x];return u[E]=v,a.update(t[E],c,v)}))),g=h.llmOutput??{}}return{generations:u,llmOutput:g}})}_identifyingParams(){return{}}_modelType(){return"base_llm"}},B1=class extends r8{_generate(e,t,n){return y(this,null,function*(){return{generations:yield Promise.all(e.map((i,o)=>this._call(i,b(m({},t),{promptIndex:o}),n).then(s=>[{text:s}])))}})}};var i8={};ae(i8,{chunkArray:()=>o8});var o8=(e,t)=>e.reduce((n,r,i)=>{let o=Math.floor(i/t),s=n[o]||[];return n[o]=s.concat([r]),n},[]);var s8={};ae(s8,{Embeddings:()=>VE});var VE=class{caller;constructor(e){this.caller=new bd(e??{})}};var a8={};ae(a8,{BaseToolkit:()=>tZe,DynamicStructuredTool:()=>xfe,DynamicTool:()=>l8,StructuredTool:()=>HE,Tool:()=>c8,ToolInputParsingException:()=>Oy,isLangChainTool:()=>kh,isRunnableToolLike:()=>RE,isStructuredTool:()=>PE,isStructuredToolParams:()=>NE,tool:()=>nZe});var HE=class extends M1{returnDirect=!1;verboseParsingErrors=!1;get lc_namespace(){return["langchain","tools"]}responseFormat="content";defaultConfig;constructor(e){super(e??{}),this.verboseParsingErrors=e?.verboseParsingErrors??this.verboseParsingErrors,this.responseFormat=e?.responseFormat??this.responseFormat,this.defaultConfig=e?.defaultConfig??this.defaultConfig,this.metadata=e?.metadata??this.metadata}invoke(e,t){return y(this,null,function*(){let n,r=wn(so(this.defaultConfig,t));return qp(e)?(n=e.args,r=b(m({},r),{toolCall:e})):n=e,this.call(n,r)})}call(e,t,n){return y(this,null,function*(){let r=qp(e)?e.args:e,i;if(Is(this.schema))try{i=yield rm(this.schema,r)}catch(h){let v="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(v=`${v}
Details: ${h.message}`),_R(h)&&(v=`${v}

${rd.prettifyError(h)}`),new Oy(v,JSON.stringify(e))}else{let h=Or(r,this.schema);if(!h.valid){let v="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(v=`${v}
Details: ${h.errors.map(x=>`${x.keywordLocation}: ${x.error}`).join(`
`)}`),new Oy(v,JSON.stringify(e))}i=r}let o=rh(t),a=yield wi.configure(o.callbacks,this.callbacks,o.tags||n,this.tags,o.metadata,this.metadata,{verbose:this.verbose})?.handleToolStart(this.toJSON(),typeof e=="string"?e:JSON.stringify(e),o.runId,void 0,void 0,void 0,o.runName);delete o.runId;let c;try{c=yield this._call(i,a,o)}catch(h){throw yield a?.handleToolError(h),h}let u,d;if(this.responseFormat==="content_and_artifact")if(Array.isArray(c)&&c.length===2)[u,d]=c;else throw new Error(`Tool response format is "content_and_artifact" but the output was not a two-tuple.
Result: ${JSON.stringify(c)}`);else u=c;let f;qp(e)&&(f=e.id),!f&&ise(o)&&(f=o.toolCall.id);let g=rZe({content:u,artifact:d,toolCallId:f,name:this.name,metadata:this.metadata});return yield a?.handleToolEnd(g),g})}},c8=class extends HE{schema=ps.object({input:ps.string().optional()}).transform(e=>e.input);constructor(e){super(e)}call(e,t){let n=typeof e=="string"||e==null?{input:e}:e;return super.call(n,t)}},l8=class e extends c8{static lc_name(){return"DynamicTool"}name;description;func;constructor(t){super(t),this.name=t.name,this.description=t.description,this.func=t.func,this.returnDirect=t.returnDirect??this.returnDirect}call(t,n){return y(this,null,function*(){let r=rh(n);return r.runName===void 0&&(r.runName=this.name),fi(e.prototype,this,"call").call(this,t,r)})}_call(t,n,r){return y(this,null,function*(){return this.func(t,n,r)})}},xfe=class e extends HE{static lc_name(){return"DynamicStructuredTool"}name;description;func;schema;constructor(t){super(t),this.name=t.name,this.description=t.description,this.func=t.func,this.returnDirect=t.returnDirect??this.returnDirect,this.schema=t.schema}call(t,n,r){return y(this,null,function*(){let i=rh(n);return i.runName===void 0&&(i.runName=this.name),fi(e.prototype,this,"call").call(this,t,i,r)})}_call(t,n,r){return this.func(t,n,r)}},tZe=class{getTools(){return this.tools}};function nZe(e,t){let n=Hy(t.schema),r=qy(t.schema);if(!t.schema||n||r)return new l8(b(m({},t),{description:t.description??t.schema?.description??`${t.name} tool`,func:(s,a,c)=>y(null,null,function*(){return new Promise((u,d)=>{let f=kn(c,{callbacks:a?.getChild()});gr.runWithConfig(Cs(f),()=>y(null,null,function*(){try{u(e(s,f))}catch(g){d(g)}}))})})}));let i=t.schema,o=t.description??t.schema.description??`${t.name} tool`;return new xfe(b(m({},t),{description:o,schema:i,func:(s,a,c)=>y(null,null,function*(){return new Promise((u,d)=>{let f,g=()=>{c?.signal&&f&&c.signal.removeEventListener("abort",f)};c?.signal&&(f=()=>{g(),d(Xp(c.signal))},c.signal.addEventListener("abort",f));let h=kn(c,{callbacks:a?.getChild()});gr.runWithConfig(Cs(h),()=>y(null,null,function*(){try{let v=yield e(s,h);if(c?.signal?.aborted){g();return}g(),u(v)}catch(v){g(),d(v)}}))})})}))}function rZe(e){let{content:t,artifact:n,toolCallId:r,metadata:i}=e;return r&&!hC(t)?typeof t=="string"||Array.isArray(t)&&t.every(o=>typeof o=="object")?new io({status:"success",content:t,artifact:n,tool_call_id:r,name:e.name,metadata:i}):new io({status:"success",content:iZe(t),artifact:n,tool_call_id:r,name:e.name,metadata:i}):t}function iZe(e){try{return JSON.stringify(e,null,2)??""}catch{return`${e}`}}var Mn="__start__",Ft="__end__",Yc="__input__",Efe="__copy__",ji="__error__",U1="__pregel_ns_writes",pc="__pregel_send",qE="__pregel_call",Qc="__pregel_read",ri="__pregel_checkpointer",uu="__pregel_resuming",$h="__pregel_task_id",qv="__pregel_stream",oZe="__pregel_resume_value",Gv="__pregel_resume_map",Ma="__pregel_scratchpad",GE="__pregel_previous",u8="__pregel_durability",V1="checkpoint_id",Da="checkpoint_ns",Ife="__pregel_node_finished",As="checkpoint_map",d8="__pregel_abort_signals",xn="__interrupt__",Yi="__resume__",WE="__no_writes__",Xc="__return__",H1="__previous__",or="langsmith:hidden",Sfe="langsmith:nostream",p8="__self__",Jo="__pregel_tasks",Yo="__pregel_push",KE="__pregel_pull",Qo="00000000-0000-0000-0000-000000000000",kfe=[or,Yc,xn,Yi,ji,WE,pc,Qc,ri,u8,qv,uu,$h,qE,oZe,Ma,GE,As,Da,V1],Mr="|",Os=":",Cfe=Symbol.for("langgraph.command"),sZe=class{[Cfe];constructor(e){this[Cfe]=e}};function Z1(e){let t=e;return t!=null&&typeof t.node=="string"&&t.args!==void 0}var _m=class{lg_name="Send";node;args;constructor(e,t){this.node=e,this.args=ZE(t)}toJSON(){return{lg_name:this.lg_name,node:this.node,args:this.args}}};function zi(e){return e instanceof _m}function q1(e){return!e||typeof e!="object"||!(xn in e)?!1:Array.isArray(e[xn])}var Ao=class extends sZe{lg_name="Command";lc_direct_tool_output=!0;graph;update;resume;goto=[];static PARENT="__parent__";constructor(t){super(t),this.resume=t.resume,this.graph=t.graph,this.update=t.update,t.goto&&(this.goto=Array.isArray(t.goto)?ZE(t.goto):[ZE(t.goto)])}_updateAsTuples(){return this.update&&typeof this.update=="object"&&!Array.isArray(this.update)?Object.entries(this.update):Array.isArray(this.update)&&this.update.every(t=>Array.isArray(t)&&t.length===2&&typeof t[0]=="string")?this.update:[["__root__",this.update]]}toJSON(){let t;return typeof this.goto=="string"?t=this.goto:zi(this.goto)?t=this.goto.toJSON():t=this.goto?.map(n=>typeof n=="string"?n:n.toJSON()),{lg_name:this.lg_name,update:this.update,resume:this.resume,goto:t}}};function Fi(e){return typeof e!="object"||e==null?!1:"lg_name"in e&&e.lg_name==="Command"}function ZE(e,t=new Map){if(e!=null&&typeof e=="object"){if(t.has(e))return t.get(e);let n;if(Array.isArray(e))n=[],t.set(e,n),e.forEach((r,i)=>{n[i]=ZE(r,t)});else if(Fi(e)&&!(e instanceof Ao))n=new Ao(e),t.set(e,n);else if(Z1(e)&&!(e instanceof _m))n=new _m(e.node,e.args),t.set(e,n);else if(Fi(e)||zi(e))n=e,t.set(e,n);else if("lc_serializable"in e&&e.lc_serializable)n=e,t.set(e,n);else{n={},t.set(e,n);for(let[r,i]of Object.entries(e))n[r]=ZE(i,t)}return n}return e}var Lh=class extends Error{lc_error_code;constructor(e,t){let n=e??"";t?.lc_error_code&&(n=`${n}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langgraph/${t.lc_error_code}/
`),super(n),this.lc_error_code=t?.lc_error_code}},Tfe=class extends Lh{get is_bubble_up(){return!0}},Afe=class extends Lh{constructor(e,t){super(e,t),this.name="GraphRecursionError"}static get unminifiable_name(){return"GraphRecursionError"}},Wv=class extends Lh{constructor(e,t){super(e,t),this.name="GraphValueError"}static get unminifiable_name(){return"GraphValueError"}},ym=class extends Tfe{interrupts;constructor(e,t){super(JSON.stringify(e,null,2),t),this.name="GraphInterrupt",this.interrupts=e??[]}static get unminifiable_name(){return"GraphInterrupt"}},m8=class extends ym{constructor(e,t){super([{value:e}],t),this.name="NodeInterrupt"}static get unminifiable_name(){return"NodeInterrupt"}},f8=class extends Tfe{command;constructor(e){super(),this.name="ParentCommand",this.command=e}static get unminifiable_name(){return"ParentCommand"}};function Ofe(e){return e!==void 0&&e.name===f8.unminifiable_name}function Kv(e){return e!==void 0&&e.is_bubble_up===!0}function du(e){return e!==void 0&&[ym.unminifiable_name,m8.unminifiable_name].includes(e.name)}var h8=class extends Lh{constructor(e,t){super(e,t),this.name="EmptyInputError"}static get unminifiable_name(){return"EmptyInputError"}},Hr=class extends Lh{constructor(e,t){super(e,t),this.name="EmptyChannelError"}static get unminifiable_name(){return"EmptyChannelError"}},Vn=class extends Lh{constructor(e,t){super(e,t),this.name="InvalidUpdateError"}static get unminifiable_name(){return"InvalidUpdateError"}};var Mfe=class extends Lh{constructor(e,t){super(e,t),this.name="UnreachableNodeError"}static get unminifiable_name(){return"UnreachableNodeError"}};function JE(e){return hP({clockseq:e})}function Nd(e,t){let n=t.replace(/-/g,"").match(/.{2}/g).map(r=>parseInt(r,16));return rc(e,new Uint8Array(n))}var g8="__error__",Fh="__scheduled__",_8="__interrupt__",y8="__resume__";var Dfe="[...]",aZe="[Circular]",G1=[],Jv=[];function cZe(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function Pfe(e,t,n,r){typeof r>"u"&&(r=cZe()),b8(e,"",0,[],void 0,0,r);var i;try{Jv.length===0?i=JSON.stringify(e,t,n):i=JSON.stringify(e,lZe(t),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;G1.length!==0;){var o=G1.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function v8(e,t,n,r){var i=Object.getOwnPropertyDescriptor(r,n);i.get!==void 0?i.configurable?(Object.defineProperty(r,n,{value:e}),G1.push([r,n,t,i])):Jv.push([t,n,e]):(r[n]=e,G1.push([r,n,t]))}function b8(e,t,n,r,i,o,s){o+=1;var a;if(typeof e=="object"&&e!==null){for(a=0;a<r.length;a++)if(r[a]===e){v8(aZe,e,t,i);return}if(typeof s.depthLimit<"u"&&o>s.depthLimit){v8(Dfe,e,t,i);return}if(typeof s.edgesLimit<"u"&&n+1>s.edgesLimit){v8(Dfe,e,t,i);return}if(r.push(e),Array.isArray(e))for(a=0;a<e.length;a++)b8(e[a],a,a,r,e,o,s);else{var c=Object.keys(e);for(a=0;a<c.length;a++){var u=c[a];b8(e[u],u,a,r,e,o,s)}}r.pop()}}function lZe(e){return e=typeof e<"u"?e:function(t,n){return n},function(t,n){if(Jv.length>0)for(var r=0;r<Jv.length;r++){var i=Jv[r];if(i[1]===t&&i[0]===n){n=i[2],Jv.splice(r,1);break}}return e.call(this,t,n)}}var Rfe=[];var Nfe={};var w8={};ae(w8,{BaseChatMessageHistory:()=>x8,BaseListChatMessageHistory:()=>W1,InMemoryChatMessageHistory:()=>uZe});var x8=class extends vi{addMessages(e){return y(this,null,function*(){for(let t of e)yield this.addMessage(t)})}},W1=class extends vi{addUserMessage(e){return this.addMessage(new Pi(e))}addAIMessage(e){return this.addMessage(new Sn(e))}addMessages(e){return y(this,null,function*(){for(let t of e)yield this.addMessage(t)})}clear(){throw new Error("Not implemented.")}},uZe=class extends W1{lc_namespace=["langchain","stores","message","in_memory"];messages=[];constructor(e){super(...arguments),this.messages=e??[]}getMessages(){return y(this,null,function*(){return this.messages})}addMessage(e){return y(this,null,function*(){this.messages.push(e)})}clear(){return y(this,null,function*(){this.messages=[]})}};var $fe={};var C8={};ae(C8,{BaseMemory:()=>dZe,getInputValue:()=>pZe,getOutputValue:()=>mZe,getPromptInputKey:()=>fZe});var dZe=class{},Lfe=(e,t)=>{if(t!==void 0)return e[t];let n=Object.keys(e);if(n.length===1)return e[n[0]]},pZe=(e,t)=>{let n=Lfe(e,t);if(!n){let r=Object.keys(e);throw new Error(`input values have ${r.length} keys, you must specify an input key or pass only 1 key as input`)}return n},mZe=(e,t)=>{let n=Lfe(e,t);if(!n&&n!==""){let r=Object.keys(e);throw new Error(`output values have ${r.length} keys, you must specify an output key or pass only 1 key as output`)}return n};function fZe(e,t){let n=Object.keys(e).filter(r=>!t.includes(r)&&r!=="stop");if(n.length!==1)throw new Error(`One input key expected, but got ${n.length}`);return n[0]}var E8={};ae(E8,{BaseStore:()=>Ffe,InMemoryStore:()=>hZe});var Ffe=class extends vi{},hZe=class extends Ffe{lc_namespace=["langchain","storage"];store={};mget(e){return y(this,null,function*(){return e.map(t=>this.store[t])})}mset(e){return y(this,null,function*(){for(let[t,n]of e)this.store[t]=n})}mdelete(e){return y(this,null,function*(){for(let t of e)delete this.store[t]})}yieldKeys(e){return he(this,null,function*(){let t=Object.keys(this.store);for(let n of t)(e===void 0||n.startsWith(e))&&(yield n)})}};var I8={};ae(I8,{BaseRetriever:()=>YE});var YE=class extends dt{callbacks;tags;metadata;verbose;constructor(e){super(e),this.callbacks=e?.callbacks,this.tags=e?.tags??[],this.metadata=e?.metadata??{},this.verbose=e?.verbose??!1}_getRelevantDocuments(e,t){throw new Error("Not implemented!")}invoke(e,t){return y(this,null,function*(){let n=wn(rh(t)),i=yield(yield wi.configure(n.callbacks,this.callbacks,n.tags,this.tags,n.metadata,this.metadata,{verbose:this.verbose}))?.handleRetrieverStart(this.toJSON(),e,n.runId,void 0,void 0,void 0,n.runName);try{let o=yield this._getRelevantDocuments(e,i);return yield i?.handleRetrieverEnd(o),o}catch(o){throw yield i?.handleRetrieverError(o),o}})}};var S8={};ae(S8,{SaveableVectorStore:()=>gZe,VectorStore:()=>J1,VectorStoreRetriever:()=>K1});var K1=class extends YE{static lc_name(){return"VectorStoreRetriever"}get lc_namespace(){return["langchain_core","vectorstores"]}vectorStore;k=4;searchType="similarity";searchKwargs;filter;_vectorstoreType(){return this.vectorStore._vectorstoreType()}constructor(e){super(e),this.vectorStore=e.vectorStore,this.k=e.k??this.k,this.searchType=e.searchType??this.searchType,this.filter=e.filter,e.searchType==="mmr"&&(this.searchKwargs=e.searchKwargs)}_getRelevantDocuments(e,t){return y(this,null,function*(){if(this.searchType==="mmr"){if(typeof this.vectorStore.maxMarginalRelevanceSearch!="function")throw new Error(`The vector store backing this retriever, ${this._vectorstoreType()} does not support max marginal relevance search.`);return this.vectorStore.maxMarginalRelevanceSearch(e,m({k:this.k,filter:this.filter},this.searchKwargs),t?.getChild("vectorstore"))}return this.vectorStore.similaritySearch(e,this.k,this.filter,t?.getChild("vectorstore"))})}addDocuments(e,t){return y(this,null,function*(){return this.vectorStore.addDocuments(e,t)})}},J1=class extends vi{lc_namespace=["langchain","vectorstores",this._vectorstoreType()];embeddings;constructor(e,t){super(t),this.embeddings=e}delete(e){return y(this,null,function*(){throw new Error("Not implemented.")})}similaritySearch(e,t=4,n=void 0,r=void 0){return y(this,null,function*(){return(yield this.similaritySearchVectorWithScore(yield this.embeddings.embedQuery(e),t,n)).map(o=>o[0])})}similaritySearchWithScore(e,t=4,n=void 0,r=void 0){return y(this,null,function*(){return this.similaritySearchVectorWithScore(yield this.embeddings.embedQuery(e),t,n)})}static fromTexts(e,t,n,r){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}static fromDocuments(e,t,n){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}asRetriever(e,t,n,r,i,o){if(typeof e=="number")return new K1({vectorStore:this,k:e,filter:t,tags:[...r??[],this._vectorstoreType()],metadata:i,verbose:o,callbacks:n});{let s={vectorStore:this,k:e?.k,filter:e?.filter,tags:[...e?.tags??[],this._vectorstoreType()],metadata:e?.metadata,verbose:e?.verbose,callbacks:e?.callbacks,searchType:e?.searchType};return e?.searchType==="mmr"?new K1(b(m({},s),{searchKwargs:e.searchKwargs})):new K1(m({},s))}}},gZe=class extends J1{static load(e,t){throw new Error("Not implemented")}};var k8={};ae(k8,{BaseDocumentLoader:()=>T8});var T8=class{};var A8={};ae(A8,{LangSmithLoader:()=>_Ze});var _Ze=class extends T8{datasetId;datasetName;exampleIds;asOf;splits;inlineS3Urls;offset;limit;metadata;filter;contentKey;formatContent;client;constructor(e){if(super(),e.client&&e.clientConfig)throw new Error("client and clientConfig cannot both be provided.");this.client=e.client??new _d(e?.clientConfig),this.contentKey=e.contentKey?e.contentKey.split("."):[],this.formatContent=e.formatContent??yZe,this.datasetId=e.datasetId,this.datasetName=e.datasetName,this.exampleIds=e.exampleIds,this.asOf=e.asOf,this.splits=e.splits,this.inlineS3Urls=e.inlineS3Urls,this.offset=e.offset,this.limit=e.limit,this.metadata=e.metadata,this.filter=e.filter}load(){return y(this,null,function*(){let e=[];try{for(var t=ue(this.client.listExamples({datasetId:this.datasetId,datasetName:this.datasetName,exampleIds:this.exampleIds,asOf:this.asOf,splits:this.splits,inlineS3Urls:this.inlineS3Urls,offset:this.offset,limit:this.limit,metadata:this.metadata,filter:this.filter})),n,r,i;n=!(r=yield t.next()).done;n=!1){let o=r.value;let s=o.inputs;for(let u of this.contentKey)s=s[u];let a=this.formatContent(s),c=o;["created_at","modified_at"].forEach(u=>{u in c&&typeof c[u]=="object"&&(c[u]=c[u].toString())}),e.push({pageContent:a,metadata:c})}}catch{i=[r]}finally{try{n&&(r=t.return)&&(yield r.call(t))}finally{if(i)throw i[0]}}return e})}};function yZe(e){if(typeof e=="string")return e;try{return JSON.stringify(e,null,2)}catch{return String(e)}}var Pa=class{pageContent;metadata;id;constructor(e){this.pageContent=e.pageContent!==void 0?e.pageContent.toString():"",this.metadata=e.metadata??{},this.id=e.id}};var O8=class extends dt{lc_namespace=["langchain_core","documents","transformers"];invoke(e,t){return this.transformDocuments(e)}},jfe=class extends O8{transformDocuments(e){return y(this,null,function*(){let t=[];for(let n of e){let r=yield this._transformDocument(n);t.push(r)}return t})}};var M8={};ae(M8,{BaseDocumentTransformer:()=>O8,Document:()=>Pa,MappingDocumentTransformer:()=>jfe});var Yv=class extends vi{lc_namespace=["langchain_core","example_selectors","base"]};var D8=class{getPromptAsync(e,t){return y(this,null,function*(){return this.getPrompt(e).partial(t?.partialVariables??{})})}},zfe=class extends D8{defaultPrompt;conditionals;constructor(e,t=[]){super(),this.defaultPrompt=e,this.conditionals=t}getPrompt(e){for(let[t,n]of this.conditionals)if(t(e))return n;return this.defaultPrompt}};function Bfe(e){return e._modelType()==="base_llm"}function Ufe(e){return e._modelType()==="base_chat_model"}function Vfe(e){return e.split(/\n| /).length}var Hfe=class Zfe extends Yv{examples=[];examplePrompt;getTextLength=Vfe;maxLength=2048;exampleTextLengths=[];constructor(t){super(t),this.examplePrompt=t.examplePrompt,this.maxLength=t.maxLength??2048,this.getTextLength=t.getTextLength??Vfe}addExample(t){return y(this,null,function*(){this.examples.push(t);let n=yield this.examplePrompt.format(t);this.exampleTextLengths.push(this.getTextLength(n))})}calculateExampleTextLengths(t,n){return y(this,null,function*(){if(t.length>0)return t;let{examples:r,examplePrompt:i}=n;return(yield Promise.all(r.map(s=>i.format(s)))).map(s=>this.getTextLength(s))})}selectExamples(t){return y(this,null,function*(){let n=Object.values(t).join(" "),r=this.maxLength-this.getTextLength(n),i=0,o=[];for(;r>0&&i<this.examples.length;){let s=r-this.exampleTextLengths[i];if(s<0)break;o.push(this.examples[i]),r=s,i+=1}return o})}static fromExamples(t,n){return y(this,null,function*(){let r=new Zfe(n);return yield Promise.all(t.map(i=>r.addExample(i))),r})}};function P8(e){return Object.keys(e).sort().map(t=>e[t])}var qfe=class Gfe extends Yv{vectorStoreRetriever;exampleKeys;inputKeys;constructor(t){if(super(t),this.exampleKeys=t.exampleKeys,this.inputKeys=t.inputKeys,t.vectorStore!==void 0)this.vectorStoreRetriever=t.vectorStore.asRetriever({k:t.k??4,filter:t.filter});else if(t.vectorStoreRetriever)this.vectorStoreRetriever=t.vectorStoreRetriever;else throw new Error('You must specify one of "vectorStore" and "vectorStoreRetriever".')}addExample(t){return y(this,null,function*(){let n=this.inputKeys??Object.keys(t),r=P8(n.reduce((i,o)=>b(m({},i),{[o]:t[o]}),{})).join(" ");yield this.vectorStoreRetriever.addDocuments([new Pa({pageContent:r,metadata:t})])})}selectExamples(t){return y(this,null,function*(){let n=this.inputKeys??Object.keys(t),r=P8(n.reduce((s,a)=>b(m({},s),{[a]:t[a]}),{})).join(" "),o=(yield this.vectorStoreRetriever.invoke(r)).map(s=>s.metadata);return this.exampleKeys?o.map(s=>this.exampleKeys.reduce((a,c)=>b(m({},a),{[c]:s[c]}),{})):o})}static fromExamples(o,s,a){return y(this,arguments,function*(t,n,r,i={}){let c=i.inputKeys??null,u=t.map(f=>P8(c?c.reduce((g,h)=>b(m({},g),{[h]:f[h]}),{}):f).join(" ")),d=yield r.fromTexts(u,t,n,i);return new Gfe({vectorStore:d,k:i.k??4,exampleKeys:i.exampleKeys,inputKeys:i.inputKeys})})}};var R8={};ae(R8,{BaseExampleSelector:()=>Yv,BasePromptSelector:()=>D8,ConditionalPromptSelector:()=>zfe,LengthBasedExampleSelector:()=>Hfe,SemanticSimilarityExampleSelector:()=>qfe,isChatModel:()=>Ufe,isLLM:()=>Bfe});var QE="10f90ea3-90a4-4962-bf75-83a0f3c1c62a",Wfe=class extends vi{lc_namespace=["langchain","recordmanagers"]};var N8=class{uid;hash_;contentHash;metadataHash;pageContent;metadata;keyEncoder=Zv;constructor(e){this.uid=e.uid,this.pageContent=e.pageContent,this.metadata=e.metadata}makeDefaultKeyEncoder(e){this.keyEncoder=e}calculateHashes(){let e=["hash_","content_hash","metadata_hash"];for(let n of e)if(n in this.metadata)throw new Error(`Metadata cannot contain key ${n} as it is reserved for internal use. Restricted keys: [${e.join(", ")}]`);let t=this._hashStringToUUID(this.pageContent);try{let n=this._hashNestedDictToUUID(this.metadata);this.contentHash=t,this.metadataHash=n}catch(n){throw new Error(`Failed to hash metadata: ${n}. Please use a dict that can be serialized using json.`)}this.hash_=this._hashStringToUUID(this.contentHash+this.metadataHash),this.uid||(this.uid=this.hash_)}toDocument(){return new Pa({pageContent:this.pageContent,metadata:this.metadata})}static fromDocument(e,t){let n=new this({pageContent:e.pageContent,metadata:e.metadata,uid:t||e.uid});return n.calculateHashes(),n}_hashStringToUUID(e){let t=this.keyEncoder(e);return rc(t,QE)}_hashNestedDictToUUID(e){let t=JSON.stringify(e,Object.keys(e).sort()),n=this.keyEncoder(t);return rc(n,QE)}};function $8(e,t){let n=[],r=[];return t.forEach(i=>{r.push(i),r.length>=e&&(n.push(r),r=[])}),r.length>0&&n.push(r),n}function L8(e){let t=new Set,n=[];for(let r of e){if(!r.hash_)throw new Error("Hashed document does not have a hash");t.has(r.hash_)||(t.add(r.hash_),n.push(r))}return n}function F8(e){if(e===null)return t=>null;if(typeof e=="string")return t=>t.metadata[e];if(typeof e=="function")return e;throw new Error(`sourceIdKey should be null, a string or a function, got ${typeof e}`)}var j8=e=>"load"in e&&typeof e.load=="function"&&"loadAndSplit"in e&&typeof e.loadAndSplit=="function";function Kfe(e){return y(this,null,function*(){let{docsSource:t,recordManager:n,vectorStore:r,options:i}=e,{batchSize:o=100,cleanup:s,sourceIdKey:a,cleanupBatchSize:c=1e3,forceUpdate:u=!1}=i??{};if(s==="incremental"&&!a)throw new Error("sourceIdKey is required when cleanup mode is incremental. Please provide through 'options.sourceIdKey'.");let d=j8(t)?yield t.load():t,f=F8(a??null),g=yield n.getTime(),h=0,v=0,x=0,E=0,C=$8(o??100,d);for(let S of C){let A=L8(S.map(xe=>N8.fromDocument(xe))),P=A.map(xe=>f(xe));s==="incremental"&&A.forEach((xe,Ge)=>{if(P[Ge]===null)throw new Error("sourceIdKey must be provided when cleanup is incremental")});let F=yield n.exists(A.map(xe=>xe.uid)),B=[],ee=[],D=[],pe=new Set;if(A.forEach((xe,Ge)=>{if(F[Ge])if(u)pe.add(xe.uid);else{D.push(xe.uid);return}B.push(xe.uid),ee.push(xe.toDocument())}),D.length>0&&(yield n.update(D,{timeAtLeast:g}),E+=D.length),ee.length>0&&(yield r.addDocuments(ee,{ids:B}),h+=ee.length-pe.size,x+=pe.size),yield n.update(A.map(xe=>xe.uid),{timeAtLeast:g,groupIds:P}),s==="incremental"){P.forEach(Ge=>{if(!Ge)throw new Error("Source id cannot be null")});let xe=yield n.listKeys({before:g,groupIds:P});xe.length>0&&(yield r.delete({ids:xe}),yield n.deleteKeys(xe),v+=xe.length)}}if(s==="full"){let S=yield n.listKeys({before:g,limit:c});for(;S.length>0;)yield r.delete({ids:S}),yield n.deleteKeys(S),v+=S.length,S=yield n.listKeys({before:g,limit:c})}return{numAdded:h,numDeleted:v,numUpdated:x,numSkipped:E}})}var z8={};ae(z8,{RecordManager:()=>Wfe,UUIDV5_NAMESPACE:()=>QE,_HashedDocument:()=>N8,_batch:()=>$8,_deduplicateInOrder:()=>L8,_getSourceIdAssigner:()=>F8,_isBaseDocumentLoader:()=>j8,index:()=>Kfe});var Jfe={};var B8={};ae(B8,{BaseDocumentCompressor:()=>vZe});var vZe=class{static isBaseDocumentCompressor(e){return e?.compressDocuments!==void 0}};var Yfe={};var U8={};ae(U8,{RunCollectorCallbackHandler:()=>bZe});var bZe=class extends ko{name="run_collector";exampleId;tracedRuns;constructor({exampleId:e}={}){super({_awaitHandler:!0}),this.exampleId=e,this.tracedRuns=[]}persistRun(e){return y(this,null,function*(){let t=m({},e);t.reference_example_id=this.exampleId,this.tracedRuns.push(t)})}};var V8=class extends Gy{static lc_name(){return"OutputFunctionsParser"}lc_namespace=["langchain","output_parsers","openai_functions"];lc_serializable=!0;argsOnly=!0;constructor(e){super(),this.argsOnly=e?.argsOnly??this.argsOnly}parseResult(e){return y(this,null,function*(){if("message"in e[0]){let n=e[0].message.additional_kwargs.function_call;if(!n)throw new Error(`No function_call in message ${JSON.stringify(e)}`);if(!n.arguments)throw new Error(`No arguments in function_call ${JSON.stringify(e)}`);return this.argsOnly?n.arguments:JSON.stringify(n)}else throw new Error(`No message in generations ${JSON.stringify(e)}`)})}},H8=class extends Xl{static lc_name(){return"JsonOutputFunctionsParser"}lc_namespace=["langchain","output_parsers","openai_functions"];lc_serializable=!0;outputParser;argsOnly=!0;constructor(e){super(e),this.argsOnly=e?.argsOnly??this.argsOnly,this.outputParser=new V8(e)}_diff(e,t){return t?nm(e??{},t):void 0}parsePartialResult(e){return y(this,null,function*(){let t=e[0];if(!t.message)return;let{message:n}=t,r=n.additional_kwargs.function_call;if(r)return this.argsOnly?Zl(r.arguments):b(m({},r),{arguments:Zl(r.arguments)})})}parseResult(e){return y(this,null,function*(){let t=yield this.outputParser.parseResult(e);if(!t)throw new Error(`No result from "OutputFunctionsParser" ${JSON.stringify(e)}`);return this.parse(t)})}parse(e){return y(this,null,function*(){let t=JSON.parse(e);return this.argsOnly||(t.arguments=JSON.parse(t.arguments)),t})}getFormatInstructions(){return""}},Qfe=class extends Gy{static lc_name(){return"JsonKeyOutputFunctionsParser"}lc_namespace=["langchain","output_parsers","openai_functions"];lc_serializable=!0;outputParser=new H8;attrName;get lc_aliases(){return{attrName:"key_name"}}constructor(e){super(e),this.attrName=e.attrName}parseResult(e){return y(this,null,function*(){return(yield this.outputParser.parseResult(e))[this.attrName]})}};var Z8={};ae(Z8,{JsonKeyOutputFunctionsParser:()=>Qfe,JsonOutputFunctionsParser:()=>H8,OutputFunctionsParser:()=>V8});var el={and:"and",or:"or",not:"not"},Tn={eq:"eq",ne:"ne",lt:"lt",gt:"gt",lte:"lte",gte:"gte"},Y1=class{},Q1=class{accept(e){if(this.exprName==="Operation")return e.visitOperation(this);if(this.exprName==="Comparison")return e.visitComparison(this);if(this.exprName==="StructuredQuery")return e.visitStructuredQuery(this);throw new Error("Unknown Expression type")}},X1=class extends Q1{},Xfe=class extends X1{exprName="Comparison";constructor(e,t,n){super(),this.comparator=e,this.attribute=t,this.value=n}},ehe=class extends X1{exprName="Operation";constructor(e,t){super(),this.operator=e,this.args=t}},the=class extends Q1{exprName="StructuredQuery";constructor(e,t){super(),this.query=e,this.filter=t}};function q8(e){return e&&typeof e=="object"&&!Array.isArray(e)}function sa(e){return e?typeof e=="string"&&e.length>0||typeof e=="function"?!1:q8(e)&&Object.keys(e).length===0:!0}function G8(e){if(typeof e=="number")return e%1===0;if(typeof e=="string"){let t=parseInt(e,10);return!Number.isNaN(t)&&t%1===0&&t.toString()===e}return!1}function W8(e){if(typeof e=="number")return e%1!==0;if(typeof e=="string"){let t=parseFloat(e);return!Number.isNaN(t)&&t%1!==0&&t.toString()===e}return!1}function K8(e){return typeof e=="string"&&(Number.isNaN(parseFloat(e))||parseFloat(e).toString()!==e)}function J8(e){return typeof e=="boolean"}function Qv(e){let t;if(K8(e))t=e;else if(G8(e))t=parseInt(e,10);else if(W8(e))t=parseFloat(e);else if(J8(e))t=!!e;else throw new Error("Unsupported value type");return t}var XE=class extends Y1{},nhe=class extends XE{allowedOperators;allowedComparators;constructor(e){super(),this.allowedOperators=e?.allowedOperators??[el.and,el.or],this.allowedComparators=e?.allowedComparators??[Tn.eq,Tn.ne,Tn.gt,Tn.gte,Tn.lt,Tn.lte]}formatFunction(e){if(e in Tn){if(this.allowedComparators.length>0&&this.allowedComparators.indexOf(e)===-1)throw new Error(`Comparator ${e} not allowed. Allowed comparators: ${this.allowedComparators.join(", ")}`)}else if(e in el){if(this.allowedOperators.length>0&&this.allowedOperators.indexOf(e)===-1)throw new Error(`Operator ${e} not allowed. Allowed operators: ${this.allowedOperators.join(", ")}`)}else throw new Error("Unknown comparator or operator");return`$${e}`}visitOperation(e){let t=e.args?.map(n=>n.accept(this));return{[this.formatFunction(e.operator)]:t}}visitComparison(e){return{[e.attribute]:{[this.formatFunction(e.comparator)]:Qv(e.value)}}}visitStructuredQuery(e){let t={};return e.filter&&(t={filter:e.filter.accept(this)}),t}mergeFilters(e,t,n="and",r=!1){if(!(sa(e)&&sa(t))){if(sa(e)||n==="replace")return sa(t)?void 0:t;if(sa(t))return r?e:n==="and"?void 0:e;if(n==="and")return{$and:[e,t]};if(n==="or")return{$or:[e,t]};throw new Error("Unknown merge type")}}};var rhe=class extends XE{allowedOperators=[el.and,el.or];allowedComparators=[Tn.eq,Tn.ne,Tn.gt,Tn.gte,Tn.lt,Tn.lte];formatFunction(){throw new Error("Not implemented")}getAllowedComparatorsForType(e){switch(e){case"string":return[Tn.eq,Tn.ne,Tn.gt,Tn.gte,Tn.lt,Tn.lte];case"number":return[Tn.eq,Tn.ne,Tn.gt,Tn.gte,Tn.lt,Tn.lte];case"boolean":return[Tn.eq,Tn.ne];default:throw new Error(`Unsupported data type: ${e}`)}}getComparatorFunction(e){switch(e){case Tn.eq:return(t,n)=>t===n;case Tn.ne:return(t,n)=>t!==n;case Tn.gt:return(t,n)=>t>n;case Tn.gte:return(t,n)=>t>=n;case Tn.lt:return(t,n)=>t<n;case Tn.lte:return(t,n)=>t<=n;default:throw new Error("Unknown comparator")}}getOperatorFunction(e){switch(e){case el.and:return(t,n)=>t&&n;case el.or:return(t,n)=>t||n;default:throw new Error("Unknown operator")}}visitOperation(e){let{operator:t,args:n}=e;if(this.allowedOperators.includes(t)){let r=this.getOperatorFunction(t);return i=>n?n.reduce((o,s)=>{let a=s.accept(this);if(typeof a=="function")return r(o,a(i));throw new Error("Filter is not a function")},!0):!0}else throw new Error("Operator not allowed")}visitComparison(e){let{comparator:t,attribute:n,value:r}=e,i=[Tn.ne];if(this.allowedComparators.includes(t)){if(!this.getAllowedComparatorsForType(typeof r).includes(t))throw new Error(`'${t}' comparator not allowed to be used with ${typeof r}`);let o=this.getComparatorFunction(t);return s=>{let a=s.metadata[n];return a===void 0?!!i.includes(t):o(a,Qv(r))}}else throw new Error("Comparator not allowed")}visitStructuredQuery(e){if(!e.filter)return{};let t=e.filter?.accept(this);if(typeof t!="function")throw new Error("Structured query filter is not a function");return{filter:t}}mergeFilters(e,t,n="and"){if(!(sa(e)&&sa(t))){if(sa(e)||n==="replace")return sa(t)?void 0:t;if(sa(t))return n==="and"?void 0:e;if(n==="and")return r=>e(r)&&t(r);if(n==="or")return r=>e(r)||t(r);throw new Error("Unknown merge type")}}};var Y8={};ae(Y8,{BaseTranslator:()=>XE,BasicTranslator:()=>nhe,Comparators:()=>Tn,Comparison:()=>Xfe,Expression:()=>Q1,FilterDirective:()=>X1,FunctionalTranslator:()=>rhe,Operation:()=>ehe,Operators:()=>el,StructuredQuery:()=>the,Visitor:()=>Y1,castValue:()=>Qv,isBoolean:()=>J8,isFilterEmpty:()=>sa,isFloat:()=>W8,isInt:()=>G8,isObject:()=>q8,isString:()=>K8});var ihe=class extends gm{_combineLLMOutput(){return[]}_llmType(){return"fake"}_generate(e,t,n){return y(this,null,function*(){if(t?.stop?.length)return{generations:[{message:new Sn(t.stop[0]),text:t.stop[0]}]};let r=e.map(i=>typeof i.content=="string"?i.content:JSON.stringify(i.content,null,2)).join(`
`);return yield n?.handleLLMNewToken(r),{generations:[{message:new Sn(r),text:r}],llmOutput:{}}})}},ohe=class she extends gm{sleep=50;responses=[];chunks=[];toolStyle="openai";thrownErrorString;tools=[];constructor(a){var c=a,{sleep:t=50,responses:n=[],chunks:r=[],toolStyle:i="openai",thrownErrorString:o}=c,s=se(c,["sleep","responses","chunks","toolStyle","thrownErrorString"]);super(s),this.sleep=t,this.responses=n,this.chunks=r,this.toolStyle=i,this.thrownErrorString=o}_llmType(){return"fake"}bindTools(t){let n=[...this.tools,...t],r=n.map(s=>{switch(this.toolStyle){case"openai":return{type:"function",function:{name:s.name,description:s.description,parameters:$i(s.schema)}};case"anthropic":return{name:s.name,description:s.description,input_schema:$i(s.schema)};case"bedrock":return{toolSpec:{name:s.name,description:s.description,inputSchema:$i(s.schema)}};case"google":return{name:s.name,description:s.description,parameters:$i(s.schema)};default:throw new Error(`Unsupported tool style: ${this.toolStyle}`)}}),i=this.toolStyle==="google"?[{functionDeclarations:r}]:r,o=new she({sleep:this.sleep,responses:this.responses,chunks:this.chunks,toolStyle:this.toolStyle,thrownErrorString:this.thrownErrorString});return o.tools=n,o.withConfig({tools:i})}_generate(t,n,r){return y(this,null,function*(){if(this.thrownErrorString)throw new Error(this.thrownErrorString);let i=this.responses?.[0]?.content??t[0].content??"";return{generations:[{text:"",message:new Sn({content:i,tool_calls:this.chunks?.[0]?.tool_calls})}]}})}_streamResponseChunks(t,n,r){return he(this,null,function*(){if(this.thrownErrorString)throw new Error(this.thrownErrorString);if(this.chunks?.length){for(let s of this.chunks){let a=new Ca({message:new Cr({content:s.content,tool_calls:s.tool_calls,additional_kwargs:s.additional_kwargs??{}}),text:s.content?.toString()??""});yield a,yield new z(r?.handleLLMNewToken(s.content,void 0,void 0,void 0,void 0,{chunk:a}))}return}let i=this.responses?.[0]??new Sn(typeof t[0].content=="string"?t[0].content:""),o=typeof i.content=="string"?i.content:"";for(let s of o){yield new z(new Promise(c=>setTimeout(c,this.sleep)));let a=new Ca({message:new Cr({content:s}),text:s});yield a,yield new z(r?.handleLLMNewToken(s,void 0,void 0,void 0,void 0,{chunk:a}))}})}},ahe=class extends gm{static lc_name(){return"FakeListChatModel"}lc_serializable=!0;responses;i=0;sleep;emitCustomEvent=!1;constructor(e){super(e);let{responses:t,sleep:n,emitCustomEvent:r}=e;this.responses=t,this.sleep=n,this.emitCustomEvent=r??this.emitCustomEvent}_combineLLMOutput(){return[]}_llmType(){return"fake-list"}_generate(e,t,n){return y(this,null,function*(){if(yield this._sleepIfRequested(),t?.thrownErrorString)throw new Error(t.thrownErrorString);if(this.emitCustomEvent&&(yield n?.handleCustomEvent("some_test_event",{someval:!0})),t?.stop?.length)return{generations:[this._formatGeneration(t.stop[0])]};{let r=this._currentResponse();return this._incrementResponse(),{generations:[this._formatGeneration(r)],llmOutput:{}}}})}_formatGeneration(e){return{message:new Sn(e),text:e}}_streamResponseChunks(e,t,n){return he(this,null,function*(){let r=this._currentResponse();this._incrementResponse(),this.emitCustomEvent&&(yield new z(n?.handleCustomEvent("some_test_event",{someval:!0})));try{for(var i=ue(r),o,s,a;o=!(s=yield new z(i.next())).done;o=!1){let c=s.value;if(yield new z(this._sleepIfRequested()),t?.thrownErrorString)throw new Error(t.thrownErrorString);yield this._createResponseChunk(c),n?.handleLLMNewToken(c)}}catch{a=[s]}finally{try{o&&(s=i.return)&&(yield new z(s.call(i)))}finally{if(a)throw a[0]}}})}_sleepIfRequested(){return y(this,null,function*(){this.sleep!==void 0&&(yield this._sleep())})}_sleep(){return y(this,null,function*(){return new Promise(e=>{setTimeout(()=>e(),this.sleep)})})}_createResponseChunk(e){return new Ca({message:new Cr({content:e}),text:e})}_currentResponse(){return this.responses[this.i]}_incrementResponse(){this.i<this.responses.length-1?this.i+=1:this.i=0}withStructuredOutput(e,t){return Ir.from(n=>y(this,null,function*(){let r=yield this.invoke(n);if(r.tool_calls?.[0]?.args)return r.tool_calls[0].args;if(typeof r.content=="string")return JSON.parse(r.content);throw new Error("No structured output found")}))}};var che=class extends VE{vectorSize;constructor(e){super(e??{}),this.vectorSize=e?.vectorSize??4}embedDocuments(e){return y(this,null,function*(){return Promise.all(e.map(t=>this.embedQuery(t)))})}embedQuery(e){return y(this,null,function*(){let t=e;t=t.toLowerCase().replaceAll(/[^a-z ]/g,"");let n=t.length%this.vectorSize,r=n===0?0:this.vectorSize-n,i=t.length+r;t=t.padEnd(i," ");let o=t.length/this.vectorSize,s=[];for(let c=0;c<t.length;c+=o)s.push(t.slice(c,c+o));return s.map(c=>{let u=0;for(let f=0;f<c.length;f+=1)u+=c===" "?0:c.charCodeAt(f);return u%26/26})})}},lhe=class extends VE{constructor(e){super(e??{})}embedDocuments(e){return Promise.resolve(e.map(()=>[.1,.2,.3,.4]))}embedQuery(e){return Promise.resolve([.1,.2,.3,.4])}};var uhe=class extends B1{response;thrownErrorString;constructor(e){super(e),this.response=e.response,this.thrownErrorString=e.thrownErrorString}_llmType(){return"fake"}_call(e,t,n){return y(this,null,function*(){if(this.thrownErrorString)throw new Error(this.thrownErrorString);let r=this.response??e;return yield n?.handleLLMNewToken(r),r})}},dhe=class extends B1{sleep=50;responses;thrownErrorString;constructor(e){super(e),this.sleep=e.sleep??this.sleep,this.responses=e.responses,this.thrownErrorString=e.thrownErrorString}_llmType(){return"fake"}_call(e){return y(this,null,function*(){if(this.thrownErrorString)throw new Error(this.thrownErrorString);let t=this.responses?.[0];return this.responses=this.responses?.slice(1),t??e})}_streamResponseChunks(e,t,n){return he(this,null,function*(){if(this.thrownErrorString)throw new Error(this.thrownErrorString);let r=this.responses?.[0];this.responses=this.responses?.slice(1);for(let i of r??e)yield new z(new Promise(o=>setTimeout(o,this.sleep))),yield{text:i,generationInfo:{}},yield new z(n?.handleLLMNewToken(i))})}};var phe=class extends x8{lc_namespace=["langchain_core","message","fake"];messages=[];constructor(){super()}getMessages(){return y(this,null,function*(){return this.messages})}addMessage(e){return y(this,null,function*(){this.messages.push(e)})}addUserMessage(e){return y(this,null,function*(){this.messages.push(new Pi(e))})}addAIMessage(e){return y(this,null,function*(){this.messages.push(new Sn(e))})}clear(){return y(this,null,function*(){this.messages=[]})}},mhe=class extends W1{lc_namespace=["langchain_core","message","fake"];messages=[];constructor(){super()}addMessage(e){return y(this,null,function*(){this.messages.push(e)})}getMessages(){return y(this,null,function*(){return this.messages})}},fhe=class extends ko{name="fake_tracer";runs=[];constructor(){super()}persistRun(e){return this.runs.push(e),Promise.resolve()}};var hhe=class extends wd{lc_namespace=["tests","fake"];getFormatInstructions(){return""}parse(e){return y(this,null,function*(){return e.split(",").map(t=>t.trim())})}};var ghe=class extends YE{lc_namespace=["test","fake"];output=[new Pa({pageContent:"foo"}),new Pa({pageContent:"bar"})];constructor(e){super(),this.output=e?.output??this.output}_getRelevantDocuments(e){return y(this,null,function*(){return this.output})}};var _he=class extends dt{lc_namespace=["tests","fake"];returnOptions;constructor(e){super(e),this.returnOptions=e.returnOptions}invoke(e,t){return y(this,null,function*(){return this.returnOptions?t??{}:{input:e}})}};var yhe=class extends HE{name;description;schema;constructor(e){super(e),this.name=e.name,this.description=e.description,this.schema=e.schema}_call(e,t){return y(this,null,function*(){return JSON.stringify(e)})}};var vhe=class extends ko{runPromiseResolver;runPromise;name="single_run_extractor";constructor(){super(),this.runPromise=new Promise(e=>{this.runPromiseResolver=e})}persistRun(e){return y(this,null,function*(){this.runPromiseResolver(e)})}extract(){return y(this,null,function*(){return this.runPromise})}};function eN(e,t){let n=0,r=0,i=0;for(let o=0;o<e.length;o++)n+=e[o]*t[o],r+=e[o]*e[o],i+=t[o]*t[o];return n/(Math.sqrt(r)*Math.sqrt(i))}var bhe=class whe extends J1{memoryVectors=[];similarity;_vectorstoreType(){return"memory"}constructor(t,i={}){var o=i,{similarity:n}=o,r=se(o,["similarity"]);super(t,r),this.similarity=n??eN}addDocuments(t){return y(this,null,function*(){let n=t.map(({pageContent:r})=>r);return this.addVectors(yield this.embeddings.embedDocuments(n),t)})}addVectors(t,n){return y(this,null,function*(){let r=t.map((i,o)=>({content:n[o].pageContent,embedding:i,metadata:n[o].metadata}));this.memoryVectors=this.memoryVectors.concat(r)})}similaritySearchVectorWithScore(t,n,r){return y(this,null,function*(){let i=c=>{if(!r)return!0;let u=new Pa({metadata:c.metadata,pageContent:c.content});return r(u)},o=this.memoryVectors.filter(i);return o.map((c,u)=>({similarity:this.similarity(t,c.embedding),index:u})).sort((c,u)=>c.similarity>u.similarity?-1:0).slice(0,n).map(c=>[new Pa({metadata:o[c.index].metadata,pageContent:o[c.index].content}),c.similarity])})}static fromTexts(t,n,r,i){return y(this,null,function*(){let o=[];for(let s=0;s<t.length;s+=1){let a=Array.isArray(n)?n[s]:n,c=new Pa({pageContent:t[s],metadata:a});o.push(c)}return whe.fromDocuments(o,r,i)})}static fromDocuments(t,n,r){return y(this,null,function*(){let i=new this(n,r);return yield i.addDocuments(t),i})}static fromExistingIndex(t,n){return y(this,null,function*(){return new this(t,n)})}};var Q8={};ae(Q8,{FakeChatMessageHistory:()=>phe,FakeChatModel:()=>ihe,FakeEmbeddings:()=>lhe,FakeLLM:()=>uhe,FakeListChatMessageHistory:()=>mhe,FakeListChatModel:()=>ahe,FakeRetriever:()=>ghe,FakeRunnable:()=>_he,FakeSplitIntoListParser:()=>hhe,FakeStreamingChatModel:()=>ohe,FakeStreamingLLM:()=>dhe,FakeTool:()=>yhe,FakeTracer:()=>fhe,FakeVectorStore:()=>bhe,SingleRunExtractor:()=>vhe,SyntheticEmbeddings:()=>che});var eq={};ae(eq,{EventStreamContentType:()=>wZe,convertEventStreamToIterableReadableDataStream:()=>CZe,getBytes:()=>xhe,getLines:()=>Che,getMessages:()=>Ehe});var wZe="text/event-stream";function xhe(e,t){return y(this,null,function*(){if(e instanceof ReadableStream){let s=e.getReader();for(;;){let a=yield s.read();if(a.done){t(new Uint8Array,!0);break}t(a.value)}}else try{try{for(var n=ue(e),r,i,o;r=!(i=yield n.next()).done;r=!1){let s=i.value;t(new Uint8Array(s))}}catch{o=[i]}finally{try{r&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o[0]}}t(new Uint8Array,!0)}catch(s){throw new Error(["Parsing event source stream failed.","Ensure your implementation of fetch returns a web or Node readable stream.",`Error: ${s.message}`].join(`
`))}})}var Xv=(function(e){return e[e.NewLine=10]="NewLine",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.Colon=58]="Colon",e})(Xv||{});function Che(e){let t,n,r,i=!1;return function(s,a){if(a){e(s,0,!0);return}t===void 0?(t=s,n=0,r=-1):t=xZe(t,s);let c=t.length,u=0;for(;n<c;){i&&(t[n]===Xv.NewLine&&(u=++n),i=!1);let d=-1;for(;n<c&&d===-1;++n)switch(t[n]){case Xv.Colon:r===-1&&(r=n-u);break;case Xv.CarriageReturn:i=!0;case Xv.NewLine:d=n;break}if(d===-1)break;e(t.subarray(u,d),r),u=n,r=-1}u===c?t=void 0:u!==0&&(t=t.subarray(u),n-=u)}}function Ehe(e,t,n){let r=X8(),i=new TextDecoder;return function(s,a,c){if(c){EZe(r)||(e?.(r),r=X8());return}if(s.length===0)e?.(r),r=X8();else if(a>0){let u=i.decode(s.subarray(0,a)),d=a+(s[a+1]===Xv.Space?2:1),f=i.decode(s.subarray(d));switch(u){case"data":r.data=r.data?r.data+`
`+f:f;break;case"event":r.event=f;break;case"id":t?.(r.id=f);break;case"retry":{let g=parseInt(f,10);Number.isNaN(g)||n?.(r.retry=g);break}}}}}function xZe(e,t){let n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function X8(){return{data:"",event:"",id:"",retry:void 0}}function CZe(e,t){let n=new ReadableStream({start(i){return y(this,null,function*(){let o=Ehe(a=>{if(a.event==="error")throw new Error(a.data??"Unspecified event streaming error.");a.event==="metadata"?t?.(a):a.data&&i.enqueue(a.data)});yield xhe(e,Che((a,c,u)=>{o(a,c,u),u&&i.close()}))})}});return Ni.fromReadableStream(n)}function EZe(e){return e.data===""&&e.event===""&&e.id===""&&e.retry===void 0}var Ihe={};function She(e,t){let n=0;for(let r=0;r<e.length;r++)n+=e[r]*t[r];return n}function IZe(e,t){let n=0;for(let r=0;r<e.length;r++)n+=(e[r]-t[r])*(e[r]-t[r]);return n}function khe(e,t){return Math.sqrt(IZe(e,t))}var nq={};ae(nq,{cosineSimilarity:()=>tq,euclideanDistance:()=>TZe,innerProduct:()=>kZe,matrixFunc:()=>tN,maximalMarginalRelevance:()=>AZe,normalize:()=>SZe});function tN(e,t,n){if(e.length===0||e[0].length===0||t.length===0||t[0].length===0)return[[]];if(e[0].length!==t[0].length)throw new Error(`Number of columns in X and Y must be the same. X has shape ${[e.length,e[0].length]} and Y has shape ${[t.length,t[0].length]}.`);return e.map(r=>t.map(i=>n(r,i)).map(i=>Number.isNaN(i)?0:i))}function SZe(e,t=!1){let n=OZe(e);return e.map(r=>r.map(i=>t?1-i/n:i/n))}function tq(e,t){return tN(e,t,eN)}function kZe(e,t){return tN(e,t,She)}function TZe(e,t){return tN(e,t,khe)}function AZe(e,t,n=.5,r=4){if(Math.min(r,t.length)<=0)return[];let i=Array.isArray(e[0])?e:[e],o=tq(i,t)[0],s=The(o).maxIndex,a=[t[s]],c=[s];for(;c.length<Math.min(r,t.length);){let u=-1/0,d=-1,f=tq(t,a);o.forEach((g,h)=>{if(c.includes(h))return;let v=Math.max(...f[h]),x=n*g-(1-n)*v;x>u&&(u=x,d=h)}),a.push(t[d]),c.push(d)}return c}function The(e){if(e.length===0)return{maxIndex:-1,maxValue:NaN};let t=e[0],n=0;for(let r=1;r<e.length;r+=1)e[r]>t&&(n=r,t=e[r]);return{maxIndex:n,maxValue:t}}function OZe(e){return e.reduce((t,n)=>Math.max(t,The(n).maxValue),0)}var rq={};ae(rq,{agents:()=>Nfe,caches:()=>BZ,callbacks__base:()=>N6,callbacks__manager:()=>GH,callbacks__promises:()=>HH,chat_history:()=>w8,document_loaders__base:()=>k8,document_loaders__langsmith:()=>A8,documents:()=>M8,embeddings:()=>s8,example_selectors:()=>R8,index:()=>$fe,indexing:()=>z8,language_models__base:()=>GZ,language_models__chat_models:()=>KZ,language_models__llms:()=>n8,language_models__profile:()=>Jfe,load__serializable:()=>g6,memory:()=>C8,messages:()=>I5,messages__tool:()=>v6,output_parsers:()=>A5,output_parsers__openai_functions:()=>Z8,output_parsers__openai_tools:()=>YZ,outputs:()=>r5,prompt_values:()=>O5,prompts:()=>V5,retrievers:()=>I8,retrievers__document_compressors:()=>B8,runnables:()=>S5,runnables__graph:()=>y5,singletons:()=>KH,stores:()=>E8,structured_query:()=>Y8,tools:()=>a8,tracers__base:()=>$H,tracers__console:()=>FH,tracers__log_stream:()=>t5,tracers__run_collector:()=>U8,tracers__tracer_langchain:()=>VH,types__stream:()=>Yfe,utils__async_caller:()=>s5,utils__chunk_array:()=>i8,utils__env:()=>I6,utils__event_source_parse:()=>eq,utils__format:()=>Ihe,utils__function_calling:()=>MZ,utils__hash:()=>zZ,utils__json_patch:()=>k5,utils__json_schema:()=>_5,utils__math:()=>nq,utils__stream:()=>YH,utils__testing:()=>Q8,utils__tiktoken:()=>qZ,utils__types:()=>RZ,vectorstores:()=>S8});function MZe(e){let t={};for(let n=e;n&&n.prototype;n=Object.getPrototypeOf(n))Object.assign(t,Reflect.get(n.prototype,"lc_aliases"));return Object.entries(t).reduce((n,[r,i])=>(n[i]=r,n),{})}function nN(e){return y(this,null,function*(){let{optionalImportsMap:t={},optionalImportEntrypoints:n=[],importMap:r={},secretsMap:i={},path:o=["$"]}=this,s=o.join(".");if(typeof e=="object"&&e!==null&&!Array.isArray(e)&&"lc"in e&&"type"in e&&"id"in e&&e.lc===1&&e.type==="secret"){let a=e,[c]=a.id;if(c in i)return i[c];{let u=Kr(c);if(u)return u;throw new Error(`Missing key "${c}" for ${s} in load(secretsMap={})`)}}else if(typeof e=="object"&&e!==null&&!Array.isArray(e)&&"lc"in e&&"type"in e&&"id"in e&&e.lc===1&&e.type==="not_implemented"){let c=JSON.stringify(e);throw new Error(`Trying to load an object that doesn't implement serialization: ${s} -> ${c}`)}else if(typeof e=="object"&&e!==null&&!Array.isArray(e)&&"lc"in e&&"type"in e&&"id"in e&&"kwargs"in e&&e.lc===1){let a=e,c=JSON.stringify(a),[u,...d]=a.id.slice().reverse(),f=d.reverse(),g={langchain_core:rq,langchain:r},h=null,v=[f.join("/")];f[0]==="langchain_community"&&v.push(["langchain",...f.slice(1)].join("/"));let x=v.find(S=>S in t);if(Rfe.concat(n).includes(f.join("/"))||x)if(x!==void 0)h=yield t[x];else throw new Error(`Missing key "${f.join("/")}" for ${s} in load(optionalImportsMap={})`);else{let S;if(f[0]==="langchain"||f[0]==="langchain_core")S=g[f[0]],f.shift();else throw new Error(`Invalid namespace: ${s} -> ${c}`);if(f.length===0)throw new Error(`Invalid namespace: ${s} -> ${c}`);let A;do{if(A=f.join("__"),A in S)break;f.pop()}while(f.length>0);A in S&&(h=S[A])}if(typeof h!="object"||h===null)throw new Error(`Invalid namespace: ${s} -> ${c}`);let E=h[u]??Object.values(h).find(S=>typeof S=="function"&&Ay(S)===u);if(typeof E!="function")throw new Error(`Invalid identifer: ${s} -> ${c}`);let C=yield nN.call(b(m({},this),{path:[...o,"kwargs"]}),a.kwargs);if(a.type==="constructor"){let S=new E(JD(C,tse,MZe(E)));return Object.defineProperty(S.constructor,"name",{value:u}),S}else throw new Error(`Invalid type: ${s} -> ${c}`)}else if(typeof e=="object"&&e!==null)return Array.isArray(e)?Promise.all(e.map((a,c)=>nN.call(b(m({},this),{path:[...o,`${c}`]}),a))):Object.fromEntries(yield Promise.all(Object.entries(e).map(u=>y(this,[u],function*([a,c]){return[a,yield nN.call(b(m({},this),{path:[...o,a]}),c)]}))));return e})}function Ahe(e,t){return y(this,null,function*(){let n=JSON.parse(e);return nN.call(m({},t),n)})}function DZe(e){return e!==null&&e.lc===1&&e.type==="constructor"&&Array.isArray(e.id)}function oq(e){return y(this,null,function*(){if(e&&typeof e=="object"){if(Array.isArray(e))return yield Promise.all(e.map(n=>oq(n)));{let t={};for(let[n,r]of Object.entries(e))t[n]=yield oq(r);if(t.lc===2&&t.type==="undefined")return;if(t.lc===2&&t.type==="constructor"&&Array.isArray(t.id))try{let n=t.id[t.id.length-1],r;switch(n){case"Set":r=Set;break;case"Map":r=Map;break;case"RegExp":r=RegExp;break;case"Error":r=Error;break;default:return t}return t.method?r[t.method](...t.args||[]):new r(...t.args||[])}catch{return t}else if(DZe(t))return Ahe(JSON.stringify(t));return t}}return e})}function iq(e,t,n,r){return{lc:2,type:"constructor",id:[e.name],method:t??null,args:n??[],kwargs:r??{}}}function PZe(e){return e===void 0?{lc:2,type:"undefined"}:e instanceof Set||e instanceof Map?iq(e.constructor,void 0,[Array.from(e)]):e instanceof RegExp?iq(RegExp,void 0,[e.source,e.flags]):e instanceof Error?iq(e.constructor,void 0,[e.message]):e?.lg_name==="Send"?{node:e.node,args:e.args}:e}var sq=class{_dumps(e){return new TextEncoder().encode(Pfe(e,(n,r)=>PZe(r)))}dumpsTyped(e){return y(this,null,function*(){return e instanceof Uint8Array?["bytes",e]:["json",this._dumps(e)]})}_loads(e){return y(this,null,function*(){let t=JSON.parse(e);return oq(t)})}loadsTyped(e,t){return y(this,null,function*(){if(e==="bytes")return typeof t=="string"?new TextEncoder().encode(t):t;if(e==="json")return this._loads(typeof t=="string"?t:new TextDecoder().decode(t));throw new Error(`Unknown serialization type: ${e}`)})}};function aq(e){if(typeof e!="object"||e===null)return e;let t=Array.isArray(e)?[]:{};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=aq(e[n]));return t}function eI(){return{v:4,id:JE(-2),ts:new Date().toISOString(),channel_values:{},channel_versions:{},versions_seen:{}}}function $d(e){return{v:e.v,id:e.id,ts:e.ts,channel_values:m({},e.channel_values),channel_versions:m({},e.channel_versions),versions_seen:aq(e.versions_seen)}}function rN(e,t){return typeof e=="number"&&typeof t=="number"?Math.sign(e-t):String(e).localeCompare(String(t))}function iN(...e){return e.reduce((t,n,r)=>r===0?n:rN(t,n)>=0?t:n)}var oN={[g8]:-1,[Fh]:-2,[_8]:-3,[y8]:-4};var eb=class extends Error{constructor(e){super(e),this.name="InvalidNamespaceError"}};function LZe(e){if(e.length===0)throw new eb("Namespace cannot be empty.");for(let t of e){if(typeof t!="string")throw new eb(`Invalid namespace label '${t}' found in ${e}. Namespace labels must be strings, but got ${typeof t}.`);if(t.includes("."))throw new eb(`Invalid namespace label '${t}' found in ${e}. Namespace labels cannot contain periods ('.').`);if(t==="")throw new eb(`Namespace labels cannot be empty strings. Got ${t} in ${e}`)}if(e[0]==="langgraph")throw new eb(`Root label for namespace cannot be "langgraph". Got: ${e}`)}var sN=class{get(e,t){return y(this,null,function*(){return(yield this.batch([{namespace:e,key:t}]))[0]})}search(n){return y(this,arguments,function*(e,t={}){let{filter:r,limit:i=10,offset:o=0,query:s}=t;return(yield this.batch([{namespacePrefix:e,filter:r,limit:i,offset:o,query:s}]))[0]})}put(e,t,n,r){return y(this,null,function*(){LZe(e),yield this.batch([{namespace:e,key:t,value:n,index:r}])})}delete(e,t){return y(this,null,function*(){yield this.batch([{namespace:e,key:t,value:null}])})}listNamespaces(){return y(this,arguments,function*(e={}){let{prefix:t,suffix:n,maxDepth:r,limit:i=100,offset:o=0}=e,s=[];return t&&s.push({matchType:"prefix",path:t}),n&&s.push({matchType:"suffix",path:n}),(yield this.batch([{matchConditions:s.length?s:void 0,maxDepth:r,limit:i,offset:o}]))[0]})}start(){}stop(){}};var FZe=e=>"lg_name"in e&&e.lg_name==="AsyncBatchedStore"?e.store:e,cq=class extends sN{lg_name="AsyncBatchedStore";store;queue=new Map;nextKey=0;running=!1;processingTask=null;constructor(e){super(),this.store=FZe(e)}get isRunning(){return this.running}batch(e){return y(this,null,function*(){throw new Error("The `batch` method is not implemented on `AsyncBatchedStore`.\n Instead, it calls the `batch` method on the wrapped store.\n If you are seeing this error, something is wrong.")})}get(e,t){return y(this,null,function*(){return this.enqueueOperation({namespace:e,key:t})})}search(e,t){return y(this,null,function*(){let{filter:n,limit:r=10,offset:i=0,query:o}=t||{};return this.enqueueOperation({namespacePrefix:e,filter:n,limit:r,offset:i,query:o})})}put(e,t,n){return y(this,null,function*(){return this.enqueueOperation({namespace:e,key:t,value:n})})}delete(e,t){return y(this,null,function*(){return this.enqueueOperation({namespace:e,key:t,value:null})})}start(){this.running||(this.running=!0,this.processingTask=this.processBatchQueue())}stop(){return y(this,null,function*(){this.running=!1,this.processingTask&&(yield this.processingTask)})}enqueueOperation(e){return new Promise((t,n)=>{let r=this.nextKey;this.nextKey+=1,this.queue.set(r,{operation:e,resolve:t,reject:n})})}processBatchQueue(){return y(this,null,function*(){for(;this.running;){if(yield new Promise(t=>{setTimeout(t,0)}),this.queue.size===0)continue;let e=new Map(this.queue);this.queue.clear();try{let t=Array.from(e.values()).map(({operation:r})=>r),n=yield this.store.batch(t);e.forEach(({resolve:r},i)=>{let o=Array.from(e.keys()).indexOf(i);r(n[o])})}catch(t){e.forEach(({reject:n})=>{n(t)})}}})}toJSON(){return{queue:this.queue,nextKey:this.nextKey,running:this.running,store:"[LangGraphStore]"}}};var aN=class{serde=new sq;constructor(e){this.serde=e||this.serde}};function uq(e){return e!=null&&e.lg_is_channel===!0}var mc=class{ValueType;UpdateType;lg_is_channel=!0;consume(){return!1}finish(){return!1}isAvailable(){try{return this.get(),!0}catch(e){if(e.name===Hr.unminifiable_name)return!1;throw e}}},lq=Symbol.for("LG_IS_ONLY_BASE_CHANNEL");function tI(e){if(e[lq]===!0)return e;let t={};for(let n in e){if(!Object.prototype.hasOwnProperty.call(e,n))continue;let r=e[n];uq(r)&&(t[n]=r)}return Object.assign(t,{[lq]:!0}),t}function jh(e,t){let n=tI(e),r={};for(let i in n){if(!Object.prototype.hasOwnProperty.call(n,i))continue;let o=t.channel_values[i];r[i]=n[i].fromCheckpoint(o)}return Object.assign(r,{[lq]:!0}),r}function pu(e,t,n,r){let i;if(t===void 0)i=e.channel_values;else{i={};for(let o in t)if(Object.prototype.hasOwnProperty.call(t,o))try{i[o]=t[o].checkpoint()}catch(s){if(s.name!==Hr.unminifiable_name)throw s}}return{v:4,id:r?.id??JE(n),ts:new Date().toISOString(),channel_values:i,channel_versions:e.channel_versions,versions_seen:e.versions_seen}}var nI=class Ohe extends mc{lc_graph_name="LastValue";value=[];fromCheckpoint(t){let n=new Ohe;return typeof t<"u"&&(n.value=[t]),n}update(t){if(t.length===0)return!1;if(t.length!==1)throw new Vn("LastValue can only receive one value per step.",{lc_error_code:"INVALID_CONCURRENT_GRAPH_UPDATE"});return this.value=[t[t.length-1]],!0}get(){if(this.value.length===0)throw new Hr;return this.value[0]}checkpoint(){if(this.value.length===0)throw new Hr;return this.value[0]}isAvailable(){return this.value.length!==0}},Mhe=class Dhe extends mc{lc_graph_name="LastValueAfterFinish";value=[];finished=!1;fromCheckpoint(t){let n=new Dhe;if(typeof t<"u"){let[r,i]=t;n.value=[r],n.finished=i}return n}update(t){return t.length===0?!1:(this.finished=!1,this.value=[t[t.length-1]],!0)}get(){if(this.value.length===0||!this.finished)throw new Hr;return this.value[0]}checkpoint(){if(this.value.length!==0)return[this.value[0],this.finished]}consume(){return this.finished?(this.finished=!1,this.value=[],!0):!1}finish(){return!this.finished&&this.value.length>0?(this.finished=!0,!0):!1}isAvailable(){return this.value.length!==0&&this.finished}};var rI=class Phe extends mc{lc_graph_name="BinaryOperatorAggregate";value;operator;initialValueFactory;constructor(t,n){super(),this.operator=t,this.initialValueFactory=n,this.value=n?.()}fromCheckpoint(t){let n=new Phe(this.operator,this.initialValueFactory);return typeof t<"u"&&(n.value=t),n}update(t){let n=t;if(!n.length)return!1;this.value===void 0&&([this.value]=n,n=n.slice(1));for(let r of n)this.value!==void 0&&(this.value=this.operator(this.value,r));return!0}get(){if(this.value===void 0)throw new Hr;return this.value}checkpoint(){if(this.value===void 0)throw new Hr;return this.value}isAvailable(){return this.value!==void 0}};var jZe=class{lc_graph_name="AnnotationRoot";spec;constructor(e){this.spec=e}},vm=function(e){return e?cN(e):new nI};vm.Root=e=>new jZe(e);function cN(e){return typeof e=="object"&&e&&"reducer"in e&&e.reducer?new rI(e.reducer,e.default):typeof e=="object"&&e&&"value"in e&&e.value?new rI(e.value,e.default):new nI}var zZe=["tags","metadata","callbacks","configurable"],BZe=["tags","metadata","callbacks","runName","maxConcurrency","recursionLimit","configurable","runId","outputKeys","streamMode","store","writer","interrupt","context","interruptBefore","interruptAfter","checkpointDuring","durability","signal"],UZe=25;function iI(...e){let t={tags:[],metadata:{},callbacks:void 0,recursionLimit:UZe,configurable:{}},n=gr.getRunnableConfig();if(n!==void 0){for(let[r,i]of Object.entries(n))if(i!==void 0)if(zZe.includes(r)){let o;Array.isArray(i)?o=[...i]:typeof i=="object"?r==="callbacks"&&"copy"in i&&typeof i.copy=="function"?o=i.copy():o=m({},i):o=i,t[r]=o}else t[r]=i}for(let r of e)if(r!==void 0)for(let[i,o]of Object.entries(r))o!==void 0&&BZe.includes(i)&&(t[i]=o);for(let[r,i]of Object.entries(t.configurable))t.metadata=t.metadata??{},!r.startsWith("__")&&(typeof i=="string"||typeof i=="number"||typeof i=="boolean")&&!(r in t.metadata)&&(t.metadata[r]=i);return t}function Rhe(){return gr.getRunnableConfig()}function lN(e){return e.split(Mr).filter(t=>!t.match(/^\d+$/)).map(t=>t.split(Os)[0]).join(Mr)}function Nhe(e){let t=e.split(Mr);for(;t.length>1&&t[t.length-1].match(/^\d+$/);)t.pop();return t.slice(0,-1).join(Mr)}var aa=class extends dt{lc_namespace=["langgraph"];func;tags;config;trace=!0;recurse=!0;constructor(e){super(),this.name=e.name??e.func.name,this.func=e.func,this.config=e.tags?{tags:e.tags}:void 0,this.trace=e.trace??this.trace,this.recurse=e.recurse??this.recurse}_tracedInvoke(e,t,n){return y(this,null,function*(){return new Promise((r,i)=>{let o=kn(t,{callbacks:n?.getChild()});gr.runWithConfig(o,()=>y(this,null,function*(){try{let s=yield this.func(e,o);r(s)}catch(s){i(s)}}))})})}invoke(e,t){return y(this,null,function*(){let n,r=iI(t),i=so(this.config,r);return this.trace?n=yield this._callWithConfig(this._tracedInvoke,e,i):n=yield gr.runWithConfig(i,()=>y(this,null,function*(){return this.func(e,i)})),dt.isRunnable(n)&&this.recurse?yield gr.runWithConfig(i,()=>y(this,null,function*(){return n.invoke(e,i)})):n})}};function*Ld(e,t){if(t===void 0)yield*mn(e);else for(let n of e)yield[t,n]}function tl(e){return y(this,null,function*(){let t=[];try{for(var n=ue(yield e),r,i,o;r=!(i=yield n.next()).done;r=!1){let s=i.value;t.push(s)}}catch{o=[i]}finally{try{r&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o[0]}}return t})}function zh(e){let t=[];for(let n of e)t.push(n);return t}function Bh(e,t){return e?"configurable"in e?b(m({},e),{configurable:m(m({},e.configurable),t)}):b(m({},e),{configurable:t}):{configurable:t}}var Gtn={[Symbol.for("LG_SKIP_WRITE")]:!0};function VZe(e){return typeof e=="object"&&e?.[Symbol.for("LG_SKIP_WRITE")]!==void 0}var nl={[Symbol.for("LG_PASSTHROUGH")]:!0};function uN(e){return typeof e=="object"&&e?.[Symbol.for("LG_PASSTHROUGH")]!==void 0}var dq=Symbol("IS_WRITER"),Bi=class mq extends aa{writes;constructor(t,n){let r=`ChannelWrite<${t.map(i=>zi(i)?i.node:"channel"in i?i.channel:"...").join(",")}>`;super({writes:t,name:r,tags:n,func:(i,o)=>y(this,null,function*(){return this._write(i,o??{})})}),this.writes=t}_write(t,n){return y(this,null,function*(){let r=this.writes.map(i=>pq(i)&&uN(i.value)?{mapper:i.mapper,value:t}:dN(i)&&uN(i.value)?{channel:i.channel,value:t,skipNone:i.skipNone,mapper:i.mapper}:i);return yield mq.doWrite(n,r),t})}static doWrite(t,n){return y(this,null,function*(){for(let o of n){if(dN(o)){if(o.channel===Jo)throw new Vn("Cannot write to the reserved channel TASKS");if(uN(o.value))throw new Vn("PASSTHROUGH value must be replaced")}if(pq(o)&&uN(o.value))throw new Vn("PASSTHROUGH value must be replaced")}let r=[];for(let o of n)if(zi(o))r.push([Jo,o]);else if(pq(o)){let s=yield o.mapper.invoke(o.value,t);s!=null&&s.length>0&&r.push(...s)}else if(dN(o)){let s=o.mapper!==void 0?yield o.mapper.invoke(o.value,t):o.value;if(VZe(s)||o.skipNone&&s===void 0)continue;r.push([o.channel,s])}else throw new Error(`Invalid write entry: ${JSON.stringify(o)}`);let i=t.configurable?.[pc];i(r)})}static isWriter(t){return t instanceof mq||dq in t&&!!t[dq]}static registerWriter(t){return Object.defineProperty(t,dq,{value:!0})}};function dN(e){return e!==void 0&&typeof e.channel=="string"}function pq(e){return e!==void 0&&!dN(e)&&dt.isRunnable(e.mapper)}var $he=class Lhe extends aa{lc_graph_name="ChannelRead";channel;fresh=!1;mapper;constructor(t,n,r=!1){super({func:(i,o)=>Lhe.doRead(o,this.channel,this.fresh,this.mapper)}),this.fresh=r,this.mapper=n,this.channel=t,this.name=Array.isArray(t)?`ChannelRead<${t.join(",")}>`:`ChannelRead<${t}>`}static doRead(t,n,r,i){let o=t.configurable?.[Qc];if(!o)throw new Error("Runnable is not configured with a read function. Make sure to call in the context of a Pregel process");return i?i(o(n,r)):o(n,r)}},tb=new lc,Fd=class oI extends ni{lc_graph_name="PregelNode";channels;triggers=[];mapper;writers=[];bound=tb;kwargs={};metadata={};tags=[];retryPolicy;cachePolicy;subgraphs;ends;constructor(t){let{channels:n,triggers:r,mapper:i,writers:o,bound:s,kwargs:a,metadata:c,retryPolicy:u,cachePolicy:d,tags:f,subgraphs:g,ends:h}=t,v=[...t.config?.tags?t.config.tags:[],...f??[]];super(b(m({},t),{bound:t.bound??tb,config:b(m({},t.config?t.config:{}),{tags:v})})),this.channels=n,this.triggers=r,this.mapper=i,this.writers=o??this.writers,this.bound=s??this.bound,this.kwargs=a??this.kwargs,this.metadata=c??this.metadata,this.tags=v,this.retryPolicy=u,this.cachePolicy=d,this.subgraphs=g,this.ends=h}getWriters(){let t=[...this.writers];for(;t.length>1&&t[t.length-1]instanceof Bi&&t[t.length-2]instanceof Bi;){let n=t.slice(-2),r=n[0].writes.concat(n[1].writes);t[t.length-2]=new Bi(r,n[0].config?.tags),t.pop()}return t}getNode(){let t=this.getWriters();if(!(this.bound===tb&&t.length===0))return this.bound===tb&&t.length===1?t[0]:this.bound===tb?new Er({first:t[0],middle:t.slice(1,t.length-1),last:t[t.length-1],omitSequenceTags:!0}):t.length>0?new Er({first:this.bound,middle:t.slice(0,t.length-1),last:t[t.length-1],omitSequenceTags:!0}):this.bound}join(t){if(!Array.isArray(t))throw new Error("channels must be a list");if(typeof this.channels!="object")throw new Error("all channels must be named when using .join()");return new oI({channels:m(m({},this.channels),Object.fromEntries(t.map(n=>[n,n]))),triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:this.bound,kwargs:this.kwargs,config:this.config,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy})}pipe(t){return Bi.isWriter(t)?new oI({channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:[...this.writers,t],bound:this.bound,config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy}):this.bound===tb?new oI({channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:ti(t),config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy}):new oI({channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:this.bound.pipe(t),config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy})}};function HZe(e){return"steps"in e&&Array.isArray(e.steps)}function sI(e){return"lg_is_pregel"in e&&e.lg_is_pregel===!0}function pN(e){let t=[e];for(let n of t){if(sI(n))return n;HZe(n)&&t.push(...n.steps)}}var bm=class Fhe extends mc{lc_graph_name="EphemeralValue";guard;value=[];constructor(t=!0){super(),this.guard=t}fromCheckpoint(t){let n=new Fhe(this.guard);return typeof t<"u"&&(n.value=[t]),n}update(t){if(t.length===0){let n=this.value.length>0;return this.value=[],n}if(t.length!==1&&this.guard)throw new Vn("EphemeralValue can only receive one value per step.");return this.value=[t[t.length-1]],!0}get(){if(this.value.length===0)throw new Hr;return this.value[0]}checkpoint(){if(this.value.length===0)throw new Hr;return this.value[0]}isAvailable(){return this.value.length!==0}};var we=e=>BigInt(e),_r=(e,t=0)=>new DataView(e.buffer,e.byteOffset+t,e.byteLength-t),Uhe=we("0x9E3779B1"),Vhe=we("0x85EBCA77"),ZZe=we("0xC2B2AE3D"),wm=we("0x9E3779B185EBCA87"),Uh=we("0xC2B2AE3D27D4EB4F"),Hhe=we("0x165667B19E3779F9"),gq=we("0x85EBCA77C2B2AE63"),qZe=we("0x27D4EB2F165667C5"),GZe=we("0x165667919E3779F9"),WZe=we("0x9FB21C651E98DF25"),KZe=e=>{let t=e.length;if(t%2!==0)throw new Error("String should have an even number of characters");let n=t/2,r=new Uint8Array(n),i=0,o=0;for(;o<n;){let s=e.slice(i,i+=2);r[o]=Number.parseInt(s,16),o+=1}return _r(r)},mu=KZe("b8fe6c3923a44bbe7c01812cf721ad1cded46de9839097db7240a4a4b7b3671fcb79e64eccc0e578825ad07dccff7221b8084674f743248ee03590e6813a264c3c2852bb91c300cb88d0658b1b532ea371644897a20df94e3819ef46a9deacd8a8fa763fe39c343ff9dcbbc7c70b4f1d8a51e04bcdb45931c89f7ec9d9787364eac5ac8334d3ebc3c581a0fffa1363eb170ddd51b7f0da49d316552629d4689e2b16be587d47a1fc8ff8b8d17ad031ce45cb3a8f95160428afd7fbcabb4b407e"),nb=(we(1)<<we(128))-we(1),yn=(we(1)<<we(64))-we(1),gN=(we(1)<<we(32))-we(1),jd=64,Zhe=jd/8,JZe=8,mN=4;function rb(e){if(!e)throw new Error("Assert failed")}function YZe(e){let t=new DataView(new ArrayBuffer(8));return t.setBigUint64(0,e,!0),t.getBigUint64(0,!1)}function QZe(e){let t=e;return t=(t&we(65535))<<we(16)|(t&we(4294901760))>>we(16),t=(t&we(16711935))<<we(8)|(t&we(4278255360))>>we(8),t}function XZe(e,t){return(e&gN)*(t&gN)&yn}function e8e(e,t){return(e<<t|e>>we(32)-t)&gN}function qhe(e,t,n){for(let r=0;r<Zhe;r+=1){let i=t.getBigUint64(r*8,!0),o=i^n.getBigUint64(r*8,!0);e[r^1]+=i,e[r]+=XZe(o,o>>we(32))}return e}function jhe(e,t,n,r){for(let i=0;i<r;i+=1)qhe(e,_r(t,i*jd),_r(n,i*8));return e}function t8e(e,t){for(let n=0;n<Zhe;n+=1){let r=t.getBigUint64(n*8,!0),i=e[n];i=fq(i,we(47)),i^=r,i*=Uhe,e[n]=i&yn}return e}function fN(e,t){return Ghe(e[0]^t.getBigUint64(0,!0),e[1]^t.getBigUint64(JZe,!0))}function zhe(e,t,n){let r=n;return r+=fN(e.slice(0),_r(t,0*mN)),r+=fN(e.slice(2),_r(t,4*mN)),r+=fN(e.slice(4),_r(t,8*mN)),r+=fN(e.slice(6),_r(t,12*mN)),fu(r&yn)}function n8e(e,t,n,r,i){let o=e,s=Math.floor((n.byteLength-jd)/8),a=jd*s,c=Math.floor((t.byteLength-1)/a);for(let u=0;u<c;u+=1)o=jhe(o,_r(t,u*a),n,s),o=i(o,_r(n,n.byteLength-jd));{let u=Math.floor((t.byteLength-1-a*c)/jd);o=jhe(o,_r(t,c*a),n,u),o=r(o,_r(t,t.byteLength-jd),_r(n,n.byteLength-jd-7))}return o}function r8e(e,t){let n=new BigUint64Array([ZZe,wm,Uh,Hhe,gq,Vhe,qZe,Uhe]);rb(e.byteLength>128),n=n8e(n,e,t,qhe,t8e),rb(n.length*8===64);{let r=zhe(n,_r(t,11),we(e.byteLength)*wm&yn);return zhe(n,_r(t,t.byteLength-jd-11),~(we(e.byteLength)*Uh)&yn)<<we(64)|r}}function Ghe(e,t){let n=e*t&nb;return n&yn^n>>we(64)}function Bhe(e,t,n){return Ghe((e.getBigUint64(0,!0)^t.getBigUint64(0,!0)+n)&yn,(e.getBigUint64(8,!0)^t.getBigUint64(8,!0)-n)&yn)}function hN(e,t,n,r,i){let o=e&yn,s=e>>we(64)&yn;return o+=Bhe(t,r,i),o^=n.getBigUint64(0,!0)+n.getBigUint64(8,!0),o&=yn,s+=Bhe(n,_r(r,16),i),s^=t.getBigUint64(0,!0)+t.getBigUint64(8,!0),s&=yn,s<<we(64)|o}function fu(e){let t=e;return t^=t>>we(37),t*=GZe,t&=yn,t^=t>>we(32),t}function _N(e){let t=e;return t^=t>>we(33),t*=Uh,t&=yn,t^=t>>we(29),t*=Hhe,t&=yn,t^=t>>we(32),t}function i8e(e,t,n){let r=e.byteLength;rb(r>0&&r<=3);let i=we(e.getUint8(r-1))|we(r<<8)|we(e.getUint8(0)<<16)|we(e.getUint8(r>>1)<<24),o=(we(t.getUint32(0,!0))^we(t.getUint32(4,!0)))+n,s=(i^o)&yn,a=(we(t.getUint32(8,!0))^we(t.getUint32(12,!0)))-n,c=(e8e(QZe(i),we(13))^a)&yn;return(_N(c)&yn)<<we(64)|_N(s)}function fq(e,t){return e^e>>t}function o8e(e,t,n){let r=e.byteLength;rb(r>=4&&r<=8);{let i=e.getUint32(0,!0),o=e.getUint32(r-4,!0),s=we(i)|we(o)<<we(32),a=(t.getBigUint64(16,!0)^t.getBigUint64(24,!0))+n&yn,u=(s^a)*(wm+(we(r)<<we(2)))&nb;return u+=(u&yn)<<we(65),u&=nb,u^=u>>we(67),fq(fq(u&yn,we(35))*WZe&yn,we(28))|fu(u>>we(64))<<we(64)}}function s8e(e,t,n){let r=e.byteLength;rb(r>=9&&r<=16);{let i=(t.getBigUint64(32,!0)^t.getBigUint64(40,!0))+n&yn,o=(t.getBigUint64(48,!0)^t.getBigUint64(56,!0))-n&yn,s=e.getBigUint64(0,!0),a=e.getBigUint64(r-8,!0),c=(s^a^i)*wm,u=(c&yn)+(we(r-1)<<we(54));c=c&(nb^yn)|u,a^=o,c+=a+(a&gN)*(Vhe-we(1))<<we(64),c&=nb,c^=YZe(c>>we(64));let d=(c&yn)*Uh;return d+=(c>>we(64))*Uh<<we(64),d&=nb,fu(d&yn)|fu(d>>we(64))<<we(64)}}function a8e(e,t){let n=e.byteLength;return rb(n<=16),n>8?s8e(e,mu,t):n>=4?o8e(e,mu,t):n>0?i8e(e,mu,t):_N(t^mu.getBigUint64(64,!0)^mu.getBigUint64(72,!0))|_N(t^mu.getBigUint64(80,!0)^mu.getBigUint64(88,!0))<<we(64)}function hq(e){return~e+we(1)&yn}function c8e(e,t,n){let r=we(e.byteLength)*wm&yn,i=we(e.byteLength-1)/we(32);for(;i>=0;){let a=Number(i);r=hN(r,_r(e,16*a),_r(e,e.byteLength-16*(a+1)),_r(t,32*a),n),i-=we(1)}let o=r+(r>>we(64))&yn;o=fu(o);let s=(r&yn)*wm+(r>>we(64))*gq+(we(e.byteLength)-n&yn)*Uh;return s&=yn,s=hq(fu(s)),o|s<<we(64)}function l8e(e,t,n){let r=we(e.byteLength)*wm&yn;for(let s=32;s<160;s+=32)r=hN(r,_r(e,s-32),_r(e,s-16),_r(t,s-32),n);r=fu(r&yn)|fu(r>>we(64))<<we(64);for(let s=160;s<=e.byteLength;s+=32)r=hN(r,_r(e,s-32),_r(e,s-16),_r(t,3+s-160),n);r=hN(r,_r(e,e.byteLength-16),_r(e,e.byteLength-32),_r(t,103),hq(n));let i=r+(r>>we(64))&yn;i=fu(i);let o=(r&yn)*wm+(r>>we(64))*gq+(we(e.byteLength)-n&yn)*Uh;return o&=yn,o=hq(fu(o)),i|o<<we(64)}function zd(e,t=we(0)){let n=new TextEncoder,r=_r(typeof e=="string"?n.encode(e):e),i=r.byteLength,o=s=>s.toString(16).padStart(32,"0");return i<=16?o(a8e(r,t)):i<=128?o(c8e(r,mu,t)):i<=240?o(l8e(r,mu,t)):o(r8e(r,mu))}function yN(e){return/^[0-9a-f]{32}$/.test(e)}function Vh(e,t,n=!0,r=!1){try{return e[t].get()}catch(i){if(i.name===Hr.unminifiable_name){if(r)return i;if(n)return null}throw i}}function rl(e,t,n=!0){if(Array.isArray(t)){let r={};for(let i of t)try{r[i]=Vh(e,i,!n)}catch(o){if(o.name===Hr.unminifiable_name)continue}return r}else return Vh(e,t)}function*Whe(e,t){if(e.graph===Ao.PARENT)throw new Vn("There is no parent graph.");if(e.goto){let n;Array.isArray(e.goto)?n=e.goto:n=[e.goto];for(let r of n)if(zi(r))yield[Qo,Jo,r];else if(typeof r=="string")yield[Qo,`branch:to:${r}`,"__start__"];else throw new Error(`In Command.send, expected Send or string, got ${typeof r}`)}if(e.resume)if(typeof e.resume=="object"&&Object.keys(e.resume).length&&Object.keys(e.resume).every(yN))for(let[n,r]of Object.entries(e.resume)){let i=t.filter(o=>o[0]===n&&o[1]===Yi).map(o=>o[2]).slice(0,1)??[];i.push(r),yield[n,Yi,i]}else yield[Qo,Yi,e.resume];if(e.update){if(typeof e.update!="object"||!e.update)throw new Error("Expected cmd.update to be a dict mapping channel names to update values");if(Array.isArray(e.update))for(let[n,r]of e.update)yield[Qo,n,r];else for(let[n,r]of Object.entries(e.update))yield[Qo,n,r]}}function*vN(e,t){if(t!=null)if(Array.isArray(e)&&typeof t=="object"&&!Array.isArray(t))for(let n in t)e.includes(n)&&(yield[n,t[n]]);else{if(Array.isArray(e))throw new Error('Input chunk must be an object when "inputChannels" is an array');yield[e,t]}}function*bN(e,t,n){Array.isArray(e)?(t===!0||t.find(([r,i])=>e.includes(r)))&&(yield rl(n,e)):(t===!0||t.some(([r,i])=>r===e))&&(yield Vh(n,e))}function*Khe(e,t,n){let r=t.filter(([a,c])=>(a.config===void 0||!a.config.tags?.includes(or))&&c[0][0]!==ji&&c[0][0]!==xn);if(!r.length)return;let i;r.some(([a])=>a.writes.some(([c,u])=>c===Xc))?i=r.flatMap(([a])=>a.writes.filter(([c,u])=>c===Xc).map(([c,u])=>[a.name,u])):Array.isArray(e)?i=r.flatMap(([a])=>{let{writes:c}=a,u={};for(let[d]of c)e.includes(d)&&(u[d]=(u[d]||0)+1);return Object.values(u).some(d=>d>1)?c.filter(([d])=>e.includes(d)).map(([d,f])=>[a.name,{[d]:f}]):[[a.name,Object.fromEntries(c.filter(([d])=>e.includes(d)))]]}):i=r.flatMap(([a])=>a.writes.filter(([c,u])=>c===e).map(([c,u])=>[a.name,u]));let o={};for(let[a,c]of i)a in o||(o[a]=[]),o[a].push(c);let s={};for(let a in o)if(o[a].length===1){let[c]=o[a];s[a]=c}else s[a]=o[a];n&&(s.__metadata__={cached:n}),yield s}function wN(e){let t=typeof e[Mn];if(t==="number")return 0;if(t==="string")return"";for(let n in e){if(!Object.prototype.hasOwnProperty.call(e,n))continue;let r=typeof e[n];if(r==="number")return 0;if(r==="string")return"";break}}function ib(e,t){if(Object.keys(e).length>0){let n=wN(t);return Object.fromEntries(Object.entries(t).filter(([r,i])=>i>(e[r]??n)))}else return t}function Jhe(e,t){return e&&!Array.isArray(e)&&!(e instanceof Date)&&typeof e=="object"?e:{[t]:e}}function ca(e,t){return e===null?{configurable:t}:e?.configurable===void 0?b(m({},e),{configurable:t}):b(m({},e),{configurable:m(m({},e.configurable),t)})}function xm(e,t){let n=t?.parents??{};return Object.keys(n).length>0?ca(e,{[As]:b(m({},n),{[e.configurable?.checkpoint_ns??""]:e.configurable?.checkpoint_id})}):e}function ob(...e){let t=[...new Set(e.filter(Boolean))];if(t.length===0)return{signal:void 0,dispose:void 0};if(t.length===1)return{signal:t[0],dispose:void 0};let n=new AbortController,r=()=>{let o=t.find(s=>s.aborted)?.reason;n.abort(o),t.forEach(s=>s.removeEventListener("abort",r))};t.forEach(o=>o.addEventListener("abort",r,{once:!0}));let i=t.find(o=>o.aborted);return i&&n.abort(i.reason),{signal:n.signal,dispose:()=>{t.forEach(o=>o.removeEventListener("abort",r))}}}var Yhe=(e,t)=>{if(!(!e&&!t))return e?t?Array.isArray(e)&&Array.isArray(t)?[...e,...t]:Array.isArray(e)?[...e,t]:Array.isArray(t)?[e,...t]:[e,t]:e:t};var Qhe=class{func;name;input;retry;cache;callbacks;__lg_type="call";constructor({func:e,name:t,input:n,retry:r,cache:i,callbacks:o}){this.func=e,this.name=t,this.input=n,this.retry=r,this.cache=i,this.callbacks=o}};function Xhe(e){return typeof e=="object"&&e!==null&&"__lg_type"in e&&e.__lg_type==="call"}function ege(e,t){let n=new aa({func:r=>t(...r),name:e,trace:!1,recurse:!1});return new Er({name:e,first:n,last:new Bi([{channel:Xc,value:nl}],[or])})}var tge=e=>e!==void 0?e+1:1;function u8e(e,t){if(t==null)return!1;for(let n of e)if(t[n])return!0;return!1}function d8e(e){let t;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t==null?t=e[n]:t=iN(t,e[n]));return t}function cI(e,t,n){let r=wN(e.channel_versions),i=e.versions_seen[xn]??{},o=!1;if((e.channel_versions[Mn]??r)>(i[Mn]??r))o=!0;else for(let a in e.channel_versions)if(Object.prototype.hasOwnProperty.call(e.channel_versions,a)&&e.channel_versions[a]>(i[a]??r)){o=!0;break}let s=n.some(a=>t==="*"?!a.config?.tags?.includes(or):t.includes(a.name));return o&&s}function aI(e,t,n,r,i=!1){let o=new Set;if(Array.isArray(r))o=new Set(r.filter(a=>n.writes.some(([c,u])=>c===a)));else{for(let[a]of n.writes)if(a===r){o=new Set([a]);break}o=o||new Set}let s;if(i&&o.size>0){let a=Object.fromEntries(Object.entries(t).filter(([d,f])=>o.has(d))),c=pu(e,a,-1),u=jh(a,c);Ms($d(c),u,[n],void 0,void 0),s=rl(m(m({},t),u),r)}else s=rl(t,r);return s}function _q(e,t,n){for(let[r,i]of n)if([Yo,Jo].includes(r)&&i!=null){if(!zi(i))throw new Vn(`Invalid packet type, expected SendProtocol, got ${JSON.stringify(i)}`);if(!(i.node in t))throw new Vn(`Invalid node name "${i.node}" in Send packet`)}e(n)}var p8e=new Set([WE,Yo,Yi,xn,Xc,ji]);function Ms(e,t,n,r,i){n.sort((g,h)=>{let v=g.path?.slice(0,3)||[],x=h.path?.slice(0,3)||[];for(let E=0;E<Math.min(v.length,x.length);E+=1){if(v[E]<x[E])return-1;if(v[E]>x[E])return 1}return v.length-x.length});let o=n.some(g=>g.triggers.length>0),s=tI(t);for(let g of n){e.versions_seen[g.name]??={};for(let h of g.triggers)h in e.channel_versions&&(e.versions_seen[g.name][h]=e.channel_versions[h])}let a=d8e(e.channel_versions),c=new Set(n.flatMap(g=>g.triggers).filter(g=>!kfe.includes(g))),u=!1;for(let g of c)g in s&&s[g].consume()&&r!==void 0&&(e.channel_versions[g]=r(a),u=!0);let d={};for(let g of n)for(let[h,v]of g.writes)p8e.has(h)||h in s&&(d[h]??=[],d[h].push(v));a!=null&&r!=null&&(a=u?r(a):a);let f=new Set;for(let[g,h]of Object.entries(d))if(g in s){let v=s[g],x;try{x=v.update(h)}catch(E){if(E.name===Vn.unminifiable_name){let C=new Vn(`Invalid update for channel "${g}" with values ${JSON.stringify(h)}: ${E.message}`);throw C.lc_error_code=E.lc_error_code,C}else throw E}x&&r!==void 0&&(e.channel_versions[g]=r(a),v.isAvailable()&&f.add(g))}if(o)for(let g in s){if(!Object.prototype.hasOwnProperty.call(s,g))continue;let h=s[g];h.isAvailable()&&!f.has(g)&&h.update([])&&r!==void 0&&(e.channel_versions[g]=r(a),h.isAvailable()&&f.add(g))}if(o&&!u8e(f,i))for(let g in s){if(!Object.prototype.hasOwnProperty.call(s,g))continue;let h=s[g];h.finish()&&r!==void 0&&(e.channel_versions[g]=r(a),h.isAvailable()&&f.add(g))}return f}function*m8e(e,t,n){if(n.updatedChannels!=null&&n.triggerToNodes!=null){let i=new Set;for(let o of n.updatedChannels){let s=n.triggerToNodes[o];for(let a of s??[])i.add(a)}yield*mn([...i].sort());return}if(!(()=>{for(let i in e.channel_versions)if(e.channel_versions[i]!==null)return!1;return!0})())for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(yield i)}function Cm(e,t,n,r,i,o,s){let a={},c=r[Jo];if(c?.isAvailable()){let u=c.get().length;for(let d=0;d<u;d+=1){let f=xN([Yo,d],e,t,n,r,i,o,s);f!==void 0&&(a[f.id]=f)}}for(let u of m8e(e,n,s)){let d=xN([KE,u],e,t,n,r,i,o,s);d!==void 0&&(a[d.id]=d)}return a}function xN(e,t,n,r,i,o,s,a){let{step:c,checkpointer:u,manager:d}=a,f=o.configurable??{},g=f.checkpoint_ns??"";if(e[0]===Yo&&Xhe(e[e.length-1])){let h=e[e.length-1],v=ege(h.name,h.func),x=[Yo],E=g===""?h.name:`${g}${Mr}${h.name}`,C=Nd(JSON.stringify([E,c.toString(),h.name,Yo,e[1],e[2]]),t.id),S=`${E}${Os}${C}`,A=[...e.slice(0,3),!0],P={langgraph_step:c,langgraph_node:h.name,langgraph_triggers:x,langgraph_path:A,langgraph_checkpoint_ns:S};if(s){let F=[];return{name:h.name,input:h.input,proc:v,writes:F,config:kn(so(o,{metadata:P,store:a.store??o.store}),{runName:h.name,callbacks:d?.getChild(`graph:step:${c}`),configurable:{[$h]:C,[pc]:ee=>_q(D=>F.push(...D),r,ee),[Qc]:(ee,D=!1)=>aI(t,i,{name:h.name,writes:F,triggers:x,path:A},ee,D),[ri]:u??f[ri],[As]:b(m({},f[As]),{[g]:t.id}),[Ma]:yq({pendingWrites:n??[],taskId:C,currentTaskInput:h.input,resumeMap:o.configurable?.[Gv],namespaceHash:zd(S)}),[GE]:t.channel_values[H1],checkpoint_id:void 0,checkpoint_ns:S}}),triggers:x,retry_policy:h.retry,cache_key:h.cache?{key:zd((h.cache.keyFunc??JSON.stringify)([h.input])),ns:[U1,h.name??"__dynamic__"],ttl:h.cache.ttl}:void 0,id:C,path:A,writers:[]}}else return{id:C,name:h.name,interrupts:[],path:A}}else if(e[0]===Yo){let h=typeof e[1]=="number"?e[1]:parseInt(e[1],10);if(!i[Jo]?.isAvailable())return;let v=i[Jo].get();if(h<0||h>=v.length)return;let x=Z1(v[h])&&!zi(v[h])?new _m(v[h].node,v[h].args):v[h];if(!Z1(x)){console.warn(`Ignoring invalid packet ${JSON.stringify(x)} in pending sends.`);return}if(!(x.node in r)){console.warn(`Ignoring unknown node name ${x.node} in pending sends.`);return}let E=[Yo],C=g===""?x.node:`${g}${Mr}${x.node}`,S=Nd(JSON.stringify([C,c.toString(),x.node,Yo,h.toString()]),t.id),A=`${C}${Os}${S}`,P={langgraph_step:c,langgraph_node:x.node,langgraph_triggers:E,langgraph_path:e.slice(0,3),langgraph_checkpoint_ns:A};if(s){let F=r[x.node],B=F.getNode();if(B!==void 0){F.metadata!==void 0&&(P=m(m({},P),F.metadata));let ee=[];return{name:x.node,input:x.args,proc:B,subgraphs:F.subgraphs,writes:ee,config:kn(so(o,{metadata:P,tags:F.tags,store:a.store??o.store}),{runName:x.node,callbacks:d?.getChild(`graph:step:${c}`),configurable:{[$h]:S,[pc]:D=>_q(pe=>ee.push(...pe),r,D),[Qc]:(D,pe=!1)=>aI(t,i,{name:x.node,writes:ee,triggers:E,path:e},D,pe),[ri]:u??f[ri],[As]:b(m({},f[As]),{[g]:t.id}),[Ma]:yq({pendingWrites:n??[],taskId:S,currentTaskInput:x.args,resumeMap:o.configurable?.[Gv],namespaceHash:zd(A)}),[GE]:t.channel_values[H1],checkpoint_id:void 0,checkpoint_ns:A}}),triggers:E,retry_policy:F.retryPolicy,cache_key:F.cachePolicy?{key:zd((F.cachePolicy.keyFunc??JSON.stringify)([x.args])),ns:[U1,F.name??"__dynamic__",x.node],ttl:F.cachePolicy.ttl}:void 0,id:S,path:e,writers:F.getWriters()}}}else return{id:S,name:x.node,interrupts:[],path:e}}else if(e[0]===KE){let h=e[1].toString(),v=r[h];if(v===void 0)return;if(n?.length){let S=g===""?h:`${g}${Mr}${h}`,A=Nd(JSON.stringify([S,c.toString(),h,KE,h]),t.id);if(n.some(F=>F[0]===A&&F[1]!==ji))return}let x=wN(t.channel_versions);if(x===void 0)return;let E=t.versions_seen[h]??{},C=v.triggers.find(S=>i[S].isAvailable()?(t.channel_versions[S]??x)>(E[S]??x):!1);if(C!==void 0){let S=f8e(v,i,s);if(S===void 0)return;let A=g===""?h:`${g}${Mr}${h}`,P=Nd(JSON.stringify([A,c.toString(),h,KE,[C]]),t.id),F=`${A}${Os}${P}`,B={langgraph_step:c,langgraph_node:h,langgraph_triggers:[C],langgraph_path:e,langgraph_checkpoint_ns:F};if(s){let ee=v.getNode();if(ee!==void 0){v.metadata!==void 0&&(B=m(m({},B),v.metadata));let D=[];return{name:h,input:S,proc:ee,subgraphs:v.subgraphs,writes:D,config:kn(so(o,{metadata:B,tags:v.tags,store:a.store??o.store}),{runName:h,callbacks:d?.getChild(`graph:step:${c}`),configurable:{[$h]:P,[pc]:pe=>_q(xe=>{D.push(...xe)},r,pe),[Qc]:(pe,xe=!1)=>aI(t,i,{name:h,writes:D,triggers:[C],path:e},pe,xe),[ri]:u??f[ri],[As]:b(m({},f[As]),{[g]:t.id}),[Ma]:yq({pendingWrites:n??[],taskId:P,currentTaskInput:S,resumeMap:o.configurable?.[Gv],namespaceHash:zd(F)}),[GE]:t.channel_values[H1],checkpoint_id:void 0,checkpoint_ns:F}}),triggers:[C],retry_policy:v.retryPolicy,cache_key:v.cachePolicy?{key:zd((v.cachePolicy.keyFunc??JSON.stringify)([S])),ns:[U1,v.name??"__dynamic__",h],ttl:v.cachePolicy.ttl}:void 0,id:P,path:e,writers:v.getWriters()}}}else return{id:P,name:h,interrupts:[],path:e}}}}function f8e(e,t,n){let r;if(typeof e.channels=="object"&&!Array.isArray(e.channels)){r={};for(let[i,o]of Object.entries(e.channels))if(e.triggers.includes(o))try{r[i]=Vh(t,o,!1)}catch(s){if(s.name===Hr.unminifiable_name)return;throw s}else if(o in t)try{r[i]=Vh(t,o,!1)}catch(s){if(s.name===Hr.unminifiable_name)continue;throw s}}else if(Array.isArray(e.channels)){let i=!1;for(let o of e.channels)try{r=Vh(t,o,!1),i=!0;break}catch(s){if(s.name===Hr.unminifiable_name)continue;throw s}if(!i)return}else throw new Error(`Invalid channels type, expected list or dict, got ${e.channels}`);return n&&e.mapper!==void 0&&(r=e.mapper(r)),r}function yq({pendingWrites:e,taskId:t,currentTaskInput:n,resumeMap:r,namespaceHash:i}){let o=e.find(([c,u])=>c===Qo&&u===Yi)?.[2],a={callCounter:0,interruptCounter:-1,resume:(()=>{let c=e.filter(([u,d])=>u===t&&d===Yi).flatMap(([u,d,f])=>f);if(r!=null&&i in r){let u=r[i];c.push(u)}return c})(),nullResume:o,subgraphCounter:0,currentTaskInput:n,consumeNullResume:()=>{if(a.nullResume)return delete a.nullResume,e.splice(e.findIndex(([c,u])=>c===Qo&&u===Yi),1),o}};return a}var lI={blue:{start:"\x1B[34m",end:"\x1B[0m"},green:{start:"\x1B[32m",end:"\x1B[0m"},yellow:{start:"\x1B[33;1m",end:"\x1B[0m"}},uI=(e,t)=>`${e.start}${t}${e.end}`;function*vq(e){for(let{id:t,name:n,input:r,config:i,triggers:o,writes:s}of e){if(i?.tags?.includes(or))continue;let a=s.filter(([c,u])=>c===t&&u===xn).map(([,c])=>c);yield{id:t,name:n,input:r,triggers:o,interrupts:a}}}function h8e(e){return typeof e!="object"||e===null?!1:"$writes"in e&&Array.isArray(e.$writes)}function nge(e){let t={};for(let[n,r]of e){let i=String(n);if(i in t){let o=h8e(t[i])?t[i].$writes:[t[i]];o.push(r),t[i]={$writes:o}}else t[i]=r}return t}function*rge(e,t){for(let[{id:n,name:r,config:i},o]of e)i?.tags?.includes(or)||(yield{id:n,name:r,result:nge(o.filter(([s])=>Array.isArray(t)?t.includes(s):s===t)),interrupts:o.filter(s=>s[0]===xn).map(s=>s[1])})}function*ige(e,t,n,r,i,o,s,a){function c(f){let g={};return f.callbacks!=null&&(g.callbacks=f.callbacks),f.configurable!=null&&(g.configurable=f.configurable),f.maxConcurrency!=null&&(g.max_concurrency=f.maxConcurrency),f.metadata!=null&&(g.metadata=f.metadata),f.recursionLimit!=null&&(g.recursion_limit=f.recursionLimit),f.runId!=null&&(g.run_id=f.runId),f.runName!=null&&(g.run_name=f.runName),f.tags!=null&&(g.tags=f.tags),g}let u=e.configurable?.checkpoint_ns,d={};for(let f of i){if(!(f.subgraphs?.length?f.subgraphs:[f.proc]).find(pN))continue;let h=`${f.name}:${f.id}`;u&&(h=`${u}|${h}`),d[f.id]={configurable:{thread_id:e.configurable?.thread_id,checkpoint_ns:h}}}yield{config:c(e),values:rl(t,n),metadata:r,next:i.map(f=>f.name),tasks:bq(i,o,d,a),parentConfig:s?c(s):void 0}}function bq(e,t,n,r){return e.map(i=>{let o=t.find(([u,d])=>u===i.id&&d===ji)?.[2],s=t.filter(([u,d])=>u===i.id&&d===xn).map(([,,u])=>u),a=(()=>{if(o||s.length||!t.length)return;let u=t.findIndex(([d,f])=>d===i.id&&f===Xc);if(u>=0)return t[u][2];if(typeof r=="string")return t.find(([d,f])=>d===i.id&&f===r)?.[2];if(Array.isArray(r)){let d=t.filter(([f,g])=>f===i.id&&r.includes(g)).map(([,f,g])=>[f,g]);return d.length?nge(d):void 0}})();if(o)return{id:i.id,name:i.name,path:i.path,error:o,interrupts:s,result:a};let c=n?.[i.id];return b(m({id:i.id,name:i.name,path:i.path,interrupts:s},c!==void 0?{state:c}:{}),{result:a})})}function oge(e,t,n){console.log([`${uI(lI.blue,`[${e}:checkpoint]`)}`,`\x1B[1m State at the end of step ${e}:\x1B[0m
`,JSON.stringify(rl(t,n),null,2)].join(""))}function CN(e,t){let n=t.length;console.log([`${uI(lI.blue,`[${e}:tasks]`)}`,`\x1B[1m Starting step ${e} with ${n} task${n===1?"":"s"}:\x1B[0m
`,t.map(r=>`- ${uI(lI.green,String(r.name))} -> ${JSON.stringify(r.input,null,2)}`).join(`
`)].join(""))}function sge(e,t,n){let r={};for(let[i,o]of t)n.includes(i)&&(r[i]||(r[i]=[]),r[i].push(o));console.log([`${uI(lI.blue,`[${e}:writes]`)}`,`\x1B[1m Finished step ${e} with writes to ${Object.keys(r).length} channel${Object.keys(r).length!==1?"s":""}:\x1B[0m
`,Object.entries(r).map(([i,o])=>`- ${uI(lI.yellow,i)} -> ${o.map(s=>JSON.stringify(s)).join(", ")}`).join(`
`)].join(""))}var xq=class extends Ni{_abortController;_innerReader;constructor(e,t){let n=e.getReader(),r=t??new AbortController;super({start(i){return o();function o(){return n.read().then(({done:s,value:a})=>{if(s){i.close();return}return i.enqueue(a),o()})}}}),this._abortController=r,this._innerReader=n}cancel(e){return y(this,null,function*(){this._abortController.abort(e),this._innerReader.releaseLock()})}get signal(){return this._abortController.signal}},EN=class extends Ni{modes;controller;passthroughFn;_closed=!1;get closed(){return this._closed}constructor(e){let t,n=new Promise(r=>{t=r});super({start:r=>{t(r)}}),n.then(r=>{this.controller=r}),this.passthroughFn=e.passthroughFn,this.modes=e.modes}push(e){this.passthroughFn?.(e),this.controller.enqueue(e)}close(){try{this.controller.close()}catch{}finally{this._closed=!0}}error(e){this.controller.error(e)}};function g8e(e){return JSON.stringify(e,function(t,n){let r=this[t];if(r!=null&&typeof r=="object"&&"toDict"in r&&typeof r.toDict=="function"){let{type:i,data:o}=r.toDict();return b(m({},o),{type:i})}return n})}function _8e(e){return e instanceof Error?{error:e.name,message:e.message}:{error:"Error",message:JSON.stringify(e)}}function Cq(e){return typeof e!="object"||e==null?!1:"configurable"in e&&typeof e.configurable=="object"&&e.configurable!=null}function wq(e){return!Cq(e)||!e.configurable.thread_id?null:{thread_id:e.configurable.thread_id,checkpoint_ns:e.configurable.checkpoint_ns||"",checkpoint_id:e.configurable.checkpoint_id||null,checkpoint_map:e.configurable.checkpoint_map||null}}function age(e){if(Cq(e)){let t=Object.fromEntries(Object.entries(e.configurable).filter(([r])=>!r.startsWith("__"))),n=b(m({},e),{configurable:t});return delete n.callbacks,n}return e}function cge(e){let t=b(m({},e),{checkpoint:wq(e.config),parent_checkpoint:wq(e.parentConfig),config:age(e.config),parent_config:age(e.parentConfig),tasks:e.tasks.map(n=>{if(Cq(n.state)){let r=wq(n.state);if(r!=null){let i=b(m({},n),{checkpoint:r});return delete i.state,i}}return n})});return delete t.parentConfig,t}function lge(e){let t=new TextEncoder;return new ReadableStream({start(r){return y(this,null,function*(){let i=u=>{r.enqueue(t.encode(`event: ${u.event}
data: ${g8e(u.data)}

`))};try{try{for(var o=ue(e),s,a,c;s=!(a=yield o.next()).done;s=!1){let u=a.value;let[d,f,g]=u,h=g;if(f==="debug"){let x=g;x.type==="checkpoint"&&(h=b(m({},x),{payload:cge(x.payload)}))}f==="checkpoints"&&(h=cge(g));let v=d?.length?`${f}|${d.join("|")}`:f;i({event:v,data:h})}}catch{c=[a]}finally{try{s&&(a=o.return)&&(yield a.call(o))}finally{if(c)throw c[0]}}}catch(u){i({event:"error",data:_8e(u)})}r.close()})}})}var IN=Symbol.for("INPUT_DONE"),Eq=Symbol.for("INPUT_RESUMING"),y8e=25;function v8e(...e){return new EN({passthroughFn:t=>{for(let n of e)n.modes.has(t[1])&&n.push(t)},modes:new Set(e.flatMap(t=>Array.from(t.modes)))})}var b8e=class extends aN{cache;queue=Promise.resolve();constructor(e){super(),this.cache=e}get(e){return y(this,null,function*(){return this.enqueueOperation("get",e)})}set(e){return y(this,null,function*(){return this.enqueueOperation("set",e)})}clear(e){return y(this,null,function*(){return this.enqueueOperation("clear",e)})}stop(){return y(this,null,function*(){yield this.queue})}enqueueOperation(e,...t){let n=this.queue.then(()=>this.cache[e](...t));return this.queue=n.then(()=>{},()=>{}),n}},uge=class dge{input;output;config;checkpointer;checkpointerGetNextVersion;channels;checkpoint;checkpointIdSaved;checkpointConfig;checkpointMetadata;checkpointNamespace;checkpointPendingWrites=[];checkpointPreviousVersions;step;stop;durability;outputKeys;streamKeys;nodes;skipDoneTasks;prevCheckpointConfig;updatedChannels;status="pending";tasks={};stream;checkpointerPromises=[];isNested;_checkpointerChainedPromise=Promise.resolve();store;cache;manager;interruptAfter;interruptBefore;toInterrupt=[];debug=!1;triggerToNodes;get isResuming(){let t=!1;if(Mn in this.checkpoint.channel_versions)t=!0;else for(let c in this.checkpoint.channel_versions)if(Object.prototype.hasOwnProperty.call(this.checkpoint.channel_versions,c)){t=!0;break}let r=this.config.configurable?.[uu]!==void 0&&this.config.configurable?.[uu],i=this.input===null||this.input===void 0,o=Fi(this.input)&&this.input.resume!=null,s=this.input===Eq,a=!this.isNested&&this.config.metadata?.run_id!==void 0&&this.checkpointMetadata?.run_id!==void 0&&this.config.metadata.run_id===this.checkpointMetadata?.run_id;return t&&(r||i||o||s||a)}constructor(t){this.input=t.input,this.checkpointer=t.checkpointer,this.checkpointer!==void 0?this.checkpointerGetNextVersion=this.checkpointer.getNextVersion.bind(this.checkpointer):this.checkpointerGetNextVersion=tge,this.checkpoint=t.checkpoint,this.checkpointMetadata=t.checkpointMetadata,this.checkpointPreviousVersions=t.checkpointPreviousVersions,this.channels=t.channels,this.checkpointPendingWrites=t.checkpointPendingWrites,this.step=t.step,this.stop=t.stop,this.config=t.config,this.checkpointConfig=t.checkpointConfig,this.isNested=t.isNested,this.manager=t.manager,this.outputKeys=t.outputKeys,this.streamKeys=t.streamKeys,this.nodes=t.nodes,this.skipDoneTasks=t.skipDoneTasks,this.store=t.store,this.cache=t.cache?new b8e(t.cache):void 0,this.stream=t.stream,this.checkpointNamespace=t.checkpointNamespace,this.prevCheckpointConfig=t.prevCheckpointConfig,this.interruptAfter=t.interruptAfter,this.interruptBefore=t.interruptBefore,this.durability=t.durability,this.debug=t.debug,this.triggerToNodes=t.triggerToNodes}static initialize(t){return y(this,null,function*(){let{config:n,stream:r}=t;r!==void 0&&n.configurable?.[qv]!==void 0&&(r=v8e(r,n.configurable[qv]));let i=n.configurable?!("checkpoint_id"in n.configurable):!0,o=n.configurable?.[Ma];n.configurable&&o&&(o.subgraphCounter>0&&(n=ca(n,{[Da]:[n.configurable[Da],o.subgraphCounter.toString()].join(Mr)})),o.subgraphCounter+=1);let s=Qc in(n.configurable??{});!s&&n.configurable?.checkpoint_ns!==void 0&&n.configurable?.checkpoint_ns!==""&&(n=ca(n,{checkpoint_ns:"",checkpoint_id:void 0}));let a=n;n.configurable?.[As]!==void 0&&n.configurable?.[As]?.[n.configurable?.checkpoint_ns]&&(a=ca(n,{checkpoint_id:n.configurable[As][n.configurable?.checkpoint_ns]}));let c=n.configurable?.checkpoint_ns?.split(Mr)??[],u=(yield t.checkpointer?.getTuple(a))??{config:n,checkpoint:eI(),metadata:{source:"input",step:-2,parents:{}},pendingWrites:[]};a=b(m(m({},n),u.config),{configurable:m(m({checkpoint_ns:""},n.configurable),u.config.configurable)});let d=u.parentConfig,f=$d(u.checkpoint),g=m({},u.metadata),h=u.pendingWrites??[],v=jh(t.channelSpecs,f),x=(g.step??0)+1,E=x+(n.recursionLimit??y8e)+1,C=m({},f.channel_versions),S=t.store?new cq(t.store):void 0;return S&&(yield S.start()),new dge({input:t.input,config:n,checkpointer:t.checkpointer,checkpoint:f,checkpointMetadata:g,checkpointConfig:a,prevCheckpointConfig:d,checkpointNamespace:c,channels:v,isNested:s,manager:t.manager,skipDoneTasks:i,step:x,stop:E,checkpointPreviousVersions:C,checkpointPendingWrites:h,outputKeys:t.outputKeys??[],streamKeys:t.streamKeys??[],nodes:t.nodes,stream:r,store:S,cache:t.cache,interruptAfter:t.interruptAfter,interruptBefore:t.interruptBefore,durability:t.durability,debug:t.debug,triggerToNodes:t.triggerToNodes})})}_checkpointerPutAfterPrevious(t){this._checkpointerChainedPromise=this._checkpointerChainedPromise.then(()=>this.checkpointer?.put(t.config,t.checkpoint,t.metadata,t.newVersions)),this.checkpointerPromises.push(this._checkpointerChainedPromise)}putWrites(t,n){let r=n;if(r.length===0)return;r.every(([s])=>s in oN)&&(r=Array.from(new Map(r.map(s=>[s[0],s])).values())),this.checkpointPendingWrites=this.checkpointPendingWrites.filter(s=>s[0]!==t);for(let[s,a]of r)this.checkpointPendingWrites.push([t,s,a]);let i=ca(this.checkpointConfig,{[Da]:this.config.configurable?.checkpoint_ns??"",[V1]:this.checkpoint.id});if(this.durability!=="exit"&&this.checkpointer!=null&&this.checkpointerPromises.push(this.checkpointer.putWrites(i,r,t)),this.tasks&&this._outputWrites(t,r),!n.length||!this.cache||!this.tasks)return;let o=this.tasks[t];o==null||o.cache_key==null||n[0][0]===ji||n[0][0]===xn||this.cache.set([{key:[o.cache_key.ns,o.cache_key.key],value:o.writes,ttl:o.cache_key.ttl}])}_outputWrites(t,n,r=!1){let i=this.tasks[t];if(i!==void 0){if(i.config!==void 0&&(i.config.tags??[]).includes(or))return;if(n.length>0)if(n[0][0]===xn){if(i.path?.[0]===Yo&&i.path?.at(-1)===!0)return;let o=n.filter(s=>s[0]===xn).flatMap(s=>s[1]);this._emit([["updates",{[xn]:o}],["values",{[xn]:o}]])}else n[0][0]!==ji&&this._emit(zh(Ld(Khe(this.outputKeys,[[i,n]],r),"updates")));r||this._emit(zh(Ld(rge([[i,n]],this.streamKeys),"tasks")))}}_matchCachedWrites(){return y(this,null,function*(){if(!this.cache)return[];let t=[],n=([s,a])=>`ns:${s.join(",")}|key:${a}`,r=[],i={};for(let s of Object.values(this.tasks))s.cache_key!=null&&!s.writes.length&&(r.push([s.cache_key.ns,s.cache_key.key]),i[n([s.cache_key.ns,s.cache_key.key])]=s);if(r.length===0)return[];let o=yield this.cache.get(r);for(let{key:s,value:a}of o){let c=i[n(s)];c!=null&&(c.writes.push(...a),t.push({task:c,result:a}))}return t})}tick(t){return y(this,null,function*(){this.store&&!this.store.isRunning&&(yield this.store?.start());let{inputKeys:n=[]}=t;if(this.status!=="pending")throw new Error(`Cannot tick when status is no longer "pending". Current status: "${this.status}"`);if(![IN,Eq].includes(this.input))yield this._first(n);else{if(this.toInterrupt.length>0)throw this.status="interrupt_before",new ym;if(Object.values(this.tasks).every(o=>o.writes.length>0)){let o=Object.values(this.tasks).flatMap(a=>a.writes);this.updatedChannels=Ms(this.checkpoint,this.channels,Object.values(this.tasks),this.checkpointerGetNextVersion,this.triggerToNodes);let s=yield tl(Ld(bN(this.outputKeys,o,this.channels),"values"));if(this._emit(s),this.checkpointPendingWrites=[],yield this._putCheckpoint({source:"loop"}),cI(this.checkpoint,this.interruptAfter,Object.values(this.tasks)))throw this.status="interrupt_after",new ym;this.config.configurable?.[uu]!==void 0&&delete this.config.configurable?.[uu]}else return!1}if(this.step>this.stop)return this.status="out_of_steps",!1;let r=Cm(this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,this.config,!0,{step:this.step,checkpointer:this.checkpointer,isResuming:this.isResuming,manager:this.manager,store:this.store,stream:this.stream,triggerToNodes:this.triggerToNodes,updatedChannels:this.updatedChannels});if(this.tasks=r,this.checkpointer&&this._emit(yield tl(Ld(ige(this.checkpointConfig,this.channels,this.streamKeys,this.checkpointMetadata,Object.values(this.tasks),this.checkpointPendingWrites,this.prevCheckpointConfig,this.outputKeys),"checkpoints"))),Object.values(this.tasks).length===0)return this.status="done",!1;if(this.skipDoneTasks&&this.checkpointPendingWrites.length>0){for(let[o,s,a]of this.checkpointPendingWrites){if(s===ji||s===xn||s===Yi)continue;let c=Object.values(this.tasks).find(u=>u.id===o);c&&c.writes.push([s,a])}for(let o of Object.values(this.tasks))o.writes.length>0&&this._outputWrites(o.id,o.writes,!0)}if(Object.values(this.tasks).every(o=>o.writes.length>0))return this.tick({inputKeys:n});if(cI(this.checkpoint,this.interruptBefore,Object.values(this.tasks)))throw this.status="interrupt_before",new ym;let i=yield tl(Ld(vq(Object.values(this.tasks)),"tasks"));return this._emit(i),!0})}finishAndHandleError(t){return y(this,null,function*(){this.durability==="exit"&&(!this.isNested||typeof t<"u"||this.checkpointNamespace.every(r=>!r.includes(Os)))&&(this._putCheckpoint(this.checkpointMetadata),this._flushPendingWrites());let n=this._suppressInterrupt(t);return(n||t===void 0)&&(this.output=rl(this.channels,this.outputKeys)),n&&(this.tasks!==void 0&&this.checkpointPendingWrites.length>0&&Object.values(this.tasks).some(r=>r.writes.length>0)&&(this.updatedChannels=Ms(this.checkpoint,this.channels,Object.values(this.tasks),this.checkpointerGetNextVersion,this.triggerToNodes),this._emit(zh(Ld(bN(this.outputKeys,Object.values(this.tasks).flatMap(r=>r.writes),this.channels),"values")))),du(t)&&!t.interrupts.length&&this._emit([["updates",{[xn]:[]}],["values",{[xn]:[]}]])),n})}acceptPush(t,n,r){return y(this,null,function*(){if(this.interruptAfter?.length>0&&cI(this.checkpoint,this.interruptAfter,[t])){this.toInterrupt.push(t);return}let i=xN([Yo,t.path??[],n,t.id,r],this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,t.config??{},!0,{step:this.step,checkpointer:this.checkpointer,manager:this.manager,store:this.store,stream:this.stream});if(!i)return;if(this.interruptBefore?.length>0&&cI(this.checkpoint,this.interruptBefore,[i])){this.toInterrupt.push(i);return}this._emit(zh(Ld(vq([i]),"tasks"))),this.debug&&CN(this.step,[i]),this.tasks[i.id]=i,this.skipDoneTasks&&this._matchWrites({[i.id]:i});let o=yield this._matchCachedWrites();for(let{task:s}of o)this._outputWrites(s.id,s.writes,!0);return i})}_suppressInterrupt(t){return du(t)&&!this.isNested}_first(t){return y(this,null,function*(){let{configurable:n}=this.config,r=n?.[Ma];if(r&&r.nullResume!==void 0&&this.putWrites(Qo,[[Yi,r.nullResume]]),Fi(this.input)){let s=this.input.resume!=null;if(this.input.resume!=null&&typeof this.input.resume=="object"&&Object.keys(this.input.resume).every(yN)&&(this.config.configurable??={},this.config.configurable[Gv]=this.input.resume),s&&this.checkpointer==null)throw new Error("Cannot use Command(resume=...) without checkpointer");let a={};for(let[c,u,d]of Whe(this.input,this.checkpointPendingWrites))a[c]??=[],a[c].push([u,d]);if(Object.keys(a).length===0)throw new h8("Received empty Command input");for(let[c,u]of Object.entries(a))this.putWrites(c,u)}let i=(this.checkpointPendingWrites??[]).filter(s=>s[0]===Qo).map(s=>s.slice(1));i.length>0&&Ms(this.checkpoint,this.channels,[{name:Yc,writes:i,triggers:[]}],this.checkpointerGetNextVersion,this.triggerToNodes);let o=Fi(this.input)&&i.length>0;if(this.isResuming||o){for(let a in this.channels)if(Object.prototype.hasOwnProperty.call(this.channels,a)&&this.checkpoint.channel_versions[a]!==void 0){let c=this.checkpoint.channel_versions[a];this.checkpoint.versions_seen[xn]=b(m({},this.checkpoint.versions_seen[xn]),{[a]:c})}let s=yield tl(Ld(bN(this.outputKeys,!0,this.channels),"values"));this._emit(s)}if(this.isResuming)this.input=Eq;else if(o)yield this._putCheckpoint({source:"input"}),this.input=IN;else{let s=yield tl(vN(t,this.input));if(s.length>0){let a=Cm(this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,this.config,!0,{step:this.step});this.updatedChannels=Ms(this.checkpoint,this.channels,Object.values(a).concat([{name:Yc,writes:s,triggers:[]}]),this.checkpointerGetNextVersion,this.triggerToNodes),yield this._putCheckpoint({source:"input"}),this.input=IN}else if(uu in(this.config.configurable??{}))this.input=IN;else throw new h8(`Received no input writes for ${JSON.stringify(t,null,2)}`)}this.isNested||(this.config=ca(this.config,{[uu]:this.isResuming}))})}_emit(t){for(let[n,r]of t)if(this.stream.modes.has(n)&&this.stream.push([this.checkpointNamespace,n,r]),(n==="checkpoints"||n==="tasks")&&this.stream.modes.has("debug")){let i=n==="checkpoints"?this.step-1:this.step,o=new Date().toISOString(),s=n==="checkpoints"?"checkpoint":typeof r=="object"&&r!=null&&"result"in r?"task_result":"task";this.stream.push([this.checkpointNamespace,"debug",{step:i,type:s,timestamp:o,payload:r}])}}_putCheckpoint(t){let n=this.checkpointMetadata===t,r=this.checkpointer!=null&&(this.durability!=="exit"||n),i=o=>{this.prevCheckpointConfig=this.checkpointConfig?.configurable?.checkpoint_id?this.checkpointConfig:void 0,this.checkpointConfig=ca(this.checkpointConfig,{[Da]:this.config.configurable?.checkpoint_ns??""});let s=m({},this.checkpoint.channel_versions),a=ib(this.checkpointPreviousVersions,s);this.checkpointPreviousVersions=s,this._checkpointerPutAfterPrevious({config:m({},this.checkpointConfig),checkpoint:$d(o),metadata:m({},this.checkpointMetadata),newVersions:a}),this.checkpointConfig=b(m({},this.checkpointConfig),{configurable:b(m({},this.checkpointConfig.configurable),{checkpoint_id:this.checkpoint.id})})};n||(this.checkpointMetadata=b(m({},t),{step:this.step,parents:this.config.configurable?.[As]??{}})),this.checkpoint=pu(this.checkpoint,r?this.channels:void 0,this.step,n?{id:this.checkpoint.id}:void 0),r&&i(this.checkpoint),n||(this.step+=1)}_flushPendingWrites(){if(this.checkpointer==null||this.checkpointPendingWrites.length===0)return;let t=ca(this.checkpointConfig,{[Da]:this.config.configurable?.checkpoint_ns??"",[V1]:this.checkpoint.id}),n={};for(let[r,i,o]of this.checkpointPendingWrites)n[r]??=[],n[r].push([i,o]);for(let[r,i]of Object.entries(n))this.checkpointerPromises.push(this.checkpointer.putWrites(t,i,r))}_matchWrites(t){for(let[n,r,i]of this.checkpointPendingWrites){if(r===ji||r===xn||r===Yi)continue;let o=Object.values(t).find(s=>s.id===n);o&&o.writes.push([r,i])}for(let n of Object.values(t))n.writes.length>0&&this._outputWrites(n.id,n.writes,!0)}};function w8e(e){return Gn(e?.message)}var pge=class extends gd{name="StreamMessagesHandler";streamFn;metadatas={};seen={};emittedChatModelRunIds={};stableMessageIdMap={};lc_prefer_streaming=!0;constructor(e){super(),this.streamFn=e}_emit(e,t,n,r=!1){if(r&&t.id!==void 0&&this.seen[t.id]!==void 0)return;let i=t.id;n!=null&&(pd(t)?i??=`run-${n}-tool-${t.tool_call_id}`:((i==null||i===`run-${n}`)&&(i=this.stableMessageIdMap[n]??i??`run-${n}`),this.stableMessageIdMap[n]??=i)),i!==t.id&&(t.id=i,t.lc_kwargs.id=i),t.id!=null&&(this.seen[t.id]=t),this.streamFn([e[0],"messages",[t,e[1]]])}handleChatModelStart(e,t,n,r,i,o,s,a){s&&(!o||!o.includes(Sfe)&&!o.includes("nostream"))&&(this.metadatas[n]=[s.langgraph_checkpoint_ns.split("|"),m({tags:o,name:a},s)])}handleLLMNewToken(e,t,n,r,i,o){let s=o?.chunk;this.emittedChatModelRunIds[n]=!0,this.metadatas[n]!==void 0&&(w8e(s)?this._emit(this.metadatas[n],s.message,n):this._emit(this.metadatas[n],new Cr({content:e}),n))}handleLLMEnd(e,t){if(this.metadatas[t]!==void 0){if(!this.emittedChatModelRunIds[t]){let n=e.generations?.[0]?.[0];Gn(n?.message)&&this._emit(this.metadatas[t],n?.message,t,!0),delete this.emittedChatModelRunIds[t]}delete this.metadatas[t],delete this.stableMessageIdMap[t]}}handleLLMError(e,t){delete this.metadatas[t]}handleChainStart(e,t,n,r,i,o,s,a){if(o!==void 0&&a===o.langgraph_node&&(i===void 0||!i.includes(or))&&(this.metadatas[n]=[o.langgraph_checkpoint_ns.split("|"),m({tags:i,name:a},o)],typeof t=="object")){for(let c of Object.values(t))if((Gn(c)||Lc(c))&&c.id!==void 0)this.seen[c.id]=c;else if(Array.isArray(c))for(let u of c)(Gn(u)||Lc(u))&&u.id!==void 0&&(this.seen[u.id]=u)}}handleChainEnd(e,t){let n=this.metadatas[t];if(delete this.metadatas[t],n!==void 0){if(Gn(e))this._emit(n,e,t,!0);else if(Array.isArray(e))for(let r of e)Gn(r)&&this._emit(n,r,t,!0);else if(e!=null&&typeof e=="object"){for(let r of Object.values(e))if(Gn(r))this._emit(n,r,t,!0);else if(Array.isArray(r))for(let i of r)Gn(i)&&this._emit(n,i,t,!0)}}}handleChainError(e,t){delete this.metadatas[t]}};var x8e=500,C8e=2,E8e=128e3,I8e=3,S8e=[400,401,402,403,404,405,406,407,409],k8e=e=>{if(e.message.startsWith("Cancel")||e.message.startsWith("AbortError")||e.name==="AbortError"||e.name==="GraphValueError"||e?.code==="ECONNABORTED")return!1;let t=e?.response?.status??e?.status;return!(t&&S8e.includes(+t)||e?.error?.code==="insufficient_quota")};function Iq(e,t,n,r){return y(this,null,function*(){let i=e.retry_policy??t,o=i!==void 0?i.initialInterval??x8e:0,s=0,a,c,{config:u}=e;for(n&&(u=ca(u,n)),u=b(m({},u),{signal:r});!r?.aborted;){e.writes.splice(0,e.writes.length),a=void 0;try{c=yield e.proc.invoke(e.input,u);break}catch(d){if(a=d,a.pregelTaskId=e.id,Ofe(a)){let v=u?.configurable?.checkpoint_ns,x=a.command;if(x.graph===v){for(let E of e.writers)yield E.invoke(x,u);a=void 0;break}else if(x.graph===Ao.PARENT){let E=Nhe(v);a.command=new Ao(b(m({},a.command),{graph:E}))}}if(Kv(a)||i===void 0||(s+=1,s>=(i.maxAttempts??I8e))||!(i.retryOn??k8e)(a))break;o=Math.min(i.maxInterval??E8e,o*(i.backoffFactor??C8e));let g=i.jitter?Math.floor(o+Math.random()*1e3):o;yield new Promise(v=>setTimeout(v,g));let h=a.name??a.constructor.unminifiable_name??a.constructor.name;(i?.logWarning??!0)&&console.log(`Retrying task "${String(e.name)}" after ${o.toFixed(2)}ms (attempt ${s}) after ${h}: ${a}`),u=ca(u,{[uu]:!0})}}return{task:e,result:c,error:a,signalAborted:r?.aborted}})}var Sq=Symbol.for("promiseAdded");function T8e(){let e={next:()=>{},wait:Promise.resolve(Sq)};function t(n){e.next=()=>{e.wait=new Promise(t),n(Sq)}}return e.wait=new Promise(t),e}var mge=class{nodeFinished;loop;constructor({loop:e,nodeFinished:t}){this.loop=e,this.nodeFinished=t}tick(){return y(this,arguments,function*(e={}){let{timeout:t,retryPolicy:n,onStepWrite:r,maxConcurrency:i}=e,o=new Set,s,a=new AbortController,c=a.signal,u=t?AbortSignal.timeout(t):void 0,d=Object.values(this.loop.tasks).filter(S=>S.writes.length===0),{signals:f,disposeCombinedSignal:g}=this._initializeAbortSignals({exceptionSignal:c,stepTimeoutSignal:u,signal:e.signal}),h=this._executeTasksWithRetry(d,{signals:f,retryPolicy:n,maxConcurrency:i});try{for(var v=ue(h),x,E,C;x=!(E=yield v.next()).done;x=!1){let{task:S,error:A,signalAborted:P}=E.value;this._commit(S,A),du(A)||Kv(A)&&!du(s)?s=A:A&&(o.size===0||!P)&&(a.abort(),o.add(A))}}catch{C=[E]}finally{try{x&&(E=v.return)&&(yield E.call(v))}finally{if(C)throw C[0]}}if(g?.(),r?.(this.loop.step,Object.values(this.loop.tasks).map(S=>S.writes).flat()),o.size===1)throw Array.from(o)[0];if(o.size>1)throw new AggregateError(Array.from(o),`Multiple errors occurred during superstep ${this.loop.step}. See the "errors" field of this exception for more details.`);if(du(s)||Kv(s)&&this.loop.isNested)throw s})}_initializeAbortSignals({exceptionSignal:e,stepTimeoutSignal:t,signal:n}){let r=this.loop.config.configurable?.[d8]??{},i=r.externalAbortSignal??n,o=t??r.timeoutAbortSignal,{signal:s,dispose:a}=ob(i,o,e),c={externalAbortSignal:i,timeoutAbortSignal:o,composedAbortSignal:s};return this.loop.config=ca(this.loop.config,{[d8]:c}),{signals:c,disposeCombinedSignal:a}}_executeTasksWithRetry(e,t){return he(this,null,function*(){let{retryPolicy:n,maxConcurrency:r,signals:i}=t??{},o=T8e(),s={},a={executingTasksMap:s,barrier:o,retryPolicy:n,scheduleTask:(g,h,v)=>y(this,null,function*(){return this.loop.acceptPush(g,h,v)})};if(i?.composedAbortSignal?.aborted)throw new Error("Abort");let c=0,u,d=ob(i?.externalAbortSignal,i?.timeoutAbortSignal),f=d.signal?new Promise((g,h)=>{u=()=>h(new Error("Abort")),d.signal?.addEventListener("abort",u,{once:!0})}):void 0;for(;(c===0||Object.keys(s).length>0)&&e.length;){for(;Object.values(s).length<(r??e.length)&&c<e.length;c+=1){let h=e[c];s[h.id]=Iq(h,n,{[qE]:fge?.bind(a,this,h)},i?.composedAbortSignal).catch(v=>({task:h,error:v,signalAborted:i?.composedAbortSignal?.aborted}))}let g=yield new z(Promise.race([...Object.values(s),...f?[f]:[],o.wait]));g!==Sq&&(yield g,u!=null&&(d.signal?.removeEventListener("abort",u),d.dispose?.()),delete s[g.task.id])}})}_commit(e,t){if(t!==void 0)if(du(t)){if(t.interrupts.length){let n=t.interrupts.map(i=>[xn,i]),r=e.writes.filter(i=>i[0]===Yi);r.length&&n.push(...r),this.loop.putWrites(e.id,n)}}else Kv(t)&&e.writes.length?this.loop.putWrites(e.id,e.writes):this.loop.putWrites(e.id,[[ji,{message:t.message,name:t.name}]]);else this.nodeFinished&&(e.config?.tags==null||!e.config.tags.includes(or))&&this.nodeFinished(String(e.name)),e.writes.length===0&&e.writes.push([WE,null]),this.loop.putWrites(e.id,e.writes)}};function fge(s,a,c,u,d){return y(this,arguments,function*(e,t,n,r,i,o={}){let f=t.config?.configurable?.[Ma];if(!f)throw new Error(`BUG: No scratchpad found on task ${t.name}__${t.id}`);let g=f.callCounter;f.callCounter+=1;let h=new Qhe({func:n,name:r,input:i,cache:o.cache,retry:o.retry,callbacks:o.callbacks}),v=yield this.scheduleTask(t,g,h);if(!v)return;let x=this.executingTasksMap[v.id];if(x!==void 0)return x;if(v.writes.length>0){let E=v.writes.filter(([S])=>S===Xc),C=v.writes.filter(([S])=>S===ji);if(E.length>0){if(E.length===1)return Promise.resolve(E[0][1]);throw new Error(`BUG: multiple returns found for task ${v.name}__${v.id}`)}if(C.length>0){if(C.length===1){let S=C[0][1],A=S instanceof Error?S:new Error(String(S));return Promise.reject(A)}throw new Error(`BUG: multiple errors found for task ${v.name}__${v.id}`)}return}else{let E=Iq(v,o.retry,{[qE]:fge.bind(this,e,v)});return this.executingTasksMap[v.id]=E,this.barrier.next(),E.then(({result:C,error:S})=>S?Promise.reject(S):C)}})}var Bd=class extends Error{constructor(e){super(e),this.name="GraphValidationError"}};function hge({nodes:e,channels:t,inputChannels:n,outputChannels:r,streamChannels:i,interruptAfterNodes:o,interruptBeforeNodes:s}){if(!t)throw new Bd("Channels not provided");let a=new Set,c=new Set;for(let[u,d]of Object.entries(e)){if(u===xn)throw new Bd(`"Node name ${xn} is reserved"`);if(d.constructor===Fd)d.triggers.forEach(f=>a.add(f));else throw new Bd(`Invalid node type ${typeof d}, expected PregelNode`)}for(let u of a)if(!(u in t))throw new Bd(`Subscribed channel '${String(u)}' not in channels`);if(Array.isArray(n)){if(n.every(u=>!a.has(u)))throw new Bd(`None of the input channels ${n} are subscribed to by any node`)}else if(!a.has(n))throw new Bd(`Input channel ${String(n)} is not subscribed to by any node`);Array.isArray(r)?r.forEach(u=>c.add(u)):c.add(r),i&&!Array.isArray(i)?c.add(i):Array.isArray(i)&&i.forEach(u=>c.add(u));for(let u of c)if(!(u in t))throw new Bd(`Output channel '${String(u)}' not in channels`);if(o&&o!=="*"){for(let u of o)if(!(u in e))throw new Bd(`Node ${String(u)} not in nodes`)}if(s&&s!=="*"){for(let u of s)if(!(u in e))throw new Bd(`Node ${String(u)} not in nodes`)}}function kq(e,t){if(Array.isArray(e)){for(let n of e)if(!(n in t))throw new Error(`Key ${String(n)} not found in channels`)}else if(!(e in t))throw new Error(`Key ${String(e)} not found in channels`)}var gge=class _ge extends mc{lc_graph_name="Topic";unique=!1;accumulate=!1;seen;values;constructor(t){super(),this.unique=t?.unique??this.unique,this.accumulate=t?.accumulate??this.accumulate,this.seen=new Set,this.values=[]}fromCheckpoint(t){let n=new _ge({unique:this.unique,accumulate:this.accumulate});return typeof t<"u"&&(n.seen=new Set(t[0]),n.values=t[1]),n}update(t){let n=!1;this.accumulate||(n=this.values.length>0,this.values=[]);let r=t.flat();if(r.length>0)if(this.unique)for(let i of r)this.seen.has(i)||(n=!0,this.seen.add(i),this.values.push(i));else n=!0,this.values.push(...r);return n}get(){if(this.values.length===0)throw new Hr;return this.values}checkpoint(){return[[...this.seen],this.values]}isAvailable(){return this.values.length!==0}};function yge(e){let t=gr.getRunnableConfig();if(!t)throw new Error("Called interrupt() outside the context of a graph.");let n=t.configurable;if(!n)throw new Error("No configurable found in config");if(!n[ri])throw new Wv("No checkpointer set",{lc_error_code:"MISSING_CHECKPOINTER"});let i=n[Ma];i.interruptCounter+=1;let o=i.interruptCounter;if(i.resume.length>0&&o<i.resume.length)return n[pc]?.([[Yi,i.resume]]),i.resume[o];if(i.nullResume!==void 0){if(i.resume.length!==o)throw new Error(`Resume length mismatch: ${i.resume.length} !== ${o}`);let c=i.consumeNullResume();return i.resume.push(c),n[pc]?.([[Yi,i.resume]]),c}let s=n[Da]?.split(Mr),a=s?zd(s.join(Mr)):void 0;throw new ym([{id:a,value:e}])}var vge=class{static subscribeTo(e,t){let{key:n,tags:r}=m({key:void 0,tags:void 0},t??{});if(Array.isArray(e)&&n!==void 0)throw new Error("Can't specify a key when subscribing to multiple channels");let i;typeof e=="string"?n?i={[n]:e}:i=[e]:i=Object.fromEntries(e.map(s=>[s,s]));let o=Array.isArray(e)?e:[e];return new Fd({channels:i,triggers:o,tags:r})}static writeTo(e,t){let n=[];for(let r of e)n.push({channel:r,value:nl,skipNone:!1});for(let[r,i]of Object.entries(t??{}))dt.isRunnable(i)||typeof i=="function"?n.push({channel:r,value:nl,skipNone:!0,mapper:ti(i)}):n.push({channel:r,value:i,skipNone:!1});return new Bi(n)}},A8e=class extends dt{lc_namespace=["langgraph","pregel"];invoke(e,t){throw new Error("Not implemented")}withConfig(e){return super.withConfig(e)}stream(e,t){return super.stream(e,t)}},bge=class e extends A8e{static lc_name(){return"LangGraph"}lc_namespace=["langgraph","pregel"];lg_is_pregel=!0;nodes;channels;inputChannels;outputChannels;autoValidate=!0;streamMode=["values"];streamChannels;interruptAfter;interruptBefore;stepTimeout;debug=!1;checkpointer;retryPolicy;config;store;cache;userInterrupt;triggerToNodes={};constructor(t){super(t);let{streamMode:n}=t;if(n!=null&&!Array.isArray(n)&&(n=[n]),this.nodes=t.nodes,this.channels=t.channels,Jo in this.channels&&"lc_graph_name"in this.channels[Jo]&&this.channels[Jo].lc_graph_name!=="Topic")throw new Error(`Channel '${Jo}' is reserved and cannot be used in the graph.`);this.channels[Jo]=new gge({accumulate:!1}),this.autoValidate=t.autoValidate??this.autoValidate,this.streamMode=n??this.streamMode,this.inputChannels=t.inputChannels,this.outputChannels=t.outputChannels,this.streamChannels=t.streamChannels??this.streamChannels,this.interruptAfter=t.interruptAfter,this.interruptBefore=t.interruptBefore,this.stepTimeout=t.stepTimeout??this.stepTimeout,this.debug=t.debug??this.debug,this.checkpointer=t.checkpointer,this.retryPolicy=t.retryPolicy,this.config=t.config,this.store=t.store,this.cache=t.cache,this.name=t.name,this.triggerToNodes=t.triggerToNodes??this.triggerToNodes,this.userInterrupt=t.userInterrupt,this.autoValidate&&this.validate()}withConfig(t){let n=so(this.config,t);return new this.constructor(b(m({},this),{config:n}))}validate(){hge({nodes:this.nodes,channels:this.channels,outputChannels:this.outputChannels,inputChannels:this.inputChannels,streamChannels:this.streamChannels,interruptAfterNodes:this.interruptAfter,interruptBeforeNodes:this.interruptBefore});for(let[t,n]of Object.entries(this.nodes))for(let r of n.triggers)this.triggerToNodes[r]??=[],this.triggerToNodes[r].push(t);return this}get streamChannelsList(){return Array.isArray(this.streamChannels)?this.streamChannels:this.streamChannels?[this.streamChannels]:Object.keys(this.channels)}get streamChannelsAsIs(){return this.streamChannels?this.streamChannels:Object.keys(this.channels)}getGraphAsync(t){return y(this,null,function*(){return this.getGraph(t)})}*getSubgraphs(t,n){for(let[r,i]of Object.entries(this.nodes)){if(t!==void 0&&!t.startsWith(r))continue;let o=i.subgraphs?.length?i.subgraphs:[i.bound];for(let s of o){let a=pN(s);if(a!==void 0){if(r===t){yield[r,a];return}if(t===void 0&&(yield[r,a]),n){let c=t;t!==void 0&&(c=t.slice(r.length+1));for(let[u,d]of a.getSubgraphs(c,n))yield[`${r}${Mr}${u}`,d]}}}}}getSubgraphsAsync(t,n){return he(this,null,function*(){yield*mn(this.getSubgraphs(t,n))})}_prepareStateSnapshot(o){return y(this,arguments,function*({config:t,saved:n,subgraphCheckpointer:r,applyPendingWrites:i=!1}){if(n===void 0)return{values:{},next:[],config:t,tasks:[]};let s=jh(this.channels,n.checkpoint);if(n.pendingWrites?.length){let h=n.pendingWrites.filter(([v,x])=>v===Qo).map(([v,x,E])=>[String(x),E]);h.length>0&&Ms(n.checkpoint,s,[{name:Yc,writes:h,triggers:[]}],void 0,this.triggerToNodes)}let a=Object.values(Cm(n.checkpoint,n.pendingWrites,this.nodes,s,n.config,!0,{step:(n.metadata?.step??-1)+1,store:this.store})),c=yield tl(this.getSubgraphsAsync()),u=n.config.configurable?.checkpoint_ns??"",d={};for(let h of a){let v=c.find(([E])=>E===h.name);if(!v)continue;let x=`${String(h.name)}${Os}${h.id}`;if(u&&(x=`${u}${Mr}${x}`),r===void 0){let E={configurable:{thread_id:n.config.configurable?.thread_id,checkpoint_ns:x}};d[h.id]=E}else{let E={configurable:{[ri]:r,thread_id:n.config.configurable?.thread_id,checkpoint_ns:x}},C=v[1];d[h.id]=yield C.getState(E,{subgraphs:!0})}}if(i&&n.pendingWrites?.length){let h=Object.fromEntries(a.map(x=>[x.id,x]));for(let[x,E,C]of n.pendingWrites)[ji,xn,Fh].includes(E)||x in h&&h[x].writes.push([String(E),C]);let v=a.filter(x=>x.writes.length>0);v.length>0&&Ms(n.checkpoint,s,v,void 0,this.triggerToNodes)}let f=n?.metadata;f&&n?.config?.configurable?.thread_id&&(f=b(m({},f),{thread_id:n.config.configurable.thread_id}));let g=a.filter(h=>h.writes.length===0).map(h=>h.name);return{values:rl(s,this.streamChannelsAsIs),next:g,tasks:bq(a,n?.pendingWrites??[],d,this.streamChannelsAsIs),metadata:f,config:xm(n.config,n.metadata),createdAt:n.checkpoint.ts,parentConfig:n.parentConfig}})}getState(t,n){return y(this,null,function*(){let r=t.configurable?.[ri]??this.checkpointer;if(!r)throw new Wv("No checkpointer set",{lc_error_code:"MISSING_CHECKPOINTER"});let i=t.configurable?.checkpoint_ns??"";if(i!==""&&t.configurable?.[ri]===void 0){let g=lN(i);try{for(var c=ue(this.getSubgraphsAsync(g,!0)),u,d,f;u=!(d=yield c.next()).done;u=!1){let[h,v]=d.value;if(h===g)return yield v.getState(Bh(t,{[ri]:r}),{subgraphs:n?.subgraphs})}}catch{f=[d]}finally{try{u&&(d=c.return)&&(yield d.call(c))}finally{if(f)throw f[0]}}throw new Error(`Subgraph with namespace "${g}" not found.`)}let o=so(this.config,t),s=yield r.getTuple(t);return yield this._prepareStateSnapshot({config:o,saved:s,subgraphCheckpointer:n?.subgraphs?r:void 0,applyPendingWrites:!t.configurable?.checkpoint_id})})}getStateHistory(t,n){return he(this,null,function*(){let r=t.configurable?.[ri]??this.checkpointer;if(!r)throw new Wv("No checkpointer set",{lc_error_code:"MISSING_CHECKPOINTER"});let i=t.configurable?.checkpoint_ns??"";if(i!==""&&t.configurable?.[ri]===void 0){let v=lN(i);try{for(var s=ue(this.getSubgraphsAsync(v,!0)),a,c,u;a=!(c=yield new z(s.next())).done;a=!1){let[x,E]=c.value;if(x===v){yield*mn(E.getStateHistory(Bh(t,{[ri]:r}),n));return}}}catch{u=[c]}finally{try{a&&(c=s.return)&&(yield new z(c.call(s)))}finally{if(u)throw u[0]}}throw new Error(`Subgraph with namespace "${v}" not found.`)}let o=so(this.config,t,{configurable:{checkpoint_ns:i}});try{for(var d=ue(r.list(o,n)),f,g,h;f=!(g=yield new z(d.next())).done;f=!1){let v=g.value;yield this._prepareStateSnapshot({config:v.config,saved:v})}}catch{h=[g]}finally{try{f&&(g=d.return)&&(yield new z(g.call(d)))}finally{if(h)throw h[0]}}})}bulkUpdateState(t,n){return y(this,null,function*(){let r=t.configurable?.[ri]??this.checkpointer;if(!r)throw new Wv("No checkpointer set",{lc_error_code:"MISSING_CHECKPOINTER"});if(n.length===0)throw new Error("No supersteps provided");if(n.some(f=>f.updates.length===0))throw new Error("No updates provided");let i=t.configurable?.checkpoint_ns??"";if(i!==""&&t.configurable?.[ri]===void 0){let f=lN(i);try{for(var a=ue(this.getSubgraphsAsync(f,!0)),c,u,d;c=!(u=yield a.next()).done;c=!1){let[,g]=u.value;return yield g.bulkUpdateState(Bh(t,{[ri]:r}),n)}}catch{d=[u]}finally{try{c&&(u=a.return)&&(yield u.call(a))}finally{if(d)throw d[0]}}throw new Error(`Subgraph "${f}" not found`)}let o=(f,g)=>y(this,null,function*(){let h=this.config?so(this.config,f):f,v=yield r.getTuple(h),x=v!==void 0?$d(v.checkpoint):eI(),E=m({},v?.checkpoint.channel_versions),C=v?.metadata?.step??-1,S=Bh(h,{checkpoint_ns:h.configurable?.checkpoint_ns??""}),A=h.metadata??{};v?.config.configurable&&(S=Bh(h,v.config.configurable),A=m(m({},v.metadata),A));let{values:P,asNode:F}=g[0];if(P==null&&F===void 0){if(g.length>1)throw new Vn("Cannot create empty checkpoint with multiple updates");let fe=yield r.put(S,pu(x,void 0,C),{source:"update",step:C+1,parents:v?.metadata?.parents??{}},{});return xm(fe,v?v.metadata:void 0)}let B=jh(this.channels,x);if(P===null&&F===Ft){if(g.length>1)throw new Vn("Cannot apply multiple updates when clearing state");if(v){let Se=Cm(x,v.pendingWrites||[],this.nodes,B,v.config,!0,{step:(v.metadata?.step??-1)+1,checkpointer:r,store:this.store}),Fe=(v.pendingWrites||[]).filter(Me=>Me[0]===Qo).map(Me=>Me.slice(1));Fe.length>0&&Ms(x,B,[{name:Yc,writes:Fe,triggers:[]}],r.getNextVersion.bind(r),this.triggerToNodes);for(let[Me,ce,gt]of v.pendingWrites||[])[ji,xn,Fh].includes(ce)||Me in Se&&Se[Me].writes.push([ce,gt]);Ms(x,B,Object.values(Se),r.getNextVersion.bind(r),this.triggerToNodes)}let fe=yield r.put(S,pu(x,B,C),b(m({},A),{source:"update",step:C+1,parents:v?.metadata?.parents??{}}),ib(E,x.channel_versions));return xm(fe,v?v.metadata:void 0)}if(F===Efe){if(g.length>1)throw new Vn("Cannot copy checkpoint with multiple updates");if(v==null)throw new Vn("Cannot copy a non-existent checkpoint");let fe=Me=>!Array.isArray(Me)||Me.length===0?!1:Me.every(ce=>Array.isArray(ce)&&ce.length===2),Se=pu(x,void 0,C),Fe=yield r.put(v.parentConfig??Bh(v.config,{checkpoint_id:void 0}),Se,{source:"fork",step:C+1,parents:v.metadata?.parents??{}},{});if(fe(P)){let Me=Cm(Se,v.pendingWrites,this.nodes,B,Fe,!1,{step:C+2}),ce=Object.values(Me).reduce((ve,{name:ke,id:We})=>(ve[ke]??=[],ve[ke].push({id:We}),ve),{}),gt=P.reduce((ve,ke)=>{let[We,_t]=ke;ve[_t]??=[];let Ot=ve[_t].length,Bt=ce[_t]?.[Ot]?.id;return ve[_t].push({values:We,asNode:_t,taskId:Bt}),ve},{});return o(xm(Fe,v.metadata),Object.values(gt).flat())}return xm(Fe,v.metadata)}if(F===Yc){if(g.length>1)throw new Vn("Cannot apply multiple updates when updating as input");let fe=yield tl(vN(this.inputChannels,P));if(fe.length===0)throw new Vn(`Received no input writes for ${JSON.stringify(this.inputChannels,null,2)}`);Ms(x,B,[{name:Yc,writes:fe,triggers:[]}],r.getNextVersion.bind(this.checkpointer),this.triggerToNodes);let Se=v?.metadata?.step!=null?v.metadata.step+1:-1,Fe=yield r.put(S,pu(x,B,Se),{source:"input",step:Se,parents:v?.metadata?.parents??{}},ib(E,x.channel_versions));return yield r.putWrites(Fe,fe,Nd(Yc,x.id)),xm(Fe,v?v.metadata:void 0)}if(h.configurable?.checkpoint_id===void 0&&v?.pendingWrites!==void 0&&v.pendingWrites.length>0){let fe=Cm(x,v.pendingWrites,this.nodes,B,v.config,!0,{store:this.store,checkpointer:this.checkpointer,step:(v.metadata?.step??-1)+1}),Se=(v.pendingWrites??[]).filter(Me=>Me[0]===Qo).map(Me=>Me.slice(1));Se.length>0&&Ms(v.checkpoint,B,[{name:Yc,writes:Se,triggers:[]}],void 0,this.triggerToNodes);for(let[Me,ce,gt]of v.pendingWrites)[ji,xn,Fh].includes(ce)||fe[Me]===void 0||fe[Me].writes.push([ce,gt]);let Fe=Object.values(fe).filter(Me=>Me.writes.length>0);Fe.length>0&&Ms(x,B,Fe,void 0,this.triggerToNodes)}let ee=Object.values(x.versions_seen).map(fe=>Object.values(fe)).flat().find(fe=>!!fe),D=[];if(g.length===1){let{values:fe,asNode:Se,taskId:Fe}=g[0];if(Se===void 0&&Object.keys(this.nodes).length===1)[Se]=Object.keys(this.nodes);else if(Se===void 0&&ee===void 0)typeof this.inputChannels=="string"&&this.nodes[this.inputChannels]!==void 0&&(Se=this.inputChannels);else if(Se===void 0){let Me=Object.entries(x.versions_seen).map(([ce,gt])=>Object.values(gt).map(ve=>[ve,ce])).flat().filter(([ce,gt])=>gt!==xn).sort(([ce],[gt])=>rN(ce,gt));Me&&(Me.length===1?Se=Me[0][1]:Me[Me.length-1][0]!==Me[Me.length-2][0]&&(Se=Me[Me.length-1][1]))}if(Se===void 0)throw new Vn('Ambiguous update, specify "asNode"');D.push({values:fe,asNode:Se,taskId:Fe})}else for(let{asNode:fe,values:Se,taskId:Fe}of g){if(fe==null)throw new Vn('"asNode" is required when applying multiple updates');D.push({values:Se,asNode:fe,taskId:Fe})}let pe=[];for(let{asNode:fe,values:Se,taskId:Fe}of D){if(this.nodes[fe]===void 0)throw new Vn(`Node "${fe.toString()}" does not exist`);let Me=this.nodes[fe].getWriters();if(!Me.length)throw new Vn(`No writers found for node "${fe.toString()}"`);pe.push({name:fe,input:Se,proc:Me.length>1?Er.from(Me,{omitSequenceTags:!0}):Me[0],writes:[],triggers:[xn],id:Fe??Nd(xn,x.id),writers:[]})}for(let fe of pe)yield fe.proc.invoke(fe.input,kn(b(m({},h),{store:h?.store??this.store}),{runName:h.runName??`${this.getName()}UpdateState`,configurable:{[pc]:Se=>fe.writes.push(...Se),[Qc]:(Se,Fe=!1)=>aI(x,B,fe,Se,Fe)}}));for(let fe of pe){let Se=fe.writes.filter(Fe=>Fe[0]!==Yo);v!==void 0&&Se.length>0&&(yield r.putWrites(S,Se,fe.id))}Ms(x,B,pe,r.getNextVersion.bind(this.checkpointer),this.triggerToNodes);let xe=ib(E,x.channel_versions),Ge=yield r.put(S,pu(x,B,C+1),{source:"update",step:C+1,parents:v?.metadata?.parents??{}},xe);for(let fe of pe){let Se=fe.writes.filter(Fe=>Fe[0]===Yo);Se.length>0&&(yield r.putWrites(Ge,Se,fe.id))}return xm(Ge,v?v.metadata:void 0)}),s=t;for(let{updates:f}of n)s=yield o(s,f);return s})}updateState(t,n,r){return y(this,null,function*(){return this.bulkUpdateState(t,[{updates:[{values:n,asNode:r}]}])})}_defaults(t){let F=t,{debug:n,streamMode:r,inputKeys:i,outputKeys:o,interruptAfter:s,interruptBefore:a}=F,c=se(F,["debug","streamMode","inputKeys","outputKeys","interruptAfter","interruptBefore"]),u=!0,d=n!==void 0?n:this.debug,f=o;f===void 0?f=this.streamChannelsAsIs:kq(f,this.channels);let g=i;g===void 0?g=this.inputChannels:kq(g,this.channels);let h=a??this.interruptBefore??[],v=s??this.interruptAfter??[],x;r!==void 0?(x=Array.isArray(r)?r:[r],u=typeof r=="string"):(t.configurable?.[$h]!==void 0?x=["values"]:x=this.streamMode,u=!0);let E;if(this.checkpointer===!1)E=void 0;else if(t!==void 0&&t.configurable?.[ri]!==void 0)E=t.configurable[ri];else{if(this.checkpointer===!0)throw new Error("checkpointer: true cannot be used for root graphs.");E=this.checkpointer}let C=t.store??this.store,S=t.cache??this.cache;if(t.durability!=null&&t.checkpointDuring!=null)throw new Error("Cannot use both `durability` and `checkpointDuring` at the same time.");let A=(()=>{if(t.checkpointDuring!=null)return t.checkpointDuring===!1?"exit":"async"})(),P=t.durability??A??t?.configurable?.[u8]??"async";return[d,x,g,f,c,h,v,E,C,u,S,P]}stream(t,n){return y(this,null,function*(){let r=new AbortController,i=b(m({recursionLimit:this.config?.recursionLimit},n),{signal:ob(n?.signal,r.signal).signal}),o=yield fi(e.prototype,this,"stream").call(this,t,i);return new xq(n?.encoding==="text/event-stream"?lge(o):o,r)})}streamEvents(t,n,r){let i=new AbortController,o=b(m({recursionLimit:this.config?.recursionLimit},n),{callbacks:Yhe(this.config?.callbacks,n?.callbacks),signal:ob(n?.signal,i.signal).signal});return new xq(super.streamEvents(t,o,r),i)}_validateInput(t){return y(this,null,function*(){return t})}_validateContext(t){return y(this,null,function*(){return t})}_streamIterator(t,n){return he(this,null,function*(){let r="version"in(n??{})?void 0:n?.encoding??void 0,i=n?.subgraphs,o=iI(this.config,n);if(o.recursionLimit===void 0||o.recursionLimit<1)throw new Error('Passed "recursionLimit" must be at least 1.');if(this.checkpointer!==void 0&&this.checkpointer!==!1&&o.configurable===void 0)throw new Error('Checkpointer requires one or more of the following "configurable" keys: "thread_id", "checkpoint_ns", "checkpoint_id"');let s=yield new z(this._validateInput(t)),fe=o,{runId:a}=fe,c=se(fe,["runId"]),[u,d,,f,g,h,v,x,E,C,S,A]=this._defaults(c);typeof g.context<"u"?g.context=yield new z(this._validateContext(g.context)):g.configurable=yield new z(this._validateContext(g.configurable));let P=new EN({modes:new Set(d)});if(this.checkpointer===!0){g.configurable??={};let gt=g.configurable[Da]??"";g.configurable[Da]=gt.split(Mr).map(ve=>ve.split(Os)[0]).join(Mr)}if(d.includes("messages")){let gt=new pge(ke=>P.push(ke)),{callbacks:ve}=g;if(ve===void 0)g.callbacks=[gt];else if(Array.isArray(ve))g.callbacks=ve.concat(gt);else{let ke=ve.copy();ke.addHandler(gt,!0),g.callbacks=ke}}g.writer??=gt=>{if(!d.includes("custom"))return;let ve=Rhe()?.configurable?.[Da]?.split(Mr).slice(0,-1);P.push([ve??[],"custom",gt])},g.interrupt??=this.userInterrupt??yge;let F=yield new z(oo(g)),B=yield new z(F?.handleChainStart(this.toJSON(),Jhe(t,"input"),a,void 0,void 0,void 0,g?.runName??this.getName())),ee=tI(this.channels),D,pe,Ge=y(this,null,function*(){try{D=yield uge.initialize({input:s,config:g,checkpointer:x,nodes:this.nodes,channelSpecs:ee,outputKeys:f,streamKeys:this.streamChannelsAsIs,store:E,cache:S,stream:P,interruptAfter:v,interruptBefore:h,manager:B,debug:this.debug,triggerToNodes:this.triggerToNodes,durability:A});let gt=new mge({loop:D,nodeFinished:g.configurable?.[Ife]});n?.subgraphs&&(D.config.configurable=b(m({},D.config.configurable),{[qv]:D.stream})),yield this._runLoop({loop:D,runner:gt,debug:u,config:g}),A==="sync"&&(yield Promise.all(D?.checkpointerPromises??[]))}catch(gt){pe=gt}finally{try{D&&(yield D.store?.stop(),yield D.cache?.stop()),yield Promise.all(D?.checkpointerPromises??[])}catch(gt){pe=pe??gt}pe?P.error(pe):P.close()}});try{try{for(var Se=ue(P),Fe,Me,ce;Fe=!(Me=yield new z(Se.next())).done;Fe=!1){let gt=Me.value;if(gt===void 0)throw new Error("Data structure error.");let[ve,ke,We]=gt;if(d.includes(ke)){if(r==="text/event-stream"){i?yield[ve,ke,We]:yield[null,ke,We];continue}i&&!C?yield[ve,ke,We]:C?i?yield[ve,We]:yield We:yield[ke,We]}}}catch{ce=[Me]}finally{try{Fe&&(Me=Se.return)&&(yield new z(Me.call(Se)))}finally{if(ce)throw ce[0]}}}catch(gt){throw yield new z(B?.handleChainError(pe)),gt}finally{yield new z(Ge)}yield new z(B?.handleChainEnd(D?.output??{},a,void 0,void 0,void 0))})}invoke(t,n){return y(this,null,function*(){let r=n?.streamMode??"values",i=b(m({},n),{outputKeys:n?.outputKeys??this.outputChannels,streamMode:r,encoding:void 0}),o=[],s=yield this.stream(t,i),a=[],c;try{for(var u=ue(s),d,f,g;d=!(f=yield u.next()).done;d=!1){let h=f.value;r==="values"?q1(h)?a.push(h[xn]):c=h:o.push(h)}}catch{g=[f]}finally{try{d&&(f=u.return)&&(yield f.call(u))}finally{if(g)throw g[0]}}if(r==="values"){if(a.length>0){let h=a.flat(1);if(c==null)return{[xn]:h};if(typeof c=="object")return b(m({},c),{[xn]:h})}return c}return o})}_runLoop(t){return y(this,null,function*(){let{loop:n,runner:r,debug:i,config:o}=t,s;try{for(;yield n.tick({inputKeys:this.inputChannels});){for(let{task:a}of yield n._matchCachedWrites())n._outputWrites(a.id,a.writes,!0);i&&oge(n.checkpointMetadata.step,n.channels,this.streamChannelsList),i&&CN(n.step,Object.values(n.tasks)),yield r.tick({timeout:this.stepTimeout,retryPolicy:this.retryPolicy,onStepWrite:(a,c)=>{i&&sge(a,c,this.streamChannelsList)},maxConcurrency:o.maxConcurrency,signal:o.signal})}if(n.status==="out_of_steps")throw new Afe([`Recursion limit of ${o.recursionLimit} reached`,"without hitting a stop condition. You can increase the",'limit by setting the "recursionLimit" config key.'].join(" "),{lc_error_code:"GRAPH_RECURSION_LIMIT"})}catch(a){if(s=a,!(yield n.finishAndHandleError(s)))throw a}finally{s===void 0&&(yield n.finishAndHandleError())}})}clearCache(){return y(this,null,function*(){yield this.cache?.clear([])})}};var Tq=class{path;ends;constructor(e){dt.isRunnable(e.path)?this.path=e.path:this.path=ti(e.path).withConfig({runName:"Branch"}),this.ends=Array.isArray(e.pathMap)?e.pathMap.reduce((t,n)=>(t[n]=n,t),{}):e.pathMap}run(e,t){return Bi.registerWriter(new aa({name:"<branch_run>",trace:!1,func:(n,r)=>y(this,null,function*(){try{return yield this._route(n,r,e,t)}catch(i){throw i.name===m8.unminifiable_name&&console.warn(`[WARN]: 'NodeInterrupt' thrown in conditional edge. This is likely a bug in your graph implementation.
NodeInterrupt should only be thrown inside a node, not in edge conditions.`),i}})}))}_route(e,t,n,r){return y(this,null,function*(){let i=yield this.path.invoke(r?r(t):e,t);Array.isArray(i)||(i=[i]);let o;if(this.ends?o=i.map(a=>zi(a)?a:this.ends[a]):o=i,o.some(a=>!a))throw new Error("Branch condition returned unknown or null destination");if(o.filter(zi).some(a=>a.node===Ft))throw new Vn("Cannot send a packet to the END node");return(yield n(o,t))??e})}},xge=class{nodes;edges;branches;entryPoint;compiled=!1;constructor(){this.nodes={},this.edges=new Set,this.branches={}}warnIfCompiled(e){this.compiled&&console.warn(e)}get allEdges(){return this.edges}addNode(...e){function t(r){return r.length>=1&&typeof r[0]!="string"}let n=t(e)?Array.isArray(e[0])?e[0]:Object.entries(e[0]):[[e[0],e[1],e[2]]];if(n.length===0)throw new Error("No nodes provided in `addNode`");for(let[r,i,o]of n){for(let a of[Mr,Os])if(r.includes(a))throw new Error(`"${a}" is a reserved character and is not allowed in node names.`);if(this.warnIfCompiled("Adding a node to a graph that has already been compiled. This will not be reflected in the compiled graph."),r in this.nodes)throw new Error(`Node \`${r}\` already present.`);if(r===Ft)throw new Error(`Node \`${r}\` is reserved.`);let s=ti(i);this.nodes[r]={runnable:s,metadata:o?.metadata,subgraphs:sI(s)?[s]:o?.subgraphs,ends:o?.ends}}return this}addEdge(e,t){if(this.warnIfCompiled("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph."),e===Ft)throw new Error("END cannot be a start node");if(t===Mn)throw new Error("START cannot be an end node");if(Array.from(this.edges).some(([n])=>n===e)&&!("channels"in this))throw new Error(`Already found path for ${e}. For multiple edges, use StateGraph.`);return this.edges.add([e,t]),this}addConditionalEdges(e,t,n){let r=typeof e=="object"?e:{source:e,path:t,pathMap:n};if(this.warnIfCompiled("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph."),!dt.isRunnable(r.path)){let o=Array.isArray(r.pathMap)?r.pathMap.join(","):Object.keys(r.pathMap??{}).join(",");r.path=ti(r.path).withConfig({runName:`Branch<${r.source}${o!==""?`,${o}`:""}>`.slice(0,63)})}let i=r.path.getName()==="RunnableLambda"?"condition":r.path.getName();if(this.branches[r.source]&&this.branches[r.source][i])throw new Error(`Condition \`${i}\` already present for node \`${e}\``);return this.branches[r.source]??={},this.branches[r.source][i]=new Tq(r),this}setEntryPoint(e){return this.warnIfCompiled("Setting the entry point of a graph that has already been compiled. This will not be reflected in the compiled graph."),this.addEdge(Mn,e)}setFinishPoint(e){return this.warnIfCompiled("Setting a finish point of a graph that has already been compiled. This will not be reflected in the compiled graph."),this.addEdge(e,Ft)}compile({checkpointer:e,interruptBefore:t,interruptAfter:n,name:r}={}){this.validate([...Array.isArray(t)?t:[],...Array.isArray(n)?n:[]]);let i=new Aq({builder:this,checkpointer:e,interruptAfter:n,interruptBefore:t,autoValidate:!1,nodes:{},channels:{[Mn]:new bm,[Ft]:new bm},inputChannels:Mn,outputChannels:Ft,streamChannels:[],streamMode:"values",name:r});for(let[o,s]of Object.entries(this.nodes))i.attachNode(o,s);for(let[o,s]of this.edges)i.attachEdge(o,s);for(let[o,s]of Object.entries(this.branches))for(let[a,c]of Object.entries(s))i.attachBranch(o,a,c);return i.validate()}validate(e){let t=new Set([...this.allEdges].map(([r,i])=>r));for(let[r]of Object.entries(this.branches))t.add(r);for(let r of t)if(r!==Mn&&!(r in this.nodes))throw new Error(`Found edge starting at unknown node \`${r}\``);let n=new Set([...this.allEdges].map(([r,i])=>i));for(let[r,i]of Object.entries(this.branches))for(let o of Object.values(i))if(o.ends!=null)for(let s of Object.values(o.ends))n.add(s);else{n.add(Ft);for(let s of Object.keys(this.nodes))s!==r&&n.add(s)}for(let r of Object.values(this.nodes))for(let i of r.ends??[])n.add(i);for(let r of Object.keys(this.nodes))if(!n.has(r))throw new Mfe([`Node \`${r}\` is not reachable.`,"","If you are returning Command objects from your node,",'make sure you are passing names of potential destination nodes as an "ends" array','into ".addNode(..., { ends: ["node1", "node2"] })".'].join(`
`),{lc_error_code:"UNREACHABLE_NODE"});for(let r of n)if(r!==Ft&&!(r in this.nodes))throw new Error(`Found edge ending at unknown node \`${r}\``);if(e){for(let r of e)if(!(r in this.nodes))throw new Error(`Interrupt node \`${r}\` is not present`)}this.compiled=!0}},Aq=class extends bge{builder;constructor(n){var r=n,{builder:e}=r,t=se(r,["builder"]);super(t),this.builder=e}attachNode(e,t){this.channels[e]=new bm,this.nodes[e]=new Fd({channels:[],triggers:[],metadata:t.metadata,subgraphs:t.subgraphs,ends:t.ends}).pipe(t.runnable).pipe(new Bi([{channel:e,value:nl}],[or])),this.streamChannels.push(e)}attachEdge(e,t){if(t===Ft){if(e===Mn)throw new Error("Cannot have an edge from START to END");this.nodes[e].writers.push(new Bi([{channel:Ft,value:nl}],[or]))}else this.nodes[t].triggers.push(e),this.nodes[t].channels.push(e)}attachBranch(e,t,n){e===Mn&&!this.nodes[Mn]&&(this.nodes[Mn]=vge.subscribeTo(Mn,{tags:[or]})),this.nodes[e].pipe(n.run(i=>{let o=i.map(s=>zi(s)?s:{channel:s===Ft?Ft:`branch:${e}:${t}:${s}`,value:nl});return new Bi(o,[or])}));let r=n.ends?Object.values(n.ends):Object.keys(this.nodes);for(let i of r)if(i!==Ft){let o=`branch:${e}:${t}:${i}`;this.channels[o]=new bm,this.nodes[i].triggers.push(o),this.nodes[i].channels.push(o)}}getGraphAsync(e){return y(this,null,function*(){let t=e?.xray,n=new ah,r={[Mn]:n.addNode({schema:rd.any()},Mn)},i={},o={};t&&(o=Object.fromEntries((yield tl(this.getSubgraphsAsync())).filter(d=>wge(d[1]))));function s(d,f,g,h=!1){if(f===Ft&&i[Ft]===void 0&&(i[Ft]=n.addNode({schema:rd.any()},Ft)),r[d]!==void 0){if(i[f]===void 0)throw new Error(`End node ${f} not found!`);return n.addEdge(r[d],i[f],g!==f?g:void 0,h)}}for(let[d,f]of Object.entries(this.builder.nodes)){let g=Xo(d),h=f.runnable,v=f.metadata??{};if(this.interruptBefore?.includes(d)&&this.interruptAfter?.includes(d)?v.__interrupt="before,after":this.interruptBefore?.includes(d)?v.__interrupt="before":this.interruptAfter?.includes(d)&&(v.__interrupt="after"),t){let x=typeof t=="number"?t-1:t,E=o[d]!==void 0?yield o[d].getGraphAsync(b(m({},e),{xray:x})):h.getGraph(e);if(E.trimFirstNode(),E.trimLastNode(),Object.keys(E.nodes).length>1){let A=function(F){return F?F.lc_runnable:!1},P=function(F,B){if(F!==void 0&&!Fc(F))return F;if(A(B))try{let ee=B.getName();return ee=ee.startsWith("Runnable")?ee.slice(8):ee,ee}catch{return B.getName()}else return B.name??"UnknownSchema"};var c=A,u=P;let[C,S]=n.extend(E,g);if(C===void 0)throw new Error(`Could not extend subgraph "${d}" due to missing entrypoint.`);S!==void 0&&(r[g]=m({name:P(S.id,S.data)},S)),i[g]=m({name:P(C.id,C.data)},C)}else{let C=n.addNode(h,g,v);r[g]=C,i[g]=C}}else{let x=n.addNode(h,g,v);r[g]=x,i[g]=x}}let a=[...this.builder.allEdges].sort(([d],[f])=>d<f?-1:f>d?1:0);for(let[d,f]of a)s(Xo(d),Xo(f));for(let[d,f]of Object.entries(this.builder.branches)){let g=b(m({},Object.fromEntries(Object.keys(this.builder.nodes).filter(h=>h!==d).map(h=>[Xo(h),Xo(h)]))),{[Ft]:Ft});for(let h of Object.values(f)){let v;h.ends!==void 0?v=h.ends:v=g;for(let[x,E]of Object.entries(v))s(Xo(d),Xo(E),x,!0)}}for(let[d,f]of Object.entries(this.builder.nodes))if(f.ends!==void 0)for(let g of f.ends)s(Xo(d),Xo(g),void 0,!0);return n})}getGraph(e){let t=e?.xray,n=new ah,r={[Mn]:n.addNode({schema:rd.any()},Mn)},i={},o={};t&&(o=Object.fromEntries(zh(this.getSubgraphs()).filter(d=>wge(d[1]))));function s(d,f,g,h=!1){return f===Ft&&i[Ft]===void 0&&(i[Ft]=n.addNode({schema:rd.any()},Ft)),n.addEdge(r[d],i[f],g!==f?g:void 0,h)}for(let[d,f]of Object.entries(this.builder.nodes)){let g=Xo(d),h=f.runnable,v=f.metadata??{};if(this.interruptBefore?.includes(d)&&this.interruptAfter?.includes(d)?v.__interrupt="before,after":this.interruptBefore?.includes(d)?v.__interrupt="before":this.interruptAfter?.includes(d)&&(v.__interrupt="after"),t){let x=typeof t=="number"?t-1:t,E=o[d]!==void 0?o[d].getGraph(b(m({},e),{xray:x})):h.getGraph(e);if(E.trimFirstNode(),E.trimLastNode(),Object.keys(E.nodes).length>1){let A=function(F){return F?F.lc_runnable:!1},P=function(F,B){if(F!==void 0&&!Fc(F))return F;if(A(B))try{let ee=B.getName();return ee=ee.startsWith("Runnable")?ee.slice(8):ee,ee}catch{return B.getName()}else return B.name??"UnknownSchema"};var c=A,u=P;let[C,S]=n.extend(E,g);if(C===void 0)throw new Error(`Could not extend subgraph "${d}" due to missing entrypoint.`);S!==void 0&&(r[g]=m({name:P(S.id,S.data)},S)),i[g]=m({name:P(C.id,C.data)},C)}else{let C=n.addNode(h,g,v);r[g]=C,i[g]=C}}else{let x=n.addNode(h,g,v);r[g]=x,i[g]=x}}let a=[...this.builder.allEdges].sort(([d],[f])=>d<f?-1:f>d?1:0);for(let[d,f]of a)s(Xo(d),Xo(f));for(let[d,f]of Object.entries(this.builder.branches)){let g=b(m({},Object.fromEntries(Object.keys(this.builder.nodes).filter(h=>h!==d).map(h=>[Xo(h),Xo(h)]))),{[Ft]:Ft});for(let h of Object.values(f)){let v;h.ends!==void 0?v=h.ends:v=g;for(let[x,E]of Object.entries(v))s(Xo(d),Xo(E),x,!0)}}return n}};function wge(e){return typeof e.attachNode=="function"&&typeof e.attachEdge=="function"}function Xo(e){return e==="subgraph"?`"${e}"`:e}var Hh=(e,t)=>e.size===t.size&&[...e].every(n=>t.has(n)),Cge=class Ege extends mc{lc_graph_name="NamedBarrierValue";names;seen;constructor(t){super(),this.names=t,this.seen=new Set}fromCheckpoint(t){let n=new Ege(this.names);return typeof t<"u"&&(n.seen=new Set(t)),n}update(t){let n=!1;for(let r of t)if(this.names.has(r))this.seen.has(r)||(this.seen.add(r),n=!0);else throw new Vn(`Value ${JSON.stringify(r)} not in names ${JSON.stringify(this.names)}`);return n}get(){if(!Hh(this.names,this.seen))throw new Hr}checkpoint(){return[...this.seen]}consume(){return this.seen&&this.names&&Hh(this.seen,this.names)?(this.seen=new Set,!0):!1}isAvailable(){return!!this.names&&Hh(this.names,this.seen)}},Ige=class Sge extends mc{lc_graph_name="NamedBarrierValueAfterFinish";names;seen;finished;constructor(t){super(),this.names=t,this.seen=new Set,this.finished=!1}fromCheckpoint(t){let n=new Sge(this.names);if(typeof t<"u"){let[r,i]=t;n.seen=new Set(r),n.finished=i}return n}update(t){let n=!1;for(let r of t)if(this.names.has(r)&&!this.seen.has(r))this.seen.add(r),n=!0;else if(!this.names.has(r))throw new Vn(`Value ${JSON.stringify(r)} not in names ${JSON.stringify(this.names)}`);return n}get(){if(!this.finished||!Hh(this.names,this.seen))throw new Hr}checkpoint(){return[[...this.seen],this.finished]}consume(){return this.finished&&this.seen&&this.names&&Hh(this.seen,this.names)?(this.seen=new Set,this.finished=!1,!0):!1}finish(){return!this.finished&&this.names&&Hh(this.names,this.seen)?(this.finished=!0,!0):!1}isAvailable(){return this.finished&&!!this.names&&Hh(this.names,this.seen)}};var O8e="lg:",M8e=class{_map=new WeakMap;_extensionCache=new Map;get(e){return this._map.get(e)}extend(e,t){let n=this.get(e);this._map.set(e,t(n))}remove(e){return this._map.delete(e),this}has(e){return this._map.has(e)}getChannelsForSchema(e){let t={},n=sh(e);for(let[r,i]of Object.entries(n)){let o=this.get(i);o?.reducer?t[r]=new rI(o.reducer.fn,o.default):t[r]=new nI}return t}getExtendedChannelSchemas(e,t){if(Object.keys(t).length===0)return e;let n=Object.entries(t).filter(([,o])=>o===!0).sort(([o],[s])=>o.localeCompare(s)).map(([o,s])=>`${o}:${s}`).join("|"),r=this._extensionCache.get(n)??new WeakMap;if(r.has(e))return r.get(e);let i=e;if(t.withReducerSchema||t.withJsonSchemaExtrasAsDescription){let o=Object.entries(sh(e)).map(([s,a])=>{let c=this.get(a),u=t.withReducerSchema?c?.reducer?.schema??a:a;if(t.withJsonSchemaExtrasAsDescription&&c?.jsonSchemaExtra){let d=Bc(u)??Bc(a),f=JSON.stringify(b(m({},c.jsonSchemaExtra),{description:d}));u=u.describe(`${O8e}${f}`)}return[s,u]});i=hR(e,Object.fromEntries(o)),Vr(i)&&(i._def.unknownKeys="strip")}return t.asPartial&&(i=Zy(i)),r.set(e,i),this._extensionCache.set(n,r),i}},Oq=new M8e;var Ud="__root__",Mq=Symbol.for("langgraph.state.partial"),dI=class extends xge{channels={};waitingEdges=new Set;_schemaDefinition;_schemaRuntimeDefinition;_inputDefinition;_inputRuntimeDefinition;_outputDefinition;_outputRuntimeDefinition;_schemaDefinitions=new Map;_metaRegistry=Oq;_configSchema;_configRuntimeSchema;_interrupt;_writer;constructor(e,t){if(super(),F8e(e)){let r=this._metaRegistry.getChannelsForSchema(e.state),i=e.input!=null?this._metaRegistry.getChannelsForSchema(e.input):r,o=e.output!=null?this._metaRegistry.getChannelsForSchema(e.output):r;this._schemaDefinition=r,this._schemaRuntimeDefinition=e.state,this._inputDefinition=i,this._inputRuntimeDefinition=e.input??Mq,this._outputDefinition=o,this._outputRuntimeDefinition=e.output??e.state}else if(Ea(e)){let r=this._metaRegistry.getChannelsForSchema(e);this._schemaDefinition=r,this._schemaRuntimeDefinition=e,this._inputDefinition=r,this._inputRuntimeDefinition=Mq,this._outputDefinition=r,this._outputRuntimeDefinition=e}else if(L8e(e))this._schemaDefinition=e.input.spec,this._inputDefinition=e.input.spec,this._outputDefinition=e.output.spec;else if($8e(e))this._schemaDefinition=e.stateSchema.spec,this._inputDefinition=e.input?.spec??this._schemaDefinition,this._outputDefinition=e.output?.spec??this._schemaDefinition;else if(R8e(e)||kge(e)){let r=kge(e)?e.spec:e;this._schemaDefinition=r}else if(N8e(e)){let r=D8e(e.channels);this._schemaDefinition=r}else throw new Error("Invalid StateGraph input. Make sure to pass a valid Annotation.Root or Zod schema.");this._inputDefinition??=this._schemaDefinition,this._outputDefinition??=this._schemaDefinition,this._addSchema(this._schemaDefinition),this._addSchema(this._inputDefinition),this._addSchema(this._outputDefinition);function n(r){return typeof r=="object"&&r!=null&&!("spec"in r)&&!Ea(r)}n(t)?(Ea(t.context)&&(this._configRuntimeSchema=t.context),this._interrupt=t.interrupt,this._writer=t.writer):Ea(t)&&(this._configRuntimeSchema=t)}get allEdges(){return new Set([...this.edges,...Array.from(this.waitingEdges).flatMap(([e,t])=>e.map(n=>[n,t]))])}_addSchema(e){if(!this._schemaDefinitions.has(e)){this._schemaDefinitions.set(e,e);for(let[t,n]of Object.entries(e)){let r;if(typeof n=="function"?r=n():r=n,this.channels[t]!==void 0){if(this.channels[t]!==r&&r.lc_graph_name!=="LastValue")throw new Error(`Channel "${t}" already exists with a different type.`)}else this.channels[t]=r}}}addNode(...e){function t(r){return r.length>=1&&typeof r[0]!="string"}let n=t(e)?Array.isArray(e[0])?e[0]:Object.entries(e[0]).map(([r,i])=>[r,i]):[[e[0],e[1],e[2]]];if(n.length===0)throw new Error("No nodes provided in `addNode`");for(let[r,i,o]of n){if(r in this.channels)throw new Error(`${r} is already being used as a state attribute (a.k.a. a channel), cannot also be used as a node name.`);for(let d of[Mr,Os])if(r.includes(d))throw new Error(`"${d}" is a reserved character and is not allowed in node names.`);if(this.warnIfCompiled("Adding a node to a graph that has already been compiled. This will not be reflected in the compiled graph."),r in this.nodes)throw new Error(`Node \`${r}\` already present.`);if(r===Ft||r===Mn)throw new Error(`Node \`${r}\` is reserved.`);let s=this._schemaDefinition;o?.input!==void 0&&(Ea(o.input)?s=this._metaRegistry.getChannelsForSchema(o.input):o.input.spec!==void 0&&(s=o.input.spec)),s!==void 0&&this._addSchema(s);let a;dt.isRunnable(i)?a=i:typeof i=="function"?a=new aa({func:i,name:r,trace:!1}):a=ti(i);let c=o?.cachePolicy;typeof c=="boolean"&&(c=c?{}:void 0);let u={runnable:a,retryPolicy:o?.retryPolicy,cachePolicy:c,metadata:o?.metadata,input:s??this._schemaDefinition,subgraphs:sI(a)?[a]:o?.subgraphs,ends:o?.ends,defer:o?.defer};this.nodes[r]=u}return this}addEdge(e,t){if(typeof e=="string")return super.addEdge(e,t);this.compiled&&console.warn("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph.");for(let n of e){if(n===Ft)throw new Error("END cannot be a start node");if(!Object.keys(this.nodes).some(r=>r===n))throw new Error(`Need to add a node named "${n}" first`)}if(t===Ft)throw new Error("END cannot be an end node");if(!Object.keys(this.nodes).some(n=>n===t))throw new Error(`Need to add a node named "${t}" first`);return this.waitingEdges.add([e,t]),this}addSequence(e){let t=Array.isArray(e)?e:Object.entries(e);if(t.length===0)throw new Error("Sequence requires at least one node.");let n;for(let[r,i,o]of t){if(r in this.nodes)throw new Error(`Node names must be unique: node with the name "${r}" already exists.`);let s=r;this.addNode(s,i,o),n!=null&&this.addEdge(n,s),n=s}return this}compile({checkpointer:e,store:t,cache:n,interruptBefore:r,interruptAfter:i,name:o,description:s}={}){this.validate([...Array.isArray(r)?r:[],...Array.isArray(i)?i:[]]);let a=Object.keys(this._schemaDefinitions.get(this._outputDefinition)),c=a.length===1&&a[0]===Ud?Ud:a,u=Object.keys(this.channels),d=u.length===1&&u[0]===Ud?Ud:u,f=this._interrupt,g=new P8e({builder:this,checkpointer:e,interruptAfter:i,interruptBefore:r,autoValidate:!1,nodes:{},channels:b(m({},this.channels),{[Mn]:new bm}),inputChannels:Mn,outputChannels:c,streamChannels:d,streamMode:"updates",store:t,cache:n,name:o,description:s,userInterrupt:f});g.attachNode(Mn);for(let[h,v]of Object.entries(this.nodes))g.attachNode(h,v);g.attachBranch(Mn,p8,Tge(),{withReader:!1});for(let[h]of Object.entries(this.nodes))g.attachBranch(h,p8,Tge(),{withReader:!1});for(let[h,v]of this.edges)g.attachEdge(h,v);for(let[h,v]of this.waitingEdges)g.attachEdge(h,v);for(let[h,v]of Object.entries(this.branches))for(let[x,E]of Object.entries(v))g.attachBranch(h,x,E);return g.validate()}};function D8e(e){let t={};for(let[n,r]of Object.entries(e))n===Ud?t[n]=cN(r):t[n]=cN(r);return t}var P8e=class extends Aq{description;_metaRegistry=Oq;constructor(n){var r=n,{description:e}=r,t=se(r,["description"]);super(t),this.description=e}attachNode(e,t){let n;e===Mn?n=Object.entries(this.builder._schemaDefinitions.get(this.builder._inputDefinition)).map(([a])=>a):n=Object.keys(this.builder.channels);function r(a){if(Fi(a))return a.graph===Ao.PARENT?null:a._updateAsTuples();if(Array.isArray(a)&&a.length>0&&a.some(c=>Fi(c))){let c=[];for(let u of a)if(Fi(u)){if(u.graph===Ao.PARENT)continue;c.push(...u._updateAsTuples())}else c.push([Ud,u]);return c}else if(a!=null)return[[Ud,a]];return null}let i=e;function o(a){if(a){if(Fi(a))return a.graph===Ao.PARENT?null:a._updateAsTuples().filter(([c])=>n.includes(c));if(Array.isArray(a)&&a.length>0&&a.some(Fi)){let c=[];for(let u of a)if(Fi(u)){if(u.graph===Ao.PARENT)continue;c.push(...u._updateAsTuples().filter(([d])=>n.includes(d)))}else{let d=o(u);d&&c.push(...d??[])}return c}else{if(typeof a=="object"&&!Array.isArray(a))return Object.entries(a).filter(([c])=>n.includes(c));{let c=Array.isArray(a)?"array":typeof a;throw new Vn(`Expected node "${i.toString()}" to return an object or an array containing at least one Command object, received ${c}`,{lc_error_code:"INVALID_GRAPH_NODE_RETURN_VALUE"})}}}else return null}let s=[{value:nl,mapper:new aa({func:n.length&&n[0]===Ud?r:o,trace:!1,recurse:!1})}];if(e===Mn)this.nodes[e]=new Fd({tags:[or],triggers:[Mn],channels:[Mn],writers:[new Bi(s,[or])]});else{let a=t?.input??this.builder._schemaDefinition,c=Object.fromEntries(Object.keys(this.builder._schemaDefinitions.get(a)).map(f=>[f,f])),u=Object.keys(c).length===1&&Ud in c,d=`branch:to:${e}`;this.channels[d]=t?.defer?new Mhe:new bm(!1),this.nodes[e]=new Fd({triggers:[d],channels:u?Object.keys(c):c,writers:[new Bi(s,[or])],mapper:u?void 0:f=>Object.fromEntries(Object.entries(f).filter(([g])=>g in c)),bound:t?.runnable,metadata:t?.metadata,retryPolicy:t?.retryPolicy,cachePolicy:t?.cachePolicy,subgraphs:t?.subgraphs,ends:t?.ends})}}attachEdge(e,t){if(t!==Ft){if(typeof e=="string")this.nodes[e].writers.push(new Bi([{channel:`branch:to:${t}`,value:null}],[or]));else if(Array.isArray(e)){let n=`join:${e.join("+")}:${t}`;this.channels[n]=this.builder.nodes[t].defer?new Ige(new Set(e)):new Cge(new Set(e)),this.nodes[t].triggers.push(n);for(let r of e)this.nodes[r].writers.push(new Bi([{channel:n,value:r}],[or]))}}}attachBranch(e,t,n,r={withReader:!0}){let i=(o,s)=>y(null,null,function*(){let a=o.filter(u=>u!==Ft);if(!a.length)return;let c=a.map(u=>zi(u)?u:{channel:u===Ft?u:`branch:to:${u}`,value:e});yield Bi.doWrite(b(m({},s),{tags:(s.tags??[]).concat([or])}),c)});this.nodes[e].writers.push(n.run(i,r.withReader?o=>$he.doRead(o,this.streamChannels??this.outputChannels,!0):void 0))}_validateInput(e){return y(this,null,function*(){if(e==null)return e;let t=(()=>{let n=this.builder._inputRuntimeDefinition,r=this.builder._schemaRuntimeDefinition,i=o=>{if(o!=null)return this._metaRegistry.getExtendedChannelSchemas(o,{withReducerSchema:!0})};if(Ea(n))return i(n);if(n===Mq)return Zy(i(r))})();if(Fi(e)){let n=e;return e.update&&t!=null&&(n.update=Vy(t,e.update)),n}return t!=null?Vy(t,e):e})}isInterrupted(e){return q1(e)}_validateContext(e){return y(this,null,function*(){let t=this.builder._configRuntimeSchema;return Ea(t)&&Vy(t,e),e})}};function R8e(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.values(e).every(t=>typeof t=="function"||uq(t))}function kge(e){return typeof e=="object"&&e!==null&&"lc_graph_name"in e&&e.lc_graph_name==="AnnotationRoot"}function N8e(e){return typeof e=="object"&&e!==null&&e.channels!==void 0}function $8e(e){return typeof e=="object"&&e!==null&&e.stateSchema!==void 0}function L8e(e){return typeof e=="object"&&e!==null&&e.stateSchema===void 0&&e.input!==void 0&&e.output!==void 0}function F8e(e){return!(typeof e!="object"||e==null||!("state"in e)||!Ea(e.state)||"input"in e&&!Ea(e.input)||"output"in e&&!Ea(e.output))}function j8e(e){if(zi(e))return[e];let t=[];Fi(e)?t.push(e):Array.isArray(e)&&t.push(...e.filter(Fi));let n=[];for(let r of t){if(r.graph===Ao.PARENT)throw new f8(r);zi(r.goto)||typeof r.goto=="string"?n.push(r.goto):Array.isArray(r.goto)&&n.push(...r.goto)}return n}function Tge(){let e=new aa({func:j8e,tags:[or],trace:!1,recurse:!1,name:"<control_branch>"});return new Tq({path:e})}var Oge=e=>Array.isArray(e)&&e.every(Gn),z8e=e=>typeof e=="object"&&e!=null&&"messages"in e&&Oge(e.messages),B8e=e=>typeof e=="object"&&e!=null&&"lg_tool_call"in e,Dq=class extends aa{tools;handleToolErrors=!0;trace=!1;constructor(e,t){let{name:n,tags:r,handleToolErrors:i}=t??{};super({name:n,tags:r,func:(o,s)=>this.run(o,s)}),this.tools=e,this.handleToolErrors=i??this.handleToolErrors}runTool(e,t){return y(this,null,function*(){let n=this.tools.find(r=>r.name===e.name);try{if(n===void 0)throw new Error(`Tool "${e.name}" not found.`);let r=yield n.invoke(b(m({},e),{type:"tool_call"}),t);return Gn(r)&&r.getType()==="tool"||Fi(r)?r:new io({status:"success",name:n.name,content:typeof r=="string"?r:JSON.stringify(r),tool_call_id:e.id})}catch(r){if(!this.handleToolErrors||du(r))throw r;return new io({status:"error",content:`Error: ${r.message}
 Please fix your mistakes.`,name:e.name,tool_call_id:e.id??""})}})}run(e,t){return y(this,null,function*(){let n;if(B8e(e))n=[yield this.runTool(e.lg_tool_call,t)];else{let o;if(Oge(e))o=e;else if(z8e(e))o=e.messages;else throw new Error("ToolNode only accepts BaseMessage[] or { messages: BaseMessage[] } as input.");let s=new Set(o.filter(c=>c.getType()==="tool").map(c=>c.tool_call_id)),a;for(let c=o.length-1;c>=0;c-=1){let u=o[c];if(Io(u)){a=u;break}}if(a==null||!Io(a))throw new Error("ToolNode only accepts AIMessages as input.");n=yield Promise.all(a.tool_calls?.filter(c=>c.id==null||!s.has(c.id)).map(c=>this.runTool(c,t))??[])}if(!n.some(Fi))return Array.isArray(e)?n:{messages:n};let r=[],i=null;for(let o of n)Fi(o)?o.graph===Ao.PARENT&&Array.isArray(o.goto)&&o.goto.every(s=>zi(s))?i?i.goto.push(...o.goto):i=new Ao({graph:Ao.PARENT,goto:o.goto}):r.push(o):r.push(Array.isArray(e)?[o]:{messages:[o]});return i&&r.push(i),r})}};var Pq=/<name>(.*?)<\/name>/s,Rq=/<content>(.*?)<\/content>/s;function U8e(e){if(!(Gn(e)&&(Io(e)||Lc(e)&&Jf(e)))||!e.name)return e;let{name:n}=e;if(typeof e.content=="string"){let o=Object.keys(e.lc_kwargs??{}).length>0?e.lc_kwargs:e;return new Sn(b(m({},o),{content:`<name>${n}</name><content>${e.content}</content>`,name:void 0}))}let r=[],i=0;for(let o of e.content)typeof o=="string"?(i+=1,r.push(`<name>${n}</name><content>${o}</content>`)):typeof o=="object"&&"type"in o&&o.type==="text"?(i+=1,r.push(b(m({},o),{text:`<name>${n}</name><content>${o.text}</content>`}))):r.push(o);return i||r.unshift({type:"text",text:`<name>${n}</name><content></content>`}),new Sn(b(m({},e.lc_kwargs),{content:r,name:void 0}))}function V8e(e){if(!Io(e)||!e.content)return e;let t=[],n;if(Array.isArray(e.content))t=e.content.filter(r=>{if(r.type==="text"&&typeof r.text=="string"){let i=r.text.match(Pq),o=r.text.match(Rq);return i&&(!o||o[1]==="")?(n=i[1],!1):!0}return!0}).map(r=>{if(r.type==="text"&&typeof r.text=="string"){let i=r.text.match(Pq),o=r.text.match(Rq);return!i||!o?r:(n=i[1],b(m({},r),{text:o[1]}))}return r});else{let r=e.content,i=r.match(Pq),o=r.match(Rq);if(!i||!o)return e;n=i[1],t=o[1]}return new Sn(b(m({},Object.keys(e.lc_kwargs??{}).length>0?e.lc_kwargs:e),{content:t,name:n}))}function SN(e,t){let n,r;if(t==="inline")n=U8e,r=V8e;else throw new Error(`Invalid agent name mode: ${t}. Needs to be one of: "inline"`);function i(o){return o.map(n)}return Er.from([Ir.from(i),e,Ir.from(r)])}var H8e="__remove_all__";function Nq(e,t){let n=Array.isArray(e)?e:[e],r=Array.isArray(t)?t:[t],i=n.map(ys),o=r.map(ys);for(let d of i)(d.id===null||d.id===void 0)&&(d.id=ei(),d.lc_kwargs.id=d.id);let s;for(let d=0;d<o.length;d+=1){let f=o[d];(f.id===null||f.id===void 0)&&(f.id=ei(),f.lc_kwargs.id=f.id),f.getType()==="remove"&&f.id===H8e&&(s=d)}if(s!=null)return o.slice(s+1);let a=[...i],c=new Map(a.map((d,f)=>[d.id,f])),u=new Set;for(let d of o){let f=c.get(d.id);if(f!==void 0)d.getType()==="remove"?u.add(d.id):(u.delete(d.id),a[f]=d);else{if(d.getType()==="remove")throw new Error(`Attempting to delete a message with an ID that doesn't exist ('${d.id}')`);c.set(d.id,a.length),a.push(d)}}return a.filter(d=>!u.has(d.id))}function Z8e(e){if(typeof e=="string"||Gn(e)&&e._getType()==="system")return e;if(typeof e=="function")return t=>y(null,null,function*(){return e(t.messages)});if(dt.isRunnable(e))return Ir.from(t=>t.messages).pipe(e);throw new Error(`Unexpected type for messageModifier: ${typeof e}`)}var kN="prompt";function q8e(e){let t;if(e==null)t=Ir.from(n=>n.messages).withConfig({runName:kN});else if(typeof e=="string"){let n=new Zo(e);t=Ir.from(r=>[n,...r.messages??[]]).withConfig({runName:kN})}else if(Gn(e)&&e._getType()==="system")t=Ir.from(n=>[e,...n.messages]).withConfig({runName:kN});else if(typeof e=="function")t=Ir.from(e).withConfig({runName:kN});else if(dt.isRunnable(e))t=e;else throw new Error(`Got unexpected type for 'prompt': ${typeof e}`);return t}function Lq(e){return dt.isRunnable(e)}function Mge(e,t,n){if([e,t,n].filter(o=>o!=null).length>1)throw new Error("Expected only one of prompt, stateModifier, or messageModifier, got multiple values");let i=e;return t!=null?i=t:n!=null&&(i=Z8e(n)),q8e(i)}function sb(e){return"invoke"in e&&typeof e.invoke=="function"&&"_modelType"in e}function ab(e){return"_queuedMethodOperations"in e&&"_model"in e&&typeof e._model=="function"}function Dge(e){return sb(e)?"bindTools"in e&&typeof e.bindTools=="function":!1}function G8e(e,t){return y(this,null,function*(){let n=e;if(Er.isRunnableSequence(n)&&(n=n.steps.find(a=>ni.isRunnableBinding(a)||sb(a)||ab(a))||n),ab(n)&&(n=yield n._model()),!ni.isRunnableBinding(n))return!0;let r=n.kwargs!=null&&typeof n.kwargs=="object"&&"tools"in n.kwargs&&Array.isArray(n.kwargs.tools)?n.kwargs.tools??null:n.config!=null&&typeof n.config=="object"&&"tools"in n.config&&Array.isArray(n.config.tools)?n.config.tools??null:null;if(r!=null&&r.length===1&&"functionDeclarations"in r[0]&&(r=r[0].functionDeclarations),r==null)return!0;if(t.length!==r.length)throw new Error("Number of tools in the model.bindTools() and tools passed to createReactAgent must match");let i=new Set(t.flatMap(a=>Lq(a)?a.name:[])),o=new Set;for(let a of r){let c;if("type"in a&&a.type==="function")c=a.function.name;else if("name"in a)c=a.name;else if("toolSpec"in a&&"name"in a.toolSpec)c=a.toolSpec.name;else continue;c&&o.add(c)}let s=[...i].filter(a=>!o.has(a));if(s.length>0)throw new Error(`Missing tools '${s}' in the model.bindTools().Tools in the model.bindTools() must match the tools passed to createReactAgent.`);return!1})}var $q=(e,t)=>{if(Dge(e))return e.bindTools(t);if(ni.isRunnableBinding(e)&&Dge(e.bound)){let n=e.bound.bindTools(t);return ni.isRunnableBinding(n)?new ni({bound:n.bound,config:m(m({},e.config),n.config),kwargs:m(m({},e.kwargs),n.kwargs),configFactories:n.configFactories??e.configFactories}):new ni({bound:n,config:e.config,kwargs:e.kwargs,configFactories:e.configFactories})}return null};function W8e(e,t){return y(this,null,function*(){let n=$q(e,t);if(n)return n;if(ab(e)){let r=$q(yield e._model(),t);if(r)return r}if(Er.isRunnableSequence(e)){let r=e.steps.findIndex(i=>ni.isRunnableBinding(i)||sb(i)||ab(i));if(r>=0){let i=$q(e.steps[r],t);if(i){let o=e.steps.slice();return o.splice(r,1,i),Er.from(o)}}}throw new Error(`llm ${e} must define bindTools method.`)})}function K8e(e){return y(this,null,function*(){let t=e;if(Er.isRunnableSequence(t)&&(t=t.steps.find(n=>ni.isRunnableBinding(n)||sb(n)||ab(n))||t),ab(t)&&(t=yield t._model()),ni.isRunnableBinding(t)&&(t=t.bound),!sb(t))throw new Error(`Expected \`llm\` to be a ChatModel or RunnableBinding (e.g. llm.bind_tools(...)) with invoke() and generate() methods, got ${t.constructor.name}`);return t})}var Pge=()=>vm.Root({messages:vm({reducer:Nq,default:()=>[]}),structuredResponse:vm}),J8e=vm.Root({llmInputMessages:vm({reducer:(e,t)=>Nq([],t),default:()=>[]})});function Fq(e){let{llm:t,tools:n,messageModifier:r,stateModifier:i,prompt:o,stateSchema:s,contextSchema:a,checkpointSaver:c,checkpointer:u,interruptBefore:d,interruptAfter:f,store:g,responseFormat:h,preModelHook:v,postModelHook:x,name:E,description:C,version:S="v1",includeAgentName:A}=e,P,F;Array.isArray(n)?(P=n,F=new Dq(P.filter(Lq))):(P=n.tools,F=n);let B=null,ee=ke=>y(null,null,function*(){if(B)return B;let We;(yield G8e(ke,P))?We=yield W8e(ke,P):We=ke;let _t=Mge(o,i,r),Ot=A==="inline"?SN(We,A):We;return B=_t.pipe(Ot),B}),D=(ke,We,_t)=>y(null,null,function*(){let Ot=yield ke(We,_t);return Mge(o,i,r).pipe(A==="inline"?SN(Ot,A):Ot)}),pe=new Set(P.filter(Lq).filter(ke=>"returnDirect"in ke&&ke.returnDirect).map(ke=>ke.name));function xe(ke){let Bt=ke,{messages:We,llmInputMessages:_t}=Bt,Ot=se(Bt,["messages","llmInputMessages"]);return _t!=null&&_t.length>0?m({messages:_t},Ot):m({messages:We},Ot)}let Ge=(ke,We)=>y(null,null,function*(){if(h==null)throw new Error("Attempted to generate structured output with no passed response schema. Please contact us for help.");let _t=[...ke.messages],Ot,Bt=typeof t=="function"?yield t(ke,We):yield K8e(t);if(!sb(Bt))throw new Error(`Expected \`llm\` to be a ChatModel with .withStructuredOutput() method, got ${Bt.constructor.name}`);if(typeof h=="object"&&"schema"in h){let Dn=h,{prompt:M,schema:O}=Dn,ie=se(Dn,["prompt","schema"]);Ot=Bt.withStructuredOutput(O,ie),M!=null&&_t.unshift(new Zo({content:M}))}else Ot=Bt.withStructuredOutput(h);return{structuredResponse:yield Ot.invoke(_t,We)}}),fe=(ke,We)=>y(null,null,function*(){let Ot=yield(typeof t=="function"?yield D(t,ke,We):yield ee(t)).invoke(xe(ke),We);return Ot.name=E,Ot.lc_kwargs.name=E,{messages:[Ot]}}),Se=s??Pge(),Fe=new dI(Se,a).addNode("tools",F);if(!("messages"in Fe._schemaDefinition))throw new Error("Missing required `messages` key in state schema.");let Me=Fe,ce=ke=>Object.fromEntries(Object.entries(ke).filter(([We,_t])=>_t!=null)),gt="agent",ve;return v!=null?(Me.addNode("pre_model_hook",v).addEdge("pre_model_hook","agent"),gt="pre_model_hook",ve=vm.Root(m(m({},Fe._schemaDefinition),J8e.spec))):gt="agent",Me.addNode("agent",fe,{input:ve}).addEdge(Mn,gt),x!=null&&Me.addNode("post_model_hook",x).addEdge("agent","post_model_hook").addConditionalEdges("post_model_hook",ke=>{let{messages:We}=ke,_t=new Set(We.filter(pd).map(Dn=>Dn.tool_call_id)),Ot;for(let Dn=We.length-1;Dn>=0;Dn-=1){let M=We[Dn];if(Io(M)){Ot=M;break}}let Bt=Ot?.tool_calls?.filter(Dn=>Dn.id==null||!_t.has(Dn.id))??[],Gt=We.at(-1);return Bt.length>0?S==="v2"?Bt.map(Dn=>new _m("tools",b(m({},ke),{lg_tool_call:Dn}))):"tools":Gt&&pd(Gt)?gt:h!=null?"generate_structured_response":Ft},ce({tools:"tools",[gt]:gt,generate_structured_response:h!=null?"generate_structured_response":null,[Ft]:h!=null?null:Ft})),h!==void 0&&Fe.addNode("generate_structured_response",Ge).addEdge("generate_structured_response",Ft),x==null&&Me.addConditionalEdges("agent",ke=>{let{messages:We}=ke,_t=We[We.length-1];return!Io(_t)||!_t.tool_calls?.length?h!=null?"generate_structured_response":Ft:S==="v2"?_t.tool_calls.map(Ot=>new _m("tools",b(m({},ke),{lg_tool_call:Ot}))):"tools"},ce({tools:"tools",generate_structured_response:h!=null?"generate_structured_response":null,[Ft]:h!=null?null:Ft})),pe.size>0?Me.addConditionalEdges("tools",ke=>{for(let We=ke.messages.length-1;We>=0;We-=1){let _t=ke.messages[We];if(!pd(_t))break;if(_t.name!==void 0&&pe.has(_t.name))return Ft}return gt},ce({[gt]:gt,[Ft]:Ft})):Me.addEdge("tools",gt),Me.compile({checkpointer:u??c,interruptBefore:d,interruptAfter:f,store:g,name:E,description:C})}var cb=class e{langchain_model=null;openAI_agent;constructor(){}getOpenAiClient(t){if(!t.openAIKey)throw new Error("OpenAI API key is not set");return this.langchain_model&&delete this.langchain_model,this.langchain_model=new z1({apiKey:t.openAIKey,model:t.model||"gpt-4o-mini",temperature:t.temparature||0,maxTokens:t.maxToken||4096,streaming:t.streaming||!0}),this.langchain_model}openAImodels(t="langchain",n,r,i,o){let s=null,a=null;t=="langgraph"?s=Fq({llm:n,tools:r}):t=="langchain"&&r.length>0?s=n.bindTools(r,{tool_choice:"auto"}):t=="langchain"&&r.length==0&&(a=n);let c=tu.fromMessages([sm.fromTemplate(i),om.fromTemplate(o)]);return{model_with_tools:s,overall_prompt:c,model_with_out_tools:a}}static \u0275fac=function(n){return new(n||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})};var Em=class e{saveValuesInKey(t,n){localStorage.setItem(t,n)}getValueFromKey(t){let n=localStorage.getItem(t);return n||""}static \u0275fac=function(n){return new(n||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})};var lo=class e{constructor(t,n,r){this.toolformatterService=t;this.openai_service=n;this.storageService=r}client=null;transport=null;sessionId=void 0;notificationCount=0;connectionStatusSubject=new er(!1);notificationsSubject=new ge;streamingSubject=new ge;elicitRequestSubject=new ge;connectionStatus$=this.connectionStatusSubject.asObservable();notifications$=this.notificationsSubject.asObservable();elicitRequests$=this.elicitRequestSubject.asObservable();streaming$=this.streamingSubject.asObservable();toolsSubject=new er([]);promptsSubject=new er([]);resourceSubject=new er([]);mcpServerInstructionsSubject=new ge;mcpServerInstructions$=this.mcpServerInstructionsSubject.asObservable();tools$=this.toolsSubject.asObservable();promtps$=this.promptsSubject.asObservable();resources$=this.resourceSubject.asObservable();messageSource=new er(!1);currentMessage$=this.messageSource.asObservable();currentRequest=null;elicitResponseSubject=new ge;elicitResponses$=this.elicitResponseSubject.asObservable();notificationsToolLastEventId=void 0;connect(t){return y(this,null,function*(){let n=t;this.client&&(yield this.disconnect()),console.log(`Connecting to ${n}...`);try{this.client=new zD({name:"angular-mcp-client",version:"1.0.0"},{capabilities:{elicitation:{form:{}},sampling:{}}}),this.transport=new WD(new URL(n),{sessionId:localStorage.getItem("mcp_session_id")||void 0,requestInit:{headers:new Headers({Accept:"application/json","Content-Type":"application/json, text/event-stream"}),cache:"no-store"},reconnectionOptions:{maxReconnectionDelay:3e4,initialReconnectionDelay:1e3,reconnectionDelayGrowFactor:1.5,maxRetries:3}}),this.transport.onerror=r=>y(this,null,function*(){console.error("Transport error:",r),r.message.includes("session")&&(localStorage.removeItem("mcp_session_id"),this.connectionStatusSubject.next(!1),this.messageSource.next(!1))}),this.client.onerror=r=>y(this,null,function*(){console.error("Client error:",r),this.notificationsSubject.next({type:"error",message:r.message}),this.connectionStatusSubject.next(!1),this.messageSource.next(!1),localStorage.removeItem("mcp_session_id")}),this.initializeElicitationHandler(this.client),this.samplingRequestHandler(this.client),this.progressNotificationHandler(this.client),this.loggingNotificationHandler(this.client),this.resourceListChangingHandler(this.client),yield this.client.connect(this.transport,{timeout:42e4,maxTotalTimeout:6e5}),this.mcpServerInstructionsSubject.next(this.client.getInstructions()),this.sessionId=this.transport.sessionId,this.sessionId&&localStorage.setItem("mcp_session_id",this.sessionId),console.log("Connected to MCP server"),this.connectionStatusSubject.next(!0),this.messageSource.next(!0),this.listTools(),this.listPrompts(),this.listResources()}catch(r){throw console.error("Failed to connect:",r),this.client=null,this.transport=null,this.connectionStatusSubject.next(!1),this.messageSource.next(!1),this.toolsSubject.next([]),this.promptsSubject.next([]),this.resourceSubject.next([]),r}})}completion(t,n,r=""){return y(this,null,function*(){try{return yield this.client?.complete({ref:{type:"ref/prompt",name:"example"},argument:{name:t,value:n},context:{arguments:{previousArg:r}}})}catch(i){throw new Error(`Error : ${JSON.stringify(i)}`)}})}resourceListChangingHandler(t){t.setNotificationHandler(rV,n=>y(this,null,function*(){console.log("Resource list changed notification received"),this.notificationsSubject.next({type:"resource-change",message:"Resource list has changed"});try{if(!this.client){console.log("Client disconnected, cannot fetch resources");return}let r=yield this.client.request({method:"resources/list",params:{}},py);this.notificationsSubject.next({type:"resource-list",resources:r.resources})}catch(r){console.log("Failed to list resources after change notification",r),this.notificationsSubject.next({type:"error",message:"Failed to fetch updated resources"})}}))}loggingNotificationHandler(t){t.setNotificationHandler(oV,n=>{let r={type:"",message:"",status:""};if(n.params.data&&typeof n.params.data=="object"){r={type:"",message:"",status:""};let i=Object.keys(n.params.data);r=n.params.data;for(let o of i)if(r[o]=="streaming"){let s={type:r[o],level:n.params.level,message:r.message,status:r.status};this.streamingSubject.next(s)}}else{this.notificationCount++;let i={type:"log",level:n.params.level,message:n.params.data,count:this.notificationCount};console.log("MCP Notification:",i),this.notificationsSubject.next(i)}})}progressNotificationHandler(t){t.setNotificationHandler(dy,n=>{let r={type:"",message:"",status:""};if(n.params.message&&typeof n.params.message=="object"){r={type:"",message:"",status:""};let i=Object.keys(n.params.message);r=n.params.message;for(let o of i)if(r[o]=="streaming"){let s={type:r[o],progress:n.params.progress,total:n.params.total,message:r.message,progressToken:n.params.progressToken,status:r.status};this.streamingSubject.next(s)}}else{console.log("On progress : ",n),this.notificationCount++;let i={type:"log",progress:n.params.progress,total:n.params.total,message:n.params.message,progressToken:n.params.progressToken,count:this.notificationCount};console.log("MCP Notification:",i),this.notificationsSubject.next(i)}})}initializeElicitationHandler(t){t.setRequestHandler(Fx,(n,r)=>{if(n.params.mode&&n.params.mode!=="form")throw new qi(Gi.InvalidParams,`Unsupported elicitation mode: ${n.params.mode}`);let i=r.requestId,o=n.params.requestedSchema,s=this.parseSchemaToFields(o);return this.elicitRequestSubject.next({requestId:i,message:n.params.message,schema:o,fields:s}),new Promise((a,c)=>{let u=!1,d=36e4,f=setTimeout(()=>{u||(u=!0,g.unsubscribe(),console.warn(`Request ${i} timed out after ${d}ms`),a({action:"cancel",content:{reason:"Request timeout"}}))},d),g=this.elicitResponses$.subscribe({next:h=>{if(u){console.warn(`Request ${i} already resolved, ignoring duplicate response`);return}u=!0,g.unsubscribe(),console.log("resp : ",h),a({_meta:{requestId:r.requestId},action:h?.action||"cancel",content:h?.content||{}})},error:()=>{u||(u=!0,clearTimeout(f),g.unsubscribe(),a({_meta:{requestId:r.requestId},action:"decline"}))}});if(r.signal){let h=()=>{u||(u=!0,clearTimeout(f),g.unsubscribe(),console.log(`Request ${i} was aborted`),a({action:"cancel",content:{reason:"Request aborted"}}))};r.signal.addEventListener("abort",h)}})})}reconnect(){return y(this,null,function*(){let t=localStorage.getItem("mcp_session_id"),n=localStorage.getItem("mcp_server");if(t&&n)this.sessionId=t,yield this.connect(n);else throw new Error("No stored session ID found")})}samplingRequestHandler(t){t.setRequestHandler(sV,n=>{let r=[];console.log(n.params);let i="";if(n.params.systemPrompt){let o=typeof n.params.systemPrompt=="string"?n.params.systemPrompt:JSON.stringify(n.params.systemPrompt);r.push(sm.fromTemplate(o))}if(n.params.messages&&n.params.messages.length>0)for(let o=0;o<n.params.messages.length;o++){let s=n.params.messages[o],a=s.role,c=s.content,u="";if(typeof c=="object"&&!Array.isArray(c)&&c.type==="text"&&"text"in c)u=c.text;else if(Array.isArray(c)){let d=c.find(f=>f.type==="text"&&"text"in f);d&&"text"in d&&(u=d.text)}else typeof c=="string"&&(u=c);u&&(a==="assistant"?(i=u,r.push(YC.fromTemplate(u))):a==="user"?r.push(om.fromTemplate(u)):a==="system"&&r.push(sm.fromTemplate(u)))}return console.log(`
[Sampling] Collected ${r.length} messages`),new Promise((o,s)=>y(this,null,function*(){let a={userInput:i,messages:r,model_preference:n.params.modelPreferences?.hints?.[0]?.name},c=yield this.openAISampling(a);console.log("Sampleing front-end response : ",c),o({model:"gpt-4o-mini",role:"assistant",content:{type:"text",text:typeof c=="string"?c:JSON.stringify(c)}})}))})}openAISampling(t){return y(this,null,function*(){try{let n=this.storageService.getValueFromKey("open_ai_token")||"",r=this.openai_service.getOpenAiClient({openAIKey:n,model:t.model_preference||"gpt-4o-mini"}),i=tu.fromMessages(t.messages);return console.log("prompt : ",i),yield Er.from([i,r,new TR]).invoke({input:t.userInput})}catch(n){return console.error("Agent workflow error:",n),n}})}parseSchemaToFields(t){let n=t.properties,r=t.required||[];return Object.entries(n).map(([i,o])=>({name:i,title:o.title||i,description:o.description,type:o.type||"string",required:r.includes(i),enum:o.enum,minimum:o.minimum,maximum:o.maximum,minLength:o.minLength,maxLength:o.maxLength,format:o.format,default:o.default}))}submitElicitResponse(t){this.elicitResponseSubject.next(t)}listTools(){return y(this,null,function*(){if(!this.client)throw new Error("Client not connected");let t=yield this.client.request({method:"tools/list",params:{}},Lx);for(let n of t.tools)n.title=KD(n);this.toolsSubject.next(t.tools)})}createOpenAiToolSchema(t){let n=this.toolformatterService.formatMultipleTools(t);return console.log("Open ai tools : ",n),n}listPrompts(){return y(this,null,function*(){if(!this.client)throw new Error("Client not connected");let t=yield this.client.request({method:"prompts/list",params:{}},Nx);for(let n of t.prompts)n.title=KD(n);console.log("Prompt : ",t.prompts),this.promptsSubject.next(t.prompts)})}getPrompt(t){return y(this,null,function*(){if(!this.client)throw new Error("Client not connected");return yield this.client.request({method:"prompts/get",params:{promptId:t}},$x)})}callElicitation(t,n=null){return y(this,null,function*(){if(!this.client)throw new Error("Client not connected");return yield this.client.request({method:"elicitation/create",params:{message:t,requestedSchema:n}},jx)})}listResources(){return y(this,null,function*(){if(!this.client)throw new Error("Client not connected");let t=yield this.client.request({method:"resources/list",params:{}},py);for(let n of t.resources)console.log("Resources : ",n),n.title=KD(n);this.resourceSubject.next(t.resources)})}readResource(t){if(!this.client)throw new Error("Client not connected");return this.client.request({method:"resources/read",params:{resourceLink:t}},Rx)}disconnect(){return y(this,null,function*(){if(this.client&&this.transport)try{if(this.transport.sessionId)try{console.log("Terminating session before exit..."),yield this.transport.terminateSession(),console.log("Session terminated successfully")}catch(t){console.error("Error terminating session:",t)}yield this.transport?.close(),this.client=null,this.transport=null,this.sessionId=void 0,this.connectionStatusSubject.next(!1),this.messageSource.next(!1),localStorage.removeItem("mcp_session_id")}catch(t){console.error("Error during disconnect:",t)}})}callTool(t,n){return y(this,null,function*(){let r=this.generateProgressToken();if(!this.client)throw new Error("Client not connected");return yield this.client.request({method:"tools/call",params:{name:t,arguments:n,_meta:{stream:!0,progressToken:r}}},jf)})}longRunningTool(t,n){return y(this,null,function*(){let r=this,i=this.generateProgressToken(),o=s=>{r.notificationsToolLastEventId=s,console.log(`Updated resumption token: ${s}`),console.log(`Updated resumption token: ${r.notificationsToolLastEventId}`)};if(!this.client)throw new Error("Client not connected");return yield this.client.request({method:"tools/call",params:{name:t,arguments:n,_meta:{stream:!0,progressToken:i}}},jf,{resumptionToken:r.notificationsToolLastEventId,onresumptiontoken:o})})}generateProgressToken(){return Math.random().toString(36).substring(2)+Date.now().toString(36)}static \u0275fac=function(n){return new(n||e)(Be($R),Be(cb),Be(Em))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})};var Hge=(()=>{class e{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||e)(Ee(rr),Ee(nt))};static \u0275dir=Ne({type:e})}return e})(),vI=(()=>{class e extends Hge{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Jn(e)))(i||e)}})();static \u0275dir=Ne({type:e,features:[Jt]})}return e})(),Zh=new X(""),Y8e={provide:Zh,useExisting:gi(()=>bI),multi:!0},bI=(()=>{class e extends vI{writeValue(n){this.setProperty("checked",n)}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Jn(e)))(i||e)}})();static \u0275dir=Ne({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&Te("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[En([Y8e]),Jt]})}return e})(),Q8e={provide:Zh,useExisting:gi(()=>hu),multi:!0};function X8e(){let e=Va()?Va().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var eqe=new X(""),hu=(()=>{class e extends Hge{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!X8e())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||e)(Ee(rr),Ee(nt),Ee(eqe,8))};static \u0275dir=Ne({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Te("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[En([Q8e]),Jt]})}return e})();function Uq(e){return e==null||Vq(e)===0}function Vq(e){return e==null?null:Array.isArray(e)||typeof e=="string"?e.length:e instanceof Set?e.size:null}var Sm=new X(""),mb=new X(""),tqe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ii=class{static min(t){return Zge(t)}static max(t){return qge(t)}static required(t){return nqe(t)}static requiredTrue(t){return rqe(t)}static email(t){return iqe(t)}static minLength(t){return oqe(t)}static maxLength(t){return sqe(t)}static pattern(t){return aqe(t)}static nullValidator(t){return AN()}static compose(t){return Qge(t)}static composeAsync(t){return Xge(t)}};function Zge(e){return t=>{if(t.value==null||e==null)return null;let n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}function qge(e){return t=>{if(t.value==null||e==null)return null;let n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}function nqe(e){return Uq(e.value)?{required:!0}:null}function rqe(e){return e.value===!0?null:{required:!0}}function iqe(e){return Uq(e.value)||tqe.test(e.value)?null:{email:!0}}function oqe(e){return t=>{let n=t.value?.length??Vq(t.value);return n===null||n===0?null:n<e?{minlength:{requiredLength:e,actualLength:n}}:null}}function sqe(e){return t=>{let n=t.value?.length??Vq(t.value);return n!==null&&n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}}function aqe(e){if(!e)return AN;let t,n;return typeof e=="string"?(n="",e.charAt(0)!=="^"&&(n+="^"),n+=e,e.charAt(e.length-1)!=="$"&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),r=>{if(Uq(r.value))return null;let i=r.value;return t.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function AN(e){return null}function Gge(e){return e!=null}function Wge(e){return Bu(e)?Zr(e):e}function Kge(e){let t={};return e.forEach(n=>{t=n!=null?m(m({},t),n):t}),Object.keys(t).length===0?null:t}function Jge(e,t){return t.map(n=>n(e))}function cqe(e){return!e.validate}function Yge(e){return e.map(t=>cqe(t)?t:n=>t.validate(n))}function Qge(e){if(!e)return null;let t=e.filter(Gge);return t.length==0?null:function(n){return Kge(Jge(n,t))}}function Hq(e){return e!=null?Qge(Yge(e)):null}function Xge(e){if(!e)return null;let t=e.filter(Gge);return t.length==0?null:function(n){let r=Jge(n,t).map(Wge);return i0(r).pipe(et(Kge))}}function Zq(e){return e!=null?Xge(Yge(e)):null}function Nge(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function e_e(e){return e._rawValidators}function t_e(e){return e._rawAsyncValidators}function zq(e){return e?Array.isArray(e)?e:[e]:[]}function ON(e,t){return Array.isArray(e)?e.includes(t):e===t}function $ge(e,t){let n=zq(t);return zq(e).forEach(i=>{ON(n,i)||n.push(i)}),n}function Lge(e,t){return zq(t).filter(n=>!ON(e,n))}var MN=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Hq(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Zq(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},Ds=class extends MN{name;get formDirective(){return null}get path(){return null}},Vd=class extends MN{_parent=null;name=null;valueAccessor=null},DN=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},lqe={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},aan=b(m({},lqe),{"[class.ng-submitted]":"isSubmitted"}),km=(()=>{class e extends DN{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(Ee(Vd,2))};static \u0275dir=Ne({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&at("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Jt]})}return e})(),FN=(()=>{class e extends DN{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(Ee(Ds,10))};static \u0275dir=Ne({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&at("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Jt]})}return e})();var pI="VALID",TN="INVALID",ub="PENDING",mI="DISABLED",Im=class{},PN=class extends Im{value;source;constructor(t,n){super(),this.value=t,this.source=n}},hI=class extends Im{pristine;source;constructor(t,n){super(),this.pristine=t,this.source=n}},gI=class extends Im{touched;source;constructor(t,n){super(),this.touched=t,this.source=n}},db=class extends Im{status;source;constructor(t,n){super(),this.status=t,this.source=n}},RN=class extends Im{source;constructor(t){super(),this.source=t}},yI=class extends Im{source;constructor(t){super(),this.source=t}};function qq(e){return(jN(e)?e.validators:e)||null}function uqe(e){return Array.isArray(e)?Hq(e):e||null}function Gq(e,t){return(jN(t)?t.asyncValidators:e)||null}function dqe(e){return Array.isArray(e)?Zq(e):e||null}function jN(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function n_e(e,t,n){let r=e.controls;if(!(t?Object.keys(r):r).length)throw new ye(1e3,"");if(!r[n])throw new ye(1001,"")}function r_e(e,t,n){e._forEachChild((r,i)=>{if(n[i]===void 0)throw new ye(1002,"")})}var pb=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,n){this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return ci(this.statusReactive)}set status(t){ci(()=>this.statusReactive.set(t))}_status=us(()=>this.statusReactive());statusReactive=Pn(void 0);get valid(){return this.status===pI}get invalid(){return this.status===TN}get pending(){return this.status==ub}get disabled(){return this.status===mI}get enabled(){return this.status!==mI}errors;get pristine(){return ci(this.pristineReactive)}set pristine(t){ci(()=>this.pristineReactive.set(t))}_pristine=us(()=>this.pristineReactive());pristineReactive=Pn(!0);get dirty(){return!this.pristine}get touched(){return ci(this.touchedReactive)}set touched(t){ci(()=>this.touchedReactive.set(t))}_touched=us(()=>this.touchedReactive());touchedReactive=Pn(!1);get untouched(){return!this.touched}_events=new ge;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators($ge(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators($ge(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Lge(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Lge(t,this._rawAsyncValidators))}hasValidator(t){return ON(this._rawValidators,t)}hasAsyncValidator(t){return ON(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(b(m({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new gI(!0,r))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),n&&t.emitEvent!==!1&&this._events.next(new gI(!1,r))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(b(m({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new hI(!1,r))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),n&&t.emitEvent!==!1&&this._events.next(new hI(!0,r))}markAsPending(t={}){this.status=ub;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new db(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(b(m({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=mI,this.errors=null,this._forEachChild(i=>{i.disable(b(m({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new PN(this.value,r)),this._events.next(new db(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(b(m({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=pI,this._forEachChild(r=>{r.enable(b(m({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(b(m({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pI||this.status===ub)&&this._runAsyncValidator(r,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new PN(this.value,n)),this._events.next(new db(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(b(m({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?mI:pI}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=ub,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:t!==!1};let r=Wge(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new db(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,r)}_initObservables(){this.valueChanges=new Ue,this.statusChanges=new Ue}_calculateStatus(){return this._allControlsDisabled()?mI:this.errors?TN:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ub)?ub:this._anyControlsHaveStatus(TN)?TN:pI}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),i&&this._events.next(new hI(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new gI(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){jN(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=uqe(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=dqe(this._rawAsyncValidators)}},Ra=class extends pb{constructor(t,n,r){super(qq(n),Gq(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){r_e(this,!0,t),Object.keys(t).forEach(r=>{n_e(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new yI(this))}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Bq=class extends Ra{};var wI=new X("",{providedIn:"root",factory:()=>zN}),zN="always";function BN(e,t){return[...t.path,e]}function NN(e,t,n=zN){Wq(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),mqe(e,t),hqe(e,t),fqe(e,t),pqe(e,t)}function Fge(e,t,n=!0){let r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),LN(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function $N(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function pqe(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function Wq(e,t){let n=e_e(e);t.validator!==null?e.setValidators(Nge(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=t_e(e);t.asyncValidator!==null?e.setAsyncValidators(Nge(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();$N(t._rawValidators,i),$N(t._rawAsyncValidators,i)}function LN(e,t){let n=!1;if(e!==null){if(t.validator!==null){let i=e_e(e);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.validator);o.length!==i.length&&(n=!0,e.setValidators(o))}}if(t.asyncValidator!==null){let i=t_e(e);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.asyncValidator);o.length!==i.length&&(n=!0,e.setAsyncValidators(o))}}}let r=()=>{};return $N(t._rawValidators,r),$N(t._rawAsyncValidators,r),n}function mqe(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&i_e(e,t)})}function fqe(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&i_e(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function i_e(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function hqe(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function o_e(e,t){e==null,Wq(e,t)}function gqe(e,t){return LN(e,t)}function s_e(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function _qe(e){return Object.getPrototypeOf(e.constructor)===vI}function a_e(e,t){e._syncPendingControls(),t.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function c_e(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(o=>{o.constructor===hu?n=o:_qe(o)?r=o:i=o}),i||r||n||null}function yqe(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}var vqe={provide:Ds,useExisting:gi(()=>Kq)},fI=Promise.resolve(),Kq=(()=>{class e extends Ds{callSetDisabledState;get submitted(){return ci(this.submittedReactive)}_submitted=us(()=>this.submittedReactive());submittedReactive=Pn(!1);_directives=new Set;form;ngSubmit=new Ue;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new Ra({},Hq(n),Zq(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){fI.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),NN(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){fI.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){fI.then(()=>{let r=this._findContainer(n.path),i=new Ra({});o_e(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){fI.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){fI.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),a_e(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new RN(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||e)(Ee(Sm,10),Ee(mb,10),Ee(wI,8))};static \u0275dir=Ne({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Te("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[En([vqe]),Jt]})}return e})();function jge(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function zge(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var _I=class extends pb{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,n,r){super(qq(n),Gq(r,n)),this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),jN(n)&&(n.nonNullable||n.initialValueIsDefault)&&(zge(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new yI(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){jge(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){jge(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){zge(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var bqe=e=>e instanceof _I,wqe=(()=>{class e extends Ds{_parent;ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return BN(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Jn(e)))(i||e)}})();static \u0275dir=Ne({type:e,standalone:!1,features:[Jt]})}return e})();var xqe={provide:Vd,useExisting:gi(()=>xI)},Bge=Promise.resolve(),xI=(()=>{class e extends Vd{_changeDetectorRef;callSetDisabledState;control=new _I;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ue;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=c_e(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),s_e(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){NN(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){Bge.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Nr(r);Bge.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?BN(n,this._parent):[n]}static \u0275fac=function(r){return new(r||e)(Ee(Ds,9),Ee(Sm,10),Ee(mb,10),Ee(Zh,10),Ee(Tr,8),Ee(wI,8))};static \u0275dir=Ne({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[En([xqe]),Jt,br]})}return e})();var UN=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ne({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return e})(),Cqe={provide:Zh,useExisting:gi(()=>CI),multi:!0},CI=(()=>{class e extends vI{writeValue(n){let r=n??"";this.setProperty("value",r)}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Jn(e)))(i||e)}})();static \u0275dir=Ne({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Te("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[En([Cqe]),Jt]})}return e})();var l_e=new X("");var Eqe={provide:Ds,useExisting:gi(()=>Tm)},Tm=(()=>{class e extends Ds{callSetDisabledState;get submitted(){return ci(this._submittedReactive)}set submitted(n){this._submittedReactive.set(n)}_submitted=us(()=>this._submittedReactive());_submittedReactive=Pn(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Ue;constructor(n,r,i){super(),this.callSetDisabledState=i,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(LN(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){let r=this.form.get(n.path);return NN(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){Fge(n.control||null,n,!1),yqe(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this._submittedReactive.set(!0),a_e(this.form,this.directives),this.ngSubmit.emit(n),this.form._events.next(new RN(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0,r={}){this.form.reset(n,r),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(n=>{let r=n.control,i=this.form.get(n.path);r!==i&&(Fge(r||null,n),bqe(i)&&(NN(i,n,this.callSetDisabledState),n.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){let r=this.form.get(n.path);o_e(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){let r=this.form.get(n.path);r&&gqe(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Wq(this.form,this),this._oldForm&&LN(this._oldForm,this)}static \u0275fac=function(r){return new(r||e)(Ee(Sm,10),Ee(mb,10),Ee(wI,8))};static \u0275dir=Ne({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&Te("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[En([Eqe]),Jt,br]})}return e})(),Iqe={provide:Ds,useExisting:gi(()=>VN)},VN=(()=>{class e extends wqe{name=null;constructor(n,r,i){super(),this._parent=n,this._setValidators(r),this._setAsyncValidators(i)}_checkParentType(){u_e(this._parent)}static \u0275fac=function(r){return new(r||e)(Ee(Ds,13),Ee(Sm,10),Ee(mb,10))};static \u0275dir=Ne({type:e,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},standalone:!1,features:[En([Iqe]),Jt]})}return e})(),Sqe={provide:Ds,useExisting:gi(()=>HN)},HN=(()=>{class e extends Ds{_parent;name=null;constructor(n,r,i){super(),this._parent=n,this._setValidators(r),this._setAsyncValidators(i)}ngOnInit(){u_e(this._parent),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective?.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return BN(this.name==null?this.name:this.name.toString(),this._parent)}static \u0275fac=function(r){return new(r||e)(Ee(Ds,13),Ee(Sm,10),Ee(mb,10))};static \u0275dir=Ne({type:e,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},standalone:!1,features:[En([Sqe]),Jt]})}return e})();function u_e(e){return!(e instanceof VN)&&!(e instanceof Tm)&&!(e instanceof HN)}var kqe={provide:Vd,useExisting:gi(()=>EI)},EI=(()=>{class e extends Vd{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(n){}model;update=new Ue;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=c_e(this,o)}ngOnChanges(n){this._added||this._setUpControl(),s_e(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return BN(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||e)(Ee(Ds,13),Ee(Sm,10),Ee(mb,10),Ee(Zh,10),Ee(l_e,8))};static \u0275dir=Ne({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[En([kqe]),Jt,br]})}return e})();var Tqe={provide:Zh,useExisting:gi(()=>fb),multi:!0};function d_e(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function Aqe(e){return e.split(":")[0]}var fb=(()=>{class e extends vI{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=k(No).injector;destroyRef=k(no);cdr=k(Tr);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Oi({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let r=this._getOptionId(n),i=d_e(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=Aqe(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Jn(e)))(i||e)}})();static \u0275dir=Ne({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Te("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[En([Tqe]),Jt]})}return e})(),ZN=(()=>{class e{_element;_renderer;_select;id;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(d_e(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||e)(Ee(nt),Ee(rr),Ee(fb,9))};static \u0275dir=Ne({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})(),Oqe={provide:Zh,useExisting:gi(()=>p_e),multi:!0};function Uge(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function Mqe(e){return e.split(":")[0]}var p_e=(()=>{class e extends vI{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],u=this._getOptionValue(c.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=Mqe(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Jn(e)))(i||e)}})();static \u0275dir=Ne({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Te("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[En([Oqe]),Jt]})}return e})(),qN=(()=>{class e{_element;_renderer;_select;id;_value;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(Uge(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(Uge(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||e)(Ee(nt),Ee(rr),Ee(p_e,9))};static \u0275dir=Ne({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})();function m_e(e){return typeof e=="number"?e:parseFloat(e)}var f_e=(()=>{class e{_validator=AN;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):AN,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ne({type:e,features:[br]})}return e})(),Dqe={provide:Sm,useExisting:gi(()=>Jq),multi:!0},Jq=(()=>{class e extends f_e{max;inputName="max";normalizeInput=n=>m_e(n);createValidator=n=>qge(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=Jn(e)))(i||e)}})();static \u0275dir=Ne({type:e,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Yt("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[En([Dqe]),Jt]})}return e})(),Pqe={provide:Sm,useExisting:gi(()=>Yq),multi:!0},Yq=(()=>{class e extends f_e{min;inputName="min";normalizeInput=n=>m_e(n);createValidator=n=>Zge(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=Jn(e)))(i||e)}})();static \u0275dir=Ne({type:e,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Yt("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[En([Pqe]),Jt]})}return e})();var h_e=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({})}return e})(),Hd=class extends pb{constructor(t,n,r){super(qq(n),Gq(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,n={}){Array.isArray(t)?t.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(t,n,r={}){this.controls.splice(t,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,n={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(t,n,r={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,n={}){r_e(this,!1,t),t.forEach((r,i)=>{n_e(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t=[],n={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new yI(this))}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((n,r)=>{t(n,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(n=>n.enabled&&t(n))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function Vge(e){return!!e&&(e.asyncValidators!==void 0||e.validators!==void 0||e.updateOn!==void 0)}var hb=(()=>{class e{useNonNullable=!1;get nonNullable(){let n=new e;return n.useNonNullable=!0,n}group(n,r=null){let i=this._reduceControls(n),o={};return Vge(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Ra(i,o)}record(n,r=null){let i=this._reduceControls(n);return new Bq(i,r)}control(n,r,i){let o={};return this.useNonNullable?(Vge(r)?o=r:(o.validators=r,o.asyncValidators=i),new _I(n,b(m({},o),{nonNullable:!0}))):new _I(n,r,i)}array(n,r,i){let o=n.map(s=>this._createControl(s));return new Hd(o,r,i)}_reduceControls(n){let r={};return Object.keys(n).forEach(i=>{r[i]=this._createControl(n[i])}),r}_createControl(n){if(n instanceof _I)return n;if(n instanceof pb)return n;if(Array.isArray(n)){let r=n[0],i=n.length>1?n[1]:null,o=n.length>2?n[2]:null;return this.control(r,i,o)}else return this.control(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var gu=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:wI,useValue:n.callSetDisabledState??zN}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({imports:[h_e]})}return e})(),gb=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:l_e,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:wI,useValue:n.callSetDisabledState??zN}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({imports:[h_e]})}return e})();function qh(e){return e.buttons===0||e.detail===0}function Gh(e){let t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var Qq;function g_e(){if(Qq==null){let e=typeof document<"u"?document.head:null;Qq=!!(e&&(e.createShadowRoot||e.attachShadow))}return Qq}function Xq(e){if(g_e()){let t=e.getRootNode?e.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function _b(){let e=typeof document<"u"&&document?document.activeElement:null;for(;e&&e.shadowRoot;){let t=e.shadowRoot.activeElement;if(t===e)break;e=t}return e}function la(e){return e.composedPath?e.composedPath()[0]:e.target}var e9;try{e9=typeof Intl<"u"&&Intl.v8BreakIterator}catch{e9=!1}var Ln=(()=>{class e{_platformId=k(Fu);isBrowser=this._platformId?Zu(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||e9)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var SI;function __e(){if(SI==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>SI=!0}))}finally{SI=SI||!1}return SI}function yb(e){return __e()?e:!!e.capture}function Ps(e,t=0){return y_e(e)?Number(e):arguments.length===2?t:0}function y_e(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}function Rs(e){return e instanceof nt?e.nativeElement:e}var v_e=new X("cdk-input-modality-detector-options"),b_e={ignoreKeys:[18,17,224,91,16]},w_e=650,t9={passive:!0,capture:!0},x_e=(()=>{class e{_platform=k(Ln);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new er(null);_options;_lastTouchMs=0;_onKeydown=n=>{this._options?.ignoreKeys?.some(r=>r===n.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=la(n))};_onMousedown=n=>{Date.now()-this._lastTouchMs<w_e||(this._modality.next(qh(n)?"keyboard":"mouse"),this._mostRecentTarget=la(n))};_onTouchstart=n=>{if(Gh(n)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=la(n)};constructor(){let n=k(De),r=k(yt),i=k(v_e,{optional:!0});if(this._options=m(m({},b_e),i),this.modalityDetected=this._modality.pipe(c0(1)),this.modalityChanged=this.modalityDetected.pipe(Ig()),this._platform.isBrowser){let o=k(Ai).createRenderer(null,null);this._listenerCleanups=n.runOutsideAngular(()=>[o.listen(r,"keydown",this._onKeydown,t9),o.listen(r,"mousedown",this._onMousedown,t9),o.listen(r,"touchstart",this._onTouchstart,t9)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(n=>n())}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),kI=(function(e){return e[e.IMMEDIATE=0]="IMMEDIATE",e[e.EVENTUAL=1]="EVENTUAL",e})(kI||{}),C_e=new X("cdk-focus-monitor-default-options"),GN=yb({passive:!0,capture:!0}),_u=(()=>{class e{_ngZone=k(De);_platform=k(Ln);_inputModalityDetector=k(x_e);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=k(yt);_stopInputModalityDetector=new ge;constructor(){let n=k(C_e,{optional:!0});this._detectionMode=n?.detectionMode||kI.IMMEDIATE}_rootNodeFocusAndBlurListener=n=>{let r=la(n);for(let i=r;i;i=i.parentElement)n.type==="focus"?this._onFocus(n,i):this._onBlur(n,i)};monitor(n,r=!1){let i=Rs(n);if(!this._platform.isBrowser||i.nodeType!==1)return Xe();let o=Xq(i)||this._document,s=this._elementInfo.get(i);if(s)return r&&(s.checkChildren=!0),s.subject;let a={checkChildren:r,subject:new ge,rootNode:o};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(n){let r=Rs(n),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(n,r,i){let o=Rs(n),s=this._document.activeElement;o===s?this._getClosestElementsInfo(o).forEach(([a,c])=>this._originChanged(a,r,c)):(this._setOrigin(r),typeof o.focus=="function"&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((n,r)=>this.stopMonitoring(r))}_getWindow(){return this._document.defaultView||window}_getFocusOrigin(n){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(n)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:n&&this._isLastInteractionFromInputLabel(n)?"mouse":"program"}_shouldBeAttributedToTouch(n){return this._detectionMode===kI.EVENTUAL||!!n?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(n,r){n.classList.toggle("cdk-focused",!!r),n.classList.toggle("cdk-touch-focused",r==="touch"),n.classList.toggle("cdk-keyboard-focused",r==="keyboard"),n.classList.toggle("cdk-mouse-focused",r==="mouse"),n.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(n,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=n,this._originFromTouchInteraction=n==="touch"&&r,this._detectionMode===kI.IMMEDIATE){clearTimeout(this._originTimeoutId);let i=this._originFromTouchInteraction?w_e:1;this._originTimeoutId=setTimeout(()=>this._origin=null,i)}})}_onFocus(n,r){let i=this._elementInfo.get(r),o=la(n);!i||!i.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),i)}_onBlur(n,r){let i=this._elementInfo.get(r);!i||i.checkChildren&&n.relatedTarget instanceof Node&&r.contains(n.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(n,r){n.subject.observers.length&&this._ngZone.run(()=>n.subject.next(r))}_registerGlobalListeners(n){if(!this._platform.isBrowser)return;let r=n.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,GN),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,GN)}),this._rootNodeFocusListenerCount.set(r,i+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(sr(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(n){let r=n.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,GN),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,GN),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(n,r,i){this._setClasses(n,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(n){let r=[];return this._elementInfo.forEach((i,o)=>{(o===n||i.checkChildren&&o.contains(n))&&r.push([o,i])}),r}_isLastInteractionFromInputLabel(n){let{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if(i!=="mouse"||!r||r===n||n.nodeName!=="INPUT"&&n.nodeName!=="TEXTAREA"||n.disabled)return!1;let o=n.labels;if(o){for(let s=0;s<o.length;s++)if(o[s].contains(r))return!0}return!1}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var WN=new WeakMap,Oo=(()=>{class e{_appRef;_injector=k(ft);_environmentInjector=k(Dr);load(n){let r=this._appRef=this._appRef||this._injector.get(No),i=WN.get(r);i||(i={loaders:new Set,refs:[]},WN.set(r,i),r.onDestroy(()=>{WN.get(r)?.refs.forEach(o=>o.destroy()),WN.delete(r)})),i.loaders.has(n)||(i.loaders.add(n),i.refs.push(mT(n,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var E_e=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Ve({type:e,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(r,i){},styles:[`.cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}
`],encapsulation:2,changeDetection:0})}return e})();function vb(e){return Array.isArray(e)?e:[e]}var I_e=new Set,Wh,KN=(()=>{class e{_platform=k(Ln);_nonce=k(Gg,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Nqe}matchMedia(n){return(this._platform.WEBKIT||this._platform.BLINK)&&Rqe(n,this._nonce),this._matchMedia(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Rqe(e,t){if(!I_e.has(e))try{Wh||(Wh=document.createElement("style"),t&&Wh.setAttribute("nonce",t),Wh.setAttribute("type","text/css"),document.head.appendChild(Wh)),Wh.sheet&&(Wh.sheet.insertRule(`@media ${e} {body{ }}`,0),I_e.add(e))}catch(n){console.error(n)}}function Nqe(e){return{matches:e==="all"||e==="",media:e,addListener:()=>{},removeListener:()=>{}}}var n9=(()=>{class e{_mediaMatcher=k(KN);_zone=k(De);_queries=new Map;_destroySubject=new ge;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(n){return S_e(vb(n)).some(i=>this._registerQuery(i).mql.matches)}observe(n){let i=S_e(vb(n)).map(s=>this._registerQuery(s).observable),o=xg(i);return o=ep(o.pipe(Xr(1)),o.pipe(c0(1),Tu(0))),o.pipe(et(s=>{let a={matches:!1,breakpoints:{}};return s.forEach(({matches:c,query:u})=>{a.matches=a.matches||c,a.breakpoints[u]=c}),a}))}_registerQuery(n){if(this._queries.has(n))return this._queries.get(n);let r=this._mediaMatcher.matchMedia(n),o={observable:new Nt(s=>{let a=c=>this._zone.run(()=>s.next(c));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(Ui(r),et(({matches:s})=>({query:n,matches:s})),sr(this._destroySubject)),mql:r};return this._queries.set(n,o),o}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function S_e(e){return e.map(t=>t.split(",")).reduce((t,n)=>t.concat(n)).map(t=>t.trim())}function $qe(e){if(e.type==="characterData"&&e.target instanceof Comment)return!0;if(e.type==="childList"){for(let t=0;t<e.addedNodes.length;t++)if(!(e.addedNodes[t]instanceof Comment))return!1;for(let t=0;t<e.removedNodes.length;t++)if(!(e.removedNodes[t]instanceof Comment))return!1;return!0}return!1}var k_e=(()=>{class e{create(n){return typeof MutationObserver>"u"?null:new MutationObserver(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Lqe=(()=>{class e{_mutationObserverFactory=k(k_e);_observedElements=new Map;_ngZone=k(De);constructor(){}ngOnDestroy(){this._observedElements.forEach((n,r)=>this._cleanupObserver(r))}observe(n){let r=Rs(n);return new Nt(i=>{let s=this._observeElement(r).pipe(et(a=>a.filter(c=>!$qe(c))),Kt(a=>!!a.length)).subscribe(a=>{this._ngZone.run(()=>{i.next(a)})});return()=>{s.unsubscribe(),this._unobserveElement(r)}})}_observeElement(n){return this._ngZone.runOutsideAngular(()=>{if(this._observedElements.has(n))this._observedElements.get(n).count++;else{let r=new ge,i=this._mutationObserverFactory.create(o=>r.next(o));i&&i.observe(n,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(n,{observer:i,stream:r,count:1})}return this._observedElements.get(n).stream})}_unobserveElement(n){this._observedElements.has(n)&&(this._observedElements.get(n).count--,this._observedElements.get(n).count||this._cleanupObserver(n))}_cleanupObserver(n){if(this._observedElements.has(n)){let{observer:r,stream:i}=this._observedElements.get(n);r&&r.disconnect(),i.complete(),this._observedElements.delete(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),T_e=(()=>{class e{_contentObserver=k(Lqe);_elementRef=k(nt);event=new Ue;get disabled(){return this._disabled}set disabled(n){this._disabled=n,this._disabled?this._unsubscribe():this._subscribe()}_disabled=!1;get debounce(){return this._debounce}set debounce(n){this._debounce=Ps(n),this._subscribe()}_debounce;_currentSubscription=null;constructor(){}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();let n=this._contentObserver.observe(this._elementRef);this._currentSubscription=(this.debounce?n.pipe(Tu(this.debounce)):n).subscribe(this.event)}_unsubscribe(){this._currentSubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ne({type:e,selectors:[["","cdkObserveContent",""]],inputs:{disabled:[2,"cdkObserveContentDisabled","disabled",Nr],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]})}return e})(),JN=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({providers:[k_e]})}return e})();var bb=(()=>{class e{_platform=k(Ln);constructor(){}isDisabled(n){return n.hasAttribute("disabled")}isVisible(n){return jqe(n)&&getComputedStyle(n).visibility==="visible"}isTabbable(n){if(!this._platform.isBrowser)return!1;let r=Fqe(Gqe(n));if(r&&(A_e(r)===-1||!this.isVisible(r)))return!1;let i=n.nodeName.toLowerCase(),o=A_e(n);return n.hasAttribute("contenteditable")?o!==-1:i==="iframe"||i==="object"||this._platform.WEBKIT&&this._platform.IOS&&!Zqe(n)?!1:i==="audio"?n.hasAttribute("controls")?o!==-1:!1:i==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||n.hasAttribute("controls"):n.tabIndex>=0}isFocusable(n,r){return qqe(n)&&!this.isDisabled(n)&&(r?.ignoreVisibility||this.isVisible(n))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Fqe(e){try{return e.frameElement}catch{return null}}function jqe(e){return!!(e.offsetWidth||e.offsetHeight||typeof e.getClientRects=="function"&&e.getClientRects().length)}function zqe(e){let t=e.nodeName.toLowerCase();return t==="input"||t==="select"||t==="button"||t==="textarea"}function Bqe(e){return Vqe(e)&&e.type=="hidden"}function Uqe(e){return Hqe(e)&&e.hasAttribute("href")}function Vqe(e){return e.nodeName.toLowerCase()=="input"}function Hqe(e){return e.nodeName.toLowerCase()=="a"}function D_e(e){if(!e.hasAttribute("tabindex")||e.tabIndex===void 0)return!1;let t=e.getAttribute("tabindex");return!!(t&&!isNaN(parseInt(t,10)))}function A_e(e){if(!D_e(e))return null;let t=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}function Zqe(e){let t=e.nodeName.toLowerCase(),n=t==="input"&&e.type;return n==="text"||n==="password"||t==="select"||t==="textarea"}function qqe(e){return Bqe(e)?!1:zqe(e)||Uqe(e)||e.hasAttribute("contenteditable")||D_e(e)}function Gqe(e){return e.ownerDocument&&e.ownerDocument.defaultView||window}var YN=class{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_enabled=!0;constructor(t,n,r,i,o=!1,s){this._element=t,this._checker=n,this._ngZone=r,this._document=i,this._injector=s,o||this.attachAnchors()}destroy(){let t=this._startAnchor,n=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let n=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return t=="start"?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){let n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){let r=this._getFirstTabbableElement(n);return r?.focus(t),!!r}return n.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){let n=this._getRegionBoundary("start");return n&&n.focus(t),!!n}focusLastTabbableElement(t){let n=this._getRegionBoundary("end");return n&&n.focus(t),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let n=t.children;for(let r=0;r<n.length;r++){let i=n[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[r]):null;if(i)return i}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let n=t.children;for(let r=n.length-1;r>=0;r--){let i=n[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[r]):null;if(i)return i}return null}_createAnchor(){let t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,n){t?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._injector?Oi(t,{injector:this._injector}):setTimeout(t)}},TI=(()=>{class e{_checker=k(bb);_ngZone=k(De);_document=k(yt);_injector=k(ft);constructor(){k(Oo).load(E_e)}create(n,r=!1){return new YN(n,this._checker,this._ngZone,this._document,r,this._injector)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Am=(function(e){return e[e.NONE=0]="NONE",e[e.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",e[e.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",e})(Am||{}),O_e="cdk-high-contrast-black-on-white",M_e="cdk-high-contrast-white-on-black",r9="cdk-high-contrast-active",i9=(()=>{class e{_platform=k(Ln);_hasCheckedHighContrastMode;_document=k(yt);_breakpointSubscription;constructor(){this._breakpointSubscription=k(n9).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Am.NONE;let n=this._document.createElement("div");n.style.backgroundColor="rgb(1,2,3)",n.style.position="absolute",this._document.body.appendChild(n);let r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(n):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(n.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Am.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Am.BLACK_ON_WHITE}return Am.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let n=this._document.body.classList;n.remove(r9,O_e,M_e),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===Am.BLACK_ON_WHITE?n.add(r9,O_e):r===Am.WHITE_ON_BLACK&&n.add(r9,M_e)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var o9={},ua=(()=>{class e{_appId=k(qg);getId(n){return this._appId!=="ng"&&(n+=this._appId),o9.hasOwnProperty(n)||(o9[n]=0),`${n}${o9[n]++}`}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Wqe=200,QN=class{_letterKeyStream=new ge;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new ge;selectedItem=this._selectedItem;constructor(t,n){let r=typeof n?.debounceInterval=="number"?n.debounceInterval:Wqe;n?.skipPredicate&&(this._skipPredicateFn=n.skipPredicate),this.setItems(t),this._setupKeyHandler(r)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(t){this._selectedItemIndex=t}setItems(t){this._items=t}handleKey(t){let n=t.keyCode;t.key&&t.key.length===1?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(n>=65&&n<=90||n>=48&&n<=57)&&this._letterKeyStream.next(String.fromCharCode(n))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(t){this._letterKeyStream.pipe(qr(n=>this._pressedLetters.push(n)),Tu(t),Kt(()=>this._pressedLetters.length>0),et(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(n=>{for(let r=1;r<this._items.length+1;r++){let i=(this._selectedItemIndex+r)%this._items.length,o=this._items[i];if(!this._skipPredicateFn?.(o)&&o.getLabel?.().toLocaleUpperCase().trim().indexOf(n)===0){this._selectedItem.next(o);break}}this._pressedLetters=[]})}};function yu(e,...t){return t.length?t.some(n=>e[n]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}var XN=class{_items;_activeItemIndex=Pn(-1);_activeItem=Pn(null);_wrap=!1;_typeaheadSubscription=fn.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=t=>t.disabled;constructor(t,n){this._items=t,t instanceof Ua?this._itemChangesSubscription=t.changes.subscribe(r=>this._itemsChanged(r.toArray())):mp(t)&&(this._effectRef=Uu(()=>this._itemsChanged(t()),{injector:n}))}tabOut=new ge;change=new ge;skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){this._typeaheadSubscription.unsubscribe();let n=this._getItemsArray();return this._typeahead=new QN(n,{debounceInterval:typeof t=="number"?t:void 0,skipPredicate:r=>this._skipPredicateFn(r)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(r=>{this.setActiveItem(r)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,n=10){return this._pageUpAndDown={enabled:t,delta:n},this}setActiveItem(t){let n=this._activeItem();this.updateActiveItem(t),this._activeItem()!==n&&this.change.next(this._activeItemIndex())}onKeydown(t){let n=t.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!t[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(n){case 9:this.tabOut.next();return;case 40:if(this._vertical&&i){this.setNextItemActive();break}else return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&i){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&i){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&i){let o=this._activeItemIndex()-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&i){let o=this._activeItemIndex()+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(o<s?o:s-1,-1);break}else return;default:(i||yu(t,"shiftKey"))&&this._typeahead?.handleKey(t);return}this._typeahead?.reset(),t.preventDefault()}get activeItemIndex(){return this._activeItemIndex()}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex()<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex()<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){let n=this._getItemsArray(),r=typeof t=="number"?t:n.indexOf(t),i=n[r];this._activeItem.set(i??null),this._activeItemIndex.set(r),this._typeahead?.setCurrentSelectedItemIndex(r)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){let n=this._getItemsArray();for(let r=1;r<=n.length;r++){let i=(this._activeItemIndex()+t*r+n.length)%n.length,o=n[i];if(!this._skipPredicateFn(o)){this.setActiveItem(i);return}}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex()+t,t)}_setActiveItemByIndex(t,n){let r=this._getItemsArray();if(r[t]){for(;this._skipPredicateFn(r[t]);)if(t+=n,!r[t])return;this.setActiveItem(t)}}_getItemsArray(){return mp(this._items)?this._items():this._items instanceof Ua?this._items.toArray():this._items}_itemsChanged(t){this._typeahead?.setItems(t);let n=this._activeItem();if(n){let r=t.indexOf(n);r>-1&&r!==this._activeItemIndex()&&(this._activeItemIndex.set(r),this._typeahead?.setCurrentSelectedItemIndex(r))}}};var AI=class extends XN{_origin="program";setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}};var wb=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Ve({type:e,selectors:[["structural-styles"]],decls:0,vars:0,template:function(r,i){},styles:[`.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
`],encapsulation:2,changeDetection:0})}return e})();var il=(function(e){return e[e.NORMAL=0]="NORMAL",e[e.NEGATED=1]="NEGATED",e[e.INVERTED=2]="INVERTED",e})(il||{}),e$,Kh;function t$(){if(Kh==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Kh=!1,Kh;if(document.documentElement?.style&&"scrollBehavior"in document.documentElement.style)Kh=!0;else{let e=Element.prototype.scrollTo;e?Kh=!/\{\s*\[native code\]\s*\}/.test(e.toString()):Kh=!1}}return Kh}function xb(){if(typeof document!="object"||!document)return il.NORMAL;if(e$==null){let e=document.createElement("div"),t=e.style;e.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";let n=document.createElement("div"),r=n.style;r.width="2px",r.height="1px",e.appendChild(n),document.body.appendChild(e),e$=il.NORMAL,e.scrollLeft===0&&(e.scrollLeft=1,e$=e.scrollLeft===0?il.NEGATED:il.INVERTED),e.remove()}return e$}function c9(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var Cb,N_e=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function l9(){if(Cb)return Cb;if(typeof document!="object"||!document)return Cb=new Set(N_e),Cb;let e=document.createElement("input");return Cb=new Set(N_e.filter(t=>(e.setAttribute("type",t),e.type===t))),Cb}function Ci(e){return e==null?"":typeof e=="string"?e:`${e}px`}function Qi(e){return e!=null&&`${e}`!="false"}var Jqe=new X("MATERIAL_ANIMATIONS");var $_e=null;function OI(){return k(Jqe,{optional:!0})?.animationsDisabled||k(L0,{optional:!0})==="NoopAnimations"?"di-disabled":($_e??=k(KN).matchMedia("(prefers-reduced-motion)").matches,$_e?"reduced-motion":"enabled")}function uo(){return OI()!=="enabled"}var fc=(function(e){return e[e.FADING_IN=0]="FADING_IN",e[e.VISIBLE=1]="VISIBLE",e[e.FADING_OUT=2]="FADING_OUT",e[e.HIDDEN=3]="HIDDEN",e})(fc||{}),u9=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=fc.HIDDEN;constructor(t,n,r,i=!1){this._renderer=t,this.element=n,this.config=r,this._animationForciblyDisabledThroughCss=i}fadeOut(){this._renderer.fadeOutRipple(this)}},L_e=yb({passive:!0,capture:!0}),d9=class{_events=new Map;addHandler(t,n,r,i){let o=this._events.get(n);if(o){let s=o.get(r);s?s.add(i):o.set(r,new Set([i]))}else this._events.set(n,new Map([[r,new Set([i])]])),t.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,L_e)})}removeHandler(t,n,r){let i=this._events.get(t);if(!i)return;let o=i.get(n);o&&(o.delete(r),o.size===0&&i.delete(n),i.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,L_e)))}_delegateEventHandler=t=>{let n=la(t);n&&this._events.get(t.type)?.forEach((r,i)=>{(i===n||i.contains(n))&&r.forEach(o=>o.handleEvent(t))})}},MI={enterDuration:225,exitDuration:150},Yqe=800,F_e=yb({passive:!0,capture:!0}),j_e=["mousedown","touchstart"],z_e=["mouseup","mouseleave","touchend","touchcancel"],Qqe=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Ve({type:e,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(r,i){},styles:[`.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
`],encapsulation:2,changeDetection:0})}return e})(),Jh=class e{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new d9;constructor(t,n,r,i,o){this._target=t,this._ngZone=n,this._platform=i,i.isBrowser&&(this._containerElement=Rs(r)),o&&o.get(Oo).load(Qqe)}fadeInRipple(t,n,r={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=m(m({},MI),r.animation);r.centered&&(t=i.left+i.width/2,n=i.top+i.height/2);let s=r.radius||Xqe(t,n,i),a=t-i.left,c=n-i.top,u=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=`${a-s}px`,d.style.top=`${c-s}px`,d.style.height=`${s*2}px`,d.style.width=`${s*2}px`,r.color!=null&&(d.style.backgroundColor=r.color),d.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(d);let f=window.getComputedStyle(d),g=f.transitionProperty,h=f.transitionDuration,v=g==="none"||h==="0s"||h==="0s, 0s"||i.width===0&&i.height===0,x=new u9(this,d,r,v);d.style.transform="scale3d(1, 1, 1)",x.state=fc.FADING_IN,r.persistent||(this._mostRecentTransientRipple=x);let E=null;return!v&&(u||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let C=()=>{E&&(E.fallbackTimer=null),clearTimeout(A),this._finishRippleTransition(x)},S=()=>this._destroyRipple(x),A=setTimeout(S,u+100);d.addEventListener("transitionend",C),d.addEventListener("transitioncancel",S),E={onTransitionEnd:C,onTransitionCancel:S,fallbackTimer:A}}),this._activeRipples.set(x,E),(v||!u)&&this._finishRippleTransition(x),x}fadeOutRipple(t){if(t.state===fc.FADING_OUT||t.state===fc.HIDDEN)return;let n=t.element,r=m(m({},MI),t.config.animation);n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",t.state=fc.FADING_OUT,(t._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let n=Rs(t);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,j_e.forEach(r=>{e._eventManager.addHandler(this._ngZone,r,n,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{z_e.forEach(n=>{this._triggerElement.addEventListener(n,this,F_e)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===fc.FADING_IN?this._startFadeOutTransition(t):t.state===fc.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let n=t===this._mostRecentTransientRipple,{persistent:r}=t.config;t.state=fc.VISIBLE,!r&&(!n||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let n=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=fc.HIDDEN,n!==null&&(t.element.removeEventListener("transitionend",n.onTransitionEnd),t.element.removeEventListener("transitioncancel",n.onTransitionCancel),n.fallbackTimer!==null&&clearTimeout(n.fallbackTimer)),t.element.remove()}_onMousedown(t){let n=qh(t),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+Yqe;!this._target.rippleDisabled&&!n&&!r&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Gh(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=t.changedTouches;if(n)for(let r=0;r<n.length;r++)this.fadeInRipple(n[r].clientX,n[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let n=t.state===fc.VISIBLE||t.config.terminateOnPointerUp&&t.state===fc.FADING_IN;!t.config.persistent&&n&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(j_e.forEach(n=>e._eventManager.removeHandler(n,t,this)),this._pointerUpEventsRegistered&&(z_e.forEach(n=>t.removeEventListener(n,this,F_e)),this._pointerUpEventsRegistered=!1))}};function Xqe(e,t,n){let r=Math.max(Math.abs(e-n.left),Math.abs(e-n.right)),i=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(r*r+i*i)}var DI=new X("mat-ripple-global-options"),B_e=(()=>{class e{_elementRef=k(nt);_animationsDisabled=uo();color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(n){n&&this.fadeOutAllNonPersistent(),this._disabled=n,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(n){this._trigger=n,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){let n=k(De),r=k(Ln),i=k(DI,{optional:!0}),o=k(ft);this._globalOptions=i||{},this._rippleRenderer=new Jh(this,n,this._elementRef,r,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:m(m(m({},this._globalOptions.animation),this._animationsDisabled?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(n,r=0,i){return typeof n=="number"?this._rippleRenderer.fadeInRipple(n,r,m(m({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,m(m({},this.rippleConfig),n))}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ne({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,i){r&2&&at("mat-ripple-unbounded",i.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return e})();var PI=class{_attachedHost;attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},Eb=class extends PI{component;viewContainerRef;injector;projectableNodes;constructor(t,n,r,i){super(),this.component=t,this.viewContainerRef=n,this.injector=r,this.projectableNodes=i}},Om=class extends PI{templateRef;viewContainerRef;context;injector;constructor(t,n,r,i){super(),this.templateRef=t,this.viewContainerRef=n,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(t,n=this.context){return this.context=n,super.attach(t)}detach(){return this.context=void 0,super.detach()}},p9=class extends PI{element;constructor(t){super(),this.element=t instanceof nt?t.nativeElement:t}},Ib=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof Eb)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof Om)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof p9)return this._attachedPortal=t,this.attachDomPortal(t)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},RI=class extends Ib{outletElement;_appRef;_defaultInjector;constructor(t,n,r){super(),this.outletElement=t,this._appRef=n,this._defaultInjector=r}attachComponentPortal(t){let n;if(t.viewContainerRef){let r=t.injector||t.viewContainerRef.injector,i=r.get(Il,null,{optional:!0})||void 0;n=t.viewContainerRef.createComponent(t.component,{index:t.viewContainerRef.length,injector:r,ngModuleRef:i,projectableNodes:t.projectableNodes||void 0}),this.setDisposeFn(()=>n.destroy())}else{let r=this._appRef,i=t.injector||this._defaultInjector||ft.NULL,o=i.get(Dr,r.injector);n=mT(t.component,{elementInjector:i,environmentInjector:o,projectableNodes:t.projectableNodes||void 0}),r.attachView(n.hostView),this.setDisposeFn(()=>{r.viewCount>0&&r.detachView(n.hostView),n.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(n)),this._attachedPortal=t,n}attachTemplatePortal(t){let n=t.viewContainerRef,r=n.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=n.indexOf(r);i!==-1&&n.remove(i)}),this._attachedPortal=t,r}attachDomPortal=t=>{let n=t.element;n.parentNode;let r=this.outletElement.ownerDocument.createComment("dom-portal");n.parentNode.insertBefore(r,n),this.outletElement.appendChild(n),this._attachedPortal=t,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(n,r)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var NI=(()=>{class e extends Ib{_moduleRef=k(Il,{optional:!0});_document=k(yt);_viewContainerRef=k(Zi);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(n){this.hasAttached()&&!n&&!this._isInitialized||(this.hasAttached()&&super.detach(),n&&super.attach(n),this._attachedPortal=n||null)}attached=new Ue;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(n){n.setAttachedHost(this);let r=n.viewContainerRef!=null?n.viewContainerRef:this._viewContainerRef,i=r.createComponent(n.component,{index:r.length,injector:n.injector||r.injector,projectableNodes:n.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return r!==this._viewContainerRef&&this._getRootNode().appendChild(i.hostView.rootNodes[0]),super.setDisposeFn(()=>i.destroy()),this._attachedPortal=n,this._attachedRef=i,this.attached.emit(i),i}attachTemplatePortal(n){n.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=n,this._attachedRef=r,this.attached.emit(r),r}attachDomPortal=n=>{let r=n.element;r.parentNode;let i=this._document.createComment("dom-portal");n.setAttachedHost(this),r.parentNode.insertBefore(i,r),this._getRootNode().appendChild(r),this._attachedPortal=n,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(r,i)})};_getRootNode(){let n=this._viewContainerRef.element.nativeElement;return n.nodeType===n.ELEMENT_NODE?n:n.parentNode}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ne({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Jt]})}return e})();var n$=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({})}return e})();var e9e=new X("cdk-dir-doc",{providedIn:"root",factory:t9e});function t9e(){return k(yt)}var n9e=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function U_e(e){let t=e?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?n9e.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var da=(()=>{class e{get value(){return this.valueSignal()}valueSignal=Pn("ltr");change=new Ue;constructor(){let n=k(e9e,{optional:!0});if(n){let r=n.body?n.body.dir:null,i=n.documentElement?n.documentElement.dir:null;this.valueSignal.set(U_e(r||i||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Mm=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({})}return e})();var r9e=20,Qh=(()=>{class e{_ngZone=k(De);_platform=k(Ln);_renderer=k(Ai).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new ge;_scrolledCount=0;scrollContainers=new Map;register(n){this.scrollContainers.has(n)||this.scrollContainers.set(n,n.elementScrolled().subscribe(()=>this._scrolled.next(n)))}deregister(n){let r=this.scrollContainers.get(n);r&&(r.unsubscribe(),this.scrollContainers.delete(n))}scrolled(n=r9e){return this._platform.isBrowser?new Nt(r=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let i=n>0?this._scrolled.pipe(Cg(n)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):Xe()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((n,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(n,r){let i=this.getAncestorScrollContainers(n);return this.scrolled(r).pipe(Kt(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(n){let r=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,n)&&r.push(o)}),r}_scrollableContainsElement(n,r){let i=Rs(r),o=n.getElementRef().nativeElement;do if(i==o)return!0;while(i=i.parentElement);return!1}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Sb=(()=>{class e{elementRef=k(nt);scrollDispatcher=k(Qh);ngZone=k(De);dir=k(da,{optional:!0});_scrollElement=this.elementRef.nativeElement;_destroyed=new ge;_renderer=k(rr);_cleanupScroll;_elementScrolled=new ge;constructor(){}ngOnInit(){this._cleanupScroll=this.ngZone.runOutsideAngular(()=>this._renderer.listen(this._scrollElement,"scroll",n=>this._elementScrolled.next(n))),this.scrollDispatcher.register(this)}ngOnDestroy(){this._cleanupScroll?.(),this._elementScrolled.complete(),this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(n){let r=this.elementRef.nativeElement,i=this.dir&&this.dir.value=="rtl";n.left==null&&(n.left=i?n.end:n.start),n.right==null&&(n.right=i?n.start:n.end),n.bottom!=null&&(n.top=r.scrollHeight-r.clientHeight-n.bottom),i&&xb()!=il.NORMAL?(n.left!=null&&(n.right=r.scrollWidth-r.clientWidth-n.left),xb()==il.INVERTED?n.left=n.right:xb()==il.NEGATED&&(n.left=n.right?-n.right:n.right)):n.right!=null&&(n.left=r.scrollWidth-r.clientWidth-n.right),this._applyScrollToOptions(n)}_applyScrollToOptions(n){let r=this.elementRef.nativeElement;t$()?r.scrollTo(n):(n.top!=null&&(r.scrollTop=n.top),n.left!=null&&(r.scrollLeft=n.left))}measureScrollOffset(n){let r="left",i="right",o=this.elementRef.nativeElement;if(n=="top")return o.scrollTop;if(n=="bottom")return o.scrollHeight-o.clientHeight-o.scrollTop;let s=this.dir&&this.dir.value=="rtl";return n=="start"?n=s?i:r:n=="end"&&(n=s?r:i),s&&xb()==il.INVERTED?n==r?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:s&&xb()==il.NEGATED?n==r?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:n==r?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ne({type:e,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return e})(),i9e=20,Dm=(()=>{class e{_platform=k(Ln);_listeners;_viewportSize;_change=new ge;_document=k(yt);constructor(){let n=k(De),r=k(Ai).createRenderer(null,null);n.runOutsideAngular(()=>{if(this._platform.isBrowser){let i=o=>this._change.next(o);this._listeners=[r.listen("window","resize",i),r.listen("window","orientationchange",i)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(n=>n()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let n={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),n}getViewportRect(){let n=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:n.top,left:n.left,bottom:n.top+i,right:n.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let n=this._document,r=this._getWindow(),i=n.documentElement,o=i.getBoundingClientRect(),s=-o.top||n.body.scrollTop||r.scrollY||i.scrollTop||0,a=-o.left||n.body.scrollLeft||r.scrollX||i.scrollLeft||0;return{top:s,left:a}}change(n=i9e){return n>0?this._change.pipe(Cg(n)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let n=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:n.innerWidth,height:n.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Yh=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({})}return e})(),m9=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({imports:[Mm,Yh,Mm,Yh]})}return e})();var V_e=t$();function Tb(e){return new r$(e.get(Dm),e.get(yt))}var r$=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(t,n){this._viewportRuler=t,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Ci(-this._previousScrollPosition.left),t.style.top=Ci(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,n=this._document.body,r=t.style,i=n.style,o=r.scrollBehavior||"",s=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),V_e&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),V_e&&(r.scrollBehavior=o,i.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.documentElement,r=this._viewportRuler.getViewportSize();return n.scrollHeight>r.height||n.scrollWidth>r.width}};function J_e(e,t){return new i$(e.get(Qh),e.get(De),e.get(Dm),t)}var i$=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(t,n,r,i){this._scrollDispatcher=t,this._ngZone=n,this._viewportRuler=r,this._config=i}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(Kt(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var $I=class{enable(){}disable(){}attach(){}};function f9(e,t){return t.some(n=>{let r=e.bottom<n.top,i=e.top>n.bottom,o=e.right<n.left,s=e.left>n.right;return r||i||o||s})}function H_e(e,t){return t.some(n=>{let r=e.top<n.top,i=e.bottom>n.bottom,o=e.left<n.left,s=e.right>n.right;return r||i||o||s})}function eg(e,t){return new o$(e.get(Qh),e.get(Dm),e.get(De),t)}var o$=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(t,n,r,i){this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=r,this._config=i}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();f9(n,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Y_e=(()=>{class e{_injector=k(ft);constructor(){}noop=()=>new $I;close=n=>J_e(this._injector,n);block=()=>Tb(this._injector);reposition=n=>eg(this._injector,n);static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Pm=class{positionStrategy;scrollStrategy=new $I;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(t){if(t){let n=Object.keys(t);for(let r of n)t[r]!==void 0&&(this[r]=t[r])}}};var s$=class{connectionPair;scrollableViewProperties;constructor(t,n){this.connectionPair=t,this.scrollableViewProperties=n}};var Q_e=(()=>{class e{_attachedOverlays=[];_document=k(yt);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(n){this.remove(n),this._attachedOverlays.push(n)}remove(n){let r=this._attachedOverlays.indexOf(n);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),X_e=(()=>{class e extends Q_e{_ngZone=k(De);_renderer=k(Ai).createRenderer(null,null);_cleanupKeydown;add(n){super.add(n),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=n=>{let r=this._attachedOverlays;for(let i=r.length-1;i>-1;i--)if(r[i]._keydownEvents.observers.length>0){this._ngZone.run(()=>r[i]._keydownEvents.next(n));break}};static \u0275fac=(()=>{let n;return function(i){return(n||(n=Jn(e)))(i||e)}})();static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),eye=(()=>{class e extends Q_e{_platform=k(Ln);_ngZone=k(De);_renderer=k(Ai).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(n){if(super.add(n),!this._isAttached){let r=this._document.body,i={capture:!0},o=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[o.listen(r,"pointerdown",this._pointerDownListener,i),o.listen(r,"click",this._clickListener,i),o.listen(r,"auxclick",this._clickListener,i),o.listen(r,"contextmenu",this._clickListener,i)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(n=>n()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=n=>{this._pointerDownEventTarget=la(n)};_clickListener=n=>{let r=la(n),i=n.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:r;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let s=o.length-1;s>-1;s--){let a=o[s];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(Z_e(a.overlayElement,r)||Z_e(a.overlayElement,i))break;let c=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>c.next(n)):c.next(n)}};static \u0275fac=(()=>{let n;return function(i){return(n||(n=Jn(e)))(i||e)}})();static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Z_e(e,t){let n=typeof ShadowRoot<"u"&&ShadowRoot,r=t;for(;r;){if(r===e)return!0;r=n&&r instanceof ShadowRoot?r.host:r.parentNode}return!1}var tye=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Ve({type:e,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(r,i){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return e})(),l$=(()=>{class e{_platform=k(Ln);_containerElement;_document=k(yt);_styleLoader=k(Oo);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let n="cdk-overlay-container";if(this._platform.isBrowser||c9()){let i=this._document.querySelectorAll(`.${n}[platform="server"], .${n}[platform="test"]`);for(let o=0;o<i.length;o++)i[o].remove()}let r=this._document.createElement("div");r.classList.add(n),c9()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}_loadStyles(){this._styleLoader.load(tye)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),h9=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(t,n,r,i){this._renderer=n,this._ngZone=r,this.element=t.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=n.listen(this.element,"click",i)}detach(){this._ngZone.runOutsideAngular(()=>{let t=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(t,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),t.style.pointerEvents="none",t.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},kb=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new ge;_attachments=new ge;_detachments=new ge;_positionStrategy;_scrollStrategy;_locationChanges=fn.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new ge;_outsidePointerEvents=new ge;_afterNextRenderRef;constructor(t,n,r,i,o,s,a,c,u,d=!1,f,g){this._portalOutlet=t,this._host=n,this._pane=r,this._config=i,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=c,this._outsideClickDispatcher=u,this._animationsDisabled=d,this._injector=f,this._renderer=g,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Oi(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,t&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=m(m({},this._config),t),this._updateElementSize()}setDirection(t){this._config=b(m({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=Ci(this._config.width),t.height=Ci(this._config.height),t.minWidth=Ci(this._config.minWidth),t.minHeight=Ci(this._config.minHeight),t.maxWidth=Ci(this._config.maxWidth),t.maxHeight=Ci(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new h9(this._document,this._renderer,this._ngZone,n=>{this._backdropClick.next(n)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(t))}):this._backdropRef.element.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(t,n,r){let i=vb(n||[]).filter(o=>!!o);i.length&&(r?t.classList.add(...i):t.classList.remove(...i))}_detachContentWhenEmpty(){let t=!1;try{this._detachContentAfterRenderRef=Oi(()=>{t=!0,this._detachContent()},{injector:this._injector})}catch(n){if(t)throw n;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let t=this._scrollStrategy;t?.disable(),t?.detach?.()}},q_e="cdk-overlay-connected-position-bounding-box",o9e=/([A-Za-z%]+)$/;function u$(e,t){return new a$(t,e.get(Dm),e.get(yt),e.get(Ln),e.get(l$))}var a$=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new ge;_resizeSubscription=fn.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(t,n,r,i,o){this._viewportRuler=n,this._document=r,this._platform=i,this._overlayContainer=o,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(q_e),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,n=this._overlayRect,r=this._viewportRect,i=this._containerRect,o=[],s;for(let a of this._preferredPositions){let c=this._getOriginPoint(t,i,a),u=this._getOverlayPoint(c,n,a),d=this._getOverlayFit(u,n,r,a);if(d.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,c);return}if(this._canFitWithFlexibleDimensions(d,u,r)){o.push({position:a,origin:c,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(c,a)});continue}(!s||s.overlayFit.visibleArea<d.visibleArea)&&(s={overlayFit:d,overlayPoint:u,originPoint:c,position:a,overlayRect:n})}if(o.length){let a=null,c=-1;for(let u of o){let d=u.boundingBoxRect.width*u.boundingBoxRect.height*(u.position.weight||1);d>c&&(c=d,a=u)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Xh(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(q_e),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,n)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,n,r){let i;if(r.originX=="center")i=t.left+t.width/2;else{let s=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;i=r.originX=="start"?s:a}n.left<0&&(i-=n.left);let o;return r.originY=="center"?o=t.top+t.height/2:o=r.originY=="top"?t.top:t.bottom,n.top<0&&(o-=n.top),{x:i,y:o}}_getOverlayPoint(t,n,r){let i;r.overlayX=="center"?i=-n.width/2:r.overlayX==="start"?i=this._isRtl()?-n.width:0:i=this._isRtl()?0:-n.width;let o;return r.overlayY=="center"?o=-n.height/2:o=r.overlayY=="top"?0:-n.height,{x:t.x+i,y:t.y+o}}_getOverlayFit(t,n,r,i){let o=W_e(n),{x:s,y:a}=t,c=this._getOffset(i,"x"),u=this._getOffset(i,"y");c&&(s+=c),u&&(a+=u);let d=0-s,f=s+o.width-r.width,g=0-a,h=a+o.height-r.height,v=this._subtractOverflows(o.width,d,f),x=this._subtractOverflows(o.height,g,h),E=v*x;return{visibleArea:E,isCompletelyWithinViewport:o.width*o.height===E,fitsInViewportVertically:x===o.height,fitsInViewportHorizontally:v==o.width}}_canFitWithFlexibleDimensions(t,n,r){if(this._hasFlexibleDimensions){let i=r.bottom-n.y,o=r.right-n.x,s=G_e(this._overlayRef.getConfig().minHeight),a=G_e(this._overlayRef.getConfig().minWidth),c=t.fitsInViewportVertically||s!=null&&s<=i,u=t.fitsInViewportHorizontally||a!=null&&a<=o;return c&&u}return!1}_pushOverlayOnScreen(t,n,r){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let i=W_e(n),o=this._viewportRect,s=Math.max(t.x+i.width-o.width,0),a=Math.max(t.y+i.height-o.height,0),c=Math.max(o.top-r.top-t.y,0),u=Math.max(o.left-r.left-t.x,0),d=0,f=0;return i.width<=o.width?d=u||-s:d=t.x<this._viewportMargin?o.left-r.left-t.x:0,i.height<=o.height?f=c||-a:f=t.y<this._viewportMargin?o.top-r.top-t.y:0,this._previousPushAmount={x:d,y:f},{x:t.x+d,y:t.y+f}}_applyPosition(t,n){if(this._setTransformOrigin(t),this._setOverlayElementStyles(n,t),this._setBoundingBoxStyles(n,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let r=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!s9e(this._lastScrollVisibility,r)){let i=new s$(t,r);this._positionChanges.next(i)}this._lastScrollVisibility=r}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),r,i=t.overlayY;t.overlayX==="center"?r="center":this._isRtl()?r=t.overlayX==="start"?"right":"left":r=t.overlayX==="start"?"left":"right";for(let o=0;o<n.length;o++)n[o].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(t,n){let r=this._viewportRect,i=this._isRtl(),o,s,a;if(n.overlayY==="top")s=t.y,o=r.height-s+this._viewportMargin;else if(n.overlayY==="bottom")a=r.height-t.y+this._viewportMargin*2,o=r.height-a+this._viewportMargin;else{let h=Math.min(r.bottom-t.y+r.top,t.y),v=this._lastBoundingBoxSize.height;o=h*2,s=t.y-h,o>v&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-v/2)}let c=n.overlayX==="start"&&!i||n.overlayX==="end"&&i,u=n.overlayX==="end"&&!i||n.overlayX==="start"&&i,d,f,g;if(u)g=r.width-t.x+this._viewportMargin*2,d=t.x-this._viewportMargin;else if(c)f=t.x,d=r.right-t.x;else{let h=Math.min(r.right-t.x+r.left,t.x),v=this._lastBoundingBoxSize.width;d=h*2,f=t.x-h,d>v&&!this._isInitialRender&&!this._growAfterOpen&&(f=t.x-v/2)}return{top:s,left:f,bottom:a,right:g,width:d,height:o}}_setBoundingBoxStyles(t,n){let r=this._calculateBoundingBoxRect(t,n);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));let i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;i.height=Ci(r.height),i.top=Ci(r.top),i.bottom=Ci(r.bottom),i.width=Ci(r.width),i.left=Ci(r.left),i.right=Ci(r.right),n.overlayX==="center"?i.alignItems="center":i.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?i.justifyContent="center":i.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",o&&(i.maxHeight=Ci(o)),s&&(i.maxWidth=Ci(s))}this._lastBoundingBoxSize=r,Xh(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Xh(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Xh(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,n){let r={},i=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(i){let d=this._viewportRuler.getViewportScrollPosition();Xh(r,this._getExactOverlayY(n,t,d)),Xh(r,this._getExactOverlayX(n,t,d))}else r.position="static";let a="",c=this._getOffset(n,"x"),u=this._getOffset(n,"y");c&&(a+=`translateX(${c}px) `),u&&(a+=`translateY(${u}px)`),r.transform=a.trim(),s.maxHeight&&(i?r.maxHeight=Ci(s.maxHeight):o&&(r.maxHeight="")),s.maxWidth&&(i?r.maxWidth=Ci(s.maxWidth):o&&(r.maxWidth="")),Xh(this._pane.style,r)}_getExactOverlayY(t,n,r){let i={top:"",bottom:""},o=this._getOverlayPoint(n,this._overlayRect,t);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),t.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;i.bottom=`${s-(o.y+this._overlayRect.height)}px`}else i.top=Ci(o.y);return i}_getExactOverlayX(t,n,r){let i={left:"",right:""},o=this._getOverlayPoint(n,this._overlayRect,t);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r));let s;if(this._isRtl()?s=t.overlayX==="end"?"left":"right":s=t.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;i.right=`${a-(o.x+this._overlayRect.width)}px`}else i.left=Ci(o.x);return i}_getScrollVisibility(){let t=this._getOriginRect(),n=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:H_e(t,r),isOriginOutsideView:f9(t,r),isOverlayClipped:H_e(n,r),isOverlayOutsideView:f9(n,r)}}_subtractOverflows(t,...n){return n.reduce((r,i)=>r-Math.max(i,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+t-this._viewportMargin,bottom:r.top+n-this._viewportMargin,width:t-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,n){return n==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&vb(t).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof nt)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let n=t.width||0,r=t.height||0;return{top:t.y,bottom:t.y+r,left:t.x,right:t.x+n,height:r,width:n}}};function Xh(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function G_e(e){if(typeof e!="number"&&e!=null){let[t,n]=e.split(o9e);return!n||n==="px"?parseFloat(t):null}return e||null}function W_e(e){return{top:Math.floor(e.top),right:Math.floor(e.right),bottom:Math.floor(e.bottom),left:Math.floor(e.left),width:Math.floor(e.width),height:Math.floor(e.height)}}function s9e(e,t){return e===t?!0:e.isOriginClipped===t.isOriginClipped&&e.isOriginOutsideView===t.isOriginOutsideView&&e.isOverlayClipped===t.isOverlayClipped&&e.isOverlayOutsideView===t.isOverlayOutsideView}var K_e="cdk-global-overlay-wrapper";function Ab(e){return new c$}var c$=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(t){let n=t.getConfig();this._overlayRef=t,this._width&&!n.width&&t.updateSize({width:this._width}),this._height&&!n.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(K_e),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:o,maxWidth:s,maxHeight:a}=r,c=(i==="100%"||i==="100vw")&&(!s||s==="100%"||s==="100vw"),u=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),d=this._xPosition,f=this._xOffset,g=this._overlayRef.getConfig().direction==="rtl",h="",v="",x="";c?x="flex-start":d==="center"?(x="center",g?v=f:h=f):g?d==="left"||d==="end"?(x="flex-end",h=f):(d==="right"||d==="start")&&(x="flex-start",v=f):d==="left"||d==="start"?(x="flex-start",h=f):(d==="right"||d==="end")&&(x="flex-end",v=f),t.position=this._cssPosition,t.marginLeft=c?"0":h,t.marginTop=u?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=c?"0":v,n.justifyContent=x,n.alignItems=u?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,r=n.style;n.classList.remove(K_e),r.justifyContent=r.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},nye=(()=>{class e{_injector=k(ft);constructor(){}global(){return Ab()}flexibleConnectedTo(n){return u$(this._injector,n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Ob(e,t){e.get(Oo).load(tye);let n=e.get(l$),r=e.get(yt),i=e.get(ua),o=e.get(No),s=e.get(da),a=r.createElement("div"),c=r.createElement("div");c.id=i.getId("cdk-overlay-"),c.classList.add("cdk-overlay-pane"),a.appendChild(c),n.getContainerElement().appendChild(a);let u=new RI(c,o,e),d=new Pm(t),f=e.get(rr,null,{optional:!0})||e.get(Ai).createRenderer(null,null);return d.direction=d.direction||s.value,new kb(u,a,c,d,e.get(De),e.get(X_e),r,e.get(wp),e.get(eye),t?.disableAnimations??e.get(L0,null,{optional:!0})==="NoopAnimations",e.get(Dr),f)}var rye=(()=>{class e{scrollStrategies=k(Y_e);_positionBuilder=k(nye);_injector=k(ft);constructor(){}create(n){return Ob(this._injector,n)}position(){return this._positionBuilder}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var a9e=new X("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let e=k(ft);return()=>eg(e)}});function c9e(e){let t=k(ft);return()=>eg(t)}var l9e={provide:a9e,useFactory:c9e},LI=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({providers:[rye,l9e],imports:[Mm,n$,m9,m9]})}return e})();var dn=(()=>{class e{constructor(){k(i9)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({imports:[Mm,Mm]})}return e})();var Rm=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({imports:[dn,dn]})}return e})();var d9e=["mat-menu-item",""],p9e=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],m9e=["mat-icon, [matMenuItemIcon]","*"];function f9e(e,t){e&1&&(Nu(),N(0,"svg",2),Vt(1,"polygon",3),$())}var h9e=["*"];function g9e(e,t){if(e&1){let n=Qt();yo(0,"div",0),Jg("click",function(){Je(n);let i=H();return Ye(i.closed.emit("click"))})("animationstart",function(i){Je(n);let o=H();return Ye(o._onAnimationStart(i.animationName))})("animationend",function(i){Je(n);let o=H();return Ye(o._onAnimationDone(i.animationName))})("animationcancel",function(i){Je(n);let o=H();return Ye(o._onAnimationDone(i.animationName))}),yo(1,"div",1),Ht(2),$o()()}if(e&2){let n=H();zs(n._classList),at("mat-menu-panel-animations-disabled",n._animationsDisabled)("mat-menu-panel-exit-animation",n._panelAnimationState==="void")("mat-menu-panel-animating",n._isAnimating()),Ic("id",n.panelId),Yt("aria-label",n.ariaLabel||null)("aria-labelledby",n.ariaLabelledby||null)("aria-describedby",n.ariaDescribedby||null)}}var y9=new X("MAT_MENU_PANEL"),FI=(()=>{class e{_elementRef=k(nt);_document=k(yt);_focusMonitor=k(_u);_parentMenu=k(y9,{optional:!0});_changeDetectorRef=k(Tr);role="menuitem";disabled=!1;disableRipple=!1;_hovered=new ge;_focused=new ge;_highlighted=!1;_triggersSubmenu=!1;constructor(){k(Oo).load(wb),this._parentMenu?.addItem?.(this)}focus(n,r){this._focusMonitor&&n?this._focusMonitor.focusVia(this._getHostElement(),n,r):this._getHostElement().focus(r),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(n){this.disabled&&(n.preventDefault(),n.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){let n=this._elementRef.nativeElement.cloneNode(!0),r=n.querySelectorAll("mat-icon, .material-icons");for(let i=0;i<r.length;i++)r[i].remove();return n.textContent?.trim()||""}_setHighlighted(n){this._highlighted=n,this._changeDetectorRef.markForCheck()}_setTriggersSubmenu(n){this._triggersSubmenu=n,this._changeDetectorRef.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Ve({type:e,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-focus-indicator"],hostVars:8,hostBindings:function(r,i){r&1&&Te("click",function(s){return i._checkDisabled(s)})("mouseenter",function(){return i._handleMouseEnter()}),r&2&&(Yt("role",i.role)("tabindex",i._getTabIndex())("aria-disabled",i.disabled)("disabled",i.disabled||null),at("mat-mdc-menu-item-highlighted",i._highlighted)("mat-mdc-menu-item-submenu-trigger",i._triggersSubmenu))},inputs:{role:"role",disabled:[2,"disabled","disabled",Nr],disableRipple:[2,"disableRipple","disableRipple",Nr]},exportAs:["matMenuItem"],attrs:d9e,ngContentSelectors:m9e,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(r,i){r&1&&(lr(p9e),Ht(0),N(1,"span",0),Ht(2,1),$(),Vt(3,"div",1),wt(4,f9e,2,0,":svg:svg",2)),r&2&&(R(3),K("matRippleDisabled",i.disableRipple||i.disabled)("matRippleTrigger",i._getHostElement()),R(),xt(i._triggersSubmenu?4:-1))},dependencies:[B_e],encapsulation:2,changeDetection:0})}return e})();var _9e=new X("MatMenuContent");var y9e=new X("mat-menu-default-options",{providedIn:"root",factory:v9e});function v9e(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}var g9="_mat-menu-enter",d$="_mat-menu-exit",Db=(()=>{class e{_elementRef=k(nt);_changeDetectorRef=k(Tr);_injector=k(ft);_keyManager;_xPosition;_yPosition;_firstItemFocusRef;_exitFallbackTimeout;_animationsDisabled=uo();_allItems;_directDescendantItems=new Ua;_classList={};_panelAnimationState="void";_animationDone=new ge;_isAnimating=Pn(!1);parentMenu;direction;overlayPanelClass;backdropClass;ariaLabel;ariaLabelledby;ariaDescribedby;get xPosition(){return this._xPosition}set xPosition(n){this._xPosition=n,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(n){this._yPosition=n,this.setPositionClasses()}templateRef;items;lazyContent;overlapTrigger;hasBackdrop;set panelClass(n){let r=this._previousPanelClass,i=m({},this._classList);r&&r.length&&r.split(" ").forEach(o=>{i[o]=!1}),this._previousPanelClass=n,n&&n.length&&(n.split(" ").forEach(o=>{i[o]=!0}),this._elementRef.nativeElement.className=""),this._classList=i}_previousPanelClass;get classList(){return this.panelClass}set classList(n){this.panelClass=n}closed=new Ue;close=this.closed;panelId=k(ua).getId("mat-menu-panel-");constructor(){let n=k(y9e);this.overlayPanelClass=n.overlayPanelClass||"",this._xPosition=n.xPosition,this._yPosition=n.yPosition,this.backdropClass=n.backdropClass,this.overlapTrigger=n.overlapTrigger,this.hasBackdrop=n.hasBackdrop}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new AI(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Ui(this._directDescendantItems),oi(n=>is(...n.map(r=>r._focused)))).subscribe(n=>this._keyManager.updateActiveItem(n)),this._directDescendantItems.changes.subscribe(n=>{let r=this._keyManager;if(this._panelAnimationState==="enter"&&r.activeItem?._hasFocus()){let i=n.toArray(),o=Math.max(0,Math.min(i.length-1,r.activeItemIndex||0));i[o]&&!i[o].disabled?r.setActiveItem(o):r.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusRef?.destroy(),clearTimeout(this._exitFallbackTimeout)}_hovered(){return this._directDescendantItems.changes.pipe(Ui(this._directDescendantItems),oi(r=>is(...r.map(i=>i._hovered))))}addItem(n){}removeItem(n){}_handleKeydown(n){let r=n.keyCode,i=this._keyManager;switch(r){case 27:yu(n)||(n.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&this.direction==="ltr"&&this.closed.emit("keydown");break;case 39:this.parentMenu&&this.direction==="rtl"&&this.closed.emit("keydown");break;default:(r===38||r===40)&&i.setFocusOrigin("keyboard"),i.onKeydown(n);return}}focusFirstItem(n="program"){this._firstItemFocusRef?.destroy(),this._firstItemFocusRef=Oi(()=>{let r=this._resolvePanel();if(!r||!r.contains(document.activeElement)){let i=this._keyManager;i.setFocusOrigin(n).setFirstItemActive(),!i.activeItem&&r&&r.focus()}},{injector:this._injector})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(n){}setPositionClasses(n=this.xPosition,r=this.yPosition){this._classList=b(m({},this._classList),{"mat-menu-before":n==="before","mat-menu-after":n==="after","mat-menu-above":r==="above","mat-menu-below":r==="below"}),this._changeDetectorRef.markForCheck()}_onAnimationDone(n){let r=n===d$;(r||n===g9)&&(r&&(clearTimeout(this._exitFallbackTimeout),this._exitFallbackTimeout=void 0),this._animationDone.next(r?"void":"enter"),this._isAnimating.set(!1))}_onAnimationStart(n){(n===g9||n===d$)&&this._isAnimating.set(!0)}_setIsOpen(n){if(this._panelAnimationState=n?"enter":"void",n){if(this._keyManager.activeItemIndex===0){let r=this._resolvePanel();r&&(r.scrollTop=0)}}else this._animationsDisabled||(this._exitFallbackTimeout=setTimeout(()=>this._onAnimationDone(d$),200));this._animationsDisabled&&setTimeout(()=>{this._onAnimationDone(n?g9:d$)}),this._changeDetectorRef.markForCheck()}_updateDirectDescendants(){this._allItems.changes.pipe(Ui(this._allItems)).subscribe(n=>{this._directDescendantItems.reset(n.filter(r=>r._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}_resolvePanel(){let n=null;return this._directDescendantItems.length&&(n=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),n}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Ve({type:e,selectors:[["mat-menu"]],contentQueries:function(r,i,o){if(r&1&&(Rr(o,_9e,5),Rr(o,FI,5),Rr(o,FI,4)),r&2){let s;St(s=kt())&&(i.lazyContent=s.first),St(s=kt())&&(i._allItems=s),St(s=kt())&&(i.items=s)}},viewQuery:function(r,i){if(r&1&&Zn(Po,5),r&2){let o;St(o=kt())&&(i.templateRef=o.first)}},hostVars:3,hostBindings:function(r,i){r&2&&Yt("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:[2,"overlapTrigger","overlapTrigger",Nr],hasBackdrop:[2,"hasBackdrop","hasBackdrop",n=>n==null?null:Nr(n)],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"},exportAs:["matMenu"],features:[En([{provide:y9,useExisting:e}])],ngContentSelectors:h9e,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel",3,"click","animationstart","animationend","animationcancel","id"],[1,"mat-mdc-menu-content"]],template:function(r,i){r&1&&(lr(),Z0(0,g9e,3,12,"ng-template"))},styles:[`mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;outline:0}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-menu-item-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-menu-item-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-menu-item-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-menu-item-label-text-weight, var(--mat-sys-label-large-weight))}@keyframes _mat-menu-enter{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:none}}@keyframes _mat-menu-exit{from{opacity:1}to{opacity:0}}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;box-sizing:border-box;outline:0;animation:_mat-menu-enter 120ms cubic-bezier(0, 0, 0.2, 1);border-radius:var(--mat-menu-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-menu-container-color, var(--mat-sys-surface-container));box-shadow:var(--mat-menu-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));will-change:transform,opacity}.mat-mdc-menu-panel.mat-menu-panel-exit-animation{animation:_mat-menu-exit 100ms 25ms linear forwards}.mat-mdc-menu-panel.mat-menu-panel-animations-disabled{animation:none}.mat-mdc-menu-panel.mat-menu-panel-animating{pointer-events:none}.mat-mdc-menu-panel.mat-menu-panel-animating:has(.mat-mdc-menu-content:empty){display:none}@media(forced-colors: active){.mat-mdc-menu-panel{outline:solid 1px}}.mat-mdc-menu-panel .mat-divider{color:var(--mat-menu-divider-color, var(--mat-sys-surface-variant));margin-bottom:var(--mat-menu-divider-bottom-spacing, 8px);margin-top:var(--mat-menu-divider-top-spacing, 8px)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px;padding-left:var(--mat-menu-item-leading-spacing, 12px);padding-right:var(--mat-menu-item-trailing-spacing, 12px);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-menu-item::-moz-focus-inner{border:0}[dir=rtl] .mat-mdc-menu-item{padding-left:var(--mat-menu-item-trailing-spacing, 12px);padding-right:var(--mat-menu-item-leading-spacing, 12px)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-trailing-spacing, 12px)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-trailing-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-leading-spacing, 12px)}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item:focus{outline:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing, 12px);height:var(--mat-menu-item-icon-size, 24px);width:var(--mat-menu-item-icon-size, 24px)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing, 12px)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}@media(forced-colors: active){.mat-mdc-menu-item{margin-top:1px}}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size, 24px);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing, 12px)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing, 12px);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1);transform-origin:center}@media(forced-colors: active){.mat-mdc-menu-submenu-icon{fill:CanvasText}}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}
`],encapsulation:2,changeDetection:0})}return e})(),iye=new X("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let e=k(ft);return()=>eg(e)}});function b9e(e){let t=k(ft);return()=>eg(t)}var w9e={provide:iye,deps:[],useFactory:b9e};var Mb=new WeakMap,x9e=(()=>{class e{_canHaveBackdrop;_element=k(nt);_viewContainerRef=k(Zi);_menuItemInstance=k(FI,{optional:!0,self:!0});_dir=k(da,{optional:!0});_focusMonitor=k(_u);_ngZone=k(De);_injector=k(ft);_scrollStrategy=k(iye);_changeDetectorRef=k(Tr);_animationsDisabled=uo();_portal;_overlayRef=null;_menuOpen=!1;_closingActionsSubscription=fn.EMPTY;_menuCloseSubscription=fn.EMPTY;_pendingRemoval;_parentMaterialMenu;_parentInnerPadding;_openedBy=void 0;get _menu(){return this._menuInternal}set _menu(n){n!==this._menuInternal&&(this._menuInternal=n,this._menuCloseSubscription.unsubscribe(),n&&(this._parentMaterialMenu,this._menuCloseSubscription=n.close.subscribe(r=>{this._destroyMenu(r),(r==="click"||r==="tab")&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(r)})),this._menuItemInstance?._setTriggersSubmenu(this._triggersSubmenu()))}_menuInternal;constructor(n){this._canHaveBackdrop=n;let r=k(y9,{optional:!0});this._parentMaterialMenu=r instanceof Db?r:void 0}ngOnDestroy(){this._menu&&this._ownsMenu(this._menu)&&Mb.delete(this._menu),this._pendingRemoval?.unsubscribe(),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null)}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this._menu)}_closeMenu(){this._menu?.close.emit()}_openMenu(n){let r=this._menu;if(this._menuOpen||!r)return;this._pendingRemoval?.unsubscribe();let i=Mb.get(r);Mb.set(r,this),i&&i!==this&&i._closeMenu();let o=this._createOverlay(r),s=o.getConfig(),a=s.positionStrategy;this._setPosition(r,a),this._canHaveBackdrop?s.hasBackdrop=r.hasBackdrop==null?!this._triggersSubmenu():r.hasBackdrop:s.hasBackdrop=!1,o.hasAttached()||(o.attach(this._getPortal(r)),r.lazyContent?.attach(this.menuData)),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this._closeMenu()),r.parentMenu=this._triggersSubmenu()?this._parentMaterialMenu:void 0,r.direction=this.dir,n&&r.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0),r instanceof Db&&(r._setIsOpen(!0),r._directDescendantItems.changes.pipe(sr(r.close)).subscribe(()=>{a.withLockedPosition(!1).reapplyLastPosition(),a.withLockedPosition(!0)}))}focus(n,r){this._focusMonitor&&n?this._focusMonitor.focusVia(this._element,n,r):this._element.nativeElement.focus(r)}_destroyMenu(n){let r=this._overlayRef,i=this._menu;!r||!this.menuOpen||(this._closingActionsSubscription.unsubscribe(),this._pendingRemoval?.unsubscribe(),i instanceof Db&&this._ownsMenu(i)?(this._pendingRemoval=i._animationDone.pipe(Xr(1)).subscribe(()=>{r.detach(),Mb.has(i)||i.lazyContent?.detach()}),i._setIsOpen(!1)):(r.detach(),i?.lazyContent?.detach()),i&&this._ownsMenu(i)&&Mb.delete(i),this.restoreFocus&&(n==="keydown"||!this._openedBy||!this._triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,this._setIsMenuOpen(!1))}_setIsMenuOpen(n){n!==this._menuOpen&&(this._menuOpen=n,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this._triggersSubmenu()&&this._menuItemInstance._setHighlighted(n),this._changeDetectorRef.markForCheck())}_createOverlay(n){if(!this._overlayRef){let r=this._getOverlayConfig(n);this._subscribeToPositions(n,r.positionStrategy),this._overlayRef=Ob(this._injector,r),this._overlayRef.keydownEvents().subscribe(i=>{this._menu instanceof Db&&this._menu._handleKeydown(i)})}return this._overlayRef}_getOverlayConfig(n){return new Pm({positionStrategy:u$(this._injector,this._getOverlayOrigin()).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:n.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:n.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir||"ltr",disableAnimations:this._animationsDisabled})}_subscribeToPositions(n,r){n.setPositionClasses&&r.positionChanges.subscribe(i=>{this._ngZone.run(()=>{let o=i.connectionPair.overlayX==="start"?"after":"before",s=i.connectionPair.overlayY==="top"?"below":"above";n.setPositionClasses(o,s)})})}_setPosition(n,r){let[i,o]=n.xPosition==="before"?["end","start"]:["start","end"],[s,a]=n.yPosition==="above"?["bottom","top"]:["top","bottom"],[c,u]=[s,a],[d,f]=[i,o],g=0;if(this._triggersSubmenu()){if(f=i=n.xPosition==="before"?"start":"end",o=d=i==="end"?"start":"end",this._parentMaterialMenu){if(this._parentInnerPadding==null){let h=this._parentMaterialMenu.items.first;this._parentInnerPadding=h?h._getHostElement().offsetTop:0}g=s==="bottom"?this._parentInnerPadding:-this._parentInnerPadding}}else n.overlapTrigger||(c=s==="top"?"bottom":"top",u=a==="top"?"bottom":"top");r.withPositions([{originX:i,originY:c,overlayX:d,overlayY:s,offsetY:g},{originX:o,originY:c,overlayX:f,overlayY:s,offsetY:g},{originX:i,originY:u,overlayX:d,overlayY:a,offsetY:-g},{originX:o,originY:u,overlayX:f,overlayY:a,offsetY:-g}])}_menuClosingActions(){let n=this._getOutsideClickStream(this._overlayRef),r=this._overlayRef.detachments(),i=this._parentMaterialMenu?this._parentMaterialMenu.closed:Xe(),o=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Kt(s=>this._menuOpen&&s!==this._menuItemInstance)):Xe();return is(n,i,o,r)}_getPortal(n){return(!this._portal||this._portal.templateRef!==n.templateRef)&&(this._portal=new Om(n.templateRef,this._viewContainerRef)),this._portal}_ownsMenu(n){return Mb.get(n)===this}static \u0275fac=function(r){C2()};static \u0275dir=Ne({type:e})}return e})(),oye=(()=>{class e extends x9e{_cleanupTouchstart;_hoverSubscription=fn.EMPTY;get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(n){this.menu=n}get menu(){return this._menu}set menu(n){this._menu=n}menuData;restoreFocus=!0;menuOpened=new Ue;onMenuOpen=this.menuOpened;menuClosed=new Ue;onMenuClose=this.menuClosed;constructor(){super(!0);let n=k(rr);this._cleanupTouchstart=n.listen(this._element.nativeElement,"touchstart",r=>{Gh(r)||(this._openedBy="touch")},{passive:!0})}triggersSubmenu(){return super._triggersSubmenu()}toggleMenu(){return this.menuOpen?this.closeMenu():this.openMenu()}openMenu(){this._openMenu(!0)}closeMenu(){this._closeMenu()}updatePosition(){this._overlayRef?.updatePosition()}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){super.ngOnDestroy(),this._cleanupTouchstart(),this._hoverSubscription.unsubscribe()}_getOverlayOrigin(){return this._element}_getOutsideClickStream(n){return n.backdropClick()}_handleMousedown(n){qh(n)||(this._openedBy=n.button===0?"mouse":void 0,this.triggersSubmenu()&&n.preventDefault())}_handleKeydown(n){let r=n.keyCode;(r===13||r===32)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(r===39&&this.dir==="ltr"||r===37&&this.dir==="rtl")&&(this._openedBy="keyboard",this.openMenu())}_handleClick(n){this.triggersSubmenu()?(n.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){this.triggersSubmenu()&&this._parentMaterialMenu&&(this._hoverSubscription=this._parentMaterialMenu._hovered().subscribe(n=>{n===this._menuItemInstance&&!n.disabled&&this._parentMaterialMenu?._panelAnimationState!=="void"&&(this._openedBy="mouse",this._openMenu(!1))}))}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ne({type:e,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],hostVars:3,hostBindings:function(r,i){r&1&&Te("click",function(s){return i._handleClick(s)})("mousedown",function(s){return i._handleMousedown(s)})("keydown",function(s){return i._handleKeydown(s)}),r&2&&Yt("aria-haspopup",i.menu?"menu":null)("aria-expanded",i.menuOpen)("aria-controls",i.menuOpen?i.menu==null?null:i.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:[0,"mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:[0,"matMenuTriggerFor","menu"],menuData:[0,"matMenuTriggerData","menuData"],restoreFocus:[0,"matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"],features:[Jt]})}return e})();var sye=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({providers:[w9e],imports:[Rm,dn,LI,Yh,dn]})}return e})(),aye={transformMenu:{type:7,name:"transformMenu",definitions:[{type:0,name:"void",styles:{type:6,styles:{opacity:0,transform:"scale(0.8)"},offset:null}},{type:1,expr:"void => enter",animation:{type:4,styles:{type:6,styles:{opacity:1,transform:"scale(1)"},offset:null},timings:"120ms cubic-bezier(0, 0, 0.2, 1)"},options:null},{type:1,expr:"* => void",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"100ms 25ms linear"},options:null}],options:{}},fadeInItems:{type:7,name:"fadeInItems",definitions:[{type:0,name:"showing",styles:{type:6,styles:{opacity:1},offset:null}},{type:1,expr:"void => *",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:null,timings:"400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}},Cdn=aye.fadeInItems,Edn=aye.transformMenu;var p$;function E9e(){if(p$===void 0&&(p$=null,typeof window<"u")){let e=window;e.trustedTypes!==void 0&&(p$=e.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return p$}function jI(e){return E9e()?.createHTML(e)||e}function cye(e){return Error(`Unable to find icon with the name "${e}"`)}function I9e(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function lye(e){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${e}".`)}function uye(e){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${e}".`)}var Zd=class{url;svgText;options;svgElement;constructor(t,n,r){this.url=t,this.svgText=n,this.options=r}},pye=(()=>{class e{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(n,r,i,o){this._httpClient=n,this._sanitizer=r,this._errorHandler=o,this._document=i}addSvgIcon(n,r,i){return this.addSvgIconInNamespace("",n,r,i)}addSvgIconLiteral(n,r,i){return this.addSvgIconLiteralInNamespace("",n,r,i)}addSvgIconInNamespace(n,r,i,o){return this._addSvgIconConfig(n,r,new Zd(i,null,o))}addSvgIconResolver(n){return this._resolvers.push(n),this}addSvgIconLiteralInNamespace(n,r,i,o){let s=this._sanitizer.sanitize(Hi.HTML,i);if(!s)throw uye(i);let a=jI(s);return this._addSvgIconConfig(n,r,new Zd("",a,o))}addSvgIconSet(n,r){return this.addSvgIconSetInNamespace("",n,r)}addSvgIconSetLiteral(n,r){return this.addSvgIconSetLiteralInNamespace("",n,r)}addSvgIconSetInNamespace(n,r,i){return this._addSvgIconSetConfig(n,new Zd(r,null,i))}addSvgIconSetLiteralInNamespace(n,r,i){let o=this._sanitizer.sanitize(Hi.HTML,r);if(!o)throw uye(r);let s=jI(o);return this._addSvgIconSetConfig(n,new Zd("",s,i))}registerFontClassAlias(n,r=n){return this._fontCssClassesByAlias.set(n,r),this}classNameForFontAlias(n){return this._fontCssClassesByAlias.get(n)||n}setDefaultFontSetClass(...n){return this._defaultFontSetClass=n,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(n){let r=this._sanitizer.sanitize(Hi.RESOURCE_URL,n);if(!r)throw lye(n);let i=this._cachedIconsByUrl.get(r);return i?Xe(m$(i)):this._loadSvgIconFromConfig(new Zd(n,null)).pipe(qr(o=>this._cachedIconsByUrl.set(r,o)),et(o=>m$(o)))}getNamedSvgIcon(n,r=""){let i=dye(r,n),o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,n),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);let s=this._iconSetConfigs.get(r);return s?this._getSvgFromIconSetConfigs(n,s):Xd(cye(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(n){return n.svgText?Xe(m$(this._svgElementFromConfig(n))):this._loadSvgIconFromConfig(n).pipe(et(r=>m$(r)))}_getSvgFromIconSetConfigs(n,r){let i=this._extractIconWithNameFromAnySet(n,r);if(i)return Xe(i);let o=r.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(pl(a=>{let u=`Loading icon set URL: ${this._sanitizer.sanitize(Hi.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(u)),Xe(null)})));return i0(o).pipe(et(()=>{let s=this._extractIconWithNameFromAnySet(n,r);if(!s)throw cye(n);return s}))}_extractIconWithNameFromAnySet(n,r){for(let i=r.length-1;i>=0;i--){let o=r[i];if(o.svgText&&o.svgText.toString().indexOf(n)>-1){let s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,n,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(n){return this._fetchIcon(n).pipe(qr(r=>n.svgText=r),et(()=>this._svgElementFromConfig(n)))}_loadSvgIconSetFromConfig(n){return n.svgText?Xe(null):this._fetchIcon(n).pipe(qr(r=>n.svgText=r))}_extractSvgIconFromSet(n,r,i){let o=n.querySelector(`[id="${r}"]`);if(!o)return null;let s=o.cloneNode(!0);if(s.removeAttribute("id"),s.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(s,i);if(s.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(s),i);let a=this._svgElementFromString(jI("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,i)}_svgElementFromString(n){let r=this._document.createElement("DIV");r.innerHTML=n;let i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(n){let r=this._svgElementFromString(jI("<svg></svg>")),i=n.attributes;for(let o=0;o<i.length;o++){let{name:s,value:a}=i[o];s!=="id"&&r.setAttribute(s,a)}for(let o=0;o<n.childNodes.length;o++)n.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(n.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(n,r){return n.setAttribute("fit",""),n.setAttribute("height","100%"),n.setAttribute("width","100%"),n.setAttribute("preserveAspectRatio","xMidYMid meet"),n.setAttribute("focusable","false"),r&&r.viewBox&&n.setAttribute("viewBox",r.viewBox),n}_fetchIcon(n){let{url:r,options:i}=n,o=i?.withCredentials??!1;if(!this._httpClient)throw I9e();if(r==null)throw Error(`Cannot fetch icon from URL "${r}".`);let s=this._sanitizer.sanitize(Hi.RESOURCE_URL,r);if(!s)throw lye(r);let a=this._inProgressUrlFetches.get(s);if(a)return a;let c=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(et(u=>jI(u)),ml(()=>this._inProgressUrlFetches.delete(s)),a0());return this._inProgressUrlFetches.set(s,c),c}_addSvgIconConfig(n,r,i){return this._svgIconConfigs.set(dye(n,r),i),this}_addSvgIconSetConfig(n,r){let i=this._iconSetConfigs.get(n);return i?i.push(r):this._iconSetConfigs.set(n,[r]),this}_svgElementFromConfig(n){if(!n.svgElement){let r=this._svgElementFromString(n.svgText);this._setSvgAttributes(r,n.options),n.svgElement=r}return n.svgElement}_getIconConfigFromResolvers(n,r){for(let i=0;i<this._resolvers.length;i++){let o=this._resolvers[i](r,n);if(o)return S9e(o)?new Zd(o.url,null,o.options):new Zd(o,null)}}static \u0275fac=function(r){return new(r||e)(Be(o_,8),Be(mw),Be(yt,8),Be(to))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function m$(e){return e.cloneNode(!0)}function dye(e,t){return e+":"+t}function S9e(e){return!!(e.url&&e.options)}var k9e=["*"],T9e=new X("MAT_ICON_DEFAULT_OPTIONS"),A9e=new X("mat-icon-location",{providedIn:"root",factory:O9e});function O9e(){let e=k(yt),t=e?e.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}var mye=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],M9e=mye.map(e=>`[${e}]`).join(", "),D9e=/^url\(['"]?#(.*?)['"]?\)$/,Rb=(()=>{class e{_elementRef=k(nt);_iconRegistry=k(pye);_location=k(A9e);_errorHandler=k(to);_defaultColor;get color(){return this._color||this._defaultColor}set color(n){this._color=n}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(n){n!==this._svgIcon&&(n?this._updateSvgIcon(n):this._svgIcon&&this._clearSvgElement(),this._svgIcon=n)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(n){let r=this._cleanupFontValue(n);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(n){let r=this._cleanupFontValue(n);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=fn.EMPTY;constructor(){let n=k(new K0("aria-hidden"),{optional:!0}),r=k(T9e,{optional:!0});r&&(r.color&&(this.color=this._defaultColor=r.color),r.fontSet&&(this.fontSet=r.fontSet)),n||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(n){if(!n)return["",""];let r=n.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${n}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let n=this._elementsWithExternalReferences;if(n&&n.size){let r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(n){this._clearSvgElement();let r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(n),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(n)}_clearSvgElement(){let n=this._elementRef.nativeElement,r=n.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){let i=n.childNodes[r];(i.nodeType!==1||i.nodeName.toLowerCase()==="svg")&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let n=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>n.classList.remove(i)),r.forEach(i=>n.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&n.classList.remove(this._previousFontIconClass),this.fontIcon&&n.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(n){return typeof n=="string"?n.trim().split(" ")[0]:n}_prependPathToReferences(n){let r=this._elementsWithExternalReferences;r&&r.forEach((i,o)=>{i.forEach(s=>{o.setAttribute(s.name,`url('${n}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(n){let r=n.querySelectorAll(M9e),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)mye.forEach(s=>{let a=r[o],c=a.getAttribute(s),u=c?c.match(D9e):null;if(u){let d=i.get(a);d||(d=[],i.set(a,d)),d.push({name:s,value:u[1]})}})}_updateSvgIcon(n){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),n){let[r,i]=this._splitIconName(n);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(Xr(1)).subscribe(o=>this._setSvgElement(o),o=>{let s=`Error retrieving icon ${r}:${i}! ${o.message}`;this._errorHandler.handleError(new Error(s))})}}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Ve({type:e,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,i){r&2&&(Yt("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),zs(i.color?"mat-"+i.color:""),at("mat-icon-inline",i.inline)("mat-icon-no-color",i.color!=="primary"&&i.color!=="accent"&&i.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Nr],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],ngContentSelectors:k9e,decls:1,vars:0,template:function(r,i){r&1&&(lr(),Ht(0))},styles:[`mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}
`],encapsulation:2,changeDetection:0})}return e})(),Nb=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({imports:[dn,dn]})}return e})();var fye=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Ve({type:e,selectors:[["ng-component"]],hostAttrs:["cdk-text-field-style-loader",""],decls:0,vars:0,template:function(r,i){},styles:[`textarea.cdk-textarea-autosize{resize:none}textarea.cdk-textarea-autosize-measuring{padding:2px 0 !important;box-sizing:content-box !important;height:auto !important;overflow:hidden !important}textarea.cdk-textarea-autosize-measuring-firefox{padding:2px 0 !important;box-sizing:content-box !important;height:0 !important}@keyframes cdk-text-field-autofill-start{/*!*/}@keyframes cdk-text-field-autofill-end{/*!*/}.cdk-text-field-autofill-monitored:-webkit-autofill{animation:cdk-text-field-autofill-start 0s 1ms}.cdk-text-field-autofill-monitored:not(:-webkit-autofill){animation:cdk-text-field-autofill-end 0s 1ms}
`],encapsulation:2,changeDetection:0})}return e})(),P9e={passive:!0},hye=(()=>{class e{_platform=k(Ln);_ngZone=k(De);_renderer=k(Ai).createRenderer(null,null);_styleLoader=k(Oo);_monitoredElements=new Map;constructor(){}monitor(n){if(!this._platform.isBrowser)return eo;this._styleLoader.load(fye);let r=Rs(n),i=this._monitoredElements.get(r);if(i)return i.subject;let o=new ge,s="cdk-text-field-autofilled",a=u=>{u.animationName==="cdk-text-field-autofill-start"&&!r.classList.contains(s)?(r.classList.add(s),this._ngZone.run(()=>o.next({target:u.target,isAutofilled:!0}))):u.animationName==="cdk-text-field-autofill-end"&&r.classList.contains(s)&&(r.classList.remove(s),this._ngZone.run(()=>o.next({target:u.target,isAutofilled:!1})))},c=this._ngZone.runOutsideAngular(()=>(r.classList.add("cdk-text-field-autofill-monitored"),this._renderer.listen(r,"animationstart",a,P9e)));return this._monitoredElements.set(r,{subject:o,unlisten:c}),o}stopMonitoring(n){let r=Rs(n),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((n,r)=>this.stopMonitoring(r))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var gye=(()=>{class e{_elementRef=k(nt);_platform=k(Ln);_ngZone=k(De);_renderer=k(rr);_resizeEvents=new ge;_previousValue;_initialHeight;_destroyed=new ge;_listenerCleanups;_minRows;_maxRows;_enabled=!0;_previousMinRows=-1;_textareaElement;get minRows(){return this._minRows}set minRows(n){this._minRows=Ps(n),this._setMinHeight()}get maxRows(){return this._maxRows}set maxRows(n){this._maxRows=Ps(n),this._setMaxHeight()}get enabled(){return this._enabled}set enabled(n){this._enabled!==n&&((this._enabled=n)?this.resizeToFitContent(!0):this.reset())}get placeholder(){return this._textareaElement.placeholder}set placeholder(n){this._cachedPlaceholderHeight=void 0,n?this._textareaElement.setAttribute("placeholder",n):this._textareaElement.removeAttribute("placeholder"),this._cacheTextareaPlaceholderHeight()}_cachedLineHeight;_cachedPlaceholderHeight;_document=k(yt);_hasFocus;_isViewInited=!1;constructor(){k(Oo).load(fye),this._textareaElement=this._elementRef.nativeElement}_setMinHeight(){let n=this.minRows&&this._cachedLineHeight?`${this.minRows*this._cachedLineHeight}px`:null;n&&(this._textareaElement.style.minHeight=n)}_setMaxHeight(){let n=this.maxRows&&this._cachedLineHeight?`${this.maxRows*this._cachedLineHeight}px`:null;n&&(this._textareaElement.style.maxHeight=n)}ngAfterViewInit(){this._platform.isBrowser&&(this._initialHeight=this._textareaElement.style.height,this.resizeToFitContent(),this._ngZone.runOutsideAngular(()=>{this._listenerCleanups=[this._renderer.listen("window","resize",()=>this._resizeEvents.next()),this._renderer.listen(this._textareaElement,"focus",this._handleFocusEvent),this._renderer.listen(this._textareaElement,"blur",this._handleFocusEvent)],this._resizeEvents.pipe(Cg(16)).subscribe(()=>{this._cachedLineHeight=this._cachedPlaceholderHeight=void 0,this.resizeToFitContent(!0)})}),this._isViewInited=!0,this.resizeToFitContent(!0))}ngOnDestroy(){this._listenerCleanups?.forEach(n=>n()),this._resizeEvents.complete(),this._destroyed.next(),this._destroyed.complete()}_cacheTextareaLineHeight(){if(this._cachedLineHeight)return;let n=this._textareaElement.cloneNode(!1),r=n.style;n.rows=1,r.position="absolute",r.visibility="hidden",r.border="none",r.padding="0",r.height="",r.minHeight="",r.maxHeight="",r.top=r.bottom=r.left=r.right="auto",r.overflow="hidden",this._textareaElement.parentNode.appendChild(n),this._cachedLineHeight=n.clientHeight,n.remove(),this._setMinHeight(),this._setMaxHeight()}_measureScrollHeight(){let n=this._textareaElement,r=n.style.marginBottom||"",i=this._platform.FIREFOX,o=i&&this._hasFocus,s=i?"cdk-textarea-autosize-measuring-firefox":"cdk-textarea-autosize-measuring";o&&(n.style.marginBottom=`${n.clientHeight}px`),n.classList.add(s);let a=n.scrollHeight-4;return n.classList.remove(s),o&&(n.style.marginBottom=r),a}_cacheTextareaPlaceholderHeight(){if(!this._isViewInited||this._cachedPlaceholderHeight!=null)return;if(!this.placeholder){this._cachedPlaceholderHeight=0;return}let n=this._textareaElement.value;this._textareaElement.value=this._textareaElement.placeholder,this._cachedPlaceholderHeight=this._measureScrollHeight(),this._textareaElement.value=n}_handleFocusEvent=n=>{this._hasFocus=n.type==="focus"};ngDoCheck(){this._platform.isBrowser&&this.resizeToFitContent()}resizeToFitContent(n=!1){if(!this._enabled||(this._cacheTextareaLineHeight(),this._cacheTextareaPlaceholderHeight(),!this._cachedLineHeight))return;let r=this._elementRef.nativeElement,i=r.value;if(!n&&this._minRows===this._previousMinRows&&i===this._previousValue)return;let o=this._measureScrollHeight(),s=Math.max(o,this._cachedPlaceholderHeight||0);r.style.height=`${s}px`,this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame<"u"?requestAnimationFrame(()=>this._scrollToCaretPosition(r)):setTimeout(()=>this._scrollToCaretPosition(r))}),this._previousValue=i,this._previousMinRows=this._minRows}reset(){this._initialHeight!==void 0&&(this._textareaElement.style.height=this._initialHeight)}_noopInputHandler(){}_scrollToCaretPosition(n){let{selectionStart:r,selectionEnd:i}=n;!this._destroyed.isStopped&&this._hasFocus&&n.setSelectionRange(r,i)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ne({type:e,selectors:[["textarea","cdkTextareaAutosize",""]],hostAttrs:["rows","1",1,"cdk-textarea-autosize"],hostBindings:function(r,i){r&1&&Te("input",function(){return i._noopInputHandler()})},inputs:{minRows:[0,"cdkAutosizeMinRows","minRows"],maxRows:[0,"cdkAutosizeMaxRows","maxRows"],enabled:[2,"cdkTextareaAutosize","enabled",Nr],placeholder:"placeholder"},exportAs:["cdkTextareaAutosize"]})}return e})(),f$=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({})}return e})();var _ye=new X("MAT_INPUT_VALUE_ACCESSOR");var b9=class{_box;_destroyed=new ge;_resizeSubject=new ge;_resizeObserver;_elementObservables=new Map;constructor(t){this._box=t,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(n=>this._resizeSubject.next(n)))}observe(t){return this._elementObservables.has(t)||this._elementObservables.set(t,new Nt(n=>{let r=this._resizeSubject.subscribe(n);return this._resizeObserver?.observe(t,{box:this._box}),()=>{this._resizeObserver?.unobserve(t),r.unsubscribe(),this._elementObservables.delete(t)}}).pipe(Kt(n=>n.some(r=>r.target===t)),kg({bufferSize:1,refCount:!0}),sr(this._destroyed))),this._elementObservables.get(t)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},yye=(()=>{class e{_cleanupErrorListener;_observers=new Map;_ngZone=k(De);constructor(){typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,n]of this._observers)n.destroy();this._observers.clear(),this._cleanupErrorListener?.()}observe(n,r){let i=r?.box||"content-box";return this._observers.has(i)||this._observers.set(i,new b9(i)),this._observers.get(i).observe(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var N9e=["notch"],$9e=["matFormFieldNotchedOutline",""],L9e=["*"],vye=["iconPrefixContainer"],bye=["textPrefixContainer"],wye=["iconSuffixContainer"],xye=["textSuffixContainer"],F9e=["textField"],j9e=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],z9e=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function B9e(e,t){e&1&&Vt(0,"span",21)}function U9e(e,t){if(e&1&&(N(0,"label",20),Ht(1,1),wt(2,B9e,1,0,"span",21),$()),e&2){let n=H(2);K("floating",n._shouldLabelFloat())("monitorResize",n._hasOutline())("id",n._labelId),Yt("for",n._control.disableAutomaticLabeling?null:n._control.id),R(2),xt(!n.hideRequiredMarker&&n._control.required?2:-1)}}function V9e(e,t){if(e&1&&wt(0,U9e,3,5,"label",20),e&2){let n=H();xt(n._hasFloatingLabel()?0:-1)}}function H9e(e,t){e&1&&Vt(0,"div",7)}function Z9e(e,t){}function q9e(e,t){if(e&1&&ot(0,Z9e,0,0,"ng-template",13),e&2){H(2);let n=Lo(1);K("ngTemplateOutlet",n)}}function G9e(e,t){if(e&1&&(N(0,"div",9),wt(1,q9e,1,1,null,13),$()),e&2){let n=H();K("matFormFieldNotchedOutlineOpen",n._shouldLabelFloat()),R(),xt(n._forceDisplayInfixLabel()?-1:1)}}function W9e(e,t){e&1&&(N(0,"div",10,2),Ht(2,2),$())}function K9e(e,t){e&1&&(N(0,"div",11,3),Ht(2,3),$())}function J9e(e,t){}function Y9e(e,t){if(e&1&&ot(0,J9e,0,0,"ng-template",13),e&2){H();let n=Lo(1);K("ngTemplateOutlet",n)}}function Q9e(e,t){e&1&&(N(0,"div",14,4),Ht(2,4),$())}function X9e(e,t){e&1&&(N(0,"div",15,5),Ht(2,5),$())}function eGe(e,t){e&1&&Vt(0,"div",16)}function tGe(e,t){e&1&&(N(0,"div",18),Ht(1,6),$())}function nGe(e,t){if(e&1&&(N(0,"mat-hint",22),J(1),$()),e&2){let n=H(2);K("id",n._hintLabelId),R(),sn(n.hintLabel)}}function rGe(e,t){if(e&1&&(N(0,"div",19),wt(1,nGe,2,2,"mat-hint",22),Ht(2,7),Vt(3,"div",23),Ht(4,8),$()),e&2){let n=H();R(),xt(n.hintLabel?1:-1)}}var w9=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ne({type:e,selectors:[["mat-label"]]})}return e})(),iGe=new X("MatError");var x9=(()=>{class e{align="start";id=k(ua).getId("mat-mdc-hint-");static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ne({type:e,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(r,i){r&2&&(Ic("id",i.id),Yt("align",null),at("mat-mdc-form-field-hint-end",i.align==="end"))},inputs:{align:"align",id:"id"}})}return e})(),oGe=new X("MatPrefix");var sGe=new X("MatSuffix");var Aye=new X("FloatingLabelParent"),Cye=(()=>{class e{_elementRef=k(nt);get floating(){return this._floating}set floating(n){this._floating=n,this.monitorResize&&this._handleResize()}_floating=!1;get monitorResize(){return this._monitorResize}set monitorResize(n){this._monitorResize=n,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}_monitorResize=!1;_resizeObserver=k(yye);_ngZone=k(De);_parent=k(Aye);_resizeSubscription=new fn;constructor(){}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return aGe(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ne({type:e,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(r,i){r&2&&at("mdc-floating-label--float-above",i.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return e})();function aGe(e){let t=e;if(t.offsetParent!==null)return t.scrollWidth;let n=t.cloneNode(!0);n.style.setProperty("position","absolute"),n.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(n);let r=n.scrollWidth;return n.remove(),r}var Eye="mdc-line-ripple--active",h$="mdc-line-ripple--deactivating",Iye=(()=>{class e{_elementRef=k(nt);_cleanupTransitionEnd;constructor(){let n=k(De),r=k(rr);n.runOutsideAngular(()=>{this._cleanupTransitionEnd=r.listen(this._elementRef.nativeElement,"transitionend",this._handleTransitionEnd)})}activate(){let n=this._elementRef.nativeElement.classList;n.remove(h$),n.add(Eye)}deactivate(){this._elementRef.nativeElement.classList.add(h$)}_handleTransitionEnd=n=>{let r=this._elementRef.nativeElement.classList,i=r.contains(h$);n.propertyName==="opacity"&&i&&r.remove(Eye,h$)};ngOnDestroy(){this._cleanupTransitionEnd()}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ne({type:e,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return e})(),Sye=(()=>{class e{_elementRef=k(nt);_ngZone=k(De);open=!1;_notch;ngAfterViewInit(){let n=this._elementRef.nativeElement,r=n.querySelector(".mdc-floating-label");r?(n.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(r.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>r.style.transitionDuration="")}))):n.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(n){let r=this._notch.nativeElement;!this.open||!n?r.style.width="":r.style.width=`calc(${n}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}_setMaxWidth(n){this._notch.nativeElement.style.setProperty("--mat-form-field-notch-max-width",`calc(100% - ${n}px)`)}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Ve({type:e,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(r,i){if(r&1&&Zn(N9e,5),r&2){let o;St(o=kt())&&(i._notch=o.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(r,i){r&2&&at("mdc-notched-outline--notched",i.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},attrs:$9e,ngContentSelectors:L9e,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(r,i){r&1&&(lr(),cs(0,"div",1),yo(1,"div",2,0),Ht(3),$o(),cs(4,"div",3))},encapsulation:2,changeDetection:0})}return e})(),C9=(()=>{class e{value;stateChanges;id;placeholder;ngControl;focused;empty;shouldLabelFloat;required;disabled;errorState;controlType;autofilled;userAriaDescribedBy;disableAutomaticLabeling;describedByIds;static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ne({type:e})}return e})();var E9=new X("MatFormField"),cGe=new X("MAT_FORM_FIELD_DEFAULT_OPTIONS"),kye="fill",lGe="auto",Tye="fixed",uGe="translateY(-50%)",zI=(()=>{class e{_elementRef=k(nt);_changeDetectorRef=k(Tr);_platform=k(Ln);_idGenerator=k(ua);_ngZone=k(De);_defaults=k(cGe,{optional:!0});_currentDirection;_textField;_iconPrefixContainer;_textPrefixContainer;_iconSuffixContainer;_textSuffixContainer;_floatingLabel;_notchedOutline;_lineRipple;_iconPrefixContainerSignal=J0("iconPrefixContainer");_textPrefixContainerSignal=J0("textPrefixContainer");_iconSuffixContainerSignal=J0("iconSuffixContainer");_textSuffixContainerSignal=J0("textSuffixContainer");_prefixSuffixContainers=us(()=>[this._iconPrefixContainerSignal(),this._textPrefixContainerSignal(),this._iconSuffixContainerSignal(),this._textSuffixContainerSignal()].map(n=>n?.nativeElement).filter(n=>n!==void 0));_formFieldControl;_prefixChildren;_suffixChildren;_errorChildren;_hintChildren;_labelChild=uY(w9);get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(n){this._hideRequiredMarker=Qi(n)}_hideRequiredMarker=!1;color="primary";get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||lGe}set floatLabel(n){n!==this._floatLabel&&(this._floatLabel=n,this._changeDetectorRef.markForCheck())}_floatLabel;get appearance(){return this._appearanceSignal()}set appearance(n){let r=n||this._defaults?.appearance||kye;this._appearanceSignal.set(r)}_appearanceSignal=Pn(kye);get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||Tye}set subscriptSizing(n){this._subscriptSizing=n||this._defaults?.subscriptSizing||Tye}_subscriptSizing=null;get hintLabel(){return this._hintLabel}set hintLabel(n){this._hintLabel=n,this._processHints()}_hintLabel="";_hasIconPrefix=!1;_hasTextPrefix=!1;_hasIconSuffix=!1;_hasTextSuffix=!1;_labelId=this._idGenerator.getId("mat-mdc-form-field-label-");_hintLabelId=this._idGenerator.getId("mat-mdc-hint-");_describedByIds;get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(n){this._explicitFormFieldControl=n}_destroyed=new ge;_isFocused=null;_explicitFormFieldControl;_previousControl=null;_previousControlValidatorFn=null;_stateChanges;_valueChanges;_describedByChanges;_outlineLabelOffsetResizeObserver=null;_animationsDisabled=uo();constructor(){let n=this._defaults,r=k(da);n&&(n.appearance&&(this.appearance=n.appearance),this._hideRequiredMarker=!!n?.hideRequiredMarker,n.color&&(this.color=n.color)),Uu(()=>this._currentDirection=r.valueSignal()),this._syncOutlineLabelOffset()}ngAfterViewInit(){this._updateFocusState(),this._animationsDisabled||this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-form-field-animations-enabled")},300)}),this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._control.ngControl&&this._control.ngControl.control&&(this._previousControlValidatorFn=this._control.ngControl.control.validator),this._previousControl=this._control),this._control.ngControl&&this._control.ngControl.control&&this._control.ngControl.control.validator!==this._previousControlValidatorFn&&this._changeDetectorRef.markForCheck()}ngOnDestroy(){this._outlineLabelOffsetResizeObserver?.disconnect(),this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._describedByChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getLabelId=us(()=>this._hasFloatingLabel()?this._labelId:null);getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(n){let r=this._control,i="mat-mdc-form-field-type-";n&&this._elementRef.nativeElement.classList.remove(i+n.controlType),r.controlType&&this._elementRef.nativeElement.classList.add(i+r.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=r.stateChanges.subscribe(()=>{this._updateFocusState(),this._changeDetectorRef.markForCheck()}),this._describedByChanges?.unsubscribe(),this._describedByChanges=r.stateChanges.pipe(Ui([void 0,void 0]),et(()=>[r.errorState,r.userAriaDescribedBy]),WS(),Kt(([[o,s],[a,c]])=>o!==a||s!==c)).subscribe(()=>this._syncDescribedByIds()),this._valueChanges?.unsubscribe(),r.ngControl&&r.ngControl.valueChanges&&(this._valueChanges=r.ngControl.valueChanges.pipe(sr(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(n=>!n._isText),this._hasTextPrefix=!!this._prefixChildren.find(n=>n._isText),this._hasIconSuffix=!!this._suffixChildren.find(n=>!n._isText),this._hasTextSuffix=!!this._suffixChildren.find(n=>n._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),is(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){let n=this._control.focused;n&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!n&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._elementRef.nativeElement.classList.toggle("mat-focused",n),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",n)}_syncOutlineLabelOffset(){fY({earlyRead:()=>{if(this._appearanceSignal()!=="outline")return this._outlineLabelOffsetResizeObserver?.disconnect(),null;if(globalThis.ResizeObserver){this._outlineLabelOffsetResizeObserver||=new globalThis.ResizeObserver(()=>{this._writeOutlinedLabelStyles(this._getOutlinedLabelOffset())});for(let n of this._prefixSuffixContainers())this._outlineLabelOffsetResizeObserver.observe(n,{box:"border-box"})}return this._getOutlinedLabelOffset()},write:n=>this._writeOutlinedLabelStyles(n())})}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel=us(()=>!!this._labelChild());_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(n){let r=this._control?this._control.ngControl:null;return r&&r[n]}_getSubscriptMessageType(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let n=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&n.push(...this._control.userAriaDescribedBy.split(" ")),this._getSubscriptMessageType()==="hint"){let o=this._hintChildren?this._hintChildren.find(a=>a.align==="start"):null,s=this._hintChildren?this._hintChildren.find(a=>a.align==="end"):null;o?n.push(o.id):this._hintLabel&&n.push(this._hintLabelId),s&&n.push(s.id)}else this._errorChildren&&n.push(...this._errorChildren.map(o=>o.id));let r=this._control.describedByIds,i;if(r){let o=this._describedByIds||n;i=n.concat(r.filter(s=>s&&!o.includes(s)))}else i=n;this._control.setDescribedByIds(i),this._describedByIds=n}}_getOutlinedLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return null;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return["",null];if(!this._isAttachedToDom())return null;let n=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,i=this._iconSuffixContainer?.nativeElement,o=this._textSuffixContainer?.nativeElement,s=n?.getBoundingClientRect().width??0,a=r?.getBoundingClientRect().width??0,c=i?.getBoundingClientRect().width??0,u=o?.getBoundingClientRect().width??0,d=this._currentDirection==="rtl"?"-1":"1",f=`${s+a}px`,h=`calc(${d} * (${f} + var(--mat-mdc-form-field-label-offset-x, 0px)))`,v=`var(--mat-mdc-form-field-label-transform, ${uGe} translateX(${h}))`,x=s+a+c+u;return[v,x]}_writeOutlinedLabelStyles(n){if(n!==null){let[r,i]=n;this._floatingLabel&&(this._floatingLabel.element.style.transform=r),i!==null&&this._notchedOutline?._setMaxWidth(i)}}_isAttachedToDom(){let n=this._elementRef.nativeElement;if(n.getRootNode){let r=n.getRootNode();return r&&r!==n}return document.documentElement.contains(n)}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Ve({type:e,selectors:[["mat-form-field"]],contentQueries:function(r,i,o){if(r&1&&(R2(o,i._labelChild,w9,5),Rr(o,C9,5),Rr(o,oGe,5),Rr(o,sGe,5),Rr(o,iGe,5),Rr(o,x9,5)),r&2){oT();let s;St(s=kt())&&(i._formFieldControl=s.first),St(s=kt())&&(i._prefixChildren=s),St(s=kt())&&(i._suffixChildren=s),St(s=kt())&&(i._errorChildren=s),St(s=kt())&&(i._hintChildren=s)}},viewQuery:function(r,i){if(r&1&&(Yg(i._iconPrefixContainerSignal,vye,5),Yg(i._textPrefixContainerSignal,bye,5),Yg(i._iconSuffixContainerSignal,wye,5),Yg(i._textSuffixContainerSignal,xye,5),Zn(F9e,5),Zn(vye,5),Zn(bye,5),Zn(wye,5),Zn(xye,5),Zn(Cye,5),Zn(Sye,5),Zn(Iye,5)),r&2){oT(4);let o;St(o=kt())&&(i._textField=o.first),St(o=kt())&&(i._iconPrefixContainer=o.first),St(o=kt())&&(i._textPrefixContainer=o.first),St(o=kt())&&(i._iconSuffixContainer=o.first),St(o=kt())&&(i._textSuffixContainer=o.first),St(o=kt())&&(i._floatingLabel=o.first),St(o=kt())&&(i._notchedOutline=o.first),St(o=kt())&&(i._lineRipple=o.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:38,hostBindings:function(r,i){r&2&&at("mat-mdc-form-field-label-always-float",i._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",i._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",i._hasIconSuffix)("mat-form-field-invalid",i._control.errorState)("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-form-field-appearance-fill",i.appearance=="fill")("mat-form-field-appearance-outline",i.appearance=="outline")("mat-form-field-hide-placeholder",i._hasFloatingLabel()&&!i._shouldLabelFloat())("mat-primary",i.color!=="accent"&&i.color!=="warn")("mat-accent",i.color==="accent")("mat-warn",i.color==="warn")("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[En([{provide:E9,useExisting:e},{provide:Aye,useExisting:e}])],ngContentSelectors:z9e,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],["textSuffixContainer",""],["iconSuffixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],["aria-atomic","true","aria-live","polite",1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(r,i){if(r&1){let o=Qt();lr(j9e),ot(0,V9e,1,1,"ng-template",null,0,Tl),N(2,"div",6,1),Te("click",function(a){return Je(o),Ye(i._control.onContainerClick(a))}),wt(4,H9e,1,0,"div",7),N(5,"div",8),wt(6,G9e,2,2,"div",9),wt(7,W9e,3,0,"div",10),wt(8,K9e,3,0,"div",11),N(9,"div",12),wt(10,Y9e,1,1,null,13),Ht(11),$(),wt(12,Q9e,3,0,"div",14),wt(13,X9e,3,0,"div",15),$(),wt(14,eGe,1,0,"div",16),$(),N(15,"div",17),wt(16,tGe,2,0,"div",18)(17,rGe,5,1,"div",19),$()}if(r&2){let o;R(2),at("mdc-text-field--filled",!i._hasOutline())("mdc-text-field--outlined",i._hasOutline())("mdc-text-field--no-label",!i._hasFloatingLabel())("mdc-text-field--disabled",i._control.disabled)("mdc-text-field--invalid",i._control.errorState),R(2),xt(!i._hasOutline()&&!i._control.disabled?4:-1),R(2),xt(i._hasOutline()?6:-1),R(),xt(i._hasIconPrefix?7:-1),R(),xt(i._hasTextPrefix?8:-1),R(2),xt(!i._hasOutline()||i._forceDisplayInfixLabel()?10:-1),R(2),xt(i._hasTextSuffix?12:-1),R(),xt(i._hasIconSuffix?13:-1),R(),xt(i._hasOutline()?-1:14),R(),at("mat-mdc-form-field-subscript-dynamic-size",i.subscriptSizing==="dynamic");let s=i._getSubscriptMessageType();R(),xt((o=s)==="error"?16:o==="hint"?17:-1)}},dependencies:[Cye,Sye,iw,Iye,x9],styles:[`.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator,.mdc-text-field__input::-webkit-search-cancel-button{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-moz-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-webkit-input-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive:-ms-input-placeholder{opacity:0}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mat-form-field-filled-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mat-form-field-filled-caret-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mat-form-field-outlined-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mat-form-field-outlined-caret-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mat-form-field-filled-error-caret-color, var(--mat-sys-error))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mat-form-field-outlined-error-caret-color, var(--mat-sys-error))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mat-form-field-filled-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mat-form-field-outlined-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mat-form-field-filled-container-shape, var(--mat-sys-corner-extra-small));border-top-right-radius:var(--mat-form-field-filled-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mat-form-field-filled-container-color, var(--mat-sys-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mat-form-field-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 4%, transparent))}.mdc-text-field--outlined{height:56px;overflow:visible;padding-right:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)));padding-left:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)) + 4px);padding-left:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)))}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}@media(forced-colors: active){.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mat-form-field-filled-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-filled-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mat-form-field-filled-hover-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mat-form-field-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mat-form-field-filled-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-filled-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mat-form-field-filled-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mat-form-field-filled-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-form-field-filled-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-form-field-filled-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-form-field-filled-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mat-form-field-outlined-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-outlined-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mat-form-field-outlined-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mat-form-field-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mat-form-field-outlined-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-outlined-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mat-form-field-outlined-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mat-form-field-outlined-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-form-field-outlined-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-form-field-outlined-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-form-field-outlined-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-outline-color, var(--mat-sys-outline));border-width:var(--mat-form-field-outlined-outline-width, 1px)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-hover-outline-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-focus-outline-color, var(--mat-sys-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-hover-outline-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-focus-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mat-form-field-outlined-focus-outline-width, 2px)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)))}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:min(var(--mat-form-field-notch-max-width, 100%),calc(100% - max(12px, var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))) * 2))}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{max-width:min(100%,calc(100% - max(12px, var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))) * 2))}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mat-form-field-filled-active-indicator-height, 1px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-active-indicator-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-hover-active-indicator-color, var(--mat-sys-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-disabled-active-indicator-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-error-active-indicator-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-error-hover-active-indicator-color, var(--mat-sys-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mat-form-field-filled-focus-active-indicator-height, 2px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mat-form-field-filled-focus-active-indicator-color, var(--mat-sys-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mat-form-field-filled-error-focus-active-indicator-color, var(--mat-sys-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height, 56px);padding-top:var(--mat-form-field-filled-with-label-container-padding-top, 24px);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom, 8px)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding, 16px);padding-bottom:var(--mat-form-field-container-vertical-padding, 16px)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height, 56px)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height, 56px) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}@keyframes _mat-form-field-subscript-animation{from{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px;opacity:1;transform:translateY(0);animation:_mat-form-field-subscript-animation 0ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-sys-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-sys-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-sys-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-sys-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-sys-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-sys-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-sys-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity, 0)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color, var(--mat-sys-neutral10))}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color, color-mix(in srgb, var(--mat-sys-neutral10) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}@media(forced-colors: active){.mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}}@media(forced-colors: active){.mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-sys-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-sys-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-sys-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-sys-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field-infix:has(textarea[cols]){width:auto}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field.mat-form-field-animations-enabled .mat-mdc-form-field-error-wrapper{animation-duration:300ms}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}
`],encapsulation:2,changeDetection:0})}return e})();var g$=(()=>{class e{isErrorState(n,r){return!!(n&&n.invalid&&(n.touched||r&&r.submitted))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var _$=class{_defaultMatcher;ngControl;_parentFormGroup;_parentForm;_stateChanges;errorState=!1;matcher;constructor(t,n,r,i,o){this._defaultMatcher=t,this.ngControl=n,this._parentFormGroup=r,this._parentForm=i,this._stateChanges=o}updateErrorState(){let t=this.errorState,n=this._parentFormGroup||this._parentForm,r=this.matcher||this._defaultMatcher,i=this.ngControl?this.ngControl.control:null,o=r?.isErrorState(i,n)??!1;o!==t&&(this.errorState=o,this._stateChanges.next())}};var Nm=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({imports:[dn,JN,zI,dn]})}return e})();var dGe=["button","checkbox","file","hidden","image","radio","range","reset","submit"],pGe=new X("MAT_INPUT_CONFIG"),y$=(()=>{class e{_elementRef=k(nt);_platform=k(Ln);ngControl=k(Vd,{optional:!0,self:!0});_autofillMonitor=k(hye);_ngZone=k(De);_formField=k(E9,{optional:!0});_renderer=k(rr);_uid=k(ua).getId("mat-input-");_previousNativeValue;_inputValueAccessor;_signalBasedValueAccessor;_previousPlaceholder;_errorStateTracker;_config=k(pGe,{optional:!0});_cleanupIosKeyup;_cleanupWebkitWheel;_isServer;_isNativeSelect;_isTextarea;_isInFormField;focused=!1;stateChanges=new ge;controlType="mat-input";autofilled=!1;get disabled(){return this._disabled}set disabled(n){this._disabled=Qi(n),this.focused&&(this.focused=!1,this.stateChanges.next())}_disabled=!1;get id(){return this._id}set id(n){this._id=n||this._uid}_id;placeholder;name;get required(){return this._required??this.ngControl?.control?.hasValidator(ii.required)??!1}set required(n){this._required=Qi(n)}_required;get type(){return this._type}set type(n){this._type=n||"text",this._validateType(),!this._isTextarea&&l9().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}_type="text";get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(n){this._errorStateTracker.matcher=n}userAriaDescribedBy;get value(){return this._signalBasedValueAccessor?this._signalBasedValueAccessor.value():this._inputValueAccessor.value}set value(n){n!==this.value&&(this._signalBasedValueAccessor?this._signalBasedValueAccessor.value.set(n):this._inputValueAccessor.value=n,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(n){this._readonly=Qi(n)}_readonly=!1;disabledInteractive;get errorState(){return this._errorStateTracker.errorState}set errorState(n){this._errorStateTracker.errorState=n}_neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(n=>l9().has(n));constructor(){let n=k(Kq,{optional:!0}),r=k(Tm,{optional:!0}),i=k(g$),o=k(_ye,{optional:!0,self:!0}),s=this._elementRef.nativeElement,a=s.nodeName.toLowerCase();o?mp(o.value)?this._signalBasedValueAccessor=o:this._inputValueAccessor=o:this._inputValueAccessor=s,this._previousNativeValue=this.value,this.id=this.id,this._platform.IOS&&this._ngZone.runOutsideAngular(()=>{this._cleanupIosKeyup=this._renderer.listen(s,"keyup",this._iOSKeyupListener)}),this._errorStateTracker=new _$(i,this.ngControl,r,n,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=a==="select",this._isTextarea=a==="textarea",this._isInFormField=!!this._formField,this.disabledInteractive=this._config?.disabledInteractive||!1,this._isNativeSelect&&(this.controlType=s.multiple?"mat-native-select-multiple":"mat-native-select"),this._signalBasedValueAccessor&&Uu(()=>{this._signalBasedValueAccessor.value(),this.stateChanges.next()})}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(n=>{this.autofilled=n.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._cleanupIosKeyup?.(),this._cleanupWebkitWheel?.()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(n){this._elementRef.nativeElement.focus(n)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(n){if(n!==this.focused){if(!this._isNativeSelect&&n&&this.disabled&&this.disabledInteractive){let r=this._elementRef.nativeElement;r.type==="number"?(r.type="text",r.setSelectionRange(0,0),r.type="number"):r.setSelectionRange(0,0)}this.focused=n,this.stateChanges.next()}}_onInput(){}_dirtyCheckNativeValue(){let n=this._elementRef.nativeElement.value;this._previousNativeValue!==n&&(this._previousNativeValue=n,this.stateChanges.next())}_dirtyCheckPlaceholder(){let n=this._getPlaceholder();if(n!==this._previousPlaceholder){let r=this._elementRef.nativeElement;this._previousPlaceholder=n,n?r.setAttribute("placeholder",n):r.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){dGe.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let n=this._elementRef.nativeElement.validity;return n&&n.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let n=this._elementRef.nativeElement,r=n.options[0];return this.focused||n.multiple||!this.empty||!!(n.selectedIndex>-1&&r&&r.label)}else return this.focused&&!this.disabled||!this.empty}get describedByIds(){return this._elementRef.nativeElement.getAttribute("aria-describedby")?.split(" ")||[]}setDescribedByIds(n){let r=this._elementRef.nativeElement;n.length?r.setAttribute("aria-describedby",n.join(" ")):r.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let n=this._elementRef.nativeElement;return this._isNativeSelect&&(n.multiple||n.size>1)}_iOSKeyupListener=n=>{let r=n.target;!r.value&&r.selectionStart===0&&r.selectionEnd===0&&(r.setSelectionRange(1,1),r.setSelectionRange(0,0))};_getReadonlyAttribute(){return this._isNativeSelect?null:this.readonly||this.disabled&&this.disabledInteractive?"true":null}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ne({type:e,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:21,hostBindings:function(r,i){r&1&&Te("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),r&2&&(Ic("id",i.id)("disabled",i.disabled&&!i.disabledInteractive)("required",i.required),Yt("name",i.name||null)("readonly",i._getReadonlyAttribute())("aria-disabled",i.disabled&&i.disabledInteractive?"true":null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required)("id",i.id),at("mat-input-server",i._isServer)("mat-mdc-form-field-textarea-control",i._isInFormField&&i._isTextarea)("mat-mdc-form-field-input-control",i._isInFormField)("mat-mdc-input-disabled-interactive",i.disabledInteractive)("mdc-text-field__input",i._isInFormField)("mat-mdc-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly",disabledInteractive:[2,"disabledInteractive","disabledInteractive",Nr]},exportAs:["matInput"],features:[En([{provide:C9,useExisting:e}]),br]})}return e})(),v$=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({imports:[dn,Nm,Nm,f$,dn]})}return e})();var mGe={capture:!0},fGe=["focus","mousedown","mouseenter","touchstart"],I9="mat-ripple-loader-uninitialized",S9="mat-ripple-loader-class-name",Mye="mat-ripple-loader-centered",b$="mat-ripple-loader-disabled",Dye=(()=>{class e{_document=k(yt);_animationsDisabled=uo();_globalRippleOptions=k(DI,{optional:!0});_platform=k(Ln);_ngZone=k(De);_injector=k(ft);_eventCleanups;_hosts=new Map;constructor(){let n=k(Ai).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>fGe.map(r=>n.listen(this._document,r,this._onInteraction,mGe)))}ngOnDestroy(){let n=this._hosts.keys();for(let r of n)this.destroyRipple(r);this._eventCleanups.forEach(r=>r())}configureRipple(n,r){n.setAttribute(I9,this._globalRippleOptions?.namespace??""),(r.className||!n.hasAttribute(S9))&&n.setAttribute(S9,r.className||""),r.centered&&n.setAttribute(Mye,""),r.disabled&&n.setAttribute(b$,"")}setDisabled(n,r){let i=this._hosts.get(n);i?(i.target.rippleDisabled=r,!r&&!i.hasSetUpEvents&&(i.hasSetUpEvents=!0,i.renderer.setupTriggerEvents(n))):r?n.setAttribute(b$,""):n.removeAttribute(b$)}_onInteraction=n=>{let r=la(n);if(r instanceof HTMLElement){let i=r.closest(`[${I9}="${this._globalRippleOptions?.namespace??""}"]`);i&&this._createRipple(i)}};_createRipple(n){if(!this._document||this._hosts.has(n))return;n.querySelector(".mat-ripple")?.remove();let r=this._document.createElement("span");r.classList.add("mat-ripple",n.getAttribute(S9)),n.append(r);let i=this._globalRippleOptions,o=this._animationsDisabled?0:i?.animation?.enterDuration??MI.enterDuration,s=this._animationsDisabled?0:i?.animation?.exitDuration??MI.exitDuration,a={rippleDisabled:this._animationsDisabled||i?.disabled||n.hasAttribute(b$),rippleConfig:{centered:n.hasAttribute(Mye),terminateOnPointerUp:i?.terminateOnPointerUp,animation:{enterDuration:o,exitDuration:s}}},c=new Jh(a,this._ngZone,r,this._platform,this._injector),u=!a.rippleDisabled;u&&c.setupTriggerEvents(n),this._hosts.set(n,{target:a,renderer:c,hasSetUpEvents:u}),n.removeAttribute(I9)}destroyRipple(n){let r=this._hosts.get(n);r&&(r.renderer._removeTriggerEvents(),this._hosts.delete(n))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var hGe=new X("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})});var Pye=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({providers:[g$,{provide:hGe,useValue:{separatorKeyCodes:[13]}}],imports:[dn,Rm,dn]})}return e})();var gGe=["autosize"],k9=(e,t)=>t.name;function _Ge(e,t){if(e&1){let n=Qt();N(0,"button",18),Te("click",function(){let i=Je(n).$implicit,o=H();return Ye(o.selectTool(i))}),N(1,"mat-icon",19),J(2,"build"),$(),N(3,"span"),J(4),$()()}if(e&2){let n=t.$implicit;R(4),sn(n.title)}}function yGe(e,t){if(e&1){let n=Qt();N(0,"button",18),Te("click",function(){let i=Je(n).$implicit,o=H();return Ye(o.selectResource(i))}),N(1,"mat-icon",19),J(2,"collections_bookmark"),$(),N(3,"span"),J(4),$()()}if(e&2){let n=t.$implicit;R(4),sn(n.title)}}function vGe(e,t){if(e&1){let n=Qt();N(0,"button",18),Te("click",function(){let i=Je(n).$implicit,o=H();return Ye(o.selectPrompt(i))}),N(1,"mat-icon",19),J(2,"lightbulb"),$(),N(3,"span"),J(4),$()()}if(e&2){let n=t.$implicit;R(4),sn(n.title)}}function bGe(e,t){if(e&1){let n=Qt();N(0,"span",21),Te("click",function(){Je(n);let i=H(2);return Ye(i.clearSelection("tool",i.selectedTool))}),N(1,"mat-icon",22),J(2,"build"),$(),N(3,"span",23),J(4),$(),N(5,"span",24),J(6,"\xD7"),$()()}if(e&2){let n=H(2);R(4),sn(n.selectedTool.title)}}function wGe(e,t){if(e&1){let n=Qt();N(0,"span",21),Te("click",function(){Je(n);let i=H(2);return Ye(i.clearSelection("resource",i.selectedResource))}),N(1,"mat-icon",22),J(2,"collections_bookmark"),$(),N(3,"span",23),J(4),$(),N(5,"span",24),J(6,"\xD7"),$()()}if(e&2){let n=H(2);R(4),sn(n.selectedResource.title)}}function xGe(e,t){if(e&1){let n=Qt();N(0,"span",21),Te("click",function(){Je(n);let i=H(2);return Ye(i.clearSelection("prompt",i.selectedPrompt))}),N(1,"mat-icon",22),J(2,"lightbulb"),$(),N(3,"span",23),J(4),$(),N(5,"span",24),J(6,"\xD7"),$()()}if(e&2){let n=H(2);R(4),sn(n.selectedPrompt.title)}}function CGe(e,t){if(e&1&&(N(0,"div",17),wt(1,bGe,7,1,"span",20),wt(2,wGe,7,1,"span",20),wt(3,xGe,7,1,"span",20),$()),e&2){let n=H();R(),xt(n.selectedTool?1:-1),R(),xt(n.selectedResource?2:-1),R(),xt(n.selectedPrompt?3:-1)}}var w$=class e{constructor(t){this.mcpService=t}_injector=k(ft);autosize;sendMessage=new Ue;sendTool=new Ue;sendResource=new Ue;sendPrompt=new Ue;message="";showToolsMenu=!1;showResourcesMenu=!1;showPromptsMenu=!1;tools=[];resources=[];prompts=[];selectedTool=null;selectedResource=null;selectedPrompt=null;isConnected=!1;subs=new fn;ngOnInit(){this.subs.add(this.mcpService.connectionStatus$.pipe(Kt(t=>t===!0)).subscribe(t=>{console.log("mcp input-box : ",t),this.subs.add(this.mcpService.tools$.subscribe(n=>this.tools=n)),this.subs.add(this.mcpService.promtps$.subscribe(n=>this.prompts=n)),this.subs.add(this.mcpService.resources$.subscribe(n=>this.resources=n))})),this.triggerResize()}triggerResize(){Oi(()=>{this.autosize.resizeToFitContent(!0)},{injector:this._injector})}submitMessage(t){t&&t.preventDefault(),this.message.trim()&&(this.sendMessage.emit(this.message.trim()),this.message="")}selectTool(t){this.selectedTool&&this.tools.push(this.selectedTool),this.tools=this.tools.filter(n=>n.name!==t.name),this.selectedTool=t,this.showToolsMenu=!1,this.sendTool.emit(this.selectedTool)}selectResource(t){this.selectedResource&&this.resources.push(this.selectedResource),this.resources=this.resources.filter(n=>n.name!==t.name),this.selectedResource=t,this.showResourcesMenu=!1}selectPrompt(t){this.selectedPrompt&&this.prompts.push(this.selectedPrompt),this.prompts=this.prompts.filter(n=>n.name!==t.name),this.selectedPrompt=t,this.showPromptsMenu=!1}ngOnDestroy(){this.subs.unsubscribe()}clearSelection(t,n){switch(t){case"prompt":this.selectedPrompt=null,this.prompts.push(n);break;case"resource":this.selectedResource=null,this.resources.push(n);break;case"tool":this.selectedTool=null,this.tools.push(n),this.sendTool.emit(this.selectedTool);break;default:break}}static \u0275fac=function(n){return new(n||e)(Ee(lo))};static \u0275cmp=Ve({type:e,selectors:[["app-input-box"]],viewQuery:function(n,r){if(n&1&&Zn(gGe,5),n&2){let i;St(i=kt())&&(r.autosize=i.first)}},outputs:{sendMessage:"sendMessage",sendTool:"sendTool",sendResource:"sendResource",sendPrompt:"sendPrompt"},decls:32,vars:6,consts:[["autosize","cdkTextareaAutosize"],["toolsMenu","matMenu"],["resourcesMenu","matMenu"],["promptsMenu","matMenu"],[1,"input-container"],[1,"input-main-row"],[1,"input-box"],["appearance","fill",1,"full-width"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","4","placeholder","Type a message...",3,"ngModelChange","keydown.enter","ngModel"],["mat-icon-button","",1,"send-button",3,"click","disabled"],[1,"icon-small"],[1,"action-buttons"],["mat-icon-button","","matTooltip","Tools",1,"action-button",3,"matMenuTriggerFor"],[1,"enhanced-menu"],["mat-menu-item",""],["mat-icon-button","","matTooltip","Resources",1,"action-button",3,"matMenuTriggerFor"],["mat-icon-button","","matTooltip","Prompts",1,"action-button",3,"matMenuTriggerFor"],[1,"selected-items"],["mat-menu-item","",3,"click"],[1,"menu-icon"],[1,"selected-item"],[1,"selected-item",3,"click"],[1,"icon-xsmall"],[1,"selected-text"],[1,"chip-close"]],template:function(n,r){if(n&1){let i=Qt();N(0,"div",4)(1,"div",5)(2,"div",6)(3,"mat-form-field",7)(4,"textarea",8,0),vp("ngModelChange",function(s){return Je(i),vf(r.message,s)||(r.message=s),Ye(s)}),Te("keydown.enter",function(s){return Je(i),Ye(r.submitMessage(s))}),$()(),N(6,"button",9),Te("click",function(){return Je(i),Ye(r.submitMessage())}),N(7,"mat-icon",10),J(8,"send"),$()()(),N(9,"div",11)(10,"button",12)(11,"mat-icon",10),J(12,"build"),$()(),N(13,"mat-menu",13,1),go(15,_Ge,5,1,"button",14,k9),$(),N(17,"button",15)(18,"mat-icon",10),J(19,"collections_bookmark"),$()(),N(20,"mat-menu",13,2),go(22,yGe,5,1,"button",14,k9),$(),N(24,"button",16)(25,"mat-icon",10),J(26,"lightbulb"),$()(),N(27,"mat-menu",13,3),go(29,vGe,5,1,"button",14,k9),$()()(),wt(31,CGe,4,3,"div",17),$()}if(n&2){let i=Lo(14),o=Lo(21),s=Lo(28);R(4),yp("ngModel",r.message),R(2),K("disabled",!r.message.trim()),R(4),K("matMenuTriggerFor",i),R(5),_o(r.tools),R(2),K("matMenuTriggerFor",o),R(5),_o(r.resources),R(2),K("matMenuTriggerFor",s),R(5),_o(r.prompts),R(2),xt(r.selectedTool||r.selectedResource||r.selectedPrompt?31:-1)}},dependencies:[gu,hu,km,xI,gb,ro,sye,Db,FI,oye,Nb,Rb,v$,y$,zI,gye,Nm,Pye,f$],styles:[".input-container[_ngcontent-%COMP%]{padding:12px 16px;background-color:#fff;border-radius:12px;margin-bottom:16px;box-shadow:0 -2px 10px #00000008;box-sizing:border-box}.input-main-row[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:8px;width:100%}.input-box[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:8px;flex:1;min-width:0}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:4px;flex-shrink:0;align-items:center}.action-button[_ngcontent-%COMP%]{color:#666;width:40px;height:40px;background-color:#f8f8f8;border-radius:8px;flex-shrink:0}.action-button[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.icon-small[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:#666}.icon-xsmall[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;color:#666;margin-right:6px;flex-shrink:0}.full-width[_ngcontent-%COMP%], .mat-form-field[_ngcontent-%COMP%]{width:100%;min-width:0}.mat-form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:44px;line-height:1.4;resize:none}.send-button[_ngcontent-%COMP%]{color:#1976d2;width:44px;height:44px;flex-shrink:0;margin-bottom:0}.menu-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:18px}.selected-items[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}.selected-item[_ngcontent-%COMP%]{background:#f0f0f0;border-radius:16px;padding:6px 12px;display:flex;align-items:center;cursor:pointer;transition:background .2s;font-size:.85rem;max-width:100%;box-sizing:border-box}.selected-item[_ngcontent-%COMP%]:hover{background:#e0e0e0}.selected-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:120px}.chip-close[_ngcontent-%COMP%]{margin-left:6px;font-size:16px;font-weight:700;color:#666;flex-shrink:0}.mat-mdc-menu-panel.enhanced-menu[_ngcontent-%COMP%]{background:#fff!important;border-radius:12px!important;box-shadow:0 4px 20px #00000026!important;border:1px solid #e0e0e0!important;padding:4px 0!important;max-height:60vh!important;overflow-y:auto!important}.mat-mdc-menu-item[_ngcontent-%COMP%]{background:transparent!important;min-height:44px!important;font-size:.9rem!important}.mat-mdc-menu-item[_ngcontent-%COMP%]:hover{background:#f8f8f8!important}.menu-icon[_ngcontent-%COMP%]{margin-right:8px;color:#666;font-size:18px;width:18px;height:18px}@media (max-width: 768px){.input-container[_ngcontent-%COMP%]{padding:10px 12px;margin-bottom:12px;border-radius:10px}.input-main-row[_ngcontent-%COMP%], .input-box[_ngcontent-%COMP%]{gap:6px}.action-button[_ngcontent-%COMP%]{width:38px;height:38px}.icon-small[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.send-button[_ngcontent-%COMP%]{width:40px;height:40px}.mat-form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:40px;font-size:.9rem}.selected-items[_ngcontent-%COMP%]{margin-top:10px;gap:6px}.selected-item[_ngcontent-%COMP%]{padding:5px 10px;font-size:.8rem;border-radius:14px}.selected-text[_ngcontent-%COMP%]{max-width:100px}.icon-xsmall[_ngcontent-%COMP%]{font-size:15px;width:15px;height:15px;margin-right:4px}.chip-close[_ngcontent-%COMP%]{margin-left:4px;font-size:14px}}@media (max-width: 480px){.input-container[_ngcontent-%COMP%]{padding:8px 10px;margin-bottom:8px;border-radius:8px}.input-main-row[_ngcontent-%COMP%], .input-box[_ngcontent-%COMP%]{gap:4px}.action-buttons[_ngcontent-%COMP%]{gap:2px}.action-button[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:6px}.icon-small[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.send-button[_ngcontent-%COMP%]{width:36px;height:36px}.mat-form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:36px;font-size:.85rem}  .mat-mdc-form-field-infix{min-height:36px!important;padding-top:8px!important;padding-bottom:8px!important}  .mat-mdc-text-field-wrapper{padding:0 8px!important}.selected-items[_ngcontent-%COMP%]{margin-top:8px;gap:4px}.selected-item[_ngcontent-%COMP%]{padding:4px 8px;font-size:.75rem;border-radius:12px}.selected-text[_ngcontent-%COMP%]{max-width:80px}.icon-xsmall[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;margin-right:3px}.chip-close[_ngcontent-%COMP%]{margin-left:3px;font-size:12px}.mat-mdc-menu-panel.enhanced-menu[_ngcontent-%COMP%]{border-radius:10px!important;max-width:280px!important;margin:0 8px!important}.mat-mdc-menu-item[_ngcontent-%COMP%]{min-height:40px!important;font-size:.85rem!important}}@media (max-width: 360px){.input-container[_ngcontent-%COMP%]{padding:6px 8px}.action-button[_ngcontent-%COMP%], .send-button[_ngcontent-%COMP%]{width:34px;height:34px}.mat-form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:34px;font-size:.8rem}.selected-text[_ngcontent-%COMP%]{max-width:60px}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:1px}}@supports (padding: max(0px)){.input-container[_ngcontent-%COMP%]{padding-left:max(10px,env(safe-area-inset-left));padding-right:max(10px,env(safe-area-inset-right));padding-bottom:max(8px,env(safe-area-inset-bottom))}}@media (max-width: 480px){.input-container[_ngcontent-%COMP%]{transition:padding-bottom .3s ease}}"]})};var es=_c(Nye());function EGe(e,t){if(e&1&&(N(0,"div")(1,"p")(2,"strong"),J(3,"Coordinates:"),$(),J(4),qn(5,"number"),qn(6,"number"),$()()),e&2){let n=t.ngIf;R(4),sT(" ",Qg(5,2,n[0],"1.4-4"),", ",Qg(6,5,n[1],"1.4-4")," ")}}function IGe(e,t){if(e&1&&(N(0,"div",13)(1,"strong"),J(2),$(),J(3),$()),e&2){let n=t.$implicit,r=H(3);R(2),vn("",n,":"),R(),vn(" ",r.selectedFeature.properties[n]," ")}}function SGe(e,t){if(e&1&&(N(0,"div",11)(1,"h4"),J(2,"Properties:"),$(),ot(3,IGe,4,2,"div",12),$()),e&2){let n=H(2);R(3),K("ngForOf",n.getObjectKeys(n.selectedFeature.properties))}}function kGe(e,t){if(e&1){let n=Qt();N(0,"div",5)(1,"div",6)(2,"h3"),J(3),$(),N(4,"button",7),Te("click",function(){Je(n);let i=H();return Ye(i.selectedFeature=null)}),J(5,"\xD7"),$()(),N(6,"div",8)(7,"p")(8,"strong"),J(9,"Type:"),$(),J(10),$(),ot(11,EGe,7,8,"div",9)(12,SGe,4,1,"div",10),$()()}if(e&2){let n=H();R(3),sn(n.selectedFeature.name),R(7),vn(" ",n.selectedFeature.type),R(),K("ngIf",n.selectedFeature==null?null:n.selectedFeature.coordinates),R(),K("ngIf",n.selectedFeature.properties&&n.getObjectKeys(n.selectedFeature.properties).length>0)}}var C$=class e{height="400px";featureDetails=[];wmsLayers=[];center=[0,0];zoom=2;showPopup=!0;featureClick=new Ue;map;featureLayer=es.layerGroup();wmsLayersGroup=es.layerGroup();selectedFeature=null;mapId="map-"+Math.random().toString(36).substr(2,9);ngOnInit(){}ngAfterViewInit(){let t=document.getElementById(this.mapId);console.log("Map element : ",t),t&&(t.style.height=this.height,t.style.width="100%"),this.initializeMap()}ngOnChanges(t){t.featureDetails&&this.map&&(console.log(t.featureDetails),this.updateFeatures()),t.wmsLayers&&this.map&&this.updateWMSLayers(),(t.center||t.zoom)&&this.map&&this.map.setView(this.center,this.zoom)}initializeMap(){this.map=es.map(this.mapId).setView(this.center,this.zoom),es.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xA9 OpenStreetMap contributors",maxZoom:19}).addTo(this.map),this.featureLayer.addTo(this.map),this.wmsLayersGroup.addTo(this.map),this.updateFeatures(),this.updateWMSLayers()}updateFeatures(){if(this.featureLayer.clearLayers(),this.featureDetails.forEach(t=>{if(console.log("Feature : ",t),!t.coordinates)return;let n=es.circleMarker([t.coordinates[0],t.coordinates[1]],{radius:t.style?.radius||8,color:t.style?.color||"#ff0000",fillColor:t.style?.fillColor||"#ff0000",fillOpacity:t.style?.fillOpacity||.7,weight:2,opacity:1}),r=this.createPopupContent(t);n.bindPopup(r,{closeButton:!0,autoClose:!1,closeOnEscapeKey:!0}),n.on("click",()=>{this.selectedFeature=t,this.featureClick.emit(t)}),n.addTo(this.featureLayer),n.featureData=t}),this.featureDetails.length>0){let t=new es.FeatureGroup;this.featureDetails.forEach(n=>{n.coordinates&&t.addLayer(es.marker([n.coordinates[0],n.coordinates[1]]))}),this.map.fitBounds(t.getBounds(),{padding:[20,20],maxZoom:15})}}updateWMSLayers(){this.wmsLayersGroup.clearLayers(),this.wmsLayers.forEach((t,n)=>{es.tileLayer.wms(t.url,{layers:t.layers,version:t.version||"1.3.0",format:t.format||"image/png",transparent:t.transparent!==void 0?t.transparent:!0,attribution:t.attribution,opacity:t.opacity||.7}).addTo(this.wmsLayersGroup)})}createPopupContent(t){return t.coordinates?`
      <div class="leaflet-popup-content">
        <div class="popup-header">
          <h4>${t.name}</h4>
        </div>
        <div class="popup-body">
          <p><strong>Type:</strong> ${t.type}</p>
          <p><strong>Coordinates:</strong> 
            ${t.coordinates[0].toFixed(4)}, 
            ${t.coordinates[1].toFixed(4)}
          </p>
          ${this.createPropertiesContent(t.properties)}
        </div>
      </div>
    `:""}createPropertiesContent(t){return!t||Object.keys(t).length===0?"":`
      <div class="properties-section">
        <h5>Properties:</h5>
        ${Object.keys(t).map(r=>`
        <div class="property-item">
          <strong>${r}:</strong> ${t[r]}
        </div>
      `).join("")}
      </div>
    `}fitToFeatures(){if(this.featureDetails.length>0){let t=new es.FeatureGroup;this.featureDetails.forEach(n=>{n.coordinates&&t.addLayer(es.marker([n.coordinates[0],n.coordinates[1]]))}),this.map.fitBounds(t.getBounds(),{padding:[20,20],maxZoom:15})}}addFeature(t){this.featureDetails=[...this.featureDetails,t],this.updateFeatures()}removeFeature(t){this.featureDetails=this.featureDetails.filter(n=>n.id!==t),this.updateFeatures()}getObjectKeys(t){return t?Object.keys(t):[]}ngOnDestroy(){this.map&&this.map.remove()}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Ve({type:e,selectors:[["app-map"]],inputs:{height:"height",featureDetails:"featureDetails",wmsLayers:"wmsLayers",center:"center",zoom:"zoom",showPopup:"showPopup"},outputs:{featureClick:"featureClick"},features:[br],decls:7,vars:2,consts:[[1,"map-container"],[1,"map",3,"id"],["class","feature-panel",4,"ngIf"],[1,"map-controls"],["title","Fit to features",1,"control-btn",3,"click"],[1,"feature-panel"],[1,"panel-header"],[1,"close-btn",3,"click"],[1,"panel-content"],[4,"ngIf"],["class","properties",4,"ngIf"],[1,"properties"],["class","property-item",4,"ngFor","ngForOf"],[1,"property-item"]],template:function(n,r){n&1&&(N(0,"div",0),Vt(1,"div",1),ot(2,kGe,13,4,"div",2),N(3,"div",3)(4,"button",4),Te("click",function(){return r.fitToFeatures()}),N(5,"span"),J(6,"\u{1F4CD}"),$()()()()),n&2&&(R(),K("id",r.mapId),R(),K("ngIf",r.showPopup&&r.selectedFeature))},dependencies:[ro,Ml,ha,hz],styles:[".map-container[_ngcontent-%COMP%]{position:relative;width:100%!important;height:100%;min-height:350px;border-radius:8px;overflow:hidden;box-shadow:0 2px 10px #0000001a;margin:0}.map[_ngcontent-%COMP%]{width:100%;height:100%;z-index:1}.map-message[_ngcontent-%COMP%]{max-width:100%!important;width:100%!important}.map-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{width:100%!important;padding:0!important;background:transparent!important;box-shadow:none!important}[_nghost-%COMP%]{display:block;align-items:center;justify-content:center;width:100%;height:100%}[_nghost-%COMP%]     .leaflet-popup-content{margin:8px 12px;min-width:200px}[_nghost-%COMP%]     .leaflet-popup-content-wrapper{border-radius:8px;box-shadow:0 4px 15px #0003}[_nghost-%COMP%]     .popup-header h4{margin:0 0 8px;color:#333;font-size:16px}[_nghost-%COMP%]     .popup-body{font-size:14px}[_nghost-%COMP%]     .properties-section{margin-top:8px}[_nghost-%COMP%]     .properties-section h5{margin:8px 0 4px;color:#555}[_nghost-%COMP%]     .property-item{padding:2px 0;border-bottom:1px solid #f0f0f0;font-size:13px}[_nghost-%COMP%]     .property-item:last-child{border-bottom:none}[_nghost-%COMP%]     .property-item strong{color:#666}.feature-panel[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:#fff;border-radius:8px;box-shadow:0 4px 15px #0003;max-width:800px;z-index:1000;max-height:80vh;overflow-y:auto}.panel-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px;border-bottom:1px solid #eee;background:#f8f9fa;border-radius:8px 8px 0 0}.panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#333}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;cursor:pointer;color:#666;padding:0;width:24px;height:24px;display:flex;align-items:center;justify-content:center;line-height:1}.close-btn[_ngcontent-%COMP%]:hover{color:#000}.panel-content[_ngcontent-%COMP%]{padding:15px}.properties[_ngcontent-%COMP%]{margin-top:10px}.property-item[_ngcontent-%COMP%]{padding:4px 0;border-bottom:1px solid #f0f0f0;font-size:14px}.property-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.property-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#555}.map-controls[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;z-index:1000;display:flex;flex-direction:column;gap:5px}.control-btn[_ngcontent-%COMP%]{background:#fff;border:none;border-radius:4px;width:35px;height:35px;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 2px 5px #0003;font-size:16px;transition:background-color .3s}.control-btn[_ngcontent-%COMP%]:hover{background:#f8f9fa}"]})};var E$=class e{transform(t){return console.log("FilterTablesPipe called",t),t?t.filter(n=>n.type==="table"):[]}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=cr({name:"filterTables",type:e,pure:!0})},I$=class e{transform(t){return console.log("FilterButtonsPipe called"),t?t.filter(n=>n.type==="button"):[]}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=cr({name:"filterButtons",type:e,pure:!0})},S$=class e{transform(t){return console.log("HasValidTableStructurePipe called"),t?.data&&Array.isArray(t.data.column_names)&&t.data.column_names.length>0&&Array.isArray(t.data.data)&&t.data.data.every(n=>Array.isArray(n))}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=cr({name:"hasValidTableStructure",type:e,pure:!0})},k$=class e{transform(t){return!!t?.data?.link&&!!t.data.title&&this.isValidUrl(t.data.link)}isValidUrl(t){try{return new URL(t),!0}catch{return t.startsWith("/")||t.startsWith("#")||t.startsWith("?")}}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=cr({name:"hasValidButtonStructure",type:e,pure:!0})},T$=class e{transform(t){return t.data.link||"#"}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=cr({name:"getButtonLink",type:e,pure:!0})},A$=class e{transform(t){return t.data.title||"Click Here"}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=cr({name:"getButtonTitle",type:e,pure:!0})},O$=class e{transform(t){let n=t.data.link||"#";return n.startsWith("http://")||n.startsWith("https://")}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=cr({name:"isExternalLink",type:e,pure:!0})},M$=class e{transform(t){return t?.filter(n=>n.type==="map")||[]}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=cr({name:"filterMaps",type:e,pure:!0})},D$=class e{transform(t){return t?.data?.features||[]}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=cr({name:"getMapFeatures",type:e,pure:!0})},P$=class e{transform(t){return t?.data?.wmsLayers||[]}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=cr({name:"getMapWmsLayers",type:e,pure:!0})},R$=class e{transform(t){return t?.data?.center||[0,0]}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=cr({name:"getMapCenter",type:e,pure:!0})},N$=class e{transform(t){return t?.data?.zoom||10}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=cr({name:"getMapZoom",type:e,pure:!0})},$$=class e{transform(t){return t?.data?.height||"400px"}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=cr({name:"getMapHeight",type:e,pure:!0})},L$=class e{transform(t){return t?.data?.title||null}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=cr({name:"getMapTitle",type:e,pure:!0})},F$=class e{transform(t){return!!t?.data?.title}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=cr({name:"hasMapTitle",type:e,pure:!0})},j$=class e{transform(t){return!!t&&t.type==="map"&&!!t.data}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=cr({name:"isValidMapLayout",type:e,pure:!0})};var z$=class e{transform(t){if(console.log("\u{1F50D} FilterFormsPipe - Input layouts:",t),!t||!Array.isArray(t))return console.log("\u274C FilterFormsPipe - No layouts or not array"),[];let n=t.filter(r=>r&&r.type==="form"&&r.data);return console.log("\u2705 FilterFormsPipe - Found form layouts:",n),n}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=cr({name:"filterForms",type:e,pure:!0})},B$=class e{transform(t){let n=t;console.log("\u{1F50D} IsValidFormLayoutPipe - Checking layout:",n);let r=n&&n.type==="form"&&n.data&&n.data.schema;return console.log("\u2705 IsValidFormLayoutPipe - Layout valid:",r),r||console.log("\u274C IsValidFormLayoutPipe - Invalid because:",{hasLayout:!!n,correctType:n?.type==="form",hasData:!!n?.data,hasSchema:!!n?.data?.schema}),r}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=cr({name:"isValidFormLayout",type:e,pure:!0})};function TGe(e,t){if(e&1){let n=Qt();N(0,"button",13),Te("click",function(){Je(n);let i=H();return Ye(i.toggleMetadata())}),J(1," \u2139\uFE0F "),$()}}function AGe(e,t){e&1&&(N(0,"div",14),J(1," \u2713 Form submitted successfully "),$())}function OGe(e,t){if(e&1&&(N(0,"div",18)(1,"strong"),J(2),qn(3,"titlecase"),$(),J(4),$()),e&2){let n=t.$implicit;R(2),vn("",ur(3,2,n.key),":"),R(2),vn(" ",n.value," ")}}function MGe(e,t){if(e&1&&(N(0,"div",15)(1,"div",16)(2,"h4"),J(3,"Form Information"),$(),ot(4,OGe,5,4,"div",17),$()()),e&2){let n=H();R(4),K("ngForOf",n.getMetadataEntries(n.formLayout.data.metadata))}}function DGe(e,t){if(e&1&&Vt(0,"input",27),e&2){let n=H().$implicit,r=H();at("readonly",r.isSubmitted),K("id",n.key)("formControlName",n.key)("placeholder",n.placeholder)("readonly",r.isSubmitted)}}function PGe(e,t){if(e&1&&Vt(0,"textarea",28),e&2){let n=H().$implicit,r=H();at("readonly",r.isSubmitted),K("id",n.key)("formControlName",n.key)("placeholder",n.placeholder)("readonly",r.isSubmitted)}}function RGe(e,t){if(e&1&&Vt(0,"input",29),e&2){let n=H().$implicit,r=H();at("readonly",r.isSubmitted),K("id",n.key)("formControlName",n.key)("placeholder",n.placeholder)("readonly",r.isSubmitted)}}function NGe(e,t){if(e&1&&(N(0,"option",33),J(1),$()),e&2){let n=t.$implicit;K("value",n.value),R(),vn(" ",n.displayValue||n.value," ")}}function $Ge(e,t){if(e&1&&(N(0,"select",30)(1,"option",31),J(2),$(),ot(3,NGe,2,2,"option",32),$()),e&2){let n=H().$implicit;K("id",n.key)("formControlName",n.key),R(2),vn("Select ",n.title),R(),K("ngForOf",n.options)}}function LGe(e,t){if(e&1&&(N(0,"div",34)(1,"label"),Vt(2,"input",35),J(3),$()()),e&2){let n=H().$implicit,r=H();R(2),K("formControlName",n.key)("disabled",r.isSubmitted),R(),vn(" ",n.title," ")}}function FGe(e,t){e&1&&(N(0,"div"),J(1,"This field is required"),$())}function jGe(e,t){e&1&&(N(0,"div"),J(1,"Invalid email format"),$())}function zGe(e,t){if(e&1&&(N(0,"div",36),ot(1,FGe,2,0,"div",37)(2,jGe,2,0,"div",37),$()),e&2){let n,r,i=H().$implicit,o=H();R(),K("ngIf",(n=o.form.get(i.key))==null||n.errors==null?null:n.errors.required),R(),K("ngIf",(r=o.form.get(i.key))==null||r.errors==null?null:r.errors.email)}}function BGe(e,t){if(e&1&&(N(0,"div",19)(1,"label",20),J(2),$(),ot(3,DGe,1,6,"input",21)(4,PGe,1,6,"textarea",22)(5,RGe,1,6,"input",23)(6,$Ge,4,4,"select",24)(7,LGe,4,3,"div",25)(8,zGe,3,2,"div",26),$()),e&2){let n,r=t.$implicit,i=H();R(),at("required",r.required),K("for",r.key),R(),sn(r.title),R(),K("ngIf",r.type==="string"&&r.widgetType!=="textArea"),R(),K("ngIf",r.widgetType==="textArea"),R(),K("ngIf",r.type==="number"),R(),K("ngIf",r.widgetType==="select"&&r.options),R(),K("ngIf",r.type==="boolean"),R(),K("ngIf",((n=i.form.get(r.key))==null?null:n.invalid)&&((n=i.form.get(r.key))==null?null:n.touched)&&!i.isSubmitted)}}var U$=class e{constructor(t){this.fb=t;this.form=this.fb.group({})}formLayout;formSubmitted=new Ue;formCancelled=new Ue;formFields=[];showMetadata=!1;isSubmitting=!1;isSubmitted=!1;form;ngOnChanges(){this.formLayout?.data?.schema&&(this.buildForm(),this.isSubmitted=!1)}buildForm(){let t=this.formLayout.data.schema;this.formFields=[];let n={};t?.properties&&(this.formFields=Object.keys(t.properties).map(r=>{let i=t.properties[r];return{key:r,title:i.title||r,type:this.determineFieldType(i),widgetType:i.widgetType,placeholder:i.description||"",options:i.options,required:this.isFieldRequired(r,t.required),position:i.position||0}}).sort((r,i)=>r.position-i.position),this.formFields.forEach(r=>{let i=t.properties[r.key],o=[];r.required&&o.push(ii.required),i.widgetType=="email"&&o.push(ii.email);let s="";r.type==="number"?s=null:r.type==="boolean"&&(s=!1),n[r.key]=[s,o]})),this.form=this.fb.group(n)}isFieldRequired(t,n){return n?n.includes(t):!1}determineFieldType(t){if(t.widgetType)switch(t.widgetType){case"textArea":return"string";case"textBox":return"string";case"select":return"select";case"dropdown":return"select";case"checkbox":return"boolean";case"number":return"number";default:return"string"}if(t.type)return t.type;if(t.anyOf){if(t.anyOf.some(i=>i.type==="number"||i.type==="integer"))return"number";if(t.anyOf.some(i=>i.type==="string"))return"string"}return"string"}toggleMetadata(){this.showMetadata=!this.showMetadata}onSubmit(){if(this.form.valid&&!this.isSubmitted){this.isSubmitting=!0;let t=this.formLayout.data.actions?.submit,n=this.formLayout.data.metadata||{};if(t?.type==="tool"&&t.tool_name){let r=this.form.value;if(!this.hasJsonParameter(t.params)){console.error("Form submission requires at least one json type parameter"),this.isSubmitting=!1;return}let i=this.buildToolParameters(this.form.value,t.params,n);try{this.formSubmitted.emit({toolName:t.tool_name,params:i}),this.isSubmitted=!0,this.disableForm()}catch(o){console.error("Form submission error:",o),this.isSubmitting=!1}}this.isSubmitting=!1}else this.markFormGroupTouched(this.form)}hasJsonParameter(t){return t?Object.values(t).some(n=>n.type==="json"||n.type==="form_data"):!1}buildToolParameters(t,n,r){let i={};return n?(Object.keys(n).forEach(o=>{console.log("paramKey : ",o);let s=n[o];switch(s.type){case"json":case"form_data":i[o]=t;break;case"metadata":i[o]=this.getMetadataValue(s,r);break;case"form_field":i[o]=this.getFormFieldValue(s,t);break;default:console.warn(`Unknown parameter type: ${s.type}`)}}),i):{form_data:t}}getMetadataValue(t,n){console.log("Params config : ",t),console.log("metadata : ",n);let r=t.field||t.source;return r?r.includes(".")?this.getNestedValue(n,r):n[r]:n}getNestedValue(t,n){return n.split(".").reduce((r,i)=>r&&r[i]!==void 0?r[i]:null,t)}getFormFieldValue(t,n){let r=t.field||t.source;return n[r]}onCancel(){this.formCancelled.emit()}markFormGroupTouched(t){Object.keys(t.controls).forEach(n=>{t.get(n)?.markAsTouched()})}getMetadataEntries(t){return Object.keys(t).map(n=>({key:n,value:t[n]}))}disableForm(){Object.keys(this.form.controls).forEach(t=>{this.form.get(t)?.disable()})}enableForm(){Object.keys(this.form.controls).forEach(t=>{this.form.get(t)?.enable()})}static \u0275fac=function(n){return new(n||e)(Ee(hb))};static \u0275cmp=Ve({type:e,selectors:[["app-chat-form"]],inputs:{formLayout:"formLayout"},outputs:{formSubmitted:"formSubmitted",formCancelled:"formCancelled"},features:[br],decls:17,vars:11,consts:[[1,"chat-form-container"],[1,"form-header"],[1,"form-title"],[1,"form-actions-top"],["class","btn btn-info btn-sm","title","Show form information",3,"click",4,"ngIf"],["class","submission-banner success",4,"ngIf"],["class","metadata-panel",4,"ngIf"],[1,"form-content"],[1,"dynamic-form",3,"ngSubmit","formGroup"],["class","form-field",4,"ngFor","ngForOf"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],["title","Show form information",1,"btn","btn-info","btn-sm",3,"click"],[1,"submission-banner","success"],[1,"metadata-panel"],[1,"metadata-content"],["class","metadata-item",4,"ngFor","ngForOf"],[1,"metadata-item"],[1,"form-field"],[3,"for"],["type","text","class","form-control",3,"id","formControlName","placeholder","readonly",4,"ngIf"],["class","form-control","rows","3",3,"id","formControlName","placeholder","readonly",4,"ngIf"],["type","number","class","form-control",3,"id","formControlName","placeholder","readonly",4,"ngIf"],["class","form-control",3,"id","formControlName",4,"ngIf"],["class","checkbox-wrapper",4,"ngIf"],["class","error-message",4,"ngIf"],["type","text",1,"form-control",3,"id","formControlName","placeholder","readonly"],["rows","3",1,"form-control",3,"id","formControlName","placeholder","readonly"],["type","number",1,"form-control",3,"id","formControlName","placeholder","readonly"],[1,"form-control",3,"id","formControlName"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"checkbox-wrapper"],["type","checkbox",3,"formControlName","disabled"],[1,"error-message"],[4,"ngIf"]],template:function(n,r){n&1&&(N(0,"div",0)(1,"div",1)(2,"h3",2),J(3),qn(4,"titlecase"),$(),N(5,"div",3),ot(6,TGe,2,0,"button",4),$()(),ot(7,AGe,2,0,"div",5)(8,MGe,5,1,"div",6),N(9,"div",7)(10,"form",8),Te("ngSubmit",function(){return r.onSubmit()}),ot(11,BGe,9,10,"div",9),N(12,"div",10)(13,"button",11),Te("click",function(){return r.onCancel()}),J(14,"Cancel"),$(),N(15,"button",12),J(16),$()()()()()),n&2&&(R(3),sn(ur(4,9,r.formLayout.data.title)),R(3),K("ngIf",r.formLayout.data.metadata),R(),K("ngIf",r.isSubmitted),R(),K("ngIf",r.showMetadata&&r.formLayout.data.metadata),R(2),K("formGroup",r.form),R(),K("ngForOf",r.formFields),R(2),K("disabled",r.isSubmitted),R(2),K("disabled",r.isSubmitting||r.isSubmitted||r.form.invalid),R(),vn(" ",r.isSubmitting?"Submitting...":"Submit"," "))},dependencies:[ro,Ml,ha,gb,UN,ZN,qN,hu,CI,bI,fb,km,FN,Tm,EI,pz],styles:['.form-message-container[_ngcontent-%COMP%]{border:1px solid #e1e5e9;border-radius:8px;background:#f8f9fa;margin:10px 0;overflow:hidden}.form-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:#fff;border-bottom:1px solid #e1e5e9}.form-title[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:#495057}.form-actions-top[_ngcontent-%COMP%]{display:flex;gap:8px}.btn-info[_ngcontent-%COMP%]{background:#6c757d;color:#fff;border:none;border-radius:4px;padding:4px 8px;cursor:pointer;font-size:12px}.btn-info[_ngcontent-%COMP%]:hover{background:#5a6268}.metadata-panel[_ngcontent-%COMP%]{background:#e9ecef;padding:12px 16px;border-bottom:1px solid #dee2e6}.metadata-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;color:#495057}.metadata-item[_ngcontent-%COMP%]{margin-bottom:4px;font-size:12px}.metadata-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#343a40}.form-content[_ngcontent-%COMP%]{padding:16px;background:#fff}.form-actions-bottom[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;padding:12px 16px;background:#fff;border-top:1px solid #e1e5e9}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px;transition:background-color .2s}.btn-primary[_ngcontent-%COMP%]{background:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#0056b3}.btn-primary[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background:#545b62}.required[_ngcontent-%COMP%]:after{content:" *";color:red}.form-field[_ngcontent-%COMP%]{margin-bottom:1rem}.form-control[_ngcontent-%COMP%]{width:100%;padding:.5rem;border:1px solid #ccc;border-radius:4px}.error-message[_ngcontent-%COMP%]{color:red;font-size:.875rem;margin-top:.25rem}.form-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:flex-end;margin-top:1rem}.checkbox-wrapper[_ngcontent-%COMP%]{margin-top:.5rem}.form-control[readonly][_ngcontent-%COMP%], .form-control[disabled][_ngcontent-%COMP%]{background-color:#f8f9fa;border-color:#e9ecef;color:#6c757d;cursor:not-allowed;opacity:.8}.form-control.readonly[_ngcontent-%COMP%]{background-color:#f8f9fa;border-color:#e9ecef;color:#6c757d}.submission-banner[_ngcontent-%COMP%]{padding:12px 16px;margin:12px 0;border-radius:4px;font-weight:500;text-align:center}.submission-banner.success[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}.dynamic-form[_ngcontent-%COMP%]:disabled{opacity:.7}.checkbox-wrapper[_ngcontent-%COMP%]   input[disabled][_ngcontent-%COMP%]{cursor:not-allowed}.form-field[_ngcontent-%COMP%]:has(.form-control[readonly])   .error-message[_ngcontent-%COMP%]{display:none}']})};var UGe=["chatMessages"],VGe=(e,t,n,r)=>({"user-message":e,"bot-message":t,"layout-message":n,"map-layout-active":r});function HGe(e,t){if(e&1&&Vt(0,"markdown",11),e&2){let n=H().$implicit;K("data",n.content)}}function ZGe(e,t){if(e&1&&(N(0,"div",13),J(1),$()),e&2){let n=H().$implicit;R(),vn("Table: ",n.data.table_name)}}function qGe(e,t){if(e&1&&(N(0,"th",16),J(1),$()),e&2){let n=t.$implicit;K("title",n),R(),sn(n)}}function GGe(e,t){if(e&1&&(N(0,"td",16),J(1),$()),e&2){let n=t.$implicit;K("title",n),R(),sn(n)}}function WGe(e,t){if(e&1&&(N(0,"tr"),go(1,GGe,2,2,"td",16,q0),$()),e&2){let n=t.$implicit;R(),_o(n)}}function KGe(e,t){if(e&1&&(N(0,"table",14)(1,"thead")(2,"tr"),go(3,qGe,2,2,"th",16,kl),$()(),N(5,"tbody"),go(6,WGe,3,0,"tr",null,q0),$()()),e&2){let n=H().$implicit;R(3),_o(n.data.column_names),R(3),_o(n.data.data)}}function JGe(e,t){e&1&&(N(0,"div",15),J(1,"Invalid table structure"),$())}function YGe(e,t){if(e&1&&(N(0,"div",12),wt(1,ZGe,2,1,"div",13),wt(2,KGe,8,0,"table",14),qn(3,"hasValidTableStructure"),_p(4,JGe,2,0,"div",15),$()),e&2){let n=t.$implicit;R(),xt(n.data.table_name?1:-1),R(),xt(ur(3,2,n)?2:4)}}function QGe(e,t){e&1&&(N(0,"div",6),go(1,YGe,5,4,"div",12,kl),$()),e&2&&(R(),_o(t))}function XGe(e,t){if(e&1&&(N(0,"a",18),qn(1,"getButtonLink"),qn(2,"isExternalLink"),qn(3,"isExternalLink"),J(4),qn(5,"getButtonTitle"),$()),e&2){let n=H().$implicit;K("href",ur(1,4,n),r2)("target",ur(2,6,n)?"_blank":"_self"),Yt("rel",ur(3,8,n)?"noopener noreferrer":null),R(4),vn(" ",ur(5,10,n)," ")}}function eWe(e,t){e&1&&(N(0,"div",19),J(1,"Invalid button structure"),$())}function tWe(e,t){if(e&1&&(N(0,"div",17),wt(1,XGe,6,12,"a",18),qn(2,"hasValidButtonStructure"),_p(3,eWe,2,0,"div",19),$()),e&2){let n=t.$implicit;R(),xt(ur(2,1,n)?1:3)}}function nWe(e,t){e&1&&(N(0,"div",7),go(1,tWe,4,3,"div",17,kl),$()),e&2&&(R(),_o(t))}function rWe(e,t){if(e&1&&(N(0,"div",22),J(1),qn(2,"getMapTitle"),$()),e&2){let n=H(2).$implicit;R(),sn(ur(2,1,n))}}function iWe(e,t){if(e&1){let n=Qt();N(0,"div",20),wt(1,rWe,3,3,"div",22),qn(2,"hasMapTitle"),N(3,"app-map",23),qn(4,"getMapFeatures"),qn(5,"getMapWmsLayers"),qn(6,"getMapCenter"),qn(7,"getMapZoom"),qn(8,"getMapHeight"),Te("featureClick",function(i){Je(n);let o=H(4);return Ye(o.onFeatureClick(i))}),$()()}if(e&2){let n=H().$implicit;R(),xt(ur(2,7,n)?1:-1),R(2),K("featureDetails",ur(4,9,n))("wmsLayers",ur(5,11,n))("center",ur(6,13,n))("zoom",ur(7,15,n))("showPopup",!0)("height",ur(8,17,n))}}function oWe(e,t){e&1&&(N(0,"div",21),J(1,"Invalid map layout"),$())}function sWe(e,t){if(e&1&&(wt(0,iWe,9,19,"div",20),qn(1,"isValidMapLayout"),_p(2,oWe,2,0,"div",21)),e&2){let n=t.$implicit;xt(ur(1,1,n)?0:2)}}function aWe(e,t){e&1&&(N(0,"div",8),go(1,sWe,3,3,null,null,kl),$()),e&2&&(R(),_o(t))}function cWe(e,t){if(e&1){let n=Qt();N(0,"app-chat-form",27),Te("formSubmitted",function(i){Je(n);let o=H(3).$implicit,s=H();return Ye(s.onChatFormSubmitted(i,o))})("formCancelled",function(){Je(n);let i=H(4);return Ye(i.onChatFormCancelled())}),$()}if(e&2){let n=H().$implicit;K("formLayout",n)}}function lWe(e,t){e&1&&(N(0,"div",26),J(1," Invalid form layout - check console for details "),$())}function uWe(e,t){if(e&1&&(N(0,"div",24),wt(1,cWe,1,1,"app-chat-form",25),qn(2,"isValidFormLayout"),_p(3,lWe,2,0,"div",26),$()),e&2){let n=t.$implicit;R(),xt(ur(2,1,n)?1:3)}}function dWe(e,t){if(e&1&&(N(0,"div",9),go(1,uWe,4,3,"div",24,q0),qn(3,"filterForms"),$()),e&2){let n=H().$implicit;R(),_o(ur(3,0,n.layouts))}}function pWe(e,t){if(e&1&&(N(0,"div",2)(1,"div",3)(2,"div",4),ot(3,HGe,1,1,"markdown",5),$(),wt(4,QGe,3,0,"div",6),qn(5,"filterTables"),wt(6,nWe,3,0,"div",7),qn(7,"filterButtons"),wt(8,aWe,3,0,"div",8),qn(9,"filterMaps"),wt(10,dWe,4,2,"div",9),N(11,"div",10),J(12),qn(13,"date"),$()()()),e&2){let n,r,i,o=t.$implicit,s=H();K("ngClass",L2(16,VGe,o.role==="user",o.role==="bot",s.hasMapLayout(o),s.hasMapLayout(o))),R(3),K("ngIf",o.content&&typeof o.content=="string"),R(),xt((n=ur(5,7,o.layouts))?4:-1,n),R(2),xt((r=ur(7,9,o.layouts))?6:-1,r),R(2),xt((i=ur(9,11,o.layouts))?8:-1,i),R(2),xt(o.layouts&&o.layouts.length>0?10:-1),R(2),sn(Qg(13,13,o.timestamp,"shortTime"))}}var V$=class e{chatMessagesContainer;messages=[];Math=Math;activeLayoutMessageId=null;activeLayoutType=null;featureDetails=[];wmsLayers=[];mapCenter=[0,0];mapZoom=2;shouldScrollToBottom=!0;formSubmittedFromChat=new Ue;hasActiveLayout(){return this.activeLayoutMessageId!==null&&this.activeLayoutType!==null}getActiveLayoutType(){return this.activeLayoutType}getActiveMessage(){return this.messages.find(t=>t.id===this.activeLayoutMessageId)||null}getActiveTables(){let t=this.getActiveMessage();return t?.layouts?this.getTables(t.layouts):[]}getActiveButtons(){let t=this.getActiveMessage();return t?.layouts?this.getButtons(t.layouts):[]}getActiveMaps(){let t=this.getActiveMessage();return t?.layouts?t.layouts.filter(n=>n.type==="map"):[]}setActiveLayout(t,n){this.activeLayoutMessageId=t,this.activeLayoutType=n}clearActiveLayout(){this.activeLayoutMessageId=null,this.activeLayoutType=null}messageHasLayout(t){return!!(t.layouts&&t.layouts.length>0)}getMessageLayoutType(t){return!t.layouts||t.layouts.length===0?null:t.layouts[0].type}onMessageClick(t){if(this.messageHasLayout(t)){let n=this.getMessageLayoutType(t);n&&(this.activeLayoutMessageId===t.id&&this.activeLayoutType===n?this.clearActiveLayout():this.setActiveLayout(t.id,n))}}isTableLayout(t){return t.some(n=>n.type==="table")}isButtonLayout(t){return t.some(n=>n.type==="button")}isMapLayout(t){return t.some(n=>n.type==="map")}getMapData(t){return t.find(r=>r.type==="map")||null}onFeatureClick(t){console.log("Feature clicked:",t)}loadSampleMapData(){let t=[{id:"1",name:"Central Park",type:"Park",coordinates:[-73.9688,40.7851],properties:{area:"843 acres",established:"1857",visitors:"42 million annually"},style:{color:"#28a745",fillColor:"#28a745",radius:10,fillOpacity:.6}},{id:"2",name:"Times Square",type:"Entertainment",coordinates:[-73.9855,40.758],properties:{famousFor:"Broadway theaters, electronic billboards",annualVisitors:"50 million"},style:{color:"#dc3545",fillColor:"#dc3545",radius:8,fillOpacity:.6}}],n=[{url:"https://ows.terrestris.de/osm/service",layers:"OSM-WMS",transparent:!0}];this.featureDetails=t,this.wmsLayers=n,this.mapCenter=[-73.935242,40.73061],this.mapZoom=11}sendMapMessage(){let t={id:Date.now().toString(),role:"bot",content:"Here is the location data you requested:",timestamp:new Date,layouts:[{type:"map",data:{features:this.featureDetails,wmsLayers:this.wmsLayers,center:this.mapCenter,zoom:this.mapZoom,title:"Location Overview",height:"300px"}}]};this.messages.push(t),this.scrollToBottom()}receiveMapDataFromAPI(){let t={content:"I found these locations for you:",layouts:[{type:"map",data:{features:[{id:"api-1",name:"Eiffel Tower",type:"Landmark",coordinates:[2.2945,48.8584],properties:{height:"324 meters",built:"1889"},style:{color:"#ff6b00",fillColor:"#ff6b00",radius:12,fillOpacity:.6}}],center:[2.3522,48.8566],zoom:13,title:"Paris Locations",height:"350px"}}]},n={id:Date.now().toString(),role:"bot",content:t.content,timestamp:new Date,layouts:t.layouts};this.messages.push(n),this.scrollToBottom()}scrollToBottom(){setTimeout(()=>{this.chatMessagesContainer&&(this.chatMessagesContainer.nativeElement.scrollTop=this.chatMessagesContainer.nativeElement.scrollHeight)},100)}onChatScroll(){let t=this.chatMessagesContainer?.nativeElement;if(!t)return;let r=Math.abs(t.scrollHeight-t.scrollTop-t.clientHeight)<=20;this.shouldScrollToBottom=r}getTables(t){return t.filter(n=>n.type==="table")}getTableHeaders(t){return console.log(t),t.data.column_names||[]}getTableData(t){return console.log(t),t.data.data||[]}getButtons(t){return t.filter(n=>n.type==="button")}isSingleButton(t){return console.log(t),t&&t.type==="button"&&t.data.link&&t.data.title}hasValidButtonStructure(t){return console.log(t),!!t&&!!t.data&&!!t.data.link&&typeof t.data.link=="string"&&!!t.data.title&&typeof t.data.title=="string"&&this.isValidUrl(t.data.link)}hasValidTableStructure(t){return console.log(t),t?.data&&Array.isArray(t.data.column_names)&&t.data.column_names.length>0&&Array.isArray(t.data.data)&&t.data.data.every(n=>Array.isArray(n))}hasValidTableName(t){return console.log(t),t?.data?.table_name&&typeof t.data.table_name=="string"&&t.data.table_name.trim().length>0}getButtonTitle(t){return console.log(t),t.data.title||"Click Here"}getButtonLink(t){return console.log(t),t.data.link||"#"}isExternalLink(t){console.log(t);let n=this.getButtonLink(t);return n.startsWith("http://")||n.startsWith("https://")}isValidUrl(t){try{return new URL(t),!0}catch{return t.startsWith("/")||t.startsWith("#")||t.startsWith("?")}}hasFormLayout(t){return t.layouts&&Array.isArray(t.layouts)&&t.layouts.some(n=>n.type==="form")}hasMapLayout(t){return t.layouts&&Array.isArray(t.layouts)&&t.layouts.some(n=>n.type==="map")}getFormTool(t){return console.log("form layout schema : ",t),{name:"form-layout",inputSchema:t.data.schema}}onChatFormSubmitted(t,n){console.log("Chat form submitted:",t),this.formSubmittedFromChat.emit({toolName:t.toolName,params:t.params})}onChatFormCancelled(){console.log("Chat form cancelled")}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Ve({type:e,selectors:[["app-chatbot"]],viewQuery:function(n,r){if(n&1&&Zn(UGe,5),n&2){let i;St(i=kt())&&(r.chatMessagesContainer=i.first)}},inputs:{messages:"messages"},outputs:{formSubmittedFromChat:"formSubmittedFromChat"},decls:4,vars:0,consts:[["chatMessages",""],[1,"chat-messages",3,"scroll"],[1,"message-container",3,"ngClass"],[1,"message-content"],[1,"message-text","markdown-body"],[3,"data",4,"ngIf"],[1,"table-container"],[1,"button-container"],[1,"map-container"],[1,"form-layouts"],[1,"message-time"],[3,"data"],[1,"table-wrapper"],[1,"table-header"],[1,"dynamic-table"],[1,"table-error"],[3,"title"],[1,"button-wrapper"],[1,"dynamic-button",3,"href","target"],[1,"button-error"],[1,"map-wrapper"],[1,"map-error"],[1,"map-header"],[3,"featureClick","featureDetails","wmsLayers","center","zoom","showPopup","height"],[1,"form-container"],[3,"formLayout"],[1,"invalid-form"],[3,"formSubmitted","formCancelled","formLayout"]],template:function(n,r){if(n&1){let i=Qt();N(0,"div",1,0),Te("scroll",function(){return Je(i),Ye(r.onChatScroll())}),go(2,pWe,14,21,"div",2,kl),$()}n&2&&(R(2),_o(r.messages))},dependencies:[gu,ro,rw,ha,wX,bX,C$,U$,mz,E$,I$,M$,S$,k$,T$,A$,O$,D$,P$,R$,N$,$$,L$,F$,j$,z$,B$],styles:[".chat-messages[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:10px 20px 20px 12px;display:flex;flex-direction:column;gap:12px}.message-container[_ngcontent-%COMP%]{display:flex;max-width:85%}.message-container.layout-message[_ngcontent-%COMP%]{max-width:100%!important;width:100%!important;align-self:stretch!important}.message-container.map-layout-active.bot-message[_ngcontent-%COMP%]{min-width:580px}.user-message[_ngcontent-%COMP%]{align-self:flex-end;justify-content:flex-end}.bot-message[_ngcontent-%COMP%]{align-self:flex-start;justify-content:flex-start}.message-content[_ngcontent-%COMP%]{padding:10px 14px;border-radius:16px;position:relative;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;font-size:.95rem;line-height:1.4;max-width:100%}.layout-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{width:100%!important;margin-left:0;max-width:100%!important;padding:0!important;background:transparent!important;box-shadow:none!important;border-radius:0!important}.map-layout-active.bot-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{min-width:480px}.user-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#f0f0f0;border-bottom-right-radius:4px;color:#333}.bot-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#fff;border-bottom-left-radius:4px;box-shadow:0 1px 2px #00000014;color:#333}.message-time[_ngcontent-%COMP%]{font-size:.65rem;color:#999;text-align:right;margin-top:4px}.table-container[_ngcontent-%COMP%], .button-container[_ngcontent-%COMP%], .map-container[_ngcontent-%COMP%]{width:100%!important;max-width:100%!important;margin:10px 0}.table-wrapper[_ngcontent-%COMP%]{margin-bottom:15px;border:1px solid #e0e0e0;border-radius:6px;overflow:hidden;background-color:#fff;width:100%}.table-header[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:10px 12px;font-weight:600;font-size:13px;color:#333;border-bottom:1px solid #e0e0e0}.dynamic-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:13px}.dynamic-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:10px 6px;text-align:left;font-weight:600;border-bottom:1px solid #dee2e6;color:#495057;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:150px}.dynamic-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 6px;border-bottom:1px solid #dee2e6;color:#212529;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:150px}.dynamic-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.dynamic-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.table-error[_ngcontent-%COMP%]{padding:15px;text-align:center;color:#dc3545;background-color:#f8d7da;border:1px solid #f5c6cb;border-radius:4px;margin:8px;font-size:13px}.button-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;width:100%}.button-wrapper[_ngcontent-%COMP%]{flex-shrink:0}.dynamic-button[_ngcontent-%COMP%]{display:inline-block;padding:8px 16px;background-color:#007bff;color:#fff;text-decoration:none;border-radius:4px;transition:background-color .3s;font-size:13px}.dynamic-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.button-error[_ngcontent-%COMP%]{padding:8px;text-align:center;color:#dc3545;background-color:#f8d7da;border:1px solid #f5c6cb;border-radius:4px;font-size:13px}.map-wrapper[_ngcontent-%COMP%]{width:100%!important;max-width:100%!important;margin:0;padding:0}.map-container[_ngcontent-%COMP%]{width:90%!important}.message-text[_ngcontent-%COMP%]{max-width:90%}.message-text[_ngcontent-%COMP%]     *{max-width:100%;margin:0}.message-text[_ngcontent-%COMP%]     p{margin-bottom:8px;line-height:1.4}.message-text[_ngcontent-%COMP%]     p:last-child{margin-bottom:0}@media (max-width: 768px){.chat-messages[_ngcontent-%COMP%]{padding:8px 0;gap:10px}.message-container[_ngcontent-%COMP%]{max-width:90%}.message-container.layout-message[_ngcontent-%COMP%]{max-width:100%!important}.message-container.map-layout-active.bot-message[_ngcontent-%COMP%]{min-width:100%!important;max-width:100%!important}.map-layout-active.bot-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{min-width:100%!important}.message-content[_ngcontent-%COMP%]{padding:8px 12px;font-size:.9rem;line-height:1.35;border-radius:14px}.message-time[_ngcontent-%COMP%]{font-size:.6rem;margin-top:3px}.table-container[_ngcontent-%COMP%], .button-container[_ngcontent-%COMP%], .map-container[_ngcontent-%COMP%]{margin:8px 0}.table-wrapper[_ngcontent-%COMP%]{margin-bottom:12px;border-radius:5px}.table-header[_ngcontent-%COMP%]{padding:8px 10px;font-size:12px}.dynamic-table[_ngcontent-%COMP%]{font-size:12px}.dynamic-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .dynamic-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 4px;max-width:120px}.dynamic-button[_ngcontent-%COMP%]{padding:7px 12px;font-size:12px}.table-error[_ngcontent-%COMP%], .button-error[_ngcontent-%COMP%]{padding:10px;font-size:12px}}@media (max-width: 480px){.chat-messages[_ngcontent-%COMP%]{padding:6px 0;gap:8px}.message-container[_ngcontent-%COMP%]{max-width:92%}.message-container.map-layout-active.bot-message[_ngcontent-%COMP%]{min-width:100%!important;margin-left:0;margin-right:0;padding-left:0;padding-right:0}.message-content[_ngcontent-%COMP%]{padding:6px 10px;font-size:.85rem;line-height:1.3;border-radius:12px}.message-time[_ngcontent-%COMP%]{font-size:.55rem;margin-top:2px}.table-container[_ngcontent-%COMP%], .button-container[_ngcontent-%COMP%], .map-container[_ngcontent-%COMP%]{margin:6px 0}.table-wrapper[_ngcontent-%COMP%]{margin-bottom:10px;border-radius:4px}.table-header[_ngcontent-%COMP%]{padding:6px 8px;font-size:11px}.dynamic-table[_ngcontent-%COMP%]{font-size:11px}.dynamic-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .dynamic-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 3px;max-width:100px}.button-container[_ngcontent-%COMP%]{gap:6px}.dynamic-button[_ngcontent-%COMP%]{padding:6px 10px;font-size:11px;border-radius:3px}.table-error[_ngcontent-%COMP%], .button-error[_ngcontent-%COMP%]{padding:8px;font-size:11px;margin:6px}.message-text[_ngcontent-%COMP%]     p{margin-bottom:6px;line-height:1.3}.message-text[_ngcontent-%COMP%]     h1, .message-text[_ngcontent-%COMP%]     h2, .message-text[_ngcontent-%COMP%]     h3{margin-top:8px;margin-bottom:6px;font-size:.9em}.message-text[_ngcontent-%COMP%]     ul, .message-text[_ngcontent-%COMP%]     ol{padding-left:16px;margin:4px 0}.message-text[_ngcontent-%COMP%]     li{margin:2px 0}}@media (max-width: 360px){.chat-messages[_ngcontent-%COMP%]{padding:4px 0;gap:6px}.message-container[_ngcontent-%COMP%]{max-width:94%}.message-content[_ngcontent-%COMP%]{padding:5px 8px;font-size:.8rem;line-height:1.25}.dynamic-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .dynamic-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:4px 2px;max-width:80px;font-size:10px}.dynamic-button[_ngcontent-%COMP%]{padding:5px 8px;font-size:10px}}@media (max-width: 768px){.table-container[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch}.table-wrapper[_ngcontent-%COMP%]{min-width:fit-content}}.message-text[_ngcontent-%COMP%]{word-wrap:break-word;overflow-wrap:break-word;-webkit-hyphens:auto;hyphens:auto}.message-text[_ngcontent-%COMP%]     img{max-width:100%;height:auto}.form-container[_ngcontent-%COMP%]{margin:10px 0}.form-wrapper[_ngcontent-%COMP%]{border:1px solid #e1e5e9;border-radius:8px;padding:15px;background:#f8f9fa;margin:10px 0}.form-header[_ngcontent-%COMP%]{font-weight:600;margin-bottom:15px;padding-bottom:8px;border-bottom:1px solid #dee2e6;color:#495057}.form-error[_ngcontent-%COMP%]{color:#dc3545;padding:10px;background:#f8d7da;border-radius:4px;margin:5px 0}.elicitation-container[_ngcontent-%COMP%]{max-width:100%}.elicitation-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{padding:0}.elicitation-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{font-size:14px}.elicitation-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:13px;padding:6px 12px}.form-message-container[_ngcontent-%COMP%]{position:relative}.has-active-form[_ngcontent-%COMP%]{border-left:4px solid #007bff}"]})};var $ye=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({imports:[dn,dn]})}return e})();var Lye=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({imports:[dn,dn]})}return e})();var Fye=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({imports:[dn]})}return e})();var mWe=["*"],fWe=`.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mat-list-list-item-container-color, transparent);border-radius:var(--mat-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mat-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mat-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mat-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mat-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:"";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-leading-icon-size, 24px);height:var(--mat-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mat-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mat-list-list-item-leading-avatar-size, 40px);height:var(--mat-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mat-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mat-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mat-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mat-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mat-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-trailing-icon-size, 24px);height:var(--mat-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mat-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mat-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mat-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mat-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mat-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mat-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mat-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mat-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mat-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mat-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mat-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mat-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mat-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mat-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius: var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}
`,hWe=["unscopedContent"],gWe=["text"],_We=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],yWe=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"];var vWe=new X("ListOption"),A9=(()=>{class e{_elementRef=k(nt);constructor(){}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ne({type:e,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"]})}return e})(),bWe=(()=>{class e{_elementRef=k(nt);constructor(){}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ne({type:e,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"]})}return e})(),wWe=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ne({type:e,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"]})}return e})(),jye=(()=>{class e{_listOption=k(vWe,{optional:!0});constructor(){}_isAlignedAtStart(){return!this._listOption||this._listOption?._getTogglePosition()==="after"}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ne({type:e,hostVars:4,hostBindings:function(r,i){r&2&&at("mdc-list-item__start",i._isAlignedAtStart())("mdc-list-item__end",!i._isAlignedAtStart())}})}return e})(),xWe=(()=>{class e extends jye{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Jn(e)))(i||e)}})();static \u0275dir=Ne({type:e,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],features:[Jt]})}return e})(),O9=(()=>{class e extends jye{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Jn(e)))(i||e)}})();static \u0275dir=Ne({type:e,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],features:[Jt]})}return e})(),CWe=new X("MAT_LIST_CONFIG"),T9=(()=>{class e{_isNonInteractive=!0;get disableRipple(){return this._disableRipple}set disableRipple(n){this._disableRipple=Qi(n)}_disableRipple=!1;get disabled(){return this._disabled()}set disabled(n){this._disabled.set(Qi(n))}_disabled=Pn(!1);_defaultOptions=k(CWe,{optional:!0});static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ne({type:e,hostVars:1,hostBindings:function(r,i){r&2&&Yt("aria-disabled",i.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"}})}return e})(),EWe=(()=>{class e{_elementRef=k(nt);_ngZone=k(De);_listBase=k(T9,{optional:!0});_platform=k(Ln);_hostElement;_isButtonElement;_noopAnimations=uo();_avatars;_icons;set lines(n){this._explicitLines=Ps(n,null),this._updateItemLines(!1)}_explicitLines=null;get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(n){this._disableRipple=Qi(n)}_disableRipple=!1;get disabled(){return this._disabled()||!!this._listBase?.disabled}set disabled(n){this._disabled.set(Qi(n))}_disabled=Pn(!1);_subscriptions=new fn;_rippleRenderer=null;_hasUnscopedTextContent=!1;rippleConfig;get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(){k(Oo).load(wb);let n=k(DI,{optional:!0});this.rippleConfig=n||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement=this._hostElement.nodeName.toLowerCase()==="button",this._listBase&&!this._listBase._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),this._rippleRenderer!==null&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!!(this._avatars.length||this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new Jh(this,this._ngZone,this._hostElement,this._platform,k(ft)),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(is(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(n){if(!this._lines||!this._titles||!this._unscopedContent)return;n&&this._checkDomForUnscopedTextContent();let r=this._explicitLines??this._inferLinesFromContent(),i=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",r<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",r<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",r===2),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",r===3),this._hasUnscopedTextContent){let o=this._titles.length===0&&r===1;i.classList.toggle("mdc-list-item__primary-text",o),i.classList.toggle("mdc-list-item__secondary-text",!o)}else i.classList.remove("mdc-list-item__primary-text"),i.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let n=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(n+=1),n}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(n=>n.nodeType!==n.COMMENT_NODE).some(n=>!!(n.textContent&&n.textContent.trim()))}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ne({type:e,contentQueries:function(r,i,o){if(r&1&&(Rr(o,xWe,4),Rr(o,O9,4)),r&2){let s;St(s=kt())&&(i._avatars=s),St(s=kt())&&(i._icons=s)}},hostVars:4,hostBindings:function(r,i){r&2&&(Yt("aria-disabled",i.disabled)("disabled",i._isButtonElement&&i.disabled||null),at("mdc-list-item--disabled",i.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"}})}return e})();var zye=(()=>{class e extends EWe{_lines;_titles;_meta;_unscopedContent;_itemText;get activated(){return this._activated}set activated(n){this._activated=Qi(n)}_activated=!1;_getAriaCurrent(){return this._hostElement.nodeName==="A"&&this._activated?"page":null}_hasBothLeadingAndTrailing(){return this._meta.length!==0&&(this._avatars.length!==0||this._icons.length!==0)}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Jn(e)))(i||e)}})();static \u0275cmp=Ve({type:e,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(r,i,o){if(r&1&&(Rr(o,bWe,5),Rr(o,A9,5),Rr(o,wWe,5)),r&2){let s;St(s=kt())&&(i._lines=s),St(s=kt())&&(i._titles=s),St(s=kt())&&(i._meta=s)}},viewQuery:function(r,i){if(r&1&&(Zn(hWe,5),Zn(gWe,5)),r&2){let o;St(o=kt())&&(i._unscopedContent=o.first),St(o=kt())&&(i._itemText=o.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:13,hostBindings:function(r,i){r&2&&(Yt("aria-current",i._getAriaCurrent()),at("mdc-list-item--activated",i.activated)("mdc-list-item--with-leading-avatar",i._avatars.length!==0)("mdc-list-item--with-leading-icon",i._icons.length!==0)("mdc-list-item--with-trailing-meta",i._meta.length!==0)("mat-mdc-list-item-both-leading-and-trailing",i._hasBothLeadingAndTrailing())("_mat-animation-noopable",i._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],features:[Jt],ngContentSelectors:yWe,decls:10,vars:0,consts:[["unscopedContent",""],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],[1,"mat-focus-indicator"]],template:function(r,i){if(r&1){let o=Qt();lr(_We),Ht(0),N(1,"span",1),Ht(2,1),Ht(3,2),N(4,"span",2,0),Te("cdkObserveContent",function(){return Je(o),Ye(i._updateItemLines(!0))}),Ht(6,3),$()(),Ht(7,4),Ht(8,5),Vt(9,"div",3)}},dependencies:[T_e],encapsulation:2,changeDetection:0})}return e})();var Bye=(()=>{class e extends T9{_isNonInteractive=!1;static \u0275fac=(()=>{let n;return function(i){return(n||(n=Jn(e)))(i||e)}})();static \u0275cmp=Ve({type:e,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-mdc-nav-list","mat-mdc-list-base","mdc-list"],exportAs:["matNavList"],features:[En([{provide:T9,useExisting:e}]),Jt],ngContentSelectors:mWe,decls:1,vars:0,template:function(r,i){r&1&&(lr(),Ht(0))},styles:[fWe],encapsulation:2,changeDetection:0})}return e})();var H$=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({imports:[JN,dn,Rm,Fye,Lye]})}return e})();function SWe(e,t){if(e&1&&(N(0,"mat-list-item")(1,"mat-icon",8),J(2),$(),N(3,"div",9),J(4),$()()),e&2){let n=t.$implicit;R(2),sn(n.icon),R(2),sn(n.title)}}function kWe(e,t){if(e&1&&(N(0,"mat-nav-list"),go(1,SWe,5,2,"mat-list-item",null,kl),$()),e&2){let n=H();R(),_o(n.chats)}}var Z$=class e{constructor(t){this.mcpService=t}chats=[];ngOnInit(){}static \u0275fac=function(n){return new(n||e)(Ee(lo))};static \u0275cmp=Ve({type:e,selectors:[["app-sidebar"]],features:[En([lo])],decls:15,vars:1,consts:[[1,"sidebar-container"],[1,"sidebar-header"],["mat-button","",1,"new-chat-button"],[1,"sidebar-scrollable"],[1,"sidebar-footer"],["mat-button","",1,"user-button"],[1,"user-icon"],[1,"username"],["matListItemIcon",""],["matListItemTitle",""]],template:function(n,r){n&1&&(N(0,"div",0)(1,"div",1)(2,"button",2)(3,"mat-icon"),J(4,"add"),$(),N(5,"span"),J(6,"New chat"),$()()(),N(7,"div",3),wt(8,kWe,3,0,"mat-nav-list"),$(),N(9,"div",4)(10,"button",5)(11,"mat-icon",6),J(12,"account_circle"),$(),N(13,"span",7),J(14,"Abhilash Poshanagari"),$()()()()),n&2&&(R(8),xt(r.chats.length>0?8:-1))},dependencies:[$ye,Nb,Rb,Bye,H$,zye,O9,A9,ro],styles:[".sidebar-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.sidebar-header[_ngcontent-%COMP%]{padding:16px 20px;flex-shrink:0;border-bottom:1px solid #f0f0f0}.new-chat-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;width:100%;text-align:left;background-color:#f0f0f0;border-radius:8px;padding:8px 12px;color:#333;font-size:.9rem;transition:all .2s}.new-chat-button[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.sidebar-scrollable[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding-bottom:80px}mat-nav-list[_ngcontent-%COMP%]{padding-top:0}mat-list-item[_ngcontent-%COMP%]{border-radius:6px;margin:2px 12px;color:#555}mat-list-item[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.sidebar-footer[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;padding:12px 16px;background:#fff;border-top:1px solid #eee}.user-button[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;padding:8px;border-radius:6px;color:#333}.user-button[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.user-icon[_ngcontent-%COMP%]{color:#666;font-size:24px;width:24px;height:24px;margin-right:12px}.username[_ngcontent-%COMP%]{font-size:.9rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})};var W$=["*"],TWe=["content"],AWe=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],OWe=["mat-drawer","mat-drawer-content","*"];function MWe(e,t){if(e&1){let n=Qt();N(0,"div",1),Te("click",function(){Je(n);let i=H();return Ye(i._onBackdropClicked())}),$()}if(e&2){let n=H();at("mat-drawer-shown",n._isShowingBackdrop())}}function DWe(e,t){e&1&&(N(0,"mat-drawer-content"),Ht(1,2),$())}var PWe=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],RWe=["mat-sidenav","mat-sidenav-content","*"];function NWe(e,t){if(e&1){let n=Qt();N(0,"div",1),Te("click",function(){Je(n);let i=H();return Ye(i._onBackdropClicked())}),$()}if(e&2){let n=H();at("mat-drawer-shown",n._isShowingBackdrop())}}function $We(e,t){e&1&&(N(0,"mat-sidenav-content"),Ht(1,2),$())}var LWe=`.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color, var(--mat-sys-on-background));background-color:var(--mat-sidenav-content-background-color, var(--mat-sys-background));box-sizing:border-box;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color, color-mix(in srgb, var(--mat-sys-neutral-variant20) 40%, transparent))}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}@media(forced-colors: active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-content.mat-drawer-content-hidden{opacity:0}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color, var(--mat-sys-on-surface-variant));box-shadow:var(--mat-sidenav-container-elevation-shadow, none);background-color:var(--mat-sidenav-container-background-color, var(--mat-sys-surface));border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));width:var(--mat-sidenav-container-width, 360px);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}@media(forced-colors: active){.mat-drawer,[dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}}@media(forced-colors: active){[dir=rtl] .mat-drawer,.mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-transition .mat-drawer{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating){visibility:hidden;box-shadow:none}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating) .mat-drawer-inner-container{display:none}.mat-drawer.mat-drawer-opened.mat-drawer-opened{transform:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto}.mat-sidenav-fixed{position:fixed}
`;var FWe=new X("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:jWe}),P9=new X("MAT_DRAWER_CONTAINER");function jWe(){return!1}var q$=(()=>{class e extends Sb{_platform=k(Ln);_changeDetectorRef=k(Tr);_container=k(D9);constructor(){let n=k(nt),r=k(Qh),i=k(De);super(n,r,i)}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}_shouldBeHidden(){if(this._platform.isBrowser)return!1;let{start:n,end:r}=this._container;return n!=null&&n.mode!=="over"&&n.opened||r!=null&&r.mode!=="over"&&r.opened}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Ve({type:e,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:6,hostBindings:function(r,i){r&2&&(ls("margin-left",i._container._contentMargins.left,"px")("margin-right",i._container._contentMargins.right,"px"),at("mat-drawer-content-hidden",i._shouldBeHidden()))},features:[En([{provide:Sb,useExisting:e}]),Jt],ngContentSelectors:W$,decls:1,vars:0,template:function(r,i){r&1&&(lr(),Ht(0))},encapsulation:2,changeDetection:0})}return e})(),M9=(()=>{class e{_elementRef=k(nt);_focusTrapFactory=k(TI);_focusMonitor=k(_u);_platform=k(Ln);_ngZone=k(De);_renderer=k(rr);_interactivityChecker=k(bb);_doc=k(yt);_container=k(P9,{optional:!0});_focusTrap=null;_elementFocusedBeforeDrawerWasOpened=null;_eventCleanups;_isAttached;_anchor;get position(){return this._position}set position(n){n=n==="end"?"end":"start",n!==this._position&&(this._isAttached&&this._updatePositionInParent(n),this._position=n,this.onPositionChanged.emit())}_position="start";get mode(){return this._mode}set mode(n){this._mode=n,this._updateFocusTrapState(),this._modeChanged.next()}_mode="over";get disableClose(){return this._disableClose}set disableClose(n){this._disableClose=Qi(n)}_disableClose=!1;get autoFocus(){let n=this._autoFocus;return n??(this.mode==="side"?"dialog":"first-tabbable")}set autoFocus(n){(n==="true"||n==="false"||n==null)&&(n=Qi(n)),this._autoFocus=n}_autoFocus;get opened(){return this._opened()}set opened(n){this.toggle(Qi(n))}_opened=Pn(!1);_openedVia;_animationStarted=new ge;_animationEnd=new ge;openedChange=new Ue(!0);_openedStream=this.openedChange.pipe(Kt(n=>n),et(()=>{}));openedStart=this._animationStarted.pipe(Kt(()=>this.opened),Eg(void 0));_closedStream=this.openedChange.pipe(Kt(n=>!n),et(()=>{}));closedStart=this._animationStarted.pipe(Kt(()=>!this.opened),Eg(void 0));_destroyed=new ge;onPositionChanged=new Ue;_content;_modeChanged=new ge;_injector=k(ft);_changeDetectorRef=k(Tr);constructor(){this.openedChange.pipe(sr(this._destroyed)).subscribe(n=>{n?(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement,this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{let n=this._elementRef.nativeElement;o0(n,"keydown").pipe(Kt(r=>r.keyCode===27&&!this.disableClose&&!yu(r)),sr(this._destroyed)).subscribe(r=>this._ngZone.run(()=>{this.close(),r.stopPropagation(),r.preventDefault()})),this._eventCleanups=[this._renderer.listen(n,"transitionrun",this._handleTransitionEvent),this._renderer.listen(n,"transitionend",this._handleTransitionEvent),this._renderer.listen(n,"transitioncancel",this._handleTransitionEvent)]}),this._animationEnd.subscribe(()=>{this.openedChange.emit(this.opened)})}_forceFocus(n,r){this._interactivityChecker.isFocusable(n)||(n.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let i=()=>{o(),s(),n.removeAttribute("tabindex")},o=this._renderer.listen(n,"blur",i),s=this._renderer.listen(n,"mousedown",i)})),n.focus(r)}_focusByCssSelector(n,r){let i=this._elementRef.nativeElement.querySelector(n);i&&this._forceFocus(i,r)}_takeFocus(){if(!this._focusTrap)return;let n=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":Oi(()=>{!this._focusTrap.focusInitialElement()&&typeof n.focus=="function"&&n.focus()},{injector:this._injector});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus);break}}_restoreFocus(n){this.autoFocus!=="dialog"&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,n):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){let n=this._doc.activeElement;return!!n&&this._elementRef.nativeElement.contains(n)}ngAfterViewInit(){this._isAttached=!0,this._position==="end"&&this._updatePositionInParent("end"),this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState())}ngOnDestroy(){this._eventCleanups.forEach(n=>n()),this._focusTrap?.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(n){return this.toggle(!0,n)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(n=!this.opened,r){n&&r&&(this._openedVia=r);let i=this._setOpen(n,!n&&this._isFocusWithinDrawer(),this._openedVia||"program");return n||(this._openedVia=null),i}_setOpen(n,r,i){return n===this.opened?Promise.resolve(n?"open":"close"):(this._opened.set(n),this._container?._transitionsEnabled?this._setIsAnimating(!0):setTimeout(()=>{this._animationStarted.next(),this._animationEnd.next()}),this._elementRef.nativeElement.classList.toggle("mat-drawer-opened",n),!n&&r&&this._restoreFocus(i),this._changeDetectorRef.markForCheck(),this._updateFocusTrapState(),new Promise(o=>{this.openedChange.pipe(Xr(1)).subscribe(s=>o(s?"open":"close"))}))}_setIsAnimating(n){this._elementRef.nativeElement.classList.toggle("mat-drawer-animating",n)}_getWidth(){return this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop&&this.opened)}_updatePositionInParent(n){if(!this._platform.isBrowser)return;let r=this._elementRef.nativeElement,i=r.parentNode;n==="end"?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),i.insertBefore(this._anchor,r)),i.appendChild(r)):this._anchor&&this._anchor.parentNode.insertBefore(r,this._anchor)}_handleTransitionEvent=n=>{let r=this._elementRef.nativeElement;n.target===r&&this._ngZone.run(()=>{n.type==="transitionrun"?this._animationStarted.next(n):(n.type==="transitionend"&&this._setIsAnimating(!1),this._animationEnd.next(n))})};static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Ve({type:e,selectors:[["mat-drawer"]],viewQuery:function(r,i){if(r&1&&Zn(TWe,5),r&2){let o;St(o=kt())&&(i._content=o.first)}},hostAttrs:[1,"mat-drawer"],hostVars:12,hostBindings:function(r,i){r&2&&(Yt("align",null)("tabIndex",i.mode!=="side"?"-1":null),ls("visibility",!i._container&&!i.opened?"hidden":null),at("mat-drawer-end",i.position==="end")("mat-drawer-over",i.mode==="over")("mat-drawer-push",i.mode==="push")("mat-drawer-side",i.mode==="side"))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:W$,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(r,i){r&1&&(lr(),N(0,"div",1,0),Ht(2),$())},dependencies:[Sb],encapsulation:2,changeDetection:0})}return e})(),D9=(()=>{class e{_dir=k(da,{optional:!0});_element=k(nt);_ngZone=k(De);_changeDetectorRef=k(Tr);_animationDisabled=uo();_transitionsEnabled=!1;_allDrawers;_drawers=new Ua;_content;_userContent;get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(n){this._autosize=Qi(n)}_autosize=k(FWe);get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(n){this._backdropOverride=n==null?null:Qi(n)}_backdropOverride;backdropClick=new Ue;_start;_end;_left;_right;_destroyed=new ge;_doCheckSubject=new ge;_contentMargins={left:null,right:null};_contentMarginChanges=new ge;get scrollable(){return this._userContent||this._content}_injector=k(ft);constructor(){let n=k(Ln),r=k(Dm);this._dir?.change.pipe(sr(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),r.change().pipe(sr(this._destroyed)).subscribe(()=>this.updateContentMargins()),!this._animationDisabled&&n.isBrowser&&this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{this._element.nativeElement.classList.add("mat-drawer-transition"),this._transitionsEnabled=!0},200)})}ngAfterContentInit(){this._allDrawers.changes.pipe(Ui(this._allDrawers),sr(this._destroyed)).subscribe(n=>{this._drawers.reset(n.filter(r=>!r._container||r._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Ui(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(n=>{this._watchDrawerToggle(n),this._watchDrawerPosition(n),this._watchDrawerMode(n)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(Tu(10),sr(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(n=>n.open())}close(){this._drawers.forEach(n=>n.close())}updateContentMargins(){let n=0,r=0;if(this._left&&this._left.opened){if(this._left.mode=="side")n+=this._left._getWidth();else if(this._left.mode=="push"){let i=this._left._getWidth();n+=i,r-=i}}if(this._right&&this._right.opened){if(this._right.mode=="side")r+=this._right._getWidth();else if(this._right.mode=="push"){let i=this._right._getWidth();r+=i,n-=i}}n=n||null,r=r||null,(n!==this._contentMargins.left||r!==this._contentMargins.right)&&(this._contentMargins={left:n,right:r},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(n){n._animationStarted.pipe(sr(this._drawers.changes)).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),n.mode!=="side"&&n.openedChange.pipe(sr(this._drawers.changes)).subscribe(()=>this._setContainerClass(n.opened))}_watchDrawerPosition(n){n.onPositionChanged.pipe(sr(this._drawers.changes)).subscribe(()=>{Oi({read:()=>this._validateDrawers()},{injector:this._injector})})}_watchDrawerMode(n){n._modeChanged.pipe(sr(is(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(n){let r=this._element.nativeElement.classList,i="mat-drawer-container-has-open";n?r.add(i):r.remove(i)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(n=>{n.position=="end"?(this._end!=null,this._end=n):(this._start!=null,this._start=n)}),this._right=this._left=null,this._dir&&this._dir.value==="rtl"?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&this._start.mode!="over"||this._isDrawerOpen(this._end)&&this._end.mode!="over"}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(n=>n&&!n.disableClose&&this._drawerHasBackdrop(n)).forEach(n=>n._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(n){return n!=null&&n.opened}_drawerHasBackdrop(n){return this._backdropOverride==null?!!n&&n.mode!=="side":this._backdropOverride}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Ve({type:e,selectors:[["mat-drawer-container"]],contentQueries:function(r,i,o){if(r&1&&(Rr(o,q$,5),Rr(o,M9,5)),r&2){let s;St(s=kt())&&(i._content=s.first),St(s=kt())&&(i._allDrawers=s)}},viewQuery:function(r,i){if(r&1&&Zn(q$,5),r&2){let o;St(o=kt())&&(i._userContent=o.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(r,i){r&2&&at("mat-drawer-container-explicit-backdrop",i._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[En([{provide:P9,useExisting:e}])],ngContentSelectors:OWe,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(r,i){r&1&&(lr(AWe),wt(0,MWe,1,2,"div",0),Ht(1),Ht(2,1),wt(3,DWe,2,0,"mat-drawer-content")),r&2&&(xt(i.hasBackdrop?0:-1),R(3),xt(i._content?-1:3))},dependencies:[q$],styles:[`.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color, var(--mat-sys-on-background));background-color:var(--mat-sidenav-content-background-color, var(--mat-sys-background));box-sizing:border-box;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color, color-mix(in srgb, var(--mat-sys-neutral-variant20) 40%, transparent))}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}@media(forced-colors: active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-content.mat-drawer-content-hidden{opacity:0}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color, var(--mat-sys-on-surface-variant));box-shadow:var(--mat-sidenav-container-elevation-shadow, none);background-color:var(--mat-sidenav-container-background-color, var(--mat-sys-surface));border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));width:var(--mat-sidenav-container-width, 360px);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}@media(forced-colors: active){.mat-drawer,[dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}}@media(forced-colors: active){[dir=rtl] .mat-drawer,.mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-transition .mat-drawer{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating){visibility:hidden;box-shadow:none}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating) .mat-drawer-inner-container{display:none}.mat-drawer.mat-drawer-opened.mat-drawer-opened{transform:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto}.mat-sidenav-fixed{position:fixed}
`],encapsulation:2,changeDetection:0})}return e})(),G$=(()=>{class e extends q${static \u0275fac=(()=>{let n;return function(i){return(n||(n=Jn(e)))(i||e)}})();static \u0275cmp=Ve({type:e,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],features:[En([{provide:Sb,useExisting:e}]),Jt],ngContentSelectors:W$,decls:1,vars:0,template:function(r,i){r&1&&(lr(),Ht(0))},encapsulation:2,changeDetection:0})}return e})(),R9=(()=>{class e extends M9{get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(n){this._fixedInViewport=Qi(n)}_fixedInViewport=!1;get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(n){this._fixedTopGap=Ps(n)}_fixedTopGap=0;get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(n){this._fixedBottomGap=Ps(n)}_fixedBottomGap=0;static \u0275fac=(()=>{let n;return function(i){return(n||(n=Jn(e)))(i||e)}})();static \u0275cmp=Ve({type:e,selectors:[["mat-sidenav"]],hostAttrs:[1,"mat-drawer","mat-sidenav"],hostVars:16,hostBindings:function(r,i){r&2&&(Yt("tabIndex",i.mode!=="side"?"-1":null)("align",null),ls("top",i.fixedInViewport?i.fixedTopGap:null,"px")("bottom",i.fixedInViewport?i.fixedBottomGap:null,"px"),at("mat-drawer-end",i.position==="end")("mat-drawer-over",i.mode==="over")("mat-drawer-push",i.mode==="push")("mat-drawer-side",i.mode==="side")("mat-sidenav-fixed",i.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[En([{provide:M9,useExisting:e}]),Jt],ngContentSelectors:W$,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(r,i){r&1&&(lr(),N(0,"div",1,0),Ht(2),$())},dependencies:[Sb],encapsulation:2,changeDetection:0})}return e})(),Uye=(()=>{class e extends D9{_allDrawers=void 0;_content=void 0;static \u0275fac=(()=>{let n;return function(i){return(n||(n=Jn(e)))(i||e)}})();static \u0275cmp=Ve({type:e,selectors:[["mat-sidenav-container"]],contentQueries:function(r,i,o){if(r&1&&(Rr(o,G$,5),Rr(o,R9,5)),r&2){let s;St(s=kt())&&(i._content=s.first),St(s=kt())&&(i._allDrawers=s)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(r,i){r&2&&at("mat-drawer-container-explicit-backdrop",i._backdropOverride)},exportAs:["matSidenavContainer"],features:[En([{provide:P9,useExisting:e},{provide:D9,useExisting:e}]),Jt],ngContentSelectors:RWe,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(r,i){r&1&&(lr(PWe),wt(0,NWe,1,2,"div",0),Ht(1),Ht(2,1),wt(3,$We,2,0,"mat-sidenav-content")),r&2&&(xt(i.hasBackdrop?0:-1),R(3),xt(i._content?-1:3))},dependencies:[G$],styles:[LWe],encapsulation:2,changeDetection:0})}return e})(),Vye=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({imports:[dn,Yh,Yh,dn]})}return e})();var BWe=["mat-icon-button",""],UWe=["*"],VWe=new X("MAT_BUTTON_CONFIG");function Hye(e){return e==null?void 0:Al(e)}var Zye=(()=>{class e{_elementRef=k(nt);_ngZone=k(De);_animationsDisabled=uo();_config=k(VWe,{optional:!0});_focusMonitor=k(_u);_cleanupClick;_renderer=k(rr);_rippleLoader=k(Dye);_isAnchor;_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(n){this._disableRipple=n,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(n){this._disabled=n,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;tabIndex;set _tabindex(n){this.tabIndex=n}constructor(){k(Oo).load(wb);let n=this._elementRef.nativeElement;this._isAnchor=n.tagName==="A",this.disabledInteractive=this._config?.disabledInteractive??!1,this.color=this._config?.color??null,this._rippleLoader?.configureRipple(n,{className:"mat-mdc-button-ripple"})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0),this._isAnchor&&this._setupAsAnchor()}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(n="program",r){n?this._focusMonitor.focusVia(this._elementRef.nativeElement,n,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this._isAnchor?this.disabled||null:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}_getTabIndex(){return this._isAnchor?this.disabled&&!this.disabledInteractive?-1:this.tabIndex:this.tabIndex}_setupAsAnchor(){this._cleanupClick=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"click",n=>{this.disabled&&(n.preventDefault(),n.stopImmediatePropagation())}))}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ne({type:e,hostAttrs:[1,"mat-mdc-button-base"],hostVars:13,hostBindings:function(r,i){r&2&&(Yt("disabled",i._getDisabledAttribute())("aria-disabled",i._getAriaDisabled())("tabindex",i._getTabIndex()),zs(i.color?"mat-"+i.color:""),at("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("mat-unthemed",!i.color)("_mat-animation-noopable",i._animationsDisabled))},inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Nr],disabled:[2,"disabled","disabled",Nr],ariaDisabled:[2,"aria-disabled","ariaDisabled",Nr],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Nr],tabIndex:[2,"tabIndex","tabIndex",Hye],_tabindex:[2,"tabindex","_tabindex",Hye]}})}return e})(),N9=(()=>{class e extends Zye{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Ve({type:e,selectors:[["button","mat-icon-button",""],["a","mat-icon-button",""],["button","matIconButton",""],["a","matIconButton",""]],hostAttrs:[1,"mdc-icon-button","mat-mdc-icon-button"],exportAs:["matButton","matAnchor"],features:[Jt],attrs:BWe,ngContentSelectors:UWe,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,i){r&1&&(lr(),cs(0,"span",0),Ht(1),cs(2,"span",1)(3,"span",2))},styles:[`.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%));flex-shrink:0;text-align:center;width:var(--mat-icon-button-state-layer-size, 40px);height:var(--mat-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mat-icon-button-state-layer-size, 40px) - var(--mat-icon-button-icon-size, 24px)) / 2);font-size:var(--mat-icon-button-icon-size, 24px);color:var(--mat-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-icon-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-icon-button-touch-target-size, 48px);display:var(--mat-icon-button-touch-target-display, block);left:50%;width:var(--mat-icon-button-touch-target-size, 48px);transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mat-icon-button-icon-size, 24px);height:var(--mat-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%))}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return e})();var qye=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({imports:[dn,Rm,dn]})}return e})();var Gye=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({imports:[dn,dn]})}return e})();function ZWe(e,t){}var $m=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;disableAnimations=!1;providers;container;templateContext};var L9=(()=>{class e extends Ib{_elementRef=k(nt);_focusTrapFactory=k(TI);_config;_interactivityChecker=k(bb);_ngZone=k(De);_focusMonitor=k(_u);_renderer=k(rr);_changeDetectorRef=k(Tr);_injector=k(ft);_platform=k(Ln);_document=k(yt);_portalOutlet;_focusTrapped=new ge;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_isDestroyed=!1;constructor(){super(),this._config=k($m,{optional:!0})||new $m,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(n){this._ariaLabelledByQueue.push(n),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(n){let r=this._ariaLabelledByQueue.indexOf(n);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._focusTrapped.complete(),this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(n){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachComponentPortal(n);return this._contentAttached(),r}attachTemplatePortal(n){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachTemplatePortal(n);return this._contentAttached(),r}attachDomPortal=n=>{this._portalOutlet.hasAttached();let r=this._portalOutlet.attachDomPortal(n);return this._contentAttached(),r};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(n,r){this._interactivityChecker.isFocusable(n)||(n.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let i=()=>{o(),s(),n.removeAttribute("tabindex")},o=this._renderer.listen(n,"blur",i),s=this._renderer.listen(n,"mousedown",i)})),n.focus(r)}_focusByCssSelector(n,r){let i=this._elementRef.nativeElement.querySelector(n);i&&this._forceFocus(i,r)}_trapFocus(n){this._isDestroyed||Oi(()=>{let r=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||r.focus(n);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(n)||this._focusDialogContainer(n);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',n);break;default:this._focusByCssSelector(this._config.autoFocus,n);break}this._focusTrapped.next()},{injector:this._injector})}_restoreFocus(){let n=this._config.restoreFocus,r=null;if(typeof n=="string"?r=this._document.querySelector(n):typeof n=="boolean"?r=n?this._elementFocusedBeforeDialogWasOpened:null:n&&(r=n),this._config.restoreFocus&&r&&typeof r.focus=="function"){let i=_b(),o=this._elementRef.nativeElement;(!i||i===this._document.body||i===o||o.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(n){this._elementRef.nativeElement.focus?.(n)}_containsFocus(){let n=this._elementRef.nativeElement,r=_b();return n===r||n.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=_b()))}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Ve({type:e,selectors:[["cdk-dialog-container"]],viewQuery:function(r,i){if(r&1&&Zn(NI,7),r&2){let o;St(o=kt())&&(i._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,i){r&2&&Yt("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[Jt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,i){r&1&&ot(0,ZWe,0,0,"ng-template",0)},dependencies:[NI],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return e})(),BI=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new ge;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(t,n){this.overlayRef=t,this.config=n,this.disableClose=n.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(r=>{r.keyCode===27&&!this.disableClose&&!yu(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{!this.disableClose&&this._canClose()?this.close(void 0,{focusOrigin:"mouse"}):this.containerInstance._recaptureFocus?.()}),this._detachSubscription=t.detachments().subscribe(()=>{n.closeOnOverlayDetachments!==!1&&this.close()})}close(t,n){if(this._canClose(t)){let r=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(t),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",n=""){return this.overlayRef.updateSize({width:t,height:n}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}_canClose(t){let n=this.config;return!!this.containerInstance&&(!n.closePredicate||n.closePredicate(t,n,this.componentInstance))}},qWe=new X("DialogScrollStrategy",{providedIn:"root",factory:()=>{let e=k(ft);return()=>Tb(e)}}),GWe=new X("DialogData"),WWe=new X("DefaultDialogConfig");function KWe(e){let t=Pn(e),n=new Ue;return{valueSignal:t,get value(){return t()},change:n,ngOnDestroy(){n.complete()}}}var Wye=(()=>{class e{_injector=k(ft);_defaultOptions=k(WWe,{optional:!0});_parentDialog=k(e,{optional:!0,skipSelf:!0});_overlayContainer=k(l$);_idGenerator=k(ua);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new ge;_afterOpenedAtThisLevel=new ge;_ariaHiddenElements=new Map;_scrollStrategy=k(qWe);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=ku(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ui(void 0)));constructor(){}open(n,r){let i=this._defaultOptions||new $m;r=m(m({},i),r),r.id=r.id||this._idGenerator.getId("cdk-dialog-"),r.id&&this.getDialogById(r.id);let o=this._getOverlayConfig(r),s=Ob(this._injector,o),a=new BI(s,r),c=this._attachContainer(s,a,r);if(a.containerInstance=c,!this.openDialogs.length){let u=this._overlayContainer.getContainerElement();c._focusTrapped?c._focusTrapped.pipe(Xr(1)).subscribe(()=>{this._hideNonDialogContentFromAssistiveTechnology(u)}):this._hideNonDialogContentFromAssistiveTechnology(u)}return this._attachDialogContent(n,a,c,r),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){$9(this.openDialogs,n=>n.close())}getDialogById(n){return this.openDialogs.find(r=>r.id===n)}ngOnDestroy(){$9(this._openDialogsAtThisLevel,n=>{n.config.closeOnDestroy===!1&&this._removeOpenDialog(n,!1)}),$9(this._openDialogsAtThisLevel,n=>n.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(n){let r=new Pm({positionStrategy:n.positionStrategy||Ab().centerHorizontally().centerVertically(),scrollStrategy:n.scrollStrategy||this._scrollStrategy(),panelClass:n.panelClass,hasBackdrop:n.hasBackdrop,direction:n.direction,minWidth:n.minWidth,minHeight:n.minHeight,maxWidth:n.maxWidth,maxHeight:n.maxHeight,width:n.width,height:n.height,disposeOnNavigation:n.closeOnNavigation,disableAnimations:n.disableAnimations});return n.backdropClass&&(r.backdropClass=n.backdropClass),r}_attachContainer(n,r,i){let o=i.injector||i.viewContainerRef?.injector,s=[{provide:$m,useValue:i},{provide:BI,useValue:r},{provide:kb,useValue:n}],a;i.container?typeof i.container=="function"?a=i.container:(a=i.container.type,s.push(...i.container.providers(i))):a=L9;let c=new Eb(a,i.viewContainerRef,ft.create({parent:o||this._injector,providers:s}));return n.attach(c).instance}_attachDialogContent(n,r,i,o){if(n instanceof Po){let s=this._createInjector(o,r,i,void 0),a={$implicit:o.data,dialogRef:r};o.templateContext&&(a=m(m({},a),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),i.attachTemplatePortal(new Om(n,null,a,s))}else{let s=this._createInjector(o,r,i,this._injector),a=i.attachComponentPortal(new Eb(n,o.viewContainerRef,s));r.componentRef=a,r.componentInstance=a.instance}}_createInjector(n,r,i,o){let s=n.injector||n.viewContainerRef?.injector,a=[{provide:GWe,useValue:n.data},{provide:BI,useValue:r}];return n.providers&&(typeof n.providers=="function"?a.push(...n.providers(r,n,i)):a.push(...n.providers)),n.direction&&(!s||!s.get(da,null,{optional:!0}))&&a.push({provide:da,useValue:KWe(n.direction)}),ft.create({parent:s||o,providers:a})}_removeOpenDialog(n,r){let i=this.openDialogs.indexOf(n);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,s)=>{o?s.setAttribute("aria-hidden",o):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(n){if(n.parentElement){let r=n.parentElement.children;for(let i=r.length-1;i>-1;i--){let o=r[i];o!==n&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let n=this._parentDialog;return n?n._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function $9(e,t){let n=e.length;for(;n--;)t(e[n])}function JWe(e,t){}var VI=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;enterAnimationDuration;exitAnimationDuration},F9="mdc-dialog--open",Kye="mdc-dialog--opening",Jye="mdc-dialog--closing",YWe=150,QWe=75,Xye=(()=>{class e extends L9{_animationStateChanged=new Ue;_animationsEnabled=!uo();_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?Qye(this._config.enterAnimationDuration)??YWe:0;_exitAnimationDuration=this._animationsEnabled?Qye(this._config.exitAnimationDuration)??QWe:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(Yye,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Kye,F9)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(F9),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(F9),this._animationsEnabled?(this._hostElement.style.setProperty(Yye,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Jye)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(n){this._actionSectionCount+=n,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(Kye,Jye)}_waitForAnimationToComplete(n,r){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,n)}_requestAnimationFrame(n){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(n):n()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(n){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:n})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(n){let r=super.attachComponentPortal(n);return r.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),r}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Jn(e)))(i||e)}})();static \u0275cmp=Ve({type:e,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(r,i){r&2&&(Ic("id",i._config.id),Yt("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),at("_mat-animation-noopable",!i._animationsEnabled)("mat-mdc-dialog-container-with-actions",i._actionSectionCount>0))},features:[Jt],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,i){r&1&&(N(0,"div",0)(1,"div",1),ot(2,JWe,0,0,"ng-template",2),$()())},dependencies:[NI],styles:[`.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mat-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mat-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mat-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mat-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mat-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mat-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mat-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mat-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mat-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mat-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mat-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mat-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mat-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;box-sizing:border-box;min-height:52px;margin:0;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}
`],encapsulation:2})}return e})(),Yye="--mat-dialog-transition-duration";function Qye(e){return e==null?null:typeof e=="number"?e:e.endsWith("ms")?Ps(e.substring(0,e.length-2)):e.endsWith("s")?Ps(e.substring(0,e.length-1))*1e3:e==="0"?0:null}var UI=(function(e){return e[e.OPEN=0]="OPEN",e[e.CLOSING=1]="CLOSING",e[e.CLOSED=2]="CLOSED",e})(UI||{}),$b=class{_ref;_config;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new ge;_beforeClosed=new ge;_result;_closeFallbackTimeout;_state=UI.OPEN;_closeInteractionType;constructor(t,n,r){this._ref=t,this._config=n,this._containerInstance=r,this.disableClose=n.disableClose,this.id=t.id,t.addPanelClass("mat-mdc-dialog-panel"),r._animationStateChanged.pipe(Kt(i=>i.state==="opened"),Xr(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(Kt(i=>i.state==="closed"),Xr(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),is(this.backdropClick(),this.keydownEvents().pipe(Kt(i=>i.keyCode===27&&!this.disableClose&&!yu(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),eve(this,i.type==="keydown"?"keyboard":"mouse"))})}close(t){let n=this._config.closePredicate;n&&!n(t,this._config,this.componentInstance)||(this._result=t,this._containerInstance._animationStateChanged.pipe(Kt(r=>r.state==="closing"),Xr(1)).subscribe(r=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),r.totalTime+100)}),this._state=UI.CLOSING,this._containerInstance._startExitAnimation())}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let n=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?n.left(t.left):n.right(t.right):n.centerHorizontally(),t&&(t.top||t.bottom)?t.top?n.top(t.top):n.bottom(t.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",n=""){return this._ref.updateSize(t,n),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=UI.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function eve(e,t,n){return e._closeInteractionType=t,e.close(n)}var K$=new X("MatMdcDialogData"),tve=new X("mat-mdc-dialog-default-options"),nve=new X("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let e=k(ft);return()=>Tb(e)}}),HI=(()=>{class e{_defaultOptions=k(tve,{optional:!0});_scrollStrategy=k(nve);_parentDialog=k(e,{optional:!0,skipSelf:!0});_idGenerator=k(ua);_injector=k(ft);_dialog=k(Wye);_animationsDisabled=uo();_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new ge;_afterOpenedAtThisLevel=new ge;dialogConfigClass=VI;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let n=this._parentDialog;return n?n._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=ku(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ui(void 0)));constructor(){this._dialogRefConstructor=$b,this._dialogContainerType=Xye,this._dialogDataToken=K$}open(n,r){let i;r=m(m({},this._defaultOptions||new VI),r),r.id=r.id||this._idGenerator.getId("mat-mdc-dialog-"),r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();let o=this._dialog.open(n,b(m({},r),{positionStrategy:Ab(this._injector).centerHorizontally().centerVertically(),disableClose:!0,closePredicate:void 0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,disableAnimations:this._animationsDisabled||r.enterAnimationDuration?.toLocaleString()==="0"||r.exitAnimationDuration?.toString()==="0",container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:$m,useValue:r}]},templateContext:()=>({dialogRef:i}),providers:(s,a,c)=>(i=new this._dialogRefConstructor(s,r,c),i.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:i}])}));return i.componentRef=o.componentRef,i.componentInstance=o.componentInstance,this.openDialogs.push(i),this.afterOpened.next(i),i.afterClosed().subscribe(()=>{let s=this.openDialogs.indexOf(i);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||this._getAfterAllClosed().next())}),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(n){return this.openDialogs.find(r=>r.id===n)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(n){let r=n.length;for(;r--;)n[r].close()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function eKe(e,t){if(e&1&&(N(0,"p",8),J(1),$()),e&2){let n=H();R(),vn(" ",n.server)}}function tKe(e,t){if(e&1&&(N(0,"p",8),J(1),$()),e&2){let n=H();R(),vn(" ",n.errorMessage)}}var J$=class e{constructor(t,n){this.dialogRef=t;this.data=n}server="";page="";errorMessage="";ngOnInit(){this.server=this.data.domain.trim(),this.page=this.data.page}saveDomain(){this.server.trim()?(this.dialogRef.close({page:this.page,server:this.server}),this.errorMessage=""):this.errorMessage="Please enter a valid"}validateDomain(t){return/^(http?:\/\/)(([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}|(\d{1,3}(\.\d{1,3}){3}))(:\d+)?(\/.*)?$/.test(t)}close(){this.dialogRef.close({page:this.page,server:""})}static \u0275fac=function(n){return new(n||e)(Ee($b),Ee(K$))};static \u0275cmp=Ve({type:e,selectors:[["app-domain-dialog"]],decls:14,vars:8,consts:[[1,"dialog-container"],[1,"input-container"],[1,"input-label"],["matInput","","type","text",1,"input-field",3,"ngModelChange","ngModel","placeholder"],["class","error-message",4,"ngIf"],[1,"button-group"],[1,"cancel-btn",3,"click"],[1,"save-btn",3,"click"],[1,"error-message"]],template:function(n,r){n&1&&(N(0,"div",0)(1,"h2"),J(2),$(),N(3,"div",1)(4,"label",2),J(5),$(),N(6,"input",3),vp("ngModelChange",function(o){return vf(r.server,o)||(r.server=o),o}),$()(),ot(7,eKe,2,1,"p",4)(8,tKe,2,1,"p",4),N(9,"div",5)(10,"button",6),Te("click",function(){return r.close()}),J(11),$(),N(12,"button",7),Te("click",function(){return r.saveDomain()}),J(13),$()()()),n&2&&(R(2),sn(r.data.title),R(3),sn(r.data.message),R(),yp("ngModel",r.server),K("placeholder",r.data.placeholder),R(),K("ngIf",r.server),R(),K("ngIf",r.errorMessage),R(3),sn(r.data.cancelText),R(2),sn(r.data.confirmText))},dependencies:[ro,ha,gu,hu,km,xI,Nm,v$,y$],styles:[".dialog-container[_ngcontent-%COMP%]{padding:30px;background:#fff;border-radius:20px;box-shadow:0 10px 30px #00000026;width:100%;max-width:440px;margin:auto}h2[_ngcontent-%COMP%]{font-size:1.6rem;color:#333;margin-bottom:25px;text-align:center;font-weight:600}.input-container[_ngcontent-%COMP%]{margin-bottom:20px}.input-field[_ngcontent-%COMP%]{width:90%;padding:16px 20px;font-size:1rem;border:2px solid #e0e0e0;border-radius:12px;transition:all .3s ease;background:#fafafa}.input-field[_ngcontent-%COMP%]:focus{outline:none;border-color:#1976d2;background:#fff;box-shadow:0 0 0 3px #1976d233}.input-label[_ngcontent-%COMP%]{display:block;text-align:left;margin-bottom:8px;font-weight:500;color:#555}.error-message[_ngcontent-%COMP%]{color:#e53935;font-size:.9rem;margin:12px 0;padding:8px 12px;background:#e5393514;border-radius:8px;border-left:3px solid #e53935;text-align:left}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:25px}button[_ngcontent-%COMP%]{min-width:100px;font-size:.95rem;padding:12px 24px;border-radius:10px;border:none;cursor:pointer;font-weight:600;letter-spacing:.5px;transition:all .3s ease}.save-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1976d2,#1565c0);color:#fff;box-shadow:0 4px 12px #1976d24d}.save-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#1565c0,#0d47a1);transform:translateY(-2px);box-shadow:0 6px 16px #1976d266}.cancel-btn[_ngcontent-%COMP%]{background:transparent;color:#7f8c8d;border:2px solid #bdc3c7}.cancel-btn[_ngcontent-%COMP%]:hover{background:#bdc3c71a;color:#2c3e50;border-color:#95a5a6;transform:translateY(-2px)}button[_ngcontent-%COMP%]:focus, .input-field[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #1976d233}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.dialog-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .4s ease-out}@media (max-width: 480px){.dialog-container[_ngcontent-%COMP%]{padding:20px;margin:20px}.button-group[_ngcontent-%COMP%]{flex-direction:column}button[_ngcontent-%COMP%]{width:100%}}"]})};var vu=class e{constructor(t,n){this.fb=t;this.mcpService=n;this.mcpService.elicitRequests$.subscribe(r=>{this.createFormFromSchema(r.schema)})}currentForm=new er(null);currentSchema=new er(null);currentRequestId=new er(null);createFormFromSchema(t,n="Elicitation Request"){this.currentSchema.next({schema:t,title:n}),console.log("Schema : ",t);let r=this.buildFormGroup(t);this.currentForm.next(r)}buildFormGroup(t){let n=this.fb.group({}),r=t.properties,i=t.required||[];for(let[o,s]of Object.entries(r)){let a=s;if(a.type==="array"){let c=this.createFormArray(a,i.includes(o));n.addControl(o,c)}else if(a.type==="object"){let c=this.createObjectFormArray(a,i.includes(o));n.addControl(o,c)}else{let c=this.createValidators(a,i.includes(o));n.addControl(o,this.fb.control(a.default||null,c))}}return n}createObjectFormArray(t,n){let r=t.default||{},i=Object.entries(r).map(([o,s])=>this.fb.group({key:[o,ii.required],value:[s],valueType:[this.determineValueType(s)]}));return i.length===0&&n&&i.push(this.fb.group({key:["",ii.required],value:[""],valueType:["string"]})),this.fb.array(i,n?ii.required:null)}determineValueType(t){return typeof t=="number"?"number":typeof t=="boolean"?"boolean":"string"}createObjectFormGroup(t,n){console.log("Object form group : ",t);let r=this.buildFormGroup(t);return n&&r.setValidators(this.objectRequiredValidator),r}objectRequiredValidator(t){if(!(t instanceof Ra))return null;let n=t;return Object.keys(n.controls).some(i=>{let o=n.get(i)?.value;return o!=null&&o!==""})?null:{objectRequired:!0}}createValidators(t,n){let r=[];return n&&r.push(ii.required),t.type==="string"&&(t.minLength&&r.push(ii.minLength(t.minLength)),t.maxLength&&r.push(ii.maxLength(t.maxLength)),t.format==="email"&&r.push(ii.email)),(t.type==="number"||t.type==="integer")&&(t.minimum!==void 0&&r.push(ii.min(t.minimum)),t.maximum!==void 0&&r.push(ii.max(t.maximum))),r}createFormArray(t,n){return this.isNestedArray(t)?this.createNestedFormArray(t,n):t.items&&t.items.type==="object"?this.createObjectFormArray(t,n):this.createSimpleFormArray(t,n)}createSimpleFormArray(t,n){let r=t.default||[];if(r.length>0){let i=r.map(o=>this.fb.control(o));return this.fb.array(i,n?ii.required:null)}else return n?this.fb.array([this.fb.control(this.getDefaultArrayValue(t.items))],ii.required):this.fb.array([])}createNestedFormArray(t,n){let r=t.default||[];if(r.length>0){let i=r.map(o=>this.fb.array(o.map(s=>this.fb.control(s))));return this.fb.array(i,n?ii.required:null)}else if(n){let i=this.fb.array([this.fb.control(this.getDefaultArrayValue(t.items.items))]);return this.fb.array([i],ii.required)}else return this.fb.array([])}isNestedArray(t){return t.items&&t.items.type==="array"}getDefaultArrayValue(t){if(!t)return"";switch(t.type){case"integer":case"number":return 0;case"string":return"";case"boolean":return!1;default:return""}}addArrayItemToForm(t,n){let r=t.get(n),o=this.currentSchema.value?.schema?.properties[n];if(o)if(o.items&&o.items.type==="object"){let s=this.buildFormGroup({properties:o.items.properties,required:o.items.required||[]});r.push(s)}else if(this.isNestedArray(o))this.addNestedArrayRow(t,n);else{let s=this.getDefaultArrayValue(o.items);r.push(this.fb.control(s))}}removeArrayItemFromForm(t,n,r){let i=t.get(n);i.length>0&&i.removeAt(r)}addNestedArrayItem(t,n,r){let i=t.get(n);if(r>=0&&r<i.length){let o=i.at(r),a=this.currentSchema.value?.schema?.properties[n],c=this.getDefaultArrayValue(a?.items?.items);o.push(this.fb.control(c))}}removeNestedArrayItem(t,n,r,i){let o=t.get(n);if(r>=0&&r<o.length){let s=o.at(r);s.length>0&&s.removeAt(i)}}addNestedArrayRow(t,n){let r=t.get(n),o=this.currentSchema.value?.schema?.properties[n],s=this.getDefaultArrayValue(o?.items?.items),a=this.fb.array([this.fb.control(s)]);r.push(a)}removeNestedArrayRow(t,n,r){let i=t.get(n);i.length>0&&i.removeAt(r)}getFormArray(t,n){let r=t.get(n);return r instanceof Hd?r:this.fb.array([])}getNestedFormArray(t,n,r){try{let i=this.getFormArray(t,n);if(r>=0&&r<i.length){let o=i.at(r);if(o instanceof Hd)return o}}catch(i){console.warn(`Error getting nested array for ${n}[${r}]:`,i)}return this.fb.array([])}getObjectFormGroup(t,n){let r=t.get(n);return r instanceof Ra?r:this.fb.group({})}getObjectFormArrayItem(t,n){try{if(n>=0&&n<t.length){let r=t.at(n);if(r instanceof Ra)return r}}catch(r){console.warn(`Error getting object array item at index ${n}:`,r)}return this.fb.group({})}getCurrentForm(){return this.currentForm.asObservable()}getCurrentSchema(){return this.currentSchema.asObservable()}getCurrentRequestId(){return this.currentRequestId.value}submitResponse(t){this.mcpService.submitElicitResponse(t)}validateAgainstSchema(t,n){if(!n)return!1;let r=n.required||[];for(let i of r){if(t[i]===void 0||t[i]===null||t[i]===""||Array.isArray(t[i])&&t[i].length===0)return!1;if(typeof t[i]=="object"&&!Array.isArray(t[i])){let o=n.properties[i];if(o&&o.type==="object"&&!this.validateAgainstSchema(t[i],o))return!1}}return!0}static \u0275fac=function(n){return new(n||e)(Be(hb),Be(lo))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})};var nKe=(e,t)=>({connected:e,disconnected:t});function rKe(e,t){if(e&1){let n=Qt();N(0,"button",1),Te("click",function(){Je(n);let i=H();return Ye(i.disconnect())}),J(1,"Disconnect"),$()}}function iKe(e,t){if(e&1&&(N(0,"div",7)(1,"strong"),J(2),$(),J(3),$()),e&2){let n=t.$implicit;R(2),vn("",n.type,":"),R(),vn(" ",n.message," ")}}function oKe(e,t){if(e&1&&(N(0,"div")(1,"div",5)(2,"h6"),J(3),$(),ot(4,iKe,4,2,"div",6),$()()),e&2){let n=H();R(3),vn("Notifications (",n.notifications.length,")"),R(),K("ngForOf",n.notifications)}}function sKe(e,t){e&1&&Vt(0,"img",8)}function aKe(e,t){if(e&1){let n=Qt();N(0,"button",1),Te("click",function(){Je(n);let i=H();return Ye(i.connect(i.mcpServer()))}),J(1,"Connect"),$(),wt(2,sKe,1,0,"img",8)}if(e&2){let n=H();R(2),xt(n.loader?2:-1)}}var Y$=class e{constructor(t,n,r){this.mcpService=t;this.storageService=n;this.elicitationService=r}isConnected=!1;notifications=[];currentElicitRequest=null;loader=!1;subscriptions=[];mcpServer=Y0("");openAiKey=Y0("");dialog=k(HI);mcp_props={title:"Connect to MCP Server",message:"Please enter the MCP server URL to connect.",placeholder:"Enter MCP server URL",confirmText:"Connect",cancelText:"Cancel",domain:this.mcpServer()||"",page:"mcp_server"};openai_props={title:"Connect to LLM",message:"Please enter the OpenAI API key to connect to the LLM service.",placeholder:"Enter OpenAI API key here",confirmText:"Connect",cancelText:"Cancel",domain:this.openAiKey()||"",page:"open_ai_token"};tools=new Ue;sendOpenAiKey=new Ue;ngOnInit(){this.subscriptions.push(this.mcpService.connectionStatus$.subscribe(t=>{console.log("MCP client component : ",t),this.isConnected=t}),this.mcpService.notifications$.subscribe(t=>{this.notifications.push(t)}),this.mcpService.elicitRequests$.subscribe(t=>{console.log("Request : ",t),this.currentElicitRequest=t})),this.mcpServer.set(this.storageService.getValueFromKey("mcp_server")||""),this.openAiKey.set(this.storageService.getValueFromKey("open_ai_token")||""),this.mcpServer()?setTimeout(()=>{this.connect(this.mcpServer())},200):this.openDomainDialog(this.mcp_props)}connect(t){return y(this,null,function*(){console.log("Connecting to MCP server : ",t);try{this.loader=!0,yield this.mcpService.connect(t),this.mcpService.tools$.subscribe(n=>{let r=this.mcpService.createOpenAiToolSchema(n);this.tools.emit(r)}),this.loader=!1}catch(n){console.error("Connection error:",n),this.loader=!1}})}disconnect(){return y(this,null,function*(){yield this.mcpService.disconnect()})}submitElicitForm(t){if(this.currentElicitRequest){let n=this.elicitationService.getCurrentRequestId();console.log("Elicitation id : ",n),this.mcpService.submitElicitResponse({action:"accept",content:t}),console.log("Server response : ",{action:"accept",content:t}),this.currentElicitRequest=null}}cancelElicit(){this.mcpService.submitElicitResponse({action:"cancel"}),this.currentElicitRequest=null}openDomainDialog(t){this.dialog.open(J$,{width:"500px",disableClose:!1,data:t}).afterClosed().subscribe(r=>{r.server&&(this.mcpServer.set(r.server),r.page==="mcp_server"?(this.storageService.saveValuesInKey("mcp_server",r.server),this.connect(r.server)):r.page==="open_ai_token"&&(this.openAiKey.set(r.server),this.storageService.saveValuesInKey("open_ai_token",r.server)))})}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.disconnect()}static \u0275fac=function(n){return new(n||e)(Ee(lo),Ee(Em),Ee(vu))};static \u0275cmp=Ve({type:e,selectors:[["app-mcp-client"]],inputs:{mcpServer:[1,"mcpServer"],openAiKey:[1,"openAiKey"]},outputs:{mcpServer:"mcpServerChange",openAiKey:"openAiKeyChange",tools:"tools",sendOpenAiKey:"sendOpenAiKey"},decls:12,vars:8,consts:[["disconnected",""],[3,"click"],[1,"status-indicator"],[1,"fas","fa-circle",3,"ngClass"],[4,"ngIf","ngIfElse"],[1,"notifications"],["class","notification",4,"ngFor","ngForOf"],[1,"notification"],["src","gif/Spinner.gif"]],template:function(n,r){if(n&1){let i=Qt();N(0,"button",1),Te("click",function(){return Je(i),r.mcp_props.domain=r.mcpServer(),Ye(r.openDomainDialog(r.mcp_props))}),J(1,"MCP config"),$(),N(2,"button",1),Te("click",function(){return Je(i),r.openai_props.domain=r.openAiKey(),Ye(r.openDomainDialog(r.openai_props))}),J(3,"Open Ai config"),$(),N(4,"div",2),Vt(5,"i",3),N(6,"h5"),J(7),$(),wt(8,rKe,2,0,"button"),$(),ot(9,oKe,5,2,"div",4)(10,aKe,3,1,"ng-template",null,0,Tl)}if(n&2){let i=Lo(11);R(5),K("ngClass",$2(5,nKe,r.isConnected,!r.isConnected)),R(2),sn(r.isConnected?"Connected to MCP Server":"Disconnected from MCP Server"),R(),xt(r.isConnected?8:-1),R(),K("ngIf",r.isConnected)("ngIfElse",i)}},dependencies:[ro,rw,Ml,ha,gu],styles:["[_nghost-%COMP%]{display:block;padding:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;max-width:1000px;margin:0 auto}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:15px}.connection-status[_ngcontent-%COMP%]{padding:10px;border-radius:5px;margin-bottom:20px;font-weight:700}.connected[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}.disconnected[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.elicit-form[_ngcontent-%COMP%]{background-color:#f8f9fa;border-radius:8px;padding:20px;margin-bottom:30px;box-shadow:0 2px 4px #0000001a}.elicit-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#3498db}.form-field[_ngcontent-%COMP%]{margin-bottom:15px}.form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500;color:#34495e}.required[_ngcontent-%COMP%]{color:#e74c3c}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #ced4da;border-radius:4px;font-size:16px;transition:border-color .15s ease-in-out}input[type=text][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 2px #3498db33}input[type=checkbox][_ngcontent-%COMP%]{margin-right:10px;transform:scale(1.2)}.field-description[_ngcontent-%COMP%]{font-size:.85em;color:#7f8c8d;margin-top:5px;font-style:italic}button[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;font-size:14px;cursor:pointer;margin-right:10px;transition:background-color .2s}button[type=submit][_ngcontent-%COMP%]{background-color:#2ecc71;color:#fff}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#27ae60}button[type=button][_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}button[type=button][_ngcontent-%COMP%]:hover{background-color:#c0392b}.notifications[_ngcontent-%COMP%]{background-color:#f8f9fa;border-radius:8px;padding:20px;box-shadow:0 2px 4px #0000001a}.notification[_ngcontent-%COMP%]{padding:10px;margin-bottom:10px;border-left:4px solid;background-color:#fff;border-radius:0 4px 4px 0}.notification[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{text-transform:capitalize}.notification[type=log][_ngcontent-%COMP%]{border-left-color:#3498db}.notification[type=error][_ngcontent-%COMP%]{border-left-color:#e74c3c}.notification[type=resource-change][_ngcontent-%COMP%], .notification[type=resource-list][_ngcontent-%COMP%]{border-left-color:#2ecc71}.connected[_ngcontent-%COMP%]{color:green}.disconnected[_ngcontent-%COMP%]{color:red}.status-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}@media (max-width: 768px){[_nghost-%COMP%]{padding:10px}.elicit-form[_ngcontent-%COMP%], .notifications[_ngcontent-%COMP%]{padding:15px}}"]})};var cKe=["determinateSpinner"];function lKe(e,t){if(e&1&&(Nu(),N(0,"svg",11),Vt(1,"circle",12),$()),e&2){let n=H();Yt("viewBox",n._viewBox()),R(),ls("stroke-dasharray",n._strokeCircumference(),"px")("stroke-dashoffset",n._strokeCircumference()/2,"px")("stroke-width",n._circleStrokeWidth(),"%"),Yt("r",n._circleRadius())}}var uKe=new X("mat-progress-spinner-default-options",{providedIn:"root",factory:dKe});function dKe(){return{diameter:rve}}var rve=100,pKe=10,ive=(()=>{class e{_elementRef=k(nt);_noopAnimations;get color(){return this._color||this._defaultColor}set color(n){this._color=n}_color;_defaultColor="primary";_determinateCircle;constructor(){let n=k(uKe),r=OI(),i=this._elementRef.nativeElement;this._noopAnimations=r==="di-disabled"&&!!n&&!n._forceAnimations,this.mode=i.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",!this._noopAnimations&&r==="reduced-motion"&&i.classList.add("mat-progress-spinner-reduced-motion"),n&&(n.color&&(this.color=this._defaultColor=n.color),n.diameter&&(this.diameter=n.diameter),n.strokeWidth&&(this.strokeWidth=n.strokeWidth))}mode;get value(){return this.mode==="determinate"?this._value:0}set value(n){this._value=Math.max(0,Math.min(100,n||0))}_value=0;get diameter(){return this._diameter}set diameter(n){this._diameter=n||0}_diameter=rve;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(n){this._strokeWidth=n||0}_strokeWidth;_circleRadius(){return(this.diameter-pKe)/2}_viewBox(){let n=this._circleRadius()*2+this.strokeWidth;return`0 0 ${n} ${n}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Ve({type:e,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(r,i){if(r&1&&Zn(cKe,5),r&2){let o;St(o=kt())&&(i._determinateCircle=o.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(r,i){r&2&&(Yt("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",i.mode==="determinate"?i.value:null)("mode",i.mode),zs("mat-"+i.color),ls("width",i.diameter,"px")("height",i.diameter,"px")("--mat-progress-spinner-size",i.diameter+"px")("--mat-progress-spinner-active-indicator-width",i.diameter+"px"),at("_mat-animation-noopable",i._noopAnimations)("mdc-circular-progress--indeterminate",i.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",Al],diameter:[2,"diameter","diameter",Al],strokeWidth:[2,"strokeWidth","strokeWidth",Al]},exportAs:["matProgressSpinner"],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(r,i){if(r&1&&(ot(0,lKe,2,8,"ng-template",null,0,Tl),N(2,"div",2,1),Nu(),N(4,"svg",3),Vt(5,"circle",4),$()(),E0(),N(6,"div",5)(7,"div",6)(8,"div",7),Kg(9,8),$(),N(10,"div",9),Kg(11,8),$(),N(12,"div",10),Kg(13,8),$()()()),r&2){let o=Lo(1);R(4),Yt("viewBox",i._viewBox()),R(),ls("stroke-dasharray",i._strokeCircumference(),"px")("stroke-dashoffset",i._strokeDashOffset(),"px")("stroke-width",i._circleStrokeWidth(),"%"),Yt("r",i._circleRadius()),R(4),K("ngTemplateOutlet",o),R(2),K("ngTemplateOutlet",o),R(2),K("ngTemplateOutlet",o)}},dependencies:[iw],styles:[`.mat-mdc-progress-spinner{--mat-progress-spinner-animation-multiplier: 1;display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mat-progress-spinner-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mat-progress-spinner-reduced-motion{--mat-progress-spinner-animation-multiplier: 1.25}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate calc(1568.2352941176ms*var(--mat-progress-spinner-animation-multiplier)) linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mat-progress-spinner-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin calc(1333ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin calc(1333ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate calc(5332ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}
`],encapsulation:2,changeDetection:0})}return e})();var Q$=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({imports:[dn]})}return e})();function fKe(e,t){if(e&1&&(N(0,"p",7),J(1),$()),e&2){let n=H(4);R(),sn(n.currentRequest.params.message)}}function hKe(e,t){if(e&1&&(N(0,"li"),J(1),$()),e&2){let n=t.$implicit;R(),sn(n)}}function gKe(e,t){if(e&1&&(N(0,"div",8)(1,"h4"),J(2,"Validation Errors"),$(),N(3,"ul"),ot(4,hKe,2,1,"li",9),$()()),e&2){let n=H(4);R(4),K("ngForOf",n.validationErrors)}}function _Ke(e,t){e&1&&(N(0,"span",26),J(1,"*"),$())}function yKe(e,t){if(e&1&&(_f(0),Vt(1,"input",27),yf()),e&2){let n=H(2).$implicit,r=H(3).ngIf,i=H(2);R(),K("id",n)("formControlName",n)("placeholder",i.getFieldExamples(r.schema,n))}}function vKe(e,t){e&1&&(N(0,"option",31),J(1,"(Skip)"),$())}function bKe(e,t){if(e&1&&(N(0,"option",32),J(1),$()),e&2){let n=t.$implicit;K("value",n),R(),vn(" ",n," ")}}function wKe(e,t){if(e&1&&(_f(0),N(1,"select",28),ot(2,vKe,2,0,"option",29)(3,bKe,2,2,"option",30),$(),yf()),e&2){let n=H(2).$implicit,r=H(3).ngIf,i=H(2);R(),K("id",n)("formControlName",n),R(),K("ngIf",!i.isFieldRequired(r.schema,n)),R(),K("ngForOf",i.getFieldOptions(r.schema,n))}}function xKe(e,t){if(e&1&&(N(0,"small",33),J(1),$()),e&2){let n=H(2).$implicit,r=H(3).ngIf,i=H(2);R(),vn(" ",i.getFieldDescription(r.schema,n)," ")}}function CKe(e,t){if(e&1&&(N(0,"div",21)(1,"label",22),J(2),ot(3,_Ke,2,0,"span",23),$(),N(4,"div",24),ot(5,yKe,2,3,"ng-container",1)(6,wKe,4,4,"ng-container",1)(7,xKe,2,1,"small",25),$()()),e&2){let n=H().$implicit,r=H(3).ngIf,i=H(2);R(),K("for",n),R(),vn(" ",i.getFieldTitle(r.schema,n)," "),R(),K("ngIf",i.isFieldRequired(r.schema,n)),R(2),K("ngIf",!i.getFieldOptions(r.schema,n).length),R(),K("ngIf",i.getFieldOptions(r.schema,n).length),R(),K("ngIf",i.getFieldDescription(r.schema,n))}}function EKe(e,t){e&1&&(N(0,"span",26),J(1,"*"),$())}function IKe(e,t){if(e&1&&(N(0,"div",21)(1,"label",22),J(2),ot(3,EKe,2,0,"span",23),$(),N(4,"div",24),Vt(5,"input",34),$()()),e&2){let n=H().$implicit,r=H(3).ngIf,i=H(2);R(),K("for",n),R(),vn(" ",i.getFieldTitle(r.schema,n)," "),R(),K("ngIf",i.isFieldRequired(r.schema,n)),R(2),K("id",n)("formControlName",n)}}function SKe(e,t){e&1&&(N(0,"span",26),J(1,"*"),$())}function kKe(e,t){if(e&1&&(N(0,"small",33),J(1),$()),e&2){let n=H(2).$implicit,r=H(3).ngIf,i=H(2);R(),vn(" ",i.getFieldDescription(r.schema,n)," ")}}function TKe(e,t){if(e&1&&(N(0,"div",21)(1,"label",22),J(2),ot(3,SKe,2,0,"span",23),$(),N(4,"div",24),Vt(5,"input",35),ot(6,kKe,2,1,"small",25),$()()),e&2){let n=H().$implicit,r=H(3).ngIf,i=H(2);R(),K("for",n),R(),vn(" ",i.getFieldTitle(r.schema,n)," "),R(),K("ngIf",i.isFieldRequired(r.schema,n)),R(2),K("id",n)("formControlName",n)("min",i.getFieldMin(r.schema,n))("max",i.getFieldMax(r.schema,n)),R(),K("ngIf",i.getFieldDescription(r.schema,n))}}function AKe(e,t){e&1&&(N(0,"span",26),J(1,"*"),$())}function OKe(e,t){if(e&1&&(N(0,"div",21)(1,"label",22),J(2),ot(3,AKe,2,0,"span",23),$(),N(4,"div",24),Vt(5,"input",36),$()()),e&2){let n=H().$implicit,r=H(3).ngIf,i=H(2);R(),K("for",n),R(),vn(" ",i.getFieldTitle(r.schema,n)," "),R(),K("ngIf",i.isFieldRequired(r.schema,n)),R(2),K("id",n)("formControlName",n)}}function MKe(e,t){e&1&&(N(0,"span",26),J(1,"*"),$())}function DKe(e,t){e&1&&(N(0,"option",31),J(1,"(Skip)"),$())}function PKe(e,t){if(e&1&&(N(0,"option",32),J(1),$()),e&2){let n=t.$implicit;K("value",n),R(),vn(" ",n," ")}}function RKe(e,t){if(e&1&&(N(0,"div",21)(1,"label",22),J(2),ot(3,MKe,2,0,"span",23),$(),N(4,"div",24)(5,"select",28),ot(6,DKe,2,0,"option",29)(7,PKe,2,2,"option",30),$()()()),e&2){let n=H().$implicit,r=H(3).ngIf,i=H(2);R(),K("for",n),R(),vn(" ",i.getFieldTitle(r.schema,n)," "),R(),K("ngIf",i.isFieldRequired(r.schema,n)),R(2),K("id",n)("formControlName",n),R(),K("ngIf",!i.isFieldRequired(r.schema,n)),R(),K("ngForOf",i.getFieldOptions(r.schema,n))}}function NKe(e,t){e&1&&(N(0,"span",26),J(1,"*"),$())}function $Ke(e,t){if(e&1&&(N(0,"div",37)(1,"div",24)(2,"label",38),Vt(3,"input",39),J(4),ot(5,NKe,2,0,"span",23),$()()()),e&2){let n=H().$implicit,r=H(3).ngIf,i=H(2);R(3),K("id",n)("formControlName",n),R(),vn(" ",i.getFieldTitle(r.schema,n)," "),R(),K("ngIf",i.isFieldRequired(r.schema,n))}}function LKe(e,t){e&1&&(N(0,"span",26),J(1,"*"),$())}function FKe(e,t){if(e&1&&(N(0,"div",56),J(1),$()),e&2){let n=H().index,r=H(2).$implicit,i=H(5);R(),vn(" ",i.getObjectItemError(r,n)," ")}}function jKe(e,t){if(e&1){let n=Qt();N(0,"div",45)(1,"div",46)(2,"div",47),Vt(3,"input",48),$(),N(4,"div",47),Vt(5,"input",49),$(),N(6,"div",47)(7,"select",50)(8,"option",51),J(9,"String"),$(),N(10,"option",52),J(11,"Number"),$(),N(12,"option",53),J(13,"Boolean"),$()()(),N(14,"div",47)(15,"button",54),Te("click",function(){let i=Je(n).index,o=H(2).$implicit,s=H(5);return Ye(s.removeObjectItem(o,i))}),J(16,"\u2212"),$()()(),ot(17,FKe,2,1,"div",55),$()}if(e&2){let n=t.index,r=H(2).$implicit,i=H(2).ngIf,o=H().ngIf,s=H(2);K("formGroupName",n),R(3),at("is-invalid",s.getObjectItemError(r,n)),R(12),K("disabled",s.getObjectFormArray(i,r).controls.length<=1&&s.isFieldRequired(o.schema,r)),R(2),K("ngIf",s.getObjectItemError(r,n))}}function zKe(e,t){if(e&1&&(N(0,"small",33),J(1),$()),e&2){let n=H(2).$implicit,r=H(3).ngIf,i=H(2);R(),vn(" ",i.getFieldDescription(r.schema,n)," ")}}function BKe(e,t){if(e&1){let n=Qt();N(0,"div",21)(1,"label",40),J(2),ot(3,LKe,2,0,"span",23),$(),N(4,"div",24)(5,"div",41),ot(6,jKe,18,5,"div",42),N(7,"div",43)(8,"button",44),Te("click",function(){Je(n);let i=H().$implicit,o=H(5);return Ye(o.addObjectItem(i))}),J(9," + Add Key/Value Pair "),$()()(),ot(10,zKe,2,1,"small",25),$()()}if(e&2){let n=H().$implicit,r=H(2).ngIf,i=H().ngIf,o=H(2);R(2),vn(" ",o.getFieldTitle(i.schema,n)," "),R(),K("ngIf",o.isFieldRequired(i.schema,n)),R(2),K("formArrayName",n),R(),K("ngForOf",o.getObjectFormArray(r,n).controls),R(4),K("ngIf",o.getFieldDescription(i.schema,n))}}function UKe(e,t){if(e&1){let n=Qt();N(0,"div",62)(1,"div",63),Vt(2,"input",64),N(3,"button",65),Te("click",function(){let i=Je(n).index,o=H(3).$implicit,s=H(5);return Ye(s.removeArrayItem(o,i))}),J(4," \u2212 "),$()()()}if(e&2){let n=t.index;R(2),K("formControlName",n)}}function VKe(e,t){if(e&1){let n=Qt();N(0,"div",60),ot(1,UKe,5,1,"div",61),N(2,"button",44),Te("click",function(){Je(n);let i=H(2).$implicit,o=H(5);return Ye(o.addArrayItem(i))}),J(3," + Add Item "),$()()}if(e&2){let n=H(2).$implicit,r=H(2).ngIf,i=H(3);R(),K("ngForOf",i.getFormArray(r,n).controls)}}function HKe(e,t){if(e&1){let n=Qt();N(0,"div",73)(1,"div",74),Vt(2,"input",75),N(3,"button",65),Te("click",function(){let i=Je(n).index,o=H().index,s=H(3).$implicit,a=H(5);return Ye(a.removeNestedArrayItem(s,o,i))}),J(4," \u2212 "),$()()()}if(e&2){let n=t.index;R(2),K("formControlName",n)}}function ZKe(e,t){if(e&1){let n=Qt();N(0,"div",69)(1,"div",70)(2,"h5"),J(3),$(),N(4,"button",65),Te("click",function(){let i=Je(n).index,o=H(3).$implicit,s=H(5);return Ye(s.removeNestedArrayRow(o,i))}),J(5," Remove Row "),$()(),N(6,"div",71),ot(7,HKe,5,1,"div",72),$(),N(8,"button",44),Te("click",function(){let i=Je(n).index,o=H(3).$implicit,s=H(5);return Ye(s.addNestedArrayItem(o,i))}),J(9," + Add Cell "),$()()}if(e&2){let n=t.index,r=H(3).$implicit,i=H(2).ngIf,o=H(3);K("formArrayName",n),R(3),vn("Row ",n+1),R(4),K("ngForOf",o.getNestedFormArray(i,r,n).controls)}}function qKe(e,t){if(e&1){let n=Qt();N(0,"div",66),ot(1,ZKe,10,3,"div",67),N(2,"button",68),Te("click",function(){Je(n);let i=H(2).$implicit,o=H(5);return Ye(o.addNestedArrayRow(i))}),J(3," + Add Row "),$()()}if(e&2){let n=H(2).$implicit,r=H(2).ngIf,i=H(3);R(),K("ngForOf",i.getFormArray(r,n).controls)}}function GKe(e,t){if(e&1&&(N(0,"div",21)(1,"label",40),J(2),$(),N(3,"div",24)(4,"div",57),ot(5,VKe,4,1,"div",58)(6,qKe,4,1,"div",59),$()()()),e&2){let n=H().$implicit,r=H(3).ngIf,i=H(2);R(2),sn(i.getFieldTitle(r.schema,n)),R(2),K("formArrayName",n),R(),K("ngIf",!i.isNestedArray(r.schema,n)),R(),K("ngIf",i.isNestedArray(r.schema,n))}}function WKe(e,t){if(e&1&&(N(0,"div",17),_f(1,18),ot(2,CKe,8,6,"div",19)(3,IKe,6,5,"div",19)(4,TKe,7,8,"div",19)(5,OKe,6,5,"div",19)(6,RKe,8,7,"div",19)(7,$Ke,6,4,"div",20)(8,BKe,11,5,"div",19)(9,GKe,7,4,"div",19),yf(),$()),e&2){let n=t.$implicit,r=H(3).ngIf,i=H(2);R(),K("ngSwitch",i.getFieldType(r.schema,n)),R(),K("ngSwitchCase","string"),R(),K("ngSwitchCase","password"),R(),K("ngSwitchCase","number"),R(),K("ngSwitchCase","integer"),R(),K("ngSwitchCase","enum"),R(),K("ngSwitchCase","boolean"),R(),K("ngSwitchCase","object"),R(),K("ngSwitchCase","array")}}function KKe(e,t){e&1&&(N(0,"div",76),Vt(1,"img",77),$())}function JKe(e,t){if(e&1){let n=Qt();N(0,"div")(1,"form",10),Te("ngSubmit",function(){Je(n);let i=H().ngIf,o=H(3);return Ye(o.onSubmit(i))}),N(2,"div",11),ot(3,WKe,10,9,"div",12),$(),N(4,"div",13)(5,"button",14),J(6," Submit "),$(),N(7,"button",15),Te("click",function(){Je(n);let i=H(4);return Ye(i.cancel())}),J(8," Cancel "),$()(),ot(9,KKe,2,0,"div",16),$()()}if(e&2){let n=H().ngIf,r=H().ngIf,i=H(2);R(),K("formGroup",n),R(2),K("ngForOf",i.getFieldNames(r.schema)),R(2),K("disabled",i.waitingForResponse),R(4),K("ngIf",i.waitingForResponse)}}function YKe(e,t){if(e&1){let n=Qt();N(0,"div",78)(1,"h3"),J(2,"Confirm Submission"),$(),N(3,"pre"),J(4),qn(5,"json"),$(),N(6,"div",79)(7,"button",80),Te("click",function(){Je(n);let i=H(4);return Ye(i.confirmSubmission(!0))}),J(8,"Confirm"),$(),N(9,"button",81),Te("click",function(){Je(n);let i=H(4);return Ye(i.onEdit())}),J(10,"Edit"),$(),N(11,"button",82),Te("click",function(){Je(n);let i=H(4);return Ye(i.confirmSubmission(!1))}),J(12,"Cancel"),$()()()}if(e&2){let n=H(4);R(4),sn(ur(5,1,n.maskSensitiveData(n.submittedData)))}}function QKe(e,t){if(e&1&&(N(0,"div")(1,"h2"),J(2),$(),ot(3,fKe,2,1,"p",4)(4,gKe,5,1,"div",5)(5,JKe,10,4,"div",1)(6,YKe,13,3,"div",6),$()),e&2){let n=H(3);R(2),sn(n.title),R(),K("ngIf",n.currentRequest==null||n.currentRequest.params==null?null:n.currentRequest.params.message),R(),K("ngIf",n.validationErrors.length),R(),K("ngIf",!n.showConfirmation),R(),K("ngIf",n.showConfirmation)}}function XKe(e,t){if(e&1&&(N(0,"div",3),ot(1,QKe,7,5,"div",1),qn(2,"async"),$()),e&2){let n=H(2);R(),K("ngIf",ur(2,1,n.form$))}}function e7e(e,t){if(e&1&&(N(0,"div"),ot(1,XKe,3,3,"div",2),qn(2,"async"),$()),e&2){let n=H(),r=Lo(2);R(),K("ngIf",ur(2,2,n.schema$))("ngIfElse",r)}}function t7e(e,t){e&1&&(N(0,"p",83),J(1,"No active elicitation request"),$())}var X$=class e{constructor(t,n,r,i){this.elicitationService=t;this.mcpService=n;this.fb=r;this.ngZone=i;this.form$=this.elicitationService.getCurrentForm(),this.schema$=this.elicitationService.getCurrentSchema()}tool=null;form$;schema$;currentRequest;validationErrors=[];showConfirmation=!1;submittedData;formAvailable=!1;waitingForResponse=!1;title="";sendToolResponse=new Ue;sendToolRequest=new Ue;subscriptions=[];form=new Ra({});ngOnChanges(t){console.log("UI update: ",t),!this.tool?.name&&this.title!="Elicitation Request"&&(this.formAvailable=!1,this.waitingForResponse=!1)}ngOnInit(){this.subscriptions.push(this.schema$.subscribe(t=>{this.waitingForResponse=!1,this.currentRequest=t?.schema,this.title=t?.title,this.formAvailable=!0})),this.subscriptions.push(this.form$.subscribe(t=>{t&&(this.form=t)}))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}confirmSubmission(t){this.waitingForResponse=!1,t?this.elicitationService.submitResponse({action:"accept",content:this.submittedData}):this.elicitationService.submitResponse({action:"decline"}),this.resetForm(),this.formAvailable=!1}onEdit(){this.showConfirmation=!1,this.formAvailable=!0}cancel(){this.title==="Elicitation Request"?this.elicitationService.submitResponse({action:"cancel"}):(console.log(this.title),this.sendToolResponse.emit({response:""})),this.resetForm(),this.formAvailable=!1}maskSensitiveData(t){if(t.password){let n=t.password,r=n.length>2?n.slice(0,3)+"****":"****";return b(m({},t),{password:r})}return t}transformObjectFields(t,n){if(!n||!n.properties)return t;let r=m({},t);return Object.keys(n.properties).forEach(i=>{let o=n.properties[i];if(o&&o.type==="object"){let s=r[i];if(!Array.isArray(s))return;let a={};s.forEach(c=>{if(!c||c.key===void 0||c.key===null)return;let u=c.value;if(c.valueType)switch(c.valueType){case"number":let d=Number(u);u=isNaN(d)?u:d;break;case"boolean":if(typeof u=="string"){let f=u.toLowerCase();u=f==="true"||f==="1"}else u=!!u;break;default:break}a[c.key]=u}),r[i]=a}}),r}onSubmit(t){if(t.invalid){this.validationErrors=this.getFormErrors(t);return}let n=this.transformObjectFields(t.value,this.currentRequest);if(console.log("Transformed : ",n),!this.elicitationService.validateAgainstSchema(n,this.currentRequest)){this.validationErrors=["Data does not match the required schema."];return}Object.keys(n).forEach(i=>{(n[i]===null||n[i]===void 0||n[i]==="")&&delete n[i]}),this.submittedData=n,this.title==="Tool test"?(this.sendToolRequest.emit({request:JSON.stringify(n)}),this.toolCall(n)):this.showConfirmation=!0}markFormGroupTouched(t){Object.keys(t.controls).forEach(n=>{let r=t.get(n);r instanceof Ra||r instanceof Hd?this.markFormGroupTouched(r):r?.markAsTouched()})}toolCall(t){return y(this,null,function*(){if(this.tool?.name){console.log("Tool name : ",this.tool.name);try{let r={};this.tool?.description=="long running task"?(this.waitingForResponse=!0,r=yield this.mcpService.longRunningTool(this.tool?.name,t),this.waitingForResponse=!1):(this.waitingForResponse=!0,r=yield this.mcpService.longRunningTool(this.tool?.name,t),this.waitingForResponse=!1);try{let i=JSON.parse(r.content[0].text);if(Object.keys(i).includes("layouts")){let n=i,{layouts:s}=n,a=se(n,["layouts"]);console.log("chek keys : ",Object.keys(a).length,Object.keys(a)),Object.keys(a).length?this.sendToolResponse.emit({response:"```json \n "+JSON.stringify(a,null,2)+"\n```",layouts:i.layouts}):this.sendToolResponse.emit({response:"",layouts:i.layouts})}else this.sendToolResponse.emit({response:r.content[0].text})}catch{this.sendToolResponse.emit({response:r.content[0].text})}this.resetForm(),this.formAvailable=!1}catch(r){this.ngZone.run(()=>{this.validationErrors=["Error occurred while calling the tool. Please try again."],console.log("Sothing went worng : ",r),this.waitingForResponse=!1,this.resetForm(),this.formAvailable=!1})}}else console.log("Tool name not received : ",this.tool?.name)})}getFormErrors(t){let n=[];return Object.keys(t.controls).forEach(r=>{let i=t.get(r)?.errors;i&&Object.keys(i).forEach(o=>{n.push(`${r}: ${this.getErrorMessage(o,i[o])}`)})}),n}getErrorMessage(t,n){switch(t){case"required":return"This field is required";case"minlength":return`Minimum length is ${n.requiredLength}`;case"maxlength":return`Maximum length is ${n.requiredLength}`;case"min":return`Minimum value is ${n.min}`;case"max":return`Maximum value is ${n.max}`;case"email":return"Invalid email format";default:return"Invalid value"}}resetForm(){this.validationErrors=[],this.showConfirmation=!1,this.submittedData=null}getFieldNames(t){return t?Object.keys(t.properties):[]}getFieldType(t,n){if(!t||!t.properties[n])return"string";let r=t.properties[n];return n==="password"?"password":r.enum?"enum":r.type||"string"}getFieldTitle(t,n){return t?.properties[n]?.title||n}getFieldDescription(t,n){return t?.properties[n]?.description||null}getFieldDefault(t,n){return t?.properties[n]?.default}getFieldMin(t,n){return t?.properties[n]?.minimum||null}getFieldMax(t,n){return t?.properties[n]?.maximum||null}getFieldOptions(t,n){return t?.properties[n]?.options||[]}getFieldExamples(t,n){return t?.properties[n]?.examples||""}isFieldRequired(t,n){return t?.required?.includes(n)||!1}getObjectValueTypeOptions(t,n){let r=t?.properties?.[n];if(!r)return[];let i=r.additionalProperties;if(!i)return[];let o=i.type;return o?Array.isArray(o)?o:[o]:[]}isNestedArray(t,n){return t?.properties[n]?.items?.type==="array"}getArrayItemType(t,n){let r=t?.properties[n];return this.isNestedArray(t,n)?r?.items?.items?.type==="integer"?"number":"text":r?.items?.type==="integer"?"number":"text"}getArrayPlaceholder(t,n){return`Enter ${t?.properties[n]?.items?.type||"value"}`}addArrayItem(t){this.form&&this.elicitationService.addArrayItemToForm(this.form,t)}removeArrayItem(t,n){this.form&&this.elicitationService.removeArrayItemFromForm(this.form,t,n)}addNestedArrayItem(t,n){this.form&&this.elicitationService.addNestedArrayItem(this.form,t,n)}removeNestedArrayItem(t,n,r){this.form&&this.elicitationService.removeNestedArrayItem(this.form,t,n,r)}getFormArray(t,n){return this.elicitationService.getFormArray(t,n)}getNestedFormArray(t,n,r){return this.elicitationService.getNestedFormArray(t,n,r)}addNestedArrayRow(t){this.form&&this.elicitationService.addNestedArrayRow(this.form,t)}removeNestedArrayRow(t,n){this.form&&this.elicitationService.removeNestedArrayRow(this.form,t,n)}getObjectFormArray(t,n){try{let r=t.get(n);if(r&&r instanceof Hd)return r;console.warn(`FormArray for ${n} not found, creating empty one`);let i=this.fb.array([]);return t.setControl(n,i),i}catch(r){return console.error("Error getting object form array:",r),this.fb.array([])}}addObjectItem(t){if(!this.form)return;let n=this.getObjectFormArray(this.form,t),r=this.fb.group({key:["",ii.required],value:[""],valueType:["string"]});n.push(r)}removeObjectItem(t,n){if(!this.form)return;let r=this.getObjectFormArray(this.form,t);n>=0&&n<r.length&&r.removeAt(n)}getObjectItemError(t,n){if(!this.form)return null;let r=this.getObjectFormArray(this.form,t);if(n<0||n>=r.length)return null;let o=r.at(n).get("key");if(o?.errors?.required&&o.touched)return"Key is required";let s=o?.value;return s&&s.trim()&&r.controls.map((c,u)=>u!==n?c.get("key")?.value:null).filter(c=>c&&c.trim()===s.trim()).length>0?"Duplicate key":null}static \u0275fac=function(n){return new(n||e)(Ee(vu),Ee(lo),Ee(hb),Ee(De))};static \u0275cmp=Ve({type:e,selectors:[["app-elicitation"]],inputs:{tool:"tool"},outputs:{sendToolResponse:"sendToolResponse",sendToolRequest:"sendToolRequest"},features:[br],decls:3,vars:1,consts:[["noRequest",""],[4,"ngIf"],["class","elicitation-container",4,"ngIf","ngIfElse"],[1,"elicitation-container"],["class","message",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","confirmation-dialog",4,"ngIf"],[1,"message"],[1,"alert","alert-danger"],[4,"ngFor","ngForOf"],[1,"form-container",3,"ngSubmit","formGroup"],[1,"form-fields"],["class","form-field-group",4,"ngFor","ngForOf"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],["class","loading-spinner",4,"ngIf"],[1,"form-field-group"],[3,"ngSwitch"],["class","field-wrapper",4,"ngSwitchCase"],["class","field-wrapper checkbox-wrapper",4,"ngSwitchCase"],[1,"field-wrapper"],[1,"field-label",3,"for"],["class","required",4,"ngIf"],[1,"field-input"],["class","field-description",4,"ngIf"],[1,"required"],["type","text",1,"form-control",3,"id","formControlName","placeholder"],[1,"form-control",3,"id","formControlName"],["value","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["value",""],[3,"value"],[1,"field-description"],["type","password",1,"form-control",3,"id","formControlName"],["type","number",1,"form-control",3,"id","formControlName","min","max"],["type","number",1,"form-control",3,"id","formControlName"],[1,"field-wrapper","checkbox-wrapper"],[1,"checkbox-label"],["type","checkbox",3,"id","formControlName"],[1,"field-label"],[1,"object-container",3,"formArrayName"],["class","object-item",3,"formGroupName",4,"ngFor","ngForOf"],[1,"object-actions"],["type","button",1,"btn","btn-add",3,"click"],[1,"object-item",3,"formGroupName"],[1,"object-inputs"],[1,"input-group"],["type","text","formControlName","key","placeholder","Key",1,"form-control","object-key"],["type","text","formControlName","value","placeholder","Value",1,"form-control","object-value"],["formControlName","valueType",1,"form-control","object-value-type"],["value","string"],["value","number"],["value","boolean"],["type","button","title","Remove this key/value pair",1,"btn","btn-remove",3,"click","disabled"],["class","error-message",4,"ngIf"],[1,"error-message"],[1,"array-container",3,"formArrayName"],["class","simple-array",4,"ngIf"],["class","nested-array",4,"ngIf"],[1,"simple-array"],["class","array-item",4,"ngFor","ngForOf"],[1,"array-item"],[1,"array-input-group"],["type","text",1,"form-control",3,"formControlName"],["type","button",1,"btn","btn-remove",3,"click"],[1,"nested-array"],["class","nested-row",3,"formArrayName",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"nested-row",3,"formArrayName"],[1,"row-header"],[1,"row-cells"],["class","cell-item",4,"ngFor","ngForOf"],[1,"cell-item"],[1,"cell-input-group"],["type","text","placeholder","Cell value",1,"form-control",3,"formControlName"],[1,"loading-spinner"],["src","gif/Spinner.gif","alt","Loading..."],[1,"confirmation-dialog"],[1,"confirmation-actions"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-warning",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"no-request"]],template:function(n,r){n&1&&ot(0,e7e,3,4,"div",1)(1,t7e,2,0,"ng-template",null,0,Tl),n&2&&K("ngIf",r.formAvailable)},dependencies:[gu,UN,ZN,qN,hu,CI,bI,fb,km,FN,Yq,Jq,gb,Tm,EI,VN,HN,ro,Ml,ha,ET,uz,Q$,dz,fz],styles:[`.elicitation-container[_ngcontent-%COMP%]{max-width:700px;margin:0 auto;padding:20px;background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.elicitation-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1f2937;margin-bottom:16px;font-size:24px;font-weight:600}.message[_ngcontent-%COMP%]{color:#6b7280;margin-bottom:20px;font-size:14px}.form-container[_ngcontent-%COMP%]{width:100%}.form-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.form-field-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.field-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr;gap:16px;align-items:start}.checkbox-wrapper[_ngcontent-%COMP%]{align-items:center}.field-label[_ngcontent-%COMP%]{font-weight:500;color:#374151;font-size:14px;line-height:1.5;padding-top:8px}.field-input[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.form-control[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;transition:all .2s ease;background-color:#fff}.form-control[_ngcontent-%COMP%]:focus{border-color:#3b82f6;outline:none;box-shadow:0 0 0 3px #3b82f61a}select.form-control[_ngcontent-%COMP%]{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");background-position:right 12px center;background-repeat:no-repeat;background-size:16px;padding-right:40px;appearance:none}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-weight:500;color:#374151;cursor:pointer;margin:0}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;margin:0}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s ease;text-decoration:none;display:inline-flex;align-items:center;justify-content:center;gap:6px}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#2563eb}.btn-secondary[_ngcontent-%COMP%]{background-color:#6b7280;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#4b5563}.btn-success[_ngcontent-%COMP%]{background-color:#10b981;color:#fff}.btn-warning[_ngcontent-%COMP%]{background-color:#f59e0b;color:#fff}.btn-danger[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff}.btn-add[_ngcontent-%COMP%]{background-color:#10b981;color:#fff;font-size:13px;padding:6px 12px}.btn-remove[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff;font-size:13px;padding:6px 10px;min-width:36px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:32px;padding-top:20px;border-top:1px solid #e5e7eb}.object-container[_ngcontent-%COMP%], .array-container[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:6px;padding:16px;background-color:#f9fafb}.object-item[_ngcontent-%COMP%]{margin-bottom:12px;padding-bottom:12px;border-bottom:1px solid #e5e7eb}.object-item[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0}.object-inputs[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:start}.object-inputs[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{flex:1}.array-item[_ngcontent-%COMP%], .nested-row[_ngcontent-%COMP%]{margin-bottom:12px}.array-input-group[_ngcontent-%COMP%], .cell-input-group[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.array-input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .cell-input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{flex:1}.nested-row[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:6px;padding:16px;background-color:#fff}.row-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.row-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;color:#374151;font-size:14px}.row-cells[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-bottom:12px}.required[_ngcontent-%COMP%]{color:#ef4444;margin-left:2px}.field-description[_ngcontent-%COMP%]{color:#6b7280;font-size:12px;line-height:1.4;margin-top:4px}.error-message[_ngcontent-%COMP%]{color:#ef4444;font-size:12px;margin-top:4px}.is-invalid[_ngcontent-%COMP%]{border-color:#ef4444}.alert[_ngcontent-%COMP%]{padding:16px;margin-bottom:20px;border-radius:6px;border:1px solid transparent}.alert-danger[_ngcontent-%COMP%]{background-color:#fef2f2;border-color:#fecaca;color:#dc2626}.alert-danger[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-size:16px}.alert-danger[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:20px}.confirmation-dialog[_ngcontent-%COMP%]{margin-top:24px;padding:20px;background:#f9fafb;border-radius:8px;border:1px solid #e5e7eb}.confirmation-dialog[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;color:#1f2937}.confirmation-actions[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:20px}.loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:20px}.no-request[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#6b7280;font-size:16px}pre[_ngcontent-%COMP%]{background:#fff;padding:16px;border-radius:6px;overflow-x:auto;font-size:12px;line-height:1.4;border:1px solid #e5e7eb;margin:0}@media (max-width: 768px){.elicitation-container[_ngcontent-%COMP%]{padding:16px;margin:8px}.field-wrapper[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:8px}.field-label[_ngcontent-%COMP%]{padding-top:0}.form-actions[_ngcontent-%COMP%], .object-inputs[_ngcontent-%COMP%], .confirmation-actions[_ngcontent-%COMP%]{flex-direction:column}.row-header[_ngcontent-%COMP%]{flex-direction:column;gap:8px;align-items:stretch}}.form-control[_ngcontent-%COMP%]:focus-visible, .btn[_ngcontent-%COMP%]:focus-visible{outline:2px solid #3b82f6;outline-offset:2px}.object-container[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:8px;padding:16px;background-color:#f9fafb;margin-bottom:8px}.object-item[_ngcontent-%COMP%]{margin-bottom:16px;padding:16px;background:#fff;border:1px solid #e5e7eb;border-radius:6px;transition:all .2s ease}.object-item[_ngcontent-%COMP%]:hover{border-color:#d1d5db;box-shadow:0 1px 3px #0000000d}.object-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.object-inputs[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 120px auto;gap:12px;align-items:start}.input-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;font-weight:500;margin-bottom:2px}.object-key[_ngcontent-%COMP%]{min-width:120px}.object-value[_ngcontent-%COMP%]{min-width:150px}.object-value-type[_ngcontent-%COMP%]{min-width:120px}.object-actions[_ngcontent-%COMP%]{margin-top:16px;padding-top:16px;border-top:1px solid #e5e7eb;text-align:left}.btn-remove[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff;border:none;border-radius:6px;padding:8px 12px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;min-width:44px;height:38px;display:flex;align-items:center;justify-content:center}.btn-remove[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#dc2626;transform:translateY(-1px)}.btn-remove[_ngcontent-%COMP%]:disabled{background-color:#9ca3af;cursor:not-allowed;transform:none}.btn-add[_ngcontent-%COMP%]{background-color:#10b981;color:#fff;border:none;border-radius:6px;padding:10px 16px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.btn-add[_ngcontent-%COMP%]:hover{background-color:#059669;transform:translateY(-1px)}@media (max-width: 1024px){.object-inputs[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 100px auto;gap:10px}}@media (max-width: 768px){.object-inputs[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}.object-item[_ngcontent-%COMP%]{padding:12px}.input-group[_ngcontent-%COMP%]{width:100%}.object-key[_ngcontent-%COMP%], .object-value[_ngcontent-%COMP%], .object-value-type[_ngcontent-%COMP%]{min-width:auto;width:100%}.btn-remove[_ngcontent-%COMP%]{width:100%;height:44px;margin-top:8px}}@media (max-width: 480px){.object-container[_ngcontent-%COMP%], .object-item[_ngcontent-%COMP%]{padding:12px}.object-inputs[_ngcontent-%COMP%]{gap:8px}}.object-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:1px solid #d1d5db;border-radius:6px;padding:8px 12px;font-size:14px;transition:all .2s ease;background-color:#fff}.object-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#3b82f6;outline:none;box-shadow:0 0 0 3px #3b82f61a}.object-container[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 0 0 3px #ef44441a}.object-item[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .2s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}.object-inputs[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]:first-child:before{content:"Key";font-size:12px;color:#6b7280;font-weight:500;margin-bottom:4px;display:block}.object-inputs[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]:nth-child(2):before{content:"Value";font-size:12px;color:#6b7280;font-weight:500;margin-bottom:4px;display:block}.object-inputs[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]:nth-child(3):before{content:"Type";font-size:12px;color:#6b7280;font-weight:500;margin-bottom:4px;display:block}`]})};function n7e(e,t){e&1&&cs(0,"div",2)}var r7e=new X("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var sve=(()=>{class e{_elementRef=k(nt);_ngZone=k(De);_changeDetectorRef=k(Tr);_renderer=k(rr);_cleanupTransitionEnd;constructor(){let n=OI(),r=k(r7e,{optional:!0});this._isNoopAnimation=n==="di-disabled",n==="reduced-motion"&&this._elementRef.nativeElement.classList.add("mat-progress-bar-reduced-motion"),r&&(r.color&&(this.color=this._defaultColor=r.color),this.mode=r.mode||this.mode)}_isNoopAnimation;get color(){return this._color||this._defaultColor}set color(n){this._color=n}_color;_defaultColor="primary";get value(){return this._value}set value(n){this._value=ove(n||0),this._changeDetectorRef.markForCheck()}_value=0;get bufferValue(){return this._bufferValue||0}set bufferValue(n){this._bufferValue=ove(n||0),this._changeDetectorRef.markForCheck()}_bufferValue=0;animationEnd=new Ue;get mode(){return this._mode}set mode(n){this._mode=n,this._changeDetectorRef.markForCheck()}_mode="determinate";ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._cleanupTransitionEnd=this._renderer.listen(this._elementRef.nativeElement,"transitionend",this._transitionendHandler)})}ngOnDestroy(){this._cleanupTransitionEnd?.()}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}_transitionendHandler=n=>{this.animationEnd.observers.length===0||!n.target||!n.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))};static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Ve({type:e,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(r,i){r&2&&(Yt("aria-valuenow",i._isIndeterminate()?null:i.value)("mode",i.mode),zs("mat-"+i.color),at("_mat-animation-noopable",i._isNoopAnimation)("mdc-linear-progress--animation-ready",!i._isNoopAnimation)("mdc-linear-progress--indeterminate",i._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",Al],bufferValue:[2,"bufferValue","bufferValue",Al],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(r,i){r&1&&(yo(0,"div",0),cs(1,"div",1),wt(2,n7e,1,0,"div",2),$o(),yo(3,"div",3),cs(4,"span",4),$o(),yo(5,"div",5),cs(6,"span",4),$o()),r&2&&(R(),ls("flex-basis",i._getBufferBarFlexBasis()),R(),xt(i.mode==="buffer"?2:-1),R(),ls("transform",i._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{--mat-progress-bar-animation-multiplier: 1;display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mat-progress-bar-reduced-motion{--mat-progress-bar-animation-multiplier: 2}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mat-progress-bar-track-height, 4px),var(--mat-progress-bar-active-indicator-height, 4px))}@media(forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mat-progress-bar-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mat-progress-bar-track-height, 4px);border-radius:var(--mat-progress-bar-track-shape, var(--mat-sys-corner-none))}.mdc-linear-progress__buffer-dots{background-image:radial-gradient(circle, var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant)) calc(var(--mat-progress-bar-track-height, 4px) / 2), transparent 0);background-repeat:repeat-x;background-size:calc(calc(var(--mat-progress-bar-track-height, 4px) / 2)*5);background-position:left;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering calc(250ms*var(--mat-progress-bar-animation-multiplier)) infinite linear}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse calc(250ms*var(--mat-progress-bar-animation-multiplier)) infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mat-progress-bar-track-height, 4px) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}
`],encapsulation:2,changeDetection:0})}return e})();function ove(e,t=0,n=100){return Math.max(t,Math.min(n,e))}var ave=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=it({type:e});static \u0275inj=tt({imports:[dn]})}return e})();var o7e=["chatComponent"];function s7e(e,t){if(e&1&&(N(0,"span"),J(1),$()),e&2){let n=H(2);R(),aT(" Tool ",n.currentToolIndex," of ",n.totalTools," (",n.progressPercentage,"%) ")}}function a7e(e,t){e&1&&(N(0,"span"),J(1," Processing... "),$())}function c7e(e,t){if(e&1){let n=Qt();N(0,"div",19),Vt(1,"mat-spinner",20),$(),N(2,"button",21),Te("click",function(){Je(n);let i=H(2);return Ye(i.cancelOperation())}),N(3,"mat-icon"),J(4,"cancel"),$()()}}function l7e(e,t){if(e&1&&(N(0,"div",11)(1,"div",17),wt(2,s7e,2,3,"span"),wt(3,a7e,2,0,"span"),$(),Vt(4,"mat-progress-bar",18),wt(5,c7e,5,0),$()),e&2){let n=H();R(2),xt(n.totalTools>0?2:-1),R(),xt(n.totalTools===0?3:-1),R(),K("value",n.progressPercentage),R(),xt(n.isLoading?5:-1)}}var eL=class e{constructor(t,n,r,i,o){this.mcpService=t;this.openAIService=n;this.storageService=r;this.mcpElicitationService=i;this.cdr=o;this.checkScreenSize(),this.initializeSidebarState(),this.mcpService.mcpServerInstructions$.subscribe(c=>{this.system_prompt=c||"You are a helpful assistant. Use tools *only* when needed.         If you already have the answer, reply normally instead of calling a tool again."});let s=this.mcpService.streaming$.subscribe(c=>{if(!this.destroyed){if(c.status&&c.status==="completed"){this.streamingContent+=c.message;let u=this.chatMessages.length-1;this.chatMessages[u]=this.checkToolCall(this.streamingContent),this.cdr.detectChanges(),this.streamingContent=""}else if(c.status&&c.status==="started")this.streamingContent+=c.message,this.chatMessages.push({role:"bot",content:this.streamingContent,timestamp:new Date});else if(c.status&&c.status==="in_progress"){this.streamingContent+=c.message;let u=this.chatMessages.length-1;this.chatMessages[u].content=this.streamingContent,this.cdr.detectChanges()}}});this.activeSubscriptions.push(s),this.human_prompt="{input}";let a=this.storageService.getValueFromKey("open_ai_token")||"";this.openAiKey.set(a),a&&this.InitializeLLM(a)}chatComponent;messages=[];title="AI powered chatbot";isSidebarOpen=!1;isMobileScreen=!1;isLoading=!1;currentToolIndex=0;totalTools=0;progressPercentage=0;chatMessages=[{role:"bot",content:"Hello! How can I assist you today?",timestamp:new Date}];opentAI_functions;llm_model;llm_with_tools;errorMessage="";system_prompt="";human_prompt="";llm_runnable;selectedTool=null;streamingContent="";page=Pn("");openAiKey=Y0("");dialog=k(HI);inputMessages=[];destroyed=!1;activeSubscriptions=[];activeStream=null;formSource=null;ngOnDestroy(){this.destroyed=!0,this.activeSubscriptions.forEach(t=>{t&&typeof t.unsubscribe=="function"&&t.unsubscribe()}),this.activeSubscriptions=[],this.activeStream&&typeof this.activeStream.return=="function"&&this.activeStream.return()}updateProgress(t,n){this.destroyed||(this.currentToolIndex=t,this.totalTools=n,this.progressPercentage=n>0?Math.round(t/n*100):0,this.cdr.detectChanges())}setLoadingState(t){this.destroyed||(this.isLoading=t,this.cdr.detectChanges())}onResize(){this.checkScreenSize(),this.initializeSidebarState()}checkScreenSize(){this.isMobileScreen=window.innerWidth<=768}initializeSidebarState(){this.isMobileScreen?this.isSidebarOpen=!1:this.isSidebarOpen=!0}checkToolCall(t){let n={role:"bot",content:t,timestamp:new Date};try{let r=JSON.parse(t);if(Object.keys(r).includes("function_call")){let o=r.function_call;o.name==="table_layout_tool"&&(n={role:"bot",content:"",layouts:[{type:"table",data:o.parameters}],timestamp:new Date})}return n}catch{return n}}InitializeLLM(t,n=[]){let r={openAIKey:t};if(this.llm_model=this.openAIService.getOpenAiClient(r),n.length>0)try{this.llm_with_tools=this.openAIService.openAImodels("langchain",this.llm_model,n,this.system_prompt,this.human_prompt),this.llm_runnable=Er.from([this.llm_with_tools.overall_prompt,this.llm_with_tools.model_with_tools])}catch{}else this.llm_with_tools=this.openAIService.openAImodels("langchain",this.llm_model,[],this.system_prompt,this.human_prompt),this.llm_runnable=Er.from([this.llm_with_tools.overall_prompt,this.llm_with_tools.model_with_out_tools])}toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}toolsList(t){this.InitializeLLM(this.openAiKey(),t)}testTool(t){t?(this.selectedTool=t,this.formSource="tool-test",this.isMobileScreen&&(this.isSidebarOpen=!0),this.mcpElicitationService.createFormFromSchema(t.inputSchema,"Tool test")):(this.selectedTool=null,this.formSource=null)}tool_response(t){this.isMobileScreen&&(this.isSidebarOpen=!1),(t.response||t.layouts)&&this.chatMessages.push({role:"bot",content:t.response,layouts:t.layouts,timestamp:new Date})}tool_request(t){this.isMobileScreen&&(this.isSidebarOpen=!1),this.chatMessages.push({role:"user",content:t.request,timestamp:new Date})}onChatFormSubmitted(t){return y(this,null,function*(){console.log("tool call : ",t.toolName,t.params);let n=yield this.mcpService.callTool(t.toolName,t.params),r=Array.isArray(n?.content)?n.content.map(i=>i.text).join(`
`):JSON.stringify(n);console.log("form response : ",r),this.chatMessages.push({role:"bot",content:r,timestamp:new Date}),this.cdr.detectChanges(),this.formSource=null})}shouldShowMainElicitation(){return this.selectedTool!==null&&this.formSource!=="chat"}agentWorkflow(t){return y(this,null,function*(){if(this.destroyed)return;let n=null;this.inputMessages.push({role:"user",content:t}),this.chatMessages.push({role:"user",content:t,timestamp:new Date}),console.log("all input message : ",this.inputMessages);try{let c=!0,u=0,d=new Set;for(this.setLoadingState(!0),this.updateProgress(0,1);c&&u<20&&!this.destroyed;){u++;let f=new AbortController;try{let h=yield this.llm_runnable.stream({input:this.inputMessages},{signal:f.signal});this.activeStream=h,n=null,this.chatMessages.push({role:"bot",content:"",timestamp:new Date});try{for(var r=ue(h),i,o,s;i=!(o=yield r.next()).done;i=!1){let v=o.value;if(this.destroyed){f.abort();break}if(v instanceof Cr){n=n?n.concat(v):v;let x=this.chatMessages.length-1;this.chatMessages[x].content=n.content,this.cdr.detectChanges(),setTimeout(()=>{this.destroyed||this.chatComponent.scrollToBottom()},0)}}}catch{s=[o]}finally{try{i&&(o=r.return)&&(yield o.call(r))}finally{if(s)throw s[0]}}}catch(h){if(h.name==="AbortError"){console.log("Stream aborted due to component destruction");return}throw h}finally{this.activeStream=null}if(this.destroyed)break;let g=n?.tool_calls??[];if(g.length===0){c=!1;break}this.updateProgress(0,g.length);for(let h=0;h<g.length&&!this.destroyed;h++){let v=g[h],x=v.name,E=v.args;if(d.has(x)){console.warn(`Skipping repeated tool: ${x}`),c=!1;break}d.add(x),this.updateProgress(h+1,g.length),this.setLoadingState(!0);try{let C=yield this.mcpService.callTool(x,E);this.setLoadingState(!1);let S=Array.isArray(C?.content)?C.content.map(A=>A.text).join(`
`):JSON.stringify(C);try{let A=JSON.parse(C.content[0].text);if(Object.keys(A).includes("layouts")){let a=A,{layouts:F}=a,B=se(a,["layouts"]);this.chatMessages.push({role:"bot",content:"```json \n "+JSON.stringify(B,null,2)+"\n```",layouts:A.layouts,timestamp:new Date}),console.log("check : ",this.chatMessages)}else this.chatMessages.push({role:"bot",content:"```json \n "+S+"\n```",timestamp:new Date})}catch{this.chatMessages.push({role:"bot",content:S,timestamp:new Date})}this.inputMessages.push({role:"assistant",type:"function_call",id:v.id,name:x,arguments:JSON.stringify(E)}),this.inputMessages.push({role:"tool",type:"function_call_output",id:v.id,output:S})}catch(C){console.error(`Tool ${x} error:`,C),this.chatMessages.push({role:"bot",content:`Error executing tool ${x}: ${C}`,timestamp:new Date}),c=!1;break}}console.log("input messages : ",this.inputMessages)}}catch(c){if(this.destroyed)return;console.error("Agent workflow error:",c),this.chatMessages.push({role:"bot",content:"Sorry, something went wrong while processing your request.",timestamp:new Date})}finally{this.destroyed||(this.setLoadingState(!1),this.updateProgress(0,0))}})}cancelOperation(){console.log("Cancelling ongoing operation..."),this.destroyed=!0,this.isLoading=!1,this.progressPercentage=0,this.currentToolIndex=0,this.totalTools=0,this.cdr.detectChanges(),this.chatMessages.push({role:"bot",content:"Operation cancelled by user.",timestamp:new Date}),setTimeout(()=>{this.destroyed=!1},100)}hasLayoutMessages(){return this.chatMessages.some(t=>t.layouts&&(this.isTableLayout(t.layouts)||this.isButtonLayout(t.layouts)||this.isMapLayout(t.layouts)))}isTableLayout(t){return t.some(n=>n.type==="table")}isButtonLayout(t){return t.some(n=>n.type==="button")}isMapLayout(t){return t.some(n=>n.type==="map")}static \u0275fac=function(n){return new(n||e)(Ee(lo),Ee(cb),Ee(Em),Ee(vu),Ee(Tr))};static \u0275cmp=Ve({type:e,selectors:[["app-root"]],viewQuery:function(n,r){if(n&1&&Zn(o7e,5),n&2){let i;St(i=kt())&&(r.chatComponent=i.first)}},hostBindings:function(n,r){n&1&&Te("resize",function(){return r.onResize()},i2)},inputs:{openAiKey:[1,"openAiKey"]},outputs:{openAiKey:"openAiKeyChange"},features:[En([lo,vu])],decls:21,vars:8,consts:[["sidenav",""],["chatComponent",""],[1,"app-container"],[1,"sidenav-container"],[1,"sidebar",3,"openedChange","mode","opened"],[3,"tools","sendOpenAiKey"],[3,"sendToolRequest","sendToolResponse","tool"],[1,"content"],[1,"header"],["mat-icon-button","",1,"menu-button",3,"click"],[1,"title"],[1,"progress-container"],[1,"chat-container"],[1,"chat-content-wrapper"],[3,"formSubmittedFromChat","messages"],[1,"input-container"],[3,"sendMessage","sendTool"],[1,"progress-info"],["mode","determinate",1,"progress-bar",3,"value"],[1,"loader-spinner"],["diameter","20"],["mat-icon-button","","color","warn","title","Cancel operation",1,"cancel-button",3,"click"]],template:function(n,r){if(n&1){let i=Qt();N(0,"div",2)(1,"mat-sidenav-container",3)(2,"mat-sidenav",4,0),vp("openedChange",function(s){return Je(i),vf(r.isSidebarOpen,s)||(r.isSidebarOpen=s),Ye(s)}),N(4,"app-mcp-client",5),Te("tools",function(s){return Je(i),Ye(r.toolsList(s))})("sendOpenAiKey",function(s){return Je(i),Ye(r.InitializeLLM(s))}),$(),N(5,"app-elicitation",6),Te("sendToolRequest",function(s){return Je(i),Ye(r.tool_request(s))})("sendToolResponse",function(s){return Je(i),Ye(r.tool_response(s))}),$(),Vt(6,"app-sidebar"),$(),N(7,"mat-sidenav-content",7)(8,"div",8)(9,"button",9),Te("click",function(){return Je(i),Ye(r.toggleSidebar())}),N(10,"mat-icon"),J(11,"menu"),$()(),N(12,"h1",10),J(13),$(),wt(14,l7e,6,4,"div",11),$(),N(15,"div",12)(16,"div",13)(17,"app-chatbot",14,1),Te("formSubmittedFromChat",function(s){return Je(i),Ye(r.onChatFormSubmitted(s))}),$()(),N(19,"div",15)(20,"app-input-box",16),Te("sendMessage",function(s){return Je(i),Ye(r.agentWorkflow(s))})("sendTool",function(s){return Je(i),Ye(r.testTool(s))}),$()()()()()()}n&2&&(R(2),K("mode",r.isMobileScreen?"over":"side"),yp("opened",r.isSidebarOpen),R(3),K("tool",r.selectedTool),R(8),sn(r.title),R(),xt(r.isLoading||r.progressPercentage>0?14:-1),R(2),at("full-width-layout",r.hasLayoutMessages()),R(),K("messages",r.chatMessages))},dependencies:[w$,V$,Z$,Vye,R9,Uye,G$,Y$,qye,N9,Nb,Rb,Gye,H$,X$,ave,sve,Q$,ive],styles:[".app-container[_ngcontent-%COMP%]{height:100vh;display:flex;background-color:#f7f7f8;font-family:Segoe UI,Roboto,sans-serif}.progress-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-left:auto;padding:0 16px}.progress-info[_ngcontent-%COMP%]{font-size:12px;color:#666;min-width:120px;text-align:right}.progress-bar[_ngcontent-%COMP%]{width:150px;height:8px}.loader-spinner[_ngcontent-%COMP%]{display:flex;align-items:center}@media (max-width: 768px){.progress-container[_ngcontent-%COMP%]{flex-direction:column;gap:8px;margin-left:0}.progress-info[_ngcontent-%COMP%]{text-align:center;min-width:auto}.progress-bar[_ngcontent-%COMP%]{width:120px}}.sidenav-container[_ngcontent-%COMP%]{flex:1;display:flex;height:100vh;width:100%;overflow:hidden}.sidebar[_ngcontent-%COMP%]{width:400px;background-color:#fff;display:flex;flex-direction:column;height:100%;border-right:1px solid #e5e5e6;transition:transform .3s ease,width .3s ease}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{width:100vw;max-width:100%}}@media (max-width: 480px){.sidebar[_ngcontent-%COMP%]{width:85vw}}.content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;height:100vh;width:100%;min-width:0;overflow:hidden}.header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:8px 16px;background-color:#fff;border-bottom:1px solid #eaeaea;z-index:2;min-height:64px;box-sizing:border-box;flex-shrink:0}.menu-button[_ngcontent-%COMP%]{margin-right:16px;color:#666;background:none;border:none;cursor:pointer;flex-shrink:0}.title[_ngcontent-%COMP%]{flex:1;font-size:1.25rem;font-weight:500;color:#333;margin:0 16px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media (max-width: 480px){.header[_ngcontent-%COMP%]{padding:8px 12px;min-height:50px}.title[_ngcontent-%COMP%]{font-size:1rem}.menu-button[_ngcontent-%COMP%]{margin-right:12px;transform:scale(.9)}}.chat-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;width:100%;margin:0 auto;position:relative;overflow:hidden;min-height:0}.chat-content-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;width:100%;padding:12px 12px 70px;scrollbar-width:none;-ms-overflow-style:none;margin:0 auto;position:relative;overflow-y:auto;box-sizing:border-box;min-height:0}.chat-content-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}@media (max-width: 768px){.chat-content-wrapper[_ngcontent-%COMP%]{padding:8px 8px 60px}}@media (max-width: 480px){.chat-content-wrapper[_ngcontent-%COMP%]{padding:6px 6px 60px}}.input-container[_ngcontent-%COMP%]{position:sticky;bottom:0;left:0;right:0;background-color:#f7f7f8;padding:12px 16px;border-top:1px solid #eaeaea;z-index:10;box-sizing:border-box;flex-shrink:0}@media (max-width: 768px){.input-container[_ngcontent-%COMP%]{padding:10px 12px}}@media (max-width: 480px){.input-container[_ngcontent-%COMP%]{padding:8px 10px;min-height:auto}}@media (max-width: 480px){  .message-container{margin-bottom:12px!important}  .message-bubble{padding:10px 14px!important;font-size:.9rem!important;line-height:1.3!important}  app-input-box{display:block}  .input-box-container{min-height:auto!important}  .input-field{min-height:44px!important;max-height:44px!important;font-size:.9rem!important}  .send-button{min-height:44px!important;min-width:44px!important;transform:scale(.9)}}  .message-container.layout-message{max-width:100%!important;width:100%!important;margin-left:0!important;margin-right:0!important;padding-left:0!important;padding-right:0!important}  .layout-message .message-content{width:100%!important;max-width:100%!important}.full-width-layout[_ngcontent-%COMP%]{max-width:100%!important;width:100%!important;margin:0!important;padding:0!important}app-chatbot[_ngcontent-%COMP%]{width:100%;display:block;flex:1;min-height:0}@media (max-width: 768px){.menu-button[_ngcontent-%COMP%]{min-width:44px;min-height:44px}.sidebar[_ngcontent-%COMP%]{width:100vw!important;max-width:90%!important}.mat-drawer-backdrop.mat-drawer-shown[_ngcontent-%COMP%]{background-color:#00000080}}@media (min-width: 769px){.sidebar[_ngcontent-%COMP%]{width:400px!important}}@media (max-width: 480px){*[_ngcontent-%COMP%]{margin:0;padding:0}body[_ngcontent-%COMP%]{font-size:14px}.chat-content-wrapper[_ngcontent-%COMP%]{height:1px}}@supports (padding: max(0px)){.header[_ngcontent-%COMP%], .input-container[_ngcontent-%COMP%]{padding-left:max(12px,env(safe-area-inset-left));padding-right:max(12px,env(safe-area-inset-right))}.input-container[_ngcontent-%COMP%]{padding-bottom:max(8px,env(safe-area-inset-bottom))}}*[_ngcontent-%COMP%]{max-width:100%;box-sizing:border-box}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;overflow:hidden}.app-container[_ngcontent-%COMP%], .sidenav-container[_ngcontent-%COMP%], .content[_ngcontent-%COMP%], .chat-container[_ngcontent-%COMP%]{height:100%}"],changeDetection:0})};Iz(eL,xX).catch(e=>console.error(e));
