import{a as LF,b as FW,c as LW,d as jW,e as BW,f as VW,g as zW,h as $W,i as lS,j as UW,k as cS,l as su,m as HW,n as qW}from"./chunk-6F5EVHXN.js";import{$a as om,$b as SW,A as QN,Aa as cF,Ab as xW,B as KI,Ba as Qd,Bb as CW,C as YI,Ca as or,Cb as DF,D as QI,Da as uF,Db as EW,Ea as gb,Eb as Bi,Fa as dF,Fb as TF,Ga as hF,Gb as kF,Ha as ou,Hb as aS,Ia as fF,Ib as AF,Ja as pF,Jb as $t,Ka as mF,Kb as Di,La as gF,Lb as MF,Ma as _F,Mb as PF,N as Nn,Na as Xd,Nb as Zn,O as ru,Oa as Oo,Ob as vb,P as XN,Pa as vF,Pb as ri,Q as Yd,Qa as zs,Qb as OF,R as JN,Ra as Jd,Rb as RF,S as tm,Sa as Er,Sb as sr,Ta as Ro,Tb as bb,U as $n,Ua as fi,Ub as NF,V as Wr,Va as rm,Vb as FF,W as nm,Wa as nS,Wb as jF,X as Po,Xa as Ba,Xb as BF,Y as XI,Ya as bF,Z as eF,Za as yF,Zb as VF,_a as eh,_b as IW,a as b,ab as ts,ac as DW,b as S,ba as tF,bb as wF,bc as TW,c as Be,cb as th,cc as kW,d as dt,db as xF,dc as AW,e as yn,ea as jl,eb as CF,ec as MW,f as GI,fa as nF,fb as EF,fc as PW,g as ji,gb as IF,gc as OW,h as E,hb as SF,hc as RW,i as ge,ia as JI,ib as iS,ic as NW,j as yt,ja as eS,jb as sm,jc as uS,k as Mo,kb as gW,l as ze,lb as po,m as Dt,ma as iF,mb as rS,n as C,na as fb,nb as am,o as db,oa as rF,ob as _W,p as hb,pa as pb,pb as lm,q as qN,qa as Vs,qb as Bl,r as WN,ra as mb,rb as vW,s as GN,sa as oF,sb as oS,t as ja,tb as bW,u as ZN,ub as yW,v as ZI,va as sF,vb as wW,w as KN,wa as im,wb as $s,x as YN,xa as tS,xb as _b,ya as aF,yb as sS,za as lF,zb as cm}from"./chunk-DA4UIROH.js";var N$=dt((kw,R$)=>{"use strict";(function(n,e){typeof kw=="object"&&typeof R$<"u"?e(kw):typeof define=="function"&&define.amd?define(["exports"],e):e(n.URI=n.URI||{})})(kw,function(n){"use strict";function e(){for(var N=arguments.length,R=Array(N),$=0;$<N;$++)R[$]=arguments[$];if(R.length>1){R[0]=R[0].slice(0,-1);for(var J=R.length-1,te=1;te<J;++te)R[te]=R[te].slice(1,-1);return R[J]=R[J].slice(1),R.join("")}else return R[0]}function t(N){return"(?:"+N+")"}function i(N){return N===void 0?"undefined":N===null?"null":Object.prototype.toString.call(N).split(" ").pop().split("]").shift().toLowerCase()}function r(N){return N.toUpperCase()}function o(N){return N!=null?N instanceof Array?N:typeof N.length!="number"||N.split||N.setInterval||N.call?[N]:Array.prototype.slice.call(N):[]}function s(N,R){var $=N;if(R)for(var J in R)$[J]=R[J];return $}function l(N){var R="[A-Za-z]",$="[\\x0D]",J="[0-9]",te="[\\x22]",Ie=e(J,"[A-Fa-f]"),xt="[\\x0A]",Mt="[\\x20]",Jt=t(t("%[EFef]"+Ie+"%"+Ie+Ie+"%"+Ie+Ie)+"|"+t("%[89A-Fa-f]"+Ie+"%"+Ie+Ie)+"|"+t("%"+Ie+Ie)),Qn="[\\:\\/\\?\\#\\[\\]\\@]",Ht="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",On=e(Qn,Ht),Xn=N?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Sn=N?"[\\uE000-\\uF8FF]":"[]",Qt=e(R,J,"[\\-\\.\\_\\~]",Xn),vn=t(R+e(R,J,"[\\+\\-\\.]")+"*"),sn=t(t(Jt+"|"+e(Qt,Ht,"[\\:]"))+"*"),Ma=t(t("25[0-5]")+"|"+t("2[0-4]"+J)+"|"+t("1"+J+J)+"|"+t("[1-9]"+J)+"|"+J),yr=t(t("25[0-5]")+"|"+t("2[0-4]"+J)+"|"+t("1"+J+J)+"|"+t("0?[1-9]"+J)+"|0?0?"+J),Ur=t(yr+"\\."+yr+"\\."+yr+"\\."+yr),hn=t(Ie+"{1,4}"),Xi=t(t(hn+"\\:"+hn)+"|"+Ur),Fi=t(t(hn+"\\:")+"{6}"+Xi),ao=t("\\:\\:"+t(hn+"\\:")+"{5}"+Xi),Rs=t(t(hn)+"?\\:\\:"+t(hn+"\\:")+"{4}"+Xi),wr=t(t(t(hn+"\\:")+"{0,1}"+hn)+"?\\:\\:"+t(hn+"\\:")+"{3}"+Xi),Lt=t(t(t(hn+"\\:")+"{0,2}"+hn)+"?\\:\\:"+t(hn+"\\:")+"{2}"+Xi),bn=t(t(t(hn+"\\:")+"{0,3}"+hn)+"?\\:\\:"+hn+"\\:"+Xi),Pa=t(t(t(hn+"\\:")+"{0,4}"+hn)+"?\\:\\:"+Xi),lo=t(t(t(hn+"\\:")+"{0,5}"+hn)+"?\\:\\:"+hn),co=t(t(t(hn+"\\:")+"{0,6}"+hn)+"?\\:\\:"),uo=t([Fi,ao,Rs,wr,Lt,bn,Pa,lo,co].join("|")),mt=t(t(Qt+"|"+Jt)+"+"),Rn=t(uo+"\\%25"+mt),Qo=t(uo+t("\\%25|\\%(?!"+Ie+"{2})")+mt),$d=t("[vV]"+Ie+"+\\."+e(Qt,Ht,"[\\:]")+"+"),Hr=t("\\["+t(Qo+"|"+uo+"|"+$d)+"\\]"),Gv=t(t(Jt+"|"+e(Qt,Ht))+"*"),Ns=t(Hr+"|"+Ur+"(?!"+Gv+")|"+Gv),ho=t(J+"*"),Gn=t(t(sn+"@")+"?"+Ns+t("\\:"+ho)+"?"),fo=t(Jt+"|"+e(Qt,Ht,"[\\:\\@]")),eu=t(fo+"*"),Ol=t(fo+"+"),Gp=t(t(Jt+"|"+e(Qt,Ht,"[\\@]"))+"+"),xr=t(t("\\/"+eu)+"*"),Fs=t("\\/"+t(Ol+xr)+"?"),tu=t(Gp+xr),Oa=t(Ol+xr),Ls="(?!"+fo+")",Zv=t(xr+"|"+Fs+"|"+tu+"|"+Oa+"|"+Ls),Xo=t(t(fo+"|"+e("[\\/\\?]",Sn))+"*"),Rl=t(t(fo+"|[\\/\\?]")+"*"),Ud=t(t("\\/\\/"+Gn+xr)+"|"+Fs+"|"+Oa+"|"+Ls),OI=t(vn+"\\:"+Ud+t("\\?"+Xo)+"?"+t("\\#"+Rl)+"?"),Ct=t(t("\\/\\/"+Gn+xr)+"|"+Fs+"|"+tu+"|"+Ls),To=t(Ct+t("\\?"+Xo)+"?"+t("\\#"+Rl)+"?"),Dn=t(OI+"|"+To),RI=t(vn+"\\:"+Ud+t("\\?"+Xo)+"?"),Kv="^("+vn+")\\:"+t(t("\\/\\/("+t("("+sn+")@")+"?("+Ns+")"+t("\\:("+ho+")")+"?)")+"?("+xr+"|"+Fs+"|"+Oa+"|"+Ls+")")+t("\\?("+Xo+")")+"?"+t("\\#("+Rl+")")+"?$",Yv="^(){0}"+t(t("\\/\\/("+t("("+sn+")@")+"?("+Ns+")"+t("\\:("+ho+")")+"?)")+"?("+xr+"|"+Fs+"|"+tu+"|"+Ls+")")+t("\\?("+Xo+")")+"?"+t("\\#("+Rl+")")+"?$",Qv="^("+vn+")\\:"+t(t("\\/\\/("+t("("+sn+")@")+"?("+Ns+")"+t("\\:("+ho+")")+"?)")+"?("+xr+"|"+Fs+"|"+Oa+"|"+Ls+")")+t("\\?("+Xo+")")+"?$",Nl="^"+t("\\#("+Rl+")")+"?$",Xv="^"+t("("+sn+")@")+"?("+Ns+")"+t("\\:("+ho+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",R,J,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",Qt,Ht),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",Qt,Ht),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",Qt,Ht),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",Qt,Ht),"g"),NOT_QUERY:new RegExp(e("[^\\%]",Qt,Ht,"[\\:\\@\\/\\?]",Sn),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",Qt,Ht,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",Qt,Ht),"g"),UNRESERVED:new RegExp(Qt,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",Qt,On),"g"),PCT_ENCODED:new RegExp(Jt,"g"),IPV4ADDRESS:new RegExp("^("+Ur+")$"),IPV6ADDRESS:new RegExp("^\\[?("+uo+")"+t(t("\\%25|\\%(?!"+Ie+"{2})")+"("+mt+")")+"?\\]?$")}}var c=l(!1),d=l(!0),f=function(){function N(R,$){var J=[],te=!0,Ie=!1,xt=void 0;try{for(var Mt=R[Symbol.iterator](),Jt;!(te=(Jt=Mt.next()).done)&&(J.push(Jt.value),!($&&J.length===$));te=!0);}catch(Qn){Ie=!0,xt=Qn}finally{try{!te&&Mt.return&&Mt.return()}finally{if(Ie)throw xt}}return J}return function(R,$){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return N(R,$);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=function(N){if(Array.isArray(N)){for(var R=0,$=Array(N.length);R<N.length;R++)$[R]=N[R];return $}else return Array.from(N)},g=2147483647,m=36,_=1,y=26,w=38,I=700,k=72,O=128,j="-",q=/^xn--/,V=/[^\0-\x7E]/,re=/[\x2E\u3002\uFF0E\uFF61]/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},X=m-_,se=Math.floor,ue=String.fromCharCode;function me(N){throw new RangeError(P[N])}function G(N,R){for(var $=[],J=N.length;J--;)$[J]=R(N[J]);return $}function Y(N,R){var $=N.split("@"),J="";$.length>1&&(J=$[0]+"@",N=$[1]),N=N.replace(re,".");var te=N.split("."),Ie=G(te,R).join(".");return J+Ie}function ne(N){for(var R=[],$=0,J=N.length;$<J;){var te=N.charCodeAt($++);if(te>=55296&&te<=56319&&$<J){var Ie=N.charCodeAt($++);(Ie&64512)==56320?R.push(((te&1023)<<10)+(Ie&1023)+65536):(R.push(te),$--)}else R.push(te)}return R}var W=function(R){return String.fromCodePoint.apply(String,p(R))},he=function(R){return R-48<10?R-22:R-65<26?R-65:R-97<26?R-97:m},ie=function(R,$){return R+22+75*(R<26)-(($!=0)<<5)},be=function(R,$,J){var te=0;for(R=J?se(R/I):R>>1,R+=se(R/$);R>X*y>>1;te+=m)R=se(R/X);return se(te+(X+1)*R/(R+w))},xe=function(R){var $=[],J=R.length,te=0,Ie=O,xt=k,Mt=R.lastIndexOf(j);Mt<0&&(Mt=0);for(var Jt=0;Jt<Mt;++Jt)R.charCodeAt(Jt)>=128&&me("not-basic"),$.push(R.charCodeAt(Jt));for(var Qn=Mt>0?Mt+1:0;Qn<J;){for(var Ht=te,On=1,Xn=m;;Xn+=m){Qn>=J&&me("invalid-input");var Sn=he(R.charCodeAt(Qn++));(Sn>=m||Sn>se((g-te)/On))&&me("overflow"),te+=Sn*On;var Qt=Xn<=xt?_:Xn>=xt+y?y:Xn-xt;if(Sn<Qt)break;var vn=m-Qt;On>se(g/vn)&&me("overflow"),On*=vn}var sn=$.length+1;xt=be(te-Ht,sn,Ht==0),se(te/sn)>g-Ie&&me("overflow"),Ie+=se(te/sn),te%=sn,$.splice(te++,0,Ie)}return String.fromCodePoint.apply(String,$)},ut=function(R){var $=[];R=ne(R);var J=R.length,te=O,Ie=0,xt=k,Mt=!0,Jt=!1,Qn=void 0;try{for(var Ht=R[Symbol.iterator](),On;!(Mt=(On=Ht.next()).done);Mt=!0){var Xn=On.value;Xn<128&&$.push(ue(Xn))}}catch(Qo){Jt=!0,Qn=Qo}finally{try{!Mt&&Ht.return&&Ht.return()}finally{if(Jt)throw Qn}}var Sn=$.length,Qt=Sn;for(Sn&&$.push(j);Qt<J;){var vn=g,sn=!0,Ma=!1,yr=void 0;try{for(var Ur=R[Symbol.iterator](),hn;!(sn=(hn=Ur.next()).done);sn=!0){var Xi=hn.value;Xi>=te&&Xi<vn&&(vn=Xi)}}catch(Qo){Ma=!0,yr=Qo}finally{try{!sn&&Ur.return&&Ur.return()}finally{if(Ma)throw yr}}var Fi=Qt+1;vn-te>se((g-Ie)/Fi)&&me("overflow"),Ie+=(vn-te)*Fi,te=vn;var ao=!0,Rs=!1,wr=void 0;try{for(var Lt=R[Symbol.iterator](),bn;!(ao=(bn=Lt.next()).done);ao=!0){var Pa=bn.value;if(Pa<te&&++Ie>g&&me("overflow"),Pa==te){for(var lo=Ie,co=m;;co+=m){var uo=co<=xt?_:co>=xt+y?y:co-xt;if(lo<uo)break;var mt=lo-uo,Rn=m-uo;$.push(ue(ie(uo+mt%Rn,0))),lo=se(mt/Rn)}$.push(ue(ie(lo,0))),xt=be(Ie,Fi,Qt==Sn),Ie=0,++Qt}}}catch(Qo){Rs=!0,wr=Qo}finally{try{!ao&&Lt.return&&Lt.return()}finally{if(Rs)throw wr}}++Ie,++te}return $.join("")},nt=function(R){return Y(R,function($){return q.test($)?xe($.slice(4).toLowerCase()):$})},Je=function(R){return Y(R,function($){return V.test($)?"xn--"+ut($):$})},Ee={version:"2.1.0",ucs2:{decode:ne,encode:W},decode:xe,encode:ut,toASCII:Je,toUnicode:nt},tn={};function M(N){var R=N.charCodeAt(0),$=void 0;return R<16?$="%0"+R.toString(16).toUpperCase():R<128?$="%"+R.toString(16).toUpperCase():R<2048?$="%"+(R>>6|192).toString(16).toUpperCase()+"%"+(R&63|128).toString(16).toUpperCase():$="%"+(R>>12|224).toString(16).toUpperCase()+"%"+(R>>6&63|128).toString(16).toUpperCase()+"%"+(R&63|128).toString(16).toUpperCase(),$}function A(N){for(var R="",$=0,J=N.length;$<J;){var te=parseInt(N.substr($+1,2),16);if(te<128)R+=String.fromCharCode(te),$+=3;else if(te>=194&&te<224){if(J-$>=6){var Ie=parseInt(N.substr($+4,2),16);R+=String.fromCharCode((te&31)<<6|Ie&63)}else R+=N.substr($,6);$+=6}else if(te>=224){if(J-$>=9){var xt=parseInt(N.substr($+4,2),16),Mt=parseInt(N.substr($+7,2),16);R+=String.fromCharCode((te&15)<<12|(xt&63)<<6|Mt&63)}else R+=N.substr($,9);$+=9}else R+=N.substr($,3),$+=3}return R}function le(N,R){function $(J){var te=A(J);return te.match(R.UNRESERVED)?te:J}return N.scheme&&(N.scheme=String(N.scheme).replace(R.PCT_ENCODED,$).toLowerCase().replace(R.NOT_SCHEME,"")),N.userinfo!==void 0&&(N.userinfo=String(N.userinfo).replace(R.PCT_ENCODED,$).replace(R.NOT_USERINFO,M).replace(R.PCT_ENCODED,r)),N.host!==void 0&&(N.host=String(N.host).replace(R.PCT_ENCODED,$).toLowerCase().replace(R.NOT_HOST,M).replace(R.PCT_ENCODED,r)),N.path!==void 0&&(N.path=String(N.path).replace(R.PCT_ENCODED,$).replace(N.scheme?R.NOT_PATH:R.NOT_PATH_NOSCHEME,M).replace(R.PCT_ENCODED,r)),N.query!==void 0&&(N.query=String(N.query).replace(R.PCT_ENCODED,$).replace(R.NOT_QUERY,M).replace(R.PCT_ENCODED,r)),N.fragment!==void 0&&(N.fragment=String(N.fragment).replace(R.PCT_ENCODED,$).replace(R.NOT_FRAGMENT,M).replace(R.PCT_ENCODED,r)),N}function H(N){return N.replace(/^0*(.*)/,"$1")||"0"}function qe(N,R){var $=N.match(R.IPV4ADDRESS)||[],J=f($,2),te=J[1];return te?te.split(".").map(H).join("."):N}function gt(N,R){var $=N.match(R.IPV6ADDRESS)||[],J=f($,3),te=J[1],Ie=J[2];if(te){for(var xt=te.toLowerCase().split("::").reverse(),Mt=f(xt,2),Jt=Mt[0],Qn=Mt[1],Ht=Qn?Qn.split(":").map(H):[],On=Jt.split(":").map(H),Xn=R.IPV4ADDRESS.test(On[On.length-1]),Sn=Xn?7:8,Qt=On.length-Sn,vn=Array(Sn),sn=0;sn<Sn;++sn)vn[sn]=Ht[sn]||On[Qt+sn]||"";Xn&&(vn[Sn-1]=qe(vn[Sn-1],R));var Ma=vn.reduce(function(Fi,ao,Rs){if(!ao||ao==="0"){var wr=Fi[Fi.length-1];wr&&wr.index+wr.length===Rs?wr.length++:Fi.push({index:Rs,length:1})}return Fi},[]),yr=Ma.sort(function(Fi,ao){return ao.length-Fi.length})[0],Ur=void 0;if(yr&&yr.length>1){var hn=vn.slice(0,yr.index),Xi=vn.slice(yr.index+yr.length);Ur=hn.join(":")+"::"+Xi.join(":")}else Ur=vn.join(":");return Ie&&(Ur+="%"+Ie),Ur}else return N}var dn=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Yt="".match(/(){0}/)[1]===void 0;function pt(N){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$={},J=R.iri!==!1?d:c;R.reference==="suffix"&&(N=(R.scheme?R.scheme+":":"")+"//"+N);var te=N.match(dn);if(te){Yt?($.scheme=te[1],$.userinfo=te[3],$.host=te[4],$.port=parseInt(te[5],10),$.path=te[6]||"",$.query=te[7],$.fragment=te[8],isNaN($.port)&&($.port=te[5])):($.scheme=te[1]||void 0,$.userinfo=N.indexOf("@")!==-1?te[3]:void 0,$.host=N.indexOf("//")!==-1?te[4]:void 0,$.port=parseInt(te[5],10),$.path=te[6]||"",$.query=N.indexOf("?")!==-1?te[7]:void 0,$.fragment=N.indexOf("#")!==-1?te[8]:void 0,isNaN($.port)&&($.port=N.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?te[4]:void 0)),$.host&&($.host=gt(qe($.host,J),J)),$.scheme===void 0&&$.userinfo===void 0&&$.host===void 0&&$.port===void 0&&!$.path&&$.query===void 0?$.reference="same-document":$.scheme===void 0?$.reference="relative":$.fragment===void 0?$.reference="absolute":$.reference="uri",R.reference&&R.reference!=="suffix"&&R.reference!==$.reference&&($.error=$.error||"URI is not a "+R.reference+" reference.");var Ie=tn[(R.scheme||$.scheme||"").toLowerCase()];if(!R.unicodeSupport&&(!Ie||!Ie.unicodeSupport)){if($.host&&(R.domainHost||Ie&&Ie.domainHost))try{$.host=Ee.toASCII($.host.replace(J.PCT_ENCODED,A).toLowerCase())}catch(xt){$.error=$.error||"Host's domain name can not be converted to ASCII via punycode: "+xt}le($,c)}else le($,J);Ie&&Ie.parse&&Ie.parse($,R)}else $.error=$.error||"URI can not be parsed.";return $}function Ei(N,R){var $=R.iri!==!1?d:c,J=[];return N.userinfo!==void 0&&(J.push(N.userinfo),J.push("@")),N.host!==void 0&&J.push(gt(qe(String(N.host),$),$).replace($.IPV6ADDRESS,function(te,Ie,xt){return"["+Ie+(xt?"%25"+xt:"")+"]"})),(typeof N.port=="number"||typeof N.port=="string")&&(J.push(":"),J.push(String(N.port))),J.length?J.join(""):void 0}var nn=/^\.\.?\//,Ii=/^\/\.(\/|$)/,Io=/^\/\.\.(\/|$)/,zn=/^\/?(?:.|\n)*?(?=\/|$)/;function Si(N){for(var R=[];N.length;)if(N.match(nn))N=N.replace(nn,"");else if(N.match(Ii))N=N.replace(Ii,"/");else if(N.match(Io))N=N.replace(Io,"/"),R.pop();else if(N==="."||N==="..")N="";else{var $=N.match(zn);if($){var J=$[0];N=N.slice(J.length),R.push(J)}else throw new Error("Unexpected dot segment condition")}return R.join("")}function di(N){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$=R.iri?d:c,J=[],te=tn[(R.scheme||N.scheme||"").toLowerCase()];if(te&&te.serialize&&te.serialize(N,R),N.host&&!$.IPV6ADDRESS.test(N.host)){if(R.domainHost||te&&te.domainHost)try{N.host=R.iri?Ee.toUnicode(N.host):Ee.toASCII(N.host.replace($.PCT_ENCODED,A).toLowerCase())}catch(Mt){N.error=N.error||"Host's domain name can not be converted to "+(R.iri?"Unicode":"ASCII")+" via punycode: "+Mt}}le(N,$),R.reference!=="suffix"&&N.scheme&&(J.push(N.scheme),J.push(":"));var Ie=Ei(N,R);if(Ie!==void 0&&(R.reference!=="suffix"&&J.push("//"),J.push(Ie),N.path&&N.path.charAt(0)!=="/"&&J.push("/")),N.path!==void 0){var xt=N.path;!R.absolutePath&&(!te||!te.absolutePath)&&(xt=Si(xt)),Ie===void 0&&(xt=xt.replace(/^\/\//,"/%2F")),J.push(xt)}return N.query!==void 0&&(J.push("?"),J.push(N.query)),N.fragment!==void 0&&(J.push("#"),J.push(N.fragment)),J.join("")}function Yi(N,R){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},J=arguments[3],te={};return J||(N=pt(di(N,$),$),R=pt(di(R,$),$)),$=$||{},!$.tolerant&&R.scheme?(te.scheme=R.scheme,te.userinfo=R.userinfo,te.host=R.host,te.port=R.port,te.path=Si(R.path||""),te.query=R.query):(R.userinfo!==void 0||R.host!==void 0||R.port!==void 0?(te.userinfo=R.userinfo,te.host=R.host,te.port=R.port,te.path=Si(R.path||""),te.query=R.query):(R.path?(R.path.charAt(0)==="/"?te.path=Si(R.path):((N.userinfo!==void 0||N.host!==void 0||N.port!==void 0)&&!N.path?te.path="/"+R.path:N.path?te.path=N.path.slice(0,N.path.lastIndexOf("/")+1)+R.path:te.path=R.path,te.path=Si(te.path)),te.query=R.query):(te.path=N.path,R.query!==void 0?te.query=R.query:te.query=N.query),te.userinfo=N.userinfo,te.host=N.host,te.port=N.port),te.scheme=N.scheme),te.fragment=R.fragment,te}function So(N,R,$){var J=s({scheme:"null"},$);return di(Yi(pt(N,J),pt(R,J),J,!0),J)}function Qi(N,R){return typeof N=="string"?N=di(pt(N,R),R):i(N)==="object"&&(N=pt(di(N,R),R)),N}function Xc(N,R,$){return typeof N=="string"?N=di(pt(N,$),$):i(N)==="object"&&(N=di(N,$)),typeof R=="string"?R=di(pt(R,$),$):i(R)==="object"&&(R=di(R,$)),N===R}function Vd(N,R){return N&&N.toString().replace(!R||!R.iri?c.ESCAPE:d.ESCAPE,M)}function oo(N,R){return N&&N.toString().replace(!R||!R.iri?c.PCT_ENCODED:d.PCT_ENCODED,A)}var kl={scheme:"http",domainHost:!0,parse:function(R,$){return R.host||(R.error=R.error||"HTTP URIs must have a host."),R},serialize:function(R,$){var J=String(R.scheme).toLowerCase()==="https";return(R.port===(J?443:80)||R.port==="")&&(R.port=void 0),R.path||(R.path="/"),R}},Wp={scheme:"https",domainHost:kl.domainHost,parse:kl.parse,serialize:kl.serialize};function Bv(N){return typeof N.secure=="boolean"?N.secure:String(N.scheme).toLowerCase()==="wss"}var Al={scheme:"ws",domainHost:!0,parse:function(R,$){var J=R;return J.secure=Bv(J),J.resourceName=(J.path||"/")+(J.query?"?"+J.query:""),J.path=void 0,J.query=void 0,J},serialize:function(R,$){if((R.port===(Bv(R)?443:80)||R.port==="")&&(R.port=void 0),typeof R.secure=="boolean"&&(R.scheme=R.secure?"wss":"ws",R.secure=void 0),R.resourceName){var J=R.resourceName.split("?"),te=f(J,2),Ie=te[0],xt=te[1];R.path=Ie&&Ie!=="/"?Ie:void 0,R.query=xt,R.resourceName=void 0}return R.fragment=void 0,R}},zd={scheme:"wss",domainHost:Al.domainHost,parse:Al.parse,serialize:Al.serialize},Vv={},II=!0,Ml="[A-Za-z0-9\\-\\.\\_\\~"+(II?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",Do="[0-9A-Fa-f]",SI=t(t("%[EFef]"+Do+"%"+Do+Do+"%"+Do+Do)+"|"+t("%[89A-Fa-f]"+Do+"%"+Do+Do)+"|"+t("%"+Do+Do)),zv="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",$v="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Uv=e($v,'[\\"\\\\]'),DI="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",TI=new RegExp(Ml,"g"),Pl=new RegExp(SI,"g"),kI=new RegExp(e("[^]",zv,"[\\.]",'[\\"]',Uv),"g"),Hv=new RegExp(e("[^]",Ml,DI),"g"),AI=Hv;function Jc(N){var R=A(N);return R.match(TI)?R:N}var qv={scheme:"mailto",parse:function(R,$){var J=R,te=J.to=J.path?J.path.split(","):[];if(J.path=void 0,J.query){for(var Ie=!1,xt={},Mt=J.query.split("&"),Jt=0,Qn=Mt.length;Jt<Qn;++Jt){var Ht=Mt[Jt].split("=");switch(Ht[0]){case"to":for(var On=Ht[1].split(","),Xn=0,Sn=On.length;Xn<Sn;++Xn)te.push(On[Xn]);break;case"subject":J.subject=oo(Ht[1],$);break;case"body":J.body=oo(Ht[1],$);break;default:Ie=!0,xt[oo(Ht[0],$)]=oo(Ht[1],$);break}}Ie&&(J.headers=xt)}J.query=void 0;for(var Qt=0,vn=te.length;Qt<vn;++Qt){var sn=te[Qt].split("@");if(sn[0]=oo(sn[0]),$.unicodeSupport)sn[1]=oo(sn[1],$).toLowerCase();else try{sn[1]=Ee.toASCII(oo(sn[1],$).toLowerCase())}catch(Ma){J.error=J.error||"Email address's domain name can not be converted to ASCII via punycode: "+Ma}te[Qt]=sn.join("@")}return J},serialize:function(R,$){var J=R,te=o(R.to);if(te){for(var Ie=0,xt=te.length;Ie<xt;++Ie){var Mt=String(te[Ie]),Jt=Mt.lastIndexOf("@"),Qn=Mt.slice(0,Jt).replace(Pl,Jc).replace(Pl,r).replace(kI,M),Ht=Mt.slice(Jt+1);try{Ht=$.iri?Ee.toUnicode(Ht):Ee.toASCII(oo(Ht,$).toLowerCase())}catch(Qt){J.error=J.error||"Email address's domain name can not be converted to "+($.iri?"Unicode":"ASCII")+" via punycode: "+Qt}te[Ie]=Qn+"@"+Ht}J.path=te.join(",")}var On=R.headers=R.headers||{};R.subject&&(On.subject=R.subject),R.body&&(On.body=R.body);var Xn=[];for(var Sn in On)On[Sn]!==Vv[Sn]&&Xn.push(Sn.replace(Pl,Jc).replace(Pl,r).replace(Hv,M)+"="+On[Sn].replace(Pl,Jc).replace(Pl,r).replace(AI,M));return Xn.length&&(J.query=Xn.join("&")),J}},MI=/^([^\:]+)\:(.*)/,Wv={scheme:"urn",parse:function(R,$){var J=R.path&&R.path.match(MI),te=R;if(J){var Ie=$.scheme||te.scheme||"urn",xt=J[1].toLowerCase(),Mt=J[2],Jt=Ie+":"+($.nid||xt),Qn=tn[Jt];te.nid=xt,te.nss=Mt,te.path=void 0,Qn&&(te=Qn.parse(te,$))}else te.error=te.error||"URN can not be parsed.";return te},serialize:function(R,$){var J=$.scheme||R.scheme||"urn",te=R.nid,Ie=J+":"+($.nid||te),xt=tn[Ie];xt&&(R=xt.serialize(R,$));var Mt=R,Jt=R.nss;return Mt.path=(te||$.nid)+":"+Jt,Mt}},PI=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,so={scheme:"urn:uuid",parse:function(R,$){var J=R;return J.uuid=J.nss,J.nss=void 0,!$.tolerant&&(!J.uuid||!J.uuid.match(PI))&&(J.error=J.error||"UUID is not valid."),J},serialize:function(R,$){var J=R;return J.nss=(R.uuid||"").toLowerCase(),J}};tn[kl.scheme]=kl,tn[Wp.scheme]=Wp,tn[Al.scheme]=Al,tn[zd.scheme]=zd,tn[qv.scheme]=qv,tn[Wv.scheme]=Wv,tn[so.scheme]=so,n.SCHEMES=tn,n.pctEncChar=M,n.pctDecChars=A,n.parse=pt,n.removeDotSegments=Si,n.serialize=di,n.resolveComponents=Yi,n.resolve=So,n.normalize=Qi,n.equal=Xc,n.escapeComponent=Vd,n.unescapeComponent=oo,Object.defineProperty(n,"__esModule",{value:!0})})});var Aw=dt((wke,F$)=>{"use strict";F$.exports=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var i,r,o;if(Array.isArray(e)){if(i=e.length,i!=t.length)return!1;for(r=i;r--!==0;)if(!n(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),i=o.length,i!==Object.keys(t).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[r]))return!1;for(r=i;r--!==0;){var s=o[r];if(!n(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}});var j$=dt((xke,L$)=>{"use strict";L$.exports=function(e){for(var t=0,i=e.length,r=0,o;r<i;)t++,o=e.charCodeAt(r++),o>=55296&&o<=56319&&r<i&&(o=e.charCodeAt(r),(o&64512)==56320&&r++);return t}});var Hu=dt((Cke,z$)=>{"use strict";z$.exports={copy:Rte,checkDataType:kM,checkDataTypes:Nte,coerceToTypes:Fte,toHash:MM,getProperty:PM,escapeQuotes:OM,equal:Aw(),ucs2length:j$(),varOccurences:Bte,varReplace:Vte,schemaHasRules:zte,schemaHasRulesExcept:$te,schemaUnknownRules:Ute,toQuotedString:AM,getPathExpr:Hte,getPath:qte,getData:Zte,unescapeFragment:Kte,unescapeJsonPointer:NM,escapeFragment:Yte,escapeJsonPointer:RM};function Rte(n,e){e=e||{};for(var t in n)e[t]=n[t];return e}function kM(n,e,t,i){var r=i?" !== ":" === ",o=i?" || ":" && ",s=i?"!":"",l=i?"":"!";switch(n){case"null":return e+r+"null";case"array":return s+"Array.isArray("+e+")";case"object":return"("+s+e+o+"typeof "+e+r+'"object"'+o+l+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+r+'"number"'+o+l+"("+e+" % 1)"+o+e+r+e+(t?o+s+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+r+'"'+n+'"'+(t?o+s+"isFinite("+e+")":"")+")";default:return"typeof "+e+r+'"'+n+'"'}}function Nte(n,e,t){switch(n.length){case 1:return kM(n[0],e,t,!0);default:var i="",r=MM(n);r.array&&r.object&&(i=r.null?"(":"(!"+e+" || ",i+="typeof "+e+' !== "object")',delete r.null,delete r.array,delete r.object),r.number&&delete r.integer;for(var o in r)i+=(i?" && ":"")+kM(o,e,t,!0);return i}}var B$=MM(["string","number","integer","boolean","null"]);function Fte(n,e){if(Array.isArray(e)){for(var t=[],i=0;i<e.length;i++){var r=e[i];(B$[r]||n==="array"&&r==="array")&&(t[t.length]=r)}if(t.length)return t}else{if(B$[e])return[e];if(n==="array"&&e==="array")return["array"]}}function MM(n){for(var e={},t=0;t<n.length;t++)e[n[t]]=!0;return e}var Lte=/^[a-z$_][a-z$_0-9]*$/i,jte=/'|\\/g;function PM(n){return typeof n=="number"?"["+n+"]":Lte.test(n)?"."+n:"['"+OM(n)+"']"}function OM(n){return n.replace(jte,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function Bte(n,e){e+="[^0-9]";var t=n.match(new RegExp(e,"g"));return t?t.length:0}function Vte(n,e,t){return e+="([^0-9])",t=t.replace(/\$/g,"$$$$"),n.replace(new RegExp(e,"g"),t+"$1")}function zte(n,e){if(typeof n=="boolean")return!n;for(var t in n)if(e[t])return!0}function $te(n,e,t){if(typeof n=="boolean")return!n&&t!="not";for(var i in n)if(i!=t&&e[i])return!0}function Ute(n,e){if(typeof n!="boolean"){for(var t in n)if(!e[t])return t}}function AM(n){return"'"+OM(n)+"'"}function Hte(n,e,t,i){var r=t?"'/' + "+e+(i?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):i?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return V$(n,r)}function qte(n,e,t){var i=AM(t?"/"+RM(e):PM(e));return V$(n,i)}var Wte=/^\/(?:[^~]|~0|~1)*$/,Gte=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Zte(n,e,t){var i,r,o,s;if(n==="")return"rootData";if(n[0]=="/"){if(!Wte.test(n))throw new Error("Invalid JSON-pointer: "+n);r=n,o="rootData"}else{if(s=n.match(Gte),!s)throw new Error("Invalid JSON-pointer: "+n);if(i=+s[1],r=s[2],r=="#"){if(i>=e)throw new Error("Cannot access property/index "+i+" levels up, current level is "+e);return t[e-i]}if(i>e)throw new Error("Cannot access data "+i+" levels up, current level is "+e);if(o="data"+(e-i||""),!r)return o}for(var l=o,c=r.split("/"),d=0;d<c.length;d++){var f=c[d];f&&(o+=PM(NM(f)),l+=" && "+o)}return l}function V$(n,e){return n=='""'?e:(n+" + "+e).replace(/([^\\])' \+ '/g,"$1")}function Kte(n){return NM(decodeURIComponent(n))}function Yte(n){return encodeURIComponent(RM(n))}function RM(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}function NM(n){return n.replace(/~1/g,"/").replace(/~0/g,"~")}});var FM=dt((Eke,$$)=>{"use strict";var Qte=Hu();$$.exports=Xte;function Xte(n){Qte.copy(n,this)}});var H$=dt((Ike,U$)=>{"use strict";var vc=U$.exports=function(n,e,t){typeof e=="function"&&(t=e,e={}),t=e.cb||t;var i=typeof t=="function"?t:t.pre||function(){},r=t.post||function(){};Mw(e,i,r,n,"",n)};vc.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};vc.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};vc.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};vc.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Mw(n,e,t,i,r,o,s,l,c,d){if(i&&typeof i=="object"&&!Array.isArray(i)){e(i,r,o,s,l,c,d);for(var f in i){var p=i[f];if(Array.isArray(p)){if(f in vc.arrayKeywords)for(var g=0;g<p.length;g++)Mw(n,e,t,p[g],r+"/"+f+"/"+g,o,r,f,i,g)}else if(f in vc.propsKeywords){if(p&&typeof p=="object")for(var m in p)Mw(n,e,t,p[m],r+"/"+f+"/"+Jte(m),o,r,f,i,m)}else(f in vc.keywords||n.allKeys&&!(f in vc.skipKeywords))&&Mw(n,e,t,p,r+"/"+f,o,r,f,i)}t(i,r,o,s,l,c,d)}}function Jte(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}});var Lw=dt((Ske,Z$)=>{"use strict";var Xg=N$(),q$=Aw(),Nw=Hu(),Pw=FM(),ene=H$();Z$.exports=yc;yc.normalizeId=bc;yc.fullPath=Ow;yc.url=Rw;yc.ids=one;yc.inlineRef=LM;yc.schema=Fw;function yc(n,e,t){var i=this._refs[t];if(typeof i=="string")if(this._refs[i])i=this._refs[i];else return yc.call(this,n,e,i);if(i=i||this._schemas[t],i instanceof Pw)return LM(i.schema,this._opts.inlineRefs)?i.schema:i.validate||this._compile(i);var r=Fw.call(this,e,t),o,s,l;return r&&(o=r.schema,e=r.root,l=r.baseId),o instanceof Pw?s=o.validate||n.call(this,o.schema,e,void 0,l):o!==void 0&&(s=LM(o,this._opts.inlineRefs)?o:n.call(this,o,e,void 0,l)),s}function Fw(n,e){var t=Xg.parse(e),i=G$(t),r=Ow(this._getId(n.schema));if(Object.keys(n.schema).length===0||i!==r){var o=bc(i),s=this._refs[o];if(typeof s=="string")return tne.call(this,n,s,t);if(s instanceof Pw)s.validate||this._compile(s),n=s;else if(s=this._schemas[o],s instanceof Pw){if(s.validate||this._compile(s),o==bc(e))return{schema:s,root:n,baseId:r};n=s}else return;if(!n.schema)return;r=Ow(this._getId(n.schema))}return W$.call(this,t,r,n.schema,n)}function tne(n,e,t){var i=Fw.call(this,n,e);if(i){var r=i.schema,o=i.baseId;n=i.root;var s=this._getId(r);return s&&(o=Rw(o,s)),W$.call(this,t,o,r,n)}}var nne=Nw.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function W$(n,e,t,i){if(n.fragment=n.fragment||"",n.fragment.slice(0,1)=="/"){for(var r=n.fragment.split("/"),o=1;o<r.length;o++){var s=r[o];if(s){if(s=Nw.unescapeFragment(s),t=t[s],t===void 0)break;var l;if(!nne[s]&&(l=this._getId(t),l&&(e=Rw(e,l)),t.$ref)){var c=Rw(e,t.$ref),d=Fw.call(this,i,c);d&&(t=d.schema,i=d.root,e=d.baseId)}}}if(t!==void 0&&t!==i.schema)return{schema:t,root:i,baseId:e}}}var ine=Nw.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function LM(n,e){if(e===!1)return!1;if(e===void 0||e===!0)return jM(n);if(e)return BM(n)<=e}function jM(n){var e;if(Array.isArray(n)){for(var t=0;t<n.length;t++)if(e=n[t],typeof e=="object"&&!jM(e))return!1}else for(var i in n)if(i=="$ref"||(e=n[i],typeof e=="object"&&!jM(e)))return!1;return!0}function BM(n){var e=0,t;if(Array.isArray(n)){for(var i=0;i<n.length;i++)if(t=n[i],typeof t=="object"&&(e+=BM(t)),e==1/0)return 1/0}else for(var r in n){if(r=="$ref")return 1/0;if(ine[r])e++;else if(t=n[r],typeof t=="object"&&(e+=BM(t)+1),e==1/0)return 1/0}return e}function Ow(n,e){e!==!1&&(n=bc(n));var t=Xg.parse(n);return G$(t)}function G$(n){return Xg.serialize(n).split("#")[0]+"#"}var rne=/#\/?$/;function bc(n){return n?n.replace(rne,""):""}function Rw(n,e){return e=bc(e),Xg.resolve(n,e)}function one(n){var e=bc(this._getId(n)),t={"":e},i={"":Ow(e,!1)},r={},o=this;return ene(n,{allKeys:!0},function(s,l,c,d,f,p,g){if(l!==""){var m=o._getId(s),_=t[d],y=i[d]+"/"+f;if(g!==void 0&&(y+="/"+(typeof g=="number"?g:Nw.escapeFragment(g))),typeof m=="string"){m=_=bc(_?Xg.resolve(_,m):m);var w=o._refs[m];if(typeof w=="string"&&(w=o._refs[w]),w&&w.schema){if(!q$(s,w.schema))throw new Error('id "'+m+'" resolves to more than one schema')}else if(m!=bc(y))if(m[0]=="#"){if(r[m]&&!q$(s,r[m]))throw new Error('id "'+m+'" resolves to more than one schema');r[m]=s}else o._refs[m]=y}t[l]=_,i[l]=y}}),r}});var jw=dt((Dke,Y$)=>{"use strict";var VM=Lw();Y$.exports={Validation:K$(sne),MissingRef:K$(zM)};function sne(n){this.message="validation failed",this.errors=n,this.ajv=this.validation=!0}zM.message=function(n,e){return"can't resolve reference "+e+" from id "+n};function zM(n,e,t){this.message=t||zM.message(n,e),this.missingRef=VM.url(n,e),this.missingSchema=VM.normalizeId(VM.fullPath(this.missingRef))}function K$(n){return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}});var $M=dt((Tke,Q$)=>{"use strict";Q$.exports=function(n,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var t=typeof e.cycles=="boolean"?e.cycles:!1,i=e.cmp&&function(o){return function(s){return function(l,c){var d={key:l,value:s[l]},f={key:c,value:s[c]};return o(d,f)}}}(e.cmp),r=[];return function o(s){if(s&&s.toJSON&&typeof s.toJSON=="function"&&(s=s.toJSON()),s!==void 0){if(typeof s=="number")return isFinite(s)?""+s:"null";if(typeof s!="object")return JSON.stringify(s);var l,c;if(Array.isArray(s)){for(c="[",l=0;l<s.length;l++)l&&(c+=","),c+=o(s[l])||"null";return c+"]"}if(s===null)return"null";if(r.indexOf(s)!==-1){if(t)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var d=r.push(s)-1,f=Object.keys(s).sort(i&&i(s));for(c="",l=0;l<f.length;l++){var p=f[l],g=o(s[p]);g&&(c&&(c+=","),c+=JSON.stringify(p)+":"+g)}return r.splice(d,1),"{"+c+"}"}}(n)}});var UM=dt((kke,X$)=>{"use strict";X$.exports=function(e,t,i){var r="",o=e.schema.$async===!0,s=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),l=e.self._getId(e.schema);if(e.opts.strictKeywords){var c=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(c){var d="unknown keyword: "+c;if(e.opts.strictKeywords==="log")e.logger.warn(d);else throw new Error(d)}}if(e.isTop&&(r+=" var validate = ",o&&(e.async=!0,r+="async "),r+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",l&&(e.opts.sourceCode||e.opts.processCode)&&(r+=" "+("/*# sourceURL="+l+" */")+" ")),typeof e.schema=="boolean"||!(s||e.schema.$ref)){var t="false schema",f=e.level,p=e.dataLevel,g=e.schema[t],m=e.schemaPath+e.util.getProperty(t),_=e.errSchemaPath+"/"+t,q=!e.opts.allErrors,P,y="data"+(p||""),j="valid"+f;if(e.schema===!1){e.isTop?q=!0:r+=" var "+j+" = false; ";var w=w||[];w.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(P||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'boolean schema is false' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+y+" "),r+=" } "):r+=" {} ";var I=r;r=w.pop(),!e.compositeRule&&q?e.async?r+=" throw new ValidationError(["+I+"]); ":r+=" validate.errors = ["+I+"]; return false; ":r+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?o?r+=" return data; ":r+=" validate.errors = null; return true; ":r+=" var "+j+" = true; ";return e.isTop&&(r+=" }; return validate; "),r}if(e.isTop){var k=e.isTop,f=e.level=0,p=e.dataLevel=0,y="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var O="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(O);else throw new Error(O)}r+=" var vErrors = null; ",r+=" var errors = 0;     ",r+=" if (rootData === undefined) rootData = data; "}else{var f=e.level,p=e.dataLevel,y="data"+(p||"");if(l&&(e.baseId=e.resolve.url(e.baseId,l)),o&&!e.async)throw new Error("async schema in sync schema");r+=" var errs_"+f+" = errors;"}var j="valid"+f,q=!e.opts.allErrors,V="",re="",P,X=e.schema.type,se=Array.isArray(X);if(X&&e.opts.nullable&&e.schema.nullable===!0&&(se?X.indexOf("null")==-1&&(X=X.concat("null")):X!="null"&&(X=[X,"null"],se=!0)),se&&X.length==1&&(X=X[0],se=!1),e.schema.$ref&&s){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(s=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(r+=" "+e.RULES.all.$comment.code(e,"$comment")),X){if(e.opts.coerceTypes)var ue=e.util.coerceToTypes(e.opts.coerceTypes,X);var me=e.RULES.types[X];if(ue||se||me===!0||me&&!zn(me)){var m=e.schemaPath+".type",_=e.errSchemaPath+"/type",m=e.schemaPath+".type",_=e.errSchemaPath+"/type",G=se?"checkDataTypes":"checkDataType";if(r+=" if ("+e.util[G](X,y,e.opts.strictNumbers,!0)+") { ",ue){var Y="dataType"+f,ne="coerced"+f;r+=" var "+Y+" = typeof "+y+"; var "+ne+" = undefined; ",e.opts.coerceTypes=="array"&&(r+=" if ("+Y+" == 'object' && Array.isArray("+y+") && "+y+".length == 1) { "+y+" = "+y+"[0]; "+Y+" = typeof "+y+"; if ("+e.util.checkDataType(e.schema.type,y,e.opts.strictNumbers)+") "+ne+" = "+y+"; } "),r+=" if ("+ne+" !== undefined) ; ";var W=ue;if(W)for(var he,ie=-1,be=W.length-1;ie<be;)he=W[ie+=1],he=="string"?r+=" else if ("+Y+" == 'number' || "+Y+" == 'boolean') "+ne+" = '' + "+y+"; else if ("+y+" === null) "+ne+" = ''; ":he=="number"||he=="integer"?(r+=" else if ("+Y+" == 'boolean' || "+y+" === null || ("+Y+" == 'string' && "+y+" && "+y+" == +"+y+" ",he=="integer"&&(r+=" && !("+y+" % 1)"),r+=")) "+ne+" = +"+y+"; "):he=="boolean"?r+=" else if ("+y+" === 'false' || "+y+" === 0 || "+y+" === null) "+ne+" = false; else if ("+y+" === 'true' || "+y+" === 1) "+ne+" = true; ":he=="null"?r+=" else if ("+y+" === '' || "+y+" === 0 || "+y+" === false) "+ne+" = null; ":e.opts.coerceTypes=="array"&&he=="array"&&(r+=" else if ("+Y+" == 'string' || "+Y+" == 'number' || "+Y+" == 'boolean' || "+y+" == null) "+ne+" = ["+y+"]; ");r+=" else {   ";var w=w||[];w.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(P||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { type: '",se?r+=""+X.join(","):r+=""+X,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",se?r+=""+X.join(","):r+=""+X,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+m+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+y+" "),r+=" } "):r+=" {} ";var I=r;r=w.pop(),!e.compositeRule&&q?e.async?r+=" throw new ValidationError(["+I+"]); ":r+=" validate.errors = ["+I+"]; return false; ":r+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } if ("+ne+" !== undefined) {  ";var xe=p?"data"+(p-1||""):"parentData",ut=p?e.dataPathArr[p]:"parentDataProperty";r+=" "+y+" = "+ne+"; ",p||(r+="if ("+xe+" !== undefined)"),r+=" "+xe+"["+ut+"] = "+ne+"; } "}else{var w=w||[];w.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(P||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { type: '",se?r+=""+X.join(","):r+=""+X,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",se?r+=""+X.join(","):r+=""+X,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+m+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+y+" "),r+=" } "):r+=" {} ";var I=r;r=w.pop(),!e.compositeRule&&q?e.async?r+=" throw new ValidationError(["+I+"]); ":r+=" validate.errors = ["+I+"]; return false; ":r+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" } "}}if(e.schema.$ref&&!s)r+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",q&&(r+=" } if (errors === ",k?r+="0":r+="errs_"+f,r+=") { ",re+="}");else{var nt=e.RULES;if(nt){for(var me,Je=-1,Ee=nt.length-1;Je<Ee;)if(me=nt[Je+=1],zn(me)){if(me.type&&(r+=" if ("+e.util.checkDataType(me.type,y,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(me.type=="object"&&e.schema.properties){var g=e.schema.properties,tn=Object.keys(g),M=tn;if(M)for(var A,le=-1,H=M.length-1;le<H;){A=M[le+=1];var qe=g[A];if(qe.default!==void 0){var gt=y+e.util.getProperty(A);if(e.compositeRule){if(e.opts.strictDefaults){var O="default is ignored for: "+gt;if(e.opts.strictDefaults==="log")e.logger.warn(O);else throw new Error(O)}}else r+=" if ("+gt+" === undefined ",e.opts.useDefaults=="empty"&&(r+=" || "+gt+" === null || "+gt+" === '' "),r+=" ) "+gt+" = ",e.opts.useDefaults=="shared"?r+=" "+e.useDefault(qe.default)+" ":r+=" "+JSON.stringify(qe.default)+" ",r+="; "}}}else if(me.type=="array"&&Array.isArray(e.schema.items)){var dn=e.schema.items;if(dn){for(var qe,ie=-1,Yt=dn.length-1;ie<Yt;)if(qe=dn[ie+=1],qe.default!==void 0){var gt=y+"["+ie+"]";if(e.compositeRule){if(e.opts.strictDefaults){var O="default is ignored for: "+gt;if(e.opts.strictDefaults==="log")e.logger.warn(O);else throw new Error(O)}}else r+=" if ("+gt+" === undefined ",e.opts.useDefaults=="empty"&&(r+=" || "+gt+" === null || "+gt+" === '' "),r+=" ) "+gt+" = ",e.opts.useDefaults=="shared"?r+=" "+e.useDefault(qe.default)+" ":r+=" "+JSON.stringify(qe.default)+" ",r+="; "}}}}var pt=me.rules;if(pt){for(var Ei,nn=-1,Ii=pt.length-1;nn<Ii;)if(Ei=pt[nn+=1],Si(Ei)){var Io=Ei.code(e,Ei.keyword,me.type);Io&&(r+=" "+Io+" ",q&&(V+="}"))}}if(q&&(r+=" "+V+" ",V=""),me.type&&(r+=" } ",X&&X===me.type&&!ue)){r+=" else { ";var m=e.schemaPath+".type",_=e.errSchemaPath+"/type",w=w||[];w.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(P||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { type: '",se?r+=""+X.join(","):r+=""+X,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",se?r+=""+X.join(","):r+=""+X,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+m+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+y+" "),r+=" } "):r+=" {} ";var I=r;r=w.pop(),!e.compositeRule&&q?e.async?r+=" throw new ValidationError(["+I+"]); ":r+=" validate.errors = ["+I+"]; return false; ":r+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "}q&&(r+=" if (errors === ",k?r+="0":r+="errs_"+f,r+=") { ",re+="}")}}}q&&(r+=" "+re+" "),k?(o?(r+=" if (errors === 0) return data;           ",r+=" else throw new ValidationError(vErrors); "):(r+=" validate.errors = vErrors; ",r+=" return errors === 0;       "),r+=" }; return validate;"):r+=" var "+j+" = errors === errs_"+f+";";function zn(Yi){for(var So=Yi.rules,Qi=0;Qi<So.length;Qi++)if(Si(So[Qi]))return!0}function Si(Yi){return e.schema[Yi.keyword]!==void 0||Yi.implements&&di(Yi)}function di(Yi){for(var So=Yi.implements,Qi=0;Qi<So.length;Qi++)if(e.schema[So[Qi]]!==void 0)return!0}return r}});var i3=dt((Ake,n3)=>{"use strict";var Bw=Lw(),zw=Hu(),e3=jw(),ane=$M(),J$=UM(),lne=zw.ucs2length,cne=Aw(),une=e3.Validation;n3.exports=HM;function HM(n,e,t,i){var r=this,o=this._opts,s=[void 0],l={},c=[],d={},f=[],p={},g=[];e=e||{schema:n,refVal:s,refs:l};var m=dne.call(this,n,e,i),_=this._compilations[m.index];if(m.compiling)return _.callValidate=O;var y=this._formats,w=this.RULES;try{var I=j(n,e,t,i);_.validate=I;var k=_.callValidate;return k&&(k.schema=I.schema,k.errors=null,k.refs=I.refs,k.refVal=I.refVal,k.root=I.root,k.$async=I.$async,o.sourceCode&&(k.source=I.source)),I}finally{hne.call(this,n,e,i)}function O(){var G=_.validate,Y=G.apply(this,arguments);return O.errors=G.errors,Y}function j(G,Y,ne,W){var he=!Y||Y&&Y.schema==G;if(Y.schema!=e.schema)return HM.call(r,G,Y,ne,W);var ie=G.$async===!0,be=J$({isTop:!0,schema:G,isRoot:he,baseId:W,root:Y,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:e3.MissingRef,RULES:w,validate:J$,util:zw,resolve:Bw,resolveRef:q,usePattern:se,useDefault:ue,useCustomRule:me,opts:o,formats:y,logger:r.logger,self:r});be=Vw(s,mne)+Vw(c,fne)+Vw(f,pne)+Vw(g,gne)+be,o.processCode&&(be=o.processCode(be,G));var xe;try{var ut=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",be);xe=ut(r,w,y,e,s,f,g,cne,lne,une),s[0]=xe}catch(nt){throw r.logger.error("Error compiling schema, function code:",be),nt}return xe.schema=G,xe.errors=null,xe.refs=l,xe.refVal=s,xe.root=he?xe:Y,ie&&(xe.$async=!0),o.sourceCode===!0&&(xe.source={code:be,patterns:c,defaults:f}),xe}function q(G,Y,ne){Y=Bw.url(G,Y);var W=l[Y],he,ie;if(W!==void 0)return he=s[W],ie="refVal["+W+"]",X(he,ie);if(!ne&&e.refs){var be=e.refs[Y];if(be!==void 0)return he=e.refVal[be],ie=V(Y,he),X(he,ie)}ie=V(Y);var xe=Bw.call(r,j,e,Y);if(xe===void 0){var ut=t&&t[Y];ut&&(xe=Bw.inlineRef(ut,o.inlineRefs)?ut:HM.call(r,ut,e,t,G))}if(xe===void 0)re(Y);else return P(Y,xe),X(xe,ie)}function V(G,Y){var ne=s.length;return s[ne]=Y,l[G]=ne,"refVal"+ne}function re(G){delete l[G]}function P(G,Y){var ne=l[G];s[ne]=Y}function X(G,Y){return typeof G=="object"||typeof G=="boolean"?{code:Y,schema:G,inline:!0}:{code:Y,$async:G&&!!G.$async}}function se(G){var Y=d[G];return Y===void 0&&(Y=d[G]=c.length,c[Y]=G),"pattern"+Y}function ue(G){switch(typeof G){case"boolean":case"number":return""+G;case"string":return zw.toQuotedString(G);case"object":if(G===null)return"null";var Y=ane(G),ne=p[Y];return ne===void 0&&(ne=p[Y]=f.length,f[ne]=G),"default"+ne}}function me(G,Y,ne,W){if(r._opts.validateSchema!==!1){var he=G.definition.dependencies;if(he&&!he.every(function(M){return Object.prototype.hasOwnProperty.call(ne,M)}))throw new Error("parent schema must have all required keywords: "+he.join(","));var ie=G.definition.validateSchema;if(ie){var be=ie(Y);if(!be){var xe="keyword schema is invalid: "+r.errorsText(ie.errors);if(r._opts.validateSchema=="log")r.logger.error(xe);else throw new Error(xe)}}}var ut=G.definition.compile,nt=G.definition.inline,Je=G.definition.macro,Ee;if(ut)Ee=ut.call(r,Y,ne,W);else if(Je)Ee=Je.call(r,Y,ne,W),o.validateSchema!==!1&&r.validateSchema(Ee,!0);else if(nt)Ee=nt.call(r,W,G.keyword,Y,ne);else if(Ee=G.definition.validate,!Ee)return;if(Ee===void 0)throw new Error('custom keyword "'+G.keyword+'"failed to compile');var tn=g.length;return g[tn]=Ee,{code:"customRule"+tn,validate:Ee}}}function dne(n,e,t){var i=t3.call(this,n,e,t);return i>=0?{index:i,compiling:!0}:(i=this._compilations.length,this._compilations[i]={schema:n,root:e,baseId:t},{index:i,compiling:!1})}function hne(n,e,t){var i=t3.call(this,n,e,t);i>=0&&this._compilations.splice(i,1)}function t3(n,e,t){for(var i=0;i<this._compilations.length;i++){var r=this._compilations[i];if(r.schema==n&&r.root==e&&r.baseId==t)return i}return-1}function fne(n,e){return"var pattern"+n+" = new RegExp("+zw.toQuotedString(e[n])+");"}function pne(n){return"var default"+n+" = defaults["+n+"];"}function mne(n,e){return e[n]===void 0?"":"var refVal"+n+" = refVal["+n+"];"}function gne(n){return"var customRule"+n+" = customRules["+n+"];"}function Vw(n,e){if(!n.length)return"";for(var t="",i=0;i<n.length;i++)t+=e(i,n);return t}});var o3=dt((Mke,r3)=>{"use strict";var $w=r3.exports=function(){this._cache={}};$w.prototype.put=function(e,t){this._cache[e]=t};$w.prototype.get=function(e){return this._cache[e]};$w.prototype.del=function(e){delete this._cache[e]};$w.prototype.clear=function(){this._cache={}}});var _3=dt((Pke,g3)=>{"use strict";var _ne=Hu(),vne=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,bne=[0,31,28,31,30,31,30,31,31,30,31,30,31],yne=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,s3=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,wne=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,xne=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,a3=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,l3=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,c3=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,u3=/^(?:\/(?:[^~/]|~0|~1)*)*$/,d3=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,h3=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;g3.exports=Uw;function Uw(n){return n=n=="full"?"full":"fast",_ne.copy(Uw[n])}Uw.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":a3,url:l3,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:s3,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:m3,uuid:c3,"json-pointer":u3,"json-pointer-uri-fragment":d3,"relative-json-pointer":h3};Uw.full={date:f3,time:p3,"date-time":Ine,uri:Dne,"uri-reference":xne,"uri-template":a3,url:l3,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:s3,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:m3,uuid:c3,"json-pointer":u3,"json-pointer-uri-fragment":d3,"relative-json-pointer":h3};function Cne(n){return n%4===0&&(n%100!==0||n%400===0)}function f3(n){var e=n.match(vne);if(!e)return!1;var t=+e[1],i=+e[2],r=+e[3];return i>=1&&i<=12&&r>=1&&r<=(i==2&&Cne(t)?29:bne[i])}function p3(n,e){var t=n.match(yne);if(!t)return!1;var i=t[1],r=t[2],o=t[3],s=t[5];return(i<=23&&r<=59&&o<=59||i==23&&r==59&&o==60)&&(!e||s)}var Ene=/t|\s/i;function Ine(n){var e=n.split(Ene);return e.length==2&&f3(e[0])&&p3(e[1],!0)}var Sne=/\/|:/;function Dne(n){return Sne.test(n)&&wne.test(n)}var Tne=/[^\\]\\Z/;function m3(n){if(Tne.test(n))return!1;try{return new RegExp(n),!0}catch{return!1}}});var b3=dt((Oke,v3)=>{"use strict";v3.exports=function(e,t,i){var r=" ",o=e.level,s=e.dataLevel,l=e.schema[t],c=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,f="data"+(s||""),p="valid"+o,g,m;if(l=="#"||l=="#/")e.isRoot?(g=e.async,m="validate"):(g=e.root.schema.$async===!0,m="root.refVal[0]");else{var _=e.resolveRef(e.baseId,l,e.isRoot);if(_===void 0){var y=e.MissingRefError.message(e.baseId,l);if(e.opts.missingRefs=="fail"){e.logger.error(y);var w=w||[];w.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { ref: '"+e.util.escapeQuotes(l)+"' } ",e.opts.messages!==!1&&(r+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(l)+"' "),e.opts.verbose&&(r+=" , schema: "+e.util.toQuotedString(l)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ";var I=r;r=w.pop(),!e.compositeRule&&d?e.async?r+=" throw new ValidationError(["+I+"]); ":r+=" validate.errors = ["+I+"]; return false; ":r+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d&&(r+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(y),d&&(r+=" if (true) { ");else throw new e.MissingRefError(e.baseId,l,y)}else if(_.inline){var k=e.util.copy(e);k.level++;var O="valid"+k.level;k.schema=_.schema,k.schemaPath="",k.errSchemaPath=l;var j=e.validate(k).replace(/validate\.schema/g,_.code);r+=" "+j+" ",d&&(r+=" if ("+O+") { ")}else g=_.$async===!0||e.async&&_.$async!==!1,m=_.code}if(m){var w=w||[];w.push(r),r="",e.opts.passContext?r+=" "+m+".call(this, ":r+=" "+m+"( ",r+=" "+f+", (dataPath || '')",e.errorPath!='""'&&(r+=" + "+e.errorPath);var q=s?"data"+(s-1||""):"parentData",V=s?e.dataPathArr[s]:"parentDataProperty";r+=" , "+q+" , "+V+", rootData)  ";var re=r;if(r=w.pop(),g){if(!e.async)throw new Error("async schema referenced by sync schema");d&&(r+=" var "+p+"; "),r+=" try { await "+re+"; ",d&&(r+=" "+p+" = true; "),r+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",d&&(r+=" "+p+" = false; "),r+=" } ",d&&(r+=" if ("+p+") { ")}else r+=" if (!"+re+") { if (vErrors === null) vErrors = "+m+".errors; else vErrors = vErrors.concat("+m+".errors); errors = vErrors.length; } ",d&&(r+=" else { ")}return r}});var w3=dt((Rke,y3)=>{"use strict";y3.exports=function(e,t,i){var r=" ",o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,d=e.util.copy(e),f="";d.level++;var p="valid"+d.level,g=d.baseId,m=!0,_=o;if(_)for(var y,w=-1,I=_.length-1;w<I;)y=_[w+=1],(e.opts.strictKeywords?typeof y=="object"&&Object.keys(y).length>0||y===!1:e.util.schemaHasRules(y,e.RULES.all))&&(m=!1,d.schema=y,d.schemaPath=s+"["+w+"]",d.errSchemaPath=l+"/"+w,r+="  "+e.validate(d)+" ",d.baseId=g,c&&(r+=" if ("+p+") { ",f+="}"));return c&&(m?r+=" if (true) { ":r+=" "+f.slice(0,-1)+" "),r}});var C3=dt((Nke,x3)=>{"use strict";x3.exports=function(e,t,i){var r=" ",o=e.level,s=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(s||""),g="valid"+o,m="errs__"+o,_=e.util.copy(e),y="";_.level++;var w="valid"+_.level,I=l.every(function(P){return e.opts.strictKeywords?typeof P=="object"&&Object.keys(P).length>0||P===!1:e.util.schemaHasRules(P,e.RULES.all)});if(I){var k=_.baseId;r+=" var "+m+" = errors; var "+g+" = false;  ";var O=e.compositeRule;e.compositeRule=_.compositeRule=!0;var j=l;if(j)for(var q,V=-1,re=j.length-1;V<re;)q=j[V+=1],_.schema=q,_.schemaPath=c+"["+V+"]",_.errSchemaPath=d+"/"+V,r+="  "+e.validate(_)+" ",_.baseId=k,r+=" "+g+" = "+g+" || "+w+"; if (!"+g+") { ",y+="}";e.compositeRule=_.compositeRule=O,r+=" "+y+" if (!"+g+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" } else {  errors = "+m+"; if (vErrors !== null) { if ("+m+") vErrors.length = "+m+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else f&&(r+=" if (true) { ");return r}});var I3=dt((Fke,E3)=>{"use strict";E3.exports=function(e,t,i){var r=" ",o=e.schema[t],s=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,c=e.util.toQuotedString(o);return e.opts.$comment===!0?r+=" console.log("+c+");":typeof e.opts.$comment=="function"&&(r+=" self._opts.$comment("+c+", "+e.util.toQuotedString(s)+", validate.root.schema);"),r}});var D3=dt((Lke,S3)=>{"use strict";S3.exports=function(e,t,i){var r=" ",o=e.level,s=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(s||""),g="valid"+o,m=e.opts.$data&&l&&l.$data,_;m?(r+=" var schema"+o+" = "+e.util.getData(l.$data,s,e.dataPathArr)+"; ",_="schema"+o):_=l,m||(r+=" var schema"+o+" = validate.schema"+c+";"),r+="var "+g+" = equal("+p+", schema"+o+"); if (!"+g+") {   ";var y=y||[];y.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { allowedValue: schema"+o+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be equal to constant' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ";var w=r;return r=y.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+w+"]); ":r+=" validate.errors = ["+w+"]; return false; ":r+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",f&&(r+=" else { "),r}});var k3=dt((jke,T3)=>{"use strict";T3.exports=function(e,t,i){var r=" ",o=e.level,s=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(s||""),g="valid"+o,m="errs__"+o,_=e.util.copy(e),y="";_.level++;var w="valid"+_.level,I="i"+o,k=_.dataLevel=e.dataLevel+1,O="data"+k,j=e.baseId,q=e.opts.strictKeywords?typeof l=="object"&&Object.keys(l).length>0||l===!1:e.util.schemaHasRules(l,e.RULES.all);if(r+="var "+m+" = errors;var "+g+";",q){var V=e.compositeRule;e.compositeRule=_.compositeRule=!0,_.schema=l,_.schemaPath=c,_.errSchemaPath=d,r+=" var "+w+" = false; for (var "+I+" = 0; "+I+" < "+p+".length; "+I+"++) { ",_.errorPath=e.util.getPathExpr(e.errorPath,I,e.opts.jsonPointers,!0);var re=p+"["+I+"]";_.dataPathArr[k]=I;var P=e.validate(_);_.baseId=j,e.util.varOccurences(P,O)<2?r+=" "+e.util.varReplace(P,O,re)+" ":r+=" var "+O+" = "+re+"; "+P+" ",r+=" if ("+w+") break; }  ",e.compositeRule=_.compositeRule=V,r+=" "+y+" if (!"+w+") {"}else r+=" if ("+p+".length == 0) {";var X=X||[];X.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should contain a valid item' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ";var se=r;return r=X.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+se+"]); ":r+=" validate.errors = ["+se+"]; return false; ":r+=" var err = "+se+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { ",q&&(r+="  errors = "+m+"; if (vErrors !== null) { if ("+m+") vErrors.length = "+m+"; else vErrors = null; } "),e.opts.allErrors&&(r+=" } "),r}});var M3=dt((Bke,A3)=>{"use strict";A3.exports=function(e,t,i){var r=" ",o=e.level,s=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(s||""),g="errs__"+o,m=e.util.copy(e),_="";m.level++;var y="valid"+m.level,w={},I={},k=e.opts.ownProperties;for(V in l)if(V!="__proto__"){var O=l[V],j=Array.isArray(O)?I:w;j[V]=O}r+="var "+g+" = errors;";var q=e.errorPath;r+="var missing"+o+";";for(var V in I)if(j=I[V],j.length){if(r+=" if ( "+p+e.util.getProperty(V)+" !== undefined ",k&&(r+=" && Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(V)+"') "),f){r+=" && ( ";var re=j;if(re)for(var P,X=-1,se=re.length-1;X<se;){P=re[X+=1],X&&(r+=" || ");var ue=e.util.getProperty(P),me=p+ue;r+=" ( ( "+me+" === undefined ",k&&(r+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(P)+"') "),r+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?P:ue)+") ) "}r+=")) {  ";var G="missing"+o,Y="' + "+G+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(q,G,!0):q+" + "+G);var ne=ne||[];ne.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { property: '"+e.util.escapeQuotes(V)+"', missingProperty: '"+Y+"', depsCount: "+j.length+", deps: '"+e.util.escapeQuotes(j.length==1?j[0]:j.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",j.length==1?r+="property "+e.util.escapeQuotes(j[0]):r+="properties "+e.util.escapeQuotes(j.join(", ")),r+=" when property "+e.util.escapeQuotes(V)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ";var W=r;r=ne.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+W+"]); ":r+=" validate.errors = ["+W+"]; return false; ":r+=" var err = "+W+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var he=j;if(he)for(var P,ie=-1,be=he.length-1;ie<be;){P=he[ie+=1];var ue=e.util.getProperty(P),Y=e.util.escapeQuotes(P),me=p+ue;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(q,P,e.opts.jsonPointers)),r+=" if ( "+me+" === undefined ",k&&(r+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(P)+"') "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { property: '"+e.util.escapeQuotes(V)+"', missingProperty: '"+Y+"', depsCount: "+j.length+", deps: '"+e.util.escapeQuotes(j.length==1?j[0]:j.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",j.length==1?r+="property "+e.util.escapeQuotes(j[0]):r+="properties "+e.util.escapeQuotes(j.join(", ")),r+=" when property "+e.util.escapeQuotes(V)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r+=" }   ",f&&(_+="}",r+=" else { ")}e.errorPath=q;var xe=m.baseId;for(var V in w){var O=w[V];(e.opts.strictKeywords?typeof O=="object"&&Object.keys(O).length>0||O===!1:e.util.schemaHasRules(O,e.RULES.all))&&(r+=" "+y+" = true; if ( "+p+e.util.getProperty(V)+" !== undefined ",k&&(r+=" && Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(V)+"') "),r+=") { ",m.schema=O,m.schemaPath=c+e.util.getProperty(V),m.errSchemaPath=d+"/"+e.util.escapeFragment(V),r+="  "+e.validate(m)+" ",m.baseId=xe,r+=" }  ",f&&(r+=" if ("+y+") { ",_+="}"))}return f&&(r+="   "+_+" if ("+g+" == errors) {"),r}});var O3=dt((Vke,P3)=>{"use strict";P3.exports=function(e,t,i){var r=" ",o=e.level,s=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(s||""),g="valid"+o,m=e.opts.$data&&l&&l.$data,_;m?(r+=" var schema"+o+" = "+e.util.getData(l.$data,s,e.dataPathArr)+"; ",_="schema"+o):_=l;var y="i"+o,w="schema"+o;m||(r+=" var "+w+" = validate.schema"+c+";"),r+="var "+g+";",m&&(r+=" if (schema"+o+" === undefined) "+g+" = true; else if (!Array.isArray(schema"+o+")) "+g+" = false; else {"),r+=""+g+" = false;for (var "+y+"=0; "+y+"<"+w+".length; "+y+"++) if (equal("+p+", "+w+"["+y+"])) { "+g+" = true; break; }",m&&(r+="  }  "),r+=" if (!"+g+") {   ";var I=I||[];I.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { allowedValues: schema"+o+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ";var k=r;return r=I.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+k+"]); ":r+=" validate.errors = ["+k+"]; return false; ":r+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",f&&(r+=" else { "),r}});var N3=dt((zke,R3)=>{"use strict";R3.exports=function(e,t,i){var r=" ",o=e.level,s=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(s||"");if(e.opts.format===!1)return f&&(r+=" if (true) { "),r;var g=e.opts.$data&&l&&l.$data,m;g?(r+=" var schema"+o+" = "+e.util.getData(l.$data,s,e.dataPathArr)+"; ",m="schema"+o):m=l;var _=e.opts.unknownFormats,y=Array.isArray(_);if(g){var w="format"+o,I="isObject"+o,k="formatType"+o;r+=" var "+w+" = formats["+m+"]; var "+I+" = typeof "+w+" == 'object' && !("+w+" instanceof RegExp) && "+w+".validate; var "+k+" = "+I+" && "+w+".type || 'string'; if ("+I+") { ",e.async&&(r+=" var async"+o+" = "+w+".async; "),r+=" "+w+" = "+w+".validate; } if (  ",g&&(r+=" ("+m+" !== undefined && typeof "+m+" != 'string') || "),r+=" (",_!="ignore"&&(r+=" ("+m+" && !"+w+" ",y&&(r+=" && self._opts.unknownFormats.indexOf("+m+") == -1 "),r+=") || "),r+=" ("+w+" && "+k+" == '"+i+"' && !(typeof "+w+" == 'function' ? ",e.async?r+=" (async"+o+" ? await "+w+"("+p+") : "+w+"("+p+")) ":r+=" "+w+"("+p+") ",r+=" : "+w+".test("+p+"))))) {"}else{var w=e.formats[l];if(!w){if(_=="ignore")return e.logger.warn('unknown format "'+l+'" ignored in schema at path "'+e.errSchemaPath+'"'),f&&(r+=" if (true) { "),r;if(y&&_.indexOf(l)>=0)return f&&(r+=" if (true) { "),r;throw new Error('unknown format "'+l+'" is used in schema at path "'+e.errSchemaPath+'"')}var I=typeof w=="object"&&!(w instanceof RegExp)&&w.validate,k=I&&w.type||"string";if(I){var O=w.async===!0;w=w.validate}if(k!=i)return f&&(r+=" if (true) { "),r;if(O){if(!e.async)throw new Error("async format in sync schema");var j="formats"+e.util.getProperty(l)+".validate";r+=" if (!(await "+j+"("+p+"))) { "}else{r+=" if (! ";var j="formats"+e.util.getProperty(l);I&&(j+=".validate"),typeof w=="function"?r+=" "+j+"("+p+") ":r+=" "+j+".test("+p+") ",r+=") { "}}var q=q||[];q.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { format:  ",g?r+=""+m:r+=""+e.util.toQuotedString(l),r+="  } ",e.opts.messages!==!1&&(r+=` , message: 'should match format "`,g?r+="' + "+m+" + '":r+=""+e.util.escapeQuotes(l),r+=`"' `),e.opts.verbose&&(r+=" , schema:  ",g?r+="validate.schema"+c:r+=""+e.util.toQuotedString(l),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ";var V=r;return r=q.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+V+"]); ":r+=" validate.errors = ["+V+"]; return false; ":r+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",f&&(r+=" else { "),r}});var L3=dt(($ke,F3)=>{"use strict";F3.exports=function(e,t,i){var r=" ",o=e.level,s=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(s||""),g="valid"+o,m="errs__"+o,_=e.util.copy(e);_.level++;var y="valid"+_.level,w=e.schema.then,I=e.schema.else,k=w!==void 0&&(e.opts.strictKeywords?typeof w=="object"&&Object.keys(w).length>0||w===!1:e.util.schemaHasRules(w,e.RULES.all)),O=I!==void 0&&(e.opts.strictKeywords?typeof I=="object"&&Object.keys(I).length>0||I===!1:e.util.schemaHasRules(I,e.RULES.all)),j=_.baseId;if(k||O){var q;_.createErrors=!1,_.schema=l,_.schemaPath=c,_.errSchemaPath=d,r+=" var "+m+" = errors; var "+g+" = true;  ";var V=e.compositeRule;e.compositeRule=_.compositeRule=!0,r+="  "+e.validate(_)+" ",_.baseId=j,_.createErrors=!0,r+="  errors = "+m+"; if (vErrors !== null) { if ("+m+") vErrors.length = "+m+"; else vErrors = null; }  ",e.compositeRule=_.compositeRule=V,k?(r+=" if ("+y+") {  ",_.schema=e.schema.then,_.schemaPath=e.schemaPath+".then",_.errSchemaPath=e.errSchemaPath+"/then",r+="  "+e.validate(_)+" ",_.baseId=j,r+=" "+g+" = "+y+"; ",k&&O?(q="ifClause"+o,r+=" var "+q+" = 'then'; "):q="'then'",r+=" } ",O&&(r+=" else { ")):r+=" if (!"+y+") { ",O&&(_.schema=e.schema.else,_.schemaPath=e.schemaPath+".else",_.errSchemaPath=e.errSchemaPath+"/else",r+="  "+e.validate(_)+" ",_.baseId=j,r+=" "+g+" = "+y+"; ",k&&O?(q="ifClause"+o,r+=" var "+q+" = 'else'; "):q="'else'",r+=" } "),r+=" if (!"+g+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { failingKeyword: "+q+" } ",e.opts.messages!==!1&&(r+=` , message: 'should match "' + `+q+` + '" schema' `),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" }   ",f&&(r+=" else { ")}else f&&(r+=" if (true) { ");return r}});var B3=dt((Uke,j3)=>{"use strict";j3.exports=function(e,t,i){var r=" ",o=e.level,s=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(s||""),g="valid"+o,m="errs__"+o,_=e.util.copy(e),y="";_.level++;var w="valid"+_.level,I="i"+o,k=_.dataLevel=e.dataLevel+1,O="data"+k,j=e.baseId;if(r+="var "+m+" = errors;var "+g+";",Array.isArray(l)){var q=e.schema.additionalItems;if(q===!1){r+=" "+g+" = "+p+".length <= "+l.length+"; ";var V=d;d=e.errSchemaPath+"/additionalItems",r+="  if (!"+g+") {   ";var re=re||[];re.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { limit: "+l.length+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have more than "+l.length+" items' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ";var P=r;r=re.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+P+"]); ":r+=" validate.errors = ["+P+"]; return false; ":r+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",d=V,f&&(y+="}",r+=" else { ")}var X=l;if(X){for(var se,ue=-1,me=X.length-1;ue<me;)if(se=X[ue+=1],e.opts.strictKeywords?typeof se=="object"&&Object.keys(se).length>0||se===!1:e.util.schemaHasRules(se,e.RULES.all)){r+=" "+w+" = true; if ("+p+".length > "+ue+") { ";var G=p+"["+ue+"]";_.schema=se,_.schemaPath=c+"["+ue+"]",_.errSchemaPath=d+"/"+ue,_.errorPath=e.util.getPathExpr(e.errorPath,ue,e.opts.jsonPointers,!0),_.dataPathArr[k]=ue;var Y=e.validate(_);_.baseId=j,e.util.varOccurences(Y,O)<2?r+=" "+e.util.varReplace(Y,O,G)+" ":r+=" var "+O+" = "+G+"; "+Y+" ",r+=" }  ",f&&(r+=" if ("+w+") { ",y+="}")}}if(typeof q=="object"&&(e.opts.strictKeywords?typeof q=="object"&&Object.keys(q).length>0||q===!1:e.util.schemaHasRules(q,e.RULES.all))){_.schema=q,_.schemaPath=e.schemaPath+".additionalItems",_.errSchemaPath=e.errSchemaPath+"/additionalItems",r+=" "+w+" = true; if ("+p+".length > "+l.length+") {  for (var "+I+" = "+l.length+"; "+I+" < "+p+".length; "+I+"++) { ",_.errorPath=e.util.getPathExpr(e.errorPath,I,e.opts.jsonPointers,!0);var G=p+"["+I+"]";_.dataPathArr[k]=I;var Y=e.validate(_);_.baseId=j,e.util.varOccurences(Y,O)<2?r+=" "+e.util.varReplace(Y,O,G)+" ":r+=" var "+O+" = "+G+"; "+Y+" ",f&&(r+=" if (!"+w+") break; "),r+=" } }  ",f&&(r+=" if ("+w+") { ",y+="}")}}else if(e.opts.strictKeywords?typeof l=="object"&&Object.keys(l).length>0||l===!1:e.util.schemaHasRules(l,e.RULES.all)){_.schema=l,_.schemaPath=c,_.errSchemaPath=d,r+="  for (var "+I+" = 0; "+I+" < "+p+".length; "+I+"++) { ",_.errorPath=e.util.getPathExpr(e.errorPath,I,e.opts.jsonPointers,!0);var G=p+"["+I+"]";_.dataPathArr[k]=I;var Y=e.validate(_);_.baseId=j,e.util.varOccurences(Y,O)<2?r+=" "+e.util.varReplace(Y,O,G)+" ":r+=" var "+O+" = "+G+"; "+Y+" ",f&&(r+=" if (!"+w+") break; "),r+=" }"}return f&&(r+=" "+y+" if ("+m+" == errors) {"),r}});var qM=dt((Hke,V3)=>{"use strict";V3.exports=function(e,t,i){var r=" ",o=e.level,s=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,j,p="data"+(s||""),g=e.opts.$data&&l&&l.$data,m;g?(r+=" var schema"+o+" = "+e.util.getData(l.$data,s,e.dataPathArr)+"; ",m="schema"+o):m=l;var _=t=="maximum",y=_?"exclusiveMaximum":"exclusiveMinimum",w=e.schema[y],I=e.opts.$data&&w&&w.$data,k=_?"<":">",O=_?">":"<",j=void 0;if(!(g||typeof l=="number"||l===void 0))throw new Error(t+" must be number");if(!(I||w===void 0||typeof w=="number"||typeof w=="boolean"))throw new Error(y+" must be number or boolean");if(I){var q=e.util.getData(w.$data,s,e.dataPathArr),V="exclusive"+o,re="exclType"+o,P="exclIsNumber"+o,X="op"+o,se="' + "+X+" + '";r+=" var schemaExcl"+o+" = "+q+"; ",q="schemaExcl"+o,r+=" var "+V+"; var "+re+" = typeof "+q+"; if ("+re+" != 'boolean' && "+re+" != 'undefined' && "+re+" != 'number') { ";var j=y,ue=ue||[];ue.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(j||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: '"+y+" should be boolean' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ";var me=r;r=ue.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+me+"]); ":r+=" validate.errors = ["+me+"]; return false; ":r+=" var err = "+me+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else if ( ",g&&(r+=" ("+m+" !== undefined && typeof "+m+" != 'number') || "),r+=" "+re+" == 'number' ? ( ("+V+" = "+m+" === undefined || "+q+" "+k+"= "+m+") ? "+p+" "+O+"= "+q+" : "+p+" "+O+" "+m+" ) : ( ("+V+" = "+q+" === true) ? "+p+" "+O+"= "+m+" : "+p+" "+O+" "+m+" ) || "+p+" !== "+p+") { var op"+o+" = "+V+" ? '"+k+"' : '"+k+"='; ",l===void 0&&(j=y,d=e.errSchemaPath+"/"+y,m=q,g=I)}else{var P=typeof w=="number",se=k;if(P&&g){var X="'"+se+"'";r+=" if ( ",g&&(r+=" ("+m+" !== undefined && typeof "+m+" != 'number') || "),r+=" ( "+m+" === undefined || "+w+" "+k+"= "+m+" ? "+p+" "+O+"= "+w+" : "+p+" "+O+" "+m+" ) || "+p+" !== "+p+") { "}else{P&&l===void 0?(V=!0,j=y,d=e.errSchemaPath+"/"+y,m=w,O+="="):(P&&(m=Math[_?"min":"max"](w,l)),w===(P?m:!0)?(V=!0,j=y,d=e.errSchemaPath+"/"+y,O+="="):(V=!1,se+="="));var X="'"+se+"'";r+=" if ( ",g&&(r+=" ("+m+" !== undefined && typeof "+m+" != 'number') || "),r+=" "+p+" "+O+" "+m+" || "+p+" !== "+p+") { "}}j=j||t;var ue=ue||[];ue.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(j||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { comparison: "+X+", limit: "+m+", exclusive: "+V+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be "+se+" ",g?r+="' + "+m:r+=""+m+"'"),e.opts.verbose&&(r+=" , schema:  ",g?r+="validate.schema"+c:r+=""+l,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ";var me=r;return r=ue.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+me+"]); ":r+=" validate.errors = ["+me+"]; return false; ":r+=" var err = "+me+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",f&&(r+=" else { "),r}});var WM=dt((qke,z3)=>{"use strict";z3.exports=function(e,t,i){var r=" ",o=e.level,s=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,y,p="data"+(s||""),g=e.opts.$data&&l&&l.$data,m;if(g?(r+=" var schema"+o+" = "+e.util.getData(l.$data,s,e.dataPathArr)+"; ",m="schema"+o):m=l,!(g||typeof l=="number"))throw new Error(t+" must be number");var _=t=="maxItems"?">":"<";r+="if ( ",g&&(r+=" ("+m+" !== undefined && typeof "+m+" != 'number') || "),r+=" "+p+".length "+_+" "+m+") { ";var y=t,w=w||[];w.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(y||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { limit: "+m+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",t=="maxItems"?r+="more":r+="fewer",r+=" than ",g?r+="' + "+m+" + '":r+=""+l,r+=" items' "),e.opts.verbose&&(r+=" , schema:  ",g?r+="validate.schema"+c:r+=""+l,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ";var I=r;return r=w.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+I+"]); ":r+=" validate.errors = ["+I+"]; return false; ":r+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",f&&(r+=" else { "),r}});var GM=dt((Wke,$3)=>{"use strict";$3.exports=function(e,t,i){var r=" ",o=e.level,s=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,y,p="data"+(s||""),g=e.opts.$data&&l&&l.$data,m;if(g?(r+=" var schema"+o+" = "+e.util.getData(l.$data,s,e.dataPathArr)+"; ",m="schema"+o):m=l,!(g||typeof l=="number"))throw new Error(t+" must be number");var _=t=="maxLength"?">":"<";r+="if ( ",g&&(r+=" ("+m+" !== undefined && typeof "+m+" != 'number') || "),e.opts.unicode===!1?r+=" "+p+".length ":r+=" ucs2length("+p+") ",r+=" "+_+" "+m+") { ";var y=t,w=w||[];w.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(y||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { limit: "+m+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be ",t=="maxLength"?r+="longer":r+="shorter",r+=" than ",g?r+="' + "+m+" + '":r+=""+l,r+=" characters' "),e.opts.verbose&&(r+=" , schema:  ",g?r+="validate.schema"+c:r+=""+l,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ";var I=r;return r=w.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+I+"]); ":r+=" validate.errors = ["+I+"]; return false; ":r+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",f&&(r+=" else { "),r}});var ZM=dt((Gke,U3)=>{"use strict";U3.exports=function(e,t,i){var r=" ",o=e.level,s=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,y,p="data"+(s||""),g=e.opts.$data&&l&&l.$data,m;if(g?(r+=" var schema"+o+" = "+e.util.getData(l.$data,s,e.dataPathArr)+"; ",m="schema"+o):m=l,!(g||typeof l=="number"))throw new Error(t+" must be number");var _=t=="maxProperties"?">":"<";r+="if ( ",g&&(r+=" ("+m+" !== undefined && typeof "+m+" != 'number') || "),r+=" Object.keys("+p+").length "+_+" "+m+") { ";var y=t,w=w||[];w.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(y||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { limit: "+m+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",t=="maxProperties"?r+="more":r+="fewer",r+=" than ",g?r+="' + "+m+" + '":r+=""+l,r+=" properties' "),e.opts.verbose&&(r+=" , schema:  ",g?r+="validate.schema"+c:r+=""+l,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ";var I=r;return r=w.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+I+"]); ":r+=" validate.errors = ["+I+"]; return false; ":r+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",f&&(r+=" else { "),r}});var q3=dt((Zke,H3)=>{"use strict";H3.exports=function(e,t,i){var r=" ",o=e.level,s=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(s||""),g=e.opts.$data&&l&&l.$data,m;if(g?(r+=" var schema"+o+" = "+e.util.getData(l.$data,s,e.dataPathArr)+"; ",m="schema"+o):m=l,!(g||typeof l=="number"))throw new Error(t+" must be number");r+="var division"+o+";if (",g&&(r+=" "+m+" !== undefined && ( typeof "+m+" != 'number' || "),r+=" (division"+o+" = "+p+" / "+m+", ",e.opts.multipleOfPrecision?r+=" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+e.opts.multipleOfPrecision+" ":r+=" division"+o+" !== parseInt(division"+o+") ",r+=" ) ",g&&(r+="  )  "),r+=" ) {   ";var _=_||[];_.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { multipleOf: "+m+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be multiple of ",g?r+="' + "+m:r+=""+m+"'"),e.opts.verbose&&(r+=" , schema:  ",g?r+="validate.schema"+c:r+=""+l,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ";var y=r;return r=_.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",f&&(r+=" else { "),r}});var G3=dt((Kke,W3)=>{"use strict";W3.exports=function(e,t,i){var r=" ",o=e.level,s=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(s||""),g="errs__"+o,m=e.util.copy(e);m.level++;var _="valid"+m.level;if(e.opts.strictKeywords?typeof l=="object"&&Object.keys(l).length>0||l===!1:e.util.schemaHasRules(l,e.RULES.all)){m.schema=l,m.schemaPath=c,m.errSchemaPath=d,r+=" var "+g+" = errors;  ";var y=e.compositeRule;e.compositeRule=m.compositeRule=!0,m.createErrors=!1;var w;m.opts.allErrors&&(w=m.opts.allErrors,m.opts.allErrors=!1),r+=" "+e.validate(m)+" ",m.createErrors=!0,w&&(m.opts.allErrors=w),e.compositeRule=m.compositeRule=y,r+=" if ("+_+") {   ";var I=I||[];I.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ";var k=r;r=I.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+k+"]); ":r+=" validate.errors = ["+k+"]; return false; ":r+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  errors = "+g+"; if (vErrors !== null) { if ("+g+") vErrors.length = "+g+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else r+="  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",f&&(r+=" if (false) { ");return r}});var K3=dt((Yke,Z3)=>{"use strict";Z3.exports=function(e,t,i){var r=" ",o=e.level,s=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(s||""),g="valid"+o,m="errs__"+o,_=e.util.copy(e),y="";_.level++;var w="valid"+_.level,I=_.baseId,k="prevValid"+o,O="passingSchemas"+o;r+="var "+m+" = errors , "+k+" = false , "+g+" = false , "+O+" = null; ";var j=e.compositeRule;e.compositeRule=_.compositeRule=!0;var q=l;if(q)for(var V,re=-1,P=q.length-1;re<P;)V=q[re+=1],(e.opts.strictKeywords?typeof V=="object"&&Object.keys(V).length>0||V===!1:e.util.schemaHasRules(V,e.RULES.all))?(_.schema=V,_.schemaPath=c+"["+re+"]",_.errSchemaPath=d+"/"+re,r+="  "+e.validate(_)+" ",_.baseId=I):r+=" var "+w+" = true; ",re&&(r+=" if ("+w+" && "+k+") { "+g+" = false; "+O+" = ["+O+", "+re+"]; } else { ",y+="}"),r+=" if ("+w+") { "+g+" = "+k+" = true; "+O+" = "+re+"; }";return e.compositeRule=_.compositeRule=j,r+=""+y+"if (!"+g+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { passingSchemas: "+O+" } ",e.opts.messages!==!1&&(r+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+="} else {  errors = "+m+"; if (vErrors !== null) { if ("+m+") vErrors.length = "+m+"; else vErrors = null; }",e.opts.allErrors&&(r+=" } "),r}});var Q3=dt((Qke,Y3)=>{"use strict";Y3.exports=function(e,t,i){var r=" ",o=e.level,s=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(s||""),g=e.opts.$data&&l&&l.$data,m;g?(r+=" var schema"+o+" = "+e.util.getData(l.$data,s,e.dataPathArr)+"; ",m="schema"+o):m=l;var _=g?"(new RegExp("+m+"))":e.usePattern(l);r+="if ( ",g&&(r+=" ("+m+" !== undefined && typeof "+m+" != 'string') || "),r+=" !"+_+".test("+p+") ) {   ";var y=y||[];y.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { pattern:  ",g?r+=""+m:r+=""+e.util.toQuotedString(l),r+="  } ",e.opts.messages!==!1&&(r+=` , message: 'should match pattern "`,g?r+="' + "+m+" + '":r+=""+e.util.escapeQuotes(l),r+=`"' `),e.opts.verbose&&(r+=" , schema:  ",g?r+="validate.schema"+c:r+=""+e.util.toQuotedString(l),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ";var w=r;return r=y.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+w+"]); ":r+=" validate.errors = ["+w+"]; return false; ":r+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",f&&(r+=" else { "),r}});var J3=dt((Xke,X3)=>{"use strict";X3.exports=function(e,t,i){var r=" ",o=e.level,s=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(s||""),g="errs__"+o,m=e.util.copy(e),_="";m.level++;var y="valid"+m.level,w="key"+o,I="idx"+o,k=m.dataLevel=e.dataLevel+1,O="data"+k,j="dataProperties"+o,q=Object.keys(l||{}).filter(ie),V=e.schema.patternProperties||{},re=Object.keys(V).filter(ie),P=e.schema.additionalProperties,X=q.length||re.length,se=P===!1,ue=typeof P=="object"&&Object.keys(P).length,me=e.opts.removeAdditional,G=se||ue||me,Y=e.opts.ownProperties,ne=e.baseId,W=e.schema.required;if(W&&!(e.opts.$data&&W.$data)&&W.length<e.opts.loopRequired)var he=e.util.toHash(W);function ie(oo){return oo!=="__proto__"}if(r+="var "+g+" = errors;var "+y+" = true;",Y&&(r+=" var "+j+" = undefined;"),G){if(Y?r+=" "+j+" = "+j+" || Object.keys("+p+"); for (var "+I+"=0; "+I+"<"+j+".length; "+I+"++) { var "+w+" = "+j+"["+I+"]; ":r+=" for (var "+w+" in "+p+") { ",X){if(r+=" var isAdditional"+o+" = !(false ",q.length)if(q.length>8)r+=" || validate.schema"+c+".hasOwnProperty("+w+") ";else{var be=q;if(be)for(var xe,ut=-1,nt=be.length-1;ut<nt;)xe=be[ut+=1],r+=" || "+w+" == "+e.util.toQuotedString(xe)+" "}if(re.length){var Je=re;if(Je)for(var Ee,tn=-1,M=Je.length-1;tn<M;)Ee=Je[tn+=1],r+=" || "+e.usePattern(Ee)+".test("+w+") "}r+=" ); if (isAdditional"+o+") { "}if(me=="all")r+=" delete "+p+"["+w+"]; ";else{var A=e.errorPath,le="' + "+w+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,w,e.opts.jsonPointers)),se)if(me)r+=" delete "+p+"["+w+"]; ";else{r+=" "+y+" = false; ";var H=d;d=e.errSchemaPath+"/additionalProperties";var qe=qe||[];qe.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { additionalProperty: '"+le+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is an invalid additional property":r+="should NOT have additional properties",r+="' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ";var gt=r;r=qe.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+gt+"]); ":r+=" validate.errors = ["+gt+"]; return false; ":r+=" var err = "+gt+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d=H,f&&(r+=" break; ")}else if(ue)if(me=="failing"){r+=" var "+g+" = errors;  ";var dn=e.compositeRule;e.compositeRule=m.compositeRule=!0,m.schema=P,m.schemaPath=e.schemaPath+".additionalProperties",m.errSchemaPath=e.errSchemaPath+"/additionalProperties",m.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,w,e.opts.jsonPointers);var Yt=p+"["+w+"]";m.dataPathArr[k]=w;var pt=e.validate(m);m.baseId=ne,e.util.varOccurences(pt,O)<2?r+=" "+e.util.varReplace(pt,O,Yt)+" ":r+=" var "+O+" = "+Yt+"; "+pt+" ",r+=" if (!"+y+") { errors = "+g+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+p+"["+w+"]; }  ",e.compositeRule=m.compositeRule=dn}else{m.schema=P,m.schemaPath=e.schemaPath+".additionalProperties",m.errSchemaPath=e.errSchemaPath+"/additionalProperties",m.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,w,e.opts.jsonPointers);var Yt=p+"["+w+"]";m.dataPathArr[k]=w;var pt=e.validate(m);m.baseId=ne,e.util.varOccurences(pt,O)<2?r+=" "+e.util.varReplace(pt,O,Yt)+" ":r+=" var "+O+" = "+Yt+"; "+pt+" ",f&&(r+=" if (!"+y+") break; ")}e.errorPath=A}X&&(r+=" } "),r+=" }  ",f&&(r+=" if ("+y+") { ",_+="}")}var Ei=e.opts.useDefaults&&!e.compositeRule;if(q.length){var nn=q;if(nn)for(var xe,Ii=-1,Io=nn.length-1;Ii<Io;){xe=nn[Ii+=1];var zn=l[xe];if(e.opts.strictKeywords?typeof zn=="object"&&Object.keys(zn).length>0||zn===!1:e.util.schemaHasRules(zn,e.RULES.all)){var Si=e.util.getProperty(xe),Yt=p+Si,di=Ei&&zn.default!==void 0;m.schema=zn,m.schemaPath=c+Si,m.errSchemaPath=d+"/"+e.util.escapeFragment(xe),m.errorPath=e.util.getPath(e.errorPath,xe,e.opts.jsonPointers),m.dataPathArr[k]=e.util.toQuotedString(xe);var pt=e.validate(m);if(m.baseId=ne,e.util.varOccurences(pt,O)<2){pt=e.util.varReplace(pt,O,Yt);var Yi=Yt}else{var Yi=O;r+=" var "+O+" = "+Yt+"; "}if(di)r+=" "+pt+" ";else{if(he&&he[xe]){r+=" if ( "+Yi+" === undefined ",Y&&(r+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(xe)+"') "),r+=") { "+y+" = false; ";var A=e.errorPath,H=d,So=e.util.escapeQuotes(xe);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(A,xe,e.opts.jsonPointers)),d=e.errSchemaPath+"/required";var qe=qe||[];qe.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+So+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+So+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ";var gt=r;r=qe.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+gt+"]); ":r+=" validate.errors = ["+gt+"]; return false; ":r+=" var err = "+gt+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d=H,e.errorPath=A,r+=" } else { "}else f?(r+=" if ( "+Yi+" === undefined ",Y&&(r+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(xe)+"') "),r+=") { "+y+" = true; } else { "):(r+=" if ("+Yi+" !== undefined ",Y&&(r+=" &&   Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(xe)+"') "),r+=" ) { ");r+=" "+pt+" } "}}f&&(r+=" if ("+y+") { ",_+="}")}}if(re.length){var Qi=re;if(Qi)for(var Ee,Xc=-1,Vd=Qi.length-1;Xc<Vd;){Ee=Qi[Xc+=1];var zn=V[Ee];if(e.opts.strictKeywords?typeof zn=="object"&&Object.keys(zn).length>0||zn===!1:e.util.schemaHasRules(zn,e.RULES.all)){m.schema=zn,m.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(Ee),m.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(Ee),Y?r+=" "+j+" = "+j+" || Object.keys("+p+"); for (var "+I+"=0; "+I+"<"+j+".length; "+I+"++) { var "+w+" = "+j+"["+I+"]; ":r+=" for (var "+w+" in "+p+") { ",r+=" if ("+e.usePattern(Ee)+".test("+w+")) { ",m.errorPath=e.util.getPathExpr(e.errorPath,w,e.opts.jsonPointers);var Yt=p+"["+w+"]";m.dataPathArr[k]=w;var pt=e.validate(m);m.baseId=ne,e.util.varOccurences(pt,O)<2?r+=" "+e.util.varReplace(pt,O,Yt)+" ":r+=" var "+O+" = "+Yt+"; "+pt+" ",f&&(r+=" if (!"+y+") break; "),r+=" } ",f&&(r+=" else "+y+" = true; "),r+=" }  ",f&&(r+=" if ("+y+") { ",_+="}")}}}return f&&(r+=" "+_+" if ("+g+" == errors) {"),r}});var tU=dt((Jke,eU)=>{"use strict";eU.exports=function(e,t,i){var r=" ",o=e.level,s=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(s||""),g="errs__"+o,m=e.util.copy(e),_="";m.level++;var y="valid"+m.level;if(r+="var "+g+" = errors;",e.opts.strictKeywords?typeof l=="object"&&Object.keys(l).length>0||l===!1:e.util.schemaHasRules(l,e.RULES.all)){m.schema=l,m.schemaPath=c,m.errSchemaPath=d;var w="key"+o,I="idx"+o,k="i"+o,O="' + "+w+" + '",j=m.dataLevel=e.dataLevel+1,q="data"+j,V="dataProperties"+o,re=e.opts.ownProperties,P=e.baseId;re&&(r+=" var "+V+" = undefined; "),re?r+=" "+V+" = "+V+" || Object.keys("+p+"); for (var "+I+"=0; "+I+"<"+V+".length; "+I+"++) { var "+w+" = "+V+"["+I+"]; ":r+=" for (var "+w+" in "+p+") { ",r+=" var startErrs"+o+" = errors; ";var X=w,se=e.compositeRule;e.compositeRule=m.compositeRule=!0;var ue=e.validate(m);m.baseId=P,e.util.varOccurences(ue,q)<2?r+=" "+e.util.varReplace(ue,q,X)+" ":r+=" var "+q+" = "+X+"; "+ue+" ",e.compositeRule=m.compositeRule=se,r+=" if (!"+y+") { for (var "+k+"=startErrs"+o+"; "+k+"<errors; "+k+"++) { vErrors["+k+"].propertyName = "+w+"; }   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { propertyName: '"+O+"' } ",e.opts.messages!==!1&&(r+=" , message: 'property name \\'"+O+"\\' is invalid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),f&&(r+=" break; "),r+=" } }"}return f&&(r+=" "+_+" if ("+g+" == errors) {"),r}});var iU=dt((eAe,nU)=>{"use strict";nU.exports=function(e,t,i){var r=" ",o=e.level,s=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(s||""),g="valid"+o,m=e.opts.$data&&l&&l.$data,_;m?(r+=" var schema"+o+" = "+e.util.getData(l.$data,s,e.dataPathArr)+"; ",_="schema"+o):_=l;var y="schema"+o;if(!m)if(l.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var w=[],I=l;if(I)for(var k,O=-1,j=I.length-1;O<j;){k=I[O+=1];var q=e.schema.properties[k];q&&(e.opts.strictKeywords?typeof q=="object"&&Object.keys(q).length>0||q===!1:e.util.schemaHasRules(q,e.RULES.all))||(w[w.length]=k)}}else var w=l;if(m||w.length){var V=e.errorPath,re=m||w.length>=e.opts.loopRequired,P=e.opts.ownProperties;if(f)if(r+=" var missing"+o+"; ",re){m||(r+=" var "+y+" = validate.schema"+c+"; ");var X="i"+o,se="schema"+o+"["+X+"]",ue="' + "+se+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(V,se,e.opts.jsonPointers)),r+=" var "+g+" = true; ",m&&(r+=" if (schema"+o+" === undefined) "+g+" = true; else if (!Array.isArray(schema"+o+")) "+g+" = false; else {"),r+=" for (var "+X+" = 0; "+X+" < "+y+".length; "+X+"++) { "+g+" = "+p+"["+y+"["+X+"]] !== undefined ",P&&(r+=" &&   Object.prototype.hasOwnProperty.call("+p+", "+y+"["+X+"]) "),r+="; if (!"+g+") break; } ",m&&(r+="  }  "),r+="  if (!"+g+") {   ";var me=me||[];me.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+ue+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+ue+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ";var G=r;r=me.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+G+"]); ":r+=" validate.errors = ["+G+"]; return false; ":r+=" var err = "+G+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else{r+=" if ( ";var Y=w;if(Y)for(var ne,X=-1,W=Y.length-1;X<W;){ne=Y[X+=1],X&&(r+=" || ");var he=e.util.getProperty(ne),ie=p+he;r+=" ( ( "+ie+" === undefined ",P&&(r+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(ne)+"') "),r+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?ne:he)+") ) "}r+=") {  ";var se="missing"+o,ue="' + "+se+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(V,se,!0):V+" + "+se);var me=me||[];me.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+ue+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+ue+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ";var G=r;r=me.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+G+"]); ":r+=" validate.errors = ["+G+"]; return false; ":r+=" var err = "+G+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else if(re){m||(r+=" var "+y+" = validate.schema"+c+"; ");var X="i"+o,se="schema"+o+"["+X+"]",ue="' + "+se+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(V,se,e.opts.jsonPointers)),m&&(r+=" if ("+y+" && !Array.isArray("+y+")) {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+ue+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+ue+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+y+" !== undefined) { "),r+=" for (var "+X+" = 0; "+X+" < "+y+".length; "+X+"++) { if ("+p+"["+y+"["+X+"]] === undefined ",P&&(r+=" || ! Object.prototype.hasOwnProperty.call("+p+", "+y+"["+X+"]) "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+ue+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+ue+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",m&&(r+="  }  ")}else{var be=w;if(be)for(var ne,xe=-1,ut=be.length-1;xe<ut;){ne=be[xe+=1];var he=e.util.getProperty(ne),ue=e.util.escapeQuotes(ne),ie=p+he;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(V,ne,e.opts.jsonPointers)),r+=" if ( "+ie+" === undefined ",P&&(r+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(ne)+"') "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+ue+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+ue+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=V}else f&&(r+=" if (true) {");return r}});var oU=dt((tAe,rU)=>{"use strict";rU.exports=function(e,t,i){var r=" ",o=e.level,s=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(s||""),g="valid"+o,m=e.opts.$data&&l&&l.$data,_;if(m?(r+=" var schema"+o+" = "+e.util.getData(l.$data,s,e.dataPathArr)+"; ",_="schema"+o):_=l,(l||m)&&e.opts.uniqueItems!==!1){m&&(r+=" var "+g+"; if ("+_+" === false || "+_+" === undefined) "+g+" = true; else if (typeof "+_+" != 'boolean') "+g+" = false; else { "),r+=" var i = "+p+".length , "+g+" = true , j; if (i > 1) { ";var y=e.schema.items&&e.schema.items.type,w=Array.isArray(y);if(!y||y=="object"||y=="array"||w&&(y.indexOf("object")>=0||y.indexOf("array")>=0))r+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+p+"[i], "+p+"[j])) { "+g+" = false; break outer; } } } ";else{r+=" var itemIndices = {}, item; for (;i--;) { var item = "+p+"[i]; ";var I="checkDataType"+(w?"s":"");r+=" if ("+e.util[I](y,"item",e.opts.strictNumbers,!0)+") continue; ",w&&(r+=` if (typeof item == 'string') item = '"' + item; `),r+=" if (typeof itemIndices[item] == 'number') { "+g+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}r+=" } ",m&&(r+="  }  "),r+=" if (!"+g+") {   ";var k=k||[];k.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(r+=" , schema:  ",m?r+="validate.schema"+c:r+=""+l,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ";var O=r;r=k.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+O+"]); ":r+=" validate.errors = ["+O+"]; return false; ":r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",f&&(r+=" else { ")}else f&&(r+=" if (true) { ");return r}});var aU=dt((nAe,sU)=>{"use strict";sU.exports={$ref:b3(),allOf:w3(),anyOf:C3(),$comment:I3(),const:D3(),contains:k3(),dependencies:M3(),enum:O3(),format:N3(),if:L3(),items:B3(),maximum:qM(),minimum:qM(),maxItems:WM(),minItems:WM(),maxLength:GM(),minLength:GM(),maxProperties:ZM(),minProperties:ZM(),multipleOf:q3(),not:G3(),oneOf:K3(),pattern:Q3(),properties:J3(),propertyNames:tU(),required:iU(),uniqueItems:oU(),validate:UM()}});var uU=dt((iAe,cU)=>{"use strict";var lU=aU(),KM=Hu().toHash;cU.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"],i=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],r=["number","integer","string","array","object","boolean","null"];return e.all=KM(t),e.types=KM(r),e.forEach(function(o){o.rules=o.rules.map(function(s){var l;if(typeof s=="object"){var c=Object.keys(s)[0];l=s[c],s=c,l.forEach(function(f){t.push(f),e.all[f]=!0})}t.push(s);var d=e.all[s]={keyword:s,code:lU[s],implements:l};return d}),e.all.$comment={keyword:"$comment",code:lU.$comment},o.type&&(e.types[o.type]=o)}),e.keywords=KM(t.concat(i)),e.custom={},e}});var fU=dt((rAe,hU)=>{"use strict";var dU=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];hU.exports=function(n,e){for(var t=0;t<e.length;t++){n=JSON.parse(JSON.stringify(n));var i=e[t].split("/"),r=n,o;for(o=1;o<i.length;o++)r=r[i[o]];for(o=0;o<dU.length;o++){var s=dU[o],l=r[s];l&&(r[s]={anyOf:[l,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return n}});var gU=dt((oAe,mU)=>{"use strict";var kne=jw().MissingRef;mU.exports=pU;function pU(n,e,t){var i=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(t=e,e=void 0);var r=o(n).then(function(){var l=i._addSchema(n,void 0,e);return l.validate||s(l)});return t&&r.then(function(l){t(null,l)},t),r;function o(l){var c=l.$schema;return c&&!i.getSchema(c)?pU.call(i,{$ref:c},!0):Promise.resolve()}function s(l){try{return i._compile(l)}catch(d){if(d instanceof kne)return c(d);throw d}function c(d){var f=d.missingSchema;if(m(f))throw new Error("Schema "+f+" is loaded but "+d.missingRef+" cannot be resolved");var p=i._loadingSchemas[f];return p||(p=i._loadingSchemas[f]=i._opts.loadSchema(f),p.then(g,g)),p.then(function(_){if(!m(f))return o(_).then(function(){m(f)||i.addSchema(_,f,void 0,e)})}).then(function(){return s(l)});function g(){delete i._loadingSchemas[f]}function m(_){return i._refs[_]||i._schemas[_]}}}}});var vU=dt((sAe,_U)=>{"use strict";_U.exports=function(e,t,i){var r=" ",o=e.level,s=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p,g="data"+(s||""),m="valid"+o,_="errs__"+o,y=e.opts.$data&&l&&l.$data,w;y?(r+=" var schema"+o+" = "+e.util.getData(l.$data,s,e.dataPathArr)+"; ",w="schema"+o):w=l;var I=this,k="definition"+o,O=I.definition,j="",q,V,re,P,X;if(y&&O.$data){X="keywordValidate"+o;var se=O.validateSchema;r+=" var "+k+" = RULES.custom['"+t+"'].definition; var "+X+" = "+k+".validate;"}else{if(P=e.useCustomRule(I,l,e.schema,e),!P)return;w="validate.schema"+c,X=P.code,q=O.compile,V=O.inline,re=O.macro}var ue=X+".errors",me="i"+o,G="ruleErr"+o,Y=O.async;if(Y&&!e.async)throw new Error("async keyword in sync schema");if(V||re||(r+=""+ue+" = null;"),r+="var "+_+" = errors;var "+m+";",y&&O.$data&&(j+="}",r+=" if ("+w+" === undefined) { "+m+" = true; } else { ",se&&(j+="}",r+=" "+m+" = "+k+".validateSchema("+w+"); if ("+m+") { ")),V)O.statements?r+=" "+P.validate+" ":r+=" "+m+" = "+P.validate+"; ";else if(re){var ne=e.util.copy(e),j="";ne.level++;var W="valid"+ne.level;ne.schema=P.validate,ne.schemaPath="";var he=e.compositeRule;e.compositeRule=ne.compositeRule=!0;var ie=e.validate(ne).replace(/validate\.schema/g,X);e.compositeRule=ne.compositeRule=he,r+=" "+ie}else{var be=be||[];be.push(r),r="",r+="  "+X+".call( ",e.opts.passContext?r+="this":r+="self",q||O.schema===!1?r+=" , "+g+" ":r+=" , "+w+" , "+g+" , validate.schema"+e.schemaPath+" ",r+=" , (dataPath || '')",e.errorPath!='""'&&(r+=" + "+e.errorPath);var xe=s?"data"+(s-1||""):"parentData",ut=s?e.dataPathArr[s]:"parentDataProperty";r+=" , "+xe+" , "+ut+" , rootData )  ";var nt=r;r=be.pop(),O.errors===!1?(r+=" "+m+" = ",Y&&(r+="await "),r+=""+nt+"; "):Y?(ue="customErrors"+o,r+=" var "+ue+" = null; try { "+m+" = await "+nt+"; } catch (e) { "+m+" = false; if (e instanceof ValidationError) "+ue+" = e.errors; else throw e; } "):r+=" "+ue+" = null; "+m+" = "+nt+"; "}if(O.modifying&&(r+=" if ("+xe+") "+g+" = "+xe+"["+ut+"];"),r+=""+j,O.valid)f&&(r+=" if (true) { ");else{r+=" if ( ",O.valid===void 0?(r+=" !",re?r+=""+W:r+=""+m):r+=" "+!O.valid+" ",r+=") { ",p=I.keyword;var be=be||[];be.push(r),r="";var be=be||[];be.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(p||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { keyword: '"+I.keyword+"' } ",e.opts.messages!==!1&&(r+=` , message: 'should pass "`+I.keyword+`" keyword validation' `),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var Je=r;r=be.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+Je+"]); ":r+=" validate.errors = ["+Je+"]; return false; ":r+=" var err = "+Je+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var Ee=r;r=be.pop(),V?O.errors?O.errors!="full"&&(r+="  for (var "+me+"="+_+"; "+me+"<errors; "+me+"++) { var "+G+" = vErrors["+me+"]; if ("+G+".dataPath === undefined) "+G+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+G+".schemaPath === undefined) { "+G+'.schemaPath = "'+d+'"; } ',e.opts.verbose&&(r+=" "+G+".schema = "+w+"; "+G+".data = "+g+"; "),r+=" } "):O.errors===!1?r+=" "+Ee+" ":(r+=" if ("+_+" == errors) { "+Ee+" } else {  for (var "+me+"="+_+"; "+me+"<errors; "+me+"++) { var "+G+" = vErrors["+me+"]; if ("+G+".dataPath === undefined) "+G+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+G+".schemaPath === undefined) { "+G+'.schemaPath = "'+d+'"; } ',e.opts.verbose&&(r+=" "+G+".schema = "+w+"; "+G+".data = "+g+"; "),r+=" } } "):re?(r+="   var err =   ",e.createErrors!==!1?(r+=" { keyword: '"+(p||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { keyword: '"+I.keyword+"' } ",e.opts.messages!==!1&&(r+=` , message: 'should pass "`+I.keyword+`" keyword validation' `),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; ")):O.errors===!1?r+=" "+Ee+" ":(r+=" if (Array.isArray("+ue+")) { if (vErrors === null) vErrors = "+ue+"; else vErrors = vErrors.concat("+ue+"); errors = vErrors.length;  for (var "+me+"="+_+"; "+me+"<errors; "+me+"++) { var "+G+" = vErrors["+me+"]; if ("+G+".dataPath === undefined) "+G+".dataPath = (dataPath || '') + "+e.errorPath+";  "+G+'.schemaPath = "'+d+'";  ',e.opts.verbose&&(r+=" "+G+".schema = "+w+"; "+G+".data = "+g+"; "),r+=" } } else { "+Ee+" } "),r+=" } ",f&&(r+=" else { ")}return r}});var YM=dt((aAe,Ane)=>{Ane.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var wU=dt((lAe,yU)=>{"use strict";var bU=YM();yU.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:bU.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:bU.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}});var CU=dt((cAe,xU)=>{"use strict";var Mne=/^[a-z_$][a-z0-9_$-]*$/i,Pne=vU(),One=wU();xU.exports={add:Rne,get:Nne,remove:Fne,validate:QM};function Rne(n,e){var t=this.RULES;if(t.keywords[n])throw new Error("Keyword "+n+" is already defined");if(!Mne.test(n))throw new Error("Keyword "+n+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var i=e.type;if(Array.isArray(i))for(var r=0;r<i.length;r++)s(n,i[r],e);else s(n,i,e);var o=e.metaSchema;o&&(e.$data&&this._opts.$data&&(o={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(o,!0))}t.keywords[n]=t.all[n]=!0;function s(l,c,d){for(var f,p=0;p<t.length;p++){var g=t[p];if(g.type==c){f=g;break}}f||(f={type:c,rules:[]},t.push(f));var m={keyword:l,definition:d,custom:!0,code:Pne,implements:d.implements};f.rules.push(m),t.custom[l]=m}return this}function Nne(n){var e=this.RULES.custom[n];return e?e.definition:this.RULES.keywords[n]||!1}function Fne(n){var e=this.RULES;delete e.keywords[n],delete e.all[n],delete e.custom[n];for(var t=0;t<e.length;t++)for(var i=e[t].rules,r=0;r<i.length;r++)if(i[r].keyword==n){i.splice(r,1);break}return this}function QM(n,e){QM.errors=null;var t=this._validateKeyword=this._validateKeyword||this.compile(One,!0);if(t(n))return!0;if(QM.errors=t.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(t.errors));return!1}});var EU=dt((uAe,Lne)=>{Lne.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var RU=dt((dAe,OU)=>{"use strict";var SU=i3(),qu=Lw(),jne=o3(),DU=FM(),Bne=$M(),Vne=_3(),zne=uU(),TU=fU(),kU=Hu();OU.exports=ei;ei.prototype.validate=Une;ei.prototype.compile=Hne;ei.prototype.addSchema=qne;ei.prototype.addMetaSchema=Wne;ei.prototype.validateSchema=Gne;ei.prototype.getSchema=Kne;ei.prototype.removeSchema=Qne;ei.prototype.addFormat=oie;ei.prototype.errorsText=rie;ei.prototype._addSchema=Xne;ei.prototype._compile=Jne;ei.prototype.compileAsync=gU();var Ww=CU();ei.prototype.addKeyword=Ww.add;ei.prototype.getKeyword=Ww.get;ei.prototype.removeKeyword=Ww.remove;ei.prototype.validateKeyword=Ww.validate;var AU=jw();ei.ValidationError=AU.Validation;ei.MissingRefError=AU.MissingRef;ei.$dataMetaSchema=TU;var qw="http://json-schema.org/draft-07/schema",IU=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],$ne=["/properties"];function ei(n){if(!(this instanceof ei))return new ei(n);n=this._opts=kU.copy(n)||{},die(this),this._schemas={},this._refs={},this._fragments={},this._formats=Vne(n.format),this._cache=n.cache||new jne,this._loadingSchemas={},this._compilations=[],this.RULES=zne(),this._getId=eie(n),n.loopRequired=n.loopRequired||1/0,n.errorDataPath=="property"&&(n._errorDataPathProperty=!0),n.serialize===void 0&&(n.serialize=Bne),this._metaOpts=uie(this),n.formats&&lie(this),n.keywords&&cie(this),sie(this),typeof n.meta=="object"&&this.addMetaSchema(n.meta),n.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),aie(this)}function Une(n,e){var t;if(typeof n=="string"){if(t=this.getSchema(n),!t)throw new Error('no schema with key or ref "'+n+'"')}else{var i=this._addSchema(n);t=i.validate||this._compile(i)}var r=t(e);return t.$async!==!0&&(this.errors=t.errors),r}function Hne(n,e){var t=this._addSchema(n,void 0,e);return t.validate||this._compile(t)}function qne(n,e,t,i){if(Array.isArray(n)){for(var r=0;r<n.length;r++)this.addSchema(n[r],void 0,t,i);return this}var o=this._getId(n);if(o!==void 0&&typeof o!="string")throw new Error("schema id must be string");return e=qu.normalizeId(e||o),PU(this,e),this._schemas[e]=this._addSchema(n,t,i,!0),this}function Wne(n,e,t){return this.addSchema(n,e,t,!0),this}function Gne(n,e){var t=n.$schema;if(t!==void 0&&typeof t!="string")throw new Error("$schema must be a string");if(t=t||this._opts.defaultMeta||Zne(this),!t)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var i=this.validate(t,n);if(!i&&e){var r="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(r);else throw new Error(r)}return i}function Zne(n){var e=n._opts.meta;return n._opts.defaultMeta=typeof e=="object"?n._getId(e)||e:n.getSchema(qw)?qw:void 0,n._opts.defaultMeta}function Kne(n){var e=MU(this,n);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return Yne(this,n)}}function Yne(n,e){var t=qu.schema.call(n,{schema:{}},e);if(t){var i=t.schema,r=t.root,o=t.baseId,s=SU.call(n,i,r,void 0,o);return n._fragments[e]=new DU({ref:e,fragment:!0,schema:i,root:r,baseId:o,validate:s}),s}}function MU(n,e){return e=qu.normalizeId(e),n._schemas[e]||n._refs[e]||n._fragments[e]}function Qne(n){if(n instanceof RegExp)return Hw(this,this._schemas,n),Hw(this,this._refs,n),this;switch(typeof n){case"undefined":return Hw(this,this._schemas),Hw(this,this._refs),this._cache.clear(),this;case"string":var e=MU(this,n);return e&&this._cache.del(e.cacheKey),delete this._schemas[n],delete this._refs[n],this;case"object":var t=this._opts.serialize,i=t?t(n):n;this._cache.del(i);var r=this._getId(n);r&&(r=qu.normalizeId(r),delete this._schemas[r],delete this._refs[r])}return this}function Hw(n,e,t){for(var i in e){var r=e[i];!r.meta&&(!t||t.test(i))&&(n._cache.del(r.cacheKey),delete e[i])}}function Xne(n,e,t,i){if(typeof n!="object"&&typeof n!="boolean")throw new Error("schema should be object or boolean");var r=this._opts.serialize,o=r?r(n):n,s=this._cache.get(o);if(s)return s;i=i||this._opts.addUsedSchema!==!1;var l=qu.normalizeId(this._getId(n));l&&i&&PU(this,l);var c=this._opts.validateSchema!==!1&&!e,d;c&&!(d=l&&l==qu.normalizeId(n.$schema))&&this.validateSchema(n,!0);var f=qu.ids.call(this,n),p=new DU({id:l,schema:n,localRefs:f,cacheKey:o,meta:t});return l[0]!="#"&&i&&(this._refs[l]=p),this._cache.put(o,p),c&&d&&this.validateSchema(n,!0),p}function Jne(n,e){if(n.compiling)return n.validate=r,r.schema=n.schema,r.errors=null,r.root=e||r,n.schema.$async===!0&&(r.$async=!0),r;n.compiling=!0;var t;n.meta&&(t=this._opts,this._opts=this._metaOpts);var i;try{i=SU.call(this,n.schema,e,n.localRefs)}catch(o){throw delete n.validate,o}finally{n.compiling=!1,n.meta&&(this._opts=t)}return n.validate=i,n.refs=i.refs,n.refVal=i.refVal,n.root=i.root,i;function r(){var o=n.validate,s=o.apply(this,arguments);return r.errors=o.errors,s}}function eie(n){switch(n.schemaId){case"auto":return iie;case"id":return tie;default:return nie}}function tie(n){return n.$id&&this.logger.warn("schema $id ignored",n.$id),n.id}function nie(n){return n.id&&this.logger.warn("schema id ignored",n.id),n.$id}function iie(n){if(n.$id&&n.id&&n.$id!=n.id)throw new Error("schema $id is different from id");return n.$id||n.id}function rie(n,e){if(n=n||this.errors,!n)return"No errors";e=e||{};for(var t=e.separator===void 0?", ":e.separator,i=e.dataVar===void 0?"data":e.dataVar,r="",o=0;o<n.length;o++){var s=n[o];s&&(r+=i+s.dataPath+" "+s.message+t)}return r.slice(0,-t.length)}function oie(n,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[n]=e,this}function sie(n){var e;if(n._opts.$data&&(e=EU(),n.addMetaSchema(e,e.$id,!0)),n._opts.meta!==!1){var t=YM();n._opts.$data&&(t=TU(t,$ne)),n.addMetaSchema(t,qw,!0),n._refs["http://json-schema.org/schema"]=qw}}function aie(n){var e=n._opts.schemas;if(e)if(Array.isArray(e))n.addSchema(e);else for(var t in e)n.addSchema(e[t],t)}function lie(n){for(var e in n._opts.formats){var t=n._opts.formats[e];n.addFormat(e,t)}}function cie(n){for(var e in n._opts.keywords){var t=n._opts.keywords[e];n.addKeyword(e,t)}}function PU(n,e){if(n._schemas[e]||n._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function uie(n){for(var e=kU.copy(n._opts),t=0;t<IU.length;t++)delete e[IU[t]];return e}function die(n){var e=n._opts.logger;if(e===!1)n.logger={log:XM,warn:XM,error:XM};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");n.logger=e}}function XM(){}});var J4=dt((Gx,X4)=>{"use strict";(function(n,e){typeof Gx=="object"&&typeof X4<"u"?e(Gx):typeof define=="function"&&define.amd?define(["exports"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.leaflet={}))})(Gx,function(n){"use strict";var e="1.9.4";function t(a){var u,h,v,x;for(h=1,v=arguments.length;h<v;h++){x=arguments[h];for(u in x)a[u]=x[u]}return a}var i=Object.create||function(){function a(){}return function(u){return a.prototype=u,new a}}();function r(a,u){var h=Array.prototype.slice;if(a.bind)return a.bind.apply(a,h.call(arguments,1));var v=h.call(arguments,2);return function(){return a.apply(u,v.length?v.concat(h.call(arguments)):arguments)}}var o=0;function s(a){return"_leaflet_id"in a||(a._leaflet_id=++o),a._leaflet_id}function l(a,u,h){var v,x,T,F;return F=function(){v=!1,x&&(T.apply(h,x),x=!1)},T=function(){v?x=arguments:(a.apply(h,arguments),setTimeout(F,u),v=!0)},T}function c(a,u,h){var v=u[1],x=u[0],T=v-x;return a===v&&h?a:((a-x)%T+T)%T+x}function d(){return!1}function f(a,u){if(u===!1)return a;var h=Math.pow(10,u===void 0?6:u);return Math.round(a*h)/h}function p(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function g(a){return p(a).split(/\s+/)}function m(a,u){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?i(a.options):{});for(var h in u)a.options[h]=u[h];return a.options}function _(a,u,h){var v=[];for(var x in a)v.push(encodeURIComponent(h?x.toUpperCase():x)+"="+encodeURIComponent(a[x]));return(!u||u.indexOf("?")===-1?"?":"&")+v.join("&")}var y=/\{ *([\w_ -]+) *\}/g;function w(a,u){return a.replace(y,function(h,v){var x=u[v];if(x===void 0)throw new Error("No value provided for variable "+h);return typeof x=="function"&&(x=x(u)),x})}var I=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function k(a,u){for(var h=0;h<a.length;h++)if(a[h]===u)return h;return-1}var O="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function j(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var q=0;function V(a){var u=+new Date,h=Math.max(0,16-(u-q));return q=u+h,window.setTimeout(a,h)}var re=window.requestAnimationFrame||j("RequestAnimationFrame")||V,P=window.cancelAnimationFrame||j("CancelAnimationFrame")||j("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function X(a,u,h){if(h&&re===V)a.call(u);else return re.call(window,r(a,u))}function se(a){a&&P.call(window,a)}var ue={__proto__:null,extend:t,create:i,bind:r,get lastId(){return o},stamp:s,throttle:l,wrapNum:c,falseFn:d,formatNum:f,trim:p,splitWords:g,setOptions:m,getParamString:_,template:w,isArray:I,indexOf:k,emptyImageUrl:O,requestFn:re,cancelFn:P,requestAnimFrame:X,cancelAnimFrame:se};function me(){}me.extend=function(a){var u=function(){m(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=u.__super__=this.prototype,v=i(h);v.constructor=u,u.prototype=v;for(var x in this)Object.prototype.hasOwnProperty.call(this,x)&&x!=="prototype"&&x!=="__super__"&&(u[x]=this[x]);return a.statics&&t(u,a.statics),a.includes&&(G(a.includes),t.apply(null,[v].concat(a.includes))),t(v,a),delete v.statics,delete v.includes,v.options&&(v.options=h.options?i(h.options):{},t(v.options,a.options)),v._initHooks=[],v.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var T=0,F=v._initHooks.length;T<F;T++)v._initHooks[T].call(this)}},u},me.include=function(a){var u=this.prototype.options;return t(this.prototype,a),a.options&&(this.prototype.options=u,this.mergeOptions(a.options)),this},me.mergeOptions=function(a){return t(this.prototype.options,a),this},me.addInitHook=function(a){var u=Array.prototype.slice.call(arguments,1),h=typeof a=="function"?a:function(){this[a].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function G(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=I(a)?a:[a];for(var u=0;u<a.length;u++)a[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Y={on:function(a,u,h){if(typeof a=="object")for(var v in a)this._on(v,a[v],u);else{a=g(a);for(var x=0,T=a.length;x<T;x++)this._on(a[x],u,h)}return this},off:function(a,u,h){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var v in a)this._off(v,a[v],u);else{a=g(a);for(var x=arguments.length===1,T=0,F=a.length;T<F;T++)x?this._off(a[T]):this._off(a[T],u,h)}return this},_on:function(a,u,h,v){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(a,u,h)===!1){h===this&&(h=void 0);var x={fn:u,ctx:h};v&&(x.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(x)}},_off:function(a,u,h){var v,x,T;if(this._events&&(v=this._events[a],!!v)){if(arguments.length===1){if(this._firingCount)for(x=0,T=v.length;x<T;x++)v[x].fn=d;delete this._events[a];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var F=this._listens(a,u,h);if(F!==!1){var K=v[F];this._firingCount&&(K.fn=d,this._events[a]=v=v.slice()),v.splice(F,1)}}},fire:function(a,u,h){if(!this.listens(a,h))return this;var v=t({},u,{type:a,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var x=this._events[a];if(x){this._firingCount=this._firingCount+1||1;for(var T=0,F=x.length;T<F;T++){var K=x[T],ee=K.fn;K.once&&this.off(a,ee,K.ctx),ee.call(K.ctx||this,v)}this._firingCount--}}return h&&this._propagateEvent(v),this},listens:function(a,u,h,v){typeof a!="string"&&console.warn('"string" type argument expected');var x=u;typeof u!="function"&&(v=!!u,x=void 0,h=void 0);var T=this._events&&this._events[a];if(T&&T.length&&this._listens(a,x,h)!==!1)return!0;if(v){for(var F in this._eventParents)if(this._eventParents[F].listens(a,u,h,v))return!0}return!1},_listens:function(a,u,h){if(!this._events)return!1;var v=this._events[a]||[];if(!u)return!!v.length;h===this&&(h=void 0);for(var x=0,T=v.length;x<T;x++)if(v[x].fn===u&&v[x].ctx===h)return x;return!1},once:function(a,u,h){if(typeof a=="object")for(var v in a)this._on(v,a[v],u,!0);else{a=g(a);for(var x=0,T=a.length;x<T;x++)this._on(a[x],u,h,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[s(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[s(a)],this},_propagateEvent:function(a){for(var u in this._eventParents)this._eventParents[u].fire(a.type,t({layer:a.target,propagatedFrom:a.target},a),!0)}};Y.addEventListener=Y.on,Y.removeEventListener=Y.clearAllEventListeners=Y.off,Y.addOneTimeEventListener=Y.once,Y.fireEvent=Y.fire,Y.hasEventListeners=Y.listens;var ne=me.extend(Y);function W(a,u,h){this.x=h?Math.round(a):a,this.y=h?Math.round(u):u}var he=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};W.prototype={clone:function(){return new W(this.x,this.y)},add:function(a){return this.clone()._add(ie(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(ie(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new W(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new W(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=he(this.x),this.y=he(this.y),this},distanceTo:function(a){a=ie(a);var u=a.x-this.x,h=a.y-this.y;return Math.sqrt(u*u+h*h)},equals:function(a){return a=ie(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=ie(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+f(this.x)+", "+f(this.y)+")"}};function ie(a,u,h){return a instanceof W?a:I(a)?new W(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new W(a.x,a.y):new W(a,u,h)}function be(a,u){if(a)for(var h=u?[a,u]:a,v=0,x=h.length;v<x;v++)this.extend(h[v])}be.prototype={extend:function(a){var u,h;if(!a)return this;if(a instanceof W||typeof a[0]=="number"||"x"in a)u=h=ie(a);else if(a=xe(a),u=a.min,h=a.max,!u||!h)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=h.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(a){return ie((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return ie(this.min.x,this.max.y)},getTopRight:function(){return ie(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var u,h;return typeof a[0]=="number"||a instanceof W?a=ie(a):a=xe(a),a instanceof be?(u=a.min,h=a.max):u=h=a,u.x>=this.min.x&&h.x<=this.max.x&&u.y>=this.min.y&&h.y<=this.max.y},intersects:function(a){a=xe(a);var u=this.min,h=this.max,v=a.min,x=a.max,T=x.x>=u.x&&v.x<=h.x,F=x.y>=u.y&&v.y<=h.y;return T&&F},overlaps:function(a){a=xe(a);var u=this.min,h=this.max,v=a.min,x=a.max,T=x.x>u.x&&v.x<h.x,F=x.y>u.y&&v.y<h.y;return T&&F},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var u=this.min,h=this.max,v=Math.abs(u.x-h.x)*a,x=Math.abs(u.y-h.y)*a;return xe(ie(u.x-v,u.y-x),ie(h.x+v,h.y+x))},equals:function(a){return a?(a=xe(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function xe(a,u){return!a||a instanceof be?a:new be(a,u)}function ut(a,u){if(a)for(var h=u?[a,u]:a,v=0,x=h.length;v<x;v++)this.extend(h[v])}ut.prototype={extend:function(a){var u=this._southWest,h=this._northEast,v,x;if(a instanceof Je)v=a,x=a;else if(a instanceof ut){if(v=a._southWest,x=a._northEast,!v||!x)return this}else return a?this.extend(Ee(a)||nt(a)):this;return!u&&!h?(this._southWest=new Je(v.lat,v.lng),this._northEast=new Je(x.lat,x.lng)):(u.lat=Math.min(v.lat,u.lat),u.lng=Math.min(v.lng,u.lng),h.lat=Math.max(x.lat,h.lat),h.lng=Math.max(x.lng,h.lng)),this},pad:function(a){var u=this._southWest,h=this._northEast,v=Math.abs(u.lat-h.lat)*a,x=Math.abs(u.lng-h.lng)*a;return new ut(new Je(u.lat-v,u.lng-x),new Je(h.lat+v,h.lng+x))},getCenter:function(){return new Je((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Je(this.getNorth(),this.getWest())},getSouthEast:function(){return new Je(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof Je||"lat"in a?a=Ee(a):a=nt(a);var u=this._southWest,h=this._northEast,v,x;return a instanceof ut?(v=a.getSouthWest(),x=a.getNorthEast()):v=x=a,v.lat>=u.lat&&x.lat<=h.lat&&v.lng>=u.lng&&x.lng<=h.lng},intersects:function(a){a=nt(a);var u=this._southWest,h=this._northEast,v=a.getSouthWest(),x=a.getNorthEast(),T=x.lat>=u.lat&&v.lat<=h.lat,F=x.lng>=u.lng&&v.lng<=h.lng;return T&&F},overlaps:function(a){a=nt(a);var u=this._southWest,h=this._northEast,v=a.getSouthWest(),x=a.getNorthEast(),T=x.lat>u.lat&&v.lat<h.lat,F=x.lng>u.lng&&v.lng<h.lng;return T&&F},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,u){return a?(a=nt(a),this._southWest.equals(a.getSouthWest(),u)&&this._northEast.equals(a.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function nt(a,u){return a instanceof ut?a:new ut(a,u)}function Je(a,u,h){if(isNaN(a)||isNaN(u))throw new Error("Invalid LatLng object: ("+a+", "+u+")");this.lat=+a,this.lng=+u,h!==void 0&&(this.alt=+h)}Je.prototype={equals:function(a,u){if(!a)return!1;a=Ee(a);var h=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return h<=(u===void 0?1e-9:u)},toString:function(a){return"LatLng("+f(this.lat,a)+", "+f(this.lng,a)+")"},distanceTo:function(a){return M.distance(this,Ee(a))},wrap:function(){return M.wrapLatLng(this)},toBounds:function(a){var u=180*a/40075017,h=u/Math.cos(Math.PI/180*this.lat);return nt([this.lat-u,this.lng-h],[this.lat+u,this.lng+h])},clone:function(){return new Je(this.lat,this.lng,this.alt)}};function Ee(a,u,h){return a instanceof Je?a:I(a)&&typeof a[0]!="object"?a.length===3?new Je(a[0],a[1],a[2]):a.length===2?new Je(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new Je(a.lat,"lng"in a?a.lng:a.lon,a.alt):u===void 0?null:new Je(a,u,h)}var tn={latLngToPoint:function(a,u){var h=this.projection.project(a),v=this.scale(u);return this.transformation._transform(h,v)},pointToLatLng:function(a,u){var h=this.scale(u),v=this.transformation.untransform(a,h);return this.projection.unproject(v)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var u=this.projection.bounds,h=this.scale(a),v=this.transformation.transform(u.min,h),x=this.transformation.transform(u.max,h);return new be(v,x)},infinite:!1,wrapLatLng:function(a){var u=this.wrapLng?c(a.lng,this.wrapLng,!0):a.lng,h=this.wrapLat?c(a.lat,this.wrapLat,!0):a.lat,v=a.alt;return new Je(h,u,v)},wrapLatLngBounds:function(a){var u=a.getCenter(),h=this.wrapLatLng(u),v=u.lat-h.lat,x=u.lng-h.lng;if(v===0&&x===0)return a;var T=a.getSouthWest(),F=a.getNorthEast(),K=new Je(T.lat-v,T.lng-x),ee=new Je(F.lat-v,F.lng-x);return new ut(K,ee)}},M=t({},tn,{wrapLng:[-180,180],R:6371e3,distance:function(a,u){var h=Math.PI/180,v=a.lat*h,x=u.lat*h,T=Math.sin((u.lat-a.lat)*h/2),F=Math.sin((u.lng-a.lng)*h/2),K=T*T+Math.cos(v)*Math.cos(x)*F*F,ee=2*Math.atan2(Math.sqrt(K),Math.sqrt(1-K));return this.R*ee}}),A=6378137,le={R:A,MAX_LATITUDE:85.0511287798,project:function(a){var u=Math.PI/180,h=this.MAX_LATITUDE,v=Math.max(Math.min(h,a.lat),-h),x=Math.sin(v*u);return new W(this.R*a.lng*u,this.R*Math.log((1+x)/(1-x))/2)},unproject:function(a){var u=180/Math.PI;return new Je((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*u,a.x*u/this.R)},bounds:function(){var a=A*Math.PI;return new be([-a,-a],[a,a])}()};function H(a,u,h,v){if(I(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=u,this._c=h,this._d=v}H.prototype={transform:function(a,u){return this._transform(a.clone(),u)},_transform:function(a,u){return u=u||1,a.x=u*(this._a*a.x+this._b),a.y=u*(this._c*a.y+this._d),a},untransform:function(a,u){return u=u||1,new W((a.x/u-this._b)/this._a,(a.y/u-this._d)/this._c)}};function qe(a,u,h,v){return new H(a,u,h,v)}var gt=t({},M,{code:"EPSG:3857",projection:le,transformation:function(){var a=.5/(Math.PI*le.R);return qe(a,.5,-a,.5)}()}),dn=t({},gt,{code:"EPSG:900913"});function Yt(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function pt(a,u){var h="",v,x,T,F,K,ee;for(v=0,T=a.length;v<T;v++){for(K=a[v],x=0,F=K.length;x<F;x++)ee=K[x],h+=(x?"L":"M")+ee.x+" "+ee.y;h+=u?N.svg?"z":"x":""}return h||"M0 0"}var Ei=document.documentElement.style,nn="ActiveXObject"in window,Ii=nn&&!document.addEventListener,Io="msLaunchUri"in navigator&&!("documentMode"in document),zn=so("webkit"),Si=so("android"),di=so("android 2")||so("android 3"),Yi=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),So=Si&&so("Google")&&Yi<537&&!("AudioNode"in window),Qi=!!window.opera,Xc=!Io&&so("chrome"),Vd=so("gecko")&&!zn&&!Qi&&!nn,oo=!Xc&&so("safari"),kl=so("phantom"),Wp="OTransition"in Ei,Bv=navigator.platform.indexOf("Win")===0,Al=nn&&"transition"in Ei,zd="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!di,Vv="MozPerspective"in Ei,II=!window.L_DISABLE_3D&&(Al||zd||Vv)&&!Wp&&!kl,Ml=typeof orientation<"u"||so("mobile"),Do=Ml&&zn,SI=Ml&&zd,zv=!window.PointerEvent&&window.MSPointerEvent,$v=!!(window.PointerEvent||zv),Uv="ontouchstart"in window||!!window.TouchEvent,DI=!window.L_NO_TOUCH&&(Uv||$v),TI=Ml&&Qi,Pl=Ml&&Vd,kI=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Hv=function(){var a=!1;try{var u=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",d,u),window.removeEventListener("testPassiveEventSupport",d,u)}catch{}return a}(),AI=function(){return!!document.createElement("canvas").getContext}(),Jc=!!(document.createElementNS&&Yt("svg").createSVGRect),qv=!!Jc&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),MI=!Jc&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var u=a.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}}(),Wv=navigator.platform.indexOf("Mac")===0,PI=navigator.platform.indexOf("Linux")===0;function so(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var N={ie:nn,ielt9:Ii,edge:Io,webkit:zn,android:Si,android23:di,androidStock:So,opera:Qi,chrome:Xc,gecko:Vd,safari:oo,phantom:kl,opera12:Wp,win:Bv,ie3d:Al,webkit3d:zd,gecko3d:Vv,any3d:II,mobile:Ml,mobileWebkit:Do,mobileWebkit3d:SI,msPointer:zv,pointer:$v,touch:DI,touchNative:Uv,mobileOpera:TI,mobileGecko:Pl,retina:kI,passiveEvents:Hv,canvas:AI,svg:Jc,vml:MI,inlineSvg:qv,mac:Wv,linux:PI},R=N.msPointer?"MSPointerDown":"pointerdown",$=N.msPointer?"MSPointerMove":"pointermove",J=N.msPointer?"MSPointerUp":"pointerup",te=N.msPointer?"MSPointerCancel":"pointercancel",Ie={touchstart:R,touchmove:$,touchend:J,touchcancel:te},xt={touchstart:sn,touchmove:vn,touchend:vn,touchcancel:vn},Mt={},Jt=!1;function Qn(a,u,h){return u==="touchstart"&&Qt(),xt[u]?(h=xt[u].bind(this,h),a.addEventListener(Ie[u],h,!1),h):(console.warn("wrong event specified:",u),d)}function Ht(a,u,h){if(!Ie[u]){console.warn("wrong event specified:",u);return}a.removeEventListener(Ie[u],h,!1)}function On(a){Mt[a.pointerId]=a}function Xn(a){Mt[a.pointerId]&&(Mt[a.pointerId]=a)}function Sn(a){delete Mt[a.pointerId]}function Qt(){Jt||(document.addEventListener(R,On,!0),document.addEventListener($,Xn,!0),document.addEventListener(J,Sn,!0),document.addEventListener(te,Sn,!0),Jt=!0)}function vn(a,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var h in Mt)u.touches.push(Mt[h]);u.changedTouches=[u],a(u)}}function sn(a,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&Ji(u),vn(a,u)}function Ma(a){var u={},h,v;for(v in a)h=a[v],u[v]=h&&h.bind?h.bind(a):h;return a=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var yr=200;function Ur(a,u){a.addEventListener("dblclick",u);var h=0,v;function x(T){if(T.detail!==1){v=T.detail;return}if(!(T.pointerType==="mouse"||T.sourceCapabilities&&!T.sourceCapabilities.firesTouchEvents)){var F=aN(T);if(!(F.some(function(ee){return ee instanceof HTMLLabelElement&&ee.attributes.for})&&!F.some(function(ee){return ee instanceof HTMLInputElement||ee instanceof HTMLSelectElement}))){var K=Date.now();K-h<=yr?(v++,v===2&&u(Ma(T))):v=1,h=K}}}return a.addEventListener("click",x),{dblclick:u,simDblclick:x}}function hn(a,u){a.removeEventListener("dblclick",u.dblclick),a.removeEventListener("click",u.simDblclick)}var Xi=Ns(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Fi=Ns(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ao=Fi==="webkitTransition"||Fi==="OTransition"?Fi+"End":"transitionend";function Rs(a){return typeof a=="string"?document.getElementById(a):a}function wr(a,u){var h=a.style[u]||a.currentStyle&&a.currentStyle[u];if((!h||h==="auto")&&document.defaultView){var v=document.defaultView.getComputedStyle(a,null);h=v?v[u]:null}return h==="auto"?null:h}function Lt(a,u,h){var v=document.createElement(a);return v.className=u||"",h&&h.appendChild(v),v}function bn(a){var u=a.parentNode;u&&u.removeChild(a)}function Pa(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function lo(a){var u=a.parentNode;u&&u.lastChild!==a&&u.appendChild(a)}function co(a){var u=a.parentNode;u&&u.firstChild!==a&&u.insertBefore(a,u.firstChild)}function uo(a,u){if(a.classList!==void 0)return a.classList.contains(u);var h=$d(a);return h.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(h)}function mt(a,u){if(a.classList!==void 0)for(var h=g(u),v=0,x=h.length;v<x;v++)a.classList.add(h[v]);else if(!uo(a,u)){var T=$d(a);Qo(a,(T?T+" ":"")+u)}}function Rn(a,u){a.classList!==void 0?a.classList.remove(u):Qo(a,p((" "+$d(a)+" ").replace(" "+u+" "," ")))}function Qo(a,u){a.className.baseVal===void 0?a.className=u:a.className.baseVal=u}function $d(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function Hr(a,u){"opacity"in a.style?a.style.opacity=u:"filter"in a.style&&Gv(a,u)}function Gv(a,u){var h=!1,v="DXImageTransform.Microsoft.Alpha";try{h=a.filters.item(v)}catch{if(u===1)return}u=Math.round(u*100),h?(h.Enabled=u!==100,h.Opacity=u):a.style.filter+=" progid:"+v+"(opacity="+u+")"}function Ns(a){for(var u=document.documentElement.style,h=0;h<a.length;h++)if(a[h]in u)return a[h];return!1}function ho(a,u,h){var v=u||new W(0,0);a.style[Xi]=(N.ie3d?"translate("+v.x+"px,"+v.y+"px)":"translate3d("+v.x+"px,"+v.y+"px,0)")+(h?" scale("+h+")":"")}function Gn(a,u){a._leaflet_pos=u,N.any3d?ho(a,u):(a.style.left=u.x+"px",a.style.top=u.y+"px")}function fo(a){return a._leaflet_pos||new W(0,0)}var eu,Ol,Gp;if("onselectstart"in document)eu=function(){Ct(window,"selectstart",Ji)},Ol=function(){Dn(window,"selectstart",Ji)};else{var xr=Ns(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);eu=function(){if(xr){var a=document.documentElement.style;Gp=a[xr],a[xr]="none"}},Ol=function(){xr&&(document.documentElement.style[xr]=Gp,Gp=void 0)}}function Fs(){Ct(window,"dragstart",Ji)}function tu(){Dn(window,"dragstart",Ji)}var Oa,Ls;function Zv(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(Xo(),Oa=a,Ls=a.style.outlineStyle,a.style.outlineStyle="none",Ct(window,"keydown",Xo))}function Xo(){Oa&&(Oa.style.outlineStyle=Ls,Oa=void 0,Ls=void 0,Dn(window,"keydown",Xo))}function Rl(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function Ud(a){var u=a.getBoundingClientRect();return{x:u.width/a.offsetWidth||1,y:u.height/a.offsetHeight||1,boundingClientRect:u}}var OI={__proto__:null,TRANSFORM:Xi,TRANSITION:Fi,TRANSITION_END:ao,get:Rs,getStyle:wr,create:Lt,remove:bn,empty:Pa,toFront:lo,toBack:co,hasClass:uo,addClass:mt,removeClass:Rn,setClass:Qo,getClass:$d,setOpacity:Hr,testProp:Ns,setTransform:ho,setPosition:Gn,getPosition:fo,get disableTextSelection(){return eu},get enableTextSelection(){return Ol},disableImageDrag:Fs,enableImageDrag:tu,preventOutline:Zv,restoreOutline:Xo,getSizedParentNode:Rl,getScale:Ud};function Ct(a,u,h,v){if(u&&typeof u=="object")for(var x in u)Yv(a,x,u[x],h);else{u=g(u);for(var T=0,F=u.length;T<F;T++)Yv(a,u[T],h,v)}return this}var To="_leaflet_events";function Dn(a,u,h,v){if(arguments.length===1)RI(a),delete a[To];else if(u&&typeof u=="object")for(var x in u)Qv(a,x,u[x],h);else if(u=g(u),arguments.length===2)RI(a,function(K){return k(u,K)!==-1});else for(var T=0,F=u.length;T<F;T++)Qv(a,u[T],h,v);return this}function RI(a,u){for(var h in a[To]){var v=h.split(/\d/)[0];(!u||u(v))&&Qv(a,v,null,null,h)}}var Kv={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Yv(a,u,h,v){var x=u+s(h)+(v?"_"+s(v):"");if(a[To]&&a[To][x])return this;var T=function(K){return h.call(v||a,K||window.event)},F=T;!N.touchNative&&N.pointer&&u.indexOf("touch")===0?T=Qn(a,u,T):N.touch&&u==="dblclick"?T=Ur(a,T):"addEventListener"in a?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?a.addEventListener(Kv[u]||u,T,N.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(T=function(K){K=K||window.event,NI(a,K)&&F(K)},a.addEventListener(Kv[u],T,!1)):a.addEventListener(u,F,!1):a.attachEvent("on"+u,T),a[To]=a[To]||{},a[To][x]=T}function Qv(a,u,h,v,x){x=x||u+s(h)+(v?"_"+s(v):"");var T=a[To]&&a[To][x];if(!T)return this;!N.touchNative&&N.pointer&&u.indexOf("touch")===0?Ht(a,u,T):N.touch&&u==="dblclick"?hn(a,T):"removeEventListener"in a?a.removeEventListener(Kv[u]||u,T,!1):a.detachEvent("on"+u,T),a[To][x]=null}function Nl(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function Xv(a){return Yv(a,"wheel",Nl),this}function Zp(a){return Ct(a,"mousedown touchstart dblclick contextmenu",Nl),a._leaflet_disable_click=!0,this}function Ji(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function nu(a){return Ji(a),Nl(a),this}function aN(a){if(a.composedPath)return a.composedPath();for(var u=[],h=a.target;h;)u.push(h),h=h.parentNode;return u}function lN(a,u){if(!u)return new W(a.clientX,a.clientY);var h=Ud(u),v=h.boundingClientRect;return new W((a.clientX-v.left)/h.x-u.clientLeft,(a.clientY-v.top)/h.y-u.clientTop)}var Cq=N.linux&&N.chrome?window.devicePixelRatio:N.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function cN(a){return N.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/Cq:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function NI(a,u){var h=u.relatedTarget;if(!h)return!0;try{for(;h&&h!==a;)h=h.parentNode}catch{return!1}return h!==a}var Eq={__proto__:null,on:Ct,off:Dn,stopPropagation:Nl,disableScrollPropagation:Xv,disableClickPropagation:Zp,preventDefault:Ji,stop:nu,getPropagationPath:aN,getMousePosition:lN,getWheelDelta:cN,isExternalTarget:NI,addListener:Ct,removeListener:Dn},uN=ne.extend({run:function(a,u,h,v){this.stop(),this._el=a,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(v||.5,.2),this._startPos=fo(a),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=X(this._animate,this),this._step()},_step:function(a){var u=+new Date-this._startTime,h=this._duration*1e3;u<h?this._runFrame(this._easeOut(u/h),a):(this._runFrame(1),this._complete())},_runFrame:function(a,u){var h=this._startPos.add(this._offset.multiplyBy(a));u&&h._round(),Gn(this._el,h),this.fire("step")},_complete:function(){se(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),Xt=ne.extend({options:{crs:gt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,u){u=m(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(Ee(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Fi&&N.any3d&&!N.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ct(this._proxy,ao,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,u,h){if(u=u===void 0?this._zoom:this._limitZoom(u),a=this._limitCenter(Ee(a),u,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=t({animate:h.animate},h.zoom),h.pan=t({animate:h.animate,duration:h.duration},h.pan));var v=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,u,h.zoom):this._tryAnimatedPan(a,h.pan);if(v)return clearTimeout(this._sizeTimer),this}return this._resetView(a,u,h.pan&&h.pan.noMoveStart),this},setZoom:function(a,u){return this._loaded?this.setView(this.getCenter(),a,{zoom:u}):(this._zoom=a,this)},zoomIn:function(a,u){return a=a||(N.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,u)},zoomOut:function(a,u){return a=a||(N.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,u)},setZoomAround:function(a,u,h){var v=this.getZoomScale(u),x=this.getSize().divideBy(2),T=a instanceof W?a:this.latLngToContainerPoint(a),F=T.subtract(x).multiplyBy(1-1/v),K=this.containerPointToLatLng(x.add(F));return this.setView(K,u,{zoom:h})},_getBoundsCenterZoom:function(a,u){u=u||{},a=a.getBounds?a.getBounds():nt(a);var h=ie(u.paddingTopLeft||u.padding||[0,0]),v=ie(u.paddingBottomRight||u.padding||[0,0]),x=this.getBoundsZoom(a,!1,h.add(v));if(x=typeof u.maxZoom=="number"?Math.min(u.maxZoom,x):x,x===1/0)return{center:a.getCenter(),zoom:x};var T=v.subtract(h).divideBy(2),F=this.project(a.getSouthWest(),x),K=this.project(a.getNorthEast(),x),ee=this.unproject(F.add(K).divideBy(2).add(T),x);return{center:ee,zoom:x}},fitBounds:function(a,u){if(a=nt(a),!a.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(a,u);return this.setView(h.center,h.zoom,u)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,u){return this.setView(a,this._zoom,{pan:u})},panBy:function(a,u){if(a=ie(a).round(),u=u||{},!a.x&&!a.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new uN,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){mt(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,h,u.duration||.25,u.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,u,h){if(h=h||{},h.animate===!1||!N.any3d)return this.setView(a,u,h);this._stop();var v=this.project(this.getCenter()),x=this.project(a),T=this.getSize(),F=this._zoom;a=Ee(a),u=u===void 0?F:u;var K=Math.max(T.x,T.y),ee=K*this.getZoomScale(F,u),fe=x.distanceTo(v)||1,Ae=1.42,it=Ae*Ae;function jt(hi){var ub=hi?-1:1,hW=hi?ee:K,fW=ee*ee-K*K+ub*it*it*fe*fe,pW=2*hW*it*fe,WI=fW/pW,HN=Math.sqrt(WI*WI+1)-WI,mW=HN<1e-9?-18:Math.log(HN);return mW}function Cr(hi){return(Math.exp(hi)-Math.exp(-hi))/2}function Li(hi){return(Math.exp(hi)+Math.exp(-hi))/2}function Ao(hi){return Cr(hi)/Li(hi)}var qr=jt(0);function Kd(hi){return K*(Li(qr)/Li(qr+Ae*hi))}function lW(hi){return K*(Li(qr)*Ao(qr+Ae*hi)-Cr(qr))/it}function cW(hi){return 1-Math.pow(1-hi,1.5)}var uW=Date.now(),$N=(jt(1)-qr)/Ae,dW=h.duration?1e3*h.duration:1e3*$N*.8;function UN(){var hi=(Date.now()-uW)/dW,ub=cW(hi)*$N;hi<=1?(this._flyToFrame=X(UN,this),this._move(this.unproject(v.add(x.subtract(v).multiplyBy(lW(ub)/fe)),F),this.getScaleZoom(K/Kd(ub),F),{flyTo:!0})):this._move(a,u)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),UN.call(this),this},flyToBounds:function(a,u){var h=this._getBoundsCenterZoom(a,u);return this.flyTo(h.center,h.zoom,u)},setMaxBounds:function(a){return a=nt(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var u=this.options.minZoom;return this.options.minZoom=a,this._loaded&&u!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var u=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&u!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,u){this._enforcingBounds=!0;var h=this.getCenter(),v=this._limitCenter(h,this._zoom,nt(a));return h.equals(v)||this.panTo(v,u),this._enforcingBounds=!1,this},panInside:function(a,u){u=u||{};var h=ie(u.paddingTopLeft||u.padding||[0,0]),v=ie(u.paddingBottomRight||u.padding||[0,0]),x=this.project(this.getCenter()),T=this.project(a),F=this.getPixelBounds(),K=xe([F.min.add(h),F.max.subtract(v)]),ee=K.getSize();if(!K.contains(T)){this._enforcingBounds=!0;var fe=T.subtract(K.getCenter()),Ae=K.extend(T).getSize().subtract(ee);x.x+=fe.x<0?-Ae.x:Ae.x,x.y+=fe.y<0?-Ae.y:Ae.y,this.panTo(this.unproject(x),u),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=t({animate:!1,pan:!0},a===!0?{animate:!0}:a);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),v=u.divideBy(2).round(),x=h.divideBy(2).round(),T=v.subtract(x);return!T.x&&!T.y?this:(a.animate&&a.pan?this.panBy(T):(a.pan&&this._rawPanBy(T),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=t({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=r(this._handleGeolocationResponse,this),h=r(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,h,a):navigator.geolocation.getCurrentPosition(u,h,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var u=a.code,h=a.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var u=a.coords.latitude,h=a.coords.longitude,v=new Je(u,h),x=v.toBounds(a.coords.accuracy*2),T=this._locateOptions;if(T.setView){var F=this.getBoundsZoom(x);this.setView(v,T.maxZoom?Math.min(F,T.maxZoom):F)}var K={latlng:v,bounds:x,timestamp:a.timestamp};for(var ee in a.coords)typeof a.coords[ee]=="number"&&(K[ee]=a.coords[ee]);this.fire("locationfound",K)}},addHandler:function(a,u){if(!u)return this;var h=this[a]=new u(this);return this._handlers.push(h),this.options[a]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),bn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(se(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)bn(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,u){var h="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),v=Lt("div",h,u||this._mapPane);return a&&(this._panes[a]=v),v},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),u=this.unproject(a.getBottomLeft()),h=this.unproject(a.getTopRight());return new ut(u,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,u,h){a=nt(a),h=ie(h||[0,0]);var v=this.getZoom()||0,x=this.getMinZoom(),T=this.getMaxZoom(),F=a.getNorthWest(),K=a.getSouthEast(),ee=this.getSize().subtract(h),fe=xe(this.project(K,v),this.project(F,v)).getSize(),Ae=N.any3d?this.options.zoomSnap:1,it=ee.x/fe.x,jt=ee.y/fe.y,Cr=u?Math.max(it,jt):Math.min(it,jt);return v=this.getScaleZoom(Cr,v),Ae&&(v=Math.round(v/(Ae/100))*(Ae/100),v=u?Math.ceil(v/Ae)*Ae:Math.floor(v/Ae)*Ae),Math.max(x,Math.min(T,v))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new W(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,u){var h=this._getTopLeftPoint(a,u);return new be(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,u){var h=this.options.crs;return u=u===void 0?this._zoom:u,h.scale(a)/h.scale(u)},getScaleZoom:function(a,u){var h=this.options.crs;u=u===void 0?this._zoom:u;var v=h.zoom(a*h.scale(u));return isNaN(v)?1/0:v},project:function(a,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(Ee(a),u)},unproject:function(a,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(ie(a),u)},layerPointToLatLng:function(a){var u=ie(a).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(a){var u=this.project(Ee(a))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(Ee(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(nt(a))},distance:function(a,u){return this.options.crs.distance(Ee(a),Ee(u))},containerPointToLayerPoint:function(a){return ie(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return ie(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var u=this.containerPointToLayerPoint(ie(a));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ee(a)))},mouseEventToContainerPoint:function(a){return lN(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var u=this._container=Rs(a);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ct(u,"scroll",this._onScroll,this),this._containerId=s(u)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&N.any3d,mt(a,"leaflet-container"+(N.touch?" leaflet-touch":"")+(N.retina?" leaflet-retina":"")+(N.ielt9?" leaflet-oldie":"")+(N.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=wr(a,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Gn(this._mapPane,new W(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(mt(a.markerPane,"leaflet-zoom-hide"),mt(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,u,h){Gn(this._mapPane,new W(0,0));var v=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var x=this._zoom!==u;this._moveStart(x,h)._move(a,u)._moveEnd(x),this.fire("viewreset"),v&&this.fire("load")},_moveStart:function(a,u){return a&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(a,u,h,v){u===void 0&&(u=this._zoom);var x=this._zoom!==u;return this._zoom=u,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),v?h&&h.pinch&&this.fire("zoom",h):((x||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return se(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Gn(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[s(this._container)]=this;var u=a?Dn:Ct;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),N.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){se(this._resizeRequest),this._resizeRequest=X(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,u){for(var h=[],v,x=u==="mouseout"||u==="mouseover",T=a.target||a.srcElement,F=!1;T;){if(v=this._targets[s(T)],v&&(u==="click"||u==="preclick")&&this._draggableMoved(v)){F=!0;break}if(v&&v.listens(u,!0)&&(x&&!NI(T,a)||(h.push(v),x))||T===this._container)break;T=T.parentNode}return!h.length&&!F&&!x&&this.listens(u,!0)&&(h=[this]),h},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var u=a.target||a.srcElement;if(!(!this._loaded||u._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(u))){var h=a.type;h==="mousedown"&&Zv(u),this._fireDOMEvent(a,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,u,h){if(a.type==="click"){var v=t({},a);v.type="preclick",this._fireDOMEvent(v,v.type,h)}var x=this._findEventTargets(a,u);if(h){for(var T=[],F=0;F<h.length;F++)h[F].listens(u,!0)&&T.push(h[F]);x=T.concat(x)}if(x.length){u==="contextmenu"&&Ji(a);var K=x[0],ee={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var fe=K.getLatLng&&(!K._radius||K._radius<=10);ee.containerPoint=fe?this.latLngToContainerPoint(K.getLatLng()):this.mouseEventToContainerPoint(a),ee.layerPoint=this.containerPointToLayerPoint(ee.containerPoint),ee.latlng=fe?K.getLatLng():this.layerPointToLatLng(ee.layerPoint)}for(F=0;F<x.length;F++)if(x[F].fire(u,ee,!0),ee.originalEvent._stopped||x[F].options.bubblingMouseEvents===!1&&k(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,u=this._handlers.length;a<u;a++)this._handlers[a].disable()},whenReady:function(a,u){return this._loaded?a.call(u||this,{target:this}):this.on("load",a,u),this},_getMapPanePos:function(){return fo(this._mapPane)||new W(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,u){var h=a&&u!==void 0?this._getNewPixelOrigin(a,u):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,u){var h=this.getSize()._divideBy(2);return this.project(a,u)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,u,h){var v=this._getNewPixelOrigin(h,u);return this.project(a,u)._subtract(v)},_latLngBoundsToNewLayerBounds:function(a,u,h){var v=this._getNewPixelOrigin(h,u);return xe([this.project(a.getSouthWest(),u)._subtract(v),this.project(a.getNorthWest(),u)._subtract(v),this.project(a.getSouthEast(),u)._subtract(v),this.project(a.getNorthEast(),u)._subtract(v)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,u,h){if(!h)return a;var v=this.project(a,u),x=this.getSize().divideBy(2),T=new be(v.subtract(x),v.add(x)),F=this._getBoundsOffset(T,h,u);return Math.abs(F.x)<=1&&Math.abs(F.y)<=1?a:this.unproject(v.add(F),u)},_limitOffset:function(a,u){if(!u)return a;var h=this.getPixelBounds(),v=new be(h.min.add(a),h.max.add(a));return a.add(this._getBoundsOffset(v,u))},_getBoundsOffset:function(a,u,h){var v=xe(this.project(u.getNorthEast(),h),this.project(u.getSouthWest(),h)),x=v.min.subtract(a.min),T=v.max.subtract(a.max),F=this._rebound(x.x,-T.x),K=this._rebound(x.y,-T.y);return new W(F,K)},_rebound:function(a,u){return a+u>0?Math.round(a-u)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(u))},_limitZoom:function(a){var u=this.getMinZoom(),h=this.getMaxZoom(),v=N.any3d?this.options.zoomSnap:1;return v&&(a=Math.round(a/v)*v),Math.max(u,Math.min(h,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Rn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,u){var h=this._getCenterOffset(a)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,u),!0)},_createAnimProxy:function(){var a=this._proxy=Lt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(u){var h=Xi,v=this._proxy.style[h];ho(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),v===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){bn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),u=this.getZoom();ho(this._proxy,this.project(a,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,u,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var v=this.getZoomScale(u),x=this._getCenterOffset(a)._divideBy(1-1/v);return h.animate!==!0&&!this.getSize().contains(x)?!1:(X(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(a,u,!0)},this),!0)},_animateZoom:function(a,u,h,v){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=u,mt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:u,noUpdate:v}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Rn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Iq(a,u){return new Xt(a,u)}var Jo=me.extend({options:{position:"topright"},initialize:function(a){m(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var u=this._map;return u&&u.removeControl(this),this.options.position=a,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var u=this._container=this.onAdd(a),h=this.getPosition(),v=a._controlCorners[h];return mt(u,"leaflet-control"),h.indexOf("bottom")!==-1?v.insertBefore(u,v.firstChild):v.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(bn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Kp=function(a){return new Jo(a)};Xt.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},u="leaflet-",h=this._controlContainer=Lt("div",u+"control-container",this._container);function v(x,T){var F=u+x+" "+u+T;a[x+T]=Lt("div",F,h)}v("top","left"),v("top","right"),v("bottom","left"),v("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)bn(this._controlCorners[a]);bn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var dN=Jo.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,u,h,v){return h<v?-1:v<h?1:0}},initialize:function(a,u,h){m(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var v in a)this._addLayer(a[v],v);for(v in u)this._addLayer(u[v],v,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return Jo.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,u){return this._addLayer(a,u),this._map?this._update():this},addOverlay:function(a,u){return this._addLayer(a,u,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var u=this._getLayer(s(a));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){mt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(mt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):Rn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Rn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",u=this._container=Lt("div",a),h=this.options.collapsed;u.setAttribute("aria-haspopup",!0),Zp(u),Xv(u);var v=this._section=Lt("section",a+"-list");h&&(this._map.on("click",this.collapse,this),Ct(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var x=this._layersLink=Lt("a",a+"-toggle",u);x.href="#",x.title="Layers",x.setAttribute("role","button"),Ct(x,{keydown:function(T){T.keyCode===13&&this._expandSafely()},click:function(T){Ji(T),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=Lt("div",a+"-base",v),this._separator=Lt("div",a+"-separator",v),this._overlaysList=Lt("div",a+"-overlays",v),u.appendChild(v)},_getLayer:function(a){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&s(this._layers[u].layer)===a)return this._layers[u]},_addLayer:function(a,u,h){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:u,overlay:h}),this.options.sortLayers&&this._layers.sort(r(function(v,x){return this.options.sortFunction(v.layer,x.layer,v.name,x.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Pa(this._baseLayersList),Pa(this._overlaysList),this._layerControlInputs=[];var a,u,h,v,x=0;for(h=0;h<this._layers.length;h++)v=this._layers[h],this._addItem(v),u=u||v.overlay,a=a||!v.overlay,x+=v.overlay?0:1;return this.options.hideSingleBase&&(a=a&&x>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=u&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var u=this._getLayer(s(a.target)),h=u.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;h&&this._map.fire(h,u)},_createRadioElement:function(a,u){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(u?' checked="checked"':"")+"/>",v=document.createElement("div");return v.innerHTML=h,v.firstChild},_addItem:function(a){var u=document.createElement("label"),h=this._map.hasLayer(a.layer),v;a.overlay?(v=document.createElement("input"),v.type="checkbox",v.className="leaflet-control-layers-selector",v.defaultChecked=h):v=this._createRadioElement("leaflet-base-layers_"+s(this),h),this._layerControlInputs.push(v),v.layerId=s(a.layer),Ct(v,"click",this._onInputClick,this);var x=document.createElement("span");x.innerHTML=" "+a.name;var T=document.createElement("span");u.appendChild(T),T.appendChild(v),T.appendChild(x);var F=a.overlay?this._overlaysList:this._baseLayersList;return F.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,u,h,v=[],x=[];this._handlingClick=!0;for(var T=a.length-1;T>=0;T--)u=a[T],h=this._getLayer(u.layerId).layer,u.checked?v.push(h):u.checked||x.push(h);for(T=0;T<x.length;T++)this._map.hasLayer(x[T])&&this._map.removeLayer(x[T]);for(T=0;T<v.length;T++)this._map.hasLayer(v[T])||this._map.addLayer(v[T]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,u,h,v=this._map.getZoom(),x=a.length-1;x>=0;x--)u=a[x],h=this._getLayer(u.layerId).layer,u.disabled=h.options.minZoom!==void 0&&v<h.options.minZoom||h.options.maxZoom!==void 0&&v>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,Ct(a,"click",Ji),this.expand();var u=this;setTimeout(function(){Dn(a,"click",Ji),u._preventClick=!1})}}),Sq=function(a,u,h){return new dN(a,u,h)},FI=Jo.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var u="leaflet-control-zoom",h=Lt("div",u+" leaflet-bar"),v=this.options;return this._zoomInButton=this._createButton(v.zoomInText,v.zoomInTitle,u+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(v.zoomOutText,v.zoomOutTitle,u+"-out",h,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,u,h,v,x){var T=Lt("a",h,v);return T.innerHTML=a,T.href="#",T.title=u,T.setAttribute("role","button"),T.setAttribute("aria-label",u),Zp(T),Ct(T,"click",nu),Ct(T,"click",x,this),Ct(T,"click",this._refocusOnMap,this),T},_updateDisabled:function(){var a=this._map,u="leaflet-disabled";Rn(this._zoomInButton,u),Rn(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(mt(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(mt(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});Xt.mergeOptions({zoomControl:!0}),Xt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new FI,this.addControl(this.zoomControl))});var Dq=function(a){return new FI(a)},hN=Jo.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var u="leaflet-control-scale",h=Lt("div",u),v=this.options;return this._addScales(v,u+"-line",h),a.on(v.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),h},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,u,h){a.metric&&(this._mScale=Lt("div",u,h)),a.imperial&&(this._iScale=Lt("div",u,h))},_update:function(){var a=this._map,u=a.getSize().y/2,h=a.distance(a.containerPointToLatLng([0,u]),a.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(h)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var u=this._getRoundNum(a),h=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,h,u/a)},_updateImperial:function(a){var u=a*3.2808399,h,v,x;u>5280?(h=u/5280,v=this._getRoundNum(h),this._updateScale(this._iScale,v+" mi",v/h)):(x=this._getRoundNum(u),this._updateScale(this._iScale,x+" ft",x/u))},_updateScale:function(a,u,h){a.style.width=Math.round(this.options.maxWidth*h)+"px",a.innerHTML=u},_getRoundNum:function(a){var u=Math.pow(10,(Math.floor(a)+"").length-1),h=a/u;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,u*h}}),Tq=function(a){return new hN(a)},kq='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',LI=Jo.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(N.inlineSvg?kq+" ":"")+"Leaflet</a>"},initialize:function(a){m(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=Lt("div","leaflet-control-attribution"),Zp(this._container);for(var u in a._layers)a._layers[u].getAttribution&&this.addAttribution(a._layers[u].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var u in this._attributions)this._attributions[u]&&a.push(u);var h=[];this.options.prefix&&h.push(this.options.prefix),a.length&&h.push(a.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});Xt.mergeOptions({attributionControl:!0}),Xt.addInitHook(function(){this.options.attributionControl&&new LI().addTo(this)});var Aq=function(a){return new LI(a)};Jo.Layers=dN,Jo.Zoom=FI,Jo.Scale=hN,Jo.Attribution=LI,Kp.layers=Sq,Kp.zoom=Dq,Kp.scale=Tq,Kp.attribution=Aq;var js=me.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});js.addTo=function(a,u){return a.addHandler(u,this),this};var Mq={Events:Y},fN=N.touch?"touchstart mousedown":"mousedown",Fl=ne.extend({options:{clickTolerance:3},initialize:function(a,u,h,v){m(this,v),this._element=a,this._dragStartTarget=u||a,this._preventOutline=h},enable:function(){this._enabled||(Ct(this._dragStartTarget,fN,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Fl._dragging===this&&this.finishDrag(!0),Dn(this._dragStartTarget,fN,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!uo(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){Fl._dragging===this&&this.finishDrag();return}if(!(Fl._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(Fl._dragging=this,this._preventOutline&&Zv(this._element),Fs(),eu(),!this._moving)){this.fire("down");var u=a.touches?a.touches[0]:a,h=Rl(this._element);this._startPoint=new W(u.clientX,u.clientY),this._startPos=fo(this._element),this._parentScale=Ud(h);var v=a.type==="mousedown";Ct(document,v?"mousemove":"touchmove",this._onMove,this),Ct(document,v?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var u=a.touches&&a.touches.length===1?a.touches[0]:a,h=new W(u.clientX,u.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,Ji(a),this._moved||(this.fire("dragstart"),this._moved=!0,mt(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),mt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Gn(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){Rn(document.body,"leaflet-dragging"),this._lastTarget&&(Rn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Dn(document,"mousemove touchmove",this._onMove,this),Dn(document,"mouseup touchend touchcancel",this._onUp,this),tu(),Ol();var u=this._moved&&this._moving;this._moving=!1,Fl._dragging=!1,u&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function pN(a,u,h){var v,x=[1,4,2,8],T,F,K,ee,fe,Ae,it,jt;for(T=0,Ae=a.length;T<Ae;T++)a[T]._code=iu(a[T],u);for(K=0;K<4;K++){for(it=x[K],v=[],T=0,Ae=a.length,F=Ae-1;T<Ae;F=T++)ee=a[T],fe=a[F],ee._code&it?fe._code&it||(jt=Jv(fe,ee,it,u,h),jt._code=iu(jt,u),v.push(jt)):(fe._code&it&&(jt=Jv(fe,ee,it,u,h),jt._code=iu(jt,u),v.push(jt)),v.push(ee));a=v}return a}function mN(a,u){var h,v,x,T,F,K,ee,fe,Ae;if(!a||a.length===0)throw new Error("latlngs not passed");ko(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var it=Ee([0,0]),jt=nt(a),Cr=jt.getNorthWest().distanceTo(jt.getSouthWest())*jt.getNorthEast().distanceTo(jt.getNorthWest());Cr<1700&&(it=jI(a));var Li=a.length,Ao=[];for(h=0;h<Li;h++){var qr=Ee(a[h]);Ao.push(u.project(Ee([qr.lat-it.lat,qr.lng-it.lng])))}for(K=ee=fe=0,h=0,v=Li-1;h<Li;v=h++)x=Ao[h],T=Ao[v],F=x.y*T.x-T.y*x.x,ee+=(x.x+T.x)*F,fe+=(x.y+T.y)*F,K+=F*3;K===0?Ae=Ao[0]:Ae=[ee/K,fe/K];var Kd=u.unproject(ie(Ae));return Ee([Kd.lat+it.lat,Kd.lng+it.lng])}function jI(a){for(var u=0,h=0,v=0,x=0;x<a.length;x++){var T=Ee(a[x]);u+=T.lat,h+=T.lng,v++}return Ee([u/v,h/v])}var Pq={__proto__:null,clipPolygon:pN,polygonCenter:mN,centroid:jI};function gN(a,u){if(!u||!a.length)return a.slice();var h=u*u;return a=Nq(a,h),a=Rq(a,h),a}function _N(a,u,h){return Math.sqrt(Yp(a,u,h,!0))}function Oq(a,u,h){return Yp(a,u,h)}function Rq(a,u){var h=a.length,v=typeof Uint8Array<"u"?Uint8Array:Array,x=new v(h);x[0]=x[h-1]=1,BI(a,x,u,0,h-1);var T,F=[];for(T=0;T<h;T++)x[T]&&F.push(a[T]);return F}function BI(a,u,h,v,x){var T=0,F,K,ee;for(K=v+1;K<=x-1;K++)ee=Yp(a[K],a[v],a[x],!0),ee>T&&(F=K,T=ee);T>h&&(u[F]=1,BI(a,u,h,v,F),BI(a,u,h,F,x))}function Nq(a,u){for(var h=[a[0]],v=1,x=0,T=a.length;v<T;v++)Fq(a[v],a[x])>u&&(h.push(a[v]),x=v);return x<T-1&&h.push(a[T-1]),h}var vN;function bN(a,u,h,v,x){var T=v?vN:iu(a,h),F=iu(u,h),K,ee,fe;for(vN=F;;){if(!(T|F))return[a,u];if(T&F)return!1;K=T||F,ee=Jv(a,u,K,h,x),fe=iu(ee,h),K===T?(a=ee,T=fe):(u=ee,F=fe)}}function Jv(a,u,h,v,x){var T=u.x-a.x,F=u.y-a.y,K=v.min,ee=v.max,fe,Ae;return h&8?(fe=a.x+T*(ee.y-a.y)/F,Ae=ee.y):h&4?(fe=a.x+T*(K.y-a.y)/F,Ae=K.y):h&2?(fe=ee.x,Ae=a.y+F*(ee.x-a.x)/T):h&1&&(fe=K.x,Ae=a.y+F*(K.x-a.x)/T),new W(fe,Ae,x)}function iu(a,u){var h=0;return a.x<u.min.x?h|=1:a.x>u.max.x&&(h|=2),a.y<u.min.y?h|=4:a.y>u.max.y&&(h|=8),h}function Fq(a,u){var h=u.x-a.x,v=u.y-a.y;return h*h+v*v}function Yp(a,u,h,v){var x=u.x,T=u.y,F=h.x-x,K=h.y-T,ee=F*F+K*K,fe;return ee>0&&(fe=((a.x-x)*F+(a.y-T)*K)/ee,fe>1?(x=h.x,T=h.y):fe>0&&(x+=F*fe,T+=K*fe)),F=a.x-x,K=a.y-T,v?F*F+K*K:new W(x,T)}function ko(a){return!I(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function yN(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ko(a)}function wN(a,u){var h,v,x,T,F,K,ee,fe;if(!a||a.length===0)throw new Error("latlngs not passed");ko(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Ae=Ee([0,0]),it=nt(a),jt=it.getNorthWest().distanceTo(it.getSouthWest())*it.getNorthEast().distanceTo(it.getNorthWest());jt<1700&&(Ae=jI(a));var Cr=a.length,Li=[];for(h=0;h<Cr;h++){var Ao=Ee(a[h]);Li.push(u.project(Ee([Ao.lat-Ae.lat,Ao.lng-Ae.lng])))}for(h=0,v=0;h<Cr-1;h++)v+=Li[h].distanceTo(Li[h+1])/2;if(v===0)fe=Li[0];else for(h=0,T=0;h<Cr-1;h++)if(F=Li[h],K=Li[h+1],x=F.distanceTo(K),T+=x,T>v){ee=(T-v)/x,fe=[K.x-ee*(K.x-F.x),K.y-ee*(K.y-F.y)];break}var qr=u.unproject(ie(fe));return Ee([qr.lat+Ae.lat,qr.lng+Ae.lng])}var Lq={__proto__:null,simplify:gN,pointToSegmentDistance:_N,closestPointOnSegment:Oq,clipSegment:bN,_getEdgeIntersection:Jv,_getBitCode:iu,_sqClosestPointOnSegment:Yp,isFlat:ko,_flat:yN,polylineCenter:wN},VI={project:function(a){return new W(a.lng,a.lat)},unproject:function(a){return new Je(a.y,a.x)},bounds:new be([-180,-90],[180,90])},zI={R:6378137,R_MINOR:6356752314245179e-9,bounds:new be([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var u=Math.PI/180,h=this.R,v=a.lat*u,x=this.R_MINOR/h,T=Math.sqrt(1-x*x),F=T*Math.sin(v),K=Math.tan(Math.PI/4-v/2)/Math.pow((1-F)/(1+F),T/2);return v=-h*Math.log(Math.max(K,1e-10)),new W(a.lng*u*h,v)},unproject:function(a){for(var u=180/Math.PI,h=this.R,v=this.R_MINOR/h,x=Math.sqrt(1-v*v),T=Math.exp(-a.y/h),F=Math.PI/2-2*Math.atan(T),K=0,ee=.1,fe;K<15&&Math.abs(ee)>1e-7;K++)fe=x*Math.sin(F),fe=Math.pow((1-fe)/(1+fe),x/2),ee=Math.PI/2-2*Math.atan(T*fe)-F,F+=ee;return new Je(F*u,a.x*u/h)}},jq={__proto__:null,LonLat:VI,Mercator:zI,SphericalMercator:le},Bq=t({},M,{code:"EPSG:3395",projection:zI,transformation:function(){var a=.5/(Math.PI*zI.R);return qe(a,.5,-a,.5)}()}),xN=t({},M,{code:"EPSG:4326",projection:VI,transformation:qe(1/180,1,-1/180,.5)}),Vq=t({},tn,{projection:VI,transformation:qe(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,u){var h=u.lng-a.lng,v=u.lat-a.lat;return Math.sqrt(h*h+v*v)},infinite:!0});tn.Earth=M,tn.EPSG3395=Bq,tn.EPSG3857=gt,tn.EPSG900913=dn,tn.EPSG4326=xN,tn.Simple=Vq;var es=ne.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[s(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[s(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var u=a.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var h=this.getEvents();u.on(h,this),this.once("remove",function(){u.off(h,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});Xt.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var u=s(a);return this._layers[u]?this:(this._layers[u]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var u=s(a);return this._layers[u]?(this._loaded&&a.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return s(a)in this._layers},eachLayer:function(a,u){for(var h in this._layers)a.call(u,this._layers[h]);return this},_addLayers:function(a){a=a?I(a)?a:[a]:[];for(var u=0,h=a.length;u<h;u++)this.addLayer(a[u])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[s(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var u=s(a);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,u=-1/0,h=this._getZoomSpan();for(var v in this._zoomBoundLayers){var x=this._zoomBoundLayers[v].options;a=x.minZoom===void 0?a:Math.min(a,x.minZoom),u=x.maxZoom===void 0?u:Math.max(u,x.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=a===1/0?void 0:a,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Hd=es.extend({initialize:function(a,u){m(this,u),this._layers={};var h,v;if(a)for(h=0,v=a.length;h<v;h++)this.addLayer(a[h])},addLayer:function(a){var u=this.getLayerId(a);return this._layers[u]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var u=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(a){var u=typeof a=="number"?a:this.getLayerId(a);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var u=Array.prototype.slice.call(arguments,1),h,v;for(h in this._layers)v=this._layers[h],v[a]&&v[a].apply(v,u);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,u){for(var h in this._layers)a.call(u,this._layers[h]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return s(a)}}),zq=function(a,u){return new Hd(a,u)},Ra=Hd.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),Hd.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),Hd.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new ut;for(var u in this._layers){var h=this._layers[u];a.extend(h.getBounds?h.getBounds():h.getLatLng())}return a}}),$q=function(a,u){return new Ra(a,u)},qd=me.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){m(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,u){var h=this._getIconUrl(a);if(!h){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var v=this._createImg(h,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(v,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),v},_setIconStyles:function(a,u){var h=this.options,v=h[u+"Size"];typeof v=="number"&&(v=[v,v]);var x=ie(v),T=ie(u==="shadow"&&h.shadowAnchor||h.iconAnchor||x&&x.divideBy(2,!0));a.className="leaflet-marker-"+u+" "+(h.className||""),T&&(a.style.marginLeft=-T.x+"px",a.style.marginTop=-T.y+"px"),x&&(a.style.width=x.x+"px",a.style.height=x.y+"px")},_createImg:function(a,u){return u=u||document.createElement("img"),u.src=a,u},_getIconUrl:function(a){return N.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function Uq(a){return new qd(a)}var Qp=qd.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof Qp.imagePath!="string"&&(Qp.imagePath=this._detectIconPath()),(this.options.imagePath||Qp.imagePath)+qd.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var u=function(h,v,x){var T=v.exec(h);return T&&T[x]};return a=u(a,/^url\((['"])?(.+)\1\)$/,2),a&&u(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=Lt("div","leaflet-default-icon-path",document.body),u=wr(a,"background-image")||wr(a,"backgroundImage");if(document.body.removeChild(a),u=this._stripUrl(u),u)return u;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),CN=js.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new Fl(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),mt(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Rn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var u=this._marker,h=u._map,v=this._marker.options.autoPanSpeed,x=this._marker.options.autoPanPadding,T=fo(u._icon),F=h.getPixelBounds(),K=h.getPixelOrigin(),ee=xe(F.min._subtract(K).add(x),F.max._subtract(K).subtract(x));if(!ee.contains(T)){var fe=ie((Math.max(ee.max.x,T.x)-ee.max.x)/(F.max.x-ee.max.x)-(Math.min(ee.min.x,T.x)-ee.min.x)/(F.min.x-ee.min.x),(Math.max(ee.max.y,T.y)-ee.max.y)/(F.max.y-ee.max.y)-(Math.min(ee.min.y,T.y)-ee.min.y)/(F.min.y-ee.min.y)).multiplyBy(v);h.panBy(fe,{animate:!1}),this._draggable._newPos._add(fe),this._draggable._startPos._add(fe),Gn(u._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=X(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(se(this._panRequest),this._panRequest=X(this._adjustPan.bind(this,a)))},_onDrag:function(a){var u=this._marker,h=u._shadow,v=fo(u._icon),x=u._map.layerPointToLatLng(v);h&&Gn(h,v),u._latlng=x,a.latlng=x,a.oldLatLng=this._oldLatLng,u.fire("move",a).fire("drag",a)},_onDragEnd:function(a){se(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),eb=es.extend({options:{icon:new Qp,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,u){m(this,u),this._latlng=Ee(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var u=this._latlng;return this._latlng=Ee(a),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=a.icon.createIcon(this._icon),v=!1;h!==this._icon&&(this._icon&&this._removeIcon(),v=!0,a.title&&(h.title=a.title),h.tagName==="IMG"&&(h.alt=a.alt||"")),mt(h,u),a.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ct(h,"focus",this._panOnFocus,this);var x=a.icon.createShadow(this._shadow),T=!1;x!==this._shadow&&(this._removeShadow(),T=!0),x&&(mt(x,u),x.alt=""),this._shadow=x,a.opacity<1&&this._updateOpacity(),v&&this.getPane().appendChild(this._icon),this._initInteraction(),x&&T&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Dn(this._icon,"focus",this._panOnFocus,this),bn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&bn(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Gn(this._icon,a),this._shadow&&Gn(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(mt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),CN)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new CN(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Hr(this._icon,a),this._shadow&&Hr(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var u=this.options.icon.options,h=u.iconSize?ie(u.iconSize):ie(0,0),v=u.iconAnchor?ie(u.iconAnchor):ie(0,0);a.panInside(this._latlng,{paddingTopLeft:v,paddingBottomRight:h.subtract(v)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Hq(a,u){return new eb(a,u)}var Ll=es.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return m(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),tb=Ll.extend({options:{fill:!0,radius:10},initialize:function(a,u){m(this,u),this._latlng=Ee(a),this._radius=this.options.radius},setLatLng:function(a){var u=this._latlng;return this._latlng=Ee(a),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var u=a&&a.radius||this._radius;return Ll.prototype.setStyle.call(this,a),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,u=this._radiusY||a,h=this._clickTolerance(),v=[a+h,u+h];this._pxBounds=new be(this._point.subtract(v),this._point.add(v))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function qq(a,u){return new tb(a,u)}var $I=tb.extend({initialize:function(a,u,h){if(typeof u=="number"&&(u=t({},h,{radius:u})),m(this,u),this._latlng=Ee(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new ut(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:Ll.prototype.setStyle,_project:function(){var a=this._latlng.lng,u=this._latlng.lat,h=this._map,v=h.options.crs;if(v.distance===M.distance){var x=Math.PI/180,T=this._mRadius/M.R/x,F=h.project([u+T,a]),K=h.project([u-T,a]),ee=F.add(K).divideBy(2),fe=h.unproject(ee).lat,Ae=Math.acos((Math.cos(T*x)-Math.sin(u*x)*Math.sin(fe*x))/(Math.cos(u*x)*Math.cos(fe*x)))/x;(isNaN(Ae)||Ae===0)&&(Ae=T/Math.cos(Math.PI/180*u)),this._point=ee.subtract(h.getPixelOrigin()),this._radius=isNaN(Ae)?0:ee.x-h.project([fe,a-Ae]).x,this._radiusY=ee.y-F.y}else{var it=v.unproject(v.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(it).x}this._updateBounds()}});function Wq(a,u,h){return new $I(a,u,h)}var Na=Ll.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,u){m(this,u),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var u=1/0,h=null,v=Yp,x,T,F=0,K=this._parts.length;F<K;F++)for(var ee=this._parts[F],fe=1,Ae=ee.length;fe<Ae;fe++){x=ee[fe-1],T=ee[fe];var it=v(a,x,T,!0);it<u&&(u=it,h=v(a,x,T))}return h&&(h.distance=Math.sqrt(u)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return wN(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,u){return u=u||this._defaultShape(),a=Ee(a),u.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new ut,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return ko(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var u=[],h=ko(a),v=0,x=a.length;v<x;v++)h?(u[v]=Ee(a[v]),this._bounds.extend(u[v])):u[v]=this._convertLatLngs(a[v]);return u},_project:function(){var a=new be;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),u=new W(a,a);this._rawPxBounds&&(this._pxBounds=new be([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(a,u,h){var v=a[0]instanceof Je,x=a.length,T,F;if(v){for(F=[],T=0;T<x;T++)F[T]=this._map.latLngToLayerPoint(a[T]),h.extend(F[T]);u.push(F)}else for(T=0;T<x;T++)this._projectLatlngs(a[T],u,h)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,h,v,x,T,F,K,ee;for(h=0,x=0,T=this._rings.length;h<T;h++)for(ee=this._rings[h],v=0,F=ee.length;v<F-1;v++)K=bN(ee[v],ee[v+1],a,v,!0),K&&(u[x]=u[x]||[],u[x].push(K[0]),(K[1]!==ee[v+1]||v===F-2)&&(u[x].push(K[1]),x++))}},_simplifyPoints:function(){for(var a=this._parts,u=this.options.smoothFactor,h=0,v=a.length;h<v;h++)a[h]=gN(a[h],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,u){var h,v,x,T,F,K,ee=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(h=0,T=this._parts.length;h<T;h++)for(K=this._parts[h],v=0,F=K.length,x=F-1;v<F;x=v++)if(!(!u&&v===0)&&_N(a,K[x],K[v])<=ee)return!0;return!1}});function Gq(a,u){return new Na(a,u)}Na._flat=yN;var Wd=Na.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return mN(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var u=Na.prototype._convertLatLngs.call(this,a),h=u.length;return h>=2&&u[0]instanceof Je&&u[0].equals(u[h-1])&&u.pop(),u},_setLatLngs:function(a){Na.prototype._setLatLngs.call(this,a),ko(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ko(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,u=this.options.weight,h=new W(u,u);if(a=new be(a.min.subtract(h),a.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var v=0,x=this._rings.length,T;v<x;v++)T=pN(this._rings[v],a,!0),T.length&&this._parts.push(T)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var u=!1,h,v,x,T,F,K,ee,fe;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(T=0,ee=this._parts.length;T<ee;T++)for(h=this._parts[T],F=0,fe=h.length,K=fe-1;F<fe;K=F++)v=h[F],x=h[K],v.y>a.y!=x.y>a.y&&a.x<(x.x-v.x)*(a.y-v.y)/(x.y-v.y)+v.x&&(u=!u);return u||Na.prototype._containsPoint.call(this,a,!0)}});function Zq(a,u){return new Wd(a,u)}var Fa=Ra.extend({initialize:function(a,u){m(this,u),this._layers={},a&&this.addData(a)},addData:function(a){var u=I(a)?a:a.features,h,v,x;if(u){for(h=0,v=u.length;h<v;h++)x=u[h],(x.geometries||x.geometry||x.features||x.coordinates)&&this.addData(x);return this}var T=this.options;if(T.filter&&!T.filter(a))return this;var F=nb(a,T);return F?(F.feature=ob(a),F.defaultOptions=F.options,this.resetStyle(F),T.onEachFeature&&T.onEachFeature(a,F),this.addLayer(F)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=t({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(u){this._setLayerStyle(u,a)},this)},_setLayerStyle:function(a,u){a.setStyle&&(typeof u=="function"&&(u=u(a.feature)),a.setStyle(u))}});function nb(a,u){var h=a.type==="Feature"?a.geometry:a,v=h?h.coordinates:null,x=[],T=u&&u.pointToLayer,F=u&&u.coordsToLatLng||UI,K,ee,fe,Ae;if(!v&&!h)return null;switch(h.type){case"Point":return K=F(v),EN(T,a,K,u);case"MultiPoint":for(fe=0,Ae=v.length;fe<Ae;fe++)K=F(v[fe]),x.push(EN(T,a,K,u));return new Ra(x);case"LineString":case"MultiLineString":return ee=ib(v,h.type==="LineString"?0:1,F),new Na(ee,u);case"Polygon":case"MultiPolygon":return ee=ib(v,h.type==="Polygon"?1:2,F),new Wd(ee,u);case"GeometryCollection":for(fe=0,Ae=h.geometries.length;fe<Ae;fe++){var it=nb({geometry:h.geometries[fe],type:"Feature",properties:a.properties},u);it&&x.push(it)}return new Ra(x);case"FeatureCollection":for(fe=0,Ae=h.features.length;fe<Ae;fe++){var jt=nb(h.features[fe],u);jt&&x.push(jt)}return new Ra(x);default:throw new Error("Invalid GeoJSON object.")}}function EN(a,u,h,v){return a?a(u,h):new eb(h,v&&v.markersInheritOptions&&v)}function UI(a){return new Je(a[1],a[0],a[2])}function ib(a,u,h){for(var v=[],x=0,T=a.length,F;x<T;x++)F=u?ib(a[x],u-1,h):(h||UI)(a[x]),v.push(F);return v}function HI(a,u){return a=Ee(a),a.alt!==void 0?[f(a.lng,u),f(a.lat,u),f(a.alt,u)]:[f(a.lng,u),f(a.lat,u)]}function rb(a,u,h,v){for(var x=[],T=0,F=a.length;T<F;T++)x.push(u?rb(a[T],ko(a[T])?0:u-1,h,v):HI(a[T],v));return!u&&h&&x.length>0&&x.push(x[0].slice()),x}function Gd(a,u){return a.feature?t({},a.feature,{geometry:u}):ob(u)}function ob(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var qI={toGeoJSON:function(a){return Gd(this,{type:"Point",coordinates:HI(this.getLatLng(),a)})}};eb.include(qI),$I.include(qI),tb.include(qI),Na.include({toGeoJSON:function(a){var u=!ko(this._latlngs),h=rb(this._latlngs,u?1:0,!1,a);return Gd(this,{type:(u?"Multi":"")+"LineString",coordinates:h})}}),Wd.include({toGeoJSON:function(a){var u=!ko(this._latlngs),h=u&&!ko(this._latlngs[0]),v=rb(this._latlngs,h?2:u?1:0,!0,a);return u||(v=[v]),Gd(this,{type:(h?"Multi":"")+"Polygon",coordinates:v})}}),Hd.include({toMultiPoint:function(a){var u=[];return this.eachLayer(function(h){u.push(h.toGeoJSON(a).geometry.coordinates)}),Gd(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(a){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(a);var h=u==="GeometryCollection",v=[];return this.eachLayer(function(x){if(x.toGeoJSON){var T=x.toGeoJSON(a);if(h)v.push(T.geometry);else{var F=ob(T);F.type==="FeatureCollection"?v.push.apply(v,F.features):v.push(F)}}}),h?Gd(this,{geometries:v,type:"GeometryCollection"}):{type:"FeatureCollection",features:v}}});function IN(a,u){return new Fa(a,u)}var Kq=IN,sb=es.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,u,h){this._url=a,this._bounds=nt(u),m(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(mt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){bn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&lo(this._image),this},bringToBack:function(){return this._map&&co(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=nt(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",u=this._image=a?this._url:Lt("img");if(mt(u,"leaflet-image-layer"),this._zoomAnimated&&mt(u,"leaflet-zoom-animated"),this.options.className&&mt(u,this.options.className),u.onselectstart=d,u.onmousemove=d,u.onload=r(this.fire,this,"load"),u.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(a){var u=this._map.getZoomScale(a.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;ho(this._image,h,u)},_reset:function(){var a=this._image,u=new be(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=u.getSize();Gn(a,u.min),a.style.width=h.x+"px",a.style.height=h.y+"px"},_updateOpacity:function(){Hr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Yq=function(a,u,h){return new sb(a,u,h)},SN=sb.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",u=this._image=a?this._url:Lt("video");if(mt(u,"leaflet-image-layer"),this._zoomAnimated&&mt(u,"leaflet-zoom-animated"),this.options.className&&mt(u,this.options.className),u.onselectstart=d,u.onmousemove=d,u.onloadeddata=r(this.fire,this,"load"),a){for(var h=u.getElementsByTagName("source"),v=[],x=0;x<h.length;x++)v.push(h[x].src);this._url=h.length>0?v:[u.src];return}I(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var T=0;T<this._url.length;T++){var F=Lt("source");F.src=this._url[T],u.appendChild(F)}}});function Qq(a,u,h){return new SN(a,u,h)}var DN=sb.extend({_initImage:function(){var a=this._image=this._url;mt(a,"leaflet-image-layer"),this._zoomAnimated&&mt(a,"leaflet-zoom-animated"),this.options.className&&mt(a,this.options.className),a.onselectstart=d,a.onmousemove=d}});function Xq(a,u,h){return new DN(a,u,h)}var Bs=es.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,u){a&&(a instanceof Je||I(a))?(this._latlng=Ee(a),m(this,u)):(m(this,a),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Hr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Hr(this._container,1),this.bringToFront(),this.options.interactive&&(mt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(Hr(this._container,0),this._removeTimeout=setTimeout(r(bn,void 0,this._container),200)):bn(this._container),this.options.interactive&&(Rn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=Ee(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&lo(this._container),this},bringToBack:function(){return this._map&&co(this._container),this},_prepareOpen:function(a){var u=this._source;if(!u._map)return!1;if(u instanceof Ra){u=null;var h=this._source._layers;for(var v in h)if(h[v]._map){u=h[v];break}if(!u)return!1;this._source=u}if(!a)if(u.getCenter)a=u.getCenter();else if(u.getLatLng)a=u.getLatLng();else if(u.getBounds)a=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")a.innerHTML=u;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),u=ie(this.options.offset),h=this._getAnchor();this._zoomAnimated?Gn(this._container,a.add(h)):u=u.add(a).add(h);var v=this._containerBottom=-u.y,x=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=v+"px",this._container.style.left=x+"px"}},_getAnchor:function(){return[0,0]}});Xt.include({_initOverlay:function(a,u,h,v){var x=u;return x instanceof a||(x=new a(v).setContent(u)),h&&x.setLatLng(h),x}}),es.include({_initOverlay:function(a,u,h,v){var x=h;return x instanceof a?(m(x,v),x._source=this):(x=u&&!v?u:new a(v,this),x.setContent(h)),x}});var ab=Bs.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Bs.prototype.openOn.call(this,a)},onAdd:function(a){Bs.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ll||this._source.on("preclick",Nl))},onRemove:function(a){Bs.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ll||this._source.off("preclick",Nl))},getEvents:function(){var a=Bs.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",u=this._container=Lt("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=Lt("div",a+"-content-wrapper",u);if(this._contentNode=Lt("div",a+"-content",h),Zp(u),Xv(this._contentNode),Ct(u,"contextmenu",Nl),this._tipContainer=Lt("div",a+"-tip-container",u),this._tip=Lt("div",a+"-tip",this._tipContainer),this.options.closeButton){var v=this._closeButton=Lt("a",a+"-close-button",u);v.setAttribute("role","button"),v.setAttribute("aria-label","Close popup"),v.href="#close",v.innerHTML='<span aria-hidden="true">&#215;</span>',Ct(v,"click",function(x){Ji(x),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,u=a.style;u.width="",u.whiteSpace="nowrap";var h=a.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),u.width=h+1+"px",u.whiteSpace="",u.height="";var v=a.offsetHeight,x=this.options.maxHeight,T="leaflet-popup-scrolled";x&&v>x?(u.height=x+"px",mt(a,T)):Rn(a,T),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),h=this._getAnchor();Gn(this._container,u.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,u=parseInt(wr(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+u,v=this._containerWidth,x=new W(this._containerLeft,-h-this._containerBottom);x._add(fo(this._container));var T=a.layerPointToContainerPoint(x),F=ie(this.options.autoPanPadding),K=ie(this.options.autoPanPaddingTopLeft||F),ee=ie(this.options.autoPanPaddingBottomRight||F),fe=a.getSize(),Ae=0,it=0;T.x+v+ee.x>fe.x&&(Ae=T.x+v-fe.x+ee.x),T.x-Ae-K.x<0&&(Ae=T.x-K.x),T.y+h+ee.y>fe.y&&(it=T.y+h-fe.y+ee.y),T.y-it-K.y<0&&(it=T.y-K.y),(Ae||it)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([Ae,it]))}},_getAnchor:function(){return ie(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Jq=function(a,u){return new ab(a,u)};Xt.mergeOptions({closePopupOnClick:!0}),Xt.include({openPopup:function(a,u,h){return this._initOverlay(ab,a,u,h).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),es.include({bindPopup:function(a,u){return this._popup=this._initOverlay(ab,this._popup,a,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof Ra||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){nu(a);var u=a.layer||a.target;if(this._popup._source===u&&!(u instanceof Ll)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=u,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var lb=Bs.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Bs.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Bs.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Bs.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",u=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Lt("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+s(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var u,h,v=this._map,x=this._container,T=v.latLngToContainerPoint(v.getCenter()),F=v.layerPointToContainerPoint(a),K=this.options.direction,ee=x.offsetWidth,fe=x.offsetHeight,Ae=ie(this.options.offset),it=this._getAnchor();K==="top"?(u=ee/2,h=fe):K==="bottom"?(u=ee/2,h=0):K==="center"?(u=ee/2,h=fe/2):K==="right"?(u=0,h=fe/2):K==="left"?(u=ee,h=fe/2):F.x<T.x?(K="right",u=0,h=fe/2):(K="left",u=ee+(Ae.x+it.x)*2,h=fe/2),a=a.subtract(ie(u,h,!0)).add(Ae).add(it),Rn(x,"leaflet-tooltip-right"),Rn(x,"leaflet-tooltip-left"),Rn(x,"leaflet-tooltip-top"),Rn(x,"leaflet-tooltip-bottom"),mt(x,"leaflet-tooltip-"+K),Gn(x,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Hr(this._container,a)},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(u)},_getAnchor:function(){return ie(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),eW=function(a,u){return new lb(a,u)};Xt.include({openTooltip:function(a,u,h){return this._initOverlay(lb,a,u,h).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),es.include({bindTooltip:function(a,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(lb,this._tooltip,a,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var u=a?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[u](h),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof Ra||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var u=typeof a.getElement=="function"&&a.getElement();u&&(Ct(u,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),Ct(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var u=typeof a.getElement=="function"&&a.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var u=a.latlng,h,v;this._tooltip.options.sticky&&a.originalEvent&&(h=this._map.mouseEventToContainerPoint(a.originalEvent),v=this._map.containerPointToLayerPoint(h),u=this._map.layerPointToLatLng(v)),this._tooltip.setLatLng(u)}});var TN=qd.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var u=a&&a.tagName==="DIV"?a:document.createElement("div"),h=this.options;if(h.html instanceof Element?(Pa(u),u.appendChild(h.html)):u.innerHTML=h.html!==!1?h.html:"",h.bgPos){var v=ie(h.bgPos);u.style.backgroundPosition=-v.x+"px "+-v.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function tW(a){return new TN(a)}qd.Default=Qp;var Xp=es.extend({options:{tileSize:256,opacity:1,updateWhenIdle:N.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){m(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),bn(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(lo(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(co(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=l(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof W?a:new W(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var u=this.getPane().children,h=-a(-1/0,1/0),v=0,x=u.length,T;v<x;v++)T=u[v].style.zIndex,u[v]!==this._container&&T&&(h=a(h,+T));isFinite(h)&&(this.options.zIndex=h+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!N.ielt9){Hr(this._container,this.options.opacity);var a=+new Date,u=!1,h=!1;for(var v in this._tiles){var x=this._tiles[v];if(!(!x.current||!x.loaded)){var T=Math.min(1,(a-x.loaded)/200);Hr(x.el,T),T<1?u=!0:(x.active?h=!0:this._onOpaqueTile(x),x.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),u&&(se(this._fadeFrame),this._fadeFrame=X(this._updateOpacity,this))}},_onOpaqueTile:d,_initContainer:function(){this._container||(this._container=Lt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,u=this.options.maxZoom;if(a!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===a?(this._levels[h].el.style.zIndex=u-Math.abs(a-h),this._onUpdateLevel(h)):(bn(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var v=this._levels[a],x=this._map;return v||(v=this._levels[a]={},v.el=Lt("div","leaflet-tile-container leaflet-zoom-animated",this._container),v.el.style.zIndex=u,v.origin=x.project(x.unproject(x.getPixelOrigin()),a).round(),v.zoom=a,this._setZoomTransform(v,x.getCenter(),x.getZoom()),d(v.el.offsetWidth),this._onCreateLevel(v)),this._level=v,v}},_onUpdateLevel:d,_onRemoveLevel:d,_onCreateLevel:d,_pruneTiles:function(){if(this._map){var a,u,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)u=this._tiles[a],u.retain=u.current;for(a in this._tiles)if(u=this._tiles[a],u.current&&!u.active){var v=u.coords;this._retainParent(v.x,v.y,v.z,v.z-5)||this._retainChildren(v.x,v.y,v.z,v.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var u in this._tiles)this._tiles[u].coords.z===a&&this._removeTile(u)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)bn(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,u,h,v){var x=Math.floor(a/2),T=Math.floor(u/2),F=h-1,K=new W(+x,+T);K.z=+F;var ee=this._tileCoordsToKey(K),fe=this._tiles[ee];return fe&&fe.active?(fe.retain=!0,!0):(fe&&fe.loaded&&(fe.retain=!0),F>v?this._retainParent(x,T,F,v):!1)},_retainChildren:function(a,u,h,v){for(var x=2*a;x<2*a+2;x++)for(var T=2*u;T<2*u+2;T++){var F=new W(x,T);F.z=h+1;var K=this._tileCoordsToKey(F),ee=this._tiles[K];if(ee&&ee.active){ee.retain=!0;continue}else ee&&ee.loaded&&(ee.retain=!0);h+1<v&&this._retainChildren(x,T,h+1,v)}},_resetView:function(a){var u=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var u=this.options;return u.minNativeZoom!==void 0&&a<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<a?u.maxNativeZoom:a},_setView:function(a,u,h,v){var x=Math.round(u);this.options.maxZoom!==void 0&&x>this.options.maxZoom||this.options.minZoom!==void 0&&x<this.options.minZoom?x=void 0:x=this._clampZoom(x);var T=this.options.updateWhenZooming&&x!==this._tileZoom;(!v||T)&&(this._tileZoom=x,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),x!==void 0&&this._update(a),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(a,u)},_setZoomTransforms:function(a,u){for(var h in this._levels)this._setZoomTransform(this._levels[h],a,u)},_setZoomTransform:function(a,u,h){var v=this._map.getZoomScale(h,a.zoom),x=a.origin.multiplyBy(v).subtract(this._map._getNewPixelOrigin(u,h)).round();N.any3d?ho(a.el,x,v):Gn(a.el,x)},_resetGrid:function(){var a=this._map,u=a.options.crs,h=this._tileSize=this.getTileSize(),v=this._tileZoom,x=this._map.getPixelWorldBounds(this._tileZoom);x&&(this._globalTileRange=this._pxBoundsToTileRange(x)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,u.wrapLng[0]],v).x/h.x),Math.ceil(a.project([0,u.wrapLng[1]],v).x/h.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([u.wrapLat[0],0],v).y/h.x),Math.ceil(a.project([u.wrapLat[1],0],v).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var u=this._map,h=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),v=u.getZoomScale(h,this._tileZoom),x=u.project(a,this._tileZoom).floor(),T=u.getSize().divideBy(v*2);return new be(x.subtract(T),x.add(T))},_update:function(a){var u=this._map;if(u){var h=this._clampZoom(u.getZoom());if(a===void 0&&(a=u.getCenter()),this._tileZoom!==void 0){var v=this._getTiledPixelBounds(a),x=this._pxBoundsToTileRange(v),T=x.getCenter(),F=[],K=this.options.keepBuffer,ee=new be(x.getBottomLeft().subtract([K,-K]),x.getTopRight().add([K,-K]));if(!(isFinite(x.min.x)&&isFinite(x.min.y)&&isFinite(x.max.x)&&isFinite(x.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var fe in this._tiles){var Ae=this._tiles[fe].coords;(Ae.z!==this._tileZoom||!ee.contains(new W(Ae.x,Ae.y)))&&(this._tiles[fe].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(a,h);return}for(var it=x.min.y;it<=x.max.y;it++)for(var jt=x.min.x;jt<=x.max.x;jt++){var Cr=new W(jt,it);if(Cr.z=this._tileZoom,!!this._isValidTile(Cr)){var Li=this._tiles[this._tileCoordsToKey(Cr)];Li?Li.current=!0:F.push(Cr)}}if(F.sort(function(qr,Kd){return qr.distanceTo(T)-Kd.distanceTo(T)}),F.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ao=document.createDocumentFragment();for(jt=0;jt<F.length;jt++)this._addTile(F[jt],Ao);this._level.el.appendChild(Ao)}}}},_isValidTile:function(a){var u=this._map.options.crs;if(!u.infinite){var h=this._globalTileRange;if(!u.wrapLng&&(a.x<h.min.x||a.x>h.max.x)||!u.wrapLat&&(a.y<h.min.y||a.y>h.max.y))return!1}if(!this.options.bounds)return!0;var v=this._tileCoordsToBounds(a);return nt(this.options.bounds).overlaps(v)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var u=this._map,h=this.getTileSize(),v=a.scaleBy(h),x=v.add(h),T=u.unproject(v,a.z),F=u.unproject(x,a.z);return[T,F]},_tileCoordsToBounds:function(a){var u=this._tileCoordsToNwSe(a),h=new ut(u[0],u[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var u=a.split(":"),h=new W(+u[0],+u[1]);return h.z=+u[2],h},_removeTile:function(a){var u=this._tiles[a];u&&(bn(u.el),delete this._tiles[a],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){mt(a,"leaflet-tile");var u=this.getTileSize();a.style.width=u.x+"px",a.style.height=u.y+"px",a.onselectstart=d,a.onmousemove=d,N.ielt9&&this.options.opacity<1&&Hr(a,this.options.opacity)},_addTile:function(a,u){var h=this._getTilePos(a),v=this._tileCoordsToKey(a),x=this.createTile(this._wrapCoords(a),r(this._tileReady,this,a));this._initTile(x),this.createTile.length<2&&X(r(this._tileReady,this,a,null,x)),Gn(x,h),this._tiles[v]={el:x,coords:a,current:!0},u.appendChild(x),this.fire("tileloadstart",{tile:x,coords:a})},_tileReady:function(a,u,h){u&&this.fire("tileerror",{error:u,tile:h,coords:a});var v=this._tileCoordsToKey(a);h=this._tiles[v],h&&(h.loaded=+new Date,this._map._fadeAnimated?(Hr(h.el,0),se(this._fadeFrame),this._fadeFrame=X(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),u||(mt(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),N.ielt9||!this._map._fadeAnimated?X(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var u=new W(this._wrapX?c(a.x,this._wrapX):a.x,this._wrapY?c(a.y,this._wrapY):a.y);return u.z=a.z,u},_pxBoundsToTileRange:function(a){var u=this.getTileSize();return new be(a.min.unscaleBy(u).floor(),a.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function nW(a){return new Xp(a)}var Zd=Xp.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,u){this._url=a,u=m(this,u),u.detectRetina&&N.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,u){return this._url===a&&u===void 0&&(u=!0),this._url=a,u||this.redraw(),this},createTile:function(a,u){var h=document.createElement("img");return Ct(h,"load",r(this._tileOnLoad,this,u,h)),Ct(h,"error",r(this._tileOnError,this,u,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(a),h},getTileUrl:function(a){var u={r:N.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-a.y;this.options.tms&&(u.y=h),u["-y"]=h}return w(this._url,t(u,this.options))},_tileOnLoad:function(a,u){N.ielt9?setTimeout(r(a,this,null,u),0):a(null,u)},_tileOnError:function(a,u,h){var v=this.options.errorTileUrl;v&&u.getAttribute("src")!==v&&(u.src=v),a(h,u)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,u=this.options.maxZoom,h=this.options.zoomReverse,v=this.options.zoomOffset;return h&&(a=u-a),a+v},_getSubdomain:function(a){var u=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var a,u;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(u=this._tiles[a].el,u.onload=d,u.onerror=d,!u.complete)){u.src=O;var h=this._tiles[a].coords;bn(u),delete this._tiles[a],this.fire("tileabort",{tile:u,coords:h})}},_removeTile:function(a){var u=this._tiles[a];if(u)return u.el.setAttribute("src",O),Xp.prototype._removeTile.call(this,a)},_tileReady:function(a,u,h){if(!(!this._map||h&&h.getAttribute("src")===O))return Xp.prototype._tileReady.call(this,a,u,h)}});function kN(a,u){return new Zd(a,u)}var AN=Zd.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,u){this._url=a;var h=t({},this.defaultWmsParams);for(var v in u)v in this.options||(h[v]=u[v]);u=m(this,u);var x=u.detectRetina&&N.retina?2:1,T=this.getTileSize();h.width=T.x*x,h.height=T.y*x,this.wmsParams=h},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,Zd.prototype.onAdd.call(this,a)},getTileUrl:function(a){var u=this._tileCoordsToNwSe(a),h=this._crs,v=xe(h.project(u[0]),h.project(u[1])),x=v.min,T=v.max,F=(this._wmsVersion>=1.3&&this._crs===xN?[x.y,x.x,T.y,T.x]:[x.x,x.y,T.x,T.y]).join(","),K=Zd.prototype.getTileUrl.call(this,a);return K+_(this.wmsParams,K,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+F},setParams:function(a,u){return t(this.wmsParams,a),u||this.redraw(),this}});function iW(a,u){return new AN(a,u)}Zd.WMS=AN,kN.wms=iW;var La=es.extend({options:{padding:.1},initialize:function(a){m(this,a),s(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),mt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,u){var h=this._map.getZoomScale(u,this._zoom),v=this._map.getSize().multiplyBy(.5+this.options.padding),x=this._map.project(this._center,u),T=v.multiplyBy(-h).add(x).subtract(this._map._getNewPixelOrigin(a,u));N.any3d?ho(this._container,T,h):Gn(this._container,T)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,u=this._map.getSize(),h=this._map.containerPointToLayerPoint(u.multiplyBy(-a)).round();this._bounds=new be(h,h.add(u.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),MN=La.extend({options:{tolerance:0},getEvents:function(){var a=La.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){La.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");Ct(a,"mousemove",this._onMouseMove,this),Ct(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ct(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){se(this._redrawRequest),delete this._ctx,bn(this._container),Dn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var u in this._layers)a=this._layers[u],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){La.prototype._update.call(this);var a=this._bounds,u=this._container,h=a.getSize(),v=N.retina?2:1;Gn(u,a.min),u.width=v*h.x,u.height=v*h.y,u.style.width=h.x+"px",u.style.height=h.y+"px",N.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){La.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[s(a)]=a;var u=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var u=a._order,h=u.next,v=u.prev;h?h.prev=v:this._drawLast=v,v?v.next=h:this._drawFirst=h,delete a._order,delete this._layers[s(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var u=a.options.dashArray.split(/[, ]+/),h=[],v,x;for(x=0;x<u.length;x++){if(v=Number(u[x]),isNaN(v))return;h.push(v)}a.options._dashArray=h}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||X(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var u=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new be,this._redrawBounds.extend(a._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(a._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var u=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,u=this._redrawBounds;if(this._ctx.save(),u){var h=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var v=this._drawFirst;v;v=v.next)a=v.layer,(!u||a._pxBounds&&a._pxBounds.intersects(u))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,u){if(this._drawing){var h,v,x,T,F=a._parts,K=F.length,ee=this._ctx;if(K){for(ee.beginPath(),h=0;h<K;h++){for(v=0,x=F[h].length;v<x;v++)T=F[h][v],ee[v?"lineTo":"moveTo"](T.x,T.y);u&&ee.closePath()}this._fillStroke(ee,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var u=a._point,h=this._ctx,v=Math.max(Math.round(a._radius),1),x=(Math.max(Math.round(a._radiusY),1)||v)/v;x!==1&&(h.save(),h.scale(1,x)),h.beginPath(),h.arc(u.x,u.y/x,v,0,Math.PI*2,!1),x!==1&&h.restore(),this._fillStroke(h,a)}},_fillStroke:function(a,u){var h=u.options;h.fill&&(a.globalAlpha=h.fillOpacity,a.fillStyle=h.fillColor||h.color,a.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(a.setLineDash&&a.setLineDash(u.options&&u.options._dashArray||[]),a.globalAlpha=h.opacity,a.lineWidth=h.weight,a.strokeStyle=h.color,a.lineCap=h.lineCap,a.lineJoin=h.lineJoin,a.stroke())},_onClick:function(a){for(var u=this._map.mouseEventToLayerPoint(a),h,v,x=this._drawFirst;x;x=x.next)h=x.layer,h.options.interactive&&h._containsPoint(u)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(h))&&(v=h);this._fireEvent(v?[v]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,u)}},_handleMouseOut:function(a){var u=this._hoveredLayer;u&&(Rn(this._container,"leaflet-interactive"),this._fireEvent([u],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,u){if(!this._mouseHoverThrottled){for(var h,v,x=this._drawFirst;x;x=x.next)h=x.layer,h.options.interactive&&h._containsPoint(u)&&(v=h);v!==this._hoveredLayer&&(this._handleMouseOut(a),v&&(mt(this._container,"leaflet-interactive"),this._fireEvent([v],a,"mouseover"),this._hoveredLayer=v)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,u,h){this._map._fireDOMEvent(u,h||u.type,a)},_bringToFront:function(a){var u=a._order;if(u){var h=u.next,v=u.prev;if(h)h.prev=v;else return;v?v.next=h:h&&(this._drawFirst=h),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(a)}},_bringToBack:function(a){var u=a._order;if(u){var h=u.next,v=u.prev;if(v)v.next=h;else return;h?h.prev=v:v&&(this._drawLast=v),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(a)}}});function PN(a){return N.canvas?new MN(a):null}var Jp=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),rW={_initContainer:function(){this._container=Lt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(La.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var u=a._container=Jp("shape");mt(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",a._path=Jp("path"),u.appendChild(a._path),this._updateStyle(a),this._layers[s(a)]=a},_addPath:function(a){var u=a._container;this._container.appendChild(u),a.options.interactive&&a.addInteractiveTarget(u)},_removePath:function(a){var u=a._container;bn(u),a.removeInteractiveTarget(u),delete this._layers[s(a)]},_updateStyle:function(a){var u=a._stroke,h=a._fill,v=a.options,x=a._container;x.stroked=!!v.stroke,x.filled=!!v.fill,v.stroke?(u||(u=a._stroke=Jp("stroke")),x.appendChild(u),u.weight=v.weight+"px",u.color=v.color,u.opacity=v.opacity,v.dashArray?u.dashStyle=I(v.dashArray)?v.dashArray.join(" "):v.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=v.lineCap.replace("butt","flat"),u.joinstyle=v.lineJoin):u&&(x.removeChild(u),a._stroke=null),v.fill?(h||(h=a._fill=Jp("fill")),x.appendChild(h),h.color=v.fillColor||v.color,h.opacity=v.fillOpacity):h&&(x.removeChild(h),a._fill=null)},_updateCircle:function(a){var u=a._point.round(),h=Math.round(a._radius),v=Math.round(a._radiusY||h);this._setPath(a,a._empty()?"M0 0":"AL "+u.x+","+u.y+" "+h+","+v+" 0,"+65535*360)},_setPath:function(a,u){a._path.v=u},_bringToFront:function(a){lo(a._container)},_bringToBack:function(a){co(a._container)}},cb=N.vml?Jp:Yt,em=La.extend({_initContainer:function(){this._container=cb("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=cb("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){bn(this._container),Dn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){La.prototype._update.call(this);var a=this._bounds,u=a.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,h.setAttribute("width",u.x),h.setAttribute("height",u.y)),Gn(h,a.min),h.setAttribute("viewBox",[a.min.x,a.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(a){var u=a._path=cb("path");a.options.className&&mt(u,a.options.className),a.options.interactive&&mt(u,"leaflet-interactive"),this._updateStyle(a),this._layers[s(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){bn(a._path),a.removeInteractiveTarget(a._path),delete this._layers[s(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var u=a._path,h=a.options;u&&(h.stroke?(u.setAttribute("stroke",h.color),u.setAttribute("stroke-opacity",h.opacity),u.setAttribute("stroke-width",h.weight),u.setAttribute("stroke-linecap",h.lineCap),u.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?u.setAttribute("stroke-dasharray",h.dashArray):u.removeAttribute("stroke-dasharray"),h.dashOffset?u.setAttribute("stroke-dashoffset",h.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),h.fill?(u.setAttribute("fill",h.fillColor||h.color),u.setAttribute("fill-opacity",h.fillOpacity),u.setAttribute("fill-rule",h.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(a,u){this._setPath(a,pt(a._parts,u))},_updateCircle:function(a){var u=a._point,h=Math.max(Math.round(a._radius),1),v=Math.max(Math.round(a._radiusY),1)||h,x="a"+h+","+v+" 0 1,0 ",T=a._empty()?"M0 0":"M"+(u.x-h)+","+u.y+x+h*2+",0 "+x+-h*2+",0 ";this._setPath(a,T)},_setPath:function(a,u){a._path.setAttribute("d",u)},_bringToFront:function(a){lo(a._path)},_bringToBack:function(a){co(a._path)}});N.vml&&em.include(rW);function ON(a){return N.svg||N.vml?new em(a):null}Xt.include({getRenderer:function(a){var u=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var u=this._paneRenderers[a];return u===void 0&&(u=this._createRenderer({pane:a}),this._paneRenderers[a]=u),u},_createRenderer:function(a){return this.options.preferCanvas&&PN(a)||ON(a)}});var RN=Wd.extend({initialize:function(a,u){Wd.prototype.initialize.call(this,this._boundsToLatLngs(a),u)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=nt(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function oW(a,u){return new RN(a,u)}em.create=cb,em.pointsToPath=pt,Fa.geometryToLayer=nb,Fa.coordsToLatLng=UI,Fa.coordsToLatLngs=ib,Fa.latLngToCoords=HI,Fa.latLngsToCoords=rb,Fa.getFeature=Gd,Fa.asFeature=ob,Xt.mergeOptions({boxZoom:!0});var NN=js.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){Ct(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Dn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){bn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),eu(),Fs(),this._startPoint=this._map.mouseEventToContainerPoint(a),Ct(document,{contextmenu:nu,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=Lt("div","leaflet-zoom-box",this._container),mt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var u=new be(this._point,this._startPoint),h=u.getSize();Gn(this._box,u.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(bn(this._box),Rn(this._container,"leaflet-crosshair")),Ol(),tu(),Dn(document,{contextmenu:nu,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var u=new ut(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Xt.addInitHook("addHandler","boxZoom",NN),Xt.mergeOptions({doubleClickZoom:!0});var FN=js.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var u=this._map,h=u.getZoom(),v=u.options.zoomDelta,x=a.originalEvent.shiftKey?h-v:h+v;u.options.doubleClickZoom==="center"?u.setZoom(x):u.setZoomAround(a.containerPoint,x)}});Xt.addInitHook("addHandler","doubleClickZoom",FN),Xt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var LN=js.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new Fl(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}mt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Rn(this._map._container,"leaflet-grab"),Rn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=nt(this._map.options.maxBounds);this._offsetLimit=xe(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var u=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(u),this._prunePositions(u)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,u){return a-(a-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;a.x<u.min.x&&(a.x=this._viscousLimit(a.x,u.min.x)),a.y<u.min.y&&(a.y=this._viscousLimit(a.y,u.min.y)),a.x>u.max.x&&(a.x=this._viscousLimit(a.x,u.max.x)),a.y>u.max.y&&(a.y=this._viscousLimit(a.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,u=Math.round(a/2),h=this._initialWorldOffset,v=this._draggable._newPos.x,x=(v-u+h)%a+u-h,T=(v+u+h)%a-u-h,F=Math.abs(x+h)<Math.abs(T+h)?x:T;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=F},_onDragEnd:function(a){var u=this._map,h=u.options,v=!h.inertia||a.noInertia||this._times.length<2;if(u.fire("dragend",a),v)u.fire("moveend");else{this._prunePositions(+new Date);var x=this._lastPos.subtract(this._positions[0]),T=(this._lastTime-this._times[0])/1e3,F=h.easeLinearity,K=x.multiplyBy(F/T),ee=K.distanceTo([0,0]),fe=Math.min(h.inertiaMaxSpeed,ee),Ae=K.multiplyBy(fe/ee),it=fe/(h.inertiaDeceleration*F),jt=Ae.multiplyBy(-it/2).round();!jt.x&&!jt.y?u.fire("moveend"):(jt=u._limitOffset(jt,u.options.maxBounds),X(function(){u.panBy(jt,{duration:it,easeLinearity:F,noMoveStart:!0,animate:!0})}))}}});Xt.addInitHook("addHandler","dragging",LN),Xt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var jN=js.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),Ct(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Dn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,u=document.documentElement,h=a.scrollTop||u.scrollTop,v=a.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(v,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var u=this._panKeys={},h=this.keyCodes,v,x;for(v=0,x=h.left.length;v<x;v++)u[h.left[v]]=[-1*a,0];for(v=0,x=h.right.length;v<x;v++)u[h.right[v]]=[a,0];for(v=0,x=h.down.length;v<x;v++)u[h.down[v]]=[0,a];for(v=0,x=h.up.length;v<x;v++)u[h.up[v]]=[0,-1*a]},_setZoomDelta:function(a){var u=this._zoomKeys={},h=this.keyCodes,v,x;for(v=0,x=h.zoomIn.length;v<x;v++)u[h.zoomIn[v]]=a;for(v=0,x=h.zoomOut.length;v<x;v++)u[h.zoomOut[v]]=-a},_addHooks:function(){Ct(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Dn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var u=a.keyCode,h=this._map,v;if(u in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(v=this._panKeys[u],a.shiftKey&&(v=ie(v).multiplyBy(3)),h.options.maxBounds&&(v=h._limitOffset(ie(v),h.options.maxBounds)),h.options.worldCopyJump){var x=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(v)));h.panTo(x)}else h.panBy(v)}else if(u in this._zoomKeys)h.setZoom(h.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;nu(a)}}});Xt.addInitHook("addHandler","keyboard",jN),Xt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var BN=js.extend({addHooks:function(){Ct(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Dn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var u=cN(a),h=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var v=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),v),nu(a)},_performZoom:function(){var a=this._map,u=a.getZoom(),h=this._map.options.zoomSnap||0;a._stop();var v=this._delta/(this._map.options.wheelPxPerZoomLevel*4),x=4*Math.log(2/(1+Math.exp(-Math.abs(v))))/Math.LN2,T=h?Math.ceil(x/h)*h:x,F=a._limitZoom(u+(this._delta>0?T:-T))-u;this._delta=0,this._startTime=null,F&&(a.options.scrollWheelZoom==="center"?a.setZoom(u+F):a.setZoomAround(this._lastMousePos,u+F))}});Xt.addInitHook("addHandler","scrollWheelZoom",BN);var sW=600;Xt.mergeOptions({tapHold:N.touchNative&&N.safari&&N.mobile,tapTolerance:15});var VN=js.extend({addHooks:function(){Ct(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Dn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var u=a.touches[0];this._startPos=this._newPos=new W(u.clientX,u.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(Ct(document,"touchend",Ji),Ct(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),sW),Ct(document,"touchend touchcancel contextmenu",this._cancel,this),Ct(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){Dn(document,"touchend",Ji),Dn(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),Dn(document,"touchend touchcancel contextmenu",this._cancel,this),Dn(document,"touchmove",this._onMove,this)},_onMove:function(a){var u=a.touches[0];this._newPos=new W(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,u){var h=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});h._simulated=!0,u.target.dispatchEvent(h)}});Xt.addInitHook("addHandler","tapHold",VN),Xt.mergeOptions({touchZoom:N.touch,bounceAtZoomLimits:!0});var zN=js.extend({addHooks:function(){mt(this._map._container,"leaflet-touch-zoom"),Ct(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Rn(this._map._container,"leaflet-touch-zoom"),Dn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var u=this._map;if(!(!a.touches||a.touches.length!==2||u._animatingZoom||this._zooming)){var h=u.mouseEventToContainerPoint(a.touches[0]),v=u.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(h.add(v)._divideBy(2))),this._startDist=h.distanceTo(v),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),Ct(document,"touchmove",this._onTouchMove,this),Ct(document,"touchend touchcancel",this._onTouchEnd,this),Ji(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var u=this._map,h=u.mouseEventToContainerPoint(a.touches[0]),v=u.mouseEventToContainerPoint(a.touches[1]),x=h.distanceTo(v)/this._startDist;if(this._zoom=u.getScaleZoom(x,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&x<1||this._zoom>u.getMaxZoom()&&x>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,x===1)return}else{var T=h._add(v)._divideBy(2)._subtract(this._centerPoint);if(x===1&&T.x===0&&T.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(T),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),se(this._animRequest);var F=r(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=X(F,this,!0),Ji(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,se(this._animRequest),Dn(document,"touchmove",this._onTouchMove,this),Dn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Xt.addInitHook("addHandler","touchZoom",zN),Xt.BoxZoom=NN,Xt.DoubleClickZoom=FN,Xt.Drag=LN,Xt.Keyboard=jN,Xt.ScrollWheelZoom=BN,Xt.TapHold=VN,Xt.TouchZoom=zN,n.Bounds=be,n.Browser=N,n.CRS=tn,n.Canvas=MN,n.Circle=$I,n.CircleMarker=tb,n.Class=me,n.Control=Jo,n.DivIcon=TN,n.DivOverlay=Bs,n.DomEvent=Eq,n.DomUtil=OI,n.Draggable=Fl,n.Evented=ne,n.FeatureGroup=Ra,n.GeoJSON=Fa,n.GridLayer=Xp,n.Handler=js,n.Icon=qd,n.ImageOverlay=sb,n.LatLng=Je,n.LatLngBounds=ut,n.Layer=es,n.LayerGroup=Hd,n.LineUtil=Lq,n.Map=Xt,n.Marker=eb,n.Mixin=Mq,n.Path=Ll,n.Point=W,n.PolyUtil=Pq,n.Polygon=Wd,n.Polyline=Na,n.Popup=ab,n.PosAnimation=uN,n.Projection=jq,n.Rectangle=RN,n.Renderer=La,n.SVG=em,n.SVGOverlay=DN,n.TileLayer=Zd,n.Tooltip=lb,n.Transformation=H,n.Util=ue,n.VideoOverlay=SN,n.bind=r,n.bounds=xe,n.canvas=PN,n.circle=Wq,n.circleMarker=qq,n.control=Kp,n.divIcon=tW,n.extend=t,n.featureGroup=$q,n.geoJSON=IN,n.geoJson=Kq,n.gridLayer=nW,n.icon=Uq,n.imageOverlay=Yq,n.latLng=Ee,n.latLngBounds=nt,n.layerGroup=zq,n.map=Iq,n.marker=Hq,n.point=ie,n.polygon=Zq,n.polyline=Gq,n.popup=Jq,n.rectangle=oW,n.setOptions=m,n.stamp=s,n.svg=ON,n.svgOverlay=Xq,n.tileLayer=kN,n.tooltip=eW,n.transformation=qe,n.version=e,n.videoOverlay=Qq;var aW=window.L;n.noConflict=function(){return window.L=aW,this},window.L=n})});var k5=dt(cE=>{"use strict";cE.byteLength=Nce;cE.toByteArray=Lce;cE.fromByteArray=Vce;var xa=[],Ko=[],Rce=typeof Uint8Array<"u"?Uint8Array:Array,GO="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(vd=0,D5=GO.length;vd<D5;++vd)xa[vd]=GO[vd],Ko[GO.charCodeAt(vd)]=vd;var vd,D5;Ko[45]=62;Ko[95]=63;function T5(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var i=t===e?0:4-t%4;return[t,i]}function Nce(n){var e=T5(n),t=e[0],i=e[1];return(t+i)*3/4-i}function Fce(n,e,t){return(e+t)*3/4-t}function Lce(n){var e,t=T5(n),i=t[0],r=t[1],o=new Rce(Fce(n,i,r)),s=0,l=r>0?i-4:i,c;for(c=0;c<l;c+=4)e=Ko[n.charCodeAt(c)]<<18|Ko[n.charCodeAt(c+1)]<<12|Ko[n.charCodeAt(c+2)]<<6|Ko[n.charCodeAt(c+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return r===2&&(e=Ko[n.charCodeAt(c)]<<2|Ko[n.charCodeAt(c+1)]>>4,o[s++]=e&255),r===1&&(e=Ko[n.charCodeAt(c)]<<10|Ko[n.charCodeAt(c+1)]<<4|Ko[n.charCodeAt(c+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function jce(n){return xa[n>>18&63]+xa[n>>12&63]+xa[n>>6&63]+xa[n&63]}function Bce(n,e,t){for(var i,r=[],o=e;o<t;o+=3)i=(n[o]<<16&16711680)+(n[o+1]<<8&65280)+(n[o+2]&255),r.push(jce(i));return r.join("")}function Vce(n){for(var e,t=n.length,i=t%3,r=[],o=16383,s=0,l=t-i;s<l;s+=o)r.push(Bce(n,s,s+o>l?l:s+o));return i===1?(e=n[t-1],r.push(xa[e>>2]+xa[e<<4&63]+"==")):i===2&&(e=(n[t-2]<<8)+n[t-1],r.push(xa[e>>10]+xa[e>>4&63]+xa[e<<2&63]+"=")),r.join("")}});var dS;function yb(){return dS}function Us(n){let e=dS;return dS=n,e}var zF=Symbol("NotFound");function nh(n){return n===zF||n?.name==="\u0275NotFound"}function Ib(n,e){return Object.is(n,e)}var Ti=null,wb=!1,hS=1,WW=null,pi=Symbol("SIGNAL");function rt(n){let e=Ti;return Ti=n,e}function Sb(){return Ti}var Vl={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function zl(n){if(wb)throw new Error("");if(Ti===null)return;Ti.consumerOnSignalRead(n);let e=Ti.nextProducerIndex++;if(kb(Ti),e<Ti.producerNode.length&&Ti.producerNode[e]!==n&&dm(Ti)){let t=Ti.producerNode[e];Tb(t,Ti.producerIndexOfThis[e])}Ti.producerNode[e]!==n&&(Ti.producerNode[e]=n,Ti.producerIndexOfThis[e]=dm(Ti)?UF(n,Ti,e):0),Ti.producerLastReadVersion[e]=n.version}function $F(){hS++}function Db(n){if(!(dm(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===hS)){if(!n.producerMustRecompute(n)&&!au(n)){Eb(n);return}n.producerRecomputeValue(n),Eb(n)}}function fS(n){if(n.liveConsumerNode===void 0)return;let e=wb;wb=!0;try{for(let t of n.liveConsumerNode)t.dirty||GW(t)}finally{wb=e}}function pS(){return Ti?.consumerAllowSignalWrites!==!1}function GW(n){n.dirty=!0,fS(n),n.consumerMarkedDirty?.(n)}function Eb(n){n.dirty=!1,n.lastCleanEpoch=hS}function Va(n){return n&&(n.nextProducerIndex=0),rt(n)}function $l(n,e){if(rt(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(dm(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Tb(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function au(n){kb(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(Db(t),i!==t.version))return!0}return!1}function ih(n){if(kb(n),dm(n))for(let e=0;e<n.producerNode.length;e++)Tb(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function UF(n,e,t){if(HF(n),n.liveConsumerNode.length===0&&qF(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=UF(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Tb(n,e){if(HF(n),n.liveConsumerNode.length===1&&qF(n))for(let i=0;i<n.producerNode.length;i++)Tb(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];kb(r),r.producerIndexOfThis[i]=e}}function dm(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function kb(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function HF(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function qF(n){return n.producerNode!==void 0}function Ab(n){WW?.(n)}function hm(n,e){let t=Object.create(ZW);t.computation=n,e!==void 0&&(t.equal=e);let i=()=>{if(Db(t),zl(t),t.value===um)throw t.error;return t.value};return i[pi]=t,Ab(t),i}var xb=Symbol("UNSET"),Cb=Symbol("COMPUTING"),um=Symbol("ERRORED"),ZW=S(b({},Vl),{value:xb,dirty:!0,error:null,equal:Ib,kind:"computed",producerMustRecompute(n){return n.value===xb||n.value===Cb},producerRecomputeValue(n){if(n.value===Cb)throw new Error("");let e=n.value;n.value=Cb;let t=Va(n),i,r=!1;try{i=n.computation(),rt(null),r=e!==xb&&e!==um&&i!==um&&n.equal(e,i)}catch(o){i=um,n.error=o}finally{$l(n,t)}if(r){n.value=e;return}n.value=i,n.version++}});function KW(){throw new Error}var WF=KW;function GF(n){WF(n)}function mS(n){WF=n}var YW=null;function gS(n,e){let t=Object.create(fm);t.value=n,e!==void 0&&(t.equal=e);let i=()=>ZF(t);return i[pi]=t,Ab(t),[i,s=>lu(t,s),s=>_S(t,s)]}function ZF(n){return zl(n),n.value}function lu(n,e){pS()||GF(n),n.equal(n.value,e)||(n.value=e,QW(n))}function _S(n,e){pS()||GF(n),lu(n,e(n.value))}var fm=S(b({},Vl),{equal:Ib,value:void 0,kind:"signal"});function QW(n){n.version++,$F(),fS(n),YW?.(n)}function et(n){return typeof n=="function"}function rh(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Mb=rh(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function cu(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Pt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(et(i))try{i()}catch(o){e=o instanceof Mb?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{KF(o)}catch(s){e=e??[],s instanceof Mb?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Mb(e)}}add(e){var t;if(e&&e!==this)if(this.closed)KF(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&cu(t,e)}remove(e){let{_finalizers:t}=this;t&&cu(t,e),e instanceof n&&e._removeParent(this)}};Pt.EMPTY=(()=>{let n=new Pt;return n.closed=!0,n})();var vS=Pt.EMPTY;function Pb(n){return n instanceof Pt||n&&"closed"in n&&et(n.remove)&&et(n.add)&&et(n.unsubscribe)}function KF(n){et(n)?n():n.unsubscribe()}var ns={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var oh={setTimeout(n,e,...t){let{delegate:i}=oh;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=oh;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ob(n){oh.setTimeout(()=>{let{onUnhandledError:e}=ns;if(e)e(n);else throw n})}function pm(){}var YF=bS("C",void 0,void 0);function QF(n){return bS("E",void 0,n)}function XF(n){return bS("N",n,void 0)}function bS(n,e,t){return{kind:n,value:e,error:t}}var uu=null;function sh(n){if(ns.useDeprecatedSynchronousErrorHandling){let e=!uu;if(e&&(uu={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=uu;if(uu=null,t)throw i}}else n()}function JF(n){ns.useDeprecatedSynchronousErrorHandling&&uu&&(uu.errorThrown=!0,uu.error=n)}var du=class extends Pt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Pb(e)&&e.add(this)):this.destination=e9}static create(e,t,i){return new za(e,t,i)}next(e){this.isStopped?wS(XF(e),this):this._next(e)}error(e){this.isStopped?wS(QF(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?wS(YF,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},XW=Function.prototype.bind;function yS(n,e){return XW.call(n,e)}var xS=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Rb(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Rb(i)}else Rb(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Rb(t)}}},za=class extends du{constructor(e,t,i){super();let r;if(et(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&ns.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&yS(e.next,o),error:e.error&&yS(e.error,o),complete:e.complete&&yS(e.complete,o)}):r=e}this.destination=new xS(r)}};function Rb(n){ns.useDeprecatedSynchronousErrorHandling?JF(n):Ob(n)}function JW(n){throw n}function wS(n,e){let{onStoppedNotification:t}=ns;t&&oh.setTimeout(()=>t(n,e))}var e9={closed:!0,next:pm,error:JW,complete:pm};var ah=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ir(n){return n}function CS(...n){return ES(n)}function ES(n){return n.length===0?Ir:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var ot=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let o=n9(t)?t:new za(t,i,r);return sh(()=>{let{operator:s,source:l}=this;o.add(s?s.call(o,l):l?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=eL(i),new i((r,o)=>{let s=new za({next:l=>{try{t(l)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[ah](){return this}pipe(...t){return ES(t)(this)}toPromise(t){return t=eL(t),new t((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function eL(n){var e;return(e=n??ns.Promise)!==null&&e!==void 0?e:Promise}function t9(n){return n&&et(n.next)&&et(n.error)&&et(n.complete)}function n9(n){return n&&n instanceof du||t9(n)&&Pb(n)}function IS(n){return et(n?.lift)}function Et(n){return e=>{if(IS(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function wt(n,e,t,i,r){return new SS(n,e,t,i,r)}var SS=class extends du{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(l){try{t(l)}catch(c){e.error(c)}}:super._next,this._error=r?function(l){try{r(l)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function lh(){return Et((n,e)=>{let t=null;n._refCount++;let i=wt(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var ch=class extends ot{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,IS(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pt;let t=this.getSubject();e.add(this.source.subscribe(wt(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pt.EMPTY)}return e}refCount(){return lh()(this)}};var tL=rh(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ve=(()=>{class n extends ot{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new Nb(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new tL}next(t){sh(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){sh(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){sh(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:o}=this;return i||r?vS:(this.currentObservers=null,o.push(t),new Pt(()=>{this.currentObservers=null,cu(o,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){let t=new ot;return t.source=this,t}}return n.create=(e,t)=>new Nb(e,t),n})(),Nb=class extends ve{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:vS}};var fn=class extends ve{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var mm={now(){return(mm.delegate||Date).now()},delegate:void 0};var Fb=class extends ve{constructor(e=1/0,t=1/0,i=mm){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;t||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=t.now(),l=0;for(let c=1;c<i.length&&i[c]<=s;c+=2)l=c;l&&i.splice(0,l+1)}}};var Lb=class extends Pt{constructor(e,t){super()}schedule(e,t=0){return this}};var gm={setInterval(n,e,...t){let{delegate:i}=gm;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=gm;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var jb=class extends Lb{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return gm.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&gm.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,cu(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var uh=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};uh.now=mm.now;var Bb=class extends uh{constructor(e,t=uh.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var _m=new Bb(jb),nL=_m;var Vi=new ot(n=>n.complete());function Vb(n){return n&&et(n.schedule)}function DS(n){return n[n.length-1]}function zb(n){return et(DS(n))?n.pop():void 0}function Hs(n){return Vb(DS(n))?n.pop():void 0}function iL(n,e){return typeof DS(n)=="number"?n.pop():e}function oL(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function l(f){try{d(i.next(f))}catch(p){s(p)}}function c(f){try{d(i.throw(f))}catch(p){s(p)}}function d(f){f.done?o(f.value):r(f.value).then(l,c)}d((i=i.apply(n,e||[])).next())})}function rL(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function hu(n){return this instanceof hu?(this.v=n,this):new hu(n)}function sL(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(m){return function(_){return Promise.resolve(_).then(m,p)}}function l(m,_){i[m]&&(r[m]=function(y){return new Promise(function(w,I){o.push([m,y,w,I])>1||c(m,y)})},_&&(r[m]=_(r[m])))}function c(m,_){try{d(i[m](_))}catch(y){g(o[0][3],y)}}function d(m){m.value instanceof hu?Promise.resolve(m.value.v).then(f,p):g(o[0][2],m)}function f(m){c("next",m)}function p(m){c("throw",m)}function g(m,_){m(_),o.shift(),o.length&&c(o[0][0],o[0][1])}}function aL(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof rL=="function"?rL(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(l,c){s=n[o](s),r(l,c,s.done,s.value)})}}function r(o,s,l,c){Promise.resolve(c).then(function(d){o({value:d,done:l})},s)}}var dh=n=>n&&typeof n.length=="number"&&typeof n!="function";function $b(n){return et(n?.then)}function Ub(n){return et(n[ah])}function Hb(n){return Symbol.asyncIterator&&et(n?.[Symbol.asyncIterator])}function qb(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function i9(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Wb=i9();function Gb(n){return et(n?.[Wb])}function Zb(n){return sL(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield hu(t.read());if(r)return yield hu(void 0);yield yield hu(i)}}finally{t.releaseLock()}})}function Kb(n){return et(n?.getReader)}function pn(n){if(n instanceof ot)return n;if(n!=null){if(Ub(n))return r9(n);if(dh(n))return o9(n);if($b(n))return s9(n);if(Hb(n))return lL(n);if(Gb(n))return a9(n);if(Kb(n))return l9(n)}throw qb(n)}function r9(n){return new ot(e=>{let t=n[ah]();if(et(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function o9(n){return new ot(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function s9(n){return new ot(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ob)})}function a9(n){return new ot(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function lL(n){return new ot(e=>{c9(n,e).catch(t=>e.error(t))})}function l9(n){return lL(Zb(n))}function c9(n,e){var t,i,r,o;return oL(this,void 0,void 0,function*(){try{for(t=aL(n);i=yield t.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})}function Gr(n,e,t,i=0,r=!1){let o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function Yb(n,e=0){return Et((t,i)=>{t.subscribe(wt(i,r=>Gr(i,n,()=>i.next(r),e),()=>Gr(i,n,()=>i.complete(),e),r=>Gr(i,n,()=>i.error(r),e)))})}function Qb(n,e=0){return Et((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function cL(n,e){return pn(n).pipe(Qb(e),Yb(e))}function uL(n,e){return pn(n).pipe(Qb(e),Yb(e))}function dL(n,e){return new ot(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function hL(n,e){return new ot(t=>{let i;return Gr(t,e,()=>{i=n[Wb](),Gr(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){t.error(s);return}o?t.complete():t.next(r)},0,!0)}),()=>et(i?.return)&&i.return()})}function Xb(n,e){if(!n)throw new Error("Iterable cannot be null");return new ot(t=>{Gr(t,e,()=>{let i=n[Symbol.asyncIterator]();Gr(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function fL(n,e){return Xb(Zb(n),e)}function pL(n,e){if(n!=null){if(Ub(n))return cL(n,e);if(dh(n))return dL(n,e);if($b(n))return uL(n,e);if(Hb(n))return Xb(n,e);if(Gb(n))return hL(n,e);if(Kb(n))return fL(n,e)}throw qb(n)}function Un(n,e){return e?pL(n,e):pn(n)}function Re(...n){let e=Hs(n);return Un(n,e)}function Ul(n,e){let t=et(n)?n:()=>n,i=r=>r.error(t());return new ot(e?r=>e.schedule(i,0,r):i)}function Jb(n){return!!n&&(n instanceof ot||et(n.lift)&&et(n.subscribe))}var $a=rh(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function mL(n){return n instanceof Date&&!isNaN(n)}function Pe(n,e){return Et((t,i)=>{let r=0;t.subscribe(wt(i,o=>{i.next(n.call(e,o,r++))}))})}var{isArray:u9}=Array;function d9(n,e){return u9(e)?n(...e):n(e)}function hh(n){return Pe(e=>d9(n,e))}var{isArray:h9}=Array,{getPrototypeOf:f9,prototype:p9,keys:m9}=Object;function ey(n){if(n.length===1){let e=n[0];if(h9(e))return{args:e,keys:null};if(g9(e)){let t=m9(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function g9(n){return n&&typeof n=="object"&&f9(n)===p9}function ty(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function fh(...n){let e=Hs(n),t=zb(n),{args:i,keys:r}=ey(n);if(i.length===0)return Un([],e);let o=new ot(_9(i,e,r?s=>ty(r,s):Ir));return t?o.pipe(hh(t)):o}function _9(n,e,t=Ir){return i=>{gL(e,()=>{let{length:r}=n,o=new Array(r),s=r,l=r;for(let c=0;c<r;c++)gL(e,()=>{let d=Un(n[c],e),f=!1;d.subscribe(wt(i,p=>{o[c]=p,f||(f=!0,l--),l||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function gL(n,e,t){n?Gr(t,n,e):e()}function _L(n,e,t,i,r,o,s,l){let c=[],d=0,f=0,p=!1,g=()=>{p&&!c.length&&!d&&e.complete()},m=y=>d<i?_(y):c.push(y),_=y=>{o&&e.next(y),d++;let w=!1;pn(t(y,f++)).subscribe(wt(e,I=>{r?.(I),o?m(I):e.next(I)},()=>{w=!0},void 0,()=>{if(w)try{for(d--;c.length&&d<i;){let I=c.shift();s?Gr(e,s,()=>_(I)):_(I)}g()}catch(I){e.error(I)}}))};return n.subscribe(wt(e,m,()=>{p=!0,g()})),()=>{l?.()}}function oi(n,e,t=1/0){return et(e)?oi((i,r)=>Pe((o,s)=>e(i,o,r,s))(pn(n(i,r))),t):(typeof e=="number"&&(t=e),Et((i,r)=>_L(i,r,n,t)))}function ny(n=1/0){return oi(Ir,n)}function vL(){return ny(1)}function Hl(...n){return vL()(Un(n,Hs(n)))}function Ua(n){return new ot(e=>{pn(n()).subscribe(e)})}function vm(...n){let e=zb(n),{args:t,keys:i}=ey(n),r=new ot(o=>{let{length:s}=t;if(!s){o.complete();return}let l=new Array(s),c=s,d=s;for(let f=0;f<s;f++){let p=!1;pn(t[f]).subscribe(wt(o,g=>{p||(p=!0,d--),l[f]=g},()=>c--,void 0,()=>{(!c||!p)&&(d||o.next(i?ty(i,l):l),o.complete())}))}});return e?r.pipe(hh(e)):r}var v9=["addListener","removeListener"],b9=["addEventListener","removeEventListener"],y9=["on","off"];function bm(n,e,t,i){if(et(t)&&(i=t,t=void 0),i)return bm(n,e,t).pipe(hh(i));let[r,o]=C9(n)?b9.map(s=>l=>n[s](e,l,t)):w9(n)?v9.map(bL(n,e)):x9(n)?y9.map(bL(n,e)):[];if(!r&&dh(n))return oi(s=>bm(s,e,t))(pn(n));if(!r)throw new TypeError("Invalid event target");return new ot(s=>{let l=(...c)=>s.next(1<c.length?c:c[0]);return r(l),()=>o(l)})}function bL(n,e){return t=>i=>n[t](e,i)}function w9(n){return et(n.addListener)&&et(n.removeListener)}function x9(n){return et(n.on)&&et(n.off)}function C9(n){return et(n.addEventListener)&&et(n.removeEventListener)}function ym(n=0,e,t=nL){let i=-1;return e!=null&&(Vb(e)?t=e:i=e),new ot(r=>{let o=mL(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function Sr(...n){let e=Hs(n),t=iL(n,1/0),i=n;return i.length?i.length===1?pn(i[0]):ny(t)(Un(i,e)):Vi}function It(n,e){return Et((t,i)=>{let r=0;t.subscribe(wt(i,o=>n.call(e,o,r++)&&i.next(o)))})}function yL(n){return Et((e,t)=>{let i=!1,r=null,o=null,s=!1,l=()=>{if(o?.unsubscribe(),o=null,i){i=!1;let d=r;r=null,t.next(d)}s&&t.complete()},c=()=>{o=null,s&&t.complete()};e.subscribe(wt(t,d=>{i=!0,r=d,o||pn(n(d)).subscribe(o=wt(t,l,c))},()=>{s=!0,(!i||!o||o.closed)&&t.complete()}))})}function ph(n,e=_m){return yL(()=>ym(n,e))}function No(n){return Et((e,t)=>{let i=null,r=!1,o;i=e.subscribe(wt(t,void 0,void 0,s=>{o=pn(n(s,No(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function wL(n,e,t,i,r){return(o,s)=>{let l=t,c=e,d=0;o.subscribe(wt(s,f=>{let p=d++;c=l?n(c,f,p):(l=!0,f),i&&s.next(c)},r&&(()=>{l&&s.next(c),s.complete()})))}}function ql(n,e){return et(e)?oi(n,e,1):oi(n,1)}function Ha(n,e=_m){return Et((t,i)=>{let r=null,o=null,s=null,l=()=>{if(r){r.unsubscribe(),r=null;let d=o;o=null,i.next(d)}};function c(){let d=s+n,f=e.now();if(f<d){r=this.schedule(void 0,d-f),i.add(r);return}l()}t.subscribe(wt(i,d=>{o=d,s=e.now(),r||(r=e.schedule(c,n),i.add(r))},()=>{l(),i.complete()},void 0,()=>{o=r=null}))})}function Wl(n){return Et((e,t)=>{let i=!1;e.subscribe(wt(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Kn(n){return n<=0?()=>Vi:Et((e,t)=>{let i=0;e.subscribe(wt(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function mh(n){return Pe(()=>n)}function gh(n,e=Ir){return n=n??E9,Et((t,i)=>{let r,o=!0;t.subscribe(wt(i,s=>{let l=e(s);(o||!n(r,l))&&(o=!1,r=l,i.next(s))}))})}function E9(n,e){return n===e}function iy(n=I9){return Et((e,t)=>{let i=!1;e.subscribe(wt(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function I9(){return new $a}function qs(n){return Et((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ws(n,e){let t=arguments.length>=2;return i=>i.pipe(n?It((r,o)=>n(r,o,i)):Ir,Kn(1),t?Wl(e):iy(()=>new $a))}function _h(n){return n<=0?()=>Vi:Et((e,t)=>{let i=[];e.subscribe(wt(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function TS(n,e){let t=arguments.length>=2;return i=>i.pipe(n?It((r,o)=>n(r,o,i)):Ir,_h(1),t?Wl(e):iy(()=>new $a))}function ry(){return Et((n,e)=>{let t,i=!1;n.subscribe(wt(e,r=>{let o=t;t=r,i&&e.next([o,r]),i=!0}))})}function kS(n,e){return Et(wL(n,e,arguments.length>=2,!0))}function wm(n={}){let{connector:e=()=>new ve,resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,l,c,d=0,f=!1,p=!1,g=()=>{l?.unsubscribe(),l=void 0},m=()=>{g(),s=c=void 0,f=p=!1},_=()=>{let y=s;m(),y?.unsubscribe()};return Et((y,w)=>{d++,!p&&!f&&g();let I=c=c??e();w.add(()=>{d--,d===0&&!p&&!f&&(l=AS(_,r))}),I.subscribe(w),!s&&d>0&&(s=new za({next:k=>I.next(k),error:k=>{p=!0,g(),l=AS(m,t,k),I.error(k)},complete:()=>{f=!0,g(),l=AS(m,i),I.complete()}}),pn(y).subscribe(s))})(o)}}function AS(n,e,...t){if(e===!0){n();return}if(e===!1)return;let i=new za({next:()=>{i.unsubscribe(),n()}});return pn(e(...t)).subscribe(i)}function vh(n,e,t){let i,r=!1;return n&&typeof n=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n:i=n??1/0,wm({connector:()=>new Fb(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function xm(n){return It((e,t)=>n<=t)}function ki(...n){let e=Hs(n);return Et((t,i)=>{(e?Hl(n,t,e):Hl(n,t)).subscribe(i)})}function mi(n,e){return Et((t,i)=>{let r=null,o=0,s=!1,l=()=>s&&!r&&i.complete();t.subscribe(wt(i,c=>{r?.unsubscribe();let d=0,f=o++;pn(n(c,f)).subscribe(r=wt(i,p=>i.next(e?e(c,p,f,d++):p),()=>{r=null,l()}))},()=>{s=!0,l()}))})}function wn(n){return Et((e,t)=>{pn(n).subscribe(wt(t,()=>t.complete(),pm)),!t.closed&&e.subscribe(t)})}function Hn(n,e,t){let i=et(n)||e||t?{next:n,error:e,complete:t}:n;return i?Et((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let l=!0;r.subscribe(wt(o,c=>{var d;(d=i.next)===null||d===void 0||d.call(i,c),o.next(c)},()=>{var c;l=!1,(c=i.complete)===null||c===void 0||c.call(i),o.complete()},c=>{var d;l=!1,(d=i.error)===null||d===void 0||d.call(i,c),o.error(c)},()=>{var c,d;l&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(d=i.finalize)===null||d===void 0||d.call(i)}))}):Ir}function xL(n){let e=rt(null);try{return n()}finally{rt(e)}}var cy="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ye=class extends Error{code;constructor(e,t){super(Ga(e,t)),this.code=e}};function S9(n){return`NG0${Math.abs(n)}`}function Ga(n,e){return`${S9(n)}${e?": "+e:""}`}var Gs=globalThis;function an(n){for(let e in n)if(n[e]===an)return e;throw Error("")}function IL(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Wa(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Wa).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i>=0?t.slice(0,i):t}function uy(n,e){return n?e?`${n} ${e}`:n:e||""}var D9=an({__forward_ref__:an});function si(n){return n.__forward_ref__=si,n.toString=function(){return Wa(this())},n}function er(n){return $S(n)?n():n}function $S(n){return typeof n=="function"&&n.hasOwnProperty(D9)&&n.__forward_ref__===si}function SL(n,e){n==null&&US(e,n,null,"!=")}function US(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(i==null?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}function ce(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ve(n){return{providers:n.providers||[],imports:n.imports||[]}}function Tm(n){return T9(n,dy)}function HS(n){return Tm(n)!==null}function T9(n,e){return n.hasOwnProperty(e)&&n[e]||null}function k9(n){let e=n?.[dy]??null;return e||null}function PS(n){return n&&n.hasOwnProperty(sy)?n[sy]:null}var dy=an({\u0275prov:an}),sy=an({\u0275inj:an}),oe=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ce({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function qS(n){return n&&!!n.\u0275providers}var WS=an({\u0275cmp:an}),GS=an({\u0275dir:an}),ZS=an({\u0275pipe:an}),KS=an({\u0275mod:an}),Im=an({\u0275fac:an}),_u=an({__NG_ELEMENT_ID__:an}),CL=an({__NG_ENV_ID__:an});function Kl(n){return typeof n=="string"?n:n==null?"":String(n)}function ay(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Kl(n)}var YS=an({ngErrorCode:an}),DL=an({ngErrorMessage:an}),Em=an({ngTokenPath:an});function QS(n,e){return TL("",-200,e)}function hy(n,e){throw new ye(-201,!1)}function A9(n,e){n[Em]??=[];let t=n[Em],i;typeof e=="object"&&"multi"in e&&e?.multi===!0?(SL(e.provide,"Token with multi: true should have a provide property"),i=ay(e.provide)):i=ay(e),t[0]!==i&&n[Em].unshift(i)}function M9(n,e){let t=n[Em],i=n[YS],r=n[DL]||n.message;return n.message=O9(r,i,t,e),n}function TL(n,e,t){let i=new ye(e,n);return i[YS]=e,i[DL]=n,t&&(i[Em]=t),i}function P9(n){return n[YS]}function O9(n,e,t=[],i=null){let r="";t&&t.length>1&&(r=` Path: ${t.join(" -> ")}.`);let o=i?` Source: ${i}.`:"";return Ga(e,`${n}${o}${r}`)}var OS;function kL(){return OS}function Dr(n){let e=OS;return OS=n,e}function XS(n,e,t){let i=Tm(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&8)return null;if(e!==void 0)return e;hy(n,"Injector")}var R9={},fu=R9,RS="__NG_DI_FLAG__",NS=class{injector;constructor(e){this.injector=e}retrieve(e,t){let i=pu(t)||0;try{return this.injector.get(e,i&8?null:fu,i)}catch(r){if(nh(r))return r;throw r}}};function N9(n,e=0){let t=yb();if(t===void 0)throw new ye(-203,!1);if(t===null)return XS(n,void 0,e);{let i=F9(e),r=t.retrieve(n,i);if(nh(r)){if(i.optional)return null;throw r}return r}}function Se(n,e=0){return(kL()||N9)(er(n),e)}function D(n,e){return Se(n,pu(e))}function pu(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function F9(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function FS(n){let e=[];for(let t=0;t<n.length;t++){let i=er(n[t]);if(Array.isArray(i)){if(i.length===0)throw new ye(900,!1);let r,o=0;for(let s=0;s<i.length;s++){let l=i[s],c=L9(l);typeof c=="number"?c===-1?r=l.token:o|=c:r=l}e.push(Se(r,o))}else e.push(Se(i))}return e}function JS(n,e){return n[RS]=e,n.prototype[RS]=e,n}function L9(n){return n[RS]}function Gl(n,e){let t=n.hasOwnProperty(Im);return t?n[Im]:null}function AL(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}function ML(n){return n.flat(Number.POSITIVE_INFINITY)}function fy(n,e){n.forEach(t=>Array.isArray(t)?fy(t,e):e(t))}function eD(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function km(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function PL(n,e){let t=[];for(let i=0;i<n;i++)t.push(e);return t}function OL(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let o=r-2;n[r]=n[o],r--}n[e]=t,n[e+1]=i}}function py(n,e,t){let i=yh(n,e);return i>=0?n[i|1]=t:(i=~i,OL(n,i,e,t)),i}function my(n,e){let t=yh(n,e);if(t>=0)return n[t|1]}function yh(n,e){return j9(n,e,1)}function j9(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}var Yl={},ar=[],Za=new oe(""),tD=new oe("",-1),nD=new oe(""),Sm=class{get(e,t=fu){if(t===fu){let r=TL("",-201);throw r.name="\u0275NotFound",r}return t}};function iD(n){return n[KS]||null}function Ka(n){return n[WS]||null}function rD(n){return n[GS]||null}function RL(n){return n[ZS]||null}function Ql(n){return{\u0275providers:n}}function NL(...n){return{\u0275providers:oD(!0,n),\u0275fromNgModule:!0}}function oD(n,...e){let t=[],i=new Set,r,o=s=>{t.push(s)};return fy(e,s=>{let l=s;ly(l,o,[],i)&&(r||=[],r.push(l))}),r!==void 0&&FL(r,o),t}function FL(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];sD(r,o=>{e(o,i)})}}function ly(n,e,t,i){if(n=er(n),!n)return!1;let r=null,o=PS(n),s=!o&&Ka(n);if(!o&&!s){let c=n.ngModule;if(o=PS(c),o)r=c;else return!1}else{if(s&&!s.standalone)return!1;r=n}let l=i.has(r);if(s){if(l)return!1;if(i.add(r),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let d of c)ly(d,e,t,i)}}else if(o){if(o.imports!=null&&!l){i.add(r);let d;try{fy(o.imports,f=>{ly(f,e,t,i)&&(d||=[],d.push(f))})}finally{}d!==void 0&&FL(d,e)}if(!l){let d=Gl(r)||(()=>new r);e({provide:r,useFactory:d,deps:ar},r),e({provide:nD,useValue:r,multi:!0},r),e({provide:Za,useValue:()=>Se(r),multi:!0},r)}let c=o.providers;if(c!=null&&!l){let d=n;sD(c,f=>{e(f,d)})}}else return!1;return r!==n&&n.providers!==void 0}function sD(n,e){for(let t of n)qS(t)&&(t=t.\u0275providers),Array.isArray(t)?sD(t,e):e(t)}var B9=an({provide:String,useValue:an});function LL(n){return n!==null&&typeof n=="object"&&B9 in n}function V9(n){return!!(n&&n.useExisting)}function z9(n){return!!(n&&n.useFactory)}function mu(n){return typeof n=="function"}function jL(n){return!!n.useClass}var Am=new oe(""),oy={},EL={},MS;function wh(){return MS===void 0&&(MS=new Sm),MS}var Fn=class{},gu=class extends Fn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,jS(e,s=>this.processProvider(s)),this.records.set(tD,bh(void 0,this)),r.has("environment")&&this.records.set(Fn,bh(void 0,this));let o=this.records.get(Am);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(nD,ar,{self:!0}))}retrieve(e,t){let i=pu(t)||0;try{return this.get(e,fu,i)}catch(r){if(nh(r))return r;throw r}}destroy(){Cm(this),this._destroyed=!0;let e=rt(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),rt(e)}}onDestroy(e){return Cm(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Cm(this);let t=Us(this),i=Dr(void 0),r;try{return e()}finally{Us(t),Dr(i)}}get(e,t=fu,i){if(Cm(this),e.hasOwnProperty(CL))return e[CL](this);let r=pu(i),o,s=Us(this),l=Dr(void 0);try{if(!(r&4)){let d=this.records.get(e);if(d===void 0){let f=W9(e)&&Tm(e);f&&this.injectableDefInScope(f)?d=bh(LS(e),oy):d=null,this.records.set(e,d)}if(d!=null)return this.hydrate(e,d,r)}let c=r&2?wh():this.parent;return t=r&8&&t===fu?null:t,c.get(e,t)}catch(c){let d=P9(c);throw d===-200||d===-201?new ye(d,null):c}finally{Dr(l),Us(s)}}resolveInjectorInitializers(){let e=rt(null),t=Us(this),i=Dr(void 0),r;try{let o=this.get(Za,ar,{self:!0});for(let s of o)s()}finally{Us(t),Dr(i),rt(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Wa(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=er(e);let t=mu(e)?e:er(e&&e.provide),i=U9(e);if(!mu(e)&&e.multi===!0){let r=this.records.get(t);r||(r=bh(void 0,oy,!0),r.factory=()=>FS(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t,i){let r=rt(null);try{if(t.value===EL)throw QS(Wa(e));return t.value===oy&&(t.value=EL,t.value=t.factory(void 0,i)),typeof t.value=="object"&&t.value&&q9(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{rt(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=er(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function LS(n){let e=Tm(n),t=e!==null?e.factory:Gl(n);if(t!==null)return t;if(n instanceof oe)throw new ye(204,!1);if(n instanceof Function)return $9(n);throw new ye(204,!1)}function $9(n){if(n.length>0)throw new ye(204,!1);let t=k9(n);return t!==null?()=>t.factory(n):()=>new n}function U9(n){if(LL(n))return bh(void 0,n.useValue);{let e=aD(n);return bh(e,oy)}}function aD(n,e,t){let i;if(mu(n)){let r=er(n);return Gl(r)||LS(r)}else if(LL(n))i=()=>er(n.useValue);else if(z9(n))i=()=>n.useFactory(...FS(n.deps||[]));else if(V9(n))i=(r,o)=>Se(er(n.useExisting),o!==void 0&&o&8?8:void 0);else{let r=er(n&&(n.useClass||n.provide));if(H9(n))i=()=>new r(...FS(n.deps));else return Gl(r)||LS(r)}return i}function Cm(n){if(n.destroyed)throw new ye(205,!1)}function bh(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function H9(n){return!!n.deps}function q9(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function W9(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function jS(n,e){for(let t of n)Array.isArray(t)?jS(t,e):t&&qS(t)?jS(t.\u0275providers,e):e(t)}function tr(n,e){let t;n instanceof gu?(Cm(n),t=n):t=new NS(n);let i,r=Us(t),o=Dr(void 0);try{return e()}finally{Us(r),Dr(o)}}function BL(){return kL()!==void 0||yb()!=null}var is=0,Ke=1,ht=2,Ai=3,Lo=4,Tr=5,vu=6,xh=7,ai=8,bu=9,Zs=10,xn=11,Ch=12,lD=13,yu=14,kr=15,Xl=16,wu=17,Ks=18,Mm=19,cD=20,qa=21,gy=22,Ya=23,mo=24,xu=25,Ln=26,VL=1,uD=6,Jl=7,Pm=8,Cu=9,$i=10;function Ys(n){return Array.isArray(n)&&typeof n[VL]=="object"}function rs(n){return Array.isArray(n)&&n[VL]===!0}function dD(n){return(n.flags&4)!==0}function ec(n){return n.componentOffset>-1}function Eh(n){return(n.flags&1)===1}function Qs(n){return!!n.template}function Ih(n){return(n[ht]&512)!==0}function Eu(n){return(n[ht]&256)===256}var hD="svg",zL="math";function jo(n){for(;Array.isArray(n);)n=n[is];return n}function fD(n,e){return jo(e[n])}function os(n,e){return jo(e[n.index])}function Om(n,e){return n.data[e]}function _y(n,e){return n[e]}function pD(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function Bo(n,e){let t=e[n];return Ys(t)?t:t[is]}function $L(n){return(n[ht]&4)===4}function vy(n){return(n[ht]&128)===128}function UL(n){return rs(n[Ai])}function go(n,e){return e==null?null:n[e]}function mD(n){n[wu]=0}function gD(n){n[ht]&1024||(n[ht]|=1024,vy(n)&&tc(n))}function HL(n,e){for(;n>0;)e=e[yu],n--;return e}function Rm(n){return!!(n[ht]&9216||n[mo]?.dirty)}function by(n){n[Zs].changeDetectionScheduler?.notify(8),n[ht]&64&&(n[ht]|=1024),Rm(n)&&tc(n)}function tc(n){n[Zs].changeDetectionScheduler?.notify(0);let e=Zl(n);for(;e!==null&&!(e[ht]&8192||(e[ht]|=8192,!vy(e)));)e=Zl(e)}function _D(n,e){if(Eu(n))throw new ye(911,!1);n[qa]===null&&(n[qa]=[]),n[qa].push(e)}function qL(n,e){if(n[qa]===null)return;let t=n[qa].indexOf(e);t!==-1&&n[qa].splice(t,1)}function Zl(n){let e=n[Ai];return rs(e)?e[Ai]:e}function vD(n){return n[xh]??=[]}function bD(n){return n.cleanup??=[]}function WL(n,e,t,i){let r=vD(e);r.push(t),n.firstCreatePass&&bD(n).push(i,r.length-1)}var Tt={lFrame:r2(null),bindingsEnabled:!0,skipHydrationRootTNode:null},Nm=function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n}(Nm||{}),G9=0,BS=!1;function GL(){return Tt.lFrame.elementDepthCount}function ZL(){Tt.lFrame.elementDepthCount++}function yD(){Tt.lFrame.elementDepthCount--}function yy(){return Tt.bindingsEnabled}function wD(){return Tt.skipHydrationRootTNode!==null}function xD(n){return Tt.skipHydrationRootTNode===n}function CD(){Tt.skipHydrationRootTNode=null}function Ye(){return Tt.lFrame.lView}function Mn(){return Tt.lFrame.tView}function Ge(n){return Tt.lFrame.contextLView=n,n[ai]}function Ze(n){return Tt.lFrame.contextLView=null,n}function gi(){let n=ED();for(;n!==null&&n.type===64;)n=n.parent;return n}function ED(){return Tt.lFrame.currentTNode}function KL(){let n=Tt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Sh(n,e){let t=Tt.lFrame;t.currentTNode=n,t.isParent=e}function ID(){return Tt.lFrame.isParent}function SD(){Tt.lFrame.isParent=!1}function YL(){return Tt.lFrame.contextLView}function DD(n){US("Must never be called in production mode"),G9=n}function TD(){return BS}function Dh(n){let e=BS;return BS=n,e}function Fm(){let n=Tt.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function QL(){return Tt.lFrame.bindingIndex}function XL(n){return Tt.lFrame.bindingIndex=n}function Qa(){return Tt.lFrame.bindingIndex++}function wy(n){let e=Tt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function JL(){return Tt.lFrame.inI18n}function e2(n,e){let t=Tt.lFrame;t.bindingIndex=t.bindingRootIndex=n,xy(e)}function t2(){return Tt.lFrame.currentDirectiveIndex}function xy(n){Tt.lFrame.currentDirectiveIndex=n}function n2(n){let e=Tt.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Cy(){return Tt.lFrame.currentQueryIndex}function Lm(n){Tt.lFrame.currentQueryIndex=n}function Z9(n){let e=n[Ke];return e.type===2?e.declTNode:e.type===1?n[Tr]:null}function kD(n,e,t){if(t&4){let r=e,o=n;for(;r=r.parent,r===null&&!(t&1);)if(r=Z9(o),r===null||(o=o[yu],r.type&10))break;if(r===null)return!1;e=r,n=o}let i=Tt.lFrame=i2();return i.currentTNode=e,i.lView=n,!0}function Ey(n){let e=i2(),t=n[Ke];Tt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function i2(){let n=Tt.lFrame,e=n===null?null:n.child;return e===null?r2(n):e}function r2(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function o2(){let n=Tt.lFrame;return Tt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var AD=o2;function Iy(){let n=o2();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function s2(n){return(Tt.lFrame.contextLView=HL(n,Tt.lFrame.contextLView))[ai]}function Xs(){return Tt.lFrame.selectedIndex}function nc(n){Tt.lFrame.selectedIndex=n}function jm(){let n=Tt.lFrame;return Om(n.tView,n.selectedIndex)}function Iu(){Tt.lFrame.currentNamespace=hD}function a2(){return Tt.lFrame.currentNamespace}var l2=!0;function Sy(){return l2}function Bm(n){l2=n}function VS(n,e=null,t=null,i){let r=MD(n,e,t,i);return r.resolveInjectorInitializers(),r}function MD(n,e=null,t=null,i,r=new Set){let o=[t||ar,NL(n)];return i=i||(typeof n=="object"?void 0:Wa(n)),new gu(o,e||wh(),i||null,r)}var We=class n{static THROW_IF_NOT_FOUND=fu;static NULL=new Sm;static create(e,t){if(Array.isArray(e))return VS({name:""},t,e,"");{let i=e.name??"";return VS({name:i},e.parent,e.providers,i)}}static \u0275prov=ce({token:n,providedIn:"any",factory:()=>Se(tD)});static __NG_ELEMENT_ID__=-1},Qe=new oe(""),Ui=(()=>{class n{static __NG_ELEMENT_ID__=K9;static __NG_ENV_ID__=t=>t}return n})(),Dm=class extends Ui{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Eu(this._lView)}onDestroy(e){let t=this._lView;return _D(t,e),()=>qL(t,e)}};function K9(){return new Dm(Ye())}var zi=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Zr=new oe("",{providedIn:"root",factory:()=>{let n=D(Fn),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(zi),e.handleError(t))}}}),c2={provide:Za,useValue:()=>void D(zi),multi:!0};function ic(n){return typeof n=="function"&&n[pi]!==void 0}function rn(n,e){let[t,i,r]=gS(n,e?.equal),o=t,s=o[pi];return o.set=i,o.update=r,o.asReadonly=Dy.bind(o),o}function Dy(){let n=this[pi];if(n.readonlyFn===void 0){let e=()=>this();e[pi]=n,n.readonlyFn=e}return n.readonlyFn}function PD(n){return ic(n)&&typeof n.set=="function"}var Fo=class{},Th=new oe("",{providedIn:"root",factory:()=>!1});var OD=new oe(""),RD=new oe("");var Su=(()=>{class n{view;node;constructor(t,i){this.view=t,this.node=i}static __NG_ELEMENT_ID__=Y9}return n})();function Y9(){return new Su(Ye(),gi())}var Js=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new fn(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ot(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ce({token:n,providedIn:"root",factory:()=>new n})}return n})(),Du=(()=>{class n{internalPendingTasks=D(Js);scheduler=D(Fo);errorHandler=D(Zr);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let i=this.add();t().catch(this.errorHandler).finally(i)}static \u0275prov=ce({token:n,providedIn:"root",factory:()=>new n})}return n})();function Tu(...n){}var Vm=(()=>{class n{static \u0275prov=ce({token:n,providedIn:"root",factory:()=>new zS})}return n})(),zS=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,i=this.queues.get(t);i.has(e)&&(i.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||i.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,i]of this.queues)t===null?e||=this.flushQueue(i):e||=t.run(()=>this.flushQueue(i));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let i of e)i.dirty&&(this.dirtyEffectCount--,t=!0,i.run());return t}};function Fh(n){return{toString:n}.toString()}var Ty="__parameters__";function nG(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function $2(n,e,t){return Fh(()=>{let i=nG(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return l.annotation=s,l;function l(c,d,f){let p=c.hasOwnProperty(Ty)?c[Ty]:Object.defineProperty(c,Ty,{value:[]})[Ty];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(s),c}}return r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var Km=JS($2("Optional"),8);var MT=JS($2("SkipSelf"),4);function iG(n){return typeof n=="function"}var Ly=class{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function U2(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}var jn=(()=>{let n=()=>H2;return n.ngInherit=!0,n})();function H2(n){return n.type.prototype.ngOnChanges&&(n.setInput=oG),rG}function rG(){let n=W2(this),e=n?.current;if(e){let t=n.previous;if(t===Yl)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function oG(n,e,t,i,r){let o=this.declaredInputs[i],s=W2(n)||sG(n,{previous:Yl,current:null}),l=s.current||(s.current={}),c=s.previous,d=c[o];l[o]=new Ly(d&&d.currentValue,t,c===Yl),U2(n,e,r,t)}var q2="__ngSimpleChanges__";function W2(n){return n[q2]||null}function sG(n,e){return n[q2]=e}var u2=[];var mn=function(n,e=null,t){for(let i=0;i<u2.length;i++){let r=u2[i];r(n,e,t)}};function aG(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=H2(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function G2(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:l,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),l&&((n.contentHooks??=[]).push(t,l),(n.contentCheckHooks??=[]).push(t,l)),c&&(n.viewHooks??=[]).push(-t,c),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function Py(n,e,t){Z2(n,e,3,t)}function Oy(n,e,t,i){(n[ht]&3)===t&&Z2(n,e,t,i)}function ND(n,e){let t=n[ht];(t&3)===e&&(t&=16383,t+=1,n[ht]=t)}function Z2(n,e,t,i){let r=i!==void 0?n[wu]&65535:0,o=i??-1,s=e.length-1,l=0;for(let c=r;c<s;c++)if(typeof e[c+1]=="number"){if(l=e[c],i!=null&&l>=i)break}else e[c]<0&&(n[wu]+=65536),(l<o||o==-1)&&(lG(n,t,e,c),n[wu]=(n[wu]&4294901760)+c+2),c++}function d2(n,e){mn(4,n,e);let t=rt(null);try{e.call(n)}finally{rt(t),mn(5,n,e)}}function lG(n,e,t,i){let r=t[i]<0,o=t[i+1],s=r?-t[i]:t[i],l=n[s];r?n[ht]>>14<n[wu]>>16&&(n[ht]&3)===e&&(n[ht]+=16384,d2(l,o)):d2(l,o)}var Ah=-1,Mu=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i,r){this.factory=e,this.name=r,this.canSeeViewProviders=t,this.injectImpl=i}};function cG(n){return(n.flags&8)!==0}function uG(n){return(n.flags&16)!==0}function dG(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let o=t[i++],s=t[i++],l=t[i++];n.setAttribute(e,s,l,o)}else{let o=r,s=t[++i];hG(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function K2(n){return n===3||n===4||n===6}function hG(n){return n.charCodeAt(0)===64}function Mh(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?h2(n,t,r,null,e[++i]):h2(n,t,r,null,null))}}return n}function h2(n,e,t,i,r){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let l=n[o++];if(typeof l=="number"){if(l===e){s=-1;break}else if(l>e){s=o-1;break}}}for(;o<n.length;){let l=n[o];if(typeof l=="number")break;if(l===t){r!==null&&(n[o+1]=r);return}o++,r!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r)}function Y2(n){return n!==Ah}function jy(n){return n&32767}function fG(n){return n>>16}function By(n,e){let t=fG(n),i=e;for(;t>0;)i=i[yu],t--;return i}var WD=!0;function Vy(n){let e=WD;return WD=n,e}var pG=256,Q2=pG-1,X2=5,mG=0,ea={};function gG(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(_u)&&(i=t[_u]),i==null&&(i=t[_u]=mG++);let r=i&Q2,o=1<<r;e.data[n+(r>>X2)]|=o}function zy(n,e){let t=J2(n,e);if(t!==-1)return t;let i=e[Ke];i.firstCreatePass&&(n.injectorIndex=e.length,FD(i.data,n),FD(e,null),FD(i.blueprint,null));let r=PT(n,e),o=n.injectorIndex;if(Y2(r)){let s=jy(r),l=By(r,e),c=l[Ke].data;for(let d=0;d<8;d++)e[o+d]=l[s+d]|c[s+d]}return e[o+8]=r,o}function FD(n,e){n.push(0,0,0,0,0,0,0,0,e)}function J2(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function PT(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=rj(r),i===null)return Ah;if(t++,r=r[yu],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return Ah}function GD(n,e,t){gG(n,e,t)}function _G(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let i=t.length,r=0;for(;r<i;){let o=t[r];if(K2(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof t[r]=="string";)r++;else{if(o===e)return t[r+1];r=r+2}}}return null}function ej(n,e,t){if(t&8||n!==void 0)return n;hy(e,"NodeInjector")}function tj(n,e,t,i){if(t&8&&i===void 0&&(i=null),(t&3)===0){let r=n[bu],o=Dr(void 0);try{return r?r.get(e,i,t&8):XS(e,i,t&8)}finally{Dr(o)}}return ej(i,e,t)}function nj(n,e,t,i=0,r){if(n!==null){if(e[ht]&2048&&!(i&2)){let s=wG(n,e,t,i,ea);if(s!==ea)return s}let o=ij(n,e,t,i,ea);if(o!==ea)return o}return tj(e,t,i,r)}function ij(n,e,t,i,r){let o=bG(t);if(typeof o=="function"){if(!kD(e,n,i))return i&1?ej(r,t,i):tj(e,t,i,r);try{let s;if(s=o(i),s==null&&!(i&8))hy(t);else return s}finally{AD()}}else if(typeof o=="number"){let s=null,l=J2(n,e),c=Ah,d=i&1?e[kr][Tr]:null;for((l===-1||i&4)&&(c=l===-1?PT(n,e):e[l+8],c===Ah||!p2(i,!1)?l=-1:(s=e[Ke],l=jy(c),e=By(c,e)));l!==-1;){let f=e[Ke];if(f2(o,l,f.data)){let p=vG(l,e,t,s,i,d);if(p!==ea)return p}c=e[l+8],c!==Ah&&p2(i,e[Ke].data[l+8]===d)&&f2(o,l,e)?(s=f,l=jy(c),e=By(c,e)):l=-1}}return r}function vG(n,e,t,i,r,o){let s=e[Ke],l=s.data[n+8],c=i==null?ec(l)&&WD:i!=s&&(l.type&3)!==0,d=r&1&&o===l,f=Ry(l,s,t,c,d);return f!==null?Um(e,s,f,l,r):ea}function Ry(n,e,t,i,r){let o=n.providerIndexes,s=e.data,l=o&1048575,c=n.directiveStart,d=n.directiveEnd,f=o>>20,p=i?l:l+f,g=r?l+f:d;for(let m=p;m<g;m++){let _=s[m];if(m<c&&t===_||m>=c&&_.type===t)return m}if(r){let m=s[c];if(m&&Qs(m)&&m.type===t)return c}return null}function Um(n,e,t,i,r){let o=n[t],s=e.data;if(o instanceof Mu){let l=o;if(l.resolving){let m=ay(s[t]);throw QS(m)}let c=Vy(l.canSeeViewProviders);l.resolving=!0;let d=s[t].type||s[t],f,p=l.injectImpl?Dr(l.injectImpl):null,g=kD(n,i,0);try{o=n[t]=l.factory(void 0,r,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&aG(t,s[t],e)}finally{p!==null&&Dr(p),Vy(c),l.resolving=!1,AD()}}return o}function bG(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(_u)?n[_u]:void 0;return typeof e=="number"?e>=0?e&Q2:yG:e}function f2(n,e,t){let i=1<<n;return!!(t[e+(n>>X2)]&i)}function p2(n,e){return!(n&2)&&!(n&1&&e)}var Au=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return nj(this._tNode,this._lView,e,pu(i),t)}};function yG(){return new Au(gi(),Ye())}function ln(n){return Fh(()=>{let e=n.prototype.constructor,t=e[Im]||ZD(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[Im]||ZD(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function ZD(n){return $S(n)?()=>{let e=ZD(er(n));return e&&e()}:Gl(n)}function wG(n,e,t,i,r){let o=n,s=e;for(;o!==null&&s!==null&&s[ht]&2048&&!Ih(s);){let l=ij(o,s,t,i|2,ea);if(l!==ea)return l;let c=o.parent;if(!c){let d=s[cD];if(d){let f=d.get(t,ea,i);if(f!==ea)return f}c=rj(s),s=s[yu]}o=c}return r}function rj(n){let e=n[Ke],t=e.type;return t===2?e.declTNode:t===1?n[Tr]:null}function OT(n){return _G(gi(),n)}function xG(){return Lh(gi(),Ye())}function Lh(n,e){return new Ue(os(n,e))}var Ue=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=xG}return n})();function oj(n){return n instanceof Ue?n.nativeElement:n}function CG(){return this._results[Symbol.iterator]()}var Vo=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ve}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=ML(e);(this._changesDetected=!AL(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=CG};function sj(n){return(n.flags&128)===128}var RT=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(RT||{}),aj=new Map,EG=0;function IG(){return EG++}function SG(n){aj.set(n[Mm],n)}function KD(n){aj.delete(n[Mm])}var m2="__ngContext__";function Ph(n,e){Ys(e)?(n[m2]=e[Mm],SG(e)):n[m2]=e}function lj(n){return uj(n[Ch])}function cj(n){return uj(n[Lo])}function uj(n){for(;n!==null&&!rs(n);)n=n[Lo];return n}var YD;function NT(n){YD=n}function dj(){if(YD!==void 0)return YD;if(typeof document<"u")return document;throw new ye(210,!1)}var jh=new oe("",{providedIn:"root",factory:()=>DG}),DG="ng",i0=new oe(""),ia=new oe("",{providedIn:"platform",factory:()=>"unknown"});var Ym=new oe(""),Bh=new oe("",{providedIn:"root",factory:()=>dj().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var TG="h",kG="b";var hj="r";var fj="di";var pj=!1,mj=new oe("",{providedIn:"root",factory:()=>pj});var AG=(n,e,t,i)=>{};function MG(n,e,t,i){AG(n,e,t,i)}function r0(n){return(n.flags&32)===32}var PG=()=>null;function gj(n,e,t=!1){return PG(n,e,t)}function _j(n,e){let t=n.contentQueries;if(t!==null){let i=rt(null);try{for(let r=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s!==-1){let l=n.data[s];Lm(o),l.contentQueries(2,e[s],s)}}}finally{rt(i)}}}function QD(n,e,t){Lm(0);let i=rt(null);try{e(n,t)}finally{rt(i)}}function FT(n,e,t){if(dD(e)){let i=rt(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let l=n.data[s];if(l.contentQueries){let c=t[s];l.contentQueries(1,c,s)}}}finally{rt(i)}}}var Xa=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Xa||{}),ky;function OG(){if(ky===void 0&&(ky=null,Gs.trustedTypes))try{ky=Gs.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ky}function o0(n){return OG()?.createHTML(n)||n}var Ja=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${cy})`}},XD=class extends Ja{getTypeName(){return"HTML"}},JD=class extends Ja{getTypeName(){return"Style"}},eT=class extends Ja{getTypeName(){return"Script"}},tT=class extends Ja{getTypeName(){return"URL"}},nT=class extends Ja{getTypeName(){return"ResourceURL"}};function ra(n){return n instanceof Ja?n.changingThisBreaksApplicationSecurity:n}function oc(n,e){let t=vj(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${cy})`)}return t===e}function vj(n){return n instanceof Ja&&n.getTypeName()||null}function LT(n){return new XD(n)}function jT(n){return new JD(n)}function BT(n){return new eT(n)}function VT(n){return new tT(n)}function zT(n){return new nT(n)}function RG(n){let e=new rT(n);return NG()?new iT(e):e}var iT=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(o0(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},rT=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=o0(e),t}};function NG(){try{return!!new window.DOMParser().parseFromString(o0(""),"text/html")}catch{return!1}}var FG=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Qm(n){return n=String(n),n.match(FG)?n:"unsafe:"+n}function el(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Xm(...n){let e={};for(let t of n)for(let i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}var bj=el("area,br,col,hr,img,wbr"),yj=el("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),wj=el("rp,rt"),LG=Xm(wj,yj),jG=Xm(yj,el("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),BG=Xm(wj,el("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),g2=Xm(bj,jG,BG,LG),xj=el("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),VG=el("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),zG=el("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),$G=Xm(xj,VG,zG),UG=el("script,style,template"),oT=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,i=!0,r=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild){r.push(t),t=WG(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=qG(t);if(o){t=o;break}t=r.pop()}}return this.buf.join("")}startElement(e){let t=_2(e).toLowerCase();if(!g2.hasOwnProperty(t))return this.sanitizedSomething=!0,!UG.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let i=e.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),s=o.name,l=s.toLowerCase();if(!$G.hasOwnProperty(l)){this.sanitizedSomething=!0;continue}let c=o.value;xj[l]&&(c=Qm(c)),this.buf.push(" ",s,'="',v2(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=_2(e).toLowerCase();g2.hasOwnProperty(t)&&!bj.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(v2(e))}};function HG(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function qG(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw Cj(e);return e}function WG(n){let e=n.firstChild;if(e&&HG(n,e))throw Cj(e);return e}function _2(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function Cj(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var GG=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ZG=/([^\#-~ |!])/g;function v2(n){return n.replace(/&/g,"&amp;").replace(GG,function(e){let t=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((t-55296)*1024+(i-56320)+65536)+";"}).replace(ZG,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Ay;function $T(n,e){let t=null;try{Ay=Ay||RG(n);let i=e?String(e):"";t=Ay.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=t.innerHTML,t=Ay.getInertBodyElement(i)}while(i!==o);let l=new oT().sanitizeChildren(b2(t)||t);return o0(l)}finally{if(t){let i=b2(t)||t;for(;i.firstChild;)i.firstChild.remove()}}}function b2(n){return"content"in n&&KG(n)?n.content:null}function KG(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var Hi=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Hi||{});function UT(n){let e=YG();return e?e.sanitize(Hi.URL,n)||"":oc(n,"URL")?ra(n):Qm(Kl(n))}function YG(){let n=Ye();return n&&n[Zs].sanitizer}var QG=/^>|^->|<!--|-->|--!>|<!-$/g,XG=/(<|>)/g,JG="\u200B$1\u200B";function eZ(n){return n.replace(QG,e=>e.replace(XG,JG))}function HT(n){return n.ownerDocument.defaultView}function Ej(n){return n instanceof Function?n():n}function tZ(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}var Ij="ng-template";function nZ(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&tZ(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(qT(n))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===t)return!0}return!1}function qT(n){return n.type===4&&n.value!==Ij}function iZ(n,e,t){let i=n.type===4&&!t?Ij:n.value;return e===i}function rZ(n,e,t){let i=4,r=n.attrs,o=r!==null?aZ(r):0,s=!1;for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="number"){if(!s&&!ss(i)&&!ss(c))return!1;if(s&&ss(c))continue;s=!1,i=c|i&1;continue}if(!s)if(i&4){if(i=2|i&1,c!==""&&!iZ(n,c,t)||c===""&&e.length===1){if(ss(i))return!1;s=!0}}else if(i&8){if(r===null||!nZ(n,r,c,t)){if(ss(i))return!1;s=!0}}else{let d=e[++l],f=oZ(c,r,qT(n),t);if(f===-1){if(ss(i))return!1;s=!0;continue}if(d!==""){let p;if(f>o?p="":p=r[f+1].toLowerCase(),i&2&&d!==p){if(ss(i))return!1;s=!0}}}}return ss(i)||s}function ss(n){return(n&1)===0}function oZ(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){let s=e[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let l=e[++r];for(;typeof l=="string";)l=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return lZ(e,n)}function Sj(n,e,t=!1){for(let i=0;i<e.length;i++)if(rZ(n,e[i],t))return!0;return!1}function sZ(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function aZ(n){for(let e=0;e<n.length;e++){let t=n[e];if(K2(t))return e}return n.length}function lZ(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function cZ(n,e){e:for(let t=0;t<e.length;t++){let i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function y2(n,e){return n?":not("+e.trim()+")":e}function uZ(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(i&2){let l=n[++t];r+="["+s+(l.length>0?'="'+l+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!ss(s)&&(e+=y2(o,r),r=""),i=s,o=o||!ss(i);t++}return r!==""&&(e+=y2(o,r)),e}function dZ(n){return n.map(uZ).join(",")}function hZ(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&e.push(o,n[++i]):r===8&&t.push(o);else{if(!ss(r))break;r=o}i++}return t.length&&e.push(1,...t),e}var Ar={};function fZ(n,e){return n.createText(e)}function pZ(n,e,t){n.setValue(e,t)}function mZ(n,e){return n.createComment(eZ(e))}function Dj(n,e,t){return n.createElement(e,t)}function $y(n,e,t,i,r){n.insertBefore(e,t,i,r)}function Tj(n,e,t){n.appendChild(e,t)}function w2(n,e,t,i,r){i!==null?$y(n,e,t,i,r):Tj(n,e,t)}function kj(n,e,t){n.removeChild(null,e,t)}function gZ(n,e,t){n.setAttribute(e,"style",t)}function _Z(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Aj(n,e,t){let{mergedAttrs:i,classes:r,styles:o}=t;i!==null&&dG(n,e,i),r!==null&&_Z(n,e,r),o!==null&&gZ(n,e,o)}function WT(n,e,t,i,r,o,s,l,c,d,f){let p=Ln+i,g=p+r,m=vZ(p,g),_=typeof d=="function"?d():d;return m[Ke]={type:n,blueprint:m,template:t,queries:null,viewQuery:l,declTNode:e,data:m.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:_,incompleteFirstPass:!1,ssrId:f}}function vZ(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:Ar);return t}function bZ(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=WT(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function GT(n,e,t,i,r,o,s,l,c,d,f){let p=e.blueprint.slice();return p[is]=r,p[ht]=i|4|128|8|64|1024,(d!==null||n&&n[ht]&2048)&&(p[ht]|=2048),mD(p),p[Ai]=p[yu]=n,p[ai]=t,p[Zs]=s||n&&n[Zs],p[xn]=l||n&&n[xn],p[bu]=c||n&&n[bu]||null,p[Tr]=o,p[Mm]=IG(),p[vu]=f,p[cD]=d,p[kr]=e.type==2?n[kr]:p,p}function yZ(n,e,t){let i=os(e,n),r=bZ(t),o=n[Zs].rendererFactory,s=ZT(n,GT(n,r,null,Mj(t),i,e,null,o.createRenderer(i,t),null,null,null));return n[e.index]=s}function Mj(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function Pj(n,e,t,i){if(t===0)return-1;let r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function ZT(n,e){return n[Ch]?n[lD][Lo]=e:n[Ch]=e,n[lD]=e,e}function B(n=1){Oj(Mn(),Ye(),Xs()+n,!1)}function Oj(n,e,t,i){if(!i)if((e[ht]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Py(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Oy(e,o,0,t)}nc(t)}var s0=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(s0||{});function sT(n,e,t,i){let r=rt(null);try{let[o,s,l]=n.inputs[t],c=null;(s&s0.SignalBased)!==0&&(c=e[o][pi]),c!==null&&c.transformFn!==void 0?i=c.transformFn(i):l!==null&&(i=l.call(e,i)),n.setInput!==null?n.setInput(e,c,i,t,o):U2(e,c,o,i)}finally{rt(r)}}var ta=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ta||{}),wZ;function KT(n,e){return wZ(n,e)}function kh(n,e,t,i,r){if(i!=null){let o,s=!1;rs(i)?o=i:Ys(i)&&(s=!0,i=i[is]);let l=jo(i);n===0&&t!==null?r==null?Tj(e,t,l):$y(e,t,l,r||null,!0):n===1&&t!==null?$y(e,t,l,r||null,!0):n===2?kj(e,l,s):n===3&&e.destroyNode(l),o!=null&&MZ(e,n,o,t,r)}}function xZ(n,e){Rj(n,e),e[is]=null,e[Tr]=null}function CZ(n,e,t,i,r,o){i[is]=r,i[Tr]=e,l0(n,i,t,1,r,o)}function Rj(n,e){e[Zs].changeDetectionScheduler?.notify(9),l0(n,e,e[xn],2,null,null)}function EZ(n){let e=n[Ch];if(!e)return LD(n[Ke],n);for(;e;){let t=null;if(Ys(e))t=e[Ch];else{let i=e[$i];i&&(t=i)}if(!t){for(;e&&!e[Lo]&&e!==n;)Ys(e)&&LD(e[Ke],e),e=e[Ai];e===null&&(e=n),Ys(e)&&LD(e[Ke],e),t=e&&e[Lo]}e=t}}function YT(n,e){let t=n[Cu],i=t.indexOf(e);t.splice(i,1)}function a0(n,e){if(Eu(e))return;let t=e[xn];t.destroyNode&&l0(n,e,t,3,null,null),EZ(e)}function LD(n,e){if(Eu(e))return;let t=rt(null);try{e[ht]&=-129,e[ht]|=256,e[mo]&&ih(e[mo]),SZ(n,e),IZ(n,e),e[Ke].type===1&&e[xn].destroy();let i=e[Xl];if(i!==null&&rs(e[Ai])){i!==e[Ai]&&YT(i,e);let r=e[Ks];r!==null&&r.detachView(n)}KD(e)}finally{rt(t)}}function IZ(n,e){let t=n.cleanup,i=e[xh];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let l=t[s+3];l>=0?i[l]():i[-l].unsubscribe(),s+=2}else{let l=i[t[s+1]];t[s].call(l)}i!==null&&(e[xh]=null);let r=e[qa];if(r!==null){e[qa]=null;for(let s=0;s<r.length;s++){let l=r[s];l()}}let o=e[Ya];if(o!==null){e[Ya]=null;for(let s of o)s.destroy()}}function SZ(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof Mu)){let o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let l=r[o[s]],c=o[s+1];mn(4,l,c);try{c.call(l)}finally{mn(5,l,c)}}else{mn(4,r,o);try{o.call(r)}finally{mn(5,r,o)}}}}}function Nj(n,e,t){return DZ(n,e.parent,t)}function DZ(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[is];if(ec(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===Xa.None||r===Xa.Emulated)return null}return os(i,t)}function Fj(n,e,t){return kZ(n,e,t)}function TZ(n,e,t){return n.type&40?os(n,t):null}var kZ=TZ,x2;function QT(n,e,t,i){let r=Nj(n,i,e),o=e[xn],s=i.parent||e[Tr],l=Fj(s,i,e);if(r!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)w2(o,r,t[c],l,!1);else w2(o,r,t,l,!1);x2!==void 0&&x2(o,i,e,t,r)}function zm(n,e){if(e!==null){let t=e.type;if(t&3)return os(e,n);if(t&4)return aT(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return zm(n,i);{let r=n[e.index];return rs(r)?aT(-1,r):jo(r)}}else{if(t&128)return zm(n,e.next);if(t&32)return KT(e,n)()||jo(n[e.index]);{let i=Lj(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Zl(n[kr]);return zm(r,i)}else return zm(n,e.next)}}}return null}function Lj(n,e){if(e!==null){let i=n[kr][Tr],r=e.projection;return i.projection[r]}return null}function aT(n,e){let t=$i+n+1;if(t<e.length){let i=e[t],r=i[Ke].firstChild;if(r!==null)return zm(i,r)}return e[Jl]}function XT(n,e,t,i,r,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let l=i[t.index],c=t.type;if(s&&e===0&&(l&&Ph(jo(l),i),t.flags|=2),!r0(t))if(c&8)XT(n,e,t.child,i,r,o,!1),kh(e,n,r,l,o);else if(c&32){let d=KT(t,i),f;for(;f=d();)kh(e,n,r,f,o);kh(e,n,r,l,o)}else c&16?jj(n,e,i,t,r,o):kh(e,n,r,l,o);t=s?t.projectionNext:t.next}}function l0(n,e,t,i,r,o){XT(t,i,n.firstChild,e,r,o,!1)}function AZ(n,e,t){let i=e[xn],r=Nj(n,t,e),o=t.parent||e[Tr],s=Fj(o,t,e);jj(i,0,e,t,r,s)}function jj(n,e,t,i,r,o){let s=t[kr],c=s[Tr].projection[i.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++){let f=c[d];kh(e,n,r,f,o)}else{let d=c,f=s[Ai];sj(i)&&(d.flags|=128),XT(n,e,d,f,r,o,!0)}}function MZ(n,e,t,i,r){let o=t[Jl],s=jo(t);o!==s&&kh(e,n,i,o,r);for(let l=$i;l<t.length;l++){let c=t[l];l0(c[Ke],c,n,e,i,o)}}function PZ(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=i.indexOf("-")===-1?void 0:ta.DashCase;r==null?n.removeStyle(t,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=ta.Important),n.setStyle(t,i,r,o))}}function Bj(n,e,t,i,r){let o=Xs(),s=i&2;try{nc(-1),s&&e.length>Ln&&Oj(n,e,Ln,!1),mn(s?2:0,r,t),t(i,r)}finally{nc(o),mn(s?3:1,r,t)}}function c0(n,e,t){jZ(n,e,t),(t.flags&64)===64&&BZ(n,e,t)}function Jm(n,e,t=os){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],l=s===-1?t(e,n):n[s];n[r++]=l}}}function OZ(n,e,t,i){let o=i.get(mj,pj)||t===Xa.ShadowDom,s=n.selectRootElement(e,o);return RZ(s),s}function RZ(n){NZ(n)}var NZ=()=>null;function FZ(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Vj(n,e,t,i,r,o){let s=e[Ke];if(nk(n,s,e,t,i)){ec(n)&&LZ(e,n.index);return}n.type&3&&(t=FZ(t)),zj(n,e,t,i,r,o)}function zj(n,e,t,i,r,o){if(n.type&3){let s=os(n,e);i=o!=null?o(i,n.value||"",t):i,r.setProperty(s,t,i)}else n.type&12}function LZ(n,e){let t=Bo(e,n);t[ht]&16||(t[ht]|=64)}function jZ(n,e,t){let i=t.directiveStart,r=t.directiveEnd;ec(t)&&yZ(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||zy(t,e);let o=t.initialInputs;for(let s=i;s<r;s++){let l=n.data[s],c=Um(e,n,s,t);if(Ph(c,e),o!==null&&UZ(e,s-i,c,l,t,o),Qs(l)){let d=Bo(t.index,e);d[ai]=Um(e,n,s,t)}}}function BZ(n,e,t){let i=t.directiveStart,r=t.directiveEnd,o=t.index,s=t2();try{nc(o);for(let l=i;l<r;l++){let c=n.data[l],d=e[l];xy(l),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&VZ(c,d)}}finally{nc(-1),xy(s)}}function VZ(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function JT(n,e){let t=n.directiveRegistry,i=null;if(t)for(let r=0;r<t.length;r++){let o=t[r];Sj(e,o.selectors,!1)&&(i??=[],Qs(o)?i.unshift(o):i.push(o))}return i}function zZ(n,e,t,i,r,o){let s=os(n,e);$Z(e[xn],s,o,n.value,t,i,r)}function $Z(n,e,t,i,r,o,s){if(o==null)n.removeAttribute(e,r,t);else{let l=s==null?Kl(o):s(o,i||"",r);n.setAttribute(e,r,l,t)}}function UZ(n,e,t,i,r,o){let s=o[e];if(s!==null)for(let l=0;l<s.length;l+=2){let c=s[l],d=s[l+1];sT(i,t,c,d)}}function ek(n,e,t,i,r){let o=Ln+t,s=e[Ke],l=r(s,e,n,i,t);e[o]=l,Sh(n,!0);let c=n.type===2;return c?(Aj(e[xn],l,n),(GL()===0||Eh(n))&&Ph(l,e),ZL()):Ph(l,e),Sy()&&(!c||!r0(n))&&QT(s,e,l,n),n}function tk(n){let e=n;return ID()?SD():(e=e.parent,Sh(e,!1)),e}function HZ(n,e){let t=n[bu];if(!t)return;t.get(Zr,null)?.(e)}function nk(n,e,t,i,r){let o=n.inputs?.[i],s=n.hostDirectiveInputs?.[i],l=!1;if(s)for(let c=0;c<s.length;c+=2){let d=s[c],f=s[c+1],p=e.data[d];sT(p,t[d],f,r),l=!0}if(o)for(let c of o){let d=t[c],f=e.data[c];sT(f,d,i,r),l=!0}return l}function qZ(n,e){let t=Bo(e,n),i=t[Ke];WZ(i,t);let r=t[is];r!==null&&t[vu]===null&&(t[vu]=gj(r,t[bu])),mn(18),ik(i,t,t[ai]),mn(19,t[ai])}function WZ(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function ik(n,e,t){Ey(e);try{let i=n.viewQuery;i!==null&&QD(1,i,t);let r=n.template;r!==null&&Bj(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ks]?.finishViewCreation(n),n.staticContentQueries&&_j(n,e),n.staticViewQueries&&QD(2,n.viewQuery,t);let o=n.components;o!==null&&GZ(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[ht]&=-5,Iy()}}function GZ(n,e){for(let t=0;t<e.length;t++)qZ(n,e[t])}function eg(n,e,t,i){let r=rt(null);try{let o=e.tView,l=n[ht]&4096?4096:16,c=GT(n,o,t,l,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),d=n[e.index];c[Xl]=d;let f=n[Ks];return f!==null&&(c[Ks]=f.createEmbeddedView(o)),ik(o,c,t),c}finally{rt(r)}}function Oh(n,e){return!e||e.firstChild===null||sj(n)}var C2=!1,ZZ=new oe("");function Hm(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&i.push(jo(o)),rs(o)&&$j(o,i);let s=t.type;if(s&8)Hm(n,e,t.child,i);else if(s&32){let l=KT(t,e),c;for(;c=l();)i.push(c)}else if(s&16){let l=Lj(e,t);if(Array.isArray(l))i.push(...l);else{let c=Zl(e[kr]);Hm(c[Ke],c,l,i,!0)}}t=r?t.projectionNext:t.next}return i}function $j(n,e){for(let t=$i;t<n.length;t++){let i=n[t],r=i[Ke].firstChild;r!==null&&Hm(i[Ke],i,r,e)}n[Jl]!==n[is]&&e.push(n[Jl])}function Uj(n){if(n[xu]!==null){for(let e of n[xu])e.impl.addSequence(e);n[xu].length=0}}var Hj=[];function KZ(n){return n[mo]??YZ(n)}function YZ(n){let e=Hj.pop()??Object.create(XZ);return e.lView=n,e}function QZ(n){n.lView[mo]!==n&&(n.lView=null,Hj.push(n))}var XZ=S(b({},Vl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{tc(n.lView)},consumerOnSignalRead(){this.lView[mo]=this}});function JZ(n){let e=n[mo]??Object.create(e7);return e.lView=n,e}var e7=S(b({},Vl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Zl(n.lView);for(;e&&!qj(e[Ke]);)e=Zl(e);e&&gD(e)},consumerOnSignalRead(){this.lView[mo]=this}});function qj(n){return n.type!==2}function Wj(n){if(n[Ya]===null)return;let e=!0;for(;e;){let t=!1;for(let i of n[Ya])i.dirty&&(t=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(n[ht]&8192)}}var t7=100;function rk(n,e=0){let i=n[Zs].rendererFactory,r=!1;r||i.begin?.();try{n7(n,e)}finally{r||i.end?.()}}function n7(n,e){let t=TD();try{Dh(!0),lT(n,e);let i=0;for(;Rm(n);){if(i===t7)throw new ye(103,!1);i++,lT(n,1)}}finally{Dh(t)}}function Gj(n,e){DD(e?Nm.Exhaustive:Nm.OnlyDirtyViews);try{rk(n)}finally{DD(Nm.Off)}}function i7(n,e,t,i){if(Eu(e))return;let r=e[ht],o=!1,s=!1;Ey(e);let l=!0,c=null,d=null;o||(qj(n)?(d=KZ(e),c=Va(d)):Sb()===null?(l=!1,d=JZ(e),c=Va(d)):e[mo]&&(ih(e[mo]),e[mo]=null));try{mD(e),XL(n.bindingStartIndex),t!==null&&Bj(n,e,t,2,i);let f=(r&3)===3;if(!o)if(f){let m=n.preOrderCheckHooks;m!==null&&Py(e,m,null)}else{let m=n.preOrderHooks;m!==null&&Oy(e,m,0,null),ND(e,0)}if(s||r7(e),Wj(e),Zj(e,0),n.contentQueries!==null&&_j(n,e),!o)if(f){let m=n.contentCheckHooks;m!==null&&Py(e,m)}else{let m=n.contentHooks;m!==null&&Oy(e,m,1),ND(e,1)}s7(n,e);let p=n.components;p!==null&&Yj(e,p,0);let g=n.viewQuery;if(g!==null&&QD(2,g,i),!o)if(f){let m=n.viewCheckHooks;m!==null&&Py(e,m)}else{let m=n.viewHooks;m!==null&&Oy(e,m,2),ND(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[gy]){for(let m of e[gy])m();e[gy]=null}o||(Uj(e),e[ht]&=-73)}catch(f){throw o||tc(e),f}finally{d!==null&&($l(d,c),l&&QZ(d)),Iy()}}function Zj(n,e){for(let t=lj(n);t!==null;t=cj(t))for(let i=$i;i<t.length;i++){let r=t[i];Kj(r,e)}}function r7(n){for(let e=lj(n);e!==null;e=cj(e)){if(!(e[ht]&2))continue;let t=e[Cu];for(let i=0;i<t.length;i++){let r=t[i];gD(r)}}}function o7(n,e,t){mn(18);let i=Bo(e,n);Kj(i,t),mn(19,i[ai])}function Kj(n,e){vy(n)&&lT(n,e)}function lT(n,e){let i=n[Ke],r=n[ht],o=n[mo],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&au(o)),s||=!1,o&&(o.dirty=!1),n[ht]&=-9217,s)i7(i,n,i.template,n[ai]);else if(r&8192){let l=rt(null);try{Wj(n),Zj(n,1);let c=i.components;c!==null&&Yj(n,c,1),Uj(n)}finally{rt(l)}}}function Yj(n,e,t){for(let i=0;i<e.length;i++)o7(n,e[i],t)}function s7(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)nc(~r);else{let o=r,s=t[++i],l=t[++i];e2(s,o);let c=e[o];mn(24,c),l(2,c),mn(25,c)}}}finally{nc(-1)}}function ok(n,e){let t=TD()?64:1088;for(n[Zs].changeDetectionScheduler?.notify(e);n;){n[ht]|=t;let i=Zl(n);if(Ih(n)&&!i)return n;n=i}return null}function Qj(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function Xj(n,e){let t=$i+e;if(t<n.length)return n[t]}function tg(n,e,t,i=!0){let r=e[Ke];if(a7(r,e,n,t),i){let s=aT(t,n),l=e[xn],c=l.parentNode(n[Jl]);c!==null&&CZ(r,n[Tr],l,e,c,s)}let o=e[vu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Jj(n,e){let t=qm(n,e);return t!==void 0&&a0(t[Ke],t),t}function qm(n,e){if(n.length<=$i)return;let t=$i+e,i=n[t];if(i){let r=i[Xl];r!==null&&r!==n&&YT(r,i),e>0&&(n[t-1][Lo]=i[Lo]);let o=km(n,$i+e);xZ(i[Ke],i);let s=o[Ks];s!==null&&s.detachView(o[Ke]),i[Ai]=null,i[Lo]=null,i[ht]&=-129}return i}function a7(n,e,t,i){let r=$i+i,o=t.length;i>0&&(t[r-1][Lo]=e),i<o-$i?(e[Lo]=t[r],eD(t,$i+i,e)):(t.push(e),e[Lo]=null),e[Ai]=t;let s=e[Xl];s!==null&&t!==s&&eB(s,e);let l=e[Ks];l!==null&&l.insertView(n),by(e),e[ht]|=128}function eB(n,e){let t=n[Cu],i=e[Ai];if(Ys(i))n[ht]|=2;else{let r=i[Ai][kr];e[kr]!==r&&(n[ht]|=2)}t===null?n[Cu]=[e]:t.push(e)}var rc=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Ke];return Hm(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[ai]}set context(e){this._lView[ai]=e}get destroyed(){return Eu(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ai];if(rs(e)){let t=e[Pm],i=t?t.indexOf(this):-1;i>-1&&(qm(e,i),km(t,i))}this._attachedToViewContainer=!1}a0(this._lView[Ke],this._lView)}onDestroy(e){_D(this._lView,e)}markForCheck(){ok(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ht]&=-129}reattach(){by(this._lView),this._lView[ht]|=128}detectChanges(){this._lView[ht]|=1024,rk(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[bu].get(ZZ,C2)}catch{this.exhaustive=C2}}attachToViewContainerRef(){if(this._appRef)throw new ye(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ih(this._lView),t=this._lView[Xl];t!==null&&!e&&YT(t,this._lView),Rj(this._lView[Ke],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ye(902,!1);this._appRef=e;let t=Ih(this._lView),i=this._lView[Xl];i!==null&&!t&&eB(i,this._lView),by(this._lView)}};var lr=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=l7;constructor(t,i,r){this._declarationLView=t,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,i){return this.createEmbeddedViewImpl(t,i)}createEmbeddedViewImpl(t,i,r){let o=eg(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:i,dehydratedView:r});return new rc(o)}}return n})();function l7(){return u0(gi(),Ye())}function u0(n,e){return n.type&4?new lr(e,n,Lh(n,e)):null}function Vh(n,e,t,i,r){let o=n.data[e];if(o===null)o=c7(n,e,t,i,r),JL()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=i,o.attrs=r;let s=KL();o.injectorIndex=s===null?-1:s.injectorIndex}return Sh(o,!0),o}function c7(n,e,t,i,r){let o=ED(),s=ID(),l=s?o:o&&o.parent,c=n.data[e]=d7(n,l,t,e,i,r);return u7(n,c,o,s),c}function u7(n,e,t,i){n.firstChild===null&&(n.firstChild=e),t!==null&&(i?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function d7(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,l=0;return wD()&&(l|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:l,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var xye=new RegExp(`^(\\d+)*(${kG}|${TG})*(.*)`);function h7(n){let e=n[uD]??[],i=n[Ai][xn],r=[];for(let o of e)o.data[fj]!==void 0?r.push(o):f7(o,i);n[uD]=r}function f7(n,e){let t=0,i=n.firstChild;if(i){let r=n.data[hj];for(;t<r;){let o=i.nextSibling;kj(e,i,!1),i=o,t++}}}var p7=()=>null,m7=()=>null;function Uy(n,e){return p7(n,e)}function tB(n,e,t){return m7(n,e,t)}var nB=class{},d0=class{},cT=class{resolveComponentFactory(e){throw new ye(917,!1)}},ng=class{static NULL=new cT},_i=class{},Tn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>g7()}return n})();function g7(){let n=Ye(),e=gi(),t=Bo(e.index,n);return(Ys(t)?t:n)[xn]}var iB=(()=>{class n{static \u0275prov=ce({token:n,providedIn:"root",factory:()=>null})}return n})();var Ny={},uT=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){let r=this.injector.get(e,Ny,i);return r!==Ny||t===Ny?r:this.parentInjector.get(e,t,i)}};function Hy(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let l=e[s];if(typeof l=="number")o=l;else if(o==1)r=uy(r,l);else if(o==2){let c=l,d=e[++s];i=uy(i,c+": "+d+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function Ce(n,e=0){let t=Ye();if(t===null)return Se(n,e);let i=gi();return nj(i,t,er(n),e)}function sk(){let n="invalid";throw new Error(n)}function rB(n,e,t,i,r){let o=i===null?null:{"":-1},s=r(n,t);if(s!==null){let l=s,c=null,d=null;for(let f of s)if(f.resolveHostDirectives!==null){[l,c,d]=f.resolveHostDirectives(s);break}b7(n,e,t,l,o,c,d)}o!==null&&i!==null&&_7(t,i,o)}function _7(n,e,t){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let o=t[e[r+1]];if(o==null)throw new ye(-301,!1);i.push(e[r],o)}}function v7(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function b7(n,e,t,i,r,o,s){let l=i.length,c=!1;for(let g=0;g<l;g++){let m=i[g];!c&&Qs(m)&&(c=!0,v7(n,t,g)),GD(zy(t,e),n,m.type)}I7(t,n.data.length,l);for(let g=0;g<l;g++){let m=i[g];m.providersResolver&&m.providersResolver(m)}let d=!1,f=!1,p=Pj(n,e,l,null);l>0&&(t.directiveToIndex=new Map);for(let g=0;g<l;g++){let m=i[g];if(t.mergedAttrs=Mh(t.mergedAttrs,m.hostAttrs),w7(n,t,e,p,m),E7(p,m,r),s!==null&&s.has(m)){let[y,w]=s.get(m);t.directiveToIndex.set(m.type,[p,y+t.directiveStart,w+t.directiveStart])}else(o===null||!o.has(m))&&t.directiveToIndex.set(m.type,p);m.contentQueries!==null&&(t.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(t.flags|=64);let _=m.type.prototype;!d&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),d=!0),!f&&(_.ngOnChanges||_.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),f=!0),p++}y7(n,t,o)}function y7(n,e,t){for(let i=e.directiveStart;i<e.directiveEnd;i++){let r=n.data[i];if(t===null||!t.has(r))E2(0,e,r,i),E2(1,e,r,i),S2(e,i,!1);else{let o=t.get(r);I2(0,e,o,i),I2(1,e,o,i),S2(e,i,!0)}}}function E2(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(i),oB(e,o)}}function I2(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s=r[o],l;n===0?l=e.hostDirectiveInputs??={}:l=e.hostDirectiveOutputs??={},l[s]??=[],l[s].push(i,o),oB(e,s)}}function oB(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function S2(n,e,t){let{attrs:i,inputs:r,hostDirectiveInputs:o}=n;if(i===null||!t&&r===null||t&&o===null||qT(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,l=0;for(;l<i.length;){let c=i[l];if(c===0){l+=4;continue}else if(c===5){l+=2;continue}else if(typeof c=="number")break;if(!t&&r.hasOwnProperty(c)){let d=r[c];for(let f of d)if(f===e){s??=[],s.push(c,i[l+1]);break}}else if(t&&o.hasOwnProperty(c)){let d=o[c];for(let f=0;f<d.length;f+=2)if(d[f]===e){s??=[],s.push(d[f+1],i[l+1]);break}}l+=2}n.initialInputs??=[],n.initialInputs.push(s)}function w7(n,e,t,i,r){n.data[i]=r;let o=r.factory||(r.factory=Gl(r.type,!0)),s=new Mu(o,Qs(r),Ce,null);n.blueprint[i]=s,t[i]=s,x7(n,e,i,Pj(n,t,r.hostVars,Ar),r)}function x7(n,e,t,i,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let l=~e.index;C7(s)!=l&&s.push(l),s.push(t,i,o)}}function C7(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function E7(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Qs(e)&&(t[""]=n)}}function I7(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function ak(n,e,t,i,r,o,s,l){let c=e[Ke],d=c.consts,f=go(d,s),p=Vh(c,n,t,i,f);return o&&rB(c,e,p,go(d,l),r),p.mergedAttrs=Mh(p.mergedAttrs,p.attrs),p.attrs!==null&&Hy(p,p.attrs,!1),p.mergedAttrs!==null&&Hy(p,p.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,p),p}function lk(n,e){G2(n,e),dD(e)&&n.queries.elementEnd(e)}function S7(n,e,t,i,r,o){let s=e.consts,l=go(s,r),c=Vh(e,n,t,i,l);if(c.mergedAttrs=Mh(c.mergedAttrs,c.attrs),o!=null){let d=go(s,o);c.localNames=[];for(let f=0;f<d.length;f+=2)c.localNames.push(d[f],-1)}return c.attrs!==null&&Hy(c,c.attrs,!1),c.mergedAttrs!==null&&Hy(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function ck(n){return aB(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function sB(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function aB(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function uk(n,e,t){return n[e]=t}function _o(n,e,t){if(t===Ar)return!1;let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function qy(n,e,t,i){let r=_o(n,e,t);return _o(n,e+1,i)||r}function D7(n,e,t,i,r,o){let s=qy(n,e,t,i);return qy(n,e+2,r,o)||s}function Fy(n,e,t){return function i(r){let o=ec(n)?Bo(n.index,e):e;ok(o,5);let s=e[ai],l=D2(e,s,t,r),c=i.__ngNextListenerFn__;for(;c;)l=D2(e,s,c,r)&&l,c=c.__ngNextListenerFn__;return l}}function D2(n,e,t,i){let r=rt(null);try{return mn(6,e,t),t(i)!==!1}catch(o){return HZ(n,o),!1}finally{mn(7,e,t),rt(r)}}function lB(n,e,t,i,r,o,s,l){let c=Eh(n),d=!1,f=null;if(!i&&c&&(f=T7(e,t,o,n.index)),f!==null){let p=f.__ngLastListenerFn__||f;p.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,d=!0}else{let p=os(n,t),g=i?i(p):p;MG(t,g,o,l);let m=r.listen(g,o,l),_=i?y=>i(jo(y[n.index])):n.index;cB(_,e,t,o,l,m,!1)}return d}function T7(n,e,t,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===t&&r[o+1]===i){let l=e[xh],c=r[o+2];return l&&l.length>c?l[c]:null}typeof s=="string"&&(o+=2)}return null}function cB(n,e,t,i,r,o,s){let l=e.firstCreatePass?bD(e):null,c=vD(t),d=c.length;c.push(r,o),l&&l.push(i,n,d,(d+1)*(s?-1:1))}function T2(n,e,t,i,r,o){let s=e[t],l=e[Ke],d=l.data[t].outputs[i],p=s[d].subscribe(o);cB(n.index,l,e,r,o,p,!0)}var dT=Symbol("BINDING");var Wy=class extends ng{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Ka(e);return new Pu(t,this.ngModule)}};function k7(n){return Object.keys(n).map(e=>{let[t,i,r]=n[e],o={propName:t,templateName:e,isSignal:(i&s0.SignalBased)!==0};return r&&(o.transform=r),o})}function A7(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function M7(n,e,t){let i=e instanceof Fn?e:e?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new uT(t,i):t}function P7(n){let e=n.get(_i,null);if(e===null)throw new ye(407,!1);let t=n.get(iB,null),i=n.get(Fo,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:i,ngReflect:!1}}function O7(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return Dj(e,t,t==="svg"?hD:t==="math"?zL:null)}var Pu=class extends d0{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=k7(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=A7(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=dZ(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,i,r,o,s){mn(22);let l=rt(null);try{let c=this.componentDef,d=R7(i,c,s,o),f=M7(c,r||this.ngModule,e),p=P7(f),g=p.rendererFactory.createRenderer(null,c),m=i?OZ(g,i,c.encapsulation,f):O7(c,g),_=s?.some(k2)||o?.some(I=>typeof I!="function"&&I.bindings.some(k2)),y=GT(null,d,null,512|Mj(c),null,null,p,g,f,null,gj(m,f,!0));y[Ln]=m,Ey(y);let w=null;try{let I=ak(Ln,y,2,"#host",()=>d.directiveRegistry,!0,0);m&&(Aj(g,m,I),Ph(m,y)),c0(d,y,I),FT(d,I,y),lk(d,I),t!==void 0&&F7(I,this.ngContentSelectors,t),w=Bo(I.index,y),y[ai]=w[ai],ik(d,y,null)}catch(I){throw w!==null&&KD(w),KD(y),I}finally{mn(23),Iy()}return new Gy(this.componentType,y,!!_)}finally{rt(l)}}};function R7(n,e,t,i){let r=n?["ng-version","20.1.1"]:hZ(e.selectors[0]),o=null,s=null,l=0;if(t)for(let f of t)l+=f[dT].requiredVars,f.create&&(f.targetIdx=0,(o??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(i)for(let f=0;f<i.length;f++){let p=i[f];if(typeof p!="function")for(let g of p.bindings){l+=g[dT].requiredVars;let m=f+1;g.create&&(g.targetIdx=m,(o??=[]).push(g)),g.update&&(g.targetIdx=m,(s??=[]).push(g))}}let c=[e];if(i)for(let f of i){let p=typeof f=="function"?f:f.type,g=rD(p);c.push(g)}return WT(0,null,N7(o,s),1,l,c,null,null,null,[r],null)}function N7(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let i of n)i.create();if(t&2&&e)for(let i of e)i.update()}}function k2(n){let e=n[dT].kind;return e==="input"||e==="twoWay"}var Gy=class extends nB{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,i){super(),this._rootLView=t,this._hasInputBindings=i,this._tNode=Om(t[Ke],Ln),this.location=Lh(this._tNode,t),this.instance=Bo(this._tNode.index,t)[ai],this.hostView=this.changeDetectorRef=new rc(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let r=this._rootLView,o=nk(i,r[Ke],r,e,t);this.previousInputValues.set(e,t);let s=Bo(i.index,r);ok(s,1)}get injector(){return new Au(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function F7(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let o=t[r];i.push(o!=null&&o.length?Array.from(o):null)}}var Mi=(()=>{class n{static __NG_ELEMENT_ID__=L7}return n})();function L7(){let n=gi();return dB(n,Ye())}var j7=Mi,uB=class extends j7{_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Lh(this._hostTNode,this._hostLView)}get injector(){return new Au(this._hostTNode,this._hostLView)}get parentInjector(){let e=PT(this._hostTNode,this._hostLView);if(Y2(e)){let t=By(e,this._hostLView),i=jy(e),r=t[Ke].data[i+8];return new Au(r,t)}else return new Au(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=A2(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-$i}createEmbeddedView(e,t,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=Uy(this._lContainer,e.ssrId),l=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(l,r,Oh(this._hostTNode,s)),l}createComponent(e,t,i,r,o,s,l){let c=e&&!iG(e),d;if(c)d=t;else{let w=t||{};d=w.index,i=w.injector,r=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef,s=w.directives,l=w.bindings}let f=c?e:new Pu(Ka(e)),p=i||this.parentInjector;if(!o&&f.ngModule==null){let I=(c?p:this.parentInjector).get(Fn,null);I&&(o=I)}let g=Ka(f.componentType??{}),m=Uy(this._lContainer,g?.id??null),_=m?.firstChild??null,y=f.create(p,r,_,o,s,l);return this.insertImpl(y.hostView,d,Oh(this._hostTNode,m)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(UL(r)){let l=this.indexOf(e);if(l!==-1)this.detach(l);else{let c=r[Ai],d=new uB(c,c[Tr],c[Ai]);d.detach(d.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return tg(s,r,o,i),e.attachToViewContainerRef(),eD(jD(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=A2(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=qm(this._lContainer,t);i&&(km(jD(this._lContainer),t),a0(i[Ke],i))}detach(e){let t=this._adjustIndex(e,-1),i=qm(this._lContainer,t);return i&&km(jD(this._lContainer),t)!=null?new rc(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function A2(n){return n[Pm]}function jD(n){return n[Pm]||(n[Pm]=[])}function dB(n,e){let t,i=e[n.index];return rs(i)?t=i:(t=Qj(i,e,null,n),e[n.index]=t,ZT(e,t)),V7(t,e,n,i),new uB(t,n,e)}function B7(n,e){let t=n[xn],i=t.createComment(""),r=os(e,n),o=t.parentNode(r);return $y(t,o,i,t.nextSibling(r),!1),i}var V7=U7,z7=()=>!1;function $7(n,e,t){return z7(n,e,t)}function U7(n,e,t,i){if(n[Jl])return;let r;t.type&8?r=jo(i):r=B7(e,t),n[Jl]=r}var hT=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},fT=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){let s=t.getByIndex(o),l=this.queries[s.indexInDeclarationView];r.push(l.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)hk(e,t).matches!==null&&this.queries[t].setDirty()}},Zy=class{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=Z7(e):this.predicate=e}},pT=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},mT=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,t,H7(t,o)),this.matchTNodeWithReadOption(e,t,Ry(t,e,o,!1,!1))}else i===lr?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Ry(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Ue||r===Mi||r===lr&&t.type&4)this.addMatch(t.index,-2);else{let o=Ry(t,e,r,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function H7(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function q7(n,e){return n.type&11?Lh(n,e):n.type&4?u0(n,e):null}function W7(n,e,t,i){return t===-1?q7(e,n):t===-2?G7(n,e,i):Um(n,n[Ke],t,e)}function G7(n,e,t){if(t===Ue)return Lh(e,n);if(t===lr)return u0(e,n);if(t===Mi)return dB(e,n)}function hB(n,e,t,i){let r=e[Ks].queries[i];if(r.matches===null){let o=n.data,s=t.matches,l=[];for(let c=0;s!==null&&c<s.length;c+=2){let d=s[c];if(d<0)l.push(null);else{let f=o[d];l.push(W7(e,f,s[c+1],t.metadata.read))}}r.matches=l}return r.matches}function gT(n,e,t,i){let r=n.queries.getByIndex(t),o=r.matches;if(o!==null){let s=hB(n,e,r,t);for(let l=0;l<o.length;l+=2){let c=o[l];if(c>0)i.push(s[l/2]);else{let d=o[l+1],f=e[-c];for(let p=$i;p<f.length;p++){let g=f[p];g[Xl]===g[Ai]&&gT(g[Ke],g,d,i)}if(f[Cu]!==null){let p=f[Cu];for(let g=0;g<p.length;g++){let m=p[g];gT(m[Ke],m,d,i)}}}}}return i}function dk(n,e){return n[Ks].queries[e].queryList}function fB(n,e,t){let i=new Vo((t&4)===4);return WL(n,e,i,i.destroy),(e[Ks]??=new fT).queries.push(new hT(i))-1}function pB(n,e,t){let i=Mn();return i.firstCreatePass&&(gB(i,new Zy(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),fB(i,Ye(),e)}function mB(n,e,t,i){let r=Mn();if(r.firstCreatePass){let o=gi();gB(r,new Zy(e,t,i),o.index),K7(r,n),(t&2)===2&&(r.staticContentQueries=!0)}return fB(r,Ye(),t)}function Z7(n){return n.split(",").map(e=>e.trim())}function gB(n,e,t){n.queries===null&&(n.queries=new pT),n.queries.track(new mT(e,t))}function K7(n,e){let t=n.contentQueries||(n.contentQueries=[]),i=t.length?t[t.length-1]:-1;e!==i&&t.push(n.queries.length-1,e)}function hk(n,e){return n.queries.getByIndex(e)}function _B(n,e){let t=n[Ke],i=hk(t,e);return i.crossesNgTemplate?gT(t,n,e,[]):hB(t,n,i,e)}function vB(n,e,t){let i,r=hm(()=>{i._dirtyCounter();let o=Y7(i,n);if(e&&o===void 0)throw new ye(-951,!1);return o});return i=r[pi],i._dirtyCounter=rn(0),i._flatValue=void 0,r}function fk(n){return vB(!0,!1,n)}function pk(n){return vB(!0,!0,n)}function bB(n,e){let t=n[pi];t._lView=Ye(),t._queryIndex=e,t._queryList=dk(t._lView,e),t._queryList.onDirty(()=>t._dirtyCounter.update(i=>i+1))}function Y7(n,e){let t=n._lView,i=n._queryIndex;if(t===void 0||i===void 0||t[ht]&4)return e?void 0:ar;let r=dk(t,i),o=_B(t,i);return r.reset(o,oj),e?r.first:r._changesDetected||n._flatValue===void 0?n._flatValue=r.toArray():n._flatValue}var M2=new Set;function tl(n){M2.has(n)||(M2.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var na=class{},h0=class{};var Ky=class extends na{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Wy(this);constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t;let o=iD(e);this._bootstrapComponents=Ej(o.bootstrap),this._r3Injector=MD(e,t,[{provide:na,useValue:this},{provide:ng,useValue:this.componentFactoryResolver},...i],Wa(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Yy=class extends h0{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Ky(this.moduleType,e,[])}};var Wm=class extends na{injector;componentFactoryResolver=new Wy(this);instance=null;constructor(e){super();let t=new gu([...e.providers,{provide:na,useValue:this},{provide:ng,useValue:this.componentFactoryResolver}],e.parent||wh(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ig(n,e,t=null){return new Wm({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Q7=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=oD(!1,t.type),r=i.length>0?ig([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ce({token:n,providedIn:"environment",factory:()=>new n(Se(Fn))})}return n})();function Fe(n){return Fh(()=>{let e=yB(n),t=S(b({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===RT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(Q7).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Xa.Emulated,styles:n.styles||ar,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&tl("NgStandalone"),wB(t);let i=n.dependencies;return t.directiveDefs=P2(i,X7),t.pipeDefs=P2(i,RL),t.id=tK(t),t})}function X7(n){return Ka(n)||rD(n)}function $e(n){return Fh(()=>({type:n.type,bootstrap:n.bootstrap||ar,declarations:n.declarations||ar,imports:n.imports||ar,exports:n.exports||ar,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function J7(n,e){if(n==null)return Yl;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,s,l,c;Array.isArray(r)?(l=r[0],o=r[1],s=r[2]??o,c=r[3]||null):(o=r,s=r,l=s0.None,c=null),t[o]=[i,l,c],e[o]=s}return t}function eK(n){if(n==null)return Yl;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Te(n){return Fh(()=>{let e=yB(n);return wB(e),e})}function qn(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function yB(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Yl,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||ar,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:J7(n.inputs,e),outputs:eK(n.outputs),debugInfo:null}}function wB(n){n.features?.forEach(e=>e(n))}function P2(n,e){return n?()=>{let t=typeof n=="function"?n():n,i=[];for(let r of t){let o=e(r);o!==null&&i.push(o)}return i}:null}function tK(n){let e=0,t=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of i.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function nK(n){return Object.getPrototypeOf(n.prototype).constructor}function St(n){let e=nK(n.type),t=!0,i=[n];for(;e;){let r;if(Qs(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ye(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let s=n;s.inputs=BD(n.inputs),s.declaredInputs=BD(n.declaredInputs),s.outputs=BD(n.outputs);let l=r.hostBindings;l&&aK(n,l);let c=r.viewQuery,d=r.contentQueries;if(c&&oK(n,c),d&&sK(n,d),iK(n,r),IL(n.outputs,r.outputs),Qs(r)&&r.data.animation){let f=n.data;f.animation=(f.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let l=o[s];l&&l.ngInherit&&l(n),l===St&&(t=!1)}}e=Object.getPrototypeOf(e)}rK(i)}function iK(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t])}}function rK(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Mh(r.hostAttrs,t=Mh(t,r.hostAttrs))}}function BD(n){return n===Yl?{}:n===ar?[]:n}function oK(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function sK(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,o)=>{e(i,r,o),t(i,r,o)}:n.contentQueries=e}function aK(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function xB(n,e,t,i,r,o,s,l){if(t.firstCreatePass){n.mergedAttrs=Mh(n.mergedAttrs,n.attrs);let f=n.tView=WT(2,n,r,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),f.queries=t.queries.embeddedTView(n))}l&&(n.flags|=l),Sh(n,!1);let c=cK(t,e,n,i);Sy()&&QT(t,e,c,n),Ph(c,e);let d=Qj(c,e,c,n);e[i+Ln]=d,ZT(e,d),$7(d,n,e)}function lK(n,e,t,i,r,o,s,l,c,d,f){let p=t+Ln,g;return e.firstCreatePass?(g=Vh(e,p,4,s||null,l||null),yy()&&rB(e,n,g,go(e.consts,d),JT),G2(e,g)):g=e.data[p],xB(g,n,e,t,i,r,o,c),Eh(g)&&c0(e,n,g),d!=null&&Jm(n,g,f),g}function Rh(n,e,t,i,r,o,s,l,c,d,f){let p=t+Ln,g;if(e.firstCreatePass){if(g=Vh(e,p,4,s||null,l||null),d!=null){let m=go(e.consts,d);g.localNames=[];for(let _=0;_<m.length;_+=2)g.localNames.push(m[_],-1)}}else g=e.data[p];return xB(g,n,e,t,i,r,o,c),d!=null&&Jm(n,g,f),g}function Xe(n,e,t,i,r,o,s,l){let c=Ye(),d=Mn(),f=go(d.consts,o);return lK(c,d,n,e,t,i,r,f,void 0,s,l),Xe}function rg(n,e,t,i,r,o,s,l){let c=Ye(),d=Mn(),f=go(d.consts,o);return Rh(c,d,n,e,t,i,r,f,void 0,s,l),rg}var cK=uK;function uK(n,e,t,i){return Bm(!0),e[xn].createComment("")}var f0=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(f0||{}),sc=new oe(""),CB=!1,_T=class extends ve{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,BL()&&(this.destroyRef=D(Ui,{optional:!0})??void 0,this.pendingTasks=D(Js,{optional:!0})??void 0)}emit(e){let t=rt(null);try{super.next(e)}finally{rt(t)}}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let l=super.subscribe({next:r,error:o,complete:s});return e instanceof Pt&&e.add(l),l}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},je=_T;function EB(n){let e,t;function i(){n=Tu;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function O2(n){return queueMicrotask(()=>n()),()=>{n=Tu}}var mk="isAngularZone",Qy=mk+"_ID",dK=0,De=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new je(!1);onMicrotaskEmpty=new je(!1);onStable=new je(!1);onError=new je(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=CB}=e;if(typeof Zone>"u")throw new ye(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,pK(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(mk)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ye(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ye(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,hK,Tu,Tu);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},hK={};function gk(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function fK(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){EB(()=>{n.callbackScheduled=!1,vT(n),n.isCheckStableRunning=!0,gk(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),vT(n)}function pK(n){let e=()=>{fK(n)},t=dK++;n._inner=n._inner.fork({name:"angular",properties:{[mk]:!0,[Qy]:t,[Qy+t]:!0},onInvokeTask:(i,r,o,s,l,c)=>{if(mK(c))return i.invokeTask(o,s,l,c);try{return R2(n),i.invokeTask(o,s,l,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),N2(n)}},onInvoke:(i,r,o,s,l,c,d)=>{try{return R2(n),i.invoke(o,s,l,c,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!gK(c)&&e(),N2(n)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,vT(n),gk(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function vT(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function R2(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function N2(n){n._nesting--,gk(n)}var Xy=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new je;onMicrotaskEmpty=new je;onStable=new je;onError=new je;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function mK(n){return IB(n,"__ignore_ng_zone__")}function gK(n){return IB(n,"__scheduler_tick__")}function IB(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var p0=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ce({token:n,providedIn:"root",factory:()=>new n})}return n})(),_k=[0,1,2,3],vk=(()=>{class n{ngZone=D(De);scheduler=D(Fo);errorHandler=D(zi,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){D(sc,{optional:!0})}execute(){let t=this.sequences.size>0;t&&mn(16),this.executing=!0;for(let i of _k)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=r.hooks[i];return o(r.pipelinedValue)},r.snapshot))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&mn(17)}register(t){let{view:i}=t;i!==void 0?((i[xu]??=[]).push(t),tc(i),i[ht]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,i){return i?i.run(f0.AFTER_NEXT_RENDER,t):t()}static \u0275prov=ce({token:n,providedIn:"root",factory:()=>new n})}return n})(),Gm=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,i,r,o,s=null){this.impl=e,this.hooks=t,this.view=i,this.once=r,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[xu];e&&(this.view[xu]=e.filter(t=>t!==this))}};function vi(n,e){let t=e?.injector??D(We);return tl("NgAfterNextRender"),vK(n,t,e,!0)}function _K(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function vK(n,e,t,i){let r=e.get(p0);r.impl??=e.get(vk);let o=e.get(sc,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Ui):null,l=e.get(Su,null,{optional:!0}),c=new Gm(r.impl,_K(n),l?.view,i,s,o?.snapshot(null));return r.impl.register(c),c}var m0=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var bk=new oe("");function nl(n){return!!n&&typeof n.then=="function"}function g0(n){return!!n&&typeof n.subscribe=="function"}var SB=new oe("");var yk=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=D(SB,{optional:!0})??[];injector=D(We);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let o=tr(this.injector,r);if(nl(o))t.push(o);else if(g0(o)){let s=new Promise((l,c)=>{o.subscribe({complete:l,error:c})});t.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_0=new oe("");function DB(){mS(()=>{let n="";throw new ye(600,n)})}function TB(n){return n.isBoundToModule}var bK=10;var Mr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=D(Zr);afterRenderManager=D(p0);zonelessEnabled=D(Th);rootEffectScheduler=D(Vm);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ve;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=D(Js);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Pe(t=>!t))}constructor(){D(sc,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=D(Fn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,i){return this.bootstrapImpl(t,i)}bootstrapImpl(t,i,r=We.NULL){return this._injector.get(De).run(()=>{mn(10);let s=t instanceof d0;if(!this._injector.get(yk).done){let _="";throw new ye(405,_)}let c;s?c=t:c=this._injector.get(ng).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let d=TB(c)?void 0:this._injector.get(na),f=i||c.selector,p=c.create(r,[],f,d),g=p.location.nativeElement,m=p.injector.get(bk,null);return m?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),$m(this.components,p),m?.unregisterApplication(g)}),this._loadComponent(p),mn(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){mn(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(f0.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new ye(101,!1);let t=rt(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,rt(t),this.afterTick.next(),mn(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(_i,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<bK;)mn(14),this.synchronizeOnce(),mn(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!Rm(r))continue;let o=i&&!this.zonelessEnabled?0:1;rk(r,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Rm(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;$m(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(t),this._injector.get(_0,[]).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>$m(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ye(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $m(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Ut(n,e,t,i){let r=Ye(),o=Qa();if(_o(r,o,e)){let s=Mn(),l=jm();zZ(l,r,n,e,t,i)}return Ut}var bT=class{destroy(e){}updateValue(e,t){}swap(e,t){let i=Math.min(e,t),r=Math.max(e,t),o=this.detach(r);if(r-i>1){let s=this.detach(i);this.attach(i,o),this.attach(r,s)}else this.attach(i,o)}move(e,t){this.attach(t,this.detach(e))}};function VD(n,e,t,i,r){return n===t&&Object.is(e,i)?1:Object.is(r(n,e),r(t,i))?-1:0}function yK(n,e,t){let i,r,o=0,s=n.length-1,l=void 0;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){let d=n.at(o),f=e[o],p=VD(o,d,o,f,t);if(p!==0){p<0&&n.updateValue(o,f),o++;continue}let g=n.at(s),m=e[c],_=VD(s,g,c,m,t);if(_!==0){_<0&&n.updateValue(s,m),s--,c--;continue}let y=t(o,d),w=t(s,g),I=t(o,f);if(Object.is(I,w)){let k=t(c,m);Object.is(k,y)?(n.swap(o,s),n.updateValue(s,m),c--,s--):n.move(s,o),n.updateValue(o,f),o++;continue}if(i??=new Jy,r??=L2(n,o,s,t),yT(n,i,o,I))n.updateValue(o,f),o++,s++;else if(r.has(I))i.set(y,n.detach(o)),s--;else{let k=n.create(o,e[o]);n.attach(o,k),o++,s++}}for(;o<=c;)F2(n,i,t,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),d=c.next();for(;!d.done&&o<=s;){let f=n.at(o),p=d.value,g=VD(o,f,o,p,t);if(g!==0)g<0&&n.updateValue(o,p),o++,d=c.next();else{i??=new Jy,r??=L2(n,o,s,t);let m=t(o,p);if(yT(n,i,o,m))n.updateValue(o,p),o++,s++,d=c.next();else if(!r.has(m))n.attach(o,n.create(o,p)),o++,s++,d=c.next();else{let _=t(o,f);i.set(_,n.detach(o)),s--}}}for(;!d.done;)F2(n,i,t,n.length,d.value),d=c.next()}for(;o<=s;)n.destroy(n.detach(s--));i?.forEach(c=>{n.destroy(c)})}function yT(n,e,t,i){return e!==void 0&&e.has(i)?(n.attach(t,e.get(i)),e.delete(i),!0):!1}function F2(n,e,t,i,r){if(yT(n,e,i,t(i,r)))n.updateValue(i,r);else{let o=n.create(i,r);n.attach(i,o)}}function L2(n,e,t,i){let r=new Set;for(let o=e;o<=t;o++)r.add(i(o,n.at(o)));return r}var Jy=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,i]of this.kvMap)if(e(i,t),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,t)}}};function _t(n,e,t,i,r,o,s,l){tl("NgControlFlow");let c=Ye(),d=Mn(),f=go(d.consts,o);return Rh(c,d,n,e,t,i,r,f,256,s,l),Ru}function Ru(n,e,t,i,r,o,s,l){tl("NgControlFlow");let c=Ye(),d=Mn(),f=go(d.consts,o);return Rh(c,d,n,e,t,i,r,f,512,s,l),Ru}function vt(n,e){tl("NgControlFlow");let t=Ye(),i=Qa(),r=t[i]!==Ar?t[i]:-1,o=r!==-1?e0(t,Ln+r):void 0,s=0;if(_o(t,i,n)){let l=rt(null);try{if(o!==void 0&&Jj(o,s),n!==-1){let c=Ln+n,d=e0(t,c),f=ET(t[Ke],c),p=tB(d,f,t),g=eg(t,f,e,{dehydratedView:p});tg(d,g,s,Oh(f,p))}}finally{rt(l)}}else if(o!==void 0){let l=Xj(o,s);l!==void 0&&(l[ai]=e)}}var wT=class{lContainer;$implicit;$index;constructor(e,t,i){this.lContainer=e,this.$implicit=t,this.$index=i}get $count(){return this.lContainer.length-$i}};function v0(n){return n}function oa(n,e){return e}var xT=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,i){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=i}};function cr(n,e,t,i,r,o,s,l,c,d,f,p,g){tl("NgControlFlow");let m=Ye(),_=Mn(),y=c!==void 0,w=Ye(),I=l?s.bind(w[kr][ai]):s,k=new xT(y,I);w[Ln+n]=k,Rh(m,_,n+1,e,t,i,r,go(_.consts,o),256),y&&Rh(m,_,n+2,c,d,f,p,go(_.consts,g),512)}var CT=class extends bT{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,i){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=i}get length(){return this.lContainer.length-$i}at(e){return this.getLView(e)[ai].$implicit}attach(e,t){let i=t[vu];this.needsIndexUpdate||=e!==this.length,tg(this.lContainer,t,e,Oh(this.templateTNode,i))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,wK(this.lContainer,e)}create(e,t){let i=Uy(this.lContainer,this.templateTNode.tView.ssrId),r=eg(this.hostLView,this.templateTNode,new wT(this.lContainer,t,e),{dehydratedView:i});return this.operationsCounter?.recordCreate(),r}destroy(e){a0(e[Ke],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[ai].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[ai].$index=e}getLView(e){return xK(this.lContainer,e)}};function ur(n){let e=rt(null),t=Xs();try{let i=Ye(),r=i[Ke],o=i[t],s=t+1,l=e0(i,s);if(o.liveCollection===void 0){let d=ET(r,s);o.liveCollection=new CT(l,i,d)}else o.liveCollection.reset();let c=o.liveCollection;if(yK(c,n,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let d=Qa(),f=c.length===0;if(_o(i,d,f)){let p=t+2,g=e0(i,p);if(f){let m=ET(r,p),_=tB(g,m,i),y=eg(i,m,void 0,{dehydratedView:_});tg(g,y,0,Oh(m,_))}else r.firstUpdatePass&&h7(g),Jj(g,0)}}}finally{rt(e)}}function e0(n,e){return n[e]}function wK(n,e){return qm(n,e)}function xK(n,e){return Xj(n,e)}function ET(n,e){return Om(n,e)}function de(n,e,t){let i=Ye(),r=Qa();if(_o(i,r,e)){let o=Mn(),s=jm();Vj(s,i,n,e,i[xn],t)}return de}function IT(n,e,t,i,r){nk(e,n,t,r?"class":"style",i)}function z(n,e,t,i){let r=Ye(),o=r[Ke],s=n+Ln,l=o.firstCreatePass?ak(s,r,2,e,JT,yy(),t,i):o.data[s];if(ek(l,r,n,e,kB),Eh(l)){let c=r[Ke];c0(c,r,l),FT(c,l,r)}return i!=null&&Jm(r,l),z}function U(){let n=Mn(),e=gi(),t=tk(e);return n.firstCreatePass&&lk(n,t),xD(t)&&CD(),yD(),t.classesWithoutHost!=null&&cG(t)&&IT(n,t,Ye(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&uG(t)&&IT(n,t,Ye(),t.stylesWithoutHost,!1),U}function qt(n,e,t,i){return z(n,e,t,i),U(),qt}function vo(n,e,t,i){let r=Ye(),o=r[Ke],s=n+Ln,l=o.firstCreatePass?S7(s,o,2,e,t,i):o.data[s];return ek(l,r,n,e,kB),i!=null&&Jm(r,l),vo}function zo(){let n=gi(),e=tk(n);return xD(e)&&CD(),yD(),zo}function sa(n,e,t,i){return vo(n,e,t,i),zo(),sa}var kB=(n,e,t,i,r)=>(Bm(!0),Dj(e[xn],i,a2()));function b0(n,e,t){let i=Ye(),r=i[Ke],o=n+Ln,s=r.firstCreatePass?ak(o,i,8,"ng-container",JT,yy(),e,t):r.data[o];if(ek(s,i,n,"ng-container",CK),Eh(s)){let l=i[Ke];c0(l,i,s),FT(l,s,i)}return t!=null&&Jm(i,s),b0}function y0(){let n=Mn(),e=gi(),t=tk(e);return n.firstCreatePass&&lk(n,t),y0}var CK=(n,e,t,i,r)=>(Bm(!0),mZ(e[xn],""));function Bt(){return Ye()}function ls(n,e,t){let i=Ye(),r=Qa();if(_o(i,r,e)){let o=Mn(),s=jm();zj(s,i,n,e,i[xn],t)}return ls}var ku=void 0;function EK(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var IK=["en",[["a","p"],["AM","PM"],ku],[["AM","PM"],ku,ku],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ku,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ku,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ku,"{1} 'at' {0}",ku],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",EK],zD={};function Kr(n){let e=SK(n),t=j2(e);if(t)return t;let i=e.split("-")[0];if(t=j2(i),t)return t;if(i==="en")return IK;throw new ye(701,!1)}function j2(n){return n in zD||(zD[n]=Gs.ng&&Gs.ng.common&&Gs.ng.common.locales&&Gs.ng.common.locales[n]),zD[n]}var Jn=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Jn||{});function SK(n){return n.toLowerCase().replace(/_/g,"-")}var og="en-US";var DK=og;function AB(n){typeof n=="string"&&(DK=n.toLowerCase().replace(/_/g,"-"))}function Me(n,e,t){let i=Ye(),r=Mn(),o=gi();return MB(r,i,i[xn],o,n,e,t),Me}function zh(n,e,t){let i=Ye(),r=Mn(),o=gi();return(o.type&3||t)&&lB(o,r,i,t,i[xn],n,e,Fy(o,i,e)),zh}function MB(n,e,t,i,r,o,s){let l=!0,c=null;if((i.type&3||s)&&(c??=Fy(i,e,o),lB(i,n,e,s,t,r,o,c)&&(l=!1)),l){let d=i.outputs?.[r],f=i.hostDirectiveOutputs?.[r];if(f&&f.length)for(let p=0;p<f.length;p+=2){let g=f[p],m=f[p+1];c??=Fy(i,e,o),T2(i,e,g,m,r,c)}if(d&&d.length)for(let p of d)c??=Fy(i,e,o),T2(i,e,p,r,r,c)}}function Q(n=1){return s2(n)}function TK(n,e){let t=null,i=sZ(n);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){t=r;continue}if(i===null?Sj(n,o,!0):cZ(i,o))return r}return t}function Cn(n){let e=Ye()[kr][Tr];if(!e.projection){let t=n?n.length:1,i=e.projection=PL(t,null),r=i.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=n?TK(o,n):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o)}o=o.next}}}function bt(n,e=0,t,i,r,o){let s=Ye(),l=Mn(),c=i?n+1:null;c!==null&&Rh(s,l,c,i,r,o,null,t);let d=Vh(l,Ln+n,16,null,t||null);d.projection===null&&(d.projection=e),SD();let p=!s[vu]||wD();s[kr][Tr].projection[d.projection]===null&&c!==null?kK(s,l,c):p&&!r0(d)&&AZ(l,s,d)}function kK(n,e,t){let i=Ln+t,r=e.data[i],o=n[i],s=Uy(o,r.tView.ssrId),l=eg(n,r,void 0,{dehydratedView:s});tg(o,l,0,Oh(r,s))}function Bn(n,e,t,i){mB(n,e,t,i)}function on(n,e,t){pB(n,e,t)}function st(n){let e=Ye(),t=Mn(),i=Cy();Lm(i+1);let r=hk(t,i);if(n.dirty&&$L(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=_B(e,i);n.reset(o,oj),n.notifyOnChanges()}return!0}return!1}function at(){return dk(Ye(),Cy())}function wk(n,e,t,i,r){bB(e,mB(n,t,i,r))}function $h(n,e,t,i){bB(n,pB(e,t,i))}function w0(n=1){Lm(Cy()+n)}function Pr(n){let e=YL();return _y(e,Ln+n)}function My(n,e){return n<<17|e<<2}function Ou(n){return n>>17&32767}function AK(n){return(n&2)==2}function MK(n,e){return n&131071|e<<17}function ST(n){return n|2}function Nh(n){return(n&131068)>>2}function $D(n,e){return n&-131069|e<<2}function PK(n){return(n&1)===1}function DT(n){return n|1}function OK(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,l=Ou(s),c=Nh(s);n[i]=t;let d=!1,f;if(Array.isArray(t)){let p=t;f=p[1],(f===null||yh(p,f)>0)&&(d=!0)}else f=t;if(r)if(c!==0){let g=Ou(n[l+1]);n[i+1]=My(g,l),g!==0&&(n[g+1]=$D(n[g+1],i)),n[l+1]=MK(n[l+1],i)}else n[i+1]=My(l,0),l!==0&&(n[l+1]=$D(n[l+1],i)),l=i;else n[i+1]=My(c,0),l===0?l=i:n[c+1]=$D(n[c+1],i),c=i;d&&(n[i+1]=ST(n[i+1])),B2(n,f,i,!0),B2(n,f,i,!1),RK(e,f,n,i,o),s=My(l,c),o?e.classBindings=s:e.styleBindings=s}function RK(n,e,t,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&yh(o,e)>=0&&(t[i+1]=DT(t[i+1]))}function B2(n,e,t,i){let r=n[t+1],o=e===null,s=i?Ou(r):Nh(r),l=!1;for(;s!==0&&(l===!1||o);){let c=n[s],d=n[s+1];NK(c,e)&&(l=!0,n[s+1]=i?DT(d):ST(d)),s=i?Ou(d):Nh(d)}l&&(n[t+1]=i?ST(r):DT(r))}function NK(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?yh(n,e)>=0:!1}var as={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function FK(n){return n.substring(as.key,as.keyEnd)}function LK(n){return jK(n),PB(n,OB(n,0,as.textEnd))}function PB(n,e){let t=as.textEnd;return t===e?-1:(e=as.keyEnd=BK(n,as.key=e,t),OB(n,e,t))}function jK(n){as.key=0,as.keyEnd=0,as.value=0,as.valueEnd=0,as.textEnd=n.length}function OB(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function BK(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function il(n,e,t){return RB(n,e,t,!1),il}function lt(n,e){return RB(n,e,null,!0),lt}function cs(n){zK(GK,VK,n,!0)}function VK(n,e){for(let t=LK(e);t>=0;t=PB(e,t))py(n,FK(e),!0)}function RB(n,e,t,i){let r=Ye(),o=Mn(),s=wy(2);if(o.firstUpdatePass&&FB(o,n,s,i),e!==Ar&&_o(r,s,e)){let l=o.data[Xs()];LB(o,l,r,r[xn],n,r[s+1]=KK(e,t),i,s)}}function zK(n,e,t,i){let r=Mn(),o=wy(2);r.firstUpdatePass&&FB(r,null,o,i);let s=Ye();if(t!==Ar&&_o(s,o,t)){let l=r.data[Xs()];if(jB(l,i)&&!NB(r,o)){let c=i?l.classesWithoutHost:l.stylesWithoutHost;c!==null&&(t=uy(c,t||"")),IT(r,l,s,t,i)}else ZK(r,l,s,s[xn],s[o+1],s[o+1]=WK(n,e,t),i,o)}}function NB(n,e){return e>=n.expandoStartIndex}function FB(n,e,t,i){let r=n.data;if(r[t+1]===null){let o=r[Xs()],s=NB(n,t);jB(o,i)&&e===null&&!s&&(e=!1),e=$K(r,o,e,i),OK(r,o,e,t,s,i)}}function $K(n,e,t,i){let r=n2(n),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=UD(null,n,e,t,i),t=Zm(t,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==r)if(t=UD(r,n,e,t,i),o===null){let c=UK(n,e,i);c!==void 0&&Array.isArray(c)&&(c=UD(null,n,e,c[1],i),c=Zm(c,e.attrs,i),HK(n,e,i,c))}else o=qK(n,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),t}function UK(n,e,t){let i=t?e.classBindings:e.styleBindings;if(Nh(i)!==0)return n[Ou(i)]}function HK(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[Ou(r)]=i}function qK(n,e,t){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;i=Zm(i,s,t)}return Zm(i,e.attrs,t)}function UD(n,e,t,i,r){let o=null,s=t.directiveEnd,l=t.directiveStylingLast;for(l===-1?l=t.directiveStart:l++;l<s&&(o=e[l],i=Zm(i,o.hostAttrs,r),o!==n);)l++;return n!==null&&(t.directiveStylingLast=l),i}function Zm(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),py(n,s,t?!0:e[++o]))}return n===void 0?null:n}function WK(n,e,t){if(t==null||t==="")return ar;let i=[],r=ra(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function GK(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&py(n,i,t)}function ZK(n,e,t,i,r,o,s,l){r===Ar&&(r=ar);let c=0,d=0,f=0<r.length?r[0]:null,p=0<o.length?o[0]:null;for(;f!==null||p!==null;){let g=c<r.length?r[c+1]:void 0,m=d<o.length?o[d+1]:void 0,_=null,y;f===p?(c+=2,d+=2,g!==m&&(_=p,y=m)):p===null||f!==null&&f<p?(c+=2,_=f):(d+=2,_=p,y=m),_!==null&&LB(n,e,t,i,_,y,s,l),f=c<r.length?r[c]:null,p=d<o.length?o[d]:null}}function LB(n,e,t,i,r,o,s,l){if(!(e.type&3))return;let c=n.data,d=c[l+1],f=PK(d)?V2(c,e,t,r,Nh(d),s):void 0;if(!t0(f)){t0(o)||AK(d)&&(o=V2(c,null,t,r,l,s));let p=fD(Xs(),t);PZ(i,s,p,r,o)}}function V2(n,e,t,i,r,o){let s=e===null,l;for(;r>0;){let c=n[r],d=Array.isArray(c),f=d?c[1]:c,p=f===null,g=t[r+1];g===Ar&&(g=p?ar:void 0);let m=p?my(g,i):f===i?g:void 0;if(d&&!t0(m)&&(m=my(c,i)),t0(m)&&(l=m,s))return l;let _=n[r+1];r=s?Ou(_):Nh(_)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(l=my(c,i))}return l}function t0(n){return n!==void 0}function KK(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Wa(ra(n)))),n}function jB(n,e){return(n.flags&(e?8:16))!==0}function ae(n,e=""){let t=Ye(),i=Mn(),r=n+Ln,o=i.firstCreatePass?Vh(i,r,1,e,null):i.data[r],s=YK(i,t,o,e,n);t[r]=s,Sy()&&QT(i,t,s,o),Sh(o,!1)}var YK=(n,e,t,i,r)=>(Bm(!0),fZ(e[xn],i));function QK(n,e,t,i=""){return _o(n,Qa(),t)?e+Kl(t)+i:Ar}function XK(n,e,t,i,r,o=""){let s=QL(),l=qy(n,s,t,r);return wy(2),l?e+Kl(t)+i+Kl(r)+o:Ar}function Nt(n){return Wt("",n),Nt}function Wt(n,e,t){let i=Ye(),r=QK(i,n,e,t);return r!==Ar&&BB(i,Xs(),r),Wt}function x0(n,e,t,i,r){let o=Ye(),s=XK(o,n,e,t,i,r);return s!==Ar&&BB(o,Xs(),s),x0}function BB(n,e,t){let i=fD(e,n);pZ(n[xn],i,t)}function ac(n,e,t){PD(e)&&(e=e());let i=Ye(),r=Qa();if(_o(i,r,e)){let o=Mn(),s=jm();Vj(s,i,n,e,i[xn],t)}return ac}function Nu(n,e){let t=PD(n);return t&&n.set(e),t}function lc(n,e){let t=Ye(),i=Mn(),r=gi();return MB(i,t,t[xn],r,n,e),lc}function xk(n){return _o(Ye(),Qa(),n)?Kl(n):Ar}function JK(n,e,t){let i=Mn();if(i.firstCreatePass){let r=Qs(n);TT(t,i.data,i.blueprint,r,!0),TT(e,i.data,i.blueprint,r,!1)}}function TT(n,e,t,i,r){if(n=er(n),Array.isArray(n))for(let o=0;o<n.length;o++)TT(n[o],e,t,i,r);else{let o=Mn(),s=Ye(),l=gi(),c=mu(n)?n:er(n.provide),d=aD(n),f=l.providerIndexes&1048575,p=l.directiveStart,g=l.providerIndexes>>20;if(mu(n)||!n.multi){let m=new Mu(d,r,Ce,null),_=qD(c,e,r?f:f+g,p);_===-1?(GD(zy(l,s),o,c),HD(o,n,e.length),e.push(c),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),t.push(m),s.push(m)):(t[_]=m,s[_]=m)}else{let m=qD(c,e,f+g,p),_=qD(c,e,f,f+g),y=m>=0&&t[m],w=_>=0&&t[_];if(r&&!w||!r&&!y){GD(zy(l,s),o,c);let I=nY(r?tY:eY,t.length,r,i,d,n);!r&&w&&(t[_].providerFactory=I),HD(o,n,e.length,0),e.push(c),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),t.push(I),s.push(I)}else{let I=VB(t[r?_:m],d,!r&&i);HD(o,n,m>-1?m:_,I)}!r&&i&&w&&t[_].componentProviders++}}}function HD(n,e,t,i){let r=mu(e),o=jL(e);if(r||o){let c=(o?er(e.useClass):e).prototype.ngOnDestroy;if(c){let d=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let f=d.indexOf(t);f===-1?d.push(t,[i,c]):d[f+1].push(i,c)}else d.push(t,c)}}}function VB(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function qD(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function eY(n,e,t,i,r){return kT(this.multi,[])}function tY(n,e,t,i,r){let o=this.multi,s;if(this.providerFactory){let l=this.providerFactory.componentProviders,c=Um(i,i[Ke],this.providerFactory.index,r);s=c.slice(0,l),kT(o,s);for(let d=l;d<c.length;d++)s.push(c[d])}else s=[],kT(o,s);return s}function kT(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function nY(n,e,t,i,r,o){let s=new Mu(n,t,Ce,null);return s.multi=[],s.index=e,s.componentProviders=0,VB(s,r,i&&!t),s}function Vt(n,e=[]){return t=>{t.providersResolver=(i,r)=>JK(i,r?r(n):n,e)}}function Ck(n,e,t,i,r){return zB(Ye(),Fm(),n,e,t,i,r)}function Ek(n,e,t,i,r,o,s){return rY(Ye(),Fm(),n,e,t,i,r,o,s)}function Ik(n,e){let t=n[e];return t===Ar?void 0:t}function iY(n,e,t,i,r,o){let s=e+t;return _o(n,s,r)?uk(n,s+1,o?i.call(o,r):i(r)):Ik(n,s+1)}function zB(n,e,t,i,r,o,s){let l=e+t;return qy(n,l,r,o)?uk(n,l+2,s?i.call(s,r,o):i(r,o)):Ik(n,l+2)}function rY(n,e,t,i,r,o,s,l,c){let d=e+t;return D7(n,d,r,o,s,l)?uk(n,d+4,c?i.call(c,r,o,s,l):i(r,o,s,l)):Ik(n,d+4)}function kn(n,e){let t=Mn(),i,r=n+Ln;t.firstCreatePass?(i=oY(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let o=i.factory||(i.factory=Gl(i.type,!0)),s,l=Dr(Ce);try{let c=Vy(!1),d=o();return Vy(c),pD(t,Ye(),r,d),d}finally{Dr(l)}}function oY(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function Yn(n,e,t){let i=n+Ln,r=Ye(),o=_y(r,i);return $B(r,i)?iY(r,Fm(),e,o.transform,t,o):o.transform(t)}function Uh(n,e,t,i){let r=n+Ln,o=Ye(),s=_y(o,r);return $B(o,r)?zB(o,Fm(),e,s.transform,t,i,s):s.transform(t,i)}function $B(n,e){return n[Ke].data[e].pure}function rl(n,e){return u0(n,e)}var n0=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Sk=(()=>{class n{compileModuleSync(t){return new Yy(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=iD(t),o=Ej(r.declarations).reduce((s,l)=>{let c=Ka(l);return c&&s.push(new Pu(c)),s},[]);return new n0(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var sY=(()=>{class n{zone=D(De);changeDetectionScheduler=D(Fo);applicationRef=D(Mr);applicationErrorHandler=D(Zr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),UB=new oe("",{factory:()=>!1});function Dk({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new De(S(b({},kk()),{scheduleInRootZone:t})),[{provide:De,useFactory:n},{provide:Za,multi:!0,useFactory:()=>{let i=D(sY,{optional:!0});return()=>i.initialize()}},{provide:Za,multi:!0,useFactory:()=>{let i=D(aY);return()=>{i.initialize()}}},e===!0?{provide:OD,useValue:!0}:[],{provide:RD,useValue:t??CB},{provide:Zr,useFactory:()=>{let i=D(De),r=D(Fn),o;return s=>{i.runOutsideAngular(()=>{r.destroyed&&!o?setTimeout(()=>{throw s}):(o??=r.get(zi),o.handleError(s))})}}}]}function Tk(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,i=Dk({ngZoneFactory:()=>{let r=kk(n);return r.scheduleInRootZone=t,r.shouldCoalesceEventChangeDetection&&tl("NgZone_CoalesceEvent"),new De(r)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Ql([{provide:UB,useValue:!0},{provide:Th,useValue:!1},i])}function kk(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var aY=(()=>{class n{subscription=new Pt;initialized=!1;zone=D(De);pendingTasks=D(Js);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{De.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{De.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var HB=(()=>{class n{applicationErrorHandler=D(Zr);appRef=D(Mr);taskService=D(Js);ngZone=D(De);zonelessEnabled=D(Th);tracing=D(sc,{optional:!0});disableScheduling=D(OD,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Pt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Qy):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(D(RD,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Xy||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let i=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?O2:EB;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Qy+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(t),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,O2(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function lY(){return typeof $localize<"u"&&$localize.locale||og}var Hh=new oe("",{providedIn:"root",factory:()=>D(Hh,{optional:!0,skipSelf:!0})||lY()});var C0=class{destroyed=!1;listeners=null;errorHandler=D(zi,{optional:!0});destroyRef=D(Ui);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new ye(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let t=this.listeners?.indexOf(e);t!==void 0&&t!==-1&&this.listeners?.splice(t,1)}}}emit(e){if(this.destroyed){console.warn(Ga(953,!1));return}if(this.listeners===null)return;let t=rt(null);try{for(let i of this.listeners)try{i(e)}catch(r){this.errorHandler?.handleError(r)}}finally{rt(t)}}};function Or(n){return xL(n)}function Rr(n,e){return hm(n,e?.equal)}var Ak=class{[pi];constructor(e){this[pi]=e}destroy(){this[pi].destroy()}};function qh(n,e){let t=e?.injector??D(We),i=e?.manualCleanup!==!0?t.get(Ui):null,r,o=t.get(Su,null,{optional:!0}),s=t.get(Fo);return o!==null?(r=dY(o.view,s,n),i instanceof Dm&&i._lView===o.view&&(i=null)):r=hY(n,t.get(Vm),s),r.injector=t,i!==null&&(r.onDestroyFn=i.onDestroy(()=>r.destroy())),new Ak(r)}var qB=S(b({},Vl),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:Tu,run(){if(this.dirty=!1,this.hasRun&&!au(this))return;this.hasRun=!0;let n=i=>(this.cleanupFns??=[]).push(i),e=Va(this),t=Dh(!1);try{this.maybeCleanup(),this.fn(n)}finally{Dh(t),$l(this,e)}},maybeCleanup(){if(!this.cleanupFns?.length)return;let n=rt(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],rt(n)}}}),cY=S(b({},qB),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){ih(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),uY=S(b({},qB),{consumerMarkedDirty(){this.view[ht]|=8192,tc(this.view),this.notifier.notify(13)},destroy(){ih(this),this.onDestroyFn(),this.maybeCleanup(),this.view[Ya]?.delete(this)}});function dY(n,e,t){let i=Object.create(uY);return i.view=n,i.zone=typeof Zone<"u"?Zone.current:null,i.notifier=e,i.fn=t,n[Ya]??=new Set,n[Ya].add(i),i.consumerMarkedDirty(i),i}function hY(n,e,t){let i=Object.create(cY);return i.fn=n,i.scheduler=e,i.notifier=t,i.zone=typeof Zone<"u"?Zone.current:null,i.scheduler.add(i),i.notifier.notify(12),i}var S0=Symbol("InputSignalNode#UNSET"),JB=S(b({},fm),{transformFn:void 0,applyValueToInputSignal(n,e){lu(n,e)}});function eV(n,e){let t=Object.create(JB);t.value=n,t.transformFn=e?.transform;function i(){if(zl(t),t.value===S0){let r=null;throw new ye(-950,r)}return t.value}return i[pi]=t,i}var ag=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>OT(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},tV=new oe("");tV.__NG_ELEMENT_ID__=n=>{let e=gi();if(e===null)throw new ye(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new ye(204,!1)};function WB(n,e){return eV(n,e)}function AY(n){return eV(S0,n)}var nV=(WB.required=AY,WB);function GB(n,e){return fk(e)}function MY(n,e){return pk(e)}var lg=(GB.required=MY,GB);function ZB(n,e){return fk(e)}function PY(n,e){return pk(e)}var iV=(ZB.required=PY,ZB);function rV(n,e){let t=Object.create(JB),i=new C0;t.value=n;function r(){return zl(t),KB(t.value),t.value}return r[pi]=t,r.asReadonly=Dy.bind(r),r.set=o=>{t.equal(t.value,o)||(lu(t,o),i.emit(o))},r.update=o=>{KB(t.value),r.set(o(t.value))},r.subscribe=i.subscribe.bind(i),r.destroyRef=i.destroyRef,r}function KB(n){if(n===S0)throw new ye(952,!1)}function YB(n,e){return rV(n,e)}function OY(n){return rV(S0,n)}var cg=(YB.required=OY,YB);var Pk=new oe(""),RY=new oe("");function sg(n){return!n.moduleRef}function NY(n){let e=sg(n)?n.r3Injector:n.moduleRef.injector,t=e.get(De);return t.run(()=>{sg(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(Zr),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:i})}),sg(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Pk);s.add(o),e.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Pk);s.add(o),n.moduleRef.onDestroy(()=>{$m(n.allPlatformModules,n.moduleRef),r.unsubscribe(),s.delete(o)})}return LY(i,t,()=>{let o=e.get(Js),s=o.add(),l=e.get(yk);return l.runInitializers(),l.donePromise.then(()=>{try{let c=e.get(Hh,og);if(AB(c||og),!e.get(RY,!0))return sg(n)?e.get(Mr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(sg(n)){let f=e.get(Mr);return n.rootComponent!==void 0&&f.bootstrap(n.rootComponent),f}else return FY?.(n.moduleRef,n.allPlatformModules),n.moduleRef}finally{o.remove(s)}})})})}var FY;function LY(n,e,t){try{let i=t();return nl(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n(i)),i}}var E0=null;function jY(n=[],e){return We.create({name:e,providers:[{provide:Am,useValue:"platform"},{provide:Pk,useValue:new Set([()=>E0=null])},...n]})}function BY(n=[]){if(E0)return E0;let e=jY(n);return E0=e,DB(),VY(e),e}function VY(n){let e=n.get(i0,null);tr(n,()=>{e?.forEach(t=>t())})}var Wn=(()=>{class n{static __NG_ELEMENT_ID__=zY}return n})();function zY(n){return $Y(gi(),Ye(),(n&16)===16)}function $Y(n,e,t){if(ec(n)&&!t){let i=Bo(n.index,e);return new rc(i,i)}else if(n.type&175){let i=e[kr];return new rc(i,e)}return null}var Ok=class{constructor(){}supports(e){return ck(e)}create(e){return new Rk(e)}},UY=(n,e)=>e,Rk=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||UY}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){let s=!i||t&&t.currentIndex<QB(i,r,o)?t:i,l=QB(s,r,o),c=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(t=t._next,s.previousIndex==null)r++;else{o||(o=[]);let d=l-r,f=c-r;if(d!=f){for(let g=0;g<d;g++){let m=g<o.length?o[g]:o[g]=0,_=m+g;f<=_&&_<d&&(o[g]=m+1)}let p=s.previousIndex;o[p]=f-d}}l!==c&&e(s,l,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!ck(e))throw new ye(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,o,s;if(Array.isArray(e)){this.length=e.length;for(let l=0;l<this.length;l++)o=e[l],s=this._trackByFn(l,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,l),i=!0):(i&&(t=this._verifyReinsertion(t,o,s,l)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else r=0,sB(e,l=>{s=this._trackByFn(r,l),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,l,s,r),i=!0):(i&&(t=this._verifyReinsertion(t,l,s,r)),Object.is(t.item,l)||this._addIdentityChange(t,l)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new Nk(t,i),o,r)),e}_verifyReinsertion(e,t,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new I0),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new I0),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Nk=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Fk=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},I0=class{map=new Map;put(e){let t=e.trackById,i=this.map.get(t);i||(i=new Fk,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function QB(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function XB(){return new D0([new Ok])}var D0=(()=>{class n{factories;static \u0275prov=ce({token:n,providedIn:"root",factory:XB});constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||XB()),deps:[[n,new MT,new Km]]}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new ye(901,!1)}}return n})();function oV(n){mn(8);try{let{rootComponent:e,appProviders:t,platformProviders:i}=n,r=BY(i),o=[Dk({}),{provide:Fo,useExisting:HB},c2,...t||[]],s=new Wm({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1});return NY({r3Injector:s.injector,platformInjector:r,rootComponent:e})}catch(e){return Promise.reject(e)}finally{mn(9)}}function Vn(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function jk(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}var Mk=Symbol("NOT_SET"),sV=new Set,HY=S(b({},fm),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,value:Mk,cleanup:null,consumerMarkedDirty(){if(this.sequence.impl.executing){if(this.sequence.lastPhase===null||this.sequence.lastPhase<this.phase)return;this.sequence.erroredOrDestroyed=!0}this.sequence.scheduler.notify(7)},phaseFn(n){if(this.sequence.lastPhase=this.phase,!this.dirty)return this.signal;if(this.dirty=!1,this.value!==Mk&&!au(this))return this.signal;try{for(let r of this.cleanup??sV)r()}finally{this.cleanup?.clear()}let e=[];n!==void 0&&e.push(n),e.push(this.registerCleanupFn);let t=Va(this),i;try{i=this.userFn.apply(null,e)}finally{$l(this,t)}return(this.value===Mk||!this.equal(this.value,i))&&(this.value=i,this.version++),this.signal}}),Lk=class extends Gm{scheduler;lastPhase=null;nodes=[void 0,void 0,void 0,void 0];constructor(e,t,i,r,o,s=null){super(e,[void 0,void 0,void 0,void 0],i,!1,o,s),this.scheduler=r;for(let l of _k){let c=t[l];if(c===void 0)continue;let d=Object.create(HY);d.sequence=this,d.phase=l,d.userFn=c,d.dirty=!0,d.signal=()=>(zl(d),d.value),d.signal[pi]=d,d.registerCleanupFn=f=>(d.cleanup??=new Set).add(f),this.nodes[l]=d,this.hooks[l]=f=>d.phaseFn(f)}}afterRun(){super.afterRun(),this.lastPhase=null}destroy(){super.destroy();for(let e of this.nodes)for(let t of e?.cleanup??sV)t()}};function aV(n,e){let t=e?.injector??D(We),i=t.get(Fo),r=t.get(p0),o=t.get(sc,null,{optional:!0});r.impl??=t.get(vk);let s=n;typeof s=="function"&&(s={mixedReadWrite:n});let l=t.get(Su,null,{optional:!0}),c=new Lk(r.impl,[s.earlyRead,s.write,s.mixedReadWrite,s.read],l?.view,i,t.get(Ui),o?.snapshot(null));return r.impl.register(c),c}function T0(n,e){let t=Ka(n),i=e.elementInjector||wh();return new Pu(t).create(i,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}var uV=null;function $o(){return uV}function Bk(n){uV??=n}var ug=class{},Vk=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:()=>D(dV),providedIn:"platform"})}return n})();var dV=(()=>{class n extends Vk{_location;_history;_doc=D(Qe);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return $o().getBaseHref(this._doc)}onPopState(t){let i=$o().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=$o().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function hV(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function lV(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function uc(n){return n&&n[0]!=="?"?`?${n}`:n}var k0=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:()=>D(pV),providedIn:"root"})}return n})(),fV=new oe(""),pV=(()=>{class n extends k0{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??D(Qe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return hV(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+uc(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+uc(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+uc(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(Se(Vk),Se(fV,8))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dc=(()=>{class n{_subject=new ve;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=GY(lV(cV(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+uc(i))}normalize(t){return n.stripTrailingSlash(WY(this._basePath,cV(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+uc(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+uc(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=uc;static joinWithSlash=hV;static stripTrailingSlash=lV;static \u0275fac=function(i){return new(i||n)(Se(k0))};static \u0275prov=ce({token:n,factory:()=>qY(),providedIn:"root"})}return n})();function qY(){return new dc(Se(k0))}function WY(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function cV(n){return n.replace(/\/index.html$/,"")}function GY(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Yk=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(Yk||{});var dr=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(dr||{}),En=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(En||{}),Yr=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Yr||{}),Qr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function yV(n){return Kr(n)[Jn.LocaleId]}function wV(n,e,t){let i=Kr(n),r=[i[Jn.DayPeriodsFormat],i[Jn.DayPeriodsStandalone]],o=Uo(r,e);return Uo(o,t)}function xV(n,e,t){let i=Kr(n),r=[i[Jn.DaysFormat],i[Jn.DaysStandalone]],o=Uo(r,e);return Uo(o,t)}function CV(n,e,t){let i=Kr(n),r=[i[Jn.MonthsFormat],i[Jn.MonthsStandalone]],o=Uo(r,e);return Uo(o,t)}function EV(n,e){let i=Kr(n)[Jn.Eras];return Uo(i,e)}function dg(n,e){let t=Kr(n);return Uo(t[Jn.DateFormat],e)}function hg(n,e){let t=Kr(n);return Uo(t[Jn.TimeFormat],e)}function fg(n,e){let i=Kr(n)[Jn.DateTimeFormat];return Uo(i,e)}function aa(n,e){let t=Kr(n),i=t[Jn.NumberSymbols][e];if(typeof i>"u"){if(e===Qr.CurrencyDecimal)return t[Jn.NumberSymbols][Qr.Decimal];if(e===Qr.CurrencyGroup)return t[Jn.NumberSymbols][Qr.Group]}return i}function IV(n,e){return Kr(n)[Jn.NumberFormats][e]}function SV(n){if(!n[Jn.ExtraData])throw new ye(2303,!1)}function DV(n){let e=Kr(n);return SV(e),(e[Jn.ExtraData][2]||[]).map(i=>typeof i=="string"?zk(i):[zk(i[0]),zk(i[1])])}function TV(n,e,t){let i=Kr(n);SV(i);let r=[i[Jn.ExtraData][0],i[Jn.ExtraData][1]],o=Uo(r,e)||[];return Uo(o,t)||[]}function Uo(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new ye(2304,!1)}function zk(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var ZY=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,A0={},KY=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function kV(n,e,t,i){let r=rQ(n);e=ol(t,e)||e;let s=[],l;for(;e;)if(l=KY.exec(e),l){s=s.concat(l.slice(1));let f=s.pop();if(!f)break;e=f}else{s.push(e);break}let c=r.getTimezoneOffset();i&&(c=MV(i,c),r=iQ(r,i));let d="";return s.forEach(f=>{let p=tQ(f);d+=p?p(r,t,c):f==="''"?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function N0(n,e,t){let i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function ol(n,e){let t=yV(n);if(A0[t]??={},A0[t][e])return A0[t][e];let i="";switch(e){case"shortDate":i=dg(n,Yr.Short);break;case"mediumDate":i=dg(n,Yr.Medium);break;case"longDate":i=dg(n,Yr.Long);break;case"fullDate":i=dg(n,Yr.Full);break;case"shortTime":i=hg(n,Yr.Short);break;case"mediumTime":i=hg(n,Yr.Medium);break;case"longTime":i=hg(n,Yr.Long);break;case"fullTime":i=hg(n,Yr.Full);break;case"short":let r=ol(n,"shortTime"),o=ol(n,"shortDate");i=M0(fg(n,Yr.Short),[r,o]);break;case"medium":let s=ol(n,"mediumTime"),l=ol(n,"mediumDate");i=M0(fg(n,Yr.Medium),[s,l]);break;case"long":let c=ol(n,"longTime"),d=ol(n,"longDate");i=M0(fg(n,Yr.Long),[c,d]);break;case"full":let f=ol(n,"fullTime"),p=ol(n,"fullDate");i=M0(fg(n,Yr.Full),[f,p]);break}return i&&(A0[t][e]=i),i}function M0(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return e!=null&&i in e?e[i]:t})),n}function us(n,e,t="-",i,r){let o="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return i&&(s=s.slice(s.length-e)),o+s}function YY(n,e){return us(n,3).substring(0,e)}function bi(n,e,t=0,i=!1,r=!1){return function(o,s){let l=QY(n,o);if((t>0||l>-t)&&(l+=t),n===3)l===0&&t===-12&&(l=12);else if(n===6)return YY(l,e);let c=aa(s,Qr.MinusSign);return us(l,e,c,i,r)}}function QY(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new ye(2301,!1)}}function Pn(n,e,t=dr.Format,i=!1){return function(r,o){return XY(r,o,n,e,t,i)}}function XY(n,e,t,i,r,o){switch(t){case 2:return CV(e,r,i)[n.getMonth()];case 1:return xV(e,r,i)[n.getDay()];case 0:let s=n.getHours(),l=n.getMinutes();if(o){let d=DV(e),f=TV(e,r,i),p=d.findIndex(g=>{if(Array.isArray(g)){let[m,_]=g,y=s>=m.hours&&l>=m.minutes,w=s<_.hours||s===_.hours&&l<_.minutes;if(m.hours<_.hours){if(y&&w)return!0}else if(y||w)return!0}else if(g.hours===s&&g.minutes===l)return!0;return!1});if(p!==-1)return f[p]}return wV(e,r,i)[s<12?0:1];case 3:return EV(e,i)[n.getFullYear()<=0?0:1];default:let c=t;throw new ye(2302,!1)}}function P0(n){return function(e,t,i){let r=-1*i,o=aa(t,Qr.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case 0:return(r>=0?"+":"")+us(s,2,o)+us(Math.abs(r%60),2,o);case 1:return"GMT"+(r>=0?"+":"")+us(s,1,o);case 2:return"GMT"+(r>=0?"+":"")+us(s,2,o)+":"+us(Math.abs(r%60),2,o);case 3:return i===0?"Z":(r>=0?"+":"")+us(s,2,o)+":"+us(Math.abs(r%60),2,o);default:throw new ye(2302,!1)}}}var JY=0,R0=4;function eQ(n){let e=N0(n,JY,1).getDay();return N0(n,0,1+(e<=R0?R0:R0+7)-e)}function AV(n){let e=n.getDay(),t=e===0?-3:R0-e;return N0(n.getFullYear(),n.getMonth(),n.getDate()+t)}function $k(n,e=!1){return function(t,i){let r;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();r=1+Math.floor((s+o)/7)}else{let o=AV(t),s=eQ(o.getFullYear()),l=o.getTime()-s.getTime();r=1+Math.round(l/6048e5)}return us(r,n,aa(i,Qr.MinusSign))}}function O0(n,e=!1){return function(t,i){let o=AV(t).getFullYear();return us(o,n,aa(i,Qr.MinusSign),e)}}var Uk={};function tQ(n){if(Uk[n])return Uk[n];let e;switch(n){case"G":case"GG":case"GGG":e=Pn(3,En.Abbreviated);break;case"GGGG":e=Pn(3,En.Wide);break;case"GGGGG":e=Pn(3,En.Narrow);break;case"y":e=bi(0,1,0,!1,!0);break;case"yy":e=bi(0,2,0,!0,!0);break;case"yyy":e=bi(0,3,0,!1,!0);break;case"yyyy":e=bi(0,4,0,!1,!0);break;case"Y":e=O0(1);break;case"YY":e=O0(2,!0);break;case"YYY":e=O0(3);break;case"YYYY":e=O0(4);break;case"M":case"L":e=bi(1,1,1);break;case"MM":case"LL":e=bi(1,2,1);break;case"MMM":e=Pn(2,En.Abbreviated);break;case"MMMM":e=Pn(2,En.Wide);break;case"MMMMM":e=Pn(2,En.Narrow);break;case"LLL":e=Pn(2,En.Abbreviated,dr.Standalone);break;case"LLLL":e=Pn(2,En.Wide,dr.Standalone);break;case"LLLLL":e=Pn(2,En.Narrow,dr.Standalone);break;case"w":e=$k(1);break;case"ww":e=$k(2);break;case"W":e=$k(1,!0);break;case"d":e=bi(2,1);break;case"dd":e=bi(2,2);break;case"c":case"cc":e=bi(7,1);break;case"ccc":e=Pn(1,En.Abbreviated,dr.Standalone);break;case"cccc":e=Pn(1,En.Wide,dr.Standalone);break;case"ccccc":e=Pn(1,En.Narrow,dr.Standalone);break;case"cccccc":e=Pn(1,En.Short,dr.Standalone);break;case"E":case"EE":case"EEE":e=Pn(1,En.Abbreviated);break;case"EEEE":e=Pn(1,En.Wide);break;case"EEEEE":e=Pn(1,En.Narrow);break;case"EEEEEE":e=Pn(1,En.Short);break;case"a":case"aa":case"aaa":e=Pn(0,En.Abbreviated);break;case"aaaa":e=Pn(0,En.Wide);break;case"aaaaa":e=Pn(0,En.Narrow);break;case"b":case"bb":case"bbb":e=Pn(0,En.Abbreviated,dr.Standalone,!0);break;case"bbbb":e=Pn(0,En.Wide,dr.Standalone,!0);break;case"bbbbb":e=Pn(0,En.Narrow,dr.Standalone,!0);break;case"B":case"BB":case"BBB":e=Pn(0,En.Abbreviated,dr.Format,!0);break;case"BBBB":e=Pn(0,En.Wide,dr.Format,!0);break;case"BBBBB":e=Pn(0,En.Narrow,dr.Format,!0);break;case"h":e=bi(3,1,-12);break;case"hh":e=bi(3,2,-12);break;case"H":e=bi(3,1);break;case"HH":e=bi(3,2);break;case"m":e=bi(4,1);break;case"mm":e=bi(4,2);break;case"s":e=bi(5,1);break;case"ss":e=bi(5,2);break;case"S":e=bi(6,1);break;case"SS":e=bi(6,2);break;case"SSS":e=bi(6,3);break;case"Z":case"ZZ":case"ZZZ":e=P0(0);break;case"ZZZZZ":e=P0(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=P0(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=P0(2);break;default:return null}return Uk[n]=e,e}function MV(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function nQ(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function iQ(n,e,t){let r=n.getTimezoneOffset(),o=MV(e,r);return nQ(n,-1*(o-r))}function rQ(n){if(mV(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,o=1,s=1]=n.split("-").map(l=>+l);return N0(r,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(ZY))return oQ(i)}let e=new Date(n);if(!mV(e))throw new ye(2302,!1);return e}function oQ(n){let e=new Date(0),t=0,i=0,r=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,l=Number(n[5]||0)-i,c=Number(n[6]||0),d=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,l,c,d),e}function mV(n){return n instanceof Date&&!isNaN(n.valueOf())}var sQ=/^(\d+)?\.((\d+)(-(\d+))?)?$/,gV=22,F0=".",pg="0",aQ=";",lQ=",",Hk="#";function cQ(n,e,t,i,r,o,s=!1){let l="",c=!1;if(!isFinite(n))l=aa(t,Qr.Infinity);else{let d=hQ(n);s&&(d=dQ(d));let f=e.minInt,p=e.minFrac,g=e.maxFrac;if(o){let k=o.match(sQ);if(k===null)throw new ye(2306,!1);let O=k[1],j=k[3],q=k[5];O!=null&&(f=qk(O)),j!=null&&(p=qk(j)),q!=null?g=qk(q):j!=null&&p>g&&(g=p)}fQ(d,p,g);let m=d.digits,_=d.integerLen,y=d.exponent,w=[];for(c=m.every(k=>!k);_<f;_++)m.unshift(0);for(;_<0;_++)m.unshift(0);_>0?w=m.splice(_,m.length):(w=m,m=[0]);let I=[];for(m.length>=e.lgSize&&I.unshift(m.splice(-e.lgSize,m.length).join(""));m.length>e.gSize;)I.unshift(m.splice(-e.gSize,m.length).join(""));m.length&&I.unshift(m.join("")),l=I.join(aa(t,i)),w.length&&(l+=aa(t,r)+w.join("")),y&&(l+=aa(t,Qr.Exponential)+"+"+y)}return n<0&&!c?l=e.negPre+l+e.negSuf:l=e.posPre+l+e.posSuf,l}function PV(n,e,t){let i=IV(e,Yk.Decimal),r=uQ(i,aa(e,Qr.MinusSign));return cQ(n,r,e,Qr.Group,Qr.Decimal,t)}function uQ(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(aQ),r=i[0],o=i[1],s=r.indexOf(F0)!==-1?r.split(F0):[r.substring(0,r.lastIndexOf(pg)+1),r.substring(r.lastIndexOf(pg)+1)],l=s[0],c=s[1]||"";t.posPre=l.substring(0,l.indexOf(Hk));for(let f=0;f<c.length;f++){let p=c.charAt(f);p===pg?t.minFrac=t.maxFrac=f+1:p===Hk?t.maxFrac=f+1:t.posSuf+=p}let d=l.split(lQ);if(t.gSize=d[1]?d[1].length:0,t.lgSize=d[2]||d[1]?(d[2]||d[1]).length:0,o){let f=r.length-t.posPre.length-t.posSuf.length,p=o.indexOf(Hk);t.negPre=o.substring(0,p).replace(/'/g,""),t.negSuf=o.slice(p+f).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function dQ(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function hQ(n){let e=Math.abs(n)+"",t=0,i,r,o,s,l;for((r=e.indexOf(F0))>-1&&(e=e.replace(F0,"")),(o=e.search(/e/i))>0?(r<0&&(r=o),r+=+e.slice(o+1),e=e.substring(0,o)):r<0&&(r=e.length),o=0;e.charAt(o)===pg;o++);if(o===(l=e.length))i=[0],r=1;else{for(l--;e.charAt(l)===pg;)l--;for(r-=o,i=[],s=0;o<=l;o++,s++)i[s]=Number(e.charAt(o))}return r>gV&&(i=i.splice(0,gV-1),t=r-1,r=1),{digits:i,exponent:t,integerLen:r}}function fQ(n,e,t){if(e>t)throw new ye(2307,!1);let i=n.digits,r=i.length-n.integerLen,o=Math.min(Math.max(e,r),t),s=o+n.integerLen,l=i[s];if(s>0){i.splice(Math.max(n.integerLen,s));for(let p=s;p<i.length;p++)i[p]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,s=o+1),i[0]=0;for(let p=1;p<s;p++)i[p]=0}if(l>=5)if(s-1<0){for(let p=0;p>s;p--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[s-1]++;for(;r<Math.max(0,o);r++)i.push(0);let c=o!==0,d=e+n.integerLen,f=i.reduceRight(function(p,g,m,_){return g=g+p,_[m]=g<10?g:g-10,c&&(_[m]===0&&m>=d?_.pop():c=!1),g>=10?1:0},0);f&&(i.unshift(f),n.integerLen++)}function qk(n){let e=parseInt(n);if(isNaN(e))throw new ye(2305,!1);return e}var Wk=/\s+/,_V=[],mg=(()=>{class n{_ngEl;_renderer;initialClasses=_V;rawClass;stateMap=new Map;constructor(t,i){this._ngEl=t,this._renderer=i}set klass(t){this.initialClasses=t!=null?t.trim().split(Wk):_V}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Wk):t}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let i of t)this._updateState(i,!0);else if(t!=null)for(let i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){let r=this.stateMap.get(t);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){t=t.trim(),t.length>0&&t.split(Wk).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(Ce(Ue),Ce(Tn))};static \u0275dir=Te({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var L0=class{$implicit;ngForOf;index;count;constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},hc=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,o,s)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new L0(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(o===null?void 0:o);else if(o!==null){let l=i.get(o);i.move(l,s),vV(l,r)}});for(let r=0,o=i.length;r<o;r++){let l=i.get(r).context;l.index=r,l.count=o,l.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);vV(o,r)})}static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(Ce(Mi),Ce(lr),Ce(D0))};static \u0275dir=Te({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function vV(n,e){n.context.$implicit=e.item}var ds=(()=>{class n{_viewContainer;_context=new j0;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,i){this._viewContainer=t,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){bV(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){bV(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(Ce(Mi),Ce(lr))};static \u0275dir=Te({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),j0=class{$implicit=null;ngIf=null};function bV(n,e){if(n&&!n.createEmbeddedView)throw new ye(2020,!1)}var Gk=class{_viewContainerRef;_templateRef;_created=!1;constructor(e,t){this._viewContainerRef=e,this._templateRef=t}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}},B0=(()=>{class n{_defaultViews=[];_defaultUsed=!1;_caseCount=0;_lastCaseCheckIndex=0;_lastCasesMatched=!1;_ngSwitch;set ngSwitch(t){this._ngSwitch=t,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){let i=t===this._ngSwitch;return this._lastCasesMatched||=i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(let i of this._defaultViews)i.enforceState(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Te({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}})}return n})(),Qk=(()=>{class n{ngSwitch;_view;ngSwitchCase;constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new Gk(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static \u0275fac=function(i){return new(i||n)(Ce(Mi),Ce(lr),Ce(B0,9))};static \u0275dir=Te({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}})}return n})();var Xk=(()=>{class n{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(t){this._viewContainerRef=t}ngOnChanges(t){if(this._shouldRecreateView(t)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(t,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static \u0275fac=function(i){return new(i||n)(Ce(Mi))};static \u0275dir=Te({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[jn]})}return n})();function Jk(n,e){return new ye(2100,!1)}var Zk=class{createSubscription(e,t,i){return Or(()=>e.subscribe({next:t,error:i}))}dispose(e){Or(()=>e.unsubscribe())}},Kk=class{createSubscription(e,t,i){return e.then(r=>t?.(r),r=>i?.(r)),{unsubscribe:()=>{t=null,i=null}}}dispose(e){e.unsubscribe()}},pQ=new Kk,mQ=new Zk,eA=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=D(Zr);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i),i=>this.applicationErrorHandler(i))}_selectStrategy(t){if(nl(t))return pQ;if(g0(t))return mQ;throw Jk(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(i){return new(i||n)(Ce(Wn,16))};static \u0275pipe=qn({name:"async",type:n,pure:!1})}return n})();var gQ="mediumDate",OV=new oe(""),RV=new oe(""),tA=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,i,r){this.locale=t,this.defaultTimezone=i,this.defaultOptions=r}transform(t,i,r,o){if(t==null||t===""||t!==t)return null;try{let s=i??this.defaultOptions?.dateFormat??gQ,l=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return kV(t,s,o||this.locale,l)}catch(s){throw Jk(n,s.message)}}static \u0275fac=function(i){return new(i||n)(Ce(Hh,16),Ce(OV,24),Ce(RV,24))};static \u0275pipe=qn({name:"date",type:n,pure:!0})}return n})();var nA=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=qn({name:"json",type:n,pure:!1})}return n})();var iA=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,i,r){if(!_Q(t))return null;r||=this._locale;try{let o=vQ(t);return PV(o,r,i)}catch(o){throw Jk(n,o.message)}}static \u0275fac=function(i){return new(i||n)(Ce(Hh,16))};static \u0275pipe=qn({name:"number",type:n,pure:!0})}return n})();function _Q(n){return!(n==null||n===""||n!==n)}function vQ(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new ye(2309,!1);return n}var hr=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=$e({type:n});static \u0275inj=Ve({})}return n})();function gg(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,o]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var Fu=class{};var rA="browser";function sl(n){return n===rA}var z0=new oe(""),cA=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r,o){return this._findPluginFor(i).addEventListener(t,i,r,o)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new ye(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(Se(z0),Se(De))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),vg=class{_doc;constructor(e){this._doc=e}manager},oA="ng-app-id";function NV(n){for(let e of n)e.remove()}function FV(n,e){let t=e.createElement("style");return t.textContent=n,t}function bQ(n,e,t,i){let r=n.head?.querySelectorAll(`style[${oA}="${e}"],link[${oA}="${e}"]`);if(r)for(let o of r)o.removeAttribute(oA),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function aA(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var uA=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,bQ(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(let r of t)this.addUsage(r,this.inline,FV);i?.forEach(r=>this.addUsage(r,this.external,aA))}removeStyles(t,i){for(let r of t)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,i,r){let o=i.get(t);o?o.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(t,this.doc)))})}removeUsage(t,i){let r=i.get(t);r&&(r.usage--,r.usage<=0&&(NV(r.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])NV(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(t,FV(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(t,aA(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(Se(Qe),Se(jh),Se(Bh,8),Se(ia))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),sA={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},dA=/%COMP%/g;var jV="%COMP%",yQ=`_nghost-${jV}`,wQ=`_ngcontent-${jV}`,xQ=!0,CQ=new oe("",{providedIn:"root",factory:()=>xQ});function EQ(n){return wQ.replace(dA,n)}function IQ(n){return yQ.replace(dA,n)}function BV(n,e){return e.map(t=>t.replace(dA,n))}var hA=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,r,o,s,l,c,d=null,f=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=l,this.ngZone=c,this.nonce=d,this.tracingService=f,this.platformIsServer=!1,this.defaultRenderer=new bg(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(t,i);return r instanceof V0?r.applyToHost(t):r instanceof yg&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,l=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(i.encapsulation){case Xa.Emulated:o=new V0(c,d,i,this.appId,f,s,l,p,g);break;case Xa.ShadowDom:return new lA(c,d,t,i,s,l,this.nonce,p,g);default:o=new yg(c,d,i,f,s,l,p,g);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(Se(cA),Se(uA),Se(jh),Se(CQ),Se(Qe),Se(ia),Se(De),Se(Bh),Se(sc,8))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),bg=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,r,o){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(sA[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(LV(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(LV(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new ye(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let o=sA[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=sA[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(ta.DashCase|ta.Important)?e.style.setProperty(t,i,r&ta.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&ta.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,r){if(typeof e=="string"&&(e=$o().getGlobalEventTarget(this.doc,e),!e))throw new ye(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,r)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function LV(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var lA=class extends bg{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,i,r,o,s,l,c,d){super(e,o,s,c,d),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=r.styles;f=BV(r.id,f);for(let g of f){let m=document.createElement("style");l&&m.setAttribute("nonce",l),m.textContent=g,this.shadowRoot.appendChild(m)}let p=r.getExternalStyles?.();if(p)for(let g of p){let m=aA(g,o);l&&m.setAttribute("nonce",l),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},yg=class extends bg{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,r,o,s,l,c,d){super(e,o,s,l,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r;let f=i.styles;this.styles=d?BV(d,f):f,this.styleUrls=i.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},V0=class extends yg{contentAttr;hostAttr;constructor(e,t,i,r,o,s,l,c,d){let f=r+"-"+i.id;super(e,t,i,o,s,l,c,d,f),this.contentAttr=EQ(f),this.hostAttr=IQ(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}};var $0=class n extends ug{supportsDOMEvents=!0;static makeCurrent(){Bk(new n)}onAndCancel(e,t,i,r){return e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=SQ();return t==null?null:DQ(t)}resetBaseElement(){wg=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return gg(document.cookie,e)}},wg=null;function SQ(){return wg=wg||document.head.querySelector("base"),wg?wg.getAttribute("href"):null}function DQ(n){return new URL(n,document.baseURI).pathname}var TQ=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),zV=(()=>{class n extends vg{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r,o){return t.addEventListener(i,r,o),()=>this.removeEventListener(t,i,r,o)}removeEventListener(t,i,r,o){return t.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||n)(Se(Qe))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),VV=["alt","control","meta","shift"],kQ={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},AQ={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},$V=(()=>{class n extends vg{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r,o){let s=n.parseEventName(i),l=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>$o().onAndCancel(t,s.domEventName,l,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),s="code."),VV.forEach(d=>{let f=i.indexOf(d);f>-1&&(i.splice(f,1),s+=d+".")}),s+=o,i.length!=0||o.length===0)return null;let c={};return c.domEventName=r,c.fullKey=s,c}static matchEventFullKeyCode(t,i){let r=kQ[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),VV.forEach(s=>{if(s!==r){let l=AQ[s];l(t)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(Se(Qe))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})();function fA(n,e){return oV(b({rootComponent:n},MQ(e)))}function MQ(n){return{appProviders:[...FQ,...n?.providers??[]],platformProviders:NQ}}function PQ(){$0.makeCurrent()}function OQ(){return new zi}function RQ(){return NT(document),document}var NQ=[{provide:ia,useValue:rA},{provide:i0,useValue:PQ,multi:!0},{provide:Qe,useFactory:RQ}];var FQ=[{provide:Am,useValue:"root"},{provide:zi,useFactory:OQ},{provide:z0,useClass:zV,multi:!0,deps:[Qe]},{provide:z0,useClass:$V,multi:!0,deps:[Qe]},hA,uA,cA,{provide:_i,useExisting:hA},{provide:Fu,useClass:TQ},[]];var Zh=class{},xg=class{},fc=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),o=t.slice(i+1).trim();this.addHeaderEntry(r,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.addHeaderEntry(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(l=>o.indexOf(l)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let i=e.toLowerCase();this.maybeSetNormalizedName(e,i),this.headers.has(i)?this.headers.get(i).push(t):this.headers.set(i,[t])}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var H0=class{encodeKey(e){return UV(e)}encodeValue(e){return UV(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function LQ(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,l]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],c=t.get(s)||[];c.push(l),t.set(s,c)}),t}var jQ=/%(\d[a-f0-9])/gi,BQ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function UV(n){return encodeURIComponent(n).replace(jQ,(e,t)=>BQ[t]??e)}function U0(n){return`${n}`}var al=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new H0,e.fromString){if(e.fromObject)throw new ye(2805,!1);this.map=LQ(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(U0):[U0(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(U0(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(U0(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var q0=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function VQ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function HV(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function qV(n){return typeof Blob<"u"&&n instanceof Blob}function WV(n){return typeof FormData<"u"&&n instanceof FormData}function zQ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var GV="Content-Type",ZV="Accept",YV="X-Request-URL",QV="text/plain",XV="application/json",$Q=`${XV}, ${QV}, */*`,Wh=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,i,r){this.url=t,this.method=e.toUpperCase();let o;if(VQ(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new Error("");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),this.transferCache=o.transferCache}if(this.headers??=new fc,this.context??=new q0,!this.params)this.params=new al,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let l=t.indexOf("?"),c=l===-1?"?":l<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||HV(this.body)||qV(this.body)||WV(this.body)||zQ(this.body)?this.body:this.body instanceof al?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||WV(this.body)?null:qV(this.body)?this.body.type||null:HV(this.body)?null:typeof this.body=="string"?QV:this.body instanceof al?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?XV:null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.priority||this.priority,l=e.cache||this.cache,c=e.mode||this.mode,d=e.redirect||this.redirect,f=e.credentials||this.credentials,p=e.transferCache??this.transferCache,g=e.timeout??this.timeout,m=e.body!==void 0?e.body:this.body,_=e.withCredentials??this.withCredentials,y=e.reportProgress??this.reportProgress,w=e.headers||this.headers,I=e.params||this.params,k=e.context??this.context;return e.setHeaders!==void 0&&(w=Object.keys(e.setHeaders).reduce((O,j)=>O.set(j,e.setHeaders[j]),w)),e.setParams&&(I=Object.keys(e.setParams).reduce((O,j)=>O.set(j,e.setParams[j]),I)),new n(t,i,m,{params:I,headers:w,context:k,reportProgress:y,responseType:r,withCredentials:_,transferCache:p,keepalive:o,cache:l,priority:s,timeout:g,mode:c,redirect:d,credentials:f})}},Lu=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Lu||{}),Kh=class{headers;status;statusText;url;ok;type;constructor(e,t=200,i="OK"){this.headers=e.headers||new fc,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},W0=class n extends Kh{constructor(e={}){super(e)}type=Lu.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Cg=class n extends Kh{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Lu.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Gh=class extends Kh{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},UQ=200,HQ=204;function pA(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect}}var pc=(()=>{class n{handler;constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof Wh)o=t;else{let c;r.headers instanceof fc?c=r.headers:c=new fc(r.headers);let d;r.params&&(r.params instanceof al?d=r.params:d=new al({fromObject:r.params})),o=new Wh(t,i,r.body!==void 0?r.body:null,{headers:c,context:r.context,params:d,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache,keepalive:r.keepalive,priority:r.priority,cache:r.cache,mode:r.mode,redirect:r.redirect,credentials:r.credentials})}let s=Re(o).pipe(ql(c=>this.handler.handle(c)));if(t instanceof Wh||r.observe==="events")return s;let l=s.pipe(It(c=>c instanceof Cg));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return l.pipe(Pe(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new ye(2806,!1);return c.body}));case"blob":return l.pipe(Pe(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new ye(2807,!1);return c.body}));case"text":return l.pipe(Pe(c=>{if(c.body!==null&&typeof c.body!="string")throw new ye(2808,!1);return c.body}));case"json":default:return l.pipe(Pe(c=>c.body))}case"response":return l;default:throw new ye(2809,!1)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new al().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,pA(r,i))}post(t,i,r={}){return this.request("POST",t,pA(r,i))}put(t,i,r={}){return this.request("PUT",t,pA(r,i))}static \u0275fac=function(i){return new(i||n)(Se(Zh))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})();var qQ=new oe("");function JV(n,e){return e(n)}function WQ(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}function GQ(n,e,t){return(i,r)=>tr(t,()=>e(i,o=>n(o,r)))}var ez=new oe(""),gA=new oe(""),tz=new oe(""),_A=new oe("",{providedIn:"root",factory:()=>!0});function ZQ(){let n=null;return(e,t)=>{n===null&&(n=(D(ez,{optional:!0})??[]).reduceRight(WQ,JV));let i=D(Du);if(D(_A)){let o=i.add();return n(e,t).pipe(qs(o))}else return n(e,t)}}var G0=(()=>{class n extends Zh{backend;injector;chain=null;pendingTasks=D(Du);contributeToStability=D(_A);constructor(t,i){super(),this.backend=t,this.injector=i}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(gA),...this.injector.get(tz,[])]));this.chain=i.reduceRight((r,o)=>GQ(r,o,this.injector),JV)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(qs(i))}else return this.chain(t,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(Se(xg),Se(Fn))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})();var KQ=/^\)\]\}',?\n/,YQ=RegExp(`^${YV}:`,"m");function QQ(n){return"responseURL"in n&&n.responseURL?n.responseURL:YQ.test(n.getAllResponseHeaders())?n.getResponseHeader(YV):null}var mA=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new ye(-2800,!1);let i=this.xhrFactory;return Re(null).pipe(mi(()=>new ot(o=>{let s=i.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((w,I)=>s.setRequestHeader(w,I.join(","))),t.headers.has(ZV)||s.setRequestHeader(ZV,$Q),!t.headers.has(GV)){let w=t.detectContentTypeHeader();w!==null&&s.setRequestHeader(GV,w)}if(t.timeout&&(s.timeout=t.timeout),t.responseType){let w=t.responseType.toLowerCase();s.responseType=w!=="json"?w:"text"}let l=t.serializeBody(),c=null,d=()=>{if(c!==null)return c;let w=s.statusText||"OK",I=new fc(s.getAllResponseHeaders()),k=QQ(s)||t.url;return c=new W0({headers:I,status:s.status,statusText:w,url:k}),c},f=()=>{let{headers:w,status:I,statusText:k,url:O}=d(),j=null;I!==HQ&&(j=typeof s.response>"u"?s.responseText:s.response),I===0&&(I=j?UQ:0);let q=I>=200&&I<300;if(t.responseType==="json"&&typeof j=="string"){let V=j;j=j.replace(KQ,"");try{j=j!==""?JSON.parse(j):null}catch(re){j=V,q&&(q=!1,j={error:re,text:j})}}q?(o.next(new Cg({body:j,headers:w,status:I,statusText:k,url:O||void 0})),o.complete()):o.error(new Gh({error:j,headers:w,status:I,statusText:k,url:O||void 0}))},p=w=>{let{url:I}=d(),k=new Gh({error:w,status:s.status||0,statusText:s.statusText||"Unknown Error",url:I||void 0});o.error(k)},g=p;t.timeout&&(g=w=>{let{url:I}=d(),k=new Gh({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:I||void 0});o.error(k)});let m=!1,_=w=>{m||(o.next(d()),m=!0);let I={type:Lu.DownloadProgress,loaded:w.loaded};w.lengthComputable&&(I.total=w.total),t.responseType==="text"&&s.responseText&&(I.partialText=s.responseText),o.next(I)},y=w=>{let I={type:Lu.UploadProgress,loaded:w.loaded};w.lengthComputable&&(I.total=w.total),o.next(I)};return s.addEventListener("load",f),s.addEventListener("error",p),s.addEventListener("timeout",g),s.addEventListener("abort",p),t.reportProgress&&(s.addEventListener("progress",_),l!==null&&s.upload&&s.upload.addEventListener("progress",y)),s.send(l),o.next({type:Lu.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",f),s.removeEventListener("timeout",g),t.reportProgress&&(s.removeEventListener("progress",_),l!==null&&s.upload&&s.upload.removeEventListener("progress",y)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(i){return new(i||n)(Se(Fu))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})(),nz=new oe(""),XQ="XSRF-TOKEN",JQ=new oe("",{providedIn:"root",factory:()=>XQ}),eX="X-XSRF-TOKEN",tX=new oe("",{providedIn:"root",factory:()=>eX}),Eg=class{},nX=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,i){this.doc=t,this.cookieName=i}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=gg(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(i){return new(i||n)(Se(Qe),Se(JQ))};static \u0275prov=ce({token:n,factory:n.\u0275fac})}return n})();function iX(n,e){let t=n.url.toLowerCase();if(!D(nz)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let i=D(Eg).getToken(),r=D(tX);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var vA=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(vA||{});function rX(n,e){return{\u0275kind:n,\u0275providers:e}}function bA(...n){let e=[pc,mA,G0,{provide:Zh,useExisting:G0},{provide:xg,useFactory:()=>D(qQ,{optional:!0})??D(mA)},{provide:gA,useValue:iX,multi:!0},{provide:nz,useValue:!0},{provide:Eg,useClass:nX}];for(let t of n)e.push(...t.\u0275providers);return Ql(e)}var KV=new oe("");function yA(){return rX(vA.LegacyInterceptors,[{provide:KV,useFactory:ZQ},{provide:gA,useExisting:KV,multi:!0}])}var iz=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(i){return new(i||n)(Se(Qe))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ig=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=Se(sX),r},providedIn:"root"})}return n})(),sX=(()=>{class n extends Ig{_doc;constructor(t){super(),this._doc=t}sanitize(t,i){if(i==null)return null;switch(t){case Hi.NONE:return i;case Hi.HTML:return oc(i,"HTML")?ra(i):$T(this._doc,String(i)).toString();case Hi.STYLE:return oc(i,"Style")?ra(i):i;case Hi.SCRIPT:if(oc(i,"Script"))return ra(i);throw new ye(5200,!1);case Hi.URL:return oc(i,"URL")?ra(i):Qm(String(i));case Hi.RESOURCE_URL:if(oc(i,"ResourceURL"))return ra(i);throw new ye(5201,!1);default:throw new ye(5202,!1)}}bypassSecurityTrustHtml(t){return LT(t)}bypassSecurityTrustStyle(t){return jT(t)}bypassSecurityTrustScript(t){return BT(t)}bypassSecurityTrustUrl(t){return VT(t)}bypassSecurityTrustResourceUrl(t){return zT(t)}static \u0275fac=function(i){return new(i||n)(Se(Qe))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var kt="primary",jg=Symbol("RouteTitle"),DA=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function tf(n){return new DA(n)}function aX(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],l=n[o];if(s[0]===":")r[s.substring(1)]=l;else if(s!==l.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function lX(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!la(n[t],e[t]))return!1;return!0}function la(n,e){let t=n?TA(n):void 0,i=e?TA(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!dz(n[r],e[r]))return!1;return!0}function TA(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function dz(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}else return n===e}function hz(n){return n.length>0?n[n.length-1]:null}function ul(n){return Jb(n)?n:nl(n)?Un(Promise.resolve(n)):Re(n)}var cX={exact:pz,subset:mz},fz={exact:uX,subset:dX,ignored:()=>!0};function rz(n,e,t){return cX[t.paths](n.root,e.root,t.matrixParams)&&fz[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function uX(n,e){return la(n,e)}function pz(n,e,t){if(!Bu(n.segments,e.segments)||!Y0(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!pz(n.children[i],e.children[i],t))return!1;return!0}function dX(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>dz(n[t],e[t]))}function mz(n,e,t){return gz(n,e,e.segments,t)}function gz(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!Bu(r,t)||e.hasChildren()||!Y0(r,t,i))}else if(n.segments.length===t.length){if(!Bu(n.segments,t)||!Y0(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!mz(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Bu(n.segments,r)||!Y0(n.segments,r,i)||!n.children[kt]?!1:gz(n.children[kt],e,o,i)}}function Y0(n,e,t){return e.every((i,r)=>fz[t](n[r].parameters,i.parameters))}var cl=class{root;queryParams;fragment;_queryParamMap;constructor(e=new cn([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=tf(this.queryParams),this._queryParamMap}toString(){return pX.serialize(this)}},cn=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Q0(this)}},ju=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=tf(this.parameters),this._parameterMap}toString(){return vz(this)}};function hX(n,e){return Bu(n,e)&&n.every((t,i)=>la(t.parameters,e[i].parameters))}function Bu(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function fX(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===kt&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==kt&&(t=t.concat(e(r,i)))}),t}var cw=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:()=>new nf,providedIn:"root"})}return n})(),nf=class{parse(e){let t=new AA(e);return new cl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Sg(e.root,!0)}`,i=_X(e.queryParams),r=typeof e.fragment=="string"?`#${mX(e.fragment)}`:"";return`${t}${i}${r}`}},pX=new nf;function Q0(n){return n.segments.map(e=>vz(e)).join("/")}function Sg(n,e){if(!n.hasChildren())return Q0(n);if(e){let t=n.children[kt]?Sg(n.children[kt],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==kt&&i.push(`${r}:${Sg(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=fX(n,(i,r)=>r===kt?[Sg(n.children[kt],!1)]:[`${r}:${Sg(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[kt]!=null?`${Q0(n)}/${t[0]}`:`${Q0(n)}/(${t.join("//")})`}}function _z(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Z0(n){return _z(n).replace(/%3B/gi,";")}function mX(n){return encodeURI(n)}function kA(n){return _z(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function X0(n){return decodeURIComponent(n)}function oz(n){return X0(n.replace(/\+/g,"%20"))}function vz(n){return`${kA(n.path)}${gX(n.parameters)}`}function gX(n){return Object.entries(n).map(([e,t])=>`;${kA(e)}=${kA(t)}`).join("")}function _X(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${Z0(t)}=${Z0(r)}`).join("&"):`${Z0(t)}=${Z0(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var vX=/^[^\/()?;#]+/;function CA(n){let e=n.match(vX);return e?e[0]:""}var bX=/^[^\/()?;=#]+/;function yX(n){let e=n.match(bX);return e?e[0]:""}var wX=/^[^=?&#]+/;function xX(n){let e=n.match(wX);return e?e[0]:""}var CX=/^[^&#]+/;function EX(n){let e=n.match(CX);return e?e[0]:""}var AA=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new cn([],{}):new cn([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[kt]=new cn(e,t)),i}parseSegment(){let e=CA(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ye(4009,!1);return this.capture(e),new ju(X0(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=yX(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=CA(this.remaining);r&&(i=r,this.capture(i))}e[X0(t)]=X0(i)}parseQueryParam(e){let t=xX(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let s=EX(this.remaining);s&&(i=s,this.capture(i))}let r=oz(t),o=oz(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=CA(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new ye(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=kt);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[kt]:new cn([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ye(4011,!1)}};function bz(n){return n.segments.length>0?new cn([],{[kt]:n}):n}function yz(n){let e={};for(let[i,r]of Object.entries(n.children)){let o=yz(r);if(i===kt&&o.segments.length===0&&o.hasChildren())for(let[s,l]of Object.entries(o.children))e[s]=l;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new cn(n.segments,e);return IX(t)}function IX(n){if(n.numberOfChildren===1&&n.children[kt]){let e=n.children[kt];return new cn(n.segments.concat(e.segments),e.children)}return n}function rf(n){return n instanceof cl}function SX(n,e,t=null,i=null){let r=wz(n);return xz(r,e,t,i)}function wz(n){let e;function t(o){let s={};for(let c of o.children){let d=t(c);s[c.outlet]=d}let l=new cn(o.url,s);return o===n&&(e=l),l}let i=t(n.root),r=bz(i);return e??r}function xz(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return EA(r,r,r,t,i);let o=DX(e);if(o.toRoot())return EA(r,r,new cn([],{}),t,i);let s=TX(o,r,n),l=s.processChildren?Tg(s.segmentGroup,s.index,o.commands):Ez(s.segmentGroup,s.index,o.commands);return EA(r,s.segmentGroup,l,t,i)}function J0(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Mg(n){return typeof n=="object"&&n!=null&&n.outlets}function EA(n,e,t,i,r){let o={};i&&Object.entries(i).forEach(([c,d])=>{o[c]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`});let s;n===e?s=t:s=Cz(n,e,t);let l=bz(yz(s));return new cl(l,o,r)}function Cz(n,e,t){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===e?i[r]=t:i[r]=Cz(o,e,t)}),new cn(n.segments,i)}var ew=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&J0(i[0]))throw new ye(4003,!1);let r=i.find(Mg);if(r&&r!==hz(i))throw new ye(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function DX(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new ew(!0,0,n);let e=0,t=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let l={};return Object.entries(o.outlets).forEach(([c,d])=>{l[c]=typeof d=="string"?d.split("/"):d}),[...r,{outlets:l}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((l,c)=>{c==0&&l==="."||(c==0&&l===""?t=!0:l===".."?e++:l!=""&&r.push(l))}),r):[...r,o]},[]);return new ew(t,e,i)}var Xh=class{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function TX(n,e,t){if(n.isAbsolute)return new Xh(e,!0,0);if(!t)return new Xh(e,!1,NaN);if(t.parent===null)return new Xh(t,!0,0);let i=J0(n.commands[0])?0:1,r=t.segments.length-1+i;return kX(t,r,n.numberOfDoubleDots)}function kX(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new ye(4005,!1);r=i.segments.length}return new Xh(i,!1,r-o)}function AX(n){return Mg(n[0])?n[0].outlets:{[kt]:n}}function Ez(n,e,t){if(n??=new cn([],{}),n.segments.length===0&&n.hasChildren())return Tg(n,e,t);let i=MX(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new cn(n.segments.slice(0,i.pathIndex),{});return o.children[kt]=new cn(n.segments.slice(i.pathIndex),n.children),Tg(o,0,r)}else return i.match&&r.length===0?new cn(n.segments,{}):i.match&&!n.hasChildren()?MA(n,e,t):i.match?Tg(n,0,r):MA(n,e,t)}function Tg(n,e,t){if(t.length===0)return new cn(n.segments,{});{let i=AX(t),r={};if(Object.keys(i).some(o=>o!==kt)&&n.children[kt]&&n.numberOfChildren===1&&n.children[kt].segments.length===0){let o=Tg(n.children[kt],e,t);return new cn(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=Ez(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new cn(n.segments,r)}}function MX(n,e,t){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;let s=n.segments[r],l=t[i];if(Mg(l))break;let c=`${l}`,d=i<t.length-1?t[i+1]:null;if(r>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!az(c,d,s))return o;i+=2}else{if(!az(c,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function MA(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let o=t[r];if(Mg(o)){let c=PX(o.outlets);return new cn(i,c)}if(r===0&&J0(t[0])){let c=n.segments[e];i.push(new ju(c.path,sz(t[0]))),r++;continue}let s=Mg(o)?o.outlets[kt]:`${o}`,l=r<t.length-1?t[r+1]:null;s&&l&&J0(l)?(i.push(new ju(s,sz(l))),r+=2):(i.push(new ju(s,{})),r++)}return new cn(i,{})}function PX(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=MA(new cn([],{}),0,i))}),e}function sz(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function az(n,e,t){return n==t.path&&la(e,t.parameters)}var kg="imperative",nr=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(nr||{}),Ho=class{id;url;constructor(e,t){this.id=e,this.url=t}},of=class extends Ho{type=nr.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},mc=class extends Ho{urlAfterRedirects;type=nr.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Xr=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(Xr||{}),tw=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(tw||{}),ll=class extends Ho{reason;code;type=nr.NavigationCancel;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},gc=class extends Ho{reason;code;type=nr.NavigationSkipped;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}},Pg=class extends Ho{error;target;type=nr.NavigationError;constructor(e,t,i,r){super(e,t),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},nw=class extends Ho{urlAfterRedirects;state;type=nr.RoutesRecognized;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},PA=class extends Ho{urlAfterRedirects;state;type=nr.GuardsCheckStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},OA=class extends Ho{urlAfterRedirects;state;shouldActivate;type=nr.GuardsCheckEnd;constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},RA=class extends Ho{urlAfterRedirects;state;type=nr.ResolveStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},NA=class extends Ho{urlAfterRedirects;state;type=nr.ResolveEnd;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},FA=class{route;type=nr.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},LA=class{route;type=nr.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},jA=class{snapshot;type=nr.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},BA=class{snapshot;type=nr.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},VA=class{snapshot;type=nr.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zA=class{snapshot;type=nr.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Og=class{},sf=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function OX(n){return!(n instanceof Og)&&!(n instanceof sf)}function RX(n,e){return n.providers&&!n._injector&&(n._injector=ig(n.providers,e,`Route: ${n.path}`)),n._injector??e}function hs(n){return n.outlet||kt}function NX(n,e){let t=n.filter(i=>hs(i)===e);return t.push(...n.filter(i=>hs(i)!==e)),t}function lf(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var $A=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return lf(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Bg(this.rootInjector)}},Bg=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new $A(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||n)(Se(Fn))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),iw=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=UA(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=UA(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=HA(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return HA(e,this._root).map(t=>t.value)}};function UA(n,e){if(n===e.value)return e;for(let t of e.children){let i=UA(n,t);if(i)return i}return null}function HA(n,e){if(n===e.value)return[e];for(let t of e.children){let i=HA(n,t);if(i.length)return i.unshift(e),i}return[]}var bo=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Qh(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var rw=class extends iw{snapshot;constructor(e,t){super(e),this.snapshot=t,JA(this,e)}toString(){return this.snapshot.toString()}};function Iz(n){let e=FX(n),t=new fn([new ju("",{})]),i=new fn({}),r=new fn({}),o=new fn({}),s=new fn(""),l=new Vu(t,i,o,s,r,kt,n,e.root);return l.snapshot=e.root,new rw(new bo(l,[]),e)}function FX(n){let e={},t={},i={},r="",o=new Jh([],e,i,r,t,kt,n,null,{});return new sw("",new bo(o,[]))}var Vu=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,r,o,s,l,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=l,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Pe(d=>d[jg]))??Re(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Pe(e=>tf(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Pe(e=>tf(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ow(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:b(b({},e.params),n.params),data:b(b({},e.data),n.data),resolve:b(b(b(b({},n.data),e.data),r?.data),n._resolvedData)}:i={params:b({},n.params),data:b({},n.data),resolve:b(b({},n.data),n._resolvedData??{})},r&&Dz(r)&&(i.resolve[jg]=r.title),i}var Jh=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[jg]}constructor(e,t,i,r,o,s,l,c,d){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=l,this.routeConfig=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=tf(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=tf(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},sw=class extends iw{url;constructor(e,t){super(t),this.url=e,JA(this,t)}toString(){return Sz(this._root)}};function JA(n,e){e.value._routerState=n,e.children.forEach(t=>JA(n,t))}function Sz(n){let e=n.children.length>0?` { ${n.children.map(Sz).join(", ")} } `:"";return`${n.value}${e}`}function IA(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,la(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),la(e.params,t.params)||n.paramsSubject.next(t.params),lX(e.url,t.url)||n.urlSubject.next(t.url),la(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function qA(n,e){let t=la(n.params,e.params)&&hX(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||qA(n.parent,e.parent))}function Dz(n){return typeof n.title=="string"||n.title===null}var LX=new oe(""),Tz=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=kt;activateEvents=new je;deactivateEvents=new je;attachEvents=new je;detachEvents=new je;routerOutletData=nV(void 0);parentContexts=D(Bg);location=D(Mi);changeDetector=D(Wn);inputBinder=D(uw,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ye(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ye(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ye(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new ye(4013,!1);this._activatedRoute=t;let r=this.location,s=t.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new WA(t,l,r.injector,this.routerOutletData);this.activated=r.createComponent(s,{index:r.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Te({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[jn]})}return n})(),WA=class{route;childContexts;parent;outletData;constructor(e,t,i,r){this.route=e,this.childContexts=t,this.parent=i,this.outletData=r}get(e,t){return e===Vu?this.route:e===Bg?this.childContexts:e===LX?this.outletData:this.parent.get(e,t)}},uw=new oe("");var kz=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Fe({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&qt(0,"router-outlet")},dependencies:[Tz],encapsulation:2})}return n})();function eM(n){let e=n.children&&n.children.map(eM),t=e?S(b({},n),{children:e}):b({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==kt&&(t.component=kz),t}function jX(n,e,t){let i=Rg(n,e._root,t?t._root:void 0);return new rw(i,e)}function Rg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=BX(n,e,t);return new bo(i,r)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(l=>Rg(n,l)),s}}let i=VX(e.value),r=e.children.map(o=>Rg(n,o));return new bo(i,r)}}function BX(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Rg(n,i,r);return Rg(n,i)})}function VX(n){return new Vu(new fn(n.url),new fn(n.params),new fn(n.queryParams),new fn(n.fragment),new fn(n.data),n.outlet,n.component,n)}var Ng=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Az="ngNavigationCancelingError";function aw(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=rf(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Mz(!1,Xr.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function Mz(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Az]=!0,t.cancellationCode=e,t}function zX(n){return Pz(n)&&rf(n.url)}function Pz(n){return!!n&&n[Az]}var $X=(n,e,t,i)=>Pe(r=>(new GA(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),GA=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),IA(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=Qh(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Qh(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),l=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:l})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Qh(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=Qh(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new zA(o.value.snapshot))}),e.children.length&&this.forwardEvent(new BA(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(IA(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let l=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(l.contexts),s.attachRef=l.componentRef,s.route=l.route.value,s.outlet&&s.outlet.attach(l.componentRef,l.route.value),IA(l.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,i)}},lw=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ef=class{component;route;constructor(e,t){this.component=e,this.route=t}};function UX(n,e,t){let i=n._root,r=e?e._root:null;return Dg(i,r,t,[i.value])}function HX(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function cf(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!HS(n)?n:e.get(n):i}function Dg(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Qh(e);return n.children.forEach(s=>{qX(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,l])=>Ag(l,t.getContext(s),r)),r}function qX(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,l=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=WX(s,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new lw(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Dg(n,e,l?l.children:null,i,r):Dg(n,e,t,i,r),c&&l&&l.outlet&&l.outlet.isActivated&&r.canDeactivateChecks.push(new ef(l.outlet.component,s))}else s&&Ag(e,l,r),r.canActivateChecks.push(new lw(i)),o.component?Dg(n,null,l?l.children:null,i,r):Dg(n,null,t,i,r);return r}function WX(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Bu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Bu(n.url,e.url)||!la(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qA(n,e)||!la(n.queryParams,e.queryParams);case"paramsChange":default:return!qA(n,e)}}function Ag(n,e,t){let i=Qh(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?e?Ag(s,e.children.getContext(o),t):Ag(s,null,t):Ag(s,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ef(e.outlet.component,r)):t.canDeactivateChecks.push(new ef(null,r)):t.canDeactivateChecks.push(new ef(null,r))}function Vg(n){return typeof n=="function"}function GX(n){return typeof n=="boolean"}function ZX(n){return n&&Vg(n.canLoad)}function KX(n){return n&&Vg(n.canActivate)}function YX(n){return n&&Vg(n.canActivateChild)}function QX(n){return n&&Vg(n.canDeactivate)}function XX(n){return n&&Vg(n.canMatch)}function Oz(n){return n instanceof $a||n?.name==="EmptyError"}var K0=Symbol("INITIAL_VALUE");function af(){return mi(n=>fh(n.map(e=>e.pipe(Kn(1),ki(K0)))).pipe(Pe(e=>{for(let t of e)if(t!==!0){if(t===K0)return K0;if(t===!1||JX(t))return t}return!0}),It(e=>e!==K0),Kn(1)))}function JX(n){return rf(n)||n instanceof Ng}function eJ(n,e){return oi(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Re(S(b({},t),{guardsResult:!0})):tJ(s,i,r,n).pipe(oi(l=>l&&GX(l)?nJ(i,o,n,e):Re(l)),Pe(l=>S(b({},t),{guardsResult:l})))})}function tJ(n,e,t,i){return Un(n).pipe(oi(r=>aJ(r.component,r.route,t,e,i)),Ws(r=>r!==!0,!0))}function nJ(n,e,t,i){return Un(e).pipe(ql(r=>Hl(rJ(r.route.parent,i),iJ(r.route,i),sJ(n,r.path,t),oJ(n,r.route,t))),Ws(r=>r!==!0,!0))}function iJ(n,e){return n!==null&&e&&e(new VA(n)),Re(!0)}function rJ(n,e){return n!==null&&e&&e(new jA(n)),Re(!0)}function oJ(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return Re(!0);let r=i.map(o=>Ua(()=>{let s=lf(e)??t,l=cf(o,s),c=KX(l)?l.canActivate(e,n):tr(s,()=>l(e,n));return ul(c).pipe(Ws())}));return Re(r).pipe(af())}function sJ(n,e,t){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>HX(s)).filter(s=>s!==null).map(s=>Ua(()=>{let l=s.guards.map(c=>{let d=lf(s.node)??t,f=cf(c,d),p=YX(f)?f.canActivateChild(i,n):tr(d,()=>f(i,n));return ul(p).pipe(Ws())});return Re(l).pipe(af())}));return Re(o).pipe(af())}function aJ(n,e,t,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Re(!0);let s=o.map(l=>{let c=lf(e)??r,d=cf(l,c),f=QX(d)?d.canDeactivate(n,e,t,i):tr(c,()=>d(n,e,t,i));return ul(f).pipe(Ws())});return Re(s).pipe(af())}function lJ(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return Re(!0);let o=r.map(s=>{let l=cf(s,n),c=ZX(l)?l.canLoad(e,t):tr(n,()=>l(e,t));return ul(c)});return Re(o).pipe(af(),Rz(i))}function Rz(n){return CS(Hn(e=>{if(typeof e!="boolean")throw aw(n,e)}),Pe(e=>e===!0))}function cJ(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return Re(!0);let o=r.map(s=>{let l=cf(s,n),c=XX(l)?l.canMatch(e,t):tr(n,()=>l(e,t));return ul(c)});return Re(o).pipe(af(),Rz(i))}var Fg=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Lg=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Yh(n){return Ul(new Fg(n))}function uJ(n){return Ul(new ye(4e3,!1))}function dJ(n){return Ul(Mz(!1,Xr.GuardRejected))}var ZA=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Re(i);if(r.numberOfChildren>1||!r.children[kt])return uJ(`${e.redirectTo}`);r=r.children[kt]}}applyRedirectCommands(e,t,i,r,o){return hJ(t,r,o).pipe(Pe(s=>{if(s instanceof cl)throw new Lg(s);let l=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,i);if(s[0]==="/")throw new Lg(l);return l}))}applyRedirectCreateUrlTree(e,t,i,r){let o=this.createSegmentGroup(e,t.root,i,r);return new cl(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let l=o.substring(1);i[r]=t[l]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){let o=this.createSegments(e,t.segments,i,r),s={};return Object.entries(t.children).forEach(([l,c])=>{s[l]=this.createSegmentGroup(e,c,i,r)}),new cn(o,s)}createSegments(e,t,i,r){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new ye(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}};function hJ(n,e,t){if(typeof n=="string")return Re(n);let i=n,{queryParams:r,fragment:o,routeConfig:s,url:l,outlet:c,params:d,data:f,title:p}=e;return ul(tr(t,()=>i({params:d,data:f,queryParams:r,fragment:o,routeConfig:s,url:l,outlet:c,title:p})))}var KA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function fJ(n,e,t,i,r){let o=Nz(n,e,t);return o.matched?(i=RX(e,i),cJ(i,e,t,r).pipe(Pe(s=>s===!0?o:b({},KA)))):Re(o)}function Nz(n,e,t){if(e.path==="**")return pJ(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?b({},KA):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||aX)(t,n,e);if(!r)return b({},KA);let o={};Object.entries(r.posParams??{}).forEach(([l,c])=>{o[l]=c.path});let s=r.consumed.length>0?b(b({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function pJ(n){return{matched:!0,parameters:n.length>0?hz(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function lz(n,e,t,i){return t.length>0&&_J(n,t,i)?{segmentGroup:new cn(e,gJ(i,new cn(t,n.children))),slicedSegments:[]}:t.length===0&&vJ(n,t,i)?{segmentGroup:new cn(n.segments,mJ(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new cn(n.segments,n.children),slicedSegments:t}}function mJ(n,e,t,i){let r={};for(let o of t)if(dw(n,e,o)&&!i[hs(o)]){let s=new cn([],{});r[hs(o)]=s}return b(b({},i),r)}function gJ(n,e){let t={};t[kt]=e;for(let i of n)if(i.path===""&&hs(i)!==kt){let r=new cn([],{});t[hs(i)]=r}return t}function _J(n,e,t){return t.some(i=>dw(n,e,i)&&hs(i)!==kt)}function vJ(n,e,t){return t.some(i=>dw(n,e,i))}function dw(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function bJ(n,e,t){return e.length===0&&!n.children[t]}var YA=class{};function yJ(n,e,t,i,r,o,s="emptyOnly"){return new QA(n,e,t,i,r,s,o).recognize()}var wJ=31,QA=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,r,o,s,l){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=l,this.applyRedirects=new ZA(this.urlSerializer,this.urlTree)}noMatchError(e){return new ye(4002,`'${e.segmentGroup}'`)}recognize(){let e=lz(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Pe(({children:t,rootSnapshot:i})=>{let r=new bo(i,t),o=new sw("",r),s=SX(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Jh([],Object.freeze({}),Object.freeze(b({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),kt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,kt,t).pipe(Pe(i=>({children:i,rootSnapshot:t})),No(i=>{if(i instanceof Lg)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Fg?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,o):this.processSegment(e,t,i,i.segments,r,!0,o).pipe(Pe(s=>s instanceof bo?[s]:[]))}processChildren(e,t,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return Un(o).pipe(ql(s=>{let l=i.children[s],c=NX(t,s);return this.processSegmentGroup(e,c,l,s,r)}),kS((s,l)=>(s.push(...l),s)),Wl(null),TS(),oi(s=>{if(s===null)return Yh(i);let l=Fz(s);return xJ(l),Re(l)}))}processSegment(e,t,i,r,o,s,l){return Un(t).pipe(ql(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,i,r,o,s,l).pipe(No(d=>{if(d instanceof Fg)return Re(null);throw d}))),Ws(c=>!!c),No(c=>{if(Oz(c))return bJ(i,r,o)?Re(new YA):Yh(i);throw c}))}processSegmentAgainstRoute(e,t,i,r,o,s,l,c){return hs(i)!==s&&(s===kt||!dw(r,o,i))?Yh(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s,c):this.allowRedirects&&l?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,s,c):Yh(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s,l){let{matched:c,parameters:d,consumedSegments:f,positionalParamSegments:p,remainingSegments:g}=Nz(t,r,o);if(!c)return Yh(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>wJ&&(this.allowRedirects=!1));let m=new Jh(o,d,Object.freeze(b({},this.urlTree.queryParams)),this.urlTree.fragment,cz(r),hs(r),r.component??r._loadedComponent??null,r,uz(r)),_=ow(m,l,this.paramsInheritanceStrategy);return m.params=Object.freeze(_.params),m.data=Object.freeze(_.data),this.applyRedirects.applyRedirectCommands(f,r.redirectTo,p,m,e).pipe(mi(w=>this.applyRedirects.lineralizeSegments(r,w)),oi(w=>this.processSegment(e,i,t,w.concat(g),s,!1,l)))}matchSegmentAgainstRoute(e,t,i,r,o,s){let l=fJ(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),l.pipe(mi(c=>c.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(mi(({routes:d})=>{let f=i._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:m}=c,_=new Jh(g,p,Object.freeze(b({},this.urlTree.queryParams)),this.urlTree.fragment,cz(i),hs(i),i.component??i._loadedComponent??null,i,uz(i)),y=ow(_,s,this.paramsInheritanceStrategy);_.params=Object.freeze(y.params),_.data=Object.freeze(y.data);let{segmentGroup:w,slicedSegments:I}=lz(t,g,m,d);if(I.length===0&&w.hasChildren())return this.processChildren(f,d,w,_).pipe(Pe(O=>new bo(_,O)));if(d.length===0&&I.length===0)return Re(new bo(_,[]));let k=hs(i)===o;return this.processSegment(f,d,w,I,k?kt:o,!0,_).pipe(Pe(O=>new bo(_,O instanceof bo?[O]:[])))}))):Yh(t)))}getChildConfig(e,t,i){return t.children?Re({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Re({routes:t._loadedRoutes,injector:t._loadedInjector}):lJ(e,t,i,this.urlSerializer).pipe(oi(r=>r?this.configLoader.loadChildren(e,t).pipe(Hn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):dJ(t))):Re({routes:[],injector:e})}};function xJ(n){n.sort((e,t)=>e.value.outlet===kt?-1:t.value.outlet===kt?1:e.value.outlet.localeCompare(t.value.outlet))}function CJ(n){let e=n.value.routeConfig;return e&&e.path===""}function Fz(n){let e=[],t=new Set;for(let i of n){if(!CJ(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=Fz(i.children);e.push(new bo(i.value,r))}return e.filter(i=>!t.has(i))}function cz(n){return n.data||{}}function uz(n){return n.resolve||{}}function EJ(n,e,t,i,r,o){return oi(s=>yJ(n,e,t,i,s.extractedUrl,r,o).pipe(Pe(({state:l,tree:c})=>S(b({},s),{targetSnapshot:l,urlAfterRedirects:c}))))}function IJ(n,e){return oi(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Re(t);let o=new Set(r.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let d of Lz(c))s.add(d);let l=0;return Un(s).pipe(ql(c=>o.has(c)?SJ(c,i,n,e):(c.data=ow(c,c.parent,n).resolve,Re(void 0))),Hn(()=>l++),_h(1),oi(c=>l===s.size?Re(t):Vi))})}function Lz(n){let e=n.children.map(t=>Lz(t)).flat();return[n,...e]}function SJ(n,e,t,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!Dz(r)&&(o[jg]=r.title),Ua(()=>(n.data=ow(n,n.parent,t).resolve,DJ(o,n,e,i).pipe(Pe(s=>(n._resolvedData=s,n.data=b(b({},n.data),s),null)))))}function DJ(n,e,t,i){let r=TA(n);if(r.length===0)return Re({});let o={};return Un(r).pipe(oi(s=>TJ(n[s],e,t,i).pipe(Ws(),Hn(l=>{if(l instanceof Ng)throw aw(new nf,l);o[s]=l}))),_h(1),Pe(()=>o),No(s=>Oz(s)?Vi:Ul(s)))}function TJ(n,e,t,i){let r=lf(e)??i,o=cf(n,r),s=o.resolve?o.resolve(e,t):tr(r,()=>o(e,t));return ul(s)}function SA(n){return mi(e=>{let t=n(e);return t?Un(t).pipe(Pe(()=>e)):Re(e)})}var jz=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===kt);return i}getResolvedTitleForRoute(t){return t.data[jg]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:()=>D(kJ),providedIn:"root"})}return n})(),kJ=(()=>{class n extends jz{title;constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(Se(iz))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hw=new oe("",{providedIn:"root",factory:()=>({})}),fw=new oe(""),Bz=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=D(Sk);loadComponent(t,i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Re(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=ul(tr(t,()=>i.loadComponent())).pipe(Pe(Vz),Hn(s=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=s}),qs(()=>{this.componentLoaders.delete(i)})),o=new ch(r,()=>new ve).pipe(lh());return this.componentLoaders.set(i,o),o}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Re({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=AJ(i,this.compiler,t,this.onLoadEndListener).pipe(qs(()=>{this.childrenLoaders.delete(i)})),s=new ch(o,()=>new ve).pipe(lh());return this.childrenLoaders.set(i,s),s}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function AJ(n,e,t,i){return ul(tr(t,()=>n.loadChildren())).pipe(Pe(Vz),oi(r=>r instanceof h0||Array.isArray(r)?Re(r):Un(e.compileModuleAsync(r))),Pe(r=>{i&&i(n);let o,s,l=!1;return Array.isArray(r)?(s=r,l=!0):(o=r.create(t).injector,s=o.get(fw,[],{optional:!0,self:!0}).flat()),{routes:s.map(eM),injector:o}}))}function MJ(n){return n&&typeof n=="object"&&"default"in n}function Vz(n){return MJ(n)?n.default:n}var tM=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:()=>D(PJ),providedIn:"root"})}return n})(),PJ=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zz=new oe("");var $z=new oe(""),Uz=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ve;transitionAbortWithErrorSubject=new ve;configLoader=D(Bz);environmentInjector=D(Fn);destroyRef=D(Ui);urlSerializer=D(cw);rootContexts=D(Bg);location=D(dc);inputBindingEnabled=D(uw,{optional:!0})!==null;titleStrategy=D(jz);options=D(hw,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=D(tM);createViewTransition=D(zz,{optional:!0});navigationErrorHandler=D($z,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Re(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=r=>this.events.next(new FA(r)),i=r=>this.events.next(new LA(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(S(b({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:i}))}setupNavigations(t){return this.transitions=new fn(null),this.transitions.pipe(It(i=>i!==null),mi(i=>{let r=!1;return Re(i).pipe(mi(o=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Xr.SupersededByNewNavigation),Vi;this.currentTransition=i,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?S(b({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&l!=="reload"){let c="";return this.events.next(new gc(o.id,this.urlSerializer.serialize(o.rawUrl),c,tw.IgnoredSameUrlNavigation)),o.resolve(!1),Vi}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Re(o).pipe(mi(c=>(this.events.next(new of(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?Vi:Promise.resolve(c))),EJ(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Hn(c=>{i.targetSnapshot=c.targetSnapshot,i.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=S(b({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let d=new nw(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:d,source:f,restoredState:p,extras:g}=o,m=new of(c,this.urlSerializer.serialize(d),f,p);this.events.next(m);let _=Iz(this.rootComponentType).snapshot;return this.currentTransition=i=S(b({},o),{targetSnapshot:_,urlAfterRedirects:d,extras:S(b({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=d,Re(i)}else{let c="";return this.events.next(new gc(o.id,this.urlSerializer.serialize(o.extractedUrl),c,tw.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Vi}}),Hn(o=>{let s=new PA(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),Pe(o=>(this.currentTransition=i=S(b({},o),{guards:UX(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),i)),eJ(this.environmentInjector,o=>this.events.next(o)),Hn(o=>{if(i.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw aw(this.urlSerializer,o.guardsResult);let s=new OA(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),It(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Xr.GuardRejected),!1)),SA(o=>{if(o.guards.canActivateChecks.length!==0)return Re(o).pipe(Hn(s=>{let l=new RA(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(l)}),mi(s=>{let l=!1;return Re(s).pipe(IJ(this.paramsInheritanceStrategy,this.environmentInjector),Hn({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(s,"",Xr.NoDataFromResolver)}}))}),Hn(s=>{let l=new NA(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(l)}))}),SA(o=>{let s=l=>{let c=[];if(l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent){let d=lf(l)??this.environmentInjector;c.push(this.configLoader.loadComponent(d,l.routeConfig).pipe(Hn(f=>{l.component=f}),Pe(()=>{})))}for(let d of l.children)c.push(...s(d));return c};return fh(s(o.targetSnapshot.root)).pipe(Wl(null),Kn(1))}),SA(()=>this.afterPreactivation()),mi(()=>{let{currentSnapshot:o,targetSnapshot:s}=i,l=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return l?Un(l).pipe(Pe(()=>i)):Re(i)}),Pe(o=>{let s=jX(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=i=S(b({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,i}),Hn(()=>{this.events.next(new Og)}),$X(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Kn(1),wn(new ot(o=>{let s=i.abortController.signal,l=()=>o.next();return s.addEventListener("abort",l),()=>s.removeEventListener("abort",l)}).pipe(It(()=>!r&&!i.targetRouterState),Hn(()=>{this.cancelNavigationTransition(i,i.abortController.signal.reason+"",Xr.Aborted)}))),Hn({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new mc(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),wn(this.transitionAbortWithErrorSubject.pipe(Hn(o=>{throw o}))),qs(()=>{r||this.cancelNavigationTransition(i,"",Xr.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),No(o=>{if(this.destroyed)return i.resolve(!1),Vi;if(r=!0,Pz(o))this.events.next(new ll(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode)),zX(o)?this.events.next(new sf(o.url,o.navigationBehaviorOptions)):i.resolve(!1);else{let s=new Pg(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);try{let l=tr(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(l instanceof Ng){let{message:c,cancellationCode:d}=aw(this.urlSerializer,l);this.events.next(new ll(i.id,this.urlSerializer.serialize(i.extractedUrl),c,d)),this.events.next(new sf(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(l){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(l)}}return Vi}))}))}cancelNavigationTransition(t,i,r){let o=new ll(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function OJ(n){return n!==kg}var RJ=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:()=>D(NJ),providedIn:"root"})}return n})(),XA=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},NJ=(()=>{class n extends XA{static \u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})();static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Hz=(()=>{class n{urlSerializer=D(cw);options=D(hw,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=D(dc);urlHandlingStrategy=D(tM);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new cl;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:i,targetBrowserUrl:r}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,i):i,s=r??o;return s instanceof cl?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:i,initialUrl:r}){i&&t?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=t):this.rawUrlTree=r}routerState=Iz(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:()=>D(FJ),providedIn:"root"})}return n})(),FJ=(()=>{class n extends Hz{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{t(i.url,i.state,"popstate")})})}handleRouterEvent(t,i){t instanceof of?this.updateStateMemento():t instanceof gc?this.commitTransition(i):t instanceof nw?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof Og?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof ll&&t.code!==Xr.SupersededByNewNavigation&&t.code!==Xr.Redirect?this.restoreHistory(i):t instanceof Pg?this.restoreHistory(i,!0):t instanceof mc&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:i,id:r}){let{replaceUrl:o,state:s}=i;if(this.location.isCurrentPathEqualTo(t)||o){let l=this.browserPageId,c=b(b({},s),this.generateNgRouterState(r,l));this.location.replaceState(t,"",c)}else{let l=b(b({},s),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(t,"",l)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})();static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qz(n,e){n.events.pipe(It(t=>t instanceof mc||t instanceof ll||t instanceof Pg||t instanceof gc),Pe(t=>t instanceof mc||t instanceof gc?0:(t instanceof ll?t.code===Xr.Redirect||t.code===Xr.SupersededByNewNavigation:!1)?2:1),It(t=>t!==2),Kn(1)).subscribe(()=>{e()})}var LJ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},jJ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},nM=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=D(m0);stateManager=D(Hz);options=D(hw,{optional:!0})||{};pendingTasks=D(Js);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=D(Uz);urlSerializer=D(cw);location=D(dc);urlHandlingStrategy=D(tM);injector=D(Fn);_events=new ve;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=D(RJ);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=D(fw,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!D(uw,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Pt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof ll&&i.code!==Xr.Redirect&&i.code!==Xr.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof mc)this.navigated=!0;else if(i instanceof sf){let s=i.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),c=b({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||OJ(r.source)},s);this.scheduleNavigation(l,kg,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}OX(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortWithErrorSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),kg,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i,r)=>{this.navigateToSyncWithBrowser(t,r,i)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let c=b({},r);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let l=this.parseUrl(t);this.scheduleNavigation(l,i,s,o).catch(c=>{this.disposed||this.injector.get(Zr)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(eM),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:l,preserveFragment:c}=i,d=c?this.currentUrlTree.fragment:s,f=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":f=b(b({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let p;try{let g=r?r.snapshot:this.routerState.snapshot.root;p=wz(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return xz(p,t,f,d??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=rf(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,kg,null,i)}navigate(t,i={skipLocationChange:!1}){return BJ(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=b({},LJ):i===!1?r=b({},jJ):r=i,rf(t))return rz(this.currentUrlTree,t,r);let o=this.parseUrl(t);return rz(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let l,c,d;s?(l=s.resolve,c=s.reject,d=s.promise):d=new Promise((p,g)=>{l=p,c=g});let f=this.pendingTasks.add();return qz(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:l,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(p=>Promise.reject(p))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function BJ(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ye(4008,!1)}var VJ=new oe("");function iM(n,...e){return Ql([{provide:fw,multi:!0,useValue:n},[],{provide:Vu,useFactory:zJ,deps:[nM]},{provide:_0,multi:!0,useFactory:$J},e.map(t=>t.\u0275providers)])}function zJ(n){return n.routerState.root}function $J(){let n=D(We);return e=>{let t=n.get(Mr);if(e!==t.components[0])return;let i=n.get(nM),r=n.get(UJ);n.get(HJ)===1&&i.initialNavigation(),n.get(qJ,null,{optional:!0})?.setUpPreloading(),n.get(VJ,null,{optional:!0})?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var UJ=new oe("",{factory:()=>new ve}),HJ=new oe("",{providedIn:"root",factory:()=>1});var qJ=new oe("");var Wz=[];function Gz(n,e){let i=!e?.manualCleanup?e?.injector?.get(Ui)??D(Ui):null,r=GJ(e?.equal),o;e?.requireSync?o=rn({kind:0},{equal:r}):o=rn({kind:1,value:e?.initialValue},{equal:r});let s,l=n.subscribe({next:c=>o.set({kind:1,value:c}),error:c=>{o.set({kind:2,error:c}),s?.()},complete:()=>{s?.()}});if(e?.requireSync&&o().kind===0)throw new ye(601,!1);return s=i?.onDestroy(l.unsubscribe.bind(l)),Rr(()=>{let c=o();switch(c.kind){case 1:return c.value;case 2:throw c.error;case 0:throw new ye(601,!1)}},{equal:e?.equal})}function GJ(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}function aM(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var $u=aM();function Jz(n){$u=n}var Ug={exec:()=>null};function un(n,e=""){let t=typeof n=="string"?n:n.source,i={replace:(r,o)=>{let s=typeof o=="string"?o:o.source;return s=s.replace(Nr.caret,"$1"),t=t.replace(r,s),i},getRegex:()=>new RegExp(t,e)};return i}var Nr={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},ZJ=/^(?:[ \t]*(?:\n|$))+/,KJ=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,YJ=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Hg=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,QJ=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,lM=/(?:[*+-]|\d{1,9}[.)])/,e$=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,t$=un(e$).replace(/bull/g,lM).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),XJ=un(e$).replace(/bull/g,lM).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),cM=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,JJ=/^[^\n]+/,uM=/(?!\s*\])(?:\\.|[^\[\]\\])+/,eee=un(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",uM).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),tee=un(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,lM).getRegex(),vw="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",dM=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,nee=un("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",dM).replace("tag",vw).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),n$=un(cM).replace("hr",Hg).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",vw).getRegex(),iee=un(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",n$).getRegex(),hM={blockquote:iee,code:KJ,def:eee,fences:YJ,heading:QJ,hr:Hg,html:nee,lheading:t$,list:tee,newline:ZJ,paragraph:n$,table:Ug,text:JJ},Zz=un("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Hg).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",vw).getRegex(),ree=S(b({},hM),{lheading:XJ,table:Zz,paragraph:un(cM).replace("hr",Hg).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Zz).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",vw).getRegex()}),oee=S(b({},hM),{html:un(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",dM).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ug,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:un(cM).replace("hr",Hg).replace("heading",` *#{1,6} *[^
]`).replace("lheading",t$).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()}),see=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,aee=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,i$=/^( {2,}|\\)\n(?!\s*$)/,lee=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,bw=/[\p{P}\p{S}]/u,fM=/[\s\p{P}\p{S}]/u,r$=/[^\s\p{P}\p{S}]/u,cee=un(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,fM).getRegex(),o$=/(?!~)[\p{P}\p{S}]/u,uee=/(?!~)[\s\p{P}\p{S}]/u,dee=/(?:[^\s\p{P}\p{S}]|~)/u,hee=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,s$=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,fee=un(s$,"u").replace(/punct/g,bw).getRegex(),pee=un(s$,"u").replace(/punct/g,o$).getRegex(),a$="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",mee=un(a$,"gu").replace(/notPunctSpace/g,r$).replace(/punctSpace/g,fM).replace(/punct/g,bw).getRegex(),gee=un(a$,"gu").replace(/notPunctSpace/g,dee).replace(/punctSpace/g,uee).replace(/punct/g,o$).getRegex(),_ee=un("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,r$).replace(/punctSpace/g,fM).replace(/punct/g,bw).getRegex(),vee=un(/\\(punct)/,"gu").replace(/punct/g,bw).getRegex(),bee=un(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),yee=un(dM).replace("(?:-->|$)","-->").getRegex(),wee=un("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",yee).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),gw=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,xee=un(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",gw).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),l$=un(/^!?\[(label)\]\[(ref)\]/).replace("label",gw).replace("ref",uM).getRegex(),c$=un(/^!?\[(ref)\](?:\[\])?/).replace("ref",uM).getRegex(),Cee=un("reflink|nolink(?!\\()","g").replace("reflink",l$).replace("nolink",c$).getRegex(),pM={_backpedal:Ug,anyPunctuation:vee,autolink:bee,blockSkip:hee,br:i$,code:aee,del:Ug,emStrongLDelim:fee,emStrongRDelimAst:mee,emStrongRDelimUnd:_ee,escape:see,link:xee,nolink:c$,punctuation:cee,reflink:l$,reflinkSearch:Cee,tag:wee,text:lee,url:Ug},Eee=S(b({},pM),{link:un(/^!?\[(label)\]\((.*?)\)/).replace("label",gw).getRegex(),reflink:un(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",gw).getRegex()}),rM=S(b({},pM),{emStrongRDelimAst:gee,emStrongLDelim:pee,url:un(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),Iee=S(b({},rM),{br:un(i$).replace("{2,}","*").getRegex(),text:un(rM.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),pw={normal:hM,gfm:ree,pedantic:oee},zg={normal:pM,gfm:rM,breaks:Iee,pedantic:Eee},See={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Kz=n=>See[n];function ca(n,e){if(e){if(Nr.escapeTest.test(n))return n.replace(Nr.escapeReplace,Kz)}else if(Nr.escapeTestNoEncode.test(n))return n.replace(Nr.escapeReplaceNoEncode,Kz);return n}function Yz(n){try{n=encodeURI(n).replace(Nr.percentDecode,"%")}catch{return null}return n}function Qz(n,e){let t=n.replace(Nr.findPipe,(o,s,l)=>{let c=!1,d=s;for(;--d>=0&&l[d]==="\\";)c=!c;return c?"|":" |"}),i=t.split(Nr.splitPipe),r=0;if(i[0].trim()||i.shift(),i.length>0&&!i.at(-1)?.trim()&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(Nr.slashPipe,"|");return i}function $g(n,e,t){let i=n.length;if(i===0)return"";let r=0;for(;r<i;){let o=n.charAt(i-r-1);if(o===e&&!t)r++;else if(o!==e&&t)r++;else break}return n.slice(0,i-r)}function Dee(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let i=0;i<n.length;i++)if(n[i]==="\\")i++;else if(n[i]===e[0])t++;else if(n[i]===e[1]&&(t--,t<0))return i;return t>0?-2:-1}function Xz(n,e,t,i,r){let o=e.href,s=e.title||null,l=n[1].replace(r.other.outputLinkReplace,"$1");i.state.inLink=!0;let c={type:n[0].charAt(0)==="!"?"image":"link",raw:t,href:o,title:s,text:l,tokens:i.inlineTokens(l)};return i.state.inLink=!1,c}function Tee(n,e,t){let i=n.match(t.other.indentCodeCompensation);if(i===null)return e;let r=i[1];return e.split(`
`).map(o=>{let s=o.match(t.other.beginningSpace);if(s===null)return o;let[l]=s;return l.length>=r.length?o.slice(r.length):o}).join(`
`)}var _w=class{options;rules;lexer;constructor(n){this.options=n||$u}space(n){let e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){let e=this.rules.block.code.exec(n);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:$g(t,`
`)}}}fences(n){let e=this.rules.block.fences.exec(n);if(e){let t=e[0],i=Tee(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:i}}}heading(n){let e=this.rules.block.heading.exec(n);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let i=$g(t,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(t=i.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(n){let e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:$g(e[0],`
`)}}blockquote(n){let e=this.rules.block.blockquote.exec(n);if(e){let t=$g(e[0],`
`).split(`
`),i="",r="",o=[];for(;t.length>0;){let s=!1,l=[],c;for(c=0;c<t.length;c++)if(this.rules.other.blockquoteStart.test(t[c]))l.push(t[c]),s=!0;else if(!s)l.push(t[c]);else break;t=t.slice(c);let d=l.join(`
`),f=d.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${d}`:d,r=r?`${r}
${f}`:f;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(f,o,!0),this.lexer.state.top=p,t.length===0)break;let g=o.at(-1);if(g?.type==="code")break;if(g?.type==="blockquote"){let m=g,_=m.raw+`
`+t.join(`
`),y=this.blockquote(_);o[o.length-1]=y,i=i.substring(0,i.length-m.raw.length)+y.raw,r=r.substring(0,r.length-m.text.length)+y.text;break}else if(g?.type==="list"){let m=g,_=m.raw+`
`+t.join(`
`),y=this.list(_);o[o.length-1]=y,i=i.substring(0,i.length-g.raw.length)+y.raw,r=r.substring(0,r.length-m.raw.length)+y.raw,t=_.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:o,text:r}}}list(n){let e=this.rules.block.list.exec(n);if(e){let t=e[1].trim(),i=t.length>1,r={type:"list",raw:"",ordered:i,start:i?+t.slice(0,-1):"",loose:!1,items:[]};t=i?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=i?t:"[*+-]");let o=this.rules.other.listItemRegex(t),s=!1;for(;n;){let c=!1,d="",f="";if(!(e=o.exec(n))||this.rules.block.hr.test(n))break;d=e[0],n=n.substring(d.length);let p=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,I=>" ".repeat(3*I.length)),g=n.split(`
`,1)[0],m=!p.trim(),_=0;if(this.options.pedantic?(_=2,f=p.trimStart()):m?_=e[1].length+1:(_=e[2].search(this.rules.other.nonSpaceChar),_=_>4?1:_,f=p.slice(_),_+=e[1].length),m&&this.rules.other.blankLine.test(g)&&(d+=g+`
`,n=n.substring(g.length+1),c=!0),!c){let I=this.rules.other.nextBulletRegex(_),k=this.rules.other.hrRegex(_),O=this.rules.other.fencesBeginRegex(_),j=this.rules.other.headingBeginRegex(_),q=this.rules.other.htmlBeginRegex(_);for(;n;){let V=n.split(`
`,1)[0],re;if(g=V,this.options.pedantic?(g=g.replace(this.rules.other.listReplaceNesting,"  "),re=g):re=g.replace(this.rules.other.tabCharGlobal,"    "),O.test(g)||j.test(g)||q.test(g)||I.test(g)||k.test(g))break;if(re.search(this.rules.other.nonSpaceChar)>=_||!g.trim())f+=`
`+re.slice(_);else{if(m||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||O.test(p)||j.test(p)||k.test(p))break;f+=`
`+g}!m&&!g.trim()&&(m=!0),d+=V+`
`,n=n.substring(V.length+1),p=re.slice(_)}}r.loose||(s?r.loose=!0:this.rules.other.doubleBlankLine.test(d)&&(s=!0));let y=null,w;this.options.gfm&&(y=this.rules.other.listIsTask.exec(f),y&&(w=y[0]!=="[ ] ",f=f.replace(this.rules.other.listReplaceTask,""))),r.items.push({type:"list_item",raw:d,task:!!y,checked:w,loose:!1,text:f,tokens:[]}),r.raw+=d}let l=r.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let c=0;c<r.items.length;c++)if(this.lexer.state.top=!1,r.items[c].tokens=this.lexer.blockTokens(r.items[c].text,[]),!r.loose){let d=r.items[c].tokens.filter(p=>p.type==="space"),f=d.length>0&&d.some(p=>this.rules.other.anyLine.test(p.raw));r.loose=f}if(r.loose)for(let c=0;c<r.items.length;c++)r.items[c].loose=!0;return r}}html(n){let e=this.rules.block.html.exec(n);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(n){let e=this.rules.block.def.exec(n);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:i,title:r}}}table(n){let e=this.rules.block.table.exec(n);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let t=Qz(e[1]),i=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===i.length){for(let s of i)this.rules.other.tableAlignRight.test(s)?o.align.push("right"):this.rules.other.tableAlignCenter.test(s)?o.align.push("center"):this.rules.other.tableAlignLeft.test(s)?o.align.push("left"):o.align.push(null);for(let s=0;s<t.length;s++)o.header.push({text:t[s],tokens:this.lexer.inline(t[s]),header:!0,align:o.align[s]});for(let s of r)o.rows.push(Qz(s,o.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:o.align[c]})));return o}}lheading(n){let e=this.rules.block.lheading.exec(n);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(n){let e=this.rules.block.paragraph.exec(n);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(n){let e=this.rules.block.text.exec(n);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(n){let e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(n){let e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(n){let e=this.rules.inline.link.exec(n);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let o=$g(t.slice(0,-1),"\\");if((t.length-o.length)%2===0)return}else{let o=Dee(e[2],"()");if(o===-2)return;if(o>-1){let l=(e[0].indexOf("!")===0?5:4)+e[1].length+o;e[2]=e[2].substring(0,o),e[0]=e[0].substring(0,l).trim(),e[3]=""}}let i=e[2],r="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(i);o&&(i=o[1],r=o[3])}else r=e[3]?e[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?i=i.slice(1):i=i.slice(1,-1)),Xz(e,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(n,e){let t;if((t=this.rules.inline.reflink.exec(n))||(t=this.rules.inline.nolink.exec(n))){let i=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=e[i.toLowerCase()];if(!r){let o=t[0].charAt(0);return{type:"text",raw:o,text:o}}return Xz(t,r,t[0],this.lexer,this.rules)}}emStrong(n,e,t=""){let i=this.rules.inline.emStrongLDelim.exec(n);if(!i||i[3]&&t.match(this.rules.other.unicodeAlphaNumeric))return;if(!(i[1]||i[2]||"")||!t||this.rules.inline.punctuation.exec(t)){let o=[...i[0]].length-1,s,l,c=o,d=0,f=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,e=e.slice(-1*n.length+o);(i=f.exec(e))!=null;){if(s=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!s)continue;if(l=[...s].length,i[3]||i[4]){c+=l;continue}else if((i[5]||i[6])&&o%3&&!((o+l)%3)){d+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+d);let p=[...i[0]][0].length,g=n.slice(0,o+i.index+p+l);if(Math.min(o,l)%2){let _=g.slice(1,-1);return{type:"em",raw:g,text:_,tokens:this.lexer.inlineTokens(_)}}let m=g.slice(2,-2);return{type:"strong",raw:g,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(n){let e=this.rules.inline.code.exec(n);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(t),r=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return i&&r&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(n){let e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){let e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(n){let e=this.rules.inline.autolink.exec(n);if(e){let t,i;return e[2]==="@"?(t=e[1],i="mailto:"+t):(t=e[1],i=t),{type:"link",raw:e[0],text:t,href:i,tokens:[{type:"text",raw:t,text:t}]}}}url(n){let e;if(e=this.rules.inline.url.exec(n)){let t,i;if(e[2]==="@")t=e[0],i="mailto:"+t;else{let r;do r=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(r!==e[0]);t=e[0],e[1]==="www."?i="http://"+e[0]:i=e[0]}return{type:"link",raw:e[0],text:t,href:i,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(n){let e=this.rules.inline.text.exec(n);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},dl=class oM{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||$u,this.options.tokenizer=this.options.tokenizer||new _w,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:Nr,block:pw.normal,inline:zg.normal};this.options.pedantic?(t.block=pw.pedantic,t.inline=zg.pedantic):this.options.gfm&&(t.block=pw.gfm,this.options.breaks?t.inline=zg.breaks:t.inline=zg.gfm),this.tokenizer.rules=t}static get rules(){return{block:pw,inline:zg}}static lex(e,t){return new oM(t).lex(e)}static lexInline(e,t){return new oM(t).inlineTokens(e)}lex(e){e=e.replace(Nr.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let i=this.inlineQueue[t];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],i=!1){for(this.options.pedantic&&(e=e.replace(Nr.tabCharGlobal,"    ").replace(Nr.spaceLine,""));e;){let r;if(this.options.extensions?.block?.some(s=>(r=s.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))continue;if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length);let s=t.at(-1);r.raw.length===1&&s!==void 0?s.raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length);let s=t.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=`
`+r.raw,s.text+=`
`+r.text,this.inlineQueue.at(-1).src=s.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length);let s=t.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=`
`+r.raw,s.text+=`
`+r.raw,this.inlineQueue.at(-1).src=s.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}let o=e;if(this.options.extensions?.startBlock){let s=1/0,l=e.slice(1),c;this.options.extensions.startBlock.forEach(d=>{c=d.call({lexer:this},l),typeof c=="number"&&c>=0&&(s=Math.min(s,c))}),s<1/0&&s>=0&&(o=e.substring(0,s+1))}if(this.state.top&&(r=this.tokenizer.paragraph(o))){let s=t.at(-1);i&&s?.type==="paragraph"?(s.raw+=`
`+r.raw,s.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):t.push(r),i=o.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length);let s=t.at(-1);s?.type==="text"?(s.raw+=`
`+r.raw,s.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):t.push(r);continue}if(e){let s="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(s);break}else throw new Error(s)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let i=e,r=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)l.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,r.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(r=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let o=!1,s="";for(;e;){o||(s=""),o=!1;let l;if(this.options.extensions?.inline?.some(d=>(l=d.call({lexer:this},e,t))?(e=e.substring(l.raw.length),t.push(l),!0):!1))continue;if(l=this.tokenizer.escape(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.tag(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.link(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(l.raw.length);let d=t.at(-1);l.type==="text"&&d?.type==="text"?(d.raw+=l.raw,d.text+=l.text):t.push(l);continue}if(l=this.tokenizer.emStrong(e,i,s)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.codespan(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.br(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.del(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.autolink(e)){e=e.substring(l.raw.length),t.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(e))){e=e.substring(l.raw.length),t.push(l);continue}let c=e;if(this.options.extensions?.startInline){let d=1/0,f=e.slice(1),p;this.options.extensions.startInline.forEach(g=>{p=g.call({lexer:this},f),typeof p=="number"&&p>=0&&(d=Math.min(d,p))}),d<1/0&&d>=0&&(c=e.substring(0,d+1))}if(l=this.tokenizer.inlineText(c)){e=e.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(s=l.raw.slice(-1)),o=!0;let d=t.at(-1);d?.type==="text"?(d.raw+=l.raw,d.text+=l.text):t.push(l);continue}if(e){let d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return t}},_c=class{options;parser;constructor(n){this.options=n||$u}space(n){return""}code({text:n,lang:e,escaped:t}){let i=(e||"").match(Nr.notSpaceStart)?.[0],r=n.replace(Nr.endingNewline,"")+`
`;return i?'<pre><code class="language-'+ca(i)+'">'+(t?r:ca(r,!0))+`</code></pre>
`:"<pre><code>"+(t?r:ca(r,!0))+`</code></pre>
`}blockquote({tokens:n}){return`<blockquote>
${this.parser.parse(n)}</blockquote>
`}html({text:n}){return n}heading({tokens:n,depth:e}){return`<h${e}>${this.parser.parseInline(n)}</h${e}>
`}hr(n){return`<hr>
`}list(n){let e=n.ordered,t=n.start,i="";for(let s=0;s<n.items.length;s++){let l=n.items[s];i+=this.listitem(l)}let r=e?"ol":"ul",o=e&&t!==1?' start="'+t+'"':"";return"<"+r+o+`>
`+i+"</"+r+`>
`}listitem(n){let e="";if(n.task){let t=this.checkbox({checked:!!n.checked});n.loose?n.tokens[0]?.type==="paragraph"?(n.tokens[0].text=t+" "+n.tokens[0].text,n.tokens[0].tokens&&n.tokens[0].tokens.length>0&&n.tokens[0].tokens[0].type==="text"&&(n.tokens[0].tokens[0].text=t+" "+ca(n.tokens[0].tokens[0].text),n.tokens[0].tokens[0].escaped=!0)):n.tokens.unshift({type:"text",raw:t+" ",text:t+" ",escaped:!0}):e+=t+" "}return e+=this.parser.parse(n.tokens,!!n.loose),`<li>${e}</li>
`}checkbox({checked:n}){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>
`}table(n){let e="",t="";for(let r=0;r<n.header.length;r++)t+=this.tablecell(n.header[r]);e+=this.tablerow({text:t});let i="";for(let r=0;r<n.rows.length;r++){let o=n.rows[r];t="";for(let s=0;s<o.length;s++)t+=this.tablecell(o[s]);i+=this.tablerow({text:t})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+i+`</table>
`}tablerow({text:n}){return`<tr>
${n}</tr>
`}tablecell(n){let e=this.parser.parseInline(n.tokens),t=n.header?"th":"td";return(n.align?`<${t} align="${n.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:n}){return`<strong>${this.parser.parseInline(n)}</strong>`}em({tokens:n}){return`<em>${this.parser.parseInline(n)}</em>`}codespan({text:n}){return`<code>${ca(n,!0)}</code>`}br(n){return"<br>"}del({tokens:n}){return`<del>${this.parser.parseInline(n)}</del>`}link({href:n,title:e,tokens:t}){let i=this.parser.parseInline(t),r=Yz(n);if(r===null)return i;n=r;let o='<a href="'+n+'"';return e&&(o+=' title="'+ca(e)+'"'),o+=">"+i+"</a>",o}image({href:n,title:e,text:t,tokens:i}){i&&(t=this.parser.parseInline(i,this.parser.textRenderer));let r=Yz(n);if(r===null)return ca(t);n=r;let o=`<img src="${n}" alt="${t}"`;return e&&(o+=` title="${ca(e)}"`),o+=">",o}text(n){return"tokens"in n&&n.tokens?this.parser.parseInline(n.tokens):"escaped"in n&&n.escaped?n.text:ca(n.text)}},mM=class{strong({text:n}){return n}em({text:n}){return n}codespan({text:n}){return n}del({text:n}){return n}html({text:n}){return n}text({text:n}){return n}link({text:n}){return""+n}image({text:n}){return""+n}br(){return""}},hl=class sM{options;renderer;textRenderer;constructor(e){this.options=e||$u,this.options.renderer=this.options.renderer||new _c,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new mM}static parse(e,t){return new sM(t).parse(e)}static parseInline(e,t){return new sM(t).parseInline(e)}parse(e,t=!0){let i="";for(let r=0;r<e.length;r++){let o=e[r];if(this.options.extensions?.renderers?.[o.type]){let l=o,c=this.options.extensions.renderers[l.type].call({parser:this},l);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(l.type)){i+=c||"";continue}}let s=o;switch(s.type){case"space":{i+=this.renderer.space(s);continue}case"hr":{i+=this.renderer.hr(s);continue}case"heading":{i+=this.renderer.heading(s);continue}case"code":{i+=this.renderer.code(s);continue}case"table":{i+=this.renderer.table(s);continue}case"blockquote":{i+=this.renderer.blockquote(s);continue}case"list":{i+=this.renderer.list(s);continue}case"html":{i+=this.renderer.html(s);continue}case"paragraph":{i+=this.renderer.paragraph(s);continue}case"text":{let l=s,c=this.renderer.text(l);for(;r+1<e.length&&e[r+1].type==="text";)l=e[++r],c+=`
`+this.renderer.text(l);t?i+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c,escaped:!0}]}):i+=c;continue}default:{let l='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return i}parseInline(e,t=this.renderer){let i="";for(let r=0;r<e.length;r++){let o=e[r];if(this.options.extensions?.renderers?.[o.type]){let l=this.options.extensions.renderers[o.type].call({parser:this},o);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){i+=l||"";continue}}let s=o;switch(s.type){case"escape":{i+=t.text(s);break}case"html":{i+=t.html(s);break}case"link":{i+=t.link(s);break}case"image":{i+=t.image(s);break}case"strong":{i+=t.strong(s);break}case"em":{i+=t.em(s);break}case"codespan":{i+=t.codespan(s);break}case"br":{i+=t.br(s);break}case"del":{i+=t.del(s);break}case"text":{i+=t.text(s);break}default:{let l='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return i}},mw=class{options;block;constructor(e){this.options=e||$u}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?dl.lex:dl.lexInline}provideParser(){return this.block?hl.parse:hl.parseInline}},kee=class{defaults=aM();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=hl;Renderer=_c;TextRenderer=mM;Lexer=dl;Tokenizer=_w;Hooks=mw;constructor(...n){this.use(...n)}walkTokens(n,e){let t=[];for(let i of n)switch(t=t.concat(e.call(this,i)),i.type){case"table":{let r=i;for(let o of r.header)t=t.concat(this.walkTokens(o.tokens,e));for(let o of r.rows)for(let s of o)t=t.concat(this.walkTokens(s.tokens,e));break}case"list":{let r=i;t=t.concat(this.walkTokens(r.items,e));break}default:{let r=i;this.defaults.extensions?.childTokens?.[r.type]?this.defaults.extensions.childTokens[r.type].forEach(o=>{let s=r[o].flat(1/0);t=t.concat(this.walkTokens(s,e))}):r.tokens&&(t=t.concat(this.walkTokens(r.tokens,e)))}}return t}use(...n){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(t=>{let i=b({},t);if(i.async=this.defaults.async||i.async||!1,t.extensions&&(t.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){let o=e.renderers[r.name];o?e.renderers[r.name]=function(...s){let l=r.renderer.apply(this,s);return l===!1&&(l=o.apply(this,s)),l}:e.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=e[r.level];o?o.unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&(r.level==="block"?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:r.level==="inline"&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),i.extensions=e),t.renderer){let r=this.defaults.renderer||new _c(this.defaults);for(let o in t.renderer){if(!(o in r))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let s=o,l=t.renderer[s],c=r[s];r[s]=(...d)=>{let f=l.apply(r,d);return f===!1&&(f=c.apply(r,d)),f||""}}i.renderer=r}if(t.tokenizer){let r=this.defaults.tokenizer||new _w(this.defaults);for(let o in t.tokenizer){if(!(o in r))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let s=o,l=t.tokenizer[s],c=r[s];r[s]=(...d)=>{let f=l.apply(r,d);return f===!1&&(f=c.apply(r,d)),f}}i.tokenizer=r}if(t.hooks){let r=this.defaults.hooks||new mw;for(let o in t.hooks){if(!(o in r))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let s=o,l=t.hooks[s],c=r[s];mw.passThroughHooks.has(o)?r[s]=d=>{if(this.defaults.async)return Promise.resolve(l.call(r,d)).then(p=>c.call(r,p));let f=l.call(r,d);return c.call(r,f)}:r[s]=(...d)=>{let f=l.apply(r,d);return f===!1&&(f=c.apply(r,d)),f}}i.hooks=r}if(t.walkTokens){let r=this.defaults.walkTokens,o=t.walkTokens;i.walkTokens=function(s){let l=[];return l.push(o.call(this,s)),r&&(l=l.concat(r.call(this,s))),l}}this.defaults=b(b({},this.defaults),i)}),this}setOptions(n){return this.defaults=b(b({},this.defaults),n),this}lexer(n,e){return dl.lex(n,e??this.defaults)}parser(n,e){return hl.parse(n,e??this.defaults)}parseMarkdown(n){return(t,i)=>{let r=b({},i),o=b(b({},this.defaults),r),s=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&r.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));o.hooks&&(o.hooks.options=o,o.hooks.block=n);let l=o.hooks?o.hooks.provideLexer():n?dl.lex:dl.lexInline,c=o.hooks?o.hooks.provideParser():n?hl.parse:hl.parseInline;if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(t):t).then(d=>l(d,o)).then(d=>o.hooks?o.hooks.processAllTokens(d):d).then(d=>o.walkTokens?Promise.all(this.walkTokens(d,o.walkTokens)).then(()=>d):d).then(d=>c(d,o)).then(d=>o.hooks?o.hooks.postprocess(d):d).catch(s);try{o.hooks&&(t=o.hooks.preprocess(t));let d=l(t,o);o.hooks&&(d=o.hooks.processAllTokens(d)),o.walkTokens&&this.walkTokens(d,o.walkTokens);let f=c(d,o);return o.hooks&&(f=o.hooks.postprocess(f)),f}catch(d){return s(d)}}}onError(n,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,n){let i="<p>An error occurred:</p><pre>"+ca(t.message+"",!0)+"</pre>";return e?Promise.resolve(i):i}if(e)return Promise.reject(t);throw t}}},zu=new kee;function en(n,e){return zu.parse(n,e)}en.options=en.setOptions=function(n){return zu.setOptions(n),en.defaults=zu.defaults,Jz(en.defaults),en};en.getDefaults=aM;en.defaults=$u;en.use=function(...n){return zu.use(...n),en.defaults=zu.defaults,Jz(en.defaults),en};en.walkTokens=function(n,e){return zu.walkTokens(n,e)};en.parseInline=zu.parseInline;en.Parser=hl;en.parser=hl.parse;en.Renderer=_c;en.TextRenderer=mM;en.Lexer=dl;en.lexer=dl.lex;en.Tokenizer=_w;en.Hooks=mw;en.parse=en;var ITe=en.options,STe=en.setOptions,DTe=en.use,TTe=en.walkTokens,kTe=en.parseInline;var ATe=hl.parse,MTe=dl.lex;var Aee=["*"],Mee="Copy",Pee="Copied",Oee=(()=>{let e=class e{constructor(){this._buttonClick$=new ve,this.copied=Gz(this._buttonClick$.pipe(mi(()=>Sr(Re(!0),ym(3e3).pipe(mh(!1)))),gh(),vh(1))),this.copiedText=Rr(()=>this.copied()?Pee:Mee)}onCopyToClipboardClick(){this._buttonClick$.next()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Fe({type:e,selectors:[["markdown-clipboard"]],decls:2,vars:3,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(r,o){r&1&&(vo(0,"button",0),zh("click",function(){return o.onCopyToClipboardClick()}),ae(1),zo()),r&2&&(lt("copied",o.copied()),B(),Nt(o.copiedText()))},encapsulation:2,changeDetection:0});let n=e;return n})(),Ree=new oe("CLIPBOARD_OPTIONS");var gM=function(n){return n.CommandLine="command-line",n.LineHighlight="line-highlight",n.LineNumbers="line-numbers",n}(gM||{}),Nee=new oe("MARKED_EXTENSIONS"),Fee=new oe("MARKED_OPTIONS"),Lee=new oe("MERMAID_OPTIONS"),jee="[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information",Bee="[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information",Vee="[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information",zee="[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information",$ee="[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function",Uee="[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information",u$=new oe("SECURITY_CONTEXT");var d$=(()=>{let e=class e{get options(){return this._options}set options(i){this._options=b(b({},this.DEFAULT_MARKED_OPTIONS),i)}get renderer(){return this.options.renderer}set renderer(i){this.options.renderer=i}constructor(i,r,o,s,l,c,d,f){this.clipboardOptions=i,this.extensions=r,this.mermaidOptions=s,this.platform=l,this.securityContext=c,this.http=d,this.sanitizer=f,this.DEFAULT_MARKED_OPTIONS={renderer:new _c},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:void 0,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new ve,this.reload$=this._reload$.asObservable(),this.options=o}parse(i,r=this.DEFAULT_PARSE_OPTIONS){let{decodeHtml:o,inline:s,emoji:l,mermaid:c,disableSanitizer:d}=r,f=b(b({},this.options),r.markedOptions),p=f.renderer||this.renderer||new _c;this.extensions&&(this.renderer=this.extendsRendererForExtensions(p)),c&&(this.renderer=this.extendsRendererForMermaid(p));let g=this.trimIndentation(i),m=o?this.decodeHtml(g):g,_=l?this.parseEmoji(m):m,y=this.parseMarked(_,f,s);return(d?y:this.sanitizer.sanitize(this.securityContext,y))||""}render(i,r=this.DEFAULT_RENDER_OPTIONS,o){let{clipboard:s,clipboardOptions:l,katex:c,katexOptions:d,mermaid:f,mermaidOptions:p}=r;c&&this.renderKatex(i,b(b({},this.DEFAULT_KATEX_OPTIONS),d)),f&&this.renderMermaid(i,b(b(b({},this.DEFAULT_MERMAID_OPTIONS),this.mermaidOptions),p)),s&&this.renderClipboard(i,o,b(b(b({},this.DEFAULT_CLIPBOARD_OPTIONS),this.clipboardOptions),l)),this.highlight(i)}reload(){this._reload$.next()}getSource(i){if(!this.http)throw new Error(Uee);return this.http.get(i,{responseType:"text"}).pipe(Pe(r=>this.handleExtension(i,r)))}highlight(i){if(!sl(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;i||(i=document);let r=i.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(r,o=>o.classList.add("language-none")),Prism.highlightAllUnder(i)}decodeHtml(i){if(!sl(this.platform))return i;let r=document.createElement("textarea");return r.innerHTML=i,r.value}extendsRendererForExtensions(i){let r=i;return r.\u0275NgxMarkdownRendererExtendedForExtensions===!0||(this.extensions?.length>0&&en.use(...this.extensions),r.\u0275NgxMarkdownRendererExtendedForExtensions=!0),i}extendsRendererForMermaid(i){let r=i;if(r.\u0275NgxMarkdownRendererExtendedForMermaid===!0)return i;let o=i.code;return i.code=s=>s.lang==="mermaid"?`<div class="mermaid">${s.text}</div>`:o(s),r.\u0275NgxMarkdownRendererExtendedForMermaid=!0,i}handleExtension(i,r){let o=i.lastIndexOf("://"),s=o>-1?i.substring(o+4):i,l=s.lastIndexOf("/"),c=l>-1?s.substring(l+1).split("?")[0]:"",d=c.lastIndexOf("."),f=d>-1?c.substring(d+1):"";return f&&f!=="md"?"```"+f+`
`+r+"\n```":r}parseMarked(i,r,o=!1){if(r.renderer){let s=b({},r.renderer);delete s.\u0275NgxMarkdownRendererExtendedForExtensions,delete s.\u0275NgxMarkdownRendererExtendedForMermaid,delete r.renderer,en.use({renderer:s})}return o?en.parseInline(i,r):en.parse(i,r)}parseEmoji(i){if(!sl(this.platform))return i;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error(jee);return joypixels.shortnameToUnicode(i)}renderKatex(i,r){if(sl(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error(Bee);renderMathInElement(i,r)}}renderClipboard(i,r,o){if(!sl(this.platform))return;if(typeof ClipboardJS>"u")throw new Error(zee);if(!r)throw new Error($ee);let{buttonComponent:s,buttonTemplate:l}=o,c=i.querySelectorAll("pre");for(let d=0;d<c.length;d++){let f=c.item(d),p=document.createElement("div");p.style.position="relative",f.parentNode.insertBefore(p,f),p.appendChild(f);let g=document.createElement("div");g.classList.add("markdown-clipboard-toolbar"),g.style.position="absolute",g.style.top=".5em",g.style.right=".5em",g.style.zIndex="1",p.insertAdjacentElement("beforeend",g),p.onmouseenter=()=>g.classList.add("hover"),p.onmouseleave=()=>g.classList.remove("hover");let m;if(s){let y=r.createComponent(s);m=y.hostView,y.changeDetectorRef.markForCheck()}else if(l)m=r.createEmbeddedView(l);else{let y=r.createComponent(Oee);m=y.hostView,y.changeDetectorRef.markForCheck()}let _;m.rootNodes.forEach(y=>{g.appendChild(y),_=new ClipboardJS(y,{text:()=>f.innerText})}),m.onDestroy(()=>_.destroy())}}renderMermaid(i,r=this.DEFAULT_MERMAID_OPTIONS){if(!sl(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.initialize>"u")throw new Error(Vee);let o=i.querySelectorAll(".mermaid");o.length!==0&&(mermaid.initialize(r),mermaid.run({nodes:o}))}trimIndentation(i){if(!i)return"";let r;return i.split(`
`).map(o=>{let s=r;return o.length>0&&(s=isNaN(s)?o.search(/\S|$/):Math.min(o.search(/\S|$/),s)),isNaN(r)&&(r=s),s?o.substring(s):o}).join(`
`)}};e.\u0275fac=function(r){return new(r||e)(Se(Ree,8),Se(Nee,8),Se(Fee,8),Se(Lee,8),Se(ia),Se(u$),Se(pc,8),Se(Ig))},e.\u0275prov=ce({token:e,factory:e.\u0275fac});let n=e;return n})(),h$=(()=>{let e=class e{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(i){this._disableSanitizer=this.coerceBooleanProperty(i)}get inline(){return this._inline}set inline(i){this._inline=this.coerceBooleanProperty(i)}get clipboard(){return this._clipboard}set clipboard(i){this._clipboard=this.coerceBooleanProperty(i)}get emoji(){return this._emoji}set emoji(i){this._emoji=this.coerceBooleanProperty(i)}get katex(){return this._katex}set katex(i){this._katex=this.coerceBooleanProperty(i)}get mermaid(){return this._mermaid}set mermaid(i){this._mermaid=this.coerceBooleanProperty(i)}get lineHighlight(){return this._lineHighlight}set lineHighlight(i){this._lineHighlight=this.coerceBooleanProperty(i)}get lineNumbers(){return this._lineNumbers}set lineNumbers(i){this._lineNumbers=this.coerceBooleanProperty(i)}get commandLine(){return this._commandLine}set commandLine(i){this._commandLine=this.coerceBooleanProperty(i)}constructor(i,r,o){this.element=i,this.markdownService=r,this.viewContainerRef=o,this.error=new je,this.load=new je,this.ready=new je,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this.destroyed$=new ve}ngOnChanges(){this.loadContent()}loadContent(){if(this.data!=null){this.handleData();return}if(this.src!=null){this.handleSrc();return}}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(wn(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(i,r=!1){return E(this,null,function*(){let o={decodeHtml:r,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,disableSanitizer:this.disableSanitizer},s={clipboard:this.clipboard,clipboardOptions:this.getClipboardOptions(),katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},l=yield this.markdownService.parse(i,o);this.element.nativeElement.innerHTML=l,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,s,this.viewContainerRef),this.ready.emit()})}coerceBooleanProperty(i){return i!=null&&`${String(i)}`!="false"}getClipboardOptions(){if(this.clipboardButtonComponent||this.clipboardButtonTemplate)return{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate}}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:i=>{this.render(i).then(()=>{this.load.emit(i)})},error:i=>this.error.emit(i)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,gM.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,gM.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(i,r){let o=i.querySelectorAll("pre");for(let s=0;s<o.length;s++){let l=r instanceof Array?r:[r];o.item(s).classList.add(...l)}}setPluginOptions(i,r){let o=i.querySelectorAll("pre");for(let s=0;s<o.length;s++)Object.keys(r).forEach(l=>{let c=r[l];if(c){let d=this.toLispCase(l);o.item(s).setAttribute(d,c.toString())}})}toLispCase(i){let r=i.match(/([A-Z])/g);if(!r)return i;let o=i.toString();for(let s=0,l=r.length;s<l;s++)o=o.replace(new RegExp(r[s]),"-"+r[s].toLowerCase());return o.slice(0,1)==="-"&&(o=o.slice(1)),o}};e.\u0275fac=function(r){return new(r||e)(Ce(Ue),Ce(d$),Ce(Mi))},e.\u0275cmp=Fe({type:e,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},features:[jn],ngContentSelectors:Aee,decls:1,vars:0,template:function(r,o){r&1&&(Cn(),bt(0))},encapsulation:2});let n=e;return n})();function _M(n){return[d$,n?.loader??[],n?.clipboardOptions??[],n?.markedOptions??[],n?.mermaidOptions??[],n?.markedExtensions??[],{provide:u$,useValue:n?.sanitize??Hi.HTML}]}var f$=(()=>{let e=class e{static forRoot(i){return{ngModule:e,providers:[_M(i)]}}static forChild(){return{ngModule:e}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=$e({type:e}),e.\u0275inj=Ve({});let n=e;return n})();var p$={providers:[Tk({eventCoalescing:!0}),iM(Wz),_M(),bA(yA())]};var uf="2025-06-18";var m$=[uf,"2025-03-26","2024-11-05","2024-10-07"],yw="2.0",g$=C.union([C.string(),C.number().int()]),_$=C.string(),qee=C.object({progressToken:C.optional(g$)}).passthrough(),Wo=C.object({_meta:C.optional(qee)}).passthrough(),Jr=C.object({method:C.string(),params:C.optional(Wo)}),qg=C.object({_meta:C.optional(C.object({}).passthrough())}).passthrough(),ua=C.object({method:C.string(),params:C.optional(qg)}),Go=C.object({_meta:C.optional(C.object({}).passthrough())}).passthrough(),ww=C.union([C.string(),C.number().int()]),v$=C.object({jsonrpc:C.literal(yw),id:ww}).merge(Jr).strict(),xw=n=>v$.safeParse(n).success,b$=C.object({jsonrpc:C.literal(yw)}).merge(ua).strict(),y$=n=>b$.safeParse(n).success,w$=C.object({jsonrpc:C.literal(yw),id:ww,result:Go}).strict(),Wg=n=>w$.safeParse(n).success,fs=function(n){return n[n.ConnectionClosed=-32e3]="ConnectionClosed",n[n.RequestTimeout=-32001]="RequestTimeout",n[n.ParseError=-32700]="ParseError",n[n.InvalidRequest=-32600]="InvalidRequest",n[n.MethodNotFound=-32601]="MethodNotFound",n[n.InvalidParams=-32602]="InvalidParams",n[n.InternalError=-32603]="InternalError",n}(fs||{}),x$=C.object({jsonrpc:C.literal(yw),id:ww,error:C.object({code:C.number().int(),message:C.string(),data:C.optional(C.unknown())})}).strict(),C$=n=>x$.safeParse(n).success,Cw=C.union([v$,b$,w$,x$]),Uu=Go.strict(),Ew=ua.extend({method:C.literal("notifications/cancelled"),params:qg.extend({requestId:ww,reason:C.string().optional()})}),Gg=C.object({name:C.string(),title:C.optional(C.string())}).passthrough(),E$=Gg.extend({version:C.string()}),Wee=C.object({experimental:C.optional(C.object({}).passthrough()),sampling:C.optional(C.object({}).passthrough()),elicitation:C.optional(C.object({}).passthrough()),roots:C.optional(C.object({listChanged:C.optional(C.boolean())}).passthrough())}).passthrough(),Gee=Jr.extend({method:C.literal("initialize"),params:Wo.extend({protocolVersion:C.string(),capabilities:Wee,clientInfo:E$})});var Zee=C.object({experimental:C.optional(C.object({}).passthrough()),logging:C.optional(C.object({}).passthrough()),completions:C.optional(C.object({}).passthrough()),prompts:C.optional(C.object({listChanged:C.optional(C.boolean())}).passthrough()),resources:C.optional(C.object({subscribe:C.optional(C.boolean()),listChanged:C.optional(C.boolean())}).passthrough()),tools:C.optional(C.object({listChanged:C.optional(C.boolean())}).passthrough())}).passthrough(),vM=Go.extend({protocolVersion:C.string(),capabilities:Zee,serverInfo:E$,instructions:C.optional(C.string())}),I$=ua.extend({method:C.literal("notifications/initialized")}),S$=n=>I$.safeParse(n).success,Iw=Jr.extend({method:C.literal("ping")}),Kee=C.object({progress:C.number(),total:C.optional(C.number()),message:C.optional(C.string())}).passthrough(),df=ua.extend({method:C.literal("notifications/progress"),params:qg.merge(Kee).extend({progressToken:g$})}),Sw=Jr.extend({params:Wo.extend({cursor:C.optional(_$)}).optional()}),Dw=Go.extend({nextCursor:C.optional(_$)}),D$=C.object({uri:C.string(),mimeType:C.optional(C.string()),_meta:C.optional(C.object({}).passthrough())}).passthrough(),T$=D$.extend({text:C.string()}),k$=D$.extend({blob:C.string().base64()}),A$=Gg.extend({uri:C.string(),description:C.optional(C.string()),mimeType:C.optional(C.string()),_meta:C.optional(C.object({}).passthrough())}),Yee=Gg.extend({uriTemplate:C.string(),description:C.optional(C.string()),mimeType:C.optional(C.string()),_meta:C.optional(C.object({}).passthrough())}),Qee=Sw.extend({method:C.literal("resources/list")}),hf=Dw.extend({resources:C.array(A$)}),Xee=Sw.extend({method:C.literal("resources/templates/list")}),bM=Dw.extend({resourceTemplates:C.array(Yee)}),Jee=Jr.extend({method:C.literal("resources/read"),params:Wo.extend({uri:C.string()})}),Zg=Go.extend({contents:C.array(C.union([T$,k$]))}),yM=ua.extend({method:C.literal("notifications/resources/list_changed")}),ete=Jr.extend({method:C.literal("resources/subscribe"),params:Wo.extend({uri:C.string()})}),tte=Jr.extend({method:C.literal("resources/unsubscribe"),params:Wo.extend({uri:C.string()})}),nte=ua.extend({method:C.literal("notifications/resources/updated"),params:qg.extend({uri:C.string()})}),ite=C.object({name:C.string(),description:C.optional(C.string()),required:C.optional(C.boolean())}).passthrough(),rte=Gg.extend({description:C.optional(C.string()),arguments:C.optional(C.array(ite)),_meta:C.optional(C.object({}).passthrough())}),ote=Sw.extend({method:C.literal("prompts/list")}),Kg=Dw.extend({prompts:C.array(rte)}),ste=Jr.extend({method:C.literal("prompts/get"),params:Wo.extend({name:C.string(),arguments:C.optional(C.record(C.string()))})}),wM=C.object({type:C.literal("text"),text:C.string(),_meta:C.optional(C.object({}).passthrough())}).passthrough(),xM=C.object({type:C.literal("image"),data:C.string().base64(),mimeType:C.string(),_meta:C.optional(C.object({}).passthrough())}).passthrough(),CM=C.object({type:C.literal("audio"),data:C.string().base64(),mimeType:C.string(),_meta:C.optional(C.object({}).passthrough())}).passthrough(),ate=C.object({type:C.literal("resource"),resource:C.union([T$,k$]),_meta:C.optional(C.object({}).passthrough())}).passthrough(),lte=A$.extend({type:C.literal("resource_link")}),M$=C.union([wM,xM,CM,lte,ate]),cte=C.object({role:C.enum(["user","assistant"]),content:M$}).passthrough(),Yg=Go.extend({description:C.optional(C.string()),messages:C.array(cte)}),ute=ua.extend({method:C.literal("notifications/prompts/list_changed")}),dte=C.object({title:C.optional(C.string()),readOnlyHint:C.optional(C.boolean()),destructiveHint:C.optional(C.boolean()),idempotentHint:C.optional(C.boolean()),openWorldHint:C.optional(C.boolean())}).passthrough(),hte=Gg.extend({description:C.optional(C.string()),inputSchema:C.object({type:C.literal("object"),properties:C.optional(C.object({}).passthrough()),required:C.optional(C.array(C.string()))}).passthrough(),outputSchema:C.optional(C.object({type:C.literal("object"),properties:C.optional(C.object({}).passthrough()),required:C.optional(C.array(C.string()))}).passthrough()),annotations:C.optional(dte),_meta:C.optional(C.object({}).passthrough())}),fte=Sw.extend({method:C.literal("tools/list")}),Qg=Dw.extend({tools:C.array(hte)}),fl=Go.extend({content:C.array(M$).default([]),structuredContent:C.object({}).passthrough().optional(),isError:C.optional(C.boolean())}),uke=fl.or(Go.extend({toolResult:C.unknown()})),pte=Jr.extend({method:C.literal("tools/call"),params:Wo.extend({name:C.string(),arguments:C.optional(C.record(C.unknown()))})}),mte=ua.extend({method:C.literal("notifications/tools/list_changed")}),P$=C.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),gte=Jr.extend({method:C.literal("logging/setLevel"),params:Wo.extend({level:P$})}),EM=ua.extend({method:C.literal("notifications/message"),params:qg.extend({level:P$,logger:C.optional(C.string()),data:C.unknown()})}),_te=C.object({name:C.string().optional()}).passthrough(),vte=C.object({hints:C.optional(C.array(_te)),costPriority:C.optional(C.number().min(0).max(1)),speedPriority:C.optional(C.number().min(0).max(1)),intelligencePriority:C.optional(C.number().min(0).max(1))}).passthrough(),bte=C.object({role:C.enum(["user","assistant"]),content:C.union([wM,xM,CM])}).passthrough(),IM=Jr.extend({method:C.literal("sampling/createMessage"),params:Wo.extend({messages:C.array(bte),systemPrompt:C.optional(C.string()),includeContext:C.optional(C.enum(["none","thisServer","allServers"])),temperature:C.optional(C.number()),maxTokens:C.number().int(),stopSequences:C.optional(C.array(C.string())),metadata:C.optional(C.object({}).passthrough()),modelPreferences:C.optional(vte)})}),yte=Go.extend({model:C.string(),stopReason:C.optional(C.enum(["endTurn","stopSequence","maxTokens"]).or(C.string())),role:C.enum(["user","assistant"]),content:C.discriminatedUnion("type",[wM,xM,CM])}),wte=C.object({type:C.literal("boolean"),title:C.optional(C.string()),description:C.optional(C.string()),default:C.optional(C.boolean())}).passthrough(),xte=C.object({type:C.literal("string"),title:C.optional(C.string()),description:C.optional(C.string()),minLength:C.optional(C.number()),maxLength:C.optional(C.number()),format:C.optional(C.enum(["email","uri","date","date-time"]))}).passthrough(),Cte=C.object({type:C.enum(["number","integer"]),title:C.optional(C.string()),description:C.optional(C.string()),minimum:C.optional(C.number()),maximum:C.optional(C.number())}).passthrough(),Ete=C.object({type:C.literal("string"),title:C.optional(C.string()),description:C.optional(C.string()),enum:C.array(C.string()),enumNames:C.optional(C.array(C.string()))}).passthrough(),Ite=C.union([wte,xte,Cte,Ete]),SM=Jr.extend({method:C.literal("elicitation/create"),params:Wo.extend({message:C.string(),requestedSchema:C.object({type:C.literal("object"),properties:C.record(C.string(),Ite),required:C.optional(C.array(C.string()))}).passthrough()})}),DM=Go.extend({action:C.enum(["accept","decline","cancel"]),content:C.optional(C.record(C.string(),C.unknown()))}),Ste=C.object({type:C.literal("ref/resource"),uri:C.string()}).passthrough();var Dte=C.object({type:C.literal("ref/prompt"),name:C.string()}).passthrough(),Tte=Jr.extend({method:C.literal("completion/complete"),params:Wo.extend({ref:C.union([Dte,Ste]),argument:C.object({name:C.string(),value:C.string()}).passthrough(),context:C.optional(C.object({arguments:C.optional(C.record(C.string(),C.string()))}))})}),TM=Go.extend({completion:C.object({values:C.array(C.string()).max(100),total:C.optional(C.number().int()),hasMore:C.optional(C.boolean())}).passthrough()}),kte=C.object({uri:C.string().startsWith("file://"),name:C.optional(C.string()),_meta:C.optional(C.object({}).passthrough())}).passthrough(),Ate=Jr.extend({method:C.literal("roots/list")}),Mte=Go.extend({roots:C.array(kte)}),Pte=ua.extend({method:C.literal("notifications/roots/list_changed")}),dke=C.union([Iw,Gee,Tte,gte,ste,ote,Qee,Xee,Jee,ete,tte,pte,fte]),hke=C.union([Ew,df,I$,Pte]),fke=C.union([Uu,yte,DM,Mte]),pke=C.union([Iw,IM,SM,Ate]),mke=C.union([Ew,df,EM,nte,yM,mte,ute]),gke=C.union([Uu,vM,TM,Yg,Kg,hf,bM,Zg,fl,Qg]),qo=class extends Error{constructor(e,t,i){super(`MCP error ${e}: ${t}`),this.code=e,this.data=i,this.name="McpError"}};var Ote=6e4,Tw=class{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this.setNotificationHandler(Ew,t=>{let i=this._requestHandlerAbortControllers.get(t.params.requestId);i?.abort(t.params.reason)}),this.setNotificationHandler(df,t=>{this._onprogress(t)}),this.setRequestHandler(Iw,t=>({}))}_setupTimeout(e,t,i,r,o=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(r,t),startTime:Date.now(),timeout:t,maxTotalTimeout:i,resetTimeoutOnProgress:o,onTimeout:r})}_resetTimeout(e){let t=this._timeoutInfo.get(e);if(!t)return!1;let i=Date.now()-t.startTime;if(t.maxTotalTimeout&&i>=t.maxTotalTimeout)throw this._timeoutInfo.delete(e),new qo(fs.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:t.maxTotalTimeout,totalElapsed:i});return clearTimeout(t.timeoutId),t.timeoutId=setTimeout(t.onTimeout,t.timeout),!0}_cleanupTimeout(e){let t=this._timeoutInfo.get(e);t&&(clearTimeout(t.timeoutId),this._timeoutInfo.delete(e))}connect(e){return E(this,null,function*(){var t,i,r;this._transport=e;let o=(t=this.transport)===null||t===void 0?void 0:t.onclose;this._transport.onclose=()=>{o?.(),this._onclose()};let s=(i=this.transport)===null||i===void 0?void 0:i.onerror;this._transport.onerror=c=>{s?.(c),this._onerror(c)};let l=(r=this._transport)===null||r===void 0?void 0:r.onmessage;this._transport.onmessage=(c,d)=>{l?.(c,d),Wg(c)||C$(c)?this._onresponse(c):xw(c)?this._onrequest(c,d):y$(c)?this._onnotification(c):this._onerror(new Error(`Unknown message type: ${JSON.stringify(c)}`))},yield this._transport.start()})}_onclose(){var e;let t=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let i=new qo(fs.ConnectionClosed,"Connection closed");for(let r of t.values())r(i)}_onerror(e){var t;(t=this.onerror)===null||t===void 0||t.call(this,e)}_onnotification(e){var t;let i=(t=this._notificationHandlers.get(e.method))!==null&&t!==void 0?t:this.fallbackNotificationHandler;i!==void 0&&Promise.resolve().then(()=>i(e)).catch(r=>this._onerror(new Error(`Uncaught error in notification handler: ${r}`)))}_onrequest(e,t){var i,r,o,s;let l=(i=this._requestHandlers.get(e.method))!==null&&i!==void 0?i:this.fallbackRequestHandler;if(l===void 0){(r=this._transport)===null||r===void 0||r.send({jsonrpc:"2.0",id:e.id,error:{code:fs.MethodNotFound,message:"Method not found"}}).catch(f=>this._onerror(new Error(`Failed to send an error response: ${f}`)));return}let c=new AbortController;this._requestHandlerAbortControllers.set(e.id,c);let d={signal:c.signal,sessionId:(o=this._transport)===null||o===void 0?void 0:o.sessionId,_meta:(s=e.params)===null||s===void 0?void 0:s._meta,sendNotification:f=>this.notification(f,{relatedRequestId:e.id}),sendRequest:(f,p,g)=>this.request(f,p,S(b({},g),{relatedRequestId:e.id})),authInfo:t?.authInfo,requestId:e.id,requestInfo:t?.requestInfo};Promise.resolve().then(()=>l(e,d)).then(f=>{var p;if(!c.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({result:f,jsonrpc:"2.0",id:e.id})},f=>{var p,g;if(!c.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(f.code)?f.code:fs.InternalError,message:(g=f.message)!==null&&g!==void 0?g:"Internal error"}})}).catch(f=>this._onerror(new Error(`Failed to send response: ${f}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let c=e.params,{progressToken:t}=c,i=Be(c,["progressToken"]),r=Number(t),o=this._progressHandlers.get(r);if(!o){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let s=this._responseHandlers.get(r),l=this._timeoutInfo.get(r);if(l&&s&&l.resetTimeoutOnProgress)try{this._resetTimeout(r)}catch(d){s(d);return}o(i)}_onresponse(e){let t=Number(e.id),i=this._responseHandlers.get(t);if(i===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(t),this._progressHandlers.delete(t),this._cleanupTimeout(t),Wg(e))i(e);else{let r=new qo(e.error.code,e.error.message,e.error.data);i(r)}}get transport(){return this._transport}close(){return E(this,null,function*(){var e;yield(e=this._transport)===null||e===void 0?void 0:e.close()})}request(e,t,i){let{relatedRequestId:r,resumptionToken:o,onresumptiontoken:s}=i??{};return new Promise((l,c)=>{var d,f,p,g,m,_;if(!this._transport){c(new Error("Not connected"));return}((d=this._options)===null||d===void 0?void 0:d.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(f=i?.signal)===null||f===void 0||f.throwIfAborted();let y=this._requestMessageId++,w=S(b({},e),{jsonrpc:"2.0",id:y});i?.onprogress&&(this._progressHandlers.set(y,i.onprogress),w.params=S(b({},e.params),{_meta:S(b({},((p=e.params)===null||p===void 0?void 0:p._meta)||{}),{progressToken:y})}));let I=j=>{var q;this._responseHandlers.delete(y),this._progressHandlers.delete(y),this._cleanupTimeout(y),(q=this._transport)===null||q===void 0||q.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:y,reason:String(j)}},{relatedRequestId:r,resumptionToken:o,onresumptiontoken:s}).catch(V=>this._onerror(new Error(`Failed to send cancellation: ${V}`))),c(j)};this._responseHandlers.set(y,j=>{var q;if(!(!((q=i?.signal)===null||q===void 0)&&q.aborted)){if(j instanceof Error)return c(j);try{let V=t.parse(j.result);l(V)}catch(V){c(V)}}}),(g=i?.signal)===null||g===void 0||g.addEventListener("abort",()=>{var j;I((j=i?.signal)===null||j===void 0?void 0:j.reason)});let k=(m=i?.timeout)!==null&&m!==void 0?m:Ote,O=()=>I(new qo(fs.RequestTimeout,"Request timed out",{timeout:k}));this._setupTimeout(y,k,i?.maxTotalTimeout,O,(_=i?.resetTimeoutOnProgress)!==null&&_!==void 0?_:!1),this._transport.send(w,{relatedRequestId:r,resumptionToken:o,onresumptiontoken:s}).catch(j=>{this._cleanupTimeout(y),c(j)})})}notification(e,t){return E(this,null,function*(){if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(e.method);let i=S(b({},e),{jsonrpc:"2.0"});yield this._transport.send(i,t)})}setRequestHandler(e,t){let i=e.shape.method.value;this.assertRequestHandlerCapability(i),this._requestHandlers.set(i,(r,o)=>Promise.resolve(t(e.parse(r),o)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,t){this._notificationHandlers.set(e.shape.method.value,i=>Promise.resolve(t(e.parse(i))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function O$(n,e){return Object.entries(e).reduce((t,[i,r])=>(r&&typeof r=="object"?t[i]=t[i]?b(b({},t[i]),r):r:t[i]=r,t),b({},n))}var NU=GI(RU(),1);var Gw=class n extends Tw{constructor(e,t){var i;super(t),this._clientInfo=e,this._cachedToolOutputValidators=new Map,this._capabilities=(i=t?.capabilities)!==null&&i!==void 0?i:{},this._ajv=new NU.default}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=O$(this._capabilities,e)}assertCapability(e,t){var i;if(!(!((i=this._serverCapabilities)===null||i===void 0)&&i[e]))throw new Error(`Server does not support ${e} (required for ${t})`)}connect(e,t){return E(this,null,function*(){if(yield ji(n.prototype,this,"connect").call(this,e),e.sessionId===void 0)try{let i=yield this.request({method:"initialize",params:{protocolVersion:uf,capabilities:this._capabilities,clientInfo:this._clientInfo}},vM,t);if(i===void 0)throw new Error(`Server sent invalid initialize result: ${i}`);if(!m$.includes(i.protocolVersion))throw new Error(`Server's protocol version is not supported: ${i.protocolVersion}`);this._serverCapabilities=i.capabilities,this._serverVersion=i.serverInfo,e.setProtocolVersion&&e.setProtocolVersion(i.protocolVersion),this._instructions=i.instructions,yield this.notification({method:"notifications/initialized"})}catch(i){throw this.close(),i}})}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){var t,i,r,o,s;switch(e){case"logging/setLevel":if(!(!((t=this._serverCapabilities)===null||t===void 0)&&t.logging))throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!(!((i=this._serverCapabilities)===null||i===void 0)&&i.prompts))throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r.resources))throw new Error(`Server does not support resources (required for ${e})`);if(e==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!(!((o=this._serverCapabilities)===null||o===void 0)&&o.tools))throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!(!((s=this._serverCapabilities)===null||s===void 0)&&s.completions))throw new Error(`Server does not support completions (required for ${e})`);break;case"initialize":break;case"ping":break}}assertNotificationCapability(e){var t;switch(e){case"notifications/roots/list_changed":if(!(!((t=this._capabilities.roots)===null||t===void 0)&&t.listChanged))throw new Error(`Client does not support roots list changed notifications (required for ${e})`);break;case"notifications/initialized":break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"elicitation/create":if(!this._capabilities.elicitation)throw new Error(`Client does not support elicitation capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`);break;case"ping":break}}ping(e){return E(this,null,function*(){return this.request({method:"ping"},Uu,e)})}complete(e,t){return E(this,null,function*(){return this.request({method:"completion/complete",params:e},TM,t)})}setLoggingLevel(e,t){return E(this,null,function*(){return this.request({method:"logging/setLevel",params:{level:e}},Uu,t)})}getPrompt(e,t){return E(this,null,function*(){return this.request({method:"prompts/get",params:e},Yg,t)})}listPrompts(e,t){return E(this,null,function*(){return this.request({method:"prompts/list",params:e},Kg,t)})}listResources(e,t){return E(this,null,function*(){return this.request({method:"resources/list",params:e},hf,t)})}listResourceTemplates(e,t){return E(this,null,function*(){return this.request({method:"resources/templates/list",params:e},bM,t)})}readResource(e,t){return E(this,null,function*(){return this.request({method:"resources/read",params:e},Zg,t)})}subscribeResource(e,t){return E(this,null,function*(){return this.request({method:"resources/subscribe",params:e},Uu,t)})}unsubscribeResource(e,t){return E(this,null,function*(){return this.request({method:"resources/unsubscribe",params:e},Uu,t)})}callTool(r){return E(this,arguments,function*(e,t=fl,i){let o=yield this.request({method:"tools/call",params:e},t,i),s=this.getToolOutputValidator(e.name);if(s){if(!o.structuredContent&&!o.isError)throw new qo(fs.InvalidRequest,`Tool ${e.name} has an output schema but did not return structured content`);if(o.structuredContent)try{if(!s(o.structuredContent))throw new qo(fs.InvalidParams,`Structured content does not match the tool's output schema: ${this._ajv.errorsText(s.errors)}`)}catch(l){throw l instanceof qo?l:new qo(fs.InvalidParams,`Failed to validate structured content: ${l instanceof Error?l.message:String(l)}`)}}return o})}cacheToolOutputSchemas(e){this._cachedToolOutputValidators.clear();for(let t of e)if(t.outputSchema)try{let i=this._ajv.compile(t.outputSchema);this._cachedToolOutputValidators.set(t.name,i)}catch{}}getToolOutputValidator(e){return this._cachedToolOutputValidators.get(e)}listTools(e,t){return E(this,null,function*(){let i=yield this.request({method:"tools/list",params:e},Qg,t);return this.cacheToolOutputSchemas(i.tools),i})}sendRootsListChanged(){return E(this,null,function*(){return this.notification({method:"notifications/roots/list_changed"})})}};var JM;JM=globalThis.crypto;function hie(n){return E(this,null,function*(){return(yield JM).getRandomValues(new Uint8Array(n))})}function fie(n){return E(this,null,function*(){let e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~",t="",i=yield hie(n);for(let r=0;r<n;r++){let o=i[r]%e.length;t+=e[o]}return t})}function pie(n){return E(this,null,function*(){return yield fie(n)})}function mie(n){return E(this,null,function*(){let e=yield(yield JM).subtle.digest("SHA-256",new TextEncoder().encode(n));return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")})}function eP(n){return E(this,null,function*(){if(n||(n=43),n<43||n>128)throw`Expected a length between 43 and 128. Received ${n}.`;let e=yield pie(n),t=yield mie(e);return{code_verifier:e,code_challenge:t}})}var FU=C.object({resource:C.string().url(),authorization_servers:C.array(C.string().url()).optional(),jwks_uri:C.string().url().optional(),scopes_supported:C.array(C.string()).optional(),bearer_methods_supported:C.array(C.string()).optional(),resource_signing_alg_values_supported:C.array(C.string()).optional(),resource_name:C.string().optional(),resource_documentation:C.string().optional(),resource_policy_uri:C.string().url().optional(),resource_tos_uri:C.string().url().optional(),tls_client_certificate_bound_access_tokens:C.boolean().optional(),authorization_details_types_supported:C.array(C.string()).optional(),dpop_signing_alg_values_supported:C.array(C.string()).optional(),dpop_bound_access_tokens_required:C.boolean().optional()}).passthrough(),LU=C.object({issuer:C.string(),authorization_endpoint:C.string(),token_endpoint:C.string(),registration_endpoint:C.string().optional(),scopes_supported:C.array(C.string()).optional(),response_types_supported:C.array(C.string()),response_modes_supported:C.array(C.string()).optional(),grant_types_supported:C.array(C.string()).optional(),token_endpoint_auth_methods_supported:C.array(C.string()).optional(),token_endpoint_auth_signing_alg_values_supported:C.array(C.string()).optional(),service_documentation:C.string().optional(),revocation_endpoint:C.string().optional(),revocation_endpoint_auth_methods_supported:C.array(C.string()).optional(),revocation_endpoint_auth_signing_alg_values_supported:C.array(C.string()).optional(),introspection_endpoint:C.string().optional(),introspection_endpoint_auth_methods_supported:C.array(C.string()).optional(),introspection_endpoint_auth_signing_alg_values_supported:C.array(C.string()).optional(),code_challenge_methods_supported:C.array(C.string()).optional()}).passthrough(),tP=C.object({access_token:C.string(),token_type:C.string(),expires_in:C.number().optional(),scope:C.string().optional(),refresh_token:C.string().optional()}).strip(),bAe=C.object({error:C.string(),error_description:C.string().optional(),error_uri:C.string().optional()}),gie=C.object({redirect_uris:C.array(C.string()).refine(n=>n.every(e=>URL.canParse(e)),{message:"redirect_uris must contain valid URLs"}),token_endpoint_auth_method:C.string().optional(),grant_types:C.array(C.string()).optional(),response_types:C.array(C.string()).optional(),client_name:C.string().optional(),client_uri:C.string().optional(),logo_uri:C.string().optional(),scope:C.string().optional(),contacts:C.array(C.string()).optional(),tos_uri:C.string().optional(),policy_uri:C.string().optional(),jwks_uri:C.string().optional(),jwks:C.any().optional(),software_id:C.string().optional(),software_version:C.string().optional(),software_statement:C.string().optional()}).strip(),_ie=C.object({client_id:C.string(),client_secret:C.string().optional(),client_id_issued_at:C.number().optional(),client_secret_expires_at:C.number().optional()}).strip(),jU=gie.merge(_ie),yAe=C.object({error:C.string(),error_description:C.string().optional()}).strip(),wAe=C.object({token:C.string(),token_type_hint:C.string().optional()}).strip();function BU(n){let e=typeof n=="string"?new URL(n):new URL(n.href);return e.hash="",e}function VU({requestedResource:n,configuredResource:e}){let t=typeof n=="string"?new URL(n):new URL(n.href),i=typeof e=="string"?new URL(e):new URL(e.href);if(t.origin!==i.origin||t.pathname.length<i.pathname.length)return!1;let r=t.pathname.endsWith("/")?t.pathname:t.pathname+"/",o=i.pathname.endsWith("/")?i.pathname:i.pathname+"/";return r.startsWith(o)}var wc=class extends Error{constructor(e){super(e??"Unauthorized")}};function $U(n,e){let t=n.client_secret!==void 0;return e.length===0?t?"client_secret_post":"none":t&&e.includes("client_secret_basic")?"client_secret_basic":t&&e.includes("client_secret_post")?"client_secret_post":e.includes("none")?"none":t?"client_secret_post":"none"}function UU(n,e,t,i){let{client_id:r,client_secret:o}=e;switch(n){case"client_secret_basic":vie(r,o,t);return;case"client_secret_post":bie(r,o,i);return;case"none":yie(r,i);return;default:throw new Error(`Unsupported client authentication method: ${n}`)}}function vie(n,e,t){if(!e)throw new Error("client_secret_basic authentication requires a client_secret");let i=btoa(`${n}:${e}`);t.set("Authorization",`Basic ${i}`)}function bie(n,e,t){t.set("client_id",n),e&&t.set("client_secret",e)}function yie(n,e){e.set("client_id",n)}function Zw(o,s){return E(this,arguments,function*(n,{serverUrl:e,authorizationCode:t,scope:i,resourceMetadataUrl:r}){let l,c=e;try{l=yield xie(e,{resourceMetadataUrl:r}),l.authorization_servers&&l.authorization_servers.length>0&&(c=l.authorization_servers[0])}catch{}let d=yield wie(e,n,l),f=yield Iie(e,{authorizationServerUrl:c}),p=yield Promise.resolve(n.clientInformation());if(!p){if(t!==void 0)throw new Error("Existing OAuth client information is required when exchanging an authorization code");if(!n.saveClientInformation)throw new Error("OAuth client information must be saveable for dynamic registration");let w=yield kie(c,{metadata:f,clientMetadata:n.clientMetadata});yield n.saveClientInformation(w),p=w}if(t!==void 0){let w=yield n.codeVerifier(),I=yield Die(c,{metadata:f,clientInformation:p,authorizationCode:t,codeVerifier:w,redirectUri:n.redirectUrl,resource:d,addClientAuthentication:n.addClientAuthentication});return yield n.saveTokens(I),"AUTHORIZED"}let g=yield n.tokens();if(g?.refresh_token)try{let w=yield Tie(c,{metadata:f,clientInformation:p,refreshToken:g.refresh_token,resource:d,addClientAuthentication:n.addClientAuthentication});return yield n.saveTokens(w),"AUTHORIZED"}catch{}let m=n.state?yield n.state():void 0,{authorizationUrl:_,codeVerifier:y}=yield Sie(c,{metadata:f,clientInformation:p,state:m,redirectUrl:n.redirectUrl,scope:i||n.clientMetadata.scope,resource:d});return yield n.saveCodeVerifier(y),yield n.redirectToAuthorization(_),"REDIRECT"})}function wie(n,e,t){return E(this,null,function*(){let i=BU(n);if(e.validateResourceURL)return yield e.validateResourceURL(i,t?.resource);if(t){if(!VU({requestedResource:i,configuredResource:t.resource}))throw new Error(`Protected resource ${t.resource} does not match expected ${i} (or origin)`);return new URL(t.resource)}})}function HU(n){let e=n.headers.get("WWW-Authenticate");if(!e)return;let[t,i]=e.split(" ");if(t.toLowerCase()!=="bearer"||!i)return;let o=/resource_metadata="([^"]*)"/.exec(e);if(o)try{return new URL(o[1])}catch{return}}function xie(n,e){return E(this,null,function*(){let t=yield WU(n,"oauth-protected-resource",{protocolVersion:e?.protocolVersion,metadataUrl:e?.resourceMetadataUrl});if(!t||t.status===404)throw new Error("Resource server does not implement OAuth 2.0 Protected Resource Metadata.");if(!t.ok)throw new Error(`HTTP ${t.status} trying to load well-known OAuth protected resource metadata.`);return FU.parse(yield t.json())})}function qU(n,e){return E(this,null,function*(){try{return yield fetch(n,{headers:e})}catch(t){if(t instanceof TypeError)return e?qU(n):void 0;throw t}})}function Cie(n,e){let t=`/.well-known/${n}${e}`;return e.endsWith("/")&&(t=t.slice(0,-1)),t}function zU(n,e){return E(this,null,function*(){return yield qU(n,{"MCP-Protocol-Version":e})})}function Eie(n,e){return!n||n.status===404&&e!=="/"}function WU(n,e,t){return E(this,null,function*(){var i,r;let o=new URL(n),s=(i=t?.protocolVersion)!==null&&i!==void 0?i:uf,l;if(t?.metadataUrl)l=new URL(t.metadataUrl);else{let d=Cie(e,o.pathname);l=new URL(d,(r=t?.metadataServerUrl)!==null&&r!==void 0?r:o),l.search=o.search}let c=yield zU(l,s);if(!t?.metadataUrl&&Eie(c,o.pathname)){let d=new URL(`/.well-known/${e}`,o);c=yield zU(d,s)}return c})}function Iie(i){return E(this,arguments,function*(n,{authorizationServerUrl:e,protocolVersion:t}={}){typeof n=="string"&&(n=new URL(n)),e||(e=n),typeof e=="string"&&(e=new URL(e)),t??(t=uf);let r=yield WU(n,"oauth-authorization-server",{protocolVersion:t,metadataServerUrl:e});if(!(!r||r.status===404)){if(!r.ok)throw new Error(`HTTP ${r.status} trying to load well-known OAuth metadata`);return LU.parse(yield r.json())}})}function Sie(l,c){return E(this,arguments,function*(n,{metadata:e,clientInformation:t,redirectUrl:i,scope:r,state:o,resource:s}){let d="code",f="S256",p;if(e){if(p=new URL(e.authorization_endpoint),!e.response_types_supported.includes(d))throw new Error(`Incompatible auth server: does not support response type ${d}`);if(!e.code_challenge_methods_supported||!e.code_challenge_methods_supported.includes(f))throw new Error(`Incompatible auth server: does not support code challenge method ${f}`)}else p=new URL("/authorize",n);let g=yield eP(),m=g.code_verifier,_=g.code_challenge;return p.searchParams.set("response_type",d),p.searchParams.set("client_id",t.client_id),p.searchParams.set("code_challenge",_),p.searchParams.set("code_challenge_method",f),p.searchParams.set("redirect_uri",String(i)),o&&p.searchParams.set("state",o),r&&p.searchParams.set("scope",r),s&&p.searchParams.set("resource",s.href),{authorizationUrl:p,codeVerifier:m}})}function Die(c,d){return E(this,arguments,function*(n,{metadata:e,clientInformation:t,authorizationCode:i,codeVerifier:r,redirectUri:o,resource:s,addClientAuthentication:l}){var f;let p="authorization_code",g=e?.token_endpoint?new URL(e.token_endpoint):new URL("/token",n);if(e?.grant_types_supported&&!e.grant_types_supported.includes(p))throw new Error(`Incompatible auth server: does not support grant type ${p}`);let m=new Headers({"Content-Type":"application/x-www-form-urlencoded"}),_=new URLSearchParams({grant_type:p,code:i,code_verifier:r,redirect_uri:String(o)});if(l)l(m,_,n,e);else{let w=(f=e?.token_endpoint_auth_methods_supported)!==null&&f!==void 0?f:[],I=$U(t,w);UU(I,t,m,_)}s&&_.set("resource",s.href);let y=yield fetch(g,{method:"POST",headers:m,body:_});if(!y.ok)throw new Error(`Token exchange failed: HTTP ${y.status}`);return tP.parse(yield y.json())})}function Tie(s,l){return E(this,arguments,function*(n,{metadata:e,clientInformation:t,refreshToken:i,resource:r,addClientAuthentication:o}){var c;let d="refresh_token",f;if(e){if(f=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(d))throw new Error(`Incompatible auth server: does not support grant type ${d}`)}else f=new URL("/token",n);let p=new Headers({"Content-Type":"application/x-www-form-urlencoded"}),g=new URLSearchParams({grant_type:d,refresh_token:i});if(o)o(p,g,n,e);else{let _=(c=e?.token_endpoint_auth_methods_supported)!==null&&c!==void 0?c:[],y=$U(t,_);UU(y,t,p,g)}r&&g.set("resource",r.href);let m=yield fetch(f,{method:"POST",headers:p,body:g});if(!m.ok)throw new Error(`Token refresh failed: HTTP ${m.status}`);return tP.parse(b({refresh_token:i},yield m.json()))})}function kie(i,r){return E(this,arguments,function*(n,{metadata:e,clientMetadata:t}){let o;if(e){if(!e.registration_endpoint)throw new Error("Incompatible auth server: does not support dynamic client registration");o=new URL(e.registration_endpoint)}else o=new URL("/register",n);let s=yield fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw new Error(`Dynamic client registration failed: HTTP ${s.status}`);return jU.parse(yield s.json())})}var Kw=class extends Error{constructor(e,t){super(e),this.name="ParseError",this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}};function nP(n){}function GU(n){if(typeof n=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:e=nP,onError:t=nP,onRetry:i=nP,onComment:r}=n,o="",s=!0,l,c="",d="";function f(y){let w=s?y.replace(/^\xEF\xBB\xBF/,""):y,[I,k]=Aie(`${o}${w}`);for(let O of I)p(O);o=k,s=!1}function p(y){if(y===""){m();return}if(y.startsWith(":")){r&&r(y.slice(y.startsWith(": ")?2:1));return}let w=y.indexOf(":");if(w!==-1){let I=y.slice(0,w),k=y[w+1]===" "?2:1,O=y.slice(w+k);g(I,O,y);return}g(y,"",y)}function g(y,w,I){switch(y){case"event":d=w;break;case"data":c=`${c}${w}
`;break;case"id":l=w.includes("\0")?void 0:w;break;case"retry":/^\d+$/.test(w)?i(parseInt(w,10)):t(new Kw(`Invalid \`retry\` value: "${w}"`,{type:"invalid-retry",value:w,line:I}));break;default:t(new Kw(`Unknown field "${y.length>20?`${y.slice(0,20)}\u2026`:y}"`,{type:"unknown-field",field:y,value:w,line:I}));break}}function m(){c.length>0&&e({id:l,event:d||void 0,data:c.endsWith(`
`)?c.slice(0,-1):c}),l=void 0,c="",d=""}function _(y={}){o&&y.consume&&p(o),s=!0,l=void 0,c="",d="",o=""}return{feed:f,reset:_}}function Aie(n){let e=[],t="",i=0;for(;i<n.length;){let r=n.indexOf("\r",i),o=n.indexOf(`
`,i),s=-1;if(r!==-1&&o!==-1?s=Math.min(r,o):r!==-1?s=r:o!==-1&&(s=o),s===-1){t=n.slice(i);break}else{let l=n.slice(i,s);e.push(l),i=s+1,n[i-1]==="\r"&&n[i]===`
`&&i++}}return[e,t]}var Yw=class extends TransformStream{constructor({onError:e,onRetry:t,onComment:i}={}){let r;super({start(o){r=GU({onEvent:s=>{o.enqueue(s)},onError(s){e==="terminate"?o.error(s):typeof e=="function"&&e(s)},onRetry:t,onComment:i})},transform(o){r.feed(o)}})}};var Mie={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2},Jg=class extends Error{constructor(e,t){super(`Streamable HTTP error: ${t}`),this.code=e}},Qw=class{constructor(e,t){var i;this._url=e,this._resourceMetadataUrl=void 0,this._requestInit=t?.requestInit,this._authProvider=t?.authProvider,this._fetch=t?.fetch,this._sessionId=t?.sessionId,this._reconnectionOptions=(i=t?.reconnectionOptions)!==null&&i!==void 0?i:Mie}_authThenStart(){return E(this,null,function*(){var e;if(!this._authProvider)throw new wc("No auth provider");let t;try{t=yield Zw(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl})}catch(i){throw(e=this.onerror)===null||e===void 0||e.call(this,i),i}if(t!=="AUTHORIZED")throw new wc;return yield this._startOrAuthSse({resumptionToken:void 0})})}_commonHeaders(){return E(this,null,function*(){var e;let t={};if(this._authProvider){let r=yield this._authProvider.tokens();r&&(t.Authorization=`Bearer ${r.access_token}`)}this._sessionId&&(t["mcp-session-id"]=this._sessionId),this._protocolVersion&&(t["mcp-protocol-version"]=this._protocolVersion);let i=this._normalizeHeaders((e=this._requestInit)===null||e===void 0?void 0:e.headers);return new Headers(b(b({},t),i))})}_startOrAuthSse(e){return E(this,null,function*(){var t,i,r;let{resumptionToken:o}=e;try{let s=yield this._commonHeaders();s.set("Accept","text/event-stream"),o&&s.set("last-event-id",o);let l=yield((t=this._fetch)!==null&&t!==void 0?t:fetch)(this._url,{method:"GET",headers:s,signal:(i=this._abortController)===null||i===void 0?void 0:i.signal});if(!l.ok){if(l.status===401&&this._authProvider)return yield this._authThenStart();if(l.status===405)return;throw new Jg(l.status,`Failed to open SSE stream: ${l.statusText}`)}this._handleSseStream(l.body,e)}catch(s){throw(r=this.onerror)===null||r===void 0||r.call(this,s),s}})}_getNextReconnectionDelay(e){let t=this._reconnectionOptions.initialReconnectionDelay,i=this._reconnectionOptions.reconnectionDelayGrowFactor,r=this._reconnectionOptions.maxReconnectionDelay;return Math.min(t*Math.pow(i,e),r)}_normalizeHeaders(e){return e?e instanceof Headers?Object.fromEntries(e.entries()):Array.isArray(e)?Object.fromEntries(e):b({},e):{}}_scheduleReconnection(e,t=0){var i;let r=this._reconnectionOptions.maxRetries;if(r>0&&t>=r){(i=this.onerror)===null||i===void 0||i.call(this,new Error(`Maximum reconnection attempts (${r}) exceeded.`));return}let o=this._getNextReconnectionDelay(t);setTimeout(()=>{this._startOrAuthSse(e).catch(s=>{var l;(l=this.onerror)===null||l===void 0||l.call(this,new Error(`Failed to reconnect SSE stream: ${s instanceof Error?s.message:String(s)}`)),this._scheduleReconnection(e,t+1)})},o)}_handleSseStream(e,t){if(!e)return;let{onresumptiontoken:i,replayMessageId:r}=t,o;E(this,null,function*(){var l,c,d,f;try{let p=e.pipeThrough(new TextDecoderStream).pipeThrough(new Yw).getReader();for(;;){let{value:g,done:m}=yield p.read();if(m)break;if(g.id&&(o=g.id,i?.(g.id)),!g.event||g.event==="message")try{let _=Cw.parse(JSON.parse(g.data));r!==void 0&&Wg(_)&&(_.id=r),(l=this.onmessage)===null||l===void 0||l.call(this,_)}catch(_){(c=this.onerror)===null||c===void 0||c.call(this,_)}}}catch(p){if((d=this.onerror)===null||d===void 0||d.call(this,new Error(`SSE stream disconnected: ${p}`)),this._abortController&&!this._abortController.signal.aborted&&o!==void 0)try{this._scheduleReconnection({resumptionToken:o,onresumptiontoken:i,replayMessageId:r},0)}catch(g){(f=this.onerror)===null||f===void 0||f.call(this,new Error(`Failed to reconnect: ${g instanceof Error?g.message:String(g)}`))}}})}start(){return E(this,null,function*(){if(this._abortController)throw new Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController})}finishAuth(e){return E(this,null,function*(){if(!this._authProvider)throw new wc("No auth provider");if((yield Zw(this._authProvider,{serverUrl:this._url,authorizationCode:e,resourceMetadataUrl:this._resourceMetadataUrl}))!=="AUTHORIZED")throw new wc("Failed to authorize")})}close(){return E(this,null,function*(){var e,t;(e=this._abortController)===null||e===void 0||e.abort(),(t=this.onclose)===null||t===void 0||t.call(this)})}send(e,t){return E(this,null,function*(){var i,r,o,s;try{let{resumptionToken:l,onresumptiontoken:c}=t||{};if(l){this._startOrAuthSse({resumptionToken:l,replayMessageId:xw(e)?e.id:void 0}).catch(w=>{var I;return(I=this.onerror)===null||I===void 0?void 0:I.call(this,w)});return}let d=yield this._commonHeaders();d.set("content-type","application/json"),d.set("accept","application/json, text/event-stream");let f=S(b({},this._requestInit),{method:"POST",headers:d,body:JSON.stringify(e),signal:(i=this._abortController)===null||i===void 0?void 0:i.signal}),p=yield((r=this._fetch)!==null&&r!==void 0?r:fetch)(this._url,f),g=p.headers.get("mcp-session-id");if(g&&(this._sessionId=g),!p.ok){if(p.status===401&&this._authProvider){if(this._resourceMetadataUrl=HU(p),(yield Zw(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl}))!=="AUTHORIZED")throw new wc;return this.send(e)}let w=yield p.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${p.status}): ${w}`)}if(p.status===202){S$(e)&&this._startOrAuthSse({resumptionToken:void 0}).catch(w=>{var I;return(I=this.onerror)===null||I===void 0?void 0:I.call(this,w)});return}let _=(Array.isArray(e)?e:[e]).filter(w=>"method"in w&&"id"in w&&w.id!==void 0).length>0,y=p.headers.get("content-type");if(_)if(y?.includes("text/event-stream"))this._handleSseStream(p.body,{onresumptiontoken:c});else if(y?.includes("application/json")){let w=yield p.json(),I=Array.isArray(w)?w.map(k=>Cw.parse(k)):[Cw.parse(w)];for(let k of I)(o=this.onmessage)===null||o===void 0||o.call(this,k)}else throw new Jg(-1,`Unexpected content type: ${y}`)}catch(l){throw(s=this.onerror)===null||s===void 0||s.call(this,l),l}})}get sessionId(){return this._sessionId}terminateSession(){return E(this,null,function*(){var e,t,i;if(this._sessionId)try{let r=yield this._commonHeaders(),o=S(b({},this._requestInit),{method:"DELETE",headers:r,signal:(e=this._abortController)===null||e===void 0?void 0:e.signal}),s=yield((t=this._fetch)!==null&&t!==void 0?t:fetch)(this._url,o);if(!s.ok&&s.status!==405)throw new Jg(s.status,`Failed to terminate session: ${s.statusText}`);this._sessionId=void 0}catch(r){throw(i=this.onerror)===null||i===void 0||i.call(this,r),r}})}setProtocolVersion(e){this._protocolVersion=e}get protocolVersion(){return this._protocolVersion}};function Xw(n){var e;if(n.title!==void 0&&n.title!=="")return n.title;if("annotations"in n){let t=n;if(!((e=t.annotations)===null||e===void 0)&&e.title)return t.annotations.title}return n.name}var Jw=class n{formatToolForOpenAI(e){let t={};return Object.entries(e.inputSchema.properties).forEach(([i,r])=>{let o="";e.annotations&&e.annotations[i]&&e.annotations[i].description&&(o=e.annotations[i]?e.annotations[i].description:null),t[i]={type:r.type||"object",description:o||`user questions on ${e.title}`}}),{type:"function",function:{name:e.name,description:e.description.trim(),parameters:{type:"object",properties:t,required:e.inputSchema.required}}}}formatMultipleTools(e){return e.map(t=>this.formatToolForOpenAI(t))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})};var qi=class n{constructor(e){this.toolformatterService=e}client=null;transport=null;sessionId=void 0;notificationCount=0;connectionStatusSubject=new fn(!1);notificationsSubject=new ve;streamingSubject=new ve;elicitRequestSubject=new ve;connectionStatus$=this.connectionStatusSubject.asObservable();notifications$=this.notificationsSubject.asObservable();elicitRequests$=this.elicitRequestSubject.asObservable();streaming$=this.streamingSubject.asObservable();toolsSubject=new fn([]);promptsSubject=new fn([]);resourceSubject=new fn([]);mcpServerInstructionsSubject=new ve;mcpServerInstructions$=this.mcpServerInstructionsSubject.asObservable();tools$=this.toolsSubject.asObservable();promtps$=this.promptsSubject.asObservable();resources$=this.resourceSubject.asObservable();messageSource=new fn(!1);currentMessage$=this.messageSource.asObservable();currentRequest=null;elicitResponseSubject=new ve;elicitResponses$=this.elicitResponseSubject.asObservable();notificationsToolLastEventId=void 0;connect(e){return E(this,null,function*(){let t=e;this.client&&(yield this.disconnect()),console.log(`Connecting to ${t}...`);try{this.client=new Gw({name:"angular-mcp-client",version:"1.0.0"},{capabilities:{elicitation:{form:{}},sampling:{},completions:{}}}),this.transport=new Qw(new URL(t),{sessionId:localStorage.getItem("mcp_session_id")||void 0,requestInit:{headers:new Headers({Accept:"application/json","Content-Type":"application/json, text/event-stream"}),cache:"no-store"},reconnectionOptions:{maxReconnectionDelay:3e4,initialReconnectionDelay:1e3,reconnectionDelayGrowFactor:1.5,maxRetries:3}}),this.transport.onerror=i=>E(this,null,function*(){console.error("Transport error:",i),i.message.includes("session")&&(localStorage.removeItem("mcp_session_id"),this.connectionStatusSubject.next(!1),this.messageSource.next(!1))}),this.client.onerror=i=>E(this,null,function*(){console.error("Client error:",i),this.notificationsSubject.next({type:"error",message:i.message}),this.connectionStatusSubject.next(!1),this.messageSource.next(!1),localStorage.removeItem("mcp_session_id")}),this.initializeElicitationHandler(this.client),this.samplingCapability(this.client),this.progressNotificationHandler(this.client),this.loggingNotificationHandler(this.client),this.resourceListChangingHandler(this.client),yield this.client.connect(this.transport,{timeout:42e4,maxTotalTimeout:42e4}),this.mcpServerInstructionsSubject.next(this.client.getInstructions()),this.sessionId=this.transport.sessionId,this.sessionId&&localStorage.setItem("mcp_session_id",this.sessionId),console.log("Connected to MCP server"),this.connectionStatusSubject.next(!0),this.messageSource.next(!0),this.listTools(),this.listPrompts(),this.listResources()}catch(i){throw console.error("Failed to connect:",i),this.client=null,this.transport=null,this.connectionStatusSubject.next(!1),this.messageSource.next(!1),this.toolsSubject.next([]),this.promptsSubject.next([]),this.resourceSubject.next([]),i}})}completion(e,t,i=""){return E(this,null,function*(){try{return yield this.client?.complete({ref:{type:"ref/prompt",name:"example"},argument:{name:e,value:t},context:{arguments:{previousArg:i}}})}catch(r){throw new Error(`Error : ${JSON.stringify(r)}`)}})}resourceListChangingHandler(e){e.setNotificationHandler(yM,t=>E(this,null,function*(){console.log("Resource list changed notification received"),this.notificationsSubject.next({type:"resource-change",message:"Resource list has changed"});try{if(!this.client){console.log("Client disconnected, cannot fetch resources");return}let i=yield this.client.request({method:"resources/list",params:{}},hf);this.notificationsSubject.next({type:"resource-list",resources:i.resources})}catch(i){console.log("Failed to list resources after change notification",i),this.notificationsSubject.next({type:"error",message:"Failed to fetch updated resources"})}}))}loggingNotificationHandler(e){e.setNotificationHandler(EM,t=>{let i={type:"",message:"",status:""};if(t.params.data&&typeof t.params.data=="object"){i={type:"",message:"",status:""};let r=Object.keys(t.params.data);i=t.params.data;for(let o of r)if(i[o]=="streaming"){let s={type:i[o],level:t.params.level,message:i.message,status:i.status};this.streamingSubject.next(s)}}else{this.notificationCount++;let r={type:"log",level:t.params.level,message:t.params.data,count:this.notificationCount};console.log("MCP Notification:",r),this.notificationsSubject.next(r)}})}progressNotificationHandler(e){e.setNotificationHandler(df,t=>{let i={type:"",message:"",status:""};if(t.params.message&&typeof t.params.message=="object"){i={type:"",message:"",status:""};let r=Object.keys(t.params.message);i=t.params.message;for(let o of r)if(i[o]=="streaming"){let s={type:i[o],progress:t.params.progress,total:t.params.total,message:i.message,progressToken:t.params.progressToken,status:i.status};this.streamingSubject.next(s)}}else{console.log("On progress : ",t),this.notificationCount++;let r={type:"log",progress:t.params.progress,total:t.params.total,message:t.params.message,progressToken:t.params.progressToken,count:this.notificationCount};console.log("MCP Notification:",r),this.notificationsSubject.next(r)}})}initializeElicitationHandler(e){e.setRequestHandler(SM,(t,i)=>{let r=i.requestId;return this.handleElicitRequest(t,r),new Promise((o,s)=>{let l=!1,c=36e4,d=setTimeout(()=>{l||(l=!0,f.unsubscribe(),console.warn(`Request ${r} timed out after ${c}ms`),o({action:"cancel",content:{reason:"Request timeout"}}))},c),f=this.elicitResponses$.subscribe({next:p=>{if(console.log("Response id : ",p),!(p?.requestId!==r&&r!==0)){if(l){console.warn(`Request ${r} already resolved, ignoring duplicate response`);return}l=!0,f.unsubscribe(),console.log("resp : ",p),o({requestId:i.requestId,action:p?.action||"cancel",content:p?.content||{}})}},error:()=>{l||(l=!0,clearTimeout(d),f.unsubscribe(),o({requestId:i.requestId,action:"decline"}))}});if(i.signal){let p=()=>{l||(l=!0,clearTimeout(d),f.unsubscribe(),console.log(`Request ${r} was aborted`),o({action:"cancel",content:{reason:"Request aborted"}}))};i.signal.addEventListener("abort",p)}})})}reconnect(){return E(this,null,function*(){let e=localStorage.getItem("mcp_session_id"),t=localStorage.getItem("mcp_server");if(e&&t)this.sessionId=e,yield this.connect(t);else throw new Error("No stored session ID found")})}samplingCapability(e){e.setRequestHandler(IM,()=>({model:"test-model",role:"assistant",content:{type:"text",text:"Test response"}}))}handleElicitRequest(e,t){let i=e.params.requestedSchema,r=this.parseSchemaToFields(i);this.elicitRequestSubject.next({requestId:t,message:e.params.message,schema:i,fields:r})}parseSchemaToFields(e){let t=e.properties,i=e.required||[];return Object.entries(t).map(([r,o])=>({name:r,title:o.title||r,description:o.description,type:o.type||"string",required:i.includes(r),enum:o.enum,minimum:o.minimum,maximum:o.maximum,minLength:o.minLength,maxLength:o.maxLength,format:o.format,default:o.default}))}submitElicitResponse(e){this.elicitResponseSubject.next(e)}listTools(){return E(this,null,function*(){if(!this.client)throw new Error("Client not connected");let e=yield this.client.request({method:"tools/list",params:{}},Qg);for(let t of e.tools)t.displayName=Xw(t);this.toolsSubject.next(e.tools)})}createOpenAiToolSchema(e){return this.toolformatterService.formatMultipleTools(e)}listPrompts(){return E(this,null,function*(){if(!this.client)throw new Error("Client not connected");let e=yield this.client.request({method:"prompts/list",params:{}},Kg);for(let t of e.prompts)t.displayName=Xw(t);console.log("Prompt : ",e.prompts),this.promptsSubject.next(e.prompts)})}getPrompt(e){return E(this,null,function*(){if(!this.client)throw new Error("Client not connected");return yield this.client.request({method:"prompts/get",params:{promptId:e}},Yg)})}callElicitation(e,t=null){return E(this,null,function*(){if(!this.client)throw new Error("Client not connected");return yield this.client.request({method:"elicitation/create",params:{message:e,requestedSchema:t}},DM)})}listResources(){return E(this,null,function*(){if(!this.client)throw new Error("Client not connected");let e=yield this.client.request({method:"resources/list",params:{}},hf);for(let t of e.resources)console.log("Resources : ",t),t.displayName=Xw(t);this.resourceSubject.next(e.resources)})}readResource(e){if(!this.client)throw new Error("Client not connected");return this.client.request({method:"resources/read",params:{resourceLink:e}},Zg)}disconnect(){return E(this,null,function*(){if(this.client&&this.transport)try{if(this.transport.sessionId)try{console.log("Terminating session before exit..."),yield this.transport.terminateSession(),console.log("Session terminated successfully")}catch(e){console.error("Error terminating session:",e)}yield this.transport?.close(),this.client=null,this.transport=null,this.sessionId=void 0,this.connectionStatusSubject.next(!1),this.messageSource.next(!1),localStorage.removeItem("mcp_session_id")}catch(e){console.error("Error during disconnect:",e)}})}callTool(e,t){return E(this,null,function*(){let i=this.generateProgressToken();if(!this.client)throw new Error("Client not connected");return yield this.client.request({method:"tools/call",params:{name:e,arguments:t,_meta:{stream:!0,progressToken:i}}},fl)})}longRunningTool(e,t){return E(this,null,function*(){let i=this,r=this.generateProgressToken(),o=s=>{i.notificationsToolLastEventId=s,console.log(`Updated resumption token: ${s}`),console.log(`Updated resumption token: ${i.notificationsToolLastEventId}`)};if(!this.client)throw new Error("Client not connected");return yield this.client.request({method:"tools/call",params:{name:e,arguments:t,_meta:{stream:!0,progressToken:r}}},fl,{resumptionToken:i.notificationsToolLastEventId,onresumptiontoken:o})})}callToolWithStream(e,t){let i=this.generateProgressToken(),r=new ve,o="";if(!this.client)throw new Error("Client not connected");return this.client.request({method:"tools/call",params:{name:e,arguments:t,_meta:{progressToken:i,stream:!0}}},fl).then(s=>{this.isComplete(s)?(o+=this.extractContent(s),r.next({content:o,progress:100}),r.complete()):this.handleStreamingResponse(s,r,o)}).catch(s=>{r.error(s)}),r.asObservable()}handleStreamingResponse(e,t,i){e.stream?(e.stream.on("data",r=>{i+=this.extractContent(r),t.next({content:i,progress:this.extractProgress(r)})}),e.stream.on("end",()=>{t.complete()}),e.stream.on("error",r=>{t.error(r)})):e._meta?.streamId?console.log(e._meta?.streamId):(i+=this.extractContent(e),t.next({content:i,progress:100}),t.complete())}handleToolResponse(e,t,i){let r=this.extractContent(e);i+=r,console.log("streaming output : ",i),t.next({content:i,progress:this.extractProgress(e)}),this.isComplete(e)?t.complete():setTimeout(()=>{if(!this.client)throw new Error("Client not connected");this.client.request({method:"tools/call",params:{name:"get_progress",arguments:{progressToken:e._meta?.progressToken}}},fl).then(o=>{this.handleToolResponse(o,t,i)}).catch(o=>{t.error(o)})},500)}extractContent(e){return e.structuredContent?.result||e.output||""}extractProgress(e){return e._meta?.progress||e.progress}isComplete(e){return e._meta?.complete||e.status==="completed"}generateProgressToken(){return Math.random().toString(36).substring(2)+Date.now().toString(36)}static \u0275fac=function(t){return new(t||n)(Se(Jw))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})};var iH=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(Ce(Tn),Ce(Ue))};static \u0275dir=Te({type:n})}return n})(),s_=(()=>{class n extends iH{static \u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})();static \u0275dir=Te({type:n,features:[St]})}return n})(),Wu=new oe(""),Oie={provide:Wu,useExisting:si(()=>oP),multi:!0},oP=(()=>{class n extends s_{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})();static \u0275dir=Te({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&Me("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Vt([Oie]),St]})}return n})(),Rie={provide:Wu,useExisting:si(()=>Ec),multi:!0};function Nie(){let n=$o()?$o().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Fie=new oe(""),Ec=(()=>{class n extends iH{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!Nie())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(Ce(Tn),Ce(Ue),Ce(Fie,8))};static \u0275dir=Te({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&Me("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},standalone:!1,features:[Vt([Rie]),St]})}return n})();function sP(n){return n==null||aP(n)===0}function aP(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Ic=new oe(""),vf=new oe(""),Lie=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ps=class{static min(e){return rH(e)}static max(e){return oH(e)}static required(e){return jie(e)}static requiredTrue(e){return Bie(e)}static email(e){return Vie(e)}static minLength(e){return zie(e)}static maxLength(e){return $ie(e)}static pattern(e){return Uie(e)}static nullValidator(e){return tx()}static compose(e){return dH(e)}static composeAsync(e){return hH(e)}};function rH(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function oH(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function jie(n){return sP(n.value)?{required:!0}:null}function Bie(n){return n.value===!0?null:{required:!0}}function Vie(n){return sP(n.value)||Lie.test(n.value)?null:{email:!0}}function zie(n){return e=>{let t=e.value?.length??aP(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function $ie(n){return e=>{let t=e.value?.length??aP(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function Uie(n){if(!n)return tx;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(sP(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function tx(n){return null}function sH(n){return n!=null}function aH(n){return nl(n)?Un(n):n}function lH(n){let e={};return n.forEach(t=>{e=t!=null?b(b({},e),t):e}),Object.keys(e).length===0?null:e}function cH(n,e){return e.map(t=>t(n))}function Hie(n){return!n.validate}function uH(n){return n.map(e=>Hie(e)?e:t=>e.validate(t))}function dH(n){if(!n)return null;let e=n.filter(sH);return e.length==0?null:function(t){return lH(cH(t,e))}}function lP(n){return n!=null?dH(uH(n)):null}function hH(n){if(!n)return null;let e=n.filter(sH);return e.length==0?null:function(t){let i=cH(t,e).map(aH);return vm(i).pipe(Pe(lH))}}function cP(n){return n!=null?hH(uH(n)):null}function ZU(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function fH(n){return n._rawValidators}function pH(n){return n._rawAsyncValidators}function iP(n){return n?Array.isArray(n)?n:[n]:[]}function nx(n,e){return Array.isArray(n)?n.includes(e):n===e}function KU(n,e){let t=iP(e);return iP(n).forEach(r=>{nx(t,r)||t.push(r)}),t}function YU(n,e){return iP(e).filter(t=>!nx(n,t))}var ix=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=lP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=cP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Fr=class extends ix{name;get formDirective(){return null}get path(){return null}},pl=class extends ix{_parent=null;name=null;valueAccessor=null},rx=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},qie={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},xMe=S(b({},qie),{"[class.ng-submitted]":"isSubmitted"}),bf=(()=>{class n extends rx{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(Ce(pl,2))};static \u0275dir=Te({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&lt("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[St]})}return n})(),mH=(()=>{class n extends rx{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(Ce(Fr,10))};static \u0275dir=Te({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&lt("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[St]})}return n})();var e_="VALID",ex="INVALID",pf="PENDING",t_="DISABLED",xc=class{},ox=class extends xc{value;source;constructor(e,t){super(),this.value=e,this.source=t}},i_=class extends xc{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},r_=class extends xc{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},mf=class extends xc{status;source;constructor(e,t){super(),this.status=e,this.source=t}},sx=class extends xc{source;constructor(e){super(),this.source=e}},ax=class extends xc{source;constructor(e){super(),this.source=e}};function uP(n){return(dx(n)?n.validators:n)||null}function Wie(n){return Array.isArray(n)?lP(n):n||null}function dP(n,e){return(dx(e)?e.asyncValidators:n)||null}function Gie(n){return Array.isArray(n)?cP(n):n||null}function dx(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function gH(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new ye(1e3,"");if(!i[t])throw new ye(1001,"")}function _H(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new ye(1002,"")})}var gf=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Or(this.statusReactive)}set status(e){Or(()=>this.statusReactive.set(e))}_status=Rr(()=>this.statusReactive());statusReactive=rn(void 0);get valid(){return this.status===e_}get invalid(){return this.status===ex}get pending(){return this.status==pf}get disabled(){return this.status===t_}get enabled(){return this.status!==t_}errors;get pristine(){return Or(this.pristineReactive)}set pristine(e){Or(()=>this.pristineReactive.set(e))}_pristine=Rr(()=>this.pristineReactive());pristineReactive=rn(!0);get dirty(){return!this.pristine}get touched(){return Or(this.touchedReactive)}set touched(e){Or(()=>this.touchedReactive.set(e))}_touched=Rr(()=>this.touchedReactive());touchedReactive=rn(!1);get untouched(){return!this.touched}_events=new ve;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(KU(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(KU(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(YU(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(YU(e,this._rawAsyncValidators))}hasValidator(e){return nx(this._rawValidators,e)}hasAsyncValidator(e){return nx(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(S(b({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new r_(!0,i))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new r_(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(S(b({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new i_(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new i_(!0,i))}markAsPending(e={}){this.status=pf;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new mf(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(S(b({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=t_,this.errors=null,this._forEachChild(r=>{r.disable(S(b({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ox(this.value,i)),this._events.next(new mf(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(S(b({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=e_,this._forEachChild(i=>{i.enable(S(b({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(S(b({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===e_||this.status===pf)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ox(this.value,t)),this._events.next(new mf(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(S(b({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?t_:e_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=pf,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let i=aH(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new mf(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new je,this.statusChanges=new je}_calculateStatus(){return this._allControlsDisabled()?t_:this.errors?ex:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pf)?pf:this._anyControlsHaveStatus(ex)?ex:e_}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new i_(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new r_(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){dx(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Wie(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Gie(this._rawAsyncValidators)}},Cc=class extends gf{constructor(e,t,i){super(uP(t),dP(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){_H(this,!0,e),Object.keys(e).forEach(i=>{gH(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var rP=class extends Cc{};var a_=new oe("",{providedIn:"root",factory:()=>hx}),hx="always";function fx(n,e){return[...e.path,n]}function lx(n,e,t=hx){hP(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Kie(n,e),Qie(n,e),Yie(n,e),Zie(n,e)}function QU(n,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),ux(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function cx(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Zie(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function hP(n,e){let t=fH(n);e.validator!==null?n.setValidators(ZU(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=pH(n);e.asyncValidator!==null?n.setAsyncValidators(ZU(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();cx(e._rawValidators,r),cx(e._rawAsyncValidators,r)}function ux(n,e){let t=!1;if(n!==null){if(e.validator!==null){let r=fH(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.validator);o.length!==r.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let r=pH(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(t=!0,n.setAsyncValidators(o))}}}let i=()=>{};return cx(e._rawValidators,i),cx(e._rawAsyncValidators,i),t}function Kie(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&vH(n,e)})}function Yie(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&vH(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function vH(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Qie(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function bH(n,e){n==null,hP(n,e)}function Xie(n,e){return ux(n,e)}function yH(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Jie(n){return Object.getPrototypeOf(n.constructor)===s_}function wH(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function xH(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===Ec?t=o:Jie(o)?i=o:r=o}),r||i||t||null}function ere(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var tre={provide:Fr,useExisting:si(()=>fP)},n_=Promise.resolve(),fP=(()=>{class n extends Fr{callSetDisabledState;get submitted(){return Or(this.submittedReactive)}_submitted=Rr(()=>this.submittedReactive());submittedReactive=rn(!1);_directives=new Set;form;ngSubmit=new je;options;constructor(t,i,r){super(),this.callSetDisabledState=r,this.form=new Cc({},lP(t),cP(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){n_.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),lx(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){n_.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){n_.then(()=>{let i=this._findContainer(t.path),r=new Cc({});bH(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){n_.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){n_.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),wH(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new sx(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new ax(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(i){return new(i||n)(Ce(Ic,10),Ce(vf,10),Ce(a_,8))};static \u0275dir=Te({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&Me("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Vt([tre]),St]})}return n})();function XU(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function JU(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var o_=class extends gf{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(uP(t),dP(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),dx(t)&&(t.nonNullable||t.initialValueIsDefault)&&(JU(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){XU(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){XU(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){JU(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var nre=n=>n instanceof o_,ire=(()=>{class n extends Fr{_parent;ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return fx(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static \u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})();static \u0275dir=Te({type:n,standalone:!1,features:[St]})}return n})();var rre={provide:pl,useExisting:si(()=>l_)},eH=Promise.resolve(),l_=(()=>{class n extends pl{_changeDetectorRef;callSetDisabledState;control=new o_;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new je;constructor(t,i,r,o,s,l){super(),this._changeDetectorRef=s,this.callSetDisabledState=l,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=xH(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),yH(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){lx(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){eH.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&Vn(i);eH.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?fx(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(Ce(Fr,9),Ce(Ic,10),Ce(vf,10),Ce(Wu,10),Ce(Wn,8),Ce(a_,8))};static \u0275dir=Te({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Vt([rre]),St,jn]})}return n})();var CH=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Te({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),ore={provide:Wu,useExisting:si(()=>pP),multi:!0},pP=(()=>{class n extends s_{writeValue(t){let i=t??"";this.setProperty("value",i)}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})();static \u0275dir=Te({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&Me("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Vt([ore]),St]})}return n})();var EH=new oe("");var sre={provide:Fr,useExisting:si(()=>yf)},yf=(()=>{class n extends Fr{callSetDisabledState;get submitted(){return Or(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Rr(()=>this._submittedReactive());_submittedReactive=rn(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new je;constructor(t,i,r){super(),this.callSetDisabledState=r,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ux(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let i=this.form.get(t.path);return lx(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){QU(t.control||null,t,!1),ere(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this._submittedReactive.set(!0),wH(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new sx(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,i={}){this.form.reset(t,i),this._submittedReactive.set(!1),i?.emitEvent!==!1&&this.form._events.next(new ax(this.form))}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,r=this.form.get(t.path);i!==r&&(QU(i||null,t),nre(r)&&(lx(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);bH(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&Xie(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){hP(this.form,this),this._oldForm&&ux(this._oldForm,this)}static \u0275fac=function(i){return new(i||n)(Ce(Ic,10),Ce(vf,10),Ce(a_,8))};static \u0275dir=Te({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&Me("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Vt([sre]),St,jn]})}return n})(),are={provide:Fr,useExisting:si(()=>IH)},IH=(()=>{class n extends ire{name=null;constructor(t,i,r){super(),this._parent=t,this._setValidators(i),this._setAsyncValidators(r)}_checkParentType(){SH(this._parent)}static \u0275fac=function(i){return new(i||n)(Ce(Fr,13),Ce(Ic,10),Ce(vf,10))};static \u0275dir=Te({type:n,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},standalone:!1,features:[Vt([are]),St]})}return n})(),lre={provide:Fr,useExisting:si(()=>px)},px=(()=>{class n extends Fr{_parent;name=null;constructor(t,i,r){super(),this._parent=t,this._setValidators(i),this._setAsyncValidators(r)}ngOnInit(){SH(this._parent),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective?.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return fx(this.name==null?this.name:this.name.toString(),this._parent)}static \u0275fac=function(i){return new(i||n)(Ce(Fr,13),Ce(Ic,10),Ce(vf,10))};static \u0275dir=Te({type:n,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},standalone:!1,features:[Vt([lre]),St]})}return n})();function SH(n){return!(n instanceof IH)&&!(n instanceof yf)&&!(n instanceof px)}var cre={provide:pl,useExisting:si(()=>mP)},mP=(()=>{class n extends pl{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new je;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,i,r,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=xH(this,o)}ngOnChanges(t){this._added||this._setUpControl(),yH(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return fx(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(Ce(Fr,13),Ce(Ic,10),Ce(vf,10),Ce(Wu,10),Ce(EH,8))};static \u0275dir=Te({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Vt([cre]),St,jn]})}return n})();var ure={provide:Wu,useExisting:si(()=>mx),multi:!0};function DH(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function dre(n){return n.split(":")[0]}var mx=(()=>{class n extends s_{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=D(Mr).injector;appRefDestroyRef=this.appRefInjector.get(Ui);destroyRef=D(Ui);cdr=D(Wn);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefDestroyRef.destroyed||(this._queuedWrite=!0,vi({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let i=this._getOptionId(t),r=DH(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=dre(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})();static \u0275dir=Te({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&Me("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Vt([ure]),St]})}return n})(),TH=(()=>{class n{_element;_renderer;_select;id;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(DH(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||n)(Ce(Ue),Ce(Tn),Ce(mx,9))};static \u0275dir=Te({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),hre={provide:Wu,useExisting:si(()=>kH),multi:!0};function tH(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function fre(n){return n.split(":")[0]}var kH=(()=>{class n extends s_{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let l=0;l<s.length;l++){let c=s[l],d=this._getOptionValue(c.value);r.push(d)}}else{let s=i.options;for(let l=0;l<s.length;l++){let c=s[l];if(c.selected){let d=this._getOptionValue(c.value);r.push(d)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=fre(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})();static \u0275dir=Te({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&Me("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Vt([hre]),St]})}return n})(),AH=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(tH(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(tH(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(Ce(Ue),Ce(Tn),Ce(kH,9))};static \u0275dir=Te({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function MH(n){return typeof n=="number"?n:parseFloat(n)}var PH=(()=>{class n{_validator=tx;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):tx,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Te({type:n,features:[jn]})}return n})(),pre={provide:Ic,useExisting:si(()=>gP),multi:!0},gP=(()=>{class n extends PH{max;inputName="max";normalizeInput=t=>MH(t);createValidator=t=>oH(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})();static \u0275dir=Te({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Ut("max",r._enabled?r.max:null)},inputs:{max:"max"},standalone:!1,features:[Vt([pre]),St]})}return n})(),mre={provide:Ic,useExisting:si(()=>_P),multi:!0},_P=(()=>{class n extends PH{min;inputName="min";normalizeInput=t=>MH(t);createValidator=t=>rH(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})();static \u0275dir=Te({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Ut("min",r._enabled?r.min:null)},inputs:{min:"min"},standalone:!1,features:[Vt([mre]),St]})}return n})();var OH=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=$e({type:n});static \u0275inj=Ve({})}return n})(),_f=class extends gf{constructor(e,t,i){super(uP(t),dP(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){_H(this,!1,e),e.forEach((i,r)=>{gH(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>i._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function nH(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var RH=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,i=null){let r=this._reduceControls(t),o={};return nH(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new Cc(r,o)}record(t,i=null){let r=this._reduceControls(t);return new rP(r,i)}control(t,i,r){let o={};return this.useNonNullable?(nH(i)?o=i:(o.validators=i,o.asyncValidators=r),new o_(t,S(b({},o),{nonNullable:!0}))):new o_(t,i,r)}array(t,i,r){let o=t.map(s=>this._createControl(s));return new _f(o,i,r)}_reduceControls(t){let i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){if(t instanceof o_)return t;if(t instanceof gf)return t;if(Array.isArray(t)){let i=t[0],r=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(i,r,o)}else return this.control(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var da=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:a_,useValue:t.callSetDisabledState??hx}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=$e({type:n});static \u0275inj=Ve({imports:[OH]})}return n})(),gx=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:EH,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:a_,useValue:t.callSetDisabledState??hx}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=$e({type:n});static \u0275inj=Ve({imports:[OH]})}return n})();function Gu(n){return n.buttons===0||n.detail===0}function Zu(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var vP;function NH(){if(vP==null){let n=typeof document<"u"?document.head:null;vP=!!(n&&(n.createShadowRoot||n.attachShadow))}return vP}function bP(n){if(NH()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function wf(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){let e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function eo(n){return n.composedPath?n.composedPath()[0]:n.target}var yP;try{yP=typeof Intl<"u"&&Intl.v8BreakIterator}catch{yP=!1}var Gt=(()=>{class n{_platformId=D(ia);isBrowser=this._platformId?sl(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||yP)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var c_;function FH(){if(c_==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>c_=!0}))}finally{c_=c_||!1}return c_}function xf(n){return FH()?n:!!n.capture}function Lr(n,e=0){return LH(n)?Number(n):arguments.length===2?e:0}function LH(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function jr(n){return n instanceof Ue?n.nativeElement:n}var jH=new oe("cdk-input-modality-detector-options"),BH={ignoreKeys:[18,17,224,91,16]},VH=650,wP={passive:!0,capture:!0},zH=(()=>{class n{_platform=D(Gt);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new fn(null);_options;_lastTouchMs=0;_onKeydown=t=>{this._options?.ignoreKeys?.some(i=>i===t.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=eo(t))};_onMousedown=t=>{Date.now()-this._lastTouchMs<VH||(this._modality.next(Gu(t)?"keyboard":"mouse"),this._mostRecentTarget=eo(t))};_onTouchstart=t=>{if(Zu(t)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=eo(t)};constructor(){let t=D(De),i=D(Qe),r=D(jH,{optional:!0});if(this._options=b(b({},BH),r),this.modalityDetected=this._modality.pipe(xm(1)),this.modalityChanged=this.modalityDetected.pipe(gh()),this._platform.isBrowser){let o=D(_i).createRenderer(null,null);this._listenerCleanups=t.runOutsideAngular(()=>[o.listen(i,"keydown",this._onKeydown,wP),o.listen(i,"mousedown",this._onMousedown,wP),o.listen(i,"touchstart",this._onTouchstart,wP)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(t=>t())}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),u_=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(u_||{}),$H=new oe("cdk-focus-monitor-default-options"),vx=xf({passive:!0,capture:!0}),ha=(()=>{class n{_ngZone=D(De);_platform=D(Gt);_inputModalityDetector=D(zH);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=D(Qe);_stopInputModalityDetector=new ve;constructor(){let t=D($H,{optional:!0});this._detectionMode=t?.detectionMode||u_.IMMEDIATE}_rootNodeFocusAndBlurListener=t=>{let i=eo(t);for(let r=i;r;r=r.parentElement)t.type==="focus"?this._onFocus(t,r):this._onBlur(t,r)};monitor(t,i=!1){let r=jr(t);if(!this._platform.isBrowser||r.nodeType!==1)return Re();let o=bP(r)||this._document,s=this._elementInfo.get(r);if(s)return i&&(s.checkChildren=!0),s.subject;let l={checkChildren:i,subject:new ve,rootNode:o};return this._elementInfo.set(r,l),this._registerGlobalListeners(l),l.subject}stopMonitoring(t){let i=jr(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){let o=jr(t),s=this._document.activeElement;o===s?this._getClosestElementsInfo(o).forEach(([l,c])=>this._originChanged(l,i,c)):(this._setOrigin(i),typeof o.focus=="function"&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getWindow(){return this._document.defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===u_.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused",i==="touch"),t.classList.toggle("cdk-keyboard-focused",i==="keyboard"),t.classList.toggle("cdk-mouse-focused",i==="mouse"),t.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&i,this._detectionMode===u_.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?VH:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(t,i){let r=this._elementInfo.get(i),o=eo(t);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(t,i){let r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,vx),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,vx)}),this._rootNodeFocusListenerCount.set(i,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(wn(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){let i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,vx),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,vx),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){let i=[];return this._elementInfo.forEach((r,o)=>{(o===t||r.checkChildren&&o.contains(t))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!i||i===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let o=t.labels;if(o){for(let s=0;s<o.length;s++)if(o[s].contains(i))return!0}return!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var bx=new WeakMap,ir=(()=>{class n{_appRef;_injector=D(We);_environmentInjector=D(Fn);load(t){let i=this._appRef=this._appRef||this._injector.get(Mr),r=bx.get(i);r||(r={loaders:new Set,refs:[]},bx.set(i,r),i.onDestroy(()=>{bx.get(i)?.refs.forEach(o=>o.destroy()),bx.delete(i)})),r.loaders.has(t)||(r.loaders.add(t),r.refs.push(T0(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var UH=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Fe({type:n,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(i,r){},styles:[`.cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}
`],encapsulation:2,changeDetection:0})}return n})();function Cf(n){return Array.isArray(n)?n:[n]}var HH=new Set,Ku,yx=(()=>{class n{_platform=D(Gt);_nonce=D(Bh,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):_re}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&gre(t,this._nonce),this._matchMedia(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gre(n,e){if(!HH.has(n))try{Ku||(Ku=document.createElement("style"),e&&Ku.setAttribute("nonce",e),Ku.setAttribute("type","text/css"),document.head.appendChild(Ku)),Ku.sheet&&(Ku.sheet.insertRule(`@media ${n} {body{ }}`,0),HH.add(n))}catch(t){console.error(t)}}function _re(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var xP=(()=>{class n{_mediaMatcher=D(yx);_zone=D(De);_queries=new Map;_destroySubject=new ve;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return qH(Cf(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let r=qH(Cf(t)).map(s=>this._registerQuery(s).observable),o=fh(r);return o=Hl(o.pipe(Kn(1)),o.pipe(xm(1),Ha(0))),o.pipe(Pe(s=>{let l={matches:!1,breakpoints:{}};return s.forEach(({matches:c,query:d})=>{l.matches=l.matches||c,l.breakpoints[d]=c}),l}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let i=this._mediaMatcher.matchMedia(t),o={observable:new ot(s=>{let l=c=>this._zone.run(()=>s.next(c));return i.addListener(l),()=>{i.removeListener(l)}}).pipe(ki(i),Pe(({matches:s})=>({query:t,matches:s})),wn(this._destroySubject)),mql:i};return this._queries.set(t,o),o}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qH(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function vre(n){if(n.type==="characterData"&&n.target instanceof Comment)return!0;if(n.type==="childList"){for(let e=0;e<n.addedNodes.length;e++)if(!(n.addedNodes[e]instanceof Comment))return!1;for(let e=0;e<n.removedNodes.length;e++)if(!(n.removedNodes[e]instanceof Comment))return!1;return!0}return!1}var WH=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bre=(()=>{class n{_mutationObserverFactory=D(WH);_observedElements=new Map;_ngZone=D(De);constructor(){}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){let i=jr(t);return new ot(r=>{let s=this._observeElement(i).pipe(Pe(l=>l.filter(c=>!vre(c))),It(l=>!!l.length)).subscribe(l=>{this._ngZone.run(()=>{r.next(l)})});return()=>{s.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){return this._ngZone.runOutsideAngular(()=>{if(this._observedElements.has(t))this._observedElements.get(t).count++;else{let i=new ve,r=this._mutationObserverFactory.create(o=>i.next(o));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream})}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){let{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),GH=(()=>{class n{_contentObserver=D(bre);_elementRef=D(Ue);event=new je;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._disabled?this._unsubscribe():this._subscribe()}_disabled=!1;get debounce(){return this._debounce}set debounce(t){this._debounce=Lr(t),this._subscribe()}_debounce;_currentSubscription=null;constructor(){}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();let t=this._contentObserver.observe(this._elementRef);this._currentSubscription=(this.debounce?t.pipe(Ha(this.debounce)):t).subscribe(this.event)}_unsubscribe(){this._currentSubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Te({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:[2,"cdkObserveContentDisabled","disabled",Vn],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]})}return n})(),wx=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=$e({type:n});static \u0275inj=Ve({providers:[WH]})}return n})();var Ef=(()=>{class n{_platform=D(Gt);constructor(){}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return wre(t)&&getComputedStyle(t).visibility==="visible"}isTabbable(t){if(!this._platform.isBrowser)return!1;let i=yre(kre(t));if(i&&(ZH(i)===-1||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),o=ZH(t);return t.hasAttribute("contenteditable")?o!==-1:r==="iframe"||r==="object"||this._platform.WEBKIT&&this._platform.IOS&&!Dre(t)?!1:r==="audio"?t.hasAttribute("controls")?o!==-1:!1:r==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||t.hasAttribute("controls"):t.tabIndex>=0}isFocusable(t,i){return Tre(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yre(n){try{return n.frameElement}catch{return null}}function wre(n){return!!(n.offsetWidth||n.offsetHeight||typeof n.getClientRects=="function"&&n.getClientRects().length)}function xre(n){let e=n.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function Cre(n){return Ire(n)&&n.type=="hidden"}function Ere(n){return Sre(n)&&n.hasAttribute("href")}function Ire(n){return n.nodeName.toLowerCase()=="input"}function Sre(n){return n.nodeName.toLowerCase()=="a"}function QH(n){if(!n.hasAttribute("tabindex")||n.tabIndex===void 0)return!1;let e=n.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function ZH(n){if(!QH(n))return null;let e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function Dre(n){let e=n.nodeName.toLowerCase(),t=e==="input"&&n.type;return t==="text"||t==="password"||e==="select"||e==="textarea"}function Tre(n){return Cre(n)?!1:xre(n)||Ere(n)||n.hasAttribute("contenteditable")||QH(n)}function kre(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}var xx=class{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_enabled=!0;constructor(e,t,i,r,o=!1,s){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._injector=s,o||this.attachAnchors()}destroy(){let e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){let i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){let t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children;for(let i=0;i<t.length;i++){let r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children;for(let i=t.length-1;i>=0;i--){let r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._injector?vi(e,{injector:this._injector}):setTimeout(e)}},d_=(()=>{class n{_checker=D(Ef);_ngZone=D(De);_document=D(Qe);_injector=D(We);constructor(){D(ir).load(UH)}create(t,i=!1){return new xx(t,this._checker,this._ngZone,this._document,i,this._injector)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Sc=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(Sc||{}),KH="cdk-high-contrast-black-on-white",YH="cdk-high-contrast-white-on-black",CP="cdk-high-contrast-active",EP=(()=>{class n{_platform=D(Gt);_hasCheckedHighContrastMode;_document=D(Qe);_breakpointSubscription;constructor(){this._breakpointSubscription=D(xP).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Sc.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Sc.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Sc.BLACK_ON_WHITE}return Sc.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(CP,KH,YH),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===Sc.BLACK_ON_WHITE?t.add(CP,KH):i===Sc.WHITE_ON_BLACK&&t.add(CP,YH)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var IP={},to=(()=>{class n{_appId=D(jh);getId(t){return this._appId!=="ng"&&(t+=this._appId),IP.hasOwnProperty(t)||(IP[t]=0),`${t}${IP[t]++}`}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Are=200,Cx=class{_letterKeyStream=new ve;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new ve;selectedItem=this._selectedItem;constructor(e,t){let i=typeof t?.debounceInterval=="number"?t.debounceInterval:Are;t?.skipPredicate&&(this._skipPredicateFn=t.skipPredicate),this.setItems(e),this._setupKeyHandler(i)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(e){this._selectedItemIndex=e}setItems(e){this._items=e}handleKey(e){let t=e.keyCode;e.key&&e.key.length===1?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(e){this._letterKeyStream.pipe(Hn(t=>this._pressedLetters.push(t)),Ha(e),It(()=>this._pressedLetters.length>0),Pe(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(t=>{for(let i=1;i<this._items.length+1;i++){let r=(this._selectedItemIndex+i)%this._items.length,o=this._items[r];if(!this._skipPredicateFn?.(o)&&o.getLabel?.().toLocaleUpperCase().trim().indexOf(t)===0){this._selectedItem.next(o);break}}this._pressedLetters=[]})}};function fa(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var Ex=class{_items;_activeItemIndex=rn(-1);_activeItem=rn(null);_wrap=!1;_typeaheadSubscription=Pt.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=e=>e.disabled;constructor(e,t){this._items=e,e instanceof Vo?this._itemChangesSubscription=e.changes.subscribe(i=>this._itemsChanged(i.toArray())):ic(e)&&(this._effectRef=qh(()=>this._itemsChanged(e()),{injector:t}))}tabOut=new ve;change=new ve;skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){this._typeaheadSubscription.unsubscribe();let t=this._getItemsArray();return this._typeahead=new Cx(t,{debounceInterval:typeof e=="number"?e:void 0,skipPredicate:i=>this._skipPredicateFn(i)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(i=>{this.setActiveItem(i)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){let t=this._activeItem();this.updateActiveItem(e),this._activeItem()!==t&&this.change.next(this._activeItemIndex())}onKeydown(e){let t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!e[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(t){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex()-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex()+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(o<s?o:s-1,-1);break}else return;default:(r||fa(e,"shiftKey"))&&this._typeahead?.handleKey(e);return}this._typeahead?.reset(),e.preventDefault()}get activeItemIndex(){return this._activeItemIndex()}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex()<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex()<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){let t=this._getItemsArray(),i=typeof e=="number"?e:t.indexOf(e),r=t[i];this._activeItem.set(r??null),this._activeItemIndex.set(i),this._typeahead?.setCurrentSelectedItemIndex(i)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){let t=this._getItemsArray();for(let i=1;i<=t.length;i++){let r=(this._activeItemIndex()+e*i+t.length)%t.length,o=t[r];if(!this._skipPredicateFn(o)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex()+e,e)}_setActiveItemByIndex(e,t){let i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(e+=t,!i[e])return;this.setActiveItem(e)}}_getItemsArray(){return ic(this._items)?this._items():this._items instanceof Vo?this._items.toArray():this._items}_itemsChanged(e){this._typeahead?.setItems(e);let t=this._activeItem();if(t){let i=e.indexOf(t);i>-1&&i!==this._activeItemIndex()&&(this._activeItemIndex.set(i),this._typeahead?.setCurrentSelectedItemIndex(i))}}};var h_=class extends Ex{_origin="program";setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}};var If=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Fe({type:n,selectors:[["structural-styles"]],decls:0,vars:0,template:function(i,r){},styles:[`.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
`],encapsulation:2,changeDetection:0})}return n})();var ms=function(n){return n[n.NORMAL=0]="NORMAL",n[n.NEGATED=1]="NEGATED",n[n.INVERTED=2]="INVERTED",n}(ms||{}),Ix,Yu;function Sx(){if(Yu==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Yu=!1,Yu;if("scrollBehavior"in document.documentElement.style)Yu=!0;else{let n=Element.prototype.scrollTo;n?Yu=!/\{\s*\[native code\]\s*\}/.test(n.toString()):Yu=!1}}return Yu}function Sf(){if(typeof document!="object"||!document)return ms.NORMAL;if(Ix==null){let n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";let t=document.createElement("div"),i=t.style;i.width="2px",i.height="1px",n.appendChild(t),document.body.appendChild(n),Ix=ms.NORMAL,n.scrollLeft===0&&(n.scrollLeft=1,Ix=n.scrollLeft===0?ms.NEGATED:ms.INVERTED),n.remove()}return Ix}function TP(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var Df,e4=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function kP(){if(Df)return Df;if(typeof document!="object"||!document)return Df=new Set(e4),Df;let n=document.createElement("input");return Df=new Set(e4.filter(e=>(n.setAttribute("type",e),n.type===e))),Df}function li(n){return n==null?"":typeof n=="string"?n:`${n}px`}function Pi(n){return n!=null&&`${n}`!="false"}var Pre=new oe("MATERIAL_ANIMATIONS");function Wi(){return D(Pre,{optional:!0})?.animationsDisabled||D(Ym,{optional:!0})==="NoopAnimations"?!0:D(yx).matchMedia("(prefers-reduced-motion)").matches}var Zo=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Zo||{}),AP=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=Zo.HIDDEN;constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r}fadeOut(){this._renderer.fadeOutRipple(this)}},t4=xf({passive:!0,capture:!0}),MP=class{_events=new Map;addHandler(e,t,i,r){let o=this._events.get(t);if(o){let s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,t4)})}removeHandler(e,t,i){let r=this._events.get(e);if(!r)return;let o=r.get(t);o&&(o.delete(i),o.size===0&&r.delete(t),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,t4)))}_delegateEventHandler=e=>{let t=eo(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(o=>o.handleEvent(e))})}},f_={enterDuration:225,exitDuration:150},Ore=800,n4=xf({passive:!0,capture:!0}),i4=["mousedown","touchstart"],r4=["mouseup","mouseleave","touchend","touchcancel"],Rre=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Fe({type:n,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[`.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
`],encapsulation:2,changeDetection:0})}return n})(),Qu=class n{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new MP;constructor(e,t,i,r,o){this._target=e,this._ngZone=t,this._platform=r,r.isBrowser&&(this._containerElement=jr(i)),o&&o.get(ir).load(Rre)}fadeInRipple(e,t,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=b(b({},f_),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);let s=i.radius||Nre(e,t,r),l=e-r.left,c=t-r.top,d=o.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=`${l-s}px`,f.style.top=`${c-s}px`,f.style.height=`${s*2}px`,f.style.width=`${s*2}px`,i.color!=null&&(f.style.backgroundColor=i.color),f.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(f);let p=window.getComputedStyle(f),g=p.transitionProperty,m=p.transitionDuration,_=g==="none"||m==="0s"||m==="0s, 0s"||r.width===0&&r.height===0,y=new AP(this,f,i,_);f.style.transform="scale3d(1, 1, 1)",y.state=Zo.FADING_IN,i.persistent||(this._mostRecentTransientRipple=y);let w=null;return!_&&(d||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let I=()=>{w&&(w.fallbackTimer=null),clearTimeout(O),this._finishRippleTransition(y)},k=()=>this._destroyRipple(y),O=setTimeout(k,d+100);f.addEventListener("transitionend",I),f.addEventListener("transitioncancel",k),w={onTransitionEnd:I,onTransitionCancel:k,fallbackTimer:O}}),this._activeRipples.set(y,w),(_||!d)&&this._finishRippleTransition(y),y}fadeOutRipple(e){if(e.state===Zo.FADING_OUT||e.state===Zo.HIDDEN)return;let t=e.element,i=b(b({},f_),e.config.animation);t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=Zo.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=jr(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,i4.forEach(i=>{n._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{r4.forEach(t=>{this._triggerElement.addEventListener(t,this,n4)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Zo.FADING_IN?this._startFadeOutTransition(e):e.state===Zo.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=Zo.VISIBLE,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Zo.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){let t=Gu(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+Ore;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Zu(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===Zo.VISIBLE||e.config.terminateOnPointerUp&&e.state===Zo.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(i4.forEach(t=>n._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(r4.forEach(t=>e.removeEventListener(t,this,n4)),this._pointerUpEventsRegistered=!1))}};function Nre(n,e,t){let i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}var p_=new oe("mat-ripple-global-options"),o4=(()=>{class n{_elementRef=D(Ue);_animationsDisabled=Wi();color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){let t=D(De),i=D(Gt),r=D(p_,{optional:!0}),o=D(We);this._globalOptions=r||{},this._rippleRenderer=new Qu(this,t,this._elementRef,i,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:b(b(b({},this._globalOptions.animation),this._animationsDisabled?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return typeof t=="number"?this._rippleRenderer.fadeInRipple(t,i,b(b({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,b(b({},this.rippleConfig),t))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Te({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){i&2&&lt("mat-ripple-unbounded",r.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return n})();var m_=class{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Tf=class extends m_{component;viewContainerRef;injector;projectableNodes;constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.projectableNodes=r}},Dc=class extends m_{templateRef;viewContainerRef;context;injector;constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}},PP=class extends m_{element;constructor(e){super(),this.element=e instanceof Ue?e.nativeElement:e}},kf=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof Tf)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof Dc)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof PP)return this._attachedPortal=e,this.attachDomPortal(e)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},g_=class extends kf{outletElement;_appRef;_defaultInjector;constructor(e,t,i){super(),this.outletElement=e,this._appRef=t,this._defaultInjector=i}attachComponentPortal(e){let t;if(e.viewContainerRef){let i=e.injector||e.viewContainerRef.injector,r=i.get(na,null,{optional:!0})||void 0;t=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:i,ngModuleRef:r,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>t.destroy())}else{let i=this._appRef,r=e.injector||this._defaultInjector||We.NULL,o=r.get(Fn,i.injector);t=T0(e.component,{elementInjector:r,environmentInjector:o,projectableNodes:e.projectableNodes||void 0}),i.attachView(t.hostView),this.setDisposeFn(()=>{i.viewCount>0&&i.detachView(t.hostView),t.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(t)),this._attachedPortal=e,t}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);r!==-1&&t.remove(r)}),this._attachedPortal=e,i}attachDomPortal=e=>{let t=e.element;t.parentNode;let i=this.outletElement.ownerDocument.createComment("dom-portal");t.parentNode.insertBefore(i,t),this.outletElement.appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(t,i)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var __=(()=>{class n extends kf{_moduleRef=D(na,{optional:!0});_document=D(Qe);_viewContainerRef=D(Mi);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}attached=new je;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);let i=t.viewContainerRef!=null?t.viewContainerRef:this._viewContainerRef,r=i.createComponent(t.component,{index:i.length,injector:t.injector||i.injector,projectableNodes:t.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return i!==this._viewContainerRef&&this._getRootNode().appendChild(r.hostView.rootNodes[0]),super.setDisposeFn(()=>r.destroy()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}attachTemplatePortal(t){t.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}attachDomPortal=t=>{let i=t.element;i.parentNode;let r=this._document.createComment("dom-portal");t.setAttachedHost(this),i.parentNode.insertBefore(r,i),this._getRootNode().appendChild(i),this._attachedPortal=t,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(i,r)})};_getRootNode(){let t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Te({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[St]})}return n})();var Dx=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=$e({type:n});static \u0275inj=Ve({})}return n})();var Fre=new oe("cdk-dir-doc",{providedIn:"root",factory:Lre});function Lre(){return D(Qe)}var jre=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function s4(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?jre.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var no=(()=>{class n{get value(){return this.valueSignal()}valueSignal=rn("ltr");change=new je;constructor(){let t=D(Fre,{optional:!0});if(t){let i=t.body?t.body.dir:null,r=t.documentElement?t.documentElement.dir:null;this.valueSignal.set(s4(i||r||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Tc=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=$e({type:n});static \u0275inj=Ve({})}return n})();var Bre=20,Ju=(()=>{class n{_ngZone=D(De);_platform=D(Gt);_renderer=D(_i).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new ve;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=Bre){return this._platform.isBrowser?new ot(i=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let r=t>0?this._scrolled.pipe(ph(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):Re()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){let r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(It(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(t){let i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,t)&&i.push(o)}),i}_scrollableContainsElement(t,i){let r=jr(i),o=t.getElementRef().nativeElement;do if(r==o)return!0;while(r=r.parentElement);return!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Af=(()=>{class n{elementRef=D(Ue);scrollDispatcher=D(Ju);ngZone=D(De);dir=D(no,{optional:!0});_scrollElement=this.elementRef.nativeElement;_destroyed=new ve;_renderer=D(Tn);_cleanupScroll;_elementScrolled=new ve;constructor(){}ngOnInit(){this._cleanupScroll=this.ngZone.runOutsideAngular(()=>this._renderer.listen(this._scrollElement,"scroll",t=>this._elementScrolled.next(t))),this.scrollDispatcher.register(this)}ngOnDestroy(){this._cleanupScroll?.(),this._elementScrolled.complete(),this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){let i=this.elementRef.nativeElement,r=this.dir&&this.dir.value=="rtl";t.left==null&&(t.left=r?t.end:t.start),t.right==null&&(t.right=r?t.start:t.end),t.bottom!=null&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),r&&Sf()!=ms.NORMAL?(t.left!=null&&(t.right=i.scrollWidth-i.clientWidth-t.left),Sf()==ms.INVERTED?t.left=t.right:Sf()==ms.NEGATED&&(t.left=t.right?-t.right:t.right)):t.right!=null&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){let i=this.elementRef.nativeElement;Sx()?i.scrollTo(t):(t.top!=null&&(i.scrollTop=t.top),t.left!=null&&(i.scrollLeft=t.left))}measureScrollOffset(t){let i="left",r="right",o=this.elementRef.nativeElement;if(t=="top")return o.scrollTop;if(t=="bottom")return o.scrollHeight-o.clientHeight-o.scrollTop;let s=this.dir&&this.dir.value=="rtl";return t=="start"?t=s?r:i:t=="end"&&(t=s?i:r),s&&Sf()==ms.INVERTED?t==i?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:s&&Sf()==ms.NEGATED?t==i?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:t==i?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Te({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return n})(),Vre=20,kc=(()=>{class n{_platform=D(Gt);_listeners;_viewportSize;_change=new ve;_document=D(Qe);constructor(){let t=D(De),i=D(_i).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let r=o=>this._change.next(o);this._listeners=[i.listen("window","resize",r),i.listen("window","orientationchange",r)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,i=this._getWindow(),r=t.documentElement,o=r.getBoundingClientRect(),s=-o.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,l=-o.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:s,left:l}}change(t=Vre){return t>0?this._change.pipe(ph(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Xu=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=$e({type:n});static \u0275inj=Ve({})}return n})(),OP=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=$e({type:n});static \u0275inj=Ve({imports:[Tc,Xu,Tc,Xu]})}return n})();var a4=Sx();function Pf(n){return new Tx(n.get(kc),n.get(Qe))}var Tx=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(e,t){this._viewportRuler=e,this._document=t}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=li(-this._previousScrollPosition.left),e.style.top=li(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,t=this._document.body,i=e.style,r=t.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),a4&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),a4&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let t=this._document.documentElement,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}};function p4(n,e){return new kx(n.get(Ju),n.get(De),n.get(kc),e)}var kx=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(It(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var v_=class{enable(){}disable(){}attach(){}};function RP(n,e){return e.some(t=>{let i=n.bottom<t.top,r=n.top>t.bottom,o=n.right<t.left,s=n.left>t.right;return i||r||o||s})}function l4(n,e){return e.some(t=>{let i=n.top<t.top,r=n.bottom>t.bottom,o=n.left<t.left,s=n.right>t.right;return i||r||o||s})}function td(n,e){return new Ax(n.get(Ju),n.get(kc),n.get(De),e)}var Ax=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();RP(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},m4=(()=>{class n{_injector=D(We);constructor(){}noop=()=>new v_;close=t=>p4(this._injector,t);block=()=>Pf(this._injector);reposition=t=>td(this._injector,t);static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ac=class{positionStrategy;scrollStrategy=new v_;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(e){if(e){let t=Object.keys(e);for(let i of t)e[i]!==void 0&&(this[i]=e[i])}}};var Mx=class{connectionPair;scrollableViewProperties;constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}};var g4=(()=>{class n{_attachedOverlays=[];_document=D(Qe);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){let i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_4=(()=>{class n extends g4{_ngZone=D(De);_renderer=D(_i).createRenderer(null,null);_cleanupKeydown;add(t){super.add(t),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=t=>{let i=this._attachedOverlays;for(let r=i.length-1;r>-1;r--)if(i[r]._keydownEvents.observers.length>0){this._ngZone.run(()=>i[r]._keydownEvents.next(t));break}};static \u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})();static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),v4=(()=>{class n extends g4{_platform=D(Gt);_ngZone=D(De);_renderer=D(_i).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(t){if(super.add(t),!this._isAttached){let i=this._document.body,r={capture:!0},o=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[o.listen(i,"pointerdown",this._pointerDownListener,r),o.listen(i,"click",this._clickListener,r),o.listen(i,"auxclick",this._clickListener,r),o.listen(i,"contextmenu",this._clickListener,r)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(t=>t()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=t=>{this._pointerDownEventTarget=eo(t)};_clickListener=t=>{let i=eo(t),r=t.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:i;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let s=o.length-1;s>-1;s--){let l=o[s];if(l._outsidePointerEvents.observers.length<1||!l.hasAttached())continue;if(c4(l.overlayElement,i)||c4(l.overlayElement,r))break;let c=l._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>c.next(t)):c.next(t)}};static \u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})();static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function c4(n,e){let t=typeof ShadowRoot<"u"&&ShadowRoot,i=e;for(;i;){if(i===n)return!0;i=t&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var b4=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Fe({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return n})(),Rx=(()=>{class n{_platform=D(Gt);_containerElement;_document=D(Qe);_styleLoader=D(ir);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t="cdk-overlay-container";if(this._platform.isBrowser||TP()){let r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}let i=this._document.createElement("div");i.classList.add(t),TP()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}_loadStyles(){this._styleLoader.load(b4)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),NP=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(e,t,i,r){this._renderer=t,this._ngZone=i,this.element=e.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=t.listen(this.element,"click",r)}detach(){this._ngZone.runOutsideAngular(()=>{let e=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(e,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),e.style.pointerEvents="none",e.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},Mf=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new ve;_attachments=new ve;_detachments=new ve;_positionStrategy;_scrollStrategy;_locationChanges=Pt.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new ve;_outsidePointerEvents=new ve;_afterNextRenderRef;constructor(e,t,i,r,o,s,l,c,d,f=!1,p,g){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=l,this._location=c,this._outsideClickDispatcher=d,this._animationsDisabled=f,this._injector=p,this._renderer=g,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=vi(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof t?.onDestroy=="function"&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,e&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=b(b({},this._config),e),this._updateElementSize()}setDirection(e){this._config=S(b({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=li(this._config.width),e.height=li(this._config.height),e.minWidth=li(this._config.minWidth),e.minHeight=li(this._config.minHeight),e.maxWidth=li(this._config.maxWidth),e.maxHeight=li(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new NP(this._document,this._renderer,this._ngZone,t=>{this._backdropClick.next(t)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(e))}):this._backdropRef.element.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(e,t,i){let r=Cf(t||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenEmpty(){let e=!1;try{this._detachContentAfterRenderRef=vi(()=>{e=!0,this._detachContent()},{injector:this._injector})}catch(t){if(e)throw t;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let e=this._scrollStrategy;e?.disable(),e?.detach?.()}},u4="cdk-overlay-connected-position-bounding-box",zre=/([A-Za-z%]+)$/;function Nx(n,e){return new Px(e,n.get(kc),n.get(Qe),n.get(Gt),n.get(Rx))}var Px=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new ve;_resizeSubscription=Pt.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(e,t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(u4),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[],s;for(let l of this._preferredPositions){let c=this._getOriginPoint(e,r,l),d=this._getOverlayPoint(c,t,l),f=this._getOverlayFit(d,t,i,l);if(f.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(l,c);return}if(this._canFitWithFlexibleDimensions(f,d,i)){o.push({position:l,origin:c,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(c,l)});continue}(!s||s.overlayFit.visibleArea<f.visibleArea)&&(s={overlayFit:f,overlayPoint:d,originPoint:c,position:l,overlayRect:t})}if(o.length){let l=null,c=-1;for(let d of o){let f=d.boundingBoxRect.width*d.boundingBoxRect.height*(d.position.weight||1);f>c&&(c=f,l=d)}this._isPushed=!1,this._applyPosition(l.position,l.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ed(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(u4),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r;if(i.originX=="center")r=e.left+e.width/2;else{let s=this._isRtl()?e.right:e.left,l=this._isRtl()?e.left:e.right;r=i.originX=="start"?s:l}t.left<0&&(r-=t.left);let o;return i.originY=="center"?o=e.top+e.height/2:o=i.originY=="top"?e.top:e.bottom,t.top<0&&(o-=t.top),{x:r,y:o}}_getOverlayPoint(e,t,i){let r;i.overlayX=="center"?r=-t.width/2:i.overlayX==="start"?r=this._isRtl()?-t.width:0:r=this._isRtl()?0:-t.width;let o;return i.overlayY=="center"?o=-t.height/2:o=i.overlayY=="top"?0:-t.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,t,i,r){let o=h4(t),{x:s,y:l}=e,c=this._getOffset(r,"x"),d=this._getOffset(r,"y");c&&(s+=c),d&&(l+=d);let f=0-s,p=s+o.width-i.width,g=0-l,m=l+o.height-i.height,_=this._subtractOverflows(o.width,f,p),y=this._subtractOverflows(o.height,g,m),w=_*y;return{visibleArea:w,isCompletelyWithinViewport:o.width*o.height===w,fitsInViewportVertically:y===o.height,fitsInViewportHorizontally:_==o.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){let r=i.bottom-t.y,o=i.right-t.x,s=d4(this._overlayRef.getConfig().minHeight),l=d4(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportVertically||s!=null&&s<=r,d=e.fitsInViewportHorizontally||l!=null&&l<=o;return c&&d}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=h4(t),o=this._viewportRect,s=Math.max(e.x+r.width-o.width,0),l=Math.max(e.y+r.height-o.height,0),c=Math.max(o.top-i.top-e.y,0),d=Math.max(o.left-i.left-e.x,0),f=0,p=0;return r.width<=o.width?f=d||-s:f=e.x<this._viewportMargin?o.left-i.left-e.x:0,r.height<=o.height?p=c||-l:p=e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:f,y:p},{x:e.x+f,y:e.y+p}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!$re(this._lastScrollVisibility,i)){let r=new Mx(e,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let t=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){let i=this._viewportRect,r=this._isRtl(),o,s,l;if(t.overlayY==="top")s=e.y,o=i.height-s+this._viewportMargin;else if(t.overlayY==="bottom")l=i.height-e.y+this._viewportMargin*2,o=i.height-l+this._viewportMargin;else{let m=Math.min(i.bottom-e.y+i.top,e.y),_=this._lastBoundingBoxSize.height;o=m*2,s=e.y-m,o>_&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-_/2)}let c=t.overlayX==="start"&&!r||t.overlayX==="end"&&r,d=t.overlayX==="end"&&!r||t.overlayX==="start"&&r,f,p,g;if(d)g=i.width-e.x+this._viewportMargin*2,f=e.x-this._viewportMargin;else if(c)p=e.x,f=i.right-e.x;else{let m=Math.min(i.right-e.x+i.left,e.x),_=this._lastBoundingBoxSize.width;f=m*2,p=e.x-m,f>_&&!this._isInitialRender&&!this._growAfterOpen&&(p=e.x-_/2)}return{top:s,left:p,bottom:l,right:g,width:f,height:o}}_setBoundingBoxStyles(e,t){let i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=li(i.height),r.top=li(i.top),r.bottom=li(i.bottom),r.width=li(i.width),r.left=li(i.left),r.right=li(i.right),t.overlayX==="center"?r.alignItems="center":r.alignItems=t.overlayX==="end"?"flex-end":"flex-start",t.overlayY==="center"?r.justifyContent="center":r.justifyContent=t.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=li(o)),s&&(r.maxWidth=li(s))}this._lastBoundingBoxSize=i,ed(this._boundingBox.style,r)}_resetBoundingBoxStyles(){ed(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ed(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){let i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){let f=this._viewportRuler.getViewportScrollPosition();ed(i,this._getExactOverlayY(t,e,f)),ed(i,this._getExactOverlayX(t,e,f))}else i.position="static";let l="",c=this._getOffset(t,"x"),d=this._getOffset(t,"y");c&&(l+=`translateX(${c}px) `),d&&(l+=`translateY(${d}px)`),i.transform=l.trim(),s.maxHeight&&(r?i.maxHeight=li(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=li(s.maxWidth):o&&(i.maxWidth="")),ed(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,e);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),e.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;r.bottom=`${s-(o.y+this._overlayRect.height)}px`}else r.top=li(o.y);return r}_getExactOverlayX(e,t,i){let r={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let s;if(this._isRtl()?s=e.overlayX==="end"?"left":"right":s=e.overlayX==="end"?"right":"left",s==="right"){let l=this._document.documentElement.clientWidth;r.right=`${l-(o.x+this._overlayRect.width)}px`}else r.left=li(o.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:l4(e,i),isOriginOutsideView:RP(e,i),isOverlayClipped:l4(t,i),isOverlayOutsideView:RP(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return t==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Cf(e).forEach(t=>{t!==""&&this._appliedPanelClasses.indexOf(t)===-1&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof Ue)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}};function ed(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function d4(n){if(typeof n!="number"&&n!=null){let[e,t]=n.split(zre);return!t||t==="px"?parseFloat(e):null}return n||null}function h4(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}function $re(n,e){return n===e?!0:n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}var f4="cdk-global-overlay-wrapper";function Of(n){return new Ox}var Ox=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){let t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(f4),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:l}=i,c=(r==="100%"||r==="100vw")&&(!s||s==="100%"||s==="100vw"),d=(o==="100%"||o==="100vh")&&(!l||l==="100%"||l==="100vh"),f=this._xPosition,p=this._xOffset,g=this._overlayRef.getConfig().direction==="rtl",m="",_="",y="";c?y="flex-start":f==="center"?(y="center",g?_=p:m=p):g?f==="left"||f==="end"?(y="flex-end",m=p):(f==="right"||f==="start")&&(y="flex-start",_=p):f==="left"||f==="start"?(y="flex-start",m=p):(f==="right"||f==="end")&&(y="flex-end",_=p),e.position=this._cssPosition,e.marginLeft=c?"0":m,e.marginTop=d?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":_,t.justifyContent=y,t.alignItems=d?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(f4),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},y4=(()=>{class n{_injector=D(We);constructor(){}global(){return Of()}flexibleConnectedTo(t){return Nx(this._injector,t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Rf(n,e){n.get(ir).load(b4);let t=n.get(Rx),i=n.get(Qe),r=n.get(to),o=n.get(Mr),s=n.get(no),l=i.createElement("div"),c=i.createElement("div");c.id=r.getId("cdk-overlay-"),c.classList.add("cdk-overlay-pane"),l.appendChild(c),t.getContainerElement().appendChild(l);let d=new g_(c,o,n),f=new Ac(e),p=n.get(Tn,null,{optional:!0})||n.get(_i).createRenderer(null,null);return f.direction=f.direction||s.value,new Mf(d,l,c,f,n.get(De),n.get(_4),i,n.get(dc),n.get(v4),e?.disableAnimations??n.get(Ym,null,{optional:!0})==="NoopAnimations",n.get(Fn),p)}var w4=(()=>{class n{scrollStrategies=D(m4);_positionBuilder=D(y4);_injector=D(We);constructor(){}create(t){return Rf(this._injector,t)}position(){return this._positionBuilder}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ure=new oe("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let n=D(We);return()=>td(n)}});function Hre(n){let e=D(We);return()=>td(e)}var qre={provide:Ure,useFactory:Hre},b_=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=$e({type:n});static \u0275inj=Ve({providers:[w4,qre],imports:[Tc,Dx,OP,OP]})}return n})();var Ft=(()=>{class n{constructor(){D(EP)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(i){return new(i||n)};static \u0275mod=$e({type:n});static \u0275inj=Ve({imports:[Tc,Tc]})}return n})();var Mc=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=$e({type:n});static \u0275inj=Ve({imports:[Ft,Ft]})}return n})();var Gre=["mat-menu-item",""],Zre=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],Kre=["mat-icon, [matMenuItemIcon]","*"];function Yre(n,e){n&1&&(Iu(),z(0,"svg",2),qt(1,"polygon",3),U())}var Qre=["*"];function Xre(n,e){if(n&1){let t=Bt();vo(0,"div",0),zh("click",function(){Ge(t);let r=Q();return Ze(r.closed.emit("click"))})("animationstart",function(r){Ge(t);let o=Q();return Ze(o._onAnimationStart(r.animationName))})("animationend",function(r){Ge(t);let o=Q();return Ze(o._onAnimationDone(r.animationName))})("animationcancel",function(r){Ge(t);let o=Q();return Ze(o._onAnimationDone(r.animationName))}),vo(1,"div",1),bt(2),zo()()}if(n&2){let t=Q();cs(t._classList),lt("mat-menu-panel-animations-disabled",t._animationsDisabled)("mat-menu-panel-exit-animation",t._panelAnimationState==="void")("mat-menu-panel-animating",t._isAnimating),ls("id",t.panelId),Ut("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}var jP=new oe("MAT_MENU_PANEL"),w_=(()=>{class n{_elementRef=D(Ue);_document=D(Qe);_focusMonitor=D(ha);_parentMenu=D(jP,{optional:!0});_changeDetectorRef=D(Wn);role="menuitem";disabled=!1;disableRipple=!1;_hovered=new ve;_focused=new ve;_highlighted=!1;_triggersSubmenu=!1;constructor(){D(ir).load(If),this._parentMenu?.addItem?.(this)}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){let t=this._elementRef.nativeElement.cloneNode(!0),i=t.querySelectorAll("mat-icon, .material-icons");for(let r=0;r<i.length;r++)i[r].remove();return t.textContent?.trim()||""}_setHighlighted(t){this._highlighted=t,this._changeDetectorRef.markForCheck()}_setTriggersSubmenu(t){this._triggersSubmenu=t,this._changeDetectorRef.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Fe({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-focus-indicator"],hostVars:8,hostBindings:function(i,r){i&1&&Me("click",function(s){return r._checkDisabled(s)})("mouseenter",function(){return r._handleMouseEnter()}),i&2&&(Ut("role",r.role)("tabindex",r._getTabIndex())("aria-disabled",r.disabled)("disabled",r.disabled||null),lt("mat-mdc-menu-item-highlighted",r._highlighted)("mat-mdc-menu-item-submenu-trigger",r._triggersSubmenu))},inputs:{role:"role",disabled:[2,"disabled","disabled",Vn],disableRipple:[2,"disableRipple","disableRipple",Vn]},exportAs:["matMenuItem"],attrs:Gre,ngContentSelectors:Kre,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(i,r){i&1&&(Cn(Zre),bt(0),z(1,"span",0),bt(2,1),U(),qt(3,"div",1),_t(4,Yre,2,0,":svg:svg",2)),i&2&&(B(3),de("matRippleDisabled",r.disableRipple||r.disabled)("matRippleTrigger",r._getHostElement()),B(),vt(r._triggersSubmenu?4:-1))},dependencies:[o4],encapsulation:2,changeDetection:0})}return n})();var Jre=new oe("MatMenuContent");var eoe=new oe("mat-menu-default-options",{providedIn:"root",factory:toe});function toe(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}var FP="_mat-menu-enter",Fx="_mat-menu-exit",Nf=(()=>{class n{_elementRef=D(Ue);_changeDetectorRef=D(Wn);_injector=D(We);_keyManager;_xPosition;_yPosition;_firstItemFocusRef;_exitFallbackTimeout;_animationsDisabled=Wi();_allItems;_directDescendantItems=new Vo;_classList={};_panelAnimationState="void";_animationDone=new ve;_isAnimating=!1;parentMenu;direction;overlayPanelClass;backdropClass;ariaLabel;ariaLabelledby;ariaDescribedby;get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}templateRef;items;lazyContent;overlapTrigger;hasBackdrop;set panelClass(t){let i=this._previousPanelClass,r=b({},this._classList);i&&i.length&&i.split(" ").forEach(o=>{r[o]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(o=>{r[o]=!0}),this._elementRef.nativeElement.className=""),this._classList=r}_previousPanelClass;get classList(){return this.panelClass}set classList(t){this.panelClass=t}closed=new je;close=this.closed;panelId=D(to).getId("mat-menu-panel-");constructor(){let t=D(eoe);this.overlayPanelClass=t.overlayPanelClass||"",this._xPosition=t.xPosition,this._yPosition=t.yPosition,this.backdropClass=t.backdropClass,this.overlapTrigger=t.overlapTrigger,this.hasBackdrop=t.hasBackdrop}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new h_(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(ki(this._directDescendantItems),mi(t=>Sr(...t.map(i=>i._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{let i=this._keyManager;if(this._panelAnimationState==="enter"&&i.activeItem?._hasFocus()){let r=t.toArray(),o=Math.max(0,Math.min(r.length-1,i.activeItemIndex||0));r[o]&&!r[o].disabled?i.setActiveItem(o):i.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusRef?.destroy(),clearTimeout(this._exitFallbackTimeout)}_hovered(){return this._directDescendantItems.changes.pipe(ki(this._directDescendantItems),mi(i=>Sr(...i.map(r=>r._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){let i=t.keyCode,r=this._keyManager;switch(i){case 27:fa(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&this.direction==="ltr"&&this.closed.emit("keydown");break;case 39:this.parentMenu&&this.direction==="rtl"&&this.closed.emit("keydown");break;default:(i===38||i===40)&&r.setFocusOrigin("keyboard"),r.onKeydown(t);return}}focusFirstItem(t="program"){this._firstItemFocusRef?.destroy(),this._firstItemFocusRef=vi(()=>{let i=this._resolvePanel();if(!i||!i.contains(document.activeElement)){let r=this._keyManager;r.setFocusOrigin(t).setFirstItemActive(),!r.activeItem&&i&&i.focus()}},{injector:this._injector})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){}setPositionClasses(t=this.xPosition,i=this.yPosition){this._classList=S(b({},this._classList),{"mat-menu-before":t==="before","mat-menu-after":t==="after","mat-menu-above":i==="above","mat-menu-below":i==="below"}),this._changeDetectorRef.markForCheck()}_onAnimationDone(t){let i=t===Fx;(i||t===FP)&&(i&&(clearTimeout(this._exitFallbackTimeout),this._exitFallbackTimeout=void 0),this._animationDone.next(i?"void":"enter"),this._isAnimating=!1)}_onAnimationStart(t){(t===FP||t===Fx)&&(this._isAnimating=!0)}_setIsOpen(t){if(this._panelAnimationState=t?"enter":"void",t){if(this._keyManager.activeItemIndex===0){let i=this._resolvePanel();i&&(i.scrollTop=0)}}else this._animationsDisabled||(this._exitFallbackTimeout=setTimeout(()=>this._onAnimationDone(Fx),200));this._animationsDisabled&&setTimeout(()=>{this._onAnimationDone(t?FP:Fx)}),this._changeDetectorRef.markForCheck()}_updateDirectDescendants(){this._allItems.changes.pipe(ki(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}_resolvePanel(){let t=null;return this._directDescendantItems.length&&(t=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),t}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Fe({type:n,selectors:[["mat-menu"]],contentQueries:function(i,r,o){if(i&1&&(Bn(o,Jre,5),Bn(o,w_,5),Bn(o,w_,4)),i&2){let s;st(s=at())&&(r.lazyContent=s.first),st(s=at())&&(r._allItems=s),st(s=at())&&(r.items=s)}},viewQuery:function(i,r){if(i&1&&on(lr,5),i&2){let o;st(o=at())&&(r.templateRef=o.first)}},hostVars:3,hostBindings:function(i,r){i&2&&Ut("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:[2,"overlapTrigger","overlapTrigger",Vn],hasBackdrop:[2,"hasBackdrop","hasBackdrop",t=>t==null?null:Vn(t)],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"},exportAs:["matMenu"],features:[Vt([{provide:jP,useExisting:n}])],ngContentSelectors:Qre,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel",3,"click","animationstart","animationend","animationcancel","id"],[1,"mat-mdc-menu-content"]],template:function(i,r){i&1&&(Cn(),rg(0,Xre,3,12,"ng-template"))},styles:[`mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;outline:0}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-menu-item-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-menu-item-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-menu-item-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-menu-item-label-text-weight, var(--mat-sys-label-large-weight))}@keyframes _mat-menu-enter{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:none}}@keyframes _mat-menu-exit{from{opacity:1}to{opacity:0}}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;box-sizing:border-box;outline:0;animation:_mat-menu-enter 120ms cubic-bezier(0, 0, 0.2, 1);border-radius:var(--mat-menu-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-menu-container-color, var(--mat-sys-surface-container));box-shadow:var(--mat-menu-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));will-change:transform,opacity}.mat-mdc-menu-panel.mat-menu-panel-exit-animation{animation:_mat-menu-exit 100ms 25ms linear forwards}.mat-mdc-menu-panel.mat-menu-panel-animations-disabled{animation:none}.mat-mdc-menu-panel.mat-menu-panel-animating{pointer-events:none}.mat-mdc-menu-panel.mat-menu-panel-animating:has(.mat-mdc-menu-content:empty){display:none}@media(forced-colors: active){.mat-mdc-menu-panel{outline:solid 1px}}.mat-mdc-menu-panel .mat-divider{color:var(--mat-menu-divider-color, var(--mat-sys-surface-variant));margin-bottom:var(--mat-menu-divider-bottom-spacing, 8px);margin-top:var(--mat-menu-divider-top-spacing, 8px)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px;padding-left:var(--mat-menu-item-leading-spacing, 12px);padding-right:var(--mat-menu-item-trailing-spacing, 12px);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-menu-item::-moz-focus-inner{border:0}[dir=rtl] .mat-mdc-menu-item{padding-left:var(--mat-menu-item-trailing-spacing, 12px);padding-right:var(--mat-menu-item-leading-spacing, 12px)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-trailing-spacing, 12px)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-trailing-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-leading-spacing, 12px)}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item:focus{outline:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing, 12px);height:var(--mat-menu-item-icon-size, 24px);width:var(--mat-menu-item-icon-size, 24px)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing, 12px)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}@media(forced-colors: active){.mat-mdc-menu-item{margin-top:1px}}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size, 24px);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing, 12px)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing, 12px);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1);transform-origin:center}@media(forced-colors: active){.mat-mdc-menu-submenu-icon{fill:CanvasText}}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}
`],encapsulation:2,changeDetection:0})}return n})(),x4=new oe("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let n=D(We);return()=>td(n)}});function noe(n){let e=D(We);return()=>td(e)}var ioe={provide:x4,deps:[],useFactory:noe};var y_=new WeakMap,roe=(()=>{class n{_canHaveBackdrop;_element=D(Ue);_viewContainerRef=D(Mi);_menuItemInstance=D(w_,{optional:!0,self:!0});_dir=D(no,{optional:!0});_focusMonitor=D(ha);_ngZone=D(De);_injector=D(We);_scrollStrategy=D(x4);_changeDetectorRef=D(Wn);_animationsDisabled=Wi();_portal;_overlayRef=null;_menuOpen=!1;_closingActionsSubscription=Pt.EMPTY;_menuCloseSubscription=Pt.EMPTY;_pendingRemoval;_parentMaterialMenu;_parentInnerPadding;_openedBy=void 0;get _menu(){return this._menuInternal}set _menu(t){t!==this._menuInternal&&(this._menuInternal=t,this._menuCloseSubscription.unsubscribe(),t&&(this._parentMaterialMenu,this._menuCloseSubscription=t.close.subscribe(i=>{this._destroyMenu(i),(i==="click"||i==="tab")&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})),this._menuItemInstance?._setTriggersSubmenu(this._triggersSubmenu()))}_menuInternal;constructor(t){this._canHaveBackdrop=t;let i=D(jP,{optional:!0});this._parentMaterialMenu=i instanceof Nf?i:void 0}ngOnDestroy(){this._menu&&this._ownsMenu(this._menu)&&y_.delete(this._menu),this._pendingRemoval?.unsubscribe(),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null)}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this._menu)}_closeMenu(){this._menu?.close.emit()}_openMenu(t){let i=this._menu;if(this._menuOpen||!i)return;this._pendingRemoval?.unsubscribe();let r=y_.get(i);y_.set(i,this),r&&r!==this&&r._closeMenu();let o=this._createOverlay(i),s=o.getConfig(),l=s.positionStrategy;this._setPosition(i,l),this._canHaveBackdrop?s.hasBackdrop=i.hasBackdrop==null?!this._triggersSubmenu():i.hasBackdrop:s.hasBackdrop=!1,o.hasAttached()||(o.attach(this._getPortal(i)),i.lazyContent?.attach(this.menuData)),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this._closeMenu()),i.parentMenu=this._triggersSubmenu()?this._parentMaterialMenu:void 0,i.direction=this.dir,t&&i.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0),i instanceof Nf&&(i._setIsOpen(!0),i._directDescendantItems.changes.pipe(wn(i.close)).subscribe(()=>{l.withLockedPosition(!1).reapplyLastPosition(),l.withLockedPosition(!0)}))}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}_destroyMenu(t){let i=this._overlayRef,r=this._menu;!i||!this.menuOpen||(this._closingActionsSubscription.unsubscribe(),this._pendingRemoval?.unsubscribe(),r instanceof Nf&&this._ownsMenu(r)?(this._pendingRemoval=r._animationDone.pipe(Kn(1)).subscribe(()=>{i.detach(),r.lazyContent?.detach()}),r._setIsOpen(!1)):(i.detach(),r?.lazyContent?.detach()),r&&this._ownsMenu(r)&&y_.delete(r),this.restoreFocus&&(t==="keydown"||!this._openedBy||!this._triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,this._setIsMenuOpen(!1))}_setIsMenuOpen(t){t!==this._menuOpen&&(this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this._triggersSubmenu()&&this._menuItemInstance._setHighlighted(t),this._changeDetectorRef.markForCheck())}_createOverlay(t){if(!this._overlayRef){let i=this._getOverlayConfig(t);this._subscribeToPositions(t,i.positionStrategy),this._overlayRef=Rf(this._injector,i),this._overlayRef.keydownEvents().subscribe(r=>{this._menu instanceof Nf&&this._menu._handleKeydown(r)})}return this._overlayRef}_getOverlayConfig(t){return new Ac({positionStrategy:Nx(this._injector,this._getOverlayOrigin()).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:t.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:t.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir||"ltr",disableAnimations:this._animationsDisabled})}_subscribeToPositions(t,i){t.setPositionClasses&&i.positionChanges.subscribe(r=>{this._ngZone.run(()=>{let o=r.connectionPair.overlayX==="start"?"after":"before",s=r.connectionPair.overlayY==="top"?"below":"above";t.setPositionClasses(o,s)})})}_setPosition(t,i){let[r,o]=t.xPosition==="before"?["end","start"]:["start","end"],[s,l]=t.yPosition==="above"?["bottom","top"]:["top","bottom"],[c,d]=[s,l],[f,p]=[r,o],g=0;if(this._triggersSubmenu()){if(p=r=t.xPosition==="before"?"start":"end",o=f=r==="end"?"start":"end",this._parentMaterialMenu){if(this._parentInnerPadding==null){let m=this._parentMaterialMenu.items.first;this._parentInnerPadding=m?m._getHostElement().offsetTop:0}g=s==="bottom"?this._parentInnerPadding:-this._parentInnerPadding}}else t.overlapTrigger||(c=s==="top"?"bottom":"top",d=l==="top"?"bottom":"top");i.withPositions([{originX:r,originY:c,overlayX:f,overlayY:s,offsetY:g},{originX:o,originY:c,overlayX:p,overlayY:s,offsetY:g},{originX:r,originY:d,overlayX:f,overlayY:l,offsetY:-g},{originX:o,originY:d,overlayX:p,overlayY:l,offsetY:-g}])}_menuClosingActions(){let t=this._getOutsideClickStream(this._overlayRef),i=this._overlayRef.detachments(),r=this._parentMaterialMenu?this._parentMaterialMenu.closed:Re(),o=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(It(s=>this._menuOpen&&s!==this._menuItemInstance)):Re();return Sr(t,r,o,i)}_getPortal(t){return(!this._portal||this._portal.templateRef!==t.templateRef)&&(this._portal=new Dc(t.templateRef,this._viewContainerRef)),this._portal}_ownsMenu(t){return y_.get(t)===this}static \u0275fac=function(i){sk()};static \u0275dir=Te({type:n})}return n})(),C4=(()=>{class n extends roe{_cleanupTouchstart;_hoverSubscription=Pt.EMPTY;get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){this._menu=t}menuData;restoreFocus=!0;menuOpened=new je;onMenuOpen=this.menuOpened;menuClosed=new je;onMenuClose=this.menuClosed;constructor(){super(!0);let t=D(Tn);this._cleanupTouchstart=t.listen(this._element.nativeElement,"touchstart",i=>{Zu(i)||(this._openedBy="touch")},{passive:!0})}triggersSubmenu(){return super._triggersSubmenu()}toggleMenu(){return this.menuOpen?this.closeMenu():this.openMenu()}openMenu(){this._openMenu(!0)}closeMenu(){this._closeMenu()}updatePosition(){this._overlayRef?.updatePosition()}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){super.ngOnDestroy(),this._cleanupTouchstart(),this._hoverSubscription.unsubscribe()}_getOverlayOrigin(){return this._element}_getOutsideClickStream(t){return t.backdropClick()}_handleMousedown(t){Gu(t)||(this._openedBy=t.button===0?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){let i=t.keyCode;(i===13||i===32)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(i===39&&this.dir==="ltr"||i===37&&this.dir==="rtl")&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){this.triggersSubmenu()&&this._parentMaterialMenu&&(this._hoverSubscription=this._parentMaterialMenu._hovered().subscribe(t=>{t===this._menuItemInstance&&!t.disabled&&(this._openedBy="mouse",this._openMenu(!1))}))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Te({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],hostVars:3,hostBindings:function(i,r){i&1&&Me("click",function(s){return r._handleClick(s)})("mousedown",function(s){return r._handleMousedown(s)})("keydown",function(s){return r._handleKeydown(s)}),i&2&&Ut("aria-haspopup",r.menu?"menu":null)("aria-expanded",r.menuOpen)("aria-controls",r.menuOpen?r.menu==null?null:r.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:[0,"mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:[0,"matMenuTriggerFor","menu"],menuData:[0,"matMenuTriggerData","menuData"],restoreFocus:[0,"matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"],features:[St]})}return n})();var E4=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=$e({type:n});static \u0275inj=Ve({providers:[ioe],imports:[Mc,Ft,b_,Xu,Ft]})}return n})(),I4={transformMenu:{type:7,name:"transformMenu",definitions:[{type:0,name:"void",styles:{type:6,styles:{opacity:0,transform:"scale(0.8)"},offset:null}},{type:1,expr:"void => enter",animation:{type:4,styles:{type:6,styles:{opacity:1,transform:"scale(1)"},offset:null},timings:"120ms cubic-bezier(0, 0, 0.2, 1)"},options:null},{type:1,expr:"* => void",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"100ms 25ms linear"},options:null}],options:{}},fadeInItems:{type:7,name:"fadeInItems",definitions:[{type:0,name:"showing",styles:{type:6,styles:{opacity:1},offset:null}},{type:1,expr:"void => *",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:null,timings:"400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}},L1e=I4.fadeInItems,j1e=I4.transformMenu;var Lx;function soe(){if(Lx===void 0&&(Lx=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(Lx=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Lx}function x_(n){return soe()?.createHTML(n)||n}function S4(n){return Error(`Unable to find icon with the name "${n}"`)}function aoe(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function D4(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function T4(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var ml=class{url;svgText;options;svgElement;constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}},A4=(()=>{class n{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(t,i,r,o){this._httpClient=t,this._sanitizer=i,this._errorHandler=o,this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,o){return this._addSvgIconConfig(t,i,new ml(r,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,o){let s=this._sanitizer.sanitize(Hi.HTML,r);if(!s)throw T4(r);let l=x_(s);return this._addSvgIconConfig(t,i,new ml("",l,o))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new ml(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){let o=this._sanitizer.sanitize(Hi.HTML,i);if(!o)throw T4(i);let s=x_(o);return this._addSvgIconSetConfig(t,new ml("",s,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){let i=this._sanitizer.sanitize(Hi.RESOURCE_URL,t);if(!i)throw D4(t);let r=this._cachedIconsByUrl.get(i);return r?Re(jx(r)):this._loadSvgIconFromConfig(new ml(t,null)).pipe(Hn(o=>this._cachedIconsByUrl.set(i,o)),Pe(o=>jx(o)))}getNamedSvgIcon(t,i=""){let r=k4(i,t),o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(i,t),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);let s=this._iconSetConfigs.get(i);return s?this._getSvgFromIconSetConfigs(t,s):Ul(S4(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Re(jx(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Pe(i=>jx(i)))}_getSvgFromIconSetConfigs(t,i){let r=this._extractIconWithNameFromAnySet(t,i);if(r)return Re(r);let o=i.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(No(l=>{let d=`Loading icon set URL: ${this._sanitizer.sanitize(Hi.RESOURCE_URL,s.url)} failed: ${l.message}`;return this._errorHandler.handleError(new Error(d)),Re(null)})));return vm(o).pipe(Pe(()=>{let s=this._extractIconWithNameFromAnySet(t,i);if(!s)throw S4(t);return s}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){let o=i[r];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){let s=this._svgElementFromConfig(o),l=this._extractSvgIconFromSet(s,t,o.options);if(l)return l}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Hn(i=>t.svgText=i),Pe(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Re(null):this._fetchIcon(t).pipe(Hn(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){let o=t.querySelector(`[id="${i}"]`);if(!o)return null;let s=o.cloneNode(!0);if(s.removeAttribute("id"),s.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(s,r);if(s.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(s),r);let l=this._svgElementFromString(x_("<svg></svg>"));return l.appendChild(s),this._setSvgAttributes(l,r)}_svgElementFromString(t){let i=this._document.createElement("DIV");i.innerHTML=t;let r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){let i=this._svgElementFromString(x_("<svg></svg>")),r=t.attributes;for(let o=0;o<r.length;o++){let{name:s,value:l}=r[o];s!=="id"&&i.setAttribute(s,l)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[o].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){let{url:i,options:r}=t,o=r?.withCredentials??!1;if(!this._httpClient)throw aoe();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let s=this._sanitizer.sanitize(Hi.RESOURCE_URL,i);if(!s)throw D4(i);let l=this._inProgressUrlFetches.get(s);if(l)return l;let c=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(Pe(d=>x_(d)),qs(()=>this._inProgressUrlFetches.delete(s)),wm());return this._inProgressUrlFetches.set(s,c),c}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(k4(t,i),r),this}_addSvgIconSetConfig(t,i){let r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){let i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){let o=this._resolvers[r](i,t);if(o)return loe(o)?new ml(o.url,null,o.options):new ml(o,null)}}static \u0275fac=function(i){return new(i||n)(Se(pc,8),Se(Ig),Se(Qe,8),Se(zi))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jx(n){return n.cloneNode(!0)}function k4(n,e){return n+":"+e}function loe(n){return!!(n.url&&n.options)}var coe=["*"],uoe=new oe("MAT_ICON_DEFAULT_OPTIONS"),doe=new oe("mat-icon-location",{providedIn:"root",factory:hoe});function hoe(){let n=D(Qe),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}var M4=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],foe=M4.map(n=>`[${n}]`).join(", "),poe=/^url\(['"]?#(.*?)['"]?\)$/,Lf=(()=>{class n{_elementRef=D(Ue);_iconRegistry=D(A4);_location=D(doe);_errorHandler=D(zi);_defaultColor;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(t){let i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(t){let i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=Pt.EMPTY;constructor(){let t=D(new ag("aria-hidden"),{optional:!0}),i=D(uoe,{optional:!0});i&&(i.color&&(this.color=this._defaultColor=i.color),i.fontSet&&(this.fontSet=i.fontSet)),t||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];let i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let t=this._elementsWithExternalReferences;if(t&&t.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){let t=this._elementRef.nativeElement,i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let r=t.childNodes[i];(r.nodeType!==1||r.nodeName.toLowerCase()==="svg")&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return typeof t=="string"?t.trim().split(" ")[0]:t}_prependPathToReferences(t){let i=this._elementsWithExternalReferences;i&&i.forEach((r,o)=>{r.forEach(s=>{o.setAttribute(s.name,`url('${t}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(t){let i=t.querySelectorAll(foe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<i.length;o++)M4.forEach(s=>{let l=i[o],c=l.getAttribute(s),d=c?c.match(poe):null;if(d){let f=r.get(l);f||(f=[],r.set(l,f)),f.push({name:s,value:d[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){let[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Kn(1)).subscribe(o=>this._setSvgElement(o),o=>{let s=`Error retrieving icon ${i}:${r}! ${o.message}`;this._errorHandler.handleError(new Error(s))})}}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Fe({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,r){i&2&&(Ut("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),cs(r.color?"mat-"+r.color:""),lt("mat-icon-inline",r.inline)("mat-icon-no-color",r.color!=="primary"&&r.color!=="accent"&&r.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Vn],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],ngContentSelectors:coe,decls:1,vars:0,template:function(i,r){i&1&&(Cn(),bt(0))},styles:[`mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}
`],encapsulation:2,changeDetection:0})}return n})(),jf=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=$e({type:n});static \u0275inj=Ve({imports:[Ft,Ft]})}return n})();var P4=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Fe({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-text-field-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[`textarea.cdk-textarea-autosize{resize:none}textarea.cdk-textarea-autosize-measuring{padding:2px 0 !important;box-sizing:content-box !important;height:auto !important;overflow:hidden !important}textarea.cdk-textarea-autosize-measuring-firefox{padding:2px 0 !important;box-sizing:content-box !important;height:0 !important}@keyframes cdk-text-field-autofill-start{/*!*/}@keyframes cdk-text-field-autofill-end{/*!*/}.cdk-text-field-autofill-monitored:-webkit-autofill{animation:cdk-text-field-autofill-start 0s 1ms}.cdk-text-field-autofill-monitored:not(:-webkit-autofill){animation:cdk-text-field-autofill-end 0s 1ms}
`],encapsulation:2,changeDetection:0})}return n})(),moe={passive:!0},O4=(()=>{class n{_platform=D(Gt);_ngZone=D(De);_renderer=D(_i).createRenderer(null,null);_styleLoader=D(ir);_monitoredElements=new Map;constructor(){}monitor(t){if(!this._platform.isBrowser)return Vi;this._styleLoader.load(P4);let i=jr(t),r=this._monitoredElements.get(i);if(r)return r.subject;let o=new ve,s="cdk-text-field-autofilled",l=d=>{d.animationName==="cdk-text-field-autofill-start"&&!i.classList.contains(s)?(i.classList.add(s),this._ngZone.run(()=>o.next({target:d.target,isAutofilled:!0}))):d.animationName==="cdk-text-field-autofill-end"&&i.classList.contains(s)&&(i.classList.remove(s),this._ngZone.run(()=>o.next({target:d.target,isAutofilled:!1})))},c=this._ngZone.runOutsideAngular(()=>(i.classList.add("cdk-text-field-autofill-monitored"),this._renderer.listen(i,"animationstart",l,moe)));return this._monitoredElements.set(i,{subject:o,unlisten:c}),o}stopMonitoring(t){let i=jr(t),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var R4=(()=>{class n{_elementRef=D(Ue);_platform=D(Gt);_ngZone=D(De);_renderer=D(Tn);_resizeEvents=new ve;_previousValue;_initialHeight;_destroyed=new ve;_listenerCleanups;_minRows;_maxRows;_enabled=!0;_previousMinRows=-1;_textareaElement;get minRows(){return this._minRows}set minRows(t){this._minRows=Lr(t),this._setMinHeight()}get maxRows(){return this._maxRows}set maxRows(t){this._maxRows=Lr(t),this._setMaxHeight()}get enabled(){return this._enabled}set enabled(t){this._enabled!==t&&((this._enabled=t)?this.resizeToFitContent(!0):this.reset())}get placeholder(){return this._textareaElement.placeholder}set placeholder(t){this._cachedPlaceholderHeight=void 0,t?this._textareaElement.setAttribute("placeholder",t):this._textareaElement.removeAttribute("placeholder"),this._cacheTextareaPlaceholderHeight()}_cachedLineHeight;_cachedPlaceholderHeight;_cachedScrollTop;_document=D(Qe);_hasFocus;_isViewInited=!1;constructor(){D(ir).load(P4),this._textareaElement=this._elementRef.nativeElement}_setMinHeight(){let t=this.minRows&&this._cachedLineHeight?`${this.minRows*this._cachedLineHeight}px`:null;t&&(this._textareaElement.style.minHeight=t)}_setMaxHeight(){let t=this.maxRows&&this._cachedLineHeight?`${this.maxRows*this._cachedLineHeight}px`:null;t&&(this._textareaElement.style.maxHeight=t)}ngAfterViewInit(){this._platform.isBrowser&&(this._initialHeight=this._textareaElement.style.height,this.resizeToFitContent(),this._ngZone.runOutsideAngular(()=>{this._listenerCleanups=[this._renderer.listen("window","resize",()=>this._resizeEvents.next()),this._renderer.listen(this._textareaElement,"focus",this._handleFocusEvent),this._renderer.listen(this._textareaElement,"blur",this._handleFocusEvent)],this._resizeEvents.pipe(ph(16)).subscribe(()=>{this._cachedLineHeight=this._cachedPlaceholderHeight=void 0,this.resizeToFitContent(!0)})}),this._isViewInited=!0,this.resizeToFitContent(!0))}ngOnDestroy(){this._listenerCleanups?.forEach(t=>t()),this._resizeEvents.complete(),this._destroyed.next(),this._destroyed.complete()}_cacheTextareaLineHeight(){if(this._cachedLineHeight)return;let t=this._textareaElement.cloneNode(!1),i=t.style;t.rows=1,i.position="absolute",i.visibility="hidden",i.border="none",i.padding="0",i.height="",i.minHeight="",i.maxHeight="",i.top=i.bottom=i.left=i.right="auto",i.overflow="hidden",this._textareaElement.parentNode.appendChild(t),this._cachedLineHeight=t.clientHeight,t.remove(),this._setMinHeight(),this._setMaxHeight()}_measureScrollHeight(){let t=this._textareaElement,i=t.style.marginBottom||"",r=this._platform.FIREFOX,o=r&&this._hasFocus,s=r?"cdk-textarea-autosize-measuring-firefox":"cdk-textarea-autosize-measuring";o&&(t.style.marginBottom=`${t.clientHeight}px`),t.classList.add(s);let l=t.scrollHeight-4;return t.classList.remove(s),o&&(t.style.marginBottom=i),l}_cacheTextareaPlaceholderHeight(){if(!this._isViewInited||this._cachedPlaceholderHeight!=null)return;if(!this.placeholder){this._cachedPlaceholderHeight=0;return}let t=this._textareaElement.value;this._textareaElement.value=this._textareaElement.placeholder,this._cachedPlaceholderHeight=this._measureScrollHeight(),this._textareaElement.value=t}_handleFocusEvent=t=>{this._hasFocus=t.type==="focus"};ngDoCheck(){this._platform.isBrowser&&this.resizeToFitContent()}resizeToFitContent(t=!1){if(!this._enabled||(this._cacheTextareaLineHeight(),this._cacheTextareaPlaceholderHeight(),this._cachedScrollTop=this._textareaElement.scrollTop,!this._cachedLineHeight))return;let i=this._elementRef.nativeElement,r=i.value;if(!t&&this._minRows===this._previousMinRows&&r===this._previousValue)return;let o=this._measureScrollHeight(),s=Math.max(o,this._cachedPlaceholderHeight||0);i.style.height=`${s}px`,this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame<"u"?requestAnimationFrame(()=>this._scrollToCaretPosition(i)):setTimeout(()=>this._scrollToCaretPosition(i))}),this._previousValue=r,this._previousMinRows=this._minRows}reset(){this._initialHeight!==void 0&&(this._textareaElement.style.height=this._initialHeight)}_noopInputHandler(){}_scrollToCaretPosition(t){let{selectionStart:i,selectionEnd:r}=t;!this._destroyed.isStopped&&this._hasFocus&&(t.setSelectionRange(i,r),t.scrollTop=this._cachedScrollTop)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Te({type:n,selectors:[["textarea","cdkTextareaAutosize",""]],hostAttrs:["rows","1",1,"cdk-textarea-autosize"],hostBindings:function(i,r){i&1&&Me("input",function(){return r._noopInputHandler()})},inputs:{minRows:[0,"cdkAutosizeMinRows","minRows"],maxRows:[0,"cdkAutosizeMaxRows","maxRows"],enabled:[2,"cdkTextareaAutosize","enabled",Vn],placeholder:"placeholder"},exportAs:["cdkTextareaAutosize"]})}return n})(),Bx=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=$e({type:n});static \u0275inj=Ve({})}return n})();var N4=new oe("MAT_INPUT_VALUE_ACCESSOR");var VP=class{_box;_destroyed=new ve;_resizeSubject=new ve;_resizeObserver;_elementObservables=new Map;constructor(e){this._box=e,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(t=>this._resizeSubject.next(t)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new ot(t=>{let i=this._resizeSubject.subscribe(t);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),i.unsubscribe(),this._elementObservables.delete(e)}}).pipe(It(t=>t.some(i=>i.target===e)),vh({bufferSize:1,refCount:!0}),wn(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},F4=(()=>{class n{_cleanupErrorListener;_observers=new Map;_ngZone=D(De);constructor(){typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,t]of this._observers)t.destroy();this._observers.clear(),this._cleanupErrorListener?.()}observe(t,i){let r=i?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new VP(r)),this._observers.get(r).observe(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var _oe=["notch"],voe=["matFormFieldNotchedOutline",""],boe=["*"],L4=["iconPrefixContainer"],j4=["textPrefixContainer"],B4=["iconSuffixContainer"],V4=["textSuffixContainer"],yoe=["textField"],woe=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],xoe=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function Coe(n,e){n&1&&qt(0,"span",20)}function Eoe(n,e){if(n&1&&(z(0,"label",19),bt(1,1),_t(2,Coe,1,0,"span",20),U()),n&2){let t=Q(2);de("floating",t._shouldLabelFloat())("monitorResize",t._hasOutline())("id",t._labelId),Ut("for",t._control.disableAutomaticLabeling?null:t._control.id),B(2),vt(!t.hideRequiredMarker&&t._control.required?2:-1)}}function Ioe(n,e){if(n&1&&_t(0,Eoe,3,5,"label",19),n&2){let t=Q();vt(t._hasFloatingLabel()?0:-1)}}function Soe(n,e){n&1&&qt(0,"div",7)}function Doe(n,e){}function Toe(n,e){if(n&1&&Xe(0,Doe,0,0,"ng-template",13),n&2){Q(2);let t=Pr(1);de("ngTemplateOutlet",t)}}function koe(n,e){if(n&1&&(z(0,"div",9),_t(1,Toe,1,1,null,13),U()),n&2){let t=Q();de("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat()),B(),vt(t._forceDisplayInfixLabel()?-1:1)}}function Aoe(n,e){n&1&&(z(0,"div",10,2),bt(2,2),U())}function Moe(n,e){n&1&&(z(0,"div",11,3),bt(2,3),U())}function Poe(n,e){}function Ooe(n,e){if(n&1&&Xe(0,Poe,0,0,"ng-template",13),n&2){Q();let t=Pr(1);de("ngTemplateOutlet",t)}}function Roe(n,e){n&1&&(z(0,"div",14,4),bt(2,4),U())}function Noe(n,e){n&1&&(z(0,"div",15,5),bt(2,5),U())}function Foe(n,e){n&1&&qt(0,"div",16)}function Loe(n,e){n&1&&bt(0,6)}function joe(n,e){if(n&1&&(z(0,"mat-hint",21),ae(1),U()),n&2){let t=Q(2);de("id",t._hintLabelId),B(),Nt(t.hintLabel)}}function Boe(n,e){if(n&1&&(_t(0,joe,2,2,"mat-hint",21),bt(1,7),qt(2,"div",22),bt(3,8)),n&2){let t=Q();vt(t.hintLabel?0:-1)}}var zP=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Te({type:n,selectors:[["mat-label"]]})}return n})(),Voe=new oe("MatError");var $P=(()=>{class n{align="start";id=D(to).getId("mat-mdc-hint-");static \u0275fac=function(i){return new(i||n)};static \u0275dir=Te({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(i,r){i&2&&(ls("id",r.id),Ut("align",null),lt("mat-mdc-form-field-hint-end",r.align==="end"))},inputs:{align:"align",id:"id"}})}return n})(),zoe=new oe("MatPrefix");var $oe=new oe("MatSuffix");var G4=new oe("FloatingLabelParent"),z4=(()=>{class n{_elementRef=D(Ue);get floating(){return this._floating}set floating(t){this._floating=t,this.monitorResize&&this._handleResize()}_floating=!1;get monitorResize(){return this._monitorResize}set monitorResize(t){this._monitorResize=t,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}_monitorResize=!1;_resizeObserver=D(F4);_ngZone=D(De);_parent=D(G4);_resizeSubscription=new Pt;constructor(){}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return Uoe(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Te({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(i,r){i&2&&lt("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return n})();function Uoe(n){let e=n;if(e.offsetParent!==null)return e.scrollWidth;let t=e.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);let i=t.scrollWidth;return t.remove(),i}var $4="mdc-line-ripple--active",Vx="mdc-line-ripple--deactivating",U4=(()=>{class n{_elementRef=D(Ue);_cleanupTransitionEnd;constructor(){let t=D(De),i=D(Tn);t.runOutsideAngular(()=>{this._cleanupTransitionEnd=i.listen(this._elementRef.nativeElement,"transitionend",this._handleTransitionEnd)})}activate(){let t=this._elementRef.nativeElement.classList;t.remove(Vx),t.add($4)}deactivate(){this._elementRef.nativeElement.classList.add(Vx)}_handleTransitionEnd=t=>{let i=this._elementRef.nativeElement.classList,r=i.contains(Vx);t.propertyName==="opacity"&&r&&i.remove($4,Vx)};ngOnDestroy(){this._cleanupTransitionEnd()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Te({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return n})(),H4=(()=>{class n{_elementRef=D(Ue);_ngZone=D(De);open=!1;_notch;ngAfterViewInit(){let t=this._elementRef.nativeElement,i=t.querySelector(".mdc-floating-label");i?(t.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(i.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>i.style.transitionDuration="")}))):t.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(t){let i=this._notch.nativeElement;!this.open||!t?i.style.width="":i.style.width=`calc(${t}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}_setMaxWidth(t){this._notch.nativeElement.style.setProperty("--mat-form-field-notch-max-width",`calc(100% - ${t}px)`)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Fe({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(i,r){if(i&1&&on(_oe,5),i&2){let o;st(o=at())&&(r._notch=o.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(i,r){i&2&&lt("mdc-notched-outline--notched",r.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},attrs:voe,ngContentSelectors:boe,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(i,r){i&1&&(Cn(),sa(0,"div",1),vo(1,"div",2,0),bt(3),zo(),sa(4,"div",3))},encapsulation:2,changeDetection:0})}return n})(),UP=(()=>{class n{value;stateChanges;id;placeholder;ngControl;focused;empty;shouldLabelFloat;required;disabled;errorState;controlType;autofilled;userAriaDescribedBy;disableAutomaticLabeling;describedByIds;static \u0275fac=function(i){return new(i||n)};static \u0275dir=Te({type:n})}return n})();var HP=new oe("MatFormField"),Hoe=new oe("MAT_FORM_FIELD_DEFAULT_OPTIONS"),q4="fill",qoe="auto",W4="fixed",Woe="translateY(-50%)",C_=(()=>{class n{_elementRef=D(Ue);_changeDetectorRef=D(Wn);_dir=D(no);_platform=D(Gt);_idGenerator=D(to);_ngZone=D(De);_defaults=D(Hoe,{optional:!0});_textField;_iconPrefixContainer;_textPrefixContainer;_iconSuffixContainer;_textSuffixContainer;_floatingLabel;_notchedOutline;_lineRipple;_iconPrefixContainerSignal=lg("iconPrefixContainer");_textPrefixContainerSignal=lg("textPrefixContainer");_iconSuffixContainerSignal=lg("iconSuffixContainer");_textSuffixContainerSignal=lg("textSuffixContainer");_prefixSuffixContainers=Rr(()=>[this._iconPrefixContainerSignal(),this._textPrefixContainerSignal(),this._iconSuffixContainerSignal(),this._textSuffixContainerSignal()].map(t=>t?.nativeElement).filter(t=>t!==void 0));_formFieldControl;_prefixChildren;_suffixChildren;_errorChildren;_hintChildren;_labelChild=iV(zP);get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Pi(t)}_hideRequiredMarker=!1;color="primary";get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||qoe}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}_floatLabel;get appearance(){return this._appearanceSignal()}set appearance(t){let i=t||this._defaults?.appearance||q4;this._appearanceSignal.set(i)}_appearanceSignal=rn(q4);get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||W4}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||W4}_subscriptSizing=null;get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}_hintLabel="";_hasIconPrefix=!1;_hasTextPrefix=!1;_hasIconSuffix=!1;_hasTextSuffix=!1;_labelId=this._idGenerator.getId("mat-mdc-form-field-label-");_hintLabelId=this._idGenerator.getId("mat-mdc-hint-");_describedByIds;get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}_destroyed=new ve;_isFocused=null;_explicitFormFieldControl;_previousControl=null;_previousControlValidatorFn=null;_stateChanges;_valueChanges;_describedByChanges;_animationsDisabled=Wi();constructor(){let t=this._defaults;t&&(t.appearance&&(this.appearance=t.appearance),this._hideRequiredMarker=!!t?.hideRequiredMarker,t.color&&(this.color=t.color)),this._syncOutlineLabelOffset()}ngAfterViewInit(){this._updateFocusState(),this._animationsDisabled||this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-form-field-animations-enabled")},300)}),this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._control.ngControl&&this._control.ngControl.control&&(this._previousControlValidatorFn=this._control.ngControl.control.validator),this._previousControl=this._control),this._control.ngControl&&this._control.ngControl.control&&this._control.ngControl.control.validator!==this._previousControlValidatorFn&&this._changeDetectorRef.markForCheck()}ngOnDestroy(){this._outlineLabelOffsetResizeObserver?.disconnect(),this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._describedByChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getLabelId=Rr(()=>this._hasFloatingLabel()?this._labelId:null);getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(t){let i=this._control,r="mat-mdc-form-field-type-";t&&this._elementRef.nativeElement.classList.remove(r+t.controlType),i.controlType&&this._elementRef.nativeElement.classList.add(r+i.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=i.stateChanges.subscribe(()=>{this._updateFocusState(),this._changeDetectorRef.markForCheck()}),this._describedByChanges?.unsubscribe(),this._describedByChanges=i.stateChanges.pipe(ki([void 0,void 0]),Pe(()=>[i.errorState,i.userAriaDescribedBy]),ry(),It(([[o,s],[l,c]])=>o!==l||s!==c)).subscribe(()=>this._syncDescribedByIds()),this._valueChanges?.unsubscribe(),i.ngControl&&i.ngControl.valueChanges&&(this._valueChanges=i.ngControl.valueChanges.pipe(wn(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),Sr(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_outlineLabelOffsetResizeObserver=null;_syncOutlineLabelOffset(){aV({earlyRead:()=>{if(this._appearanceSignal()!=="outline")return this._outlineLabelOffsetResizeObserver?.disconnect(),null;if(globalThis.ResizeObserver){this._outlineLabelOffsetResizeObserver||=new globalThis.ResizeObserver(()=>{this._writeOutlinedLabelStyles(this._getOutlinedLabelOffset())});for(let t of this._prefixSuffixContainers())this._outlineLabelOffsetResizeObserver.observe(t,{box:"border-box"})}return this._getOutlinedLabelOffset()},write:t=>this._writeOutlinedLabelStyles(t())})}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel=Rr(()=>!!this._labelChild());_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(t){let i=this._control?this._control.ngControl:null;return i&&i[t]}_getSubscriptMessageType(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&t.push(...this._control.userAriaDescribedBy.split(" ")),this._getSubscriptMessageType()==="hint"){let o=this._hintChildren?this._hintChildren.find(l=>l.align==="start"):null,s=this._hintChildren?this._hintChildren.find(l=>l.align==="end"):null;o?t.push(o.id):this._hintLabel&&t.push(this._hintLabelId),s&&t.push(s.id)}else this._errorChildren&&t.push(...this._errorChildren.map(o=>o.id));let i=this._control.describedByIds,r;if(i){let o=this._describedByIds||t;r=t.concat(i.filter(s=>s&&!o.includes(s)))}else r=t;this._control.setDescribedByIds(r),this._describedByIds=t}}_getOutlinedLabelOffset(){let t=this._dir.valueSignal();if(!this._hasOutline()||!this._floatingLabel)return null;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return["",null];if(!this._isAttachedToDom())return null;let i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,o=this._iconSuffixContainer?.nativeElement,s=this._textSuffixContainer?.nativeElement,l=i?.getBoundingClientRect().width??0,c=r?.getBoundingClientRect().width??0,d=o?.getBoundingClientRect().width??0,f=s?.getBoundingClientRect().width??0,p=t==="rtl"?"-1":"1",g=`${l+c}px`,_=`calc(${p} * (${g} + var(--mat-mdc-form-field-label-offset-x, 0px)))`,y=`var(--mat-mdc-form-field-label-transform, ${Woe} translateX(${_}))`,w=l+c+d+f;return[y,w]}_writeOutlinedLabelStyles(t){if(t!==null){let[i,r]=t;this._floatingLabel&&(this._floatingLabel.element.style.transform=i),r!==null&&this._notchedOutline?._setMaxWidth(r)}}_isAttachedToDom(){let t=this._elementRef.nativeElement;if(t.getRootNode){let i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Fe({type:n,selectors:[["mat-form-field"]],contentQueries:function(i,r,o){if(i&1&&(wk(o,r._labelChild,zP,5),Bn(o,UP,5),Bn(o,zoe,5),Bn(o,$oe,5),Bn(o,Voe,5),Bn(o,$P,5)),i&2){w0();let s;st(s=at())&&(r._formFieldControl=s.first),st(s=at())&&(r._prefixChildren=s),st(s=at())&&(r._suffixChildren=s),st(s=at())&&(r._errorChildren=s),st(s=at())&&(r._hintChildren=s)}},viewQuery:function(i,r){if(i&1&&($h(r._iconPrefixContainerSignal,L4,5),$h(r._textPrefixContainerSignal,j4,5),$h(r._iconSuffixContainerSignal,B4,5),$h(r._textSuffixContainerSignal,V4,5),on(yoe,5),on(L4,5),on(j4,5),on(B4,5),on(V4,5),on(z4,5),on(H4,5),on(U4,5)),i&2){w0(4);let o;st(o=at())&&(r._textField=o.first),st(o=at())&&(r._iconPrefixContainer=o.first),st(o=at())&&(r._textPrefixContainer=o.first),st(o=at())&&(r._iconSuffixContainer=o.first),st(o=at())&&(r._textSuffixContainer=o.first),st(o=at())&&(r._floatingLabel=o.first),st(o=at())&&(r._notchedOutline=o.first),st(o=at())&&(r._lineRipple=o.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:40,hostBindings:function(i,r){i&2&&lt("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-appearance-fill",r.appearance=="fill")("mat-form-field-appearance-outline",r.appearance=="outline")("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary",r.color!=="accent"&&r.color!=="warn")("mat-accent",r.color==="accent")("mat-warn",r.color==="warn")("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Vt([{provide:HP,useExisting:n},{provide:G4,useExisting:n}])],ngContentSelectors:xoe,decls:19,vars:25,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],["textSuffixContainer",""],["iconSuffixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],["aria-atomic","true","aria-live","polite"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(i,r){if(i&1){let o=Bt();Cn(woe),Xe(0,Ioe,1,1,"ng-template",null,0,rl),z(2,"div",6,1),Me("click",function(l){return Ge(o),Ze(r._control.onContainerClick(l))}),_t(4,Soe,1,0,"div",7),z(5,"div",8),_t(6,koe,2,2,"div",9),_t(7,Aoe,3,0,"div",10),_t(8,Moe,3,0,"div",11),z(9,"div",12),_t(10,Ooe,1,1,null,13),bt(11),U(),_t(12,Roe,3,0,"div",14),_t(13,Noe,3,0,"div",15),U(),_t(14,Foe,1,0,"div",16),U(),z(15,"div",17)(16,"div",18),_t(17,Loe,1,0)(18,Boe,4,1),U()()}if(i&2){let o;B(2),lt("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),B(2),vt(!r._hasOutline()&&!r._control.disabled?4:-1),B(2),vt(r._hasOutline()?6:-1),B(),vt(r._hasIconPrefix?7:-1),B(),vt(r._hasTextPrefix?8:-1),B(2),vt(!r._hasOutline()||r._forceDisplayInfixLabel()?10:-1),B(2),vt(r._hasTextSuffix?12:-1),B(),vt(r._hasIconSuffix?13:-1),B(),vt(r._hasOutline()?-1:14),B(),lt("mat-mdc-form-field-subscript-dynamic-size",r.subscriptSizing==="dynamic");let s=r._getSubscriptMessageType();B(),lt("mat-mdc-form-field-error-wrapper",s==="error")("mat-mdc-form-field-hint-wrapper",s==="hint"),B(),vt((o=s)==="error"?17:o==="hint"?18:-1)}},dependencies:[z4,H4,Xk,U4,$P],styles:[`.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator,.mdc-text-field__input::-webkit-search-cancel-button{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-moz-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-webkit-input-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive:-ms-input-placeholder{opacity:0}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mat-form-field-filled-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mat-form-field-filled-caret-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mat-form-field-outlined-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mat-form-field-outlined-caret-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mat-form-field-filled-error-caret-color, var(--mat-sys-error))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mat-form-field-outlined-error-caret-color, var(--mat-sys-error))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mat-form-field-filled-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mat-form-field-outlined-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mat-form-field-filled-container-shape, var(--mat-sys-corner-extra-small));border-top-right-radius:var(--mat-form-field-filled-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mat-form-field-filled-container-color, var(--mat-sys-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mat-form-field-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 4%, transparent))}.mdc-text-field--outlined{height:56px;overflow:visible;padding-right:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)));padding-left:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)) + 4px);padding-left:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)))}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}@media(forced-colors: active){.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mat-form-field-filled-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-filled-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mat-form-field-filled-hover-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mat-form-field-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mat-form-field-filled-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-filled-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mat-form-field-filled-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mat-form-field-filled-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-form-field-filled-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-form-field-filled-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-form-field-filled-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mat-form-field-outlined-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-outlined-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mat-form-field-outlined-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mat-form-field-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mat-form-field-outlined-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-outlined-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mat-form-field-outlined-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mat-form-field-outlined-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-form-field-outlined-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-form-field-outlined-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-form-field-outlined-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-outline-color, var(--mat-sys-outline));border-width:var(--mat-form-field-outlined-outline-width, 1px)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-hover-outline-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-focus-outline-color, var(--mat-sys-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-hover-outline-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-focus-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mat-form-field-outlined-focus-outline-width, 2px)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)))}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:min(var(--mat-form-field-notch-max-width, 100%),calc(100% - max(12px, var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))) * 2))}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{max-width:min(100%,calc(100% - max(12px, var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))) * 2))}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mat-form-field-filled-active-indicator-height, 1px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-active-indicator-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-hover-active-indicator-color, var(--mat-sys-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-disabled-active-indicator-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-error-active-indicator-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-error-hover-active-indicator-color, var(--mat-sys-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mat-form-field-filled-focus-active-indicator-height, 2px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mat-form-field-filled-focus-active-indicator-color, var(--mat-sys-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mat-form-field-filled-error-focus-active-indicator-color, var(--mat-sys-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height, 56px);padding-top:var(--mat-form-field-filled-with-label-container-padding-top, 24px);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom, 8px)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding, 16px);padding-bottom:var(--mat-form-field-container-vertical-padding, 16px)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height, 56px)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height, 56px) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}@keyframes _mat-form-field-subscript-animation{from{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px;opacity:1;transform:translateY(0);animation:_mat-form-field-subscript-animation 0ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-sys-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-sys-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-sys-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-sys-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-sys-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-sys-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-sys-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity, 0)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color, var(--mat-sys-neutral10))}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color, color-mix(in srgb, var(--mat-sys-neutral10) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}@media(forced-colors: active){.mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}}@media(forced-colors: active){.mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-sys-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-sys-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-sys-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-sys-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field-infix:has(textarea[cols]){width:auto}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field.mat-form-field-animations-enabled .mat-mdc-form-field-error-wrapper{animation-duration:300ms}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}
`],encapsulation:2,changeDetection:0})}return n})();var zx=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var $x=class{_defaultMatcher;ngControl;_parentFormGroup;_parentForm;_stateChanges;errorState=!1;matcher;constructor(e,t,i,r,o){this._defaultMatcher=e,this.ngControl=t,this._parentFormGroup=i,this._parentForm=r,this._stateChanges=o}updateErrorState(){let e=this.errorState,t=this._parentFormGroup||this._parentForm,i=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,o=i?.isErrorState(r,t)??!1;o!==e&&(this.errorState=o,this._stateChanges.next())}};var Pc=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=$e({type:n});static \u0275inj=Ve({imports:[Ft,wx,C_,Ft]})}return n})();var Goe=["button","checkbox","file","hidden","image","radio","range","reset","submit"],Zoe=new oe("MAT_INPUT_CONFIG"),Ux=(()=>{class n{_elementRef=D(Ue);_platform=D(Gt);ngControl=D(pl,{optional:!0,self:!0});_autofillMonitor=D(O4);_ngZone=D(De);_formField=D(HP,{optional:!0});_renderer=D(Tn);_uid=D(to).getId("mat-input-");_previousNativeValue;_inputValueAccessor;_signalBasedValueAccessor;_previousPlaceholder;_errorStateTracker;_config=D(Zoe,{optional:!0});_cleanupIosKeyup;_cleanupWebkitWheel;_isServer;_isNativeSelect;_isTextarea;_isInFormField;focused=!1;stateChanges=new ve;controlType="mat-input";autofilled=!1;get disabled(){return this._disabled}set disabled(t){this._disabled=Pi(t),this.focused&&(this.focused=!1,this.stateChanges.next())}_disabled=!1;get id(){return this._id}set id(t){this._id=t||this._uid}_id;placeholder;name;get required(){return this._required??this.ngControl?.control?.hasValidator(ps.required)??!1}set required(t){this._required=Pi(t)}_required;get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&kP().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}_type="text";get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(t){this._errorStateTracker.matcher=t}userAriaDescribedBy;get value(){return this._signalBasedValueAccessor?this._signalBasedValueAccessor.value():this._inputValueAccessor.value}set value(t){t!==this.value&&(this._signalBasedValueAccessor?this._signalBasedValueAccessor.value.set(t):this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Pi(t)}_readonly=!1;disabledInteractive;get errorState(){return this._errorStateTracker.errorState}set errorState(t){this._errorStateTracker.errorState=t}_neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(t=>kP().has(t));constructor(){let t=D(fP,{optional:!0}),i=D(yf,{optional:!0}),r=D(zx),o=D(N4,{optional:!0,self:!0}),s=this._elementRef.nativeElement,l=s.nodeName.toLowerCase();o?ic(o.value)?this._signalBasedValueAccessor=o:this._inputValueAccessor=o:this._inputValueAccessor=s,this._previousNativeValue=this.value,this.id=this.id,this._platform.IOS&&this._ngZone.runOutsideAngular(()=>{this._cleanupIosKeyup=this._renderer.listen(s,"keyup",this._iOSKeyupListener)}),this._errorStateTracker=new $x(r,this.ngControl,i,t,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=l==="select",this._isTextarea=l==="textarea",this._isInFormField=!!this._formField,this.disabledInteractive=this._config?.disabledInteractive||!1,this._isNativeSelect&&(this.controlType=s.multiple?"mat-native-select-multiple":"mat-native-select"),this._signalBasedValueAccessor&&qh(()=>{this._signalBasedValueAccessor.value(),this.stateChanges.next()})}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._cleanupIosKeyup?.(),this._cleanupWebkitWheel?.()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(t){if(t!==this.focused){if(!this._isNativeSelect&&t&&this.disabled&&this.disabledInteractive){let i=this._elementRef.nativeElement;i.type==="number"?(i.type="text",i.setSelectionRange(0,0),i.type="number"):i.setSelectionRange(0,0)}this.focused=t,this.stateChanges.next()}}_onInput(){}_dirtyCheckNativeValue(){let t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){let t=this._getPlaceholder();if(t!==this._previousPlaceholder){let i=this._elementRef.nativeElement;this._previousPlaceholder=t,t?i.setAttribute("placeholder",t):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){Goe.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}else return this.focused&&!this.disabled||!this.empty}get describedByIds(){return this._elementRef.nativeElement.getAttribute("aria-describedby")?.split(" ")||[]}setDescribedByIds(t){let i=this._elementRef.nativeElement;t.length?i.setAttribute("aria-describedby",t.join(" ")):i.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}_iOSKeyupListener=t=>{let i=t.target;!i.value&&i.selectionStart===0&&i.selectionEnd===0&&(i.setSelectionRange(1,1),i.setSelectionRange(0,0))};_getReadonlyAttribute(){return this._isNativeSelect?null:this.readonly||this.disabled&&this.disabledInteractive?"true":null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Te({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:21,hostBindings:function(i,r){i&1&&Me("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),i&2&&(ls("id",r.id)("disabled",r.disabled&&!r.disabledInteractive)("required",r.required),Ut("name",r.name||null)("readonly",r._getReadonlyAttribute())("aria-disabled",r.disabled&&r.disabledInteractive?"true":null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),lt("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mat-mdc-input-disabled-interactive",r.disabledInteractive)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly",disabledInteractive:[2,"disabledInteractive","disabledInteractive",Vn]},exportAs:["matInput"],features:[Vt([{provide:UP,useExisting:n}]),jn]})}return n})(),Hx=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=$e({type:n});static \u0275inj=Ve({imports:[Ft,Pc,Pc,Bx,Ft]})}return n})();var Koe={capture:!0},Yoe=["focus","mousedown","mouseenter","touchstart"],qP="mat-ripple-loader-uninitialized",WP="mat-ripple-loader-class-name",K4="mat-ripple-loader-centered",qx="mat-ripple-loader-disabled",Y4=(()=>{class n{_document=D(Qe);_animationsDisabled=Wi();_globalRippleOptions=D(p_,{optional:!0});_platform=D(Gt);_ngZone=D(De);_injector=D(We);_eventCleanups;_hosts=new Map;constructor(){let t=D(_i).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>Yoe.map(i=>t.listen(this._document,i,this._onInteraction,Koe)))}ngOnDestroy(){let t=this._hosts.keys();for(let i of t)this.destroyRipple(i);this._eventCleanups.forEach(i=>i())}configureRipple(t,i){t.setAttribute(qP,this._globalRippleOptions?.namespace??""),(i.className||!t.hasAttribute(WP))&&t.setAttribute(WP,i.className||""),i.centered&&t.setAttribute(K4,""),i.disabled&&t.setAttribute(qx,"")}setDisabled(t,i){let r=this._hosts.get(t);r?(r.target.rippleDisabled=i,!i&&!r.hasSetUpEvents&&(r.hasSetUpEvents=!0,r.renderer.setupTriggerEvents(t))):i?t.setAttribute(qx,""):t.removeAttribute(qx)}_onInteraction=t=>{let i=eo(t);if(i instanceof HTMLElement){let r=i.closest(`[${qP}="${this._globalRippleOptions?.namespace??""}"]`);r&&this._createRipple(r)}};_createRipple(t){if(!this._document||this._hosts.has(t))return;t.querySelector(".mat-ripple")?.remove();let i=this._document.createElement("span");i.classList.add("mat-ripple",t.getAttribute(WP)),t.append(i);let r=this._globalRippleOptions,o=this._animationsDisabled?0:r?.animation?.enterDuration??f_.enterDuration,s=this._animationsDisabled?0:r?.animation?.exitDuration??f_.exitDuration,l={rippleDisabled:this._animationsDisabled||r?.disabled||t.hasAttribute(qx),rippleConfig:{centered:t.hasAttribute(K4),terminateOnPointerUp:r?.terminateOnPointerUp,animation:{enterDuration:o,exitDuration:s}}},c=new Qu(l,this._ngZone,i,this._platform,this._injector),d=!l.rippleDisabled;d&&c.setupTriggerEvents(t),this._hosts.set(t,{target:l,renderer:c,hasSetUpEvents:d}),t.removeAttribute(qP)}destroyRipple(t){let i=this._hosts.get(t);i&&(i.renderer._removeTriggerEvents(),this._hosts.delete(t))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Qoe=new oe("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})});var Q4=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=$e({type:n});static \u0275inj=Ve({providers:[zx,{provide:Qoe,useValue:{separatorKeyCodes:[13]}}],imports:[Ft,Mc,Ft]})}return n})();var Xoe=["autosize"],GP=(n,e)=>e.name;function Joe(n,e){if(n&1){let t=Bt();z(0,"button",18),Me("click",function(){let r=Ge(t).$implicit,o=Q();return Ze(o.selectTool(r))}),z(1,"mat-icon",19),ae(2,"build"),U(),z(3,"span"),ae(4),U()()}if(n&2){let t=e.$implicit;B(4),Nt(t.displayName)}}function ese(n,e){if(n&1){let t=Bt();z(0,"button",18),Me("click",function(){let r=Ge(t).$implicit,o=Q();return Ze(o.selectResource(r))}),z(1,"mat-icon",19),ae(2,"collections_bookmark"),U(),z(3,"span"),ae(4),U()()}if(n&2){let t=e.$implicit;B(4),Nt(t.displayName)}}function tse(n,e){if(n&1){let t=Bt();z(0,"button",18),Me("click",function(){let r=Ge(t).$implicit,o=Q();return Ze(o.selectPrompt(r))}),z(1,"mat-icon",19),ae(2,"lightbulb"),U(),z(3,"span"),ae(4),U()()}if(n&2){let t=e.$implicit;B(4),Nt(t.displayName)}}function nse(n,e){if(n&1){let t=Bt();z(0,"span",21),Me("click",function(){Ge(t);let r=Q(2);return Ze(r.clearSelection("tool",r.selectedTool))}),z(1,"mat-icon",22),ae(2,"build"),U(),z(3,"span",23),ae(4),U(),z(5,"span",24),ae(6,"\xD7"),U()()}if(n&2){let t=Q(2);B(4),Nt(t.selectedTool.displayName)}}function ise(n,e){if(n&1){let t=Bt();z(0,"span",21),Me("click",function(){Ge(t);let r=Q(2);return Ze(r.clearSelection("resource",r.selectedResource))}),z(1,"mat-icon",22),ae(2,"collections_bookmark"),U(),z(3,"span",23),ae(4),U(),z(5,"span",24),ae(6,"\xD7"),U()()}if(n&2){let t=Q(2);B(4),Nt(t.selectedResource.displayName)}}function rse(n,e){if(n&1){let t=Bt();z(0,"span",21),Me("click",function(){Ge(t);let r=Q(2);return Ze(r.clearSelection("prompt",r.selectedPrompt))}),z(1,"mat-icon",22),ae(2,"lightbulb"),U(),z(3,"span",23),ae(4),U(),z(5,"span",24),ae(6,"\xD7"),U()()}if(n&2){let t=Q(2);B(4),Nt(t.selectedPrompt.displayName)}}function ose(n,e){if(n&1&&(z(0,"div",17),_t(1,nse,7,1,"span",20),_t(2,ise,7,1,"span",20),_t(3,rse,7,1,"span",20),U()),n&2){let t=Q();B(),vt(t.selectedTool?1:-1),B(),vt(t.selectedResource?2:-1),B(),vt(t.selectedPrompt?3:-1)}}var Wx=class n{constructor(e){this.mcpService=e}_injector=D(We);autosize;sendMessage=new je;sendTool=new je;sendResource=new je;sendPrompt=new je;message="";showToolsMenu=!1;showResourcesMenu=!1;showPromptsMenu=!1;tools=[];resources=[];prompts=[];selectedTool=null;selectedResource=null;selectedPrompt=null;isConnected=!1;subs=new Pt;ngOnInit(){this.subs.add(this.mcpService.connectionStatus$.pipe(It(e=>e===!0)).subscribe(e=>{console.log("mcp input-box : ",e),this.subs.add(this.mcpService.tools$.subscribe(t=>this.tools=t)),this.subs.add(this.mcpService.promtps$.subscribe(t=>this.prompts=t)),this.subs.add(this.mcpService.resources$.subscribe(t=>this.resources=t))})),this.triggerResize()}triggerResize(){vi(()=>{this.autosize.resizeToFitContent(!0)},{injector:this._injector})}submitMessage(e){e&&e.preventDefault(),this.message.trim()&&(this.sendMessage.emit(this.message.trim()),this.message="")}selectTool(e){this.selectedTool&&this.tools.push(this.selectedTool),this.tools=this.tools.filter(t=>t.name!==e.name),this.selectedTool=e,this.showToolsMenu=!1,this.sendTool.emit(this.selectedTool)}selectResource(e){this.selectedResource&&this.resources.push(this.selectedResource),this.resources=this.resources.filter(t=>t.name!==e.name),this.selectedResource=e,this.showResourcesMenu=!1}selectPrompt(e){this.selectedPrompt&&this.prompts.push(this.selectedPrompt),this.prompts=this.prompts.filter(t=>t.name!==e.name),this.selectedPrompt=e,this.showPromptsMenu=!1}ngOnDestroy(){this.subs.unsubscribe()}clearSelection(e,t){switch(e){case"prompt":this.selectedPrompt=null,this.prompts.push(t);break;case"resource":this.selectedResource=null,this.resources.push(t);break;case"tool":this.selectedTool=null,this.tools.push(t),this.sendTool.emit(this.selectedTool);break;default:break}}static \u0275fac=function(t){return new(t||n)(Ce(qi))};static \u0275cmp=Fe({type:n,selectors:[["app-input-box"]],viewQuery:function(t,i){if(t&1&&on(Xoe,5),t&2){let r;st(r=at())&&(i.autosize=r.first)}},outputs:{sendMessage:"sendMessage",sendTool:"sendTool",sendResource:"sendResource",sendPrompt:"sendPrompt"},decls:32,vars:6,consts:[["autosize","cdkTextareaAutosize"],["toolsMenu","matMenu"],["resourcesMenu","matMenu"],["promptsMenu","matMenu"],[1,"input-container"],[1,"input-main-row"],[1,"input-box"],["appearance","fill",1,"full-width"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","4","placeholder","Type a message...",3,"ngModelChange","keydown.enter","ngModel"],["mat-icon-button","",1,"send-button",3,"click","disabled"],[1,"icon-small"],[1,"action-buttons"],["mat-icon-button","","matTooltip","Tools",1,"action-button",3,"matMenuTriggerFor"],[1,"enhanced-menu"],["mat-menu-item",""],["mat-icon-button","","matTooltip","Resources",1,"action-button",3,"matMenuTriggerFor"],["mat-icon-button","","matTooltip","Prompts",1,"action-button",3,"matMenuTriggerFor"],[1,"selected-items"],["mat-menu-item","",3,"click"],[1,"menu-icon"],[1,"selected-item"],[1,"selected-item",3,"click"],[1,"icon-xsmall"],[1,"selected-text"],[1,"chip-close"]],template:function(t,i){if(t&1){let r=Bt();z(0,"div",4)(1,"div",5)(2,"div",6)(3,"mat-form-field",7)(4,"textarea",8,0),lc("ngModelChange",function(s){return Ge(r),Nu(i.message,s)||(i.message=s),Ze(s)}),Me("keydown.enter",function(s){return Ge(r),Ze(i.submitMessage(s))}),U()(),z(6,"button",9),Me("click",function(){return Ge(r),Ze(i.submitMessage())}),z(7,"mat-icon",10),ae(8,"send"),U()()(),z(9,"div",11)(10,"button",12)(11,"mat-icon",10),ae(12,"build"),U()(),z(13,"mat-menu",13,1),cr(15,Joe,5,1,"button",14,GP),U(),z(17,"button",15)(18,"mat-icon",10),ae(19,"collections_bookmark"),U()(),z(20,"mat-menu",13,2),cr(22,ese,5,1,"button",14,GP),U(),z(24,"button",16)(25,"mat-icon",10),ae(26,"lightbulb"),U()(),z(27,"mat-menu",13,3),cr(29,tse,5,1,"button",14,GP),U()()(),_t(31,ose,4,3,"div",17),U()}if(t&2){let r=Pr(14),o=Pr(21),s=Pr(28);B(4),ac("ngModel",i.message),B(2),de("disabled",!i.message.trim()),B(4),de("matMenuTriggerFor",r),B(5),ur(i.tools),B(2),de("matMenuTriggerFor",o),B(5),ur(i.resources),B(2),de("matMenuTriggerFor",s),B(5),ur(i.prompts),B(2),vt(i.selectedTool||i.selectedResource||i.selectedPrompt?31:-1)}},dependencies:[da,Ec,bf,l_,gx,hr,E4,Nf,w_,C4,jf,Lf,Hx,Ux,C_,R4,Pc,Q4,Bx],styles:[".input-container[_ngcontent-%COMP%]{padding:12px 16px;background-color:#fff;border-radius:12px;margin-bottom:16px;box-shadow:0 -2px 10px #00000008;box-sizing:border-box}.input-main-row[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:8px;width:100%}.input-box[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:8px;flex:1;min-width:0}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:4px;flex-shrink:0;align-items:center}.action-button[_ngcontent-%COMP%]{color:#666;width:40px;height:40px;background-color:#f8f8f8;border-radius:8px;flex-shrink:0}.action-button[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.icon-small[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:#666}.icon-xsmall[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;color:#666;margin-right:6px;flex-shrink:0}.full-width[_ngcontent-%COMP%], .mat-form-field[_ngcontent-%COMP%]{width:100%;min-width:0}.mat-form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:44px;line-height:1.4;resize:none}.send-button[_ngcontent-%COMP%]{color:#1976d2;width:44px;height:44px;flex-shrink:0;margin-bottom:0}.menu-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:18px}.selected-items[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}.selected-item[_ngcontent-%COMP%]{background:#f0f0f0;border-radius:16px;padding:6px 12px;display:flex;align-items:center;cursor:pointer;transition:background .2s;font-size:.85rem;max-width:100%;box-sizing:border-box}.selected-item[_ngcontent-%COMP%]:hover{background:#e0e0e0}.selected-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:120px}.chip-close[_ngcontent-%COMP%]{margin-left:6px;font-size:16px;font-weight:700;color:#666;flex-shrink:0}.mat-mdc-menu-panel.enhanced-menu[_ngcontent-%COMP%]{background:#fff!important;border-radius:12px!important;box-shadow:0 4px 20px #00000026!important;border:1px solid #e0e0e0!important;padding:4px 0!important;max-height:60vh!important;overflow-y:auto!important}.mat-mdc-menu-item[_ngcontent-%COMP%]{background:transparent!important;min-height:44px!important;font-size:.9rem!important}.mat-mdc-menu-item[_ngcontent-%COMP%]:hover{background:#f8f8f8!important}.menu-icon[_ngcontent-%COMP%]{margin-right:8px;color:#666;font-size:18px;width:18px;height:18px}@media (max-width: 768px){.input-container[_ngcontent-%COMP%]{padding:10px 12px;margin-bottom:12px;border-radius:10px}.input-main-row[_ngcontent-%COMP%], .input-box[_ngcontent-%COMP%]{gap:6px}.action-button[_ngcontent-%COMP%]{width:38px;height:38px}.icon-small[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.send-button[_ngcontent-%COMP%]{width:40px;height:40px}.mat-form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:40px;font-size:.9rem}.selected-items[_ngcontent-%COMP%]{margin-top:10px;gap:6px}.selected-item[_ngcontent-%COMP%]{padding:5px 10px;font-size:.8rem;border-radius:14px}.selected-text[_ngcontent-%COMP%]{max-width:100px}.icon-xsmall[_ngcontent-%COMP%]{font-size:15px;width:15px;height:15px;margin-right:4px}.chip-close[_ngcontent-%COMP%]{margin-left:4px;font-size:14px}}@media (max-width: 480px){.input-container[_ngcontent-%COMP%]{padding:8px 10px;margin-bottom:8px;border-radius:8px}.input-main-row[_ngcontent-%COMP%], .input-box[_ngcontent-%COMP%]{gap:4px}.action-buttons[_ngcontent-%COMP%]{gap:2px}.action-button[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:6px}.icon-small[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.send-button[_ngcontent-%COMP%]{width:36px;height:36px}.mat-form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:36px;font-size:.85rem}  .mat-mdc-form-field-infix{min-height:36px!important;padding-top:8px!important;padding-bottom:8px!important}  .mat-mdc-text-field-wrapper{padding:0 8px!important}.selected-items[_ngcontent-%COMP%]{margin-top:8px;gap:4px}.selected-item[_ngcontent-%COMP%]{padding:4px 8px;font-size:.75rem;border-radius:12px}.selected-text[_ngcontent-%COMP%]{max-width:80px}.icon-xsmall[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;margin-right:3px}.chip-close[_ngcontent-%COMP%]{margin-left:3px;font-size:12px}.mat-mdc-menu-panel.enhanced-menu[_ngcontent-%COMP%]{border-radius:10px!important;max-width:280px!important;margin:0 8px!important}.mat-mdc-menu-item[_ngcontent-%COMP%]{min-height:40px!important;font-size:.85rem!important}}@media (max-width: 360px){.input-container[_ngcontent-%COMP%]{padding:6px 8px}.action-button[_ngcontent-%COMP%], .send-button[_ngcontent-%COMP%]{width:34px;height:34px}.mat-form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:34px;font-size:.8rem}.selected-text[_ngcontent-%COMP%]{max-width:60px}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:1px}}@supports (padding: max(0px)){.input-container[_ngcontent-%COMP%]{padding-left:max(10px,env(safe-area-inset-left));padding-right:max(10px,env(safe-area-inset-right));padding-bottom:max(8px,env(safe-area-inset-bottom))}}@media (max-width: 480px){.input-container[_ngcontent-%COMP%]{transition:padding-bottom .3s ease}}"]})};var fr=GI(J4());function sse(n,e){if(n&1&&(z(0,"div")(1,"p")(2,"strong"),ae(3,"Coordinates:"),U(),ae(4),kn(5,"number"),kn(6,"number"),U()()),n&2){let t=e.ngIf;B(4),x0(" ",Uh(5,2,t[0],"1.4-4"),", ",Uh(6,5,t[1],"1.4-4")," ")}}function ase(n,e){if(n&1&&(z(0,"div",13)(1,"strong"),ae(2),U(),ae(3),U()),n&2){let t=e.$implicit,i=Q(3);B(2),Wt("",t,":"),B(),Wt(" ",i.selectedFeature.properties[t]," ")}}function lse(n,e){if(n&1&&(z(0,"div",11)(1,"h4"),ae(2,"Properties:"),U(),Xe(3,ase,4,2,"div",12),U()),n&2){let t=Q(2);B(3),de("ngForOf",t.getObjectKeys(t.selectedFeature.properties))}}function cse(n,e){if(n&1){let t=Bt();z(0,"div",5)(1,"div",6)(2,"h3"),ae(3),U(),z(4,"button",7),Me("click",function(){Ge(t);let r=Q();return Ze(r.selectedFeature=null)}),ae(5,"\xD7"),U()(),z(6,"div",8)(7,"p")(8,"strong"),ae(9,"Type:"),U(),ae(10),U(),Xe(11,sse,7,8,"div",9)(12,lse,4,1,"div",10),U()()}if(n&2){let t=Q();B(3),Nt(t.selectedFeature.name),B(7),Wt(" ",t.selectedFeature.type),B(),de("ngIf",t.selectedFeature==null?null:t.selectedFeature.coordinates),B(),de("ngIf",t.selectedFeature.properties&&t.getObjectKeys(t.selectedFeature.properties).length>0)}}var Zx=class n{height="400px";featureDetails=[];wmsLayers=[];center=[0,0];zoom=2;showPopup=!0;featureClick=new je;map;featureLayer=fr.layerGroup();wmsLayersGroup=fr.layerGroup();selectedFeature=null;mapId="map-"+Math.random().toString(36).substr(2,9);ngOnInit(){}ngAfterViewInit(){let e=document.getElementById(this.mapId);console.log("Map element : ",e),e&&(e.style.height=this.height,e.style.width="100%"),this.initializeMap()}ngOnChanges(e){e.featureDetails&&this.map&&(console.log(e.featureDetails),this.updateFeatures()),e.wmsLayers&&this.map&&this.updateWMSLayers(),(e.center||e.zoom)&&this.map&&this.map.setView(this.center,this.zoom)}initializeMap(){this.map=fr.map(this.mapId).setView(this.center,this.zoom),fr.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xA9 OpenStreetMap contributors",maxZoom:19}).addTo(this.map),this.featureLayer.addTo(this.map),this.wmsLayersGroup.addTo(this.map),this.updateFeatures(),this.updateWMSLayers()}updateFeatures(){if(this.featureLayer.clearLayers(),this.featureDetails.forEach(e=>{if(console.log("Feature : ",e),!e.coordinates)return;let t=fr.circleMarker([e.coordinates[0],e.coordinates[1]],{radius:e.style?.radius||8,color:e.style?.color||"#ff0000",fillColor:e.style?.fillColor||"#ff0000",fillOpacity:e.style?.fillOpacity||.7,weight:2,opacity:1}),i=this.createPopupContent(e);t.bindPopup(i,{closeButton:!0,autoClose:!1,closeOnEscapeKey:!0}),t.on("click",()=>{this.selectedFeature=e,this.featureClick.emit(e)}),t.addTo(this.featureLayer),t.featureData=e}),this.featureDetails.length>0){let e=new fr.FeatureGroup;this.featureDetails.forEach(t=>{t.coordinates&&e.addLayer(fr.marker([t.coordinates[0],t.coordinates[1]]))}),this.map.fitBounds(e.getBounds(),{padding:[20,20],maxZoom:15})}}updateWMSLayers(){this.wmsLayersGroup.clearLayers(),this.wmsLayers.forEach((e,t)=>{fr.tileLayer.wms(e.url,{layers:e.layers,version:e.version||"1.3.0",format:e.format||"image/png",transparent:e.transparent!==void 0?e.transparent:!0,attribution:e.attribution,opacity:e.opacity||.7}).addTo(this.wmsLayersGroup)})}createPopupContent(e){return e.coordinates?`
      <div class="leaflet-popup-content">
        <div class="popup-header">
          <h4>${e.name}</h4>
        </div>
        <div class="popup-body">
          <p><strong>Type:</strong> ${e.type}</p>
          <p><strong>Coordinates:</strong> 
            ${e.coordinates[0].toFixed(4)}, 
            ${e.coordinates[1].toFixed(4)}
          </p>
          ${this.createPropertiesContent(e.properties)}
        </div>
      </div>
    `:""}createPropertiesContent(e){return!e||Object.keys(e).length===0?"":`
      <div class="properties-section">
        <h5>Properties:</h5>
        ${Object.keys(e).map(i=>`
        <div class="property-item">
          <strong>${i}:</strong> ${e[i]}
        </div>
      `).join("")}
      </div>
    `}fitToFeatures(){if(this.featureDetails.length>0){let e=new fr.FeatureGroup;this.featureDetails.forEach(t=>{t.coordinates&&e.addLayer(fr.marker([t.coordinates[0],t.coordinates[1]]))}),this.map.fitBounds(e.getBounds(),{padding:[20,20],maxZoom:15})}}addFeature(e){this.featureDetails=[...this.featureDetails,e],this.updateFeatures()}removeFeature(e){this.featureDetails=this.featureDetails.filter(t=>t.id!==e),this.updateFeatures()}getObjectKeys(e){return e?Object.keys(e):[]}ngOnDestroy(){this.map&&this.map.remove()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["app-map"]],inputs:{height:"height",featureDetails:"featureDetails",wmsLayers:"wmsLayers",center:"center",zoom:"zoom",showPopup:"showPopup"},outputs:{featureClick:"featureClick"},features:[jn],decls:7,vars:2,consts:[[1,"map-container"],[1,"map",3,"id"],["class","feature-panel",4,"ngIf"],[1,"map-controls"],["title","Fit to features",1,"control-btn",3,"click"],[1,"feature-panel"],[1,"panel-header"],[1,"close-btn",3,"click"],[1,"panel-content"],[4,"ngIf"],["class","properties",4,"ngIf"],[1,"properties"],["class","property-item",4,"ngFor","ngForOf"],[1,"property-item"]],template:function(t,i){t&1&&(z(0,"div",0),qt(1,"div",1),Xe(2,cse,13,4,"div",2),z(3,"div",3)(4,"button",4),Me("click",function(){return i.fitToFeatures()}),z(5,"span"),ae(6,"\u{1F4CD}"),U()()()()),t&2&&(B(),de("id",i.mapId),B(),de("ngIf",i.showPopup&&i.selectedFeature))},dependencies:[hr,hc,ds,iA],styles:[".map-container[_ngcontent-%COMP%]{position:relative;width:100%!important;height:100%;min-height:350px;border-radius:8px;overflow:hidden;box-shadow:0 2px 10px #0000001a;margin:0}.map[_ngcontent-%COMP%]{width:100%;height:100%;z-index:1}.map-message[_ngcontent-%COMP%]{max-width:100%!important;width:100%!important}.map-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{width:100%!important;padding:0!important;background:transparent!important;box-shadow:none!important}[_nghost-%COMP%]{display:block;align-items:center;justify-content:center;width:100%;height:100%}[_nghost-%COMP%]     .leaflet-popup-content{margin:8px 12px;min-width:200px}[_nghost-%COMP%]     .leaflet-popup-content-wrapper{border-radius:8px;box-shadow:0 4px 15px #0003}[_nghost-%COMP%]     .popup-header h4{margin:0 0 8px;color:#333;font-size:16px}[_nghost-%COMP%]     .popup-body{font-size:14px}[_nghost-%COMP%]     .properties-section{margin-top:8px}[_nghost-%COMP%]     .properties-section h5{margin:8px 0 4px;color:#555}[_nghost-%COMP%]     .property-item{padding:2px 0;border-bottom:1px solid #f0f0f0;font-size:13px}[_nghost-%COMP%]     .property-item:last-child{border-bottom:none}[_nghost-%COMP%]     .property-item strong{color:#666}.feature-panel[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:#fff;border-radius:8px;box-shadow:0 4px 15px #0003;max-width:800px;z-index:1000;max-height:80vh;overflow-y:auto}.panel-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px;border-bottom:1px solid #eee;background:#f8f9fa;border-radius:8px 8px 0 0}.panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#333}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;cursor:pointer;color:#666;padding:0;width:24px;height:24px;display:flex;align-items:center;justify-content:center;line-height:1}.close-btn[_ngcontent-%COMP%]:hover{color:#000}.panel-content[_ngcontent-%COMP%]{padding:15px}.properties[_ngcontent-%COMP%]{margin-top:10px}.property-item[_ngcontent-%COMP%]{padding:4px 0;border-bottom:1px solid #f0f0f0;font-size:14px}.property-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.property-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#555}.map-controls[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;z-index:1000;display:flex;flex-direction:column;gap:5px}.control-btn[_ngcontent-%COMP%]{background:#fff;border:none;border-radius:4px;width:35px;height:35px;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 2px 5px #0003;font-size:16px;transition:background-color .3s}.control-btn[_ngcontent-%COMP%]:hover{background:#f8f9fa}"]})};var Kx=class n{transform(e){return console.log("FilterTablesPipe called",e),e?e.filter(t=>t.type==="table"):[]}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=qn({name:"filterTables",type:n,pure:!0})},Yx=class n{transform(e){return console.log("FilterButtonsPipe called"),e?e.filter(t=>t.type==="button"):[]}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=qn({name:"filterButtons",type:n,pure:!0})},Qx=class n{transform(e){return console.log("HasValidTableStructurePipe called"),e?.data&&Array.isArray(e.data.column_names)&&e.data.column_names.length>0&&Array.isArray(e.data.data)&&e.data.data.every(t=>Array.isArray(t))}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=qn({name:"hasValidTableStructure",type:n,pure:!0})},Xx=class n{transform(e){return!!e?.data?.link&&!!e.data.title&&this.isValidUrl(e.data.link)}isValidUrl(e){try{return new URL(e),!0}catch{return e.startsWith("/")||e.startsWith("#")||e.startsWith("?")}}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=qn({name:"hasValidButtonStructure",type:n,pure:!0})},Jx=class n{transform(e){return e.data.link||"#"}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=qn({name:"getButtonLink",type:n,pure:!0})},eC=class n{transform(e){return e.data.title||"Click Here"}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=qn({name:"getButtonTitle",type:n,pure:!0})},tC=class n{transform(e){let t=e.data.link||"#";return t.startsWith("http://")||t.startsWith("https://")}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=qn({name:"isExternalLink",type:n,pure:!0})},nC=class n{transform(e){return e?.filter(t=>t.type==="map")||[]}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=qn({name:"filterMaps",type:n,pure:!0})},iC=class n{transform(e){return e?.data?.features||[]}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=qn({name:"getMapFeatures",type:n,pure:!0})},rC=class n{transform(e){return e?.data?.wmsLayers||[]}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=qn({name:"getMapWmsLayers",type:n,pure:!0})},oC=class n{transform(e){return e?.data?.center||[0,0]}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=qn({name:"getMapCenter",type:n,pure:!0})},sC=class n{transform(e){return e?.data?.zoom||10}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=qn({name:"getMapZoom",type:n,pure:!0})},aC=class n{transform(e){return e?.data?.height||"400px"}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=qn({name:"getMapHeight",type:n,pure:!0})},lC=class n{transform(e){return e?.data?.title||null}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=qn({name:"getMapTitle",type:n,pure:!0})},cC=class n{transform(e){return!!e?.data?.title}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=qn({name:"hasMapTitle",type:n,pure:!0})},uC=class n{transform(e){return!!e&&e.type==="map"&&!!e.data}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=qn({name:"isValidMapLayout",type:n,pure:!0})};var use=["chatMessages"],dse=(n,e,t,i)=>({"user-message":n,"bot-message":e,"layout-message":t,"map-layout-active":i});function hse(n,e){if(n&1&&qt(0,"markdown",10),n&2){let t=Q().$implicit;de("data",t.content)}}function fse(n,e){if(n&1&&(z(0,"div",12),ae(1),U()),n&2){let t=Q().$implicit;B(),Wt("Table: ",t.data.table_name)}}function pse(n,e){if(n&1&&(z(0,"th",15),ae(1),U()),n&2){let t=e.$implicit;de("title",t),B(),Nt(t)}}function mse(n,e){if(n&1&&(z(0,"td",15),ae(1),U()),n&2){let t=e.$implicit;de("title",t),B(),Nt(t)}}function gse(n,e){if(n&1&&(z(0,"tr"),cr(1,mse,2,2,"td",15,v0),U()),n&2){let t=e.$implicit;B(),ur(t)}}function _se(n,e){if(n&1&&(z(0,"table",13)(1,"thead")(2,"tr"),cr(3,pse,2,2,"th",15,oa),U()(),z(5,"tbody"),cr(6,gse,3,0,"tr",null,v0),U()()),n&2){let t=Q().$implicit;B(3),ur(t.data.column_names),B(3),ur(t.data.data)}}function vse(n,e){n&1&&(z(0,"div",14),ae(1,"Invalid table structure"),U())}function bse(n,e){if(n&1&&(z(0,"div",11),_t(1,fse,2,1,"div",12),_t(2,_se,8,0,"table",13),kn(3,"hasValidTableStructure"),Ru(4,vse,2,0,"div",14),U()),n&2){let t=e.$implicit;B(),vt(t.data.table_name?1:-1),B(),vt(Yn(3,2,t)?2:4)}}function yse(n,e){n&1&&(z(0,"div",6),cr(1,bse,5,4,"div",11,oa),U()),n&2&&(B(),ur(e))}function wse(n,e){if(n&1&&(z(0,"span")(1,"a",18),kn(2,"getButtonLink"),kn(3,"isExternalLink"),kn(4,"isExternalLink"),ae(5),kn(6,"getButtonTitle"),U()()),n&2){let t=Q().$implicit;B(),de("href",Yn(2,4,t),UT)("target",Yn(3,6,t)?"_blank":"_self"),Ut("rel",Yn(4,8,t)?"noopener noreferrer":null),B(4),Wt(" ",Yn(6,10,t)," ")}}function xse(n,e){n&1&&(z(0,"div",17),ae(1,"Invalid button structure"),U())}function Cse(n,e){if(n&1&&(z(0,"div",16),_t(1,wse,7,12,"span"),kn(2,"hasValidButtonStructure"),Ru(3,xse,2,0,"div",17),U()),n&2){let t=e.$implicit;B(),vt(Yn(2,1,t)?1:3)}}function Ese(n,e){n&1&&(z(0,"div",7),cr(1,Cse,4,3,"div",16,oa),U()),n&2&&(B(),ur(e))}function Ise(n,e){if(n&1&&(z(0,"div",21),ae(1),kn(2,"getMapTitle"),U()),n&2){let t=Q(2).$implicit;B(),Nt(Yn(2,1,t))}}function Sse(n,e){if(n&1){let t=Bt();z(0,"div",19),_t(1,Ise,3,3,"div",21),kn(2,"hasMapTitle"),z(3,"app-map",22),kn(4,"getMapFeatures"),kn(5,"getMapWmsLayers"),kn(6,"getMapCenter"),kn(7,"getMapZoom"),kn(8,"getMapHeight"),Me("featureClick",function(r){Ge(t);let o=Q(4);return Ze(o.onFeatureClick(r))}),U()()}if(n&2){let t=Q().$implicit;B(),vt(Yn(2,7,t)?1:-1),B(2),de("featureDetails",Yn(4,9,t))("wmsLayers",Yn(5,11,t))("center",Yn(6,13,t))("zoom",Yn(7,15,t))("showPopup",!0)("height",Yn(8,17,t))}}function Dse(n,e){n&1&&(z(0,"div",20),ae(1,"Invalid map layout"),U())}function Tse(n,e){if(n&1&&(_t(0,Sse,9,19,"div",19),kn(1,"isValidMapLayout"),Ru(2,Dse,2,0,"div",20)),n&2){let t=e.$implicit;vt(Yn(1,1,t)?0:2)}}function kse(n,e){n&1&&(z(0,"div",8),cr(1,Tse,3,3,null,null,oa),U()),n&2&&(B(),ur(e))}function Ase(n,e){if(n&1&&(z(0,"div",2)(1,"div",3)(2,"div",4),Xe(3,hse,1,1,"markdown",5),U(),_t(4,yse,3,0,"div",6),kn(5,"filterTables"),_t(6,Ese,3,0,"div",7),kn(7,"filterButtons"),_t(8,kse,3,0,"div",8),kn(9,"filterMaps"),z(10,"div",9),ae(11),kn(12,"date"),U()()()),n&2){let t,i,r,o=e.$implicit,s=Q();de("ngClass",Ek(15,dse,o.role==="user",o.role==="bot",s.hasMapLayout(o),s.hasMapLayout(o))),B(3),de("ngIf",o.content&&typeof o.content=="string"),B(),vt((t=Yn(5,6,o.layouts))?4:-1,t),B(2),vt((i=Yn(7,8,o.layouts))?6:-1,i),B(2),vt((r=Yn(9,10,o.layouts))?8:-1,r),B(3),Nt(Uh(12,12,o.timestamp,"shortTime"))}}var dC=class n{chatMessagesContainer;messages=[];Math=Math;activeLayoutMessageId=null;activeLayoutType=null;featureDetails=[];wmsLayers=[];mapCenter=[0,0];mapZoom=2;shouldScrollToBottom=!0;hasActiveLayout(){return this.activeLayoutMessageId!==null&&this.activeLayoutType!==null}getActiveLayoutType(){return this.activeLayoutType}getActiveMessage(){return this.messages.find(e=>e.id===this.activeLayoutMessageId)||null}getActiveTables(){let e=this.getActiveMessage();return e?.layouts?this.getTables(e.layouts):[]}getActiveButtons(){let e=this.getActiveMessage();return e?.layouts?this.getButtons(e.layouts):[]}getActiveMaps(){let e=this.getActiveMessage();return e?.layouts?e.layouts.filter(t=>t.type==="map"):[]}setActiveLayout(e,t){this.activeLayoutMessageId=e,this.activeLayoutType=t}clearActiveLayout(){this.activeLayoutMessageId=null,this.activeLayoutType=null}messageHasLayout(e){return!!(e.layouts&&e.layouts.length>0)}getMessageLayoutType(e){return!e.layouts||e.layouts.length===0?null:e.layouts[0].type}onMessageClick(e){if(this.messageHasLayout(e)){let t=this.getMessageLayoutType(e);t&&(this.activeLayoutMessageId===e.id&&this.activeLayoutType===t?this.clearActiveLayout():this.setActiveLayout(e.id,t))}}isTableLayout(e){return e.some(t=>t.type==="table")}isButtonLayout(e){return e.some(t=>t.type==="button")}isMapLayout(e){return e.some(t=>t.type==="map")}getMapData(e){return e.find(i=>i.type==="map")||null}onFeatureClick(e){console.log("Feature clicked:",e)}loadSampleMapData(){let e=[{id:"1",name:"Central Park",type:"Park",coordinates:[-73.9688,40.7851],properties:{area:"843 acres",established:"1857",visitors:"42 million annually"},style:{color:"#28a745",fillColor:"#28a745",radius:10,fillOpacity:.6}},{id:"2",name:"Times Square",type:"Entertainment",coordinates:[-73.9855,40.758],properties:{famousFor:"Broadway theaters, electronic billboards",annualVisitors:"50 million"},style:{color:"#dc3545",fillColor:"#dc3545",radius:8,fillOpacity:.6}}],t=[{url:"https://ows.terrestris.de/osm/service",layers:"OSM-WMS",transparent:!0}];this.featureDetails=e,this.wmsLayers=t,this.mapCenter=[-73.935242,40.73061],this.mapZoom=11}sendMapMessage(){let e={id:Date.now().toString(),role:"bot",content:"Here is the location data you requested:",timestamp:new Date,layouts:[{type:"map",data:{features:this.featureDetails,wmsLayers:this.wmsLayers,center:this.mapCenter,zoom:this.mapZoom,title:"Location Overview",height:"300px"}}]};this.messages.push(e),this.scrollToBottom()}receiveMapDataFromAPI(){let e={content:"I found these locations for you:",layouts:[{type:"map",data:{features:[{id:"api-1",name:"Eiffel Tower",type:"Landmark",coordinates:[2.2945,48.8584],properties:{height:"324 meters",built:"1889"},style:{color:"#ff6b00",fillColor:"#ff6b00",radius:12,fillOpacity:.6}}],center:[2.3522,48.8566],zoom:13,title:"Paris Locations",height:"350px"}}]},t={id:Date.now().toString(),role:"bot",content:e.content,timestamp:new Date,layouts:e.layouts};this.messages.push(t),this.scrollToBottom()}scrollToBottom(){setTimeout(()=>{this.chatMessagesContainer&&(this.chatMessagesContainer.nativeElement.scrollTop=this.chatMessagesContainer.nativeElement.scrollHeight)},100)}onChatScroll(){let e=this.chatMessagesContainer?.nativeElement;if(!e)return;let i=Math.abs(e.scrollHeight-e.scrollTop-e.clientHeight)<=20;this.shouldScrollToBottom=i}getTables(e){return e.filter(t=>t.type==="table")}getTableHeaders(e){return console.log(e),e.data.column_names||[]}getTableData(e){return console.log(e),e.data.data||[]}getButtons(e){return e.filter(t=>t.type==="button")}isSingleButton(e){return console.log(e),e&&e.type==="button"&&e.data.link&&e.data.title}hasValidButtonStructure(e){return console.log(e),!!e&&!!e.data&&!!e.data.link&&typeof e.data.link=="string"&&!!e.data.title&&typeof e.data.title=="string"&&this.isValidUrl(e.data.link)}hasValidTableStructure(e){return console.log(e),e?.data&&Array.isArray(e.data.column_names)&&e.data.column_names.length>0&&Array.isArray(e.data.data)&&e.data.data.every(t=>Array.isArray(t))}hasValidTableName(e){return console.log(e),e?.data?.table_name&&typeof e.data.table_name=="string"&&e.data.table_name.trim().length>0}getButtonTitle(e){return console.log(e),e.data.title||"Click Here"}getButtonLink(e){return console.log(e),e.data.link||"#"}isExternalLink(e){console.log(e);let t=this.getButtonLink(e);return t.startsWith("http://")||t.startsWith("https://")}isValidUrl(e){try{return new URL(e),!0}catch{return e.startsWith("/")||e.startsWith("#")||e.startsWith("?")}}hasMapLayout(e){return e.layouts&&this.isMapLayout(e.layouts)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["app-chatbot"]],viewQuery:function(t,i){if(t&1&&on(use,5),t&2){let r;st(r=at())&&(i.chatMessagesContainer=r.first)}},inputs:{messages:"messages"},decls:4,vars:0,consts:[["chatMessages",""],[1,"chat-messages",3,"scroll"],[1,"message-container",3,"ngClass"],[1,"message-content"],[1,"message-text","markdown-body"],[3,"data",4,"ngIf"],[1,"table-container"],[1,"button-container"],[1,"map-container"],[1,"message-time"],[3,"data"],[1,"table-wrapper"],[1,"table-header"],[1,"dynamic-table"],[1,"table-error"],[3,"title"],[1,"button-wrapper"],[1,"button-error"],[1,"dynamic-button",3,"href","target"],[1,"map-wrapper"],[1,"map-error"],[1,"map-header"],[3,"featureClick","featureDetails","wmsLayers","center","zoom","showPopup","height"]],template:function(t,i){if(t&1){let r=Bt();z(0,"div",1,0),Me("scroll",function(){return Ge(r),Ze(i.onChatScroll())}),cr(2,Ase,13,20,"div",2,oa),U()}t&2&&(B(2),ur(i.messages))},dependencies:[da,hr,mg,ds,f$,h$,Zx,tA,Kx,Yx,nC,Qx,Xx,Jx,eC,tC,iC,rC,oC,sC,aC,lC,cC,uC],styles:[".chat-messages[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:10px 20px 20px 12px;display:flex;flex-direction:column;gap:12px}.message-container[_ngcontent-%COMP%]{display:flex;max-width:85%}.message-container.layout-message[_ngcontent-%COMP%]{max-width:100%!important;width:100%!important;align-self:stretch!important}.message-container.map-layout-active.bot-message[_ngcontent-%COMP%]{min-width:580px}.user-message[_ngcontent-%COMP%]{align-self:flex-end;justify-content:flex-end}.bot-message[_ngcontent-%COMP%]{align-self:flex-start;justify-content:flex-start}.message-content[_ngcontent-%COMP%]{padding:10px 14px;border-radius:16px;position:relative;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;font-size:.95rem;line-height:1.4;max-width:100%}.layout-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{width:100%!important;margin-left:0;max-width:100%!important;padding:0!important;background:transparent!important;box-shadow:none!important;border-radius:0!important}.map-layout-active.bot-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{min-width:480px}.user-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#f0f0f0;border-bottom-right-radius:4px;color:#333}.bot-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#fff;border-bottom-left-radius:4px;box-shadow:0 1px 2px #00000014;color:#333}.message-time[_ngcontent-%COMP%]{font-size:.65rem;color:#999;text-align:right;margin-top:4px}.table-container[_ngcontent-%COMP%], .button-container[_ngcontent-%COMP%], .map-container[_ngcontent-%COMP%]{width:100%!important;max-width:100%!important;margin:10px 0}.table-wrapper[_ngcontent-%COMP%]{margin-bottom:15px;border:1px solid #e0e0e0;border-radius:6px;overflow:hidden;background-color:#fff;width:100%}.table-header[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:10px 12px;font-weight:600;font-size:13px;color:#333;border-bottom:1px solid #e0e0e0}.dynamic-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:13px}.dynamic-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:10px 6px;text-align:left;font-weight:600;border-bottom:1px solid #dee2e6;color:#495057;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:150px}.dynamic-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 6px;border-bottom:1px solid #dee2e6;color:#212529;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:150px}.dynamic-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.dynamic-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.table-error[_ngcontent-%COMP%]{padding:15px;text-align:center;color:#dc3545;background-color:#f8d7da;border:1px solid #f5c6cb;border-radius:4px;margin:8px;font-size:13px}.button-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;width:100%}.button-wrapper[_ngcontent-%COMP%]{flex-shrink:0}.dynamic-button[_ngcontent-%COMP%]{display:inline-block;padding:8px 16px;background-color:#007bff;color:#fff;text-decoration:none;border-radius:4px;transition:background-color .3s;font-size:13px}.dynamic-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.button-error[_ngcontent-%COMP%]{padding:8px;text-align:center;color:#dc3545;background-color:#f8d7da;border:1px solid #f5c6cb;border-radius:4px;font-size:13px}.map-wrapper[_ngcontent-%COMP%]{width:100%!important;max-width:100%!important;margin:0;padding:0}.map-container[_ngcontent-%COMP%]{width:100%!important}.message-text[_ngcontent-%COMP%]{max-width:100%}.message-text[_ngcontent-%COMP%]     *{max-width:100%;margin:0}.message-text[_ngcontent-%COMP%]     p{margin-bottom:8px;line-height:1.4}.message-text[_ngcontent-%COMP%]     p:last-child{margin-bottom:0}@media (max-width: 768px){.chat-messages[_ngcontent-%COMP%]{padding:8px 0;gap:10px}.message-container[_ngcontent-%COMP%]{max-width:90%}.message-container.layout-message[_ngcontent-%COMP%]{max-width:100%!important}.message-container.map-layout-active.bot-message[_ngcontent-%COMP%]{min-width:100%!important;max-width:100%!important}.map-layout-active.bot-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{min-width:100%!important}.message-content[_ngcontent-%COMP%]{padding:8px 12px;font-size:.9rem;line-height:1.35;border-radius:14px}.message-time[_ngcontent-%COMP%]{font-size:.6rem;margin-top:3px}.table-container[_ngcontent-%COMP%], .button-container[_ngcontent-%COMP%], .map-container[_ngcontent-%COMP%]{margin:8px 0}.table-wrapper[_ngcontent-%COMP%]{margin-bottom:12px;border-radius:5px}.table-header[_ngcontent-%COMP%]{padding:8px 10px;font-size:12px}.dynamic-table[_ngcontent-%COMP%]{font-size:12px}.dynamic-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .dynamic-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 4px;max-width:120px}.dynamic-button[_ngcontent-%COMP%]{padding:7px 12px;font-size:12px}.table-error[_ngcontent-%COMP%], .button-error[_ngcontent-%COMP%]{padding:10px;font-size:12px}}@media (max-width: 480px){.chat-messages[_ngcontent-%COMP%]{padding:6px 0;gap:8px}.message-container[_ngcontent-%COMP%]{max-width:92%}.message-container.map-layout-active.bot-message[_ngcontent-%COMP%]{min-width:100%!important;margin-left:0;margin-right:0;padding-left:0;padding-right:0}.message-content[_ngcontent-%COMP%]{padding:6px 10px;font-size:.85rem;line-height:1.3;border-radius:12px}.message-time[_ngcontent-%COMP%]{font-size:.55rem;margin-top:2px}.table-container[_ngcontent-%COMP%], .button-container[_ngcontent-%COMP%], .map-container[_ngcontent-%COMP%]{margin:6px 0}.table-wrapper[_ngcontent-%COMP%]{margin-bottom:10px;border-radius:4px}.table-header[_ngcontent-%COMP%]{padding:6px 8px;font-size:11px}.dynamic-table[_ngcontent-%COMP%]{font-size:11px}.dynamic-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .dynamic-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 3px;max-width:100px}.button-container[_ngcontent-%COMP%]{gap:6px}.dynamic-button[_ngcontent-%COMP%]{padding:6px 10px;font-size:11px;border-radius:3px}.table-error[_ngcontent-%COMP%], .button-error[_ngcontent-%COMP%]{padding:8px;font-size:11px;margin:6px}.message-text[_ngcontent-%COMP%]     p{margin-bottom:6px;line-height:1.3}.message-text[_ngcontent-%COMP%]     h1, .message-text[_ngcontent-%COMP%]     h2, .message-text[_ngcontent-%COMP%]     h3{margin-top:8px;margin-bottom:6px;font-size:.9em}.message-text[_ngcontent-%COMP%]     ul, .message-text[_ngcontent-%COMP%]     ol{padding-left:16px;margin:4px 0}.message-text[_ngcontent-%COMP%]     li{margin:2px 0}}@media (max-width: 360px){.chat-messages[_ngcontent-%COMP%]{padding:4px 0;gap:6px}.message-container[_ngcontent-%COMP%]{max-width:94%}.message-content[_ngcontent-%COMP%]{padding:5px 8px;font-size:.8rem;line-height:1.25}.dynamic-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .dynamic-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:4px 2px;max-width:80px;font-size:10px}.dynamic-button[_ngcontent-%COMP%]{padding:5px 8px;font-size:10px}}@media (max-width: 768px){.table-container[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch}.table-wrapper[_ngcontent-%COMP%]{min-width:fit-content}}.message-text[_ngcontent-%COMP%]{word-wrap:break-word;overflow-wrap:break-word;-webkit-hyphens:auto;hyphens:auto}.message-text[_ngcontent-%COMP%]     img{max-width:100%;height:auto}"]})};var e8=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=$e({type:n});static \u0275inj=Ve({imports:[Ft,Ft]})}return n})();var t8=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=$e({type:n});static \u0275inj=Ve({imports:[Ft,Ft]})}return n})();var n8=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=$e({type:n});static \u0275inj=Ve({imports:[Ft]})}return n})();var Mse=["*"],Pse=`.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mat-list-list-item-container-color, transparent);border-radius:var(--mat-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mat-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mat-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mat-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mat-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:"";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-leading-icon-size, 24px);height:var(--mat-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mat-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mat-list-list-item-leading-avatar-size, 40px);height:var(--mat-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mat-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mat-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mat-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mat-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mat-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-trailing-icon-size, 24px);height:var(--mat-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mat-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mat-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mat-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mat-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mat-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mat-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mat-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mat-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mat-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mat-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mat-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mat-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mat-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mat-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius: var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}
`,Ose=["unscopedContent"],Rse=["text"],Nse=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],Fse=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"];var Lse=new oe("ListOption"),KP=(()=>{class n{_elementRef=D(Ue);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Te({type:n,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"]})}return n})(),jse=(()=>{class n{_elementRef=D(Ue);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Te({type:n,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"]})}return n})(),Bse=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Te({type:n,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"]})}return n})(),i8=(()=>{class n{_listOption=D(Lse,{optional:!0});constructor(){}_isAlignedAtStart(){return!this._listOption||this._listOption?._getTogglePosition()==="after"}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Te({type:n,hostVars:4,hostBindings:function(i,r){i&2&&lt("mdc-list-item__start",r._isAlignedAtStart())("mdc-list-item__end",!r._isAlignedAtStart())}})}return n})(),Vse=(()=>{class n extends i8{static \u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})();static \u0275dir=Te({type:n,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],features:[St]})}return n})(),YP=(()=>{class n extends i8{static \u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})();static \u0275dir=Te({type:n,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],features:[St]})}return n})(),zse=new oe("MAT_LIST_CONFIG"),ZP=(()=>{class n{_isNonInteractive=!0;get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Pi(t)}_disableRipple=!1;get disabled(){return this._disabled()}set disabled(t){this._disabled.set(Pi(t))}_disabled=rn(!1);_defaultOptions=D(zse,{optional:!0});static \u0275fac=function(i){return new(i||n)};static \u0275dir=Te({type:n,hostVars:1,hostBindings:function(i,r){i&2&&Ut("aria-disabled",r.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"}})}return n})(),$se=(()=>{class n{_elementRef=D(Ue);_ngZone=D(De);_listBase=D(ZP,{optional:!0});_platform=D(Gt);_hostElement;_isButtonElement;_noopAnimations=Wi();_avatars;_icons;set lines(t){this._explicitLines=Lr(t,null),this._updateItemLines(!1)}_explicitLines=null;get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(t){this._disableRipple=Pi(t)}_disableRipple=!1;get disabled(){return this._disabled()||!!this._listBase?.disabled}set disabled(t){this._disabled.set(Pi(t))}_disabled=rn(!1);_subscriptions=new Pt;_rippleRenderer=null;_hasUnscopedTextContent=!1;rippleConfig;get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(){D(ir).load(If);let t=D(p_,{optional:!0});this.rippleConfig=t||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement=this._hostElement.nodeName.toLowerCase()==="button",this._listBase&&!this._listBase._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),this._rippleRenderer!==null&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!!(this._avatars.length||this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new Qu(this,this._ngZone,this._hostElement,this._platform,D(We)),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(Sr(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(t){if(!this._lines||!this._titles||!this._unscopedContent)return;t&&this._checkDomForUnscopedTextContent();let i=this._explicitLines??this._inferLinesFromContent(),r=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",i===2),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",i===3),this._hasUnscopedTextContent){let o=this._titles.length===0&&i===1;r.classList.toggle("mdc-list-item__primary-text",o),r.classList.toggle("mdc-list-item__secondary-text",!o)}else r.classList.remove("mdc-list-item__primary-text"),r.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let t=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(t+=1),t}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(t=>t.nodeType!==t.COMMENT_NODE).some(t=>!!(t.textContent&&t.textContent.trim()))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Te({type:n,contentQueries:function(i,r,o){if(i&1&&(Bn(o,Vse,4),Bn(o,YP,4)),i&2){let s;st(s=at())&&(r._avatars=s),st(s=at())&&(r._icons=s)}},hostVars:4,hostBindings:function(i,r){i&2&&(Ut("aria-disabled",r.disabled)("disabled",r._isButtonElement&&r.disabled||null),lt("mdc-list-item--disabled",r.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"}})}return n})();var r8=(()=>{class n extends $se{_lines;_titles;_meta;_unscopedContent;_itemText;get activated(){return this._activated}set activated(t){this._activated=Pi(t)}_activated=!1;_getAriaCurrent(){return this._hostElement.nodeName==="A"&&this._activated?"page":null}_hasBothLeadingAndTrailing(){return this._meta.length!==0&&(this._avatars.length!==0||this._icons.length!==0)}static \u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})();static \u0275cmp=Fe({type:n,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(i,r,o){if(i&1&&(Bn(o,jse,5),Bn(o,KP,5),Bn(o,Bse,5)),i&2){let s;st(s=at())&&(r._lines=s),st(s=at())&&(r._titles=s),st(s=at())&&(r._meta=s)}},viewQuery:function(i,r){if(i&1&&(on(Ose,5),on(Rse,5)),i&2){let o;st(o=at())&&(r._unscopedContent=o.first),st(o=at())&&(r._itemText=o.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:13,hostBindings:function(i,r){i&2&&(Ut("aria-current",r._getAriaCurrent()),lt("mdc-list-item--activated",r.activated)("mdc-list-item--with-leading-avatar",r._avatars.length!==0)("mdc-list-item--with-leading-icon",r._icons.length!==0)("mdc-list-item--with-trailing-meta",r._meta.length!==0)("mat-mdc-list-item-both-leading-and-trailing",r._hasBothLeadingAndTrailing())("_mat-animation-noopable",r._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],features:[St],ngContentSelectors:Fse,decls:10,vars:0,consts:[["unscopedContent",""],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],[1,"mat-focus-indicator"]],template:function(i,r){if(i&1){let o=Bt();Cn(Nse),bt(0),z(1,"span",1),bt(2,1),bt(3,2),z(4,"span",2,0),Me("cdkObserveContent",function(){return Ge(o),Ze(r._updateItemLines(!0))}),bt(6,3),U()(),bt(7,4),bt(8,5),qt(9,"div",3)}},dependencies:[GH],encapsulation:2,changeDetection:0})}return n})();var o8=(()=>{class n extends ZP{_isNonInteractive=!1;static \u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})();static \u0275cmp=Fe({type:n,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-mdc-nav-list","mat-mdc-list-base","mdc-list"],exportAs:["matNavList"],features:[Vt([{provide:ZP,useExisting:n}]),St],ngContentSelectors:Mse,decls:1,vars:0,template:function(i,r){i&1&&(Cn(),bt(0))},styles:[Pse],encapsulation:2,changeDetection:0})}return n})();var hC=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=$e({type:n});static \u0275inj=Ve({imports:[wx,Ft,Mc,n8,t8]})}return n})();function Hse(n,e){if(n&1&&(z(0,"mat-list-item")(1,"mat-icon",8),ae(2),U(),z(3,"div",9),ae(4),U()()),n&2){let t=e.$implicit;B(2),Nt(t.icon),B(2),Nt(t.title)}}function qse(n,e){if(n&1&&(z(0,"mat-nav-list"),cr(1,Hse,5,2,"mat-list-item",null,oa),U()),n&2){let t=Q();B(),ur(t.chats)}}var fC=class n{constructor(e){this.mcpService=e}chats=[];ngOnInit(){}static \u0275fac=function(t){return new(t||n)(Ce(qi))};static \u0275cmp=Fe({type:n,selectors:[["app-sidebar"]],features:[Vt([qi])],decls:15,vars:1,consts:[[1,"sidebar-container"],[1,"sidebar-header"],["mat-button","",1,"new-chat-button"],[1,"sidebar-scrollable"],[1,"sidebar-footer"],["mat-button","",1,"user-button"],[1,"user-icon"],[1,"username"],["matListItemIcon",""],["matListItemTitle",""]],template:function(t,i){t&1&&(z(0,"div",0)(1,"div",1)(2,"button",2)(3,"mat-icon"),ae(4,"add"),U(),z(5,"span"),ae(6,"New chat"),U()()(),z(7,"div",3),_t(8,qse,3,0,"mat-nav-list"),U(),z(9,"div",4)(10,"button",5)(11,"mat-icon",6),ae(12,"account_circle"),U(),z(13,"span",7),ae(14,"Abhilash Poshanagari"),U()()()()),t&2&&(B(8),vt(i.chats.length>0?8:-1))},dependencies:[e8,jf,Lf,o8,hC,r8,YP,KP,hr],styles:[".sidebar-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.sidebar-header[_ngcontent-%COMP%]{padding:16px 20px;flex-shrink:0;border-bottom:1px solid #f0f0f0}.new-chat-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;width:100%;text-align:left;background-color:#f0f0f0;border-radius:8px;padding:8px 12px;color:#333;font-size:.9rem;transition:all .2s}.new-chat-button[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.sidebar-scrollable[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding-bottom:80px}mat-nav-list[_ngcontent-%COMP%]{padding-top:0}mat-list-item[_ngcontent-%COMP%]{border-radius:6px;margin:2px 12px;color:#555}mat-list-item[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.sidebar-footer[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;padding:12px 16px;background:#fff;border-top:1px solid #eee}.user-button[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;padding:8px;border-radius:6px;color:#333}.user-button[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.user-icon[_ngcontent-%COMP%]{color:#666;font-size:24px;width:24px;height:24px;margin-right:12px}.username[_ngcontent-%COMP%]{font-size:.9rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})};var gC=["*"],Wse=["content"],Gse=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Zse=["mat-drawer","mat-drawer-content","*"];function Kse(n,e){if(n&1){let t=Bt();z(0,"div",1),Me("click",function(){Ge(t);let r=Q();return Ze(r._onBackdropClicked())}),U()}if(n&2){let t=Q();lt("mat-drawer-shown",t._isShowingBackdrop())}}function Yse(n,e){n&1&&(z(0,"mat-drawer-content"),bt(1,2),U())}var Qse=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],Xse=["mat-sidenav","mat-sidenav-content","*"];function Jse(n,e){if(n&1){let t=Bt();z(0,"div",1),Me("click",function(){Ge(t);let r=Q();return Ze(r._onBackdropClicked())}),U()}if(n&2){let t=Q();lt("mat-drawer-shown",t._isShowingBackdrop())}}function eae(n,e){n&1&&(z(0,"mat-sidenav-content"),bt(1,2),U())}var tae=`.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color, var(--mat-sys-on-background));background-color:var(--mat-sidenav-content-background-color, var(--mat-sys-background));box-sizing:border-box;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color, color-mix(in srgb, var(--mat-sys-neutral-variant20) 40%, transparent))}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}@media(forced-colors: active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-content.mat-drawer-content-hidden{opacity:0}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color, var(--mat-sys-on-surface-variant));box-shadow:var(--mat-sidenav-container-elevation-shadow, none);background-color:var(--mat-sidenav-container-background-color, var(--mat-sys-surface));border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));width:var(--mat-sidenav-container-width, 360px);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}@media(forced-colors: active){.mat-drawer,[dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}}@media(forced-colors: active){[dir=rtl] .mat-drawer,.mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-transition .mat-drawer{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating){visibility:hidden;box-shadow:none}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating) .mat-drawer-inner-container{display:none}.mat-drawer.mat-drawer-opened.mat-drawer-opened{transform:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto}.mat-sidenav-fixed{position:fixed}
`;var nae=new oe("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:iae}),JP=new oe("MAT_DRAWER_CONTAINER");function iae(){return!1}var pC=(()=>{class n extends Af{_platform=D(Gt);_changeDetectorRef=D(Wn);_container=D(XP);constructor(){let t=D(Ue),i=D(Ju),r=D(De);super(t,i,r)}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}_shouldBeHidden(){if(this._platform.isBrowser)return!1;let{start:t,end:i}=this._container;return t!=null&&t.mode!=="over"&&t.opened||i!=null&&i.mode!=="over"&&i.opened}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Fe({type:n,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:6,hostBindings:function(i,r){i&2&&(il("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px"),lt("mat-drawer-content-hidden",r._shouldBeHidden()))},features:[Vt([{provide:Af,useExisting:n}]),St],ngContentSelectors:gC,decls:1,vars:0,template:function(i,r){i&1&&(Cn(),bt(0))},encapsulation:2,changeDetection:0})}return n})(),QP=(()=>{class n{_elementRef=D(Ue);_focusTrapFactory=D(d_);_focusMonitor=D(ha);_platform=D(Gt);_ngZone=D(De);_renderer=D(Tn);_interactivityChecker=D(Ef);_doc=D(Qe);_container=D(JP,{optional:!0});_focusTrap=null;_elementFocusedBeforeDrawerWasOpened=null;_eventCleanups;_isAttached;_anchor;get position(){return this._position}set position(t){t=t==="end"?"end":"start",t!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}_position="start";get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}_mode="over";get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=Pi(t)}_disableClose=!1;get autoFocus(){let t=this._autoFocus;return t??(this.mode==="side"?"dialog":"first-tabbable")}set autoFocus(t){(t==="true"||t==="false"||t==null)&&(t=Pi(t)),this._autoFocus=t}_autoFocus;get opened(){return this._opened()}set opened(t){this.toggle(Pi(t))}_opened=rn(!1);_openedVia;_animationStarted=new ve;_animationEnd=new ve;openedChange=new je(!0);_openedStream=this.openedChange.pipe(It(t=>t),Pe(()=>{}));openedStart=this._animationStarted.pipe(It(()=>this.opened),mh(void 0));_closedStream=this.openedChange.pipe(It(t=>!t),Pe(()=>{}));closedStart=this._animationStarted.pipe(It(()=>!this.opened),mh(void 0));_destroyed=new ve;onPositionChanged=new je;_content;_modeChanged=new ve;_injector=D(We);_changeDetectorRef=D(Wn);constructor(){this.openedChange.pipe(wn(this._destroyed)).subscribe(t=>{t?(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement,this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{let t=this._elementRef.nativeElement;bm(t,"keydown").pipe(It(i=>i.keyCode===27&&!this.disableClose&&!fa(i)),wn(this._destroyed)).subscribe(i=>this._ngZone.run(()=>{this.close(),i.stopPropagation(),i.preventDefault()})),this._eventCleanups=[this._renderer.listen(t,"transitionrun",this._handleTransitionEvent),this._renderer.listen(t,"transitionend",this._handleTransitionEvent),this._renderer.listen(t,"transitioncancel",this._handleTransitionEvent)]}),this._animationEnd.subscribe(()=>{this.openedChange.emit(this.opened)})}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let r=()=>{o(),s(),t.removeAttribute("tabindex")},o=this._renderer.listen(t,"blur",r),s=this._renderer.listen(t,"mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_takeFocus(){if(!this._focusTrap)return;let t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":vi(()=>{!this._focusTrap.focusInitialElement()&&typeof t.focus=="function"&&t.focus()},{injector:this._injector});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus);break}}_restoreFocus(t){this.autoFocus!=="dialog"&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){let t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._position==="end"&&this._updatePositionInParent("end"),this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState())}ngOnDestroy(){this._eventCleanups.forEach(t=>t()),this._focusTrap?.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,i){t&&i&&(this._openedVia=i);let r=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),r}_setOpen(t,i,r){return t===this.opened?Promise.resolve(t?"open":"close"):(this._opened.set(t),this._container?._transitionsEnabled?this._setIsAnimating(!0):setTimeout(()=>{this._animationStarted.next(),this._animationEnd.next()}),this._elementRef.nativeElement.classList.toggle("mat-drawer-opened",t),!t&&i&&this._restoreFocus(r),this._changeDetectorRef.markForCheck(),this._updateFocusTrapState(),new Promise(o=>{this.openedChange.pipe(Kn(1)).subscribe(s=>o(s?"open":"close"))}))}_setIsAnimating(t){this._elementRef.nativeElement.classList.toggle("mat-drawer-animating",t)}_getWidth(){return this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop&&this.opened)}_updatePositionInParent(t){if(!this._platform.isBrowser)return;let i=this._elementRef.nativeElement,r=i.parentNode;t==="end"?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),r.insertBefore(this._anchor,i)),r.appendChild(i)):this._anchor&&this._anchor.parentNode.insertBefore(i,this._anchor)}_handleTransitionEvent=t=>{let i=this._elementRef.nativeElement;t.target===i&&this._ngZone.run(()=>{t.type==="transitionrun"?this._animationStarted.next(t):(t.type==="transitionend"&&this._setIsAnimating(!1),this._animationEnd.next(t))})};static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Fe({type:n,selectors:[["mat-drawer"]],viewQuery:function(i,r){if(i&1&&on(Wse,5),i&2){let o;st(o=at())&&(r._content=o.first)}},hostAttrs:[1,"mat-drawer"],hostVars:12,hostBindings:function(i,r){i&2&&(Ut("align",null)("tabIndex",r.mode!=="side"?"-1":null),il("visibility",!r._container&&!r.opened?"hidden":null),lt("mat-drawer-end",r.position==="end")("mat-drawer-over",r.mode==="over")("mat-drawer-push",r.mode==="push")("mat-drawer-side",r.mode==="side"))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:gC,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(i,r){i&1&&(Cn(),z(0,"div",1,0),bt(2),U())},dependencies:[Af],encapsulation:2,changeDetection:0})}return n})(),XP=(()=>{class n{_dir=D(no,{optional:!0});_element=D(Ue);_ngZone=D(De);_changeDetectorRef=D(Wn);_animationDisabled=Wi();_transitionsEnabled=!1;_allDrawers;_drawers=new Vo;_content;_userContent;get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=Pi(t)}_autosize=D(nae);get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(t){this._backdropOverride=t==null?null:Pi(t)}_backdropOverride;backdropClick=new je;_start;_end;_left;_right;_destroyed=new ve;_doCheckSubject=new ve;_contentMargins={left:null,right:null};_contentMarginChanges=new ve;get scrollable(){return this._userContent||this._content}_injector=D(We);constructor(){let t=D(Gt),i=D(kc);this._dir?.change.pipe(wn(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),i.change().pipe(wn(this._destroyed)).subscribe(()=>this.updateContentMargins()),!this._animationDisabled&&t.isBrowser&&this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{this._element.nativeElement.classList.add("mat-drawer-transition"),this._transitionsEnabled=!0},200)})}ngAfterContentInit(){this._allDrawers.changes.pipe(ki(this._allDrawers),wn(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(i=>!i._container||i._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(ki(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(Ha(10),wn(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,i=0;if(this._left&&this._left.opened){if(this._left.mode=="side")t+=this._left._getWidth();else if(this._left.mode=="push"){let r=this._left._getWidth();t+=r,i-=r}}if(this._right&&this._right.opened){if(this._right.mode=="side")i+=this._right._getWidth();else if(this._right.mode=="push"){let r=this._right._getWidth();i+=r,t-=r}}t=t||null,i=i||null,(t!==this._contentMargins.left||i!==this._contentMargins.right)&&(this._contentMargins={left:t,right:i},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(wn(this._drawers.changes)).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),t.mode!=="side"&&t.openedChange.pipe(wn(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){t.onPositionChanged.pipe(wn(this._drawers.changes)).subscribe(()=>{vi({read:()=>this._validateDrawers()},{injector:this._injector})})}_watchDrawerMode(t){t._modeChanged.pipe(wn(Sr(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){let i=this._element.nativeElement.classList,r="mat-drawer-container-has-open";t?i.add(r):i.remove(r)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{t.position=="end"?(this._end!=null,this._end=t):(this._start!=null,this._start=t)}),this._right=this._left=null,this._dir&&this._dir.value==="rtl"?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&this._start.mode!="over"||this._isDrawerOpen(this._end)&&this._end.mode!="over"}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._drawerHasBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(t){return t!=null&&t.opened}_drawerHasBackdrop(t){return this._backdropOverride==null?!!t&&t.mode!=="side":this._backdropOverride}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Fe({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(i,r,o){if(i&1&&(Bn(o,pC,5),Bn(o,QP,5)),i&2){let s;st(s=at())&&(r._content=s.first),st(s=at())&&(r._allDrawers=s)}},viewQuery:function(i,r){if(i&1&&on(pC,5),i&2){let o;st(o=at())&&(r._userContent=o.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(i,r){i&2&&lt("mat-drawer-container-explicit-backdrop",r._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[Vt([{provide:JP,useExisting:n}])],ngContentSelectors:Zse,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(i,r){i&1&&(Cn(Gse),_t(0,Kse,1,2,"div",0),bt(1),bt(2,1),_t(3,Yse,2,0,"mat-drawer-content")),i&2&&(vt(r.hasBackdrop?0:-1),B(3),vt(r._content?-1:3))},dependencies:[pC],styles:[`.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color, var(--mat-sys-on-background));background-color:var(--mat-sidenav-content-background-color, var(--mat-sys-background));box-sizing:border-box;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color, color-mix(in srgb, var(--mat-sys-neutral-variant20) 40%, transparent))}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}@media(forced-colors: active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-content.mat-drawer-content-hidden{opacity:0}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color, var(--mat-sys-on-surface-variant));box-shadow:var(--mat-sidenav-container-elevation-shadow, none);background-color:var(--mat-sidenav-container-background-color, var(--mat-sys-surface));border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));width:var(--mat-sidenav-container-width, 360px);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}@media(forced-colors: active){.mat-drawer,[dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}}@media(forced-colors: active){[dir=rtl] .mat-drawer,.mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-transition .mat-drawer{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating){visibility:hidden;box-shadow:none}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating) .mat-drawer-inner-container{display:none}.mat-drawer.mat-drawer-opened.mat-drawer-opened{transform:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto}.mat-sidenav-fixed{position:fixed}
`],encapsulation:2,changeDetection:0})}return n})(),mC=(()=>{class n extends pC{static \u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})();static \u0275cmp=Fe({type:n,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],features:[Vt([{provide:Af,useExisting:n}]),St],ngContentSelectors:gC,decls:1,vars:0,template:function(i,r){i&1&&(Cn(),bt(0))},encapsulation:2,changeDetection:0})}return n})(),eO=(()=>{class n extends QP{get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(t){this._fixedInViewport=Pi(t)}_fixedInViewport=!1;get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(t){this._fixedTopGap=Lr(t)}_fixedTopGap=0;get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(t){this._fixedBottomGap=Lr(t)}_fixedBottomGap=0;static \u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})();static \u0275cmp=Fe({type:n,selectors:[["mat-sidenav"]],hostAttrs:[1,"mat-drawer","mat-sidenav"],hostVars:16,hostBindings:function(i,r){i&2&&(Ut("tabIndex",r.mode!=="side"?"-1":null)("align",null),il("top",r.fixedInViewport?r.fixedTopGap:null,"px")("bottom",r.fixedInViewport?r.fixedBottomGap:null,"px"),lt("mat-drawer-end",r.position==="end")("mat-drawer-over",r.mode==="over")("mat-drawer-push",r.mode==="push")("mat-drawer-side",r.mode==="side")("mat-sidenav-fixed",r.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[Vt([{provide:QP,useExisting:n}]),St],ngContentSelectors:gC,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(i,r){i&1&&(Cn(),z(0,"div",1,0),bt(2),U())},dependencies:[Af],encapsulation:2,changeDetection:0})}return n})(),s8=(()=>{class n extends XP{_allDrawers=void 0;_content=void 0;static \u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})();static \u0275cmp=Fe({type:n,selectors:[["mat-sidenav-container"]],contentQueries:function(i,r,o){if(i&1&&(Bn(o,mC,5),Bn(o,eO,5)),i&2){let s;st(s=at())&&(r._content=s.first),st(s=at())&&(r._allDrawers=s)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(i,r){i&2&&lt("mat-drawer-container-explicit-backdrop",r._backdropOverride)},exportAs:["matSidenavContainer"],features:[Vt([{provide:JP,useExisting:n},{provide:XP,useExisting:n}]),St],ngContentSelectors:Xse,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(i,r){i&1&&(Cn(Qse),_t(0,Jse,1,2,"div",0),bt(1),bt(2,1),_t(3,eae,2,0,"mat-sidenav-content")),i&2&&(vt(r.hasBackdrop?0:-1),B(3),vt(r._content?-1:3))},dependencies:[mC],styles:[tae],encapsulation:2,changeDetection:0})}return n})(),a8=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=$e({type:n});static \u0275inj=Ve({imports:[Ft,Xu,Xu,Ft]})}return n})();var oae=["mat-icon-button",""],sae=["*"],aae=new oe("MAT_BUTTON_CONFIG");function l8(n){return n==null?void 0:jk(n)}var c8=(()=>{class n{_elementRef=D(Ue);_ngZone=D(De);_animationsDisabled=Wi();_config=D(aae,{optional:!0});_focusMonitor=D(ha);_cleanupClick;_renderer=D(Tn);_rippleLoader=D(Y4);_isAnchor;_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;tabIndex;set _tabindex(t){this.tabIndex=t}constructor(){D(ir).load(If);let t=this._elementRef.nativeElement;this._isAnchor=t.tagName==="A",this.disabledInteractive=this._config?.disabledInteractive??!1,this.color=this._config?.color??null,this._rippleLoader?.configureRipple(t,{className:"mat-mdc-button-ripple"})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0),this._isAnchor&&this._setupAsAnchor()}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",i){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this._isAnchor?this.disabled||null:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}_getTabIndex(){return this._isAnchor?this.disabled&&!this.disabledInteractive?-1:this.tabIndex:this.tabIndex}_setupAsAnchor(){this._cleanupClick=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"click",t=>{this.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Te({type:n,hostAttrs:[1,"mat-mdc-button-base"],hostVars:13,hostBindings:function(i,r){i&2&&(Ut("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled())("tabindex",r._getTabIndex()),cs(r.color?"mat-"+r.color:""),lt("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("mat-unthemed",!r.color)("_mat-animation-noopable",r._animationsDisabled))},inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Vn],disabled:[2,"disabled","disabled",Vn],ariaDisabled:[2,"aria-disabled","ariaDisabled",Vn],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Vn],tabIndex:[2,"tabIndex","tabIndex",l8],_tabindex:[2,"tabindex","_tabindex",l8]}})}return n})(),tO=(()=>{class n extends c8{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Fe({type:n,selectors:[["button","mat-icon-button",""],["a","mat-icon-button",""],["button","matIconButton",""],["a","matIconButton",""]],hostAttrs:[1,"mdc-icon-button","mat-mdc-icon-button"],exportAs:["matButton","matAnchor"],features:[St],attrs:oae,ngContentSelectors:sae,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(Cn(),sa(0,"span",0),bt(1),sa(2,"span",1)(3,"span",2))},styles:[`.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%));flex-shrink:0;text-align:center;width:var(--mat-icon-button-state-layer-size, 40px);height:var(--mat-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mat-icon-button-state-layer-size, 40px) - var(--mat-icon-button-icon-size, 24px)) / 2);font-size:var(--mat-icon-button-icon-size, 24px);color:var(--mat-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-icon-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-icon-button-touch-target-display, block);left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mat-icon-button-icon-size, 24px);height:var(--mat-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%))}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return n})();var u8=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=$e({type:n});static \u0275inj=Ve({imports:[Ft,Mc,Ft]})}return n})();var d8=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=$e({type:n});static \u0275inj=Ve({imports:[Ft,Ft]})}return n})();function cae(n,e){}var Oc=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;disableAnimations=!1;providers;container;templateContext};var iO=(()=>{class n extends kf{_elementRef=D(Ue);_focusTrapFactory=D(d_);_config;_interactivityChecker=D(Ef);_ngZone=D(De);_focusMonitor=D(ha);_renderer=D(Tn);_changeDetectorRef=D(Wn);_injector=D(We);_platform=D(Gt);_document=D(Qe);_portalOutlet;_focusTrapped=new ve;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_isDestroyed=!1;constructor(){super(),this._config=D(Oc,{optional:!0})||new Oc,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(t){this._ariaLabelledByQueue.push(t),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(t){let i=this._ariaLabelledByQueue.indexOf(t);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._focusTrapped.complete(),this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}attachDomPortal=t=>{this._portalOutlet.hasAttached();let i=this._portalOutlet.attachDomPortal(t);return this._contentAttached(),i};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let r=()=>{o(),s(),t.removeAttribute("tabindex")},o=this._renderer.listen(t,"blur",r),s=this._renderer.listen(t,"mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(t){this._isDestroyed||vi(()=>{let i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus(t);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(t)||this._focusDialogContainer(t);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',t);break;default:this._focusByCssSelector(this._config.autoFocus,t);break}this._focusTrapped.next()},{injector:this._injector})}_restoreFocus(){let t=this._config.restoreFocus,i=null;if(typeof t=="string"?i=this._document.querySelector(t):typeof t=="boolean"?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&typeof i.focus=="function"){let r=wf(),o=this._elementRef.nativeElement;(!r||r===this._document.body||r===o||o.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(t){this._elementRef.nativeElement.focus?.(t)}_containsFocus(){let t=this._elementRef.nativeElement,i=wf();return t===i||t.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=wf()))}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Fe({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(i&1&&on(__,7),i&2){let o;st(o=at())&&(r._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){i&2&&Ut("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[St],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){i&1&&Xe(0,cae,0,0,"ng-template",0)},dependencies:[__],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return n})(),E_=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new ve;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(e,t){this.overlayRef=e,this.config=t,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!fa(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{!this.disableClose&&this._canClose()?this.close(void 0,{focusOrigin:"mouse"}):this.containerInstance._recaptureFocus?.()}),this._detachSubscription=e.detachments().subscribe(()=>{t.closeOnOverlayDetachments!==!1&&this.close()})}close(e,t){if(this._canClose(e)){let i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}_canClose(e){let t=this.config;return!!this.containerInstance&&(!t.closePredicate||t.closePredicate(e,t,this.componentInstance))}},uae=new oe("DialogScrollStrategy",{providedIn:"root",factory:()=>{let n=D(We);return()=>Pf(n)}}),dae=new oe("DialogData"),hae=new oe("DefaultDialogConfig");function fae(n){let e=rn(n),t=new je;return{valueSignal:e,get value(){return e()},change:t,ngOnDestroy(){t.complete()}}}var h8=(()=>{class n{_injector=D(We);_defaultOptions=D(hae,{optional:!0});_parentDialog=D(n,{optional:!0,skipSelf:!0});_overlayContainer=D(Rx);_idGenerator=D(to);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new ve;_afterOpenedAtThisLevel=new ve;_ariaHiddenElements=new Map;_scrollStrategy=D(uae);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=Ua(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ki(void 0)));constructor(){}open(t,i){let r=this._defaultOptions||new Oc;i=b(b({},r),i),i.id=i.id||this._idGenerator.getId("cdk-dialog-"),i.id&&this.getDialogById(i.id);let o=this._getOverlayConfig(i),s=Rf(this._injector,o),l=new E_(s,i),c=this._attachContainer(s,l,i);if(l.containerInstance=c,!this.openDialogs.length){let d=this._overlayContainer.getContainerElement();c._focusTrapped?c._focusTrapped.pipe(Kn(1)).subscribe(()=>{this._hideNonDialogContentFromAssistiveTechnology(d)}):this._hideNonDialogContentFromAssistiveTechnology(d)}return this._attachDialogContent(t,l,c,i),this.openDialogs.push(l),l.closed.subscribe(()=>this._removeOpenDialog(l,!0)),this.afterOpened.next(l),l}closeAll(){nO(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){nO(this._openDialogsAtThisLevel,t=>{t.config.closeOnDestroy===!1&&this._removeOpenDialog(t,!1)}),nO(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){let i=new Ac({positionStrategy:t.positionStrategy||Of().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation,disableAnimations:t.disableAnimations});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){let o=r.injector||r.viewContainerRef?.injector,s=[{provide:Oc,useValue:r},{provide:E_,useValue:i},{provide:Mf,useValue:t}],l;r.container?typeof r.container=="function"?l=r.container:(l=r.container.type,s.push(...r.container.providers(r))):l=iO;let c=new Tf(l,r.viewContainerRef,We.create({parent:o||this._injector,providers:s}));return t.attach(c).instance}_attachDialogContent(t,i,r,o){if(t instanceof lr){let s=this._createInjector(o,i,r,void 0),l={$implicit:o.data,dialogRef:i};o.templateContext&&(l=b(b({},l),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),r.attachTemplatePortal(new Dc(t,null,l,s))}else{let s=this._createInjector(o,i,r,this._injector),l=r.attachComponentPortal(new Tf(t,o.viewContainerRef,s));i.componentRef=l,i.componentInstance=l.instance}}_createInjector(t,i,r,o){let s=t.injector||t.viewContainerRef?.injector,l=[{provide:dae,useValue:t.data},{provide:E_,useValue:i}];return t.providers&&(typeof t.providers=="function"?l.push(...t.providers(i,t,r)):l.push(...t.providers)),t.direction&&(!s||!s.get(no,null,{optional:!0}))&&l.push({provide:no,useValue:fae(t.direction)}),We.create({parent:s||o,providers:l})}_removeOpenDialog(t,i){let r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,s)=>{o?s.setAttribute("aria-hidden",o):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(t){if(t.parentElement){let i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){let o=i[r];o!==t&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nO(n,e){let t=n.length;for(;t--;)e(n[t])}function pae(n,e){}var S_=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;enterAnimationDuration;exitAnimationDuration},rO="mdc-dialog--open",f8="mdc-dialog--opening",p8="mdc-dialog--closing",mae=150,gae=75,_8=(()=>{class n extends iO{_animationStateChanged=new je;_animationsEnabled=!Wi();_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?g8(this._config.enterAnimationDuration)??mae:0;_exitAnimationDuration=this._animationsEnabled?g8(this._config.exitAnimationDuration)??gae:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(m8,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(f8,rO)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(rO),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(rO),this._animationsEnabled?(this._hostElement.style.setProperty(m8,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(p8)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(t){this._actionSectionCount+=t,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(f8,p8)}_waitForAnimationToComplete(t,i){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(t):t()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(t){let i=super.attachComponentPortal(t);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static \u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})();static \u0275cmp=Fe({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(i,r){i&2&&(ls("id",r._config.id),Ut("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),lt("_mat-animation-noopable",!r._animationsEnabled)("mat-mdc-dialog-container-with-actions",r._actionSectionCount>0))},features:[St],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){i&1&&(z(0,"div",0)(1,"div",1),Xe(2,pae,0,0,"ng-template",2),U()())},dependencies:[__],styles:[`.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mat-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mat-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mat-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mat-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mat-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mat-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mat-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mat-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mat-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mat-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mat-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mat-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mat-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;box-sizing:border-box;min-height:52px;margin:0;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}
`],encapsulation:2})}return n})(),m8="--mat-dialog-transition-duration";function g8(n){return n==null?null:typeof n=="number"?n:n.endsWith("ms")?Lr(n.substring(0,n.length-2)):n.endsWith("s")?Lr(n.substring(0,n.length-1))*1e3:n==="0"?0:null}var I_=function(n){return n[n.OPEN=0]="OPEN",n[n.CLOSING=1]="CLOSING",n[n.CLOSED=2]="CLOSED",n}(I_||{}),Bf=class{_ref;_config;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new ve;_beforeClosed=new ve;_result;_closeFallbackTimeout;_state=I_.OPEN;_closeInteractionType;constructor(e,t,i){this._ref=e,this._config=t,this._containerInstance=i,this.disableClose=t.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(It(r=>r.state==="opened"),Kn(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(It(r=>r.state==="closed"),Kn(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Sr(this.backdropClick(),this.keydownEvents().pipe(It(r=>r.keyCode===27&&!this.disableClose&&!fa(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),v8(this,r.type==="keydown"?"keyboard":"mouse"))})}close(e){let t=this._config.closePredicate;t&&!t(e,this._config,this.componentInstance)||(this._result=e,this._containerInstance._animationStateChanged.pipe(It(i=>i.state==="closing"),Kn(1)).subscribe(i=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),i.totalTime+100)}),this._state=I_.CLOSING,this._containerInstance._startExitAnimation())}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=I_.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function v8(n,e,t){return n._closeInteractionType=e,n.close(t)}var _C=new oe("MatMdcDialogData"),b8=new oe("mat-mdc-dialog-default-options"),y8=new oe("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let n=D(We);return()=>Pf(n)}}),D_=(()=>{class n{_defaultOptions=D(b8,{optional:!0});_scrollStrategy=D(y8);_parentDialog=D(n,{optional:!0,skipSelf:!0});_idGenerator=D(to);_injector=D(We);_dialog=D(h8);_animationsDisabled=Wi();_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new ve;_afterOpenedAtThisLevel=new ve;dialogConfigClass=S_;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=Ua(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ki(void 0)));constructor(){this._dialogRefConstructor=Bf,this._dialogContainerType=_8,this._dialogDataToken=_C}open(t,i){let r;i=b(b({},this._defaultOptions||new S_),i),i.id=i.id||this._idGenerator.getId("mat-mdc-dialog-"),i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();let o=this._dialog.open(t,S(b({},i),{positionStrategy:Of(this._injector).centerHorizontally().centerVertically(),disableClose:!0,closePredicate:void 0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,disableAnimations:this._animationsDisabled||i.enterAnimationDuration?.toLocaleString()==="0"||i.exitAnimationDuration?.toString()==="0",container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:Oc,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(s,l,c)=>(r=new this._dialogRefConstructor(s,i,c),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:l.data},{provide:this._dialogRefConstructor,useValue:r}])}));return r.componentRef=o.componentRef,r.componentInstance=o.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{let s=this.openDialogs.indexOf(r);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vae(n,e){if(n&1&&(z(0,"p",8),ae(1),U()),n&2){let t=Q();B(),Wt(" ",t.server)}}function bae(n,e){if(n&1&&(z(0,"p",8),ae(1),U()),n&2){let t=Q();B(),Wt(" ",t.errorMessage)}}var vC=class n{constructor(e,t){this.dialogRef=e;this.data=t}server="";page="";errorMessage="";ngOnInit(){this.server=this.data.domain.trim(),this.page=this.data.page}saveDomain(){this.server.trim()?(this.dialogRef.close({page:this.page,server:this.server}),this.errorMessage=""):this.errorMessage="Please enter a valid"}validateDomain(e){return/^(http?:\/\/)(([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}|(\d{1,3}(\.\d{1,3}){3}))(:\d+)?(\/.*)?$/.test(e)}close(){this.dialogRef.close({page:this.page,server:""})}static \u0275fac=function(t){return new(t||n)(Ce(Bf),Ce(_C))};static \u0275cmp=Fe({type:n,selectors:[["app-domain-dialog"]],decls:14,vars:8,consts:[[1,"dialog-container"],[1,"input-container"],[1,"input-label"],["matInput","","type","text",1,"input-field",3,"ngModelChange","ngModel","placeholder"],["class","error-message",4,"ngIf"],[1,"button-group"],[1,"cancel-btn",3,"click"],[1,"save-btn",3,"click"],[1,"error-message"]],template:function(t,i){t&1&&(z(0,"div",0)(1,"h2"),ae(2),U(),z(3,"div",1)(4,"label",2),ae(5),U(),z(6,"input",3),lc("ngModelChange",function(o){return Nu(i.server,o)||(i.server=o),o}),U()(),Xe(7,vae,2,1,"p",4)(8,bae,2,1,"p",4),z(9,"div",5)(10,"button",6),Me("click",function(){return i.close()}),ae(11),U(),z(12,"button",7),Me("click",function(){return i.saveDomain()}),ae(13),U()()()),t&2&&(B(2),Nt(i.data.title),B(3),Nt(i.data.message),B(),ac("ngModel",i.server),de("placeholder",i.data.placeholder),B(),de("ngIf",i.server),B(),de("ngIf",i.errorMessage),B(3),Nt(i.data.cancelText),B(2),Nt(i.data.confirmText))},dependencies:[hr,ds,da,Ec,bf,l_,Pc,Hx,Ux],styles:[".dialog-container[_ngcontent-%COMP%]{padding:30px;background:#fff;border-radius:20px;box-shadow:0 10px 30px #00000026;width:100%;max-width:440px;margin:auto}h2[_ngcontent-%COMP%]{font-size:1.6rem;color:#333;margin-bottom:25px;text-align:center;font-weight:600}.input-container[_ngcontent-%COMP%]{margin-bottom:20px}.input-field[_ngcontent-%COMP%]{width:90%;padding:16px 20px;font-size:1rem;border:2px solid #e0e0e0;border-radius:12px;transition:all .3s ease;background:#fafafa}.input-field[_ngcontent-%COMP%]:focus{outline:none;border-color:#1976d2;background:#fff;box-shadow:0 0 0 3px #1976d233}.input-label[_ngcontent-%COMP%]{display:block;text-align:left;margin-bottom:8px;font-weight:500;color:#555}.error-message[_ngcontent-%COMP%]{color:#e53935;font-size:.9rem;margin:12px 0;padding:8px 12px;background:#e5393514;border-radius:8px;border-left:3px solid #e53935;text-align:left}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:25px}button[_ngcontent-%COMP%]{min-width:100px;font-size:.95rem;padding:12px 24px;border-radius:10px;border:none;cursor:pointer;font-weight:600;letter-spacing:.5px;transition:all .3s ease}.save-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1976d2,#1565c0);color:#fff;box-shadow:0 4px 12px #1976d24d}.save-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#1565c0,#0d47a1);transform:translateY(-2px);box-shadow:0 6px 16px #1976d266}.cancel-btn[_ngcontent-%COMP%]{background:transparent;color:#7f8c8d;border:2px solid #bdc3c7}.cancel-btn[_ngcontent-%COMP%]:hover{background:#bdc3c71a;color:#2c3e50;border-color:#95a5a6;transform:translateY(-2px)}button[_ngcontent-%COMP%]:focus, .input-field[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #1976d233}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.dialog-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .4s ease-out}@media (max-width: 480px){.dialog-container[_ngcontent-%COMP%]{padding:20px;margin:20px}.button-group[_ngcontent-%COMP%]{flex-direction:column}button[_ngcontent-%COMP%]{width:100%}}"]})};var Vf=class n{saveValuesInKey(e,t){localStorage.setItem(e,t)}getValueFromKey(e){let t=localStorage.getItem(e);return t||""}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})};var pa=class n{constructor(e,t){this.fb=e;this.mcpService=t;this.mcpService.elicitRequests$.subscribe(i=>{this.createFormFromSchema(i.schema)})}currentForm=new fn(null);currentSchema=new fn(null);currentRequestId=new fn(null);createFormFromSchema(e,t="Elicitation Request"){this.currentSchema.next({schema:e,title:t}),console.log("Schema : ",e);let i=this.fb.group({}),r=e.properties,o=e.required||[];for(let[s,l]of Object.entries(r)){let c=l;if(c.type==="array"){let d=this.createFormArray(c,o.includes(s));i.addControl(s,d)}else{let d=this.createValidators(c,o.includes(s));i.addControl(s,this.fb.control(c.default||null,d))}}this.currentForm.next(i)}createValidators(e,t){let i=[];return t&&i.push(ps.required),e.type==="string"&&(e.minLength&&i.push(ps.minLength(e.minLength)),e.maxLength&&i.push(ps.maxLength(e.maxLength)),e.format==="email"&&i.push(ps.email)),(e.type==="number"||e.type==="integer")&&(e.minimum!==void 0&&i.push(ps.min(e.minimum)),e.maximum!==void 0&&i.push(ps.max(e.maximum))),i}createFormArray(e,t){return this.isNestedArray(e)?this.createNestedFormArray(e,t):this.createSimpleFormArray(e,t)}createSimpleFormArray(e,t){let i=e.default||[];if(i.length>0){let r=i.map(o=>this.fb.control(o));return this.fb.array(r)}else return t?this.fb.array([this.fb.control(this.getDefaultArrayValue(e.items))]):this.fb.array([])}createNestedFormArray(e,t){let i=e.default||[];if(i.length>0){let r=i.map(o=>this.fb.array(o.map(s=>this.fb.control(s))));return this.fb.array(r)}else if(t){let r=this.fb.array([this.fb.control(this.getDefaultArrayValue(e.items.items))]);return this.fb.array([r])}else return this.fb.array([])}isNestedArray(e){return e.items&&e.items.type==="array"}getDefaultArrayValue(e){if(!e)return"";switch(e.type){case"integer":case"number":return 0;case"string":return"";case"boolean":return!1;default:return""}}addArrayItemToForm(e,t){let i=e.get(t),o=this.currentSchema.value?.schema?.properties[t];if(o&&!this.isNestedArray(o)){let s=this.getDefaultArrayValue(o.items);i.push(this.fb.control(s))}}removeArrayItemFromForm(e,t,i){let r=e.get(t);r.length>1&&r.removeAt(i)}addNestedArrayItem(e,t,i){let r=e.get(t);if(i>=0&&i<r.length){let o=r.at(i),l=this.currentSchema.value?.schema?.properties[t],c=this.getDefaultArrayValue(l?.items?.items);o.push(this.fb.control(c))}}removeNestedArrayItem(e,t,i,r){let o=e.get(t);if(i>=0&&i<o.length){let s=o.at(i);s.length>1&&s.removeAt(r)}}addNestedArrayRow(e,t){let i=e.get(t),o=this.currentSchema.value?.schema?.properties[t],s=this.getDefaultArrayValue(o?.items?.items),l=this.fb.array([this.fb.control(s)]);i.push(l)}removeNestedArrayRow(e,t,i){let r=e.get(t);r.length>1&&r.removeAt(i)}getFormArray(e,t){let i=e.get(t);return i instanceof _f?i:this.fb.array([])}getNestedFormArray(e,t,i){try{let r=this.getFormArray(e,t);if(i>=0&&i<r.length){let o=r.at(i);if(o instanceof _f)return o}}catch(r){console.warn(`Error getting nested array for ${t}[${i}]:`,r)}return this.fb.array([])}getCurrentForm(){return this.currentForm.asObservable()}getCurrentSchema(){return this.currentSchema.asObservable()}getCurrentRequestId(){return this.currentRequestId.value}submitResponse(e){this.mcpService.submitElicitResponse(e)}validateAgainstSchema(e,t){if(!t)return!1;let i=t.required||[];for(let r of i)if(e[r]===void 0||e[r]===null||e[r]===""||Array.isArray(e[r])&&e[r].length===0)return!1;return!0}static \u0275fac=function(t){return new(t||n)(Se(RH),Se(qi))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})};var yae=(n,e)=>({connected:n,disconnected:e});function wae(n,e){if(n&1){let t=Bt();z(0,"button",1),Me("click",function(){Ge(t);let r=Q();return Ze(r.disconnect())}),ae(1,"Disconnect"),U()}}function xae(n,e){if(n&1&&(z(0,"div",7)(1,"strong"),ae(2),U(),ae(3),U()),n&2){let t=e.$implicit;B(2),Wt("",t.type,":"),B(),Wt(" ",t.message," ")}}function Cae(n,e){if(n&1&&(z(0,"div")(1,"div",5)(2,"h6"),ae(3),U(),Xe(4,xae,4,2,"div",6),U()()),n&2){let t=Q();B(3),Wt("Notifications (",t.notifications.length,")"),B(),de("ngForOf",t.notifications)}}function Eae(n,e){n&1&&qt(0,"img",8)}function Iae(n,e){if(n&1){let t=Bt();z(0,"button",1),Me("click",function(){Ge(t);let r=Q();return Ze(r.connect(r.mcpServer()))}),ae(1,"Connect"),U(),_t(2,Eae,1,0,"img",8)}if(n&2){let t=Q();B(2),vt(t.loader?2:-1)}}var bC=class n{constructor(e,t,i){this.mcpService=e;this.storageService=t;this.elicitationService=i}isConnected=!1;notifications=[];currentElicitRequest=null;loader=!1;subscriptions=[];mcpServer=cg("");openAiKey=cg("");dialog=D(D_);mcp_props={title:"Connect to MCP Server",message:"Please enter the MCP server URL to connect.",placeholder:"Enter MCP server URL",confirmText:"Connect",cancelText:"Cancel",domain:this.mcpServer()||"",page:"mcp_server"};openai_props={title:"Connect to LLM",message:"Please enter the OpenAI API key to connect to the LLM service.",placeholder:"Enter OpenAI API key here",confirmText:"Connect",cancelText:"Cancel",domain:this.openAiKey()||"",page:"open_ai_token"};tools=new je;sendOpenAiKey=new je;ngOnInit(){this.subscriptions.push(this.mcpService.connectionStatus$.subscribe(e=>{console.log("MCP client component : ",e),this.isConnected=e}),this.mcpService.notifications$.subscribe(e=>{this.notifications.push(e)}),this.mcpService.elicitRequests$.subscribe(e=>{console.log("Request : ",e),this.currentElicitRequest=e})),this.mcpServer.set(this.storageService.getValueFromKey("mcp_server")||""),this.openAiKey.set(this.storageService.getValueFromKey("open_ai_token")||""),this.mcpServer()?setTimeout(()=>{this.connect(this.mcpServer())},200):this.openDomainDialog(this.mcp_props)}connect(e){return E(this,null,function*(){console.log("Connecting to MCP server : ",e);try{this.loader=!0,yield this.mcpService.connect(e),this.mcpService.tools$.subscribe(t=>{let i=this.mcpService.createOpenAiToolSchema(t);this.tools.emit(i)}),this.loader=!1}catch(t){console.error("Connection error:",t),this.loader=!1}})}disconnect(){return E(this,null,function*(){yield this.mcpService.disconnect()})}submitElicitForm(e){if(this.currentElicitRequest){let t=this.elicitationService.getCurrentRequestId();console.log("Elicitation id : ",t),this.mcpService.submitElicitResponse({action:"accept",content:e}),console.log("Server response : ",{action:"accept",content:e}),this.currentElicitRequest=null}}cancelElicit(){this.mcpService.submitElicitResponse({action:"cancel"}),this.currentElicitRequest=null}openDomainDialog(e){this.dialog.open(vC,{width:"500px",disableClose:!1,data:e}).afterClosed().subscribe(i=>{i.server&&(this.mcpServer.set(i.server),i.page==="mcp_server"?(this.storageService.saveValuesInKey("mcp_server",i.server),this.connect(i.server)):i.page==="open_ai_token"&&(this.openAiKey.set(i.server),this.storageService.saveValuesInKey("open_ai_token",i.server)))})}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe()),this.disconnect()}static \u0275fac=function(t){return new(t||n)(Ce(qi),Ce(Vf),Ce(pa))};static \u0275cmp=Fe({type:n,selectors:[["app-mcp-client"]],inputs:{mcpServer:[1,"mcpServer"],openAiKey:[1,"openAiKey"]},outputs:{mcpServer:"mcpServerChange",openAiKey:"openAiKeyChange",tools:"tools",sendOpenAiKey:"sendOpenAiKey"},decls:12,vars:8,consts:[["disconnected",""],[3,"click"],[1,"status-indicator"],[1,"fas","fa-circle",3,"ngClass"],[4,"ngIf","ngIfElse"],[1,"notifications"],["class","notification",4,"ngFor","ngForOf"],[1,"notification"],["src","gif/Spinner.gif"]],template:function(t,i){if(t&1){let r=Bt();z(0,"button",1),Me("click",function(){return Ge(r),i.mcp_props.domain=i.mcpServer(),Ze(i.openDomainDialog(i.mcp_props))}),ae(1,"MCP config"),U(),z(2,"button",1),Me("click",function(){return Ge(r),i.openai_props.domain=i.openAiKey(),Ze(i.openDomainDialog(i.openai_props))}),ae(3,"Open Ai config"),U(),z(4,"div",2),qt(5,"i",3),z(6,"h5"),ae(7),U(),_t(8,wae,2,0,"button"),U(),Xe(9,Cae,5,2,"div",4)(10,Iae,3,1,"ng-template",null,0,rl)}if(t&2){let r=Pr(11);B(5),de("ngClass",Ck(5,yae,i.isConnected,!i.isConnected)),B(2),Nt(i.isConnected?"Connected to MCP Server":"Disconnected from MCP Server"),B(),vt(i.isConnected?8:-1),B(),de("ngIf",i.isConnected)("ngIfElse",r)}},dependencies:[hr,mg,hc,ds,da],styles:["[_nghost-%COMP%]{display:block;padding:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;max-width:1000px;margin:0 auto}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:15px}.connection-status[_ngcontent-%COMP%]{padding:10px;border-radius:5px;margin-bottom:20px;font-weight:700}.connected[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}.disconnected[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.elicit-form[_ngcontent-%COMP%]{background-color:#f8f9fa;border-radius:8px;padding:20px;margin-bottom:30px;box-shadow:0 2px 4px #0000001a}.elicit-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#3498db}.form-field[_ngcontent-%COMP%]{margin-bottom:15px}.form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500;color:#34495e}.required[_ngcontent-%COMP%]{color:#e74c3c}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #ced4da;border-radius:4px;font-size:16px;transition:border-color .15s ease-in-out}input[type=text][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 2px #3498db33}input[type=checkbox][_ngcontent-%COMP%]{margin-right:10px;transform:scale(1.2)}.field-description[_ngcontent-%COMP%]{font-size:.85em;color:#7f8c8d;margin-top:5px;font-style:italic}button[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;font-size:14px;cursor:pointer;margin-right:10px;transition:background-color .2s}button[type=submit][_ngcontent-%COMP%]{background-color:#2ecc71;color:#fff}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#27ae60}button[type=button][_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}button[type=button][_ngcontent-%COMP%]:hover{background-color:#c0392b}.notifications[_ngcontent-%COMP%]{background-color:#f8f9fa;border-radius:8px;padding:20px;box-shadow:0 2px 4px #0000001a}.notification[_ngcontent-%COMP%]{padding:10px;margin-bottom:10px;border-left:4px solid;background-color:#fff;border-radius:0 4px 4px 0}.notification[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{text-transform:capitalize}.notification[type=log][_ngcontent-%COMP%]{border-left-color:#3498db}.notification[type=error][_ngcontent-%COMP%]{border-left-color:#e74c3c}.notification[type=resource-change][_ngcontent-%COMP%], .notification[type=resource-list][_ngcontent-%COMP%]{border-left-color:#2ecc71}.connected[_ngcontent-%COMP%]{color:green}.disconnected[_ngcontent-%COMP%]{color:red}.status-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}@media (max-width: 768px){[_nghost-%COMP%]{padding:10px}.elicit-form[_ngcontent-%COMP%], .notifications[_ngcontent-%COMP%]{padding:15px}}"]})};var sO={};yn(sO,{RouterRunnable:()=>yC,Runnable:()=>$t,RunnableAssign:()=>bb,RunnableBinding:()=>Di,RunnableBranch:()=>wC,RunnableEach:()=>MF,RunnableLambda:()=>ri,RunnableMap:()=>vb,RunnableParallel:()=>OF,RunnablePassthrough:()=>io,RunnablePick:()=>NF,RunnableRetry:()=>PF,RunnableSequence:()=>Zn,RunnableToolLike:()=>FF,RunnableWithFallbacks:()=>RF,RunnableWithMessageHistory:()=>xC,_coerceToRunnable:()=>sr,ensureConfig:()=>Ro,getCallbackManagerForConfig:()=>Jd,mergeConfigs:()=>Er,patchConfig:()=>fi,pickRunnableConfigKeys:()=>rm});var io=class extends $t{static lc_name(){return"RunnablePassthrough"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e&&(this.func=e.func)}invoke(e,t){return E(this,null,function*(){let i=Ro(t);return this.func&&(yield this.func(e,i)),this._callWithConfig(r=>Promise.resolve(r),e,i)})}transform(e,t){return yt(this,null,function*(){let i=Ro(t),r,o=!0;try{for(var s=ze(this._transformStreamWithConfig(e,p=>p,i)),l,c,d;l=!(c=yield new ge(s.next())).done;l=!1){let f=c.value;if(yield f,o)if(r===void 0)r=f;else try{r=Ba(r,f)}catch{r=void 0,o=!1}}}catch{d=[c]}finally{try{l&&(c=s.return)&&(yield new ge(c.call(s)))}finally{if(d)throw d[0]}}this.func&&r!==void 0&&(yield new ge(this.func(r,i)))})}static assign(e){return new bb(new vb({steps:e}))}};var yC=class extends $t{static lc_name(){return"RouterRunnable"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnables=e.runnables}invoke(e,t){return E(this,null,function*(){let{key:i,input:r}=e,o=this.runnables[i];if(o===void 0)throw new Error(`No runnable associated with key "${i}".`);return o.invoke(r,Ro(t))})}batch(e,t,i){return E(this,null,function*(){let r=e.map(g=>g.key),o=e.map(g=>g.input);if(r.find(g=>this.runnables[g]===void 0)!==void 0)throw new Error("One or more keys do not have a corresponding runnable.");let l=r.map(g=>this.runnables[g]),c=this._getOptionsList(t??{},e.length),d=c[0]?.maxConcurrency??i?.maxConcurrency,f=d&&d>0?d:e.length,p=[];for(let g=0;g<o.length;g+=f){let m=o.slice(g,g+f).map((y,w)=>l[w].invoke(y,c[w])),_=yield Promise.all(m);p.push(_)}return p.flat()})}stream(e,t){return E(this,null,function*(){let{key:i,input:r}=e,o=this.runnables[i];if(o===void 0)throw new Error(`No runnable associated with key "${i}".`);return o.stream(r,t)})}};var wC=class extends $t{static lc_name(){return"RunnableBranch"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"default",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"branches",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.branches=e.branches,this.default=e.default}static from(e){if(e.length<1)throw new Error("RunnableBranch requires at least one branch");let i=e.slice(0,-1).map(([o,s])=>[sr(o),sr(s)]),r=sr(e[e.length-1]);return new this({branches:i,default:r})}_invoke(e,t,i){return E(this,null,function*(){let r;for(let o=0;o<this.branches.length;o+=1){let[s,l]=this.branches[o];if(yield s.invoke(e,fi(t,{callbacks:i?.getChild(`condition:${o+1}`)}))){r=yield l.invoke(e,fi(t,{callbacks:i?.getChild(`branch:${o+1}`)}));break}}return r||(r=yield this.default.invoke(e,fi(t,{callbacks:i?.getChild("branch:default")}))),r})}invoke(i){return E(this,arguments,function*(e,t={}){return this._callWithConfig(this._invoke,e,t)})}_streamIterator(e,t){return yt(this,null,function*(){let i=yield new ge(Jd(t)),r=yield new ge(i?.handleChainStart(this.toJSON(),AF(e,"input"),t?.runId,void 0,void 0,void 0,t?.runName)),o,s=!0,l;try{for(let w=0;w<this.branches.length;w+=1){let[I,k]=this.branches[w];if(yield new ge(I.invoke(e,fi(t,{callbacks:r?.getChild(`condition:${w+1}`)})))){l=yield new ge(k.stream(e,fi(t,{callbacks:r?.getChild(`branch:${w+1}`)})));try{for(var c=ze(l),d,f,p;d=!(f=yield new ge(c.next())).done;d=!1){let j=f.value;if(yield j,s)if(o===void 0)o=j;else try{o=Ba(o,j)}catch{o=void 0,s=!1}}}catch{p=[f]}finally{try{d&&(f=c.return)&&(yield new ge(f.call(c)))}finally{if(p)throw p[0]}}break}}if(l===void 0){l=yield new ge(this.default.stream(e,fi(t,{callbacks:r?.getChild("branch:default")})));try{for(var g=ze(l),m,_,y;m=!(_=yield new ge(g.next())).done;m=!1){let w=_.value;if(yield w,s)if(o===void 0)o=w;else try{o=Ba(o,w)}catch{o=void 0,s=!1}}}catch{y=[_]}finally{try{m&&(_=g.return)&&(yield new ge(_.call(g)))}finally{if(y)throw y[0]}}}}catch(w){throw yield new ge(r?.handleChainError(w)),w}yield new ge(r?.handleChainEnd(o??{}))})}};var xC=class n extends Di{constructor(e){let t=ri.from((s,l)=>this._enterHistory(s,l??{})).withConfig({runName:"loadHistory"}),i=e.historyMessagesKey??e.inputMessagesKey;i&&(t=io.assign({[i]:t}).withConfig({runName:"insertHistory"}));let r=t.pipe(e.runnable.withListeners({onEnd:(s,l)=>this._exitHistory(s,l??{})})).withConfig({runName:"RunnableWithMessageHistory"}),o=e.config??{};super(S(b({},e),{config:o,bound:r})),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputMessagesKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputMessagesKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"historyMessagesKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"getMessageHistory",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.getMessageHistory=e.getMessageHistory,this.inputMessagesKey=e.inputMessagesKey,this.outputMessagesKey=e.outputMessagesKey,this.historyMessagesKey=e.historyMessagesKey}_getInputMessages(e){let t;if(typeof e=="object"&&!Array.isArray(e)&&!Nn(e)){let i;this.inputMessagesKey?i=this.inputMessagesKey:Object.keys(e).length===1?i=Object.keys(e)[0]:i="input",Array.isArray(e[i])&&Array.isArray(e[i][0])?t=e[i][0]:t=e[i]}else t=e;if(typeof t=="string")return[new jl(t)];if(Array.isArray(t))return t;if(Nn(t))return[t];throw new Error(`Expected a string, BaseMessage, or array of BaseMessages.
Got ${JSON.stringify(t,null,2)}`)}_getOutputMessages(e){let t;if(!Array.isArray(e)&&!Nn(e)&&typeof e!="string"){let i;this.outputMessagesKey!==void 0?i=this.outputMessagesKey:Object.keys(e).length===1?i=Object.keys(e)[0]:i="output",e.generations!==void 0?t=e.generations[0][0].message:t=e[i]}else t=e;if(typeof t=="string")return[new $n(t)];if(Array.isArray(t))return t;if(Nn(t))return[t];throw new Error(`Expected a string, BaseMessage, or array of BaseMessages. Received: ${JSON.stringify(t,null,2)}`)}_enterHistory(e,t){return E(this,null,function*(){let r=yield(t?.configurable?.messageHistory).getMessages();return this.historyMessagesKey===void 0?r.concat(this._getInputMessages(e)):r})}_exitHistory(e,t){return E(this,null,function*(){let i=t.configurable?.messageHistory,r;Array.isArray(e.inputs)&&Array.isArray(e.inputs[0])?r=e.inputs[0]:r=e.inputs;let o=this._getInputMessages(r);if(this.historyMessagesKey===void 0){let c=yield i.getMessages();o=o.slice(c.length)}let s=e.outputs;if(!s)throw new Error(`Output values from 'Run' undefined. Run: ${JSON.stringify(e,null,2)}`);let l=this._getOutputMessages(s);yield i.addMessages([...o,...l])})}_mergeConfig(...e){return E(this,null,function*(){let t=yield ji(n.prototype,this,"_mergeConfig").call(this,...e);if(!t.configurable||!t.configurable.sessionId){let r={[this.inputMessagesKey??"input"]:"foo"},o={configurable:{sessionId:"123"}};throw new Error(`sessionId is required. Pass it in as part of the config argument to .invoke() or .stream()
eg. chain.invoke(${JSON.stringify(r)}, ${JSON.stringify(o)})`)}let{sessionId:i}=t.configurable;return t.configurable.messageHistory=yield this.getMessageHistory(i),t})}};var x8=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=$e({type:n});static \u0275inj=Ve({imports:[Ft]})}return n})();function Sae(n,e){if(n&1&&(z(0,"p"),ae(1),U()),n&2){let t=Q(4);B(),Nt(t.currentRequest.params.message)}}function Dae(n,e){if(n&1&&(z(0,"li"),ae(1),U()),n&2){let t=e.$implicit;B(),Nt(t)}}function Tae(n,e){if(n&1&&(z(0,"div",6)(1,"h4"),ae(2,"Validation Errors"),U(),z(3,"ul"),Xe(4,Dae,2,1,"li",7),U()()),n&2){let t=Q(4);B(4),de("ngForOf",t.validationErrors)}}function kae(n,e){n&1&&(z(0,"span",22),ae(1,"*"),U())}function Aae(n,e){if(n&1&&(z(0,"small",26),ae(1),U()),n&2){let t=Q(3).$implicit,i=Q(3).ngIf,r=Q(2);B(),Wt(" ",r.getFieldDescription(i.schema,t)," ")}}function Mae(n,e){if(n&1&&(z(0,"div",23),qt(1,"input",24),Xe(2,Aae,2,1,"small",25),U()),n&2){let t=Q(2).$implicit,i=Q(3).ngIf,r=Q(2);B(),de("id",t)("formControlName",t)("value",r.getFieldDefault(i.schema,t))("placeholder",r.getFieldExamples(i.schema,t)),B(),de("ngIf",r.getFieldDescription(i.schema,t))}}function Pae(n,e){n&1&&(z(0,"option",30),ae(1,"(Skip)"),U())}function Oae(n,e){if(n&1&&(z(0,"option",31),ae(1),U()),n&2){let t=e.$implicit;de("value",t),B(),Wt(" ",t," ")}}function Rae(n,e){if(n&1&&(z(0,"small",26),ae(1),U()),n&2){let t=Q(3).$implicit,i=Q(3).ngIf,r=Q(2);B(),Wt(" ",r.getFieldDescription(i.schema,t)," ")}}function Nae(n,e){if(n&1&&(z(0,"div",23)(1,"select",27),Xe(2,Pae,2,0,"option",28)(3,Oae,2,2,"option",29),U(),Xe(4,Rae,2,1,"small",25),U()),n&2){let t=Q(2).$implicit,i=Q(3).ngIf,r=Q(2);B(),de("id",t)("formControlName",t),B(),de("ngIf",!r.isFieldRequired(i.schema,t)),B(),de("ngForOf",r.getFieldOptions(i.schema,t)),B(),de("ngIf",r.getFieldDescription(i.schema,t))}}function Fae(n,e){if(n&1&&(z(0,"div",17)(1,"div",18)(2,"label",19),ae(3),Xe(4,kae,2,0,"span",20),U()(),Xe(5,Mae,3,5,"div",21)(6,Nae,5,5,"div",21),U()),n&2){let t=Q().$implicit,i=Q(3).ngIf,r=Q(2);B(2),de("for",t),B(),Wt(" ",r.getFieldTitle(i.schema,t)," "),B(),de("ngIf",r.isFieldRequired(i.schema,t)),B(),de("ngIf",!r.getFieldOptions(i.schema,t).length),B(),de("ngIf",r.getFieldOptions(i.schema,t).length)}}function Lae(n,e){n&1&&(z(0,"span",22),ae(1,"*"),U())}function jae(n,e){if(n&1&&(z(0,"div",17)(1,"div",18)(2,"label",19),ae(3),Xe(4,Lae,2,0,"span",20),U()(),z(5,"div",23),qt(6,"input",32),U()()),n&2){let t=Q().$implicit,i=Q(3).ngIf,r=Q(2);B(2),de("for",t),B(),Wt(" ",r.getFieldTitle(i.schema,t)," "),B(),de("ngIf",r.isFieldRequired(i.schema,t)),B(2),de("id",t)("formControlName",t)("value",r.getFieldDefault(i.schema,t))}}function Bae(n,e){n&1&&(z(0,"span",22),ae(1,"*"),U())}function Vae(n,e){if(n&1&&(z(0,"small",26),ae(1),U()),n&2){let t=Q(2).$implicit,i=Q(3).ngIf,r=Q(2);B(),Wt(" ",r.getFieldDescription(i.schema,t)," ")}}function zae(n,e){if(n&1&&(z(0,"div",17)(1,"div",18)(2,"label",19),ae(3),Xe(4,Bae,2,0,"span",20),U()(),z(5,"div",23),qt(6,"input",33),Xe(7,Vae,2,1,"small",25),U()()),n&2){let t=Q().$implicit,i=Q(3).ngIf,r=Q(2);B(2),de("for",t),B(),Wt(" ",r.getFieldTitle(i.schema,t)," "),B(),de("ngIf",r.isFieldRequired(i.schema,t)),B(2),de("id",t)("formControlName",t)("placeholder",r.getFieldExamples(i.schema,t))("value",r.getFieldDefault(i.schema,t))("min",r.getFieldMin(i.schema,t))("max",r.getFieldMax(i.schema,t)),B(),de("ngIf",r.getFieldDescription(i.schema,t))}}function $ae(n,e){n&1&&(z(0,"span",22),ae(1,"*"),U())}function Uae(n,e){if(n&1&&(z(0,"small",26),ae(1),U()),n&2){let t=Q(2).$implicit,i=Q(3).ngIf,r=Q(2);B(),Wt(" ",r.getFieldDescription(i.schema,t)," ")}}function Hae(n,e){if(n&1&&(z(0,"div",17)(1,"div",18)(2,"label",19),ae(3),Xe(4,$ae,2,0,"span",20),U()(),z(5,"div",23),qt(6,"input",33),Xe(7,Uae,2,1,"small",25),U()()),n&2){let t=Q().$implicit,i=Q(3).ngIf,r=Q(2);B(2),de("for",t),B(),Wt(" ",r.getFieldTitle(i.schema,t)," "),B(),de("ngIf",r.isFieldRequired(i.schema,t)),B(2),de("id",t)("formControlName",t)("placeholder",r.getFieldExamples(i.schema,t))("value",r.getFieldDefault(i.schema,t))("min",r.getFieldMin(i.schema,t))("max",r.getFieldMax(i.schema,t)),B(),de("ngIf",r.getFieldDescription(i.schema,t))}}function qae(n,e){n&1&&(z(0,"span",22),ae(1,"*"),U())}function Wae(n,e){n&1&&(z(0,"option",30),ae(1,"(Skip)"),U())}function Gae(n,e){if(n&1&&(z(0,"option",31),ae(1),U()),n&2){let t=e.$implicit;de("value",t),B(),Wt(" ",t," ")}}function Zae(n,e){if(n&1&&(z(0,"small",26),ae(1),U()),n&2){let t=Q(2).$implicit,i=Q(3).ngIf,r=Q(2);B(),Wt(" ",r.getFieldDescription(i.schema,t)," ")}}function Kae(n,e){if(n&1&&(z(0,"div",17)(1,"div",18)(2,"label",19),ae(3),Xe(4,qae,2,0,"span",20),U()(),z(5,"div",23)(6,"select",27),Xe(7,Wae,2,0,"option",28)(8,Gae,2,2,"option",29),U(),Xe(9,Zae,2,1,"small",25),U()()),n&2){let t=Q().$implicit,i=Q(3).ngIf,r=Q(2);B(2),de("for",t),B(),Wt(" ",r.getFieldTitle(i.schema,t)," "),B(),de("ngIf",r.isFieldRequired(i.schema,t)),B(2),de("id",t)("formControlName",t),B(),de("ngIf",!r.isFieldRequired(i.schema,t)),B(),de("ngForOf",r.getFieldOptions(i.schema,t)),B(),de("ngIf",r.getFieldDescription(i.schema,t))}}function Yae(n,e){if(n&1&&(z(0,"small",26),ae(1),U()),n&2){let t=Q(2).$implicit,i=Q(3).ngIf,r=Q(2);B(),Wt(" ",r.getFieldDescription(i.schema,t)," ")}}function Qae(n,e){if(n&1&&(z(0,"div",17)(1,"div",18)(2,"label",19),ae(3),U()(),z(4,"div",23)(5,"div",34),qt(6,"input",35),z(7,"label",36),ae(8),U()(),Xe(9,Yae,2,1,"small",25),U()()),n&2){let t=Q().$implicit,i=Q(3).ngIf,r=Q(2);B(2),de("for",t),B(),Wt(" ",r.getFieldTitle(i.schema,t)," "),B(3),de("id",t)("formControlName",t),B(),de("for",t),B(),Wt(" ",r.getFieldTitle(i.schema,t)," "),B(),de("ngIf",r.getFieldDescription(i.schema,t))}}function Xae(n,e){n&1&&(z(0,"span",22),ae(1,"*"),U())}function Jae(n,e){if(n&1){let t=Bt();z(0,"div",44)(1,"div",45),qt(2,"input",46),z(3,"button",47),Me("click",function(){let r=Ge(t).index,o=Q(3).$implicit,s=Q(5);return Ze(s.removeArrayItem(o,r))}),ae(4," - "),U()()()}if(n&2){let t=e.index,i=Q(3).$implicit,r=Q(2).ngIf,o=Q(3);B(2),de("formControlName",t),B(),de("disabled",o.getFormArray(r,i).controls.length<=1)}}function ele(n,e){if(n&1){let t=Bt();z(0,"div",40),Xe(1,Jae,5,2,"div",41),z(2,"div",42)(3,"button",43),Me("click",function(){Ge(t);let r=Q(2).$implicit,o=Q(5);return Ze(o.addArrayItem(r))}),ae(4," + Add Column "),U()()()}if(n&2){let t=Q(2).$implicit,i=Q(2).ngIf,r=Q(3);B(),de("ngForOf",r.getFormArray(i,t).controls)}}function tle(n,e){if(n&1){let t=Bt();z(0,"div",60)(1,"div",61),qt(2,"input",62),z(3,"button",63),Me("click",function(){let r=Ge(t).index,o=Q().index,s=Q(3).$implicit,l=Q(5);return Ze(l.removeNestedArrayItem(s,o,r))}),ae(4," - "),U()()()}if(n&2){let t=e.index,i=Q().index,r=Q(3).$implicit,o=Q(2).ngIf,s=Q().ngIf,l=Q(2);B(2),de("formControlName",t)("placeholder",l.getFieldExamples(s.schema,r)),B(),de("disabled",l.getNestedFormArray(o,r,i).controls.length<=1)}}function nle(n,e){if(n&1){let t=Bt();z(0,"div",53)(1,"div",54)(2,"strong"),ae(3),U(),z(4,"button",55),Me("click",function(){let r=Ge(t).index,o=Q(3).$implicit,s=Q(5);return Ze(s.removeNestedArrayRow(o,r))}),ae(5," Remove Row "),U()(),z(6,"div",56),Xe(7,tle,5,3,"div",57),z(8,"div",58)(9,"button",59),Me("click",function(){let r=Ge(t).index,o=Q(3).$implicit,s=Q(5);return Ze(s.addNestedArrayItem(o,r))}),ae(10," + Add Values "),U()()()()}if(n&2){let t=e.index,i=Q(3).$implicit,r=Q(2).ngIf,o=Q(3);B(3),Wt("Row ",t+1),B(),de("disabled",o.getFormArray(r,i).controls.length<=1),B(2),de("formArrayName",t),B(),de("ngForOf",o.getNestedFormArray(r,i,t).controls)}}function ile(n,e){if(n&1){let t=Bt();z(0,"div",48)(1,"div",49)(2,"h5"),ae(3,"Data Rows"),U(),z(4,"small"),ae(5,"Each row represents a data record"),U()(),Xe(6,nle,11,4,"div",50),z(7,"div",51)(8,"button",52),Me("click",function(){Ge(t);let r=Q(2).$implicit,o=Q(5);return Ze(o.addNestedArrayRow(r))}),ae(9," + Add New Row "),U()()()}if(n&2){let t=Q(2).$implicit,i=Q(2).ngIf,r=Q(3);B(6),de("ngForOf",r.getFormArray(i,t).controls)}}function rle(n,e){if(n&1&&(z(0,"div",17)(1,"div",18)(2,"label"),ae(3),Xe(4,Xae,2,0,"span",20),U()(),z(5,"div",23)(6,"div",37),Xe(7,ele,5,1,"div",38)(8,ile,10,1,"div",39),U()()()),n&2){let t=Q().$implicit,i=Q(3).ngIf,r=Q(2);B(3),Wt(" ",r.getFieldTitle(i.schema,t)," "),B(),de("ngIf",r.isFieldRequired(i.schema,t)),B(2),de("formArrayName",xk(t)),B(),de("ngIf",!r.isNestedArray(i.schema,t)),B(),de("ngIf",r.isNestedArray(i.schema,t))}}function ole(n,e){if(n&1&&(z(0,"div",14),b0(1,15),Xe(2,Fae,7,5,"div",16)(3,jae,7,6,"div",16)(4,zae,8,10,"div",16)(5,Hae,8,10,"div",16)(6,Kae,10,8,"div",16)(7,Qae,10,7,"div",16)(8,rle,9,6,"div",16),y0(),U()),n&2){let t=e.$implicit,i=Q(3).ngIf,r=Q(2);B(),de("ngSwitch",r.getFieldType(i.schema,t)),B(),de("ngSwitchCase","string"),B(),de("ngSwitchCase","password"),B(),de("ngSwitchCase","number"),B(),de("ngSwitchCase","integer"),B(),de("ngSwitchCase","enum"),B(),de("ngSwitchCase","boolean"),B(),de("ngSwitchCase","array")}}function sle(n,e){n&1&&qt(0,"img",64)}function ale(n,e){if(n&1&&(z(0,"div"),_t(1,sle,1,0,"img",64),U()),n&2){let t=Q(5);B(),vt(t.waitingForResponse?1:-1)}}function lle(n,e){if(n&1){let t=Bt();z(0,"div")(1,"form",8),Me("ngSubmit",function(){Ge(t);let r=Q().ngIf,o=Q(3);return Ze(o.onSubmit(r))}),z(2,"div",9),Xe(3,ole,9,8,"div",10),U(),z(4,"div",11)(5,"button",12),ae(6,"Submit"),U(),z(7,"button",13),Me("click",function(){Ge(t);let r=Q(4);return Ze(r.cancel())}),ae(8,"Cancel"),U()(),Xe(9,ale,2,1,"div",1),U()()}if(n&2){let t=Q().ngIf,i=Q().ngIf,r=Q(2);B(),de("formGroup",t),B(2),de("ngForOf",r.getFieldNames(i.schema)),B(2),de("disabled",r.waitingForResponse),B(4),de("ngIf",r.waitingForResponse)}}function cle(n,e){if(n&1){let t=Bt();z(0,"div",65)(1,"h3"),ae(2,"Confirm Submission"),U(),z(3,"pre"),ae(4),kn(5,"json"),U(),z(6,"div",66)(7,"button",67),Me("click",function(){Ge(t);let r=Q(4);return Ze(r.confirmSubmission(!0))}),ae(8,"Confirm"),U(),z(9,"button",68),Me("click",function(){Ge(t);let r=Q(4);return Ze(r.onEdit())}),ae(10,"Edit"),U(),z(11,"button",68),Me("click",function(){Ge(t);let r=Q(4);return Ze(r.confirmSubmission(!1))}),ae(12,"Cancel"),U()()()}if(n&2){let t=Q(4);B(4),Nt(Yn(5,1,t.maskSensitiveData(t.submittedData)))}}function ule(n,e){if(n&1&&(z(0,"div")(1,"h2"),ae(2),U(),Xe(3,Sae,2,1,"p",1)(4,Tae,5,1,"div",4)(5,lle,10,4,"div",1)(6,cle,13,3,"div",5),U()),n&2){let t=Q(3);B(2),Nt(t.title),B(),de("ngIf",t.currentRequest==null||t.currentRequest.params==null?null:t.currentRequest.params.message),B(),de("ngIf",t.validationErrors.length),B(),de("ngIf",!t.showConfirmation),B(),de("ngIf",t.showConfirmation)}}function dle(n,e){if(n&1&&(z(0,"div",3),Xe(1,ule,7,5,"div",1),kn(2,"async"),U()),n&2){let t=Q(2);B(),de("ngIf",Yn(2,1,t.form$))}}function hle(n,e){if(n&1&&(z(0,"div"),Xe(1,dle,3,3,"div",2),kn(2,"async"),U()),n&2){let t=Q(),i=Pr(2);B(),de("ngIf",Yn(2,2,t.schema$))("ngIfElse",i)}}function fle(n,e){n&1&&(z(0,"div",69)(1,"p"),ae(2,"No active elicitation request"),U()())}var CC=class n{constructor(e,t,i){this.elicitationService=e;this.mcpService=t;this.ngZone=i;this.form$=this.elicitationService.getCurrentForm(),this.schema$=this.elicitationService.getCurrentSchema()}tool=null;form$;schema$;currentRequest;validationErrors=[];showConfirmation=!1;submittedData;formAvailable=!1;waitingForResponse=!1;title="";sendToolResponse=new je;sendToolRequest=new je;subscriptions=[];form=new Cc({});ngOnChanges(e){console.log("UI update: ",e),!this.tool?.name&&this.title!="Elicitation Request"&&(this.formAvailable=!1,this.waitingForResponse=!1)}ngOnInit(){this.subscriptions.push(this.schema$.subscribe(e=>{this.waitingForResponse=!1,this.currentRequest=e?.schema,this.title=e?.title,this.formAvailable=!0})),this.subscriptions.push(this.form$.subscribe(e=>{e&&(this.form=e)}))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}confirmSubmission(e){this.waitingForResponse=!1,e?this.elicitationService.submitResponse({action:"accept",content:this.submittedData}):this.elicitationService.submitResponse({action:"decline"}),this.resetForm(),this.formAvailable=!1}onEdit(){this.showConfirmation=!1,this.formAvailable=!0}cancel(){this.title==="Elicitation Request"?this.elicitationService.submitResponse({action:"cancel"}):(console.log(this.title),this.sendToolResponse.emit({response:""})),this.resetForm(),this.formAvailable=!1}maskSensitiveData(e){if(e.password){let t=e.password,i=t.length>2?t.slice(0,3)+"****":"****";return S(b({},e),{password:i})}return e}onSubmit(e){if(e.invalid){this.validationErrors=this.getFormErrors(e);return}let t=e.value;if(!this.elicitationService.validateAgainstSchema(t,this.currentRequest)){this.validationErrors=["Data does not match the required schema."];return}Object.keys(t).forEach(r=>{(t[r]===null||t[r]===void 0)&&delete t[r]}),this.submittedData=t,this.title==="Tool test"?(this.sendToolRequest.emit({request:JSON.stringify(t)}),this.toolCall(t)):this.showConfirmation=!0}toolCall(e){return E(this,null,function*(){if(this.tool?.name){console.log("Tool name : ",this.tool.name);try{let i={};this.tool?.description=="long running task"?(this.waitingForResponse=!0,i=yield this.mcpService.longRunningTool(this.tool?.name,e),this.waitingForResponse=!1):(this.waitingForResponse=!0,i=yield this.mcpService.longRunningTool(this.tool?.name,e),this.waitingForResponse=!1);try{let r=JSON.parse(i.content[0].text);if(Object.keys(r).includes("layouts")){let t=r,{layouts:s}=t,l=Be(t,["layouts"]);console.log("chek keys : ",Object.keys(l).length,Object.keys(l)),Object.keys(l).length?this.sendToolResponse.emit({response:"```json \n "+JSON.stringify(l,null,2)+"\n```",layouts:r.layouts}):this.sendToolResponse.emit({response:"",layouts:r.layouts})}else this.sendToolResponse.emit({response:i.content[0].text})}catch{this.sendToolResponse.emit({response:i.content[0].text})}this.resetForm(),this.formAvailable=!1}catch(i){this.ngZone.run(()=>{this.validationErrors=["Error occurred while calling the tool. Please try again."],console.log("Sothing went worng : ",i),this.waitingForResponse=!1,this.resetForm(),this.formAvailable=!1})}}else console.log("Tool name not received : ",this.tool?.name)})}getFormErrors(e){let t=[];return Object.keys(e.controls).forEach(i=>{let r=e.get(i)?.errors;r&&Object.keys(r).forEach(o=>{t.push(`${i}: ${this.getErrorMessage(o,r[o])}`)})}),t}getErrorMessage(e,t){switch(e){case"required":return"This field is required";case"minlength":return`Minimum length is ${t.requiredLength}`;case"maxlength":return`Maximum length is ${t.requiredLength}`;case"min":return`Minimum value is ${t.min}`;case"max":return`Maximum value is ${t.max}`;case"email":return"Invalid email format";default:return"Invalid value"}}resetForm(){this.validationErrors=[],this.showConfirmation=!1,this.submittedData=null}getFieldNames(e){return e?Object.keys(e.properties):[]}getFieldType(e,t){if(!e||!e.properties[t])return"string";let i=e.properties[t];return t==="password"?"password":i.enum?"enum":i.type||"string"}getFieldTitle(e,t){return e?.properties[t]?.title||t}getFieldDescription(e,t){return e?.properties[t]?.description||null}getFieldDefault(e,t){return e?.properties[t]?.default}getFieldMin(e,t){return e?.properties[t]?.minimum||null}getFieldMax(e,t){return e?.properties[t]?.maximum||null}getFieldOptions(e,t){return e?.properties[t]?.options||[]}getFieldExamples(e,t){return e?.properties[t]?.examples||""}isFieldRequired(e,t){return e?.required?.includes(t)||!1}isNestedArray(e,t){return e?.properties[t]?.items?.type==="array"}getArrayItemType(e,t){let i=e?.properties[t];return this.isNestedArray(e,t)?i?.items?.items?.type==="integer"?"number":"text":i?.items?.type==="integer"?"number":"text"}getArrayPlaceholder(e,t){return`Enter ${e?.properties[t]?.items?.type||"value"}`}addArrayItem(e){this.form&&this.elicitationService.addArrayItemToForm(this.form,e)}removeArrayItem(e,t){this.form&&this.elicitationService.removeArrayItemFromForm(this.form,e,t)}addNestedArrayItem(e,t){this.form&&this.elicitationService.addNestedArrayItem(this.form,e,t)}removeNestedArrayItem(e,t,i){this.form&&this.elicitationService.removeNestedArrayItem(this.form,e,t,i)}getFormArray(e,t){return this.elicitationService.getFormArray(e,t)}getNestedFormArray(e,t,i){return this.elicitationService.getNestedFormArray(e,t,i)}addNestedArrayRow(e){this.form&&this.elicitationService.addNestedArrayRow(this.form,e)}removeNestedArrayRow(e,t){this.form&&this.elicitationService.removeNestedArrayRow(this.form,e,t)}static \u0275fac=function(t){return new(t||n)(Ce(pa),Ce(qi),Ce(De))};static \u0275cmp=Fe({type:n,selectors:[["app-elicitation"]],inputs:{tool:"tool"},outputs:{sendToolResponse:"sendToolResponse",sendToolRequest:"sendToolRequest"},features:[jn],decls:3,vars:1,consts:[["noRequest",""],[4,"ngIf"],["class","elicitation-container",4,"ngIf","ngIfElse"],[1,"elicitation-container"],["class","alert alert-danger",4,"ngIf"],["class","confirmation-dialog",4,"ngIf"],[1,"alert","alert-danger"],[4,"ngFor","ngForOf"],[1,"form-table",3,"ngSubmit","formGroup"],[1,"form-table-body"],["class","form-row",4,"ngFor","ngForOf"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"form-row"],[3,"ngSwitch"],["class","form-field",4,"ngSwitchCase"],[1,"form-field"],[1,"label-container"],[3,"for"],["class","required",4,"ngIf"],["class","input-container",4,"ngIf"],[1,"required"],[1,"input-container"],["type","text",1,"form-control",3,"id","formControlName","value","placeholder"],["class","form-text text-muted",4,"ngIf"],[1,"form-text","text-muted"],[1,"form-control",3,"id","formControlName"],["value","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["value",""],[3,"value"],["type","password",1,"form-control",3,"id","formControlName","value"],["type","number",1,"form-control",3,"id","formControlName","placeholder","value","min","max"],[1,"checkbox-container"],["type","checkbox",1,"form-checkbox",3,"id","formControlName"],[1,"checkbox-label",3,"for"],[1,"array-container",3,"formArrayName"],["class","simple-array-section",4,"ngIf"],["class","nested-array-section",4,"ngIf"],[1,"simple-array-section"],["class","simple-array-item",4,"ngFor","ngForOf"],[1,"array-actions"],["type","button",1,"btn","btn-success","btn-sm","add-btn",3,"click"],[1,"simple-array-item"],[1,"simple-array-input-group"],["type","text","placeholder","Enter column name",1,"form-control","array-input",3,"formControlName"],["type","button",1,"btn","btn-danger","btn-sm","remove-btn",3,"click","disabled"],[1,"nested-array-section"],[1,"nested-array-header"],["class","nested-array-row",4,"ngFor","ngForOf"],[1,"nested-array-actions"],["type","button",1,"btn","btn-primary","btn-sm","add-row-btn",3,"click"],[1,"nested-array-row"],[1,"row-header"],["type","button",1,"btn","btn-danger","btn-sm","remove-row-btn",3,"click","disabled"],[1,"row-content",3,"formArrayName"],["class","cell-item",4,"ngFor","ngForOf"],[1,"row-actions"],["type","button",1,"btn","btn-success","btn-sm","add-cell-btn",3,"click"],[1,"cell-item"],[1,"cell-input-group"],["type","text",1,"form-control","cell-input",3,"formControlName","placeholder"],["type","button",1,"btn","btn-danger","btn-sm","remove-cell-btn",3,"click","disabled"],["src","gif/Spinner.gif"],[1,"confirmation-dialog"],[1,"confirmation-actions"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-warning",3,"click"],[1,"no-request"]],template:function(t,i){t&1&&Xe(0,hle,3,4,"div",1)(1,fle,3,0,"ng-template",null,0,rl),t&2&&de("ngIf",i.formAvailable)},dependencies:[da,CH,TH,AH,Ec,pP,oP,mx,bf,mH,_P,gP,gx,yf,mP,px,hr,hc,ds,B0,Qk,x8,eA,nA],styles:[`.elicitation-container[_ngcontent-%COMP%]{max-width:700px;margin:0 auto;padding:15px;background:#fff;border-radius:6px;box-shadow:0 2px 4px #0000001a;font-family:Arial,sans-serif;font-size:13px}.elicitation-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:15px;padding-bottom:8px;border-bottom:1px solid #f0f0f0;font-size:18px;font-weight:600}.form-table[_ngcontent-%COMP%]{width:100%;display:table;border-collapse:collapse;margin-bottom:15px}.form-table-body[_ngcontent-%COMP%]{display:table-row-group}.form-row[_ngcontent-%COMP%]{display:table-row;border-bottom:1px solid #f0f0f0}.form-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.form-field[_ngcontent-%COMP%]{display:table-row}.label-container[_ngcontent-%COMP%]{display:table-cell;padding:10px 12px;background-color:#f8f9fa;border-right:1px solid #e9ecef;font-weight:600;color:#495057;width:30%;vertical-align:middle;text-align:right;font-size:12px;white-space:nowrap}.input-container[_ngcontent-%COMP%]{display:table-cell;padding:10px 12px;vertical-align:middle;width:70%}.form-control[_ngcontent-%COMP%]{width:100%;padding:6px 10px;border:1px solid #d1d5db;border-radius:4px;font-size:12px;line-height:1.4;transition:all .15s ease-in-out;background-color:#fff}.form-control[_ngcontent-%COMP%]:focus{border-color:#3b82f6;outline:0;box-shadow:0 0 0 2px #3b82f61a}select.form-control[_ngcontent-%COMP%]{padding:5px 30px 5px 8px;background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");background-position:right 8px center;background-repeat:no-repeat;background-size:16px;-webkit-appearance:none;-moz-appearance:none;appearance:none}.checkbox-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:4px}.form-checkbox[_ngcontent-%COMP%]{width:14px;height:14px;margin:0}.checkbox-label[_ngcontent-%COMP%]{font-weight:400;font-size:12px;margin-bottom:0;color:#495057}.form-text[_ngcontent-%COMP%]{display:block;margin-top:4px;font-size:11px;color:#6b7280;line-height:1.3}.required[_ngcontent-%COMP%]{color:#dc3545;font-weight:700;margin-left:2px}.form-actions[_ngcontent-%COMP%]{display:table-row;background-color:#f8f9fa}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;gap:10px;padding:15px;background-color:#f8f9fa;border-top:2px solid #e9ecef;margin-top:10px}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:0}.btn[_ngcontent-%COMP%]{padding:6px 16px;border:none;border-radius:4px;cursor:pointer;font-size:12px;font-weight:500;transition:all .15s ease-in-out;line-height:1.4}.btn-primary[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#2563eb}.btn-secondary[_ngcontent-%COMP%]{background-color:#6b7280;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#4b5563}.btn-success[_ngcontent-%COMP%]{background-color:#10b981;color:#fff}.btn-success[_ngcontent-%COMP%]:hover{background-color:#059669}.btn-warning[_ngcontent-%COMP%]{background-color:#f59e0b;color:#1f2937}.btn-warning[_ngcontent-%COMP%]:hover{background-color:#d97706}.confirmation-dialog[_ngcontent-%COMP%]{margin-top:15px;padding:15px;background:#fff;border-radius:6px;border:1px solid #e9ecef;box-shadow:0 1px 3px #0000001a}.confirmation-dialog[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin-bottom:12px;font-size:16px}.confirmation-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:8px;margin-top:15px}.alert[_ngcontent-%COMP%]{padding:12px 15px;margin-bottom:15px;border-radius:4px;border:1px solid transparent;font-size:12px}.alert-danger[_ngcontent-%COMP%]{background-color:#fef2f2;border-color:#fecaca;color:#dc2626}.alert-danger[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;margin-bottom:8px;font-size:14px}.alert-danger[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-bottom:0;padding-left:16px}.alert-danger[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:2px}.no-request[_ngcontent-%COMP%]{text-align:center;padding:30px;color:#6b7280;font-size:13px}pre[_ngcontent-%COMP%]{background:#f8f9fa;padding:12px;border-radius:4px;overflow-x:auto;font-size:11px;line-height:1.3;border:1px solid #e9ecef}input[type=number][_ngcontent-%COMP%]{text-align:right;width:150px}input[type=checkbox][_ngcontent-%COMP%]{transform:scale(.9)}@media (min-width: 1200px){.elicitation-container[_ngcontent-%COMP%]{max-width:800px;padding:20px}.label-container[_ngcontent-%COMP%]{width:35%;padding:8px 15px}.input-container[_ngcontent-%COMP%]{width:65%;padding:8px 15px}.form-control[_ngcontent-%COMP%]{max-width:400px}}@media (max-width: 768px){.elicitation-container[_ngcontent-%COMP%]{padding:10px;margin:5px;font-size:14px}.form-table[_ngcontent-%COMP%], .form-table-body[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%], .form-field[_ngcontent-%COMP%]{display:block}.label-container[_ngcontent-%COMP%], .input-container[_ngcontent-%COMP%]{display:block;width:100%;text-align:left;padding:8px 0}.label-container[_ngcontent-%COMP%]{border-right:none;border-bottom:none;margin-bottom:4px;background:none;font-weight:600;padding-bottom:4px}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.btn[_ngcontent-%COMP%]{padding:8px 20px;font-size:14px;width:100%}.form-row[_ngcontent-%COMP%]{border-bottom:1px solid #e9ecef;padding-bottom:12px;margin-bottom:12px}}.form-control[_ngcontent-%COMP%]:focus-visible{outline:2px solid #3b82f6;outline-offset:1px}.btn[_ngcontent-%COMP%]:focus-visible{outline:2px solid #3b82f6;outline-offset:2px}.array-container[_ngcontent-%COMP%]{margin-bottom:10px}.array-item[_ngcontent-%COMP%]{margin-bottom:8px}.array-item-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.nested-array-container[_ngcontent-%COMP%]{border-left:2px solid #ddd;padding-left:10px;margin-bottom:8px}.nested-array-item[_ngcontent-%COMP%]{margin-bottom:5px}.nested-input-group[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.nested-array-input[_ngcontent-%COMP%]{flex:1}.array-actions[_ngcontent-%COMP%]{margin-top:8px}.add-btn[_ngcontent-%COMP%], .remove-btn[_ngcontent-%COMP%], .add-nested-btn[_ngcontent-%COMP%], .remove-nested-btn[_ngcontent-%COMP%]{min-width:40px}.remove-btn[_ngcontent-%COMP%], .remove-nested-btn[_ngcontent-%COMP%]{background-color:#dc3545;border-color:#dc3545}.add-btn[_ngcontent-%COMP%], .add-nested-btn[_ngcontent-%COMP%]{background-color:#28a745;border-color:#28a745}.nested-array-section[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:4px;padding:15px;background-color:#f9f9f9}.nested-array-header[_ngcontent-%COMP%]{margin-bottom:15px;padding-bottom:10px;border-bottom:1px solid #eee}.nested-array-row[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:4px;padding:10px;margin-bottom:10px;background-color:#fff}.row-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;padding-bottom:5px;border-bottom:1px solid #eee}.row-content[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;align-items:center}.cell-item[_ngcontent-%COMP%]{display:flex;align-items:center}.cell-input-group[_ngcontent-%COMP%]{display:flex;gap:5px;align-items:center}.cell-input[_ngcontent-%COMP%]{width:120px}.row-actions[_ngcontent-%COMP%]{margin-top:10px}.nested-array-actions[_ngcontent-%COMP%]{margin-top:15px}.simple-array-section[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#f9f9f9}.simple-array-item[_ngcontent-%COMP%]{margin-bottom:8px}.simple-array-input-group[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.array-input[_ngcontent-%COMP%]{flex:1}.array-actions[_ngcontent-%COMP%]{margin-top:10px}.remove-btn[_ngcontent-%COMP%], .remove-cell-btn[_ngcontent-%COMP%], .remove-row-btn[_ngcontent-%COMP%]{min-width:40px}.add-btn[_ngcontent-%COMP%], .add-cell-btn[_ngcontent-%COMP%], .add-row-btn[_ngcontent-%COMP%]{margin-right:5px}`]})};function He(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t}function Z(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)}var aO=function(){let{crypto:n}=globalThis;if(n?.randomUUID)return aO=n.randomUUID.bind(n),n.randomUUID();let e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};function T_(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}var k_=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){let e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};var Oe=class extends Error{},Oi=class n extends Oe{constructor(e,t,i,r){super(`${n.makeMessage(e,t,i)}`),this.status=e,this.headers=r,this.requestID=r?.get("x-request-id"),this.error=t;let o=t;this.code=o?.code,this.param=o?.param,this.type=o?.type}static makeMessage(e,t,i){let r=t?.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,i,r){if(!e||!r)return new Rc({message:i,cause:k_(t)});let o=t?.error;return e===400?new zf(e,o,i,r):e===401?new $f(e,o,i,r):e===403?new Uf(e,o,i,r):e===404?new Hf(e,o,i,r):e===409?new qf(e,o,i,r):e===422?new Wf(e,o,i,r):e===429?new Gf(e,o,i,r):e>=500?new Zf(e,o,i,r):new n(e,o,i,r)}},ti=class extends Oi{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},Rc=class extends Oi{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}},ma=class extends Rc{constructor({message:e}={}){super({message:e??"Request timed out."})}},zf=class extends Oi{},$f=class extends Oi{},Uf=class extends Oi{},Hf=class extends Oi{},qf=class extends Oi{},Wf=class extends Oi{},Gf=class extends Oi{},Zf=class extends Oi{},Kf=class extends Oe{constructor(){super("Could not parse response content as the length limit was reached")}},Yf=class extends Oe{constructor(){super("Could not parse response content as the request was rejected by the content filter")}},ga=class extends Error{constructor(e){super(e)}};var mle=/^[a-z][a-z0-9+.-]*:/i,C8=n=>mle.test(n),pr=n=>(pr=Array.isArray,pr(n)),lO=pr;function E8(n){return typeof n!="object"?{}:n??{}}function I8(n){if(!n)return!0;for(let e in n)return!1;return!0}function S8(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function A_(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}var D8=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Oe(`${n} must be an integer`);if(e<0)throw new Oe(`${n} must be a positive integer`);return e};var T8=n=>{try{return JSON.parse(n)}catch{return}};var _a=n=>new Promise(e=>setTimeout(e,n));var Nc="5.10.1";var P8=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function gle(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}var _le=()=>{let n=gle();if(n==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nc,"X-Stainless-OS":A8(Deno.build.os),"X-Stainless-Arch":k8(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(n==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nc,"X-Stainless-OS":A8(globalThis.process.platform??"unknown"),"X-Stainless-Arch":k8(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};let e=vle();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function vle(){if(typeof navigator>"u"||!navigator)return null;let n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:t}of n){let i=t.exec(navigator.userAgent);if(i){let r=i[1]||0,o=i[2]||0,s=i[3]||0;return{browser:e,version:`${r}.${o}.${s}`}}}return null}var k8=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",A8=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown"),M8,O8=()=>M8??(M8=_le());function R8(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function cO(...n){let e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function EC(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return cO({start(){},pull(i){return E(this,null,function*(){let{done:r,value:o}=yield e.next();r?i.close():i.enqueue(o)})},cancel(){return E(this,null,function*(){yield e.return?.()})}})}function uO(n){if(n[Symbol.asyncIterator])return n;let e=n.getReader();return{next(){return E(this,null,function*(){try{let i=yield e.read();return i?.done&&e.releaseLock(),i}catch(i){throw e.releaseLock(),i}})},return(){return E(this,null,function*(){let i=e.cancel();return e.releaseLock(),yield i,{done:!0,value:void 0}})},[Symbol.asyncIterator](){return this}}}function N8(n){return E(this,null,function*(){if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){yield n[Symbol.asyncIterator]().return?.();return}let e=n.getReader(),t=e.cancel();e.releaseLock(),yield t})}var F8=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});var IC="RFC3986",dO=n=>String(n),SC={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:dO},hO="RFC1738";var DC=(n,e)=>(DC=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),DC(n,e)),va=(()=>{let n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})();var fO=1024,L8=(n,e,t,i,r)=>{if(n.length===0)return n;let o=n;if(typeof n=="symbol"?o=Symbol.prototype.toString.call(n):typeof n!="string"&&(o=String(n)),t==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(l){return"%26%23"+parseInt(l.slice(2),16)+"%3B"});let s="";for(let l=0;l<o.length;l+=fO){let c=o.length>=fO?o.slice(l,l+fO):o,d=[];for(let f=0;f<c.length;++f){let p=c.charCodeAt(f);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||r===hO&&(p===40||p===41)){d[d.length]=c.charAt(f);continue}if(p<128){d[d.length]=va[p];continue}if(p<2048){d[d.length]=va[192|p>>6]+va[128|p&63];continue}if(p<55296||p>=57344){d[d.length]=va[224|p>>12]+va[128|p>>6&63]+va[128|p&63];continue}f+=1,p=65536+((p&1023)<<10|c.charCodeAt(f)&1023),d[d.length]=va[240|p>>18]+va[128|p>>12&63]+va[128|p>>6&63]+va[128|p&63]}s+=d.join("")}return s};function j8(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function pO(n,e){if(pr(n)){let t=[];for(let i=0;i<n.length;i+=1)t.push(e(n[i]));return t}return e(n)}var V8={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},z8=function(n,e){Array.prototype.push.apply(n,pr(e)?e:[e])},B8,Ri={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:L8,encodeValuesOnly:!1,format:IC,formatter:dO,indices:!1,serializeDate(n){return(B8??(B8=Function.prototype.call.bind(Date.prototype.toISOString)))(n)},skipNulls:!1,strictNullHandling:!1};function wle(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}var mO={};function $8(n,e,t,i,r,o,s,l,c,d,f,p,g,m,_,y,w,I){let k=n,O=I,j=0,q=!1;for(;(O=O.get(mO))!==void 0&&!q;){let se=O.get(n);if(j+=1,typeof se<"u"){if(se===j)throw new RangeError("Cyclic object value");q=!0}typeof O.get(mO)>"u"&&(j=0)}if(typeof d=="function"?k=d(e,k):k instanceof Date?k=g?.(k):t==="comma"&&pr(k)&&(k=pO(k,function(se){return se instanceof Date?g?.(se):se})),k===null){if(o)return c&&!y?c(e,Ri.encoder,w,"key",m):e;k=""}if(wle(k)||j8(k)){if(c){let se=y?e:c(e,Ri.encoder,w,"key",m);return[_?.(se)+"="+_?.(c(k,Ri.encoder,w,"value",m))]}return[_?.(e)+"="+_?.(String(k))]}let V=[];if(typeof k>"u")return V;let re;if(t==="comma"&&pr(k))y&&c&&(k=pO(k,c)),re=[{value:k.length>0?k.join(",")||null:void 0}];else if(pr(d))re=d;else{let se=Object.keys(k);re=f?se.sort(f):se}let P=l?String(e).replace(/\./g,"%2E"):String(e),X=i&&pr(k)&&k.length===1?P+"[]":P;if(r&&pr(k)&&k.length===0)return X+"[]";for(let se=0;se<re.length;++se){let ue=re[se],me=typeof ue=="object"&&typeof ue.value<"u"?ue.value:k[ue];if(s&&me===null)continue;let G=p&&l?ue.replace(/\./g,"%2E"):ue,Y=pr(k)?typeof t=="function"?t(X,G):X:X+(p?"."+G:"["+G+"]");I.set(n,j);let ne=new WeakMap;ne.set(mO,I),z8(V,$8(me,Y,t,i,r,o,s,l,t==="comma"&&y&&pr(k)?null:c,d,f,p,g,m,_,y,w,ne))}return V}function xle(n=Ri){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");let e=n.charset||Ri.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=IC;if(typeof n.format<"u"){if(!DC(SC,n.format))throw new TypeError("Unknown format option provided.");t=n.format}let i=SC[t],r=Ri.filter;(typeof n.filter=="function"||pr(n.filter))&&(r=n.filter);let o;if(n.arrayFormat&&n.arrayFormat in V8?o=n.arrayFormat:"indices"in n?o=n.indices?"indices":"repeat":o=Ri.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");let s=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:Ri.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:Ri.addQueryPrefix,allowDots:s,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:Ri.allowEmptyArrays,arrayFormat:o,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:Ri.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?Ri.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:Ri.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:Ri.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:Ri.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:Ri.encodeValuesOnly,filter:r,format:t,formatter:i,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:Ri.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:Ri.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:Ri.strictNullHandling}}function gO(n,e={}){let t=n,i=xle(e),r,o;typeof i.filter=="function"?(o=i.filter,t=o("",t)):pr(i.filter)&&(o=i.filter,r=o);let s=[];if(typeof t!="object"||t===null)return"";let l=V8[i.arrayFormat],c=l==="comma"&&i.commaRoundTrip;r||(r=Object.keys(t)),i.sort&&r.sort(i.sort);let d=new WeakMap;for(let g=0;g<r.length;++g){let m=r[g];i.skipNulls&&t[m]===null||z8(s,$8(t[m],m,l,c,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,d))}let f=s.join(i.delimiter),p=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),f.length>0?p+f:""}function q8(n){let e=0;for(let r of n)e+=r.length;let t=new Uint8Array(e),i=0;for(let r of n)t.set(r,i),i+=r.length;return t}var U8;function Qf(n){let e;return(U8??(e=new globalThis.TextEncoder,U8=e.encode.bind(e)))(n)}var H8;function _O(n){let e;return(H8??(e=new globalThis.TextDecoder,H8=e.decode.bind(e)))(n)}var yo,wo,nd=class{constructor(){yo.set(this,void 0),wo.set(this,void 0),He(this,yo,new Uint8Array,"f"),He(this,wo,null,"f")}decode(e){if(e==null)return[];let t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Qf(e):e;He(this,yo,q8([Z(this,yo,"f"),t]),"f");let i=[],r;for(;(r=Ele(Z(this,yo,"f"),Z(this,wo,"f")))!=null;){if(r.carriage&&Z(this,wo,"f")==null){He(this,wo,r.index,"f");continue}if(Z(this,wo,"f")!=null&&(r.index!==Z(this,wo,"f")+1||r.carriage)){i.push(_O(Z(this,yo,"f").subarray(0,Z(this,wo,"f")-1))),He(this,yo,Z(this,yo,"f").subarray(Z(this,wo,"f")),"f"),He(this,wo,null,"f");continue}let o=Z(this,wo,"f")!==null?r.preceding-1:r.preceding,s=_O(Z(this,yo,"f").subarray(0,o));i.push(s),He(this,yo,Z(this,yo,"f").subarray(r.index),"f"),He(this,wo,null,"f")}return i}flush(){return Z(this,yo,"f").length?this.decode(`
`):[]}};yo=new WeakMap,wo=new WeakMap;nd.NEWLINE_CHARS=new Set([`
`,"\r"]);nd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Ele(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function W8(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}var kC={off:0,error:200,warn:300,info:400,debug:500},vO=(n,e,t)=>{if(n){if(S8(kC,n))return n;ci(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(kC))}`)}};function M_(){}function TC(n,e,t){return!e||kC[n]>kC[t]?M_:e[n].bind(e)}var Ile={error:M_,warn:M_,info:M_,debug:M_},G8=new WeakMap;function ci(n){let e=n.logger,t=n.logLevel??"off";if(!e)return Ile;let i=G8.get(e);if(i&&i[0]===t)return i[1];let r={error:TC("error",e,t),warn:TC("warn",e,t),info:TC("info",e,t),debug:TC("debug",e,t)};return G8.set(e,[t,r]),r}var gl=n=>(n.options&&(n.options=b({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);var P_,ba=class n{constructor(e,t,i){this.iterator=e,P_.set(this,void 0),this.controller=t,He(this,P_,i,"f")}static fromSSEResponse(e,t,i){let r=!1,o=i?ci(i):console;function s(){return yt(this,null,function*(){if(r)throw new Oe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let l=!1;try{try{for(var c=ze(Sle(e,t)),d,f,p;d=!(f=yield new ge(c.next())).done;d=!1){let g=f.value;if(!l){if(g.data.startsWith("[DONE]")){l=!0;continue}if(g.event===null||g.event.startsWith("response.")||g.event.startsWith("image_edit.")||g.event.startsWith("image_generation.")||g.event.startsWith("transcript.")){let m;try{m=JSON.parse(g.data)}catch(_){throw o.error("Could not parse message into JSON:",g.data),o.error("From chunk:",g.raw),_}if(m&&m.error)throw new Oi(void 0,m.error,void 0,e.headers);yield m}else{let m;try{m=JSON.parse(g.data)}catch(_){throw console.error("Could not parse message into JSON:",g.data),console.error("From chunk:",g.raw),_}if(g.event=="error")throw new Oi(void 0,m.error,m.message,void 0);yield{event:g.event,data:m}}}}}catch{p=[f]}finally{try{d&&(f=c.return)&&(yield new ge(f.call(c)))}finally{if(p)throw p[0]}}l=!0}catch(g){if(T_(g))return;throw g}finally{l||t.abort()}})}return new n(s,t,i)}static fromReadableStream(e,t,i){let r=!1;function o(){return yt(this,null,function*(){let l=new nd,c=uO(e);try{for(var d=ze(c),f,p,g;f=!(p=yield new ge(d.next())).done;f=!1){let m=p.value;for(let _ of l.decode(m))yield _}}catch{g=[p]}finally{try{f&&(p=d.return)&&(yield new ge(p.call(d)))}finally{if(g)throw g[0]}}for(let m of l.flush())yield m})}function s(){return yt(this,null,function*(){if(r)throw new Oe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let l=!1;try{try{for(var c=ze(o()),d,f,p;d=!(f=yield new ge(c.next())).done;d=!1){let g=f.value;l||g&&(yield JSON.parse(g))}}catch{p=[f]}finally{try{d&&(f=c.return)&&(yield new ge(f.call(c)))}finally{if(p)throw p[0]}}l=!0}catch(g){if(T_(g))return;throw g}finally{l||t.abort()}})}return new n(s,t,i)}[(P_=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){let e=[],t=[],i=this.iterator(),r=o=>({next:()=>{if(o.length===0){let s=i.next();e.push(s),t.push(s)}return o.shift()}});return[new n(()=>r(e),this.controller,Z(this,P_,"f")),new n(()=>r(t),this.controller,Z(this,P_,"f"))]}toReadableStream(){let e=this,t;return cO({start(){return E(this,null,function*(){t=e[Symbol.asyncIterator]()})},pull(r){return E(this,null,function*(){try{let{value:o,done:s}=yield t.next();if(s)return r.close();let l=Qf(JSON.stringify(o)+`
`);r.enqueue(l)}catch(o){r.error(o)}})},cancel(){return E(this,null,function*(){yield t.return?.()})}})}};function Sle(n,e){return yt(this,null,function*(){if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Oe("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Oe("Attempted to iterate over a response with no body");let t=new bO,i=new nd,r=uO(n.body);try{for(var o=ze(Dle(r)),s,l,c;s=!(l=yield new ge(o.next())).done;s=!1){let d=l.value;for(let f of i.decode(d)){let p=t.decode(f);p&&(yield p)}}}catch{c=[l]}finally{try{s&&(l=o.return)&&(yield new ge(l.call(o)))}finally{if(c)throw c[0]}}for(let d of i.flush()){let f=t.decode(d);f&&(yield f)}})}function Dle(n){return yt(this,null,function*(){let e=new Uint8Array;try{for(var t=ze(n),i,r,o;i=!(r=yield new ge(t.next())).done;i=!1){let s=r.value;if(s==null)continue;let l=s instanceof ArrayBuffer?new Uint8Array(s):typeof s=="string"?Qf(s):s,c=new Uint8Array(e.length+l.length);c.set(e),c.set(l,e.length),e=c;let d;for(;(d=W8(e))!==-1;)yield e.slice(0,d),e=e.slice(d)}}catch{o=[r]}finally{try{i&&(r=t.return)&&(yield new ge(r.call(t)))}finally{if(o)throw o[0]}}e.length>0&&(yield e)})}var bO=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,r]=Tle(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}};function Tle(n,e){let t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}function AC(n,e){return E(this,null,function*(){let{response:t,requestLogID:i,retryOfRequestLogID:r,startTime:o}=e,s=yield E(null,null,function*(){if(e.options.stream)return ci(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):ba.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;let c=t.headers.get("content-type")?.split(";")[0]?.trim();if(c?.includes("application/json")||c?.endsWith("+json")){let p=yield t.json();return yO(p,t)}return yield t.text()});return ci(n).debug(`[${i}] response parsed`,gl({retryOfRequestLogID:r,url:t.url,status:t.status,body:s,durationMs:Date.now()-o})),s})}function yO(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var O_,id=class n extends Promise{constructor(e,t,i=AC){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=i,O_.set(this,void 0),He(this,O_,e,"f")}_thenUnwrap(e){return new n(Z(this,O_,"f"),this.responsePromise,(t,i)=>E(this,null,function*(){return yO(e(yield this.parseResponse(t,i),i),i.response)}))}asResponse(){return this.responsePromise.then(e=>e.response)}withResponse(){return E(this,null,function*(){let[e,t]=yield Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}})}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(Z(this,O_,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};O_=new WeakMap;var MC,PC=class{constructor(e,t,i,r){MC.set(this,void 0),He(this,MC,e,"f"),this.options=r,this.response=t,this.body=i}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}getNextPage(){return E(this,null,function*(){let e=this.nextPageRequestOptions();if(!e)throw new Oe("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return yield Z(this,MC,"f").requestAPIList(this.constructor,e)})}iterPages(){return yt(this,null,function*(){let e=this;for(yield e;e.hasNextPage();)e=yield new ge(e.getNextPage()),yield e})}[(MC=new WeakMap,Symbol.asyncIterator)](){return yt(this,null,function*(){try{for(var e=ze(this.iterPages()),t,i,r;t=!(i=yield new ge(e.next())).done;t=!1){let o=i.value;for(let s of o.getPaginatedItems())yield s}}catch{r=[i]}finally{try{t&&(i=e.return)&&(yield new ge(i.call(e)))}finally{if(r)throw r[0]}}})}},R_=class extends id{constructor(e,t,i){super(e,t,(r,o)=>E(null,null,function*(){return new i(r,o.response,yield AC(r,o),o.options)}))}[Symbol.asyncIterator](){return yt(this,null,function*(){let e=yield new ge(this);try{for(var t=ze(e),i,r,o;i=!(r=yield new ge(t.next())).done;i=!1){let s=r.value;yield s}}catch{o=[r]}finally{try{i&&(r=t.return)&&(yield new ge(r.call(t)))}finally{if(o)throw o[0]}}})}},ya=class extends PC{constructor(e,t,i,r){super(e,t,i,r),this.data=i.data||[],this.object=i.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}},At=class extends PC{constructor(e,t,i,r){super(e,t,i,r),this.data=i.data||[],this.has_more=i.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){let e=this.getPaginatedItems(),t=e[e.length-1]?.id;return t?S(b({},this.options),{query:S(b({},E8(this.options.query)),{after:t})}):null}};var xO=()=>{if(typeof File>"u"){let{process:n}=globalThis,e=typeof n?.versions?.node=="string"&&parseInt(n.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Xf(n,e,t){return xO(),new File(n,e??"unknown_file",t)}function N_(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}var CO=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";var xo=(n,e)=>E(null,null,function*(){return S(b({},n),{body:yield Mle(n.body,e)})}),Z8=new WeakMap;function Ale(n){let e=typeof n=="function"?n:n.fetch,t=Z8.get(e);if(t)return t;let i=E(null,null,function*(){try{let r="Response"in e?e.Response:(yield e("data:,")).constructor,o=new FormData;return o.toString()!==(yield new r(o).text())}catch{return!0}});return Z8.set(e,i),i}var Mle=(n,e)=>E(null,null,function*(){if(!(yield Ale(e)))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");let t=new FormData;return yield Promise.all(Object.entries(n||{}).map(([i,r])=>wO(t,i,r))),t}),Ple=n=>n instanceof Blob&&"name"in n;var wO=(n,e,t)=>E(null,null,function*(){if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")n.append(e,String(t));else if(t instanceof Response)n.append(e,Xf([yield t.blob()],N_(t)));else if(CO(t))n.append(e,Xf([yield new Response(EC(t)).blob()],N_(t)));else if(Ple(t))n.append(e,t,N_(t));else if(Array.isArray(t))yield Promise.all(t.map(i=>wO(n,e+"[]",i)));else if(typeof t=="object")yield Promise.all(Object.entries(t).map(([i,r])=>wO(n,`${e}[${i}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}});var K8=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",Ole=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&K8(n),Rle=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";function F_(n,e,t){return E(this,null,function*(){if(xO(),n=yield n,Ole(n))return n instanceof File?n:Xf([yield n.arrayBuffer()],n.name);if(Rle(n)){let r=yield n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Xf(yield EO(r),e,t)}let i=yield EO(n);if(e||(e=N_(n)),!t?.type){let r=i.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof r=="string"&&(t=S(b({},t),{type:r}))}return Xf(i,e,t)})}function EO(n){return E(this,null,function*(){let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(K8(n))e.push(n instanceof Blob?n:yield n.arrayBuffer());else if(CO(n))try{for(var t=ze(n),i,r,o;i=!(r=yield t.next()).done;i=!1){let s=r.value;e.push(...yield EO(s))}}catch{o=[r]}finally{try{i&&(r=t.return)&&(yield r.call(t))}finally{if(o)throw o[0]}}else{let s=n?.constructor?.name;throw new Error(`Unexpected data type: ${typeof n}${s?`; constructor: ${s}`:""}${Nle(n)}`)}return e})}function Nle(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}var _e=class{constructor(e){this._client=e}};function Q8(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}var Y8=Object.freeze(Object.create(null)),Lle=(n=Q8)=>function(t,...i){if(t.length===1)return t[0];let r=!1,o=[],s=t.reduce((f,p,g)=>{/[?#]/.test(p)&&(r=!0);let m=i[g],_=(r?encodeURIComponent:n)(""+m);return g!==i.length&&(m==null||typeof m=="object"&&m.toString===Object.getPrototypeOf(Object.getPrototypeOf(m.hasOwnProperty??Y8)??Y8)?.toString)&&(_=m+"",o.push({start:f.length+p.length,length:_.length,error:`Value of type ${Object.prototype.toString.call(m).slice(8,-1)} is not a valid path parameter`})),f+p+(g===i.length?"":_)},""),l=s.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi"),d;for(;(d=c.exec(l))!==null;)o.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(o.sort((f,p)=>f.start-p.start),o.length>0){let f=0,p=o.reduce((g,m)=>{let _=" ".repeat(m.start-f),y="^".repeat(m.length);return f=m.start+m.length,g+_+y},"");throw new Oe(`Path parameters result in path with invalid segments:
${o.map(g=>g.error).join(`
`)}
${s}
${p}`)}return s},pe=Lle(Q8);var rd=class extends _e{list(e,t={},i){return this._client.getAPIList(pe`/chat/completions/${e}/messages`,At,b({query:t},i))}};function X8(n){return typeof n.parse=="function"}var Jf=n=>n?.role==="assistant",IO=n=>n?.role==="tool";var SO,OC,RC,L_,j_,NC,B_,_l,V_,FC,LC,ep,J8,Fc=class{constructor(){SO.add(this),this.controller=new AbortController,OC.set(this,void 0),RC.set(this,()=>{}),L_.set(this,()=>{}),j_.set(this,void 0),NC.set(this,()=>{}),B_.set(this,()=>{}),_l.set(this,{}),V_.set(this,!1),FC.set(this,!1),LC.set(this,!1),ep.set(this,!1),He(this,OC,new Promise((e,t)=>{He(this,RC,e,"f"),He(this,L_,t,"f")}),"f"),He(this,j_,new Promise((e,t)=>{He(this,NC,e,"f"),He(this,B_,t,"f")}),"f"),Z(this,OC,"f").catch(()=>{}),Z(this,j_,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Z(this,SO,"m",J8).bind(this))},0)}_connected(){this.ended||(Z(this,RC,"f").call(this),this._emit("connect"))}get ended(){return Z(this,V_,"f")}get errored(){return Z(this,FC,"f")}get aborted(){return Z(this,LC,"f")}abort(){this.controller.abort()}on(e,t){return(Z(this,_l,"f")[e]||(Z(this,_l,"f")[e]=[])).push({listener:t}),this}off(e,t){let i=Z(this,_l,"f")[e];if(!i)return this;let r=i.findIndex(o=>o.listener===t);return r>=0&&i.splice(r,1),this}once(e,t){return(Z(this,_l,"f")[e]||(Z(this,_l,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,i)=>{He(this,ep,!0,"f"),e!=="error"&&this.once("error",i),this.once(e,t)})}done(){return E(this,null,function*(){He(this,ep,!0,"f"),yield Z(this,j_,"f")})}_emit(e,...t){if(Z(this,V_,"f"))return;e==="end"&&(He(this,V_,!0,"f"),Z(this,NC,"f").call(this));let i=Z(this,_l,"f")[e];if(i&&(Z(this,_l,"f")[e]=i.filter(r=>!r.once),i.forEach(({listener:r})=>r(...t))),e==="abort"){let r=t[0];!Z(this,ep,"f")&&!i?.length&&Promise.reject(r),Z(this,L_,"f").call(this,r),Z(this,B_,"f").call(this,r),this._emit("end");return}if(e==="error"){let r=t[0];!Z(this,ep,"f")&&!i?.length&&Promise.reject(r),Z(this,L_,"f").call(this,r),Z(this,B_,"f").call(this,r),this._emit("end")}}_emitFinal(){}};OC=new WeakMap,RC=new WeakMap,L_=new WeakMap,j_=new WeakMap,NC=new WeakMap,B_=new WeakMap,_l=new WeakMap,V_=new WeakMap,FC=new WeakMap,LC=new WeakMap,ep=new WeakMap,SO=new WeakSet,J8=function(e){if(He(this,FC,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new ti),e instanceof ti)return He(this,LC,!0,"f"),this._emit("abort",e);if(e instanceof Oe)return this._emit("error",e);if(e instanceof Error){let t=new Oe(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new Oe(String(e)))};function e5(n,e){let t=b({},n);return Object.defineProperties(t,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),t}function z_(n){return n?.$brand==="auto-parseable-response-format"}function od(n){return n?.$brand==="auto-parseable-tool"}function t5(n,e){return!e||!DO(e)?S(b({},n),{choices:n.choices.map(t=>S(b({},t),{message:b(S(b({},t.message),{parsed:null}),t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0)}))}):$_(n,e)}function $_(n,e){let t=n.choices.map(i=>{if(i.finish_reason==="length")throw new Kf;if(i.finish_reason==="content_filter")throw new Yf;return S(b({},i),{message:S(b(b({},i.message),i.message.tool_calls?{tool_calls:i.message.tool_calls?.map(r=>zle(e,r))??void 0}:void 0),{parsed:i.message.content&&!i.message.refusal?Vle(e,i.message.content):null})})});return S(b({},n),{choices:t})}function Vle(n,e){return n.response_format?.type!=="json_schema"?null:n.response_format?.type==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function zle(n,e){let t=n.tools?.find(i=>i.function?.name===e.function.name);return S(b({},e),{function:S(b({},e.function),{parsed_arguments:od(t)?t.$parseRaw(e.function.arguments):t?.function.strict?JSON.parse(e.function.arguments):null})})}function n5(n,e){if(!n)return!1;let t=n.tools?.find(i=>i.function?.name===e.function.name);return od(t)||t?.function.strict||!1}function DO(n){return z_(n.response_format)?!0:n.tools?.some(e=>od(e)||e.type==="function"&&e.function.strict===!0)??!1}function i5(n){for(let e of n??[]){if(e.type!=="function")throw new Oe(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Oe(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Br,TO,jC,kO,AO,MO,r5,o5,$le=10,tp=class extends Fc{constructor(){super(...arguments),Br.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);let t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),IO(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Jf(e)&&e.tool_calls)for(let i of e.tool_calls)i.type==="function"&&this._emit("functionToolCall",i.function)}}finalChatCompletion(){return E(this,null,function*(){yield this.done();let e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Oe("stream ended without producing a ChatCompletion");return e})}finalContent(){return E(this,null,function*(){return yield this.done(),Z(this,Br,"m",TO).call(this)})}finalMessage(){return E(this,null,function*(){return yield this.done(),Z(this,Br,"m",jC).call(this)})}finalFunctionToolCall(){return E(this,null,function*(){return yield this.done(),Z(this,Br,"m",kO).call(this)})}finalFunctionToolCallResult(){return E(this,null,function*(){return yield this.done(),Z(this,Br,"m",AO).call(this)})}totalUsage(){return E(this,null,function*(){return yield this.done(),Z(this,Br,"m",MO).call(this)})}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){let e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);let t=Z(this,Br,"m",jC).call(this);t&&this._emit("finalMessage",t);let i=Z(this,Br,"m",TO).call(this);i&&this._emit("finalContent",i);let r=Z(this,Br,"m",kO).call(this);r&&this._emit("finalFunctionToolCall",r);let o=Z(this,Br,"m",AO).call(this);o!=null&&this._emit("finalFunctionToolCallResult",o),this._chatCompletions.some(s=>s.usage)&&this._emit("totalUsage",Z(this,Br,"m",MO).call(this))}_createChatCompletion(e,t,i){return E(this,null,function*(){let r=i?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Z(this,Br,"m",r5).call(this,t);let o=yield e.chat.completions.create(S(b({},t),{stream:!1}),S(b({},i),{signal:this.controller.signal}));return this._connected(),this._addChatCompletion($_(o,t))})}_runChatCompletion(e,t,i){return E(this,null,function*(){for(let r of t.messages)this._addMessage(r,!1);return yield this._createChatCompletion(e,t,i)})}_runTools(e,t,i){return E(this,null,function*(){let r="tool",m=t,{tool_choice:o="auto",stream:s}=m,l=Be(m,["tool_choice","stream"]),c=typeof o!="string"&&o?.function?.name,{maxChatCompletions:d=$le}=i||{},f=t.tools.map(_=>{if(od(_)){if(!_.$callback)throw new Oe("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:_.$callback,name:_.function.name,description:_.function.description||"",parameters:_.function.parameters,parse:_.$parseRaw,strict:!0}}}return _}),p={};for(let _ of f)_.type==="function"&&(p[_.function.name||_.function.function.name]=_.function);let g="tools"in t?f.map(_=>_.type==="function"?{type:"function",function:{name:_.function.name||_.function.function.name,parameters:_.function.parameters,description:_.function.description,strict:_.function.strict}}:_):void 0;for(let _ of t.messages)this._addMessage(_,!1);for(let _=0;_<d;++_){let w=(yield this._createChatCompletion(e,S(b({},l),{tool_choice:o,tools:g,messages:[...this.messages]}),i)).choices[0]?.message;if(!w)throw new Oe("missing message in ChatCompletion response");if(!w.tool_calls?.length)return;for(let I of w.tool_calls){if(I.type!=="function")continue;let k=I.id,{name:O,arguments:j}=I.function,q=p[O];if(q){if(c&&c!==O){let X=`Invalid tool_call: ${JSON.stringify(O)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:r,tool_call_id:k,content:X});continue}}else{let X=`Invalid tool_call: ${JSON.stringify(O)}. Available options are: ${Object.keys(p).map(se=>JSON.stringify(se)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:k,content:X});continue}let V;try{V=X8(q)?yield q.parse(j):j}catch(X){let se=X instanceof Error?X.message:String(X);this._addMessage({role:r,tool_call_id:k,content:se});continue}let re=yield q.function(V,this),P=Z(this,Br,"m",o5).call(this,re);if(this._addMessage({role:r,tool_call_id:k,content:P}),c)return}}})}};Br=new WeakSet,TO=function(){return Z(this,Br,"m",jC).call(this).content??null},jC=function(){let e=this.messages.length;for(;e-- >0;){let t=this.messages[e];if(Jf(t))return S(b({},t),{content:t.content??null,refusal:t.refusal??null})}throw new Oe("stream ended without producing a ChatCompletionMessage with role=assistant")},kO=function(){for(let e=this.messages.length-1;e>=0;e--){let t=this.messages[e];if(Jf(t)&&t?.tool_calls?.length)return t.tool_calls.at(-1)?.function}},AO=function(){for(let e=this.messages.length-1;e>=0;e--){let t=this.messages[e];if(IO(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(i=>i.role==="assistant"&&i.tool_calls?.some(r=>r.type==="function"&&r.id===t.tool_call_id)))return t.content}},MO=function(){let e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(let{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},r5=function(e){if(e.n!=null&&e.n>1)throw new Oe("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},o5=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};var U_=class n extends tp{static runTools(e,t,i){let r=new n,o=S(b({},i),{headers:S(b({},i?.headers),{"X-Stainless-Helper-Method":"runTools"})});return r._run(()=>r._runTools(e,t,o)),r}_addMessage(e,t=!0){super._addMessage(e,t),Jf(e)&&e.content&&this._emit("content",e.content)}};var Gi={STR:1,NUM:2,ARR:4,OBJ:8,NULL:16,BOOL:32,NAN:64,INFINITY:128,MINUS_INFINITY:256,INF:384,SPECIAL:496,ATOM:499,COLLECTION:12,ALL:511},PO=class extends Error{},OO=class extends Error{};function Ule(n,e=Gi.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return Hle(n.trim(),e)}var Hle=(n,e)=>{let t=n.length,i=0,r=g=>{throw new PO(`${g} at position ${i}`)},o=g=>{throw new OO(`${g} at position ${i}`)},s=()=>(p(),i>=t&&r("Unexpected end of input"),n[i]==='"'?l():n[i]==="{"?c():n[i]==="["?d():n.substring(i,i+4)==="null"||Gi.NULL&e&&t-i<4&&"null".startsWith(n.substring(i))?(i+=4,null):n.substring(i,i+4)==="true"||Gi.BOOL&e&&t-i<4&&"true".startsWith(n.substring(i))?(i+=4,!0):n.substring(i,i+5)==="false"||Gi.BOOL&e&&t-i<5&&"false".startsWith(n.substring(i))?(i+=5,!1):n.substring(i,i+8)==="Infinity"||Gi.INFINITY&e&&t-i<8&&"Infinity".startsWith(n.substring(i))?(i+=8,1/0):n.substring(i,i+9)==="-Infinity"||Gi.MINUS_INFINITY&e&&1<t-i&&t-i<9&&"-Infinity".startsWith(n.substring(i))?(i+=9,-1/0):n.substring(i,i+3)==="NaN"||Gi.NAN&e&&t-i<3&&"NaN".startsWith(n.substring(i))?(i+=3,NaN):f()),l=()=>{let g=i,m=!1;for(i++;i<t&&(n[i]!=='"'||m&&n[i-1]==="\\");)m=n[i]==="\\"?!m:!1,i++;if(n.charAt(i)=='"')try{return JSON.parse(n.substring(g,++i-Number(m)))}catch(_){o(String(_))}else if(Gi.STR&e)try{return JSON.parse(n.substring(g,i-Number(m))+'"')}catch{return JSON.parse(n.substring(g,n.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},c=()=>{i++,p();let g={};try{for(;n[i]!=="}";){if(p(),i>=t&&Gi.OBJ&e)return g;let m=l();p(),i++;try{let _=s();Object.defineProperty(g,m,{value:_,writable:!0,enumerable:!0,configurable:!0})}catch(_){if(Gi.OBJ&e)return g;throw _}p(),n[i]===","&&i++}}catch{if(Gi.OBJ&e)return g;r("Expected '}' at end of object")}return i++,g},d=()=>{i++;let g=[];try{for(;n[i]!=="]";)g.push(s()),p(),n[i]===","&&i++}catch{if(Gi.ARR&e)return g;r("Expected ']' at end of array")}return i++,g},f=()=>{if(i===0){n==="-"&&Gi.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(n)}catch(m){if(Gi.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}o(String(m))}}let g=i;for(n[i]==="-"&&i++;n[i]&&!",]}".includes(n[i]);)i++;i==t&&!(Gi.NUM&e)&&r("Unterminated number literal");try{return JSON.parse(n.substring(g,i))}catch{n.substring(g,i)==="-"&&Gi.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(n.substring(g,n.lastIndexOf("e")))}catch(_){o(String(_))}}},p=()=>{for(;i<t&&` 
\r	`.includes(n[i]);)i++};return s()},RO=n=>Ule(n,Gi.ALL^Gi.NUM);var Ni,vl,np,Lc,NO,BC,FO,LO,jO,VC,BO,s5,sd=class n extends tp{constructor(e){super(),Ni.add(this),vl.set(this,void 0),np.set(this,void 0),Lc.set(this,void 0),He(this,vl,e,"f"),He(this,np,[],"f")}get currentChatCompletionSnapshot(){return Z(this,Lc,"f")}static fromReadableStream(e){let t=new n(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,i){let r=new n(t);return r._run(()=>r._runChatCompletion(e,S(b({},t),{stream:!0}),S(b({},i),{headers:S(b({},i?.headers),{"X-Stainless-Helper-Method":"stream"})}))),r}_createChatCompletion(e,t,i){return E(this,null,function*(){ji(n.prototype,this,"_createChatCompletion");let r=i?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Z(this,Ni,"m",NO).call(this);let o=yield e.chat.completions.create(S(b({},t),{stream:!0}),S(b({},i),{signal:this.controller.signal}));this._connected();try{for(var s=ze(o),l,c,d;l=!(c=yield s.next()).done;l=!1){let f=c.value;Z(this,Ni,"m",FO).call(this,f)}}catch{d=[c]}finally{try{l&&(c=s.return)&&(yield c.call(s))}finally{if(d)throw d[0]}}if(o.controller.signal?.aborted)throw new ti;return this._addChatCompletion(Z(this,Ni,"m",VC).call(this))})}_fromReadableStream(e,t){return E(this,null,function*(){let i=t?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Z(this,Ni,"m",NO).call(this),this._connected();let r=ba.fromReadableStream(e,this.controller),o;try{for(var s=ze(r),l,c,d;l=!(c=yield s.next()).done;l=!1){let f=c.value;o&&o!==f.id&&this._addChatCompletion(Z(this,Ni,"m",VC).call(this)),Z(this,Ni,"m",FO).call(this,f),o=f.id}}catch{d=[c]}finally{try{l&&(c=s.return)&&(yield c.call(s))}finally{if(d)throw d[0]}}if(r.controller.signal?.aborted)throw new ti;return this._addChatCompletion(Z(this,Ni,"m",VC).call(this))})}[(vl=new WeakMap,np=new WeakMap,Lc=new WeakMap,Ni=new WeakSet,NO=function(){this.ended||He(this,Lc,void 0,"f")},BC=function(t){let i=Z(this,np,"f")[t.index];return i||(i={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Z(this,np,"f")[t.index]=i,i)},FO=function(t){if(this.ended)return;let i=Z(this,Ni,"m",s5).call(this,t);this._emit("chunk",t,i);for(let r of t.choices){let o=i.choices[r.index];r.delta.content!=null&&o.message?.role==="assistant"&&o.message?.content&&(this._emit("content",r.delta.content,o.message.content),this._emit("content.delta",{delta:r.delta.content,snapshot:o.message.content,parsed:o.message.parsed})),r.delta.refusal!=null&&o.message?.role==="assistant"&&o.message?.refusal&&this._emit("refusal.delta",{delta:r.delta.refusal,snapshot:o.message.refusal}),r.logprobs?.content!=null&&o.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:r.logprobs?.content,snapshot:o.logprobs?.content??[]}),r.logprobs?.refusal!=null&&o.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:r.logprobs?.refusal,snapshot:o.logprobs?.refusal??[]});let s=Z(this,Ni,"m",BC).call(this,o);o.finish_reason&&(Z(this,Ni,"m",jO).call(this,o),s.current_tool_call_index!=null&&Z(this,Ni,"m",LO).call(this,o,s.current_tool_call_index));for(let l of r.delta.tool_calls??[])s.current_tool_call_index!==l.index&&(Z(this,Ni,"m",jO).call(this,o),s.current_tool_call_index!=null&&Z(this,Ni,"m",LO).call(this,o,s.current_tool_call_index)),s.current_tool_call_index=l.index;for(let l of r.delta.tool_calls??[]){let c=o.message.tool_calls?.[l.index];c?.type&&(c?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:c.function?.name,index:l.index,arguments:c.function.arguments,parsed_arguments:c.function.parsed_arguments,arguments_delta:l.function?.arguments??""}):(c?.type,void 0))}}},LO=function(t,i){if(Z(this,Ni,"m",BC).call(this,t).done_tool_calls.has(i))return;let o=t.message.tool_calls?.[i];if(!o)throw new Error("no tool call snapshot");if(!o.type)throw new Error("tool call snapshot missing `type`");if(o.type==="function"){let s=Z(this,vl,"f")?.tools?.find(l=>l.type==="function"&&l.function.name===o.function.name);this._emit("tool_calls.function.arguments.done",{name:o.function.name,index:i,arguments:o.function.arguments,parsed_arguments:od(s)?s.$parseRaw(o.function.arguments):s?.function.strict?JSON.parse(o.function.arguments):null})}else o.type},jO=function(t){let i=Z(this,Ni,"m",BC).call(this,t);if(t.message.content&&!i.content_done){i.content_done=!0;let r=Z(this,Ni,"m",BO).call(this);this._emit("content.done",{content:t.message.content,parsed:r?r.$parseRaw(t.message.content):null})}t.message.refusal&&!i.refusal_done&&(i.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),t.logprobs?.content&&!i.logprobs_content_done&&(i.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),t.logprobs?.refusal&&!i.logprobs_refusal_done&&(i.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},VC=function(){if(this.ended)throw new Oe("stream has ended, this shouldn't happen");let t=Z(this,Lc,"f");if(!t)throw new Oe("request ended without sending any chunks");return He(this,Lc,void 0,"f"),He(this,np,[],"f"),qle(t,Z(this,vl,"f"))},BO=function(){let t=Z(this,vl,"f")?.response_format;return z_(t)?t:null},s5=function(t){var i,r,o,s;let l=Z(this,Lc,"f"),f=t,{choices:c}=f,d=Be(f,["choices"]);l?Object.assign(l,d):l=He(this,Lc,S(b({},d),{choices:[]}),"f");for(let y of t.choices){let w=y,{delta:I,finish_reason:k,index:O,logprobs:j=null}=w,q=Be(w,["delta","finish_reason","index","logprobs"]);let V=l.choices[O];if(V||(V=l.choices[O]=b({finish_reason:k,index:O,message:{},logprobs:j},q)),j)if(!V.logprobs)V.logprobs=Object.assign({},j);else{let p=j,{content:G,refusal:Y}=p,ne=Be(p,["content","refusal"]);Object.assign(V.logprobs,ne),G&&((i=V.logprobs).content??(i.content=[]),V.logprobs.content.push(...G)),Y&&((r=V.logprobs).refusal??(r.refusal=[]),V.logprobs.refusal.push(...Y))}if(k&&(V.finish_reason=k,Z(this,vl,"f")&&DO(Z(this,vl,"f")))){if(k==="length")throw new Kf;if(k==="content_filter")throw new Yf}if(Object.assign(V,q),!I)continue;let g=I,{content:re,refusal:P,function_call:X,role:se,tool_calls:ue}=g,me=Be(g,["content","refusal","function_call","role","tool_calls"]);if(Object.assign(V.message,me),P&&(V.message.refusal=(V.message.refusal||"")+P),se&&(V.message.role=se),X&&(V.message.function_call?(X.name&&(V.message.function_call.name=X.name),X.arguments&&((o=V.message.function_call).arguments??(o.arguments=""),V.message.function_call.arguments+=X.arguments)):V.message.function_call=X),re&&(V.message.content=(V.message.content||"")+re,!V.message.refusal&&Z(this,Ni,"m",BO).call(this)&&(V.message.parsed=RO(V.message.content))),ue){V.message.tool_calls||(V.message.tool_calls=[]);for(let m of ue){let _=m,{index:G,id:Y,type:ne,function:W}=_,he=Be(_,["index","id","type","function"]);let ie=(s=V.message.tool_calls)[G]??(s[G]={});Object.assign(ie,he),Y&&(ie.id=Y),ne&&(ie.type=ne),W&&(ie.function??(ie.function={name:W.name??"",arguments:""})),W?.name&&(ie.function.name=W.name),W?.arguments&&(ie.function.arguments+=W.arguments,n5(Z(this,vl,"f"),ie)&&(ie.function.parsed_arguments=RO(ie.function.arguments)))}}}return l},Symbol.asyncIterator)](){let e=[],t=[],i=!1;return this.on("chunk",r=>{let o=t.shift();o?o.resolve(r):e.push(r)}),this.on("end",()=>{i=!0;for(let r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{i=!0;for(let o of t)o.reject(r);t.length=0}),this.on("error",r=>{i=!0;for(let o of t)o.reject(r);t.length=0}),{next:()=>E(this,null,function*(){return e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((o,s)=>t.push({resolve:o,reject:s})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0})}),return:()=>E(this,null,function*(){return this.abort(),{value:void 0,done:!0}})}}toReadableStream(){return new ba(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};function qle(n,e){let d=n,{id:t,choices:i,created:r,model:o,system_fingerprint:s}=d,l=Be(d,["id","choices","created","model","system_fingerprint"]),c=b(S(b({},l),{id:t,choices:i.map(y=>{var w=y,{message:f,finish_reason:p,index:g,logprobs:m}=w,_=Be(w,["message","finish_reason","index","logprobs"]);if(!p)throw new Oe(`missing finish_reason for choice ${g}`);let V=f,{content:I=null,function_call:k,tool_calls:O}=V,j=Be(V,["content","function_call","tool_calls"]),q=f.role;if(!q)throw new Oe(`missing role for choice ${g}`);if(k){let{arguments:re,name:P}=k;if(re==null)throw new Oe(`missing function_call.arguments for choice ${g}`);if(!P)throw new Oe(`missing function_call.name for choice ${g}`);return S(b({},_),{message:{content:I,function_call:{arguments:re,name:P},role:q,refusal:f.refusal??null},finish_reason:p,index:g,logprobs:m})}return O?S(b({},_),{index:g,finish_reason:p,logprobs:m,message:S(b({},j),{role:q,content:I,refusal:f.refusal??null,tool_calls:O.map((re,P)=>{let W=re,{function:X,type:se,id:ue}=W,me=Be(W,["function","type","id"]),he=X||{},{arguments:G,name:Y}=he,ne=Be(he,["arguments","name"]);if(ue==null)throw new Oe(`missing choices[${g}].tool_calls[${P}].id
${zC(n)}`);if(se==null)throw new Oe(`missing choices[${g}].tool_calls[${P}].type
${zC(n)}`);if(Y==null)throw new Oe(`missing choices[${g}].tool_calls[${P}].function.name
${zC(n)}`);if(G==null)throw new Oe(`missing choices[${g}].tool_calls[${P}].function.arguments
${zC(n)}`);return S(b({},me),{id:ue,type:se,function:S(b({},ne),{name:Y,arguments:G})})})})}):S(b({},_),{message:S(b({},j),{content:I,role:q,refusal:f.refusal??null}),finish_reason:p,index:g,logprobs:m})}),created:r,model:o,object:"chat.completion"}),s?{system_fingerprint:s}:{});return t5(c,e)}function zC(n){return JSON.stringify(n)}var H_=class n extends sd{static fromReadableStream(e){let t=new n(null);return t._run(()=>t._fromReadableStream(e)),t}static runTools(e,t,i){let r=new n(t),o=S(b({},i),{headers:S(b({},i?.headers),{"X-Stainless-Helper-Method":"runTools"})});return r._run(()=>r._runTools(e,t,o)),r}};var bl=class extends _e{constructor(){super(...arguments),this.messages=new rd(this._client)}create(e,t){return this._client.post("/chat/completions",S(b({body:e},t),{stream:e.stream??!1}))}retrieve(e,t){return this._client.get(pe`/chat/completions/${e}`,t)}update(e,t,i){return this._client.post(pe`/chat/completions/${e}`,b({body:t},i))}list(e={},t){return this._client.getAPIList("/chat/completions",At,b({query:e},t))}delete(e,t){return this._client.delete(pe`/chat/completions/${e}`,t)}parse(e,t){return i5(e.tools),this._client.chat.completions.create(e,S(b({},t),{headers:S(b({},t?.headers),{"X-Stainless-Helper-Method":"chat.completions.parse"})}))._thenUnwrap(i=>$_(i,e))}runTools(e,t){return e.stream?H_.runTools(this._client,e,t):U_.runTools(this._client,e,t)}stream(e,t){return sd.createChatCompletion(this._client,e,t)}};bl.Messages=rd;var q_=(()=>{class n extends _e{constructor(){super(...arguments),this.completions=new bl(this._client)}}return n.Completions=bl,n})();var a5=Symbol("brand.privateNullableHeaders");function*Gle(n){if(!n)return;if(a5 in n){let{values:i,nulls:r}=n;yield*Mo(i.entries());for(let o of r)yield[o,null];return}let e=!1,t;n instanceof Headers?t=n.entries():lO(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){let r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");let o=lO(i[1])?i[1]:[i[1]],s=!1;for(let l of o)l!==void 0&&(e&&!s&&(s=!0,yield[r,null]),yield[r,l])}}var ke=n=>{let e=new Headers,t=new Set;for(let i of n){let r=new Set;for(let[o,s]of Gle(i)){let l=o.toLowerCase();r.has(l)||(e.delete(o),r.add(l)),s===null?(e.delete(o),t.add(l)):(e.append(o,s),t.delete(l))}}return{[a5]:!0,values:e,nulls:t}};var ip=class extends _e{create(e,t){return this._client.post("/audio/speech",S(b({body:e},t),{headers:ke([{Accept:"application/octet-stream"},t?.headers]),__binaryResponse:!0}))}};var rp=class extends _e{create(e,t){return this._client.post("/audio/transcriptions",xo(S(b({body:e},t),{stream:e.stream??!1,__metadata:{model:e.model}}),this._client))}};var op=class extends _e{create(e,t){return this._client.post("/audio/translations",xo(S(b({body:e},t),{__metadata:{model:e.model}}),this._client))}};var W_=(()=>{class n extends _e{constructor(){super(...arguments),this.transcriptions=new rp(this._client),this.translations=new op(this._client),this.speech=new ip(this._client)}}return n.Transcriptions=rp,n.Translations=op,n.Speech=ip,n})();var ad=class extends _e{create(e,t){return this._client.post("/batches",b({body:e},t))}retrieve(e,t){return this._client.get(pe`/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/batches",At,b({query:e},t))}cancel(e,t){return this._client.post(pe`/batches/${e}/cancel`,t)}};var sp=class extends _e{create(e,t){return this._client.post("/assistants",S(b({body:e},t),{headers:ke([{"OpenAI-Beta":"assistants=v2"},t?.headers])}))}retrieve(e,t){return this._client.get(pe`/assistants/${e}`,S(b({},t),{headers:ke([{"OpenAI-Beta":"assistants=v2"},t?.headers])}))}update(e,t,i){return this._client.post(pe`/assistants/${e}`,S(b({body:t},i),{headers:ke([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}list(e={},t){return this._client.getAPIList("/assistants",At,S(b({query:e},t),{headers:ke([{"OpenAI-Beta":"assistants=v2"},t?.headers])}))}delete(e,t){return this._client.delete(pe`/assistants/${e}`,S(b({},t),{headers:ke([{"OpenAI-Beta":"assistants=v2"},t?.headers])}))}};var ap=class extends _e{create(e,t){return this._client.post("/realtime/sessions",S(b({body:e},t),{headers:ke([{"OpenAI-Beta":"assistants=v2"},t?.headers])}))}};var lp=class extends _e{create(e,t){return this._client.post("/realtime/transcription_sessions",S(b({body:e},t),{headers:ke([{"OpenAI-Beta":"assistants=v2"},t?.headers])}))}};var $C=(()=>{class n extends _e{constructor(){super(...arguments),this.sessions=new ap(this._client),this.transcriptionSessions=new lp(this._client)}}return n.Sessions=ap,n.TranscriptionSessions=lp,n})();var cp=class extends _e{create(e,t,i){return this._client.post(pe`/threads/${e}/messages`,S(b({body:t},i),{headers:ke([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}retrieve(e,t,i){let{thread_id:r}=t;return this._client.get(pe`/threads/${r}/messages/${e}`,S(b({},i),{headers:ke([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}update(e,t,i){let s=t,{thread_id:r}=s,o=Be(s,["thread_id"]);return this._client.post(pe`/threads/${r}/messages/${e}`,S(b({body:o},i),{headers:ke([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}list(e,t={},i){return this._client.getAPIList(pe`/threads/${e}/messages`,At,S(b({query:t},i),{headers:ke([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}delete(e,t,i){let{thread_id:r}=t;return this._client.delete(pe`/threads/${r}/messages/${e}`,S(b({},i),{headers:ke([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}};var up=class extends _e{retrieve(e,t,i){let l=t,{thread_id:r,run_id:o}=l,s=Be(l,["thread_id","run_id"]);return this._client.get(pe`/threads/${r}/runs/${o}/steps/${e}`,S(b({query:s},i),{headers:ke([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}list(e,t,i){let s=t,{thread_id:r}=s,o=Be(s,["thread_id"]);return this._client.getAPIList(pe`/threads/${r}/runs/${e}/steps`,At,S(b({query:o},i),{headers:ke([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}};var l5=n=>{if(typeof Buffer<"u"){let e=Buffer.from(n,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{let e=atob(n),t=e.length,i=new Uint8Array(t);for(let r=0;r<t;r++)i[r]=e.charCodeAt(r);return Array.from(new Float32Array(i.buffer))}};var jc=n=>{if(typeof globalThis.process<"u")return globalThis.process.env?.[n]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(n)?.trim()};var rr,cd,VO,wa,UC,gs,ud,dp,ld,WC,Co,HC,qC,K_,G_,Z_,c5,u5,d5,h5,f5,p5,m5,yl=class extends Fc{constructor(){super(...arguments),rr.add(this),VO.set(this,[]),wa.set(this,{}),UC.set(this,{}),gs.set(this,void 0),ud.set(this,void 0),dp.set(this,void 0),ld.set(this,void 0),WC.set(this,void 0),Co.set(this,void 0),HC.set(this,void 0),qC.set(this,void 0),K_.set(this,void 0)}[(VO=new WeakMap,wa=new WeakMap,UC=new WeakMap,gs=new WeakMap,ud=new WeakMap,dp=new WeakMap,ld=new WeakMap,WC=new WeakMap,Co=new WeakMap,HC=new WeakMap,qC=new WeakMap,K_=new WeakMap,rr=new WeakSet,Symbol.asyncIterator)](){let e=[],t=[],i=!1;return this.on("event",r=>{let o=t.shift();o?o.resolve(r):e.push(r)}),this.on("end",()=>{i=!0;for(let r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{i=!0;for(let o of t)o.reject(r);t.length=0}),this.on("error",r=>{i=!0;for(let o of t)o.reject(r);t.length=0}),{next:()=>E(this,null,function*(){return e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((o,s)=>t.push({resolve:o,reject:s})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0})}),return:()=>E(this,null,function*(){return this.abort(),{value:void 0,done:!0}})}}static fromReadableStream(e){let t=new cd;return t._run(()=>t._fromReadableStream(e)),t}_fromReadableStream(e,t){return E(this,null,function*(){let i=t?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),this._connected();let r=ba.fromReadableStream(e,this.controller);try{for(var o=ze(r),s,l,c;s=!(l=yield o.next()).done;s=!1){let d=l.value;Z(this,rr,"m",G_).call(this,d)}}catch{c=[l]}finally{try{s&&(l=o.return)&&(yield l.call(o))}finally{if(c)throw c[0]}}if(r.controller.signal?.aborted)throw new ti;return this._addRun(Z(this,rr,"m",Z_).call(this))})}toReadableStream(){return new ba(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,i,r){let o=new cd;return o._run(()=>o._runToolAssistantStream(e,t,i,S(b({},r),{headers:S(b({},r?.headers),{"X-Stainless-Helper-Method":"stream"})}))),o}_createToolAssistantStream(e,t,i,r){return E(this,null,function*(){let o=r?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));let s=S(b({},i),{stream:!0}),l=yield e.submitToolOutputs(t,s,S(b({},r),{signal:this.controller.signal}));this._connected();try{for(var c=ze(l),d,f,p;d=!(f=yield c.next()).done;d=!1){let g=f.value;Z(this,rr,"m",G_).call(this,g)}}catch{p=[f]}finally{try{d&&(f=c.return)&&(yield f.call(c))}finally{if(p)throw p[0]}}if(l.controller.signal?.aborted)throw new ti;return this._addRun(Z(this,rr,"m",Z_).call(this))})}static createThreadAssistantStream(e,t,i){let r=new cd;return r._run(()=>r._threadAssistantStream(e,t,S(b({},i),{headers:S(b({},i?.headers),{"X-Stainless-Helper-Method":"stream"})}))),r}static createAssistantStream(e,t,i,r){let o=new cd;return o._run(()=>o._runAssistantStream(e,t,i,S(b({},r),{headers:S(b({},r?.headers),{"X-Stainless-Helper-Method":"stream"})}))),o}currentEvent(){return Z(this,HC,"f")}currentRun(){return Z(this,qC,"f")}currentMessageSnapshot(){return Z(this,gs,"f")}currentRunStepSnapshot(){return Z(this,K_,"f")}finalRunSteps(){return E(this,null,function*(){return yield this.done(),Object.values(Z(this,wa,"f"))})}finalMessages(){return E(this,null,function*(){return yield this.done(),Object.values(Z(this,UC,"f"))})}finalRun(){return E(this,null,function*(){if(yield this.done(),!Z(this,ud,"f"))throw Error("Final run was not received.");return Z(this,ud,"f")})}_createThreadAssistantStream(e,t,i){return E(this,null,function*(){let r=i?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));let o=S(b({},t),{stream:!0}),s=yield e.createAndRun(o,S(b({},i),{signal:this.controller.signal}));this._connected();try{for(var l=ze(s),c,d,f;c=!(d=yield l.next()).done;c=!1){let p=d.value;Z(this,rr,"m",G_).call(this,p)}}catch{f=[d]}finally{try{c&&(d=l.return)&&(yield d.call(l))}finally{if(f)throw f[0]}}if(s.controller.signal?.aborted)throw new ti;return this._addRun(Z(this,rr,"m",Z_).call(this))})}_createAssistantStream(e,t,i,r){return E(this,null,function*(){let o=r?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));let s=S(b({},i),{stream:!0}),l=yield e.create(t,s,S(b({},r),{signal:this.controller.signal}));this._connected();try{for(var c=ze(l),d,f,p;d=!(f=yield c.next()).done;d=!1){let g=f.value;Z(this,rr,"m",G_).call(this,g)}}catch{p=[f]}finally{try{d&&(f=c.return)&&(yield f.call(c))}finally{if(p)throw p[0]}}if(l.controller.signal?.aborted)throw new ti;return this._addRun(Z(this,rr,"m",Z_).call(this))})}static accumulateDelta(e,t){for(let[i,r]of Object.entries(t)){if(!e.hasOwnProperty(i)){e[i]=r;continue}let o=e[i];if(o==null){e[i]=r;continue}if(i==="index"||i==="type"){e[i]=r;continue}if(typeof o=="string"&&typeof r=="string")o+=r;else if(typeof o=="number"&&typeof r=="number")o+=r;else if(A_(o)&&A_(r))o=this.accumulateDelta(o,r);else if(Array.isArray(o)&&Array.isArray(r)){if(o.every(s=>typeof s=="string"||typeof s=="number")){o.push(...r);continue}for(let s of r){if(!A_(s))throw new Error(`Expected array delta entry to be an object but got: ${s}`);let l=s.index;if(l==null)throw console.error(s),new Error("Expected array delta entry to have an `index` property");if(typeof l!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${l}`);let c=o[l];c==null?o.push(s):o[l]=this.accumulateDelta(c,s)}continue}else throw Error(`Unhandled record type: ${i}, deltaValue: ${r}, accValue: ${o}`);e[i]=o}return e}_addRun(e){return e}_threadAssistantStream(e,t,i){return E(this,null,function*(){return yield this._createThreadAssistantStream(t,e,i)})}_runAssistantStream(e,t,i,r){return E(this,null,function*(){return yield this._createAssistantStream(t,e,i,r)})}_runToolAssistantStream(e,t,i,r){return E(this,null,function*(){return yield this._createToolAssistantStream(t,e,i,r)})}};cd=yl,G_=function(e){if(!this.ended)switch(He(this,HC,e,"f"),Z(this,rr,"m",d5).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":Z(this,rr,"m",m5).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Z(this,rr,"m",u5).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":Z(this,rr,"m",c5).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier");default:}},Z_=function(){if(this.ended)throw new Oe("stream has ended, this shouldn't happen");if(!Z(this,ud,"f"))throw Error("Final run has not been received");return Z(this,ud,"f")},c5=function(e){let[t,i]=Z(this,rr,"m",f5).call(this,e,Z(this,gs,"f"));He(this,gs,t,"f"),Z(this,UC,"f")[t.id]=t;for(let r of i){let o=t.content[r.index];o?.type=="text"&&this._emit("textCreated",o.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(let r of e.data.delta.content){if(r.type=="text"&&r.text){let o=r.text,s=t.content[r.index];if(s&&s.type=="text")this._emit("textDelta",o,s.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=Z(this,dp,"f")){if(Z(this,ld,"f"))switch(Z(this,ld,"f").type){case"text":this._emit("textDone",Z(this,ld,"f").text,Z(this,gs,"f"));break;case"image_file":this._emit("imageFileDone",Z(this,ld,"f").image_file,Z(this,gs,"f"));break}He(this,dp,r.index,"f")}He(this,ld,t.content[r.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(Z(this,dp,"f")!==void 0){let r=e.data.content[Z(this,dp,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,Z(this,gs,"f"));break;case"text":this._emit("textDone",r.text,Z(this,gs,"f"));break}}Z(this,gs,"f")&&this._emit("messageDone",e.data),He(this,gs,void 0,"f")}},u5=function(e){let t=Z(this,rr,"m",h5).call(this,e);switch(He(this,K_,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":let i=e.data.delta;if(i.step_details&&i.step_details.type=="tool_calls"&&i.step_details.tool_calls&&t.step_details.type=="tool_calls")for(let o of i.step_details.tool_calls)o.index==Z(this,WC,"f")?this._emit("toolCallDelta",o,t.step_details.tool_calls[o.index]):(Z(this,Co,"f")&&this._emit("toolCallDone",Z(this,Co,"f")),He(this,WC,o.index,"f"),He(this,Co,t.step_details.tool_calls[o.index],"f"),Z(this,Co,"f")&&this._emit("toolCallCreated",Z(this,Co,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":He(this,K_,void 0,"f"),e.data.step_details.type=="tool_calls"&&Z(this,Co,"f")&&(this._emit("toolCallDone",Z(this,Co,"f")),He(this,Co,void 0,"f")),this._emit("runStepDone",e.data,t);break;case"thread.run.step.in_progress":break}},d5=function(e){Z(this,VO,"f").push(e),this._emit("event",e)},h5=function(e){switch(e.event){case"thread.run.step.created":return Z(this,wa,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=Z(this,wa,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let i=e.data;if(i.delta){let r=cd.accumulateDelta(t,i.delta);Z(this,wa,"f")[e.data.id]=r}return Z(this,wa,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":Z(this,wa,"f")[e.data.id]=e.data;break}if(Z(this,wa,"f")[e.data.id])return Z(this,wa,"f")[e.data.id];throw new Error("No snapshot available")},f5=function(e,t){let i=[];switch(e.event){case"thread.message.created":return[e.data,i];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(let o of r.delta.content)if(o.index in t.content){let s=t.content[o.index];t.content[o.index]=Z(this,rr,"m",p5).call(this,o,s)}else t.content[o.index]=o,i.push(o);return[t,i];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,i];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},p5=function(e,t){return cd.accumulateDelta(t,e)},m5=function(e){switch(He(this,qC,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":He(this,ud,e.data,"f"),Z(this,Co,"f")&&(this._emit("toolCallDone",Z(this,Co,"f")),He(this,Co,void 0,"f"));break;case"thread.run.cancelling":break}};var GC=(()=>{class n extends _e{constructor(){super(...arguments),this.steps=new up(this._client)}create(t,i,r){let l=i,{include:o}=l,s=Be(l,["include"]);return this._client.post(pe`/threads/${t}/runs`,S(b({query:{include:o},body:s},r),{headers:ke([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:i.stream??!1}))}retrieve(t,i,r){let{thread_id:o}=i;return this._client.get(pe`/threads/${o}/runs/${t}`,S(b({},r),{headers:ke([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}update(t,i,r){let l=i,{thread_id:o}=l,s=Be(l,["thread_id"]);return this._client.post(pe`/threads/${o}/runs/${t}`,S(b({body:s},r),{headers:ke([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}list(t,i={},r){return this._client.getAPIList(pe`/threads/${t}/runs`,At,S(b({query:i},r),{headers:ke([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}cancel(t,i,r){let{thread_id:o}=i;return this._client.post(pe`/threads/${o}/runs/${t}/cancel`,S(b({},r),{headers:ke([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}createAndPoll(t,i,r){return E(this,null,function*(){let o=yield this.create(t,i,r);return yield this.poll(o.id,{thread_id:t},r)})}createAndStream(t,i,r){return yl.createAssistantStream(t,this._client.beta.threads.runs,i,r)}poll(t,i,r){return E(this,null,function*(){let o=ke([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){let{data:s,response:l}=yield this.retrieve(t,i,S(b({},r),{headers:b(b({},r?.headers),o)})).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let c=5e3;if(r?.pollIntervalMs)c=r.pollIntervalMs;else{let d=l.headers.get("openai-poll-after-ms");if(d){let f=parseInt(d);isNaN(f)||(c=f)}}yield _a(c);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}})}stream(t,i,r){return yl.createAssistantStream(t,this._client.beta.threads.runs,i,r)}submitToolOutputs(t,i,r){let l=i,{thread_id:o}=l,s=Be(l,["thread_id"]);return this._client.post(pe`/threads/${o}/runs/${t}/submit_tool_outputs`,S(b({body:s},r),{headers:ke([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:i.stream??!1}))}submitToolOutputsAndPoll(t,i,r){return E(this,null,function*(){let o=yield this.submitToolOutputs(t,i,r);return yield this.poll(o.id,i,r)})}submitToolOutputsStream(t,i,r){return yl.createToolAssistantStream(t,this._client.beta.threads.runs,i,r)}}return n.Steps=up,n})();var ZC=(()=>{class n extends _e{constructor(){super(...arguments),this.runs=new GC(this._client),this.messages=new cp(this._client)}create(t={},i){return this._client.post("/threads",S(b({body:t},i),{headers:ke([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}retrieve(t,i){return this._client.get(pe`/threads/${t}`,S(b({},i),{headers:ke([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}update(t,i,r){return this._client.post(pe`/threads/${t}`,S(b({body:i},r),{headers:ke([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}delete(t,i){return this._client.delete(pe`/threads/${t}`,S(b({},i),{headers:ke([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}createAndRun(t,i){return this._client.post("/threads/runs",S(b({body:t},i),{headers:ke([{"OpenAI-Beta":"assistants=v2"},i?.headers]),stream:t.stream??!1}))}createAndRunPoll(t,i){return E(this,null,function*(){let r=yield this.createAndRun(t,i);return yield this.runs.poll(r.id,{thread_id:r.thread_id},i)})}createAndRunStream(t,i){return yl.createThreadAssistantStream(t,this._client.beta.threads,i)}}return n.Runs=GC,n.Messages=cp,n})();var Y_=(()=>{class n extends _e{constructor(){super(...arguments),this.realtime=new $C(this._client),this.assistants=new sp(this._client),this.threads=new ZC(this._client)}}return n.Realtime=$C,n.Assistants=sp,n.Threads=ZC,n})();var dd=class extends _e{create(e,t){return this._client.post("/completions",S(b({body:e},t),{stream:e.stream??!1}))}};var hp=class extends _e{retrieve(e,t,i){let{container_id:r}=t;return this._client.get(pe`/containers/${r}/files/${e}/content`,S(b({},i),{headers:ke([{Accept:"application/binary"},i?.headers]),__binaryResponse:!0}))}};var KC=(()=>{class n extends _e{constructor(){super(...arguments),this.content=new hp(this._client)}create(t,i,r){return this._client.post(pe`/containers/${t}/files`,xo(b({body:i},r),this._client))}retrieve(t,i,r){let{container_id:o}=i;return this._client.get(pe`/containers/${o}/files/${t}`,r)}list(t,i={},r){return this._client.getAPIList(pe`/containers/${t}/files`,At,b({query:i},r))}delete(t,i,r){let{container_id:o}=i;return this._client.delete(pe`/containers/${o}/files/${t}`,S(b({},r),{headers:ke([{Accept:"*/*"},r?.headers])}))}}return n.Content=hp,n})();var Q_=(()=>{class n extends _e{constructor(){super(...arguments),this.files=new KC(this._client)}create(t,i){return this._client.post("/containers",b({body:t},i))}retrieve(t,i){return this._client.get(pe`/containers/${t}`,i)}list(t={},i){return this._client.getAPIList("/containers",At,b({query:t},i))}delete(t,i){return this._client.delete(pe`/containers/${t}`,S(b({},i),{headers:ke([{Accept:"*/*"},i?.headers])}))}}return n.Files=KC,n})();var hd=class extends _e{create(e,t){let i=!!e.encoding_format,r=i?e.encoding_format:"base64";i&&ci(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);let o=this._client.post("/embeddings",b({body:S(b({},e),{encoding_format:r})},t));return i?o:(ci(this._client).debug("embeddings/decoding base64 embeddings from base64"),o._thenUnwrap(s=>(s&&s.data&&s.data.forEach(l=>{let c=l.embedding;l.embedding=l5(c)}),s)))}};var fp=class extends _e{retrieve(e,t,i){let{eval_id:r,run_id:o}=t;return this._client.get(pe`/evals/${r}/runs/${o}/output_items/${e}`,i)}list(e,t,i){let s=t,{eval_id:r}=s,o=Be(s,["eval_id"]);return this._client.getAPIList(pe`/evals/${r}/runs/${e}/output_items`,At,b({query:o},i))}};var YC=(()=>{class n extends _e{constructor(){super(...arguments),this.outputItems=new fp(this._client)}create(t,i,r){return this._client.post(pe`/evals/${t}/runs`,b({body:i},r))}retrieve(t,i,r){let{eval_id:o}=i;return this._client.get(pe`/evals/${o}/runs/${t}`,r)}list(t,i={},r){return this._client.getAPIList(pe`/evals/${t}/runs`,At,b({query:i},r))}delete(t,i,r){let{eval_id:o}=i;return this._client.delete(pe`/evals/${o}/runs/${t}`,r)}cancel(t,i,r){let{eval_id:o}=i;return this._client.post(pe`/evals/${o}/runs/${t}`,r)}}return n.OutputItems=fp,n})();var X_=(()=>{class n extends _e{constructor(){super(...arguments),this.runs=new YC(this._client)}create(t,i){return this._client.post("/evals",b({body:t},i))}retrieve(t,i){return this._client.get(pe`/evals/${t}`,i)}update(t,i,r){return this._client.post(pe`/evals/${t}`,b({body:i},r))}list(t={},i){return this._client.getAPIList("/evals",At,b({query:t},i))}delete(t,i){return this._client.delete(pe`/evals/${t}`,i)}}return n.Runs=YC,n})();var fd=class extends _e{create(e,t){return this._client.post("/files",xo(b({body:e},t),this._client))}retrieve(e,t){return this._client.get(pe`/files/${e}`,t)}list(e={},t){return this._client.getAPIList("/files",At,b({query:e},t))}delete(e,t){return this._client.delete(pe`/files/${e}`,t)}content(e,t){return this._client.get(pe`/files/${e}/content`,S(b({},t),{headers:ke([{Accept:"application/binary"},t?.headers]),__binaryResponse:!0}))}waitForProcessing(r){return E(this,arguments,function*(e,{pollInterval:t=5e3,maxWait:i=30*60*1e3}={}){let o=new Set(["processed","error","deleted"]),s=Date.now(),l=yield this.retrieve(e);for(;!l.status||!o.has(l.status);)if(yield _a(t),l=yield this.retrieve(e),Date.now()-s>i)throw new ma({message:`Giving up on waiting for file ${e} to finish processing after ${i} milliseconds.`});return l})}};var pp=class extends _e{};var mp=class extends _e{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",b({body:e},t))}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",b({body:e},t))}};var QC=(()=>{class n extends _e{constructor(){super(...arguments),this.graders=new mp(this._client)}}return n.Graders=mp,n})();var gp=class extends _e{create(e,t,i){return this._client.getAPIList(pe`/fine_tuning/checkpoints/${e}/permissions`,ya,b({body:t,method:"post"},i))}retrieve(e,t={},i){return this._client.get(pe`/fine_tuning/checkpoints/${e}/permissions`,b({query:t},i))}delete(e,t,i){let{fine_tuned_model_checkpoint:r}=t;return this._client.delete(pe`/fine_tuning/checkpoints/${r}/permissions/${e}`,i)}};var XC=(()=>{class n extends _e{constructor(){super(...arguments),this.permissions=new gp(this._client)}}return n.Permissions=gp,n})();var _p=class extends _e{list(e,t={},i){return this._client.getAPIList(pe`/fine_tuning/jobs/${e}/checkpoints`,At,b({query:t},i))}};var JC=(()=>{class n extends _e{constructor(){super(...arguments),this.checkpoints=new _p(this._client)}create(t,i){return this._client.post("/fine_tuning/jobs",b({body:t},i))}retrieve(t,i){return this._client.get(pe`/fine_tuning/jobs/${t}`,i)}list(t={},i){return this._client.getAPIList("/fine_tuning/jobs",At,b({query:t},i))}cancel(t,i){return this._client.post(pe`/fine_tuning/jobs/${t}/cancel`,i)}listEvents(t,i={},r){return this._client.getAPIList(pe`/fine_tuning/jobs/${t}/events`,At,b({query:i},r))}pause(t,i){return this._client.post(pe`/fine_tuning/jobs/${t}/pause`,i)}resume(t,i){return this._client.post(pe`/fine_tuning/jobs/${t}/resume`,i)}}return n.Checkpoints=_p,n})();var J_=(()=>{class n extends _e{constructor(){super(...arguments),this.methods=new pp(this._client),this.jobs=new JC(this._client),this.checkpoints=new XC(this._client),this.alpha=new QC(this._client)}}return n.Methods=pp,n.Jobs=JC,n.Checkpoints=XC,n.Alpha=QC,n})();var vp=class extends _e{};var ev=(()=>{class n extends _e{constructor(){super(...arguments),this.graderModels=new vp(this._client)}}return n.GraderModels=vp,n})();var pd=class extends _e{createVariation(e,t){return this._client.post("/images/variations",xo(b({body:e},t),this._client))}edit(e,t){return this._client.post("/images/edits",xo(S(b({body:e},t),{stream:e.stream??!1}),this._client))}generate(e,t){return this._client.post("/images/generations",S(b({body:e},t),{stream:e.stream??!1}))}};var md=class extends _e{retrieve(e,t){return this._client.get(pe`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",ya,e)}delete(e,t){return this._client.delete(pe`/models/${e}`,t)}};var gd=class extends _e{create(e,t){return this._client.post("/moderations",b({body:e},t))}};function g5(n,e){return!e||!vce(e)?S(b({},n),{output_parsed:null,output:n.output.map(t=>t.type==="function_call"?S(b({},t),{parsed_arguments:null}):t.type==="message"?S(b({},t),{content:t.content.map(i=>S(b({},i),{parsed:null}))}):t)}):zO(n,e)}function zO(n,e){let t=n.output.map(r=>{if(r.type==="function_call")return S(b({},r),{parsed_arguments:wce(e,r)});if(r.type==="message"){let o=r.content.map(s=>s.type==="output_text"?S(b({},s),{parsed:_ce(e,s.text)}):s);return S(b({},r),{content:o})}return r}),i=Object.assign({},n,{output:t});return Object.getOwnPropertyDescriptor(n,"output_text")||eE(i),Object.defineProperty(i,"output_parsed",{enumerable:!0,get(){for(let r of i.output)if(r.type==="message"){for(let o of r.content)if(o.type==="output_text"&&o.parsed!==null)return o.parsed}return null}}),i}function _ce(n,e){return n.text?.format?.type!=="json_schema"?null:"$parseRaw"in n.text?.format?(n.text?.format).$parseRaw(e):JSON.parse(e)}function vce(n){return!!z_(n.text?.format)}function bce(n){return n?.$brand==="auto-parseable-tool"}function yce(n,e){return n.find(t=>t.type==="function"&&t.name===e)}function wce(n,e){let t=yce(n.tools??[],e.name);return S(b(b({},e),e),{parsed_arguments:bce(t)?t.$parseRaw(e.arguments):t?.strict?JSON.parse(e.arguments):null})}function eE(n){let e=[];for(let t of n.output)if(t.type==="message")for(let i of t.content)i.type==="output_text"&&e.push(i.text);n.output_text=e.join("")}var bp,tE,Bc,nE,_5,v5,b5,y5,iE=class n extends Fc{constructor(e){super(),bp.add(this),tE.set(this,void 0),Bc.set(this,void 0),nE.set(this,void 0),He(this,tE,e,"f")}static createResponse(e,t,i){let r=new n(t);return r._run(()=>r._createOrRetrieveResponse(e,t,S(b({},i),{headers:S(b({},i?.headers),{"X-Stainless-Helper-Method":"stream"})}))),r}_createOrRetrieveResponse(e,t,i){return E(this,null,function*(){let r=i?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Z(this,bp,"m",_5).call(this);let o,s=null;"response_id"in t?(o=yield e.responses.retrieve(t.response_id,{stream:!0},S(b({},i),{signal:this.controller.signal,stream:!0})),s=t.starting_after??null):o=yield e.responses.create(S(b({},t),{stream:!0}),S(b({},i),{signal:this.controller.signal})),this._connected();try{for(var l=ze(o),c,d,f;c=!(d=yield l.next()).done;c=!1){let p=d.value;Z(this,bp,"m",v5).call(this,p,s)}}catch{f=[d]}finally{try{c&&(d=l.return)&&(yield d.call(l))}finally{if(f)throw f[0]}}if(o.controller.signal?.aborted)throw new ti;return Z(this,bp,"m",b5).call(this)})}[(tE=new WeakMap,Bc=new WeakMap,nE=new WeakMap,bp=new WeakSet,_5=function(){this.ended||He(this,Bc,void 0,"f")},v5=function(t,i){if(this.ended)return;let r=(s,l)=>{(i==null||l.sequence_number>i)&&this._emit(s,l)},o=Z(this,bp,"m",y5).call(this,t);switch(r("event",t),t.type){case"response.output_text.delta":{let s=o.output[t.output_index];if(!s)throw new Oe(`missing output at index ${t.output_index}`);if(s.type==="message"){let l=s.content[t.content_index];if(!l)throw new Oe(`missing content at index ${t.content_index}`);if(l.type!=="output_text")throw new Oe(`expected content to be 'output_text', got ${l.type}`);r("response.output_text.delta",S(b({},t),{snapshot:l.text}))}break}case"response.function_call_arguments.delta":{let s=o.output[t.output_index];if(!s)throw new Oe(`missing output at index ${t.output_index}`);s.type==="function_call"&&r("response.function_call_arguments.delta",S(b({},t),{snapshot:s.arguments}));break}default:r(t.type,t);break}},b5=function(){if(this.ended)throw new Oe("stream has ended, this shouldn't happen");let t=Z(this,Bc,"f");if(!t)throw new Oe("request ended without sending any events");He(this,Bc,void 0,"f");let i=xce(t,Z(this,tE,"f"));return He(this,nE,i,"f"),i},y5=function(t){let i=Z(this,Bc,"f");if(!i){if(t.type!=="response.created")throw new Oe(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return i=He(this,Bc,t.response,"f"),i}switch(t.type){case"response.output_item.added":{i.output.push(t.item);break}case"response.content_part.added":{let r=i.output[t.output_index];if(!r)throw new Oe(`missing output at index ${t.output_index}`);r.type==="message"&&r.content.push(t.part);break}case"response.output_text.delta":{let r=i.output[t.output_index];if(!r)throw new Oe(`missing output at index ${t.output_index}`);if(r.type==="message"){let o=r.content[t.content_index];if(!o)throw new Oe(`missing content at index ${t.content_index}`);if(o.type!=="output_text")throw new Oe(`expected content to be 'output_text', got ${o.type}`);o.text+=t.delta}break}case"response.function_call_arguments.delta":{let r=i.output[t.output_index];if(!r)throw new Oe(`missing output at index ${t.output_index}`);r.type==="function_call"&&(r.arguments+=t.delta);break}case"response.completed":{He(this,Bc,t.response,"f");break}}return i},Symbol.asyncIterator)](){let e=[],t=[],i=!1;return this.on("event",r=>{let o=t.shift();o?o.resolve(r):e.push(r)}),this.on("end",()=>{i=!0;for(let r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{i=!0;for(let o of t)o.reject(r);t.length=0}),this.on("error",r=>{i=!0;for(let o of t)o.reject(r);t.length=0}),{next:()=>E(this,null,function*(){return e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((o,s)=>t.push({resolve:o,reject:s})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0})}),return:()=>E(this,null,function*(){return this.abort(),{value:void 0,done:!0}})}}finalResponse(){return E(this,null,function*(){yield this.done();let e=Z(this,nE,"f");if(!e)throw new Oe("stream ended without producing a ChatCompletion");return e})}};function xce(n,e){return g5(n,e)}var yp=class extends _e{list(e,t={},i){return this._client.getAPIList(pe`/responses/${e}/input_items`,At,b({query:t},i))}};var tv=(()=>{class n extends _e{constructor(){super(...arguments),this.inputItems=new yp(this._client)}create(t,i){return this._client.post("/responses",S(b({body:t},i),{stream:t.stream??!1}))._thenUnwrap(r=>("object"in r&&r.object==="response"&&eE(r),r))}retrieve(t,i={},r){return this._client.get(pe`/responses/${t}`,S(b({query:i},r),{stream:i?.stream??!1}))._thenUnwrap(o=>("object"in o&&o.object==="response"&&eE(o),o))}delete(t,i){return this._client.delete(pe`/responses/${t}`,S(b({},i),{headers:ke([{Accept:"*/*"},i?.headers])}))}parse(t,i){return this._client.responses.create(t,i)._thenUnwrap(r=>zO(r,t))}stream(t,i){return iE.createResponse(this._client,t,i)}cancel(t,i){return this._client.post(pe`/responses/${t}/cancel`,i)}}return n.InputItems=yp,n})();var wp=class extends _e{create(e,t,i){return this._client.post(pe`/uploads/${e}/parts`,xo(b({body:t},i),this._client))}};var nv=(()=>{class n extends _e{constructor(){super(...arguments),this.parts=new wp(this._client)}create(t,i){return this._client.post("/uploads",b({body:t},i))}cancel(t,i){return this._client.post(pe`/uploads/${t}/cancel`,i)}complete(t,i,r){return this._client.post(pe`/uploads/${t}/complete`,b({body:i},r))}}return n.Parts=wp,n})();var w5=n=>E(null,null,function*(){let e=yield Promise.allSettled(n),t=e.filter(r=>r.status==="rejected");if(t.length){for(let r of t)console.error(r.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}let i=[];for(let r of e)r.status==="fulfilled"&&i.push(r.value);return i});var xp=class extends _e{create(e,t,i){return this._client.post(pe`/vector_stores/${e}/file_batches`,S(b({body:t},i),{headers:ke([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}retrieve(e,t,i){let{vector_store_id:r}=t;return this._client.get(pe`/vector_stores/${r}/file_batches/${e}`,S(b({},i),{headers:ke([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}cancel(e,t,i){let{vector_store_id:r}=t;return this._client.post(pe`/vector_stores/${r}/file_batches/${e}/cancel`,S(b({},i),{headers:ke([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}createAndPoll(e,t,i){return E(this,null,function*(){let r=yield this.create(e,t);return yield this.poll(e,r.id,i)})}listFiles(e,t,i){let s=t,{vector_store_id:r}=s,o=Be(s,["vector_store_id"]);return this._client.getAPIList(pe`/vector_stores/${r}/file_batches/${e}/files`,At,S(b({query:o},i),{headers:ke([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}poll(e,t,i){return E(this,null,function*(){let r=ke([i?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":i?.pollIntervalMs?.toString()??void 0}]);for(;;){let{data:o,response:s}=yield this.retrieve(t,{vector_store_id:e},S(b({},i),{headers:r})).withResponse();switch(o.status){case"in_progress":let l=5e3;if(i?.pollIntervalMs)l=i.pollIntervalMs;else{let c=s.headers.get("openai-poll-after-ms");if(c){let d=parseInt(c);isNaN(d)||(l=d)}}yield _a(l);break;case"failed":case"cancelled":case"completed":return o}}})}uploadAndPoll(o,s,l){return E(this,arguments,function*(e,{files:t,fileIds:i=[]},r){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");let c=r?.maxConcurrency??5,d=Math.min(c,t.length),f=this._client,p=t.values(),g=[...i];function m(y){return E(this,null,function*(){for(let w of y){let I=yield f.files.create({file:w,purpose:"assistants"},r);g.push(I.id)}})}let _=Array(d).fill(p).map(m);return yield w5(_),yield this.createAndPoll(e,{file_ids:g})})}};var Cp=class extends _e{create(e,t,i){return this._client.post(pe`/vector_stores/${e}/files`,S(b({body:t},i),{headers:ke([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}retrieve(e,t,i){let{vector_store_id:r}=t;return this._client.get(pe`/vector_stores/${r}/files/${e}`,S(b({},i),{headers:ke([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}update(e,t,i){let s=t,{vector_store_id:r}=s,o=Be(s,["vector_store_id"]);return this._client.post(pe`/vector_stores/${r}/files/${e}`,S(b({body:o},i),{headers:ke([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}list(e,t={},i){return this._client.getAPIList(pe`/vector_stores/${e}/files`,At,S(b({query:t},i),{headers:ke([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}delete(e,t,i){let{vector_store_id:r}=t;return this._client.delete(pe`/vector_stores/${r}/files/${e}`,S(b({},i),{headers:ke([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}createAndPoll(e,t,i){return E(this,null,function*(){let r=yield this.create(e,t,i);return yield this.poll(e,r.id,i)})}poll(e,t,i){return E(this,null,function*(){let r=ke([i?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":i?.pollIntervalMs?.toString()??void 0}]);for(;;){let o=yield this.retrieve(t,{vector_store_id:e},S(b({},i),{headers:r})).withResponse(),s=o.data;switch(s.status){case"in_progress":let l=5e3;if(i?.pollIntervalMs)l=i.pollIntervalMs;else{let c=o.response.headers.get("openai-poll-after-ms");if(c){let d=parseInt(c);isNaN(d)||(l=d)}}yield _a(l);break;case"failed":case"completed":return s}}})}upload(e,t,i){return E(this,null,function*(){let r=yield this._client.files.create({file:t,purpose:"assistants"},i);return this.create(e,{file_id:r.id},i)})}uploadAndPoll(e,t,i){return E(this,null,function*(){let r=yield this.upload(e,t,i);return yield this.poll(e,r.id,i)})}content(e,t,i){let{vector_store_id:r}=t;return this._client.getAPIList(pe`/vector_stores/${r}/files/${e}/content`,ya,S(b({},i),{headers:ke([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}};var iv=(()=>{class n extends _e{constructor(){super(...arguments),this.files=new Cp(this._client),this.fileBatches=new xp(this._client)}create(t,i){return this._client.post("/vector_stores",S(b({body:t},i),{headers:ke([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}retrieve(t,i){return this._client.get(pe`/vector_stores/${t}`,S(b({},i),{headers:ke([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}update(t,i,r){return this._client.post(pe`/vector_stores/${t}`,S(b({body:i},r),{headers:ke([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}list(t={},i){return this._client.getAPIList("/vector_stores",At,S(b({query:t},i),{headers:ke([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}delete(t,i){return this._client.delete(pe`/vector_stores/${t}`,S(b({},i),{headers:ke([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}search(t,i,r){return this._client.getAPIList(pe`/vector_stores/${t}/search`,ya,S(b({body:i,method:"post"},r),{headers:ke([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}}return n.Files=Cp,n.FileBatches=xp,n})();var Ep,x5,rE,_d=class extends _e{constructor(){super(...arguments),Ep.add(this)}unwrap(o,s){return E(this,arguments,function*(e,t,i=this._client.webhookSecret,r=300){return yield this.verifySignature(e,t,i,r),JSON.parse(e)})}verifySignature(o,s){return E(this,arguments,function*(e,t,i=this._client.webhookSecret,r=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");Z(this,Ep,"m",x5).call(this,i);let l=ke([t]).values,c=Z(this,Ep,"m",rE).call(this,l,"webhook-signature"),d=Z(this,Ep,"m",rE).call(this,l,"webhook-timestamp"),f=Z(this,Ep,"m",rE).call(this,l,"webhook-id"),p=parseInt(d,10);if(isNaN(p))throw new ga("Invalid webhook timestamp format");let g=Math.floor(Date.now()/1e3);if(g-p>r)throw new ga("Webhook timestamp is too old");if(p>g+r)throw new ga("Webhook timestamp is too new");let m=c.split(" ").map(I=>I.startsWith("v1,")?I.substring(3):I),_=i.startsWith("whsec_")?Buffer.from(i.replace("whsec_",""),"base64"):Buffer.from(i,"utf-8"),y=f?`${f}.${d}.${e}`:`${d}.${e}`,w=yield crypto.subtle.importKey("raw",_,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(let I of m)try{let k=Buffer.from(I,"base64");if(yield crypto.subtle.verify("HMAC",w,k,new TextEncoder().encode(y)))return}catch{continue}throw new ga("The given webhook signature does not match the expected signature")})}};Ep=new WeakSet,x5=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},rE=function(e,t){if(!e)throw new Error("Headers are required");let i=e.get(t);if(i==null)throw new Error(`Missing required header: ${t}`);return i};var $O,UO,oE,C5,ft=class{constructor(l={}){var c=l,{baseURL:e=jc("OPENAI_BASE_URL"),apiKey:t=jc("OPENAI_API_KEY"),organization:i=jc("OPENAI_ORG_ID")??null,project:r=jc("OPENAI_PROJECT_ID")??null,webhookSecret:o=jc("OPENAI_WEBHOOK_SECRET")??null}=c,s=Be(c,["baseURL","apiKey","organization","project","webhookSecret"]);if($O.add(this),oE.set(this,void 0),this.completions=new dd(this),this.chat=new q_(this),this.embeddings=new hd(this),this.files=new fd(this),this.images=new pd(this),this.audio=new W_(this),this.moderations=new gd(this),this.models=new md(this),this.fineTuning=new J_(this),this.graders=new ev(this),this.vectorStores=new iv(this),this.webhooks=new _d(this),this.beta=new Y_(this),this.batches=new ad(this),this.uploads=new nv(this),this.responses=new tv(this),this.evals=new X_(this),this.containers=new Q_(this),t===void 0)throw new Oe("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");let d=S(b({apiKey:t,organization:i,project:r,webhookSecret:o},s),{baseURL:e||"https://api.openai.com/v1"});if(!d.dangerouslyAllowBrowser&&P8())throw new Oe(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=d.baseURL,this.timeout=d.timeout??UO.DEFAULT_TIMEOUT,this.logger=d.logger??console;let f="warn";this.logLevel=f,this.logLevel=vO(d.logLevel,"ClientOptions.logLevel",this)??vO(jc("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??f,this.fetchOptions=d.fetchOptions,this.maxRetries=d.maxRetries??2,this.fetch=d.fetch??R8(),He(this,oE,F8,"f"),this._options=d,this.apiKey=t,this.organization=i,this.project=r,this.webhookSecret=o}withOptions(e){return new this.constructor(b(S(b({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret}),e))}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){}authHeaders(e){return E(this,null,function*(){return ke([{Authorization:`Bearer ${this.apiKey}`}])})}stringifyQuery(e){return gO(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Nc}`}defaultIdempotencyKey(){return`stainless-node-retry-${aO()}`}makeStatusError(e,t,i,r){return Oi.generate(e,t,i,r)}buildURL(e,t,i){let r=!Z(this,$O,"m",C5).call(this)&&i||this.baseURL,o=C8(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return I8(s)||(t=b(b({},s),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(o.search=this.stringifyQuery(t)),o.toString()}prepareOptions(e){return E(this,null,function*(){})}prepareRequest(r,o){return E(this,arguments,function*(e,{url:t,options:i}){})}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(r=>b({method:e,path:t},r)))}request(e,t=null){return new id(this,this.makeRequest(e,t,void 0))}makeRequest(e,t,i){return E(this,null,function*(){let r=yield e,o=r.maxRetries??this.maxRetries;t==null&&(t=o),yield this.prepareOptions(r);let{req:s,url:l,timeout:c}=yield this.buildRequest(r,{retryCount:o-t});yield this.prepareRequest(s,{url:l,options:r});let d="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),f=i===void 0?"":`, retryOf: ${i}`,p=Date.now();if(ci(this).debug(`[${d}] sending request`,gl({retryOfRequestLogID:i,method:r.method,url:l,options:r,headers:s.headers})),r.signal?.aborted)throw new ti;let g=new AbortController,m=yield this.fetchWithTimeout(l,s,c,g).catch(k_),_=Date.now();if(m instanceof Error){let I=`retrying, ${t} attempts remaining`;if(r.signal?.aborted)throw new ti;let k=T_(m)||/timed? ?out/i.test(String(m)+("cause"in m?String(m.cause):""));if(t)return ci(this).info(`[${d}] connection ${k?"timed out":"failed"} - ${I}`),ci(this).debug(`[${d}] connection ${k?"timed out":"failed"} (${I})`,gl({retryOfRequestLogID:i,url:l,durationMs:_-p,message:m.message})),this.retryRequest(r,t,i??d);throw ci(this).info(`[${d}] connection ${k?"timed out":"failed"} - error; no more retries left`),ci(this).debug(`[${d}] connection ${k?"timed out":"failed"} (error; no more retries left)`,gl({retryOfRequestLogID:i,url:l,durationMs:_-p,message:m.message})),k?new ma:new Rc({cause:m})}let y=[...m.headers.entries()].filter(([I])=>I==="x-request-id").map(([I,k])=>", "+I+": "+JSON.stringify(k)).join(""),w=`[${d}${f}${y}] ${s.method} ${l} ${m.ok?"succeeded":"failed"} with status ${m.status} in ${_-p}ms`;if(!m.ok){let I=yield this.shouldRetry(m);if(t&&I){let re=`retrying, ${t} attempts remaining`;return yield N8(m.body),ci(this).info(`${w} - ${re}`),ci(this).debug(`[${d}] response error (${re})`,gl({retryOfRequestLogID:i,url:m.url,status:m.status,headers:m.headers,durationMs:_-p})),this.retryRequest(r,t,i??d,m.headers)}let k=I?"error; no more retries left":"error; not retryable";ci(this).info(`${w} - ${k}`);let O=yield m.text().catch(re=>k_(re).message),j=T8(O),q=j?void 0:O;throw ci(this).debug(`[${d}] response error (${k})`,gl({retryOfRequestLogID:i,url:m.url,status:m.status,headers:m.headers,message:q,durationMs:Date.now()-p})),this.makeStatusError(m.status,j,q,m.headers)}return ci(this).info(w),ci(this).debug(`[${d}] response start`,gl({retryOfRequestLogID:i,url:m.url,status:m.status,headers:m.headers,durationMs:_-p})),{response:m,options:r,controller:g,requestLogID:d,retryOfRequestLogID:i,startTime:p}})}getAPIList(e,t,i){return this.requestAPIList(t,b({method:"get",path:e},i))}requestAPIList(e,t){let i=this.makeRequest(t,null,void 0);return new R_(this,i,e)}fetchWithTimeout(e,t,i,r){return E(this,null,function*(){let p=t||{},{signal:o,method:s}=p,l=Be(p,["signal","method"]);o&&o.addEventListener("abort",()=>r.abort());let c=setTimeout(()=>r.abort(),i),d=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,f=b(S(b({signal:r.signal},d?{duplex:"half"}:{}),{method:"GET"}),l);s&&(f.method=s.toUpperCase());try{return yield this.fetch.call(void 0,e,f)}finally{clearTimeout(c)}})}shouldRetry(e){return E(this,null,function*(){let t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500})}retryRequest(e,t,i,r){return E(this,null,function*(){let o,s=r?.get("retry-after-ms");if(s){let c=parseFloat(s);Number.isNaN(c)||(o=c)}let l=r?.get("retry-after");if(l&&!o){let c=parseFloat(l);Number.isNaN(c)?o=Date.parse(l)-Date.now():o=c*1e3}if(!(o&&0<=o&&o<60*1e3)){let c=e.maxRetries??this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(t,c)}return yield _a(o),this.makeRequest(e,t-1,i)})}calculateDefaultRetryTimeoutMillis(e,t){let o=t-e,s=Math.min(.5*Math.pow(2,o),8),l=1-Math.random()*.25;return s*l*1e3}buildRequest(i){return E(this,arguments,function*(e,{retryCount:t=0}={}){let r=b({},e),{method:o,path:s,query:l,defaultBaseURL:c}=r,d=this.buildURL(s,l,c);"timeout"in r&&D8("timeout",r.timeout),r.timeout=r.timeout??this.timeout;let{bodyHeaders:f,body:p}=this.buildBody({options:r}),g=yield this.buildHeaders({options:e,method:o,bodyHeaders:f,retryCount:t});return{req:b(b(b(b(b({method:o,headers:g},r.signal&&{signal:r.signal}),globalThis.ReadableStream&&p instanceof globalThis.ReadableStream&&{duplex:"half"}),p&&{body:p}),this.fetchOptions??{}),r.fetchOptions??{}),url:d,timeout:r.timeout}})}buildHeaders(o){return E(this,arguments,function*({options:e,method:t,bodyHeaders:i,retryCount:r}){let s={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);let l=ke([s,S(b(b({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),O8()),{"OpenAI-Organization":this.organization,"OpenAI-Project":this.project}),yield this.authHeaders(e),this._options.defaultHeaders,i,e.headers]);return this.validateHeaders(l),l.values})}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};let i=ke([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:EC(e)}:Z(this,oE,"f").call(this,{body:e,headers:i})}};UO=ft,oE=new WeakMap,$O=new WeakSet,C5=function(){return this.baseURL!=="https://api.openai.com/v1"};ft.OpenAI=UO;ft.DEFAULT_TIMEOUT=6e5;ft.OpenAIError=Oe;ft.APIError=Oi;ft.APIConnectionError=Rc;ft.APIConnectionTimeoutError=ma;ft.APIUserAbortError=ti;ft.NotFoundError=Hf;ft.ConflictError=qf;ft.RateLimitError=Gf;ft.BadRequestError=zf;ft.AuthenticationError=$f;ft.InternalServerError=Zf;ft.PermissionDeniedError=Uf;ft.UnprocessableEntityError=Wf;ft.InvalidWebhookSignatureError=ga;ft.toFile=F_;ft.Completions=dd;ft.Chat=q_;ft.Embeddings=hd;ft.Files=fd;ft.Images=pd;ft.Audio=W_;ft.Moderations=gd;ft.Models=md;ft.FineTuning=J_;ft.Graders=ev;ft.VectorStores=iv;ft.Webhooks=_d;ft.Beta=Y_;ft.Batches=ad;ft.Uploads=nv;ft.Responses=tv;ft.Evals=X_;ft.Containers=Q_;var eR={};yn(eR,{BaseChatModel:()=>Ca,SimpleChatModel:()=>JO,createChatMessageChunkEncoderStream:()=>Yce});var QO={};yn(QO,{BaseLangChain:()=>Ip,BaseLanguageModel:()=>bd,calculateMaxTokens:()=>O5,getEmbeddingContextSize:()=>Zce,getModelContextSize:()=>P5,getModelNameForTiktoken:()=>fE,isOpenAITool:()=>pE});var WO={};yn(WO,{BaseCache:()=>lE,InMemoryCache:()=>rv,deserializeStoredGeneration:()=>Mce,getCacheKey:()=>S5,serializeGeneration:()=>Pce});var qO={};yn(qO,{insecureHash:()=>sE,sha256:()=>I5});var Tce=typeof window=="object"?window:{},Ot="0123456789abcdef".split(""),kce=[-2147483648,8388608,32768,128],_s=[24,16,8,0];var Zi=[];function vs(n){n?(Zi[0]=Zi[16]=Zi[1]=Zi[2]=Zi[3]=Zi[4]=Zi[5]=Zi[6]=Zi[7]=Zi[8]=Zi[9]=Zi[10]=Zi[11]=Zi[12]=Zi[13]=Zi[14]=Zi[15]=0,this.blocks=Zi):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}vs.prototype.update=function(n){if(!this.finalized){var e=typeof n!="string";e&&n.constructor===Tce.ArrayBuffer&&(n=new Uint8Array(n));for(var t,i=0,r,o=n.length||0,s=this.blocks;i<o;){if(this.hashed&&(this.hashed=!1,s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),e)for(r=this.start;i<o&&r<64;++i)s[r>>2]|=n[i]<<_s[r++&3];else for(r=this.start;i<o&&r<64;++i)t=n.charCodeAt(i),t<128?s[r>>2]|=t<<_s[r++&3]:t<2048?(s[r>>2]|=(192|t>>6)<<_s[r++&3],s[r>>2]|=(128|t&63)<<_s[r++&3]):t<55296||t>=57344?(s[r>>2]|=(224|t>>12)<<_s[r++&3],s[r>>2]|=(128|t>>6&63)<<_s[r++&3],s[r>>2]|=(128|t&63)<<_s[r++&3]):(t=65536+((t&1023)<<10|n.charCodeAt(++i)&1023),s[r>>2]|=(240|t>>18)<<_s[r++&3],s[r>>2]|=(128|t>>12&63)<<_s[r++&3],s[r>>2]|=(128|t>>6&63)<<_s[r++&3],s[r>>2]|=(128|t&63)<<_s[r++&3]);this.lastByteIndex=r,this.bytes+=r-this.start,r>=64?(this.block=s[16],this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};vs.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,e=this.lastByteIndex;n[16]=this.block,n[e>>2]|=kce[e&3],this.block=n[16],e>=56&&(this.hashed||this.hash(),n[0]=this.block,n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),n[14]=this.hBytes<<3|this.bytes>>>29,n[15]=this.bytes<<3,this.hash()}};vs.prototype.hash=function(){var n=this.h0,e=this.h1,t=this.h2,i=this.h3,r=this.h4,o,s,l,c=this.blocks;for(s=16;s<80;++s)l=c[s-3]^c[s-8]^c[s-14]^c[s-16],c[s]=l<<1|l>>>31;for(s=0;s<20;s+=5)o=e&t|~e&i,l=n<<5|n>>>27,r=l+o+r+1518500249+c[s]<<0,e=e<<30|e>>>2,o=n&e|~n&t,l=r<<5|r>>>27,i=l+o+i+1518500249+c[s+1]<<0,n=n<<30|n>>>2,o=r&n|~r&e,l=i<<5|i>>>27,t=l+o+t+1518500249+c[s+2]<<0,r=r<<30|r>>>2,o=i&r|~i&n,l=t<<5|t>>>27,e=l+o+e+1518500249+c[s+3]<<0,i=i<<30|i>>>2,o=t&i|~t&r,l=e<<5|e>>>27,n=l+o+n+1518500249+c[s+4]<<0,t=t<<30|t>>>2;for(;s<40;s+=5)o=e^t^i,l=n<<5|n>>>27,r=l+o+r+1859775393+c[s]<<0,e=e<<30|e>>>2,o=n^e^t,l=r<<5|r>>>27,i=l+o+i+1859775393+c[s+1]<<0,n=n<<30|n>>>2,o=r^n^e,l=i<<5|i>>>27,t=l+o+t+1859775393+c[s+2]<<0,r=r<<30|r>>>2,o=i^r^n,l=t<<5|t>>>27,e=l+o+e+1859775393+c[s+3]<<0,i=i<<30|i>>>2,o=t^i^r,l=e<<5|e>>>27,n=l+o+n+1859775393+c[s+4]<<0,t=t<<30|t>>>2;for(;s<60;s+=5)o=e&t|e&i|t&i,l=n<<5|n>>>27,r=l+o+r-1894007588+c[s]<<0,e=e<<30|e>>>2,o=n&e|n&t|e&t,l=r<<5|r>>>27,i=l+o+i-1894007588+c[s+1]<<0,n=n<<30|n>>>2,o=r&n|r&e|n&e,l=i<<5|i>>>27,t=l+o+t-1894007588+c[s+2]<<0,r=r<<30|r>>>2,o=i&r|i&n|r&n,l=t<<5|t>>>27,e=l+o+e-1894007588+c[s+3]<<0,i=i<<30|i>>>2,o=t&i|t&r|i&r,l=e<<5|e>>>27,n=l+o+n-1894007588+c[s+4]<<0,t=t<<30|t>>>2;for(;s<80;s+=5)o=e^t^i,l=n<<5|n>>>27,r=l+o+r-899497514+c[s]<<0,e=e<<30|e>>>2,o=n^e^t,l=r<<5|r>>>27,i=l+o+i-899497514+c[s+1]<<0,n=n<<30|n>>>2,o=r^n^e,l=i<<5|i>>>27,t=l+o+t-899497514+c[s+2]<<0,r=r<<30|r>>>2,o=i^r^n,l=t<<5|t>>>27,e=l+o+e-899497514+c[s+3]<<0,i=i<<30|i>>>2,o=t^i^r,l=e<<5|e>>>27,n=l+o+n-899497514+c[s+4]<<0,t=t<<30|t>>>2;this.h0=this.h0+n<<0,this.h1=this.h1+e<<0,this.h2=this.h2+t<<0,this.h3=this.h3+i<<0,this.h4=this.h4+r<<0};vs.prototype.hex=function(){this.finalize();var n=this.h0,e=this.h1,t=this.h2,i=this.h3,r=this.h4;return Ot[n>>28&15]+Ot[n>>24&15]+Ot[n>>20&15]+Ot[n>>16&15]+Ot[n>>12&15]+Ot[n>>8&15]+Ot[n>>4&15]+Ot[n&15]+Ot[e>>28&15]+Ot[e>>24&15]+Ot[e>>20&15]+Ot[e>>16&15]+Ot[e>>12&15]+Ot[e>>8&15]+Ot[e>>4&15]+Ot[e&15]+Ot[t>>28&15]+Ot[t>>24&15]+Ot[t>>20&15]+Ot[t>>16&15]+Ot[t>>12&15]+Ot[t>>8&15]+Ot[t>>4&15]+Ot[t&15]+Ot[i>>28&15]+Ot[i>>24&15]+Ot[i>>20&15]+Ot[i>>16&15]+Ot[i>>12&15]+Ot[i>>8&15]+Ot[i>>4&15]+Ot[i&15]+Ot[r>>28&15]+Ot[r>>24&15]+Ot[r>>20&15]+Ot[r>>16&15]+Ot[r>>12&15]+Ot[r>>8&15]+Ot[r>>4&15]+Ot[r&15]};vs.prototype.toString=vs.prototype.hex;vs.prototype.digest=function(){this.finalize();var n=this.h0,e=this.h1,t=this.h2,i=this.h3,r=this.h4;return[n>>24&255,n>>16&255,n>>8&255,n&255,e>>24&255,e>>16&255,e>>8&255,e&255,t>>24&255,t>>16&255,t>>8&255,t&255,i>>24&255,i>>16&255,i>>8&255,i&255,r>>24&255,r>>16&255,r>>8&255,r&255]};vs.prototype.array=vs.prototype.digest;vs.prototype.arrayBuffer=function(){this.finalize();var n=new ArrayBuffer(20),e=new DataView(n);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),n};var E5=!1,sE=n=>(E5||(console.warn(["The default method for hashing keys is insecure and will be replaced in a future version,","but hasn't been replaced yet as to not break existing caches. It's recommended that you use","a more secure hashing algorithm to avoid cache poisoning.","","See this page for more information:","|","\u2514> https://js.langchain.com/docs/troubleshooting/warnings/insecure-cache-algorithm"].join(`
`)),E5=!0),new vs(!0).update(n).hex());var Ne="0123456789abcdef".split(""),Ace=[-2147483648,8388608,32768,128],bs=[24,16,8,0],aE=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];var Ki=[];function ys(n,e){e?(Ki[0]=Ki[16]=Ki[1]=Ki[2]=Ki[3]=Ki[4]=Ki[5]=Ki[6]=Ki[7]=Ki[8]=Ki[9]=Ki[10]=Ki[11]=Ki[12]=Ki[13]=Ki[14]=Ki[15]=0,this.blocks=Ki):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=n}ys.prototype.update=function(n){if(!this.finalized){var e,t=typeof n;if(t!=="string"){if(t==="object"){if(n===null)throw new Error(ERROR);if(ARRAY_BUFFER&&n.constructor===ArrayBuffer)n=new Uint8Array(n);else if(!Array.isArray(n)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(n)))throw new Error(ERROR)}else throw new Error(ERROR);e=!0}for(var i,r=0,o,s=n.length,l=this.blocks;r<s;){if(this.hashed&&(this.hashed=!1,l[0]=this.block,this.block=l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),e)for(o=this.start;r<s&&o<64;++r)l[o>>>2]|=n[r]<<bs[o++&3];else for(o=this.start;r<s&&o<64;++r)i=n.charCodeAt(r),i<128?l[o>>>2]|=i<<bs[o++&3]:i<2048?(l[o>>>2]|=(192|i>>>6)<<bs[o++&3],l[o>>>2]|=(128|i&63)<<bs[o++&3]):i<55296||i>=57344?(l[o>>>2]|=(224|i>>>12)<<bs[o++&3],l[o>>>2]|=(128|i>>>6&63)<<bs[o++&3],l[o>>>2]|=(128|i&63)<<bs[o++&3]):(i=65536+((i&1023)<<10|n.charCodeAt(++r)&1023),l[o>>>2]|=(240|i>>>18)<<bs[o++&3],l[o>>>2]|=(128|i>>>12&63)<<bs[o++&3],l[o>>>2]|=(128|i>>>6&63)<<bs[o++&3],l[o>>>2]|=(128|i&63)<<bs[o++&3]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=l[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};ys.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,e=this.lastByteIndex;n[16]=this.block,n[e>>>2]|=Ace[e&3],this.block=n[16],e>=56&&(this.hashed||this.hash(),n[0]=this.block,n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),n[14]=this.hBytes<<3|this.bytes>>>29,n[15]=this.bytes<<3,this.hash()}};ys.prototype.hash=function(){var n=this.h0,e=this.h1,t=this.h2,i=this.h3,r=this.h4,o=this.h5,s=this.h6,l=this.h7,c=this.blocks,d,f,p,g,m,_,y,w,I,k,O;for(d=16;d<64;++d)m=c[d-15],f=(m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3,m=c[d-2],p=(m>>>17|m<<15)^(m>>>19|m<<13)^m>>>10,c[d]=c[d-16]+f+c[d-7]+p<<0;for(O=e&t,d=0;d<64;d+=4)this.first?(this.is224?(w=300032,m=c[0]-1413257819,l=m-150054599<<0,i=m+24177077<<0):(w=704751109,m=c[0]-210244248,l=m-1521486534<<0,i=m+143694565<<0),this.first=!1):(f=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),p=(r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7),w=n&e,g=w^n&t^O,y=r&o^~r&s,m=l+p+y+aE[d]+c[d],_=f+g,l=i+m<<0,i=m+_<<0),f=(i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10),p=(l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7),I=i&n,g=I^i&e^w,y=s&l^~s&r,m=o+p+y+aE[d+1]+c[d+1],_=f+g,s=t+m<<0,t=m+_<<0,f=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),p=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),k=t&i,g=k^t&n^I,y=o&s^~o&l,m=r+p+y+aE[d+2]+c[d+2],_=f+g,o=e+m<<0,e=m+_<<0,f=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),p=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),O=e&t,g=O^e&i^k,y=o&s^~o&l,m=r+p+y+aE[d+3]+c[d+3],_=f+g,r=n+m<<0,n=m+_<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+n<<0,this.h1=this.h1+e<<0,this.h2=this.h2+t<<0,this.h3=this.h3+i<<0,this.h4=this.h4+r<<0,this.h5=this.h5+o<<0,this.h6=this.h6+s<<0,this.h7=this.h7+l<<0};ys.prototype.hex=function(){this.finalize();var n=this.h0,e=this.h1,t=this.h2,i=this.h3,r=this.h4,o=this.h5,s=this.h6,l=this.h7,c=Ne[n>>>28&15]+Ne[n>>>24&15]+Ne[n>>>20&15]+Ne[n>>>16&15]+Ne[n>>>12&15]+Ne[n>>>8&15]+Ne[n>>>4&15]+Ne[n&15]+Ne[e>>>28&15]+Ne[e>>>24&15]+Ne[e>>>20&15]+Ne[e>>>16&15]+Ne[e>>>12&15]+Ne[e>>>8&15]+Ne[e>>>4&15]+Ne[e&15]+Ne[t>>>28&15]+Ne[t>>>24&15]+Ne[t>>>20&15]+Ne[t>>>16&15]+Ne[t>>>12&15]+Ne[t>>>8&15]+Ne[t>>>4&15]+Ne[t&15]+Ne[i>>>28&15]+Ne[i>>>24&15]+Ne[i>>>20&15]+Ne[i>>>16&15]+Ne[i>>>12&15]+Ne[i>>>8&15]+Ne[i>>>4&15]+Ne[i&15]+Ne[r>>>28&15]+Ne[r>>>24&15]+Ne[r>>>20&15]+Ne[r>>>16&15]+Ne[r>>>12&15]+Ne[r>>>8&15]+Ne[r>>>4&15]+Ne[r&15]+Ne[o>>>28&15]+Ne[o>>>24&15]+Ne[o>>>20&15]+Ne[o>>>16&15]+Ne[o>>>12&15]+Ne[o>>>8&15]+Ne[o>>>4&15]+Ne[o&15]+Ne[s>>>28&15]+Ne[s>>>24&15]+Ne[s>>>20&15]+Ne[s>>>16&15]+Ne[s>>>12&15]+Ne[s>>>8&15]+Ne[s>>>4&15]+Ne[s&15];return this.is224||(c+=Ne[l>>>28&15]+Ne[l>>>24&15]+Ne[l>>>20&15]+Ne[l>>>16&15]+Ne[l>>>12&15]+Ne[l>>>8&15]+Ne[l>>>4&15]+Ne[l&15]),c};ys.prototype.toString=ys.prototype.hex;ys.prototype.digest=function(){this.finalize();var n=this.h0,e=this.h1,t=this.h2,i=this.h3,r=this.h4,o=this.h5,s=this.h6,l=this.h7,c=[n>>>24&255,n>>>16&255,n>>>8&255,n&255,e>>>24&255,e>>>16&255,e>>>8&255,e&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255,i>>>24&255,i>>>16&255,i>>>8&255,i&255,r>>>24&255,r>>>16&255,r>>>8&255,r&255,o>>>24&255,o>>>16&255,o>>>8&255,o&255,s>>>24&255,s>>>16&255,s>>>8&255,s&255];return this.is224||c.push(l>>>24&255,l>>>16&255,l>>>8&255,l&255),c};ys.prototype.array=ys.prototype.digest;ys.prototype.arrayBuffer=function(){this.finalize();var n=new ArrayBuffer(this.is224?28:32),e=new DataView(n);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),n};var I5=(...n)=>new ys(!1,!0).update(n.join("")).hex();var S5=(...n)=>sE(n.join("_"));function Mce(n){return n.message!==void 0?{text:n.text,message:oF(n.message)}:{text:n.text}}function Pce(n){let e={text:n.text};return n.message!==void 0&&(e.message=n.message.toDict()),e}var lE=class{constructor(){Object.defineProperty(this,"keyEncoder",{enumerable:!0,configurable:!0,writable:!0,value:S5})}makeDefaultKeyEncoder(e){this.keyEncoder=e}},Oce=new Map,rv=class n extends lE{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,t){return Promise.resolve(this.cache.get(this.keyEncoder(e,t))??null)}update(e,t,i){return E(this,null,function*(){this.cache.set(this.keyEncoder(e,t),i)})}static global(){return new n(Oce)}};var YO={};yn(YO,{encodingForModel:()=>hE,getEncoding:()=>M5});var A5=GI(k5(),1);var zce=Object.defineProperty,$ce=(n,e,t)=>e in n?zce(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Uce=(n,e,t)=>($ce(n,typeof e!="symbol"?e+"":e,t),t);function Hce(n,e){let t=Array.from({length:n.length},(i,r)=>({start:r,end:r+1}));for(;t.length>1;){let i=null;for(let r=0;r<t.length-1;r++){let o=n.slice(t[r].start,t[r+1].end),s=e.get(o.join(","));s!=null&&(i==null||s<i[0])&&(i=[s,r])}if(i!=null){let r=i[1];t[r]={start:t[r].start,end:t[r+1].end},t.splice(r+1,1)}else break}return t}function qce(n,e){return n.length===1?[e.get(n.join(","))]:Hce(n,e).map(t=>e.get(n.slice(t.start,t.end).join(","))).filter(t=>t!=null)}function Wce(n){return n.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var ZO=class{specialTokens;inverseSpecialTokens;patStr;textEncoder=new TextEncoder;textDecoder=new TextDecoder("utf-8");rankMap=new Map;textMap=new Map;constructor(n,e){this.patStr=n.pat_str;let t=n.bpe_ranks.split(`
`).filter(Boolean).reduce((i,r)=>{let[o,s,...l]=r.split(" "),c=Number.parseInt(s,10);return l.forEach((d,f)=>i[d]=c+f),i},{});for(let[i,r]of Object.entries(t)){let o=A5.default.toByteArray(i);this.rankMap.set(o.join(","),r),this.textMap.set(r,o)}this.specialTokens=b(b({},n.special_tokens),e),this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((i,[r,o])=>(i[o]=this.textEncoder.encode(r),i),{})}encode(n,e=[],t="all"){let i=new RegExp(this.patStr,"ug"),r=ZO.specialTokenRegex(Object.keys(this.specialTokens)),o=[],s=new Set(e==="all"?Object.keys(this.specialTokens):e),l=new Set(t==="all"?Object.keys(this.specialTokens).filter(d=>!s.has(d)):t);if(l.size>0){let d=ZO.specialTokenRegex([...l]),f=n.match(d);if(f!=null)throw new Error(`The text contains a special token that is not allowed: ${f[0]}`)}let c=0;for(;;){let d=null,f=c;for(;r.lastIndex=f,d=r.exec(n),!(d==null||s.has(d[0]));)f=d.index+1;let p=d?.index??n.length;for(let m of n.substring(c,p).matchAll(i)){let _=this.textEncoder.encode(m[0]),y=this.rankMap.get(_.join(","));if(y!=null){o.push(y);continue}o.push(...qce(_,this.rankMap))}if(d==null)break;let g=this.specialTokens[d[0]];o.push(g),c=d.index+d[0].length}return o}decode(n){let e=[],t=0;for(let o=0;o<n.length;++o){let s=n[o],l=this.textMap.get(s)??this.inverseSpecialTokens[s];l!=null&&(e.push(l),t+=l.length)}let i=new Uint8Array(t),r=0;for(let o of e)i.set(o,r),r+=o.length;return this.textDecoder.decode(i)}},uE=ZO;Uce(uE,"specialTokenRegex",n=>new RegExp(n.map(e=>Wce(e)).join("|"),"g"));function KO(n){switch(n){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":return"o200k_base";default:throw new Error("Unknown model")}}var dE={},Gce=new th({});function M5(n){return E(this,null,function*(){return n in dE||(dE[n]=Gce.fetch(`https://tiktoken.pages.dev/js/${n}.json`).then(e=>e.json()).then(e=>new uE(e)).catch(e=>{throw delete dE[n],e})),yield dE[n]})}function hE(n){return E(this,null,function*(){return M5(KO(n))})}var fE=n=>n.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":n.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":n.startsWith("gpt-4-32k")?"gpt-4-32k":n.startsWith("gpt-4-")?"gpt-4":n.startsWith("gpt-4o")?"gpt-4o":n,Zce=n=>{switch(n){case"text-embedding-ada-002":return 8191;default:return 2046}},P5=n=>{switch(fE(n)){case"gpt-3.5-turbo-16k":return 16384;case"gpt-3.5-turbo":return 4096;case"gpt-4-32k":return 32768;case"gpt-4":return 8192;case"text-davinci-003":return 4097;case"text-curie-001":return 2048;case"text-babbage-001":return 2048;case"text-ada-001":return 2048;case"code-davinci-002":return 8e3;case"code-cushman-001":return 2048;default:return 4097}};function pE(n){return typeof n!="object"||!n?!1:!!("type"in n&&n.type==="function"&&"function"in n&&typeof n.function=="object"&&n.function&&"name"in n.function&&"parameters"in n.function)}var O5=t=>E(null,[t],function*({prompt:n,modelName:e}){let i;try{i=(yield hE(fE(e))).encode(n).length}catch{console.warn("Failed to calculate number of tokens, falling back to approximate count"),i=Math.ceil(n.length/4)}return P5(e)-i}),Kce=()=>!1,Ip=class extends $t{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??Kce(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}},bd=class extends Ip{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor(r){var o=r,{callbacks:e,callbackManager:t}=o,i=Be(o,["callbacks","callbackManager"]);let c=i,{cache:s}=c,l=Be(c,["cache"]);super(b({callbacks:e??t},l)),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof s=="object"?this.cache=s:s?this.cache=rv.global():this.cache=void 0,this.caller=new th(i??{})}getNumTokens(e){return E(this,null,function*(){let t;typeof e=="string"?t=e:t=e.map(r=>typeof r=="string"?r:r.type==="text"&&"text"in r?r.text:"").join("");let i=Math.ceil(t.length/4);if(!this._encoding)try{this._encoding=yield hE("modelName"in this?fE(this.modelName):"gpt2")}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}if(this._encoding)try{i=this._encoding.encode(t).length}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}return i})}static _convertInputToPromptValue(e){return typeof e=="string"?new jF(e):Array.isArray(e)?new BF(e.map(Vs)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall(i){var r=i,{config:e}=r,t=Be(r,["config"]);let o=S(b(b({},this._identifyingParams()),t),{_type:this._llmType(),_model:this._modelType()});return Object.entries(o).filter(([c,d])=>d!==void 0).map(([c,d])=>`${c}:${JSON.stringify(d)}`).sort().join(",")}serialize(){return S(b({},this._identifyingParams()),{_type:this._llmType(),_model:this._modelType()})}static deserialize(e){return E(this,null,function*(){throw new Error("Use .toJSON() instead")})}};function Yce(){let n=new TextEncoder;return new TransformStream({transform(e,t){t.enqueue(n.encode(typeof e.content=="string"?e.content:JSON.stringify(e.content)))}})}function XO(n){let e=[];for(let t of n){let i=t;if(Array.isArray(t.content))for(let r=0;r<t.content.length;r++){let o=t.content[r];(KN(o)||YN(o))&&i===t&&(i=new t.constructor(S(b({},i),{content:[...t.content.slice(0,r),QN(o),...t.content.slice(r+1)]})))}e.push(i)}return e}var Ca=class n extends bd{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]}),Object.defineProperty(this,"disableStreaming",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_separateRunnableConfigFromCallOptionsCompat(e){let[t,i]=super._separateRunnableConfigFromCallOptions(e);return i.signal=t.signal,[t,i]}invoke(e,t){return E(this,null,function*(){let i=n._convertInputToPromptValue(e);return(yield this.generatePrompt([i],t,t?.callbacks)).generations[0][0].message})}_streamResponseChunks(e,t,i){return yt(this,null,function*(){throw new Error("Not implemented.")})}_streamIterator(e,t){return yt(this,null,function*(){if(this._streamResponseChunks===n.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(e,t);else{let c=n._convertInputToPromptValue(e).toChatMessages(),[d,f]=this._separateRunnableConfigFromCallOptionsCompat(t),p=b(b({},d.metadata),this.getLsParams(f)),g=yield new ge(Oo.configure(d.callbacks,this.callbacks,d.tags,this.tags,p,this.metadata,{verbose:this.verbose})),m={options:f,invocation_params:this?.invocationParams(f),batch_size:1},_=yield new ge(g?.handleChatModelStart(this.toJSON(),[XO(c)],d.runId,void 0,m,void 0,void 0,d.runName)),y,w;try{try{for(var i=ze(this._streamResponseChunks(c,f,_?.[0])),r,o,s;r=!(o=yield new ge(i.next())).done;r=!1){let I=o.value;if(I.message.id==null){let k=_?.at(0)?.runId;k!=null&&I.message._updateId(`run-${k}`)}I.message.response_metadata=b(b({},I.generationInfo),I.message.response_metadata),yield I.message,y?y=y.concat(I):y=I,nm(I.message)&&I.message.usage_metadata!==void 0&&(w={tokenUsage:{promptTokens:I.message.usage_metadata.input_tokens,completionTokens:I.message.usage_metadata.output_tokens,totalTokens:I.message.usage_metadata.total_tokens}})}}catch{s=[o]}finally{try{r&&(o=i.return)&&(yield new ge(o.call(i)))}finally{if(s)throw s[0]}}}catch(I){throw yield new ge(Promise.all((_??[]).map(k=>k?.handleLLMError(I)))),I}yield new ge(Promise.all((_??[]).map(I=>I?.handleLLMEnd({generations:[[y]],llmOutput:w}))))}})}getLsParams(e){let t=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:e.stop,ls_provider:t}}_generateUncached(e,t,i,r){return E(this,null,function*(){let o=e.map(y=>y.map(Vs)),s;if(r!==void 0&&r.length===o.length)s=r;else{let y=b(b({},i.metadata),this.getLsParams(t)),w=yield Oo.configure(i.callbacks,this.callbacks,i.tags,this.tags,y,this.metadata,{verbose:this.verbose}),I={options:t,invocation_params:this?.invocationParams(t),batch_size:1};s=yield w?.handleChatModelStart(this.toJSON(),o.map(XO),i.runId,void 0,I,void 0,void 0,i.runName)}let l=[],c=[];if(!!s?.[0].handlers.find(gb)&&!this.disableStreaming&&o.length===1&&this._streamResponseChunks!==n.prototype._streamResponseChunks)try{let y=yield this._streamResponseChunks(o[0],t,s?.[0]),w,I;try{for(var p=ze(y),g,m,_;g=!(m=yield p.next()).done;g=!1){let k=m.value;if(k.message.id==null){let O=s?.at(0)?.runId;O!=null&&k.message._updateId(`run-${O}`)}w===void 0?w=k:w=Ba(w,k),nm(k.message)&&k.message.usage_metadata!==void 0&&(I={tokenUsage:{promptTokens:k.message.usage_metadata.input_tokens,completionTokens:k.message.usage_metadata.output_tokens,totalTokens:k.message.usage_metadata.total_tokens}})}}catch{_=[m]}finally{try{g&&(m=p.return)&&(yield m.call(p))}finally{if(_)throw _[0]}}if(w===void 0)throw new Error("Received empty response from chat model call.");l.push([w]),yield s?.[0].handleLLMEnd({generations:l,llmOutput:I})}catch(y){throw yield s?.[0].handleLLMError(y),y}else{let y=yield Promise.allSettled(o.map((w,I)=>this._generate(w,S(b({},t),{promptIndex:I}),s?.[I])));yield Promise.all(y.map((w,I)=>E(this,null,function*(){if(w.status==="fulfilled"){let k=w.value;for(let O of k.generations){if(O.message.id==null){let j=s?.at(0)?.runId;j!=null&&O.message._updateId(`run-${j}`)}O.message.response_metadata=b(b({},O.generationInfo),O.message.response_metadata)}return k.generations.length===1&&(k.generations[0].message.response_metadata=b(b({},k.llmOutput),k.generations[0].message.response_metadata)),l[I]=k.generations,c[I]=k.llmOutput,s?.[I]?.handleLLMEnd({generations:[k.generations],llmOutput:k.llmOutput})}else return yield s?.[I]?.handleLLMError(w.reason),Promise.reject(w.reason)})))}let f={generations:l,llmOutput:c.length?this._combineLLMOutput?.(...c):void 0};return Object.defineProperty(f,eh,{value:s?{runIds:s?.map(y=>y.runId)}:void 0,configurable:!0}),f})}_generateCached(s){return E(this,arguments,function*({messages:e,cache:t,llmStringKey:i,parsedOptions:r,handledOptions:o}){let l=e.map(I=>I.map(Vs)),c=b(b({},o.metadata),this.getLsParams(r)),d=yield Oo.configure(o.callbacks,this.callbacks,o.tags,this.tags,c,this.metadata,{verbose:this.verbose}),f={options:r,invocation_params:this?.invocationParams(r),batch_size:1},p=yield d?.handleChatModelStart(this.toJSON(),l.map(XO),o.runId,void 0,f,void 0,void 0,o.runName),g=[],_=(yield Promise.allSettled(l.map((I,k)=>E(this,null,function*(){let O=n._convertInputToPromptValue(I).toString(),j=yield t.lookup(O,i);return j==null&&g.push(k),j})))).map((I,k)=>({result:I,runManager:p?.[k]})).filter(({result:I})=>I.status==="fulfilled"&&I.value!=null||I.status==="rejected"),y=[];yield Promise.all(_.map((j,q)=>E(this,[j,q],function*({result:I,runManager:k},O){if(I.status==="fulfilled"){let V=I.value;return y[O]=V.map(re=>("message"in re&&Nn(re.message)&&Wr(re.message)&&(re.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0}),re.generationInfo=S(b({},re.generationInfo),{tokenUsage:{}}),re)),V.length&&(yield k?.handleLLMNewToken(V[0].text)),k?.handleLLMEnd({generations:[V]},void 0,void 0,void 0,{cached:!0})}else return yield k?.handleLLMError(I.reason,void 0,void 0,void 0,{cached:!0}),Promise.reject(I.reason)})));let w={generations:y,missingPromptIndices:g,startedRunManagers:p};return Object.defineProperty(w,eh,{value:p?{runIds:p?.map(I=>I.runId)}:void 0,configurable:!0}),w})}generate(e,t,i){return E(this,null,function*(){let r;Array.isArray(t)?r={stop:t}:r=t;let o=e.map(_=>_.map(Vs)),[s,l]=this._separateRunnableConfigFromCallOptionsCompat(r);if(s.callbacks=s.callbacks??i,!this.cache)return this._generateUncached(o,l,s);let{cache:c}=this,d=this._getSerializedCacheKeyParametersForCall(l),{generations:f,missingPromptIndices:p,startedRunManagers:g}=yield this._generateCached({messages:o,cache:c,llmStringKey:d,parsedOptions:l,handledOptions:s}),m={};if(p.length>0){let _=yield this._generateUncached(p.map(y=>o[y]),l,s,g!==void 0?p.map(y=>g?.[y]):void 0);yield Promise.all(_.generations.map((y,w)=>E(this,null,function*(){let I=p[w];f[I]=y;let k=n._convertInputToPromptValue(o[I]).toString();return c.update(k,d,y)}))),m=_.llmOutput??{}}return{generations:f,llmOutput:m}})}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return S(b({},this.invocationParams()),{_type:this._llmType(),_model:this._modelType()})}generatePrompt(e,t,i){return E(this,null,function*(){let r=e.map(o=>o.toChatMessages());return this.generate(r,t,i)})}call(e,t,i){return E(this,null,function*(){return(yield this.generate([e.map(Vs)],t,i)).generations[0][0].message})}callPrompt(e,t,i){return E(this,null,function*(){let r=e.toChatMessages();return this.call(r,t,i)})}predictMessages(e,t,i){return E(this,null,function*(){return this.call(e,t,i)})}predict(e,t,i){return E(this,null,function*(){let r=new jl(e),o=yield this.call([r],t,i);if(typeof o.content!="string")throw new Error("Cannot use predict when output is not a string.");return o.content})}withStructuredOutput(e,t){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(t?.strict)throw new Error('"strict" mode is not supported for this model by default.');let i=e,r=t?.name,o=Bl(i)??"A function available to call.",s=t?.method,l=t?.includeRaw;if(s==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let c=r??"extract",d;po(i)?d=[{type:"function",function:{name:c,description:o,parameters:Bi(i)}}]:("name"in i&&(c=i.name),d=[{type:"function",function:{name:c,description:o,parameters:i}}]);let f=this.bindTools(d),p=ri.from(y=>{if(!y.tool_calls||y.tool_calls.length===0)throw new Error("No tool calls found in the response.");let w=y.tool_calls.find(I=>I.name===c);if(!w)throw new Error(`No tool call found with name ${c}.`);return w.args});if(!l)return f.pipe(p).withConfig({runName:"StructuredOutput"});let g=io.assign({parsed:(y,w)=>p.invoke(y.raw,w)}),m=io.assign({parsed:()=>null}),_=g.withFallbacks({fallbacks:[m]});return Zn.from([{raw:f},_]).withConfig({runName:"StructuredOutputRunnable"})}},JO=class extends Ca{_generate(e,t,i){return E(this,null,function*(){let r=yield this._call(e,t,i),o=new $n(r);if(typeof o.content!="string")throw new Error("Cannot generate with a simple chat model when output is not a string.");return{generations:[{text:o.content,message:o}]}})}};var hR={};yn(hR,{AsymmetricStructuredOutputParser:()=>aR,BaseCumulativeTransformOutputParser:()=>wl,BaseLLMOutputParser:()=>mE,BaseOutputParser:()=>Ea,BaseTransformOutputParser:()=>Ia,BytesOutputParser:()=>tR,CommaSeparatedListOutputParser:()=>nR,CustomListOutputParser:()=>iR,JsonMarkdownStructuredOutputParser:()=>gE,JsonOutputParser:()=>Sp,ListOutputParser:()=>yd,MarkdownListOutputParser:()=>oR,NumberedListOutputParser:()=>rR,OutputParserException:()=>ro,StringOutputParser:()=>sR,StructuredOutputParser:()=>wd,XMLOutputParser:()=>uR,XML_FORMAT_INSTRUCTIONS:()=>cR,parseJsonMarkdown:()=>db,parsePartialJson:()=>hb,parseXMLMarkdown:()=>dR});var mE=class extends $t{parseResultWithPrompt(e,t,i){return this.parseResult(e,i)}_baseMessageToString(e){return typeof e.content=="string"?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}invoke(e,t){return E(this,null,function*(){return typeof e=="string"?this._callWithConfig((i,r)=>E(this,null,function*(){return this.parseResult([{text:i}],r?.callbacks)}),e,S(b({},t),{runType:"parser"})):this._callWithConfig((i,r)=>E(this,null,function*(){return this.parseResult([{message:i,text:this._baseMessageToString(i)}],r?.callbacks)}),e,S(b({},t),{runType:"parser"}))})}},Ea=class extends mE{parseResult(e,t){return this.parse(e[0].text,t)}parseWithPrompt(e,t,i){return E(this,null,function*(){return this.parse(e,i)})}_type(){throw new Error("_type not implemented")}},ro=class extends Error{constructor(e,t,i,r=!1){if(super(e),Object.defineProperty(this,"llmOutput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendToLLM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmOutput=t,this.observation=i,this.sendToLLM=r,r&&(i===void 0||t===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");iF(this,"OUTPUT_PARSING_FAILURE")}};var Ia=class extends Ea{_transform(e){return yt(this,null,function*(){try{for(var t=ze(e),i,r,o;i=!(r=yield new ge(t.next())).done;i=!1){let s=r.value;typeof s=="string"?yield this.parseResult([{text:s}]):yield this.parseResult([{message:s,text:this._baseMessageToString(s)}])}}catch{o=[r]}finally{try{i&&(r=t.return)&&(yield new ge(r.call(t)))}finally{if(o)throw o[0]}}})}transform(e,t){return yt(this,null,function*(){yield*Mo(this._transformStreamWithConfig(e,this._transform.bind(this),S(b({},t),{runType:"parser"})))})}},wl=class extends Ia{constructor(e){super(e),Object.defineProperty(this,"diff",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.diff=e?.diff??this.diff}_transform(e){return yt(this,null,function*(){let t,i;try{for(var r=ze(e),o,s,l;o=!(s=yield new ge(r.next())).done;o=!1){let c=s.value;if(typeof c!="string"&&typeof c.content!="string")throw new Error("Cannot handle non-string output.");let d;if(ru(c)){if(typeof c.content!="string")throw new Error("Cannot handle non-string message output.");d=new ts({message:c,text:c.content})}else if(Nn(c)){if(typeof c.content!="string")throw new Error("Cannot handle non-string message output.");d=new ts({message:sF(c),text:c.content})}else d=new om({text:c});i===void 0?i=d:i=i.concat(d);let f=yield new ge(this.parsePartialResult([i]));f!=null&&!IF(f,t)&&(this.diff?yield this._diff(t,f):yield f,t=f)}}catch{l=[s]}finally{try{o&&(s=r.return)&&(yield new ge(s.call(r)))}finally{if(l)throw l[0]}}})}getFormatInstructions(){return""}};var tR=class extends Ia{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","bytes"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"textEncoder",{enumerable:!0,configurable:!0,writable:!0,value:new TextEncoder})}static lc_name(){return"BytesOutputParser"}parse(e){return Promise.resolve(this.textEncoder.encode(e))}getFormatInstructions(){return""}};var yd=class extends Ia{constructor(){super(...arguments),Object.defineProperty(this,"re",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_transform(e){return yt(this,null,function*(){let t="";try{for(var i=ze(e),r,o,s;r=!(o=yield new ge(i.next())).done;r=!1){let l=o.value;if(typeof l=="string"?t+=l:t+=l.content,this.re){let c=[...t.matchAll(this.re)];if(c.length>1){let d=0;for(let f of c.slice(0,-1))yield[f[1]],d+=(f.index??0)+f[0].length;t=t.slice(d)}}else{let c=yield new ge(this.parse(t));if(c.length>1){for(let d of c.slice(0,-1))yield[d];t=c[c.length-1]}}}}catch{s=[o]}finally{try{r&&(o=i.return)&&(yield new ge(o.call(i)))}finally{if(s)throw s[0]}}for(let l of yield new ge(this.parse(t)))yield[l]})}},nR=class extends yd{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","list"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"CommaSeparatedListOutputParser"}parse(e){return E(this,null,function*(){try{return e.trim().split(",").map(t=>t.trim())}catch{throw new ro(`Could not parse output: ${e}`,e)}})}getFormatInstructions(){return"Your response should be a list of comma separated values, eg: `foo, bar, baz`"}},iR=class extends yd{constructor({length:e,separator:t}){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","list"]}),Object.defineProperty(this,"length",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"separator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.length=e,this.separator=t||","}parse(e){return E(this,null,function*(){try{let t=e.trim().split(this.separator).map(i=>i.trim());if(this.length!==void 0&&t.length!==this.length)throw new ro(`Incorrect number of items. Expected ${this.length}, got ${t.length}.`);return t}catch(t){throw Object.getPrototypeOf(t)===ro.prototype?t:new ro(`Could not parse output: ${e}`)}})}getFormatInstructions(){return`Your response should be a list of ${this.length===void 0?"":`${this.length} `}items separated by "${this.separator}" (eg: \`foo${this.separator} bar${this.separator} baz\`)`}},rR=class extends yd{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","list"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"re",{enumerable:!0,configurable:!0,writable:!0,value:/\d+\.\s([^\n]+)/g})}static lc_name(){return"NumberedListOutputParser"}getFormatInstructions(){return`Your response should be a numbered list with each item on a new line. For example: 

1. foo

2. bar

3. baz`}parse(e){return E(this,null,function*(){return[...e.matchAll(this.re)??[]].map(t=>t[1])})}},oR=class extends yd{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","list"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"re",{enumerable:!0,configurable:!0,writable:!0,value:/^\s*[-*]\s([^\n]+)$/gm})}static lc_name(){return"NumberedListOutputParser"}getFormatInstructions(){return`Your response should be a numbered list with each item on a new line. For example: 

1. foo

2. bar

3. baz`}parse(e){return E(this,null,function*(){return[...e.matchAll(this.re)??[]].map(t=>t[1])})}};var sR=class extends Ia{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","string"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"StrOutputParser"}parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}_textContentToString(e){return e.text}_imageUrlContentToString(e){throw new Error('Cannot coerce a multimodal "image_url" message part into a string.')}_messageContentComplexToString(e){switch(e.type){case"text":case"text_delta":if("text"in e)return this._textContentToString(e);break;case"image_url":if("image_url"in e)return this._imageUrlContentToString(e);break;default:throw new Error(`Cannot coerce "${e.type}" message part into a string.`)}throw new Error(`Invalid content type: ${e.type}`)}_baseMessageContentToString(e){return e.reduce((t,i)=>t+this._messageContentComplexToString(i),"")}};var wd=class extends Ea{static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","structured"]})}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){let t=C.object(Object.fromEntries(Object.entries(e).map(([i,r])=>[i,C.string().describe(r)])));return new this(t)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify(Bi(this.schema))}
\`\`\`
`}parse(e){return E(this,null,function*(){try{let i=(e.includes("```")?e.trim().split(/```(?:json)?/)[1]:e.trim()).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(r,o)=>`"${o.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return yield am(this.schema,JSON.parse(i))}catch(t){throw new ro(`Failed to parse. Text: "${e}". Error: ${t}`,e)}})}},gE=class extends wd{static lc_name(){return"JsonMarkdownStructuredOutputParser"}getFormatInstructions(e){let t=e?.interpolationDepth??1;if(t<1)throw new Error("f string interpolation depth must be at least 1");return`Return a markdown code snippet with a JSON object formatted to look like:
\`\`\`json
${this._schemaToInstruction(Bi(this.schema)).replaceAll("{","{".repeat(t)).replaceAll("}","}".repeat(t))}
\`\`\``}_schemaToInstruction(e,t=2){let i=e;if("type"in i){let r=!1,o;if(Array.isArray(i.type)){let c=i.type.findIndex(d=>d==="null");c!==-1&&(r=!0,i.type.splice(c,1)),o=i.type.join(" | ")}else o=i.type;if(i.type==="object"&&i.properties){let c=i.description?` // ${i.description}`:"";return`{
${Object.entries(i.properties).map(([f,p])=>{let g=i.required?.includes(f)?"":" (optional)";return`${" ".repeat(t)}"${f}": ${this._schemaToInstruction(p,t+2)}${g}`}).join(`
`)}
${" ".repeat(t-2)}}${c}`}if(i.type==="array"&&i.items){let c=i.description?` // ${i.description}`:"";return`array[
${" ".repeat(t)}${this._schemaToInstruction(i.items,t+2)}
${" ".repeat(t-2)}] ${c}`}let s=r?" (nullable)":"",l=i.description?` // ${i.description}`:"";return`${o}${l}${s}`}if("anyOf"in i)return i.anyOf.map(r=>this._schemaToInstruction(r,t)).join(`
${" ".repeat(t-2)}`);throw new Error("unsupported schema type")}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){let t=C.object(Object.fromEntries(Object.entries(e).map(([i,r])=>[i,C.string().describe(r)])));return new this(t)}},aR=class extends Ea{constructor({inputSchema:e}){super(...arguments),Object.defineProperty(this,"structuredInputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.structuredInputParser=new gE(e)}parse(e){return E(this,null,function*(){let t;try{t=yield this.structuredInputParser.parse(e)}catch(i){throw new ro(`Failed to parse. Text: "${e}". Error: ${i}`,e)}return this.outputProcessor(t)})}getFormatInstructions(){return this.structuredInputParser.getFormatInstructions()}};var lR={};yn(lR,{applyPatch:()=>cF,compare:()=>Qd});var Sp=class extends wl{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"JsonOutputParser"}_diff(e,t){if(t)return e?Qd(e,t):[{op:"replace",path:"",value:t}]}parsePartialResult(e){return E(this,null,function*(){return db(e[0].text)})}parse(e){return E(this,null,function*(){return db(e,JSON.parse)})}getFormatInstructions(){return""}};var Qce=function(){let n={};n.parser=function(M,A){return new t(M,A)},n.SAXParser=t,n.SAXStream=d,n.createStream=c,n.MAX_BUFFER_LENGTH=65536;let e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function t(M,A){if(!(this instanceof t))return new t(M,A);var le=this;r(le),le.q=le.c="",le.bufferCheckPosition=n.MAX_BUFFER_LENGTH,le.opt=A||{},le.opt.lowercase=le.opt.lowercase||le.opt.lowercasetags,le.looseCase=le.opt.lowercase?"toLowerCase":"toUpperCase",le.tags=[],le.closed=le.closedRoot=le.sawRoot=!1,le.tag=le.error=null,le.strict=!!M,le.noscript=!!(M||le.opt.noscript),le.state=P.BEGIN,le.strictEntities=le.opt.strictEntities,le.ENTITIES=le.strictEntities?Object.create(n.XML_ENTITIES):Object.create(n.ENTITIES),le.attribList=[],le.opt.xmlns&&(le.ns=Object.create(_)),le.trackPosition=le.opt.position!==!1,le.trackPosition&&(le.position=le.line=le.column=0),se(le,"onready")}Object.create||(Object.create=function(M){function A(){}A.prototype=M;var le=new A;return le}),Object.keys||(Object.keys=function(M){var A=[];for(var le in M)M.hasOwnProperty(le)&&A.push(le);return A});function i(M){for(var A=Math.max(n.MAX_BUFFER_LENGTH,10),le=0,H=0,qe=e.length;H<qe;H++){var gt=M[e[H]].length;if(gt>A)switch(e[H]){case"textNode":me(M);break;case"cdata":ue(M,"oncdata",M.cdata),M.cdata="";break;case"script":ue(M,"onscript",M.script),M.script="";break;default:Y(M,"Max buffer length exceeded: "+e[H])}le=Math.max(le,gt)}var dn=n.MAX_BUFFER_LENGTH-le;M.bufferCheckPosition=dn+M.position}function r(M){for(var A=0,le=e.length;A<le;A++)M[e[A]]=""}function o(M){me(M),M.cdata!==""&&(ue(M,"oncdata",M.cdata),M.cdata=""),M.script!==""&&(ue(M,"onscript",M.script),M.script="")}t.prototype={end:function(){ne(this)},write:tn,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var s=ReadableStream;s||(s=function(){});var l=n.EVENTS.filter(function(M){return M!=="error"&&M!=="end"});function c(M,A){return new d(M,A)}function d(M,A){if(!(this instanceof d))return new d(M,A);s.apply(this),this._parser=new t(M,A),this.writable=!0,this.readable=!0;var le=this;this._parser.onend=function(){le.emit("end")},this._parser.onerror=function(H){le.emit("error",H),le._parser.error=null},this._decoder=null,l.forEach(function(H){Object.defineProperty(le,"on"+H,{get:function(){return le._parser["on"+H]},set:function(qe){if(!qe)return le.removeAllListeners(H),le._parser["on"+H]=qe,qe;le.on(H,qe)},enumerable:!0,configurable:!1})})}d.prototype=Object.create(s.prototype,{constructor:{value:d}}),d.prototype.write=function(M){return this._parser.write(M.toString()),this.emit("data",M),!0},d.prototype.end=function(M){return M&&M.length&&this.write(M),this._parser.end(),!0},d.prototype.on=function(M,A){var le=this;return!le._parser["on"+M]&&l.indexOf(M)!==-1&&(le._parser["on"+M]=function(){var H=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);H.splice(0,0,M),le.emit.apply(le,H)}),s.prototype.on.call(le,M,A)};var f="[CDATA[",p="DOCTYPE",g="http://www.w3.org/XML/1998/namespace",m="http://www.w3.org/2000/xmlns/",_={xml:g,xmlns:m},y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,w=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,I=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,k=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function O(M){return M===" "||M===`
`||M==="\r"||M==="	"}function j(M){return M==='"'||M==="'"}function q(M){return M===">"||O(M)}function V(M,A){return M.test(A)}function re(M,A){return!V(M,A)}var P=0;n.STATE={BEGIN:P++,BEGIN_WHITESPACE:P++,TEXT:P++,TEXT_ENTITY:P++,OPEN_WAKA:P++,SGML_DECL:P++,SGML_DECL_QUOTED:P++,DOCTYPE:P++,DOCTYPE_QUOTED:P++,DOCTYPE_DTD:P++,DOCTYPE_DTD_QUOTED:P++,COMMENT_STARTING:P++,COMMENT:P++,COMMENT_ENDING:P++,COMMENT_ENDED:P++,CDATA:P++,CDATA_ENDING:P++,CDATA_ENDING_2:P++,PROC_INST:P++,PROC_INST_BODY:P++,PROC_INST_ENDING:P++,OPEN_TAG:P++,OPEN_TAG_SLASH:P++,ATTRIB:P++,ATTRIB_NAME:P++,ATTRIB_NAME_SAW_WHITE:P++,ATTRIB_VALUE:P++,ATTRIB_VALUE_QUOTED:P++,ATTRIB_VALUE_CLOSED:P++,ATTRIB_VALUE_UNQUOTED:P++,ATTRIB_VALUE_ENTITY_Q:P++,ATTRIB_VALUE_ENTITY_U:P++,CLOSE_TAG:P++,CLOSE_TAG_SAW_WHITE:P++,SCRIPT:P++,SCRIPT_ENDING:P++},n.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach(function(M){var A=n.ENTITIES[M],le=typeof A=="number"?String.fromCharCode(A):A;n.ENTITIES[M]=le});for(var X in n.STATE)n.STATE[n.STATE[X]]=X;P=n.STATE;function se(M,A,le){M[A]&&M[A](le)}function ue(M,A,le){M.textNode&&me(M),se(M,A,le)}function me(M){M.textNode=G(M.opt,M.textNode),M.textNode&&se(M,"ontext",M.textNode),M.textNode=""}function G(M,A){return M.trim&&(A=A.trim()),M.normalize&&(A=A.replace(/\s+/g," ")),A}function Y(M,A){return me(M),M.trackPosition&&(A+=`
Line: `+M.line+`
Column: `+M.column+`
Char: `+M.c),A=new Error(A),M.error=A,se(M,"onerror",A),M}function ne(M){return M.sawRoot&&!M.closedRoot&&W(M,"Unclosed root tag"),M.state!==P.BEGIN&&M.state!==P.BEGIN_WHITESPACE&&M.state!==P.TEXT&&Y(M,"Unexpected end"),me(M),M.c="",M.closed=!0,se(M,"onend"),t.call(M,M.strict,M.opt),M}function W(M,A){if(typeof M!="object"||!(M instanceof t))throw new Error("bad call to strictFail");M.strict&&Y(M,A)}function he(M){M.strict||(M.tagName=M.tagName[M.looseCase]());var A=M.tags[M.tags.length-1]||M,le=M.tag={name:M.tagName,attributes:{}};M.opt.xmlns&&(le.ns=A.ns),M.attribList.length=0,ue(M,"onopentagstart",le)}function ie(M,A){var le=M.indexOf(":"),H=le<0?["",M]:M.split(":"),qe=H[0],gt=H[1];return A&&M==="xmlns"&&(qe="xmlns",gt=""),{prefix:qe,local:gt}}function be(M){if(M.strict||(M.attribName=M.attribName[M.looseCase]()),M.attribList.indexOf(M.attribName)!==-1||M.tag.attributes.hasOwnProperty(M.attribName)){M.attribName=M.attribValue="";return}if(M.opt.xmlns){var A=ie(M.attribName,!0),le=A.prefix,H=A.local;if(le==="xmlns")if(H==="xml"&&M.attribValue!==g)W(M,"xml: prefix must be bound to "+g+`
Actual: `+M.attribValue);else if(H==="xmlns"&&M.attribValue!==m)W(M,"xmlns: prefix must be bound to "+m+`
Actual: `+M.attribValue);else{var qe=M.tag,gt=M.tags[M.tags.length-1]||M;qe.ns===gt.ns&&(qe.ns=Object.create(gt.ns)),qe.ns[H]=M.attribValue}M.attribList.push([M.attribName,M.attribValue])}else M.tag.attributes[M.attribName]=M.attribValue,ue(M,"onattribute",{name:M.attribName,value:M.attribValue});M.attribName=M.attribValue=""}function xe(M,A){if(M.opt.xmlns){var le=M.tag,H=ie(M.tagName);le.prefix=H.prefix,le.local=H.local,le.uri=le.ns[H.prefix]||"",le.prefix&&!le.uri&&(W(M,"Unbound namespace prefix: "+JSON.stringify(M.tagName)),le.uri=H.prefix);var qe=M.tags[M.tags.length-1]||M;le.ns&&qe.ns!==le.ns&&Object.keys(le.ns).forEach(function(di){ue(M,"onopennamespace",{prefix:di,uri:le.ns[di]})});for(var gt=0,dn=M.attribList.length;gt<dn;gt++){var Yt=M.attribList[gt],pt=Yt[0],Ei=Yt[1],nn=ie(pt,!0),Ii=nn.prefix,Io=nn.local,zn=Ii===""?"":le.ns[Ii]||"",Si={name:pt,value:Ei,prefix:Ii,local:Io,uri:zn};Ii&&Ii!=="xmlns"&&!zn&&(W(M,"Unbound namespace prefix: "+JSON.stringify(Ii)),Si.uri=Ii),M.tag.attributes[pt]=Si,ue(M,"onattribute",Si)}M.attribList.length=0}M.tag.isSelfClosing=!!A,M.sawRoot=!0,M.tags.push(M.tag),ue(M,"onopentag",M.tag),A||(!M.noscript&&M.tagName.toLowerCase()==="script"?M.state=P.SCRIPT:M.state=P.TEXT,M.tag=null,M.tagName=""),M.attribName=M.attribValue="",M.attribList.length=0}function ut(M){if(!M.tagName){W(M,"Weird empty close tag."),M.textNode+="</>",M.state=P.TEXT;return}if(M.script){if(M.tagName!=="script"){M.script+="</"+M.tagName+">",M.tagName="",M.state=P.SCRIPT;return}ue(M,"onscript",M.script),M.script=""}var A=M.tags.length,le=M.tagName;M.strict||(le=le[M.looseCase]());for(var H=le;A--;){var qe=M.tags[A];if(qe.name!==H)W(M,"Unexpected close tag");else break}if(A<0){W(M,"Unmatched closing tag: "+M.tagName),M.textNode+="</"+M.tagName+">",M.state=P.TEXT;return}M.tagName=le;for(var gt=M.tags.length;gt-- >A;){var dn=M.tag=M.tags.pop();M.tagName=M.tag.name,ue(M,"onclosetag",M.tagName);var Yt={};for(var pt in dn.ns)Yt[pt]=dn.ns[pt];var Ei=M.tags[M.tags.length-1]||M;M.opt.xmlns&&dn.ns!==Ei.ns&&Object.keys(dn.ns).forEach(function(nn){var Ii=dn.ns[nn];ue(M,"onclosenamespace",{prefix:nn,uri:Ii})})}A===0&&(M.closedRoot=!0),M.tagName=M.attribValue=M.attribName="",M.attribList.length=0,M.state=P.TEXT}function nt(M){var A=M.entity,le=A.toLowerCase(),H,qe="";return M.ENTITIES[A]?M.ENTITIES[A]:M.ENTITIES[le]?M.ENTITIES[le]:(A=le,A.charAt(0)==="#"&&(A.charAt(1)==="x"?(A=A.slice(2),H=parseInt(A,16),qe=H.toString(16)):(A=A.slice(1),H=parseInt(A,10),qe=H.toString(10))),A=A.replace(/^0+/,""),isNaN(H)||qe.toLowerCase()!==A?(W(M,"Invalid character entity"),"&"+M.entity+";"):String.fromCodePoint(H))}function Je(M,A){A==="<"?(M.state=P.OPEN_WAKA,M.startTagPosition=M.position):O(A)||(W(M,"Non-whitespace before first tag."),M.textNode=A,M.state=P.TEXT)}function Ee(M,A){var le="";return A<M.length&&(le=M.charAt(A)),le}function tn(M){var A=this;if(this.error)throw this.error;if(A.closed)return Y(A,"Cannot write after close. Assign an onready handler.");if(M===null)return ne(A);typeof M=="object"&&(M=M.toString());for(var le=0,H="";H=Ee(M,le++),A.c=H,!!H;)switch(A.trackPosition&&(A.position++,H===`
`?(A.line++,A.column=0):A.column++),A.state){case P.BEGIN:if(A.state=P.BEGIN_WHITESPACE,H==="\uFEFF")continue;Je(A,H);continue;case P.BEGIN_WHITESPACE:Je(A,H);continue;case P.TEXT:if(A.sawRoot&&!A.closedRoot){for(var qe=le-1;H&&H!=="<"&&H!=="&";)H=Ee(M,le++),H&&A.trackPosition&&(A.position++,H===`
`?(A.line++,A.column=0):A.column++);A.textNode+=M.substring(qe,le-1)}H==="<"&&!(A.sawRoot&&A.closedRoot&&!A.strict)?(A.state=P.OPEN_WAKA,A.startTagPosition=A.position):(!O(H)&&(!A.sawRoot||A.closedRoot)&&W(A,"Text data outside of root node."),H==="&"?A.state=P.TEXT_ENTITY:A.textNode+=H);continue;case P.SCRIPT:H==="<"?A.state=P.SCRIPT_ENDING:A.script+=H;continue;case P.SCRIPT_ENDING:H==="/"?A.state=P.CLOSE_TAG:(A.script+="<"+H,A.state=P.SCRIPT);continue;case P.OPEN_WAKA:if(H==="!")A.state=P.SGML_DECL,A.sgmlDecl="";else if(!O(H))if(V(y,H))A.state=P.OPEN_TAG,A.tagName=H;else if(H==="/")A.state=P.CLOSE_TAG,A.tagName="";else if(H==="?")A.state=P.PROC_INST,A.procInstName=A.procInstBody="";else{if(W(A,"Unencoded <"),A.startTagPosition+1<A.position){var gt=A.position-A.startTagPosition;H=new Array(gt).join(" ")+H}A.textNode+="<"+H,A.state=P.TEXT}continue;case P.SGML_DECL:(A.sgmlDecl+H).toUpperCase()===f?(ue(A,"onopencdata"),A.state=P.CDATA,A.sgmlDecl="",A.cdata=""):A.sgmlDecl+H==="--"?(A.state=P.COMMENT,A.comment="",A.sgmlDecl=""):(A.sgmlDecl+H).toUpperCase()===p?(A.state=P.DOCTYPE,(A.doctype||A.sawRoot)&&W(A,"Inappropriately located doctype declaration"),A.doctype="",A.sgmlDecl=""):H===">"?(ue(A,"onsgmldeclaration",A.sgmlDecl),A.sgmlDecl="",A.state=P.TEXT):(j(H)&&(A.state=P.SGML_DECL_QUOTED),A.sgmlDecl+=H);continue;case P.SGML_DECL_QUOTED:H===A.q&&(A.state=P.SGML_DECL,A.q=""),A.sgmlDecl+=H;continue;case P.DOCTYPE:H===">"?(A.state=P.TEXT,ue(A,"ondoctype",A.doctype),A.doctype=!0):(A.doctype+=H,H==="["?A.state=P.DOCTYPE_DTD:j(H)&&(A.state=P.DOCTYPE_QUOTED,A.q=H));continue;case P.DOCTYPE_QUOTED:A.doctype+=H,H===A.q&&(A.q="",A.state=P.DOCTYPE);continue;case P.DOCTYPE_DTD:A.doctype+=H,H==="]"?A.state=P.DOCTYPE:j(H)&&(A.state=P.DOCTYPE_DTD_QUOTED,A.q=H);continue;case P.DOCTYPE_DTD_QUOTED:A.doctype+=H,H===A.q&&(A.state=P.DOCTYPE_DTD,A.q="");continue;case P.COMMENT:H==="-"?A.state=P.COMMENT_ENDING:A.comment+=H;continue;case P.COMMENT_ENDING:H==="-"?(A.state=P.COMMENT_ENDED,A.comment=G(A.opt,A.comment),A.comment&&ue(A,"oncomment",A.comment),A.comment=""):(A.comment+="-"+H,A.state=P.COMMENT);continue;case P.COMMENT_ENDED:H!==">"?(W(A,"Malformed comment"),A.comment+="--"+H,A.state=P.COMMENT):A.state=P.TEXT;continue;case P.CDATA:H==="]"?A.state=P.CDATA_ENDING:A.cdata+=H;continue;case P.CDATA_ENDING:H==="]"?A.state=P.CDATA_ENDING_2:(A.cdata+="]"+H,A.state=P.CDATA);continue;case P.CDATA_ENDING_2:H===">"?(A.cdata&&ue(A,"oncdata",A.cdata),ue(A,"onclosecdata"),A.cdata="",A.state=P.TEXT):H==="]"?A.cdata+="]":(A.cdata+="]]"+H,A.state=P.CDATA);continue;case P.PROC_INST:H==="?"?A.state=P.PROC_INST_ENDING:O(H)?A.state=P.PROC_INST_BODY:A.procInstName+=H;continue;case P.PROC_INST_BODY:if(!A.procInstBody&&O(H))continue;H==="?"?A.state=P.PROC_INST_ENDING:A.procInstBody+=H;continue;case P.PROC_INST_ENDING:H===">"?(ue(A,"onprocessinginstruction",{name:A.procInstName,body:A.procInstBody}),A.procInstName=A.procInstBody="",A.state=P.TEXT):(A.procInstBody+="?"+H,A.state=P.PROC_INST_BODY);continue;case P.OPEN_TAG:V(w,H)?A.tagName+=H:(he(A),H===">"?xe(A):H==="/"?A.state=P.OPEN_TAG_SLASH:(O(H)||W(A,"Invalid character in tag name"),A.state=P.ATTRIB));continue;case P.OPEN_TAG_SLASH:H===">"?(xe(A,!0),ut(A)):(W(A,"Forward-slash in opening tag not followed by >"),A.state=P.ATTRIB);continue;case P.ATTRIB:if(O(H))continue;H===">"?xe(A):H==="/"?A.state=P.OPEN_TAG_SLASH:V(y,H)?(A.attribName=H,A.attribValue="",A.state=P.ATTRIB_NAME):W(A,"Invalid attribute name");continue;case P.ATTRIB_NAME:H==="="?A.state=P.ATTRIB_VALUE:H===">"?(W(A,"Attribute without value"),A.attribValue=A.attribName,be(A),xe(A)):O(H)?A.state=P.ATTRIB_NAME_SAW_WHITE:V(w,H)?A.attribName+=H:W(A,"Invalid attribute name");continue;case P.ATTRIB_NAME_SAW_WHITE:if(H==="=")A.state=P.ATTRIB_VALUE;else{if(O(H))continue;W(A,"Attribute without value"),A.tag.attributes[A.attribName]="",A.attribValue="",ue(A,"onattribute",{name:A.attribName,value:""}),A.attribName="",H===">"?xe(A):V(y,H)?(A.attribName=H,A.state=P.ATTRIB_NAME):(W(A,"Invalid attribute name"),A.state=P.ATTRIB)}continue;case P.ATTRIB_VALUE:if(O(H))continue;j(H)?(A.q=H,A.state=P.ATTRIB_VALUE_QUOTED):(W(A,"Unquoted attribute value"),A.state=P.ATTRIB_VALUE_UNQUOTED,A.attribValue=H);continue;case P.ATTRIB_VALUE_QUOTED:if(H!==A.q){H==="&"?A.state=P.ATTRIB_VALUE_ENTITY_Q:A.attribValue+=H;continue}be(A),A.q="",A.state=P.ATTRIB_VALUE_CLOSED;continue;case P.ATTRIB_VALUE_CLOSED:O(H)?A.state=P.ATTRIB:H===">"?xe(A):H==="/"?A.state=P.OPEN_TAG_SLASH:V(y,H)?(W(A,"No whitespace between attributes"),A.attribName=H,A.attribValue="",A.state=P.ATTRIB_NAME):W(A,"Invalid attribute name");continue;case P.ATTRIB_VALUE_UNQUOTED:if(!q(H)){H==="&"?A.state=P.ATTRIB_VALUE_ENTITY_U:A.attribValue+=H;continue}be(A),H===">"?xe(A):A.state=P.ATTRIB;continue;case P.CLOSE_TAG:if(A.tagName)H===">"?ut(A):V(w,H)?A.tagName+=H:A.script?(A.script+="</"+A.tagName,A.tagName="",A.state=P.SCRIPT):(O(H)||W(A,"Invalid tagname in closing tag"),A.state=P.CLOSE_TAG_SAW_WHITE);else{if(O(H))continue;re(y,H)?A.script?(A.script+="</"+H,A.state=P.SCRIPT):W(A,"Invalid tagname in closing tag."):A.tagName=H}continue;case P.CLOSE_TAG_SAW_WHITE:if(O(H))continue;H===">"?ut(A):W(A,"Invalid characters in closing tag");continue;case P.TEXT_ENTITY:case P.ATTRIB_VALUE_ENTITY_Q:case P.ATTRIB_VALUE_ENTITY_U:var dn,Yt;switch(A.state){case P.TEXT_ENTITY:dn=P.TEXT,Yt="textNode";break;case P.ATTRIB_VALUE_ENTITY_Q:dn=P.ATTRIB_VALUE_QUOTED,Yt="attribValue";break;case P.ATTRIB_VALUE_ENTITY_U:dn=P.ATTRIB_VALUE_UNQUOTED,Yt="attribValue";break}if(H===";")if(A.opt.unparsedEntities){var pt=nt(A);A.entity="",A.state=dn,A.write(pt)}else A[Yt]+=nt(A),A.entity="",A.state=dn;else V(A.entity.length?k:I,H)?A.entity+=H:(W(A,"Invalid character in entity name"),A[Yt]+="&"+A.entity+H,A.entity="",A.state=dn);continue;default:throw new Error(A,"Unknown state: "+A.state)}return A.position>=A.bufferCheckPosition&&i(A),A}return String.fromCodePoint||function(){var M=String.fromCharCode,A=Math.floor,le=function(){var H=16384,qe=[],gt,dn,Yt=-1,pt=arguments.length;if(!pt)return"";for(var Ei="";++Yt<pt;){var nn=Number(arguments[Yt]);if(!isFinite(nn)||nn<0||nn>1114111||A(nn)!==nn)throw RangeError("Invalid code point: "+nn);nn<=65535?qe.push(nn):(nn-=65536,gt=(nn>>10)+55296,dn=nn%1024+56320,qe.push(gt,dn)),(Yt+1===pt||qe.length>H)&&(Ei+=M.apply(null,qe),qe.length=0)}return Ei};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:le,configurable:!0,writable:!0}):String.fromCodePoint=le}(),n},R5=Qce();var cR=`The output should be formatted as a XML file.
1. Output should conform to the tags below. 
2. If tags are not given, make them on your own.
3. Remember to always open and close all the tags.

As an example, for the tags ["foo", "bar", "baz"]:
1. String "<foo>
   <bar>
      <baz></baz>
   </bar>
</foo>" is a well-formatted instance of the schema. 
2. String "<foo>
   <bar>
   </foo>" is a badly-formatted instance.
3. String "<foo>
   <tag>
   </tag>
</foo>" is a badly-formatted instance.

Here are the output tags:
\`\`\`
{tags}
\`\`\``,uR=class extends wl{constructor(e){super(e),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.tags=e?.tags}static lc_name(){return"XMLOutputParser"}_diff(e,t){if(t)return e?Qd(e,t):[{op:"replace",path:"",value:t}]}parsePartialResult(e){return E(this,null,function*(){return dR(e[0].text)})}parse(e){return E(this,null,function*(){return dR(e)})}getFormatInstructions(){return!!(this.tags&&this.tags.length>0)?cR.replace("{tags}",this.tags?.join(", ")??""):cR}},Xce=n=>n.split(`
`).map(e=>e.replace(/^\s+/,"")).join(`
`).trim(),N5=n=>{if(Object.keys(n).length===0)return{};let e={};return n.children.length>0?(e[n.name]=n.children.map(N5),e):(e[n.name]=n.text??void 0,e)};function dR(n){let e=Xce(n),t=R5.parser(!0),i={},r=[];t.onopentag=l=>{let c={name:l.name,attributes:l.attributes,children:[],text:"",isSelfClosing:l.isSelfClosing};r.length>0?r[r.length-1].children.push(c):i=c,l.isSelfClosing||r.push(c)},t.onclosetag=()=>{if(r.length>0){let l=r.pop();r.length===0&&l&&(i=l)}},t.ontext=l=>{if(r.length>0){let c=r[r.length-1];c.text+=l}},t.onattribute=l=>{if(r.length>0){let c=r[r.length-1];c.attributes[l.name]=l.value}};let o=/```(xml)?(.*)```/s.exec(e),s=o?o[2]:e;return t.write(s).close(),i&&i.name==="?xml"&&(i=i.children[0]),N5(i)}function _E(n,e){if(n.function===void 0)return;let t;if(e?.partial)try{t=hb(n.function.arguments??"{}")}catch{return}else try{t=JSON.parse(n.function.arguments)}catch(r){throw new ro([`Function "${n.function.name}" arguments:`,"",n.function.arguments,"","are not valid JSON.",`Error: ${r.message}`].join(`
`))}let i={name:n.function.name,args:t,type:"tool_call"};return e?.returnId&&(i.id=n.id),i}function F5(n){if(n.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:n.id,type:"function",function:{name:n.name,arguments:JSON.stringify(n.args)}}}function pR(n,e){return{name:n.function?.name,args:n.function?.arguments,id:n.id,error:e,type:"invalid_tool_call"}}var fR=class extends wl{static lc_name(){return"JsonOutputToolsParser"}constructor(e){super(e),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.returnId=e?.returnId??this.returnId}_diff(){throw new Error("Not supported.")}parse(){return E(this,null,function*(){throw new Error("Not implemented.")})}parseResult(e){return E(this,null,function*(){return yield this.parsePartialResult(e,!1)})}parsePartialResult(e,t=!0){return E(this,null,function*(){let i=e[0].message,r;if(Wr(i)&&i.tool_calls?.length?r=i.tool_calls.map(s=>{let d=s,{id:l}=d,c=Be(d,["id"]);return this.returnId?b({id:l},c):c}):i.additional_kwargs.tool_calls!==void 0&&(r=JSON.parse(JSON.stringify(i.additional_kwargs.tool_calls)).map(l=>_E(l,{returnId:this.returnId,partial:t}))),!r)return[];let o=[];for(let s of r)if(s!==void 0){let l={type:s.name,args:s.args,id:s.id};o.push(l)}return o})}},ov=class n extends fR{static lc_name(){return"JsonOutputKeyToolsParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}_validateResult(e){return E(this,null,function*(){if(this.zodSchema===void 0)return e;let t=yield rS(this.zodSchema,e);if(t.success)return t.data;throw new ro(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(t.error?.issues)}`,JSON.stringify(e,null,2))})}parsePartialResult(e){return E(this,null,function*(){let i=(yield ji(n.prototype,this,"parsePartialResult").call(this,e)).filter(o=>o.type===this.keyName),r=i;if(i.length)return this.returnId||(r=i.map(o=>o.args)),this.returnSingle?r[0]:r})}parseResult(e){return E(this,null,function*(){let i=(yield ji(n.prototype,this,"parsePartialResult").call(this,e,!1)).filter(s=>s.type===this.keyName),r=i;return i.length?(this.returnId||(r=i.map(s=>s.args)),this.returnSingle?this._validateResult(r[0]):yield Promise.all(r.map(s=>this._validateResult(s)))):void 0})}};var mR={};yn(mR,{extendInteropZodObject:()=>sS,getInteropZodDefaultGetter:()=>DF,getInteropZodObjectShape:()=>_b,getSchemaDescription:()=>Bl,interopParse:()=>lm,interopParseAsync:()=>am,interopSafeParse:()=>_W,interopSafeParseAsync:()=>rS,interopZodObjectPartial:()=>cm,interopZodObjectPassthrough:()=>CW,interopZodObjectStrict:()=>xW,interopZodTransformInputSchema:()=>EW,isInteropZodObject:()=>$s,isInteropZodSchema:()=>po,isShapelessZodSchema:()=>vW,isSimpleStringZodSchema:()=>oS,isZodArrayV4:()=>wW,isZodObjectV3:()=>bW,isZodObjectV4:()=>yW,isZodSchema:()=>gW,isZodSchemaV3:()=>sm,isZodSchemaV4:()=>iS});function xd(n){let{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:t,azureOpenAIApiKey:i,azureOpenAIBasePath:r,baseURL:o,azureADTokenProvider:s,azureOpenAIEndpoint:l}=n;if((i||s)&&r&&e)return`${r}/${e}`;if((i||s)&&l&&e)return`${l}/openai/deployments/${e}`;if(i||s){if(!t)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${t}.openai.azure.com/openai/deployments/${e}`}return o}var gR={};yn(gR,{convertToOpenAIFunction:()=>vE,convertToOpenAITool:()=>bE,isLangChainTool:()=>Vc,isRunnableToolLike:()=>av,isStructuredTool:()=>sv,isStructuredToolParams:()=>lv});function sv(n){return n!==void 0&&Array.isArray(n.lc_namespace)}function av(n){return n!==void 0&&$t.isRunnable(n)&&"lc_name"in n.constructor&&typeof n.constructor.lc_name=="function"&&n.constructor.lc_name()==="RunnableToolLike"}function lv(n){return!!n&&typeof n=="object"&&"name"in n&&"schema"in n&&(po(n.schema)||n.schema!=null&&typeof n.schema=="object"&&"type"in n.schema&&typeof n.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(n.schema.type))}function Vc(n){return lv(n)||av(n)||sv(n)}function vE(n,e){let t=typeof e=="number"?void 0:e;return b({name:n.name,description:n.description,parameters:Bi(n.schema)},t?.strict!==void 0?{strict:t.strict}:{})}function bE(n,e){let t=typeof e=="number"?void 0:e,i;return Vc(n)?i={type:"function",function:vE(n)}:i=n,t?.strict!==void 0&&(i.function.strict=t.strict),i}var j5=Symbol("Let zodToJsonSchema decide on which parser to use"),L5={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},B5=n=>typeof n=="string"?S(b({},L5),{basePath:["#"],definitions:{},name:n}):b(S(b({},L5),{basePath:["#"],definitions:{}}),n);var cv=n=>"_def"in n?n._def:n;function V5(n){if(!n)return!0;for(let e in n)return!1;return!0}var z5=n=>{let e=B5(n),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return S(b({},e),{currentPath:t,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(e.definitions).map(([i,r])=>[cv(r),{def:cv(r),path:[...e.basePath,e.definitionPath,i],jsonSchema:void 0}]))})};function _R(n,e,t,i){i?.errorMessages&&t&&(n.errorMessage=S(b({},n.errorMessage),{[e]:t}))}function Zt(n,e,t,i,r){n[e]=t,_R(n,e,i,r)}function $5(){return{}}function U5(n,e){let t={type:"array"};return n.type?._def?.typeName!==Dt.ZodAny&&(t.items=tt(n.type._def,S(b({},e),{currentPath:[...e.currentPath,"items"]}))),n.minLength&&Zt(t,"minItems",n.minLength.value,n.minLength.message,e),n.maxLength&&Zt(t,"maxItems",n.maxLength.value,n.maxLength.message,e),n.exactLength&&(Zt(t,"minItems",n.exactLength.value,n.exactLength.message,e),Zt(t,"maxItems",n.exactLength.value,n.exactLength.message,e)),t}function H5(n,e){let t={type:"integer",format:"int64"};if(!n.checks)return t;for(let i of n.checks)switch(i.kind){case"min":e.target==="jsonSchema7"?i.inclusive?Zt(t,"minimum",i.value,i.message,e):Zt(t,"exclusiveMinimum",i.value,i.message,e):(i.inclusive||(t.exclusiveMinimum=!0),Zt(t,"minimum",i.value,i.message,e));break;case"max":e.target==="jsonSchema7"?i.inclusive?Zt(t,"maximum",i.value,i.message,e):Zt(t,"exclusiveMaximum",i.value,i.message,e):(i.inclusive||(t.exclusiveMaximum=!0),Zt(t,"maximum",i.value,i.message,e));break;case"multipleOf":Zt(t,"multipleOf",i.value,i.message,e);break}return t}function q5(){return{type:"boolean"}}function W5(n,e){return tt(n.type._def,e)}var G5=(n,e)=>tt(n.innerType._def,e);function vR(n,e,t){let i=t??e.dateStrategy;if(Array.isArray(i))return{anyOf:i.map((r,o)=>vR(n,e,r))};switch(i){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Jce(n,e)}}var Jce=(n,e)=>{let t={type:"integer",format:"unix-time"};if(e.target==="openApi3")return t;for(let i of n.checks)switch(i.kind){case"min":Zt(t,"minimum",i.value,i.message,e);break;case"max":Zt(t,"maximum",i.value,i.message,e);break}return t};function Z5(n,e){return S(b({},tt(n.innerType._def,e)),{default:n.defaultValue()})}function K5(n,e,t){return e.effectStrategy==="input"?tt(n.schema._def,e,t):{}}function Y5(n){return{type:"string",enum:[...n.values]}}var eue=n=>"type"in n&&n.type==="string"?!1:"allOf"in n;function Q5(n,e){let t=[tt(n.left._def,S(b({},e),{currentPath:[...e.currentPath,"allOf","0"]})),tt(n.right._def,S(b({},e),{currentPath:[...e.currentPath,"allOf","1"]}))].filter(o=>!!o),i=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,r=[];return t.forEach(o=>{if(eue(o))r.push(...o.allOf),o.unevaluatedProperties===void 0&&(i=void 0);else{let l=o;if("additionalProperties"in o&&o.additionalProperties===!1){let s=o,{additionalProperties:c}=s;l=Be(s,["additionalProperties"])}else i=void 0;r.push(l)}}),r.length?b({allOf:r},i):void 0}function X5(n,e){let t=typeof n.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(n.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[n.value]}:{type:t==="bigint"?"integer":t,const:n.value}}var bR,Cd={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(bR===void 0&&(bR=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),bR),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function yE(n,e){let t={type:"string"};function i(r){return e.patternStrategy==="escape"?tue(r):r}if(n.checks)for(let r of n.checks)switch(r.kind){case"min":Zt(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,r.value):r.value,r.message,e);break;case"max":Zt(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":ws(t,"email",r.message,e);break;case"format:idn-email":ws(t,"idn-email",r.message,e);break;case"pattern:zod":xs(t,Cd.email,r.message,e);break}break;case"url":ws(t,"uri",r.message,e);break;case"uuid":ws(t,"uuid",r.message,e);break;case"regex":xs(t,r.regex,r.message,e);break;case"cuid":xs(t,Cd.cuid,r.message,e);break;case"cuid2":xs(t,Cd.cuid2,r.message,e);break;case"startsWith":xs(t,RegExp(`^${i(r.value)}`),r.message,e);break;case"endsWith":xs(t,RegExp(`${i(r.value)}$`),r.message,e);break;case"datetime":ws(t,"date-time",r.message,e);break;case"date":ws(t,"date",r.message,e);break;case"time":ws(t,"time",r.message,e);break;case"duration":ws(t,"duration",r.message,e);break;case"length":Zt(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,r.value):r.value,r.message,e),Zt(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,r.value):r.value,r.message,e);break;case"includes":{xs(t,RegExp(i(r.value)),r.message,e);break}case"ip":{r.version!=="v6"&&ws(t,"ipv4",r.message,e),r.version!=="v4"&&ws(t,"ipv6",r.message,e);break}case"emoji":xs(t,Cd.emoji,r.message,e);break;case"ulid":{xs(t,Cd.ulid,r.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{ws(t,"binary",r.message,e);break}case"contentEncoding:base64":{Zt(t,"contentEncoding","base64",r.message,e);break}case"pattern:zod":{xs(t,Cd.base64,r.message,e);break}}break}case"nanoid":xs(t,Cd.nanoid,r.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return t}var tue=n=>Array.from(n).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),ws=(n,e,t,i)=>{n.format||n.anyOf?.some(r=>r.format)?(n.anyOf||(n.anyOf=[]),n.format&&(n.anyOf.push(b({format:n.format},n.errorMessage&&i.errorMessages&&{errorMessage:{format:n.errorMessage.format}})),delete n.format,n.errorMessage&&(delete n.errorMessage.format,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.anyOf.push(b({format:e},t&&i.errorMessages&&{errorMessage:{format:t}}))):Zt(n,"format",e,t,i)},xs=(n,e,t,i)=>{n.pattern||n.allOf?.some(r=>r.pattern)?(n.allOf||(n.allOf=[]),n.pattern&&(n.allOf.push(b({pattern:n.pattern},n.errorMessage&&i.errorMessages&&{errorMessage:{pattern:n.errorMessage.pattern}})),delete n.pattern,n.errorMessage&&(delete n.errorMessage.pattern,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.allOf.push(b({pattern:J5(e,i)},t&&i.errorMessages&&{errorMessage:{pattern:t}}))):Zt(n,"pattern",J5(e,i),t,i)},J5=(n,e)=>{let t=typeof n=="function"?n():n;if(!e.applyRegexFlags||!t.flags)return t.source;let i={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},r=i.i?t.source.toLowerCase():t.source,o="",s=!1,l=!1,c=!1;for(let d=0;d<r.length;d++){if(s){o+=r[d],s=!1;continue}if(i.i){if(l){if(r[d].match(/[a-z]/)){c?(o+=r[d],o+=`${r[d-2]}-${r[d]}`.toUpperCase(),c=!1):r[d+1]==="-"&&r[d+2]?.match(/[a-z]/)?(o+=r[d],c=!0):o+=`${r[d]}${r[d].toUpperCase()}`;continue}}else if(r[d].match(/[a-z]/)){o+=`[${r[d]}${r[d].toUpperCase()}]`;continue}}if(i.m){if(r[d]==="^"){o+=`(^|(?<=[\r
]))`;continue}else if(r[d]==="$"){o+=`($|(?=[\r
]))`;continue}}if(i.s&&r[d]==="."){o+=l?`${r[d]}\r
`:`[${r[d]}\r
]`;continue}o+=r[d],r[d]==="\\"?s=!0:l&&r[d]==="]"?l=!1:!l&&r[d]==="["&&(l=!0)}try{let d=new RegExp(o)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return o};function wE(n,e){if(e.target==="openApi3"&&n.keyType?._def.typeName===Dt.ZodEnum)return{type:"object",required:n.keyType._def.values,properties:n.keyType._def.values.reduce((i,r)=>S(b({},i),{[r]:tt(n.valueType._def,S(b({},e),{currentPath:[...e.currentPath,"properties",r]}))??{}}),{}),additionalProperties:!1};let t={type:"object",additionalProperties:tt(n.valueType._def,S(b({},e),{currentPath:[...e.currentPath,"additionalProperties"]}))??{}};if(e.target==="openApi3")return t;if(n.keyType?._def.typeName===Dt.ZodString&&n.keyType._def.checks?.length){let i=Object.entries(yE(n.keyType._def,e)).reduce((r,[o,s])=>o==="type"?r:S(b({},r),{[o]:s}),{});return S(b({},t),{propertyNames:i})}else if(n.keyType?._def.typeName===Dt.ZodEnum)return S(b({},t),{propertyNames:{enum:n.keyType._def.values}});return t}function e6(n,e){if(e.mapStrategy==="record")return wE(n,e);let t=tt(n.keyType._def,S(b({},e),{currentPath:[...e.currentPath,"items","items","0"]}))||{},i=tt(n.valueType._def,S(b({},e),{currentPath:[...e.currentPath,"items","items","1"]}))||{};return{type:"array",maxItems:125,items:{type:"array",items:[t,i],minItems:2,maxItems:2}}}function t6(n){let e=n.values,i=Object.keys(n.values).filter(o=>typeof e[e[o]]!="number").map(o=>e[o]),r=Array.from(new Set(i.map(o=>typeof o)));return{type:r.length===1?r[0]==="string"?"string":"number":["string","number"],enum:i}}function n6(){return{not:{}}}function i6(n){return n.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var uv={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function o6(n,e){if(e.target==="openApi3")return r6(n,e);let t=n.options instanceof Map?Array.from(n.options.values()):n.options;if(t.every(i=>i._def.typeName in uv&&(!i._def.checks||!i._def.checks.length))){let i=t.reduce((r,o)=>{let s=uv[o._def.typeName];return s&&!r.includes(s)?[...r,s]:r},[]);return{type:i.length>1?i:i[0]}}else if(t.every(i=>i._def.typeName==="ZodLiteral"&&!i.description)){let i=t.reduce((r,o)=>{let s=typeof o._def.value;switch(s){case"string":case"number":case"boolean":return[...r,s];case"bigint":return[...r,"integer"];case"object":if(o._def.value===null)return[...r,"null"];case"symbol":case"undefined":case"function":default:return r}},[]);if(i.length===t.length){let r=i.filter((o,s,l)=>l.indexOf(o)===s);return{type:r.length>1?r:r[0],enum:t.reduce((o,s)=>o.includes(s._def.value)?o:[...o,s._def.value],[])}}}else if(t.every(i=>i._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((i,r)=>[...i,...r._def.values.filter(o=>!i.includes(o))],[])};return r6(n,e)}var r6=(n,e)=>{let t=(n.options instanceof Map?Array.from(n.options.values()):n.options).map((i,r)=>tt(i._def,S(b({},e),{currentPath:[...e.currentPath,"anyOf",`${r}`]}))).filter(i=>!!i&&(!e.strictUnions||typeof i=="object"&&Object.keys(i).length>0));return t.length?{anyOf:t}:void 0};function s6(n,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(n.innerType._def.typeName)&&(!n.innerType._def.checks||!n.innerType._def.checks.length))return e.target==="openApi3"||e.nullableStrategy==="property"?{type:uv[n.innerType._def.typeName],nullable:!0}:{type:[uv[n.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let i=tt(n.innerType._def,S(b({},e),{currentPath:[...e.currentPath]}));return i&&"$ref"in i?{allOf:[i],nullable:!0}:i&&S(b({},i),{nullable:!0})}let t=tt(n.innerType._def,S(b({},e),{currentPath:[...e.currentPath,"anyOf","0"]}));return t&&{anyOf:[t,{type:"null"}]}}function a6(n,e){let t={type:"number"};if(!n.checks)return t;for(let i of n.checks)switch(i.kind){case"int":t.type="integer",_R(t,"type",i.message,e);break;case"min":e.target==="jsonSchema7"?i.inclusive?Zt(t,"minimum",i.value,i.message,e):Zt(t,"exclusiveMinimum",i.value,i.message,e):(i.inclusive||(t.exclusiveMinimum=!0),Zt(t,"minimum",i.value,i.message,e));break;case"max":e.target==="jsonSchema7"?i.inclusive?Zt(t,"maximum",i.value,i.message,e):Zt(t,"exclusiveMaximum",i.value,i.message,e):(i.inclusive||(t.exclusiveMaximum=!0),Zt(t,"maximum",i.value,i.message,e));break;case"multipleOf":Zt(t,"multipleOf",i.value,i.message,e);break}return t}function nue(n,e){return e.removeAdditionalStrategy==="strict"?n.catchall._def.typeName==="ZodNever"?n.unknownKeys!=="strict":tt(n.catchall._def,S(b({},e),{currentPath:[...e.currentPath,"additionalProperties"]}))??!0:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":tt(n.catchall._def,S(b({},e),{currentPath:[...e.currentPath,"additionalProperties"]}))??!0}function l6(n,e){let t=S(b({type:"object"},Object.entries(n.shape()).reduce((i,[r,o])=>{if(o===void 0||o._def===void 0)return i;let s=[...e.currentPath,"properties",r],l=tt(o._def,S(b({},e),{currentPath:s,propertyPath:s}));if(l===void 0)return i;if(e.openaiStrictMode&&o.isOptional()&&!o.isNullable()&&typeof o._def?.defaultValue>"u")throw new Error(`Zod field at \`${s.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);return{properties:S(b({},i.properties),{[r]:l}),required:o.isOptional()&&!e.openaiStrictMode?i.required:[...i.required,r]}},{properties:{},required:[]})),{additionalProperties:nue(n,e)});return t.required.length||delete t.required,t}var c6=(n,e)=>{if(e.currentPath.toString()===e.propertyPath?.toString())return tt(n.innerType._def,e);let t=tt(n.innerType._def,S(b({},e),{currentPath:[...e.currentPath,"anyOf","1"]}));return t?{anyOf:[{not:{}},t]}:{}};var u6=(n,e)=>{if(e.pipeStrategy==="input")return tt(n.in._def,e);if(e.pipeStrategy==="output")return tt(n.out._def,e);let t=tt(n.in._def,S(b({},e),{currentPath:[...e.currentPath,"allOf","0"]})),i=tt(n.out._def,S(b({},e),{currentPath:[...e.currentPath,"allOf",t?"1":"0"]}));return{allOf:[t,i].filter(r=>r!==void 0)}};function d6(n,e){return tt(n.type._def,e)}function h6(n,e){let i={type:"array",uniqueItems:!0,items:tt(n.valueType._def,S(b({},e),{currentPath:[...e.currentPath,"items"]}))};return n.minSize&&Zt(i,"minItems",n.minSize.value,n.minSize.message,e),n.maxSize&&Zt(i,"maxItems",n.maxSize.value,n.maxSize.message,e),i}function f6(n,e){return n.rest?{type:"array",minItems:n.items.length,items:n.items.map((t,i)=>tt(t._def,S(b({},e),{currentPath:[...e.currentPath,"items",`${i}`]}))).reduce((t,i)=>i===void 0?t:[...t,i],[]),additionalItems:tt(n.rest._def,S(b({},e),{currentPath:[...e.currentPath,"additionalItems"]}))}:{type:"array",minItems:n.items.length,maxItems:n.items.length,items:n.items.map((t,i)=>tt(t._def,S(b({},e),{currentPath:[...e.currentPath,"items",`${i}`]}))).reduce((t,i)=>i===void 0?t:[...t,i],[])}}function p6(){return{not:{}}}function m6(){return{}}var g6=(n,e)=>tt(n.innerType._def,e);function tt(n,e,t=!1){let i=e.seen.get(n);if(e.override){let s=e.override?.(n,e,i,t);if(s!==j5)return s}if(i&&!t){let s=iue(i,e);if(s!==void 0)return"$ref"in s&&e.seenRefs.add(s.$ref),s}let r={def:n,path:e.currentPath,jsonSchema:void 0};e.seen.set(n,r);let o=oue(n,n.typeName,e,t);return o&&sue(n,e,o),r.jsonSchema=o,o}var iue=(n,e)=>{switch(e.$refStrategy){case"root":return{$ref:n.path.join("/")};case"extract-to-root":let t=n.path.slice(e.basePath.length+1).join("_");return t!==e.name&&e.nameStrategy==="duplicate-ref"&&(e.definitions[t]=n.def),{$ref:[...e.basePath,e.definitionPath,t].join("/")};case"relative":return{$ref:rue(e.currentPath,n.path)};case"none":case"seen":return n.path.length<e.currentPath.length&&n.path.every((i,r)=>e.currentPath[r]===i)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},rue=(n,e)=>{let t=0;for(;t<n.length&&t<e.length&&n[t]===e[t];t++);return[(n.length-t).toString(),...e.slice(t)].join("/")},oue=(n,e,t,i)=>{switch(e){case Dt.ZodString:return yE(n,t);case Dt.ZodNumber:return a6(n,t);case Dt.ZodObject:return l6(n,t);case Dt.ZodBigInt:return H5(n,t);case Dt.ZodBoolean:return q5();case Dt.ZodDate:return vR(n,t);case Dt.ZodUndefined:return p6();case Dt.ZodNull:return i6(t);case Dt.ZodArray:return U5(n,t);case Dt.ZodUnion:case Dt.ZodDiscriminatedUnion:return o6(n,t);case Dt.ZodIntersection:return Q5(n,t);case Dt.ZodTuple:return f6(n,t);case Dt.ZodRecord:return wE(n,t);case Dt.ZodLiteral:return X5(n,t);case Dt.ZodEnum:return Y5(n);case Dt.ZodNativeEnum:return t6(n);case Dt.ZodNullable:return s6(n,t);case Dt.ZodOptional:return c6(n,t);case Dt.ZodMap:return e6(n,t);case Dt.ZodSet:return h6(n,t);case Dt.ZodLazy:return tt(n.getter()._def,t);case Dt.ZodPromise:return d6(n,t);case Dt.ZodNaN:case Dt.ZodNever:return n6();case Dt.ZodEffects:return K5(n,t,i);case Dt.ZodAny:return $5();case Dt.ZodUnknown:return m6();case Dt.ZodDefault:return Z5(n,t);case Dt.ZodBranded:return W5(n,t);case Dt.ZodReadonly:return g6(n,t);case Dt.ZodCatch:return G5(n,t);case Dt.ZodPipeline:return u6(n,t);case Dt.ZodFunction:case Dt.ZodVoid:case Dt.ZodSymbol:return;default:return(r=>{})(e)}},sue=(n,e,t)=>(n.description&&(t.description=n.description,e.markdownDescription&&(t.markdownDescription=n.description)),t);var yR=(n,e)=>{let t=z5(e),i=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,r=tt(n._def,i===void 0?t:S(b({},t),{currentPath:[...t.basePath,t.definitionPath,i]}),!1)??{},o=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;o!==void 0&&(r.title=o);let s=(()=>{if(V5(t.definitions))return;let c={},d=new Set;for(let f=0;f<500;f++){let p=Object.entries(t.definitions).filter(([g])=>!d.has(g));if(p.length===0)break;for(let[g,m]of p)c[g]=tt(cv(m),S(b({},t),{currentPath:[...t.basePath,t.definitionPath,g]}),!0)??{},d.add(g)}return c})(),l=i===void 0?s?S(b({},r),{[t.definitionPath]:s}):r:t.nameStrategy==="duplicate-ref"?b(b({},r),s||t.seenRefs.size?{[t.definitionPath]:b(b({},s),t.seenRefs.size?{[i]:r}:void 0)}:void 0):{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,i].join("/"),[t.definitionPath]:S(b({},s),{[i]:r})};return t.target==="jsonSchema7"?l.$schema="http://json-schema.org/draft-07/schema#":t.target==="jsonSchema2019-09"&&(l.$schema="https://json-schema.org/draft/2019-09/schema#"),l};function aue(n,e){return yR(n,{openaiStrictMode:!0,name:e.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function _6(n,e,t){return e5({type:"json_schema",json_schema:S(b({},t),{name:e,strict:!0,schema:aue(n,{name:e})})},i=>n.parse(JSON.parse(i)))}function dv(n,e){return n.lc_error_code=e,n.message=`${n.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,n}function Dp(n){let e;return n.constructor.name===ma.name?(e=new Error(n.message),e.name="TimeoutError"):n.constructor.name===ti.name?(e=new Error(n.message),e.name="AbortError"):n.status===400&&n.message.includes("tool_calls")?e=dv(n,"INVALID_TOOL_RESULTS"):n.status===401?e=dv(n,"MODEL_AUTHENTICATION"):n.status===429?e=dv(n,"MODEL_RATE_LIMIT"):n.status===404?e=dv(n,"MODEL_NOT_FOUND"):e=n,e}function wR(n){if(n)return n==="any"||n==="required"?"required":n==="auto"?"auto":n==="none"?"none":typeof n=="string"?{type:"function",function:{name:n}}:n}function lue(n,e){let t=b({},n);return Object.defineProperties(t,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),t}function v6(n,e,t){if(sm(n))return _6(n,e,t);if(iS(n))return lue({type:"json_schema",json_schema:S(b({},t),{name:e,strict:!0,schema:EF(n,{cycles:"ref",reused:"ref",override(i){i.jsonSchema.title=e}})})},i=>CF(n,JSON.parse(i)));throw new Error("Unsupported schema response format")}function cue(n){return n.anyOf!==void 0&&Array.isArray(n.anyOf)}function b6(n){let e=["namespace functions {",""];for(let t of n)t.description&&e.push(`// ${t.description}`),Object.keys(t.parameters.properties??{}).length>0?(e.push(`type ${t.name} = (_: {`),e.push(y6(t.parameters,0)),e.push("}) => any;")):e.push(`type ${t.name} = () => any;`),e.push("");return e.push("} // namespace functions"),e.join(`
`)}function y6(n,e){let t=[];for(let[i,r]of Object.entries(n.properties??{}))r.description&&e<2&&t.push(`// ${r.description}`),n.required?.includes(i)?t.push(`${i}: ${xE(r,e)},`):t.push(`${i}?: ${xE(r,e)},`);return t.map(i=>" ".repeat(e)+i).join(`
`)}function xE(n,e){if(cue(n))return n.anyOf.map(t=>xE(t,e)).join(" | ");switch(n.type){case"string":return n.enum?n.enum.map(t=>`"${t}"`).join(" | "):"string";case"number":return n.enum?n.enum.map(t=>`${t}`).join(" | "):"number";case"integer":return n.enum?n.enum.map(t=>`${t}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",y6(n,e+2),"}"].join(`
`);case"array":return n.items?`${xE(n.items,e)}[]`:"any[]";default:return""}}function w6(n,e){let t;return Vc(n)?t=bE(n):t=n,e?.strict!==void 0&&(t.function.strict=e.strict),t}var CE="__openai_function_call_ids__";function IR(n){return"type"in n&&n.type!=="function"}function uue(n){return n!=null&&typeof n=="object"&&"type"in n&&n.type!=="function"}function EE(n){return n&&/^o\d/.test(n)}function due(n){return n!==void 0&&typeof n.schema=="object"}function hue(n){return n.role!=="system"&&n.role!=="developer"&&n.role!=="assistant"&&n.role!=="user"&&n.role!=="function"&&n.role!=="tool"&&console.warn(`Unknown message role: ${n.role}`),n.role}function SR(n){let e=n._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":{if(!XI.isInstance(n))throw new Error("Invalid generic chat message");return hue(n)}default:throw new Error(`Unknown message type: ${e}`)}}var x6={providerName:"ChatOpenAI",fromStandardTextBlock(n){return{type:"text",text:n.text}},fromStandardImageBlock(n){if(n.source_type==="url")return{type:"image_url",image_url:b({url:n.url},n.metadata?.detail?{detail:n.metadata.detail}:{})};if(n.source_type==="base64"){let e=`data:${n.mime_type??""};base64,${n.data}`;return{type:"image_url",image_url:b({url:e},n.metadata?.detail?{detail:n.metadata.detail}:{})}}throw new Error(`Image content blocks with source_type ${n.source_type} are not supported for ChatOpenAI`)},fromStandardAudioBlock(n){if(n.source_type==="url"){let e=YI({dataUrl:n.url});if(!e)throw new Error(`URL audio blocks with source_type ${n.source_type} must be formatted as a data URL for ChatOpenAI`);let t=e.mime_type||n.mime_type||"",i;try{i=KI(t)}catch{throw new Error(`Audio blocks with source_type ${n.source_type} must have mime type of audio/wav or audio/mp3`)}if(i.type!=="audio"||i.subtype!=="wav"&&i.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${n.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:i.subtype,data:e.data}}}if(n.source_type==="base64"){let e;try{e=KI(n.mime_type??"")}catch{throw new Error(`Audio blocks with source_type ${n.source_type} must have mime type of audio/wav or audio/mp3`)}if(e.type!=="audio"||e.subtype!=="wav"&&e.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${n.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:e.subtype,data:n.data}}}throw new Error(`Audio content blocks with source_type ${n.source_type} are not supported for ChatOpenAI`)},fromStandardFileBlock(n){if(n.source_type==="url"){if(!YI({dataUrl:n.url}))throw new Error(`URL file blocks with source_type ${n.source_type} must be formatted as a data URL for ChatOpenAI`);return{type:"file",file:b({file_data:n.url},n.metadata?.filename||n.metadata?.name?{filename:n.metadata?.filename||n.metadata?.name}:{})}}if(n.source_type==="base64")return{type:"file",file:b({file_data:`data:${n.mime_type??""};base64,${n.data}`},n.metadata?.filename||n.metadata?.name||n.metadata?.title?{filename:n.metadata?.filename||n.metadata?.name||n.metadata?.title}:{})};if(n.source_type==="id")return{type:"file",file:{file_id:n.id}};throw new Error(`File content blocks with source_type ${n.source_type} are not supported for ChatOpenAI`)}};function xR(n,e){return n.flatMap(t=>{let i=SR(t);i==="system"&&EE(e)&&(i="developer");let r=typeof t.content=="string"?t.content:t.content.map(s=>ZI(s)?QI(s,x6):s),o={role:i,content:r};if(t.name!=null&&(o.name=t.name),t.additional_kwargs.function_call!=null&&(o.function_call=t.additional_kwargs.function_call,o.content=""),Wr(t)&&t.tool_calls?.length?(o.tool_calls=t.tool_calls.map(F5),o.content=""):(t.additional_kwargs.tool_calls!=null&&(o.tool_calls=t.additional_kwargs.tool_calls),t.tool_call_id!=null&&(o.tool_call_id=t.tool_call_id)),t.additional_kwargs.audio&&typeof t.additional_kwargs.audio=="object"&&"id"in t.additional_kwargs.audio){let s={role:"assistant",audio:{id:t.additional_kwargs.audio.id}};return[o,s]}return o})}var hv=class n extends Ca{_llmType(){return"openai"}static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed","reasoning","service_tier"]}get lc_secrets(){return{apiKey:"OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{apiKey:"openai_api_key",modelName:"model"}}get lc_serializable_keys(){return["configuration","logprobs","topLogprobs","prefixMessages","supportsStrictToolCalling","modalities","audio","temperature","maxTokens","topP","frequencyPenalty","presencePenalty","n","logitBias","user","streaming","streamUsage","model","modelName","modelKwargs","stop","stopSequences","timeout","apiKey","cache","maxConcurrency","maxRetries","verbose","callbacks","tags","metadata","disableStreaming","zdrEnabled","reasoning"]}getLsParams(e){let t=this.invocationParams(e);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:t.temperature??void 0,ls_max_tokens:t.max_tokens??void 0,ls_stop:e.stop}}_identifyingParams(){return b(b({model_name:this.model},this.invocationParams()),this.clientConfig)}identifyingParams(){return this._identifyingParams()}constructor(e){super(e??{}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topLogprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__includeRawResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"supportsStrictToolCalling",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"audio",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modalities",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reasoning",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"zdrEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"service_tier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"defaultOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.apiKey=e?.apiKey??e?.configuration?.apiKey??or("OPENAI_API_KEY"),this.organization=e?.configuration?.organization??or("OPENAI_ORGANIZATION"),this.model=e?.model??e?.modelName??this.model,this.modelKwargs=e?.modelKwargs??{},this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.logprobs=e?.logprobs,this.topLogprobs=e?.topLogprobs,this.n=e?.n??this.n,this.logitBias=e?.logitBias,this.stop=e?.stopSequences??e?.stop,this.stopSequences=this.stop,this.user=e?.user,this.__includeRawResponse=e?.__includeRawResponse,this.audio=e?.audio,this.modalities=e?.modalities,this.reasoning=e?.reasoning,this.maxTokens=e?.maxCompletionTokens??e?.maxTokens,this.disableStreaming=e?.disableStreaming??this.disableStreaming,this.streaming=e?.streaming??!1,this.disableStreaming&&(this.streaming=!1),this.streamUsage=e?.streamUsage??this.streamUsage,this.disableStreaming&&(this.streamUsage=!1),this.clientConfig=b({apiKey:this.apiKey,organization:this.organization,dangerouslyAllowBrowser:!0},e?.configuration),e?.supportsStrictToolCalling!==void 0&&(this.supportsStrictToolCalling=e.supportsStrictToolCalling),e?.service_tier!==void 0&&(this.service_tier=e.service_tier),this.zdrEnabled=e?.zdrEnabled??!1}_getReasoningParams(e){if(!EE(this.model))return;let t;return this.reasoning!==void 0&&(t=b(b({},t),this.reasoning)),e?.reasoning!==void 0&&(t=b(b({},t),e.reasoning)),t}_getResponseFormat(e){return e&&e.type==="json_schema"&&e.json_schema.schema&&po(e.json_schema.schema)?v6(e.json_schema.schema,e.json_schema.name,{description:e.json_schema.description}):e}_combineCallOptions(e){return b(b({},this.defaultOptions),e??{})}_getClientOptions(e){if(!this.client){let i={baseURL:this.clientConfig.baseURL},r=xd(i),o=S(b({},this.clientConfig),{baseURL:r,timeout:this.timeout,maxRetries:0});o.baseURL||delete o.baseURL,this.client=new ft(o)}return b(b({},this.clientConfig),e)}_convertChatOpenAIToolToCompletionsTool(e,t){return pE(e)?t?.strict!==void 0?S(b({},e),{function:S(b({},e.function),{strict:t.strict})}):e:w6(e,t)}bindTools(e,t){let i;return t?.strict!==void 0?i=t.strict:this.supportsStrictToolCalling!==void 0&&(i=this.supportsStrictToolCalling),this.withConfig(b({tools:e.map(r=>IR(r)?r:this._convertChatOpenAIToolToCompletionsTool(r,{strict:i}))},t))}stream(e,t){return E(this,null,function*(){return ji(n.prototype,this,"stream").call(this,e,this._combineCallOptions(t))})}invoke(e,t){return E(this,null,function*(){return ji(n.prototype,this,"invoke").call(this,e,this._combineCallOptions(t))})}_combineLLMOutput(...e){return e.reduce((t,i)=>(i&&i.tokenUsage&&(t.tokenUsage.completionTokens+=i.tokenUsage.completionTokens??0,t.tokenUsage.promptTokens+=i.tokenUsage.promptTokens??0,t.tokenUsage.totalTokens+=i.tokenUsage.totalTokens??0),t),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}getNumTokensFromMessages(e){return E(this,null,function*(){let t=0,i=0,r=0;this.model==="gpt-3.5-turbo-0301"?(i=4,r=-1):(i=3,r=1);let o=yield Promise.all(e.map(s=>E(this,null,function*(){let l=yield this.getNumTokens(s.content),c=yield this.getNumTokens(SR(s)),d=s.name!==void 0?r+(yield this.getNumTokens(s.name)):0,f=l+i+c+d,p=s;if(p._getType()==="function"&&(f-=2),p.additional_kwargs?.function_call&&(f+=3),p?.additional_kwargs.function_call?.name&&(f+=yield this.getNumTokens(p.additional_kwargs.function_call?.name)),p.additional_kwargs.function_call?.arguments)try{f+=yield this.getNumTokens(JSON.stringify(JSON.parse(p.additional_kwargs.function_call?.arguments)))}catch(g){console.error("Error parsing function arguments",g,JSON.stringify(p.additional_kwargs.function_call)),f+=yield this.getNumTokens(p.additional_kwargs.function_call?.arguments)}return t+=f,f})));return t+=3,{totalCount:t,countPerMessage:o}})}_getNumTokensFromGenerations(e){return E(this,null,function*(){return(yield Promise.all(e.map(i=>E(this,null,function*(){return i.message.additional_kwargs?.function_call?(yield this.getNumTokensFromMessages([i.message])).countPerMessage[0]:yield this.getNumTokens(i.message.content)})))).reduce((i,r)=>i+r,0)})}_getEstimatedTokenCountFromPrompt(e,t,i){return E(this,null,function*(){let r=(yield this.getNumTokensFromMessages(e)).totalCount;if(t&&i!=="auto"){let o=b6(t);r+=yield this.getNumTokens(o),r+=9}return t&&e.find(o=>o._getType()==="system")&&(r-=4),i==="none"?r+=1:typeof i=="object"&&(r+=(yield this.getNumTokens(i.name))+4),r})}withStructuredOutput(e,t){let i,r,o,s;due(e)?(i=e.schema,r=e.name,o=e.method,s=e.includeRaw):(i=e,r=t?.name,o=t?.method,s=t?.includeRaw);let l,c;if(t?.strict!==void 0&&o==="jsonMode")throw new Error("Argument `strict` is only supported for `method` = 'function_calling'");if(!this.model.startsWith("gpt-3")&&!this.model.startsWith("gpt-4-")&&this.model!=="gpt-4"?o===void 0&&(o="jsonSchema"):o==="jsonSchema"&&console.warn(`[WARNING]: JSON Schema is not supported for model "${this.model}". Falling back to tool calling.`),o==="jsonMode"){let g;po(i)?(c=wd.fromZodSchema(i),g=Bi(i)):c=new Sp,l=this.withConfig({response_format:{type:"json_object"},ls_structured_output_format:{kwargs:{method:"jsonMode"},schema:g}})}else if(o==="jsonSchema")if(l=this.withConfig({response_format:{type:"json_schema",json_schema:{name:r??"extract",description:Bl(i),schema:i,strict:t?.strict}},ls_structured_output_format:{kwargs:{method:"jsonSchema"},schema:Bi(i)}}),po(i)){let g=wd.fromZodSchema(i);c=ri.from(m=>"parsed"in m.additional_kwargs?m.additional_kwargs.parsed:g)}else c=new Sp;else{let g=r??"extract";if(po(i)){let m=Bi(i);l=this.withConfig(b({tools:[{type:"function",function:{name:g,description:m.description,parameters:m}}],tool_choice:{type:"function",function:{name:g}},ls_structured_output_format:{kwargs:{method:"functionCalling"},schema:m}},t?.strict!==void 0?{strict:t.strict}:{})),c=new ov({returnSingle:!0,keyName:g,zodSchema:i})}else{let m;typeof i.name=="string"&&typeof i.parameters=="object"&&i.parameters!=null?(m=i,g=i.name):(g=i.title??g,m={name:g,description:i.description??"",parameters:i}),l=this.withConfig(b({tools:[{type:"function",function:m}],tool_choice:{type:"function",function:{name:g}},ls_structured_output_format:{kwargs:{method:"functionCalling"},schema:Bi(i)}},t?.strict!==void 0?{strict:t.strict}:{})),c=new ov({returnSingle:!0,keyName:g})}}if(!s)return l.pipe(c);let d=io.assign({parsed:(g,m)=>c.invoke(g.raw,m)}),f=io.assign({parsed:()=>null}),p=d.withFallbacks({fallbacks:[f]});return Zn.from([{raw:l},p])}},CR=class extends hv{invocationParams(e){let t;e?.strict!==void 0?t=e.strict:this.supportsStrictToolCalling!==void 0&&(t=this.supportsStrictToolCalling);let i=b(b({model:this.model,temperature:this.temperature,top_p:this.topP,user:this.user,stream:this.streaming,previous_response_id:e?.previous_response_id,truncation:e?.truncation,include:e?.include,tools:e?.tools?.length?this._reduceChatOpenAITools(e.tools,{stream:this.streaming,strict:t}):void 0,tool_choice:uue(e?.tool_choice)?e?.tool_choice:(()=>{let o=wR(e?.tool_choice);if(typeof o=="object"&&"type"in o)return{type:"function",name:o.function.name}})(),text:(()=>{if(e?.text)return e.text;let o=this._getResponseFormat(e?.response_format);return o?.type==="json_schema"?o.json_schema.schema!=null?{format:{type:"json_schema",schema:o.json_schema.schema,description:o.json_schema.description,name:o.json_schema.name,strict:o.json_schema.strict}}:void 0:{format:o}})(),parallel_tool_calls:e?.parallel_tool_calls,max_output_tokens:this.maxTokens===-1?void 0:this.maxTokens},this.zdrEnabled?{store:!1}:{}),this.modelKwargs),r=this._getReasoningParams(e);return r!==void 0&&(i.reasoning=r),i}_generate(e,t){return E(this,null,function*(){let i=this.invocationParams(t);if(i.stream){let c=this._streamResponseChunks(e,t),d;try{for(var r=ze(c),o,s,l;o=!(s=yield r.next()).done;o=!1){let f=s.value;f.message.response_metadata=b(b({},f.generationInfo),f.message.response_metadata),d=d?.concat(f)??f}}catch{l=[s]}finally{try{o&&(s=r.return)&&(yield s.call(r))}finally{if(l)throw l[0]}}return{generations:d?[d]:[],llmOutput:{estimatedTokenUsage:d?.message?.usage_metadata}}}else{let c=this._convertMessagesToResponsesParams(e),d=yield this.completionWithRetry(S(b({input:c},i),{stream:!1}),b({signal:t?.signal},t?.options));return{generations:[{text:d.output_text,message:this._convertResponsesMessageToBaseMessage(d)}],llmOutput:{id:d.id,estimatedTokenUsage:d.usage?{promptTokens:d.usage.input_tokens,completionTokens:d.usage.output_tokens,totalTokens:d.usage.total_tokens}:void 0}}}})}_streamResponseChunks(e,t){return yt(this,null,function*(){let i=yield new ge(this.completionWithRetry(S(b({},this.invocationParams(t)),{input:this._convertMessagesToResponsesParams(e),stream:!0}),t));try{for(var r=ze(i),o,s,l;o=!(s=yield new ge(r.next())).done;o=!1){let c=s.value;let d=this._convertResponsesDeltaToBaseMessageChunk(c);d!=null&&(yield d)}}catch{l=[s]}finally{try{o&&(s=r.return)&&(yield new ge(s.call(r)))}finally{if(l)throw l[0]}}})}completionWithRetry(e,t){return E(this,null,function*(){return this.caller.call(()=>E(this,null,function*(){let i=this._getClientOptions(t);try{return e.text?.format?.type==="json_schema"&&!e.stream?yield this.client.responses.parse(e,i):yield this.client.responses.create(e,i)}catch(r){throw Dp(r)}}))})}_convertResponsesMessageToBaseMessage(e){if(e.error){let c=new Error(e.error.message);throw c.name=e.error.code,c}let t,i=[],r=[],o=[],s={model:e.model,created_at:e.created_at,id:e.id,incomplete_details:e.incomplete_details,metadata:e.metadata,object:e.object,status:e.status,user:e.user,service_tier:e.service_tier,model_name:e.model},l={};for(let c of e.output)if(c.type==="message")t=c.id,i.push(...c.content.flatMap(d=>d.type==="output_text"?("parsed"in d&&d.parsed!=null&&(l.parsed=d.parsed),{type:"text",text:d.text,annotations:d.annotations}):d.type==="refusal"?(l.refusal=d.refusal,[]):d));else if(c.type==="function_call"){let d={function:{name:c.name,arguments:c.arguments},id:c.call_id};try{r.push(_E(d,{returnId:!0}))}catch(f){let p;typeof f=="object"&&f!=null&&"message"in f&&typeof f.message=="string"&&(p=f.message),o.push(pR(d,p))}l[CE]??={},c.id&&(l[CE][c.call_id]=c.id)}else c.type==="reasoning"?l.reasoning=c:(l.tool_outputs??=[],l.tool_outputs.push(c));return new $n({id:t,content:i,tool_calls:r,invalid_tool_calls:o,usage_metadata:e.usage,additional_kwargs:l,response_metadata:s})}_convertResponsesDeltaToBaseMessageChunk(e){let t=[],i={},r,o=[],s={},l={},c;if(e.type==="response.output_text.delta")t.push({type:"text",text:e.delta,index:e.content_index});else if(e.type==="response.output_text_annotation.added")t.push({type:"text",text:"",annotations:[e.annotation],index:e.content_index});else if(e.type==="response.output_item.added"&&e.item.type==="message")c=e.item.id;else if(e.type==="response.output_item.added"&&e.item.type==="function_call")o.push({type:"tool_call_chunk",name:e.item.name,args:e.item.arguments,id:e.item.call_id,index:e.output_index}),l[CE]={[e.item.call_id]:e.item.id};else if(e.type==="response.output_item.done"&&["web_search_call","file_search_call","computer_call","code_interpreter_call","mcp_call","mcp_list_tools","mcp_approval_request","image_generation_call"].includes(e.item.type))l.tool_outputs=[e.item];else if(e.type==="response.created")s.id=e.response.id,s.model_name=e.response.model,s.model=e.response.model;else if(e.type==="response.completed"){let d=this._convertResponsesMessageToBaseMessage(e.response);r=e.response.usage,e.response.text?.format?.type==="json_schema"&&(l.parsed??=JSON.parse(d.text));for(let[f,p]of Object.entries(e.response))f!=="id"&&(s[f]=p)}else if(e.type==="response.function_call_arguments.delta")o.push({type:"tool_call_chunk",args:e.delta,index:e.output_index});else if(e.type==="response.web_search_call.completed"||e.type==="response.file_search_call.completed")i={tool_outputs:{id:e.item_id,type:e.type.replace("response.","").replace(".completed",""),status:"completed"}};else if(e.type==="response.refusal.done")l.refusal=e.refusal;else if(e.type==="response.output_item.added"&&"item"in e&&e.item.type==="reasoning"){let d=e.item.summary?e.item.summary.map((f,p)=>S(b({},f),{index:p})):void 0;l.reasoning=b({id:e.item.id,type:e.item.type},d?{summary:d}:{})}else if(e.type==="response.reasoning_summary_part.added")l.reasoning={type:"reasoning",summary:[S(b({},e.part),{index:e.summary_index})]};else if(e.type==="response.reasoning_summary_text.delta")l.reasoning={type:"reasoning",summary:[{text:e.delta,type:"summary_text",index:e.summary_index}]};else return e.type==="response.image_generation_call.partial_image",null;return new ts({text:t.map(d=>d.text).join(""),message:new Po({id:c,content:t,tool_call_chunks:o,usage_metadata:r,additional_kwargs:l,response_metadata:s}),generationInfo:i})}_convertMessagesToResponsesParams(e){return e.flatMap(t=>{let i=t.additional_kwargs,r=SR(t);if(r==="system"&&EE(this.model)&&(r="developer"),r==="function")throw new Error("Function messages are not supported in Responses API");if(r==="tool"){let o=t;return i?.type==="computer_call_output"?{type:"computer_call_output",output:(()=>{if(typeof o.content=="string")return{type:"computer_screenshot",image_url:o.content};if(Array.isArray(o.content)){let l=o.content.find(d=>d.type==="computer_screenshot");if(l)return l;let c=o.content.find(d=>d.type==="image_url");if(c)return{type:"computer_screenshot",image_url:typeof c.image_url=="string"?c.image_url:c.image_url.url}}throw new Error("Invalid computer call output")})(),call_id:o.tool_call_id}:{type:"function_call_output",call_id:o.tool_call_id,id:o.id?.startsWith("fc_")?o.id:void 0,output:typeof o.content!="string"?JSON.stringify(o.content):o.content}}if(r==="assistant"){if(!this.zdrEnabled&&t.response_metadata.output!=null&&Array.isArray(t.response_metadata.output)&&t.response_metadata.output.length>0&&t.response_metadata.output.every(f=>"type"in f))return t.response_metadata.output;let o=[];if(i?.reasoning&&!this.zdrEnabled){let f=this._convertReasoningSummary(i.reasoning);o.push(f)}let{content:s}=t;i?.refusal&&(typeof s=="string"&&(s=[{type:"output_text",text:s,annotations:[]}]),s=[...s,{type:"refusal",refusal:i.refusal}]),o.push(S(b({type:"message",role:"assistant"},t.id&&!this.zdrEnabled&&t.id.startsWith("msg_")?{id:t.id}:{}),{content:typeof s=="string"?s:s.flatMap(f=>f.type==="text"?{type:"output_text",text:f.text,annotations:f.annotations??[]}:f.type==="output_text"||f.type==="refusal"?f:[])}));let l=i?.[CE];Wr(t)&&t.tool_calls?.length?o.push(...t.tool_calls.map(f=>b({type:"function_call",name:f.name,arguments:JSON.stringify(f.args),call_id:f.id},this.zdrEnabled?{id:l?.[f.id]}:{}))):i?.tool_calls&&o.push(...i.tool_calls.map(f=>b({type:"function_call",name:f.function.name,call_id:f.id,arguments:f.function.arguments},this.zdrEnabled?{id:l?.[f.id]}:{})));let c=t.response_metadata.output?.length?t.response_metadata.output:i.tool_outputs,d=["computer_call","mcp_call","code_interpreter_call","image_generation_call"];if(c!=null){let p=c?.filter(g=>d.includes(g.type));p.length>0&&o.push(...p)}return o}if(r==="user"||r==="system"||r==="developer"){if(typeof t.content=="string")return{type:"message",role:r,content:t.content};let o=[],s=t.content.flatMap(l=>(l.type==="mcp_approval_response"&&o.push({type:"mcp_approval_response",approval_request_id:l.approval_request_id,approve:l.approve}),ZI(l)?QI(l,x6):l.type==="text"?{type:"input_text",text:l.text}:l.type==="image_url"?{type:"input_image",image_url:typeof l.image_url=="string"?l.image_url:l.image_url.url,detail:typeof l.image_url=="string"?"auto":l.image_url.detail}:l.type==="input_text"||l.type==="input_image"||l.type==="input_file"?l:[]));return s.length>0&&o.push({type:"message",role:r,content:s}),o}return console.warn(`Unsupported role found when converting to OpenAI Responses API: ${r}`),[]})}_convertReasoningSummary(e){let t=(e.summary.length>1?e.summary.reduce((i,r)=>{let o=i.at(-1);return o.index===r.index?o.text+=r.text:i.push(r),i},[b({},e.summary[0])]):e.summary).map(i=>Object.fromEntries(Object.entries(i).filter(([r])=>r!=="index")));return S(b({},e),{summary:t})}_reduceChatOpenAITools(e,t){let i=[];for(let r of e)IR(r)?(r.type==="image_generation"&&t?.stream&&(r.partial_images=1),i.push(r)):pE(r)&&i.push({type:"function",name:r.function.name,parameters:r.function.parameters,description:r.function.description,strict:t?.strict??null});return i}},ER=class extends hv{invocationParams(e,t){let i;e?.strict!==void 0?i=e.strict:this.supportsStrictToolCalling!==void 0&&(i=this.supportsStrictToolCalling);let r={};e?.stream_options!==void 0?r={stream_options:e.stream_options}:this.streamUsage&&(this.streaming||t?.streaming)&&(r={stream_options:{include_usage:!0}});let o=b(b(b(S(b({model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:e?.stop??this.stopSequences,user:this.user,stream:this.streaming,functions:e?.functions,function_call:e?.function_call,tools:e?.tools?.length?e.tools.map(l=>this._convertChatOpenAIToolToCompletionsTool(l,{strict:i})):void 0,tool_choice:wR(e?.tool_choice),response_format:this._getResponseFormat(e?.response_format),seed:e?.seed},r),{parallel_tool_calls:e?.parallel_tool_calls}),this.audio||e?.audio?{audio:this.audio||e?.audio}:{}),this.modalities||e?.modalities?{modalities:this.modalities||e?.modalities}:{}),this.modelKwargs);e?.prediction!==void 0&&(o.prediction=e.prediction),this.service_tier!==void 0&&(o.service_tier=this.service_tier),e?.service_tier!==void 0&&(o.service_tier=e.service_tier);let s=this._getReasoningParams(e);return s!==void 0&&s.effort!==void 0&&(o.reasoning_effort=s.effort),EE(o.model)?o.max_completion_tokens=this.maxTokens===-1?void 0:this.maxTokens:o.max_tokens=this.maxTokens===-1?void 0:this.maxTokens,o}_generate(e,t,i){return E(this,null,function*(){let r={},o=this.invocationParams(t),s=xR(e,this.model);if(o.stream){let p=this._streamResponseChunks(e,t,i),g={};try{for(var l=ze(p),c,d,f;c=!(d=yield l.next()).done;c=!1){let k=d.value;k.message.response_metadata=b(b({},k.generationInfo),k.message.response_metadata);let O=k.generationInfo?.completion??0;g[O]===void 0?g[O]=k:g[O]=g[O].concat(k)}}catch{f=[d]}finally{try{c&&(d=l.return)&&(yield d.call(l))}finally{if(f)throw f[0]}}let m=Object.entries(g).sort(([k],[O])=>parseInt(k,10)-parseInt(O,10)).map(([k,O])=>O),{functions:_,function_call:y}=this.invocationParams(t),w=yield this._getEstimatedTokenCountFromPrompt(e,_,y),I=yield this._getNumTokensFromGenerations(m);return r.input_tokens=w,r.output_tokens=I,r.total_tokens=w+I,{generations:m,llmOutput:{estimatedTokenUsage:{promptTokens:r.input_tokens,completionTokens:r.output_tokens,totalTokens:r.total_tokens}}}}else{let p=yield this.completionWithRetry(S(b({},o),{stream:!1,messages:s}),b({signal:t?.signal},t?.options)),{completion_tokens:g,prompt_tokens:m,total_tokens:_,prompt_tokens_details:y,completion_tokens_details:w}=p?.usage??{};g&&(r.output_tokens=(r.output_tokens??0)+g),m&&(r.input_tokens=(r.input_tokens??0)+m),_&&(r.total_tokens=(r.total_tokens??0)+_),(y?.audio_tokens!==null||y?.cached_tokens!==null)&&(r.input_token_details=b(b({},y?.audio_tokens!==null&&{audio:y?.audio_tokens}),y?.cached_tokens!==null&&{cache_read:y?.cached_tokens})),(w?.audio_tokens!==null||w?.reasoning_tokens!==null)&&(r.output_token_details=b(b({},w?.audio_tokens!==null&&{audio:w?.audio_tokens}),w?.reasoning_tokens!==null&&{reasoning:w?.reasoning_tokens}));let I=[];for(let k of p?.choices??[]){let j={text:k.message?.content??"",message:this._convertCompletionsMessageToBaseMessage(k.message??{role:"assistant"},p)};j.generationInfo=b(b({},k.finish_reason?{finish_reason:k.finish_reason}:{}),k.logprobs?{logprobs:k.logprobs}:{}),Wr(j.message)&&(j.message.usage_metadata=r),j.message=new $n(Object.fromEntries(Object.entries(j.message).filter(([q])=>!q.startsWith("lc_")))),I.push(j)}return{generations:I,llmOutput:{tokenUsage:{promptTokens:r.input_tokens,completionTokens:r.output_tokens,totalTokens:r.total_tokens}}}}})}_streamResponseChunks(e,t,i){return yt(this,null,function*(){let r=xR(e,this.model),o=S(b({},this.invocationParams(t,{streaming:!0})),{messages:r,stream:!0}),s,l=yield new ge(this.completionWithRetry(o,t)),c;try{for(var d=ze(l),f,p,g;f=!(p=yield new ge(d.next())).done;f=!1){let m=p.value;let _=m?.choices?.[0];if(m.usage&&(c=m.usage),!_)continue;let{delta:y}=_;if(!y)continue;let w=this._convertCompletionsDeltaToBaseMessageChunk(y,m,s);s=y.role??s;let I={prompt:t.promptIndex??0,completion:_.index??0};if(typeof w.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}let k=b({},I);_.finish_reason!=null&&(k.finish_reason=_.finish_reason,k.system_fingerprint=m.system_fingerprint,k.model_name=m.model,k.service_tier=m.service_tier),this.logprobs&&(k.logprobs=_.logprobs);let O=new ts({message:w,text:w.content,generationInfo:k});yield O,yield new ge(i?.handleLLMNewToken(O.text??"",I,void 0,void 0,void 0,{chunk:O}))}}catch{g=[p]}finally{try{f&&(p=d.return)&&(yield new ge(p.call(d)))}finally{if(g)throw g[0]}}if(c){let m=b(b({},c.prompt_tokens_details?.audio_tokens!==null&&{audio:c.prompt_tokens_details?.audio_tokens}),c.prompt_tokens_details?.cached_tokens!==null&&{cache_read:c.prompt_tokens_details?.cached_tokens}),_=b(b({},c.completion_tokens_details?.audio_tokens!==null&&{audio:c.completion_tokens_details?.audio_tokens}),c.completion_tokens_details?.reasoning_tokens!==null&&{reasoning:c.completion_tokens_details?.reasoning_tokens});yield new ts({message:new Po({content:"",response_metadata:{usage:b({},c)},usage_metadata:b(b({input_tokens:c.prompt_tokens,output_tokens:c.completion_tokens,total_tokens:c.total_tokens},Object.keys(m).length>0&&{input_token_details:m}),Object.keys(_).length>0&&{output_token_details:_})}),text:""})}if(t.signal?.aborted)throw new Error("AbortError")})}completionWithRetry(e,t){return E(this,null,function*(){let i=this._getClientOptions(t),r=e.response_format&&e.response_format.type==="json_schema";return this.caller.call(()=>E(this,null,function*(){try{return r&&!e.stream?yield this.client.chat.completions.parse(e,i):yield this.client.chat.completions.create(e,i)}catch(o){throw Dp(o)}}))})}_convertCompletionsMessageToBaseMessage(e,t){let i=e.tool_calls;switch(e.role){case"assistant":{let r=[],o=[];for(let c of i??[])try{r.push(_E(c,{returnId:!0}))}catch(d){o.push(pR(c,d.message))}let s={function_call:e.function_call,tool_calls:i};this.__includeRawResponse!==void 0&&(s.__raw_response=t);let l=b({model_name:t.model},t.system_fingerprint?{usage:b({},t.usage),system_fingerprint:t.system_fingerprint}:{});return e.audio&&(s.audio=e.audio),new $n({content:e.content||"",tool_calls:r,invalid_tool_calls:o,additional_kwargs:s,response_metadata:l,id:t.id})}default:return new XI(e.content||"",e.role??"unknown")}}_convertCompletionsDeltaToBaseMessageChunk(e,t,i){let r=e.role??i,o=e.content??"",s;e.function_call?s={function_call:e.function_call}:e.tool_calls?s={tool_calls:e.tool_calls}:s={},this.__includeRawResponse&&(s.__raw_response=t),e.audio&&(s.audio=S(b({},e.audio),{index:t.choices[0].index}));let l={usage:b({},t.usage)};if(r==="user")return new nF({content:o,response_metadata:l});if(r==="assistant"){let c=[];if(Array.isArray(e.tool_calls))for(let d of e.tool_calls)c.push({name:d.function?.name,args:d.function?.arguments,id:d.id,index:d.index,type:"tool_call_chunk"});return new Po({content:o,tool_call_chunks:c,additional_kwargs:s,id:t.id,response_metadata:l})}else return r==="system"?new eS({content:o,response_metadata:l}):r==="developer"?new eS({content:o,response_metadata:l,additional_kwargs:{__openai_role__:"developer"}}):r==="function"?new tF({content:o,additional_kwargs:s,name:e.name,response_metadata:l}):r==="tool"?new JN({content:o,additional_kwargs:s,tool_call_id:e.tool_call_id,response_metadata:l}):new eF({content:o,role:r,response_metadata:l})}},fv=class extends hv{get lc_serializable_keys(){return[...super.lc_serializable_keys,"useResponsesApi"]}constructor(e){super(e??{}),Object.defineProperty(this,"useResponsesApi",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"responses",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"completions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.useResponsesApi=e?.useResponsesApi??!1,this.responses=new CR(e),this.completions=new ER(e),this.responses._getClientOptions=this._getClientOptions,this.completions._getClientOptions=this._getClientOptions}_useResponsesApi(e){let t=e?.tools?.some(IR),i=e?.previous_response_id!=null||e?.text!=null||e?.truncation!=null||e?.include!=null||e?.reasoning?.summary!=null||this.reasoning?.summary!=null;return this.useResponsesApi||t||i}getLsParams(e){let t=this._combineCallOptions(e);return this._useResponsesApi(e)?this.responses.getLsParams(t):this.completions.getLsParams(t)}invocationParams(e){let t=this._combineCallOptions(e);return this._useResponsesApi(e)?this.responses.invocationParams(t):this.completions.invocationParams(t)}_generate(e,t,i){return E(this,null,function*(){return this._useResponsesApi(t)?this.responses._generate(e,t):this.completions._generate(e,t,i)})}_streamResponseChunks(e,t,i){return yt(this,null,function*(){if(this._useResponsesApi(t)){yield*Mo(this.responses._streamResponseChunks(e,this._combineCallOptions(t)));return}yield*Mo(this.completions._streamResponseChunks(e,this._combineCallOptions(t),i))})}withConfig(e){return this.defaultOptions=b(b({},this.defaultOptions),e),this}};var DR={};yn(DR,{BaseLLM:()=>pv,LLM:()=>Tp});var pv=class n extends bd{constructor(i){var r=i,{concurrency:e}=r,t=Be(r,["concurrency"]);super(e?b({maxConcurrency:e},t):t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","llms",this._llmType()]})}invoke(e,t){return E(this,null,function*(){let i=n._convertInputToPromptValue(e);return(yield this.generatePrompt([i],t,t?.callbacks)).generations[0][0].text})}_streamResponseChunks(e,t,i){return yt(this,null,function*(){throw new Error("Not implemented.")})}_separateRunnableConfigFromCallOptionsCompat(e){let[t,i]=super._separateRunnableConfigFromCallOptions(e);return i.signal=t.signal,[t,i]}_streamIterator(e,t){return yt(this,null,function*(){if(this._streamResponseChunks===n.prototype._streamResponseChunks)yield this.invoke(e,t);else{let l=n._convertInputToPromptValue(e),[c,d]=this._separateRunnableConfigFromCallOptionsCompat(t),f=yield new ge(Oo.configure(c.callbacks,this.callbacks,c.tags,this.tags,c.metadata,this.metadata,{verbose:this.verbose})),p={options:d,invocation_params:this?.invocationParams(d),batch_size:1},g=yield new ge(f?.handleLLMStart(this.toJSON(),[l.toString()],c.runId,void 0,p,void 0,void 0,c.runName)),m=new om({text:""});try{try{for(var i=ze(this._streamResponseChunks(l.toString(),d,g?.[0])),r,o,s;r=!(o=yield new ge(i.next())).done;r=!1){let _=o.value;m?m=m.concat(_):m=_,typeof _.text=="string"&&(yield _.text)}}catch{s=[o]}finally{try{r&&(o=i.return)&&(yield new ge(o.call(i)))}finally{if(s)throw s[0]}}}catch(_){throw yield new ge(Promise.all((g??[]).map(y=>y?.handleLLMError(_)))),_}yield new ge(Promise.all((g??[]).map(_=>_?.handleLLMEnd({generations:[[m]]}))))}})}generatePrompt(e,t,i){return E(this,null,function*(){let r=e.map(o=>o.toString());return this.generate(r,t,i)})}invocationParams(e){return{}}_flattenLLMResult(e){let t=[];for(let i=0;i<e.generations.length;i+=1){let r=e.generations[i];if(i===0)t.push({generations:[r],llmOutput:e.llmOutput});else{let o=e.llmOutput?S(b({},e.llmOutput),{tokenUsage:{}}):void 0;t.push({generations:[r],llmOutput:o})}}return t}_generateUncached(e,t,i,r){return E(this,null,function*(){let o;if(r!==void 0&&r.length===e.length)o=r;else{let m=yield Oo.configure(i.callbacks,this.callbacks,i.tags,this.tags,i.metadata,this.metadata,{verbose:this.verbose}),_={options:t,invocation_params:this?.invocationParams(t),batch_size:e.length};o=yield m?.handleLLMStart(this.toJSON(),e,i.runId,void 0,_,void 0,void 0,i?.runName)}let s=!!o?.[0].handlers.find(gb),l;if(s&&e.length===1&&this._streamResponseChunks!==n.prototype._streamResponseChunks)try{let m=yield this._streamResponseChunks(e[0],t,o?.[0]),_;try{for(var d=ze(m),f,p,g;f=!(p=yield d.next()).done;f=!1){let y=p.value;_===void 0?_=y:_=Ba(_,y)}}catch{g=[p]}finally{try{f&&(p=d.return)&&(yield p.call(d))}finally{if(g)throw g[0]}}if(_===void 0)throw new Error("Received empty response from chat model call.");l={generations:[[_]],llmOutput:{}},yield o?.[0].handleLLMEnd(l)}catch(m){throw yield o?.[0].handleLLMError(m),m}else{try{l=yield this._generate(e,t,o?.[0])}catch(_){throw yield Promise.all((o??[]).map(y=>y?.handleLLMError(_))),_}let m=this._flattenLLMResult(l);yield Promise.all((o??[]).map((_,y)=>_?.handleLLMEnd(m[y])))}let c=o?.map(m=>m.runId)||void 0;return Object.defineProperty(l,eh,{value:c?{runIds:c}:void 0,configurable:!0}),l})}_generateCached(l){return E(this,arguments,function*({prompts:e,cache:t,llmStringKey:i,parsedOptions:r,handledOptions:o,runId:s}){let c=yield Oo.configure(o.callbacks,this.callbacks,o.tags,this.tags,o.metadata,this.metadata,{verbose:this.verbose}),d={options:r,invocation_params:this?.invocationParams(r),batch_size:e.length},f=yield c?.handleLLMStart(this.toJSON(),e,s,void 0,d,void 0,void 0,o?.runName),p=[],m=(yield Promise.allSettled(e.map((w,I)=>E(this,null,function*(){let k=yield t.lookup(w,i);return k==null&&p.push(I),k})))).map((w,I)=>({result:w,runManager:f?.[I]})).filter(({result:w})=>w.status==="fulfilled"&&w.value!=null||w.status==="rejected"),_=[];yield Promise.all(m.map((O,j)=>E(this,[O,j],function*({result:w,runManager:I},k){if(w.status==="fulfilled"){let q=w.value;return _[k]=q.map(V=>(V.generationInfo=S(b({},V.generationInfo),{tokenUsage:{}}),V)),q.length&&(yield I?.handleLLMNewToken(q[0].text)),I?.handleLLMEnd({generations:[q]},void 0,void 0,void 0,{cached:!0})}else return yield I?.handleLLMError(w.reason,void 0,void 0,void 0,{cached:!0}),Promise.reject(w.reason)})));let y={generations:_,missingPromptIndices:p,startedRunManagers:f};return Object.defineProperty(y,eh,{value:f?{runIds:f?.map(w=>w.runId)}:void 0,configurable:!0}),y})}generate(e,t,i){return E(this,null,function*(){if(!Array.isArray(e))throw new Error("Argument 'prompts' is expected to be a string[]");let r;Array.isArray(t)?r={stop:t}:r=t;let[o,s]=this._separateRunnableConfigFromCallOptionsCompat(r);if(o.callbacks=o.callbacks??i,!this.cache)return this._generateUncached(e,s,o);let{cache:l}=this,c=this._getSerializedCacheKeyParametersForCall(s),{generations:d,missingPromptIndices:f,startedRunManagers:p}=yield this._generateCached({prompts:e,cache:l,llmStringKey:c,parsedOptions:s,handledOptions:o,runId:o.runId}),g={};if(f.length>0){let m=yield this._generateUncached(f.map(_=>e[_]),s,o,p!==void 0?f.map(_=>p?.[_]):void 0);yield Promise.all(m.generations.map((_,y)=>E(this,null,function*(){let w=f[y];return d[w]=_,l.update(e[w],c,_)}))),g=m.llmOutput??{}}return{generations:d,llmOutput:g}})}call(e,t,i){return E(this,null,function*(){let{generations:r}=yield this.generate([e],t,i);return r[0][0].text})}predict(e,t,i){return E(this,null,function*(){return this.call(e,t,i)})}predictMessages(e,t,i){return E(this,null,function*(){let r=mb(e),o=yield this.call(r,t,i);return new $n(o)})}_identifyingParams(){return{}}serialize(){return S(b({},this._identifyingParams()),{_type:this._llmType(),_model:this._modelType()})}_modelType(){return"base_llm"}},Tp=class extends pv{_generate(e,t,i){return E(this,null,function*(){return{generations:yield Promise.all(e.map((o,s)=>this._call(o,S(b({},t),{promptIndex:s}),i).then(l=>[{text:l}])))}})}};var kR={};yn(kR,{chunkArray:()=>TR});var TR=(n,e)=>n.reduce((t,i,r)=>{let o=Math.floor(r/e),s=t[o]||[];return t[o]=s.concat([i]),t},[]);var AR={};yn(AR,{Embeddings:()=>Ed});var Ed=class{constructor(e){Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.caller=new th(e??{})}};var PR={};yn(PR,{BaseToolkit:()=>MR,DynamicStructuredTool:()=>SE,DynamicTool:()=>IE,StructuredTool:()=>Id,Tool:()=>kp,ToolInputParsingException:()=>pb,isLangChainTool:()=>Vc,isRunnableToolLike:()=>av,isStructuredTool:()=>sv,isStructuredToolParams:()=>lv,tool:()=>fue});var Id=class extends Ip{get lc_namespace(){return["langchain","tools"]}constructor(e){super(e??{}),Object.defineProperty(this,"returnDirect",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"verboseParsingErrors",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"responseFormat",{enumerable:!0,configurable:!0,writable:!0,value:"content"}),Object.defineProperty(this,"defaultConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verboseParsingErrors=e?.verboseParsingErrors??this.verboseParsingErrors,this.responseFormat=e?.responseFormat??this.responseFormat,this.defaultConfig=e?.defaultConfig??this.defaultConfig}invoke(e,t){return E(this,null,function*(){let i,r=Ro(Er(this.defaultConfig,t));return fb(e)?(i=e.args,r=S(b({},r),{toolCall:e})):i=e,this.call(i,r)})}call(e,t,i){return E(this,null,function*(){let r=fb(e)?e.args:e,o;if(po(this.schema))try{o=yield am(this.schema,r)}catch(_){let y="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(y=`${y}
Details: ${_.message}`),new pb(y,JSON.stringify(e))}else{let _=SF(r,this.schema);if(!_.valid){let y="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(y=`${y}
Details: ${_.errors.map(w=>`${w.keywordLocation}: ${w.error}`).join(`
`)}`),new pb(y,JSON.stringify(e))}o=r}let s=Xd(t),c=yield Oo.configure(s.callbacks,this.callbacks,s.tags||i,this.tags,s.metadata,this.metadata,{verbose:this.verbose})?.handleToolStart(this.toJSON(),typeof e=="string"?e:JSON.stringify(e),s.runId,void 0,void 0,void 0,s.runName);delete s.runId;let d;try{d=yield this._call(o,c,s)}catch(_){throw yield c?.handleToolError(_),_}let f,p;if(this.responseFormat==="content_and_artifact")if(Array.isArray(d)&&d.length===2)[f,p]=d;else throw new Error(`Tool response format is "content_and_artifact" but the output was not a two-tuple.
Result: ${JSON.stringify(d)}`);else f=d;let g;fb(e)&&(g=e.id),!g&&rF(s)&&(g=s.toolCall.id);let m=pue({content:f,artifact:p,toolCallId:g,name:this.name});return yield c?.handleToolEnd(m),m})}},kp=class extends Id{constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:C.object({input:C.string().optional()}).transform(t=>t.input)})}call(e,t){let i=typeof e=="string"||e==null?{input:e}:e;return super.call(i,t)}},IE=class n extends kp{static lc_name(){return"DynamicTool"}constructor(e){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.func=e.func,this.returnDirect=e.returnDirect??this.returnDirect}call(e,t){return E(this,null,function*(){let i=Xd(t);return i.runName===void 0&&(i.runName=this.name),ji(n.prototype,this,"call").call(this,e,i)})}_call(e,t,i){return E(this,null,function*(){return this.func(e,t,i)})}},SE=class n extends Id{static lc_name(){return"DynamicStructuredTool"}constructor(e){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.func=e.func,this.returnDirect=e.returnDirect??this.returnDirect,this.schema=e.schema}call(e,t,i){return E(this,null,function*(){let r=Xd(t);return r.runName===void 0&&(r.runName=this.name),ji(n.prototype,this,"call").call(this,e,r,i)})}_call(e,t,i){return this.func(e,t,i)}},MR=class{getTools(){return this.tools}};function fue(n,e){let t=oS(e.schema),i=TF(e.schema);if(!e.schema||t||i)return new IE(S(b({},e),{description:e.description??e.schema?.description??`${e.name} tool`,func:(s,l,c)=>E(null,null,function*(){return new Promise((d,f)=>{let p=fi(c,{callbacks:l?.getChild()});zs.runWithConfig(rm(p),()=>E(null,null,function*(){try{d(n(s,p))}catch(g){f(g)}}))})})}));let r=e.schema,o=e.description??e.schema.description??`${e.name} tool`;return new SE(S(b({},e),{description:o,schema:r,func:(s,l,c)=>E(null,null,function*(){return new Promise((d,f)=>{let p=fi(c,{callbacks:l?.getChild()});zs.runWithConfig(rm(p),()=>E(null,null,function*(){try{d(n(s,p))}catch(g){f(g)}}))})})}))}function pue(n){let{content:e,artifact:t,toolCallId:i}=n;return i&&!XN(e)?typeof e=="string"||Array.isArray(e)&&e.every(r=>typeof r=="object")?new Yd({content:e,artifact:t,tool_call_id:i,name:n.name}):new Yd({content:mue(e),artifact:t,tool_call_id:i,name:n.name}):e}function mue(n){try{return JSON.stringify(n,null,2)??""}catch{return`${n}`}}var OR=class extends kp{static lc_name(){return"DallEAPIWrapper"}constructor(e){e?.responseFormat!==void 0&&["url","b64_json"].includes(e.responseFormat)&&(e.dallEResponseFormat=e.responseFormat,e.responseFormat="content"),super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"dalle_api_wrapper"}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:"A wrapper around OpenAI DALL-E API. Useful for when you need to generate images from a text description. Input should be an image description."}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"dall-e-3"}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:"vivid"}),Object.defineProperty(this,"quality",{enumerable:!0,configurable:!0,writable:!0,value:"standard"}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:"1024x1024"}),Object.defineProperty(this,"dallEResponseFormat",{enumerable:!0,configurable:!0,writable:!0,value:"url"}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let t=e?.apiKey??e?.openAIApiKey??or("OPENAI_API_KEY"),i=e?.organization??or("OPENAI_ORGANIZATION"),r={apiKey:t,organization:i,dangerouslyAllowBrowser:!0,baseURL:e?.baseUrl};this.client=new ft(r),this.model=e?.model??e?.modelName??this.model,this.style=e?.style??this.style,this.quality=e?.quality??this.quality,this.n=e?.n??this.n,this.size=e?.size??this.size,this.dallEResponseFormat=e?.dallEResponseFormat??this.dallEResponseFormat,this.user=e?.user}processMultipleGeneratedUrls(e){return this.dallEResponseFormat==="url"?e.flatMap(t=>t.data?.flatMap(r=>r.url?{type:"image_url",image_url:r.url}:[]).filter(r=>r!==void 0&&r.type==="image_url"&&typeof r.image_url=="string"&&r.image_url!==void 0)??[]):e.flatMap(t=>t.data?.flatMap(r=>r.b64_json?{type:"image_url",image_url:{url:r.b64_json}}:[]).filter(r=>r!==void 0&&r.type==="image_url"&&typeof r.image_url=="object"&&"url"in r.image_url&&typeof r.image_url.url=="string"&&r.image_url.url!==void 0)??[])}_call(e){return E(this,null,function*(){let t={model:this.model,prompt:e,n:1,size:this.size,response_format:this.dallEResponseFormat,style:this.style,quality:this.quality,user:this.user};if(this.n>1){let o=yield Promise.all(Array.from({length:this.n}).map(()=>this.client.images.generate(t)));return this.processMultipleGeneratedUrls(o)}let i=yield this.client.images.generate(t),r="";return this.dallEResponseFormat==="url"?[r]=i.data?.map(o=>o.url).filter(o=>o!=="undefined")??[]:[r]=i.data?.map(o=>o.b64_json).filter(o=>o!=="undefined")??[],r})}};Object.defineProperty(OR,"toolName",{enumerable:!0,configurable:!0,writable:!0,value:"dalle_api_wrapper"});var FR={};yn(FR,{AIMessagePromptTemplate:()=>UW,BaseChatPromptTemplate:()=>zW,BaseMessagePromptTemplate:()=>jW,BaseMessageStringPromptTemplate:()=>VW,BasePromptTemplate:()=>uS,BaseStringPromptTemplate:()=>IW,ChatMessagePromptTemplate:()=>$W,ChatPromptTemplate:()=>su,DEFAULT_FORMATTER_MAPPING:()=>AW,DEFAULT_PARSER_MAPPING:()=>MW,DictPromptTemplate:()=>LW,FewShotChatMessagePromptTemplate:()=>qW,FewShotPromptTemplate:()=>HW,HumanMessagePromptTemplate:()=>lS,ImagePromptTemplate:()=>FW,MessagesPlaceholder:()=>BW,PipelinePromptTemplate:()=>RR,PromptTemplate:()=>NW,StructuredPrompt:()=>NR,SystemMessagePromptTemplate:()=>cS,checkValidTemplate:()=>RW,interpolateFString:()=>TW,interpolateMustache:()=>kW,parseFString:()=>SW,parseMustache:()=>DW,parseTemplate:()=>OW,renderTemplate:()=>PW});var RR=class n extends uS{static lc_name(){return"PipelinePromptTemplate"}constructor(e){super(S(b({},e),{inputVariables:[]})),Object.defineProperty(this,"pipelinePrompts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"finalPrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.pipelinePrompts=e.pipelinePrompts,this.finalPrompt=e.finalPrompt,this.inputVariables=this.computeInputValues()}computeInputValues(){let e=this.pipelinePrompts.map(i=>i.name),t=this.pipelinePrompts.map(i=>i.prompt.inputVariables.filter(r=>!e.includes(r))).flat();return[...new Set(t)]}static extractRequiredInputValues(e,t){return t.reduce((i,r)=>(i[r]=e[r],i),{})}formatPipelinePrompts(e){return E(this,null,function*(){let t=yield this.mergePartialAndUserVariables(e);for(let{name:i,prompt:r}of this.pipelinePrompts){let o=n.extractRequiredInputValues(t,r.inputVariables);r instanceof su?t[i]=yield r.formatMessages(o):t[i]=yield r.format(o)}return n.extractRequiredInputValues(t,this.finalPrompt.inputVariables)})}formatPromptValue(e){return E(this,null,function*(){return this.finalPrompt.formatPromptValue(yield this.formatPipelinePrompts(e))})}format(e){return E(this,null,function*(){return this.finalPrompt.format(yield this.formatPipelinePrompts(e))})}partial(e){return E(this,null,function*(){let t=b({},this);return t.inputVariables=this.inputVariables.filter(i=>!(i in e)),t.partialVariables=b(b({},this.partialVariables??{}),e),new n(t)})}serialize(){throw new Error("Not implemented.")}_getPromptType(){return"pipeline"}};function E6(n){return typeof n=="object"&&n!=null&&"withStructuredOutput"in n&&typeof n.withStructuredOutput=="function"}function gue(n){return typeof n=="object"&&n!=null&&"lc_id"in n&&Array.isArray(n.lc_id)&&n.lc_id.join("/")==="langchain_core/runnables/RunnableBinding"}var NR=class n extends su{get lc_aliases(){return S(b({},super.lc_aliases),{schema:"schema_"})}constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"method",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","structured"]}),this.schema=e.schema,this.method=e.method}pipe(e){if(E6(e))return super.pipe(e.withStructuredOutput(this.schema));if(gue(e)&&E6(e.bound))return super.pipe(new Di({bound:e.bound.withStructuredOutput(this.schema,...this.method?[{method:this.method}]:[]),kwargs:e.kwargs??{},config:e.config,configFactories:e.configFactories}));throw new Error('Structured prompts need to be piped to a language model that supports the "withStructuredOutput()" method.')}static fromMessagesAndSchema(e,t,i){return n.fromMessages(e,{schema:t,method:i})}};function DE(n){return lF({clockseq:n})}function zc(n,e){let t=e.replace(/-/g,"").match(/.{2}/g).map(i=>parseInt(i,16));return aF(n,new Uint8Array(t))}var I6="__error__",Ap="__scheduled__",S6="__interrupt__",D6="__resume__";var T6=[];var x1={};yn(x1,{agents:()=>k6,caches:()=>WO,callbacks__base:()=>hF,callbacks__manager:()=>vF,callbacks__promises:()=>_F,chat_history:()=>jR,documents:()=>VR,embeddings:()=>AR,example_selectors:()=>qR,language_models__base:()=>QO,language_models__chat_models:()=>eR,language_models__llms:()=>DR,load__serializable:()=>ZN,memory:()=>GR,messages:()=>LF,output_parsers:()=>hR,outputs:()=>wF,prompt_values:()=>VF,prompts:()=>FR,retrievers:()=>ZR,runnables:()=>sO,stores:()=>YR,tools:()=>PR,tracers__base:()=>fF,tracers__console:()=>pF,tracers__initialize:()=>XR,tracers__log_stream:()=>yF,tracers__run_collector:()=>e1,tracers__tracer_langchain:()=>gF,tracers__tracer_langchain_v1:()=>QR,utils__async_caller:()=>xF,utils__chunk_array:()=>kR,utils__env:()=>uF,utils__function_calling:()=>gR,utils__hash:()=>qO,utils__json_patch:()=>lR,utils__json_schema:()=>kF,utils__math:()=>n1,utils__stream:()=>bF,utils__testing:()=>w1,utils__tiktoken:()=>YO,utils__types:()=>mR,vectorstores:()=>r1});var k6={};var jR={};yn(jR,{BaseChatMessageHistory:()=>mv,BaseListChatMessageHistory:()=>Mp,InMemoryChatMessageHistory:()=>LR});var mv=class extends ja{addMessages(e){return E(this,null,function*(){for(let t of e)yield this.addMessage(t)})}},Mp=class extends ja{addUserMessage(e){return this.addMessage(new jl(e))}addAIChatMessage(e){return this.addMessage(new $n(e))}addAIMessage(e){return this.addMessage(new $n(e))}addMessages(e){return E(this,null,function*(){for(let t of e)yield this.addMessage(t)})}clear(){throw new Error("Not implemented.")}},LR=class extends Mp{constructor(e){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","stores","message","in_memory"]}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.messages=e??[]}getMessages(){return E(this,null,function*(){return this.messages})}addMessage(e){return E(this,null,function*(){this.messages.push(e)})}clear(){return E(this,null,function*(){this.messages=[]})}};var VR={};yn(VR,{BaseDocumentTransformer:()=>TE,Document:()=>Cs,MappingDocumentTransformer:()=>BR});var Cs=class{constructor(e){Object.defineProperty(this,"pageContent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.pageContent=e.pageContent!==void 0?e.pageContent.toString():"",this.metadata=e.metadata??{},this.id=e.id}};var TE=class extends $t{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","documents","transformers"]})}invoke(e,t){return this.transformDocuments(e)}},BR=class extends TE{transformDocuments(e){return E(this,null,function*(){let t=[];for(let i of e){let r=yield this._transformDocument(i);t.push(r)}return t})}};var qR={};yn(qR,{BaseExampleSelector:()=>Sd,BasePromptSelector:()=>kE,ConditionalPromptSelector:()=>zR,LengthBasedExampleSelector:()=>$R,SemanticSimilarityExampleSelector:()=>HR,isChatModel:()=>vue,isLLM:()=>_ue});var Sd=class extends ja{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","example_selectors","base"]})}};var kE=class{getPromptAsync(e,t){return E(this,null,function*(){return this.getPrompt(e).partial(t?.partialVariables??{})})}},zR=class extends kE{constructor(e,t=[]){super(),Object.defineProperty(this,"defaultPrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"conditionals",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.defaultPrompt=e,this.conditionals=t}getPrompt(e){for(let[t,i]of this.conditionals)if(t(e))return i;return this.defaultPrompt}};function _ue(n){return n._modelType()==="base_llm"}function vue(n){return n._modelType()==="base_chat_model"}function A6(n){return n.split(/\n| /).length}var $R=class n extends Sd{constructor(e){super(e),Object.defineProperty(this,"examples",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"examplePrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"getTextLength",{enumerable:!0,configurable:!0,writable:!0,value:A6}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,writable:!0,value:2048}),Object.defineProperty(this,"exampleTextLengths",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.examplePrompt=e.examplePrompt,this.maxLength=e.maxLength??2048,this.getTextLength=e.getTextLength??A6}addExample(e){return E(this,null,function*(){this.examples.push(e);let t=yield this.examplePrompt.format(e);this.exampleTextLengths.push(this.getTextLength(t))})}calculateExampleTextLengths(e,t){return E(this,null,function*(){if(e.length>0)return e;let{examples:i,examplePrompt:r}=t;return(yield Promise.all(i.map(s=>r.format(s)))).map(s=>this.getTextLength(s))})}selectExamples(e){return E(this,null,function*(){let t=Object.values(e).join(" "),i=this.maxLength-this.getTextLength(t),r=0,o=[];for(;i>0&&r<this.examples.length;){let s=i-this.exampleTextLengths[r];if(s<0)break;o.push(this.examples[r]),i=s,r+=1}return o})}static fromExamples(e,t){return E(this,null,function*(){let i=new n(t);return yield Promise.all(e.map(r=>i.addExample(r))),i})}};function UR(n){return Object.keys(n).sort().map(e=>n[e])}var HR=class n extends Sd{constructor(e){if(super(e),Object.defineProperty(this,"vectorStoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleKeys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKeys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.exampleKeys=e.exampleKeys,this.inputKeys=e.inputKeys,e.vectorStore!==void 0)this.vectorStoreRetriever=e.vectorStore.asRetriever({k:e.k??4,filter:e.filter});else if(e.vectorStoreRetriever)this.vectorStoreRetriever=e.vectorStoreRetriever;else throw new Error('You must specify one of "vectorStore" and "vectorStoreRetriever".')}addExample(e){return E(this,null,function*(){let t=this.inputKeys??Object.keys(e),i=UR(t.reduce((r,o)=>S(b({},r),{[o]:e[o]}),{})).join(" ");yield this.vectorStoreRetriever.addDocuments([new Cs({pageContent:i,metadata:e})])})}selectExamples(e){return E(this,null,function*(){let t=this.inputKeys??Object.keys(e),i=UR(t.reduce((s,l)=>S(b({},s),{[l]:e[l]}),{})).join(" "),o=(yield this.vectorStoreRetriever.invoke(i)).map(s=>s.metadata);return this.exampleKeys?o.map(s=>this.exampleKeys.reduce((l,c)=>S(b({},l),{[c]:s[c]}),{})):o})}static fromExamples(o,s,l){return E(this,arguments,function*(e,t,i,r={}){let c=r.inputKeys??null,d=e.map(p=>UR(c?c.reduce((g,m)=>S(b({},g),{[m]:p[m]}),{}):p).join(" ")),f=yield i.fromTexts(d,e,t,r);return new n({vectorStore:f,k:r.k??4,exampleKeys:r.exampleKeys,inputKeys:r.inputKeys})})}};var GR={};yn(GR,{BaseMemory:()=>WR,getInputValue:()=>bue,getOutputValue:()=>yue,getPromptInputKey:()=>wue});var WR=class{},M6=(n,e)=>{if(e!==void 0)return n[e];let t=Object.keys(n);if(t.length===1)return n[t[0]]},bue=(n,e)=>{let t=M6(n,e);if(!t){let i=Object.keys(n);throw new Error(`input values have ${i.length} keys, you must specify an input key or pass only 1 key as input`)}return t},yue=(n,e)=>{let t=M6(n,e);if(!t&&t!==""){let i=Object.keys(n);throw new Error(`output values have ${i.length} keys, you must specify an output key or pass only 1 key as output`)}return t};function wue(n,e){let t=Object.keys(n).filter(i=>!e.includes(i)&&i!=="stop");if(t.length!==1)throw new Error(`One input key expected, but got ${t.length}`);return t[0]}var ZR={};yn(ZR,{BaseRetriever:()=>Dd});var Dd=class extends $t{constructor(e){super(e),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.callbacks=e?.callbacks,this.tags=e?.tags??[],this.metadata=e?.metadata??{},this.verbose=e?.verbose??!1}_getRelevantDocuments(e,t){throw new Error("Not implemented!")}invoke(e,t){return E(this,null,function*(){return this.getRelevantDocuments(e,Ro(t))})}getRelevantDocuments(e,t){return E(this,null,function*(){let i=Ro(Xd(t)),o=yield(yield Oo.configure(i.callbacks,this.callbacks,i.tags,this.tags,i.metadata,this.metadata,{verbose:this.verbose}))?.handleRetrieverStart(this.toJSON(),e,i.runId,void 0,void 0,void 0,i.runName);try{let s=yield this._getRelevantDocuments(e,o);return yield o?.handleRetrieverEnd(s),s}catch(s){throw yield o?.handleRetrieverError(s),s}})}};var YR={};yn(YR,{BaseStore:()=>AE,InMemoryStore:()=>KR});var AE=class extends ja{},KR=class extends AE{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","storage"]}),Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:{}})}mget(e){return E(this,null,function*(){return e.map(t=>this.store[t])})}mset(e){return E(this,null,function*(){for(let[t,i]of e)this.store[t]=i})}mdelete(e){return E(this,null,function*(){for(let t of e)delete this.store[t]})}yieldKeys(e){return yt(this,null,function*(){let t=Object.keys(this.store);for(let i of t)(e===void 0||i.startsWith(e))&&(yield i)})}};var XR={};yn(XR,{getTracingCallbackHandler:()=>xue,getTracingV2CallbackHandler:()=>Cue});var QR={};yn(QR,{LangChainTracerV1:()=>gv});var gv=class extends ou{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"endpoint",{enumerable:!0,configurable:!0,writable:!0,value:or("LANGCHAIN_ENDPOINT")||"http://localhost:1984"}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:{"Content-Type":"application/json"}}),Object.defineProperty(this,"session",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let e=or("LANGCHAIN_API_KEY");e&&(this.headers["x-api-key"]=e)}newSession(e){return E(this,null,function*(){let t={start_time:Date.now(),name:e},i=yield this.persistSession(t);return this.session=i,i})}loadSession(e){return E(this,null,function*(){let t=`${this.endpoint}/sessions?name=${e}`;return this._handleSessionResponse(t)})}loadDefaultSession(){return E(this,null,function*(){let e=`${this.endpoint}/sessions?name=default`;return this._handleSessionResponse(e)})}convertV2RunToRun(e){return E(this,null,function*(){let t=this.session??(yield this.loadDefaultSession()),i=e.serialized,r;if(e.run_type==="llm"){let o=e.inputs.prompts?e.inputs.prompts:e.inputs.messages.map(l=>mb(l));r={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:i,type:e.run_type,session_id:t.id,prompts:o,response:e.outputs}}else if(e.run_type==="chain"){let o=yield Promise.all(e.child_runs.map(l=>this.convertV2RunToRun(l)));r={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:i,type:e.run_type,session_id:t.id,inputs:e.inputs,outputs:e.outputs,child_llm_runs:o.filter(l=>l.type==="llm"),child_chain_runs:o.filter(l=>l.type==="chain"),child_tool_runs:o.filter(l=>l.type==="tool")}}else if(e.run_type==="tool"){let o=yield Promise.all(e.child_runs.map(l=>this.convertV2RunToRun(l)));r={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:i,type:e.run_type,session_id:t.id,tool_input:e.inputs.input,output:e.outputs?.output,action:JSON.stringify(i),child_llm_runs:o.filter(l=>l.type==="llm"),child_chain_runs:o.filter(l=>l.type==="chain"),child_tool_runs:o.filter(l=>l.type==="tool")}}else throw new Error(`Unknown run type: ${e.run_type}`);return r})}persistRun(e){return E(this,null,function*(){let t,i;e.run_type!==void 0?i=yield this.convertV2RunToRun(e):i=e,i.type==="llm"?t=`${this.endpoint}/llm-runs`:i.type==="chain"?t=`${this.endpoint}/chain-runs`:t=`${this.endpoint}/tool-runs`;let r=yield fetch(t,{method:"POST",headers:this.headers,body:JSON.stringify(i)});r.ok||console.error(`Failed to persist run: ${r.status} ${r.statusText}`)})}persistSession(e){return E(this,null,function*(){let t=`${this.endpoint}/sessions`,i=yield fetch(t,{method:"POST",headers:this.headers,body:JSON.stringify(e)});return i.ok?b({id:(yield i.json()).id},e):(console.error(`Failed to persist session: ${i.status} ${i.statusText}, using default session.`),b({id:1},e))})}_handleSessionResponse(e){return E(this,null,function*(){let t=yield fetch(e,{method:"GET",headers:this.headers}),i;if(!t.ok)return console.error(`Failed to load session: ${t.status} ${t.statusText}`),i={id:1,start_time:Date.now()},this.session=i,i;let r=yield t.json();return r.length===0?(i={id:1,start_time:Date.now()},this.session=i,i):([i]=r,this.session=i,i)})}};function xue(n){return E(this,null,function*(){let e=new gv;return n?yield e.loadSession(n):yield e.loadDefaultSession(),e})}function Cue(){return E(this,null,function*(){return new mF})}var e1={};yn(e1,{RunCollectorCallbackHandler:()=>JR});var JR=class extends ou{constructor({exampleId:e}={}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"run_collector"}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracedRuns",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.exampleId=e,this.tracedRuns=[]}persistRun(e){return E(this,null,function*(){let t=b({},e);t.reference_example_id=this.exampleId,this.tracedRuns.push(t)})}};var n1={};yn(n1,{cosineSimilarity:()=>t1,euclideanDistance:()=>Due,innerProduct:()=>Sue,matrixFunc:()=>PE,maximalMarginalRelevance:()=>Tue,normalize:()=>Iue});function ME(n,e){let t=0,i=0,r=0;for(let o=0;o<n.length;o++)t+=n[o]*e[o],i+=n[o]*n[o],r+=e[o]*e[o];return t/(Math.sqrt(i)*Math.sqrt(r))}function P6(n,e){let t=0;for(let i=0;i<n.length;i++)t+=n[i]*e[i];return t}function Eue(n,e){let t=0;for(let i=0;i<n.length;i++)t+=(n[i]-e[i])*(n[i]-e[i]);return t}function O6(n,e){return Math.sqrt(Eue(n,e))}function PE(n,e,t){if(n.length===0||n[0].length===0||e.length===0||e[0].length===0)return[[]];if(n[0].length!==e[0].length)throw new Error(`Number of columns in X and Y must be the same. X has shape ${[n.length,n[0].length]} and Y has shape ${[e.length,e[0].length]}.`);return n.map(i=>e.map(r=>t(i,r)).map(r=>Number.isNaN(r)?0:r))}function Iue(n,e=!1){let t=kue(n);return n.map(i=>i.map(r=>e?1-r/t:r/t))}function t1(n,e){return PE(n,e,ME)}function Sue(n,e){return PE(n,e,P6)}function Due(n,e){return PE(n,e,O6)}function Tue(n,e,t=.5,i=4){if(Math.min(i,e.length)<=0)return[];let r=Array.isArray(n[0])?n:[n],o=t1(r,e)[0],s=R6(o).maxIndex,l=[e[s]],c=[s];for(;c.length<Math.min(i,e.length);){let d=-1/0,f=-1,p=t1(e,l);o.forEach((g,m)=>{if(c.includes(m))return;let _=Math.max(...p[m]),y=t*g-(1-t)*_;y>d&&(d=y,f=m)}),l.push(e[f]),c.push(f)}return c}function R6(n){if(n.length===0)return{maxIndex:-1,maxValue:NaN};let e=n[0],t=0;for(let i=1;i<n.length;i+=1)n[i]>e&&(t=i,e=n[i]);return{maxIndex:t,maxValue:e}}function kue(n){return n.reduce((e,t)=>Math.max(e,R6(t).maxValue),0)}var w1={};yn(w1,{FakeChatMessageHistory:()=>f1,FakeChatModel:()=>c1,FakeEmbeddings:()=>_1,FakeLLM:()=>a1,FakeListChatMessageHistory:()=>p1,FakeListChatModel:()=>h1,FakeRetriever:()=>d1,FakeRunnable:()=>s1,FakeSplitIntoListParser:()=>o1,FakeStreamingChatModel:()=>u1,FakeStreamingLLM:()=>l1,FakeTool:()=>g1,FakeTracer:()=>m1,FakeVectorStore:()=>y1,SingleRunExtractor:()=>b1,SyntheticEmbeddings:()=>v1});var r1={};yn(r1,{SaveableVectorStore:()=>i1,VectorStore:()=>Op,VectorStoreRetriever:()=>Pp});var Pp=class extends Dd{static lc_name(){return"VectorStoreRetriever"}get lc_namespace(){return["langchain_core","vectorstores"]}_vectorstoreType(){return this.vectorStore._vectorstoreType()}constructor(e){super(e),Object.defineProperty(this,"vectorStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"k",{enumerable:!0,configurable:!0,writable:!0,value:4}),Object.defineProperty(this,"searchType",{enumerable:!0,configurable:!0,writable:!0,value:"similarity"}),Object.defineProperty(this,"searchKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.vectorStore=e.vectorStore,this.k=e.k??this.k,this.searchType=e.searchType??this.searchType,this.filter=e.filter,e.searchType==="mmr"&&(this.searchKwargs=e.searchKwargs)}_getRelevantDocuments(e,t){return E(this,null,function*(){if(this.searchType==="mmr"){if(typeof this.vectorStore.maxMarginalRelevanceSearch!="function")throw new Error(`The vector store backing this retriever, ${this._vectorstoreType()} does not support max marginal relevance search.`);return this.vectorStore.maxMarginalRelevanceSearch(e,b({k:this.k,filter:this.filter},this.searchKwargs),t?.getChild("vectorstore"))}return this.vectorStore.similaritySearch(e,this.k,this.filter,t?.getChild("vectorstore"))})}addDocuments(e,t){return E(this,null,function*(){return this.vectorStore.addDocuments(e,t)})}},Op=class extends ja{constructor(e,t){super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","vectorstores",this._vectorstoreType()]}),Object.defineProperty(this,"embeddings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.embeddings=e}delete(e){return E(this,null,function*(){throw new Error("Not implemented.")})}similaritySearch(e,t=4,i=void 0,r=void 0){return E(this,null,function*(){return(yield this.similaritySearchVectorWithScore(yield this.embeddings.embedQuery(e),t,i)).map(s=>s[0])})}similaritySearchWithScore(e,t=4,i=void 0,r=void 0){return E(this,null,function*(){return this.similaritySearchVectorWithScore(yield this.embeddings.embedQuery(e),t,i)})}static fromTexts(e,t,i,r){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}static fromDocuments(e,t,i){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}asRetriever(e,t,i,r,o,s){if(typeof e=="number")return new Pp({vectorStore:this,k:e,filter:t,tags:[...r??[],this._vectorstoreType()],metadata:o,verbose:s,callbacks:i});{let l={vectorStore:this,k:e?.k,filter:e?.filter,tags:[...e?.tags??[],this._vectorstoreType()],metadata:e?.metadata,verbose:e?.verbose,callbacks:e?.callbacks,searchType:e?.searchType};return e?.searchType==="mmr"?new Pp(S(b({},l),{searchKwargs:e.searchKwargs})):new Pp(b({},l))}}},i1=class extends Op{static load(e,t){throw new Error("Not implemented")}};var o1=class extends Ea{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["tests","fake"]})}getFormatInstructions(){return""}parse(e){return E(this,null,function*(){return e.split(",").map(t=>t.trim())})}},s1=class extends $t{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["tests","fake"]}),Object.defineProperty(this,"returnOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.returnOptions=e.returnOptions}invoke(e,t){return E(this,null,function*(){return this.returnOptions?t??{}:{input:e}})}},a1=class extends Tp{constructor(e){super(e),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"thrownErrorString",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.response=e.response,this.thrownErrorString=e.thrownErrorString}_llmType(){return"fake"}_call(e,t,i){return E(this,null,function*(){if(this.thrownErrorString)throw new Error(this.thrownErrorString);let r=this.response??e;return yield i?.handleLLMNewToken(r),r})}},l1=class extends Tp{constructor(e){super(e),Object.defineProperty(this,"sleep",{enumerable:!0,configurable:!0,writable:!0,value:50}),Object.defineProperty(this,"responses",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"thrownErrorString",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.sleep=e.sleep??this.sleep,this.responses=e.responses,this.thrownErrorString=e.thrownErrorString}_llmType(){return"fake"}_call(e){return E(this,null,function*(){if(this.thrownErrorString)throw new Error(this.thrownErrorString);let t=this.responses?.[0];return this.responses=this.responses?.slice(1),t??e})}_streamResponseChunks(e,t,i){return yt(this,null,function*(){if(this.thrownErrorString)throw new Error(this.thrownErrorString);let r=this.responses?.[0];this.responses=this.responses?.slice(1);for(let o of r??e)yield new ge(new Promise(s=>setTimeout(s,this.sleep))),yield{text:o,generationInfo:{}},yield new ge(i?.handleLLMNewToken(o))})}},c1=class extends Ca{_combineLLMOutput(){return[]}_llmType(){return"fake"}_generate(e,t,i){return E(this,null,function*(){if(t?.stop?.length)return{generations:[{message:new $n(t.stop[0]),text:t.stop[0]}]};let r=e.map(o=>typeof o.content=="string"?o.content:JSON.stringify(o.content,null,2)).join(`
`);return yield i?.handleLLMNewToken(r),{generations:[{message:new $n(r),text:r}],llmOutput:{}}})}},u1=class n extends Ca{constructor(l){var c=l,{sleep:e=50,responses:t=[],chunks:i=[],toolStyle:r="openai",thrownErrorString:o}=c,s=Be(c,["sleep","responses","chunks","toolStyle","thrownErrorString"]);super(s),Object.defineProperty(this,"sleep",{enumerable:!0,configurable:!0,writable:!0,value:50}),Object.defineProperty(this,"responses",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"toolStyle",{enumerable:!0,configurable:!0,writable:!0,value:"openai"}),Object.defineProperty(this,"thrownErrorString",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tools",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.sleep=e,this.responses=t,this.chunks=i,this.toolStyle=r,this.thrownErrorString=o}_llmType(){return"fake"}bindTools(e){let t=[...this.tools,...e],i=t.map(s=>{switch(this.toolStyle){case"openai":return{type:"function",function:{name:s.name,description:s.description,parameters:Bi(s.schema)}};case"anthropic":return{name:s.name,description:s.description,input_schema:Bi(s.schema)};case"bedrock":return{toolSpec:{name:s.name,description:s.description,inputSchema:Bi(s.schema)}};case"google":return{name:s.name,description:s.description,parameters:Bi(s.schema)};default:throw new Error(`Unsupported tool style: ${this.toolStyle}`)}}),r=this.toolStyle==="google"?[{functionDeclarations:i}]:i,o=new n({sleep:this.sleep,responses:this.responses,chunks:this.chunks,toolStyle:this.toolStyle,thrownErrorString:this.thrownErrorString});return o.tools=t,o.withConfig({tools:r})}_generate(e,t,i){return E(this,null,function*(){if(this.thrownErrorString)throw new Error(this.thrownErrorString);let r=this.responses?.[0]?.content??e[0].content??"";return{generations:[{text:"",message:new $n({content:r,tool_calls:this.chunks?.[0]?.tool_calls})}]}})}_streamResponseChunks(e,t,i){return yt(this,null,function*(){if(this.thrownErrorString)throw new Error(this.thrownErrorString);if(this.chunks?.length){for(let s of this.chunks){let l=new ts({message:new Po({content:s.content,tool_calls:s.tool_calls,additional_kwargs:s.additional_kwargs??{}}),text:s.content?.toString()??""});yield l,yield new ge(i?.handleLLMNewToken(s.content,void 0,void 0,void 0,void 0,{chunk:l}))}return}let r=this.responses?.[0]??new $n(typeof e[0].content=="string"?e[0].content:""),o=typeof r.content=="string"?r.content:"";for(let s of o){yield new ge(new Promise(c=>setTimeout(c,this.sleep)));let l=new ts({message:new Po({content:s}),text:s});yield l,yield new ge(i?.handleLLMNewToken(s,void 0,void 0,void 0,void 0,{chunk:l}))}})}},d1=class extends Dd{constructor(e){super(),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["test","fake"]}),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:[new Cs({pageContent:"foo"}),new Cs({pageContent:"bar"})]}),this.output=e?.output??this.output}_getRelevantDocuments(e){return E(this,null,function*(){return this.output})}},h1=class extends Ca{static lc_name(){return"FakeListChatModel"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"responses",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"i",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"sleep",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"emitCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1});let{responses:t,sleep:i,emitCustomEvent:r}=e;this.responses=t,this.sleep=i,this.emitCustomEvent=r??this.emitCustomEvent}_combineLLMOutput(){return[]}_llmType(){return"fake-list"}_generate(e,t,i){return E(this,null,function*(){if(yield this._sleepIfRequested(),t?.thrownErrorString)throw new Error(t.thrownErrorString);if(this.emitCustomEvent&&(yield i?.handleCustomEvent("some_test_event",{someval:!0})),t?.stop?.length)return{generations:[this._formatGeneration(t.stop[0])]};{let r=this._currentResponse();return this._incrementResponse(),{generations:[this._formatGeneration(r)],llmOutput:{}}}})}_formatGeneration(e){return{message:new $n(e),text:e}}_streamResponseChunks(e,t,i){return yt(this,null,function*(){let r=this._currentResponse();this._incrementResponse(),this.emitCustomEvent&&(yield new ge(i?.handleCustomEvent("some_test_event",{someval:!0})));try{for(var o=ze(r),s,l,c;s=!(l=yield new ge(o.next())).done;s=!1){let d=l.value;if(yield new ge(this._sleepIfRequested()),t?.thrownErrorString)throw new Error(t.thrownErrorString);yield this._createResponseChunk(d),i?.handleLLMNewToken(d)}}catch{c=[l]}finally{try{s&&(l=o.return)&&(yield new ge(l.call(o)))}finally{if(c)throw c[0]}}})}_sleepIfRequested(){return E(this,null,function*(){this.sleep!==void 0&&(yield this._sleep())})}_sleep(){return E(this,null,function*(){return new Promise(e=>{setTimeout(()=>e(),this.sleep)})})}_createResponseChunk(e){return new ts({message:new Po({content:e}),text:e})}_currentResponse(){return this.responses[this.i]}_incrementResponse(){this.i<this.responses.length-1?this.i+=1:this.i=0}withStructuredOutput(e,t){return ri.from(i=>E(this,null,function*(){let r=yield this.invoke(i);if(r.tool_calls?.[0]?.args)return r.tool_calls[0].args;if(typeof r.content=="string")return JSON.parse(r.content);throw new Error("No structured output found")}))}},f1=class extends mv{constructor(){super(),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","message","fake"]}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:[]})}getMessages(){return E(this,null,function*(){return this.messages})}addMessage(e){return E(this,null,function*(){this.messages.push(e)})}addUserMessage(e){return E(this,null,function*(){this.messages.push(new jl(e))})}addAIChatMessage(e){return E(this,null,function*(){this.messages.push(new $n(e))})}clear(){return E(this,null,function*(){this.messages=[]})}},p1=class extends Mp{constructor(){super(),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","message","fake"]}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:[]})}addMessage(e){return E(this,null,function*(){this.messages.push(e)})}getMessages(){return E(this,null,function*(){return this.messages})}},m1=class extends ou{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"fake_tracer"}),Object.defineProperty(this,"runs",{enumerable:!0,configurable:!0,writable:!0,value:[]})}persistRun(e){return this.runs.push(e),Promise.resolve()}},g1=class extends Id{constructor(e){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}_call(e,t){return E(this,null,function*(){return JSON.stringify(e)})}},_1=class extends Ed{constructor(e){super(e??{})}embedDocuments(e){return Promise.resolve(e.map(()=>[.1,.2,.3,.4]))}embedQuery(e){return Promise.resolve([.1,.2,.3,.4])}},v1=class extends Ed{constructor(e){super(e??{}),Object.defineProperty(this,"vectorSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.vectorSize=e?.vectorSize??4}embedDocuments(e){return E(this,null,function*(){return Promise.all(e.map(t=>this.embedQuery(t)))})}embedQuery(e){return E(this,null,function*(){let t=e;t=t.toLowerCase().replaceAll(/[^a-z ]/g,"");let i=t.length%this.vectorSize,r=i===0?0:this.vectorSize-i,o=t.length+r;t=t.padEnd(o," ");let s=t.length/this.vectorSize,l=[];for(let d=0;d<t.length;d+=s)l.push(t.slice(d,d+s));return l.map(d=>{let f=0;for(let g=0;g<d.length;g+=1)f+=d===" "?0:d.charCodeAt(g);return f%26/26})})}},b1=class extends ou{constructor(){super(),Object.defineProperty(this,"runPromiseResolver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"single_run_extractor"}),this.runPromise=new Promise(e=>{this.runPromiseResolver=e})}persistRun(e){return E(this,null,function*(){this.runPromiseResolver(e)})}extract(){return E(this,null,function*(){return this.runPromise})}},y1=class n extends Op{_vectorstoreType(){return"memory"}constructor(e,r={}){var o=r,{similarity:t}=o,i=Be(o,["similarity"]);super(e,i),Object.defineProperty(this,"memoryVectors",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"similarity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.similarity=t??ME}addDocuments(e){return E(this,null,function*(){let t=e.map(({pageContent:i})=>i);return this.addVectors(yield this.embeddings.embedDocuments(t),e)})}addVectors(e,t){return E(this,null,function*(){let i=e.map((r,o)=>({content:t[o].pageContent,embedding:r,metadata:t[o].metadata}));this.memoryVectors=this.memoryVectors.concat(i)})}similaritySearchVectorWithScore(e,t,i){return E(this,null,function*(){let r=c=>{if(!i)return!0;let d=new Cs({metadata:c.metadata,pageContent:c.content});return i(d)},o=this.memoryVectors.filter(r);return o.map((c,d)=>({similarity:this.similarity(e,c.embedding),index:d})).sort((c,d)=>c.similarity>d.similarity?-1:0).slice(0,t).map(c=>[new Cs({metadata:o[c.index].metadata,pageContent:o[c.index].content}),c.similarity])})}static fromTexts(e,t,i,r){return E(this,null,function*(){let o=[];for(let s=0;s<e.length;s+=1){let l=Array.isArray(t)?t[s]:t,c=new Cs({pageContent:e[s],metadata:l});o.push(c)}return n.fromDocuments(o,i,r)})}static fromDocuments(e,t,i){return E(this,null,function*(){let r=new this(t,i);return yield r.addDocuments(e),r})}static fromExistingIndex(e,t){return E(this,null,function*(){return new this(e,t)})}};function Aue(n){let e={};for(let t=n;t&&t.prototype;t=Object.getPrototypeOf(t))Object.assign(e,Reflect.get(t.prototype,"lc_aliases"));return Object.entries(e).reduce((t,[i,r])=>(t[r]=i,t),{})}function OE(n){return E(this,null,function*(){let{optionalImportsMap:e={},optionalImportEntrypoints:t=[],importMap:i={},secretsMap:r={},path:o=["$"]}=this,s=o.join(".");if(typeof n=="object"&&n!==null&&!Array.isArray(n)&&"lc"in n&&"type"in n&&"id"in n&&n.lc===1&&n.type==="secret"){let l=n,[c]=l.id;if(c in r)return r[c];{let d=or(c);if(d)return d;throw new Error(`Missing key "${c}" for ${s} in load(secretsMap={})`)}}else if(typeof n=="object"&&n!==null&&!Array.isArray(n)&&"lc"in n&&"type"in n&&"id"in n&&n.lc===1&&n.type==="not_implemented"){let c=JSON.stringify(n);throw new Error(`Trying to load an object that doesn't implement serialization: ${s} -> ${c}`)}else if(typeof n=="object"&&n!==null&&!Array.isArray(n)&&"lc"in n&&"type"in n&&"id"in n&&"kwargs"in n&&n.lc===1){let l=n,c=JSON.stringify(l),[d,...f]=l.id.slice().reverse(),p=f.reverse(),g={langchain_core:x1,langchain:i},m=null,_=[p.join("/")];p[0]==="langchain_community"&&_.push(["langchain",...p.slice(1)].join("/"));let y=_.find(k=>k in e);if(T6.concat(t).includes(p.join("/"))||y)if(y!==void 0)m=yield e[y];else throw new Error(`Missing key "${p.join("/")}" for ${s} in load(optionalImportsMap={})`);else{let k;if(p[0]==="langchain"||p[0]==="langchain_core")k=g[p[0]],p.shift();else throw new Error(`Invalid namespace: ${s} -> ${c}`);if(p.length===0)throw new Error(`Invalid namespace: ${s} -> ${c}`);let O;do{if(O=p.join("__"),O in k)break;p.pop()}while(p.length>0);O in k&&(m=k[O])}if(typeof m!="object"||m===null)throw new Error(`Invalid namespace: ${s} -> ${c}`);let w=m[d]??Object.values(m).find(k=>typeof k=="function"&&GN(k)===d);if(typeof w!="function")throw new Error(`Invalid identifer: ${s} -> ${c}`);let I=yield OE.call(S(b({},this),{path:[...o,"kwargs"]}),l.kwargs);if(l.type==="constructor"){let k=new w(WN(I,qN,Aue(w)));return Object.defineProperty(k.constructor,"name",{value:d}),k}else throw new Error(`Invalid type: ${s} -> ${c}`)}else if(typeof n=="object"&&n!==null)return Array.isArray(n)?Promise.all(n.map((l,c)=>OE.call(S(b({},this),{path:[...o,`${c}`]}),l))):Object.fromEntries(yield Promise.all(Object.entries(n).map(d=>E(this,[d],function*([l,c]){return[l,yield OE.call(S(b({},this),{path:[...o,l]}),c)]}))));return n})}function N6(n,e){return E(this,null,function*(){let t=JSON.parse(n);return OE.call(b({},e),t)})}var F6="[...]",Mue="[Circular]",RE=[],Rp=[];function Pue(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function L6(n,e,t,i){typeof i>"u"&&(i=Pue()),E1(n,"",0,[],void 0,0,i);var r;try{Rp.length===0?r=JSON.stringify(n,e,t):r=JSON.stringify(n,Oue(e),t)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;RE.length!==0;){var o=RE.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return r}function C1(n,e,t,i){var r=Object.getOwnPropertyDescriptor(i,t);r.get!==void 0?r.configurable?(Object.defineProperty(i,t,{value:n}),RE.push([i,t,e,r])):Rp.push([e,t,n]):(i[t]=n,RE.push([i,t,e]))}function E1(n,e,t,i,r,o,s){o+=1;var l;if(typeof n=="object"&&n!==null){for(l=0;l<i.length;l++)if(i[l]===n){C1(Mue,n,e,r);return}if(typeof s.depthLimit<"u"&&o>s.depthLimit){C1(F6,n,e,r);return}if(typeof s.edgesLimit<"u"&&t+1>s.edgesLimit){C1(F6,n,e,r);return}if(i.push(n),Array.isArray(n))for(l=0;l<n.length;l++)E1(n[l],l,l,i,n,o,s);else{var c=Object.keys(n);for(l=0;l<c.length;l++){var d=c[l];E1(n[d],d,l,i,n,o,s)}}i.pop()}}function Oue(n){return n=typeof n<"u"?n:function(e,t){return t},function(e,t){if(Rp.length>0)for(var i=0;i<Rp.length;i++){var r=Rp[i];if(r[1]===e&&r[0]===t){t=r[2],Rp.splice(i,1);break}}return n.call(this,e,t)}}function Rue(n){return n!==null&&n.lc===1&&n.type==="constructor"&&Array.isArray(n.id)}function S1(n){return E(this,null,function*(){if(n&&typeof n=="object"){if(Array.isArray(n))return yield Promise.all(n.map(t=>S1(t)));{let e={};for(let[t,i]of Object.entries(n))e[t]=yield S1(i);if(e.lc===2&&e.type==="undefined")return;if(e.lc===2&&e.type==="constructor"&&Array.isArray(e.id))try{let t=e.id[e.id.length-1],i;switch(t){case"Set":i=Set;break;case"Map":i=Map;break;case"RegExp":i=RegExp;break;case"Error":i=Error;break;default:return e}return e.method?i[e.method](...e.args||[]):new i(...e.args||[])}catch{return e}else if(Rue(e))return N6(JSON.stringify(e));return e}}return n})}function I1(n,e,t,i){return{lc:2,type:"constructor",id:[n.name],method:e??null,args:t??[],kwargs:i??{}}}function Nue(n){return n===void 0?{lc:2,type:"undefined"}:n instanceof Set||n instanceof Map?I1(n.constructor,void 0,[Array.from(n)]):n instanceof RegExp?I1(RegExp,void 0,[n.source,n.flags]):n instanceof Error?I1(n.constructor,void 0,[n.message]):n?.lg_name==="Send"?{node:n.node,args:n.args}:n}var _v=class{_dumps(e){return new TextEncoder().encode(L6(e,(i,r)=>Nue(r)))}dumpsTyped(e){return e instanceof Uint8Array?["bytes",e]:["json",this._dumps(e)]}_loads(e){return E(this,null,function*(){let t=JSON.parse(e);return S1(t)})}loadsTyped(e,t){return E(this,null,function*(){if(e==="bytes")return typeof t=="string"?new TextEncoder().encode(t):t;if(e==="json")return this._loads(typeof t=="string"?t:new TextDecoder().decode(t));throw new Error(`Unknown serialization type: ${e}`)})}};function NE(n){if(typeof n!="object"||n===null)return n;let e=Array.isArray(n)?[]:{};for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=NE(n[t]));return e}function FE(){return{v:1,id:DE(-2),ts:new Date().toISOString(),channel_values:{},channel_versions:{},versions_seen:{},pending_sends:[]}}function $c(n){return{v:n.v,id:n.id,ts:n.ts,channel_values:b({},n.channel_values),channel_versions:b({},n.channel_versions),versions_seen:NE(n.versions_seen),pending_sends:[...n.pending_sends]}}function D1(n,e){return typeof n=="number"&&typeof e=="number"?Math.sign(n-e):String(n).localeCompare(String(e))}function T1(...n){return n.reduce((e,t,i)=>i===0?t:D1(e,t)>=0?e:t)}var k1={[I6]:-1,[Ap]:-2,[S6]:-3,[D6]:-4};var Td=class extends Error{constructor(e){super(e),this.name="InvalidNamespaceError"}};function Fue(n){if(n.length===0)throw new Td("Namespace cannot be empty.");for(let e of n){if(typeof e!="string")throw new Td(`Invalid namespace label '${e}' found in ${n}. Namespace labels must be strings, but got ${typeof e}.`);if(e.includes("."))throw new Td(`Invalid namespace label '${e}' found in ${n}. Namespace labels cannot contain periods ('.').`);if(e==="")throw new Td(`Namespace labels cannot be empty strings. Got ${e} in ${n}`)}if(n[0]==="langgraph")throw new Td(`Root label for namespace cannot be "langgraph". Got: ${n}`)}var vv=class{get(e,t){return E(this,null,function*(){return(yield this.batch([{namespace:e,key:t}]))[0]})}search(i){return E(this,arguments,function*(e,t={}){let{filter:r,limit:o=10,offset:s=0,query:l}=t;return(yield this.batch([{namespacePrefix:e,filter:r,limit:o,offset:s,query:l}]))[0]})}put(e,t,i,r){return E(this,null,function*(){Fue(e),yield this.batch([{namespace:e,key:t,value:i,index:r}])})}delete(e,t){return E(this,null,function*(){yield this.batch([{namespace:e,key:t,value:null}])})}listNamespaces(){return E(this,arguments,function*(e={}){let{prefix:t,suffix:i,maxDepth:r,limit:o=100,offset:s=0}=e,l=[];return t&&l.push({matchType:"prefix",path:t}),i&&l.push({matchType:"suffix",path:i}),(yield this.batch([{matchConditions:l.length?l:void 0,maxDepth:r,limit:o,offset:s}]))[0]})}start(){}stop(){}};var Lue=n=>"lg_name"in n&&n.lg_name==="AsyncBatchedStore"?n.store:n,LE=class extends vv{constructor(e){super(),Object.defineProperty(this,"lg_name",{enumerable:!0,configurable:!0,writable:!0,value:"AsyncBatchedStore"}),Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"nextKey",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"running",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"processingTask",{enumerable:!0,configurable:!0,writable:!0,value:null}),this.store=Lue(e)}get isRunning(){return this.running}batch(e){return E(this,null,function*(){throw new Error("The `batch` method is not implemented on `AsyncBatchedStore`.\n Instead, it calls the `batch` method on the wrapped store.\n If you are seeing this error, something is wrong.")})}get(e,t){return E(this,null,function*(){return this.enqueueOperation({namespace:e,key:t})})}search(e,t){return E(this,null,function*(){let{filter:i,limit:r=10,offset:o=0,query:s}=t||{};return this.enqueueOperation({namespacePrefix:e,filter:i,limit:r,offset:o,query:s})})}put(e,t,i){return E(this,null,function*(){return this.enqueueOperation({namespace:e,key:t,value:i})})}delete(e,t){return E(this,null,function*(){return this.enqueueOperation({namespace:e,key:t,value:null})})}start(){this.running||(this.running=!0,this.processingTask=this.processBatchQueue())}stop(){return E(this,null,function*(){this.running=!1,this.processingTask&&(yield this.processingTask)})}enqueueOperation(e){return new Promise((t,i)=>{let r=this.nextKey;this.nextKey+=1,this.queue.set(r,{operation:e,resolve:t,reject:i})})}processBatchQueue(){return E(this,null,function*(){for(;this.running;){if(yield new Promise(t=>{setTimeout(t,0)}),this.queue.size===0)continue;let e=new Map(this.queue);this.queue.clear();try{let t=Array.from(e.values()).map(({operation:r})=>r),i=yield this.store.batch(t);e.forEach(({resolve:r},o)=>{let s=Array.from(e.keys()).indexOf(o);r(i[s])})}catch(t){e.forEach(({reject:i})=>{i(t)})}}})}toJSON(){return{queue:this.queue,nextKey:this.nextKey,running:this.running,store:"[LangGraphStore]"}}};var bv=class{constructor(e){Object.defineProperty(this,"serde",{enumerable:!0,configurable:!0,writable:!0,value:new _v}),this.serde=e||this.serde}};var xl=class extends Error{constructor(e,t){let i=e??"";t?.lc_error_code&&(i=`${i}

Troubleshooting URL: https://langchain-ai.github.io/langgraphjs/troubleshooting/errors/${t.lc_error_code}/
`),super(i),Object.defineProperty(this,"lc_error_code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_error_code=t?.lc_error_code}},jE=class extends xl{get is_bubble_up(){return!0}},BE=class extends xl{constructor(e,t){super(e,t),this.name="GraphRecursionError"}static get unminifiable_name(){return"GraphRecursionError"}},Np=class extends xl{constructor(e,t){super(e,t),this.name="GraphValueError"}static get unminifiable_name(){return"GraphValueError"}},Uc=class extends jE{constructor(e,t){super(JSON.stringify(e,null,2),t),Object.defineProperty(this,"interrupts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="GraphInterrupt",this.interrupts=e??[]}static get unminifiable_name(){return"GraphInterrupt"}},yv=class extends Uc{constructor(e,t){super([{value:e,when:"during"}],t),this.name="NodeInterrupt"}static get unminifiable_name(){return"NodeInterrupt"}},wv=class extends jE{constructor(e){super(),Object.defineProperty(this,"command",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="ParentCommand",this.command=e}static get unminifiable_name(){return"ParentCommand"}};function j6(n){return n!==void 0&&n.name===wv.unminifiable_name}function Fp(n){return n!==void 0&&n.is_bubble_up===!0}function Sa(n){return n!==void 0&&[Uc.unminifiable_name,yv.unminifiable_name].includes(n.name)}var xv=class extends xl{constructor(e,t){super(e,t),this.name="EmptyInputError"}static get unminifiable_name(){return"EmptyInputError"}},An=class extends xl{constructor(e,t){super(e,t),this.name="EmptyChannelError"}static get unminifiable_name(){return"EmptyChannelError"}},Kt=class extends xl{constructor(e,t){super(e,t),this.name="InvalidUpdateError"}static get unminifiable_name(){return"InvalidUpdateError"}};var VE=class extends xl{constructor(e,t){super(e,t),this.name="UnreachableNodeError"}static get unminifiable_name(){return"UnreachableNodeError"}};function kd(n){return n!=null&&n.lg_is_channel===!0}var Eo=class{constructor(){Object.defineProperty(this,"ValueType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"UpdateType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lg_is_channel",{enumerable:!0,configurable:!0,writable:!0,value:!0})}consume(){return!1}finish(){return!1}isAvailable(){try{return this.get(),!0}catch(e){if(e.name===An.unminifiable_name)return!1;throw e}}};function Hc(n,e){let t=Object.fromEntries(Object.entries(n).filter(([,r])=>kd(r))),i={};for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)){let o=e.channel_values[r];i[r]=t[r].fromCheckpoint(o)}return i}function Es(n,e,t,i){let r;if(e===void 0)r=n.channel_values;else{r={};for(let o of Object.keys(e))try{r[o]=e[o].checkpoint()}catch(s){if(s.name!==An.unminifiable_name)throw s}}return{v:1,id:i?.id??DE(t),ts:new Date().toISOString(),channel_values:r,channel_versions:b({},n.channel_versions),versions_seen:NE(n.versions_seen),pending_sends:n.pending_sends??[]}}var B6,gn="__start__",ct="__end__",Is="__input__",V6="__copy__",xi="__error__",zE="__pregel_ns_writes",Cl="__pregel_send",Ev="__pregel_call",Ss="__pregel_read",ui="__pregel_checkpointer",Da="__pregel_resuming",Md="__pregel_task_id",Lp="__pregel_stream",jue="__pregel_resume_value",jp="__pregel_resume_map",Ds="__pregel_scratchpad",Iv="__pregel_previous",z6="__pregel_checkpoint_during",M1="checkpoint_id",qc="checkpoint_ns",$6="__pregel_node_finished",Vr="checkpoint_map",P1="__pregel_abort_signals",zt="__interrupt__",mr="__resume__",Sv="__no_writes__",Ts="__return__",$E="__previous__",Pd="__pregel_runtime_placeholder__";var _n="langsmith:hidden",U6="langsmith:nostream",O1="__self__",El="__pregel_tasks",gr="__pregel_push",Dv="__pregel_pull";var _r="00000000-0000-0000-0000-000000000000",H6=[_n,Is,zt,mr,xi,Sv,El,Cl,Ss,ui,Lp,Da,Md,Ev,jue,Ds,Iv,Vr,qc,M1],ni="|",zr=":",Bue=Symbol.for("langgraph.command"),A1=class{constructor(){Object.defineProperty(this,B6,{enumerable:!0,configurable:!0,writable:!0,value:void 0})}};B6=Bue;function UE(n){let e=n;return e!=null&&typeof e.node=="string"&&e.args!==void 0}var Ad=class{constructor(e,t){Object.defineProperty(this,"lg_name",{enumerable:!0,configurable:!0,writable:!0,value:"Send"}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.node=e,this.args=Cv(t)}toJSON(){return{lg_name:this.lg_name,node:this.node,args:this.args}}};function Ci(n){return n instanceof Ad}function q6(n){return!n||typeof n!="object"||!(zt in n)?!1:Array.isArray(n[zt])}var yi=class extends A1{constructor(e){super(),Object.defineProperty(this,"lg_name",{enumerable:!0,configurable:!0,writable:!0,value:"Command"}),Object.defineProperty(this,"lc_direct_tool_output",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"graph",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"update",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resume",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"goto",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.resume=e.resume,this.graph=e.graph,this.update=e.update,e.goto&&(this.goto=Array.isArray(e.goto)?Cv(e.goto):[Cv(e.goto)])}_updateAsTuples(){return this.update&&typeof this.update=="object"&&!Array.isArray(this.update)?Object.entries(this.update):Array.isArray(this.update)&&this.update.every(e=>Array.isArray(e)&&e.length===2&&typeof e[0]=="string")?this.update:[["__root__",this.update]]}toJSON(){let e;return typeof this.goto=="string"?e=this.goto:Ci(this.goto)?e=this.goto.toJSON():e=this.goto?.map(t=>typeof t=="string"?t:t.toJSON()),{lg_name:this.lg_name,update:this.update,resume:this.resume,goto:e}}};Object.defineProperty(yi,"PARENT",{enumerable:!0,configurable:!0,writable:!0,value:"__parent__"});function wi(n){return typeof n!="object"||n==null?!1:"lg_name"in n&&n.lg_name==="Command"}function Cv(n,e=new Map){if(n!=null&&typeof n=="object"){if(e.has(n))return e.get(n);let t;if(Array.isArray(n))t=[],e.set(n,t),n.forEach((i,r)=>{t[r]=Cv(i,e)});else if(wi(n)&&!(n instanceof yi))t=new yi(n),e.set(n,t);else if(UE(n)&&!(n instanceof Ad))t=new Ad(n.node,n.args),e.set(n,t);else if(wi(n)||Ci(n))t=n,e.set(n,t);else if("lc_serializable"in n&&n.lc_serializable)t=n,e.set(n,t);else{t={},e.set(n,t);for(let[i,r]of Object.entries(n))t[i]=Cv(r,e)}return t}return n}var Vue=["tags","metadata","callbacks","configurable"],zue=["tags","metadata","callbacks","runName","maxConcurrency","recursionLimit","configurable","runId","outputKeys","streamMode","store","writer","interruptBefore","interruptAfter","checkpointDuring","signal"],$ue=25;function HE(...n){let e={tags:[],metadata:{},callbacks:void 0,recursionLimit:$ue,configurable:{}},t=zs.getRunnableConfig();if(t!==void 0){for(let[i,r]of Object.entries(t))if(r!==void 0)if(Vue.includes(i)){let o;Array.isArray(r)?o=[...r]:typeof r=="object"?i==="callbacks"&&"copy"in r&&typeof r.copy=="function"?o=r.copy():o=b({},r):o=r,e[i]=o}else e[i]=r}for(let i of n)if(i!==void 0)for(let[r,o]of Object.entries(i))o!==void 0&&zue.includes(r)&&(e[r]=o);for(let[i,r]of Object.entries(e.configurable))e.metadata=e.metadata??{},!i.startsWith("__")&&(typeof r=="string"||typeof r=="number"||typeof r=="boolean")&&!(i in e.metadata)&&(e.metadata[i]=r);return e}function qE(n){return n.split(ni).filter(e=>!e.match(/^\d+$/)).map(e=>e.split(zr)[0]).join(ni)}function W6(n){let e=n.split(ni);for(;e.length>1&&e[e.length-1].match(/^\d+$/);)e.pop();return e.slice(0,-1).join(ni)}var vr=class extends $t{constructor(e){super(),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langgraph"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"recurse",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.name=e.name??e.func.name,this.func=e.func,this.config=e.tags?{tags:e.tags}:void 0,this.trace=e.trace??this.trace,this.recurse=e.recurse??this.recurse}_tracedInvoke(e,t,i){return E(this,null,function*(){return new Promise((r,o)=>{let s=fi(t,{callbacks:i?.getChild()});zs.runWithConfig(s,()=>E(this,null,function*(){try{let l=yield this.func(e,s);r(l)}catch(l){o(l)}}))})})}invoke(e,t){return E(this,null,function*(){let i,r=HE(t),o=Er(this.config,r);return this.trace?i=yield this._callWithConfig(this._tracedInvoke,e,o):i=yield zs.runWithConfig(o,()=>E(this,null,function*(){return this.func(e,o)})),$t.isRunnable(i)&&this.recurse?yield zs.runWithConfig(o,()=>E(this,null,function*(){return i.invoke(e,o)})):i})}};function*Il(n,e){if(e===void 0)yield*Mo(n);else for(let t of n)yield[e,t]}function ks(n){return E(this,null,function*(){let e=[];try{for(var t=ze(yield n),i,r,o;i=!(r=yield t.next()).done;i=!1){let s=r.value;e.push(s)}}catch{o=[r]}finally{try{i&&(r=t.return)&&(yield r.call(t))}finally{if(o)throw o[0]}}return e})}function Od(n){let e=[];for(let t of n)e.push(t);return e}function Rd(n,e){return n?"configurable"in n?S(b({},n),{configurable:b(b({},n.configurable),e)}):S(b({},n),{configurable:e}):{configurable:e}}var FQe={[Symbol.for("LG_SKIP_WRITE")]:!0};function Uue(n){return typeof n=="object"&&n?.[Symbol.for("LG_SKIP_WRITE")]!==void 0}var As={[Symbol.for("LG_PASSTHROUGH")]:!0};function WE(n){return typeof n=="object"&&n?.[Symbol.for("LG_PASSTHROUGH")]!==void 0}var R1=Symbol("IS_WRITER"),ii=class n extends vr{constructor(e,t){let i=`ChannelWrite<${e.map(r=>Ci(r)?r.node:"channel"in r?r.channel:"...").join(",")}>`;super({writes:e,name:i,tags:t,func:(r,o)=>E(this,null,function*(){return this._write(r,o??{})})}),Object.defineProperty(this,"writes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.writes=e}_write(e,t){return E(this,null,function*(){let i=this.writes.map(r=>N1(r)&&WE(r.value)?{mapper:r.mapper,value:e}:GE(r)&&WE(r.value)?{channel:r.channel,value:e,skipNone:r.skipNone,mapper:r.mapper}:r);return yield n.doWrite(t,i),e})}static doWrite(e,t){return E(this,null,function*(){for(let o of t){if(GE(o)){if(o.channel===El)throw new Kt("Cannot write to the reserved channel TASKS");if(WE(o.value))throw new Kt("PASSTHROUGH value must be replaced")}if(N1(o)&&WE(o.value))throw new Kt("PASSTHROUGH value must be replaced")}let i=[];for(let o of t)if(Ci(o))i.push([El,o]);else if(N1(o)){let s=yield o.mapper.invoke(o.value,e);s!=null&&s.length>0&&i.push(...s)}else if(GE(o)){let s=o.mapper!==void 0?yield o.mapper.invoke(o.value,e):o.value;if(Uue(s)||o.skipNone&&s===void 0)continue;i.push([o.channel,s])}else throw new Error(`Invalid write entry: ${JSON.stringify(o)}`);let r=e.configurable?.[Cl];r(i)})}static isWriter(e){return e instanceof n||R1 in e&&!!e[R1]}static registerWriter(e){return Object.defineProperty(e,R1,{value:!0})}};function GE(n){return n!==void 0&&typeof n.channel=="string"}function N1(n){return n!==void 0&&!GE(n)&&$t.isRunnable(n.mapper)}var ZE=class n extends vr{constructor(e,t,i=!1){super({func:(r,o)=>n.doRead(o,this.channel,this.fresh,this.mapper)}),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"ChannelRead"}),Object.defineProperty(this,"channel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fresh",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.fresh=i,this.mapper=t,this.channel=e,this.name=Array.isArray(e)?`ChannelRead<${e.join(",")}>`:`ChannelRead<${e}>`}static doRead(e,t,i,r){let o=e.configurable?.[Ss];if(!o)throw new Error("Runnable is not configured with a read function. Make sure to call in the context of a Pregel process");return r?r(o(t,i)):o(t,i)}},Bp=new io,Ms=class n extends Di{constructor(e){let{channels:t,triggers:i,mapper:r,writers:o,bound:s,kwargs:l,metadata:c,retryPolicy:d,cachePolicy:f,tags:p,subgraphs:g,ends:m}=e,_=[...e.config?.tags?e.config.tags:[],...p??[]];super(S(b({},e),{bound:e.bound??Bp,config:S(b({},e.config?e.config:{}),{tags:_})})),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"PregelNode"}),Object.defineProperty(this,"channels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"triggers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:Bp}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"retryPolicy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cachePolicy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"subgraphs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ends",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.channels=t,this.triggers=i,this.mapper=r,this.writers=o??this.writers,this.bound=s??this.bound,this.kwargs=l??this.kwargs,this.metadata=c??this.metadata,this.tags=_,this.retryPolicy=d,this.cachePolicy=f,this.subgraphs=g,this.ends=m}getWriters(){let e=[...this.writers];for(;e.length>1&&e[e.length-1]instanceof ii&&e[e.length-2]instanceof ii;){let t=e.slice(-2),i=t[0].writes.concat(t[1].writes);e[e.length-2]=new ii(i,t[0].config?.tags),e.pop()}return e}getNode(){let e=this.getWriters();if(!(this.bound===Bp&&e.length===0))return this.bound===Bp&&e.length===1?e[0]:this.bound===Bp?new Zn({first:e[0],middle:e.slice(1,e.length-1),last:e[e.length-1],omitSequenceTags:!0}):e.length>0?new Zn({first:this.bound,middle:e.slice(0,e.length-1),last:e[e.length-1],omitSequenceTags:!0}):this.bound}join(e){if(!Array.isArray(e))throw new Error("channels must be a list");if(typeof this.channels!="object")throw new Error("all channels must be named when using .join()");return new n({channels:b(b({},this.channels),Object.fromEntries(e.map(t=>[t,t]))),triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:this.bound,kwargs:this.kwargs,config:this.config,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy})}pipe(e){return ii.isWriter(e)?new n({channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:[...this.writers,e],bound:this.bound,config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy}):this.bound===Bp?new n({channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:sr(e),config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy}):new n({channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:this.bound.pipe(e),config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy})}};var F1=class{constructor(e,t){Object.defineProperty(this,"runtime",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_promises",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"lg_is_managed_value",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.config=e}static initialize(e,t){return E(this,null,function*(){throw new Error("Not implemented")})}promises(){return E(this,null,function*(){return Promise.all(this._promises)})}addPromise(e){this._promises.push(e)}};var G6="__channel_key_placeholder__",KE=class extends Map{constructor(e){super(e?Array.from(e):void 0)}replaceRuntimeValues(e,t){if(!(this.size===0||!t)&&!Array.from(this.values()).every(i=>!i.runtime)){if(typeof t=="object"&&!Array.isArray(t))for(let[i,r]of Object.entries(t))for(let[o,s]of this.entries())s.runtime&&s.call(e)===r&&(t[i]={[Pd]:o});else if(typeof t=="object"&&"constructor"in t)for(let i of Object.getOwnPropertyNames(Object.getPrototypeOf(t)))try{let r=t[i];for(let[o,s]of this.entries())s.runtime&&s.call(e)===r&&(t[i]={[Pd]:o})}catch(r){if(r.name!==TypeError.name)throw r}}}replaceRuntimePlaceholders(e,t){if(!(this.size===0||!t)&&!Array.from(this.values()).every(i=>!i.runtime)){if(typeof t=="object"&&!Array.isArray(t)){for(let[i,r]of Object.entries(t))if(typeof r=="object"&&r!==null&&Pd in r){let o=r[Pd];typeof o=="string"&&(t[i]=this.get(o)?.call(e))}}else if(typeof t=="object"&&"constructor"in t)for(let i of Object.getOwnPropertyNames(Object.getPrototypeOf(t)))try{let r=t[i];if(typeof r=="object"&&r!==null&&Pd in r){let o=this.get(r[Pd]);o&&(t[i]=o.call(e))}}catch(r){if(r.name!==TypeError.name)throw r}}}};function Nd(n){return!!(typeof n=="object"&&n&&"cls"in n&&"params"in n)}var YE=class n extends F1{call(){}static initialize(e,t){return E(this,null,function*(){return Promise.resolve(new n(e))})}};function Wc(n,e,t=!0,i=!1){try{return n[e].get()}catch(r){if(r.name===An.unminifiable_name){if(i)return r;if(t)return null}throw r}}function Ps(n,e,t=!0){if(Array.isArray(e)){let i={};for(let r of e)try{i[r]=Wc(n,r,!t)}catch(o){if(o.name===An.unminifiable_name)continue}return i}else return Wc(n,e)}function*Z6(n,e){if(n.graph===yi.PARENT)throw new Kt("There is no parent graph.");if(n.goto){let t;Array.isArray(n.goto)?t=n.goto:t=[n.goto];for(let i of t)if(Ci(i))yield[_r,El,i];else if(typeof i=="string")yield[_r,`branch:to:${i}`,"__start__"];else throw new Error(`In Command.send, expected Send or string, got ${typeof i}`)}if(n.resume)if(typeof n.resume=="object"&&Object.keys(n.resume).length&&Object.keys(n.resume).every(im))for(let[t,i]of Object.entries(n.resume)){let r=e.filter(o=>o[0]===t&&o[1]===mr).map(o=>o[2]).slice(0,1)??[];r.push(i),yield[t,mr,r]}else yield[_r,mr,n.resume];if(n.update){if(typeof n.update!="object"||!n.update)throw new Error("Expected cmd.update to be a dict mapping channel names to update values");if(Array.isArray(n.update))for(let[t,i]of n.update)yield[_r,t,i];else for(let[t,i]of Object.entries(n.update))yield[_r,t,i]}}function*QE(n,e){if(e!=null)if(Array.isArray(n)&&typeof e=="object"&&!Array.isArray(e))for(let t in e)n.includes(t)&&(yield[t,e[t]]);else{if(Array.isArray(n))throw new Error('Input chunk must be an object when "inputChannels" is an array');yield[n,e]}}function*XE(n,e,t){Array.isArray(n)?(e===!0||e.find(([i,r])=>n.includes(i)))&&(yield Ps(t,n)):(e===!0||e.some(([i,r])=>i===n))&&(yield Wc(t,n))}function*L1(n,e,t){let i=e.filter(([l,c])=>(l.config===void 0||!l.config.tags?.includes(_n))&&c[0][0]!==xi&&c[0][0]!==zt);if(!i.length)return;let r;i.some(([l])=>l.writes.some(([c,d])=>c===Ts))?r=i.flatMap(([l])=>l.writes.filter(([c,d])=>c===Ts).map(([c,d])=>[l.name,d])):Array.isArray(n)?r=i.flatMap(([l])=>{let{writes:c}=l,d={};for(let[f]of c)n.includes(f)&&(d[f]=(d[f]||0)+1);return Object.values(d).some(f=>f>1)?c.filter(([f])=>n.includes(f)).map(([f,p])=>[l.name,{[f]:p}]):[[l.name,Object.fromEntries(c.filter(([f])=>n.includes(f)))]]}):r=i.flatMap(([l])=>l.writes.filter(([c,d])=>c===n).map(([c,d])=>[l.name,d]));let o={};for(let[l,c]of r)l in o||(o[l]=[]),o[l].push(c);let s={};for(let l in o)if(o[l].length===1){let[c]=o[l];s[l]=c}else s[l]=o[l];t&&(s.__metadata__={cached:t}),yield s}var JE=class{constructor({func:e,name:t,input:i,retry:r,cache:o,callbacks:s}){Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"retry",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__lg_type",{enumerable:!0,configurable:!0,writable:!0,value:"call"}),this.func=e,this.name=t,this.input=i,this.retry=r,this.cache=o,this.callbacks=s}};function K6(n){return typeof n=="object"&&n!==null&&"__lg_type"in n&&n.__lg_type==="call"}function j1(n){let e=Object.values(n),t=e.length>0?typeof e[0]:void 0,i;return t==="number"?i=0:t==="string"&&(i=""),i}function Vp(n,e){if(Object.keys(n).length>0){let t=j1(e);return Object.fromEntries(Object.entries(e).filter(([i,r])=>r>(n[i]??t)))}else return e}function Y6(n,e){return n&&!Array.isArray(n)&&!(n instanceof Date)&&typeof n=="object"?n:{[e]:n}}function Yo(n,e){return n===null?{configurable:e}:n?.configurable===void 0?S(b({},n),{configurable:e}):S(b({},n),{configurable:b(b({},n.configurable),e)})}function Gc(n,e){let t=e?.parents??{};return Object.keys(t).length>0?Yo(n,{[Vr]:S(b({},t),{[n.configurable?.checkpoint_ns??""]:n.configurable?.checkpoint_id})}):n}function zp(...n){let e=[...new Set(n.filter(r=>r!==void 0))];if(e.length===0)return{signal:void 0,dispose:void 0};if(e.length===1)return{signal:e[0],dispose:void 0};let t=new AbortController,i=()=>{t.abort(),e.forEach(r=>r.removeEventListener("abort",i))};return e.forEach(r=>r.addEventListener("abort",i,{once:!0})),e.some(r=>r.aborted)&&t.abort(),{signal:t.signal,dispose:()=>{e.forEach(r=>r.removeEventListener("abort",i))}}}var Q6=(n,e)=>{if(!(!n&&!e))return n?e?Array.isArray(n)&&Array.isArray(e)?[...n,...e]:Array.isArray(n)?[...n,e]:Array.isArray(e)?[n,...e]:[n,e]:n:e};function X6(n,e){let t=new vr({func:i=>e(...i),name:n,trace:!1,recurse:!1});return new Zn({name:n,first:t,last:new ii([{channel:Ts,value:As}],[_n])})}var we=n=>BigInt(n),In=(n,e=0)=>new DataView(n.buffer,n.byteOffset+e,n.byteLength-e),nq=we("0x9E3779B1"),iq=we("0x85EBCA77"),Hue=we("0xC2B2AE3D"),Zc=we("0x9E3779B185EBCA87"),Fd=we("0xC2B2AE3D27D4EB4F"),rq=we("0x165667B19E3779F9"),z1=we("0x85EBCA77C2B2AE63"),que=we("0x27D4EB2F165667C5"),Wue=we("0x165667919E3779F9"),Gue=we("0x9FB21C651E98DF25"),Zue=n=>{let e=n.length;if(e%2!==0)throw new Error("String should have an even number of characters");let t=e/2,i=new Uint8Array(t),r=0,o=0;for(;o<t;){let s=n.slice(r,r+=2);i[o]=Number.parseInt(s,16),o+=1}return In(i)},Ta=Zue("b8fe6c3923a44bbe7c01812cf721ad1cded46de9839097db7240a4a4b7b3671fcb79e64eccc0e578825ad07dccff7221b8084674f743248ee03590e6813a264c3c2852bb91c300cb88d0658b1b532ea371644897a20df94e3819ef46a9deacd8a8fa763fe39c343ff9dcbbc7c70b4f1d8a51e04bcdb45931c89f7ec9d9787364eac5ac8334d3ebc3c581a0fffa1363eb170ddd51b7f0da49d316552629d4689e2b16be587d47a1fc8ff8b8d17ad031ce45cb3a8f95160428afd7fbcabb4b407e"),$p=(we(1)<<we(128))-we(1),Rt=(we(1)<<we(64))-we(1),iI=(we(1)<<we(32))-we(1),Sl=64,oq=Sl/8,Kue=8,eI=4;function Up(n){if(!n)throw new Error("Assert failed")}function Yue(n){let e=new DataView(new ArrayBuffer(8));return e.setBigUint64(0,n,!0),e.getBigUint64(0,!1)}function Que(n){let e=n;return e=(e&we(65535))<<we(16)|(e&we(4294901760))>>we(16),e=(e&we(16711935))<<we(8)|(e&we(4278255360))>>we(8),e}function Xue(n,e){return(n&iI)*(e&iI)&Rt}function Jue(n,e){return(n<<e|n>>we(32)-e)&iI}function sq(n,e,t){for(let i=0;i<oq;i+=1){let r=e.getBigUint64(i*8,!0),o=r^t.getBigUint64(i*8,!0);n[i^1]+=r,n[i]+=Xue(o,o>>we(32))}return n}function J6(n,e,t,i){for(let r=0;r<i;r+=1)sq(n,In(e,r*Sl),In(t,r*8));return n}function ede(n,e){for(let t=0;t<oq;t+=1){let i=e.getBigUint64(t*8,!0),r=n[t];r=B1(r,we(47)),r^=i,r*=nq,n[t]=r&Rt}return n}function tI(n,e){return aq(n[0]^e.getBigUint64(0,!0),n[1]^e.getBigUint64(Kue,!0))}function eq(n,e,t){let i=t;return i+=tI(n.slice(0),In(e,0*eI)),i+=tI(n.slice(2),In(e,4*eI)),i+=tI(n.slice(4),In(e,8*eI)),i+=tI(n.slice(6),In(e,12*eI)),ka(i&Rt)}function tde(n,e,t,i,r){let o=n,s=Math.floor((t.byteLength-Sl)/8),l=Sl*s,c=Math.floor((e.byteLength-1)/l);for(let d=0;d<c;d+=1)o=J6(o,In(e,d*l),t,s),o=r(o,In(t,t.byteLength-Sl));{let d=Math.floor((e.byteLength-1-l*c)/Sl);o=J6(o,In(e,c*l),t,d),o=i(o,In(e,e.byteLength-Sl),In(t,t.byteLength-Sl-7))}return o}function nde(n,e){let t=new BigUint64Array([Hue,Zc,Fd,rq,z1,iq,que,nq]);Up(n.byteLength>128),t=tde(t,n,e,sq,ede),Up(t.length*8===64);{let i=eq(t,In(e,11),we(n.byteLength)*Zc&Rt);return eq(t,In(e,e.byteLength-Sl-11),~(we(n.byteLength)*Fd)&Rt)<<we(64)|i}}function aq(n,e){let t=n*e&$p;return t&Rt^t>>we(64)}function tq(n,e,t){return aq((n.getBigUint64(0,!0)^e.getBigUint64(0,!0)+t)&Rt,(n.getBigUint64(8,!0)^e.getBigUint64(8,!0)-t)&Rt)}function nI(n,e,t,i,r){let o=n&Rt,s=n>>we(64)&Rt;return o+=tq(e,i,r),o^=t.getBigUint64(0,!0)+t.getBigUint64(8,!0),o&=Rt,s+=tq(t,In(i,16),r),s^=e.getBigUint64(0,!0)+e.getBigUint64(8,!0),s&=Rt,s<<we(64)|o}function ka(n){let e=n;return e^=e>>we(37),e*=Wue,e&=Rt,e^=e>>we(32),e}function rI(n){let e=n;return e^=e>>we(33),e*=Fd,e&=Rt,e^=e>>we(29),e*=rq,e&=Rt,e^=e>>we(32),e}function ide(n,e,t){let i=n.byteLength;Up(i>0&&i<=3);let r=we(n.getUint8(i-1))|we(i<<8)|we(n.getUint8(0)<<16)|we(n.getUint8(i>>1)<<24),o=(we(e.getUint32(0,!0))^we(e.getUint32(4,!0)))+t,s=(r^o)&Rt,l=(we(e.getUint32(8,!0))^we(e.getUint32(12,!0)))-t,c=(Jue(Que(r),we(13))^l)&Rt;return(rI(c)&Rt)<<we(64)|rI(s)}function B1(n,e){return n^n>>e}function rde(n,e,t){let i=n.byteLength;Up(i>=4&&i<=8);{let r=n.getUint32(0,!0),o=n.getUint32(i-4,!0),s=we(r)|we(o)<<we(32),l=(e.getBigUint64(16,!0)^e.getBigUint64(24,!0))+t&Rt,d=(s^l)*(Zc+(we(i)<<we(2)))&$p;return d+=(d&Rt)<<we(65),d&=$p,d^=d>>we(67),B1(B1(d&Rt,we(35))*Gue&Rt,we(28))|ka(d>>we(64))<<we(64)}}function ode(n,e,t){let i=n.byteLength;Up(i>=9&&i<=16);{let r=(e.getBigUint64(32,!0)^e.getBigUint64(40,!0))+t&Rt,o=(e.getBigUint64(48,!0)^e.getBigUint64(56,!0))-t&Rt,s=n.getBigUint64(0,!0),l=n.getBigUint64(i-8,!0),c=(s^l^r)*Zc,d=(c&Rt)+(we(i-1)<<we(54));c=c&($p^Rt)|d,l^=o,c+=l+(l&iI)*(iq-we(1))<<we(64),c&=$p,c^=Yue(c>>we(64));let f=(c&Rt)*Fd;return f+=(c>>we(64))*Fd<<we(64),f&=$p,ka(f&Rt)|ka(f>>we(64))<<we(64)}}function sde(n,e){let t=n.byteLength;return Up(t<=16),t>8?ode(n,Ta,e):t>=4?rde(n,Ta,e):t>0?ide(n,Ta,e):rI(e^Ta.getBigUint64(64,!0)^Ta.getBigUint64(72,!0))|rI(e^Ta.getBigUint64(80,!0)^Ta.getBigUint64(88,!0))<<we(64)}function V1(n){return~n+we(1)&Rt}function ade(n,e,t){let i=we(n.byteLength)*Zc&Rt,r=we(n.byteLength-1)/we(32);for(;r>=0;){let l=Number(r);i=nI(i,In(n,16*l),In(n,n.byteLength-16*(l+1)),In(e,32*l),t),r-=we(1)}let o=i+(i>>we(64))&Rt;o=ka(o);let s=(i&Rt)*Zc+(i>>we(64))*z1+(we(n.byteLength)-t&Rt)*Fd;return s&=Rt,s=V1(ka(s)),o|s<<we(64)}function lde(n,e,t){let i=we(n.byteLength)*Zc&Rt;for(let s=32;s<160;s+=32)i=nI(i,In(n,s-32),In(n,s-16),In(e,s-32),t);i=ka(i&Rt)|ka(i>>we(64))<<we(64);for(let s=160;s<=n.byteLength;s+=32)i=nI(i,In(n,s-32),In(n,s-16),In(e,3+s-160),t);i=nI(i,In(n,n.byteLength-16),In(n,n.byteLength-32),In(e,103),V1(t));let r=i+(i>>we(64))&Rt;r=ka(r);let o=(i&Rt)*Zc+(i>>we(64))*z1+(we(n.byteLength)-t&Rt)*Fd;return o&=Rt,o=V1(ka(o)),r|o<<we(64)}function Ld(n,e=we(0)){let t=new TextEncoder,i=In(typeof n=="string"?t.encode(n):n),r=i.byteLength,o=s=>s.toString(16).padStart(32,"0");return r<=16?o(sde(i,e)):r<=128?o(ade(i,Ta,e)):r<=240?o(lde(i,Ta,e)):o(nde(i,Ta))}function lq(n){return/^[0-9a-f]{32}$/.test(n)}var cq=n=>n!==void 0?n+1:1;function kv(n,e,t){let i=Object.values(n.channel_versions),r=i.length>0?typeof i[0]:void 0,o;r==="number"?o=0:r==="string"&&(o="");let s=n.versions_seen[zt]??{},l=Object.entries(n.channel_versions).some(([d,f])=>f>(s[d]??o)),c=t.some(d=>e==="*"?!d.config?.tags?.includes(_n):e.includes(d.name));return l&&c}function Tv(n,e,t,i,r,o,s=!1){let l=[],c=new Set;if(Array.isArray(o))l=o.filter(f=>i.get(f)),o=o.filter(f=>!i.get(f)),c=new Set(o.filter(f=>r.writes.some(([p,g])=>p===f)));else{for(let[f]of r.writes)if(f===o){c=new Set([f]);break}c=c||new Set}let d;if(s&&c.size>0){let f=Object.fromEntries(Object.entries(t).filter(([m,_])=>c.has(m))),p=Es(e,f,-1),g=Hc(f,p);$r($c(p),g,[r],void 0,void 0),d=Ps(b(b({},t),g),o)}else d=Ps(t,o);if(l.length>0)for(let f of l){let p=i.get(f);if(p){let g=p.call(n);d[f]=g}}return d}function $1(n,e,t,i,r){for(let[o,s]of r)if([gr,El].includes(o)&&s!=null){if(!Ci(s))throw new Kt(`Invalid packet type, expected SendProtocol, got ${JSON.stringify(s)}`);if(!(s.node in t))throw new Kt(`Invalid node name "${s.node}" in Send packet`);i.replaceRuntimeValues(n,s.args)}e(r)}var cde=new Set([Sv,gr,mr,zt,Ts,xi]);function $r(n,e,t,i,r){t.sort((g,m)=>{let _=g.path?.slice(0,3)||[],y=m.path?.slice(0,3)||[];for(let w=0;w<Math.min(_.length,y.length);w+=1){if(_[w]<y[w])return-1;if(_[w]>y[w])return 1}return _.length-y.length});let o=t.some(g=>g.triggers.length>0),s=Object.fromEntries(Object.entries(e).filter(([g,m])=>kd(m)));for(let g of t){n.versions_seen[g.name]??={};for(let m of g.triggers)m in n.channel_versions&&(n.versions_seen[g.name][m]=n.channel_versions[m])}let l;Object.keys(n.channel_versions).length>0&&(l=T1(...Object.values(n.channel_versions)));let c=new Set(t.flatMap(g=>g.triggers).filter(g=>!H6.includes(g)));for(let g of c)g in s&&s[g].consume()&&i!==void 0&&(n.channel_versions[g]=i(l,s[g]));n.pending_sends?.length&&o&&(n.pending_sends=[]);let d={},f={};for(let g of t)for(let[m,_]of g.writes)cde.has(m)||(m===El?n.pending_sends.push({node:_.node,args:_.args}):m in s?(d[m]??=[],d[m].push(_)):(f[m]??=[],f[m].push(_)));l=void 0,Object.keys(n.channel_versions).length>0&&(l=T1(...Object.values(n.channel_versions)));let p=new Set;for(let[g,m]of Object.entries(d))if(g in s){let _;try{_=s[g].update(m)}catch(y){if(y.name===Kt.unminifiable_name){let w=new Kt(`Invalid update for channel "${g}" with values ${JSON.stringify(m)}: ${y.message}`);throw w.lc_error_code=y.lc_error_code,w}else throw y}_&&i!==void 0&&(n.channel_versions[g]=i(l,s[g]),s[g].isAvailable()&&p.add(g))}if(o)for(let g of Object.keys(s))s[g].isAvailable()&&!p.has(g)&&s[g].update([])&&i!==void 0&&(n.channel_versions[g]=i(l,s[g]),s[g].isAvailable()&&p.add(g));if(o&&n.pending_sends.length===0&&!Object.keys(r??{}).some(g=>p.has(g)))for(let g of Object.keys(s))s[g].finish()&&i!==void 0&&(n.channel_versions[g]=i(l,s[g]),s[g].isAvailable()&&p.add(g));return f}function Kc(n,e,t,i,r,o,s,l){let c={};for(let d=0;d<n.pending_sends.length;d+=1){let f=oI([gr,d],n,e,t,i,r,o,s,l);f!==void 0&&(c[f.id]=f)}for(let d of Object.keys(t)){let f=oI([Dv,d],n,e,t,i,r,o,s,l);f!==void 0&&(c[f.id]=f)}return c}function oI(n,e,t,i,r,o,s,l,c){let{step:d,checkpointer:f,manager:p}=c,g=s.configurable??{},m=g.checkpoint_ns??"";if(n[0]===gr&&K6(n[n.length-1])){let _=n[n.length-1],y=X6(_.name,_.func),w=[gr],I=m===""?_.name:`${m}${ni}${_.name}`,k=zc(JSON.stringify([I,d.toString(),_.name,gr,n[1],n[2]]),e.id),O=`${I}${zr}${k}`,j=[...n.slice(0,3),!0],q={langgraph_step:d,langgraph_node:_.name,langgraph_triggers:w,langgraph_path:j,langgraph_checkpoint_ns:O};if(l){let V=[];return{name:_.name,input:_.input,proc:y,writes:V,config:fi(Er(s,{metadata:q,store:c.store??s.store}),{runName:_.name,callbacks:p?.getChild(`graph:step:${d}`),configurable:{[Md]:k,[Cl]:P=>$1(d,X=>V.push(...X),i,o,P),[Ss]:(P,X=!1)=>Tv(d,e,r,o,{name:_.name,writes:V,triggers:w,path:j},P,X),[ui]:f??g[ui],[Vr]:S(b({},g[Vr]),{[m]:e.id}),[Ds]:U1({pendingWrites:t??[],taskId:k,currentTaskInput:_.input,resumeMap:s.configurable?.[jp],namespaceHash:Ld(O)}),[Iv]:e.channel_values[$E],checkpoint_id:void 0,checkpoint_ns:O}}),triggers:w,retry_policy:_.retry,cache_key:_.cache?{key:Ld((_.cache.keyFunc??JSON.stringify)([_.input])),ns:[zE,_.name??"__dynamic__"],ttl:_.cache.ttl}:void 0,id:k,path:j,writers:[]}}else return{id:k,name:_.name,interrupts:[],path:j}}else if(n[0]===gr){let _=typeof n[1]=="number"?n[1]:parseInt(n[1],10);if(_>=e.pending_sends.length)return;let y=UE(e.pending_sends[_])&&!Ci(e.pending_sends[_])?new Ad(e.pending_sends[_].node,e.pending_sends[_].args):e.pending_sends[_];if(!UE(y)){console.warn(`Ignoring invalid packet ${JSON.stringify(y)} in pending sends.`);return}if(!(y.node in i)){console.warn(`Ignoring unknown node name ${y.node} in pending sends.`);return}let w=[gr],I=m===""?y.node:`${m}${ni}${y.node}`,k=zc(JSON.stringify([I,d.toString(),y.node,gr,_.toString()]),e.id),O=`${I}${zr}${k}`,j={langgraph_step:d,langgraph_node:y.node,langgraph_triggers:w,langgraph_path:n.slice(0,3),langgraph_checkpoint_ns:O};if(l){let q=i[y.node],V=q.getNode();if(V!==void 0){o.replaceRuntimePlaceholders(d,y.args),q.metadata!==void 0&&(j=b(b({},j),q.metadata));let re=[];return{name:y.node,input:y.args,proc:V,subgraphs:q.subgraphs,writes:re,config:fi(Er(s,{metadata:j,tags:q.tags,store:c.store??s.store}),{runName:y.node,callbacks:p?.getChild(`graph:step:${d}`),configurable:{[Md]:k,[Cl]:P=>$1(d,X=>re.push(...X),i,o,P),[Ss]:(P,X=!1)=>Tv(d,e,r,o,{name:y.node,writes:re,triggers:w,path:n},P,X),[ui]:f??g[ui],[Vr]:S(b({},g[Vr]),{[m]:e.id}),[Ds]:U1({pendingWrites:t??[],taskId:k,currentTaskInput:y.args,resumeMap:s.configurable?.[jp],namespaceHash:Ld(O)}),[Iv]:e.channel_values[$E],checkpoint_id:void 0,checkpoint_ns:O}}),triggers:w,retry_policy:q.retryPolicy,cache_key:q.cachePolicy?{key:Ld((q.cachePolicy.keyFunc??JSON.stringify)([y.args])),ns:[zE,q.name??"__dynamic__",y.node],ttl:q.cachePolicy.ttl}:void 0,id:k,path:n,writers:q.getWriters()}}}else return{id:k,name:y.node,interrupts:[],path:n}}else if(n[0]===Dv){let _=n[1].toString(),y=i[_];if(y===void 0)return;if(t?.length){let O=m===""?_:`${m}${ni}${_}`,j=zc(JSON.stringify([O,d.toString(),_,Dv,_]),e.id);if(t.some(V=>V[0]===j&&V[1]!==xi))return}let w=j1(e.channel_versions);if(w===void 0)return;let I=e.versions_seen[_]??{},k=y.triggers.filter(O=>{let j=Wc(r,O,!1,!0);return!(j instanceof Error&&j.name===An.unminifiable_name)&&(e.channel_versions[O]??w)>(I[O]??w)}).sort();if(k.length>0){let O=ude(d,y,o,r,l);if(O===void 0)return;let j=m===""?_:`${m}${ni}${_}`,q=zc(JSON.stringify([j,d.toString(),_,Dv,k]),e.id),V=`${j}${zr}${q}`,re={langgraph_step:d,langgraph_node:_,langgraph_triggers:k,langgraph_path:n,langgraph_checkpoint_ns:V};if(l){let P=y.getNode();if(P!==void 0){y.metadata!==void 0&&(re=b(b({},re),y.metadata));let X=[];return{name:_,input:O,proc:P,subgraphs:y.subgraphs,writes:X,config:fi(Er(s,{metadata:re,tags:y.tags,store:c.store??s.store}),{runName:_,callbacks:p?.getChild(`graph:step:${d}`),configurable:{[Md]:q,[Cl]:se=>$1(d,ue=>{X.push(...ue)},i,o,se),[Ss]:(se,ue=!1)=>Tv(d,e,r,o,{name:_,writes:X,triggers:k,path:n},se,ue),[ui]:f??g[ui],[Vr]:S(b({},g[Vr]),{[m]:e.id}),[Ds]:U1({pendingWrites:t??[],taskId:q,currentTaskInput:O,resumeMap:s.configurable?.[jp],namespaceHash:Ld(V)}),[Iv]:e.channel_values[$E],checkpoint_id:void 0,checkpoint_ns:V}}),triggers:k,retry_policy:y.retryPolicy,cache_key:y.cachePolicy?{key:Ld((y.cachePolicy.keyFunc??JSON.stringify)([O])),ns:[zE,y.name??"__dynamic__",_],ttl:y.cachePolicy.ttl}:void 0,id:q,path:n,writers:y.getWriters()}}}else return{id:q,name:_,interrupts:[],path:n}}}}function ude(n,e,t,i,r){let o;if(typeof e.channels=="object"&&!Array.isArray(e.channels)){o={};for(let[s,l]of Object.entries(e.channels))if(e.triggers.includes(l))try{o[s]=Wc(i,l,!1)}catch(c){if(c.name===An.unminifiable_name)return;throw c}else if(l in i)try{o[s]=Wc(i,l,!1)}catch(c){if(c.name===An.unminifiable_name)continue;throw c}else o[s]=t.get(s)?.call(n)}else if(Array.isArray(e.channels)){let s=!1;for(let l of e.channels)try{o=Wc(i,l,!1),s=!0;break}catch(c){if(c.name===An.unminifiable_name)continue;throw c}if(!s)return}else throw new Error(`Invalid channels type, expected list or dict, got ${e.channels}`);return r&&e.mapper!==void 0&&(o=e.mapper(o)),o}function U1({pendingWrites:n,taskId:e,currentTaskInput:t,resumeMap:i,namespaceHash:r}){let o=n.find(([c,d])=>c===_r&&d===mr)?.[2],l={callCounter:0,interruptCounter:-1,resume:(()=>{let c=n.filter(([d,f])=>d===e&&f===mr).flatMap(([d,f,p])=>p);if(i!=null&&r in i){let d=i[r];c.push(d)}return c})(),nullResume:o,subgraphCounter:0,currentTaskInput:t,consumeNullResume:()=>{if(l.nullResume)return delete l.nullResume,n.splice(n.findIndex(([c,d])=>c===_r&&d===mr),1),o}};return l}function dde(n){return"steps"in n&&Array.isArray(n.steps)}function Av(n){return"lg_is_pregel"in n&&n.lg_is_pregel===!0}function sI(n){let e=[n];for(let t of e){if(Av(t))return t;dde(t)&&e.push(...t.steps)}}var Mv={blue:{start:"\x1B[34m",end:"\x1B[0m"},green:{start:"\x1B[32m",end:"\x1B[0m"},yellow:{start:"\x1B[33;1m",end:"\x1B[0m"}},Pv=(n,e)=>`${n.start}${e}${n.end}`;function*H1(n){for(let{id:e,name:t,input:i,config:r,triggers:o,writes:s}of n){if(r?.tags?.includes(_n))continue;let l=s.filter(([c,d])=>c===e&&d===zt).map(([,c])=>c);yield{id:e,name:t,input:i,triggers:o,interrupts:l}}}function*uq(n,e){for(let[{id:t,name:i,config:r},o]of n)r?.tags?.includes(_n)||(yield{id:t,name:i,result:o.filter(([s])=>Array.isArray(e)?e.includes(s):s===e),interrupts:o.filter(s=>s[0]===zt).map(s=>s[1])})}function*dq(n,e,t,i,r,o,s,l){function c(p){let g={};return p.callbacks!=null&&(g.callbacks=p.callbacks),p.configurable!=null&&(g.configurable=p.configurable),p.maxConcurrency!=null&&(g.max_concurrency=p.maxConcurrency),p.metadata!=null&&(g.metadata=p.metadata),p.recursionLimit!=null&&(g.recursion_limit=p.recursionLimit),p.runId!=null&&(g.run_id=p.runId),p.runName!=null&&(g.run_name=p.runName),p.tags!=null&&(g.tags=p.tags),g}let d=n.configurable?.checkpoint_ns,f={};for(let p of r){if(!(p.subgraphs?.length?p.subgraphs:[p.proc]).find(sI))continue;let m=`${p.name}:${p.id}`;d&&(m=`${d}|${m}`),f[p.id]={configurable:{thread_id:n.configurable?.thread_id,checkpoint_ns:m}}}yield{config:c(n),values:Ps(e,t),metadata:i,next:r.map(p=>p.name),tasks:q1(r,o,f,l),parentConfig:s?c(s):void 0}}function q1(n,e,t,i){return n.map(r=>{let o=e.find(([d,f])=>d===r.id&&f===xi)?.[2],s=e.filter(([d,f])=>d===r.id&&f===zt).map(([,,d])=>d),l=(()=>{if(o||s.length||!e.length)return;let d=e.findIndex(([f,p])=>f===r.id&&p===Ts);if(d>=0)return e[d][2];if(typeof i=="string")return e.find(([f,p])=>f===r.id&&p===i)?.[2];if(Array.isArray(i)){let f=e.filter(([p,g])=>p===r.id&&i.includes(g)).map(([,p,g])=>[p,g]);return f.length?Object.fromEntries(f):void 0}})();if(o)return{id:r.id,name:r.name,path:r.path,error:o,interrupts:s,result:l};let c=t?.[r.id];return S(b({id:r.id,name:r.name,path:r.path,interrupts:s},c!==void 0?{state:c}:{}),{result:l})})}function hq(n,e,t){console.log([`${Pv(Mv.blue,`[${n}:checkpoint]`)}`,`\x1B[1m State at the end of step ${n}:\x1B[0m
`,JSON.stringify(Ps(e,t),null,2)].join(""))}function aI(n,e){let t=e.length;console.log([`${Pv(Mv.blue,`[${n}:tasks]`)}`,`\x1B[1m Starting step ${n} with ${t} task${t===1?"":"s"}:\x1B[0m
`,e.map(i=>`- ${Pv(Mv.green,String(i.name))} -> ${JSON.stringify(i.input,null,2)}`).join(`
`)].join(""))}function fq(n,e,t){let i={};for(let[r,o]of e)t.includes(r)&&(i[r]||(i[r]=[]),i[r].push(o));console.log([`${Pv(Mv.blue,`[${n}:writes]`)}`,`\x1B[1m Finished step ${n} with writes to ${Object.keys(i).length} channel${Object.keys(i).length!==1?"s":""}:\x1B[0m
`,Object.entries(i).map(([r,o])=>`- ${Pv(Mv.yellow,r)} -> ${o.map(s=>JSON.stringify(s)).join(", ")}`).join(`
`)].join(""))}var Ov=class extends nS{constructor(e,t){let i=e.getReader(),r=t??new AbortController;super({start(o){return s();function s(){return i.read().then(({done:l,value:c})=>{if(l){o.close();return}return o.enqueue(c),s()})}}}),Object.defineProperty(this,"_abortController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._abortController=r,this._reader=i}cancel(e){return E(this,null,function*(){this._abortController.abort(e),this._reader.releaseLock()})}get signal(){return this._abortController.signal}},Hp=class extends nS{get closed(){return this._closed}constructor(e){let t,i=new Promise(r=>{t=r});super({start:r=>{t(r)}}),Object.defineProperty(this,"modes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"controller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"passthroughFn",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_closed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),i.then(r=>{this.controller=r}),this.passthroughFn=e.passthroughFn,this.modes=e.modes}push(e){this.passthroughFn?.(e),this.controller.enqueue(e)}close(){try{this.controller.close()}catch{}finally{this._closed=!0}}error(e){this.controller.error(e)}};var lI=Symbol.for("INPUT_DONE"),W1=Symbol.for("INPUT_RESUMING"),hde=25;function fde(...n){return new Hp({passthroughFn:e=>{for(let t of n)t.modes.has(e[1])&&t.push(e)},modes:new Set(n.flatMap(e=>Array.from(e.modes)))})}var G1=class extends bv{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:Promise.resolve()}),this.cache=e}get(e){return E(this,null,function*(){return this.enqueueOperation("get",e)})}set(e){return E(this,null,function*(){return this.enqueueOperation("set",e)})}clear(e){return E(this,null,function*(){return this.enqueueOperation("clear",e)})}stop(){return E(this,null,function*(){yield this.queue})}enqueueOperation(e,...t){let i=this.queue.then(()=>this.cache[e](...t));return this.queue=i.then(()=>{},()=>{}),i}},cI=class n{get isResuming(){let e=Object.keys(this.checkpoint.channel_versions).length!==0,i=this.config.configurable?.[Da]!==void 0&&this.config.configurable?.[Da],r=this.input===null||this.input===void 0,o=wi(this.input)&&this.input.resume!=null,s=this.input===W1,l=!this.isNested&&this.config.metadata?.run_id!==void 0&&this.checkpointMetadata?.run_id!==void 0&&this.config.metadata.run_id===this.checkpointMetadata?.run_id;return e&&(i||r||o||s||l)}constructor(e){Object.defineProperty(this,"input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointerGetNextVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"channels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"managed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointIdSaved",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointMetadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointNamespace",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointPendingWrites",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"checkpointPreviousVersions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"step",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointDuring",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputKeys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streamKeys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"skipDoneTasks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"prevCheckpointConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"prevCheckpoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:"pending"}),Object.defineProperty(this,"tasks",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"stream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointerPromises",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"isNested",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_checkpointerChainedPromise",{enumerable:!0,configurable:!0,writable:!0,value:Promise.resolve()}),Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interruptAfter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interruptBefore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"toInterrupt",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"triggerToNodes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.input=e.input,this.checkpointer=e.checkpointer,this.checkpointer!==void 0?this.checkpointerGetNextVersion=this.checkpointer.getNextVersion.bind(this.checkpointer):this.checkpointerGetNextVersion=cq,this.checkpoint=e.checkpoint,this.checkpointMetadata=e.checkpointMetadata,this.checkpointPreviousVersions=e.checkpointPreviousVersions,this.channels=e.channels,this.managed=e.managed,this.checkpointPendingWrites=e.checkpointPendingWrites,this.step=e.step,this.stop=e.stop,this.config=e.config,this.checkpointConfig=e.checkpointConfig,this.isNested=e.isNested,this.manager=e.manager,this.outputKeys=e.outputKeys,this.streamKeys=e.streamKeys,this.nodes=e.nodes,this.skipDoneTasks=e.skipDoneTasks,this.store=e.store,this.cache=e.cache?new G1(e.cache):void 0,this.stream=e.stream,this.checkpointNamespace=e.checkpointNamespace,this.prevCheckpointConfig=e.prevCheckpointConfig,this.interruptAfter=e.interruptAfter,this.interruptBefore=e.interruptBefore,this.checkpointDuring=e.checkpointDuring,this.debug=e.debug,this.triggerToNodes=e.triggerToNodes}static initialize(e){return E(this,null,function*(){let{config:t,stream:i}=e;i!==void 0&&t.configurable?.[Lp]!==void 0&&(i=fde(i,t.configurable[Lp]));let r=t.configurable?!("checkpoint_id"in t.configurable):!0,o=t.configurable?.[Ds];t.configurable&&o&&(o.subgraphCounter>0&&(t=Yo(t,{[qc]:[t.configurable[qc],o.subgraphCounter.toString()].join(ni)})),o.subgraphCounter+=1);let s=Ss in(t.configurable??{});!s&&t.configurable?.checkpoint_ns!==void 0&&t.configurable?.checkpoint_ns!==""&&(t=Yo(t,{checkpoint_ns:"",checkpoint_id:void 0}));let l=t;t.configurable?.[Vr]!==void 0&&t.configurable?.[Vr]?.[t.configurable?.checkpoint_ns]&&(l=Yo(t,{checkpoint_id:t.configurable[Vr][t.configurable?.checkpoint_ns]}));let c=t.configurable?.checkpoint_ns?.split(ni)??[],d=(yield e.checkpointer?.getTuple(l))??{config:t,checkpoint:FE(),metadata:{source:"input",step:-2,writes:null,parents:{}},pendingWrites:[]};l=S(b(b({},t),d.config),{configurable:b(b({checkpoint_ns:""},t.configurable),d.config.configurable)});let f=d.parentConfig,p=$c(d.checkpoint),g=b({},d.metadata),m=d.pendingWrites??[],_=Hc(e.channelSpecs,p),y=(g.step??0)+1,w=y+(t.recursionLimit??hde)+1,I=b({},p.channel_versions),k=e.store?new LE(e.store):void 0;return k&&k.start(),new n({input:e.input,config:t,checkpointer:e.checkpointer,checkpoint:p,checkpointMetadata:g,checkpointConfig:l,prevCheckpointConfig:f,checkpointNamespace:c,channels:_,managed:e.managed,isNested:s,manager:e.manager,skipDoneTasks:r,step:y,stop:w,checkpointPreviousVersions:I,checkpointPendingWrites:m,outputKeys:e.outputKeys??[],streamKeys:e.streamKeys??[],nodes:e.nodes,stream:i,store:k,cache:e.cache,interruptAfter:e.interruptAfter,interruptBefore:e.interruptBefore,checkpointDuring:e.checkpointDuring,debug:e.debug,triggerToNodes:e.triggerToNodes})})}_checkpointerPutAfterPrevious(e){this._checkpointerChainedPromise=this._checkpointerChainedPromise.then(()=>this.checkpointer?.put(e.config,e.checkpoint,e.metadata,e.newVersions)),this.checkpointerPromises.push(this._checkpointerChainedPromise)}updateManagedValues(e,t){return E(this,null,function*(){let i=this.managed.get(e);i&&"update"in i&&typeof i.update=="function"&&(yield i.update(t))})}putWrites(e,t){let i=t;if(i.length===0)return;i.every(([s])=>s in k1)&&(i=Array.from(new Map(i.map(s=>[s[0],s])).values())),this.checkpointPendingWrites=this.checkpointPendingWrites.filter(s=>s[0]!==e);for(let[s,l]of i)this.checkpointPendingWrites.push([e,s,l]);let r=this.checkpointer?.putWrites(S(b({},this.checkpointConfig),{configurable:S(b({},this.checkpointConfig.configurable),{checkpoint_ns:this.config.configurable?.checkpoint_ns??"",checkpoint_id:this.checkpoint.id})}),i,e);if(r!==void 0&&this.checkpointerPromises.push(r),this.tasks&&this._outputWrites(e,i),!t.length||!this.cache||!this.tasks)return;let o=this.tasks[e];o==null||o.cache_key==null||t[0][0]===xi||t[0][0]===zt||this.cache.set([{key:[o.cache_key.ns,o.cache_key.key],value:o.writes,ttl:o.cache_key.ttl}])}_outputWrites(e,t,i=!1){let r=this.tasks[e];if(r!==void 0){if(r.config!==void 0&&(r.config.tags??[]).includes(_n))return;if(t.length>0)if(t[0][0]===zt){if(r.path?.[0]===gr&&r.path?.at(-1)===!0)return;let o=t.filter(s=>s[0]===zt).flatMap(s=>s[1]);this._emit([["updates",{[zt]:o}],["values",{[zt]:o}]])}else t[0][0]!==xi&&this._emit(Od(Il(L1(this.outputKeys,[[r,t]],i),"updates")));i||this._emit(Od(Il(uq([[r,t]],this.streamKeys),"tasks")))}}_matchCachedWrites(){return E(this,null,function*(){if(!this.cache)return[];let e=[],t=([s,l])=>`ns:${s.join(",")}|key:${l}`,i=[],r={};for(let s of Object.values(this.tasks))s.cache_key!=null&&!s.writes.length&&(i.push([s.cache_key.ns,s.cache_key.key]),r[t([s.cache_key.ns,s.cache_key.key])]=s);if(i.length===0)return[];let o=yield this.cache.get(i);for(let{key:s,value:l}of o){let c=r[t(s)];c!=null&&(c.writes.push(...l),e.push({task:c,result:l}))}return e})}tick(e){return E(this,null,function*(){this.store&&!this.store.isRunning&&this.store?.start();let{inputKeys:t=[]}=e;if(this.status!=="pending")throw new Error(`Cannot tick when status is no longer "pending". Current status: "${this.status}"`);if(![lI,W1].includes(this.input))yield this._first(t);else{if(this.toInterrupt.length>0)throw this.status="interrupt_before",new Uc;if(Object.values(this.tasks).every(o=>o.writes.length>0)){let o=Object.values(this.tasks).flatMap(c=>c.writes),s=$r(this.checkpoint,this.channels,Object.values(this.tasks),this.checkpointerGetNextVersion,this.triggerToNodes);for(let[c,d]of Object.entries(s))yield this.updateManagedValues(c,d);let l=yield ks(Il(XE(this.outputKeys,o,this.channels),"values"));if(this._emit(l),this.checkpointPendingWrites=[],yield this._putCheckpoint({source:"loop",writes:L1(this.outputKeys,Object.values(this.tasks).map(c=>[c,c.writes])).next().value??null}),kv(this.checkpoint,this.interruptAfter,Object.values(this.tasks)))throw this.status="interrupt_after",new Uc;this.config.configurable?.[Da]!==void 0&&delete this.config.configurable?.[Da]}else return!1}if(this.step>this.stop)return this.status="out_of_steps",!1;let i=Kc(this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,this.managed,this.config,!0,{step:this.step,checkpointer:this.checkpointer,isResuming:this.isResuming,manager:this.manager,store:this.store,stream:this.stream});if(this.tasks=i,this.checkpointer&&this._emit(yield ks(Il(dq(this.checkpointConfig,this.channels,this.streamKeys,this.checkpointMetadata,Object.values(this.tasks),this.checkpointPendingWrites,this.prevCheckpointConfig,this.outputKeys),"checkpoints"))),Object.values(this.tasks).length===0)return this.status="done",!1;if(this.skipDoneTasks&&this.checkpointPendingWrites.length>0){for(let[o,s,l]of this.checkpointPendingWrites){if(s===xi||s===zt||s===mr)continue;let c=Object.values(this.tasks).find(d=>d.id===o);c&&c.writes.push([s,l])}for(let o of Object.values(this.tasks))o.writes.length>0&&this._outputWrites(o.id,o.writes,!0)}if(Object.values(this.tasks).every(o=>o.writes.length>0))return this.tick({inputKeys:t});if(kv(this.checkpoint,this.interruptBefore,Object.values(this.tasks)))throw this.status="interrupt_before",new Uc;let r=yield ks(Il(H1(Object.values(this.tasks)),"tasks"));return this._emit(r),!0})}finishAndHandleError(e){return E(this,null,function*(){!this.checkpointDuring&&(!this.isNested||typeof e<"u"||this.checkpointNamespace.every(i=>!i.includes(zr)))&&(this._putCheckpoint(this.checkpointMetadata),this._flushPendingWrites());let t=this._suppressInterrupt(e);if((t||e===void 0)&&(this.output=Ps(this.channels,this.outputKeys)),t){if(this.tasks!==void 0&&this.checkpointPendingWrites.length>0&&Object.values(this.tasks).some(i=>i.writes.length>0)){let i=$r(this.checkpoint,this.channels,Object.values(this.tasks),this.checkpointerGetNextVersion,this.triggerToNodes);for(let[r,o]of Object.entries(i))yield this.updateManagedValues(r,o);this._emit(Od(Il(XE(this.outputKeys,Object.values(this.tasks).flatMap(r=>r.writes),this.channels),"values")))}Sa(e)&&!e.interrupts.length&&this._emit([["updates",{[zt]:[]}],["values",{[zt]:[]}]])}return t})}acceptPush(e,t,i){return E(this,null,function*(){if(this.interruptAfter?.length>0&&kv(this.checkpoint,this.interruptAfter,[e])){this.toInterrupt.push(e);return}let r=oI([gr,e.path??[],t,e.id,i],this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,this.managed,e.config??{},!0,{step:this.step,checkpointer:this.checkpointer,manager:this.manager,store:this.store,stream:this.stream});if(!r)return;if(this.interruptBefore?.length>0&&kv(this.checkpoint,this.interruptBefore,[r])){this.toInterrupt.push(r);return}this._emit(Od(Il(H1([r]),"tasks"))),this.debug&&aI(this.step,[r]),this.tasks[r.id]=r,this.skipDoneTasks&&this._matchWrites({[r.id]:r});let o=yield this._matchCachedWrites();for(let{task:s}of o)this._outputWrites(s.id,s.writes,!0);return r})}_suppressInterrupt(e){return Sa(e)&&!this.isNested}_first(e){return E(this,null,function*(){let{configurable:t}=this.config,i=t?.[Ds];if(i&&i.nullResume!==void 0&&this.putWrites(_r,[[mr,i.nullResume]]),wi(this.input)){let s=this.input.resume!=null;if(this.input.resume!=null&&typeof this.input.resume=="object"&&Object.keys(this.input.resume).every(lq)&&(this.config.configurable??={},this.config.configurable[jp]=this.input.resume),s&&this.checkpointer==null)throw new Error("Cannot use Command(resume=...) without checkpointer");let l={};for(let[c,d,f]of Z6(this.input,this.checkpointPendingWrites))l[c]??=[],l[c].push([d,f]);if(Object.keys(l).length===0)throw new xv("Received empty Command input");for(let[c,d]of Object.entries(l))this.putWrites(c,d)}let r=(this.checkpointPendingWrites??[]).filter(s=>s[0]===_r).map(s=>s.slice(1));r.length>0&&$r(this.checkpoint,this.channels,[{name:Is,writes:r,triggers:[]}],this.checkpointerGetNextVersion,this.triggerToNodes);let o=wi(this.input)&&r.length>0;if(this.isResuming||o){for(let l of Object.keys(this.channels))if(this.checkpoint.channel_versions[l]!==void 0){let c=this.checkpoint.channel_versions[l];this.checkpoint.versions_seen[zt]=S(b({},this.checkpoint.versions_seen[zt]),{[l]:c})}let s=yield ks(Il(XE(this.outputKeys,!0,this.channels),"values"));this._emit(s)}if(this.isResuming)this.input=W1;else if(o)yield this._putCheckpoint({source:"input",writes:{}}),this.input=lI;else{let s=yield ks(QE(e,this.input));if(s.length>0){let l=Kc(this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,this.managed,this.config,!0,{step:this.step});$r(this.checkpoint,this.channels,Object.values(l).concat([{name:Is,writes:s,triggers:[]}]),this.checkpointerGetNextVersion,this.triggerToNodes),yield this._putCheckpoint({source:"input",writes:Object.fromEntries(s)}),this.input=lI}else if(Da in(this.config.configurable??{}))this.input=lI;else throw new xv(`Received no input writes for ${JSON.stringify(e,null,2)}`)}this.isNested||(this.config=Yo(this.config,{[Da]:this.isResuming}))})}_emit(e){for(let[t,i]of e)if(this.stream.modes.has(t)&&this.stream.push([this.checkpointNamespace,t,i]),(t==="checkpoints"||t==="tasks")&&this.stream.modes.has("debug")){let r=t==="checkpoints"?this.step-1:this.step,o=new Date().toISOString(),s=t==="checkpoints"?"checkpoint":typeof i=="object"&&i!=null&&"result"in i?"task_result":"task";this.stream.push([this.checkpointNamespace,"debug",{step:r,type:s,timestamp:o,payload:i}])}}_putCheckpoint(e){let t=this.checkpointMetadata===e,i=this.checkpointer!=null&&(this.checkpointDuring||t),r=o=>{this.prevCheckpointConfig=this.checkpointConfig?.configurable?.checkpoint_id?this.checkpointConfig:void 0,this.checkpointConfig=S(b({},this.checkpointConfig),{configurable:S(b({},this.checkpointConfig.configurable),{checkpoint_ns:this.config.configurable?.checkpoint_ns??""})});let s=b({},this.checkpoint.channel_versions),l=Vp(this.checkpointPreviousVersions,s);this.checkpointPreviousVersions=s,this._checkpointerPutAfterPrevious({config:b({},this.checkpointConfig),checkpoint:$c(o),metadata:b({},this.checkpointMetadata),newVersions:l}),this.checkpointConfig=S(b({},this.checkpointConfig),{configurable:S(b({},this.checkpointConfig.configurable),{checkpoint_id:this.checkpoint.id})})};!t&&!this.checkpointDuring&&this.checkpointer!=null&&this.prevCheckpoint!=null&&this.checkpoint.pending_sends.length>0&&r(this.prevCheckpoint),t||(this.checkpointMetadata=S(b({},e),{step:this.step,parents:this.config.configurable?.[Vr]??{}})),this.checkpointDuring||(this.prevCheckpoint=this.checkpoint),this.checkpoint=Es(this.checkpoint,i?this.channels:void 0,this.step,t?{id:this.checkpoint.id}:void 0),i&&r(this.checkpoint),t||(this.step+=1)}_flushPendingWrites(){if(this.checkpointer==null||this.checkpointPendingWrites.length===0)return;let e=Yo(this.checkpointConfig,{[qc]:this.config.configurable?.checkpoint_ns??"",[M1]:this.checkpoint.id}),t={};for(let[i,r,o]of this.checkpointPendingWrites)t[i]??=[],t[i].push([r,o]);for(let[i,r]of Object.entries(t))this.checkpointerPromises.push(this.checkpointer.putWrites(e,r,i))}_matchWrites(e){for(let[t,i,r]of this.checkpointPendingWrites){if(i===xi||i===zt||i===mr)continue;let o=Object.values(e).find(s=>s.id===t);o&&o.writes.push([i,r])}for(let t of Object.values(e))t.writes.length>0&&this._outputWrites(t.id,t.writes,!0)}};function pde(n){return Nn(n?.message)}var uI=class extends dF{constructor(e){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"StreamMessagesHandler"}),Object.defineProperty(this,"streamFn",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadatas",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"seen",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"emittedChatModelRunIds",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"stableMessageIdMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.streamFn=e}_emit(e,t,i,r=!1){if(r&&t.id!==void 0&&this.seen[t.id]!==void 0)return;let o=t.id;i!=null&&(tm(t)?o??=`run-${i}-tool-${t.tool_call_id}`:((o==null||o===`run-${i}`)&&(o=this.stableMessageIdMap[i]??o??`run-${i}`),this.stableMessageIdMap[i]??=o)),o!==t.id&&(t.id=o,t.lc_kwargs.id=o),t.id!=null&&(this.seen[t.id]=t),this.streamFn([e[0],"messages",[t,e[1]]])}handleChatModelStart(e,t,i,r,o,s,l,c){l&&(!s||!s.includes(U6)&&!s.includes("nostream"))&&(this.metadatas[i]=[l.langgraph_checkpoint_ns.split("|"),b({tags:s,name:c},l)])}handleLLMNewToken(e,t,i,r,o,s){let l=s?.chunk;this.emittedChatModelRunIds[i]=!0,this.metadatas[i]!==void 0&&(pde(l)?this._emit(this.metadatas[i],l.message,i):this._emit(this.metadatas[i],new Po({content:e}),i))}handleLLMEnd(e,t){if(this.metadatas[t]!==void 0){if(!this.emittedChatModelRunIds[t]){let i=e.generations?.[0]?.[0];Nn(i?.message)&&this._emit(this.metadatas[t],i?.message,t,!0),delete this.emittedChatModelRunIds[t]}delete this.metadatas[t],delete this.stableMessageIdMap[t]}}handleLLMError(e,t){delete this.metadatas[t]}handleChainStart(e,t,i,r,o,s,l,c){if(s!==void 0&&c===s.langgraph_node&&(o===void 0||!o.includes(_n))&&(this.metadatas[i]=[s.langgraph_checkpoint_ns.split("|"),b({tags:o,name:c},s)],typeof t=="object")){for(let d of Object.values(t))if((Nn(d)||ru(d))&&d.id!==void 0)this.seen[d.id]=d;else if(Array.isArray(d))for(let f of d)(Nn(f)||ru(f))&&f.id!==void 0&&(this.seen[f.id]=f)}}handleChainEnd(e,t){let i=this.metadatas[t];if(delete this.metadatas[t],i!==void 0){if(Nn(e))this._emit(i,e,t,!0);else if(Array.isArray(e))for(let r of e)Nn(r)&&this._emit(i,r,t,!0);else if(e!=null&&typeof e=="object"){for(let r of Object.values(e))if(Nn(r))this._emit(i,r,t,!0);else if(Array.isArray(r))for(let o of r)Nn(o)&&this._emit(i,o,t,!0)}}}handleChainError(e,t){delete this.metadatas[t]}};var mde=500,gde=2,_de=128e3,vde=3,bde=[400,401,402,403,404,405,406,407,409],yde=n=>{if(n.message.startsWith("Cancel")||n.message.startsWith("AbortError")||n.name==="AbortError"||n.name==="GraphValueError"||n?.code==="ECONNABORTED")return!1;let e=n?.response?.status??n?.status;return!(e&&bde.includes(+e)||n?.error?.code==="insufficient_quota")};function Z1(n,e,t,i){return E(this,null,function*(){let r=n.retry_policy??e,o=r!==void 0?r.initialInterval??mde:0,s=0,l,c,{config:d}=n;for(t&&(d=Yo(d,t)),d=S(b({},d),{signal:i});!i?.aborted;){n.writes.splice(0,n.writes.length),l=void 0;try{c=yield n.proc.invoke(n.input,d);break}catch(f){if(l=f,l.pregelTaskId=n.id,j6(l)){let _=d?.configurable?.checkpoint_ns,y=l.command;if(y.graph===_){for(let w of n.writers)yield w.invoke(y,d);l=void 0;break}else if(y.graph===yi.PARENT){let w=W6(_);l.command=new yi(S(b({},l.command),{graph:w}))}}if(Fp(l)||r===void 0||(s+=1,s>=(r.maxAttempts??vde))||!(r.retryOn??yde)(l))break;o=Math.min(r.maxInterval??_de,o*(r.backoffFactor??gde));let g=r.jitter?Math.floor(o+Math.random()*1e3):o;yield new Promise(_=>setTimeout(_,g));let m=l.name??l.constructor.unminifiable_name??l.constructor.name;(r?.logWarning??!0)&&console.log(`Retrying task "${String(n.name)}" after ${o.toFixed(2)}ms (attempt ${s}) after ${m}: ${l}`),d=Yo(d,{[Da]:!0})}}return{task:n,result:c,error:l,signalAborted:i?.aborted}})}var K1=Symbol.for("promiseAdded");function wde(){let n={next:()=>{},wait:Promise.resolve(K1)};function e(t){n.next=()=>{n.wait=new Promise(e),t(K1)}}return n.wait=new Promise(e),n}var dI=class{constructor({loop:e,nodeFinished:t}){Object.defineProperty(this,"nodeFinished",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"loop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.loop=e,this.nodeFinished=t}tick(){return E(this,arguments,function*(e={}){let{timeout:t,retryPolicy:i,onStepWrite:r,maxConcurrency:o}=e,s=new Set,l,c=new AbortController,d=c.signal,f=t?AbortSignal.timeout(t):void 0,p=Object.values(this.loop.tasks).filter(O=>O.writes.length===0),{signals:g,disposeCombinedSignal:m}=this._initializeAbortSignals({exceptionSignal:d,stepTimeoutSignal:f,signal:e.signal}),_=this._executeTasksWithRetry(p,{signals:g,retryPolicy:i,maxConcurrency:o});try{for(var y=ze(_),w,I,k;w=!(I=yield y.next()).done;w=!1){let{task:O,error:j,signalAborted:q}=I.value;this._commit(O,j),Sa(j)||Fp(j)&&!Sa(l)?l=j:j&&(s.size===0||!q)&&(c.abort(),s.add(j))}}catch{k=[I]}finally{try{w&&(I=y.return)&&(yield I.call(y))}finally{if(k)throw k[0]}}if(m?.(),r?.(this.loop.step,Object.values(this.loop.tasks).map(O=>O.writes).flat()),s.size===1)throw Array.from(s)[0];if(s.size>1)throw new AggregateError(Array.from(s),`Multiple errors occurred during superstep ${this.loop.step}. See the "errors" field of this exception for more details.`);if(Sa(l)||Fp(l)&&this.loop.isNested)throw l})}_initializeAbortSignals({exceptionSignal:e,stepTimeoutSignal:t,signal:i}){let r=this.loop.config.configurable?.[P1]??{},o=r.externalAbortSignal??i,s=t??r.timeoutAbortSignal,{signal:l,dispose:c}=zp(o,s,e),d={externalAbortSignal:o,timeoutAbortSignal:s,composedAbortSignal:l};return this.loop.config=Yo(this.loop.config,{[P1]:d}),{signals:d,disposeCombinedSignal:c}}_executeTasksWithRetry(e,t){return yt(this,null,function*(){let{retryPolicy:i,maxConcurrency:r,signals:o}=t??{},s=wde(),l={},c={executingTasksMap:l,barrier:s,retryPolicy:i,scheduleTask:(m,_,y)=>E(this,null,function*(){return this.loop.acceptPush(m,_,y)})};if(o?.composedAbortSignal?.aborted)throw new Error("Abort");let d=0,f,p=zp(o?.externalAbortSignal,o?.timeoutAbortSignal),g=p.signal?new Promise((m,_)=>{f=()=>_(new Error("Abort")),p.signal?.addEventListener("abort",f,{once:!0})}):void 0;for(;(d===0||Object.keys(l).length>0)&&e.length;){for(;Object.values(l).length<(r??e.length)&&d<e.length;d+=1){let _=e[d];l[_.id]=Z1(_,i,{[Ev]:pq?.bind(c,this,_)},o?.composedAbortSignal).catch(y=>({task:_,error:y,signalAborted:o?.composedAbortSignal?.aborted}))}let m=yield new ge(Promise.race([...Object.values(l),...g?[g]:[],s.wait]));m!==K1&&(yield m,f!=null&&(p.signal?.removeEventListener("abort",f),p.dispose?.()),delete l[m.task.id])}})}_commit(e,t){if(t!==void 0)if(Sa(t)){if(t.interrupts.length){let i=t.interrupts.map(o=>[zt,o]),r=e.writes.filter(o=>o[0]===mr);r.length&&i.push(...r),this.loop.putWrites(e.id,i)}}else Fp(t)&&e.writes.length?this.loop.putWrites(e.id,e.writes):this.loop.putWrites(e.id,[[xi,{message:t.message,name:t.name}]]);else this.nodeFinished&&(e.config?.tags==null||!e.config.tags.includes(_n))&&this.nodeFinished(String(e.name)),e.writes.length===0&&e.writes.push([Sv,null]),this.loop.putWrites(e.id,e.writes)}};function pq(s,l,c,d,f){return E(this,arguments,function*(n,e,t,i,r,o={}){let p=e.config?.configurable?.[Ds];if(!p)throw new Error(`BUG: No scratchpad found on task ${e.name}__${e.id}`);let g=p.callCounter;p.callCounter+=1;let m=new JE({func:t,name:i,input:r,cache:o.cache,retry:o.retry,callbacks:o.callbacks}),_=yield this.scheduleTask(e,g,m);if(!_)return;let y=this.executingTasksMap[_.id];if(y!==void 0)return y;if(_.writes.length>0){let w=_.writes.filter(([k])=>k===Ts),I=_.writes.filter(([k])=>k===xi);if(w.length>0){if(w.length===1)return Promise.resolve(w[0][1]);throw new Error(`BUG: multiple returns found for task ${_.name}__${_.id}`)}if(I.length>0){if(I.length===1){let k=I[0][1],O=k instanceof Error?k:new Error(String(k));return Promise.reject(O)}throw new Error(`BUG: multiple errors found for task ${_.name}__${_.id}`)}return}else{let w=Z1(_,o.retry,{[Ev]:pq.bind(this,n,_)});return this.executingTasksMap[_.id]=w,this.barrier.next(),w.then(({result:I,error:k})=>k?Promise.reject(k):I)}})}var Os=class extends Error{constructor(e){super(e),this.name="GraphValidationError"}};function mq({nodes:n,channels:e,inputChannels:t,outputChannels:i,streamChannels:r,interruptAfterNodes:o,interruptBeforeNodes:s}){if(!e)throw new Os("Channels not provided");let l=new Set,c=new Set;for(let[d,f]of Object.entries(n)){if(d===zt)throw new Os(`"Node name ${zt} is reserved"`);if(f.constructor===Ms)f.triggers.forEach(p=>l.add(p));else throw new Os(`Invalid node type ${typeof f}, expected PregelNode`)}for(let d of l)if(!(d in e))throw new Os(`Subscribed channel '${String(d)}' not in channels`);if(Array.isArray(t)){if(t.every(d=>!l.has(d)))throw new Os(`None of the input channels ${t} are subscribed to by any node`)}else if(!l.has(t))throw new Os(`Input channel ${String(t)} is not subscribed to by any node`);Array.isArray(i)?i.forEach(d=>c.add(d)):c.add(i),r&&!Array.isArray(r)?c.add(r):Array.isArray(r)&&r.forEach(d=>c.add(d));for(let d of c)if(!(d in e))throw new Os(`Output channel '${String(d)}' not in channels`);if(o&&o!=="*"){for(let d of o)if(!(d in n))throw new Os(`Node ${String(d)} not in nodes`)}if(s&&s!=="*"){for(let d of s)if(!(d in n))throw new Os(`Node ${String(d)} not in nodes`)}}function Y1(n,e){if(Array.isArray(n)){for(let t of n)if(!(t in e))throw new Error(`Key ${String(t)} not found in channels`)}else if(!(n in e))throw new Error(`Key ${String(n)} not found in channels`)}var hI=class{static subscribeTo(e,t){let{key:i,tags:r}=b({key:void 0,tags:void 0},t??{});if(Array.isArray(e)&&i!==void 0)throw new Error("Can't specify a key when subscribing to multiple channels");let o;typeof e=="string"?i?o={[i]:e}:o=[e]:o=Object.fromEntries(e.map(l=>[l,l]));let s=Array.isArray(e)?e:[e];return new Ms({channels:o,triggers:s,tags:r})}static writeTo(e,t){let i=[];for(let r of e)i.push({channel:r,value:As,skipNone:!1});for(let[r,o]of Object.entries(t??{}))$t.isRunnable(o)||typeof o=="function"?i.push({channel:r,value:As,skipNone:!0,mapper:sr(o)}):i.push({channel:r,value:o,skipNone:!1});return new ii(i)}},Q1=class extends $t{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langgraph","pregel"]})}invoke(e,t){throw new Error("Not implemented")}withConfig(e){return super.withConfig(e)}stream(e,t){return super.stream(e,t)}},fI=class n extends Q1{static lc_name(){return"LangGraph"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langgraph","pregel"]}),Object.defineProperty(this,"lg_is_pregel",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"channels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputChannels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputChannels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoValidate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"streamMode",{enumerable:!0,configurable:!0,writable:!0,value:["values"]}),Object.defineProperty(this,"streamChannels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interruptAfter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interruptBefore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"checkpointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"retryPolicy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"triggerToNodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let{streamMode:t}=e;t!=null&&!Array.isArray(t)&&(t=[t]),this.nodes=e.nodes,this.channels=e.channels,this.autoValidate=e.autoValidate??this.autoValidate,this.streamMode=t??this.streamMode,this.inputChannels=e.inputChannels,this.outputChannels=e.outputChannels,this.streamChannels=e.streamChannels??this.streamChannels,this.interruptAfter=e.interruptAfter,this.interruptBefore=e.interruptBefore,this.stepTimeout=e.stepTimeout??this.stepTimeout,this.debug=e.debug??this.debug,this.checkpointer=e.checkpointer,this.retryPolicy=e.retryPolicy,this.config=e.config,this.store=e.store,this.cache=e.cache,this.name=e.name,this.autoValidate&&this.validate()}withConfig(e){let t=Er(this.config,e);return new this.constructor(S(b({},this),{config:t}))}validate(){mq({nodes:this.nodes,channels:this.channels,outputChannels:this.outputChannels,inputChannels:this.inputChannels,streamChannels:this.streamChannels,interruptAfterNodes:this.interruptAfter,interruptBeforeNodes:this.interruptBefore});for(let[e,t]of Object.entries(this.nodes))for(let i of t.triggers)this.triggerToNodes[i]??=[],this.triggerToNodes[i].push(e);return this}get streamChannelsList(){return Array.isArray(this.streamChannels)?this.streamChannels:this.streamChannels?[this.streamChannels]:Object.keys(this.channels)}get streamChannelsAsIs(){return this.streamChannels?this.streamChannels:Object.keys(this.channels)}getGraphAsync(e){return E(this,null,function*(){return this.getGraph(e)})}*getSubgraphs(e,t){for(let[i,r]of Object.entries(this.nodes)){if(e!==void 0&&!e.startsWith(i))continue;let o=r.subgraphs?.length?r.subgraphs:[r.bound];for(let s of o){let l=sI(s);if(l!==void 0){if(i===e){yield[i,l];return}if(e===void 0&&(yield[i,l]),t){let c=e;e!==void 0&&(c=e.slice(i.length+1));for(let[d,f]of l.getSubgraphs(c,t))yield[`${i}${ni}${d}`,f]}}}}}getSubgraphsAsync(e,t){return yt(this,null,function*(){yield*Mo(this.getSubgraphs(e,t))})}_prepareStateSnapshot(o){return E(this,arguments,function*({config:e,saved:t,subgraphCheckpointer:i,applyPendingWrites:r=!1}){if(t===void 0)return{values:{},next:[],config:e,tasks:[]};let{managed:s}=yield this.prepareSpecs(e,{skipManaged:!0}),l=Hc(this.channels,t.checkpoint);if(t.pendingWrites?.length){let _=t.pendingWrites.filter(([y,w])=>y===_r).map(([y,w,I])=>[String(w),I]);_.length>0&&$r(t.checkpoint,l,[{name:Is,writes:_,triggers:[]}],void 0,this.triggerToNodes)}let c=Object.values(Kc(t.checkpoint,t.pendingWrites,this.nodes,l,s,t.config,!0,{step:(t.metadata?.step??-1)+1,store:this.store})),d=yield ks(this.getSubgraphsAsync()),f=t.config.configurable?.checkpoint_ns??"",p={};for(let _ of c){let y=d.find(([I])=>I===_.name);if(!y)continue;let w=`${String(_.name)}${zr}${_.id}`;if(f&&(w=`${f}${ni}${w}`),i===void 0){let I={configurable:{thread_id:t.config.configurable?.thread_id,checkpoint_ns:w}};p[_.id]=I}else{let I={configurable:{[ui]:i,thread_id:t.config.configurable?.thread_id,checkpoint_ns:w}},k=y[1];p[_.id]=yield k.getState(I,{subgraphs:!0})}}if(r&&t.pendingWrites?.length){let _=Object.fromEntries(c.map(w=>[w.id,w]));for(let[w,I,k]of t.pendingWrites)[xi,zt,Ap].includes(I)||w in _&&_[w].writes.push([String(I),k]);let y=c.filter(w=>w.writes.length>0);y.length>0&&$r(t.checkpoint,l,y,void 0,this.triggerToNodes)}let g=t?.metadata;g&&t?.config?.configurable?.thread_id&&(g=S(b({},g),{thread_id:t.config.configurable.thread_id}));let m=c.filter(_=>_.writes.length===0).map(_=>_.name);return{values:Ps(l,this.streamChannelsAsIs),next:m,tasks:q1(c,t?.pendingWrites??[],p,this.streamChannelsAsIs),metadata:g,config:Gc(t.config,t.metadata),createdAt:t.checkpoint.ts,parentConfig:t.parentConfig}})}getState(e,t){return E(this,null,function*(){let i=e.configurable?.[ui]??this.checkpointer;if(!i)throw new Np("No checkpointer set");let r=e.configurable?.checkpoint_ns??"";if(r!==""&&e.configurable?.[ui]===void 0){let g=qE(r);try{for(var c=ze(this.getSubgraphsAsync(g,!0)),d,f,p;d=!(f=yield c.next()).done;d=!1){let[m,_]=f.value;if(m===g)return yield _.getState(Rd(e,{[ui]:i}),{subgraphs:t?.subgraphs})}}catch{p=[f]}finally{try{d&&(f=c.return)&&(yield f.call(c))}finally{if(p)throw p[0]}}throw new Error(`Subgraph with namespace "${g}" not found.`)}let o=Er(this.config,e),s=yield i.getTuple(e);return yield this._prepareStateSnapshot({config:o,saved:s,subgraphCheckpointer:t?.subgraphs?i:void 0,applyPendingWrites:!e.configurable?.checkpoint_id})})}getStateHistory(e,t){return yt(this,null,function*(){let i=e.configurable?.[ui]??this.checkpointer;if(!i)throw new Np("No checkpointer set");let r=e.configurable?.checkpoint_ns??"";if(r!==""&&e.configurable?.[ui]===void 0){let _=qE(r);try{for(var s=ze(this.getSubgraphsAsync(_,!0)),l,c,d;l=!(c=yield new ge(s.next())).done;l=!1){let[y,w]=c.value;if(y===_){yield*Mo(w.getStateHistory(Rd(e,{[ui]:i}),t));return}}}catch{d=[c]}finally{try{l&&(c=s.return)&&(yield new ge(c.call(s)))}finally{if(d)throw d[0]}}throw new Error(`Subgraph with namespace "${_}" not found.`)}let o=Er(this.config,e,{configurable:{checkpoint_ns:r}});try{for(var f=ze(i.list(o,t)),p,g,m;p=!(g=yield new ge(f.next())).done;p=!1){let _=g.value;yield this._prepareStateSnapshot({config:_.config,saved:_})}}catch{m=[g]}finally{try{p&&(g=f.return)&&(yield new ge(g.call(f)))}finally{if(m)throw m[0]}}})}bulkUpdateState(e,t){return E(this,null,function*(){let i=e.configurable?.[ui]??this.checkpointer;if(!i)throw new Np("No checkpointer set");if(t.length===0)throw new Error("No supersteps provided");if(t.some(p=>p.updates.length===0))throw new Error("No updates provided");let r=e.configurable?.checkpoint_ns??"";if(r!==""&&e.configurable?.[ui]===void 0){let p=qE(r);try{for(var l=ze(this.getSubgraphsAsync(p,!0)),c,d,f;c=!(d=yield l.next()).done;c=!1){let[,g]=d.value;return yield g.bulkUpdateState(Rd(e,{[ui]:i}),t)}}catch{f=[d]}finally{try{c&&(d=l.return)&&(yield d.call(l))}finally{if(f)throw f[0]}}throw new Error(`Subgraph "${p}" not found`)}let o=(p,g)=>E(this,null,function*(){let m=this.config?Er(this.config,p):p,_=yield i.getTuple(m),y=_!==void 0?$c(_.checkpoint):FE(),w=b({},_?.checkpoint.channel_versions),I=_?.metadata?.step??-1,k=Rd(m,{checkpoint_ns:m.configurable?.checkpoint_ns??""}),O=m.metadata??{};_?.config.configurable&&(k=Rd(m,_.config.configurable),O=b(b({},_.metadata),O));let{values:j,asNode:q}=g[0];if(j==null&&q===void 0){if(g.length>1)throw new Kt("Cannot create empty checkpoint with multiple updates");let G=yield i.put(k,Es(y,void 0,I),{source:"update",step:I+1,writes:{},parents:_?.metadata?.parents??{}},{});return Gc(G,_?_.metadata:void 0)}let V=Hc(this.channels,y),{managed:re}=yield this.prepareSpecs(m,{skipManaged:!0});if(j===null&&q===ct){if(g.length>1)throw new Kt("Cannot apply multiple updates when clearing state");if(_){let Y=Kc(y,_.pendingWrites||[],this.nodes,V,re,_.config,!0,{step:(_.metadata?.step??-1)+1,checkpointer:i,store:this.store}),ne=(_.pendingWrites||[]).filter(W=>W[0]===_r).map(W=>W.slice(1));ne.length>0&&$r(y,V,[{name:Is,writes:ne,triggers:[]}],i.getNextVersion.bind(i),this.triggerToNodes);for(let[W,he,ie]of _.pendingWrites||[])[xi,zt,Ap].includes(he)||W in Y&&Y[W].writes.push([he,ie]);$r(y,V,Object.values(Y),i.getNextVersion.bind(i),this.triggerToNodes)}let G=yield i.put(k,Es(y,V,I),S(b({},O),{source:"update",step:I+1,writes:{},parents:_?.metadata?.parents??{}}),Vp(w,y.channel_versions));return Gc(G,_?_.metadata:void 0)}if(q===V6){if(g.length>1)throw new Kt("Cannot copy checkpoint with multiple updates");if(_==null)throw new Kt("Cannot copy a non-existent checkpoint");let G=W=>!Array.isArray(W)||W.length===0?!1:W.every(he=>Array.isArray(he)&&he.length===2),Y=Es(y,void 0,I),ne=yield i.put(_.parentConfig??Rd(_.config,{checkpoint_id:void 0}),Y,{source:"fork",step:I+1,writes:{},parents:_.metadata?.parents??{}},{});if(G(j)){let W=Kc(Y,_.pendingWrites,this.nodes,V,re,ne,!1,{step:I+2}),he=Object.values(W).reduce((be,{name:xe,id:ut})=>(be[xe]??=[],be[xe].push({id:ut}),be),{}),ie=j.reduce((be,xe)=>{let[ut,nt]=xe;be[nt]??=[];let Je=be[nt].length,Ee=he[nt]?.[Je]?.id;return be[nt].push({values:ut,asNode:nt,taskId:Ee}),be},{});return o(Gc(ne,_.metadata),Object.values(ie).flat())}return Gc(ne,_.metadata)}if(q===Is){if(g.length>1)throw new Kt("Cannot apply multiple updates when updating as input");let G=yield ks(QE(this.inputChannels,j));if(G.length===0)throw new Kt(`Received no input writes for ${JSON.stringify(this.inputChannels,null,2)}`);$r(y,V,[{name:Is,writes:G,triggers:[]}],i.getNextVersion.bind(this.checkpointer),this.triggerToNodes);let Y=_?.metadata?.step!=null?_.metadata.step+1:-1,ne=yield i.put(k,Es(y,V,Y),{source:"input",step:Y,writes:Object.fromEntries(G),parents:_?.metadata?.parents??{}},Vp(w,y.channel_versions));return yield i.putWrites(ne,G,zc(Is,y.id)),Gc(ne,_?_.metadata:void 0)}if(m.configurable?.checkpoint_id===void 0&&_?.pendingWrites!==void 0&&_.pendingWrites.length>0){let G=Kc(y,_.pendingWrites,this.nodes,V,re,_.config,!0,{store:this.store,checkpointer:this.checkpointer,step:(_.metadata?.step??-1)+1}),Y=(_.pendingWrites??[]).filter(W=>W[0]===_r).map(W=>W.slice(1));Y.length>0&&$r(_.checkpoint,V,[{name:Is,writes:Y,triggers:[]}],void 0,this.triggerToNodes);for(let[W,he,ie]of _.pendingWrites)[xi,zt,Ap].includes(he)||G[W]===void 0||G[W].writes.push([he,ie]);let ne=Object.values(G).filter(W=>W.writes.length>0);ne.length>0&&$r(y,V,ne,void 0,this.triggerToNodes)}let P=Object.values(y.versions_seen).map(G=>Object.values(G)).flat().find(G=>!!G),X=[];if(g.length===1){let{values:G,asNode:Y,taskId:ne}=g[0];if(Y===void 0&&Object.keys(this.nodes).length===1)[Y]=Object.keys(this.nodes);else if(Y===void 0&&P===void 0)typeof this.inputChannels=="string"&&this.nodes[this.inputChannels]!==void 0&&(Y=this.inputChannels);else if(Y===void 0){let W=Object.entries(y.versions_seen).map(([he,ie])=>Object.values(ie).map(be=>[be,he])).flat().sort(([he],[ie])=>D1(he,ie));W&&(W.length===1?Y=W[0][1]:W[W.length-1][0]!==W[W.length-2][0]&&(Y=W[W.length-1][1]))}if(Y===void 0)throw new Kt('Ambiguous update, specify "asNode"');X.push({values:G,asNode:Y,taskId:ne})}else for(let{asNode:G,values:Y,taskId:ne}of g){if(G==null)throw new Kt('"asNode" is required when applying multiple updates');X.push({values:Y,asNode:G,taskId:ne})}let se=[];for(let{asNode:G,values:Y,taskId:ne}of X){if(this.nodes[G]===void 0)throw new Kt(`Node "${G.toString()}" does not exist`);let W=this.nodes[G].getWriters();if(!W.length)throw new Kt(`No writers found for node "${G.toString()}"`);se.push({name:G,input:Y,proc:W.length>1?Zn.from(W,{omitSequenceTags:!0}):W[0],writes:[],triggers:[zt],id:ne??zc(zt,y.id),writers:[]})}for(let G of se)yield G.proc.invoke(G.input,fi(S(b({},m),{store:m?.store??this.store}),{runName:m.runName??`${this.getName()}UpdateState`,configurable:{[Cl]:Y=>G.writes.push(...Y),[Ss]:(Y,ne=!1)=>Tv(I,y,V,re,G,Y,ne)}}));for(let G of se){let Y=G.writes.filter(ne=>ne[0]!==gr);_!==void 0&&Y.length>0&&(yield i.putWrites(k,Y,G.id))}$r(y,V,se,i.getNextVersion.bind(this.checkpointer),this.triggerToNodes);let ue=Vp(w,y.channel_versions),me=yield i.put(k,Es(y,V,I+1),{source:"update",step:I+1,writes:Object.fromEntries(X.map(G=>[G.asNode,G.values])),parents:_?.metadata?.parents??{}},ue);for(let G of se){let Y=G.writes.filter(ne=>ne[0]===gr);Y.length>0&&(yield i.putWrites(me,Y,G.id))}return Gc(me,_?_.metadata:void 0)}),s=e;for(let{updates:p}of t)s=yield o(s,p);return s})}updateState(e,t,i){return E(this,null,function*(){return this.bulkUpdateState(e,[{updates:[{values:t,asNode:i}]}])})}_defaults(e){let j=e,{debug:t,streamMode:i,inputKeys:r,outputKeys:o,interruptAfter:s,interruptBefore:l}=j,c=Be(j,["debug","streamMode","inputKeys","outputKeys","interruptAfter","interruptBefore"]),d=!0,f=t!==void 0?t:this.debug,p=o;p===void 0?p=this.streamChannelsAsIs:Y1(p,this.channels);let g=r;g===void 0?g=this.inputChannels:Y1(g,this.channels);let m=l??this.interruptBefore??[],_=s??this.interruptAfter??[],y;i!==void 0?(y=Array.isArray(i)?i:[i],d=typeof i=="string"):(e.configurable?.[Md]!==void 0?y=["values"]:y=this.streamMode,d=!0);let w;if(this.checkpointer===!1)w=void 0;else if(e!==void 0&&e.configurable?.[ui]!==void 0)w=e.configurable[ui];else{if(this.checkpointer===!0)throw new Error("checkpointer: true cannot be used for root graphs.");w=this.checkpointer}let I=e.store??this.store,k=e.cache??this.cache,O=e.checkpointDuring??e?.configurable?.[z6]??!0;return[f,y,g,p,c,m,_,w,I,d,k,O]}stream(e,t){return E(this,null,function*(){let i=new AbortController,r=S(b({recursionLimit:this.config?.recursionLimit},t),{signal:zp(t?.signal,i.signal).signal});return new Ov(yield ji(n.prototype,this,"stream").call(this,e,r),i)})}streamEvents(e,t,i){let r=new AbortController,o=S(b({recursionLimit:this.config?.recursionLimit},t),{callbacks:Q6(this.config?.callbacks,t?.callbacks),signal:zp(t?.signal,r.signal).signal});return new Ov(super.streamEvents(e,o,i),r)}prepareSpecs(e,t){return E(this,null,function*(){let i=S(b({},e),{store:this.store}),r={},o={};for(let[l,c]of Object.entries(this.channels))kd(c)?r[l]=c:t?.skipManaged?o[l]={cls:YE,params:{config:{}}}:o[l]=c;let s=new KE(yield Object.entries(o).reduce((f,p)=>E(this,[f,p],function*(l,[c,d]){let g=yield l,m;return Nd(d)?("key"in d.params&&d.params.key===G6&&(d.params.key=c),m=yield d.cls.initialize(i,d.params)):m=yield d.initialize(i),m!==void 0&&g.push([c,m]),g}),Promise.resolve([])));return{channelSpecs:r,managed:s}})}_validateInput(e){return E(this,null,function*(){return e})}_validateConfigurable(e){return E(this,null,function*(){return e})}_streamIterator(e,t){return yt(this,null,function*(){let i=t?.subgraphs,r=HE(this.config,t);if(r.recursionLimit===void 0||r.recursionLimit<1)throw new Error('Passed "recursionLimit" must be at least 1.');if(this.checkpointer!==void 0&&this.checkpointer!==!1&&r.configurable===void 0)throw new Error('Checkpointer requires one or more of the following "configurable" keys: "thread_id", "checkpoint_ns", "checkpoint_id"');let o=yield new ge(this._validateInput(e)),me=r,{runId:s}=me,l=Be(me,["runId"]),[c,d,,f,p,g,m,_,y,w,I,k]=this._defaults(l);p.configurable=yield new ge(this._validateConfigurable(p.configurable));let O=new Hp({modes:new Set(d)});if(this.checkpointer===!0){p.configurable??={};let he=p.configurable[qc]??"";p.configurable[qc]=he.split(ni).map(ie=>ie.split(zr)[0]).join(ni)}if(d.includes("messages")){let he=new uI(be=>O.push(be)),{callbacks:ie}=p;if(ie===void 0)p.callbacks=[he];else if(Array.isArray(ie))p.callbacks=ie.concat(he);else{let be=ie.copy();be.addHandler(he,!0),p.callbacks=be}}d.includes("custom")&&(p.writer=he=>O.push([[],"custom",he]));let j=yield new ge(Jd(p)),q=yield new ge(j?.handleChainStart(this.toJSON(),Y6(e,"input"),s,void 0,void 0,void 0,p?.runName??this.getName())),{channelSpecs:V,managed:re}=yield new ge(this.prepareSpecs(p)),P,X,ue=E(this,null,function*(){try{P=yield cI.initialize({input:o,config:p,checkpointer:_,nodes:this.nodes,channelSpecs:V,managed:re,outputKeys:f,streamKeys:this.streamChannelsAsIs,store:y,cache:I,stream:O,interruptAfter:m,interruptBefore:g,manager:q,debug:this.debug,triggerToNodes:this.triggerToNodes,checkpointDuring:k});let he=new dI({loop:P,nodeFinished:p.configurable?.[$6]});t?.subgraphs&&(P.config.configurable=S(b({},P.config.configurable),{[Lp]:P.stream})),yield this._runLoop({loop:P,runner:he,debug:c,config:p})}catch(he){X=he}finally{try{P&&(yield P.store?.stop(),yield P.cache?.stop()),yield Promise.all([...P?.checkpointerPromises??[],...Array.from(re.values()).map(he=>he.promises())])}catch(he){X=X??he}X?O.error(X):O.close()}});try{try{for(var G=ze(O),Y,ne,W;Y=!(ne=yield new ge(G.next())).done;Y=!1){let he=ne.value;if(he===void 0)throw new Error("Data structure error.");let[ie,be,xe]=he;d.includes(be)&&(i&&!w?yield[ie,be,xe]:w?i?yield[ie,xe]:yield xe:yield[be,xe])}}catch{W=[ne]}finally{try{Y&&(ne=G.return)&&(yield new ge(ne.call(G)))}finally{if(W)throw W[0]}}}catch(he){throw yield new ge(q?.handleChainError(X)),he}finally{yield new ge(ue)}yield new ge(q?.handleChainEnd(P?.output??{},s,void 0,void 0,void 0))})}invoke(e,t){return E(this,null,function*(){let i=t?.streamMode??"values",r=S(b({},t),{outputKeys:t?.outputKeys??this.outputChannels,streamMode:i}),o=[],s=yield this.stream(e,r),l=[],c;try{for(var d=ze(s),f,p,g;f=!(p=yield d.next()).done;f=!1){let m=p.value;i==="values"?q6(m)?l.push(m[zt]):c=m:o.push(m)}}catch{g=[p]}finally{try{f&&(p=d.return)&&(yield p.call(d))}finally{if(g)throw g[0]}}if(i==="values"){if(l.length>0){let m=l.flat(1);if(c==null)return{[zt]:m};if(typeof c=="object")return S(b({},c),{[zt]:m})}return c}return o})}_runLoop(e){return E(this,null,function*(){let{loop:t,runner:i,debug:r,config:o}=e,s;try{for(;yield t.tick({inputKeys:this.inputChannels});){for(let{task:l}of yield t._matchCachedWrites())t._outputWrites(l.id,l.writes,!0);r&&hq(t.checkpointMetadata.step,t.channels,this.streamChannelsList),r&&aI(t.step,Object.values(t.tasks)),yield i.tick({timeout:this.stepTimeout,retryPolicy:this.retryPolicy,onStepWrite:(l,c)=>{r&&fq(l,c,this.streamChannelsList)},maxConcurrency:o.maxConcurrency,signal:o.signal})}if(t.status==="out_of_steps")throw new BE([`Recursion limit of ${o.recursionLimit} reached`,"without hitting a stop condition. You can increase the",'limit by setting the "recursionLimit" config key.'].join(" "),{lc_error_code:"GRAPH_RECURSION_LIMIT"})}catch(l){if(s=l,!(yield t.finishAndHandleError(s)))throw l}finally{s===void 0&&(yield t.finishAndHandleError())}})}clearCache(){return E(this,null,function*(){yield this.cache?.clear([])})}};var Yc=class n extends Eo{constructor(e,t){super(),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"BinaryOperatorAggregate"}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"operator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"initialValueFactory",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.operator=e,this.initialValueFactory=t,this.value=t?.()}fromCheckpoint(e){let t=new n(this.operator,this.initialValueFactory);return typeof e<"u"&&(t.value=e),t}update(e){let t=e;if(!t.length)return!1;this.value===void 0&&([this.value]=t,t=t.slice(1));for(let i of t)this.value!==void 0&&(this.value=this.operator(this.value,i));return!0}get(){if(this.value===void 0)throw new An;return this.value}checkpoint(){if(this.value===void 0)throw new An;return this.value}isAvailable(){return this.value!==void 0}};var Aa=class n extends Eo{constructor(e=!0){super(),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"EphemeralValue"}),Object.defineProperty(this,"guard",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.guard=e}fromCheckpoint(e){let t=new n(this.guard);return typeof e<"u"&&(t.value=[e]),t}update(e){if(e.length===0){let t=this.value.length>0;return this.value=[],t}if(e.length!==1&&this.guard)throw new Kt("EphemeralValue can only receive one value per step.");return this.value=[e[e.length-1]],!0}get(){if(this.value.length===0)throw new An;return this.value[0]}checkpoint(){if(this.value.length===0)throw new An;return this.value[0]}isAvailable(){return this.value.length!==0}};var Rv=class{constructor(e){Object.defineProperty(this,"path",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ends",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),$t.isRunnable(e.path)?this.path=e.path:this.path=sr(e.path).withConfig({runName:"Branch"}),this.ends=Array.isArray(e.pathMap)?e.pathMap.reduce((t,i)=>(t[i]=i,t),{}):e.pathMap}run(e,t){return ii.registerWriter(new vr({name:"<branch_run>",trace:!1,func:(i,r)=>E(this,null,function*(){try{return yield this._route(i,r,e,t)}catch(o){throw o.name===yv.unminifiable_name&&console.warn(`[WARN]: 'NodeInterrupt' thrown in conditional edge. This is likely a bug in your graph implementation.
NodeInterrupt should only be thrown inside a node, not in edge conditions.`),o}})}))}_route(e,t,i,r){return E(this,null,function*(){let o=yield this.path.invoke(r?r(t):e,t);Array.isArray(o)||(o=[o]);let s;if(this.ends?s=o.map(c=>Ci(c)?c:this.ends[c]):s=o,s.some(c=>!c))throw new Error("Branch condition returned unknown or null destination");if(s.filter(Ci).some(c=>c.node===ct))throw new Kt("Cannot send a packet to the END node");return(yield i(s,t))??e})}},Nv=class{constructor(){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"branches",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"entryPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"compiled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.nodes={},this.edges=new Set,this.branches={}}warnIfCompiled(e){this.compiled&&console.warn(e)}get allEdges(){return this.edges}addNode(...e){function t(r){return r.length>=1&&typeof r[0]!="string"}let i=t(e)?Array.isArray(e[0])?e[0]:Object.entries(e[0]):[[e[0],e[1],e[2]]];if(i.length===0)throw new Error("No nodes provided in `addNode`");for(let[r,o,s]of i){for(let c of[ni,zr])if(r.includes(c))throw new Error(`"${c}" is a reserved character and is not allowed in node names.`);if(this.warnIfCompiled("Adding a node to a graph that has already been compiled. This will not be reflected in the compiled graph."),r in this.nodes)throw new Error(`Node \`${r}\` already present.`);if(r===ct)throw new Error(`Node \`${r}\` is reserved.`);let l=sr(o);this.nodes[r]={runnable:l,metadata:s?.metadata,subgraphs:Av(l)?[l]:s?.subgraphs,ends:s?.ends}}return this}addEdge(e,t){if(this.warnIfCompiled("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph."),e===ct)throw new Error("END cannot be a start node");if(t===gn)throw new Error("START cannot be an end node");if(Array.from(this.edges).some(([i])=>i===e)&&!("channels"in this))throw new Error(`Already found path for ${e}. For multiple edges, use StateGraph.`);return this.edges.add([e,t]),this}addConditionalEdges(e,t,i){let r=typeof e=="object"?e:{source:e,path:t,pathMap:i};if(this.warnIfCompiled("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph."),!$t.isRunnable(r.path)){let s=Array.isArray(r.pathMap)?r.pathMap.join(","):Object.keys(r.pathMap??{}).join(",");r.path=sr(r.path).withConfig({runName:`Branch<${r.source}${s!==""?`,${s}`:""}>`.slice(0,63)})}let o=r.path.getName()==="RunnableLambda"?"condition":r.path.getName();if(this.branches[r.source]&&this.branches[r.source][o])throw new Error(`Condition \`${o}\` already present for node \`${e}\``);return this.branches[r.source]??={},this.branches[r.source][o]=new Rv(r),this}setEntryPoint(e){return this.warnIfCompiled("Setting the entry point of a graph that has already been compiled. This will not be reflected in the compiled graph."),this.addEdge(gn,e)}setFinishPoint(e){return this.warnIfCompiled("Setting a finish point of a graph that has already been compiled. This will not be reflected in the compiled graph."),this.addEdge(e,ct)}compile({checkpointer:e,interruptBefore:t,interruptAfter:i,name:r}={}){this.validate([...Array.isArray(t)?t:[],...Array.isArray(i)?i:[]]);let o=new Fv({builder:this,checkpointer:e,interruptAfter:i,interruptBefore:t,autoValidate:!1,nodes:{},channels:{[gn]:new Aa,[ct]:new Aa},inputChannels:gn,outputChannels:ct,streamChannels:[],streamMode:"values",name:r});for(let[s,l]of Object.entries(this.nodes))o.attachNode(s,l);for(let[s,l]of this.edges)o.attachEdge(s,l);for(let[s,l]of Object.entries(this.branches))for(let[c,d]of Object.entries(l))o.attachBranch(s,c,d);return o.validate()}validate(e){let t=new Set([...this.allEdges].map(([r,o])=>r));for(let[r]of Object.entries(this.branches))t.add(r);for(let r of t)if(r!==gn&&!(r in this.nodes))throw new Error(`Found edge starting at unknown node \`${r}\``);let i=new Set([...this.allEdges].map(([r,o])=>o));for(let[r,o]of Object.entries(this.branches))for(let s of Object.values(o))if(s.ends!=null)for(let l of Object.values(s.ends))i.add(l);else{i.add(ct);for(let l of Object.keys(this.nodes))l!==r&&i.add(l)}for(let r of Object.values(this.nodes))for(let o of r.ends??[])i.add(o);for(let r of Object.keys(this.nodes))if(!i.has(r))throw new VE([`Node \`${r}\` is not reachable.`,"","If you are returning Command objects from your node,",'make sure you are passing names of potential destination nodes as an "ends" array','into ".addNode(..., { ends: ["node1", "node2"] })".'].join(`
`),{lc_error_code:"UNREACHABLE_NODE"});for(let r of i)if(r!==ct&&!(r in this.nodes))throw new Error(`Found edge ending at unknown node \`${r}\``);if(e){for(let r of e)if(!(r in this.nodes))throw new Error(`Interrupt node \`${r}\` is not present`)}this.compiled=!0}},Fv=class extends fI{constructor(i){var r=i,{builder:e}=r,t=Be(r,["builder"]);super(t),Object.defineProperty(this,"builder",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.builder=e}attachNode(e,t){this.channels[e]=new Aa,this.nodes[e]=new Ms({channels:[],triggers:[],metadata:t.metadata,subgraphs:t.subgraphs,ends:t.ends}).pipe(t.runnable).pipe(new ii([{channel:e,value:As}],[_n])),this.streamChannels.push(e)}attachEdge(e,t){if(t===ct){if(e===gn)throw new Error("Cannot have an edge from START to END");this.nodes[e].writers.push(new ii([{channel:ct,value:As}],[_n]))}else this.nodes[t].triggers.push(e),this.nodes[t].channels.push(e)}attachBranch(e,t,i){e===gn&&!this.nodes[gn]&&(this.nodes[gn]=hI.subscribeTo(gn,{tags:[_n]})),this.nodes[e].pipe(i.run(o=>{let s=o.map(l=>Ci(l)?l:{channel:l===ct?ct:`branch:${e}:${t}:${l}`,value:As});return new ii(s,[_n])}));let r=i.ends?Object.values(i.ends):Object.keys(this.nodes);for(let o of r)if(o!==ct){let s=`branch:${e}:${t}:${o}`;this.channels[s]=new Aa,this.nodes[o].triggers.push(s),this.nodes[o].channels.push(s)}}getGraphAsync(e){return E(this,null,function*(){let t=e?.xray,i=new aS,r={[gn]:i.addNode({schema:C.any()},gn)},o={},s={};t&&(s=Object.fromEntries((yield ks(this.getSubgraphsAsync())).filter(p=>gq(p[1]))));function l(p,g,m,_=!1){if(g===ct&&o[ct]===void 0&&(o[ct]=i.addNode({schema:C.any()},ct)),r[p]!==void 0){if(o[g]===void 0)throw new Error(`End node ${g} not found!`);return i.addEdge(r[p],o[g],m!==g?m:void 0,_)}}for(let[p,g]of Object.entries(this.builder.nodes)){let m=br(p),_=g.runnable,y=g.metadata??{};if(this.interruptBefore?.includes(p)&&this.interruptAfter?.includes(p)?y.__interrupt="before,after":this.interruptBefore?.includes(p)?y.__interrupt="before":this.interruptAfter?.includes(p)&&(y.__interrupt="after"),t){let w=typeof t=="number"?t-1:t,I=s[p]!==void 0?yield s[p].getGraphAsync(S(b({},e),{xray:w})):_.getGraph(e);if(I.trimFirstNode(),I.trimLastNode(),Object.keys(I.nodes).length>1){let j=function(V){return V?V.lc_runnable:!1},q=function(V,re){if(V!==void 0&&!im(V))return V;if(j(re))try{let P=re.getName();return P=P.startsWith("Runnable")?P.slice(8):P,P}catch{return re.getName()}else return re.name??"UnknownSchema"};var d=j,f=q;let[k,O]=i.extend(I,m);if(k===void 0)throw new Error(`Could not extend subgraph "${p}" due to missing entrypoint.`);O!==void 0&&(r[m]=b({name:q(O.id,O.data)},O)),o[m]=b({name:q(k.id,k.data)},k)}else{let k=i.addNode(_,m,y);r[m]=k,o[m]=k}}else{let w=i.addNode(_,m,y);r[m]=w,o[m]=w}}let c=[...this.builder.allEdges].sort(([p],[g])=>p<g?-1:g>p?1:0);for(let[p,g]of c)l(br(p),br(g));for(let[p,g]of Object.entries(this.builder.branches)){let m=S(b({},Object.fromEntries(Object.keys(this.builder.nodes).filter(_=>_!==p).map(_=>[br(_),br(_)]))),{[ct]:ct});for(let _ of Object.values(g)){let y;_.ends!==void 0?y=_.ends:y=m;for(let[w,I]of Object.entries(y))l(br(p),br(I),w,!0)}}for(let[p,g]of Object.entries(this.builder.nodes))if(g.ends!==void 0)for(let m of g.ends)l(br(p),br(m),void 0,!0);return i})}getGraph(e){let t=e?.xray,i=new aS,r={[gn]:i.addNode({schema:C.any()},gn)},o={},s={};t&&(s=Object.fromEntries(Od(this.getSubgraphs()).filter(p=>gq(p[1]))));function l(p,g,m,_=!1){return g===ct&&o[ct]===void 0&&(o[ct]=i.addNode({schema:C.any()},ct)),i.addEdge(r[p],o[g],m!==g?m:void 0,_)}for(let[p,g]of Object.entries(this.builder.nodes)){let m=br(p),_=g.runnable,y=g.metadata??{};if(this.interruptBefore?.includes(p)&&this.interruptAfter?.includes(p)?y.__interrupt="before,after":this.interruptBefore?.includes(p)?y.__interrupt="before":this.interruptAfter?.includes(p)&&(y.__interrupt="after"),t){let w=typeof t=="number"?t-1:t,I=s[p]!==void 0?s[p].getGraph(S(b({},e),{xray:w})):_.getGraph(e);if(I.trimFirstNode(),I.trimLastNode(),Object.keys(I.nodes).length>1){let j=function(V){return V?V.lc_runnable:!1},q=function(V,re){if(V!==void 0&&!im(V))return V;if(j(re))try{let P=re.getName();return P=P.startsWith("Runnable")?P.slice(8):P,P}catch{return re.getName()}else return re.name??"UnknownSchema"};var d=j,f=q;let[k,O]=i.extend(I,m);if(k===void 0)throw new Error(`Could not extend subgraph "${p}" due to missing entrypoint.`);O!==void 0&&(r[m]=b({name:q(O.id,O.data)},O)),o[m]=b({name:q(k.id,k.data)},k)}else{let k=i.addNode(_,m,y);r[m]=k,o[m]=k}}else{let w=i.addNode(_,m,y);r[m]=w,o[m]=w}}let c=[...this.builder.allEdges].sort(([p],[g])=>p<g?-1:g>p?1:0);for(let[p,g]of c)l(br(p),br(g));for(let[p,g]of Object.entries(this.builder.branches)){let m=S(b({},Object.fromEntries(Object.keys(this.builder.nodes).filter(_=>_!==p).map(_=>[br(_),br(_)]))),{[ct]:ct});for(let _ of Object.values(g)){let y;_.ends!==void 0?y=_.ends:y=m;for(let[w,I]of Object.entries(y))l(br(p),br(I),w,!0)}}return i}};function gq(n){return typeof n.attachNode=="function"&&typeof n.attachEdge=="function"}function br(n){return n==="subgraph"?`"${n}"`:n}var jd=(n,e)=>n.size===e.size&&[...n].every(t=>e.has(t)),pI=class n extends Eo{constructor(e){super(),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"NamedBarrierValue"}),Object.defineProperty(this,"names",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"seen",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.names=e,this.seen=new Set}fromCheckpoint(e){let t=new n(this.names);return typeof e<"u"&&(t.seen=new Set(e)),t}update(e){let t=!1;for(let i of e)if(this.names.has(i))this.seen.has(i)||(this.seen.add(i),t=!0);else throw new Kt(`Value ${JSON.stringify(i)} not in names ${JSON.stringify(this.names)}`);return t}get(){if(!jd(this.names,this.seen))throw new An}checkpoint(){return[...this.seen]}consume(){return this.seen&&this.names&&jd(this.seen,this.names)?(this.seen=new Set,!0):!1}isAvailable(){return!!this.names&&jd(this.names,this.seen)}},mI=class n extends Eo{constructor(e){super(),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"NamedBarrierValueAfterFinish"}),Object.defineProperty(this,"names",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"seen",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"finished",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.names=e,this.seen=new Set,this.finished=!1}fromCheckpoint(e){let t=new n(this.names);if(typeof e<"u"){let[i,r]=e;t.seen=new Set(i),t.finished=r}return t}update(e){let t=!1;for(let i of e)if(this.names.has(i)&&!this.seen.has(i))this.seen.add(i),t=!0;else if(!this.names.has(i))throw new Kt(`Value ${JSON.stringify(i)} not in names ${JSON.stringify(this.names)}`);return t}get(){if(!this.finished||!jd(this.names,this.seen))throw new An}checkpoint(){return[[...this.seen],this.finished]}consume(){return this.finished&&this.seen&&this.names&&jd(this.seen,this.names)?(this.seen=new Set,this.finished=!1,!0):!1}finish(){return!this.finished&&this.names&&jd(this.names,this.seen)?(this.finished=!0,!0):!1}isAvailable(){return this.finished&&!!this.names&&jd(this.names,this.seen)}};var Bd=class n extends Eo{constructor(){super(...arguments),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"LastValue"}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:[]})}fromCheckpoint(e){let t=new n;return typeof e<"u"&&(t.value=[e]),t}update(e){if(e.length===0)return!1;if(e.length!==1)throw new Kt("LastValue can only receive one value per step.",{lc_error_code:"INVALID_CONCURRENT_GRAPH_UPDATE"});return this.value=[e[e.length-1]],!0}get(){if(this.value.length===0)throw new An;return this.value[0]}checkpoint(){if(this.value.length===0)throw new An;return this.value[0]}isAvailable(){return this.value.length!==0}},gI=class n extends Eo{constructor(){super(...arguments),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"LastValueAfterFinish"}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"finished",{enumerable:!0,configurable:!0,writable:!0,value:!1})}fromCheckpoint(e){let t=new n;if(typeof e<"u"){let[i,r]=e;t.value=[i],t.finished=r}return t}update(e){return e.length===0?!1:(this.finished=!1,this.value=[e[e.length-1]],!0)}get(){if(this.value.length===0||!this.finished)throw new An;return this.value[0]}checkpoint(){if(this.value.length!==0)return[this.value[0],this.finished]}consume(){return this.finished?(this.finished=!1,this.value=[],!0):!1}finish(){return!this.finished&&this.value.length>0?(this.finished=!0,!0):!1}isAvailable(){return this.value.length!==0&&this.finished}};var _I=class{constructor(e){Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"AnnotationRoot"}),Object.defineProperty(this,"spec",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.spec=e}},Dl=function(n){return Nd(n)?n:n?vI(n):new Bd};Dl.Root=n=>new _I(n);function vI(n){return typeof n=="object"&&n&&"reducer"in n&&n.reducer?new Yc(n.reducer,n.default):typeof n=="object"&&n&&"value"in n&&n.value?new Yc(n.value,n.default):new Bd}var xde="lg:",X1=class{constructor(){Object.defineProperty(this,"_map",{enumerable:!0,configurable:!0,writable:!0,value:new WeakMap}),Object.defineProperty(this,"_extensionCache",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}get(e){return this._map.get(e)}extend(e,t){let i=this.get(e);this._map.set(e,t(i))}remove(e){return this._map.delete(e),this}has(e){return this._map.has(e)}getChannelsForSchema(e){let t={},i=_b(e);for(let[r,o]of Object.entries(i)){let s=this.get(o);s?.reducer?t[r]=new Yc(s.reducer.fn,s.default):t[r]=new Bd}return t}getExtendedChannelSchemas(e,t){if(Object.keys(t).length===0)return e;let i=Object.entries(t).filter(([,s])=>s===!0).sort(([s],[l])=>s.localeCompare(l)).map(([s,l])=>`${s}:${l}`).join("|"),r=this._extensionCache.get(i)??new WeakMap;if(r.has(e))return r.get(e);let o=e;if(t.withReducerSchema||t.withJsonSchemaExtrasAsDescription){let s=Object.entries(_b(e)).map(([l,c])=>{let d=this.get(c),f=t.withReducerSchema?d?.reducer?.schema??c:c;if(t.withJsonSchemaExtrasAsDescription&&d?.jsonSchemaExtra){let p=Bl(f)??Bl(c),g=JSON.stringify(S(b({},d.jsonSchemaExtra),{description:p}));f=f.describe(`${xde}${g}`)}return[l,f]});o=sS(e,Object.fromEntries(s)),sm(o)&&(o._def.unknownKeys="strip")}return t.asPartial&&(o=cm(o)),r.set(e,o),this._extensionCache.set(i,r),o}},J1=new X1;var Tl="__root__",eN=Symbol.for("langgraph.state.partial"),Qc=class extends Nv{constructor(e,t){if(super(),Object.defineProperty(this,"channels",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"waitingEdges",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_schemaDefinition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaRuntimeDefinition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_inputDefinition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_inputRuntimeDefinition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_outputDefinition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_outputRuntimeDefinition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaDefinitions",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"_metaRegistry",{enumerable:!0,configurable:!0,writable:!0,value:J1}),Object.defineProperty(this,"_configSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_configRuntimeSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Tde(e)){let i=this._metaRegistry.getChannelsForSchema(e.state),r=e.input!=null?this._metaRegistry.getChannelsForSchema(e.input):i,o=e.output!=null?this._metaRegistry.getChannelsForSchema(e.output):i;this._schemaDefinition=i,this._schemaRuntimeDefinition=e.state,this._inputDefinition=r,this._inputRuntimeDefinition=e.input??eN,this._outputDefinition=o,this._outputRuntimeDefinition=e.output??e.state}else if($s(e)){let i=this._metaRegistry.getChannelsForSchema(e);this._schemaDefinition=i,this._schemaRuntimeDefinition=e,this._inputDefinition=i,this._inputRuntimeDefinition=eN,this._outputDefinition=i,this._outputRuntimeDefinition=e}else if(Dde(e))this._schemaDefinition=e.input.spec,this._inputDefinition=e.input.spec,this._outputDefinition=e.output.spec;else if(Sde(e))this._schemaDefinition=e.stateSchema.spec,this._inputDefinition=e.input?.spec??this._schemaDefinition,this._outputDefinition=e.output?.spec??this._schemaDefinition;else if(Ede(e)||_q(e)){let i=_q(e)?e.spec:e;this._schemaDefinition=i}else if(Ide(e)){let i=Cde(e.channels);this._schemaDefinition=i}else throw new Error("Invalid StateGraph input. Make sure to pass a valid Annotation.Root or Zod schema.");this._inputDefinition??=this._schemaDefinition,this._outputDefinition??=this._schemaDefinition,this._addSchema(this._schemaDefinition),this._addSchema(this._inputDefinition),this._addSchema(this._outputDefinition),$s(t)&&(this._configRuntimeSchema=t)}get allEdges(){return new Set([...this.edges,...Array.from(this.waitingEdges).flatMap(([e,t])=>e.map(i=>[i,t]))])}_addSchema(e){if(!this._schemaDefinitions.has(e)){this._schemaDefinitions.set(e,e);for(let[t,i]of Object.entries(e)){let r;if(typeof i=="function"?r=i():r=i,this.channels[t]!==void 0){if(this.channels[t]!==r&&!Nd(r)&&r.lc_graph_name!=="LastValue")throw new Error(`Channel "${t}" already exists with a different type.`)}else this.channels[t]=r}}}addNode(...e){function t(r){return r.length>=1&&typeof r[0]!="string"}let i=t(e)?Array.isArray(e[0])?e[0]:Object.entries(e[0]).map(([r,o])=>[r,o,o[Symbol.for("langgraph.state.node")]??void 0]):[[e[0],e[1],e[2]]];if(i.length===0)throw new Error("No nodes provided in `addNode`");for(let[r,o,s]of i){if(r in this.channels)throw new Error(`${r} is already being used as a state attribute (a.k.a. a channel), cannot also be used as a node name.`);for(let p of[ni,zr])if(r.includes(p))throw new Error(`"${p}" is a reserved character and is not allowed in node names.`);if(this.warnIfCompiled("Adding a node to a graph that has already been compiled. This will not be reflected in the compiled graph."),r in this.nodes)throw new Error(`Node \`${r}\` already present.`);if(r===ct||r===gn)throw new Error(`Node \`${r}\` is reserved.`);let l=this._schemaDefinition;s?.input!==void 0&&($s(s.input)?l=this._metaRegistry.getChannelsForSchema(s.input):s.input.spec!==void 0&&(l=s.input.spec)),l!==void 0&&this._addSchema(l);let c;$t.isRunnable(o)?c=o:typeof o=="function"?c=new vr({func:o,name:r,trace:!1}):c=sr(o);let d=s?.cachePolicy;typeof d=="boolean"&&(d=d?{}:void 0);let f={runnable:c,retryPolicy:s?.retryPolicy,cachePolicy:d,metadata:s?.metadata,input:l??this._schemaDefinition,subgraphs:Av(c)?[c]:s?.subgraphs,ends:s?.ends,defer:s?.defer};this.nodes[r]=f}return this}addEdge(e,t){if(typeof e=="string")return super.addEdge(e,t);this.compiled&&console.warn("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph.");for(let i of e){if(i===ct)throw new Error("END cannot be a start node");if(!Object.keys(this.nodes).some(r=>r===i))throw new Error(`Need to add a node named "${i}" first`)}if(t===ct)throw new Error("END cannot be an end node");if(!Object.keys(this.nodes).some(i=>i===t))throw new Error(`Need to add a node named "${t}" first`);return this.waitingEdges.add([e,t]),this}addSequence(e){let t=Array.isArray(e)?e:Object.entries(e).map(([r,o])=>[r,o,o[Symbol.for("langgraph.state.node")]??void 0]);if(t.length===0)throw new Error("Sequence requires at least one node.");let i;for(let[r,o,s]of t){if(r in this.nodes)throw new Error(`Node names must be unique: node with the name "${r}" already exists.`);let l=r;this.addNode(l,o,s),i!=null&&this.addEdge(i,l),i=l}return this}compile({checkpointer:e,store:t,cache:i,interruptBefore:r,interruptAfter:o,name:s}={}){this.validate([...Array.isArray(r)?r:[],...Array.isArray(o)?o:[]]);let l=Object.keys(this._schemaDefinitions.get(this._outputDefinition)),c=l.length===1&&l[0]===Tl?Tl:l,d=Object.keys(this.channels),f=d.length===1&&d[0]===Tl?Tl:d,p=new bI({builder:this,checkpointer:e,interruptAfter:o,interruptBefore:r,autoValidate:!1,nodes:{},channels:S(b({},this.channels),{[gn]:new Aa}),inputChannels:gn,outputChannels:c,streamChannels:f,streamMode:"updates",store:t,cache:i,name:s});p.attachNode(gn);for(let[g,m]of Object.entries(this.nodes))p.attachNode(g,m);p.attachBranch(gn,O1,vq(),{withReader:!1});for(let[g]of Object.entries(this.nodes))p.attachBranch(g,O1,vq(),{withReader:!1});for(let[g,m]of this.edges)p.attachEdge(g,m);for(let[g,m]of this.waitingEdges)p.attachEdge(g,m);for(let[g,m]of Object.entries(this.branches))for(let[_,y]of Object.entries(m))p.attachBranch(g,_,y);return p.validate()}};function Cde(n){let e={};for(let[t,i]of Object.entries(n))if(t===Tl)e[t]=vI(i);else{let r=t;e[t]=vI(i)}return e}var bI=class extends Fv{constructor(){super(...arguments),Object.defineProperty(this,"_metaRegistry",{enumerable:!0,configurable:!0,writable:!0,value:J1})}attachNode(e,t){let i;e===gn?i=Object.entries(this.builder._schemaDefinitions.get(this.builder._inputDefinition)).filter(([c,d])=>!Nd(d)).map(([c])=>c):i=Object.keys(this.builder.channels);function r(c){if(wi(c))return c.graph===yi.PARENT?null:c._updateAsTuples();if(Array.isArray(c)&&c.length>0&&c.some(d=>wi(d))){let d=[];for(let f of c)if(wi(f)){if(f.graph===yi.PARENT)continue;d.push(...f._updateAsTuples())}else d.push([Tl,f]);return d}else if(c!=null)return[[Tl,c]];return null}let o=e;function s(c){if(c){if(wi(c))return c.graph===yi.PARENT?null:c._updateAsTuples().filter(([d])=>i.includes(d));if(Array.isArray(c)&&c.length>0&&c.some(wi)){let d=[];for(let f of c)if(wi(f)){if(f.graph===yi.PARENT)continue;d.push(...f._updateAsTuples().filter(([p])=>i.includes(p)))}else{let p=s(f);p&&d.push(...p??[])}return d}else{if(typeof c=="object"&&!Array.isArray(c))return Object.entries(c).filter(([d])=>i.includes(d));{let d=Array.isArray(c)?"array":typeof c;throw new Kt(`Expected node "${o.toString()}" to return an object or an array containing at least one Command object, received ${d}`,{lc_error_code:"INVALID_GRAPH_NODE_RETURN_VALUE"})}}}else return null}let l=[{value:As,mapper:new vr({func:i.length&&i[0]===Tl?r:s,trace:!1,recurse:!1})}];if(e===gn)this.nodes[e]=new Ms({tags:[_n],triggers:[gn],channels:[gn],writers:[new ii(l,[_n])]});else{let c=t?.input??this.builder._schemaDefinition,d=Object.fromEntries(Object.keys(this.builder._schemaDefinitions.get(c)).map(g=>[g,g])),f=Object.keys(d).length===1&&Tl in d,p=`branch:to:${e}`;this.channels[p]=t?.defer?new gI:new Aa(!1),this.nodes[e]=new Ms({triggers:[p],channels:f?Object.keys(d):d,writers:[new ii(l,[_n])],mapper:f?void 0:g=>Object.fromEntries(Object.entries(g).filter(([m])=>m in d)),bound:t?.runnable,metadata:t?.metadata,retryPolicy:t?.retryPolicy,cachePolicy:t?.cachePolicy,subgraphs:t?.subgraphs,ends:t?.ends})}}attachEdge(e,t){if(t!==ct){if(typeof e=="string")this.nodes[e].writers.push(new ii([{channel:`branch:to:${t}`,value:null}],[_n]));else if(Array.isArray(e)){let i=`join:${e.join("+")}:${t}`;this.channels[i]=this.builder.nodes[t].defer?new mI(new Set(e)):new pI(new Set(e)),this.nodes[t].triggers.push(i);for(let r of e)this.nodes[r].writers.push(new ii([{channel:i,value:r}],[_n]))}}}attachBranch(e,t,i,r={withReader:!0}){let o=(s,l)=>E(null,null,function*(){let c=s.filter(f=>f!==ct);if(!c.length)return;let d=c.map(f=>Ci(f)?f:{channel:f===ct?f:`branch:to:${f}`,value:e});yield ii.doWrite(S(b({},l),{tags:(l.tags??[]).concat([_n])}),d)});this.nodes[e].writers.push(i.run(o,r.withReader?s=>ZE.doRead(s,this.streamChannels??this.outputChannels,!0):void 0))}_validateInput(e){return E(this,null,function*(){if(e==null)return e;let t=(()=>{let i=this.builder._inputRuntimeDefinition,r=this.builder._schemaRuntimeDefinition,o=s=>{if(s!=null)return this._metaRegistry.getExtendedChannelSchemas(s,{withReducerSchema:!0})};if($s(i))return o(i);if(i===eN)return cm(o(r))})();if(wi(e)){let i=e;return e.update&&t!=null&&(i.update=lm(t,e.update)),i}return t!=null?lm(t,e):e})}_validateConfigurable(e){return E(this,null,function*(){let t=this.builder._configRuntimeSchema;return $s(t)&&lm(t,e),e})}};function Ede(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&Object.keys(n).length>0&&Object.values(n).every(e=>typeof e=="function"||kd(e))}function _q(n){return typeof n=="object"&&n!==null&&"lc_graph_name"in n&&n.lc_graph_name==="AnnotationRoot"}function Ide(n){return typeof n=="object"&&n!==null&&n.channels!==void 0}function Sde(n){return typeof n=="object"&&n!==null&&n.stateSchema!==void 0}function Dde(n){return typeof n=="object"&&n!==null&&n.stateSchema===void 0&&n.input!==void 0&&n.output!==void 0}function Tde(n){return!(typeof n!="object"||n==null||!("state"in n)||!$s(n.state)||"input"in n&&!$s(n.input)||"output"in n&&!$s(n.output))}function kde(n){if(Ci(n))return[n];let e=[];wi(n)?e.push(n):Array.isArray(n)&&e.push(...n.filter(wi));let t=[];for(let i of e){if(i.graph===yi.PARENT)throw new wv(i);Ci(i.goto)||typeof i.goto=="string"?t.push(i.goto):Array.isArray(i.goto)&&t.push(...i.goto)}return t}function vq(){let n=new vr({func:kde,tags:[_n],trace:!1,recurse:!1,name:"<control_branch>"});return new Rv({path:n})}var yq="__remove_all__";function yI(n,e){let t=Array.isArray(n)?n:[n],i=Array.isArray(e)?e:[e],r=t.map(Vs),o=i.map(Vs);for(let f of r)(f.id===null||f.id===void 0)&&(f.id=tS(),f.lc_kwargs.id=f.id);let s;for(let f=0;f<o.length;f+=1){let p=o[f];(p.id===null||p.id===void 0)&&(p.id=tS(),p.lc_kwargs.id=p.id),p.getType()==="remove"&&p.id===yq&&(s=f)}if(s!=null)return o.slice(s+1);let l=[...r],c=new Map(l.map((f,p)=>[f.id,p])),d=new Set;for(let f of o){let p=c.get(f.id);if(p!==void 0)f.getType()==="remove"?d.add(f.id):(d.delete(f.id),l[p]=f);else{if(f.getType()==="remove")throw new Error(`Attempting to delete a message with an ID that doesn't exist ('${f.id}')`);c.set(f.id,l.length),l.push(f)}}return l.filter(f=>!d.has(f.id))}var Lv=class extends vr{constructor(e,t){let{name:i,tags:r,handleToolErrors:o}=t??{};super({name:i,tags:r,func:(s,l)=>this.run(s,l)}),Object.defineProperty(this,"tools",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"handleToolErrors",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"trace",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.tools=e,this.handleToolErrors=o??this.handleToolErrors}run(e,t){return E(this,null,function*(){let i=Array.isArray(e)?e[e.length-1]:e.messages[e.messages.length-1];if(i?._getType()!=="ai")throw new Error("ToolNode only accepts AIMessages as input.");let r=yield Promise.all(i.tool_calls?.map(l=>E(this,null,function*(){let c=this.tools.find(d=>d.name===l.name);try{if(c===void 0)throw new Error(`Tool "${l.name}" not found.`);let d=yield c.invoke(S(b({},l),{type:"tool_call"}),t);return Nn(d)&&d._getType()==="tool"||wi(d)?d:new Yd({name:c.name,content:typeof d=="string"?d:JSON.stringify(d),tool_call_id:l.id})}catch(d){if(!this.handleToolErrors||Sa(d))throw d;return new Yd({content:`Error: ${d.message}
 Please fix your mistakes.`,name:l.name,tool_call_id:l.id??""})}}))??[]);if(!r.some(wi))return Array.isArray(e)?r:{messages:r};let o=[],s=null;for(let l of r)wi(l)?l.graph===yi.PARENT&&Array.isArray(l.goto)&&l.goto.every(c=>Ci(c))?s?s.goto.push(...l.goto):s=new yi({graph:yi.PARENT,goto:l.goto}):o.push(l):o.push(Array.isArray(e)?[l]:{messages:[l]});return s&&o.push(s),o})}};var tN=/<name>(.*?)<\/name>/s,nN=/<content>(.*?)<\/content>/s;function Ade(n){if(!(Nn(n)&&(Wr(n)||ru(n)&&nm(n)))||!n.name)return n;let{name:t}=n;if(typeof n.content=="string")return new $n(S(b({},Object.keys(n.lc_kwargs??{}).length>0?n.lc_kwargs:n),{content:`<name>${t}</name><content>${n.content}</content>`,name:void 0}));let i=[],r=0;for(let o of n.content)typeof o=="string"?(r+=1,i.push(`<name>${t}</name><content>${o}</content>`)):typeof o=="object"&&"type"in o&&o.type==="text"?(r+=1,i.push(S(b({},o),{text:`<name>${t}</name><content>${o.text}</content>`}))):i.push(o);return r||i.unshift({type:"text",text:`<name>${t}</name><content></content>`}),new $n(S(b({},n.lc_kwargs),{content:i,name:void 0}))}function Mde(n){if(!Wr(n)||!n.content)return n;let e=[],t;if(Array.isArray(n.content))e=n.content.filter(i=>{if(i.type==="text"){let r=i.text.match(tN),o=i.text.match(nN);return r&&(!o||o[1]==="")?(t=r[1],!1):!0}return!0}).map(i=>{if(i.type==="text"){let r=i.text.match(tN),o=i.text.match(nN);return!r||!o?i:(t=r[1],S(b({},i),{text:o[1]}))}return i});else{let i=n.content,r=i.match(tN),o=i.match(nN);if(!r||!o)return n;t=r[1],e=o[1]}return new $n(S(b({},Object.keys(n.lc_kwargs??{}).length>0?n.lc_kwargs:n),{content:e,name:t}))}function iN(n,e){let t,i;if(e==="inline")t=Ade,i=Mde;else throw new Error(`Invalid agent name mode: ${e}. Needs to be one of: "inline"`);function r(o){return o.map(t)}return Zn.from([ri.from(r),n,ri.from(i)])}function Pde(n){if(typeof n=="string"||Nn(n)&&n._getType()==="system")return n;if(typeof n=="function")return e=>E(null,null,function*(){return n(e.messages)});if($t.isRunnable(n))return ri.from(e=>e.messages).pipe(n);throw new Error(`Unexpected type for messageModifier: ${typeof n}`)}var wI="prompt";function Ode(n){let e;if(n==null)e=ri.from(t=>t.messages).withConfig({runName:wI});else if(typeof n=="string"){let t=new JI(n);e=ri.from(i=>[t,...i.messages??[]]).withConfig({runName:wI})}else if(Nn(n)&&n._getType()==="system")e=ri.from(t=>[n,...t.messages]).withConfig({runName:wI});else if(typeof n=="function")e=ri.from(n).withConfig({runName:wI});else if($t.isRunnable(n))e=n;else throw new Error(`Got unexpected type for 'prompt': ${typeof n}`);return e}function oN(n){return $t.isRunnable(n)}function Rde(n,e,t){if([n,e,t].filter(o=>o!=null).length>1)throw new Error("Expected only one of prompt, stateModifier, or messageModifier, got multiple values");let r=n;return e!=null?r=e:t!=null&&(r=Pde(t)),Ode(r)}function jv(n){return"invoke"in n&&typeof n.invoke=="function"&&"_modelType"in n}function qp(n){return"_queuedMethodOperations"in n&&"_model"in n&&typeof n._model=="function"}function wq(n){return jv(n)?"bindTools"in n&&typeof n.bindTools=="function":!1}function Nde(n,e){return E(this,null,function*(){let t=n;if(Zn.isRunnableSequence(t)&&(t=t.steps.find(l=>Di.isRunnableBinding(l)||jv(l)||qp(l))||t),qp(t)&&(t=yield t._model()),!Di.isRunnableBinding(t))return!0;let i=t.kwargs!=null&&typeof t.kwargs=="object"&&"tools"in t.kwargs&&Array.isArray(t.kwargs.tools)?t.kwargs.tools??null:t.config!=null&&typeof t.config=="object"&&"tools"in t.config&&Array.isArray(t.config.tools)?t.config.tools??null:null;if(i!=null&&i.length===1&&"functionDeclarations"in i[0]&&(i=i[0].functionDeclarations),i==null)return!0;if(e.length!==i.length)throw new Error("Number of tools in the model.bindTools() and tools passed to createReactAgent must match");let r=new Set(e.flatMap(l=>oN(l)?l.name:[])),o=new Set;for(let l of i){let c;if("type"in l&&l.type==="function")c=l.function.name;else if("name"in l)c=l.name;else if("toolSpec"in l&&"name"in l.toolSpec)c=l.toolSpec.name;else continue;c&&o.add(c)}let s=[...r].filter(l=>!o.has(l));if(s.length>0)throw new Error(`Missing tools '${s}' in the model.bindTools().Tools in the model.bindTools() must match the tools passed to createReactAgent.`);return!1})}var rN=(n,e)=>{if(wq(n))return n.bindTools(e);if(Di.isRunnableBinding(n)&&wq(n.bound)){let t=n.bound.bindTools(e);return Di.isRunnableBinding(t)?new Di({bound:t.bound,config:b(b({},n.config),t.config),kwargs:b(b({},n.kwargs),t.kwargs),configFactories:t.configFactories??n.configFactories}):new Di({bound:t,config:n.config,kwargs:n.kwargs,configFactories:n.configFactories})}return null};function Fde(n,e){return E(this,null,function*(){let t=rN(n,e);if(t)return t;if(qp(n)){let i=rN(yield n._model(),e);if(i)return i}if(Zn.isRunnableSequence(n)){let i=n.steps.findIndex(r=>Di.isRunnableBinding(r)||jv(r)||qp(r));if(i>=0){let r=rN(n.steps[i],e);if(r){let o=n.steps.slice();return o.splice(i,1,r),Zn.from(o)}}}throw new Error(`llm ${n} must define bindTools method.`)})}function Lde(n){return E(this,null,function*(){let e=n;if(Zn.isRunnableSequence(e)&&(e=e.steps.find(t=>Di.isRunnableBinding(t)||jv(t)||qp(t))||e),qp(e)&&(e=yield e._model()),Di.isRunnableBinding(e)&&(e=e.bound),!jv(e))throw new Error(`Expected \`llm\` to be a ChatModel or RunnableBinding (e.g. llm.bind_tools(...)) with invoke() and generate() methods, got ${e.constructor.name}`);return e})}var xq=()=>Dl.Root({messages:Dl({reducer:yI,default:()=>[]}),structuredResponse:Dl}),jde=Dl.Root({llmInputMessages:Dl({reducer:(n,e)=>yI([],e),default:()=>[]})});function sN(n){let{llm:e,tools:t,messageModifier:i,stateModifier:r,prompt:o,stateSchema:s,checkpointSaver:l,checkpointer:c,interruptBefore:d,interruptAfter:f,store:p,responseFormat:g,preModelHook:m,postModelHook:_,name:y,includeAgentName:w}=n,I,k;Array.isArray(t)?(I=t,k=new Lv(I.filter(oN))):(I=t.tools,k=t);let O=null,j=ne=>E(null,null,function*(){if(O)return O;let W;(yield Nde(ne,I))?W=yield Fde(ne,I):W=ne;let he=Rde(o,r,i),ie=w==="inline"?he.pipe(iN(W,w)):he.pipe(W);return O=ie,ie}),q=new Set(I.filter(oN).filter(ne=>"returnDirect"in ne&&ne.returnDirect).map(ne=>ne.name));function V(ne){let be=ne,{messages:W,llmInputMessages:he}=be,ie=Be(be,["messages","llmInputMessages"]);return he!=null&&he.length>0?b({messages:he},ie):b({messages:W},ie)}let re=(ne,W)=>E(null,null,function*(){if(g==null)throw new Error("Attempted to generate structured output with no passed response schema. Please contact us for help.");let he=[...ne.messages],ie,be=yield Lde(e);if(typeof g=="object"&&"schema"in g){let ut=g,{prompt:nt,schema:Je}=ut,Ee=Be(ut,["prompt","schema"]);ie=be.withStructuredOutput(Je,Ee),nt!=null&&he.unshift(new JI({content:nt}))}else ie=be.withStructuredOutput(g);return{structuredResponse:yield ie.invoke(he,W)}}),P=(ne,W)=>E(null,null,function*(){let ie=yield(yield j(e)).invoke(V(ne),W);return ie.name=y,ie.lc_kwargs.name=y,{messages:[ie]}}),X=s??xq(),se=new Qc(X).addNode("tools",k);if(!("messages"in se._schemaDefinition))throw new Error("Missing required `messages` key in state schema.");let ue=se,me=ne=>Object.fromEntries(Object.entries(ne).filter(([W,he])=>he!=null)),G="agent",Y;return m!=null?(ue.addNode("pre_model_hook",m).addEdge("pre_model_hook","agent"),G="pre_model_hook",Y=Dl.Root(b(b({},se._schemaDefinition),jde.spec))):G="agent",ue.addNode("agent",P,{input:Y}).addEdge(gn,G),_!=null&&ue.addNode("post_model_hook",_).addEdge("agent","post_model_hook").addConditionalEdges("post_model_hook",ne=>{let{messages:W}=ne,he=W[W.length-1];return Wr(he)&&he.tool_calls?.length?"tools":tm(he)?G:g!=null?"generate_structured_response":ct},me({tools:"tools",[G]:G,generate_structured_response:g!=null?"generate_structured_response":null,[ct]:g!=null?null:ct})),g!==void 0&&se.addNode("generate_structured_response",re).addEdge("generate_structured_response",ct),_==null&&ue.addConditionalEdges("agent",ne=>{let{messages:W}=ne,he=W[W.length-1];return!Wr(he)||!he.tool_calls?.length?g!=null?"generate_structured_response":ct:"tools"},me({tools:"tools",generate_structured_response:g!=null?"generate_structured_response":null,[ct]:g!=null?null:ct})),q.size>0?ue.addConditionalEdges("tools",ne=>{for(let W=ne.messages.length-1;W>=0;W-=1){let he=ne.messages[W];if(!tm(he))break;if(he.name!==void 0&&q.has(he.name))return ct}return G},me({[G]:G,[ct]:ct})):ue.addEdge("tools",G),ue.compile({checkpointer:c??l,interruptBefore:d,interruptAfter:f,store:p,name:y})}var xI=class n{constructor(e){this.httpClient=e}getRequest(e){return this.httpClient.get(e).pipe(Pe(t=>t.status===200?{status:t.status,open_ai:t.openai_functions}:{status:500,error:"something went wrong"}),No(t=>(console.error("API error:",t),Re({error:"API request failed"}))))}static \u0275fac=function(t){return new(t||n)(Se(pc))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})};var CI=class n{constructor(e){this.restApiService=e}langchain_model=null;openAI_agent;AZURE_OPENAI_API_VERSION="2024-12-01-preview";AZURE_OPENAI_DEPLOYMENT="gpt-4o";AZURE_OPENAI_INSTANCE="azrig-esri-sap-demo-gpt-eastus-01";getOpenAiClient(e){if(!e)throw new Error("OpenAI API key is not set");return this.langchain_model&&delete this.langchain_model,this.langchain_model=new fv({apiKey:e,model:"gpt-4o-mini",temperature:0,maxTokens:512,streaming:!0}),this.langchain_model}openAImodels(e="langchain",t,i,r,o){let s=null,l=null;e=="langgraph"?s=sN({llm:t,tools:i}):e=="langchain"&&i.length>0?s=t.bindTools(i,{tool_choice:"auto"}):e=="langchain"&&i.length==0&&(l=t);let c=su.fromMessages([cS.fromTemplate(r),lS.fromTemplate(o)]);return{model_with_tools:s,overall_prompt:c,model_with_out_tools:l}}static \u0275fac=function(t){return new(t||n)(Se(xI))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})};var zde=["chatComponent"],EI=class n{constructor(e,t,i,r,o){this.mcpService=e;this.openAIService=t;this.storageService=i;this.mcpElicitationService=r;this.cdr=o;this.checkScreenSize(),this.initializeSidebarState(),this.mcpService.mcpServerInstructions$.subscribe(l=>{this.system_prompt=l||"You are a helpful assistant. Use tools *only* when needed.         If you already have the answer, reply normally instead of calling a tool again."}),this.mcpService.streaming$.subscribe(l=>{if(l.status&&l.status==="completed"){this.streamingContent+=l.message;let c=this.chatMessages.length-1;this.chatMessages[c]=this.checkToolCall(this.streamingContent),this.cdr.detectChanges(),this.streamingContent=""}else if(l.status&&l.status==="started")this.streamingContent+=l.message,this.chatMessages.push({role:"bot",content:this.streamingContent,timestamp:new Date});else if(l.status&&l.status==="in_progress"){this.streamingContent+=l.message;let c=this.chatMessages.length-1;this.chatMessages[c].content=this.streamingContent,this.cdr.detectChanges()}}),this.human_prompt="{input}";let s=this.storageService.getValueFromKey("open_ai_token")||"";this.openAiKey.set(s),s&&this.InitializeLLM(s)}chatComponent;messages=[];title="AI powered chatbot";isSidebarOpen=!1;isMobileScreen=!1;chatMessages=[{role:"bot",content:"Hello! How can I assist you today?",timestamp:new Date}];opentAI_functions;llm_model;llm_with_tools;errorMessage="";system_prompt="";human_prompt="";llm_runnable;selectedTool=null;streamingContent="";page=rn("");openAiKey=cg("");dialog=D(D_);inputMessages=[];onResize(){this.checkScreenSize(),this.initializeSidebarState()}checkScreenSize(){this.isMobileScreen=window.innerWidth<=768}initializeSidebarState(){this.isMobileScreen?this.isSidebarOpen=!1:this.isSidebarOpen=!0}checkToolCall(e){let t={role:"bot",content:e,timestamp:new Date};try{let i=JSON.parse(e),r=Object.keys(i);return r.includes("name")&&r.includes("arguments")&&i.name==="table_layout_tool"&&(t={role:"bot",content:"",layouts:[{type:"table",data:i.arguments}],timestamp:new Date}),t}catch{return t}}InitializeLLM(e,t=[]){if(this.llm_model=this.openAIService.getOpenAiClient(e),t.length>0)try{this.llm_with_tools=this.openAIService.openAImodels("langchain",this.llm_model,t,this.system_prompt,this.human_prompt),this.llm_runnable=Zn.from([this.llm_with_tools.overall_prompt,this.llm_with_tools.model_with_tools])}catch{}else this.llm_with_tools=this.openAIService.openAImodels("langchain",this.llm_model,[],this.system_prompt,this.human_prompt),this.llm_runnable=Zn.from([this.llm_with_tools.overall_prompt,this.llm_with_tools.model_with_out_tools])}toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}toolsList(e){this.InitializeLLM(this.openAiKey(),e)}testTool(e){e?(this.selectedTool=e,this.isMobileScreen&&(this.isSidebarOpen=!0),this.mcpElicitationService.createFormFromSchema(e.inputSchema,"Tool test")):this.selectedTool=null}tool_response(e){this.isMobileScreen&&(this.isSidebarOpen=!1),(e.response||e.layouts)&&this.chatMessages.push({role:"bot",content:e.response,layouts:e.layouts,timestamp:new Date})}tool_request(e){this.isMobileScreen&&(this.isSidebarOpen=!1),this.chatMessages.push({role:"user",content:e.request,timestamp:new Date})}agentWorkflow(e){return E(this,null,function*(){let t=null,i=new Set;this.inputMessages.push({role:"user",content:e}),this.chatMessages.push({role:"user",content:e,timestamp:new Date}),console.log("Chat message : ",this.chatMessages);try{let d=!0,f=0;for(;d&&f<8;){f++;let p=yield this.llm_runnable.stream({input:this.inputMessages});t=null,this.chatMessages.push({role:"bot",content:"",timestamp:new Date});try{for(var r=ze(p),o,s,l;o=!(s=yield r.next()).done;o=!1){let m=s.value;if(m instanceof Po){t=t?t.concat(m):m;let _=this.chatMessages.length-1;this.chatMessages[_].content=t.content,this.cdr.detectChanges()}}}catch{l=[s]}finally{try{o&&(s=r.return)&&(yield s.call(r))}finally{if(l)throw l[0]}}let g=t?.tool_calls??[];if(g.length===0){d=!1;break}for(let m of g){let _=m.name,y=m.args;if(i.has(_)){console.warn(`Skipping repeated tool: ${_}`),d=!1;break}i.add(_);let w=yield this.mcpService.callTool(_,y),I=Array.isArray(w?.content)?w.content.map(k=>k.text).join(`
`):JSON.stringify(w);try{let k=JSON.parse(w.content[0].text);if(Object.keys(k).includes("layouts")){let c=k,{layouts:j}=c,q=Be(c,["layouts"]);this.chatMessages.push({role:"bot",content:"```json \n "+JSON.stringify(q,null,2)+"\n```",layouts:k.layouts,timestamp:new Date}),console.log("check : ",this.chatMessages)}else this.chatMessages.push({role:"bot",content:"```json \n "+I+"\n```",timestamp:new Date})}catch{this.chatMessages.push({role:"bot",content:I,timestamp:new Date})}this.inputMessages.push({role:"assistant",type:"function_call",id:m.id,name:_,arguments:JSON.stringify(y)}),this.inputMessages.push({role:"tool",type:"function_call_output",id:m.id,output:I})}console.log("input messages : ",this.inputMessages)}}catch(d){console.error("Agent workflow error:",d),this.chatMessages.push({role:"bot",content:"Sorry, something went wrong while processing your request.",timestamp:new Date})}})}hasLayoutMessages(){return this.chatMessages.some(e=>e.layouts&&(this.isTableLayout(e.layouts)||this.isButtonLayout(e.layouts)||this.isMapLayout(e.layouts)))}isTableLayout(e){return e.some(t=>t.type==="table")}isButtonLayout(e){return e.some(t=>t.type==="button")}isMapLayout(e){return e.some(t=>t.type==="map")}static \u0275fac=function(t){return new(t||n)(Ce(qi),Ce(CI),Ce(Vf),Ce(pa),Ce(Wn))};static \u0275cmp=Fe({type:n,selectors:[["app-root"]],viewQuery:function(t,i){if(t&1&&on(zde,5),t&2){let r;st(r=at())&&(i.chatComponent=r.first)}},hostBindings:function(t,i){t&1&&Me("resize",function(){return i.onResize()},HT)},inputs:{openAiKey:[1,"openAiKey"]},outputs:{openAiKey:"openAiKeyChange"},features:[Vt([qi,pa])],decls:20,vars:7,consts:[["sidenav",""],["chatComponent",""],[1,"app-container"],[1,"sidenav-container"],[1,"sidebar",3,"openedChange","mode","opened"],[3,"tools","sendOpenAiKey"],[3,"sendToolRequest","sendToolResponse","tool"],[1,"content"],[1,"header"],["mat-icon-button","",1,"menu-button",3,"click"],[1,"title"],[1,"chat-container"],[1,"chat-content-wrapper"],[3,"messages"],[1,"input-container"],[3,"sendMessage","sendTool"]],template:function(t,i){if(t&1){let r=Bt();z(0,"div",2)(1,"mat-sidenav-container",3)(2,"mat-sidenav",4,0),lc("openedChange",function(s){return Ge(r),Nu(i.isSidebarOpen,s)||(i.isSidebarOpen=s),Ze(s)}),z(4,"app-mcp-client",5),Me("tools",function(s){return Ge(r),Ze(i.toolsList(s))})("sendOpenAiKey",function(s){return Ge(r),Ze(i.InitializeLLM(s))}),U(),z(5,"app-elicitation",6),Me("sendToolRequest",function(s){return Ge(r),Ze(i.tool_request(s))})("sendToolResponse",function(s){return Ge(r),Ze(i.tool_response(s))}),U(),qt(6,"app-sidebar"),U(),z(7,"mat-sidenav-content",7)(8,"div",8)(9,"button",9),Me("click",function(){return Ge(r),Ze(i.toggleSidebar())}),z(10,"mat-icon"),ae(11,"menu"),U()(),z(12,"h1",10),ae(13),U()(),z(14,"div",11)(15,"div",12),qt(16,"app-chatbot",13,1),U(),z(18,"div",14)(19,"app-input-box",15),Me("sendMessage",function(s){return Ge(r),Ze(i.agentWorkflow(s))})("sendTool",function(s){return Ge(r),Ze(i.testTool(s))}),U()()()()()()}t&2&&(B(2),de("mode",i.isMobileScreen?"over":"side"),ac("opened",i.isSidebarOpen),B(3),de("tool",i.selectedTool),B(8),Nt(i.title),B(2),lt("full-width-layout",i.hasLayoutMessages()),B(),de("messages",i.chatMessages))},dependencies:[Wx,dC,fC,a8,eO,s8,mC,bC,u8,tO,jf,Lf,d8,hC,CC],styles:[".app-container[_ngcontent-%COMP%]{height:100vh;display:flex;background-color:#f7f7f8;font-family:Segoe UI,Roboto,sans-serif}.sidenav-container[_ngcontent-%COMP%]{flex:1;display:flex;height:100vh;width:100%;overflow:hidden}.sidebar[_ngcontent-%COMP%]{width:400px;background-color:#fff;display:flex;flex-direction:column;height:100%;border-right:1px solid #e5e5e6;transition:transform .3s ease,width .3s ease}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{width:100vw;max-width:100%}}@media (max-width: 480px){.sidebar[_ngcontent-%COMP%]{width:85vw}}.content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;height:100vh;width:100%;min-width:0;overflow:hidden}.header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 16px;background-color:#fff;border-bottom:1px solid #eaeaea;z-index:2;min-height:60px;box-sizing:border-box;flex-shrink:0}.menu-button[_ngcontent-%COMP%]{margin-right:16px;color:#666;background:none;border:none;cursor:pointer;flex-shrink:0}.title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:500;color:#333;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media (max-width: 480px){.header[_ngcontent-%COMP%]{padding:8px 12px;min-height:50px}.title[_ngcontent-%COMP%]{font-size:1rem}.menu-button[_ngcontent-%COMP%]{margin-right:12px;transform:scale(.9)}}.chat-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;width:100%;margin:0 auto;position:relative;overflow:hidden;min-height:0}.chat-content-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;width:100%;padding:12px 12px 70px;scrollbar-width:none;-ms-overflow-style:none;margin:0 auto;position:relative;overflow-y:auto;box-sizing:border-box;min-height:0}.chat-content-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}@media (max-width: 768px){.chat-content-wrapper[_ngcontent-%COMP%]{padding:8px 8px 60px}}@media (max-width: 480px){.chat-content-wrapper[_ngcontent-%COMP%]{padding:6px 6px 60px}}.input-container[_ngcontent-%COMP%]{position:sticky;bottom:0;left:0;right:0;background-color:#f7f7f8;padding:0;margin-right:45px;border-top:1px solid #eaeaea;z-index:10;box-sizing:border-box;flex-shrink:0}@media (max-width: 768px){.input-container[_ngcontent-%COMP%]{padding:10px 12px}}@media (max-width: 480px){.input-container[_ngcontent-%COMP%]{padding:8px 10px;min-height:auto}}@media (max-width: 480px){  .message-container{margin-bottom:12px!important}  .message-bubble{padding:10px 14px!important;font-size:.9rem!important;line-height:1.3!important}  app-input-box{display:block}  .input-box-container{min-height:auto!important}  .input-field{min-height:44px!important;max-height:44px!important;font-size:.9rem!important}  .send-button{min-height:44px!important;min-width:44px!important;transform:scale(.9)}}  .message-container.layout-message{max-width:100%!important;width:100%!important;margin-left:0!important;margin-right:0!important;padding-left:0!important;padding-right:0!important}  .layout-message .message-content{width:100%!important;max-width:100%!important}.full-width-layout[_ngcontent-%COMP%]{max-width:100%!important;width:100%!important;margin:0!important;padding:0!important}app-chatbot[_ngcontent-%COMP%]{width:100%;display:block;flex:1;min-height:0}@media (max-width: 768px){.menu-button[_ngcontent-%COMP%]{min-width:44px;min-height:44px}.sidebar[_ngcontent-%COMP%]{width:100vw!important;max-width:100%!important}.mat-drawer-backdrop.mat-drawer-shown[_ngcontent-%COMP%]{background-color:#00000080}}@media (min-width: 769px){.sidebar[_ngcontent-%COMP%]{width:400px!important}}@media (max-width: 480px){*[_ngcontent-%COMP%]{margin:0;padding:0}body[_ngcontent-%COMP%]{font-size:14px}.chat-content-wrapper[_ngcontent-%COMP%]{height:1px}}@supports (padding: max(0px)){.header[_ngcontent-%COMP%], .input-container[_ngcontent-%COMP%]{padding-left:max(12px,env(safe-area-inset-left));padding-right:max(12px,env(safe-area-inset-right))}.input-container[_ngcontent-%COMP%]{padding-bottom:max(8px,env(safe-area-inset-bottom))}}*[_ngcontent-%COMP%]{max-width:100%;box-sizing:border-box}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;overflow:hidden}.app-container[_ngcontent-%COMP%], .sidenav-container[_ngcontent-%COMP%], .content[_ngcontent-%COMP%], .chat-container[_ngcontent-%COMP%]{height:100%}"],changeDetection:0})};fA(EI,p$).catch(n=>console.error(n));
