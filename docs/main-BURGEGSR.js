import{a as ps,d as U9}from"./chunk-W33Z2I5C.js";import{a as z2,b as P9,c as V2,d as AE,e as A9,f as H2,g as O9,h as $2,i as F9,j as Xy,k as j2,l as OE,m as N9,n as eb,o as FE,p as B9,q as tb}from"./chunk-FT3LMQJV.js";import{$ as OO,$a as AF,$b as c2,$c as WU,$d as FW,$e as i9,$f as zd,A as SO,Aa as aF,Ab as tE,Ac as Ch,Ad as _W,Af as g9,B as EO,Ba as lF,Bb as nE,Bc as Zf,Bd as yW,Be as GW,Bf as v9,C as MU,Ca as cF,Cb as iE,Cc as Yf,Cd as bW,Ce as UW,Cf as _9,D as $S,Da as dF,Db as oE,Dc as Qf,Dd as CW,De as ls,Df as y9,E as RU,Ea as uF,Eb as rE,Ec as Jf,Ed as wW,Ee as O2,Ef as b9,F as TU,Fa as hF,Fb as qF,Fc as Xf,Fd as xW,Fe as F2,Ff as us,G as jS,Ga as HU,Gb as sE,Gc as em,Gd as SW,Ge as Yy,Gf as Jy,H as PU,Ha as pF,Hb as aE,Hc as gE,Hd as EW,He as WW,Hf as TE,I as AU,Ia as fF,Ib as lE,Ic as tm,Id as DW,Ie as qW,If as mm,J as OU,Ja as mF,Jb as cE,Jc as nm,Jd as kW,Je as xE,Jf as C9,K as FU,Ka as gF,Kb as dE,Kc as im,Kd as IW,Ke as KW,Kf as w9,L as LU,La as vF,Lb as uE,Lc as om,Ld as lm,Le as ZW,Lf as N2,M as NU,Ma as _F,Mb as KF,Mc as rm,Md as Bs,Me as YW,Mf as x9,N as BU,Na as yF,Nb as ZF,Nc as sm,Nd as _t,Ne as dm,Nf as S9,O as zU,Oa as bF,Ob as YF,Oc as Uy,Oe as QW,Of as PE,P as VU,Pa as CF,Pb as QF,Pc as jU,Pd as Wy,Pe as JW,Q as gc,Qa as wF,Qb as JF,Qc as w2,Qe as XW,Qf as E9,R as DO,Ra as xF,Rb as XF,Rc as x2,Rd as MW,Re as e9,Rf as D9,S as GS,Sa as SF,Sb as e2,Sc as S2,Sd as RW,Se as um,Sf as Xi,T as US,Ta as EF,Tb as t2,Tc as E2,Td as TW,Te as Vs,Tf as k9,U as kO,Ua as DF,Ub as n2,Uc as D2,Ud as PW,Ue as zr,Uf as I9,V as IO,Va as kF,Vb as i2,Vc as k2,Vd as Ca,Ve as t9,Vf as B2,W as MO,Wa as IF,Wb as o2,Wc as I2,Wd as vE,We as n9,Wf as oi,X as RO,Xa as MF,Xb as r2,Xc as am,Xd as AW,Xe as cs,Xf as hs,Y as TO,Ya as RF,Yb as s2,Yc as GU,Yd as _E,Ye as SE,Yf as Ci,Z as PO,Za as TF,Zb as a2,Zc as M2,Zd as yE,Ze as Hs,Zf as To,_ as AO,_a as PF,_b as l2,_c as UU,_d as OW,_e as EE,_f as ll,a as g,aa as FO,ab as OF,ac as d2,ad as qU,ae as LW,af as o9,ag as M9,b as x,ba as LO,bb as FF,bc as u2,bd as KU,be as T2,bf as Qy,bg as R9,ca as NO,cb as LF,cc as h2,cd as ZU,ce as P2,cf as DE,cg as T9,d as Be,da as BO,db as NF,dc as p2,dd as YU,de as bE,dg as L9,e as He,ea as zO,eb as BF,ec as f2,ed as QU,ef as r9,f as zy,fa as VO,fb as zF,fc as m2,fd as JU,fe as uo,ff as s9,g as CO,ga as HO,gb as VF,gc as g2,gd as XU,ge as qy,gf as a9,h as Wn,ha as $O,hb as $U,hc as v2,hd as eW,he as NW,hf as hm,hg as z9,i as E,ia as jO,ib as HF,ic as _2,id as tW,ie as BW,if as L2,ig as V9,j as Ie,ja as GO,jb as $F,jc as y2,jd as nW,je as zs,jf as bc,jg as H9,k as Bt,ka as UO,kb as jF,kc as b2,kd as iW,ke as zW,kf as l9,kg as $9,l as co,la as WO,lb as GF,lc as C2,ld as oW,le as cm,lf as c9,lg as j9,m as lt,ma as qO,mb as Ld,mc as vc,md as rW,me as CE,mf as kE,mg as LE,n as At,na as KO,nb as UF,nc as as,nd as sW,ne as VW,nf as pm,ng as G9,o as wO,oa as ZO,ob as WF,oc as _c,od as aW,oe as HW,of as d9,og as NE,p as Vy,pa as YO,pb as WS,pc as _r,pd as lW,pe as wE,pf as ds,q as Me,qa as QO,qb as jy,qc as hE,qd as cW,qe as $W,qf as u9,r as HS,ra as JO,rb as qS,rc as pE,rd as dW,re as Ky,rf as h9,s as kU,sa as XO,sb as KS,sc as fE,sd as uW,se as A2,sf as p9,t as mc,ta as eF,tb as ZS,tc as mE,td as hW,te as ii,tf as IE,u as xO,ua as tF,ub as YS,uc as Nd,ud as pW,ue as yr,uf as ME,v as _h,va as nF,vb as Gy,vc as yh,vd as fW,ve as Zy,vf as f9,w as Kt,wa as iF,wb as QS,wc as Bd,wd as mW,we as Jo,wf as fm,x as IU,xa as oF,xb as JS,xc as Kf,xd as R2,xe as jW,xf as Cc,y as Hy,ya as rF,yb as XS,yc as bh,yd as gW,ye as wh,yf as m9,z as $y,za as sF,zb as eE,zc as yc,zd as vW,ze as ho,zf as RE}from"./chunk-PR3HXOEE.js";var o0=He(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});wn.regexpCode=wn.getEsmExportName=wn.getProperty=wn.safeStringify=wn.stringify=wn.strConcat=wn.addCodeArg=wn.str=wn._=wn.nil=wn._Code=wn.Name=wn.IDENTIFIER=wn._CodeOrName=void 0;var n0=class{};wn._CodeOrName=n0;wn.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Ap=class extends n0{constructor(t){if(super(),!wn.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};wn.Name=Ap;var oa=class extends n0{constructor(t){super(),this._items=typeof t=="string"?[t]:t}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let t=this._items[0];return t===""||t==='""'}get str(){var t;return(t=this._str)!==null&&t!==void 0?t:this._str=this._items.reduce((n,i)=>`${n}${i}`,"")}get names(){var t;return(t=this._names)!==null&&t!==void 0?t:this._names=this._items.reduce((n,i)=>(i instanceof Ap&&(n[i.str]=(n[i.str]||0)+1),n),{})}};wn._Code=oa;wn.nil=new oa("");function kre(e,...t){let n=[e[0]],i=0;for(;i<t.length;)oH(n,t[i]),n.push(e[++i]);return new oa(n)}wn._=kre;var iH=new oa("+");function Ire(e,...t){let n=[i0(e[0])],i=0;for(;i<t.length;)n.push(iH),oH(n,t[i]),n.push(iH,i0(e[++i]));return yHe(n),new oa(n)}wn.str=Ire;function oH(e,t){t instanceof oa?e.push(...t._items):t instanceof Ap?e.push(t):e.push(wHe(t))}wn.addCodeArg=oH;function yHe(e){let t=1;for(;t<e.length-1;){if(e[t]===iH){let n=bHe(e[t-1],e[t+1]);if(n!==void 0){e.splice(t-1,3,n);continue}e[t++]="+"}t++}}function bHe(e,t){if(t==='""')return e;if(e==='""')return t;if(typeof e=="string")return t instanceof Ap||e[e.length-1]!=='"'?void 0:typeof t!="string"?`${e.slice(0,-1)}${t}"`:t[0]==='"'?e.slice(0,-1)+t.slice(1):void 0;if(typeof t=="string"&&t[0]==='"'&&!(e instanceof Ap))return`"${e}${t.slice(1)}`}function CHe(e,t){return t.emptyStr()?e:e.emptyStr()?t:Ire`${e}${t}`}wn.strConcat=CHe;function wHe(e){return typeof e=="number"||typeof e=="boolean"||e===null?e:i0(Array.isArray(e)?e.join(","):e)}function xHe(e){return new oa(i0(e))}wn.stringify=xHe;function i0(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}wn.safeStringify=i0;function SHe(e){return typeof e=="string"&&wn.IDENTIFIER.test(e)?new oa(`.${e}`):kre`[${e}]`}wn.getProperty=SHe;function EHe(e){if(typeof e=="string"&&wn.IDENTIFIER.test(e))return new oa(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)}wn.getEsmExportName=EHe;function DHe(e){return new oa(e.toString())}wn.regexpCode=DHe});var aH=He(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});Qr.ValueScope=Qr.ValueScopeName=Qr.Scope=Qr.varKinds=Qr.UsedValueState=void 0;var Yr=o0(),rH=class extends Error{constructor(t){super(`CodeGen: "code" for ${t} not defined`),this.value=t.value}},EM=(function(e){return e[e.Started=0]="Started",e[e.Completed=1]="Completed",e})(EM||(Qr.UsedValueState=EM={}));Qr.varKinds={const:new Yr.Name("const"),let:new Yr.Name("let"),var:new Yr.Name("var")};var DM=class{constructor({prefixes:t,parent:n}={}){this._names={},this._prefixes=t,this._parent=n}toName(t){return t instanceof Yr.Name?t:this.name(t)}name(t){return new Yr.Name(this._newName(t))}_newName(t){let n=this._names[t]||this._nameGroup(t);return`${t}${n.index++}`}_nameGroup(t){var n,i;if(!((i=(n=this._parent)===null||n===void 0?void 0:n._prefixes)===null||i===void 0)&&i.has(t)||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix "${t}" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}};Qr.Scope=DM;var kM=class extends Yr.Name{constructor(t,n){super(n),this.prefix=t}setValue(t,{property:n,itemIndex:i}){this.value=t,this.scopePath=(0,Yr._)`.${new Yr.Name(n)}[${i}]`}};Qr.ValueScopeName=kM;var kHe=(0,Yr._)`\n`,sH=class extends DM{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts=x(g({},t),{_n:t.lines?kHe:Yr.nil})}get(){return this._scope}name(t){return new kM(t,this._newName(t))}value(t,n){var i;if(n.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let o=this.toName(t),{prefix:r}=o,s=(i=n.key)!==null&&i!==void 0?i:n.ref,a=this._values[r];if(a){let u=a.get(s);if(u)return u}else a=this._values[r]=new Map;a.set(s,o);let l=this._scope[r]||(this._scope[r]=[]),c=l.length;return l[c]=n.ref,o.setValue(n,{property:r,itemIndex:c}),o}getValue(t,n){let i=this._values[t];if(i)return i.get(n)}scopeRefs(t,n=this._values){return this._reduceValues(n,i=>{if(i.scopePath===void 0)throw new Error(`CodeGen: name "${i}" has no value`);return(0,Yr._)`${t}${i.scopePath}`})}scopeCode(t=this._values,n,i){return this._reduceValues(t,o=>{if(o.value===void 0)throw new Error(`CodeGen: name "${o}" has no value`);return o.value.code},n,i)}_reduceValues(t,n,i={},o){let r=Yr.nil;for(let s in t){let a=t[s];if(!a)continue;let l=i[s]=i[s]||new Map;a.forEach(c=>{if(l.has(c))return;l.set(c,EM.Started);let u=n(c);if(u){let h=this.opts.es5?Qr.varKinds.var:Qr.varKinds.const;r=(0,Yr._)`${r}${h} ${c} = ${u};${this.opts._n}`}else if(u=o?.(c))r=(0,Yr._)`${r}${u}${this.opts._n}`;else throw new rH(c);l.set(c,EM.Completed)})}return r}};Qr.ValueScope=sH});var Yt=He(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.or=Xt.and=Xt.not=Xt.CodeGen=Xt.operators=Xt.varKinds=Xt.ValueScopeName=Xt.ValueScope=Xt.Scope=Xt.Name=Xt.regexpCode=Xt.stringify=Xt.getProperty=Xt.nil=Xt.strConcat=Xt.str=Xt._=void 0;var hn=o0(),Ha=aH(),Du=o0();Object.defineProperty(Xt,"_",{enumerable:!0,get:function(){return Du._}});Object.defineProperty(Xt,"str",{enumerable:!0,get:function(){return Du.str}});Object.defineProperty(Xt,"strConcat",{enumerable:!0,get:function(){return Du.strConcat}});Object.defineProperty(Xt,"nil",{enumerable:!0,get:function(){return Du.nil}});Object.defineProperty(Xt,"getProperty",{enumerable:!0,get:function(){return Du.getProperty}});Object.defineProperty(Xt,"stringify",{enumerable:!0,get:function(){return Du.stringify}});Object.defineProperty(Xt,"regexpCode",{enumerable:!0,get:function(){return Du.regexpCode}});Object.defineProperty(Xt,"Name",{enumerable:!0,get:function(){return Du.Name}});var PM=aH();Object.defineProperty(Xt,"Scope",{enumerable:!0,get:function(){return PM.Scope}});Object.defineProperty(Xt,"ValueScope",{enumerable:!0,get:function(){return PM.ValueScope}});Object.defineProperty(Xt,"ValueScopeName",{enumerable:!0,get:function(){return PM.ValueScopeName}});Object.defineProperty(Xt,"varKinds",{enumerable:!0,get:function(){return PM.varKinds}});Xt.operators={GT:new hn._Code(">"),GTE:new hn._Code(">="),LT:new hn._Code("<"),LTE:new hn._Code("<="),EQ:new hn._Code("==="),NEQ:new hn._Code("!=="),NOT:new hn._Code("!"),OR:new hn._Code("||"),AND:new hn._Code("&&"),ADD:new hn._Code("+")};var id=class{optimizeNodes(){return this}optimizeNames(t,n){return this}},lH=class extends id{constructor(t,n,i){super(),this.varKind=t,this.name=n,this.rhs=i}render({es5:t,_n:n}){let i=t?Ha.varKinds.var:this.varKind,o=this.rhs===void 0?"":` = ${this.rhs}`;return`${i} ${this.name}${o};`+n}optimizeNames(t,n){if(t[this.name.str])return this.rhs&&(this.rhs=hv(this.rhs,t,n)),this}get names(){return this.rhs instanceof hn._CodeOrName?this.rhs.names:{}}},MM=class extends id{constructor(t,n,i){super(),this.lhs=t,this.rhs=n,this.sideEffects=i}render({_n:t}){return`${this.lhs} = ${this.rhs};`+t}optimizeNames(t,n){if(!(this.lhs instanceof hn.Name&&!t[this.lhs.str]&&!this.sideEffects))return this.rhs=hv(this.rhs,t,n),this}get names(){let t=this.lhs instanceof hn.Name?{}:g({},this.lhs.names);return TM(t,this.rhs)}},cH=class extends MM{constructor(t,n,i,o){super(t,i,o),this.op=n}render({_n:t}){return`${this.lhs} ${this.op}= ${this.rhs};`+t}},dH=class extends id{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`${this.label}:`+t}},uH=class extends id{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`break${this.label?` ${this.label}`:""};`+t}},hH=class extends id{constructor(t){super(),this.error=t}render({_n:t}){return`throw ${this.error};`+t}get names(){return this.error.names}},pH=class extends id{constructor(t){super(),this.code=t}render({_n:t}){return`${this.code};`+t}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(t,n){return this.code=hv(this.code,t,n),this}get names(){return this.code instanceof hn._CodeOrName?this.code.names:{}}},r0=class extends id{constructor(t=[]){super(),this.nodes=t}render(t){return this.nodes.reduce((n,i)=>n+i.render(t),"")}optimizeNodes(){let{nodes:t}=this,n=t.length;for(;n--;){let i=t[n].optimizeNodes();Array.isArray(i)?t.splice(n,1,...i):i?t[n]=i:t.splice(n,1)}return t.length>0?this:void 0}optimizeNames(t,n){let{nodes:i}=this,o=i.length;for(;o--;){let r=i[o];r.optimizeNames(t,n)||(IHe(t,r.names),i.splice(o,1))}return i.length>0?this:void 0}get names(){return this.nodes.reduce((t,n)=>Op(t,n.names),{})}},od=class extends r0{render(t){return"{"+t._n+super.render(t)+"}"+t._n}},fH=class extends r0{},mH=(()=>{class e extends od{}return e.kind="else",e})(),IM=(()=>{class e extends od{constructor(n,i){super(i),this.condition=n}render(n){let i=`if(${this.condition})`+super.render(n);return this.else&&(i+="else "+this.else.render(n)),i}optimizeNodes(){super.optimizeNodes();let n=this.condition;if(n===!0)return this.nodes;let i=this.else;if(i){let o=i.optimizeNodes();i=this.else=Array.isArray(o)?new mH(o):o}if(i)return n===!1?i instanceof e?i:i.nodes:this.nodes.length?this:new e(Are(n),i instanceof e?[i]:i.nodes);if(!(n===!1||!this.nodes.length))return this}optimizeNames(n,i){var o;if(this.else=(o=this.else)===null||o===void 0?void 0:o.optimizeNames(n,i),!!(super.optimizeNames(n,i)||this.else))return this.condition=hv(this.condition,n,i),this}get names(){let n=super.names;return TM(n,this.condition),this.else&&Op(n,this.else.names),n}}return e.kind="if",e})(),AM=(()=>{class e extends od{}return e.kind="for",e})(),gH=class extends AM{constructor(t){super(),this.iteration=t}render(t){return`for(${this.iteration})`+super.render(t)}optimizeNames(t,n){if(super.optimizeNames(t,n))return this.iteration=hv(this.iteration,t,n),this}get names(){return Op(super.names,this.iteration.names)}},vH=class extends AM{constructor(t,n,i,o){super(),this.varKind=t,this.name=n,this.from=i,this.to=o}render(t){let n=t.es5?Ha.varKinds.var:this.varKind,{name:i,from:o,to:r}=this;return`for(${n} ${i}=${o}; ${i}<${r}; ${i}++)`+super.render(t)}get names(){let t=TM(super.names,this.from);return TM(t,this.to)}},RM=class extends AM{constructor(t,n,i,o){super(),this.loop=t,this.varKind=n,this.name=i,this.iterable=o}render(t){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(t)}optimizeNames(t,n){if(super.optimizeNames(t,n))return this.iterable=hv(this.iterable,t,n),this}get names(){return Op(super.names,this.iterable.names)}},Mre=(()=>{class e extends od{constructor(n,i,o){super(),this.name=n,this.args=i,this.async=o}render(n){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(n)}}return e.kind="func",e})(),Rre=(()=>{class e extends r0{render(n){return"return "+super.render(n)}}return e.kind="return",e})(),_H=class extends od{render(t){let n="try"+super.render(t);return this.catch&&(n+=this.catch.render(t)),this.finally&&(n+=this.finally.render(t)),n}optimizeNodes(){var t,n;return super.optimizeNodes(),(t=this.catch)===null||t===void 0||t.optimizeNodes(),(n=this.finally)===null||n===void 0||n.optimizeNodes(),this}optimizeNames(t,n){var i,o;return super.optimizeNames(t,n),(i=this.catch)===null||i===void 0||i.optimizeNames(t,n),(o=this.finally)===null||o===void 0||o.optimizeNames(t,n),this}get names(){let t=super.names;return this.catch&&Op(t,this.catch.names),this.finally&&Op(t,this.finally.names),t}},Tre=(()=>{class e extends od{constructor(n){super(),this.error=n}render(n){return`catch(${this.error})`+super.render(n)}}return e.kind="catch",e})(),Pre=(()=>{class e extends od{render(n){return"finally"+super.render(n)}}return e.kind="finally",e})(),yH=class{constructor(t,n={}){this._values={},this._blockStarts=[],this._constants={},this.opts=x(g({},n),{_n:n.lines?`
`:""}),this._extScope=t,this._scope=new Ha.Scope({parent:t}),this._nodes=[new fH]}toString(){return this._root.render(this.opts)}name(t){return this._scope.name(t)}scopeName(t){return this._extScope.name(t)}scopeValue(t,n){let i=this._extScope.value(t,n);return(this._values[i.prefix]||(this._values[i.prefix]=new Set)).add(i),i}getScopeValue(t,n){return this._extScope.getValue(t,n)}scopeRefs(t){return this._extScope.scopeRefs(t,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(t,n,i,o){let r=this._scope.toName(n);return i!==void 0&&o&&(this._constants[r.str]=i),this._leafNode(new lH(t,r,i)),r}const(t,n,i){return this._def(Ha.varKinds.const,t,n,i)}let(t,n,i){return this._def(Ha.varKinds.let,t,n,i)}var(t,n,i){return this._def(Ha.varKinds.var,t,n,i)}assign(t,n,i){return this._leafNode(new MM(t,n,i))}add(t,n){return this._leafNode(new cH(t,Xt.operators.ADD,n))}code(t){return typeof t=="function"?t():t!==hn.nil&&this._leafNode(new pH(t)),this}object(...t){let n=["{"];for(let[i,o]of t)n.length>1&&n.push(","),n.push(i),(i!==o||this.opts.es5)&&(n.push(":"),(0,hn.addCodeArg)(n,o));return n.push("}"),new hn._Code(n)}if(t,n,i){if(this._blockNode(new IM(t)),n&&i)this.code(n).else().code(i).endIf();else if(n)this.code(n).endIf();else if(i)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(t){return this._elseNode(new IM(t))}else(){return this._elseNode(new mH)}endIf(){return this._endBlockNode(IM,mH)}_for(t,n){return this._blockNode(t),n&&this.code(n).endFor(),this}for(t,n){return this._for(new gH(t),n)}forRange(t,n,i,o,r=this.opts.es5?Ha.varKinds.var:Ha.varKinds.let){let s=this._scope.toName(t);return this._for(new vH(r,s,n,i),()=>o(s))}forOf(t,n,i,o=Ha.varKinds.const){let r=this._scope.toName(t);if(this.opts.es5){let s=n instanceof hn.Name?n:this.var("_arr",n);return this.forRange("_i",0,(0,hn._)`${s}.length`,a=>{this.var(r,(0,hn._)`${s}[${a}]`),i(r)})}return this._for(new RM("of",o,r,n),()=>i(r))}forIn(t,n,i,o=this.opts.es5?Ha.varKinds.var:Ha.varKinds.const){if(this.opts.ownProperties)return this.forOf(t,(0,hn._)`Object.keys(${n})`,i);let r=this._scope.toName(t);return this._for(new RM("in",o,r,n),()=>i(r))}endFor(){return this._endBlockNode(AM)}label(t){return this._leafNode(new dH(t))}break(t){return this._leafNode(new uH(t))}return(t){let n=new Rre;if(this._blockNode(n),this.code(t),n.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Rre)}try(t,n,i){if(!n&&!i)throw new Error('CodeGen: "try" without "catch" and "finally"');let o=new _H;if(this._blockNode(o),this.code(t),n){let r=this.name("e");this._currNode=o.catch=new Tre(r),n(r)}return i&&(this._currNode=o.finally=new Pre,this.code(i)),this._endBlockNode(Tre,Pre)}throw(t){return this._leafNode(new hH(t))}block(t,n){return this._blockStarts.push(this._nodes.length),t&&this.code(t).endBlock(n),this}endBlock(t){let n=this._blockStarts.pop();if(n===void 0)throw new Error("CodeGen: not in self-balancing block");let i=this._nodes.length-n;if(i<0||t!==void 0&&i!==t)throw new Error(`CodeGen: wrong number of nodes: ${i} vs ${t} expected`);return this._nodes.length=n,this}func(t,n=hn.nil,i,o){return this._blockNode(new Mre(t,n,i)),o&&this.code(o).endFunc(),this}endFunc(){return this._endBlockNode(Mre)}optimize(t=1){for(;t-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(t){return this._currNode.nodes.push(t),this}_blockNode(t){this._currNode.nodes.push(t),this._nodes.push(t)}_endBlockNode(t,n){let i=this._currNode;if(i instanceof t||n&&i instanceof n)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${n?`${t.kind}/${n.kind}`:t.kind}"`)}_elseNode(t){let n=this._currNode;if(!(n instanceof IM))throw new Error('CodeGen: "else" without "if"');return this._currNode=n.else=t,this}get _root(){return this._nodes[0]}get _currNode(){let t=this._nodes;return t[t.length-1]}set _currNode(t){let n=this._nodes;n[n.length-1]=t}};Xt.CodeGen=yH;function Op(e,t){for(let n in t)e[n]=(e[n]||0)+(t[n]||0);return e}function TM(e,t){return t instanceof hn._CodeOrName?Op(e,t.names):e}function hv(e,t,n){if(e instanceof hn.Name)return i(e);if(!o(e))return e;return new hn._Code(e._items.reduce((r,s)=>(s instanceof hn.Name&&(s=i(s)),s instanceof hn._Code?r.push(...s._items):r.push(s),r),[]));function i(r){let s=n[r.str];return s===void 0||t[r.str]!==1?r:(delete t[r.str],s)}function o(r){return r instanceof hn._Code&&r._items.some(s=>s instanceof hn.Name&&t[s.str]===1&&n[s.str]!==void 0)}}function IHe(e,t){for(let n in t)e[n]=(e[n]||0)-(t[n]||0)}function Are(e){return typeof e=="boolean"||typeof e=="number"||e===null?!e:(0,hn._)`!${bH(e)}`}Xt.not=Are;var MHe=Ore(Xt.operators.AND);function RHe(...e){return e.reduce(MHe)}Xt.and=RHe;var THe=Ore(Xt.operators.OR);function PHe(...e){return e.reduce(THe)}Xt.or=PHe;function Ore(e){return(t,n)=>t===hn.nil?n:n===hn.nil?t:(0,hn._)`${bH(t)} ${e} ${bH(n)}`}function bH(e){return e instanceof hn.Name?e:(0,hn._)`(${e})`}});var xn=He(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});on.checkStrictMode=on.getErrorPath=on.Type=on.useFunc=on.setEvaluated=on.evaluatedPropsToName=on.mergeEvaluated=on.eachItem=on.unescapeJsonPointer=on.escapeJsonPointer=on.escapeFragment=on.unescapeFragment=on.schemaRefOrVal=on.schemaHasRulesButRef=on.schemaHasRules=on.checkUnknownRules=on.alwaysValidSchema=on.toHash=void 0;var Zn=Yt(),AHe=o0();function OHe(e){let t={};for(let n of e)t[n]=!0;return t}on.toHash=OHe;function FHe(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Nre(e,t),!Bre(t,e.self.RULES.all))}on.alwaysValidSchema=FHe;function Nre(e,t=e.schema){let{opts:n,self:i}=e;if(!n.strictSchema||typeof t=="boolean")return;let o=i.RULES.keywords;for(let r in t)o[r]||Hre(e,`unknown keyword: "${r}"`)}on.checkUnknownRules=Nre;function Bre(e,t){if(typeof e=="boolean")return!e;for(let n in e)if(t[n])return!0;return!1}on.schemaHasRules=Bre;function LHe(e,t){if(typeof e=="boolean")return!e;for(let n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}on.schemaHasRulesButRef=LHe;function NHe({topSchemaRef:e,schemaPath:t},n,i,o){if(!o){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Zn._)`${n}`}return(0,Zn._)`${e}${t}${(0,Zn.getProperty)(i)}`}on.schemaRefOrVal=NHe;function BHe(e){return zre(decodeURIComponent(e))}on.unescapeFragment=BHe;function zHe(e){return encodeURIComponent(wH(e))}on.escapeFragment=zHe;function wH(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}on.escapeJsonPointer=wH;function zre(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}on.unescapeJsonPointer=zre;function VHe(e,t){if(Array.isArray(e))for(let n of e)t(n);else t(e)}on.eachItem=VHe;function Fre({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:i}){return(o,r,s,a)=>{let l=s===void 0?r:s instanceof Zn.Name?(r instanceof Zn.Name?e(o,r,s):t(o,r,s),s):r instanceof Zn.Name?(t(o,s,r),r):n(r,s);return a===Zn.Name&&!(l instanceof Zn.Name)?i(o,l):l}}on.mergeEvaluated={props:Fre({mergeNames:(e,t,n)=>e.if((0,Zn._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Zn._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Zn._)`${n} || {}`).code((0,Zn._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Zn._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Zn._)`${n} || {}`),xH(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:g(g({},e),t),resultToName:Vre}),items:Fre({mergeNames:(e,t,n)=>e.if((0,Zn._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Zn._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Zn._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Zn._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function Vre(e,t){if(t===!0)return e.var("props",!0);let n=e.var("props",(0,Zn._)`{}`);return t!==void 0&&xH(e,n,t),n}on.evaluatedPropsToName=Vre;function xH(e,t,n){Object.keys(n).forEach(i=>e.assign((0,Zn._)`${t}${(0,Zn.getProperty)(i)}`,!0))}on.setEvaluated=xH;var Lre={};function HHe(e,t){return e.scopeValue("func",{ref:t,code:Lre[t.code]||(Lre[t.code]=new AHe._Code(t.code))})}on.useFunc=HHe;var CH=(function(e){return e[e.Num=0]="Num",e[e.Str=1]="Str",e})(CH||(on.Type=CH={}));function $He(e,t,n){if(e instanceof Zn.Name){let i=t===CH.Num;return n?i?(0,Zn._)`"[" + ${e} + "]"`:(0,Zn._)`"['" + ${e} + "']"`:i?(0,Zn._)`"/" + ${e}`:(0,Zn._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Zn.getProperty)(e).toString():"/"+wH(e)}on.getErrorPath=$He;function Hre(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}on.checkStrictMode=Hre});var rd=He(SH=>{"use strict";Object.defineProperty(SH,"__esModule",{value:!0});var cr=Yt(),jHe={data:new cr.Name("data"),valCxt:new cr.Name("valCxt"),instancePath:new cr.Name("instancePath"),parentData:new cr.Name("parentData"),parentDataProperty:new cr.Name("parentDataProperty"),rootData:new cr.Name("rootData"),dynamicAnchors:new cr.Name("dynamicAnchors"),vErrors:new cr.Name("vErrors"),errors:new cr.Name("errors"),this:new cr.Name("this"),self:new cr.Name("self"),scope:new cr.Name("scope"),json:new cr.Name("json"),jsonPos:new cr.Name("jsonPos"),jsonLen:new cr.Name("jsonLen"),jsonPart:new cr.Name("jsonPart")};SH.default=jHe});var s0=He(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.extendErrors=dr.resetErrorsCount=dr.reportExtraError=dr.reportError=dr.keyword$DataError=dr.keywordError=void 0;var vn=Yt(),OM=xn(),Ir=rd();dr.keywordError={message:({keyword:e})=>(0,vn.str)`must pass "${e}" keyword validation`};dr.keyword$DataError={message:({keyword:e,schemaType:t})=>t?(0,vn.str)`"${e}" keyword must be ${t} ($data)`:(0,vn.str)`"${e}" keyword is invalid ($data)`};function GHe(e,t=dr.keywordError,n,i){let{it:o}=e,{gen:r,compositeRule:s,allErrors:a}=o,l=Gre(e,t,n);i??(s||a)?$re(r,l):jre(o,(0,vn._)`[${l}]`)}dr.reportError=GHe;function UHe(e,t=dr.keywordError,n){let{it:i}=e,{gen:o,compositeRule:r,allErrors:s}=i,a=Gre(e,t,n);$re(o,a),r||s||jre(i,Ir.default.vErrors)}dr.reportExtraError=UHe;function WHe(e,t){e.assign(Ir.default.errors,t),e.if((0,vn._)`${Ir.default.vErrors} !== null`,()=>e.if(t,()=>e.assign((0,vn._)`${Ir.default.vErrors}.length`,t),()=>e.assign(Ir.default.vErrors,null)))}dr.resetErrorsCount=WHe;function qHe({gen:e,keyword:t,schemaValue:n,data:i,errsCount:o,it:r}){if(o===void 0)throw new Error("ajv implementation error");let s=e.name("err");e.forRange("i",o,Ir.default.errors,a=>{e.const(s,(0,vn._)`${Ir.default.vErrors}[${a}]`),e.if((0,vn._)`${s}.instancePath === undefined`,()=>e.assign((0,vn._)`${s}.instancePath`,(0,vn.strConcat)(Ir.default.instancePath,r.errorPath))),e.assign((0,vn._)`${s}.schemaPath`,(0,vn.str)`${r.errSchemaPath}/${t}`),r.opts.verbose&&(e.assign((0,vn._)`${s}.schema`,n),e.assign((0,vn._)`${s}.data`,i))})}dr.extendErrors=qHe;function $re(e,t){let n=e.const("err",t);e.if((0,vn._)`${Ir.default.vErrors} === null`,()=>e.assign(Ir.default.vErrors,(0,vn._)`[${n}]`),(0,vn._)`${Ir.default.vErrors}.push(${n})`),e.code((0,vn._)`${Ir.default.errors}++`)}function jre(e,t){let{gen:n,validateName:i,schemaEnv:o}=e;o.$async?n.throw((0,vn._)`new ${e.ValidationError}(${t})`):(n.assign((0,vn._)`${i}.errors`,t),n.return(!1))}var Fp={keyword:new vn.Name("keyword"),schemaPath:new vn.Name("schemaPath"),params:new vn.Name("params"),propertyName:new vn.Name("propertyName"),message:new vn.Name("message"),schema:new vn.Name("schema"),parentSchema:new vn.Name("parentSchema")};function Gre(e,t,n){let{createErrors:i}=e.it;return i===!1?(0,vn._)`{}`:KHe(e,t,n)}function KHe(e,t,n={}){let{gen:i,it:o}=e,r=[ZHe(o,n),YHe(e,n)];return QHe(e,t,r),i.object(...r)}function ZHe({errorPath:e},{instancePath:t}){let n=t?(0,vn.str)`${e}${(0,OM.getErrorPath)(t,OM.Type.Str)}`:e;return[Ir.default.instancePath,(0,vn.strConcat)(Ir.default.instancePath,n)]}function YHe({keyword:e,it:{errSchemaPath:t}},{schemaPath:n,parentSchema:i}){let o=i?t:(0,vn.str)`${t}/${e}`;return n&&(o=(0,vn.str)`${o}${(0,OM.getErrorPath)(n,OM.Type.Str)}`),[Fp.schemaPath,o]}function QHe(e,{params:t,message:n},i){let{keyword:o,data:r,schemaValue:s,it:a}=e,{opts:l,propertyName:c,topSchemaRef:u,schemaPath:h}=a;i.push([Fp.keyword,o],[Fp.params,typeof t=="function"?t(e):t||(0,vn._)`{}`]),l.messages&&i.push([Fp.message,typeof n=="function"?n(e):n]),l.verbose&&i.push([Fp.schema,s],[Fp.parentSchema,(0,vn._)`${u}${h}`],[Ir.default.data,r]),c&&i.push([Fp.propertyName,c])}});var Wre=He(pv=>{"use strict";Object.defineProperty(pv,"__esModule",{value:!0});pv.boolOrEmptySchema=pv.topBoolOrEmptySchema=void 0;var JHe=s0(),XHe=Yt(),e5e=rd(),t5e={message:"boolean schema is false"};function n5e(e){let{gen:t,schema:n,validateName:i}=e;n===!1?Ure(e,!1):typeof n=="object"&&n.$async===!0?t.return(e5e.default.data):(t.assign((0,XHe._)`${i}.errors`,null),t.return(!0))}pv.topBoolOrEmptySchema=n5e;function i5e(e,t){let{gen:n,schema:i}=e;i===!1?(n.var(t,!1),Ure(e)):n.var(t,!0)}pv.boolOrEmptySchema=i5e;function Ure(e,t){let{gen:n,data:i}=e,o={gen:n,keyword:"false schema",data:i,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,JHe.reportError)(o,t5e,void 0,t)}});var EH=He(fv=>{"use strict";Object.defineProperty(fv,"__esModule",{value:!0});fv.getRules=fv.isJSONType=void 0;var o5e=["string","number","integer","boolean","null","object","array"],r5e=new Set(o5e);function s5e(e){return typeof e=="string"&&r5e.has(e)}fv.isJSONType=s5e;function a5e(){let e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:x(g({},e),{integer:!0,boolean:!0,null:!0}),rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}fv.getRules=a5e});var DH=He(ku=>{"use strict";Object.defineProperty(ku,"__esModule",{value:!0});ku.shouldUseRule=ku.shouldUseGroup=ku.schemaHasRulesForType=void 0;function l5e({schema:e,self:t},n){let i=t.RULES.types[n];return i&&i!==!0&&qre(e,i)}ku.schemaHasRulesForType=l5e;function qre(e,t){return t.rules.some(n=>Kre(e,n))}ku.shouldUseGroup=qre;function Kre(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(i=>e[i]!==void 0))}ku.shouldUseRule=Kre});var a0=He(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});ur.reportTypeError=ur.checkDataTypes=ur.checkDataType=ur.coerceAndCheckDataType=ur.getJSONTypes=ur.getSchemaTypes=ur.DataType=void 0;var c5e=EH(),d5e=DH(),u5e=s0(),Ut=Yt(),Zre=xn(),mv=(function(e){return e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong",e})(mv||(ur.DataType=mv={}));function h5e(e){let t=Yre(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}ur.getSchemaTypes=h5e;function Yre(e){let t=Array.isArray(e)?e:e?[e]:[];if(t.every(c5e.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}ur.getJSONTypes=Yre;function p5e(e,t){let{gen:n,data:i,opts:o}=e,r=f5e(t,o.coerceTypes),s=t.length>0&&!(r.length===0&&t.length===1&&(0,d5e.schemaHasRulesForType)(e,t[0]));if(s){let a=IH(t,i,o.strictNumbers,mv.Wrong);n.if(a,()=>{r.length?m5e(e,t,r):MH(e)})}return s}ur.coerceAndCheckDataType=p5e;var Qre=new Set(["string","number","integer","boolean","null"]);function f5e(e,t){return t?e.filter(n=>Qre.has(n)||t==="array"&&n==="array"):[]}function m5e(e,t,n){let{gen:i,data:o,opts:r}=e,s=i.let("dataType",(0,Ut._)`typeof ${o}`),a=i.let("coerced",(0,Ut._)`undefined`);r.coerceTypes==="array"&&i.if((0,Ut._)`${s} == 'object' && Array.isArray(${o}) && ${o}.length == 1`,()=>i.assign(o,(0,Ut._)`${o}[0]`).assign(s,(0,Ut._)`typeof ${o}`).if(IH(t,o,r.strictNumbers),()=>i.assign(a,o))),i.if((0,Ut._)`${a} !== undefined`);for(let c of n)(Qre.has(c)||c==="array"&&r.coerceTypes==="array")&&l(c);i.else(),MH(e),i.endIf(),i.if((0,Ut._)`${a} !== undefined`,()=>{i.assign(o,a),g5e(e,a)});function l(c){switch(c){case"string":i.elseIf((0,Ut._)`${s} == "number" || ${s} == "boolean"`).assign(a,(0,Ut._)`"" + ${o}`).elseIf((0,Ut._)`${o} === null`).assign(a,(0,Ut._)`""`);return;case"number":i.elseIf((0,Ut._)`${s} == "boolean" || ${o} === null
              || (${s} == "string" && ${o} && ${o} == +${o})`).assign(a,(0,Ut._)`+${o}`);return;case"integer":i.elseIf((0,Ut._)`${s} === "boolean" || ${o} === null
              || (${s} === "string" && ${o} && ${o} == +${o} && !(${o} % 1))`).assign(a,(0,Ut._)`+${o}`);return;case"boolean":i.elseIf((0,Ut._)`${o} === "false" || ${o} === 0 || ${o} === null`).assign(a,!1).elseIf((0,Ut._)`${o} === "true" || ${o} === 1`).assign(a,!0);return;case"null":i.elseIf((0,Ut._)`${o} === "" || ${o} === 0 || ${o} === false`),i.assign(a,null);return;case"array":i.elseIf((0,Ut._)`${s} === "string" || ${s} === "number"
              || ${s} === "boolean" || ${o} === null`).assign(a,(0,Ut._)`[${o}]`)}}}function g5e({gen:e,parentData:t,parentDataProperty:n},i){e.if((0,Ut._)`${t} !== undefined`,()=>e.assign((0,Ut._)`${t}[${n}]`,i))}function kH(e,t,n,i=mv.Correct){let o=i===mv.Correct?Ut.operators.EQ:Ut.operators.NEQ,r;switch(e){case"null":return(0,Ut._)`${t} ${o} null`;case"array":r=(0,Ut._)`Array.isArray(${t})`;break;case"object":r=(0,Ut._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":r=s((0,Ut._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":r=s();break;default:return(0,Ut._)`typeof ${t} ${o} ${e}`}return i===mv.Correct?r:(0,Ut.not)(r);function s(a=Ut.nil){return(0,Ut.and)((0,Ut._)`typeof ${t} == "number"`,a,n?(0,Ut._)`isFinite(${t})`:Ut.nil)}}ur.checkDataType=kH;function IH(e,t,n,i){if(e.length===1)return kH(e[0],t,n,i);let o,r=(0,Zre.toHash)(e);if(r.array&&r.object){let s=(0,Ut._)`typeof ${t} != "object"`;o=r.null?s:(0,Ut._)`!${t} || ${s}`,delete r.null,delete r.array,delete r.object}else o=Ut.nil;r.number&&delete r.integer;for(let s in r)o=(0,Ut.and)(o,kH(s,t,n,i));return o}ur.checkDataTypes=IH;var v5e={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,Ut._)`{type: ${e}}`:(0,Ut._)`{type: ${t}}`};function MH(e){let t=_5e(e);(0,u5e.reportError)(t,v5e)}ur.reportTypeError=MH;function _5e(e){let{gen:t,data:n,schema:i}=e,o=(0,Zre.schemaRefOrVal)(e,i,"type");return{gen:t,keyword:"type",data:n,schema:i.type,schemaCode:o,schemaValue:o,parentSchema:i,params:{},it:e}}});var Xre=He(FM=>{"use strict";Object.defineProperty(FM,"__esModule",{value:!0});FM.assignDefaults=void 0;var gv=Yt(),y5e=xn();function b5e(e,t){let{properties:n,items:i}=e.schema;if(t==="object"&&n)for(let o in n)Jre(e,o,n[o].default);else t==="array"&&Array.isArray(i)&&i.forEach((o,r)=>Jre(e,r,o.default))}FM.assignDefaults=b5e;function Jre(e,t,n){let{gen:i,compositeRule:o,data:r,opts:s}=e;if(n===void 0)return;let a=(0,gv._)`${r}${(0,gv.getProperty)(t)}`;if(o){(0,y5e.checkStrictMode)(e,`default is ignored for: ${a}`);return}let l=(0,gv._)`${a} === undefined`;s.useDefaults==="empty"&&(l=(0,gv._)`${l} || ${a} === null || ${a} === ""`),i.if(l,(0,gv._)`${a} = ${(0,gv.stringify)(n)}`)}});var ra=He(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});Gn.validateUnion=Gn.validateArray=Gn.usePattern=Gn.callValidateCode=Gn.schemaProperties=Gn.allSchemaProperties=Gn.noPropertyInData=Gn.propertyInData=Gn.isOwnProperty=Gn.hasPropFunc=Gn.reportMissingProp=Gn.checkMissingProp=Gn.checkReportMissingProp=void 0;var ui=Yt(),RH=xn(),Iu=rd(),C5e=xn();function w5e(e,t){let{gen:n,data:i,it:o}=e;n.if(PH(n,i,t,o.opts.ownProperties),()=>{e.setParams({missingProperty:(0,ui._)`${t}`},!0),e.error()})}Gn.checkReportMissingProp=w5e;function x5e({gen:e,data:t,it:{opts:n}},i,o){return(0,ui.or)(...i.map(r=>(0,ui.and)(PH(e,t,r,n.ownProperties),(0,ui._)`${o} = ${r}`)))}Gn.checkMissingProp=x5e;function S5e(e,t){e.setParams({missingProperty:t},!0),e.error()}Gn.reportMissingProp=S5e;function ese(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ui._)`Object.prototype.hasOwnProperty`})}Gn.hasPropFunc=ese;function TH(e,t,n){return(0,ui._)`${ese(e)}.call(${t}, ${n})`}Gn.isOwnProperty=TH;function E5e(e,t,n,i){let o=(0,ui._)`${t}${(0,ui.getProperty)(n)} !== undefined`;return i?(0,ui._)`${o} && ${TH(e,t,n)}`:o}Gn.propertyInData=E5e;function PH(e,t,n,i){let o=(0,ui._)`${t}${(0,ui.getProperty)(n)} === undefined`;return i?(0,ui.or)(o,(0,ui.not)(TH(e,t,n))):o}Gn.noPropertyInData=PH;function tse(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Gn.allSchemaProperties=tse;function D5e(e,t){return tse(t).filter(n=>!(0,RH.alwaysValidSchema)(e,t[n]))}Gn.schemaProperties=D5e;function k5e({schemaCode:e,data:t,it:{gen:n,topSchemaRef:i,schemaPath:o,errorPath:r},it:s},a,l,c){let u=c?(0,ui._)`${e}, ${t}, ${i}${o}`:t,h=[[Iu.default.instancePath,(0,ui.strConcat)(Iu.default.instancePath,r)],[Iu.default.parentData,s.parentData],[Iu.default.parentDataProperty,s.parentDataProperty],[Iu.default.rootData,Iu.default.rootData]];s.opts.dynamicRef&&h.push([Iu.default.dynamicAnchors,Iu.default.dynamicAnchors]);let f=(0,ui._)`${u}, ${n.object(...h)}`;return l!==ui.nil?(0,ui._)`${a}.call(${l}, ${f})`:(0,ui._)`${a}(${f})`}Gn.callValidateCode=k5e;var I5e=(0,ui._)`new RegExp`;function M5e({gen:e,it:{opts:t}},n){let i=t.unicodeRegExp?"u":"",{regExp:o}=t.code,r=o(n,i);return e.scopeValue("pattern",{key:r.toString(),ref:r,code:(0,ui._)`${o.code==="new RegExp"?I5e:(0,C5e.useFunc)(e,o)}(${n}, ${i})`})}Gn.usePattern=M5e;function R5e(e){let{gen:t,data:n,keyword:i,it:o}=e,r=t.name("valid");if(o.allErrors){let a=t.let("valid",!0);return s(()=>t.assign(a,!1)),a}return t.var(r,!0),s(()=>t.break()),r;function s(a){let l=t.const("len",(0,ui._)`${n}.length`);t.forRange("i",0,l,c=>{e.subschema({keyword:i,dataProp:c,dataPropType:RH.Type.Num},r),t.if((0,ui.not)(r),a)})}}Gn.validateArray=R5e;function T5e(e){let{gen:t,schema:n,keyword:i,it:o}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(l=>(0,RH.alwaysValidSchema)(o,l))&&!o.opts.unevaluated)return;let s=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((l,c)=>{let u=e.subschema({keyword:i,schemaProp:c,compositeRule:!0},a);t.assign(s,(0,ui._)`${s} || ${a}`),e.mergeValidEvaluated(u,a)||t.if((0,ui.not)(s))})),e.result(s,()=>e.reset(),()=>e.error(!0))}Gn.validateUnion=T5e});var ose=He(Gl=>{"use strict";Object.defineProperty(Gl,"__esModule",{value:!0});Gl.validateKeywordUsage=Gl.validSchemaType=Gl.funcKeywordCode=Gl.macroKeywordCode=void 0;var Mr=Yt(),Lp=rd(),P5e=ra(),A5e=s0();function O5e(e,t){let{gen:n,keyword:i,schema:o,parentSchema:r,it:s}=e,a=t.macro.call(s.self,o,r,s),l=ise(n,i,a);s.opts.validateSchema!==!1&&s.self.validateSchema(a,!0);let c=n.name("valid");e.subschema({schema:a,schemaPath:Mr.nil,errSchemaPath:`${s.errSchemaPath}/${i}`,topSchemaRef:l,compositeRule:!0},c),e.pass(c,()=>e.error(!0))}Gl.macroKeywordCode=O5e;function F5e(e,t){var n;let{gen:i,keyword:o,schema:r,parentSchema:s,$data:a,it:l}=e;N5e(l,t);let c=!a&&t.compile?t.compile.call(l.self,r,s,l):t.validate,u=ise(i,o,c),h=i.let("valid");e.block$data(h,f),e.ok((n=t.valid)!==null&&n!==void 0?n:h);function f(){if(t.errors===!1)y(),t.modifying&&nse(e),w(()=>e.error());else{let C=t.async?m():_();t.modifying&&nse(e),w(()=>L5e(e,C))}}function m(){let C=i.let("ruleErrs",null);return i.try(()=>y((0,Mr._)`await `),S=>i.assign(h,!1).if((0,Mr._)`${S} instanceof ${l.ValidationError}`,()=>i.assign(C,(0,Mr._)`${S}.errors`),()=>i.throw(S))),C}function _(){let C=(0,Mr._)`${u}.errors`;return i.assign(C,null),y(Mr.nil),C}function y(C=t.async?(0,Mr._)`await `:Mr.nil){let S=l.opts.passContext?Lp.default.this:Lp.default.self,I=!("compile"in t&&!a||t.schema===!1);i.assign(h,(0,Mr._)`${C}${(0,P5e.callValidateCode)(e,u,S,I)}`,t.modifying)}function w(C){var S;i.if((0,Mr.not)((S=t.valid)!==null&&S!==void 0?S:h),C)}}Gl.funcKeywordCode=F5e;function nse(e){let{gen:t,data:n,it:i}=e;t.if(i.parentData,()=>t.assign(n,(0,Mr._)`${i.parentData}[${i.parentDataProperty}]`))}function L5e(e,t){let{gen:n}=e;n.if((0,Mr._)`Array.isArray(${t})`,()=>{n.assign(Lp.default.vErrors,(0,Mr._)`${Lp.default.vErrors} === null ? ${t} : ${Lp.default.vErrors}.concat(${t})`).assign(Lp.default.errors,(0,Mr._)`${Lp.default.vErrors}.length`),(0,A5e.extendErrors)(e)},()=>e.error())}function N5e({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function ise(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Mr.stringify)(n)})}function B5e(e,t,n=!1){return!t.length||t.some(i=>i==="array"?Array.isArray(e):i==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==i||n&&typeof e>"u")}Gl.validSchemaType=B5e;function z5e({schema:e,opts:t,self:n,errSchemaPath:i},o,r){if(Array.isArray(o.keyword)?!o.keyword.includes(r):o.keyword!==r)throw new Error("ajv implementation error");let s=o.dependencies;if(s?.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${r}: ${s.join(",")}`);if(o.validateSchema&&!o.validateSchema(e[r])){let l=`keyword "${r}" value is invalid at path "${i}": `+n.errorsText(o.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(l);else throw new Error(l)}}Gl.validateKeywordUsage=z5e});var sse=He(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});Mu.extendSubschemaMode=Mu.extendSubschemaData=Mu.getSubschema=void 0;var Ul=Yt(),rse=xn();function V5e(e,{keyword:t,schemaProp:n,schema:i,schemaPath:o,errSchemaPath:r,topSchemaRef:s}){if(t!==void 0&&i!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){let a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,Ul._)`${e.schemaPath}${(0,Ul.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,Ul._)`${e.schemaPath}${(0,Ul.getProperty)(t)}${(0,Ul.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,rse.escapeFragment)(n)}`}}if(i!==void 0){if(o===void 0||r===void 0||s===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:i,schemaPath:o,topSchemaRef:s,errSchemaPath:r}}throw new Error('either "keyword" or "schema" must be passed')}Mu.getSubschema=V5e;function H5e(e,t,{dataProp:n,dataPropType:i,data:o,dataTypes:r,propertyName:s}){if(o!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=t;if(n!==void 0){let{errorPath:c,dataPathArr:u,opts:h}=t,f=a.let("data",(0,Ul._)`${t.data}${(0,Ul.getProperty)(n)}`,!0);l(f),e.errorPath=(0,Ul.str)`${c}${(0,rse.getErrorPath)(n,i,h.jsPropertySyntax)}`,e.parentDataProperty=(0,Ul._)`${n}`,e.dataPathArr=[...u,e.parentDataProperty]}if(o!==void 0){let c=o instanceof Ul.Name?o:a.let("data",o,!0);l(c),s!==void 0&&(e.propertyName=s)}r&&(e.dataTypes=r);function l(c){e.data=c,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,c]}}Mu.extendSubschemaData=H5e;function $5e(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:i,createErrors:o,allErrors:r}){i!==void 0&&(e.compositeRule=i),o!==void 0&&(e.createErrors=o),r!==void 0&&(e.allErrors=r),e.jtdDiscriminator=t,e.jtdMetadata=n}Mu.extendSubschemaMode=$5e});var AH=He((DIt,ase)=>{"use strict";ase.exports=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var i,o,r;if(Array.isArray(t)){if(i=t.length,i!=n.length)return!1;for(o=i;o--!==0;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(r=Object.keys(t),i=r.length,i!==Object.keys(n).length)return!1;for(o=i;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,r[o]))return!1;for(o=i;o--!==0;){var s=r[o];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n}});var cse=He((kIt,lse)=>{"use strict";var Ru=lse.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var i=typeof n=="function"?n:n.pre||function(){},o=n.post||function(){};LM(t,i,o,e,"",e)};Ru.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Ru.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Ru.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Ru.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function LM(e,t,n,i,o,r,s,a,l,c){if(i&&typeof i=="object"&&!Array.isArray(i)){t(i,o,r,s,a,l,c);for(var u in i){var h=i[u];if(Array.isArray(h)){if(u in Ru.arrayKeywords)for(var f=0;f<h.length;f++)LM(e,t,n,h[f],o+"/"+u+"/"+f,r,o,u,i,f)}else if(u in Ru.propsKeywords){if(h&&typeof h=="object")for(var m in h)LM(e,t,n,h[m],o+"/"+u+"/"+j5e(m),r,o,u,i,m)}else(u in Ru.keywords||e.allKeys&&!(u in Ru.skipKeywords))&&LM(e,t,n,h,o+"/"+u,r,o,u,i)}n(i,o,r,s,a,l,c)}}function j5e(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}});var l0=He(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.getSchemaRefs=Jr.resolveUrl=Jr.normalizeId=Jr._getFullPath=Jr.getFullPath=Jr.inlineRef=void 0;var G5e=xn(),U5e=AH(),W5e=cse(),q5e=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function K5e(e,t=!0){return typeof e=="boolean"?!0:t===!0?!OH(e):t?dse(e)<=t:!1}Jr.inlineRef=K5e;var Z5e=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function OH(e){for(let t in e){if(Z5e.has(t))return!0;let n=e[t];if(Array.isArray(n)&&n.some(OH)||typeof n=="object"&&OH(n))return!0}return!1}function dse(e){let t=0;for(let n in e){if(n==="$ref")return 1/0;if(t++,!q5e.has(n)&&(typeof e[n]=="object"&&(0,G5e.eachItem)(e[n],i=>t+=dse(i)),t===1/0))return 1/0}return t}function use(e,t="",n){n!==!1&&(t=vv(t));let i=e.parse(t);return hse(e,i)}Jr.getFullPath=use;function hse(e,t){return e.serialize(t).split("#")[0]+"#"}Jr._getFullPath=hse;var Y5e=/#\/?$/;function vv(e){return e?e.replace(Y5e,""):""}Jr.normalizeId=vv;function Q5e(e,t,n){return n=vv(n),e.resolve(t,n)}Jr.resolveUrl=Q5e;var J5e=/^[a-z_][-a-z0-9._]*$/i;function X5e(e,t){if(typeof e=="boolean")return{};let{schemaId:n,uriResolver:i}=this.opts,o=vv(e[n]||t),r={"":o},s=use(i,o,!1),a={},l=new Set;return W5e(e,{allKeys:!0},(h,f,m,_)=>{if(_===void 0)return;let y=s+f,w=r[_];typeof h[n]=="string"&&(w=C.call(this,h[n])),S.call(this,h.$anchor),S.call(this,h.$dynamicAnchor),r[f]=w;function C(I){let O=this.opts.uriResolver.resolve;if(I=vv(w?O(w,I):I),l.has(I))throw u(I);l.add(I);let F=this.refs[I];return typeof F=="string"&&(F=this.refs[F]),typeof F=="object"?c(h,F.schema,I):I!==vv(y)&&(I[0]==="#"?(c(h,a[I],I),a[I]=h):this.refs[I]=y),I}function S(I){if(typeof I=="string"){if(!J5e.test(I))throw new Error(`invalid anchor "${I}"`);C.call(this,`#${I}`)}}}),a;function c(h,f,m){if(f!==void 0&&!U5e(h,f))throw u(m)}function u(h){return new Error(`reference "${h}" resolves to more than one schema`)}}Jr.getSchemaRefs=X5e});var u0=He(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.getData=Tu.KeywordCxt=Tu.validateFunctionCode=void 0;var vse=Wre(),pse=a0(),LH=DH(),NM=a0(),e8e=Xre(),d0=ose(),FH=sse(),it=Yt(),Ft=rd(),t8e=l0(),sd=xn(),c0=s0();function n8e(e){if(bse(e)&&(Cse(e),yse(e))){r8e(e);return}_se(e,()=>(0,vse.topBoolOrEmptySchema)(e))}Tu.validateFunctionCode=n8e;function _se({gen:e,validateName:t,schema:n,schemaEnv:i,opts:o},r){o.code.es5?e.func(t,(0,it._)`${Ft.default.data}, ${Ft.default.valCxt}`,i.$async,()=>{e.code((0,it._)`"use strict"; ${fse(n,o)}`),o8e(e,o),e.code(r)}):e.func(t,(0,it._)`${Ft.default.data}, ${i8e(o)}`,i.$async,()=>e.code(fse(n,o)).code(r))}function i8e(e){return(0,it._)`{${Ft.default.instancePath}="", ${Ft.default.parentData}, ${Ft.default.parentDataProperty}, ${Ft.default.rootData}=${Ft.default.data}${e.dynamicRef?(0,it._)`, ${Ft.default.dynamicAnchors}={}`:it.nil}}={}`}function o8e(e,t){e.if(Ft.default.valCxt,()=>{e.var(Ft.default.instancePath,(0,it._)`${Ft.default.valCxt}.${Ft.default.instancePath}`),e.var(Ft.default.parentData,(0,it._)`${Ft.default.valCxt}.${Ft.default.parentData}`),e.var(Ft.default.parentDataProperty,(0,it._)`${Ft.default.valCxt}.${Ft.default.parentDataProperty}`),e.var(Ft.default.rootData,(0,it._)`${Ft.default.valCxt}.${Ft.default.rootData}`),t.dynamicRef&&e.var(Ft.default.dynamicAnchors,(0,it._)`${Ft.default.valCxt}.${Ft.default.dynamicAnchors}`)},()=>{e.var(Ft.default.instancePath,(0,it._)`""`),e.var(Ft.default.parentData,(0,it._)`undefined`),e.var(Ft.default.parentDataProperty,(0,it._)`undefined`),e.var(Ft.default.rootData,Ft.default.data),t.dynamicRef&&e.var(Ft.default.dynamicAnchors,(0,it._)`{}`)})}function r8e(e){let{schema:t,opts:n,gen:i}=e;_se(e,()=>{n.$comment&&t.$comment&&xse(e),d8e(e),i.let(Ft.default.vErrors,null),i.let(Ft.default.errors,0),n.unevaluated&&s8e(e),wse(e),p8e(e)})}function s8e(e){let{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,it._)`${n}.evaluated`),t.if((0,it._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,it._)`${e.evaluated}.props`,(0,it._)`undefined`)),t.if((0,it._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,it._)`${e.evaluated}.items`,(0,it._)`undefined`))}function fse(e,t){let n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,it._)`/*# sourceURL=${n} */`:it.nil}function a8e(e,t){if(bse(e)&&(Cse(e),yse(e))){l8e(e,t);return}(0,vse.boolOrEmptySchema)(e,t)}function yse({schema:e,self:t}){if(typeof e=="boolean")return!e;for(let n in e)if(t.RULES.all[n])return!0;return!1}function bse(e){return typeof e.schema!="boolean"}function l8e(e,t){let{schema:n,gen:i,opts:o}=e;o.$comment&&n.$comment&&xse(e),u8e(e),h8e(e);let r=i.const("_errs",Ft.default.errors);wse(e,r),i.var(t,(0,it._)`${r} === ${Ft.default.errors}`)}function Cse(e){(0,sd.checkUnknownRules)(e),c8e(e)}function wse(e,t){if(e.opts.jtd)return mse(e,[],!1,t);let n=(0,pse.getSchemaTypes)(e.schema),i=(0,pse.coerceAndCheckDataType)(e,n);mse(e,n,!i,t)}function c8e(e){let{schema:t,errSchemaPath:n,opts:i,self:o}=e;t.$ref&&i.ignoreKeywordsWithRef&&(0,sd.schemaHasRulesButRef)(t,o.RULES)&&o.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function d8e(e){let{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,sd.checkStrictMode)(e,"default is ignored in the schema root")}function u8e(e){let t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,t8e.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function h8e(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function xse({gen:e,schemaEnv:t,schema:n,errSchemaPath:i,opts:o}){let r=n.$comment;if(o.$comment===!0)e.code((0,it._)`${Ft.default.self}.logger.log(${r})`);else if(typeof o.$comment=="function"){let s=(0,it.str)`${i}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,it._)`${Ft.default.self}.opts.$comment(${r}, ${s}, ${a}.schema)`)}}function p8e(e){let{gen:t,schemaEnv:n,validateName:i,ValidationError:o,opts:r}=e;n.$async?t.if((0,it._)`${Ft.default.errors} === 0`,()=>t.return(Ft.default.data),()=>t.throw((0,it._)`new ${o}(${Ft.default.vErrors})`)):(t.assign((0,it._)`${i}.errors`,Ft.default.vErrors),r.unevaluated&&f8e(e),t.return((0,it._)`${Ft.default.errors} === 0`))}function f8e({gen:e,evaluated:t,props:n,items:i}){n instanceof it.Name&&e.assign((0,it._)`${t}.props`,n),i instanceof it.Name&&e.assign((0,it._)`${t}.items`,i)}function mse(e,t,n,i){let{gen:o,schema:r,data:s,allErrors:a,opts:l,self:c}=e,{RULES:u}=c;if(r.$ref&&(l.ignoreKeywordsWithRef||!(0,sd.schemaHasRulesButRef)(r,u))){o.block(()=>Ese(e,"$ref",u.all.$ref.definition));return}l.jtd||m8e(e,t),o.block(()=>{for(let f of u.rules)h(f);h(u.post)});function h(f){(0,LH.shouldUseGroup)(r,f)&&(f.type?(o.if((0,NM.checkDataType)(f.type,s,l.strictNumbers)),gse(e,f),t.length===1&&t[0]===f.type&&n&&(o.else(),(0,NM.reportTypeError)(e)),o.endIf()):gse(e,f),a||o.if((0,it._)`${Ft.default.errors} === ${i||0}`))}}function gse(e,t){let{gen:n,schema:i,opts:{useDefaults:o}}=e;o&&(0,e8e.assignDefaults)(e,t.type),n.block(()=>{for(let r of t.rules)(0,LH.shouldUseRule)(i,r)&&Ese(e,r.keyword,r.definition,t.type)})}function m8e(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(g8e(e,t),e.opts.allowUnionTypes||v8e(e,t),_8e(e,e.dataTypes))}function g8e(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{Sse(e.dataTypes,n)||NH(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),b8e(e,t)}}function v8e(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&NH(e,"use allowUnionTypes to allow union type keyword")}function _8e(e,t){let n=e.self.RULES.all;for(let i in n){let o=n[i];if(typeof o=="object"&&(0,LH.shouldUseRule)(e.schema,o)){let{type:r}=o.definition;r.length&&!r.some(s=>y8e(t,s))&&NH(e,`missing type "${r.join(",")}" for keyword "${i}"`)}}}function y8e(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function Sse(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function b8e(e,t){let n=[];for(let i of e.dataTypes)Sse(t,i)?n.push(i):t.includes("integer")&&i==="number"&&n.push("integer");e.dataTypes=n}function NH(e,t){let n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,sd.checkStrictMode)(e,t,e.opts.strictTypes)}var BM=class{constructor(t,n,i){if((0,d0.validateKeywordUsage)(t,n,i),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=i,this.data=t.data,this.schema=t.schema[i],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,sd.schemaRefOrVal)(t,this.schema,i,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",Dse(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,d0.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${i} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",Ft.default.errors))}result(t,n,i){this.failResult((0,it.not)(t),n,i)}failResult(t,n,i){this.gen.if(t),i?i():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,it.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);let{schemaCode:n}=this;this.fail((0,it._)`${n} !== undefined && (${(0,it.or)(this.invalid$data(),t)})`)}error(t,n,i){if(n){this.setParams(n),this._error(t,i),this.setParams({});return}this._error(t,i)}_error(t,n){(t?c0.reportExtraError:c0.reportError)(this,this.def.error,n)}$dataError(){(0,c0.reportError)(this,this.def.$dataError||c0.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,c0.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,i=it.nil){this.gen.block(()=>{this.check$data(t,i),n()})}check$data(t=it.nil,n=it.nil){if(!this.$data)return;let{gen:i,schemaCode:o,schemaType:r,def:s}=this;i.if((0,it.or)((0,it._)`${o} === undefined`,n)),t!==it.nil&&i.assign(t,!0),(r.length||s.validateSchema)&&(i.elseIf(this.invalid$data()),this.$dataError(),t!==it.nil&&i.assign(t,!1)),i.else()}invalid$data(){let{gen:t,schemaCode:n,schemaType:i,def:o,it:r}=this;return(0,it.or)(s(),a());function s(){if(i.length){if(!(n instanceof it.Name))throw new Error("ajv implementation error");let l=Array.isArray(i)?i:[i];return(0,it._)`${(0,NM.checkDataTypes)(l,n,r.opts.strictNumbers,NM.DataType.Wrong)}`}return it.nil}function a(){if(o.validateSchema){let l=t.scopeValue("validate$data",{ref:o.validateSchema});return(0,it._)`!${l}(${n})`}return it.nil}}subschema(t,n){let i=(0,FH.getSubschema)(this.it,t);(0,FH.extendSubschemaData)(i,this.it,t),(0,FH.extendSubschemaMode)(i,t);let o=x(g(g({},this.it),i),{items:void 0,props:void 0});return a8e(o,n),o}mergeEvaluated(t,n){let{it:i,gen:o}=this;i.opts.unevaluated&&(i.props!==!0&&t.props!==void 0&&(i.props=sd.mergeEvaluated.props(o,t.props,i.props,n)),i.items!==!0&&t.items!==void 0&&(i.items=sd.mergeEvaluated.items(o,t.items,i.items,n)))}mergeValidEvaluated(t,n){let{it:i,gen:o}=this;if(i.opts.unevaluated&&(i.props!==!0||i.items!==!0))return o.if(n,()=>this.mergeEvaluated(t,it.Name)),!0}};Tu.KeywordCxt=BM;function Ese(e,t,n,i){let o=new BM(e,n,t);"code"in n?n.code(o,i):o.$data&&n.validate?(0,d0.funcKeywordCode)(o,n):"macro"in n?(0,d0.macroKeywordCode)(o,n):(n.compile||n.validate)&&(0,d0.funcKeywordCode)(o,n)}var C8e=/^\/(?:[^~]|~0|~1)*$/,w8e=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Dse(e,{dataLevel:t,dataNames:n,dataPathArr:i}){let o,r;if(e==="")return Ft.default.rootData;if(e[0]==="/"){if(!C8e.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);o=e,r=Ft.default.rootData}else{let c=w8e.exec(e);if(!c)throw new Error(`Invalid JSON-pointer: ${e}`);let u=+c[1];if(o=c[2],o==="#"){if(u>=t)throw new Error(l("property/index",u));return i[t-u]}if(u>t)throw new Error(l("data",u));if(r=n[t-u],!o)return r}let s=r,a=o.split("/");for(let c of a)c&&(r=(0,it._)`${r}${(0,it.getProperty)((0,sd.unescapeJsonPointer)(c))}`,s=(0,it._)`${s} && ${r}`);return s;function l(c,u){return`Cannot access ${c} ${u} levels up, current level is ${t}`}}Tu.getData=Dse});var zM=He(zH=>{"use strict";Object.defineProperty(zH,"__esModule",{value:!0});var BH=class extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}};zH.default=BH});var h0=He($H=>{"use strict";Object.defineProperty($H,"__esModule",{value:!0});var VH=l0(),HH=class extends Error{constructor(t,n,i,o){super(o||`can't resolve reference ${i} from id ${n}`),this.missingRef=(0,VH.resolveUrl)(t,n,i),this.missingSchema=(0,VH.normalizeId)((0,VH.getFullPath)(t,this.missingRef))}};$H.default=HH});var HM=He(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.resolveSchema=sa.getCompilingSchema=sa.resolveRef=sa.compileSchema=sa.SchemaEnv=void 0;var $a=Yt(),x8e=zM(),Np=rd(),ja=l0(),kse=xn(),S8e=u0(),_v=class{constructor(t){var n;this.refs={},this.dynamicAnchors={};let i;typeof t.schema=="object"&&(i=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,ja.normalizeId)(i?.[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=i?.$async,this.refs={}}};sa.SchemaEnv=_v;function GH(e){let t=Ise.call(this,e);if(t)return t;let n=(0,ja.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:i,lines:o}=this.opts.code,{ownProperties:r}=this.opts,s=new $a.CodeGen(this.scope,{es5:i,lines:o,ownProperties:r}),a;e.$async&&(a=s.scopeValue("Error",{ref:x8e.default,code:(0,$a._)`require("ajv/dist/runtime/validation_error").default`}));let l=s.scopeName("validate");e.validateName=l;let c={gen:s,allErrors:this.opts.allErrors,data:Np.default.data,parentData:Np.default.parentData,parentDataProperty:Np.default.parentDataProperty,dataNames:[Np.default.data],dataPathArr:[$a.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:s.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,$a.stringify)(e.schema)}:{ref:e.schema}),validateName:l,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:$a.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,$a._)`""`,opts:this.opts,self:this},u;try{this._compilations.add(e),(0,S8e.validateFunctionCode)(c),s.optimize(this.opts.code.optimize);let h=s.toString();u=`${s.scopeRefs(Np.default.scope)}return ${h}`,this.opts.code.process&&(u=this.opts.code.process(u,e));let m=new Function(`${Np.default.self}`,`${Np.default.scope}`,u)(this,this.scope.get());if(this.scope.value(l,{ref:m}),m.errors=null,m.schema=e.schema,m.schemaEnv=e,e.$async&&(m.$async=!0),this.opts.code.source===!0&&(m.source={validateName:l,validateCode:h,scopeValues:s._values}),this.opts.unevaluated){let{props:_,items:y}=c;m.evaluated={props:_ instanceof $a.Name?void 0:_,items:y instanceof $a.Name?void 0:y,dynamicProps:_ instanceof $a.Name,dynamicItems:y instanceof $a.Name},m.source&&(m.source.evaluated=(0,$a.stringify)(m.evaluated))}return e.validate=m,e}catch(h){throw delete e.validate,delete e.validateName,u&&this.logger.error("Error compiling schema, function code:",u),h}finally{this._compilations.delete(e)}}sa.compileSchema=GH;function E8e(e,t,n){var i;n=(0,ja.resolveUrl)(this.opts.uriResolver,t,n);let o=e.refs[n];if(o)return o;let r=I8e.call(this,e,n);if(r===void 0){let s=(i=e.localRefs)===null||i===void 0?void 0:i[n],{schemaId:a}=this.opts;s&&(r=new _v({schema:s,schemaId:a,root:e,baseId:t}))}if(r!==void 0)return e.refs[n]=D8e.call(this,r)}sa.resolveRef=E8e;function D8e(e){return(0,ja.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:GH.call(this,e)}function Ise(e){for(let t of this._compilations)if(k8e(t,e))return t}sa.getCompilingSchema=Ise;function k8e(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function I8e(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||VM.call(this,e,t)}function VM(e,t){let n=this.opts.uriResolver.parse(t),i=(0,ja._getFullPath)(this.opts.uriResolver,n),o=(0,ja.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&i===o)return jH.call(this,n,e);let r=(0,ja.normalizeId)(i),s=this.refs[r]||this.schemas[r];if(typeof s=="string"){let a=VM.call(this,e,s);return typeof a?.schema!="object"?void 0:jH.call(this,n,a)}if(typeof s?.schema=="object"){if(s.validate||GH.call(this,s),r===(0,ja.normalizeId)(t)){let{schema:a}=s,{schemaId:l}=this.opts,c=a[l];return c&&(o=(0,ja.resolveUrl)(this.opts.uriResolver,o,c)),new _v({schema:a,schemaId:l,root:e,baseId:o})}return jH.call(this,n,s)}}sa.resolveSchema=VM;var M8e=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function jH(e,{baseId:t,schema:n,root:i}){var o;if(((o=e.fragment)===null||o===void 0?void 0:o[0])!=="/")return;for(let a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;let l=n[(0,kse.unescapeFragment)(a)];if(l===void 0)return;n=l;let c=typeof n=="object"&&n[this.opts.schemaId];!M8e.has(a)&&c&&(t=(0,ja.resolveUrl)(this.opts.uriResolver,t,c))}let r;if(typeof n!="boolean"&&n.$ref&&!(0,kse.schemaHasRulesButRef)(n,this.RULES)){let a=(0,ja.resolveUrl)(this.opts.uriResolver,t,n.$ref);r=VM.call(this,i,a)}let{schemaId:s}=this.opts;if(r=r||new _v({schema:n,schemaId:s,root:i,baseId:t}),r.schema!==r.root.schema)return r}});var Mse=He((OIt,R8e)=>{R8e.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var WH=He((FIt,Ase)=>{"use strict";var T8e=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),Tse=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function UH(e){let t="",n=0,i=0;for(i=0;i<e.length;i++)if(n=e[i].charCodeAt(0),n!==48){if(!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";t+=e[i];break}for(i+=1;i<e.length;i++){if(n=e[i].charCodeAt(0),!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";t+=e[i]}return t}var P8e=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function Rse(e){return e.length=0,!0}function A8e(e,t,n){if(e.length){let i=UH(e);if(i!=="")t.push(i);else return n.error=!0,!1;e.length=0}return!0}function O8e(e){let t=0,n={error:!1,address:"",zone:""},i=[],o=[],r=!1,s=!1,a=A8e;for(let l=0;l<e.length;l++){let c=e[l];if(!(c==="["||c==="]"))if(c===":"){if(r===!0&&(s=!0),!a(o,i,n))break;if(++t>7){n.error=!0;break}l>0&&e[l-1]===":"&&(r=!0),i.push(":");continue}else if(c==="%"){if(!a(o,i,n))break;a=Rse}else{o.push(c);continue}}return o.length&&(a===Rse?n.zone=o.join(""):s?i.push(o.join("")):i.push(UH(o))),n.address=i.join(""),n}function Pse(e){if(F8e(e,":")<2)return{host:e,isIPV6:!1};let t=O8e(e);if(t.error)return{host:e,isIPV6:!1};{let n=t.address,i=t.address;return t.zone&&(n+="%"+t.zone,i+="%25"+t.zone),{host:n,isIPV6:!0,escapedHost:i}}}function F8e(e,t){let n=0;for(let i=0;i<e.length;i++)e[i]===t&&n++;return n}function L8e(e){let t=e,n=[],i=-1,o=0;for(;o=t.length;){if(o===1){if(t===".")break;if(t==="/"){n.push("/");break}else{n.push(t);break}}else if(o===2){if(t[0]==="."){if(t[1]===".")break;if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&(t[1]==="."||t[1]==="/")){n.push("/");break}}else if(o===3&&t==="/.."){n.length!==0&&n.pop(),n.push("/");break}if(t[0]==="."){if(t[1]==="."){if(t[2]==="/"){t=t.slice(3);continue}}else if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&t[1]==="."){if(t[2]==="/"){t=t.slice(2);continue}else if(t[2]==="."&&t[3]==="/"){t=t.slice(3),n.length!==0&&n.pop();continue}}if((i=t.indexOf("/",1))===-1){n.push(t);break}else n.push(t.slice(0,i)),t=t.slice(i)}return n.join("")}function N8e(e,t){let n=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=n(e.scheme)),e.userinfo!==void 0&&(e.userinfo=n(e.userinfo)),e.host!==void 0&&(e.host=n(e.host)),e.path!==void 0&&(e.path=n(e.path)),e.query!==void 0&&(e.query=n(e.query)),e.fragment!==void 0&&(e.fragment=n(e.fragment)),e}function B8e(e){let t=[];if(e.userinfo!==void 0&&(t.push(e.userinfo),t.push("@")),e.host!==void 0){let n=unescape(e.host);if(!Tse(n)){let i=Pse(n);i.isIPV6===!0?n=`[${i.escapedHost}]`:n=e.host}t.push(n)}return(typeof e.port=="number"||typeof e.port=="string")&&(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0}Ase.exports={nonSimpleDomain:P8e,recomposeAuthority:B8e,normalizeComponentEncoding:N8e,removeDotSegments:L8e,isIPv4:Tse,isUUID:T8e,normalizeIPv6:Pse,stringArrayToHexStripped:UH}});var Bse=He((LIt,Nse)=>{"use strict";var{isUUID:z8e}=WH(),V8e=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,H8e=["http","https","ws","wss","urn","urn:uuid"];function $8e(e){return H8e.indexOf(e)!==-1}function qH(e){return e.secure===!0?!0:e.secure===!1?!1:e.scheme?e.scheme.length===3&&(e.scheme[0]==="w"||e.scheme[0]==="W")&&(e.scheme[1]==="s"||e.scheme[1]==="S")&&(e.scheme[2]==="s"||e.scheme[2]==="S"):!1}function Ose(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function Fse(e){let t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function j8e(e){return e.secure=qH(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function G8e(e){if((e.port===(qH(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){let[t,n]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=n,e.resourceName=void 0}return e.fragment=void 0,e}function U8e(e,t){if(!e.path)return e.error="URN can not be parsed",e;let n=e.path.match(V8e);if(n){let i=t.scheme||e.scheme||"urn";e.nid=n[1].toLowerCase(),e.nss=n[2];let o=`${i}:${t.nid||e.nid}`,r=KH(o);e.path=void 0,r&&(e=r.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function W8e(e,t){if(e.nid===void 0)throw new Error("URN without nid cannot be serialized");let n=t.scheme||e.scheme||"urn",i=e.nid.toLowerCase(),o=`${n}:${t.nid||i}`,r=KH(o);r&&(e=r.serialize(e,t));let s=e,a=e.nss;return s.path=`${i||t.nid}:${a}`,t.skipEscape=!0,s}function q8e(e,t){let n=e;return n.uuid=n.nss,n.nss=void 0,!t.tolerant&&(!n.uuid||!z8e(n.uuid))&&(n.error=n.error||"UUID is not valid."),n}function K8e(e){let t=e;return t.nss=(e.uuid||"").toLowerCase(),t}var Lse={scheme:"http",domainHost:!0,parse:Ose,serialize:Fse},Z8e={scheme:"https",domainHost:Lse.domainHost,parse:Ose,serialize:Fse},$M={scheme:"ws",domainHost:!0,parse:j8e,serialize:G8e},Y8e={scheme:"wss",domainHost:$M.domainHost,parse:$M.parse,serialize:$M.serialize},Q8e={scheme:"urn",parse:U8e,serialize:W8e,skipNormalize:!0},J8e={scheme:"urn:uuid",parse:q8e,serialize:K8e,skipNormalize:!0},jM={http:Lse,https:Z8e,ws:$M,wss:Y8e,urn:Q8e,"urn:uuid":J8e};Object.setPrototypeOf(jM,null);function KH(e){return e&&(jM[e]||jM[e.toLowerCase()])||void 0}Nse.exports={wsIsSecure:qH,SCHEMES:jM,isValidSchemeName:$8e,getSchemeHandler:KH}});var Hse=He((NIt,UM)=>{"use strict";var{normalizeIPv6:X8e,removeDotSegments:p0,recomposeAuthority:e$e,normalizeComponentEncoding:GM,isIPv4:t$e,nonSimpleDomain:n$e}=WH(),{SCHEMES:i$e,getSchemeHandler:zse}=Bse();function o$e(e,t){return typeof e=="string"?e=Wl(ad(e,t),t):typeof e=="object"&&(e=ad(Wl(e,t),t)),e}function r$e(e,t,n){let i=n?Object.assign({scheme:"null"},n):{scheme:"null"},o=Vse(ad(e,i),ad(t,i),i,!0);return i.skipEscape=!0,Wl(o,i)}function Vse(e,t,n,i){let o={};return i||(e=ad(Wl(e,n),n),t=ad(Wl(t,n),n)),n=n||{},!n.tolerant&&t.scheme?(o.scheme=t.scheme,o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=p0(t.path||""),o.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=p0(t.path||""),o.query=t.query):(t.path?(t.path[0]==="/"?o.path=p0(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?o.path="/"+t.path:e.path?o.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:o.path=t.path,o.path=p0(o.path)),o.query=t.query):(o.path=e.path,t.query!==void 0?o.query=t.query:o.query=e.query),o.userinfo=e.userinfo,o.host=e.host,o.port=e.port),o.scheme=e.scheme),o.fragment=t.fragment,o}function s$e(e,t,n){return typeof e=="string"?(e=unescape(e),e=Wl(GM(ad(e,n),!0),x(g({},n),{skipEscape:!0}))):typeof e=="object"&&(e=Wl(GM(e,!0),x(g({},n),{skipEscape:!0}))),typeof t=="string"?(t=unescape(t),t=Wl(GM(ad(t,n),!0),x(g({},n),{skipEscape:!0}))):typeof t=="object"&&(t=Wl(GM(t,!0),x(g({},n),{skipEscape:!0}))),e.toLowerCase()===t.toLowerCase()}function Wl(e,t){let n={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},i=Object.assign({},t),o=[],r=zse(i.scheme||n.scheme);r&&r.serialize&&r.serialize(n,i),n.path!==void 0&&(i.skipEscape?n.path=unescape(n.path):(n.path=escape(n.path),n.scheme!==void 0&&(n.path=n.path.split("%3A").join(":")))),i.reference!=="suffix"&&n.scheme&&o.push(n.scheme,":");let s=e$e(n);if(s!==void 0&&(i.reference!=="suffix"&&o.push("//"),o.push(s),n.path&&n.path[0]!=="/"&&o.push("/")),n.path!==void 0){let a=n.path;!i.absolutePath&&(!r||!r.absolutePath)&&(a=p0(a)),s===void 0&&a[0]==="/"&&a[1]==="/"&&(a="/%2F"+a.slice(2)),o.push(a)}return n.query!==void 0&&o.push("?",n.query),n.fragment!==void 0&&o.push("#",n.fragment),o.join("")}var a$e=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function ad(e,t){let n=Object.assign({},t),i={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},o=!1;n.reference==="suffix"&&(n.scheme?e=n.scheme+":"+e:e="//"+e);let r=e.match(a$e);if(r){if(i.scheme=r[1],i.userinfo=r[3],i.host=r[4],i.port=parseInt(r[5],10),i.path=r[6]||"",i.query=r[7],i.fragment=r[8],isNaN(i.port)&&(i.port=r[5]),i.host)if(t$e(i.host)===!1){let l=X8e(i.host);i.host=l.host.toLowerCase(),o=l.isIPV6}else o=!0;i.scheme===void 0&&i.userinfo===void 0&&i.host===void 0&&i.port===void 0&&i.query===void 0&&!i.path?i.reference="same-document":i.scheme===void 0?i.reference="relative":i.fragment===void 0?i.reference="absolute":i.reference="uri",n.reference&&n.reference!=="suffix"&&n.reference!==i.reference&&(i.error=i.error||"URI is not a "+n.reference+" reference.");let s=zse(n.scheme||i.scheme);if(!n.unicodeSupport&&(!s||!s.unicodeSupport)&&i.host&&(n.domainHost||s&&s.domainHost)&&o===!1&&n$e(i.host))try{i.host=URL.domainToASCII(i.host.toLowerCase())}catch(a){i.error=i.error||"Host's domain name can not be converted to ASCII: "+a}(!s||s&&!s.skipNormalize)&&(e.indexOf("%")!==-1&&(i.scheme!==void 0&&(i.scheme=unescape(i.scheme)),i.host!==void 0&&(i.host=unescape(i.host))),i.path&&(i.path=escape(unescape(i.path))),i.fragment&&(i.fragment=encodeURI(decodeURIComponent(i.fragment)))),s&&s.parse&&s.parse(i,n)}else i.error=i.error||"URI can not be parsed.";return i}var ZH={SCHEMES:i$e,normalize:o$e,resolve:r$e,resolveComponent:Vse,equal:s$e,serialize:Wl,parse:ad};UM.exports=ZH;UM.exports.default=ZH;UM.exports.fastUri=ZH});var jse=He(YH=>{"use strict";Object.defineProperty(YH,"__esModule",{value:!0});var $se=Hse();$se.code='require("ajv/dist/runtime/uri").default';YH.default=$se});var Qse=He(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});qo.CodeGen=qo.Name=qo.nil=qo.stringify=qo.str=qo._=qo.KeywordCxt=void 0;var l$e=u0();Object.defineProperty(qo,"KeywordCxt",{enumerable:!0,get:function(){return l$e.KeywordCxt}});var yv=Yt();Object.defineProperty(qo,"_",{enumerable:!0,get:function(){return yv._}});Object.defineProperty(qo,"str",{enumerable:!0,get:function(){return yv.str}});Object.defineProperty(qo,"stringify",{enumerable:!0,get:function(){return yv.stringify}});Object.defineProperty(qo,"nil",{enumerable:!0,get:function(){return yv.nil}});Object.defineProperty(qo,"Name",{enumerable:!0,get:function(){return yv.Name}});Object.defineProperty(qo,"CodeGen",{enumerable:!0,get:function(){return yv.CodeGen}});var c$e=zM(),Kse=h0(),d$e=EH(),f0=HM(),u$e=Yt(),m0=l0(),WM=a0(),JH=xn(),Gse=Mse(),h$e=jse(),Zse=(e,t)=>new RegExp(e,t);Zse.code="new RegExp";var p$e=["removeAdditional","useDefaults","coerceTypes"],f$e=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),m$e={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},g$e={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},Use=200;function v$e(e){var t,n,i,o,r,s,a,l,c,u,h,f,m,_,y,w,C,S,I,O,F,H,j,re,ae;let se=e.strict,Te=(t=e.code)===null||t===void 0?void 0:t.optimize,ue=Te===!0||Te===void 0?1:Te||0,De=(i=(n=e.code)===null||n===void 0?void 0:n.regExp)!==null&&i!==void 0?i:Zse,Ne=(o=e.uriResolver)!==null&&o!==void 0?o:h$e.default;return{strictSchema:(s=(r=e.strictSchema)!==null&&r!==void 0?r:se)!==null&&s!==void 0?s:!0,strictNumbers:(l=(a=e.strictNumbers)!==null&&a!==void 0?a:se)!==null&&l!==void 0?l:!0,strictTypes:(u=(c=e.strictTypes)!==null&&c!==void 0?c:se)!==null&&u!==void 0?u:"log",strictTuples:(f=(h=e.strictTuples)!==null&&h!==void 0?h:se)!==null&&f!==void 0?f:"log",strictRequired:(_=(m=e.strictRequired)!==null&&m!==void 0?m:se)!==null&&_!==void 0?_:!1,code:e.code?x(g({},e.code),{optimize:ue,regExp:De}):{optimize:ue,regExp:De},loopRequired:(y=e.loopRequired)!==null&&y!==void 0?y:Use,loopEnum:(w=e.loopEnum)!==null&&w!==void 0?w:Use,meta:(C=e.meta)!==null&&C!==void 0?C:!0,messages:(S=e.messages)!==null&&S!==void 0?S:!0,inlineRefs:(I=e.inlineRefs)!==null&&I!==void 0?I:!0,schemaId:(O=e.schemaId)!==null&&O!==void 0?O:"$id",addUsedSchema:(F=e.addUsedSchema)!==null&&F!==void 0?F:!0,validateSchema:(H=e.validateSchema)!==null&&H!==void 0?H:!0,validateFormats:(j=e.validateFormats)!==null&&j!==void 0?j:!0,unicodeRegExp:(re=e.unicodeRegExp)!==null&&re!==void 0?re:!0,int32range:(ae=e.int32range)!==null&&ae!==void 0?ae:!0,uriResolver:Ne}}var g0=class{constructor(t={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,t=this.opts=g(g({},t),v$e(t));let{es5:n,lines:i}=this.opts.code;this.scope=new u$e.ValueScope({scope:{},prefixes:f$e,es5:n,lines:i}),this.logger=x$e(t.logger);let o=t.validateFormats;t.validateFormats=!1,this.RULES=(0,d$e.getRules)(),Wse.call(this,m$e,t,"NOT SUPPORTED"),Wse.call(this,g$e,t,"DEPRECATED","warn"),this._metaOpts=C$e.call(this),t.formats&&y$e.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&b$e.call(this,t.keywords),typeof t.meta=="object"&&this.addMetaSchema(t.meta),_$e.call(this),t.validateFormats=o}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:t,meta:n,schemaId:i}=this.opts,o=Gse;i==="id"&&(o=g({},Gse),o.id=o.$id,delete o.$id),n&&t&&this.addMetaSchema(o,o[i],!1)}defaultMeta(){let{meta:t,schemaId:n}=this.opts;return this.opts.defaultMeta=typeof t=="object"?t[n]||t:void 0}validate(t,n){let i;if(typeof t=="string"){if(i=this.getSchema(t),!i)throw new Error(`no schema with key or ref "${t}"`)}else i=this.compile(t);let o=i(n);return"$async"in i||(this.errors=i.errors),o}compile(t,n){let i=this._addSchema(t,n);return i.validate||this._compileSchemaEnv(i)}compileAsync(t,n){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:i}=this.opts;return o.call(this,t,n);function o(u,h){return E(this,null,function*(){yield r.call(this,u.$schema);let f=this._addSchema(u,h);return f.validate||s.call(this,f)})}function r(u){return E(this,null,function*(){u&&!this.getSchema(u)&&(yield o.call(this,{$ref:u},!0))})}function s(u){return E(this,null,function*(){try{return this._compileSchemaEnv(u)}catch(h){if(!(h instanceof Kse.default))throw h;return a.call(this,h),yield l.call(this,h.missingSchema),s.call(this,u)}})}function a({missingSchema:u,missingRef:h}){if(this.refs[u])throw new Error(`AnySchema ${u} is loaded but ${h} cannot be resolved`)}function l(u){return E(this,null,function*(){let h=yield c.call(this,u);this.refs[u]||(yield r.call(this,h.$schema)),this.refs[u]||this.addSchema(h,u,n)})}function c(u){return E(this,null,function*(){let h=this._loading[u];if(h)return h;try{return yield this._loading[u]=i(u)}finally{delete this._loading[u]}})}}addSchema(t,n,i,o=this.opts.validateSchema){if(Array.isArray(t)){for(let s of t)this.addSchema(s,void 0,i,o);return this}let r;if(typeof t=="object"){let{schemaId:s}=this.opts;if(r=t[s],r!==void 0&&typeof r!="string")throw new Error(`schema ${s} must be string`)}return n=(0,m0.normalizeId)(n||r),this._checkUnique(n),this.schemas[n]=this._addSchema(t,i,n,o,!0),this}addMetaSchema(t,n,i=this.opts.validateSchema){return this.addSchema(t,n,!0,i),this}validateSchema(t,n){if(typeof t=="boolean")return!0;let i;if(i=t.$schema,i!==void 0&&typeof i!="string")throw new Error("$schema must be a string");if(i=i||this.opts.defaultMeta||this.defaultMeta(),!i)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let o=this.validate(i,t);if(!o&&n){let r="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(r);else throw new Error(r)}return o}getSchema(t){let n;for(;typeof(n=qse.call(this,t))=="string";)t=n;if(n===void 0){let{schemaId:i}=this.opts,o=new f0.SchemaEnv({schema:{},schemaId:i});if(n=f0.resolveSchema.call(this,o,t),!n)return;this.refs[t]=n}return n.validate||this._compileSchemaEnv(n)}removeSchema(t){if(t instanceof RegExp)return this._removeAllSchemas(this.schemas,t),this._removeAllSchemas(this.refs,t),this;switch(typeof t){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let n=qse.call(this,t);return typeof n=="object"&&this._cache.delete(n.schema),delete this.schemas[t],delete this.refs[t],this}case"object":{let n=t;this._cache.delete(n);let i=t[this.opts.schemaId];return i&&(i=(0,m0.normalizeId)(i),delete this.schemas[i],delete this.refs[i]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(t){for(let n of t)this.addKeyword(n);return this}addKeyword(t,n){let i;if(typeof t=="string")i=t,typeof n=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),n.keyword=i);else if(typeof t=="object"&&n===void 0){if(n=t,i=n.keyword,Array.isArray(i)&&!i.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(E$e.call(this,i,n),!n)return(0,JH.eachItem)(i,r=>QH.call(this,r)),this;k$e.call(this,n);let o=x(g({},n),{type:(0,WM.getJSONTypes)(n.type),schemaType:(0,WM.getJSONTypes)(n.schemaType)});return(0,JH.eachItem)(i,o.type.length===0?r=>QH.call(this,r,o):r=>o.type.forEach(s=>QH.call(this,r,o,s))),this}getKeyword(t){let n=this.RULES.all[t];return typeof n=="object"?n.definition:!!n}removeKeyword(t){let{RULES:n}=this;delete n.keywords[t],delete n.all[t];for(let i of n.rules){let o=i.rules.findIndex(r=>r.keyword===t);o>=0&&i.rules.splice(o,1)}return this}addFormat(t,n){return typeof n=="string"&&(n=new RegExp(n)),this.formats[t]=n,this}errorsText(t=this.errors,{separator:n=", ",dataVar:i="data"}={}){return!t||t.length===0?"No errors":t.map(o=>`${i}${o.instancePath} ${o.message}`).reduce((o,r)=>o+n+r)}$dataMetaSchema(t,n){let i=this.RULES.all;t=JSON.parse(JSON.stringify(t));for(let o of n){let r=o.split("/").slice(1),s=t;for(let a of r)s=s[a];for(let a in i){let l=i[a];if(typeof l!="object")continue;let{$data:c}=l.definition,u=s[a];c&&u&&(s[a]=Yse(u))}}return t}_removeAllSchemas(t,n){for(let i in t){let o=t[i];(!n||n.test(i))&&(typeof o=="string"?delete t[i]:o&&!o.meta&&(this._cache.delete(o.schema),delete t[i]))}}_addSchema(t,n,i,o=this.opts.validateSchema,r=this.opts.addUsedSchema){let s,{schemaId:a}=this.opts;if(typeof t=="object")s=t[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof t!="boolean")throw new Error("schema must be object or boolean")}let l=this._cache.get(t);if(l!==void 0)return l;i=(0,m0.normalizeId)(s||i);let c=m0.getSchemaRefs.call(this,t,i);return l=new f0.SchemaEnv({schema:t,schemaId:a,meta:n,baseId:i,localRefs:c}),this._cache.set(l.schema,l),r&&!i.startsWith("#")&&(i&&this._checkUnique(i),this.refs[i]=l),o&&this.validateSchema(t,!0),l}_checkUnique(t){if(this.schemas[t]||this.refs[t])throw new Error(`schema with key or id "${t}" already exists`)}_compileSchemaEnv(t){if(t.meta?this._compileMetaSchema(t):f0.compileSchema.call(this,t),!t.validate)throw new Error("ajv implementation error");return t.validate}_compileMetaSchema(t){let n=this.opts;this.opts=this._metaOpts;try{f0.compileSchema.call(this,t)}finally{this.opts=n}}};g0.ValidationError=c$e.default;g0.MissingRefError=Kse.default;qo.default=g0;function Wse(e,t,n,i="error"){for(let o in e){let r=o;r in t&&this.logger[i](`${n}: option ${o}. ${e[r]}`)}}function qse(e){return e=(0,m0.normalizeId)(e),this.schemas[e]||this.refs[e]}function _$e(){let e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(let t in e)this.addSchema(e[t],t)}function y$e(){for(let e in this.opts.formats){let t=this.opts.formats[e];t&&this.addFormat(e,t)}}function b$e(e){if(Array.isArray(e)){this.addVocabulary(e);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let t in e){let n=e[t];n.keyword||(n.keyword=t),this.addKeyword(n)}}function C$e(){let e=g({},this.opts);for(let t of p$e)delete e[t];return e}var w$e={log(){},warn(){},error(){}};function x$e(e){if(e===!1)return w$e;if(e===void 0)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}var S$e=/^[a-z_$][a-z0-9_$:-]*$/i;function E$e(e,t){let{RULES:n}=this;if((0,JH.eachItem)(e,i=>{if(n.keywords[i])throw new Error(`Keyword ${i} is already defined`);if(!S$e.test(i))throw new Error(`Keyword ${i} has invalid name`)}),!!t&&t.$data&&!("code"in t||"validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function QH(e,t,n){var i;let o=t?.post;if(n&&o)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:r}=this,s=o?r.post:r.rules.find(({type:l})=>l===n);if(s||(s={type:n,rules:[]},r.rules.push(s)),r.keywords[e]=!0,!t)return;let a={keyword:e,definition:x(g({},t),{type:(0,WM.getJSONTypes)(t.type),schemaType:(0,WM.getJSONTypes)(t.schemaType)})};t.before?D$e.call(this,s,a,t.before):s.rules.push(a),r.all[e]=a,(i=t.implements)===null||i===void 0||i.forEach(l=>this.addKeyword(l))}function D$e(e,t,n){let i=e.rules.findIndex(o=>o.keyword===n);i>=0?e.rules.splice(i,0,t):(e.rules.push(t),this.logger.warn(`rule ${n} is not defined`))}function k$e(e){let{metaSchema:t}=e;t!==void 0&&(e.$data&&this.opts.$data&&(t=Yse(t)),e.validateSchema=this.compile(t,!0))}var I$e={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Yse(e){return{anyOf:[e,I$e]}}});var Jse=He(XH=>{"use strict";Object.defineProperty(XH,"__esModule",{value:!0});var M$e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};XH.default=M$e});var nae=He(Bp=>{"use strict";Object.defineProperty(Bp,"__esModule",{value:!0});Bp.callRef=Bp.getValidate=void 0;var R$e=h0(),Xse=ra(),Xr=Yt(),bv=rd(),eae=HM(),qM=xn(),T$e={keyword:"$ref",schemaType:"string",code(e){let{gen:t,schema:n,it:i}=e,{baseId:o,schemaEnv:r,validateName:s,opts:a,self:l}=i,{root:c}=r;if((n==="#"||n==="#/")&&o===c.baseId)return h();let u=eae.resolveRef.call(l,c,o,n);if(u===void 0)throw new R$e.default(i.opts.uriResolver,o,n);if(u instanceof eae.SchemaEnv)return f(u);return m(u);function h(){if(r===c)return KM(e,s,r,r.$async);let _=t.scopeValue("root",{ref:c});return KM(e,(0,Xr._)`${_}.validate`,c,c.$async)}function f(_){let y=tae(e,_);KM(e,y,_,_.$async)}function m(_){let y=t.scopeValue("schema",a.code.source===!0?{ref:_,code:(0,Xr.stringify)(_)}:{ref:_}),w=t.name("valid"),C=e.subschema({schema:_,dataTypes:[],schemaPath:Xr.nil,topSchemaRef:y,errSchemaPath:n},w);e.mergeEvaluated(C),e.ok(w)}}};function tae(e,t){let{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,Xr._)`${n.scopeValue("wrapper",{ref:t})}.validate`}Bp.getValidate=tae;function KM(e,t,n,i){let{gen:o,it:r}=e,{allErrors:s,schemaEnv:a,opts:l}=r,c=l.passContext?bv.default.this:Xr.nil;i?u():h();function u(){if(!a.$async)throw new Error("async schema referenced by sync schema");let _=o.let("valid");o.try(()=>{o.code((0,Xr._)`await ${(0,Xse.callValidateCode)(e,t,c)}`),m(t),s||o.assign(_,!0)},y=>{o.if((0,Xr._)`!(${y} instanceof ${r.ValidationError})`,()=>o.throw(y)),f(y),s||o.assign(_,!1)}),e.ok(_)}function h(){e.result((0,Xse.callValidateCode)(e,t,c),()=>m(t),()=>f(t))}function f(_){let y=(0,Xr._)`${_}.errors`;o.assign(bv.default.vErrors,(0,Xr._)`${bv.default.vErrors} === null ? ${y} : ${bv.default.vErrors}.concat(${y})`),o.assign(bv.default.errors,(0,Xr._)`${bv.default.vErrors}.length`)}function m(_){var y;if(!r.opts.unevaluated)return;let w=(y=n?.validate)===null||y===void 0?void 0:y.evaluated;if(r.props!==!0)if(w&&!w.dynamicProps)w.props!==void 0&&(r.props=qM.mergeEvaluated.props(o,w.props,r.props));else{let C=o.var("props",(0,Xr._)`${_}.evaluated.props`);r.props=qM.mergeEvaluated.props(o,C,r.props,Xr.Name)}if(r.items!==!0)if(w&&!w.dynamicItems)w.items!==void 0&&(r.items=qM.mergeEvaluated.items(o,w.items,r.items));else{let C=o.var("items",(0,Xr._)`${_}.evaluated.items`);r.items=qM.mergeEvaluated.items(o,C,r.items,Xr.Name)}}}Bp.callRef=KM;Bp.default=T$e});var iae=He(e5=>{"use strict";Object.defineProperty(e5,"__esModule",{value:!0});var P$e=Jse(),A$e=nae(),O$e=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",P$e.default,A$e.default];e5.default=O$e});var oae=He(t5=>{"use strict";Object.defineProperty(t5,"__esModule",{value:!0});var ZM=Yt(),Pu=ZM.operators,YM={maximum:{okStr:"<=",ok:Pu.LTE,fail:Pu.GT},minimum:{okStr:">=",ok:Pu.GTE,fail:Pu.LT},exclusiveMaximum:{okStr:"<",ok:Pu.LT,fail:Pu.GTE},exclusiveMinimum:{okStr:">",ok:Pu.GT,fail:Pu.LTE}},F$e={message:({keyword:e,schemaCode:t})=>(0,ZM.str)`must be ${YM[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,ZM._)`{comparison: ${YM[e].okStr}, limit: ${t}}`},L$e={keyword:Object.keys(YM),type:"number",schemaType:"number",$data:!0,error:F$e,code(e){let{keyword:t,data:n,schemaCode:i}=e;e.fail$data((0,ZM._)`${n} ${YM[t].fail} ${i} || isNaN(${n})`)}};t5.default=L$e});var rae=He(n5=>{"use strict";Object.defineProperty(n5,"__esModule",{value:!0});var v0=Yt(),N$e={message:({schemaCode:e})=>(0,v0.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,v0._)`{multipleOf: ${e}}`},B$e={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:N$e,code(e){let{gen:t,data:n,schemaCode:i,it:o}=e,r=o.opts.multipleOfPrecision,s=t.let("res"),a=r?(0,v0._)`Math.abs(Math.round(${s}) - ${s}) > 1e-${r}`:(0,v0._)`${s} !== parseInt(${s})`;e.fail$data((0,v0._)`(${i} === 0 || (${s} = ${n}/${i}, ${a}))`)}};n5.default=B$e});var aae=He(i5=>{"use strict";Object.defineProperty(i5,"__esModule",{value:!0});function sae(e){let t=e.length,n=0,i=0,o;for(;i<t;)n++,o=e.charCodeAt(i++),o>=55296&&o<=56319&&i<t&&(o=e.charCodeAt(i),(o&64512)===56320&&i++);return n}i5.default=sae;sae.code='require("ajv/dist/runtime/ucs2length").default'});var lae=He(o5=>{"use strict";Object.defineProperty(o5,"__esModule",{value:!0});var zp=Yt(),z$e=xn(),V$e=aae(),H$e={message({keyword:e,schemaCode:t}){let n=e==="maxLength"?"more":"fewer";return(0,zp.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,zp._)`{limit: ${e}}`},$$e={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:H$e,code(e){let{keyword:t,data:n,schemaCode:i,it:o}=e,r=t==="maxLength"?zp.operators.GT:zp.operators.LT,s=o.opts.unicode===!1?(0,zp._)`${n}.length`:(0,zp._)`${(0,z$e.useFunc)(e.gen,V$e.default)}(${n})`;e.fail$data((0,zp._)`${s} ${r} ${i}`)}};o5.default=$$e});var cae=He(r5=>{"use strict";Object.defineProperty(r5,"__esModule",{value:!0});var j$e=ra(),QM=Yt(),G$e={message:({schemaCode:e})=>(0,QM.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,QM._)`{pattern: ${e}}`},U$e={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:G$e,code(e){let{data:t,$data:n,schema:i,schemaCode:o,it:r}=e,s=r.opts.unicodeRegExp?"u":"",a=n?(0,QM._)`(new RegExp(${o}, ${s}))`:(0,j$e.usePattern)(e,i);e.fail$data((0,QM._)`!${a}.test(${t})`)}};r5.default=U$e});var dae=He(s5=>{"use strict";Object.defineProperty(s5,"__esModule",{value:!0});var _0=Yt(),W$e={message({keyword:e,schemaCode:t}){let n=e==="maxProperties"?"more":"fewer";return(0,_0.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,_0._)`{limit: ${e}}`},q$e={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:W$e,code(e){let{keyword:t,data:n,schemaCode:i}=e,o=t==="maxProperties"?_0.operators.GT:_0.operators.LT;e.fail$data((0,_0._)`Object.keys(${n}).length ${o} ${i}`)}};s5.default=q$e});var uae=He(a5=>{"use strict";Object.defineProperty(a5,"__esModule",{value:!0});var y0=ra(),b0=Yt(),K$e=xn(),Z$e={message:({params:{missingProperty:e}})=>(0,b0.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,b0._)`{missingProperty: ${e}}`},Y$e={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Z$e,code(e){let{gen:t,schema:n,schemaCode:i,data:o,$data:r,it:s}=e,{opts:a}=s;if(!r&&n.length===0)return;let l=n.length>=a.loopRequired;if(s.allErrors?c():u(),a.strictRequired){let m=e.parentSchema.properties,{definedProperties:_}=e.it;for(let y of n)if(m?.[y]===void 0&&!_.has(y)){let w=s.schemaEnv.baseId+s.errSchemaPath,C=`required property "${y}" is not defined at "${w}" (strictRequired)`;(0,K$e.checkStrictMode)(s,C,s.opts.strictRequired)}}function c(){if(l||r)e.block$data(b0.nil,h);else for(let m of n)(0,y0.checkReportMissingProp)(e,m)}function u(){let m=t.let("missing");if(l||r){let _=t.let("valid",!0);e.block$data(_,()=>f(m,_)),e.ok(_)}else t.if((0,y0.checkMissingProp)(e,n,m)),(0,y0.reportMissingProp)(e,m),t.else()}function h(){t.forOf("prop",i,m=>{e.setParams({missingProperty:m}),t.if((0,y0.noPropertyInData)(t,o,m,a.ownProperties),()=>e.error())})}function f(m,_){e.setParams({missingProperty:m}),t.forOf(m,i,()=>{t.assign(_,(0,y0.propertyInData)(t,o,m,a.ownProperties)),t.if((0,b0.not)(_),()=>{e.error(),t.break()})},b0.nil)}}};a5.default=Y$e});var hae=He(l5=>{"use strict";Object.defineProperty(l5,"__esModule",{value:!0});var C0=Yt(),Q$e={message({keyword:e,schemaCode:t}){let n=e==="maxItems"?"more":"fewer";return(0,C0.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,C0._)`{limit: ${e}}`},J$e={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Q$e,code(e){let{keyword:t,data:n,schemaCode:i}=e,o=t==="maxItems"?C0.operators.GT:C0.operators.LT;e.fail$data((0,C0._)`${n}.length ${o} ${i}`)}};l5.default=J$e});var JM=He(c5=>{"use strict";Object.defineProperty(c5,"__esModule",{value:!0});var pae=AH();pae.code='require("ajv/dist/runtime/equal").default';c5.default=pae});var fae=He(u5=>{"use strict";Object.defineProperty(u5,"__esModule",{value:!0});var d5=a0(),Ko=Yt(),X$e=xn(),eje=JM(),tje={message:({params:{i:e,j:t}})=>(0,Ko.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Ko._)`{i: ${e}, j: ${t}}`},nje={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:tje,code(e){let{gen:t,data:n,$data:i,schema:o,parentSchema:r,schemaCode:s,it:a}=e;if(!i&&!o)return;let l=t.let("valid"),c=r.items?(0,d5.getSchemaTypes)(r.items):[];e.block$data(l,u,(0,Ko._)`${s} === false`),e.ok(l);function u(){let _=t.let("i",(0,Ko._)`${n}.length`),y=t.let("j");e.setParams({i:_,j:y}),t.assign(l,!0),t.if((0,Ko._)`${_} > 1`,()=>(h()?f:m)(_,y))}function h(){return c.length>0&&!c.some(_=>_==="object"||_==="array")}function f(_,y){let w=t.name("item"),C=(0,d5.checkDataTypes)(c,w,a.opts.strictNumbers,d5.DataType.Wrong),S=t.const("indices",(0,Ko._)`{}`);t.for((0,Ko._)`;${_}--;`,()=>{t.let(w,(0,Ko._)`${n}[${_}]`),t.if(C,(0,Ko._)`continue`),c.length>1&&t.if((0,Ko._)`typeof ${w} == "string"`,(0,Ko._)`${w} += "_"`),t.if((0,Ko._)`typeof ${S}[${w}] == "number"`,()=>{t.assign(y,(0,Ko._)`${S}[${w}]`),e.error(),t.assign(l,!1).break()}).code((0,Ko._)`${S}[${w}] = ${_}`)})}function m(_,y){let w=(0,X$e.useFunc)(t,eje.default),C=t.name("outer");t.label(C).for((0,Ko._)`;${_}--;`,()=>t.for((0,Ko._)`${y} = ${_}; ${y}--;`,()=>t.if((0,Ko._)`${w}(${n}[${_}], ${n}[${y}])`,()=>{e.error(),t.assign(l,!1).break(C)})))}}};u5.default=nje});var mae=He(p5=>{"use strict";Object.defineProperty(p5,"__esModule",{value:!0});var h5=Yt(),ije=xn(),oje=JM(),rje={message:"must be equal to constant",params:({schemaCode:e})=>(0,h5._)`{allowedValue: ${e}}`},sje={keyword:"const",$data:!0,error:rje,code(e){let{gen:t,data:n,$data:i,schemaCode:o,schema:r}=e;i||r&&typeof r=="object"?e.fail$data((0,h5._)`!${(0,ije.useFunc)(t,oje.default)}(${n}, ${o})`):e.fail((0,h5._)`${r} !== ${n}`)}};p5.default=sje});var gae=He(f5=>{"use strict";Object.defineProperty(f5,"__esModule",{value:!0});var w0=Yt(),aje=xn(),lje=JM(),cje={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,w0._)`{allowedValues: ${e}}`},dje={keyword:"enum",schemaType:"array",$data:!0,error:cje,code(e){let{gen:t,data:n,$data:i,schema:o,schemaCode:r,it:s}=e;if(!i&&o.length===0)throw new Error("enum must have non-empty array");let a=o.length>=s.opts.loopEnum,l,c=()=>l??(l=(0,aje.useFunc)(t,lje.default)),u;if(a||i)u=t.let("valid"),e.block$data(u,h);else{if(!Array.isArray(o))throw new Error("ajv implementation error");let m=t.const("vSchema",r);u=(0,w0.or)(...o.map((_,y)=>f(m,y)))}e.pass(u);function h(){t.assign(u,!1),t.forOf("v",r,m=>t.if((0,w0._)`${c()}(${n}, ${m})`,()=>t.assign(u,!0).break()))}function f(m,_){let y=o[_];return typeof y=="object"&&y!==null?(0,w0._)`${c()}(${n}, ${m}[${_}])`:(0,w0._)`${n} === ${y}`}}};f5.default=dje});var vae=He(m5=>{"use strict";Object.defineProperty(m5,"__esModule",{value:!0});var uje=oae(),hje=rae(),pje=lae(),fje=cae(),mje=dae(),gje=uae(),vje=hae(),_je=fae(),yje=mae(),bje=gae(),Cje=[uje.default,hje.default,pje.default,fje.default,mje.default,gje.default,vje.default,_je.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},yje.default,bje.default];m5.default=Cje});var v5=He(x0=>{"use strict";Object.defineProperty(x0,"__esModule",{value:!0});x0.validateAdditionalItems=void 0;var Vp=Yt(),g5=xn(),wje={message:({params:{len:e}})=>(0,Vp.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Vp._)`{limit: ${e}}`},xje={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:wje,code(e){let{parentSchema:t,it:n}=e,{items:i}=t;if(!Array.isArray(i)){(0,g5.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}_ae(e,i)}};function _ae(e,t){let{gen:n,schema:i,data:o,keyword:r,it:s}=e;s.items=!0;let a=n.const("len",(0,Vp._)`${o}.length`);if(i===!1)e.setParams({len:t.length}),e.pass((0,Vp._)`${a} <= ${t.length}`);else if(typeof i=="object"&&!(0,g5.alwaysValidSchema)(s,i)){let c=n.var("valid",(0,Vp._)`${a} <= ${t.length}`);n.if((0,Vp.not)(c),()=>l(c)),e.ok(c)}function l(c){n.forRange("i",t.length,a,u=>{e.subschema({keyword:r,dataProp:u,dataPropType:g5.Type.Num},c),s.allErrors||n.if((0,Vp.not)(c),()=>n.break())})}}x0.validateAdditionalItems=_ae;x0.default=xje});var _5=He(S0=>{"use strict";Object.defineProperty(S0,"__esModule",{value:!0});S0.validateTuple=void 0;var yae=Yt(),XM=xn(),Sje=ra(),Eje={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){let{schema:t,it:n}=e;if(Array.isArray(t))return bae(e,"additionalItems",t);n.items=!0,!(0,XM.alwaysValidSchema)(n,t)&&e.ok((0,Sje.validateArray)(e))}};function bae(e,t,n=e.schema){let{gen:i,parentSchema:o,data:r,keyword:s,it:a}=e;u(o),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=XM.mergeEvaluated.items(i,n.length,a.items));let l=i.name("valid"),c=i.const("len",(0,yae._)`${r}.length`);n.forEach((h,f)=>{(0,XM.alwaysValidSchema)(a,h)||(i.if((0,yae._)`${c} > ${f}`,()=>e.subschema({keyword:s,schemaProp:f,dataProp:f},l)),e.ok(l))});function u(h){let{opts:f,errSchemaPath:m}=a,_=n.length,y=_===h.minItems&&(_===h.maxItems||h[t]===!1);if(f.strictTuples&&!y){let w=`"${s}" is ${_}-tuple, but minItems or maxItems/${t} are not specified or different at path "${m}"`;(0,XM.checkStrictMode)(a,w,f.strictTuples)}}}S0.validateTuple=bae;S0.default=Eje});var Cae=He(y5=>{"use strict";Object.defineProperty(y5,"__esModule",{value:!0});var Dje=_5(),kje={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Dje.validateTuple)(e,"items")};y5.default=kje});var xae=He(b5=>{"use strict";Object.defineProperty(b5,"__esModule",{value:!0});var wae=Yt(),Ije=xn(),Mje=ra(),Rje=v5(),Tje={message:({params:{len:e}})=>(0,wae.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,wae._)`{limit: ${e}}`},Pje={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Tje,code(e){let{schema:t,parentSchema:n,it:i}=e,{prefixItems:o}=n;i.items=!0,!(0,Ije.alwaysValidSchema)(i,t)&&(o?(0,Rje.validateAdditionalItems)(e,o):e.ok((0,Mje.validateArray)(e)))}};b5.default=Pje});var Sae=He(C5=>{"use strict";Object.defineProperty(C5,"__esModule",{value:!0});var aa=Yt(),eR=xn(),Aje={message:({params:{min:e,max:t}})=>t===void 0?(0,aa.str)`must contain at least ${e} valid item(s)`:(0,aa.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,aa._)`{minContains: ${e}}`:(0,aa._)`{minContains: ${e}, maxContains: ${t}}`},Oje={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Aje,code(e){let{gen:t,schema:n,parentSchema:i,data:o,it:r}=e,s,a,{minContains:l,maxContains:c}=i;r.opts.next?(s=l===void 0?1:l,a=c):s=1;let u=t.const("len",(0,aa._)`${o}.length`);if(e.setParams({min:s,max:a}),a===void 0&&s===0){(0,eR.checkStrictMode)(r,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&s>a){(0,eR.checkStrictMode)(r,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,eR.alwaysValidSchema)(r,n)){let y=(0,aa._)`${u} >= ${s}`;a!==void 0&&(y=(0,aa._)`${y} && ${u} <= ${a}`),e.pass(y);return}r.items=!0;let h=t.name("valid");a===void 0&&s===1?m(h,()=>t.if(h,()=>t.break())):s===0?(t.let(h,!0),a!==void 0&&t.if((0,aa._)`${o}.length > 0`,f)):(t.let(h,!1),f()),e.result(h,()=>e.reset());function f(){let y=t.name("_valid"),w=t.let("count",0);m(y,()=>t.if(y,()=>_(w)))}function m(y,w){t.forRange("i",0,u,C=>{e.subschema({keyword:"contains",dataProp:C,dataPropType:eR.Type.Num,compositeRule:!0},y),w()})}function _(y){t.code((0,aa._)`${y}++`),a===void 0?t.if((0,aa._)`${y} >= ${s}`,()=>t.assign(h,!0).break()):(t.if((0,aa._)`${y} > ${a}`,()=>t.assign(h,!1).break()),s===1?t.assign(h,!0):t.if((0,aa._)`${y} >= ${s}`,()=>t.assign(h,!0)))}}};C5.default=Oje});var kae=He(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});ql.validateSchemaDeps=ql.validatePropertyDeps=ql.error=void 0;var w5=Yt(),Fje=xn(),E0=ra();ql.error={message:({params:{property:e,depsCount:t,deps:n}})=>{let i=t===1?"property":"properties";return(0,w5.str)`must have ${i} ${n} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:n,missingProperty:i}})=>(0,w5._)`{property: ${e},
    missingProperty: ${i},
    depsCount: ${t},
    deps: ${n}}`};var Lje={keyword:"dependencies",type:"object",schemaType:"object",error:ql.error,code(e){let[t,n]=Nje(e);Eae(e,t),Dae(e,n)}};function Nje({schema:e}){let t={},n={};for(let i in e){if(i==="__proto__")continue;let o=Array.isArray(e[i])?t:n;o[i]=e[i]}return[t,n]}function Eae(e,t=e.schema){let{gen:n,data:i,it:o}=e;if(Object.keys(t).length===0)return;let r=n.let("missing");for(let s in t){let a=t[s];if(a.length===0)continue;let l=(0,E0.propertyInData)(n,i,s,o.opts.ownProperties);e.setParams({property:s,depsCount:a.length,deps:a.join(", ")}),o.allErrors?n.if(l,()=>{for(let c of a)(0,E0.checkReportMissingProp)(e,c)}):(n.if((0,w5._)`${l} && (${(0,E0.checkMissingProp)(e,a,r)})`),(0,E0.reportMissingProp)(e,r),n.else())}}ql.validatePropertyDeps=Eae;function Dae(e,t=e.schema){let{gen:n,data:i,keyword:o,it:r}=e,s=n.name("valid");for(let a in t)(0,Fje.alwaysValidSchema)(r,t[a])||(n.if((0,E0.propertyInData)(n,i,a,r.opts.ownProperties),()=>{let l=e.subschema({keyword:o,schemaProp:a},s);e.mergeValidEvaluated(l,s)},()=>n.var(s,!0)),e.ok(s))}ql.validateSchemaDeps=Dae;ql.default=Lje});var Mae=He(x5=>{"use strict";Object.defineProperty(x5,"__esModule",{value:!0});var Iae=Yt(),Bje=xn(),zje={message:"property name must be valid",params:({params:e})=>(0,Iae._)`{propertyName: ${e.propertyName}}`},Vje={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:zje,code(e){let{gen:t,schema:n,data:i,it:o}=e;if((0,Bje.alwaysValidSchema)(o,n))return;let r=t.name("valid");t.forIn("key",i,s=>{e.setParams({propertyName:s}),e.subschema({keyword:"propertyNames",data:s,dataTypes:["string"],propertyName:s,compositeRule:!0},r),t.if((0,Iae.not)(r),()=>{e.error(!0),o.allErrors||t.break()})}),e.ok(r)}};x5.default=Vje});var E5=He(S5=>{"use strict";Object.defineProperty(S5,"__esModule",{value:!0});var tR=ra(),Ga=Yt(),Hje=rd(),nR=xn(),$je={message:"must NOT have additional properties",params:({params:e})=>(0,Ga._)`{additionalProperty: ${e.additionalProperty}}`},jje={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:$je,code(e){let{gen:t,schema:n,parentSchema:i,data:o,errsCount:r,it:s}=e;if(!r)throw new Error("ajv implementation error");let{allErrors:a,opts:l}=s;if(s.props=!0,l.removeAdditional!=="all"&&(0,nR.alwaysValidSchema)(s,n))return;let c=(0,tR.allSchemaProperties)(i.properties),u=(0,tR.allSchemaProperties)(i.patternProperties);h(),e.ok((0,Ga._)`${r} === ${Hje.default.errors}`);function h(){t.forIn("key",o,w=>{!c.length&&!u.length?_(w):t.if(f(w),()=>_(w))})}function f(w){let C;if(c.length>8){let S=(0,nR.schemaRefOrVal)(s,i.properties,"properties");C=(0,tR.isOwnProperty)(t,S,w)}else c.length?C=(0,Ga.or)(...c.map(S=>(0,Ga._)`${w} === ${S}`)):C=Ga.nil;return u.length&&(C=(0,Ga.or)(C,...u.map(S=>(0,Ga._)`${(0,tR.usePattern)(e,S)}.test(${w})`))),(0,Ga.not)(C)}function m(w){t.code((0,Ga._)`delete ${o}[${w}]`)}function _(w){if(l.removeAdditional==="all"||l.removeAdditional&&n===!1){m(w);return}if(n===!1){e.setParams({additionalProperty:w}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,nR.alwaysValidSchema)(s,n)){let C=t.name("valid");l.removeAdditional==="failing"?(y(w,C,!1),t.if((0,Ga.not)(C),()=>{e.reset(),m(w)})):(y(w,C),a||t.if((0,Ga.not)(C),()=>t.break()))}}function y(w,C,S){let I={keyword:"additionalProperties",dataProp:w,dataPropType:nR.Type.Str};S===!1&&Object.assign(I,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(I,C)}}};S5.default=jje});var Pae=He(k5=>{"use strict";Object.defineProperty(k5,"__esModule",{value:!0});var Gje=u0(),Rae=ra(),D5=xn(),Tae=E5(),Uje={keyword:"properties",type:"object",schemaType:"object",code(e){let{gen:t,schema:n,parentSchema:i,data:o,it:r}=e;r.opts.removeAdditional==="all"&&i.additionalProperties===void 0&&Tae.default.code(new Gje.KeywordCxt(r,Tae.default,"additionalProperties"));let s=(0,Rae.allSchemaProperties)(n);for(let h of s)r.definedProperties.add(h);r.opts.unevaluated&&s.length&&r.props!==!0&&(r.props=D5.mergeEvaluated.props(t,(0,D5.toHash)(s),r.props));let a=s.filter(h=>!(0,D5.alwaysValidSchema)(r,n[h]));if(a.length===0)return;let l=t.name("valid");for(let h of a)c(h)?u(h):(t.if((0,Rae.propertyInData)(t,o,h,r.opts.ownProperties)),u(h),r.allErrors||t.else().var(l,!0),t.endIf()),e.it.definedProperties.add(h),e.ok(l);function c(h){return r.opts.useDefaults&&!r.compositeRule&&n[h].default!==void 0}function u(h){e.subschema({keyword:"properties",schemaProp:h,dataProp:h},l)}}};k5.default=Uje});var Lae=He(I5=>{"use strict";Object.defineProperty(I5,"__esModule",{value:!0});var Aae=ra(),iR=Yt(),Oae=xn(),Fae=xn(),Wje={keyword:"patternProperties",type:"object",schemaType:"object",code(e){let{gen:t,schema:n,data:i,parentSchema:o,it:r}=e,{opts:s}=r,a=(0,Aae.allSchemaProperties)(n),l=a.filter(y=>(0,Oae.alwaysValidSchema)(r,n[y]));if(a.length===0||l.length===a.length&&(!r.opts.unevaluated||r.props===!0))return;let c=s.strictSchema&&!s.allowMatchingProperties&&o.properties,u=t.name("valid");r.props!==!0&&!(r.props instanceof iR.Name)&&(r.props=(0,Fae.evaluatedPropsToName)(t,r.props));let{props:h}=r;f();function f(){for(let y of a)c&&m(y),r.allErrors?_(y):(t.var(u,!0),_(y),t.if(u))}function m(y){for(let w in c)new RegExp(y).test(w)&&(0,Oae.checkStrictMode)(r,`property ${w} matches pattern ${y} (use allowMatchingProperties)`)}function _(y){t.forIn("key",i,w=>{t.if((0,iR._)`${(0,Aae.usePattern)(e,y)}.test(${w})`,()=>{let C=l.includes(y);C||e.subschema({keyword:"patternProperties",schemaProp:y,dataProp:w,dataPropType:Fae.Type.Str},u),r.opts.unevaluated&&h!==!0?t.assign((0,iR._)`${h}[${w}]`,!0):!C&&!r.allErrors&&t.if((0,iR.not)(u),()=>t.break())})})}}};I5.default=Wje});var Nae=He(M5=>{"use strict";Object.defineProperty(M5,"__esModule",{value:!0});var qje=xn(),Kje={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){let{gen:t,schema:n,it:i}=e;if((0,qje.alwaysValidSchema)(i,n)){e.fail();return}let o=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),e.failResult(o,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};M5.default=Kje});var Bae=He(R5=>{"use strict";Object.defineProperty(R5,"__esModule",{value:!0});var Zje=ra(),Yje={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Zje.validateUnion,error:{message:"must match a schema in anyOf"}};R5.default=Yje});var zae=He(T5=>{"use strict";Object.defineProperty(T5,"__esModule",{value:!0});var oR=Yt(),Qje=xn(),Jje={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,oR._)`{passingSchemas: ${e.passing}}`},Xje={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Jje,code(e){let{gen:t,schema:n,parentSchema:i,it:o}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(o.opts.discriminator&&i.discriminator)return;let r=n,s=t.let("valid",!1),a=t.let("passing",null),l=t.name("_valid");e.setParams({passing:a}),t.block(c),e.result(s,()=>e.reset(),()=>e.error(!0));function c(){r.forEach((u,h)=>{let f;(0,Qje.alwaysValidSchema)(o,u)?t.var(l,!0):f=e.subschema({keyword:"oneOf",schemaProp:h,compositeRule:!0},l),h>0&&t.if((0,oR._)`${l} && ${s}`).assign(s,!1).assign(a,(0,oR._)`[${a}, ${h}]`).else(),t.if(l,()=>{t.assign(s,!0),t.assign(a,h),f&&e.mergeEvaluated(f,oR.Name)})})}}};T5.default=Xje});var Vae=He(P5=>{"use strict";Object.defineProperty(P5,"__esModule",{value:!0});var eGe=xn(),tGe={keyword:"allOf",schemaType:"array",code(e){let{gen:t,schema:n,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");let o=t.name("valid");n.forEach((r,s)=>{if((0,eGe.alwaysValidSchema)(i,r))return;let a=e.subschema({keyword:"allOf",schemaProp:s},o);e.ok(o),e.mergeEvaluated(a)})}};P5.default=tGe});var jae=He(A5=>{"use strict";Object.defineProperty(A5,"__esModule",{value:!0});var rR=Yt(),$ae=xn(),nGe={message:({params:e})=>(0,rR.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,rR._)`{failingKeyword: ${e.ifClause}}`},iGe={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:nGe,code(e){let{gen:t,parentSchema:n,it:i}=e;n.then===void 0&&n.else===void 0&&(0,$ae.checkStrictMode)(i,'"if" without "then" and "else" is ignored');let o=Hae(i,"then"),r=Hae(i,"else");if(!o&&!r)return;let s=t.let("valid",!0),a=t.name("_valid");if(l(),e.reset(),o&&r){let u=t.let("ifClause");e.setParams({ifClause:u}),t.if(a,c("then",u),c("else",u))}else o?t.if(a,c("then")):t.if((0,rR.not)(a),c("else"));e.pass(s,()=>e.error(!0));function l(){let u=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(u)}function c(u,h){return()=>{let f=e.subschema({keyword:u},a);t.assign(s,a),e.mergeValidEvaluated(f,s),h?t.assign(h,(0,rR._)`${u}`):e.setParams({ifClause:u})}}}};function Hae(e,t){let n=e.schema[t];return n!==void 0&&!(0,$ae.alwaysValidSchema)(e,n)}A5.default=iGe});var Gae=He(O5=>{"use strict";Object.defineProperty(O5,"__esModule",{value:!0});var oGe=xn(),rGe={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,oGe.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};O5.default=rGe});var Uae=He(F5=>{"use strict";Object.defineProperty(F5,"__esModule",{value:!0});var sGe=v5(),aGe=Cae(),lGe=_5(),cGe=xae(),dGe=Sae(),uGe=kae(),hGe=Mae(),pGe=E5(),fGe=Pae(),mGe=Lae(),gGe=Nae(),vGe=Bae(),_Ge=zae(),yGe=Vae(),bGe=jae(),CGe=Gae();function wGe(e=!1){let t=[gGe.default,vGe.default,_Ge.default,yGe.default,bGe.default,CGe.default,hGe.default,pGe.default,uGe.default,fGe.default,mGe.default];return e?t.push(aGe.default,cGe.default):t.push(sGe.default,lGe.default),t.push(dGe.default),t}F5.default=wGe});var Wae=He(L5=>{"use strict";Object.defineProperty(L5,"__esModule",{value:!0});var Ui=Yt(),xGe={message:({schemaCode:e})=>(0,Ui.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,Ui._)`{format: ${e}}`},SGe={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:xGe,code(e,t){let{gen:n,data:i,$data:o,schema:r,schemaCode:s,it:a}=e,{opts:l,errSchemaPath:c,schemaEnv:u,self:h}=a;if(!l.validateFormats)return;o?f():m();function f(){let _=n.scopeValue("formats",{ref:h.formats,code:l.code.formats}),y=n.const("fDef",(0,Ui._)`${_}[${s}]`),w=n.let("fType"),C=n.let("format");n.if((0,Ui._)`typeof ${y} == "object" && !(${y} instanceof RegExp)`,()=>n.assign(w,(0,Ui._)`${y}.type || "string"`).assign(C,(0,Ui._)`${y}.validate`),()=>n.assign(w,(0,Ui._)`"string"`).assign(C,y)),e.fail$data((0,Ui.or)(S(),I()));function S(){return l.strictSchema===!1?Ui.nil:(0,Ui._)`${s} && !${C}`}function I(){let O=u.$async?(0,Ui._)`(${y}.async ? await ${C}(${i}) : ${C}(${i}))`:(0,Ui._)`${C}(${i})`,F=(0,Ui._)`(typeof ${C} == "function" ? ${O} : ${C}.test(${i}))`;return(0,Ui._)`${C} && ${C} !== true && ${w} === ${t} && !${F}`}}function m(){let _=h.formats[r];if(!_){S();return}if(_===!0)return;let[y,w,C]=I(_);y===t&&e.pass(O());function S(){if(l.strictSchema===!1){h.logger.warn(F());return}throw new Error(F());function F(){return`unknown format "${r}" ignored in schema at path "${c}"`}}function I(F){let H=F instanceof RegExp?(0,Ui.regexpCode)(F):l.code.formats?(0,Ui._)`${l.code.formats}${(0,Ui.getProperty)(r)}`:void 0,j=n.scopeValue("formats",{key:r,ref:F,code:H});return typeof F=="object"&&!(F instanceof RegExp)?[F.type||"string",F.validate,(0,Ui._)`${j}.validate`]:["string",F,j]}function O(){if(typeof _=="object"&&!(_ instanceof RegExp)&&_.async){if(!u.$async)throw new Error("async format in sync schema");return(0,Ui._)`await ${C}(${i})`}return typeof w=="function"?(0,Ui._)`${C}(${i})`:(0,Ui._)`${C}.test(${i})`}}}};L5.default=SGe});var qae=He(N5=>{"use strict";Object.defineProperty(N5,"__esModule",{value:!0});var EGe=Wae(),DGe=[EGe.default];N5.default=DGe});var Kae=He(Cv=>{"use strict";Object.defineProperty(Cv,"__esModule",{value:!0});Cv.contentVocabulary=Cv.metadataVocabulary=void 0;Cv.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Cv.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var Yae=He(B5=>{"use strict";Object.defineProperty(B5,"__esModule",{value:!0});var kGe=iae(),IGe=vae(),MGe=Uae(),RGe=qae(),Zae=Kae(),TGe=[kGe.default,IGe.default,(0,MGe.default)(),RGe.default,Zae.metadataVocabulary,Zae.contentVocabulary];B5.default=TGe});var Jae=He(sR=>{"use strict";Object.defineProperty(sR,"__esModule",{value:!0});sR.DiscrError=void 0;var Qae=(function(e){return e.Tag="tag",e.Mapping="mapping",e})(Qae||(sR.DiscrError=Qae={}))});var ele=He(V5=>{"use strict";Object.defineProperty(V5,"__esModule",{value:!0});var wv=Yt(),z5=Jae(),Xae=HM(),PGe=h0(),AGe=xn(),OGe={message:({params:{discrError:e,tagName:t}})=>e===z5.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,wv._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},FGe={keyword:"discriminator",type:"object",schemaType:"object",error:OGe,code(e){let{gen:t,data:n,schema:i,parentSchema:o,it:r}=e,{oneOf:s}=o;if(!r.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=i.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(i.mapping)throw new Error("discriminator: mapping is not supported");if(!s)throw new Error("discriminator: requires oneOf keyword");let l=t.let("valid",!1),c=t.const("tag",(0,wv._)`${n}${(0,wv.getProperty)(a)}`);t.if((0,wv._)`typeof ${c} == "string"`,()=>u(),()=>e.error(!1,{discrError:z5.DiscrError.Tag,tag:c,tagName:a})),e.ok(l);function u(){let m=f();t.if(!1);for(let _ in m)t.elseIf((0,wv._)`${c} === ${_}`),t.assign(l,h(m[_]));t.else(),e.error(!1,{discrError:z5.DiscrError.Mapping,tag:c,tagName:a}),t.endIf()}function h(m){let _=t.name("valid"),y=e.subschema({keyword:"oneOf",schemaProp:m},_);return e.mergeEvaluated(y,wv.Name),_}function f(){var m;let _={},y=C(o),w=!0;for(let O=0;O<s.length;O++){let F=s[O];if(F?.$ref&&!(0,AGe.schemaHasRulesButRef)(F,r.self.RULES)){let j=F.$ref;if(F=Xae.resolveRef.call(r.self,r.schemaEnv.root,r.baseId,j),F instanceof Xae.SchemaEnv&&(F=F.schema),F===void 0)throw new PGe.default(r.opts.uriResolver,r.baseId,j)}let H=(m=F?.properties)===null||m===void 0?void 0:m[a];if(typeof H!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);w=w&&(y||C(F)),S(H,O)}if(!w)throw new Error(`discriminator: "${a}" must be required`);return _;function C({required:O}){return Array.isArray(O)&&O.includes(a)}function S(O,F){if(O.const)I(O.const,F);else if(O.enum)for(let H of O.enum)I(H,F);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function I(O,F){if(typeof O!="string"||O in _)throw new Error(`discriminator: "${a}" values must be unique strings`);_[O]=F}}}};V5.default=FGe});var tle=He((kMt,LGe)=>{LGe.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var $5=He((hi,H5)=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});hi.MissingRefError=hi.ValidationError=hi.CodeGen=hi.Name=hi.nil=hi.stringify=hi.str=hi._=hi.KeywordCxt=hi.Ajv=void 0;var NGe=Qse(),BGe=Yae(),zGe=ele(),nle=tle(),VGe=["/properties"],aR="http://json-schema.org/draft-07/schema",xv=class extends NGe.default{_addVocabularies(){super._addVocabularies(),BGe.default.forEach(t=>this.addVocabulary(t)),this.opts.discriminator&&this.addKeyword(zGe.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let t=this.opts.$data?this.$dataMetaSchema(nle,VGe):nle;this.addMetaSchema(t,aR,!1),this.refs["http://json-schema.org/schema"]=aR}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(aR)?aR:void 0)}};hi.Ajv=xv;H5.exports=hi=xv;H5.exports.Ajv=xv;Object.defineProperty(hi,"__esModule",{value:!0});hi.default=xv;var HGe=u0();Object.defineProperty(hi,"KeywordCxt",{enumerable:!0,get:function(){return HGe.KeywordCxt}});var Sv=Yt();Object.defineProperty(hi,"_",{enumerable:!0,get:function(){return Sv._}});Object.defineProperty(hi,"str",{enumerable:!0,get:function(){return Sv.str}});Object.defineProperty(hi,"stringify",{enumerable:!0,get:function(){return Sv.stringify}});Object.defineProperty(hi,"nil",{enumerable:!0,get:function(){return Sv.nil}});Object.defineProperty(hi,"Name",{enumerable:!0,get:function(){return Sv.Name}});Object.defineProperty(hi,"CodeGen",{enumerable:!0,get:function(){return Sv.CodeGen}});var $Ge=zM();Object.defineProperty(hi,"ValidationError",{enumerable:!0,get:function(){return $Ge.default}});var jGe=h0();Object.defineProperty(hi,"MissingRefError",{enumerable:!0,get:function(){return jGe.default}})});var dle=He(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});Zl.formatNames=Zl.fastFormats=Zl.fullFormats=void 0;function Kl(e,t){return{validate:e,compare:t}}Zl.fullFormats={date:Kl(sle,W5),time:Kl(G5(!0),q5),"date-time":Kl(ile(!0),lle),"iso-time":Kl(G5(),ale),"iso-date-time":Kl(ile(),cle),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:ZGe,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:n7e,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:YGe,int32:{type:"number",validate:XGe},int64:{type:"number",validate:e7e},float:{type:"number",validate:rle},double:{type:"number",validate:rle},password:!0,binary:!0};Zl.fastFormats=x(g({},Zl.fullFormats),{date:Kl(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,W5),time:Kl(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,q5),"date-time":Kl(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,lle),"iso-time":Kl(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,ale),"iso-date-time":Kl(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,cle),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i});Zl.formatNames=Object.keys(Zl.fullFormats);function GGe(e){return e%4===0&&(e%100!==0||e%400===0)}var UGe=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,WGe=[0,31,28,31,30,31,30,31,31,30,31,30,31];function sle(e){let t=UGe.exec(e);if(!t)return!1;let n=+t[1],i=+t[2],o=+t[3];return i>=1&&i<=12&&o>=1&&o<=(i===2&&GGe(n)?29:WGe[i])}function W5(e,t){if(e&&t)return e>t?1:e<t?-1:0}var j5=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function G5(e){return function(n){let i=j5.exec(n);if(!i)return!1;let o=+i[1],r=+i[2],s=+i[3],a=i[4],l=i[5]==="-"?-1:1,c=+(i[6]||0),u=+(i[7]||0);if(c>23||u>59||e&&!a)return!1;if(o<=23&&r<=59&&s<60)return!0;let h=r-u*l,f=o-c*l-(h<0?1:0);return(f===23||f===-1)&&(h===59||h===-1)&&s<61}}function q5(e,t){if(!(e&&t))return;let n=new Date("2020-01-01T"+e).valueOf(),i=new Date("2020-01-01T"+t).valueOf();if(n&&i)return n-i}function ale(e,t){if(!(e&&t))return;let n=j5.exec(e),i=j5.exec(t);if(n&&i)return e=n[1]+n[2]+n[3],t=i[1]+i[2]+i[3],e>t?1:e<t?-1:0}var U5=/t|\s/i;function ile(e){let t=G5(e);return function(i){let o=i.split(U5);return o.length===2&&sle(o[0])&&t(o[1])}}function lle(e,t){if(!(e&&t))return;let n=new Date(e).valueOf(),i=new Date(t).valueOf();if(n&&i)return n-i}function cle(e,t){if(!(e&&t))return;let[n,i]=e.split(U5),[o,r]=t.split(U5),s=W5(n,o);if(s!==void 0)return s||q5(i,r)}var qGe=/\/|:/,KGe=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function ZGe(e){return qGe.test(e)&&KGe.test(e)}var ole=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function YGe(e){return ole.lastIndex=0,ole.test(e)}var QGe=-(2**31),JGe=2**31-1;function XGe(e){return Number.isInteger(e)&&e<=JGe&&e>=QGe}function e7e(e){return Number.isInteger(e)}function rle(){return!0}var t7e=/[^\\]\\Z/;function n7e(e){if(t7e.test(e))return!1;try{return new RegExp(e),!0}catch{return!1}}});var ule=He(Ev=>{"use strict";Object.defineProperty(Ev,"__esModule",{value:!0});Ev.formatLimitDefinition=void 0;var i7e=$5(),Ua=Yt(),Au=Ua.operators,lR={formatMaximum:{okStr:"<=",ok:Au.LTE,fail:Au.GT},formatMinimum:{okStr:">=",ok:Au.GTE,fail:Au.LT},formatExclusiveMaximum:{okStr:"<",ok:Au.LT,fail:Au.GTE},formatExclusiveMinimum:{okStr:">",ok:Au.GT,fail:Au.LTE}},o7e={message:({keyword:e,schemaCode:t})=>(0,Ua.str)`should be ${lR[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,Ua._)`{comparison: ${lR[e].okStr}, limit: ${t}}`};Ev.formatLimitDefinition={keyword:Object.keys(lR),type:"string",schemaType:"string",$data:!0,error:o7e,code(e){let{gen:t,data:n,schemaCode:i,keyword:o,it:r}=e,{opts:s,self:a}=r;if(!s.validateFormats)return;let l=new i7e.KeywordCxt(r,a.RULES.all.format.definition,"format");l.$data?c():u();function c(){let f=t.scopeValue("formats",{ref:a.formats,code:s.code.formats}),m=t.const("fmt",(0,Ua._)`${f}[${l.schemaCode}]`);e.fail$data((0,Ua.or)((0,Ua._)`typeof ${m} != "object"`,(0,Ua._)`${m} instanceof RegExp`,(0,Ua._)`typeof ${m}.compare != "function"`,h(m)))}function u(){let f=l.schema,m=a.formats[f];if(!m||m===!0)return;if(typeof m!="object"||m instanceof RegExp||typeof m.compare!="function")throw new Error(`"${o}": format "${f}" does not define "compare" function`);let _=t.scopeValue("formats",{key:f,ref:m,code:s.code.formats?(0,Ua._)`${s.code.formats}${(0,Ua.getProperty)(f)}`:void 0});e.fail$data(h(_))}function h(f){return(0,Ua._)`${f}.compare(${n}, ${i}) ${lR[o].fail} 0`}},dependencies:["format"]};var r7e=e=>(e.addKeyword(Ev.formatLimitDefinition),e);Ev.default=r7e});var mle=He((D0,fle)=>{"use strict";Object.defineProperty(D0,"__esModule",{value:!0});var Dv=dle(),s7e=ule(),K5=Yt(),hle=new K5.Name("fullFormats"),a7e=new K5.Name("fastFormats"),Z5=(e,t={keywords:!0})=>{if(Array.isArray(t))return ple(e,t,Dv.fullFormats,hle),e;let[n,i]=t.mode==="fast"?[Dv.fastFormats,a7e]:[Dv.fullFormats,hle],o=t.formats||Dv.formatNames;return ple(e,o,n,i),t.keywords&&(0,s7e.default)(e),e};Z5.get=(e,t="full")=>{let i=(t==="fast"?Dv.fastFormats:Dv.fullFormats)[e];if(!i)throw new Error(`Unknown format "${e}"`);return i};function ple(e,t,n,i){var o,r;(o=(r=e.opts.code).formats)!==null&&o!==void 0||(r.formats=(0,K5._)`require("ajv-formats/dist/formats").${i}`);for(let s of t)e.addFormat(s,n[s])}fle.exports=D0=Z5;Object.defineProperty(D0,"__esModule",{value:!0});D0.default=Z5});var bme=He((iA,yme)=>{"use strict";(function(e,t){typeof iA=="object"&&typeof yme<"u"?t(iA):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.leaflet={}))})(iA,function(e){"use strict";var t="1.9.4";function n(d){var p,v,b,D;for(v=1,b=arguments.length;v<b;v++){D=arguments[v];for(p in D)d[p]=D[p]}return d}var i=Object.create||(function(){function d(){}return function(p){return d.prototype=p,new d}})();function o(d,p){var v=Array.prototype.slice;if(d.bind)return d.bind.apply(d,v.call(arguments,1));var b=v.call(arguments,2);return function(){return d.apply(p,b.length?b.concat(v.call(arguments)):arguments)}}var r=0;function s(d){return"_leaflet_id"in d||(d._leaflet_id=++r),d._leaflet_id}function a(d,p,v){var b,D,T,B;return B=function(){b=!1,D&&(T.apply(v,D),D=!1)},T=function(){b?D=arguments:(d.apply(v,arguments),setTimeout(B,p),b=!0)},T}function l(d,p,v){var b=p[1],D=p[0],T=b-D;return d===b&&v?d:((d-D)%T+T)%T+D}function c(){return!1}function u(d,p){if(p===!1)return d;var v=Math.pow(10,p===void 0?6:p);return Math.round(d*v)/v}function h(d){return d.trim?d.trim():d.replace(/^\s+|\s+$/g,"")}function f(d){return h(d).split(/\s+/)}function m(d,p){Object.prototype.hasOwnProperty.call(d,"options")||(d.options=d.options?i(d.options):{});for(var v in p)d.options[v]=p[v];return d.options}function _(d,p,v){var b=[];for(var D in d)b.push(encodeURIComponent(v?D.toUpperCase():D)+"="+encodeURIComponent(d[D]));return(!p||p.indexOf("?")===-1?"?":"&")+b.join("&")}var y=/\{ *([\w_ -]+) *\}/g;function w(d,p){return d.replace(y,function(v,b){var D=p[b];if(D===void 0)throw new Error("No value provided for variable "+v);return typeof D=="function"&&(D=D(p)),D})}var C=Array.isArray||function(d){return Object.prototype.toString.call(d)==="[object Array]"};function S(d,p){for(var v=0;v<d.length;v++)if(d[v]===p)return v;return-1}var I="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function O(d){return window["webkit"+d]||window["moz"+d]||window["ms"+d]}var F=0;function H(d){var p=+new Date,v=Math.max(0,16-(p-F));return F=p+v,window.setTimeout(d,v)}var j=window.requestAnimationFrame||O("RequestAnimationFrame")||H,re=window.cancelAnimationFrame||O("CancelAnimationFrame")||O("CancelRequestAnimationFrame")||function(d){window.clearTimeout(d)};function ae(d,p,v){if(v&&j===H)d.call(p);else return j.call(window,o(d,p))}function se(d){d&&re.call(window,d)}var Te={__proto__:null,extend:n,create:i,bind:o,get lastId(){return r},stamp:s,throttle:a,wrapNum:l,falseFn:c,formatNum:u,trim:h,splitWords:f,setOptions:m,getParamString:_,template:w,isArray:C,indexOf:S,emptyImageUrl:I,requestFn:j,cancelFn:re,requestAnimFrame:ae,cancelAnimFrame:se};function ue(){}ue.extend=function(d){var p=function(){m(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},v=p.__super__=this.prototype,b=i(v);b.constructor=p,p.prototype=b;for(var D in this)Object.prototype.hasOwnProperty.call(this,D)&&D!=="prototype"&&D!=="__super__"&&(p[D]=this[D]);return d.statics&&n(p,d.statics),d.includes&&(De(d.includes),n.apply(null,[b].concat(d.includes))),n(b,d),delete b.statics,delete b.includes,b.options&&(b.options=v.options?i(v.options):{},n(b.options,d.options)),b._initHooks=[],b.callInitHooks=function(){if(!this._initHooksCalled){v.callInitHooks&&v.callInitHooks.call(this),this._initHooksCalled=!0;for(var T=0,B=b._initHooks.length;T<B;T++)b._initHooks[T].call(this)}},p},ue.include=function(d){var p=this.prototype.options;return n(this.prototype,d),d.options&&(this.prototype.options=p,this.mergeOptions(d.options)),this},ue.mergeOptions=function(d){return n(this.prototype.options,d),this},ue.addInitHook=function(d){var p=Array.prototype.slice.call(arguments,1),v=typeof d=="function"?d:function(){this[d].apply(this,p)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(v),this};function De(d){if(!(typeof L>"u"||!L||!L.Mixin)){d=C(d)?d:[d];for(var p=0;p<d.length;p++)d[p]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ne={on:function(d,p,v){if(typeof d=="object")for(var b in d)this._on(b,d[b],p);else{d=f(d);for(var D=0,T=d.length;D<T;D++)this._on(d[D],p,v)}return this},off:function(d,p,v){if(!arguments.length)delete this._events;else if(typeof d=="object")for(var b in d)this._off(b,d[b],p);else{d=f(d);for(var D=arguments.length===1,T=0,B=d.length;T<B;T++)D?this._off(d[T]):this._off(d[T],p,v)}return this},_on:function(d,p,v,b){if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}if(this._listens(d,p,v)===!1){v===this&&(v=void 0);var D={fn:p,ctx:v};b&&(D.once=!0),this._events=this._events||{},this._events[d]=this._events[d]||[],this._events[d].push(D)}},_off:function(d,p,v){var b,D,T;if(this._events&&(b=this._events[d],!!b)){if(arguments.length===1){if(this._firingCount)for(D=0,T=b.length;D<T;D++)b[D].fn=c;delete this._events[d];return}if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}var B=this._listens(d,p,v);if(B!==!1){var U=b[B];this._firingCount&&(U.fn=c,this._events[d]=b=b.slice()),b.splice(B,1)}}},fire:function(d,p,v){if(!this.listens(d,v))return this;var b=n({},p,{type:d,target:this,sourceTarget:p&&p.sourceTarget||this});if(this._events){var D=this._events[d];if(D){this._firingCount=this._firingCount+1||1;for(var T=0,B=D.length;T<B;T++){var U=D[T],Y=U.fn;U.once&&this.off(d,Y,U.ctx),Y.call(U.ctx||this,b)}this._firingCount--}}return v&&this._propagateEvent(b),this},listens:function(d,p,v,b){typeof d!="string"&&console.warn('"string" type argument expected');var D=p;typeof p!="function"&&(b=!!p,D=void 0,v=void 0);var T=this._events&&this._events[d];if(T&&T.length&&this._listens(d,D,v)!==!1)return!0;if(b){for(var B in this._eventParents)if(this._eventParents[B].listens(d,p,v,b))return!0}return!1},_listens:function(d,p,v){if(!this._events)return!1;var b=this._events[d]||[];if(!p)return!!b.length;v===this&&(v=void 0);for(var D=0,T=b.length;D<T;D++)if(b[D].fn===p&&b[D].ctx===v)return D;return!1},once:function(d,p,v){if(typeof d=="object")for(var b in d)this._on(b,d[b],p,!0);else{d=f(d);for(var D=0,T=d.length;D<T;D++)this._on(d[D],p,v,!0)}return this},addEventParent:function(d){return this._eventParents=this._eventParents||{},this._eventParents[s(d)]=d,this},removeEventParent:function(d){return this._eventParents&&delete this._eventParents[s(d)],this},_propagateEvent:function(d){for(var p in this._eventParents)this._eventParents[p].fire(d.type,n({layer:d.target,propagatedFrom:d.target},d),!0)}};Ne.addEventListener=Ne.on,Ne.removeEventListener=Ne.clearAllEventListeners=Ne.off,Ne.addOneTimeEventListener=Ne.once,Ne.fireEvent=Ne.fire,Ne.hasEventListeners=Ne.listens;var Pe=ue.extend(Ne);function Le(d,p,v){this.x=v?Math.round(d):d,this.y=v?Math.round(p):p}var mt=Math.trunc||function(d){return d>0?Math.floor(d):Math.ceil(d)};Le.prototype={clone:function(){return new Le(this.x,this.y)},add:function(d){return this.clone()._add(ve(d))},_add:function(d){return this.x+=d.x,this.y+=d.y,this},subtract:function(d){return this.clone()._subtract(ve(d))},_subtract:function(d){return this.x-=d.x,this.y-=d.y,this},divideBy:function(d){return this.clone()._divideBy(d)},_divideBy:function(d){return this.x/=d,this.y/=d,this},multiplyBy:function(d){return this.clone()._multiplyBy(d)},_multiplyBy:function(d){return this.x*=d,this.y*=d,this},scaleBy:function(d){return new Le(this.x*d.x,this.y*d.y)},unscaleBy:function(d){return new Le(this.x/d.x,this.y/d.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=mt(this.x),this.y=mt(this.y),this},distanceTo:function(d){d=ve(d);var p=d.x-this.x,v=d.y-this.y;return Math.sqrt(p*p+v*v)},equals:function(d){return d=ve(d),d.x===this.x&&d.y===this.y},contains:function(d){return d=ve(d),Math.abs(d.x)<=Math.abs(this.x)&&Math.abs(d.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}};function ve(d,p,v){return d instanceof Le?d:C(d)?new Le(d[0],d[1]):d==null?d:typeof d=="object"&&"x"in d&&"y"in d?new Le(d.x,d.y):new Le(d,p,v)}function Ve(d,p){if(d)for(var v=p?[d,p]:d,b=0,D=v.length;b<D;b++)this.extend(v[b])}Ve.prototype={extend:function(d){var p,v;if(!d)return this;if(d instanceof Le||typeof d[0]=="number"||"x"in d)p=v=ve(d);else if(d=We(d),p=d.min,v=d.max,!p||!v)return this;return!this.min&&!this.max?(this.min=p.clone(),this.max=v.clone()):(this.min.x=Math.min(p.x,this.min.x),this.max.x=Math.max(v.x,this.max.x),this.min.y=Math.min(p.y,this.min.y),this.max.y=Math.max(v.y,this.max.y)),this},getCenter:function(d){return ve((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,d)},getBottomLeft:function(){return ve(this.min.x,this.max.y)},getTopRight:function(){return ve(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(d){var p,v;return typeof d[0]=="number"||d instanceof Le?d=ve(d):d=We(d),d instanceof Ve?(p=d.min,v=d.max):p=v=d,p.x>=this.min.x&&v.x<=this.max.x&&p.y>=this.min.y&&v.y<=this.max.y},intersects:function(d){d=We(d);var p=this.min,v=this.max,b=d.min,D=d.max,T=D.x>=p.x&&b.x<=v.x,B=D.y>=p.y&&b.y<=v.y;return T&&B},overlaps:function(d){d=We(d);var p=this.min,v=this.max,b=d.min,D=d.max,T=D.x>p.x&&b.x<v.x,B=D.y>p.y&&b.y<v.y;return T&&B},isValid:function(){return!!(this.min&&this.max)},pad:function(d){var p=this.min,v=this.max,b=Math.abs(p.x-v.x)*d,D=Math.abs(p.y-v.y)*d;return We(ve(p.x-b,p.y-D),ve(v.x+b,v.y+D))},equals:function(d){return d?(d=We(d),this.min.equals(d.getTopLeft())&&this.max.equals(d.getBottomRight())):!1}};function We(d,p){return!d||d instanceof Ve?d:new Ve(d,p)}function vt(d,p){if(d)for(var v=p?[d,p]:d,b=0,D=v.length;b<D;b++)this.extend(v[b])}vt.prototype={extend:function(d){var p=this._southWest,v=this._northEast,b,D;if(d instanceof Dt)b=d,D=d;else if(d instanceof vt){if(b=d._southWest,D=d._northEast,!b||!D)return this}else return d?this.extend(jt(d)||It(d)):this;return!p&&!v?(this._southWest=new Dt(b.lat,b.lng),this._northEast=new Dt(D.lat,D.lng)):(p.lat=Math.min(b.lat,p.lat),p.lng=Math.min(b.lng,p.lng),v.lat=Math.max(D.lat,v.lat),v.lng=Math.max(D.lng,v.lng)),this},pad:function(d){var p=this._southWest,v=this._northEast,b=Math.abs(p.lat-v.lat)*d,D=Math.abs(p.lng-v.lng)*d;return new vt(new Dt(p.lat-b,p.lng-D),new Dt(v.lat+b,v.lng+D))},getCenter:function(){return new Dt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Dt(this.getNorth(),this.getWest())},getSouthEast:function(){return new Dt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(d){typeof d[0]=="number"||d instanceof Dt||"lat"in d?d=jt(d):d=It(d);var p=this._southWest,v=this._northEast,b,D;return d instanceof vt?(b=d.getSouthWest(),D=d.getNorthEast()):b=D=d,b.lat>=p.lat&&D.lat<=v.lat&&b.lng>=p.lng&&D.lng<=v.lng},intersects:function(d){d=It(d);var p=this._southWest,v=this._northEast,b=d.getSouthWest(),D=d.getNorthEast(),T=D.lat>=p.lat&&b.lat<=v.lat,B=D.lng>=p.lng&&b.lng<=v.lng;return T&&B},overlaps:function(d){d=It(d);var p=this._southWest,v=this._northEast,b=d.getSouthWest(),D=d.getNorthEast(),T=D.lat>p.lat&&b.lat<v.lat,B=D.lng>p.lng&&b.lng<v.lng;return T&&B},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(d,p){return d?(d=It(d),this._southWest.equals(d.getSouthWest(),p)&&this._northEast.equals(d.getNorthEast(),p)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function It(d,p){return d instanceof vt?d:new vt(d,p)}function Dt(d,p,v){if(isNaN(d)||isNaN(p))throw new Error("Invalid LatLng object: ("+d+", "+p+")");this.lat=+d,this.lng=+p,v!==void 0&&(this.alt=+v)}Dt.prototype={equals:function(d,p){if(!d)return!1;d=jt(d);var v=Math.max(Math.abs(this.lat-d.lat),Math.abs(this.lng-d.lng));return v<=(p===void 0?1e-9:p)},toString:function(d){return"LatLng("+u(this.lat,d)+", "+u(this.lng,d)+")"},distanceTo:function(d){return Nr.distance(this,jt(d))},wrap:function(){return Nr.wrapLatLng(this)},toBounds:function(d){var p=180*d/40075017,v=p/Math.cos(Math.PI/180*this.lat);return It([this.lat-p,this.lng-v],[this.lat+p,this.lng+v])},clone:function(){return new Dt(this.lat,this.lng,this.alt)}};function jt(d,p,v){return d instanceof Dt?d:C(d)&&typeof d[0]!="object"?d.length===3?new Dt(d[0],d[1],d[2]):d.length===2?new Dt(d[0],d[1]):null:d==null?d:typeof d=="object"&&"lat"in d?new Dt(d.lat,"lng"in d?d.lng:d.lon,d.alt):p===void 0?null:new Dt(d,p,v)}var yi={latLngToPoint:function(d,p){var v=this.projection.project(d),b=this.scale(p);return this.transformation._transform(v,b)},pointToLatLng:function(d,p){var v=this.scale(p),b=this.transformation.untransform(d,v);return this.projection.unproject(b)},project:function(d){return this.projection.project(d)},unproject:function(d){return this.projection.unproject(d)},scale:function(d){return 256*Math.pow(2,d)},zoom:function(d){return Math.log(d/256)/Math.LN2},getProjectedBounds:function(d){if(this.infinite)return null;var p=this.projection.bounds,v=this.scale(d),b=this.transformation.transform(p.min,v),D=this.transformation.transform(p.max,v);return new Ve(b,D)},infinite:!1,wrapLatLng:function(d){var p=this.wrapLng?l(d.lng,this.wrapLng,!0):d.lng,v=this.wrapLat?l(d.lat,this.wrapLat,!0):d.lat,b=d.alt;return new Dt(v,p,b)},wrapLatLngBounds:function(d){var p=d.getCenter(),v=this.wrapLatLng(p),b=p.lat-v.lat,D=p.lng-v.lng;if(b===0&&D===0)return d;var T=d.getSouthWest(),B=d.getNorthEast(),U=new Dt(T.lat-b,T.lng-D),Y=new Dt(B.lat-b,B.lng-D);return new vt(U,Y)}},Nr=n({},yi,{wrapLng:[-180,180],R:6371e3,distance:function(d,p){var v=Math.PI/180,b=d.lat*v,D=p.lat*v,T=Math.sin((p.lat-d.lat)*v/2),B=Math.sin((p.lng-d.lng)*v/2),U=T*T+Math.cos(b)*Math.cos(D)*B*B,Y=2*Math.atan2(Math.sqrt(U),Math.sqrt(1-U));return this.R*Y}}),CS=6378137,Sy={R:CS,MAX_LATITUDE:85.0511287798,project:function(d){var p=Math.PI/180,v=this.MAX_LATITUDE,b=Math.max(Math.min(v,d.lat),-v),D=Math.sin(b*p);return new Le(this.R*d.lng*p,this.R*Math.log((1+D)/(1-D))/2)},unproject:function(d){var p=180/Math.PI;return new Dt((2*Math.atan(Math.exp(d.y/this.R))-Math.PI/2)*p,d.x*p/this.R)},bounds:(function(){var d=CS*Math.PI;return new Ve([-d,-d],[d,d])})()};function $A(d,p,v,b){if(C(d)){this._a=d[0],this._b=d[1],this._c=d[2],this._d=d[3];return}this._a=d,this._b=p,this._c=v,this._d=b}$A.prototype={transform:function(d,p){return this._transform(d.clone(),p)},_transform:function(d,p){return p=p||1,d.x=p*(this._a*d.x+this._b),d.y=p*(this._c*d.y+this._d),d},untransform:function(d,p){return p=p||1,new Le((d.x/p-this._b)/this._a,(d.y/p-this._d)/this._c)}};function Ey(d,p,v,b){return new $A(d,p,v,b)}var jA=n({},Nr,{code:"EPSG:3857",projection:Sy,transformation:(function(){var d=.5/(Math.PI*Sy.R);return Ey(d,.5,-d,.5)})()}),Gge=n({},jA,{code:"EPSG:900913"});function _7(d){return document.createElementNS("http://www.w3.org/2000/svg",d)}function y7(d,p){var v="",b,D,T,B,U,Y;for(b=0,T=d.length;b<T;b++){for(U=d[b],D=0,B=U.length;D<B;D++)Y=U[D],v+=(D?"L":"M")+Y.x+" "+Y.y;v+=p?rt.svg?"z":"x":""}return v||"M0 0"}var GA=document.documentElement.style,wS="ActiveXObject"in window,Uge=wS&&!document.addEventListener,b7="msLaunchUri"in navigator&&!("documentMode"in document),UA=ol("webkit"),C7=ol("android"),w7=ol("android 2")||ol("android 3"),Wge=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),qge=C7&&ol("Google")&&Wge<537&&!("AudioNode"in window),WA=!!window.opera,x7=!b7&&ol("chrome"),S7=ol("gecko")&&!UA&&!WA&&!wS,Kge=!x7&&ol("safari"),E7=ol("phantom"),D7="OTransition"in GA,Zge=navigator.platform.indexOf("Win")===0,k7=wS&&"transition"in GA,qA="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!w7,I7="MozPerspective"in GA,Yge=!window.L_DISABLE_3D&&(k7||qA||I7)&&!D7&&!E7,Dy=typeof orientation<"u"||ol("mobile"),Qge=Dy&&UA,Jge=Dy&&qA,M7=!window.PointerEvent&&window.MSPointerEvent,R7=!!(window.PointerEvent||M7),T7="ontouchstart"in window||!!window.TouchEvent,Xge=!window.L_NO_TOUCH&&(T7||R7),eve=Dy&&WA,tve=Dy&&S7,nve=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ive=(function(){var d=!1;try{var p=Object.defineProperty({},"passive",{get:function(){d=!0}});window.addEventListener("testPassiveEventSupport",c,p),window.removeEventListener("testPassiveEventSupport",c,p)}catch{}return d})(),ove=(function(){return!!document.createElement("canvas").getContext})(),KA=!!(document.createElementNS&&_7("svg").createSVGRect),rve=!!KA&&(function(){var d=document.createElement("div");return d.innerHTML="<svg/>",(d.firstChild&&d.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),sve=!KA&&(function(){try{var d=document.createElement("div");d.innerHTML='<v:shape adj="1"/>';var p=d.firstChild;return p.style.behavior="url(#default#VML)",p&&typeof p.adj=="object"}catch{return!1}})(),ave=navigator.platform.indexOf("Mac")===0,lve=navigator.platform.indexOf("Linux")===0;function ol(d){return navigator.userAgent.toLowerCase().indexOf(d)>=0}var rt={ie:wS,ielt9:Uge,edge:b7,webkit:UA,android:C7,android23:w7,androidStock:qge,opera:WA,chrome:x7,gecko:S7,safari:Kge,phantom:E7,opera12:D7,win:Zge,ie3d:k7,webkit3d:qA,gecko3d:I7,any3d:Yge,mobile:Dy,mobileWebkit:Qge,mobileWebkit3d:Jge,msPointer:M7,pointer:R7,touch:Xge,touchNative:T7,mobileOpera:eve,mobileGecko:tve,retina:nve,passiveEvents:ive,canvas:ove,svg:KA,vml:sve,inlineSvg:rve,mac:ave,linux:lve},P7=rt.msPointer?"MSPointerDown":"pointerdown",A7=rt.msPointer?"MSPointerMove":"pointermove",O7=rt.msPointer?"MSPointerUp":"pointerup",F7=rt.msPointer?"MSPointerCancel":"pointercancel",ZA={touchstart:P7,touchmove:A7,touchend:O7,touchcancel:F7},L7={touchstart:fve,touchmove:xS,touchend:xS,touchcancel:xS},zf={},N7=!1;function cve(d,p,v){return p==="touchstart"&&pve(),L7[p]?(v=L7[p].bind(this,v),d.addEventListener(ZA[p],v,!1),v):(console.warn("wrong event specified:",p),c)}function dve(d,p,v){if(!ZA[p]){console.warn("wrong event specified:",p);return}d.removeEventListener(ZA[p],v,!1)}function uve(d){zf[d.pointerId]=d}function hve(d){zf[d.pointerId]&&(zf[d.pointerId]=d)}function B7(d){delete zf[d.pointerId]}function pve(){N7||(document.addEventListener(P7,uve,!0),document.addEventListener(A7,hve,!0),document.addEventListener(O7,B7,!0),document.addEventListener(F7,B7,!0),N7=!0)}function xS(d,p){if(p.pointerType!==(p.MSPOINTER_TYPE_MOUSE||"mouse")){p.touches=[];for(var v in zf)p.touches.push(zf[v]);p.changedTouches=[p],d(p)}}function fve(d,p){p.MSPOINTER_TYPE_TOUCH&&p.pointerType===p.MSPOINTER_TYPE_TOUCH&&Ro(p),xS(d,p)}function mve(d){var p={},v,b;for(b in d)v=d[b],p[b]=v&&v.bind?v.bind(d):v;return d=p,p.type="dblclick",p.detail=2,p.isTrusted=!1,p._simulated=!0,p}var gve=200;function vve(d,p){d.addEventListener("dblclick",p);var v=0,b;function D(T){if(T.detail!==1){b=T.detail;return}if(!(T.pointerType==="mouse"||T.sourceCapabilities&&!T.sourceCapabilities.firesTouchEvents)){var B=j7(T);if(!(B.some(function(Y){return Y instanceof HTMLLabelElement&&Y.attributes.for})&&!B.some(function(Y){return Y instanceof HTMLInputElement||Y instanceof HTMLSelectElement}))){var U=Date.now();U-v<=gve?(b++,b===2&&p(mve(T))):b=1,v=U}}}return d.addEventListener("click",D),{dblclick:p,simDblclick:D}}function _ve(d,p){d.removeEventListener("dblclick",p.dblclick),d.removeEventListener("click",p.simDblclick)}var YA=DS(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ky=DS(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),z7=ky==="webkitTransition"||ky==="OTransition"?ky+"End":"transitionend";function V7(d){return typeof d=="string"?document.getElementById(d):d}function Iy(d,p){var v=d.style[p]||d.currentStyle&&d.currentStyle[p];if((!v||v==="auto")&&document.defaultView){var b=document.defaultView.getComputedStyle(d,null);v=b?b[p]:null}return v==="auto"?null:v}function En(d,p,v){var b=document.createElement(d);return b.className=p||"",v&&v.appendChild(b),b}function bi(d){var p=d.parentNode;p&&p.removeChild(d)}function SS(d){for(;d.firstChild;)d.removeChild(d.firstChild)}function Vf(d){var p=d.parentNode;p&&p.lastChild!==d&&p.appendChild(d)}function Hf(d){var p=d.parentNode;p&&p.firstChild!==d&&p.insertBefore(d,p.firstChild)}function QA(d,p){if(d.classList!==void 0)return d.classList.contains(p);var v=ES(d);return v.length>0&&new RegExp("(^|\\s)"+p+"(\\s|$)").test(v)}function qt(d,p){if(d.classList!==void 0)for(var v=f(p),b=0,D=v.length;b<D;b++)d.classList.add(v[b]);else if(!QA(d,p)){var T=ES(d);JA(d,(T?T+" ":"")+p)}}function Li(d,p){d.classList!==void 0?d.classList.remove(p):JA(d,h((" "+ES(d)+" ").replace(" "+p+" "," ")))}function JA(d,p){d.className.baseVal===void 0?d.className=p:d.className.baseVal=p}function ES(d){return d.correspondingElement&&(d=d.correspondingElement),d.className.baseVal===void 0?d.className:d.className.baseVal}function Fs(d,p){"opacity"in d.style?d.style.opacity=p:"filter"in d.style&&yve(d,p)}function yve(d,p){var v=!1,b="DXImageTransform.Microsoft.Alpha";try{v=d.filters.item(b)}catch{if(p===1)return}p=Math.round(p*100),v?(v.Enabled=p!==100,v.Opacity=p):d.style.filter+=" progid:"+b+"(opacity="+p+")"}function DS(d){for(var p=document.documentElement.style,v=0;v<d.length;v++)if(d[v]in p)return d[v];return!1}function ph(d,p,v){var b=p||new Le(0,0);d.style[YA]=(rt.ie3d?"translate("+b.x+"px,"+b.y+"px)":"translate3d("+b.x+"px,"+b.y+"px,0)")+(v?" scale("+v+")":"")}function Qi(d,p){d._leaflet_pos=p,rt.any3d?ph(d,p):(d.style.left=p.x+"px",d.style.top=p.y+"px")}function fh(d){return d._leaflet_pos||new Le(0,0)}var My,Ry,XA;if("onselectstart"in document)My=function(){Nt(window,"selectstart",Ro)},Ry=function(){Yn(window,"selectstart",Ro)};else{var Ty=DS(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);My=function(){if(Ty){var d=document.documentElement.style;XA=d[Ty],d[Ty]="none"}},Ry=function(){Ty&&(document.documentElement.style[Ty]=XA,XA=void 0)}}function eO(){Nt(window,"dragstart",Ro)}function tO(){Yn(window,"dragstart",Ro)}var kS,nO;function iO(d){for(;d.tabIndex===-1;)d=d.parentNode;d.style&&(IS(),kS=d,nO=d.style.outlineStyle,d.style.outlineStyle="none",Nt(window,"keydown",IS))}function IS(){kS&&(kS.style.outlineStyle=nO,kS=void 0,nO=void 0,Yn(window,"keydown",IS))}function H7(d){do d=d.parentNode;while((!d.offsetWidth||!d.offsetHeight)&&d!==document.body);return d}function oO(d){var p=d.getBoundingClientRect();return{x:p.width/d.offsetWidth||1,y:p.height/d.offsetHeight||1,boundingClientRect:p}}var bve={__proto__:null,TRANSFORM:YA,TRANSITION:ky,TRANSITION_END:z7,get:V7,getStyle:Iy,create:En,remove:bi,empty:SS,toFront:Vf,toBack:Hf,hasClass:QA,addClass:qt,removeClass:Li,setClass:JA,getClass:ES,setOpacity:Fs,testProp:DS,setTransform:ph,setPosition:Qi,getPosition:fh,get disableTextSelection(){return My},get enableTextSelection(){return Ry},disableImageDrag:eO,enableImageDrag:tO,preventOutline:iO,restoreOutline:IS,getSizedParentNode:H7,getScale:oO};function Nt(d,p,v,b){if(p&&typeof p=="object")for(var D in p)sO(d,D,p[D],v);else{p=f(p);for(var T=0,B=p.length;T<B;T++)sO(d,p[T],v,b)}return this}var rl="_leaflet_events";function Yn(d,p,v,b){if(arguments.length===1)$7(d),delete d[rl];else if(p&&typeof p=="object")for(var D in p)aO(d,D,p[D],v);else if(p=f(p),arguments.length===2)$7(d,function(U){return S(p,U)!==-1});else for(var T=0,B=p.length;T<B;T++)aO(d,p[T],v,b);return this}function $7(d,p){for(var v in d[rl]){var b=v.split(/\d/)[0];(!p||p(b))&&aO(d,b,null,null,v)}}var rO={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function sO(d,p,v,b){var D=p+s(v)+(b?"_"+s(b):"");if(d[rl]&&d[rl][D])return this;var T=function(U){return v.call(b||d,U||window.event)},B=T;!rt.touchNative&&rt.pointer&&p.indexOf("touch")===0?T=cve(d,p,T):rt.touch&&p==="dblclick"?T=vve(d,T):"addEventListener"in d?p==="touchstart"||p==="touchmove"||p==="wheel"||p==="mousewheel"?d.addEventListener(rO[p]||p,T,rt.passiveEvents?{passive:!1}:!1):p==="mouseenter"||p==="mouseleave"?(T=function(U){U=U||window.event,cO(d,U)&&B(U)},d.addEventListener(rO[p],T,!1)):d.addEventListener(p,B,!1):d.attachEvent("on"+p,T),d[rl]=d[rl]||{},d[rl][D]=T}function aO(d,p,v,b,D){D=D||p+s(v)+(b?"_"+s(b):"");var T=d[rl]&&d[rl][D];if(!T)return this;!rt.touchNative&&rt.pointer&&p.indexOf("touch")===0?dve(d,p,T):rt.touch&&p==="dblclick"?_ve(d,T):"removeEventListener"in d?d.removeEventListener(rO[p]||p,T,!1):d.detachEvent("on"+p,T),d[rl][D]=null}function mh(d){return d.stopPropagation?d.stopPropagation():d.originalEvent?d.originalEvent._stopped=!0:d.cancelBubble=!0,this}function lO(d){return sO(d,"wheel",mh),this}function Py(d){return Nt(d,"mousedown touchstart dblclick contextmenu",mh),d._leaflet_disable_click=!0,this}function Ro(d){return d.preventDefault?d.preventDefault():d.returnValue=!1,this}function gh(d){return Ro(d),mh(d),this}function j7(d){if(d.composedPath)return d.composedPath();for(var p=[],v=d.target;v;)p.push(v),v=v.parentNode;return p}function G7(d,p){if(!p)return new Le(d.clientX,d.clientY);var v=oO(p),b=v.boundingClientRect;return new Le((d.clientX-b.left)/v.x-p.clientLeft,(d.clientY-b.top)/v.y-p.clientTop)}var Cve=rt.linux&&rt.chrome?window.devicePixelRatio:rt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function U7(d){return rt.edge?d.wheelDeltaY/2:d.deltaY&&d.deltaMode===0?-d.deltaY/Cve:d.deltaY&&d.deltaMode===1?-d.deltaY*20:d.deltaY&&d.deltaMode===2?-d.deltaY*60:d.deltaX||d.deltaZ?0:d.wheelDelta?(d.wheelDeltaY||d.wheelDelta)/2:d.detail&&Math.abs(d.detail)<32765?-d.detail*20:d.detail?d.detail/-32765*60:0}function cO(d,p){var v=p.relatedTarget;if(!v)return!0;try{for(;v&&v!==d;)v=v.parentNode}catch{return!1}return v!==d}var wve={__proto__:null,on:Nt,off:Yn,stopPropagation:mh,disableScrollPropagation:lO,disableClickPropagation:Py,preventDefault:Ro,stop:gh,getPropagationPath:j7,getMousePosition:G7,getWheelDelta:U7,isExternalTarget:cO,addListener:Nt,removeListener:Yn},W7=Pe.extend({run:function(d,p,v,b){this.stop(),this._el=d,this._inProgress=!0,this._duration=v||.25,this._easeOutPower=1/Math.max(b||.5,.2),this._startPos=fh(d),this._offset=p.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ae(this._animate,this),this._step()},_step:function(d){var p=+new Date-this._startTime,v=this._duration*1e3;p<v?this._runFrame(this._easeOut(p/v),d):(this._runFrame(1),this._complete())},_runFrame:function(d,p){var v=this._startPos.add(this._offset.multiplyBy(d));p&&v._round(),Qi(this._el,v),this.fire("step")},_complete:function(){se(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(d){return 1-Math.pow(1-d,this._easeOutPower)}}),mn=Pe.extend({options:{crs:jA,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(d,p){p=m(this,p),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(d),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),p.maxBounds&&this.setMaxBounds(p.maxBounds),p.zoom!==void 0&&(this._zoom=this._limitZoom(p.zoom)),p.center&&p.zoom!==void 0&&this.setView(jt(p.center),p.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ky&&rt.any3d&&!rt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Nt(this._proxy,z7,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(d,p,v){if(p=p===void 0?this._zoom:this._limitZoom(p),d=this._limitCenter(jt(d),p,this.options.maxBounds),v=v||{},this._stop(),this._loaded&&!v.reset&&v!==!0){v.animate!==void 0&&(v.zoom=n({animate:v.animate},v.zoom),v.pan=n({animate:v.animate,duration:v.duration},v.pan));var b=this._zoom!==p?this._tryAnimatedZoom&&this._tryAnimatedZoom(d,p,v.zoom):this._tryAnimatedPan(d,v.pan);if(b)return clearTimeout(this._sizeTimer),this}return this._resetView(d,p,v.pan&&v.pan.noMoveStart),this},setZoom:function(d,p){return this._loaded?this.setView(this.getCenter(),d,{zoom:p}):(this._zoom=d,this)},zoomIn:function(d,p){return d=d||(rt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+d,p)},zoomOut:function(d,p){return d=d||(rt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-d,p)},setZoomAround:function(d,p,v){var b=this.getZoomScale(p),D=this.getSize().divideBy(2),T=d instanceof Le?d:this.latLngToContainerPoint(d),B=T.subtract(D).multiplyBy(1-1/b),U=this.containerPointToLatLng(D.add(B));return this.setView(U,p,{zoom:v})},_getBoundsCenterZoom:function(d,p){p=p||{},d=d.getBounds?d.getBounds():It(d);var v=ve(p.paddingTopLeft||p.padding||[0,0]),b=ve(p.paddingBottomRight||p.padding||[0,0]),D=this.getBoundsZoom(d,!1,v.add(b));if(D=typeof p.maxZoom=="number"?Math.min(p.maxZoom,D):D,D===1/0)return{center:d.getCenter(),zoom:D};var T=b.subtract(v).divideBy(2),B=this.project(d.getSouthWest(),D),U=this.project(d.getNorthEast(),D),Y=this.unproject(B.add(U).divideBy(2).add(T),D);return{center:Y,zoom:D}},fitBounds:function(d,p){if(d=It(d),!d.isValid())throw new Error("Bounds are not valid.");var v=this._getBoundsCenterZoom(d,p);return this.setView(v.center,v.zoom,p)},fitWorld:function(d){return this.fitBounds([[-90,-180],[90,180]],d)},panTo:function(d,p){return this.setView(d,this._zoom,{pan:p})},panBy:function(d,p){if(d=ve(d).round(),p=p||{},!d.x&&!d.y)return this.fire("moveend");if(p.animate!==!0&&!this.getSize().contains(d))return this._resetView(this.unproject(this.project(this.getCenter()).add(d)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new W7,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),p.noMoveStart||this.fire("movestart"),p.animate!==!1){qt(this._mapPane,"leaflet-pan-anim");var v=this._getMapPanePos().subtract(d).round();this._panAnim.run(this._mapPane,v,p.duration||.25,p.easeLinearity)}else this._rawPanBy(d),this.fire("move").fire("moveend");return this},flyTo:function(d,p,v){if(v=v||{},v.animate===!1||!rt.any3d)return this.setView(d,p,v);this._stop();var b=this.project(this.getCenter()),D=this.project(d),T=this.getSize(),B=this._zoom;d=jt(d),p=p===void 0?B:p;var U=Math.max(T.x,T.y),Y=U*this.getZoomScale(B,p),de=D.distanceTo(b)||1,Ue=1.42,St=Ue*Ue;function nn(Ji){var VS=Ji?-1:1,d_e=Ji?Y:U,u_e=Y*Y-U*U+VS*St*St*de*de,h_e=2*d_e*St*de,bO=u_e/h_e,DU=Math.sqrt(bO*bO+1)-bO,p_e=DU<1e-9?-18:Math.log(DU);return p_e}function vr(Ji){return(Math.exp(Ji)-Math.exp(-Ji))/2}function xo(Ji){return(Math.exp(Ji)+Math.exp(-Ji))/2}function Ns(Ji){return vr(Ji)/xo(Ji)}var Br=nn(0);function qf(Ji){return U*(xo(Br)/xo(Br+Ue*Ji))}function s_e(Ji){return U*(xo(Br)*Ns(Br+Ue*Ji)-vr(Br))/St}function a_e(Ji){return 1-Math.pow(1-Ji,1.5)}var l_e=Date.now(),SU=(nn(1)-Br)/Ue,c_e=v.duration?1e3*v.duration:1e3*SU*.8;function EU(){var Ji=(Date.now()-l_e)/c_e,VS=a_e(Ji)*SU;Ji<=1?(this._flyToFrame=ae(EU,this),this._move(this.unproject(b.add(D.subtract(b).multiplyBy(s_e(VS)/de)),B),this.getScaleZoom(U/qf(VS),B),{flyTo:!0})):this._move(d,p)._moveEnd(!0)}return this._moveStart(!0,v.noMoveStart),EU.call(this),this},flyToBounds:function(d,p){var v=this._getBoundsCenterZoom(d,p);return this.flyTo(v.center,v.zoom,p)},setMaxBounds:function(d){return d=It(d),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),d.isValid()?(this.options.maxBounds=d,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(d){var p=this.options.minZoom;return this.options.minZoom=d,this._loaded&&p!==d&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(d):this},setMaxZoom:function(d){var p=this.options.maxZoom;return this.options.maxZoom=d,this._loaded&&p!==d&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(d):this},panInsideBounds:function(d,p){this._enforcingBounds=!0;var v=this.getCenter(),b=this._limitCenter(v,this._zoom,It(d));return v.equals(b)||this.panTo(b,p),this._enforcingBounds=!1,this},panInside:function(d,p){p=p||{};var v=ve(p.paddingTopLeft||p.padding||[0,0]),b=ve(p.paddingBottomRight||p.padding||[0,0]),D=this.project(this.getCenter()),T=this.project(d),B=this.getPixelBounds(),U=We([B.min.add(v),B.max.subtract(b)]),Y=U.getSize();if(!U.contains(T)){this._enforcingBounds=!0;var de=T.subtract(U.getCenter()),Ue=U.extend(T).getSize().subtract(Y);D.x+=de.x<0?-Ue.x:Ue.x,D.y+=de.y<0?-Ue.y:Ue.y,this.panTo(this.unproject(D),p),this._enforcingBounds=!1}return this},invalidateSize:function(d){if(!this._loaded)return this;d=n({animate:!1,pan:!0},d===!0?{animate:!0}:d);var p=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var v=this.getSize(),b=p.divideBy(2).round(),D=v.divideBy(2).round(),T=b.subtract(D);return!T.x&&!T.y?this:(d.animate&&d.pan?this.panBy(T):(d.pan&&this._rawPanBy(T),this.fire("move"),d.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:p,newSize:v}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(d){if(d=this._locateOptions=n({timeout:1e4,watch:!1},d),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var p=o(this._handleGeolocationResponse,this),v=o(this._handleGeolocationError,this);return d.watch?this._locationWatchId=navigator.geolocation.watchPosition(p,v,d):navigator.geolocation.getCurrentPosition(p,v,d),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(d){if(this._container._leaflet_id){var p=d.code,v=d.message||(p===1?"permission denied":p===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:p,message:"Geolocation error: "+v+"."})}},_handleGeolocationResponse:function(d){if(this._container._leaflet_id){var p=d.coords.latitude,v=d.coords.longitude,b=new Dt(p,v),D=b.toBounds(d.coords.accuracy*2),T=this._locateOptions;if(T.setView){var B=this.getBoundsZoom(D);this.setView(b,T.maxZoom?Math.min(B,T.maxZoom):B)}var U={latlng:b,bounds:D,timestamp:d.timestamp};for(var Y in d.coords)typeof d.coords[Y]=="number"&&(U[Y]=d.coords[Y]);this.fire("locationfound",U)}},addHandler:function(d,p){if(!p)return this;var v=this[d]=new p(this);return this._handlers.push(v),this.options[d]&&v.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),bi(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(se(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var d;for(d in this._layers)this._layers[d].remove();for(d in this._panes)bi(this._panes[d]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(d,p){var v="leaflet-pane"+(d?" leaflet-"+d.replace("Pane","")+"-pane":""),b=En("div",v,p||this._mapPane);return d&&(this._panes[d]=b),b},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var d=this.getPixelBounds(),p=this.unproject(d.getBottomLeft()),v=this.unproject(d.getTopRight());return new vt(p,v)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(d,p,v){d=It(d),v=ve(v||[0,0]);var b=this.getZoom()||0,D=this.getMinZoom(),T=this.getMaxZoom(),B=d.getNorthWest(),U=d.getSouthEast(),Y=this.getSize().subtract(v),de=We(this.project(U,b),this.project(B,b)).getSize(),Ue=rt.any3d?this.options.zoomSnap:1,St=Y.x/de.x,nn=Y.y/de.y,vr=p?Math.max(St,nn):Math.min(St,nn);return b=this.getScaleZoom(vr,b),Ue&&(b=Math.round(b/(Ue/100))*(Ue/100),b=p?Math.ceil(b/Ue)*Ue:Math.floor(b/Ue)*Ue),Math.max(D,Math.min(T,b))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Le(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(d,p){var v=this._getTopLeftPoint(d,p);return new Ve(v,v.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(d){return this.options.crs.getProjectedBounds(d===void 0?this.getZoom():d)},getPane:function(d){return typeof d=="string"?this._panes[d]:d},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(d,p){var v=this.options.crs;return p=p===void 0?this._zoom:p,v.scale(d)/v.scale(p)},getScaleZoom:function(d,p){var v=this.options.crs;p=p===void 0?this._zoom:p;var b=v.zoom(d*v.scale(p));return isNaN(b)?1/0:b},project:function(d,p){return p=p===void 0?this._zoom:p,this.options.crs.latLngToPoint(jt(d),p)},unproject:function(d,p){return p=p===void 0?this._zoom:p,this.options.crs.pointToLatLng(ve(d),p)},layerPointToLatLng:function(d){var p=ve(d).add(this.getPixelOrigin());return this.unproject(p)},latLngToLayerPoint:function(d){var p=this.project(jt(d))._round();return p._subtract(this.getPixelOrigin())},wrapLatLng:function(d){return this.options.crs.wrapLatLng(jt(d))},wrapLatLngBounds:function(d){return this.options.crs.wrapLatLngBounds(It(d))},distance:function(d,p){return this.options.crs.distance(jt(d),jt(p))},containerPointToLayerPoint:function(d){return ve(d).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(d){return ve(d).add(this._getMapPanePos())},containerPointToLatLng:function(d){var p=this.containerPointToLayerPoint(ve(d));return this.layerPointToLatLng(p)},latLngToContainerPoint:function(d){return this.layerPointToContainerPoint(this.latLngToLayerPoint(jt(d)))},mouseEventToContainerPoint:function(d){return G7(d,this._container)},mouseEventToLayerPoint:function(d){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(d))},mouseEventToLatLng:function(d){return this.layerPointToLatLng(this.mouseEventToLayerPoint(d))},_initContainer:function(d){var p=this._container=V7(d);if(p){if(p._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Nt(p,"scroll",this._onScroll,this),this._containerId=s(p)},_initLayout:function(){var d=this._container;this._fadeAnimated=this.options.fadeAnimation&&rt.any3d,qt(d,"leaflet-container"+(rt.touch?" leaflet-touch":"")+(rt.retina?" leaflet-retina":"")+(rt.ielt9?" leaflet-oldie":"")+(rt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var p=Iy(d,"position");p!=="absolute"&&p!=="relative"&&p!=="fixed"&&p!=="sticky"&&(d.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var d=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Qi(this._mapPane,new Le(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(qt(d.markerPane,"leaflet-zoom-hide"),qt(d.shadowPane,"leaflet-zoom-hide"))},_resetView:function(d,p,v){Qi(this._mapPane,new Le(0,0));var b=!this._loaded;this._loaded=!0,p=this._limitZoom(p),this.fire("viewprereset");var D=this._zoom!==p;this._moveStart(D,v)._move(d,p)._moveEnd(D),this.fire("viewreset"),b&&this.fire("load")},_moveStart:function(d,p){return d&&this.fire("zoomstart"),p||this.fire("movestart"),this},_move:function(d,p,v,b){p===void 0&&(p=this._zoom);var D=this._zoom!==p;return this._zoom=p,this._lastCenter=d,this._pixelOrigin=this._getNewPixelOrigin(d),b?v&&v.pinch&&this.fire("zoom",v):((D||v&&v.pinch)&&this.fire("zoom",v),this.fire("move",v)),this},_moveEnd:function(d){return d&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return se(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(d){Qi(this._mapPane,this._getMapPanePos().subtract(d))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(d){this._targets={},this._targets[s(this._container)]=this;var p=d?Yn:Nt;p(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&p(window,"resize",this._onResize,this),rt.any3d&&this.options.transform3DLimit&&(d?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){se(this._resizeRequest),this._resizeRequest=ae(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var d=this._getMapPanePos();Math.max(Math.abs(d.x),Math.abs(d.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(d,p){for(var v=[],b,D=p==="mouseout"||p==="mouseover",T=d.target||d.srcElement,B=!1;T;){if(b=this._targets[s(T)],b&&(p==="click"||p==="preclick")&&this._draggableMoved(b)){B=!0;break}if(b&&b.listens(p,!0)&&(D&&!cO(T,d)||(v.push(b),D))||T===this._container)break;T=T.parentNode}return!v.length&&!B&&!D&&this.listens(p,!0)&&(v=[this]),v},_isClickDisabled:function(d){for(;d&&d!==this._container;){if(d._leaflet_disable_click)return!0;d=d.parentNode}},_handleDOMEvent:function(d){var p=d.target||d.srcElement;if(!(!this._loaded||p._leaflet_disable_events||d.type==="click"&&this._isClickDisabled(p))){var v=d.type;v==="mousedown"&&iO(p),this._fireDOMEvent(d,v)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(d,p,v){if(d.type==="click"){var b=n({},d);b.type="preclick",this._fireDOMEvent(b,b.type,v)}var D=this._findEventTargets(d,p);if(v){for(var T=[],B=0;B<v.length;B++)v[B].listens(p,!0)&&T.push(v[B]);D=T.concat(D)}if(D.length){p==="contextmenu"&&Ro(d);var U=D[0],Y={originalEvent:d};if(d.type!=="keypress"&&d.type!=="keydown"&&d.type!=="keyup"){var de=U.getLatLng&&(!U._radius||U._radius<=10);Y.containerPoint=de?this.latLngToContainerPoint(U.getLatLng()):this.mouseEventToContainerPoint(d),Y.layerPoint=this.containerPointToLayerPoint(Y.containerPoint),Y.latlng=de?U.getLatLng():this.layerPointToLatLng(Y.layerPoint)}for(B=0;B<D.length;B++)if(D[B].fire(p,Y,!0),Y.originalEvent._stopped||D[B].options.bubblingMouseEvents===!1&&S(this._mouseEvents,p)!==-1)return}},_draggableMoved:function(d){return d=d.dragging&&d.dragging.enabled()?d:this,d.dragging&&d.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var d=0,p=this._handlers.length;d<p;d++)this._handlers[d].disable()},whenReady:function(d,p){return this._loaded?d.call(p||this,{target:this}):this.on("load",d,p),this},_getMapPanePos:function(){return fh(this._mapPane)||new Le(0,0)},_moved:function(){var d=this._getMapPanePos();return d&&!d.equals([0,0])},_getTopLeftPoint:function(d,p){var v=d&&p!==void 0?this._getNewPixelOrigin(d,p):this.getPixelOrigin();return v.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(d,p){var v=this.getSize()._divideBy(2);return this.project(d,p)._subtract(v)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(d,p,v){var b=this._getNewPixelOrigin(v,p);return this.project(d,p)._subtract(b)},_latLngBoundsToNewLayerBounds:function(d,p,v){var b=this._getNewPixelOrigin(v,p);return We([this.project(d.getSouthWest(),p)._subtract(b),this.project(d.getNorthWest(),p)._subtract(b),this.project(d.getSouthEast(),p)._subtract(b),this.project(d.getNorthEast(),p)._subtract(b)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(d){return this.latLngToLayerPoint(d).subtract(this._getCenterLayerPoint())},_limitCenter:function(d,p,v){if(!v)return d;var b=this.project(d,p),D=this.getSize().divideBy(2),T=new Ve(b.subtract(D),b.add(D)),B=this._getBoundsOffset(T,v,p);return Math.abs(B.x)<=1&&Math.abs(B.y)<=1?d:this.unproject(b.add(B),p)},_limitOffset:function(d,p){if(!p)return d;var v=this.getPixelBounds(),b=new Ve(v.min.add(d),v.max.add(d));return d.add(this._getBoundsOffset(b,p))},_getBoundsOffset:function(d,p,v){var b=We(this.project(p.getNorthEast(),v),this.project(p.getSouthWest(),v)),D=b.min.subtract(d.min),T=b.max.subtract(d.max),B=this._rebound(D.x,-T.x),U=this._rebound(D.y,-T.y);return new Le(B,U)},_rebound:function(d,p){return d+p>0?Math.round(d-p)/2:Math.max(0,Math.ceil(d))-Math.max(0,Math.floor(p))},_limitZoom:function(d){var p=this.getMinZoom(),v=this.getMaxZoom(),b=rt.any3d?this.options.zoomSnap:1;return b&&(d=Math.round(d/b)*b),Math.max(p,Math.min(v,d))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Li(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(d,p){var v=this._getCenterOffset(d)._trunc();return(p&&p.animate)!==!0&&!this.getSize().contains(v)?!1:(this.panBy(v,p),!0)},_createAnimProxy:function(){var d=this._proxy=En("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(d),this.on("zoomanim",function(p){var v=YA,b=this._proxy.style[v];ph(this._proxy,this.project(p.center,p.zoom),this.getZoomScale(p.zoom,1)),b===this._proxy.style[v]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){bi(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var d=this.getCenter(),p=this.getZoom();ph(this._proxy,this.project(d,p),this.getZoomScale(p,1))},_catchTransitionEnd:function(d){this._animatingZoom&&d.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(d,p,v){if(this._animatingZoom)return!0;if(v=v||{},!this._zoomAnimated||v.animate===!1||this._nothingToAnimate()||Math.abs(p-this._zoom)>this.options.zoomAnimationThreshold)return!1;var b=this.getZoomScale(p),D=this._getCenterOffset(d)._divideBy(1-1/b);return v.animate!==!0&&!this.getSize().contains(D)?!1:(ae(function(){this._moveStart(!0,v.noMoveStart||!1)._animateZoom(d,p,!0)},this),!0)},_animateZoom:function(d,p,v,b){this._mapPane&&(v&&(this._animatingZoom=!0,this._animateToCenter=d,this._animateToZoom=p,qt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:d,zoom:p,noUpdate:b}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Li(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function xve(d,p){return new mn(d,p)}var ya=ue.extend({options:{position:"topright"},initialize:function(d){m(this,d)},getPosition:function(){return this.options.position},setPosition:function(d){var p=this._map;return p&&p.removeControl(this),this.options.position=d,p&&p.addControl(this),this},getContainer:function(){return this._container},addTo:function(d){this.remove(),this._map=d;var p=this._container=this.onAdd(d),v=this.getPosition(),b=d._controlCorners[v];return qt(p,"leaflet-control"),v.indexOf("bottom")!==-1?b.insertBefore(p,b.firstChild):b.appendChild(p),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(bi(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(d){this._map&&d&&d.screenX>0&&d.screenY>0&&this._map.getContainer().focus()}}),Ay=function(d){return new ya(d)};mn.include({addControl:function(d){return d.addTo(this),this},removeControl:function(d){return d.remove(),this},_initControlPos:function(){var d=this._controlCorners={},p="leaflet-",v=this._controlContainer=En("div",p+"control-container",this._container);function b(D,T){var B=p+D+" "+p+T;d[D+T]=En("div",B,v)}b("top","left"),b("top","right"),b("bottom","left"),b("bottom","right")},_clearControlPos:function(){for(var d in this._controlCorners)bi(this._controlCorners[d]);bi(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var q7=ya.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(d,p,v,b){return v<b?-1:b<v?1:0}},initialize:function(d,p,v){m(this,v),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var b in d)this._addLayer(d[b],b);for(b in p)this._addLayer(p[b],b,!0)},onAdd:function(d){this._initLayout(),this._update(),this._map=d,d.on("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(d){return ya.prototype.addTo.call(this,d),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(d,p){return this._addLayer(d,p),this._map?this._update():this},addOverlay:function(d,p){return this._addLayer(d,p,!0),this._map?this._update():this},removeLayer:function(d){d.off("add remove",this._onLayerChange,this);var p=this._getLayer(s(d));return p&&this._layers.splice(this._layers.indexOf(p),1),this._map?this._update():this},expand:function(){qt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var d=this._map.getSize().y-(this._container.offsetTop+50);return d<this._section.clientHeight?(qt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=d+"px"):Li(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Li(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var d="leaflet-control-layers",p=this._container=En("div",d),v=this.options.collapsed;p.setAttribute("aria-haspopup",!0),Py(p),lO(p);var b=this._section=En("section",d+"-list");v&&(this._map.on("click",this.collapse,this),Nt(p,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var D=this._layersLink=En("a",d+"-toggle",p);D.href="#",D.title="Layers",D.setAttribute("role","button"),Nt(D,{keydown:function(T){T.keyCode===13&&this._expandSafely()},click:function(T){Ro(T),this._expandSafely()}},this),v||this.expand(),this._baseLayersList=En("div",d+"-base",b),this._separator=En("div",d+"-separator",b),this._overlaysList=En("div",d+"-overlays",b),p.appendChild(b)},_getLayer:function(d){for(var p=0;p<this._layers.length;p++)if(this._layers[p]&&s(this._layers[p].layer)===d)return this._layers[p]},_addLayer:function(d,p,v){this._map&&d.on("add remove",this._onLayerChange,this),this._layers.push({layer:d,name:p,overlay:v}),this.options.sortLayers&&this._layers.sort(o(function(b,D){return this.options.sortFunction(b.layer,D.layer,b.name,D.name)},this)),this.options.autoZIndex&&d.setZIndex&&(this._lastZIndex++,d.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;SS(this._baseLayersList),SS(this._overlaysList),this._layerControlInputs=[];var d,p,v,b,D=0;for(v=0;v<this._layers.length;v++)b=this._layers[v],this._addItem(b),p=p||b.overlay,d=d||!b.overlay,D+=b.overlay?0:1;return this.options.hideSingleBase&&(d=d&&D>1,this._baseLayersList.style.display=d?"":"none"),this._separator.style.display=p&&d?"":"none",this},_onLayerChange:function(d){this._handlingClick||this._update();var p=this._getLayer(s(d.target)),v=p.overlay?d.type==="add"?"overlayadd":"overlayremove":d.type==="add"?"baselayerchange":null;v&&this._map.fire(v,p)},_createRadioElement:function(d,p){var v='<input type="radio" class="leaflet-control-layers-selector" name="'+d+'"'+(p?' checked="checked"':"")+"/>",b=document.createElement("div");return b.innerHTML=v,b.firstChild},_addItem:function(d){var p=document.createElement("label"),v=this._map.hasLayer(d.layer),b;d.overlay?(b=document.createElement("input"),b.type="checkbox",b.className="leaflet-control-layers-selector",b.defaultChecked=v):b=this._createRadioElement("leaflet-base-layers_"+s(this),v),this._layerControlInputs.push(b),b.layerId=s(d.layer),Nt(b,"click",this._onInputClick,this);var D=document.createElement("span");D.innerHTML=" "+d.name;var T=document.createElement("span");p.appendChild(T),T.appendChild(b),T.appendChild(D);var B=d.overlay?this._overlaysList:this._baseLayersList;return B.appendChild(p),this._checkDisabledLayers(),p},_onInputClick:function(){if(!this._preventClick){var d=this._layerControlInputs,p,v,b=[],D=[];this._handlingClick=!0;for(var T=d.length-1;T>=0;T--)p=d[T],v=this._getLayer(p.layerId).layer,p.checked?b.push(v):p.checked||D.push(v);for(T=0;T<D.length;T++)this._map.hasLayer(D[T])&&this._map.removeLayer(D[T]);for(T=0;T<b.length;T++)this._map.hasLayer(b[T])||this._map.addLayer(b[T]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var d=this._layerControlInputs,p,v,b=this._map.getZoom(),D=d.length-1;D>=0;D--)p=d[D],v=this._getLayer(p.layerId).layer,p.disabled=v.options.minZoom!==void 0&&b<v.options.minZoom||v.options.maxZoom!==void 0&&b>v.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var d=this._section;this._preventClick=!0,Nt(d,"click",Ro),this.expand();var p=this;setTimeout(function(){Yn(d,"click",Ro),p._preventClick=!1})}}),Sve=function(d,p,v){return new q7(d,p,v)},dO=ya.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(d){var p="leaflet-control-zoom",v=En("div",p+" leaflet-bar"),b=this.options;return this._zoomInButton=this._createButton(b.zoomInText,b.zoomInTitle,p+"-in",v,this._zoomIn),this._zoomOutButton=this._createButton(b.zoomOutText,b.zoomOutTitle,p+"-out",v,this._zoomOut),this._updateDisabled(),d.on("zoomend zoomlevelschange",this._updateDisabled,this),v},onRemove:function(d){d.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(d){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(d.shiftKey?3:1))},_zoomOut:function(d){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(d.shiftKey?3:1))},_createButton:function(d,p,v,b,D){var T=En("a",v,b);return T.innerHTML=d,T.href="#",T.title=p,T.setAttribute("role","button"),T.setAttribute("aria-label",p),Py(T),Nt(T,"click",gh),Nt(T,"click",D,this),Nt(T,"click",this._refocusOnMap,this),T},_updateDisabled:function(){var d=this._map,p="leaflet-disabled";Li(this._zoomInButton,p),Li(this._zoomOutButton,p),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||d._zoom===d.getMinZoom())&&(qt(this._zoomOutButton,p),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||d._zoom===d.getMaxZoom())&&(qt(this._zoomInButton,p),this._zoomInButton.setAttribute("aria-disabled","true"))}});mn.mergeOptions({zoomControl:!0}),mn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new dO,this.addControl(this.zoomControl))});var Eve=function(d){return new dO(d)},K7=ya.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(d){var p="leaflet-control-scale",v=En("div",p),b=this.options;return this._addScales(b,p+"-line",v),d.on(b.updateWhenIdle?"moveend":"move",this._update,this),d.whenReady(this._update,this),v},onRemove:function(d){d.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(d,p,v){d.metric&&(this._mScale=En("div",p,v)),d.imperial&&(this._iScale=En("div",p,v))},_update:function(){var d=this._map,p=d.getSize().y/2,v=d.distance(d.containerPointToLatLng([0,p]),d.containerPointToLatLng([this.options.maxWidth,p]));this._updateScales(v)},_updateScales:function(d){this.options.metric&&d&&this._updateMetric(d),this.options.imperial&&d&&this._updateImperial(d)},_updateMetric:function(d){var p=this._getRoundNum(d),v=p<1e3?p+" m":p/1e3+" km";this._updateScale(this._mScale,v,p/d)},_updateImperial:function(d){var p=d*3.2808399,v,b,D;p>5280?(v=p/5280,b=this._getRoundNum(v),this._updateScale(this._iScale,b+" mi",b/v)):(D=this._getRoundNum(p),this._updateScale(this._iScale,D+" ft",D/p))},_updateScale:function(d,p,v){d.style.width=Math.round(this.options.maxWidth*v)+"px",d.innerHTML=p},_getRoundNum:function(d){var p=Math.pow(10,(Math.floor(d)+"").length-1),v=d/p;return v=v>=10?10:v>=5?5:v>=3?3:v>=2?2:1,p*v}}),Dve=function(d){return new K7(d)},kve='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',uO=ya.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(rt.inlineSvg?kve+" ":"")+"Leaflet</a>"},initialize:function(d){m(this,d),this._attributions={}},onAdd:function(d){d.attributionControl=this,this._container=En("div","leaflet-control-attribution"),Py(this._container);for(var p in d._layers)d._layers[p].getAttribution&&this.addAttribution(d._layers[p].getAttribution());return this._update(),d.on("layeradd",this._addAttribution,this),this._container},onRemove:function(d){d.off("layeradd",this._addAttribution,this)},_addAttribution:function(d){d.layer.getAttribution&&(this.addAttribution(d.layer.getAttribution()),d.layer.once("remove",function(){this.removeAttribution(d.layer.getAttribution())},this))},setPrefix:function(d){return this.options.prefix=d,this._update(),this},addAttribution:function(d){return d?(this._attributions[d]||(this._attributions[d]=0),this._attributions[d]++,this._update(),this):this},removeAttribution:function(d){return d?(this._attributions[d]&&(this._attributions[d]--,this._update()),this):this},_update:function(){if(this._map){var d=[];for(var p in this._attributions)this._attributions[p]&&d.push(p);var v=[];this.options.prefix&&v.push(this.options.prefix),d.length&&v.push(d.join(", ")),this._container.innerHTML=v.join(' <span aria-hidden="true">|</span> ')}}});mn.mergeOptions({attributionControl:!0}),mn.addInitHook(function(){this.options.attributionControl&&new uO().addTo(this)});var Ive=function(d){return new uO(d)};ya.Layers=q7,ya.Zoom=dO,ya.Scale=K7,ya.Attribution=uO,Ay.layers=Sve,Ay.zoom=Eve,Ay.scale=Dve,Ay.attribution=Ive;var sl=ue.extend({initialize:function(d){this._map=d},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});sl.addTo=function(d,p){return d.addHandler(p,this),this};var Mve={Events:Ne},Z7=rt.touch?"touchstart mousedown":"mousedown",Od=Pe.extend({options:{clickTolerance:3},initialize:function(d,p,v,b){m(this,b),this._element=d,this._dragStartTarget=p||d,this._preventOutline=v},enable:function(){this._enabled||(Nt(this._dragStartTarget,Z7,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Od._dragging===this&&this.finishDrag(!0),Yn(this._dragStartTarget,Z7,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(d){if(this._enabled&&(this._moved=!1,!QA(this._element,"leaflet-zoom-anim"))){if(d.touches&&d.touches.length!==1){Od._dragging===this&&this.finishDrag();return}if(!(Od._dragging||d.shiftKey||d.which!==1&&d.button!==1&&!d.touches)&&(Od._dragging=this,this._preventOutline&&iO(this._element),eO(),My(),!this._moving)){this.fire("down");var p=d.touches?d.touches[0]:d,v=H7(this._element);this._startPoint=new Le(p.clientX,p.clientY),this._startPos=fh(this._element),this._parentScale=oO(v);var b=d.type==="mousedown";Nt(document,b?"mousemove":"touchmove",this._onMove,this),Nt(document,b?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(d){if(this._enabled){if(d.touches&&d.touches.length>1){this._moved=!0;return}var p=d.touches&&d.touches.length===1?d.touches[0]:d,v=new Le(p.clientX,p.clientY)._subtract(this._startPoint);!v.x&&!v.y||Math.abs(v.x)+Math.abs(v.y)<this.options.clickTolerance||(v.x/=this._parentScale.x,v.y/=this._parentScale.y,Ro(d),this._moved||(this.fire("dragstart"),this._moved=!0,qt(document.body,"leaflet-dragging"),this._lastTarget=d.target||d.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),qt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(v),this._moving=!0,this._lastEvent=d,this._updatePosition())}},_updatePosition:function(){var d={originalEvent:this._lastEvent};this.fire("predrag",d),Qi(this._element,this._newPos),this.fire("drag",d)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(d){Li(document.body,"leaflet-dragging"),this._lastTarget&&(Li(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Yn(document,"mousemove touchmove",this._onMove,this),Yn(document,"mouseup touchend touchcancel",this._onUp,this),tO(),Ry();var p=this._moved&&this._moving;this._moving=!1,Od._dragging=!1,p&&this.fire("dragend",{noInertia:d,distance:this._newPos.distanceTo(this._startPos)})}});function Y7(d,p,v){var b,D=[1,4,2,8],T,B,U,Y,de,Ue,St,nn;for(T=0,Ue=d.length;T<Ue;T++)d[T]._code=vh(d[T],p);for(U=0;U<4;U++){for(St=D[U],b=[],T=0,Ue=d.length,B=Ue-1;T<Ue;B=T++)Y=d[T],de=d[B],Y._code&St?de._code&St||(nn=MS(de,Y,St,p,v),nn._code=vh(nn,p),b.push(nn)):(de._code&St&&(nn=MS(de,Y,St,p,v),nn._code=vh(nn,p),b.push(nn)),b.push(Y));d=b}return d}function Q7(d,p){var v,b,D,T,B,U,Y,de,Ue;if(!d||d.length===0)throw new Error("latlngs not passed");Ls(d)||(console.warn("latlngs are not flat! Only the first ring will be used"),d=d[0]);var St=jt([0,0]),nn=It(d),vr=nn.getNorthWest().distanceTo(nn.getSouthWest())*nn.getNorthEast().distanceTo(nn.getNorthWest());vr<1700&&(St=hO(d));var xo=d.length,Ns=[];for(v=0;v<xo;v++){var Br=jt(d[v]);Ns.push(p.project(jt([Br.lat-St.lat,Br.lng-St.lng])))}for(U=Y=de=0,v=0,b=xo-1;v<xo;b=v++)D=Ns[v],T=Ns[b],B=D.y*T.x-T.y*D.x,Y+=(D.x+T.x)*B,de+=(D.y+T.y)*B,U+=B*3;U===0?Ue=Ns[0]:Ue=[Y/U,de/U];var qf=p.unproject(ve(Ue));return jt([qf.lat+St.lat,qf.lng+St.lng])}function hO(d){for(var p=0,v=0,b=0,D=0;D<d.length;D++){var T=jt(d[D]);p+=T.lat,v+=T.lng,b++}return jt([p/b,v/b])}var Rve={__proto__:null,clipPolygon:Y7,polygonCenter:Q7,centroid:hO};function J7(d,p){if(!p||!d.length)return d.slice();var v=p*p;return d=Ave(d,v),d=Pve(d,v),d}function X7(d,p,v){return Math.sqrt(Oy(d,p,v,!0))}function Tve(d,p,v){return Oy(d,p,v)}function Pve(d,p){var v=d.length,b=typeof Uint8Array<"u"?Uint8Array:Array,D=new b(v);D[0]=D[v-1]=1,pO(d,D,p,0,v-1);var T,B=[];for(T=0;T<v;T++)D[T]&&B.push(d[T]);return B}function pO(d,p,v,b,D){var T=0,B,U,Y;for(U=b+1;U<=D-1;U++)Y=Oy(d[U],d[b],d[D],!0),Y>T&&(B=U,T=Y);T>v&&(p[B]=1,pO(d,p,v,b,B),pO(d,p,v,B,D))}function Ave(d,p){for(var v=[d[0]],b=1,D=0,T=d.length;b<T;b++)Ove(d[b],d[D])>p&&(v.push(d[b]),D=b);return D<T-1&&v.push(d[T-1]),v}var eU;function tU(d,p,v,b,D){var T=b?eU:vh(d,v),B=vh(p,v),U,Y,de;for(eU=B;;){if(!(T|B))return[d,p];if(T&B)return!1;U=T||B,Y=MS(d,p,U,v,D),de=vh(Y,v),U===T?(d=Y,T=de):(p=Y,B=de)}}function MS(d,p,v,b,D){var T=p.x-d.x,B=p.y-d.y,U=b.min,Y=b.max,de,Ue;return v&8?(de=d.x+T*(Y.y-d.y)/B,Ue=Y.y):v&4?(de=d.x+T*(U.y-d.y)/B,Ue=U.y):v&2?(de=Y.x,Ue=d.y+B*(Y.x-d.x)/T):v&1&&(de=U.x,Ue=d.y+B*(U.x-d.x)/T),new Le(de,Ue,D)}function vh(d,p){var v=0;return d.x<p.min.x?v|=1:d.x>p.max.x&&(v|=2),d.y<p.min.y?v|=4:d.y>p.max.y&&(v|=8),v}function Ove(d,p){var v=p.x-d.x,b=p.y-d.y;return v*v+b*b}function Oy(d,p,v,b){var D=p.x,T=p.y,B=v.x-D,U=v.y-T,Y=B*B+U*U,de;return Y>0&&(de=((d.x-D)*B+(d.y-T)*U)/Y,de>1?(D=v.x,T=v.y):de>0&&(D+=B*de,T+=U*de)),B=d.x-D,U=d.y-T,b?B*B+U*U:new Le(D,T)}function Ls(d){return!C(d[0])||typeof d[0][0]!="object"&&typeof d[0][0]<"u"}function nU(d){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ls(d)}function iU(d,p){var v,b,D,T,B,U,Y,de;if(!d||d.length===0)throw new Error("latlngs not passed");Ls(d)||(console.warn("latlngs are not flat! Only the first ring will be used"),d=d[0]);var Ue=jt([0,0]),St=It(d),nn=St.getNorthWest().distanceTo(St.getSouthWest())*St.getNorthEast().distanceTo(St.getNorthWest());nn<1700&&(Ue=hO(d));var vr=d.length,xo=[];for(v=0;v<vr;v++){var Ns=jt(d[v]);xo.push(p.project(jt([Ns.lat-Ue.lat,Ns.lng-Ue.lng])))}for(v=0,b=0;v<vr-1;v++)b+=xo[v].distanceTo(xo[v+1])/2;if(b===0)de=xo[0];else for(v=0,T=0;v<vr-1;v++)if(B=xo[v],U=xo[v+1],D=B.distanceTo(U),T+=D,T>b){Y=(T-b)/D,de=[U.x-Y*(U.x-B.x),U.y-Y*(U.y-B.y)];break}var Br=p.unproject(ve(de));return jt([Br.lat+Ue.lat,Br.lng+Ue.lng])}var Fve={__proto__:null,simplify:J7,pointToSegmentDistance:X7,closestPointOnSegment:Tve,clipSegment:tU,_getEdgeIntersection:MS,_getBitCode:vh,_sqClosestPointOnSegment:Oy,isFlat:Ls,_flat:nU,polylineCenter:iU},fO={project:function(d){return new Le(d.lng,d.lat)},unproject:function(d){return new Dt(d.y,d.x)},bounds:new Ve([-180,-90],[180,90])},mO={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Ve([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(d){var p=Math.PI/180,v=this.R,b=d.lat*p,D=this.R_MINOR/v,T=Math.sqrt(1-D*D),B=T*Math.sin(b),U=Math.tan(Math.PI/4-b/2)/Math.pow((1-B)/(1+B),T/2);return b=-v*Math.log(Math.max(U,1e-10)),new Le(d.lng*p*v,b)},unproject:function(d){for(var p=180/Math.PI,v=this.R,b=this.R_MINOR/v,D=Math.sqrt(1-b*b),T=Math.exp(-d.y/v),B=Math.PI/2-2*Math.atan(T),U=0,Y=.1,de;U<15&&Math.abs(Y)>1e-7;U++)de=D*Math.sin(B),de=Math.pow((1-de)/(1+de),D/2),Y=Math.PI/2-2*Math.atan(T*de)-B,B+=Y;return new Dt(B*p,d.x*p/v)}},Lve={__proto__:null,LonLat:fO,Mercator:mO,SphericalMercator:Sy},Nve=n({},Nr,{code:"EPSG:3395",projection:mO,transformation:(function(){var d=.5/(Math.PI*mO.R);return Ey(d,.5,-d,.5)})()}),oU=n({},Nr,{code:"EPSG:4326",projection:fO,transformation:Ey(1/180,1,-1/180,.5)}),Bve=n({},yi,{projection:fO,transformation:Ey(1,0,-1,0),scale:function(d){return Math.pow(2,d)},zoom:function(d){return Math.log(d)/Math.LN2},distance:function(d,p){var v=p.lng-d.lng,b=p.lat-d.lat;return Math.sqrt(v*v+b*b)},infinite:!0});yi.Earth=Nr,yi.EPSG3395=Nve,yi.EPSG3857=jA,yi.EPSG900913=Gge,yi.EPSG4326=oU,yi.Simple=Bve;var ba=Pe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(d){return d.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(d){return d&&d.removeLayer(this),this},getPane:function(d){return this._map.getPane(d?this.options[d]||d:this.options.pane)},addInteractiveTarget:function(d){return this._map._targets[s(d)]=this,this},removeInteractiveTarget:function(d){return delete this._map._targets[s(d)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(d){var p=d.target;if(p.hasLayer(this)){if(this._map=p,this._zoomAnimated=p._zoomAnimated,this.getEvents){var v=this.getEvents();p.on(v,this),this.once("remove",function(){p.off(v,this)},this)}this.onAdd(p),this.fire("add"),p.fire("layeradd",{layer:this})}}});mn.include({addLayer:function(d){if(!d._layerAdd)throw new Error("The provided object is not a Layer.");var p=s(d);return this._layers[p]?this:(this._layers[p]=d,d._mapToAdd=this,d.beforeAdd&&d.beforeAdd(this),this.whenReady(d._layerAdd,d),this)},removeLayer:function(d){var p=s(d);return this._layers[p]?(this._loaded&&d.onRemove(this),delete this._layers[p],this._loaded&&(this.fire("layerremove",{layer:d}),d.fire("remove")),d._map=d._mapToAdd=null,this):this},hasLayer:function(d){return s(d)in this._layers},eachLayer:function(d,p){for(var v in this._layers)d.call(p,this._layers[v]);return this},_addLayers:function(d){d=d?C(d)?d:[d]:[];for(var p=0,v=d.length;p<v;p++)this.addLayer(d[p])},_addZoomLimit:function(d){(!isNaN(d.options.maxZoom)||!isNaN(d.options.minZoom))&&(this._zoomBoundLayers[s(d)]=d,this._updateZoomLevels())},_removeZoomLimit:function(d){var p=s(d);this._zoomBoundLayers[p]&&(delete this._zoomBoundLayers[p],this._updateZoomLevels())},_updateZoomLevels:function(){var d=1/0,p=-1/0,v=this._getZoomSpan();for(var b in this._zoomBoundLayers){var D=this._zoomBoundLayers[b].options;d=D.minZoom===void 0?d:Math.min(d,D.minZoom),p=D.maxZoom===void 0?p:Math.max(p,D.maxZoom)}this._layersMaxZoom=p===-1/0?void 0:p,this._layersMinZoom=d===1/0?void 0:d,v!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var $f=ba.extend({initialize:function(d,p){m(this,p),this._layers={};var v,b;if(d)for(v=0,b=d.length;v<b;v++)this.addLayer(d[v])},addLayer:function(d){var p=this.getLayerId(d);return this._layers[p]=d,this._map&&this._map.addLayer(d),this},removeLayer:function(d){var p=d in this._layers?d:this.getLayerId(d);return this._map&&this._layers[p]&&this._map.removeLayer(this._layers[p]),delete this._layers[p],this},hasLayer:function(d){var p=typeof d=="number"?d:this.getLayerId(d);return p in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(d){var p=Array.prototype.slice.call(arguments,1),v,b;for(v in this._layers)b=this._layers[v],b[d]&&b[d].apply(b,p);return this},onAdd:function(d){this.eachLayer(d.addLayer,d)},onRemove:function(d){this.eachLayer(d.removeLayer,d)},eachLayer:function(d,p){for(var v in this._layers)d.call(p,this._layers[v]);return this},getLayer:function(d){return this._layers[d]},getLayers:function(){var d=[];return this.eachLayer(d.push,d),d},setZIndex:function(d){return this.invoke("setZIndex",d)},getLayerId:function(d){return s(d)}}),zve=function(d,p){return new $f(d,p)},uc=$f.extend({addLayer:function(d){return this.hasLayer(d)?this:(d.addEventParent(this),$f.prototype.addLayer.call(this,d),this.fire("layeradd",{layer:d}))},removeLayer:function(d){return this.hasLayer(d)?(d in this._layers&&(d=this._layers[d]),d.removeEventParent(this),$f.prototype.removeLayer.call(this,d),this.fire("layerremove",{layer:d})):this},setStyle:function(d){return this.invoke("setStyle",d)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var d=new vt;for(var p in this._layers){var v=this._layers[p];d.extend(v.getBounds?v.getBounds():v.getLatLng())}return d}}),Vve=function(d,p){return new uc(d,p)},jf=ue.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(d){m(this,d)},createIcon:function(d){return this._createIcon("icon",d)},createShadow:function(d){return this._createIcon("shadow",d)},_createIcon:function(d,p){var v=this._getIconUrl(d);if(!v){if(d==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var b=this._createImg(v,p&&p.tagName==="IMG"?p:null);return this._setIconStyles(b,d),(this.options.crossOrigin||this.options.crossOrigin==="")&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),b},_setIconStyles:function(d,p){var v=this.options,b=v[p+"Size"];typeof b=="number"&&(b=[b,b]);var D=ve(b),T=ve(p==="shadow"&&v.shadowAnchor||v.iconAnchor||D&&D.divideBy(2,!0));d.className="leaflet-marker-"+p+" "+(v.className||""),T&&(d.style.marginLeft=-T.x+"px",d.style.marginTop=-T.y+"px"),D&&(d.style.width=D.x+"px",d.style.height=D.y+"px")},_createImg:function(d,p){return p=p||document.createElement("img"),p.src=d,p},_getIconUrl:function(d){return rt.retina&&this.options[d+"RetinaUrl"]||this.options[d+"Url"]}});function Hve(d){return new jf(d)}var Fy=jf.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(d){return typeof Fy.imagePath!="string"&&(Fy.imagePath=this._detectIconPath()),(this.options.imagePath||Fy.imagePath)+jf.prototype._getIconUrl.call(this,d)},_stripUrl:function(d){var p=function(v,b,D){var T=b.exec(v);return T&&T[D]};return d=p(d,/^url\((['"])?(.+)\1\)$/,2),d&&p(d,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var d=En("div","leaflet-default-icon-path",document.body),p=Iy(d,"background-image")||Iy(d,"backgroundImage");if(document.body.removeChild(d),p=this._stripUrl(p),p)return p;var v=document.querySelector('link[href$="leaflet.css"]');return v?v.href.substring(0,v.href.length-11-1):""}}),rU=sl.extend({initialize:function(d){this._marker=d},addHooks:function(){var d=this._marker._icon;this._draggable||(this._draggable=new Od(d,d,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),qt(d,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Li(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(d){var p=this._marker,v=p._map,b=this._marker.options.autoPanSpeed,D=this._marker.options.autoPanPadding,T=fh(p._icon),B=v.getPixelBounds(),U=v.getPixelOrigin(),Y=We(B.min._subtract(U).add(D),B.max._subtract(U).subtract(D));if(!Y.contains(T)){var de=ve((Math.max(Y.max.x,T.x)-Y.max.x)/(B.max.x-Y.max.x)-(Math.min(Y.min.x,T.x)-Y.min.x)/(B.min.x-Y.min.x),(Math.max(Y.max.y,T.y)-Y.max.y)/(B.max.y-Y.max.y)-(Math.min(Y.min.y,T.y)-Y.min.y)/(B.min.y-Y.min.y)).multiplyBy(b);v.panBy(de,{animate:!1}),this._draggable._newPos._add(de),this._draggable._startPos._add(de),Qi(p._icon,this._draggable._newPos),this._onDrag(d),this._panRequest=ae(this._adjustPan.bind(this,d))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(d){this._marker.options.autoPan&&(se(this._panRequest),this._panRequest=ae(this._adjustPan.bind(this,d)))},_onDrag:function(d){var p=this._marker,v=p._shadow,b=fh(p._icon),D=p._map.layerPointToLatLng(b);v&&Qi(v,b),p._latlng=D,d.latlng=D,d.oldLatLng=this._oldLatLng,p.fire("move",d).fire("drag",d)},_onDragEnd:function(d){se(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",d)}}),RS=ba.extend({options:{icon:new Fy,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(d,p){m(this,p),this._latlng=jt(d)},onAdd:function(d){this._zoomAnimated=this._zoomAnimated&&d.options.markerZoomAnimation,this._zoomAnimated&&d.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(d){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&d.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(d){var p=this._latlng;return this._latlng=jt(d),this.update(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},setZIndexOffset:function(d){return this.options.zIndexOffset=d,this.update()},getIcon:function(){return this.options.icon},setIcon:function(d){return this.options.icon=d,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var d=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(d)}return this},_initIcon:function(){var d=this.options,p="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),v=d.icon.createIcon(this._icon),b=!1;v!==this._icon&&(this._icon&&this._removeIcon(),b=!0,d.title&&(v.title=d.title),v.tagName==="IMG"&&(v.alt=d.alt||"")),qt(v,p),d.keyboard&&(v.tabIndex="0",v.setAttribute("role","button")),this._icon=v,d.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Nt(v,"focus",this._panOnFocus,this);var D=d.icon.createShadow(this._shadow),T=!1;D!==this._shadow&&(this._removeShadow(),T=!0),D&&(qt(D,p),D.alt=""),this._shadow=D,d.opacity<1&&this._updateOpacity(),b&&this.getPane().appendChild(this._icon),this._initInteraction(),D&&T&&this.getPane(d.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Yn(this._icon,"focus",this._panOnFocus,this),bi(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&bi(this._shadow),this._shadow=null},_setPos:function(d){this._icon&&Qi(this._icon,d),this._shadow&&Qi(this._shadow,d),this._zIndex=d.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(d){this._icon&&(this._icon.style.zIndex=this._zIndex+d)},_animateZoom:function(d){var p=this._map._latLngToNewLayerPoint(this._latlng,d.zoom,d.center).round();this._setPos(p)},_initInteraction:function(){if(this.options.interactive&&(qt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),rU)){var d=this.options.draggable;this.dragging&&(d=this.dragging.enabled(),this.dragging.disable()),this.dragging=new rU(this),d&&this.dragging.enable()}},setOpacity:function(d){return this.options.opacity=d,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var d=this.options.opacity;this._icon&&Fs(this._icon,d),this._shadow&&Fs(this._shadow,d)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var d=this._map;if(d){var p=this.options.icon.options,v=p.iconSize?ve(p.iconSize):ve(0,0),b=p.iconAnchor?ve(p.iconAnchor):ve(0,0);d.panInside(this._latlng,{paddingTopLeft:b,paddingBottomRight:v.subtract(b)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function $ve(d,p){return new RS(d,p)}var Fd=ba.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(d){this._renderer=d.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(d){return m(this,d),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&d&&Object.prototype.hasOwnProperty.call(d,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),TS=Fd.extend({options:{fill:!0,radius:10},initialize:function(d,p){m(this,p),this._latlng=jt(d),this._radius=this.options.radius},setLatLng:function(d){var p=this._latlng;return this._latlng=jt(d),this.redraw(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(d){return this.options.radius=this._radius=d,this.redraw()},getRadius:function(){return this._radius},setStyle:function(d){var p=d&&d.radius||this._radius;return Fd.prototype.setStyle.call(this,d),this.setRadius(p),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var d=this._radius,p=this._radiusY||d,v=this._clickTolerance(),b=[d+v,p+v];this._pxBounds=new Ve(this._point.subtract(b),this._point.add(b))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(d){return d.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function jve(d,p){return new TS(d,p)}var gO=TS.extend({initialize:function(d,p,v){if(typeof p=="number"&&(p=n({},v,{radius:p})),m(this,p),this._latlng=jt(d),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(d){return this._mRadius=d,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var d=[this._radius,this._radiusY||this._radius];return new vt(this._map.layerPointToLatLng(this._point.subtract(d)),this._map.layerPointToLatLng(this._point.add(d)))},setStyle:Fd.prototype.setStyle,_project:function(){var d=this._latlng.lng,p=this._latlng.lat,v=this._map,b=v.options.crs;if(b.distance===Nr.distance){var D=Math.PI/180,T=this._mRadius/Nr.R/D,B=v.project([p+T,d]),U=v.project([p-T,d]),Y=B.add(U).divideBy(2),de=v.unproject(Y).lat,Ue=Math.acos((Math.cos(T*D)-Math.sin(p*D)*Math.sin(de*D))/(Math.cos(p*D)*Math.cos(de*D)))/D;(isNaN(Ue)||Ue===0)&&(Ue=T/Math.cos(Math.PI/180*p)),this._point=Y.subtract(v.getPixelOrigin()),this._radius=isNaN(Ue)?0:Y.x-v.project([de,d-Ue]).x,this._radiusY=Y.y-B.y}else{var St=b.unproject(b.project(this._latlng).subtract([this._mRadius,0]));this._point=v.latLngToLayerPoint(this._latlng),this._radius=this._point.x-v.latLngToLayerPoint(St).x}this._updateBounds()}});function Gve(d,p,v){return new gO(d,p,v)}var hc=Fd.extend({options:{smoothFactor:1,noClip:!1},initialize:function(d,p){m(this,p),this._setLatLngs(d)},getLatLngs:function(){return this._latlngs},setLatLngs:function(d){return this._setLatLngs(d),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(d){for(var p=1/0,v=null,b=Oy,D,T,B=0,U=this._parts.length;B<U;B++)for(var Y=this._parts[B],de=1,Ue=Y.length;de<Ue;de++){D=Y[de-1],T=Y[de];var St=b(d,D,T,!0);St<p&&(p=St,v=b(d,D,T))}return v&&(v.distance=Math.sqrt(p)),v},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return iU(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(d,p){return p=p||this._defaultShape(),d=jt(d),p.push(d),this._bounds.extend(d),this.redraw()},_setLatLngs:function(d){this._bounds=new vt,this._latlngs=this._convertLatLngs(d)},_defaultShape:function(){return Ls(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(d){for(var p=[],v=Ls(d),b=0,D=d.length;b<D;b++)v?(p[b]=jt(d[b]),this._bounds.extend(p[b])):p[b]=this._convertLatLngs(d[b]);return p},_project:function(){var d=new Ve;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,d),this._bounds.isValid()&&d.isValid()&&(this._rawPxBounds=d,this._updateBounds())},_updateBounds:function(){var d=this._clickTolerance(),p=new Le(d,d);this._rawPxBounds&&(this._pxBounds=new Ve([this._rawPxBounds.min.subtract(p),this._rawPxBounds.max.add(p)]))},_projectLatlngs:function(d,p,v){var b=d[0]instanceof Dt,D=d.length,T,B;if(b){for(B=[],T=0;T<D;T++)B[T]=this._map.latLngToLayerPoint(d[T]),v.extend(B[T]);p.push(B)}else for(T=0;T<D;T++)this._projectLatlngs(d[T],p,v)},_clipPoints:function(){var d=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(d))){if(this.options.noClip){this._parts=this._rings;return}var p=this._parts,v,b,D,T,B,U,Y;for(v=0,D=0,T=this._rings.length;v<T;v++)for(Y=this._rings[v],b=0,B=Y.length;b<B-1;b++)U=tU(Y[b],Y[b+1],d,b,!0),U&&(p[D]=p[D]||[],p[D].push(U[0]),(U[1]!==Y[b+1]||b===B-2)&&(p[D].push(U[1]),D++))}},_simplifyPoints:function(){for(var d=this._parts,p=this.options.smoothFactor,v=0,b=d.length;v<b;v++)d[v]=J7(d[v],p)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(d,p){var v,b,D,T,B,U,Y=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(d))return!1;for(v=0,T=this._parts.length;v<T;v++)for(U=this._parts[v],b=0,B=U.length,D=B-1;b<B;D=b++)if(!(!p&&b===0)&&X7(d,U[D],U[b])<=Y)return!0;return!1}});function Uve(d,p){return new hc(d,p)}hc._flat=nU;var Gf=hc.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Q7(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(d){var p=hc.prototype._convertLatLngs.call(this,d),v=p.length;return v>=2&&p[0]instanceof Dt&&p[0].equals(p[v-1])&&p.pop(),p},_setLatLngs:function(d){hc.prototype._setLatLngs.call(this,d),Ls(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ls(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var d=this._renderer._bounds,p=this.options.weight,v=new Le(p,p);if(d=new Ve(d.min.subtract(v),d.max.add(v)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(d))){if(this.options.noClip){this._parts=this._rings;return}for(var b=0,D=this._rings.length,T;b<D;b++)T=Y7(this._rings[b],d,!0),T.length&&this._parts.push(T)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(d){var p=!1,v,b,D,T,B,U,Y,de;if(!this._pxBounds||!this._pxBounds.contains(d))return!1;for(T=0,Y=this._parts.length;T<Y;T++)for(v=this._parts[T],B=0,de=v.length,U=de-1;B<de;U=B++)b=v[B],D=v[U],b.y>d.y!=D.y>d.y&&d.x<(D.x-b.x)*(d.y-b.y)/(D.y-b.y)+b.x&&(p=!p);return p||hc.prototype._containsPoint.call(this,d,!0)}});function Wve(d,p){return new Gf(d,p)}var pc=uc.extend({initialize:function(d,p){m(this,p),this._layers={},d&&this.addData(d)},addData:function(d){var p=C(d)?d:d.features,v,b,D;if(p){for(v=0,b=p.length;v<b;v++)D=p[v],(D.geometries||D.geometry||D.features||D.coordinates)&&this.addData(D);return this}var T=this.options;if(T.filter&&!T.filter(d))return this;var B=PS(d,T);return B?(B.feature=FS(d),B.defaultOptions=B.options,this.resetStyle(B),T.onEachFeature&&T.onEachFeature(d,B),this.addLayer(B)):this},resetStyle:function(d){return d===void 0?this.eachLayer(this.resetStyle,this):(d.options=n({},d.defaultOptions),this._setLayerStyle(d,this.options.style),this)},setStyle:function(d){return this.eachLayer(function(p){this._setLayerStyle(p,d)},this)},_setLayerStyle:function(d,p){d.setStyle&&(typeof p=="function"&&(p=p(d.feature)),d.setStyle(p))}});function PS(d,p){var v=d.type==="Feature"?d.geometry:d,b=v?v.coordinates:null,D=[],T=p&&p.pointToLayer,B=p&&p.coordsToLatLng||vO,U,Y,de,Ue;if(!b&&!v)return null;switch(v.type){case"Point":return U=B(b),sU(T,d,U,p);case"MultiPoint":for(de=0,Ue=b.length;de<Ue;de++)U=B(b[de]),D.push(sU(T,d,U,p));return new uc(D);case"LineString":case"MultiLineString":return Y=AS(b,v.type==="LineString"?0:1,B),new hc(Y,p);case"Polygon":case"MultiPolygon":return Y=AS(b,v.type==="Polygon"?1:2,B),new Gf(Y,p);case"GeometryCollection":for(de=0,Ue=v.geometries.length;de<Ue;de++){var St=PS({geometry:v.geometries[de],type:"Feature",properties:d.properties},p);St&&D.push(St)}return new uc(D);case"FeatureCollection":for(de=0,Ue=v.features.length;de<Ue;de++){var nn=PS(v.features[de],p);nn&&D.push(nn)}return new uc(D);default:throw new Error("Invalid GeoJSON object.")}}function sU(d,p,v,b){return d?d(p,v):new RS(v,b&&b.markersInheritOptions&&b)}function vO(d){return new Dt(d[1],d[0],d[2])}function AS(d,p,v){for(var b=[],D=0,T=d.length,B;D<T;D++)B=p?AS(d[D],p-1,v):(v||vO)(d[D]),b.push(B);return b}function _O(d,p){return d=jt(d),d.alt!==void 0?[u(d.lng,p),u(d.lat,p),u(d.alt,p)]:[u(d.lng,p),u(d.lat,p)]}function OS(d,p,v,b){for(var D=[],T=0,B=d.length;T<B;T++)D.push(p?OS(d[T],Ls(d[T])?0:p-1,v,b):_O(d[T],b));return!p&&v&&D.length>0&&D.push(D[0].slice()),D}function Uf(d,p){return d.feature?n({},d.feature,{geometry:p}):FS(p)}function FS(d){return d.type==="Feature"||d.type==="FeatureCollection"?d:{type:"Feature",properties:{},geometry:d}}var yO={toGeoJSON:function(d){return Uf(this,{type:"Point",coordinates:_O(this.getLatLng(),d)})}};RS.include(yO),gO.include(yO),TS.include(yO),hc.include({toGeoJSON:function(d){var p=!Ls(this._latlngs),v=OS(this._latlngs,p?1:0,!1,d);return Uf(this,{type:(p?"Multi":"")+"LineString",coordinates:v})}}),Gf.include({toGeoJSON:function(d){var p=!Ls(this._latlngs),v=p&&!Ls(this._latlngs[0]),b=OS(this._latlngs,v?2:p?1:0,!0,d);return p||(b=[b]),Uf(this,{type:(v?"Multi":"")+"Polygon",coordinates:b})}}),$f.include({toMultiPoint:function(d){var p=[];return this.eachLayer(function(v){p.push(v.toGeoJSON(d).geometry.coordinates)}),Uf(this,{type:"MultiPoint",coordinates:p})},toGeoJSON:function(d){var p=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(p==="MultiPoint")return this.toMultiPoint(d);var v=p==="GeometryCollection",b=[];return this.eachLayer(function(D){if(D.toGeoJSON){var T=D.toGeoJSON(d);if(v)b.push(T.geometry);else{var B=FS(T);B.type==="FeatureCollection"?b.push.apply(b,B.features):b.push(B)}}}),v?Uf(this,{geometries:b,type:"GeometryCollection"}):{type:"FeatureCollection",features:b}}});function aU(d,p){return new pc(d,p)}var qve=aU,LS=ba.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(d,p,v){this._url=d,this._bounds=It(p),m(this,v)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(qt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){bi(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(d){return this.options.opacity=d,this._image&&this._updateOpacity(),this},setStyle:function(d){return d.opacity&&this.setOpacity(d.opacity),this},bringToFront:function(){return this._map&&Vf(this._image),this},bringToBack:function(){return this._map&&Hf(this._image),this},setUrl:function(d){return this._url=d,this._image&&(this._image.src=d),this},setBounds:function(d){return this._bounds=It(d),this._map&&this._reset(),this},getEvents:function(){var d={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(d.zoomanim=this._animateZoom),d},setZIndex:function(d){return this.options.zIndex=d,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var d=this._url.tagName==="IMG",p=this._image=d?this._url:En("img");if(qt(p,"leaflet-image-layer"),this._zoomAnimated&&qt(p,"leaflet-zoom-animated"),this.options.className&&qt(p,this.options.className),p.onselectstart=c,p.onmousemove=c,p.onload=o(this.fire,this,"load"),p.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),d){this._url=p.src;return}p.src=this._url,p.alt=this.options.alt},_animateZoom:function(d){var p=this._map.getZoomScale(d.zoom),v=this._map._latLngBoundsToNewLayerBounds(this._bounds,d.zoom,d.center).min;ph(this._image,v,p)},_reset:function(){var d=this._image,p=new Ve(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),v=p.getSize();Qi(d,p.min),d.style.width=v.x+"px",d.style.height=v.y+"px"},_updateOpacity:function(){Fs(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var d=this.options.errorOverlayUrl;d&&this._url!==d&&(this._url=d,this._image.src=d)},getCenter:function(){return this._bounds.getCenter()}}),Kve=function(d,p,v){return new LS(d,p,v)},lU=LS.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var d=this._url.tagName==="VIDEO",p=this._image=d?this._url:En("video");if(qt(p,"leaflet-image-layer"),this._zoomAnimated&&qt(p,"leaflet-zoom-animated"),this.options.className&&qt(p,this.options.className),p.onselectstart=c,p.onmousemove=c,p.onloadeddata=o(this.fire,this,"load"),d){for(var v=p.getElementsByTagName("source"),b=[],D=0;D<v.length;D++)b.push(v[D].src);this._url=v.length>0?b:[p.src];return}C(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(p.style,"objectFit")&&(p.style.objectFit="fill"),p.autoplay=!!this.options.autoplay,p.loop=!!this.options.loop,p.muted=!!this.options.muted,p.playsInline=!!this.options.playsInline;for(var T=0;T<this._url.length;T++){var B=En("source");B.src=this._url[T],p.appendChild(B)}}});function Zve(d,p,v){return new lU(d,p,v)}var cU=LS.extend({_initImage:function(){var d=this._image=this._url;qt(d,"leaflet-image-layer"),this._zoomAnimated&&qt(d,"leaflet-zoom-animated"),this.options.className&&qt(d,this.options.className),d.onselectstart=c,d.onmousemove=c}});function Yve(d,p,v){return new cU(d,p,v)}var al=ba.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(d,p){d&&(d instanceof Dt||C(d))?(this._latlng=jt(d),m(this,p)):(m(this,d),this._source=p),this.options.content&&(this._content=this.options.content)},openOn:function(d){return d=arguments.length?d:this._source._map,d.hasLayer(this)||d.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(d){return this._map?this.close():(arguments.length?this._source=d:d=this._source,this._prepareOpen(),this.openOn(d._map)),this},onAdd:function(d){this._zoomAnimated=d._zoomAnimated,this._container||this._initLayout(),d._fadeAnimated&&Fs(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),d._fadeAnimated&&Fs(this._container,1),this.bringToFront(),this.options.interactive&&(qt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(d){d._fadeAnimated?(Fs(this._container,0),this._removeTimeout=setTimeout(o(bi,void 0,this._container),200)):bi(this._container),this.options.interactive&&(Li(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(d){return this._latlng=jt(d),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(d){return this._content=d,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var d={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(d.zoomanim=this._animateZoom),d},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Vf(this._container),this},bringToBack:function(){return this._map&&Hf(this._container),this},_prepareOpen:function(d){var p=this._source;if(!p._map)return!1;if(p instanceof uc){p=null;var v=this._source._layers;for(var b in v)if(v[b]._map){p=v[b];break}if(!p)return!1;this._source=p}if(!d)if(p.getCenter)d=p.getCenter();else if(p.getLatLng)d=p.getLatLng();else if(p.getBounds)d=p.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(d),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var d=this._contentNode,p=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof p=="string")d.innerHTML=p;else{for(;d.hasChildNodes();)d.removeChild(d.firstChild);d.appendChild(p)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var d=this._map.latLngToLayerPoint(this._latlng),p=ve(this.options.offset),v=this._getAnchor();this._zoomAnimated?Qi(this._container,d.add(v)):p=p.add(d).add(v);var b=this._containerBottom=-p.y,D=this._containerLeft=-Math.round(this._containerWidth/2)+p.x;this._container.style.bottom=b+"px",this._container.style.left=D+"px"}},_getAnchor:function(){return[0,0]}});mn.include({_initOverlay:function(d,p,v,b){var D=p;return D instanceof d||(D=new d(b).setContent(p)),v&&D.setLatLng(v),D}}),ba.include({_initOverlay:function(d,p,v,b){var D=v;return D instanceof d?(m(D,b),D._source=this):(D=p&&!b?p:new d(b,this),D.setContent(v)),D}});var NS=al.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(d){return d=arguments.length?d:this._source._map,!d.hasLayer(this)&&d._popup&&d._popup.options.autoClose&&d.removeLayer(d._popup),d._popup=this,al.prototype.openOn.call(this,d)},onAdd:function(d){al.prototype.onAdd.call(this,d),d.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Fd||this._source.on("preclick",mh))},onRemove:function(d){al.prototype.onRemove.call(this,d),d.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Fd||this._source.off("preclick",mh))},getEvents:function(){var d=al.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(d.preclick=this.close),this.options.keepInView&&(d.moveend=this._adjustPan),d},_initLayout:function(){var d="leaflet-popup",p=this._container=En("div",d+" "+(this.options.className||"")+" leaflet-zoom-animated"),v=this._wrapper=En("div",d+"-content-wrapper",p);if(this._contentNode=En("div",d+"-content",v),Py(p),lO(this._contentNode),Nt(p,"contextmenu",mh),this._tipContainer=En("div",d+"-tip-container",p),this._tip=En("div",d+"-tip",this._tipContainer),this.options.closeButton){var b=this._closeButton=En("a",d+"-close-button",p);b.setAttribute("role","button"),b.setAttribute("aria-label","Close popup"),b.href="#close",b.innerHTML='<span aria-hidden="true">&#215;</span>',Nt(b,"click",function(D){Ro(D),this.close()},this)}},_updateLayout:function(){var d=this._contentNode,p=d.style;p.width="",p.whiteSpace="nowrap";var v=d.offsetWidth;v=Math.min(v,this.options.maxWidth),v=Math.max(v,this.options.minWidth),p.width=v+1+"px",p.whiteSpace="",p.height="";var b=d.offsetHeight,D=this.options.maxHeight,T="leaflet-popup-scrolled";D&&b>D?(p.height=D+"px",qt(d,T)):Li(d,T),this._containerWidth=this._container.offsetWidth},_animateZoom:function(d){var p=this._map._latLngToNewLayerPoint(this._latlng,d.zoom,d.center),v=this._getAnchor();Qi(this._container,p.add(v))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var d=this._map,p=parseInt(Iy(this._container,"marginBottom"),10)||0,v=this._container.offsetHeight+p,b=this._containerWidth,D=new Le(this._containerLeft,-v-this._containerBottom);D._add(fh(this._container));var T=d.layerPointToContainerPoint(D),B=ve(this.options.autoPanPadding),U=ve(this.options.autoPanPaddingTopLeft||B),Y=ve(this.options.autoPanPaddingBottomRight||B),de=d.getSize(),Ue=0,St=0;T.x+b+Y.x>de.x&&(Ue=T.x+b-de.x+Y.x),T.x-Ue-U.x<0&&(Ue=T.x-U.x),T.y+v+Y.y>de.y&&(St=T.y+v-de.y+Y.y),T.y-St-U.y<0&&(St=T.y-U.y),(Ue||St)&&(this.options.keepInView&&(this._autopanning=!0),d.fire("autopanstart").panBy([Ue,St]))}},_getAnchor:function(){return ve(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Qve=function(d,p){return new NS(d,p)};mn.mergeOptions({closePopupOnClick:!0}),mn.include({openPopup:function(d,p,v){return this._initOverlay(NS,d,p,v).openOn(this),this},closePopup:function(d){return d=arguments.length?d:this._popup,d&&d.close(),this}}),ba.include({bindPopup:function(d,p){return this._popup=this._initOverlay(NS,this._popup,d,p),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(d){return this._popup&&(this instanceof uc||(this._popup._source=this),this._popup._prepareOpen(d||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(d){return this._popup&&this._popup.setContent(d),this},getPopup:function(){return this._popup},_openPopup:function(d){if(!(!this._popup||!this._map)){gh(d);var p=d.layer||d.target;if(this._popup._source===p&&!(p instanceof Fd)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(d.latlng);return}this._popup._source=p,this.openPopup(d.latlng)}},_movePopup:function(d){this._popup.setLatLng(d.latlng)},_onKeyPress:function(d){d.originalEvent.keyCode===13&&this._openPopup(d)}});var BS=al.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(d){al.prototype.onAdd.call(this,d),this.setOpacity(this.options.opacity),d.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(d){al.prototype.onRemove.call(this,d),d.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var d=al.prototype.getEvents.call(this);return this.options.permanent||(d.preclick=this.close),d},_initLayout:function(){var d="leaflet-tooltip",p=d+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=En("div",p),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+s(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(d){var p,v,b=this._map,D=this._container,T=b.latLngToContainerPoint(b.getCenter()),B=b.layerPointToContainerPoint(d),U=this.options.direction,Y=D.offsetWidth,de=D.offsetHeight,Ue=ve(this.options.offset),St=this._getAnchor();U==="top"?(p=Y/2,v=de):U==="bottom"?(p=Y/2,v=0):U==="center"?(p=Y/2,v=de/2):U==="right"?(p=0,v=de/2):U==="left"?(p=Y,v=de/2):B.x<T.x?(U="right",p=0,v=de/2):(U="left",p=Y+(Ue.x+St.x)*2,v=de/2),d=d.subtract(ve(p,v,!0)).add(Ue).add(St),Li(D,"leaflet-tooltip-right"),Li(D,"leaflet-tooltip-left"),Li(D,"leaflet-tooltip-top"),Li(D,"leaflet-tooltip-bottom"),qt(D,"leaflet-tooltip-"+U),Qi(D,d)},_updatePosition:function(){var d=this._map.latLngToLayerPoint(this._latlng);this._setPosition(d)},setOpacity:function(d){this.options.opacity=d,this._container&&Fs(this._container,d)},_animateZoom:function(d){var p=this._map._latLngToNewLayerPoint(this._latlng,d.zoom,d.center);this._setPosition(p)},_getAnchor:function(){return ve(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Jve=function(d,p){return new BS(d,p)};mn.include({openTooltip:function(d,p,v){return this._initOverlay(BS,d,p,v).openOn(this),this},closeTooltip:function(d){return d.close(),this}}),ba.include({bindTooltip:function(d,p){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(BS,this._tooltip,d,p),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(d){if(!(!d&&this._tooltipHandlersAdded)){var p=d?"off":"on",v={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?v.add=this._openTooltip:(v.mouseover=this._openTooltip,v.mouseout=this.closeTooltip,v.click=this._openTooltip,this._map?this._addFocusListeners():v.add=this._addFocusListeners),this._tooltip.options.sticky&&(v.mousemove=this._moveTooltip),this[p](v),this._tooltipHandlersAdded=!d}},openTooltip:function(d){return this._tooltip&&(this instanceof uc||(this._tooltip._source=this),this._tooltip._prepareOpen(d)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(d){return this._tooltip&&this._tooltip.setContent(d),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(d){var p=typeof d.getElement=="function"&&d.getElement();p&&(Nt(p,"focus",function(){this._tooltip._source=d,this.openTooltip()},this),Nt(p,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(d){var p=typeof d.getElement=="function"&&d.getElement();p&&p.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(d){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var p=this;this._map.once("moveend",function(){p._openOnceFlag=!1,p._openTooltip(d)});return}this._tooltip._source=d.layer||d.target,this.openTooltip(this._tooltip.options.sticky?d.latlng:void 0)}},_moveTooltip:function(d){var p=d.latlng,v,b;this._tooltip.options.sticky&&d.originalEvent&&(v=this._map.mouseEventToContainerPoint(d.originalEvent),b=this._map.containerPointToLayerPoint(v),p=this._map.layerPointToLatLng(b)),this._tooltip.setLatLng(p)}});var dU=jf.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(d){var p=d&&d.tagName==="DIV"?d:document.createElement("div"),v=this.options;if(v.html instanceof Element?(SS(p),p.appendChild(v.html)):p.innerHTML=v.html!==!1?v.html:"",v.bgPos){var b=ve(v.bgPos);p.style.backgroundPosition=-b.x+"px "+-b.y+"px"}return this._setIconStyles(p,"icon"),p},createShadow:function(){return null}});function Xve(d){return new dU(d)}jf.Default=Fy;var Ly=ba.extend({options:{tileSize:256,opacity:1,updateWhenIdle:rt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(d){m(this,d)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(d){d._addZoomLimit(this)},onRemove:function(d){this._removeAllTiles(),bi(this._container),d._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Vf(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Hf(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(d){return this.options.opacity=d,this._updateOpacity(),this},setZIndex:function(d){return this.options.zIndex=d,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var d=this._clampZoom(this._map.getZoom());d!==this._tileZoom&&(this._tileZoom=d,this._updateLevels()),this._update()}return this},getEvents:function(){var d={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),d.move=this._onMove),this._zoomAnimated&&(d.zoomanim=this._animateZoom),d},createTile:function(){return document.createElement("div")},getTileSize:function(){var d=this.options.tileSize;return d instanceof Le?d:new Le(d,d)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(d){for(var p=this.getPane().children,v=-d(-1/0,1/0),b=0,D=p.length,T;b<D;b++)T=p[b].style.zIndex,p[b]!==this._container&&T&&(v=d(v,+T));isFinite(v)&&(this.options.zIndex=v+d(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!rt.ielt9){Fs(this._container,this.options.opacity);var d=+new Date,p=!1,v=!1;for(var b in this._tiles){var D=this._tiles[b];if(!(!D.current||!D.loaded)){var T=Math.min(1,(d-D.loaded)/200);Fs(D.el,T),T<1?p=!0:(D.active?v=!0:this._onOpaqueTile(D),D.active=!0)}}v&&!this._noPrune&&this._pruneTiles(),p&&(se(this._fadeFrame),this._fadeFrame=ae(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=En("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var d=this._tileZoom,p=this.options.maxZoom;if(d!==void 0){for(var v in this._levels)v=Number(v),this._levels[v].el.children.length||v===d?(this._levels[v].el.style.zIndex=p-Math.abs(d-v),this._onUpdateLevel(v)):(bi(this._levels[v].el),this._removeTilesAtZoom(v),this._onRemoveLevel(v),delete this._levels[v]);var b=this._levels[d],D=this._map;return b||(b=this._levels[d]={},b.el=En("div","leaflet-tile-container leaflet-zoom-animated",this._container),b.el.style.zIndex=p,b.origin=D.project(D.unproject(D.getPixelOrigin()),d).round(),b.zoom=d,this._setZoomTransform(b,D.getCenter(),D.getZoom()),c(b.el.offsetWidth),this._onCreateLevel(b)),this._level=b,b}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var d,p,v=this._map.getZoom();if(v>this.options.maxZoom||v<this.options.minZoom){this._removeAllTiles();return}for(d in this._tiles)p=this._tiles[d],p.retain=p.current;for(d in this._tiles)if(p=this._tiles[d],p.current&&!p.active){var b=p.coords;this._retainParent(b.x,b.y,b.z,b.z-5)||this._retainChildren(b.x,b.y,b.z,b.z+2)}for(d in this._tiles)this._tiles[d].retain||this._removeTile(d)}},_removeTilesAtZoom:function(d){for(var p in this._tiles)this._tiles[p].coords.z===d&&this._removeTile(p)},_removeAllTiles:function(){for(var d in this._tiles)this._removeTile(d)},_invalidateAll:function(){for(var d in this._levels)bi(this._levels[d].el),this._onRemoveLevel(Number(d)),delete this._levels[d];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(d,p,v,b){var D=Math.floor(d/2),T=Math.floor(p/2),B=v-1,U=new Le(+D,+T);U.z=+B;var Y=this._tileCoordsToKey(U),de=this._tiles[Y];return de&&de.active?(de.retain=!0,!0):(de&&de.loaded&&(de.retain=!0),B>b?this._retainParent(D,T,B,b):!1)},_retainChildren:function(d,p,v,b){for(var D=2*d;D<2*d+2;D++)for(var T=2*p;T<2*p+2;T++){var B=new Le(D,T);B.z=v+1;var U=this._tileCoordsToKey(B),Y=this._tiles[U];if(Y&&Y.active){Y.retain=!0;continue}else Y&&Y.loaded&&(Y.retain=!0);v+1<b&&this._retainChildren(D,T,v+1,b)}},_resetView:function(d){var p=d&&(d.pinch||d.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),p,p)},_animateZoom:function(d){this._setView(d.center,d.zoom,!0,d.noUpdate)},_clampZoom:function(d){var p=this.options;return p.minNativeZoom!==void 0&&d<p.minNativeZoom?p.minNativeZoom:p.maxNativeZoom!==void 0&&p.maxNativeZoom<d?p.maxNativeZoom:d},_setView:function(d,p,v,b){var D=Math.round(p);this.options.maxZoom!==void 0&&D>this.options.maxZoom||this.options.minZoom!==void 0&&D<this.options.minZoom?D=void 0:D=this._clampZoom(D);var T=this.options.updateWhenZooming&&D!==this._tileZoom;(!b||T)&&(this._tileZoom=D,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),D!==void 0&&this._update(d),v||this._pruneTiles(),this._noPrune=!!v),this._setZoomTransforms(d,p)},_setZoomTransforms:function(d,p){for(var v in this._levels)this._setZoomTransform(this._levels[v],d,p)},_setZoomTransform:function(d,p,v){var b=this._map.getZoomScale(v,d.zoom),D=d.origin.multiplyBy(b).subtract(this._map._getNewPixelOrigin(p,v)).round();rt.any3d?ph(d.el,D,b):Qi(d.el,D)},_resetGrid:function(){var d=this._map,p=d.options.crs,v=this._tileSize=this.getTileSize(),b=this._tileZoom,D=this._map.getPixelWorldBounds(this._tileZoom);D&&(this._globalTileRange=this._pxBoundsToTileRange(D)),this._wrapX=p.wrapLng&&!this.options.noWrap&&[Math.floor(d.project([0,p.wrapLng[0]],b).x/v.x),Math.ceil(d.project([0,p.wrapLng[1]],b).x/v.y)],this._wrapY=p.wrapLat&&!this.options.noWrap&&[Math.floor(d.project([p.wrapLat[0],0],b).y/v.x),Math.ceil(d.project([p.wrapLat[1],0],b).y/v.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(d){var p=this._map,v=p._animatingZoom?Math.max(p._animateToZoom,p.getZoom()):p.getZoom(),b=p.getZoomScale(v,this._tileZoom),D=p.project(d,this._tileZoom).floor(),T=p.getSize().divideBy(b*2);return new Ve(D.subtract(T),D.add(T))},_update:function(d){var p=this._map;if(p){var v=this._clampZoom(p.getZoom());if(d===void 0&&(d=p.getCenter()),this._tileZoom!==void 0){var b=this._getTiledPixelBounds(d),D=this._pxBoundsToTileRange(b),T=D.getCenter(),B=[],U=this.options.keepBuffer,Y=new Ve(D.getBottomLeft().subtract([U,-U]),D.getTopRight().add([U,-U]));if(!(isFinite(D.min.x)&&isFinite(D.min.y)&&isFinite(D.max.x)&&isFinite(D.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var de in this._tiles){var Ue=this._tiles[de].coords;(Ue.z!==this._tileZoom||!Y.contains(new Le(Ue.x,Ue.y)))&&(this._tiles[de].current=!1)}if(Math.abs(v-this._tileZoom)>1){this._setView(d,v);return}for(var St=D.min.y;St<=D.max.y;St++)for(var nn=D.min.x;nn<=D.max.x;nn++){var vr=new Le(nn,St);if(vr.z=this._tileZoom,!!this._isValidTile(vr)){var xo=this._tiles[this._tileCoordsToKey(vr)];xo?xo.current=!0:B.push(vr)}}if(B.sort(function(Br,qf){return Br.distanceTo(T)-qf.distanceTo(T)}),B.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ns=document.createDocumentFragment();for(nn=0;nn<B.length;nn++)this._addTile(B[nn],Ns);this._level.el.appendChild(Ns)}}}},_isValidTile:function(d){var p=this._map.options.crs;if(!p.infinite){var v=this._globalTileRange;if(!p.wrapLng&&(d.x<v.min.x||d.x>v.max.x)||!p.wrapLat&&(d.y<v.min.y||d.y>v.max.y))return!1}if(!this.options.bounds)return!0;var b=this._tileCoordsToBounds(d);return It(this.options.bounds).overlaps(b)},_keyToBounds:function(d){return this._tileCoordsToBounds(this._keyToTileCoords(d))},_tileCoordsToNwSe:function(d){var p=this._map,v=this.getTileSize(),b=d.scaleBy(v),D=b.add(v),T=p.unproject(b,d.z),B=p.unproject(D,d.z);return[T,B]},_tileCoordsToBounds:function(d){var p=this._tileCoordsToNwSe(d),v=new vt(p[0],p[1]);return this.options.noWrap||(v=this._map.wrapLatLngBounds(v)),v},_tileCoordsToKey:function(d){return d.x+":"+d.y+":"+d.z},_keyToTileCoords:function(d){var p=d.split(":"),v=new Le(+p[0],+p[1]);return v.z=+p[2],v},_removeTile:function(d){var p=this._tiles[d];p&&(bi(p.el),delete this._tiles[d],this.fire("tileunload",{tile:p.el,coords:this._keyToTileCoords(d)}))},_initTile:function(d){qt(d,"leaflet-tile");var p=this.getTileSize();d.style.width=p.x+"px",d.style.height=p.y+"px",d.onselectstart=c,d.onmousemove=c,rt.ielt9&&this.options.opacity<1&&Fs(d,this.options.opacity)},_addTile:function(d,p){var v=this._getTilePos(d),b=this._tileCoordsToKey(d),D=this.createTile(this._wrapCoords(d),o(this._tileReady,this,d));this._initTile(D),this.createTile.length<2&&ae(o(this._tileReady,this,d,null,D)),Qi(D,v),this._tiles[b]={el:D,coords:d,current:!0},p.appendChild(D),this.fire("tileloadstart",{tile:D,coords:d})},_tileReady:function(d,p,v){p&&this.fire("tileerror",{error:p,tile:v,coords:d});var b=this._tileCoordsToKey(d);v=this._tiles[b],v&&(v.loaded=+new Date,this._map._fadeAnimated?(Fs(v.el,0),se(this._fadeFrame),this._fadeFrame=ae(this._updateOpacity,this)):(v.active=!0,this._pruneTiles()),p||(qt(v.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:v.el,coords:d})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),rt.ielt9||!this._map._fadeAnimated?ae(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(d){return d.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(d){var p=new Le(this._wrapX?l(d.x,this._wrapX):d.x,this._wrapY?l(d.y,this._wrapY):d.y);return p.z=d.z,p},_pxBoundsToTileRange:function(d){var p=this.getTileSize();return new Ve(d.min.unscaleBy(p).floor(),d.max.unscaleBy(p).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var d in this._tiles)if(!this._tiles[d].loaded)return!1;return!0}});function e_e(d){return new Ly(d)}var Wf=Ly.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(d,p){this._url=d,p=m(this,p),p.detectRetina&&rt.retina&&p.maxZoom>0?(p.tileSize=Math.floor(p.tileSize/2),p.zoomReverse?(p.zoomOffset--,p.minZoom=Math.min(p.maxZoom,p.minZoom+1)):(p.zoomOffset++,p.maxZoom=Math.max(p.minZoom,p.maxZoom-1)),p.minZoom=Math.max(0,p.minZoom)):p.zoomReverse?p.minZoom=Math.min(p.maxZoom,p.minZoom):p.maxZoom=Math.max(p.minZoom,p.maxZoom),typeof p.subdomains=="string"&&(p.subdomains=p.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(d,p){return this._url===d&&p===void 0&&(p=!0),this._url=d,p||this.redraw(),this},createTile:function(d,p){var v=document.createElement("img");return Nt(v,"load",o(this._tileOnLoad,this,p,v)),Nt(v,"error",o(this._tileOnError,this,p,v)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(v.referrerPolicy=this.options.referrerPolicy),v.alt="",v.src=this.getTileUrl(d),v},getTileUrl:function(d){var p={r:rt.retina?"@2x":"",s:this._getSubdomain(d),x:d.x,y:d.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var v=this._globalTileRange.max.y-d.y;this.options.tms&&(p.y=v),p["-y"]=v}return w(this._url,n(p,this.options))},_tileOnLoad:function(d,p){rt.ielt9?setTimeout(o(d,this,null,p),0):d(null,p)},_tileOnError:function(d,p,v){var b=this.options.errorTileUrl;b&&p.getAttribute("src")!==b&&(p.src=b),d(v,p)},_onTileRemove:function(d){d.tile.onload=null},_getZoomForUrl:function(){var d=this._tileZoom,p=this.options.maxZoom,v=this.options.zoomReverse,b=this.options.zoomOffset;return v&&(d=p-d),d+b},_getSubdomain:function(d){var p=Math.abs(d.x+d.y)%this.options.subdomains.length;return this.options.subdomains[p]},_abortLoading:function(){var d,p;for(d in this._tiles)if(this._tiles[d].coords.z!==this._tileZoom&&(p=this._tiles[d].el,p.onload=c,p.onerror=c,!p.complete)){p.src=I;var v=this._tiles[d].coords;bi(p),delete this._tiles[d],this.fire("tileabort",{tile:p,coords:v})}},_removeTile:function(d){var p=this._tiles[d];if(p)return p.el.setAttribute("src",I),Ly.prototype._removeTile.call(this,d)},_tileReady:function(d,p,v){if(!(!this._map||v&&v.getAttribute("src")===I))return Ly.prototype._tileReady.call(this,d,p,v)}});function uU(d,p){return new Wf(d,p)}var hU=Wf.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(d,p){this._url=d;var v=n({},this.defaultWmsParams);for(var b in p)b in this.options||(v[b]=p[b]);p=m(this,p);var D=p.detectRetina&&rt.retina?2:1,T=this.getTileSize();v.width=T.x*D,v.height=T.y*D,this.wmsParams=v},onAdd:function(d){this._crs=this.options.crs||d.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var p=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[p]=this._crs.code,Wf.prototype.onAdd.call(this,d)},getTileUrl:function(d){var p=this._tileCoordsToNwSe(d),v=this._crs,b=We(v.project(p[0]),v.project(p[1])),D=b.min,T=b.max,B=(this._wmsVersion>=1.3&&this._crs===oU?[D.y,D.x,T.y,T.x]:[D.x,D.y,T.x,T.y]).join(","),U=Wf.prototype.getTileUrl.call(this,d);return U+_(this.wmsParams,U,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+B},setParams:function(d,p){return n(this.wmsParams,d),p||this.redraw(),this}});function t_e(d,p){return new hU(d,p)}Wf.WMS=hU,uU.wms=t_e;var fc=ba.extend({options:{padding:.1},initialize:function(d){m(this,d),s(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),qt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var d={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(d.zoomanim=this._onAnimZoom),d},_onAnimZoom:function(d){this._updateTransform(d.center,d.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(d,p){var v=this._map.getZoomScale(p,this._zoom),b=this._map.getSize().multiplyBy(.5+this.options.padding),D=this._map.project(this._center,p),T=b.multiplyBy(-v).add(D).subtract(this._map._getNewPixelOrigin(d,p));rt.any3d?ph(this._container,T,v):Qi(this._container,T)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var d in this._layers)this._layers[d]._reset()},_onZoomEnd:function(){for(var d in this._layers)this._layers[d]._project()},_updatePaths:function(){for(var d in this._layers)this._layers[d]._update()},_update:function(){var d=this.options.padding,p=this._map.getSize(),v=this._map.containerPointToLayerPoint(p.multiplyBy(-d)).round();this._bounds=new Ve(v,v.add(p.multiplyBy(1+d*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),pU=fc.extend({options:{tolerance:0},getEvents:function(){var d=fc.prototype.getEvents.call(this);return d.viewprereset=this._onViewPreReset,d},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){fc.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var d=this._container=document.createElement("canvas");Nt(d,"mousemove",this._onMouseMove,this),Nt(d,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Nt(d,"mouseout",this._handleMouseOut,this),d._leaflet_disable_events=!0,this._ctx=d.getContext("2d")},_destroyContainer:function(){se(this._redrawRequest),delete this._ctx,bi(this._container),Yn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var d;this._redrawBounds=null;for(var p in this._layers)d=this._layers[p],d._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){fc.prototype._update.call(this);var d=this._bounds,p=this._container,v=d.getSize(),b=rt.retina?2:1;Qi(p,d.min),p.width=b*v.x,p.height=b*v.y,p.style.width=v.x+"px",p.style.height=v.y+"px",rt.retina&&this._ctx.scale(2,2),this._ctx.translate(-d.min.x,-d.min.y),this.fire("update")}},_reset:function(){fc.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(d){this._updateDashArray(d),this._layers[s(d)]=d;var p=d._order={layer:d,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=p),this._drawLast=p,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(d){this._requestRedraw(d)},_removePath:function(d){var p=d._order,v=p.next,b=p.prev;v?v.prev=b:this._drawLast=b,b?b.next=v:this._drawFirst=v,delete d._order,delete this._layers[s(d)],this._requestRedraw(d)},_updatePath:function(d){this._extendRedrawBounds(d),d._project(),d._update(),this._requestRedraw(d)},_updateStyle:function(d){this._updateDashArray(d),this._requestRedraw(d)},_updateDashArray:function(d){if(typeof d.options.dashArray=="string"){var p=d.options.dashArray.split(/[, ]+/),v=[],b,D;for(D=0;D<p.length;D++){if(b=Number(p[D]),isNaN(b))return;v.push(b)}d.options._dashArray=v}else d.options._dashArray=d.options.dashArray},_requestRedraw:function(d){this._map&&(this._extendRedrawBounds(d),this._redrawRequest=this._redrawRequest||ae(this._redraw,this))},_extendRedrawBounds:function(d){if(d._pxBounds){var p=(d.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Ve,this._redrawBounds.extend(d._pxBounds.min.subtract([p,p])),this._redrawBounds.extend(d._pxBounds.max.add([p,p]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var d=this._redrawBounds;if(d){var p=d.getSize();this._ctx.clearRect(d.min.x,d.min.y,p.x,p.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var d,p=this._redrawBounds;if(this._ctx.save(),p){var v=p.getSize();this._ctx.beginPath(),this._ctx.rect(p.min.x,p.min.y,v.x,v.y),this._ctx.clip()}this._drawing=!0;for(var b=this._drawFirst;b;b=b.next)d=b.layer,(!p||d._pxBounds&&d._pxBounds.intersects(p))&&d._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(d,p){if(this._drawing){var v,b,D,T,B=d._parts,U=B.length,Y=this._ctx;if(U){for(Y.beginPath(),v=0;v<U;v++){for(b=0,D=B[v].length;b<D;b++)T=B[v][b],Y[b?"lineTo":"moveTo"](T.x,T.y);p&&Y.closePath()}this._fillStroke(Y,d)}}},_updateCircle:function(d){if(!(!this._drawing||d._empty())){var p=d._point,v=this._ctx,b=Math.max(Math.round(d._radius),1),D=(Math.max(Math.round(d._radiusY),1)||b)/b;D!==1&&(v.save(),v.scale(1,D)),v.beginPath(),v.arc(p.x,p.y/D,b,0,Math.PI*2,!1),D!==1&&v.restore(),this._fillStroke(v,d)}},_fillStroke:function(d,p){var v=p.options;v.fill&&(d.globalAlpha=v.fillOpacity,d.fillStyle=v.fillColor||v.color,d.fill(v.fillRule||"evenodd")),v.stroke&&v.weight!==0&&(d.setLineDash&&d.setLineDash(p.options&&p.options._dashArray||[]),d.globalAlpha=v.opacity,d.lineWidth=v.weight,d.strokeStyle=v.color,d.lineCap=v.lineCap,d.lineJoin=v.lineJoin,d.stroke())},_onClick:function(d){for(var p=this._map.mouseEventToLayerPoint(d),v,b,D=this._drawFirst;D;D=D.next)v=D.layer,v.options.interactive&&v._containsPoint(p)&&(!(d.type==="click"||d.type==="preclick")||!this._map._draggableMoved(v))&&(b=v);this._fireEvent(b?[b]:!1,d)},_onMouseMove:function(d){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var p=this._map.mouseEventToLayerPoint(d);this._handleMouseHover(d,p)}},_handleMouseOut:function(d){var p=this._hoveredLayer;p&&(Li(this._container,"leaflet-interactive"),this._fireEvent([p],d,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(d,p){if(!this._mouseHoverThrottled){for(var v,b,D=this._drawFirst;D;D=D.next)v=D.layer,v.options.interactive&&v._containsPoint(p)&&(b=v);b!==this._hoveredLayer&&(this._handleMouseOut(d),b&&(qt(this._container,"leaflet-interactive"),this._fireEvent([b],d,"mouseover"),this._hoveredLayer=b)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,d),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(d,p,v){this._map._fireDOMEvent(p,v||p.type,d)},_bringToFront:function(d){var p=d._order;if(p){var v=p.next,b=p.prev;if(v)v.prev=b;else return;b?b.next=v:v&&(this._drawFirst=v),p.prev=this._drawLast,this._drawLast.next=p,p.next=null,this._drawLast=p,this._requestRedraw(d)}},_bringToBack:function(d){var p=d._order;if(p){var v=p.next,b=p.prev;if(b)b.next=v;else return;v?v.prev=b:b&&(this._drawLast=b),p.prev=null,p.next=this._drawFirst,this._drawFirst.prev=p,this._drawFirst=p,this._requestRedraw(d)}}});function fU(d){return rt.canvas?new pU(d):null}var Ny=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(d){return document.createElement("<lvml:"+d+' class="lvml">')}}catch{}return function(d){return document.createElement("<"+d+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),n_e={_initContainer:function(){this._container=En("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(fc.prototype._update.call(this),this.fire("update"))},_initPath:function(d){var p=d._container=Ny("shape");qt(p,"leaflet-vml-shape "+(this.options.className||"")),p.coordsize="1 1",d._path=Ny("path"),p.appendChild(d._path),this._updateStyle(d),this._layers[s(d)]=d},_addPath:function(d){var p=d._container;this._container.appendChild(p),d.options.interactive&&d.addInteractiveTarget(p)},_removePath:function(d){var p=d._container;bi(p),d.removeInteractiveTarget(p),delete this._layers[s(d)]},_updateStyle:function(d){var p=d._stroke,v=d._fill,b=d.options,D=d._container;D.stroked=!!b.stroke,D.filled=!!b.fill,b.stroke?(p||(p=d._stroke=Ny("stroke")),D.appendChild(p),p.weight=b.weight+"px",p.color=b.color,p.opacity=b.opacity,b.dashArray?p.dashStyle=C(b.dashArray)?b.dashArray.join(" "):b.dashArray.replace(/( *, *)/g," "):p.dashStyle="",p.endcap=b.lineCap.replace("butt","flat"),p.joinstyle=b.lineJoin):p&&(D.removeChild(p),d._stroke=null),b.fill?(v||(v=d._fill=Ny("fill")),D.appendChild(v),v.color=b.fillColor||b.color,v.opacity=b.fillOpacity):v&&(D.removeChild(v),d._fill=null)},_updateCircle:function(d){var p=d._point.round(),v=Math.round(d._radius),b=Math.round(d._radiusY||v);this._setPath(d,d._empty()?"M0 0":"AL "+p.x+","+p.y+" "+v+","+b+" 0,"+65535*360)},_setPath:function(d,p){d._path.v=p},_bringToFront:function(d){Vf(d._container)},_bringToBack:function(d){Hf(d._container)}},zS=rt.vml?Ny:_7,By=fc.extend({_initContainer:function(){this._container=zS("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=zS("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){bi(this._container),Yn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){fc.prototype._update.call(this);var d=this._bounds,p=d.getSize(),v=this._container;(!this._svgSize||!this._svgSize.equals(p))&&(this._svgSize=p,v.setAttribute("width",p.x),v.setAttribute("height",p.y)),Qi(v,d.min),v.setAttribute("viewBox",[d.min.x,d.min.y,p.x,p.y].join(" ")),this.fire("update")}},_initPath:function(d){var p=d._path=zS("path");d.options.className&&qt(p,d.options.className),d.options.interactive&&qt(p,"leaflet-interactive"),this._updateStyle(d),this._layers[s(d)]=d},_addPath:function(d){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(d._path),d.addInteractiveTarget(d._path)},_removePath:function(d){bi(d._path),d.removeInteractiveTarget(d._path),delete this._layers[s(d)]},_updatePath:function(d){d._project(),d._update()},_updateStyle:function(d){var p=d._path,v=d.options;p&&(v.stroke?(p.setAttribute("stroke",v.color),p.setAttribute("stroke-opacity",v.opacity),p.setAttribute("stroke-width",v.weight),p.setAttribute("stroke-linecap",v.lineCap),p.setAttribute("stroke-linejoin",v.lineJoin),v.dashArray?p.setAttribute("stroke-dasharray",v.dashArray):p.removeAttribute("stroke-dasharray"),v.dashOffset?p.setAttribute("stroke-dashoffset",v.dashOffset):p.removeAttribute("stroke-dashoffset")):p.setAttribute("stroke","none"),v.fill?(p.setAttribute("fill",v.fillColor||v.color),p.setAttribute("fill-opacity",v.fillOpacity),p.setAttribute("fill-rule",v.fillRule||"evenodd")):p.setAttribute("fill","none"))},_updatePoly:function(d,p){this._setPath(d,y7(d._parts,p))},_updateCircle:function(d){var p=d._point,v=Math.max(Math.round(d._radius),1),b=Math.max(Math.round(d._radiusY),1)||v,D="a"+v+","+b+" 0 1,0 ",T=d._empty()?"M0 0":"M"+(p.x-v)+","+p.y+D+v*2+",0 "+D+-v*2+",0 ";this._setPath(d,T)},_setPath:function(d,p){d._path.setAttribute("d",p)},_bringToFront:function(d){Vf(d._path)},_bringToBack:function(d){Hf(d._path)}});rt.vml&&By.include(n_e);function mU(d){return rt.svg||rt.vml?new By(d):null}mn.include({getRenderer:function(d){var p=d.options.renderer||this._getPaneRenderer(d.options.pane)||this.options.renderer||this._renderer;return p||(p=this._renderer=this._createRenderer()),this.hasLayer(p)||this.addLayer(p),p},_getPaneRenderer:function(d){if(d==="overlayPane"||d===void 0)return!1;var p=this._paneRenderers[d];return p===void 0&&(p=this._createRenderer({pane:d}),this._paneRenderers[d]=p),p},_createRenderer:function(d){return this.options.preferCanvas&&fU(d)||mU(d)}});var gU=Gf.extend({initialize:function(d,p){Gf.prototype.initialize.call(this,this._boundsToLatLngs(d),p)},setBounds:function(d){return this.setLatLngs(this._boundsToLatLngs(d))},_boundsToLatLngs:function(d){return d=It(d),[d.getSouthWest(),d.getNorthWest(),d.getNorthEast(),d.getSouthEast()]}});function i_e(d,p){return new gU(d,p)}By.create=zS,By.pointsToPath=y7,pc.geometryToLayer=PS,pc.coordsToLatLng=vO,pc.coordsToLatLngs=AS,pc.latLngToCoords=_O,pc.latLngsToCoords=OS,pc.getFeature=Uf,pc.asFeature=FS,mn.mergeOptions({boxZoom:!0});var vU=sl.extend({initialize:function(d){this._map=d,this._container=d._container,this._pane=d._panes.overlayPane,this._resetStateTimeout=0,d.on("unload",this._destroy,this)},addHooks:function(){Nt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Yn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){bi(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(d){if(!d.shiftKey||d.which!==1&&d.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),My(),eO(),this._startPoint=this._map.mouseEventToContainerPoint(d),Nt(document,{contextmenu:gh,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(d){this._moved||(this._moved=!0,this._box=En("div","leaflet-zoom-box",this._container),qt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(d);var p=new Ve(this._point,this._startPoint),v=p.getSize();Qi(this._box,p.min),this._box.style.width=v.x+"px",this._box.style.height=v.y+"px"},_finish:function(){this._moved&&(bi(this._box),Li(this._container,"leaflet-crosshair")),Ry(),tO(),Yn(document,{contextmenu:gh,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(d){if(!(d.which!==1&&d.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var p=new vt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(p).fire("boxzoomend",{boxZoomBounds:p})}},_onKeyDown:function(d){d.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});mn.addInitHook("addHandler","boxZoom",vU),mn.mergeOptions({doubleClickZoom:!0});var _U=sl.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(d){var p=this._map,v=p.getZoom(),b=p.options.zoomDelta,D=d.originalEvent.shiftKey?v-b:v+b;p.options.doubleClickZoom==="center"?p.setZoom(D):p.setZoomAround(d.containerPoint,D)}});mn.addInitHook("addHandler","doubleClickZoom",_U),mn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var yU=sl.extend({addHooks:function(){if(!this._draggable){var d=this._map;this._draggable=new Od(d._mapPane,d._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),d.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),d.on("zoomend",this._onZoomEnd,this),d.whenReady(this._onZoomEnd,this))}qt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Li(this._map._container,"leaflet-grab"),Li(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var d=this._map;if(d._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var p=It(this._map.options.maxBounds);this._offsetLimit=We(this._map.latLngToContainerPoint(p.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(p.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;d.fire("movestart").fire("dragstart"),d.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(d){if(this._map.options.inertia){var p=this._lastTime=+new Date,v=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(v),this._times.push(p),this._prunePositions(p)}this._map.fire("move",d).fire("drag",d)},_prunePositions:function(d){for(;this._positions.length>1&&d-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var d=this._map.getSize().divideBy(2),p=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=p.subtract(d).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(d,p){return d-(d-p)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var d=this._draggable._newPos.subtract(this._draggable._startPos),p=this._offsetLimit;d.x<p.min.x&&(d.x=this._viscousLimit(d.x,p.min.x)),d.y<p.min.y&&(d.y=this._viscousLimit(d.y,p.min.y)),d.x>p.max.x&&(d.x=this._viscousLimit(d.x,p.max.x)),d.y>p.max.y&&(d.y=this._viscousLimit(d.y,p.max.y)),this._draggable._newPos=this._draggable._startPos.add(d)}},_onPreDragWrap:function(){var d=this._worldWidth,p=Math.round(d/2),v=this._initialWorldOffset,b=this._draggable._newPos.x,D=(b-p+v)%d+p-v,T=(b+p+v)%d-p-v,B=Math.abs(D+v)<Math.abs(T+v)?D:T;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=B},_onDragEnd:function(d){var p=this._map,v=p.options,b=!v.inertia||d.noInertia||this._times.length<2;if(p.fire("dragend",d),b)p.fire("moveend");else{this._prunePositions(+new Date);var D=this._lastPos.subtract(this._positions[0]),T=(this._lastTime-this._times[0])/1e3,B=v.easeLinearity,U=D.multiplyBy(B/T),Y=U.distanceTo([0,0]),de=Math.min(v.inertiaMaxSpeed,Y),Ue=U.multiplyBy(de/Y),St=de/(v.inertiaDeceleration*B),nn=Ue.multiplyBy(-St/2).round();!nn.x&&!nn.y?p.fire("moveend"):(nn=p._limitOffset(nn,p.options.maxBounds),ae(function(){p.panBy(nn,{duration:St,easeLinearity:B,noMoveStart:!0,animate:!0})}))}}});mn.addInitHook("addHandler","dragging",yU),mn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var bU=sl.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(d){this._map=d,this._setPanDelta(d.options.keyboardPanDelta),this._setZoomDelta(d.options.zoomDelta)},addHooks:function(){var d=this._map._container;d.tabIndex<=0&&(d.tabIndex="0"),Nt(d,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Yn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var d=document.body,p=document.documentElement,v=d.scrollTop||p.scrollTop,b=d.scrollLeft||p.scrollLeft;this._map._container.focus(),window.scrollTo(b,v)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(d){var p=this._panKeys={},v=this.keyCodes,b,D;for(b=0,D=v.left.length;b<D;b++)p[v.left[b]]=[-1*d,0];for(b=0,D=v.right.length;b<D;b++)p[v.right[b]]=[d,0];for(b=0,D=v.down.length;b<D;b++)p[v.down[b]]=[0,d];for(b=0,D=v.up.length;b<D;b++)p[v.up[b]]=[0,-1*d]},_setZoomDelta:function(d){var p=this._zoomKeys={},v=this.keyCodes,b,D;for(b=0,D=v.zoomIn.length;b<D;b++)p[v.zoomIn[b]]=d;for(b=0,D=v.zoomOut.length;b<D;b++)p[v.zoomOut[b]]=-d},_addHooks:function(){Nt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Yn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(d){if(!(d.altKey||d.ctrlKey||d.metaKey)){var p=d.keyCode,v=this._map,b;if(p in this._panKeys){if(!v._panAnim||!v._panAnim._inProgress)if(b=this._panKeys[p],d.shiftKey&&(b=ve(b).multiplyBy(3)),v.options.maxBounds&&(b=v._limitOffset(ve(b),v.options.maxBounds)),v.options.worldCopyJump){var D=v.wrapLatLng(v.unproject(v.project(v.getCenter()).add(b)));v.panTo(D)}else v.panBy(b)}else if(p in this._zoomKeys)v.setZoom(v.getZoom()+(d.shiftKey?3:1)*this._zoomKeys[p]);else if(p===27&&v._popup&&v._popup.options.closeOnEscapeKey)v.closePopup();else return;gh(d)}}});mn.addInitHook("addHandler","keyboard",bU),mn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var CU=sl.extend({addHooks:function(){Nt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Yn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(d){var p=U7(d),v=this._map.options.wheelDebounceTime;this._delta+=p,this._lastMousePos=this._map.mouseEventToContainerPoint(d),this._startTime||(this._startTime=+new Date);var b=Math.max(v-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),b),gh(d)},_performZoom:function(){var d=this._map,p=d.getZoom(),v=this._map.options.zoomSnap||0;d._stop();var b=this._delta/(this._map.options.wheelPxPerZoomLevel*4),D=4*Math.log(2/(1+Math.exp(-Math.abs(b))))/Math.LN2,T=v?Math.ceil(D/v)*v:D,B=d._limitZoom(p+(this._delta>0?T:-T))-p;this._delta=0,this._startTime=null,B&&(d.options.scrollWheelZoom==="center"?d.setZoom(p+B):d.setZoomAround(this._lastMousePos,p+B))}});mn.addInitHook("addHandler","scrollWheelZoom",CU);var o_e=600;mn.mergeOptions({tapHold:rt.touchNative&&rt.safari&&rt.mobile,tapTolerance:15});var wU=sl.extend({addHooks:function(){Nt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Yn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(d){if(clearTimeout(this._holdTimeout),d.touches.length===1){var p=d.touches[0];this._startPos=this._newPos=new Le(p.clientX,p.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Nt(document,"touchend",Ro),Nt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",p))},this),o_e),Nt(document,"touchend touchcancel contextmenu",this._cancel,this),Nt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function d(){Yn(document,"touchend",Ro),Yn(document,"touchend touchcancel",d)},_cancel:function(){clearTimeout(this._holdTimeout),Yn(document,"touchend touchcancel contextmenu",this._cancel,this),Yn(document,"touchmove",this._onMove,this)},_onMove:function(d){var p=d.touches[0];this._newPos=new Le(p.clientX,p.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(d,p){var v=new MouseEvent(d,{bubbles:!0,cancelable:!0,view:window,screenX:p.screenX,screenY:p.screenY,clientX:p.clientX,clientY:p.clientY});v._simulated=!0,p.target.dispatchEvent(v)}});mn.addInitHook("addHandler","tapHold",wU),mn.mergeOptions({touchZoom:rt.touch,bounceAtZoomLimits:!0});var xU=sl.extend({addHooks:function(){qt(this._map._container,"leaflet-touch-zoom"),Nt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Li(this._map._container,"leaflet-touch-zoom"),Yn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(d){var p=this._map;if(!(!d.touches||d.touches.length!==2||p._animatingZoom||this._zooming)){var v=p.mouseEventToContainerPoint(d.touches[0]),b=p.mouseEventToContainerPoint(d.touches[1]);this._centerPoint=p.getSize()._divideBy(2),this._startLatLng=p.containerPointToLatLng(this._centerPoint),p.options.touchZoom!=="center"&&(this._pinchStartLatLng=p.containerPointToLatLng(v.add(b)._divideBy(2))),this._startDist=v.distanceTo(b),this._startZoom=p.getZoom(),this._moved=!1,this._zooming=!0,p._stop(),Nt(document,"touchmove",this._onTouchMove,this),Nt(document,"touchend touchcancel",this._onTouchEnd,this),Ro(d)}},_onTouchMove:function(d){if(!(!d.touches||d.touches.length!==2||!this._zooming)){var p=this._map,v=p.mouseEventToContainerPoint(d.touches[0]),b=p.mouseEventToContainerPoint(d.touches[1]),D=v.distanceTo(b)/this._startDist;if(this._zoom=p.getScaleZoom(D,this._startZoom),!p.options.bounceAtZoomLimits&&(this._zoom<p.getMinZoom()&&D<1||this._zoom>p.getMaxZoom()&&D>1)&&(this._zoom=p._limitZoom(this._zoom)),p.options.touchZoom==="center"){if(this._center=this._startLatLng,D===1)return}else{var T=v._add(b)._divideBy(2)._subtract(this._centerPoint);if(D===1&&T.x===0&&T.y===0)return;this._center=p.unproject(p.project(this._pinchStartLatLng,this._zoom).subtract(T),this._zoom)}this._moved||(p._moveStart(!0,!1),this._moved=!0),se(this._animRequest);var B=o(p._move,p,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ae(B,this,!0),Ro(d)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,se(this._animRequest),Yn(document,"touchmove",this._onTouchMove,this),Yn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});mn.addInitHook("addHandler","touchZoom",xU),mn.BoxZoom=vU,mn.DoubleClickZoom=_U,mn.Drag=yU,mn.Keyboard=bU,mn.ScrollWheelZoom=CU,mn.TapHold=wU,mn.TouchZoom=xU,e.Bounds=Ve,e.Browser=rt,e.CRS=yi,e.Canvas=pU,e.Circle=gO,e.CircleMarker=TS,e.Class=ue,e.Control=ya,e.DivIcon=dU,e.DivOverlay=al,e.DomEvent=wve,e.DomUtil=bve,e.Draggable=Od,e.Evented=Pe,e.FeatureGroup=uc,e.GeoJSON=pc,e.GridLayer=Ly,e.Handler=sl,e.Icon=jf,e.ImageOverlay=LS,e.LatLng=Dt,e.LatLngBounds=vt,e.Layer=ba,e.LayerGroup=$f,e.LineUtil=Fve,e.Map=mn,e.Marker=RS,e.Mixin=Mve,e.Path=Fd,e.Point=Le,e.PolyUtil=Rve,e.Polygon=Gf,e.Polyline=hc,e.Popup=NS,e.PosAnimation=W7,e.Projection=Lve,e.Rectangle=gU,e.Renderer=fc,e.SVG=By,e.SVGOverlay=cU,e.TileLayer=Wf,e.Tooltip=BS,e.Transformation=$A,e.Util=Te,e.VideoOverlay=lU,e.bind=o,e.bounds=We,e.canvas=fU,e.circle=Gve,e.circleMarker=jve,e.control=Ay,e.divIcon=Xve,e.extend=n,e.featureGroup=Vve,e.geoJSON=aU,e.geoJson=qve,e.gridLayer=e_e,e.icon=Hve,e.imageOverlay=Kve,e.latLng=jt,e.latLngBounds=It,e.layerGroup=zve,e.map=xve,e.marker=$ve,e.point=ve,e.polygon=Wve,e.polyline=Uve,e.popup=Qve,e.rectangle=i_e,e.setOptions=m,e.stamp=s,e.svg=mU,e.svgOverlay=Yve,e.tileLayer=uU,e.tooltip=Jve,e.transformation=Ey,e.version=t,e.videoOverlay=Zve;var r_e=window.L;e.noConflict=function(){return window.L=r_e,this},window.L=e})});var Xo=null,BE=!1,q2=1,f_e=null,po=Symbol("SIGNAL");function dt(e){let t=Xo;return Xo=e,t}function VE(){return Xo}var gm={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function xh(e){if(BE)throw new Error("");if(Xo===null)return;Xo.consumerOnSignalRead(e);let t=Xo.producersTail;if(t!==void 0&&t.producer===e)return;let n,i=Xo.recomputing;if(i&&(n=t!==void 0?t.nextProducer:Xo.producers,n!==void 0&&n.producer===e)){Xo.producersTail=n,n.lastReadVersion=e.version;return}let o=e.consumersTail;if(o!==void 0&&o.consumer===Xo&&(!i||g_e(o,Xo)))return;let r=ym(Xo),s={producer:e,consumer:Xo,nextProducer:n,prevConsumer:o,lastReadVersion:e.version,nextConsumer:void 0};Xo.producersTail=s,t!==void 0?t.nextProducer=s:Xo.producers=s,r&&Z9(e,s)}function W9(){q2++}function K2(e){if(!(ym(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===q2)){if(!e.producerMustRecompute(e)&&!_m(e)){W2(e);return}e.producerRecomputeValue(e),W2(e)}}function Z2(e){if(e.consumers===void 0)return;let t=BE;BE=!0;try{for(let n=e.consumers;n!==void 0;n=n.nextConsumer){let i=n.consumer;i.dirty||m_e(i)}}finally{BE=t}}function Y2(){return Xo?.consumerAllowSignalWrites!==!1}function m_e(e){e.dirty=!0,Z2(e),e.consumerMarkedDirty?.(e)}function W2(e){e.dirty=!1,e.lastCleanEpoch=q2}function Sh(e){return e&&q9(e),dt(e)}function q9(e){e.producersTail=void 0,e.recomputing=!0}function vm(e,t){dt(t),e&&K9(e)}function K9(e){e.recomputing=!1;let t=e.producersTail,n=t!==void 0?t.nextProducer:e.producers;if(n!==void 0){if(ym(e))do n=Q2(n);while(n!==void 0);t!==void 0?t.nextProducer=void 0:e.producers=void 0}}function _m(e){for(let t=e.producers;t!==void 0;t=t.nextProducer){let n=t.producer,i=t.lastReadVersion;if(i!==n.version||(K2(n),i!==n.version))return!0}return!1}function Vd(e){if(ym(e)){let t=e.producers;for(;t!==void 0;)t=Q2(t)}e.producers=void 0,e.producersTail=void 0,e.consumers=void 0,e.consumersTail=void 0}function Z9(e,t){let n=e.consumersTail,i=ym(e);if(n!==void 0?(t.nextConsumer=n.nextConsumer,n.nextConsumer=t):(t.nextConsumer=void 0,e.consumers=t),t.prevConsumer=n,e.consumersTail=t,!i)for(let o=e.producers;o!==void 0;o=o.nextProducer)Z9(o.producer,o)}function Q2(e){let t=e.producer,n=e.nextProducer,i=e.nextConsumer,o=e.prevConsumer;if(e.nextConsumer=void 0,e.prevConsumer=void 0,i!==void 0?i.prevConsumer=o:t.consumersTail=o,o!==void 0)o.nextConsumer=i;else if(t.consumers=i,!ym(t)){let r=t.producers;for(;r!==void 0;)r=Q2(r)}return n}function ym(e){return e.consumerIsAlwaysLive||e.consumers!==void 0}function J2(e){f_e?.(e)}function g_e(e,t){let n=t.producersTail;if(n!==void 0){let i=t.producers;do{if(i===e)return!0;if(i===n)break;i=i.nextProducer}while(i!==void 0)}return!1}function X2(e,t){return Object.is(e,t)}function nb(e,t){let n=Object.create(v_e);n.computation=e,t!==void 0&&(n.equal=t);let i=()=>{if(K2(n),xh(n),n.value===zE)throw n.error;return n.value};return i[po]=n,J2(n),i}var G2=Symbol("UNSET"),U2=Symbol("COMPUTING"),zE=Symbol("ERRORED"),v_e=x(g({},gm),{value:G2,dirty:!0,error:null,equal:X2,kind:"computed",producerMustRecompute(e){return e.value===G2||e.value===U2},producerRecomputeValue(e){if(e.value===U2)throw new Error("");let t=e.value;e.value=U2;let n=Sh(e),i,o=!1;try{i=e.computation(),dt(null),o=t!==G2&&t!==zE&&i!==zE&&e.equal(t,i)}catch(r){i=zE,e.error=r}finally{vm(e,n)}if(o){e.value=t;return}e.value=i,e.version++}});function __e(){throw new Error}var Y9=__e;function Q9(e){Y9(e)}function eL(e){Y9=e}var y_e=null;function tL(e,t){let n=Object.create(ib);n.value=e,t!==void 0&&(n.equal=t);let i=()=>J9(n);return i[po]=n,J2(n),[i,s=>bm(n,s),s=>X9(n,s)]}function J9(e){return xh(e),e.value}function bm(e,t){Y2()||Q9(e),e.equal(e.value,t)||(e.value=t,b_e(e))}function X9(e,t){Y2()||Q9(e),bm(e,t(e.value))}var ib=x(g({},gm),{equal:X2,value:void 0,kind:"signal"});function b_e(e){e.version++,W9(),Z2(e),y_e?.(e)}function nL(e){let t=dt(null);try{return e()}finally{dt(t)}}var iL=x(g({},gm),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function oL(e){if(e.dirty=!1,e.version>0&&!_m(e))return;e.version++;let t=Sh(e);try{e.cleanup(),e.fn()}finally{vm(e,t)}}function gt(e){return typeof e=="function"}function Cm(e){let n=e(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var HE=Cm(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,o)=>`${o+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Eh(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Mt=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let r of n)r.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(gt(i))try{i()}catch(r){t=r instanceof HE?r.errors:[r]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let r of o)try{eq(r)}catch(s){t=t??[],s instanceof HE?t=[...t,...s.errors]:t.push(s)}}if(t)throw new HE(t)}}add(t){var n;if(t&&t!==this)if(this.closed)eq(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Eh(n,t)}remove(t){let{_finalizers:n}=this;n&&Eh(n,t),t instanceof e&&t._removeParent(this)}};Mt.EMPTY=(()=>{let e=new Mt;return e.closed=!0,e})();var rL=Mt.EMPTY;function $E(e){return e instanceof Mt||e&&"closed"in e&&gt(e.remove)&&gt(e.add)&&gt(e.unsubscribe)}function eq(e){gt(e)?e():e.unsubscribe()}var wa={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var wm={setTimeout(e,t,...n){let{delegate:i}=wm;return i?.setTimeout?i.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=wm;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function jE(e){wm.setTimeout(()=>{let{onUnhandledError:t}=wa;if(t)t(e);else throw e})}function ob(){}var tq=sL("C",void 0,void 0);function nq(e){return sL("E",void 0,e)}function iq(e){return sL("N",e,void 0)}function sL(e,t,n){return{kind:e,value:t,error:n}}var Dh=null;function xm(e){if(wa.useDeprecatedSynchronousErrorHandling){let t=!Dh;if(t&&(Dh={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:i}=Dh;if(Dh=null,n)throw i}}else e()}function oq(e){wa.useDeprecatedSynchronousErrorHandling&&Dh&&(Dh.errorThrown=!0,Dh.error=e)}var kh=class extends Mt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,$E(t)&&t.add(this)):this.destination=x_e}static create(t,n,i){return new wc(t,n,i)}next(t){this.isStopped?lL(iq(t),this):this._next(t)}error(t){this.isStopped?lL(nq(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?lL(tq,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},C_e=Function.prototype.bind;function aL(e,t){return C_e.call(e,t)}var cL=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(i){GE(i)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(i){GE(i)}else GE(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){GE(n)}}},wc=class extends kh{constructor(t,n,i){super();let o;if(gt(t)||!t)o={next:t??void 0,error:n??void 0,complete:i??void 0};else{let r;this&&wa.useDeprecatedNextContext?(r=Object.create(t),r.unsubscribe=()=>this.unsubscribe(),o={next:t.next&&aL(t.next,r),error:t.error&&aL(t.error,r),complete:t.complete&&aL(t.complete,r)}):o=t}this.destination=new cL(o)}};function GE(e){wa.useDeprecatedSynchronousErrorHandling?oq(e):jE(e)}function w_e(e){throw e}function lL(e,t){let{onStoppedNotification:n}=wa;n&&wm.setTimeout(()=>n(e,t))}var x_e={closed:!0,next:ob,error:w_e,complete:ob};var Sm=typeof Symbol=="function"&&Symbol.observable||"@@observable";function fs(e){return e}function dL(...e){return uL(e)}function uL(e){return e.length===0?fs:e.length===1?e[0]:function(n){return e.reduce((i,o)=>o(i),n)}}var yt=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new e;return i.source=this,i.operator=n,i}subscribe(n,i,o){let r=E_e(n)?n:new wc(n,i,o);return xm(()=>{let{operator:s,source:a}=this;r.add(s?s.call(r,a):a?this._subscribe(r):this._trySubscribe(r))}),r}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=rq(i),new i((o,r)=>{let s=new wc({next:a=>{try{n(a)}catch(l){r(l),s.unsubscribe()}},error:r,complete:o});this.subscribe(s)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[Sm](){return this}pipe(...n){return uL(n)(this)}toPromise(n){return n=rq(n),new n((i,o)=>{let r;this.subscribe(s=>r=s,s=>o(s),()=>i(r))})}}return e.create=t=>new e(t),e})();function rq(e){var t;return(t=e??wa.Promise)!==null&&t!==void 0?t:Promise}function S_e(e){return e&&gt(e.next)&&gt(e.error)&&gt(e.complete)}function E_e(e){return e&&e instanceof kh||S_e(e)&&$E(e)}function D_e(e){return gt(e?.lift)}function Zt(e){return t=>{if(D_e(t))return t.lift(function(n){try{return e(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Jt(e,t,n,i,o){return new hL(e,t,n,i,o)}var hL=class extends kh{constructor(t,n,i,o,r,s){super(t),this.onFinalize=r,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){t.error(l)}}:super._next,this._error=o?function(a){try{o(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};var Em={schedule(e){let t=requestAnimationFrame,n=cancelAnimationFrame,{delegate:i}=Em;i&&(t=i.requestAnimationFrame,n=i.cancelAnimationFrame);let o=t(r=>{n=void 0,e(r)});return new Mt(()=>n?.(o))},requestAnimationFrame(...e){let{delegate:t}=Em;return(t?.requestAnimationFrame||requestAnimationFrame)(...e)},cancelAnimationFrame(...e){let{delegate:t}=Em;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...e)},delegate:void 0};var sq=Cm(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=(()=>{class e extends yt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new UE(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new sq}next(n){xm(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){xm(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){xm(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:o,observers:r}=this;return i||o?rL:(this.currentObservers=null,r.push(n),new Mt(()=>{this.currentObservers=null,Eh(r,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:o,isStopped:r}=this;i?n.error(o):r&&n.complete()}asObservable(){let n=new yt;return n.source=this,n}}return e.create=(t,n)=>new UE(t,n),e})(),UE=class extends ie{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,t)}error(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&i!==void 0?i:rL}};var kn=class extends ie{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:i}=this;if(t)throw n;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var rb={now(){return(rb.delegate||Date).now()},delegate:void 0};var WE=class extends ie{constructor(t=1/0,n=1/0,i=rb){super(),this._bufferSize=t,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,n)}next(t){let{isStopped:n,_buffer:i,_infiniteTimeWindow:o,_timestampProvider:r,_windowTime:s}=this;n||(i.push(t),!o&&i.push(r.now()+s)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:o}=this,r=o.slice();for(let s=0;s<r.length&&!t.closed;s+=i?1:2)t.next(r[s]);return this._checkFinalizedStatuses(t),n}_trimBuffer(){let{_bufferSize:t,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:o}=this,r=(o?1:2)*t;if(t<1/0&&r<i.length&&i.splice(0,i.length-r),!o){let s=n.now(),a=0;for(let l=1;l<i.length&&i[l]<=s;l+=2)a=l;a&&i.splice(0,a+1)}}};var qE=class extends Mt{constructor(t,n){super()}schedule(t,n=0){return this}};var sb={setInterval(e,t,...n){let{delegate:i}=sb;return i?.setInterval?i.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=sb;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var Dm=class extends qE{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var i;if(this.closed)return this;this.state=t;let o=this.id,r=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(r,o,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(r,this.id,n),this}requestAsyncId(t,n,i=0){return sb.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&sb.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(t,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let i=!1,o;try{this.work(t)}catch(r){i=!0,o=r||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Eh(i,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var km=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,i){return new this.schedulerActionCtor(this,t).schedule(i,n)}};km.now=rb.now;var Im=class extends km{constructor(t,n=km.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,i){for(;t=n.shift();)t.unsubscribe();throw i}}};var Ih=new Im(Dm),aq=Ih;var KE=class extends Dm{constructor(t,n){super(t,n),this.scheduler=t,this.work=n}requestAsyncId(t,n,i=0){return i!==null&&i>0?super.requestAsyncId(t,n,i):(t.actions.push(this),t._scheduled||(t._scheduled=Em.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,n,i=0){var o;if(i!=null?i>0:this.delay>0)return super.recycleAsyncId(t,n,i);let{actions:r}=t;n!=null&&n===t._scheduled&&((o=r[r.length-1])===null||o===void 0?void 0:o.id)!==n&&(Em.cancelAnimationFrame(n),t._scheduled=void 0)}};var ZE=class extends Im{flush(t){this._active=!0;let n;t?n=t.id:(n=this._scheduled,this._scheduled=void 0);let{actions:i}=this,o;t=t||i.shift();do if(o=t.execute(t.state,t.delay))break;while((t=i[0])&&t.id===n&&i.shift());if(this._active=!1,o){for(;(t=i[0])&&t.id===n&&i.shift();)t.unsubscribe();throw o}}};var YE=new ZE(KE);var So=new yt(e=>e.complete());function QE(e){return e&&gt(e.schedule)}function pL(e){return e[e.length-1]}function JE(e){return gt(pL(e))?e.pop():void 0}function cl(e){return QE(pL(e))?e.pop():void 0}function lq(e,t){return typeof pL(e)=="number"?e.pop():t}function dq(e,t,n,i){function o(r){return r instanceof n?r:new n(function(s){s(r)})}return new(n||(n=Promise))(function(r,s){function a(u){try{c(i.next(u))}catch(h){s(h)}}function l(u){try{c(i.throw(u))}catch(h){s(h)}}function c(u){u.done?r(u.value):o(u.value).then(a,l)}c((i=i.apply(e,t||[])).next())})}function cq(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Mh(e){return this instanceof Mh?(this.v=e,this):new Mh(e)}function uq(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),o,r=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(m){return function(_){return Promise.resolve(_).then(m,h)}}function a(m,_){i[m]&&(o[m]=function(y){return new Promise(function(w,C){r.push([m,y,w,C])>1||l(m,y)})},_&&(o[m]=_(o[m])))}function l(m,_){try{c(i[m](_))}catch(y){f(r[0][3],y)}}function c(m){m.value instanceof Mh?Promise.resolve(m.value.v).then(u,h):f(r[0][2],m)}function u(m){l("next",m)}function h(m){l("throw",m)}function f(m,_){m(_),r.shift(),r.length&&l(r[0][0],r[0][1])}}function hq(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof cq=="function"?cq(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(r){n[r]=e[r]&&function(s){return new Promise(function(a,l){s=e[r](s),o(a,l,s.done,s.value)})}}function o(r,s,a,l){Promise.resolve(l).then(function(c){r({value:c,done:a})},s)}}var Mm=e=>e&&typeof e.length=="number"&&typeof e!="function";function XE(e){return gt(e?.then)}function e1(e){return gt(e[Sm])}function t1(e){return Symbol.asyncIterator&&gt(e?.[Symbol.asyncIterator])}function n1(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function k_e(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var i1=k_e();function o1(e){return gt(e?.[i1])}function r1(e){return uq(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:i,done:o}=yield Mh(n.read());if(o)return yield Mh(void 0);yield yield Mh(i)}}finally{n.releaseLock()}})}function s1(e){return gt(e?.getReader)}function Ln(e){if(e instanceof yt)return e;if(e!=null){if(e1(e))return I_e(e);if(Mm(e))return M_e(e);if(XE(e))return R_e(e);if(t1(e))return pq(e);if(o1(e))return T_e(e);if(s1(e))return P_e(e)}throw n1(e)}function I_e(e){return new yt(t=>{let n=e[Sm]();if(gt(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function M_e(e){return new yt(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function R_e(e){return new yt(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,jE)})}function T_e(e){return new yt(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function pq(e){return new yt(t=>{A_e(e,t).catch(n=>t.error(n))})}function P_e(e){return pq(r1(e))}function A_e(e,t){var n,i,o,r;return dq(this,void 0,void 0,function*(){try{for(n=hq(e);i=yield n.next(),!i.done;){let s=i.value;if(t.next(s),t.closed)return}}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&(yield r.call(n))}finally{if(o)throw o.error}}t.complete()})}function Vr(e,t,n,i=0,o=!1){let r=t.schedule(function(){n(),o?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(r),!o)return r}function a1(e,t=0){return Zt((n,i)=>{n.subscribe(Jt(i,o=>Vr(i,e,()=>i.next(o),t),()=>Vr(i,e,()=>i.complete(),t),o=>Vr(i,e,()=>i.error(o),t)))})}function l1(e,t=0){return Zt((n,i)=>{i.add(e.schedule(()=>n.subscribe(i),t))})}function fq(e,t){return Ln(e).pipe(l1(t),a1(t))}function mq(e,t){return Ln(e).pipe(l1(t),a1(t))}function gq(e,t){return new yt(n=>{let i=0;return t.schedule(function(){i===e.length?n.complete():(n.next(e[i++]),n.closed||this.schedule())})})}function vq(e,t){return new yt(n=>{let i;return Vr(n,t,()=>{i=e[i1](),Vr(n,t,()=>{let o,r;try{({value:o,done:r}=i.next())}catch(s){n.error(s);return}r?n.complete():n.next(o)},0,!0)}),()=>gt(i?.return)&&i.return()})}function c1(e,t){if(!e)throw new Error("Iterable cannot be null");return new yt(n=>{Vr(n,t,()=>{let i=e[Symbol.asyncIterator]();Vr(n,t,()=>{i.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function _q(e,t){return c1(r1(e),t)}function yq(e,t){if(e!=null){if(e1(e))return fq(e,t);if(Mm(e))return gq(e,t);if(XE(e))return mq(e,t);if(t1(e))return c1(e,t);if(o1(e))return vq(e,t);if(s1(e))return _q(e,t)}throw n1(e)}function Ti(e,t){return t?yq(e,t):Ln(e)}function et(...e){let t=cl(e);return Ti(e,t)}function ab(e,t){let n=gt(e)?e:()=>e,i=o=>o.error(n());return new yt(t?o=>t.schedule(i,0,o):i)}function lb(e){return!!e&&(e instanceof yt||gt(e.lift)&&gt(e.subscribe))}var Rh=Cm(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function bq(e){return e instanceof Date&&!isNaN(e)}function tt(e,t){return Zt((n,i)=>{let o=0;n.subscribe(Jt(i,r=>{i.next(e.call(t,r,o++))}))})}var{isArray:O_e}=Array;function F_e(e,t){return O_e(t)?e(...t):e(t)}function Rm(e){return tt(t=>F_e(e,t))}var{isArray:L_e}=Array,{getPrototypeOf:N_e,prototype:B_e,keys:z_e}=Object;function d1(e){if(e.length===1){let t=e[0];if(L_e(t))return{args:t,keys:null};if(V_e(t)){let n=z_e(t);return{args:n.map(i=>t[i]),keys:n}}}return{args:e,keys:null}}function V_e(e){return e&&typeof e=="object"&&N_e(e)===B_e}function u1(e,t){return e.reduce((n,i,o)=>(n[i]=t[o],n),{})}function cb(...e){let t=cl(e),n=JE(e),{args:i,keys:o}=d1(e);if(i.length===0)return Ti([],t);let r=new yt(H_e(i,t,o?s=>u1(o,s):fs));return n?r.pipe(Rm(n)):r}function H_e(e,t,n=fs){return i=>{Cq(t,()=>{let{length:o}=e,r=new Array(o),s=o,a=o;for(let l=0;l<o;l++)Cq(t,()=>{let c=Ti(e[l],t),u=!1;c.subscribe(Jt(i,h=>{r[l]=h,u||(u=!0,a--),a||i.next(n(r.slice()))},()=>{--s||i.complete()}))},i)},i)}}function Cq(e,t,n){e?Vr(n,e,t):t()}function wq(e,t,n,i,o,r,s,a){let l=[],c=0,u=0,h=!1,f=()=>{h&&!l.length&&!c&&t.complete()},m=y=>c<i?_(y):l.push(y),_=y=>{r&&t.next(y),c++;let w=!1;Ln(n(y,u++)).subscribe(Jt(t,C=>{o?.(C),r?m(C):t.next(C)},()=>{w=!0},void 0,()=>{if(w)try{for(c--;l.length&&c<i;){let C=l.shift();s?Vr(t,s,()=>_(C)):_(C)}f()}catch(C){t.error(C)}}))};return e.subscribe(Jt(t,m,()=>{h=!0,f()})),()=>{a?.()}}function Po(e,t,n=1/0){return gt(t)?Po((i,o)=>tt((r,s)=>t(i,r,o,s))(Ln(e(i,o))),n):(typeof t=="number"&&(n=t),Zt((i,o)=>wq(i,o,e,n)))}function h1(e=1/0){return Po(fs,e)}function xq(){return h1(1)}function Hd(...e){return xq()(Ti(e,cl(e)))}function xc(e){return new yt(t=>{Ln(e()).subscribe(t)})}function db(...e){let t=JE(e),{args:n,keys:i}=d1(e),o=new yt(r=>{let{length:s}=n;if(!s){r.complete();return}let a=new Array(s),l=s,c=s;for(let u=0;u<s;u++){let h=!1;Ln(n[u]).subscribe(Jt(r,f=>{h||(h=!0,c--),a[u]=f},()=>l--,void 0,()=>{(!l||!h)&&(c||r.next(i?u1(i,a):a),r.complete())}))}});return t?o.pipe(Rm(t)):o}var $_e=["addListener","removeListener"],j_e=["addEventListener","removeEventListener"],G_e=["on","off"];function Th(e,t,n,i){if(gt(n)&&(i=n,n=void 0),i)return Th(e,t,n).pipe(Rm(i));let[o,r]=q_e(e)?j_e.map(s=>a=>e[s](t,a,n)):U_e(e)?$_e.map(Sq(e,t)):W_e(e)?G_e.map(Sq(e,t)):[];if(!o&&Mm(e))return Po(s=>Th(s,t,n))(Ln(e));if(!o)throw new TypeError("Invalid event target");return new yt(s=>{let a=(...l)=>s.next(1<l.length?l:l[0]);return o(a),()=>r(a)})}function Sq(e,t){return n=>i=>e[n](t,i)}function U_e(e){return gt(e.addListener)&&gt(e.removeListener)}function W_e(e){return gt(e.on)&&gt(e.off)}function q_e(e){return gt(e.addEventListener)&&gt(e.removeEventListener)}function Ph(e=0,t,n=aq){let i=-1;return t!=null&&(QE(t)?n=t:i=t),new yt(o=>{let r=bq(e)?+e-n.now():e;r<0&&(r=0);let s=0;return n.schedule(function(){o.closed||(o.next(s++),0<=i?this.schedule(void 0,i):o.complete())},r)})}function fL(e=0,t=Ih){return e<0&&(e=0),Ph(e,e,t)}function Ni(...e){let t=cl(e),n=lq(e,1/0),i=e;return i.length?i.length===1?Ln(i[0]):h1(n)(Ti(i,t)):So}function zt(e,t){return Zt((n,i)=>{let o=0;n.subscribe(Jt(i,r=>e.call(t,r,o++)&&i.next(r)))})}function Eq(e){return Zt((t,n)=>{let i=!1,o=null,r=null,s=!1,a=()=>{if(r?.unsubscribe(),r=null,i){i=!1;let c=o;o=null,n.next(c)}s&&n.complete()},l=()=>{r=null,s&&n.complete()};t.subscribe(Jt(n,c=>{i=!0,o=c,r||Ln(e(c)).subscribe(r=Jt(n,a,l))},()=>{s=!0,(!i||!r||r.closed)&&n.complete()}))})}function Tm(e,t=Ih){return Eq(()=>Ph(e,t))}function dl(e){return Zt((t,n)=>{let i=null,o=!1,r;i=t.subscribe(Jt(n,void 0,void 0,s=>{r=Ln(e(s,dl(e)(t))),i?(i.unsubscribe(),i=null,r.subscribe(n)):o=!0})),o&&(i.unsubscribe(),i=null,r.subscribe(n))})}function Pm(e,t){return gt(t)?Po(e,t,1):Po(e,1)}function $s(e,t=Ih){return Zt((n,i)=>{let o=null,r=null,s=null,a=()=>{if(o){o.unsubscribe(),o=null;let c=r;r=null,i.next(c)}};function l(){let c=s+e,u=t.now();if(u<c){o=this.schedule(void 0,c-u),i.add(o);return}a()}n.subscribe(Jt(i,c=>{r=c,s=t.now(),o||(o=t.schedule(l,e),i.add(o))},()=>{a(),i.complete()},void 0,()=>{r=o=null}))})}function mL(e){return Zt((t,n)=>{let i=!1;t.subscribe(Jt(n,o=>{i=!0,n.next(o)},()=>{i||n.next(e),n.complete()}))})}function ri(e){return e<=0?()=>So:Zt((t,n)=>{let i=0;t.subscribe(Jt(n,o=>{++i<=e&&(n.next(o),e<=i&&n.complete())}))})}function Am(e){return tt(()=>e)}function Om(e,t=fs){return e=e??K_e,Zt((n,i)=>{let o,r=!0;n.subscribe(Jt(i,s=>{let a=t(s);(r||!e(o,a))&&(r=!1,o=a,i.next(s))}))})}function K_e(e,t){return e===t}function Dq(e=Z_e){return Zt((t,n)=>{let i=!1;t.subscribe(Jt(n,o=>{i=!0,n.next(o)},()=>i?n.complete():n.error(e())))})}function Z_e(){return new Rh}function xa(e){return Zt((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function ul(e,t){let n=arguments.length>=2;return i=>i.pipe(e?zt((o,r)=>e(o,r,i)):fs,ri(1),n?mL(t):Dq(()=>new Rh))}function p1(e){return e<=0?()=>So:Zt((t,n)=>{let i=[];t.subscribe(Jt(n,o=>{i.push(o),e<i.length&&i.shift()},()=>{for(let o of i)n.next(o);n.complete()},void 0,()=>{i=null}))})}function f1(){return Zt((e,t)=>{let n,i=!1;e.subscribe(Jt(t,o=>{let r=n;n=o,i&&t.next([r,o]),i=!0}))})}function ub(e={}){let{connector:t=()=>new ie,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:o=!0}=e;return r=>{let s,a,l,c=0,u=!1,h=!1,f=()=>{a?.unsubscribe(),a=void 0},m=()=>{f(),s=l=void 0,u=h=!1},_=()=>{let y=s;m(),y?.unsubscribe()};return Zt((y,w)=>{c++,!h&&!u&&f();let C=l=l??t();w.add(()=>{c--,c===0&&!h&&!u&&(a=gL(_,o))}),C.subscribe(w),!s&&c>0&&(s=new wc({next:S=>C.next(S),error:S=>{h=!0,f(),a=gL(m,n,S),C.error(S)},complete:()=>{u=!0,f(),a=gL(m,i),C.complete()}}),Ln(y).subscribe(s))})(r)}}function gL(e,t,...n){if(t===!0){e();return}if(t===!1)return;let i=new wc({next:()=>{i.unsubscribe(),e()}});return Ln(t(...n)).subscribe(i)}function Fm(e,t,n){let i,o=!1;return e&&typeof e=="object"?{bufferSize:i=1/0,windowTime:t=1/0,refCount:o=!1,scheduler:n}=e:i=e??1/0,ub({connector:()=>new WE(i,t,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function hb(e){return zt((t,n)=>e<=n)}function Pi(...e){let t=cl(e);return Zt((n,i)=>{(t?Hd(e,n,t):Hd(e,n)).subscribe(i)})}function eo(e,t){return Zt((n,i)=>{let o=null,r=0,s=!1,a=()=>s&&!o&&i.complete();n.subscribe(Jt(i,l=>{o?.unsubscribe();let c=0,u=r++;Ln(e(l,u)).subscribe(o=Jt(i,h=>i.next(t?t(l,h,u,c++):h),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function Vt(e){return Zt((t,n)=>{Ln(e).subscribe(Jt(n,()=>n.complete(),ob)),!n.closed&&t.subscribe(n)})}function wi(e,t,n){let i=gt(e)||t||n?{next:e,error:t,complete:n}:e;return i?Zt((o,r)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;o.subscribe(Jt(r,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),r.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),r.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),r.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):fs}var vL;function m1(){return vL}function hl(e){let t=vL;return vL=e,t}var kq=Symbol("NotFound");function Lm(e){return e===kq||e?.name==="\u0275NotFound"}var w1="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",_e=class extends Error{code;constructor(t,n){super(pl(t,n)),this.code=t}};function Y_e(e){return`NG0${Math.abs(e)}`}function pl(e,t){return`${Y_e(e)}${t?": "+t:""}`}var fl=globalThis;function Rn(e){for(let t in e)if(e[t]===Rn)return t;throw Error("")}function Pq(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Ec(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(Ec).join(", ")}]`;if(e==null)return""+e;let t=e.overriddenName||e.name;if(t)return`${t}`;let n=e.toString();if(n==null)return""+n;let i=n.indexOf(`
`);return i>=0?n.slice(0,i):n}function x1(e,t){return e?t?`${e} ${t}`:e:t||""}var Q_e=Rn({__forward_ref__:Rn});function Bi(e){return e.__forward_ref__=Bi,e.toString=function(){return Ec(this())},e}function Ao(e){return RL(e)?e():e}function RL(e){return typeof e=="function"&&e.hasOwnProperty(Q_e)&&e.__forward_ref__===Bi}function ee(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function ze(e){return{providers:e.providers||[],imports:e.imports||[]}}function yb(e){return J_e(e,S1)}function TL(e){return yb(e)!==null}function J_e(e,t){return e.hasOwnProperty(t)&&e[t]||null}function X_e(e){let t=e?.[S1]??null;return t||null}function yL(e){return e&&e.hasOwnProperty(v1)?e[v1]:null}var S1=Rn({\u0275prov:Rn}),v1=Rn({\u0275inj:Rn}),q=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ee({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function PL(e){return e&&!!e.\u0275providers}var AL=Rn({\u0275cmp:Rn}),OL=Rn({\u0275dir:Rn}),FL=Rn({\u0275pipe:Rn}),LL=Rn({\u0275mod:Rn}),fb=Rn({\u0275fac:Rn}),Nh=Rn({__NG_ELEMENT_ID__:Rn}),Iq=Rn({__NG_ENV_ID__:Rn});function NL(e){return e[LL]||null}function Dc(e){return e[AL]||null}function BL(e){return e[OL]||null}function Aq(e){return e[FL]||null}function ml(e){return typeof e=="string"?e:e==null?"":String(e)}function Oq(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():ml(e)}var Fq=Rn({ngErrorCode:Rn}),eye=Rn({ngErrorMessage:Rn}),tye=Rn({ngTokenPath:Rn});function zL(e,t){return Lq("",-200,t)}function E1(e,t){throw new _e(-201,!1)}function Lq(e,t,n){let i=new _e(t,e);return i[Fq]=t,i[eye]=e,n&&(i[tye]=n),i}function nye(e){return e[Fq]}var bL;function Nq(){return bL}function br(e){let t=bL;return bL=e,t}function VL(e,t,n){let i=yb(e);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&8)return null;if(t!==void 0)return t;E1(e,"Injector")}var iye={},Ah=iye,oye="__NG_DI_FLAG__",CL=class{injector;constructor(t){this.injector=t}retrieve(t,n){let i=Oh(n)||0;try{return this.injector.get(t,i&8?null:Ah,i)}catch(o){if(Lm(o))return o;throw o}}};function rye(e,t=0){let n=m1();if(n===void 0)throw new _e(-203,!1);if(n===null)return VL(e,void 0,t);{let i=sye(t),o=n.retrieve(e,i);if(Lm(o)){if(i.optional)return null;throw o}return o}}function Ze(e,t=0){return(Nq()||rye)(Ao(e),t)}function k(e,t){return Ze(e,Oh(t))}function Oh(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function sye(e){return{optional:!!(e&8),host:!!(e&1),self:!!(e&2),skipSelf:!!(e&4)}}function wL(e){let t=[];for(let n=0;n<e.length;n++){let i=Ao(e[n]);if(Array.isArray(i)){if(i.length===0)throw new _e(900,!1);let o,r=0;for(let s=0;s<i.length;s++){let a=i[s],l=aye(a);typeof l=="number"?l===-1?o=a.token:r|=l:o=a}t.push(Ze(o,r))}else t.push(Ze(i))}return t}function aye(e){return e[oye]}function $d(e,t){let n=e.hasOwnProperty(fb);return n?e[fb]:null}function Bq(e,t,n){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){let o=e[i],r=t[i];if(n&&(o=n(o),r=n(r)),r!==o)return!1}return!0}function zq(e){return e.flat(Number.POSITIVE_INFINITY)}function D1(e,t){e.forEach(n=>Array.isArray(n)?D1(n,t):t(n))}function HL(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function bb(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Vq(e,t){let n=[];for(let i=0;i<e;i++)n.push(t);return n}function Hq(e,t,n,i){let o=e.length;if(o==t)e.push(n,i);else if(o===1)e.push(i,e[0]),e[0]=n;else{for(o--,e.push(e[o-1],e[o]);o>t;){let r=o-2;e[o]=e[r],o--}e[t]=n,e[t+1]=i}}function k1(e,t,n){let i=Bm(e,t);return i>=0?e[i|1]=n:(i=~i,Hq(e,i,t,n)),i}function I1(e,t){let n=Bm(e,t);if(n>=0)return e[n|1]}function Bm(e,t){return lye(e,t,1)}function lye(e,t,n){let i=0,o=e.length>>n;for(;o!==i;){let r=i+(o-i>>1),s=e[r<<n];if(t===s)return r<<n;s>t?o=r:i=r+1}return~(o<<n)}var Ud={},er=[],kc=new q(""),$L=new q("",-1),jL=new q(""),mb=class{get(t,n=Ah){if(n===Ah){let o=Lq("",-201);throw o.name="\u0275NotFound",o}return n}};function Ic(e){return{\u0275providers:e}}function $q(...e){return{\u0275providers:GL(!0,e),\u0275fromNgModule:!0}}function GL(e,...t){let n=[],i=new Set,o,r=s=>{n.push(s)};return D1(t,s=>{let a=s;_1(a,r,[],i)&&(o||=[],o.push(a))}),o!==void 0&&jq(o,r),n}function jq(e,t){for(let n=0;n<e.length;n++){let{ngModule:i,providers:o}=e[n];UL(o,r=>{t(r,i)})}}function _1(e,t,n,i){if(e=Ao(e),!e)return!1;let o=null,r=yL(e),s=!r&&Dc(e);if(!r&&!s){let l=e.ngModule;if(r=yL(l),r)o=l;else return!1}else{if(s&&!s.standalone)return!1;o=e}let a=i.has(o);if(s){if(a)return!1;if(i.add(o),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)_1(c,t,n,i)}}else if(r){if(r.imports!=null&&!a){i.add(o);let c;try{D1(r.imports,u=>{_1(u,t,n,i)&&(c||=[],c.push(u))})}finally{}c!==void 0&&jq(c,t)}if(!a){let c=$d(o)||(()=>new o);t({provide:o,useFactory:c,deps:er},o),t({provide:jL,useValue:o,multi:!0},o),t({provide:kc,useValue:()=>Ze(o),multi:!0},o)}let l=r.providers;if(l!=null&&!a){let c=e;UL(l,u=>{t(u,c)})}}else return!1;return o!==e&&e.providers!==void 0}function UL(e,t){for(let n of e)PL(n)&&(n=n.\u0275providers),Array.isArray(n)?UL(n,t):t(n)}var cye=Rn({provide:String,useValue:Rn});function Gq(e){return e!==null&&typeof e=="object"&&cye in e}function dye(e){return!!(e&&e.useExisting)}function uye(e){return!!(e&&e.useFactory)}function Fh(e){return typeof e=="function"}function Uq(e){return!!e.useClass}var Cb=new q(""),g1={},Mq={},_L;function zm(){return _L===void 0&&(_L=new mb),_L}var Qn=class{},Lh=class extends Qn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,i,o){super(),this.parent=n,this.source=i,this.scopes=o,SL(t,s=>this.processProvider(s)),this.records.set($L,Nm(void 0,this)),o.has("environment")&&this.records.set(Qn,Nm(void 0,this));let r=this.records.get(Cb);r!=null&&typeof r.value=="string"&&this.scopes.add(r.value),this.injectorDefTypes=new Set(this.get(jL,er,{self:!0}))}retrieve(t,n){let i=Oh(n)||0;try{return this.get(t,Ah,i)}catch(o){if(Lm(o))return o;throw o}}destroy(){pb(this),this._destroyed=!0;let t=dt(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),dt(t)}}onDestroy(t){return pb(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){pb(this);let n=hl(this),i=br(void 0),o;try{return t()}finally{hl(n),br(i)}}get(t,n=Ah,i){if(pb(this),t.hasOwnProperty(Iq))return t[Iq](this);let o=Oh(i),r,s=hl(this),a=br(void 0);try{if(!(o&4)){let c=this.records.get(t);if(c===void 0){let u=gye(t)&&yb(t);u&&this.injectableDefInScope(u)?c=Nm(xL(t),g1):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c,o)}let l=o&2?zm():this.parent;return n=o&8&&n===Ah?null:n,l.get(t,n)}catch(l){let c=nye(l);throw c===-200||c===-201?new _e(c,null):l}finally{br(a),hl(s)}}resolveInjectorInitializers(){let t=dt(null),n=hl(this),i=br(void 0),o;try{let r=this.get(kc,er,{self:!0});for(let s of r)s()}finally{hl(n),br(i),dt(t)}}toString(){let t=[],n=this.records;for(let i of n.keys())t.push(Ec(i));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=Ao(t);let n=Fh(t)?t:Ao(t&&t.provide),i=pye(t);if(!Fh(t)&&t.multi===!0){let o=this.records.get(n);o||(o=Nm(void 0,g1,!0),o.factory=()=>wL(o.multi),this.records.set(n,o)),n=t,o.multi.push(t)}this.records.set(n,i)}hydrate(t,n,i){let o=dt(null);try{if(n.value===Mq)throw zL(Ec(t));return n.value===g1&&(n.value=Mq,n.value=n.factory(void 0,i)),typeof n.value=="object"&&n.value&&mye(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{dt(o)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Ao(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function xL(e){let t=yb(e),n=t!==null?t.factory:$d(e);if(n!==null)return n;if(e instanceof q)throw new _e(204,!1);if(e instanceof Function)return hye(e);throw new _e(204,!1)}function hye(e){if(e.length>0)throw new _e(204,!1);let n=X_e(e);return n!==null?()=>n.factory(e):()=>new e}function pye(e){if(Gq(e))return Nm(void 0,e.useValue);{let t=WL(e);return Nm(t,g1)}}function WL(e,t,n){let i;if(Fh(e)){let o=Ao(e);return $d(o)||xL(o)}else if(Gq(e))i=()=>Ao(e.useValue);else if(uye(e))i=()=>e.useFactory(...wL(e.deps||[]));else if(dye(e))i=(o,r)=>Ze(Ao(e.useExisting),r!==void 0&&r&8?8:void 0);else{let o=Ao(e&&(e.useClass||e.provide));if(fye(e))i=()=>new o(...wL(e.deps));else return $d(o)||xL(o)}return i}function pb(e){if(e.destroyed)throw new _e(205,!1)}function Nm(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function fye(e){return!!e.deps}function mye(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function gye(e){return typeof e=="function"||typeof e=="object"&&e.ngMetadataName==="InjectionToken"}function SL(e,t){for(let n of e)Array.isArray(n)?SL(n,t):n&&PL(n)?SL(n.\u0275providers,t):t(n)}function Fo(e,t){let n;e instanceof Lh?(pb(e),n=e):n=new CL(e);let i,o=hl(n),r=br(void 0);try{return t()}finally{hl(o),br(r)}}function Wq(){return Nq()!==void 0||m1()!=null}var Ea=0,ut=1,Rt=2,fo=3,js=4,Cr=5,Bh=6,Vm=7,zi=8,Mc=9,gl=10,zn=11,Hm=12,qL=13,zh=14,wr=15,Wd=16,Vh=17,vl=18,wb=19,KL=20,Sc=21,M1=22,jd=23,ms=24,Hh=25,$h=26,si=27,qq=1,ZL=6,qd=7,xb=8,jh=9,Ai=10;function _l(e){return Array.isArray(e)&&typeof e[qq]=="object"}function Da(e){return Array.isArray(e)&&e[qq]===!0}function YL(e){return(e.flags&4)!==0}function Kd(e){return e.componentOffset>-1}function $m(e){return(e.flags&1)===1}function yl(e){return!!e.template}function jm(e){return(e[Rt]&512)!==0}function Gh(e){return(e[Rt]&256)===256}var QL="svg",Kq="math";function Gs(e){for(;Array.isArray(e);)e=e[Ea];return e}function JL(e,t){return Gs(t[e])}function ka(e,t){return Gs(t[e.index])}function Sb(e,t){return e.data[t]}function R1(e,t){return e[t]}function XL(e,t,n,i){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=i}function Us(e,t){let n=t[e];return _l(n)?n:n[Ea]}function Zq(e){return(e[Rt]&4)===4}function T1(e){return(e[Rt]&128)===128}function Yq(e){return Da(e[fo])}function gs(e,t){return t==null?null:e[t]}function eN(e){e[Vh]=0}function tN(e){e[Rt]&1024||(e[Rt]|=1024,T1(e)&&Uh(e))}function Qq(e,t){for(;e>0;)t=t[zh],e--;return t}function Eb(e){return!!(e[Rt]&9216||e[ms]?.dirty)}function P1(e){e[gl].changeDetectionScheduler?.notify(8),e[Rt]&64&&(e[Rt]|=1024),Eb(e)&&Uh(e)}function Uh(e){e[gl].changeDetectionScheduler?.notify(0);let t=Gd(e);for(;t!==null&&!(t[Rt]&8192||(t[Rt]|=8192,!T1(t)));)t=Gd(t)}function nN(e,t){if(Gh(e))throw new _e(911,!1);e[Sc]===null&&(e[Sc]=[]),e[Sc].push(t)}function Jq(e,t){if(e[Sc]===null)return;let n=e[Sc].indexOf(t);n!==-1&&e[Sc].splice(n,1)}function Gd(e){let t=e[fo];return Da(t)?t[fo]:t}function iN(e){return e[Vm]??=[]}function oN(e){return e.cleanup??=[]}function Xq(e,t,n,i){let o=iN(t);o.push(n),e.firstCreatePass&&oN(e).push(i,o.length-1)}var Ht={lFrame:dK(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var EL=!1;function eK(){return Ht.lFrame.elementDepthCount}function tK(){Ht.lFrame.elementDepthCount++}function rN(){Ht.lFrame.elementDepthCount--}function A1(){return Ht.bindingsEnabled}function sN(){return Ht.skipHydrationRootTNode!==null}function aN(e){return Ht.skipHydrationRootTNode===e}function lN(){Ht.skipHydrationRootTNode=null}function ht(){return Ht.lFrame.lView}function Jn(){return Ht.lFrame.tView}function J(e){return Ht.lFrame.contextLView=e,e[zi]}function X(e){return Ht.lFrame.contextLView=null,e}function to(){let e=cN();for(;e!==null&&e.type===64;)e=e.parent;return e}function cN(){return Ht.lFrame.currentTNode}function nK(){let e=Ht.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Gm(e,t){let n=Ht.lFrame;n.currentTNode=e,n.isParent=t}function dN(){return Ht.lFrame.isParent}function uN(){Ht.lFrame.isParent=!1}function iK(){return Ht.lFrame.contextLView}function hN(){return EL}function gb(e){let t=EL;return EL=e,t}function Db(){let e=Ht.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function pN(){return Ht.lFrame.bindingIndex}function oK(e){return Ht.lFrame.bindingIndex=e}function Zd(){return Ht.lFrame.bindingIndex++}function kb(e){let t=Ht.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function rK(){return Ht.lFrame.inI18n}function sK(e,t){let n=Ht.lFrame;n.bindingIndex=n.bindingRootIndex=e,O1(t)}function aK(){return Ht.lFrame.currentDirectiveIndex}function O1(e){Ht.lFrame.currentDirectiveIndex=e}function lK(e){let t=Ht.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function F1(){return Ht.lFrame.currentQueryIndex}function Ib(e){Ht.lFrame.currentQueryIndex=e}function vye(e){let t=e[ut];return t.type===2?t.declTNode:t.type===1?e[Cr]:null}function fN(e,t,n){if(n&4){let o=t,r=e;for(;o=o.parent,o===null&&!(n&1);)if(o=vye(r),o===null||(r=r[zh],o.type&10))break;if(o===null)return!1;t=o,e=r}let i=Ht.lFrame=cK();return i.currentTNode=t,i.lView=e,!0}function L1(e){let t=cK(),n=e[ut];Ht.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function cK(){let e=Ht.lFrame,t=e===null?null:e.child;return t===null?dK(e):t}function dK(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function uK(){let e=Ht.lFrame;return Ht.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var mN=uK;function N1(){let e=uK();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function hK(e){return(Ht.lFrame.contextLView=Qq(e,Ht.lFrame.contextLView))[zi]}function Ia(){return Ht.lFrame.selectedIndex}function Yd(e){Ht.lFrame.selectedIndex=e}function Mb(){let e=Ht.lFrame;return Sb(e.tView,e.selectedIndex)}function bl(){Ht.lFrame.currentNamespace=QL}function Rb(){_ye()}function _ye(){Ht.lFrame.currentNamespace=null}function pK(){return Ht.lFrame.currentNamespace}var fK=!0;function B1(){return fK}function Tb(e){fK=e}function DL(e,t=null,n=null,i){let o=gN(e,t,n,i);return o.resolveInjectorInitializers(),o}function gN(e,t=null,n=null,i,o=new Set){let r=[n||er,$q(e)];return i=i||(typeof e=="object"?void 0:Ec(e)),new Lh(r,t||zm(),i||null,o)}var Ke=class e{static THROW_IF_NOT_FOUND=Ah;static NULL=new mb;static create(t,n){if(Array.isArray(t))return DL({name:""},n,t,"");{let i=t.name??"";return DL({name:i},t.parent,t.providers,i)}}static \u0275prov=ee({token:e,providedIn:"any",factory:()=>Ze($L)});static __NG_ELEMENT_ID__=-1},Je=new q(""),Eo=(()=>{class e{static __NG_ELEMENT_ID__=yye;static __NG_ENV_ID__=n=>n}return e})(),y1=class extends Eo{_lView;constructor(t){super(),this._lView=t}get destroyed(){return Gh(this._lView)}onDestroy(t){let n=this._lView;return nN(n,t),()=>Jq(n,t)}};function yye(){return new y1(ht())}var vN=!1,Cl=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new kn(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new yt(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ee({token:e,providedIn:"root",factory:()=>new e})}return e})(),kL=class extends ie{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,Wq()&&(this.destroyRef=k(Eo,{optional:!0})??void 0,this.pendingTasks=k(Cl,{optional:!0})??void 0)}emit(t){let n=dt(null);try{super.next(t)}finally{dt(n)}}subscribe(t,n,i){let o=t,r=n||(()=>null),s=i;if(t&&typeof t=="object"){let l=t;o=l.next?.bind(l),r=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(r=this.wrapInTimeout(r),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:r,complete:s});return t instanceof Mt&&t.add(a),a}wrapInTimeout(t){return n=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},V=kL;function b1(...e){}function _N(e){let t,n;function i(){e=b1;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),i()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),i()})),()=>i()}function yN(e){return queueMicrotask(()=>e()),()=>{e=b1}}var bN="isAngularZone",vb=bN+"_ID",bye=0,me=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new V(!1);onMicrotaskEmpty=new V(!1);onStable=new V(!1);onError=new V(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:r=vN}=t;if(typeof Zone>"u")throw new _e(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&i,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=r,xye(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(bN)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new _e(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new _e(909,!1)}run(t,n,i){return this._inner.run(t,n,i)}runTask(t,n,i,o){let r=this._inner,s=r.scheduleEventTask("NgZoneEvent: "+o,t,Cye,b1,b1);try{return r.runTask(s,n,i)}finally{r.cancelTask(s)}}runGuarded(t,n,i){return this._inner.runGuarded(t,n,i)}runOutsideAngular(t){return this._outer.run(t)}},Cye={};function CN(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function wye(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){_N(()=>{e.callbackScheduled=!1,IL(e),e.isCheckStableRunning=!0,CN(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),IL(e)}function xye(e){let t=()=>{wye(e)},n=bye++;e._inner=e._inner.fork({name:"angular",properties:{[bN]:!0,[vb]:n,[vb+n]:!0},onInvokeTask:(i,o,r,s,a,l)=>{if(Sye(l))return i.invokeTask(r,s,a,l);try{return Rq(e),i.invokeTask(r,s,a,l)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),Tq(e)}},onInvoke:(i,o,r,s,a,l,c)=>{try{return Rq(e),i.invoke(r,s,a,l,c)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!Eye(l)&&t(),Tq(e)}},onHasTask:(i,o,r,s)=>{i.hasTask(r,s),o===r&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,IL(e),CN(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,o,r,s)=>(i.handleError(r,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function IL(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function Rq(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Tq(e){e._nesting--,CN(e)}var _b=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new V;onMicrotaskEmpty=new V;onStable=new V;onError=new V;run(t,n,i){return t.apply(n,i)}runGuarded(t,n,i){return t.apply(n,i)}runOutsideAngular(t){return t()}runTask(t,n,i,o){return t.apply(n,i)}};function Sye(e){return mK(e,"__ignore_ng_zone__")}function Eye(e){return mK(e,"__scheduler_tick__")}function mK(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Oo=class{_console=console;handleError(t){this._console.error("ERROR",t)}},vs=new q("",{factory:()=>{let e=k(me),t=k(Qn),n;return i=>{e.runOutsideAngular(()=>{t.destroyed&&!n?setTimeout(()=>{throw i}):(n??=t.get(Oo),n.handleError(i))})}}}),gK={provide:kc,useValue:()=>{let e=k(Oo,{optional:!0})},multi:!0};function $t(e,t){let[n,i,o]=tL(e,t?.equal),r=n,s=r[po];return r.set=i,r.update=o,r.asReadonly=z1.bind(r),r}function z1(){let e=this[po];if(e.readonlyFn===void 0){let t=()=>this();t[po]=e,e.readonlyFn=t}return e.readonlyFn}var Um=(()=>{class e{view;node;constructor(n,i){this.view=n,this.node=i}static __NG_ELEMENT_ID__=Dye}return e})();function Dye(){return new Um(ht(),to())}var Sa=class{},Wm=new q("",{factory:()=>!0});var V1=new q(""),Wh=(()=>{class e{internalPendingTasks=k(Cl);scheduler=k(Sa);errorHandler=k(vs);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let i=this.add();n().catch(this.errorHandler).finally(i)}static \u0275prov=ee({token:e,providedIn:"root",factory:()=>new e})}return e})(),H1=(()=>{class e{static \u0275prov=ee({token:e,providedIn:"root",factory:()=>new ML})}return e})(),ML=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let n=t.zone,i=this.queues.get(n);i.has(t)&&(i.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let i=this.queues.get(n);i.has(t)||i.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[n,i]of this.queues)n===null?t||=this.flushQueue(i):t||=n.run(()=>this.flushQueue(i));t||(this.dirtyEffectCount=0)}}flushQueue(t){let n=!1;for(let i of t)i.dirty&&(this.dirtyEffectCount--,n=!0,i.run());return n}},C1=class{[po];constructor(t){this[po]=t}destroy(){this[po].destroy()}};function wl(e,t){let n=t?.injector??k(Ke),i=t?.manualCleanup!==!0?n.get(Eo):null,o,r=n.get(Um,null,{optional:!0}),s=n.get(Sa);return r!==null?(o=Mye(r.view,s,e),i instanceof y1&&i._lView===r.view&&(i=null)):o=Rye(e,n.get(H1),s),o.injector=n,i!==null&&(o.onDestroyFns=[i.onDestroy(()=>o.destroy())]),new C1(o)}var vK=x(g({},iL),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let e=gb(!1);try{oL(this)}finally{gb(e)}},cleanup(){if(!this.cleanupFns?.length)return;let e=dt(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],dt(e)}}}),kye=x(g({},vK),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(Vd(this),this.onDestroyFns!==null)for(let e of this.onDestroyFns)e();this.cleanup(),this.scheduler.remove(this)}}),Iye=x(g({},vK),{consumerMarkedDirty(){this.view[Rt]|=8192,Uh(this.view),this.notifier.notify(13)},destroy(){if(Vd(this),this.onDestroyFns!==null)for(let e of this.onDestroyFns)e();this.cleanup(),this.view[jd]?.delete(this)}});function Mye(e,t,n){let i=Object.create(Iye);return i.view=e,i.zone=typeof Zone<"u"?Zone.current:null,i.notifier=t,i.fn=_K(i,n),e[jd]??=new Set,e[jd].add(i),i.consumerMarkedDirty(i),i}function Rye(e,t,n){let i=Object.create(kye);return i.fn=_K(i,e),i.scheduler=t,i.notifier=n,i.zone=typeof Zone<"u"?Zone.current:null,i.scheduler.add(i),i.notifier.notify(12),i}function _K(e,t){return()=>{t(n=>(e.cleanupFns??=[]).push(n))}}function mi(e){return nL(e)}function $b(e){return{toString:e}.toString()}function Lye(e){return typeof e=="function"}function YK(e,t,n,i){t!==null?t.applyValueToInputSignal(t,i):e[n]=i}var Y1=class{previousValue;currentValue;firstChange;constructor(t,n,i){this.previousValue=t,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}},sn=(()=>{let e=()=>QK;return e.ngInherit=!0,e})();function QK(e){return e.type.prototype.ngOnChanges&&(e.setInput=Bye),Nye}function Nye(){let e=XK(this),t=e?.current;if(t){let n=e.previous;if(n===Ud)e.previous=t;else for(let i in t)n[i]=t[i];e.current=null,this.ngOnChanges(t)}}function Bye(e,t,n,i,o){let r=this.declaredInputs[i],s=XK(e)||zye(e,{previous:Ud,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[r];a[r]=new Y1(c&&c.currentValue,n,l===Ud),YK(e,t,o,n)}var JK="__ngSimpleChanges__";function XK(e){return e[JK]||null}function zye(e,t){return e[JK]=t}var yK=[];var Tn=function(e,t=null,n){for(let i=0;i<yK.length;i++){let o=yK[i];o(e,t,n)}},_n=(function(e){return e[e.TemplateCreateStart=0]="TemplateCreateStart",e[e.TemplateCreateEnd=1]="TemplateCreateEnd",e[e.TemplateUpdateStart=2]="TemplateUpdateStart",e[e.TemplateUpdateEnd=3]="TemplateUpdateEnd",e[e.LifecycleHookStart=4]="LifecycleHookStart",e[e.LifecycleHookEnd=5]="LifecycleHookEnd",e[e.OutputStart=6]="OutputStart",e[e.OutputEnd=7]="OutputEnd",e[e.BootstrapApplicationStart=8]="BootstrapApplicationStart",e[e.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",e[e.BootstrapComponentStart=10]="BootstrapComponentStart",e[e.BootstrapComponentEnd=11]="BootstrapComponentEnd",e[e.ChangeDetectionStart=12]="ChangeDetectionStart",e[e.ChangeDetectionEnd=13]="ChangeDetectionEnd",e[e.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",e[e.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",e[e.AfterRenderHooksStart=16]="AfterRenderHooksStart",e[e.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",e[e.ComponentStart=18]="ComponentStart",e[e.ComponentEnd=19]="ComponentEnd",e[e.DeferBlockStateStart=20]="DeferBlockStateStart",e[e.DeferBlockStateEnd=21]="DeferBlockStateEnd",e[e.DynamicComponentStart=22]="DynamicComponentStart",e[e.DynamicComponentEnd=23]="DynamicComponentEnd",e[e.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",e[e.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",e})(_n||{});function Vye(e,t,n){let{ngOnChanges:i,ngOnInit:o,ngDoCheck:r}=t.type.prototype;if(i){let s=QK(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}o&&(n.preOrderHooks??=[]).push(0-e,o),r&&((n.preOrderHooks??=[]).push(e,r),(n.preOrderCheckHooks??=[]).push(e,r))}function eZ(e,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){let r=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=r;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),l&&(e.viewHooks??=[]).push(-n,l),c&&((e.viewHooks??=[]).push(n,c),(e.viewCheckHooks??=[]).push(n,c)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function U1(e,t,n){tZ(e,t,3,n)}function W1(e,t,n,i){(e[Rt]&3)===n&&tZ(e,t,n,i)}function wN(e,t){let n=e[Rt];(n&3)===t&&(n&=16383,n+=1,e[Rt]=n)}function tZ(e,t,n,i){let o=i!==void 0?e[Vh]&65535:0,r=i??-1,s=t.length-1,a=0;for(let l=o;l<s;l++)if(typeof t[l+1]=="number"){if(a=t[l],i!=null&&a>=i)break}else t[l]<0&&(e[Vh]+=65536),(a<r||r==-1)&&(Hye(e,n,t,l),e[Vh]=(e[Vh]&4294901760)+l+2),l++}function bK(e,t){Tn(_n.LifecycleHookStart,e,t);let n=dt(null);try{t.call(e)}finally{dt(n),Tn(_n.LifecycleHookEnd,e,t)}}function Hye(e,t,n,i){let o=n[i]<0,r=n[i+1],s=o?-n[i]:n[i],a=e[s];o?e[Rt]>>14<e[Vh]>>16&&(e[Rt]&3)===t&&(e[Rt]+=16384,bK(a,r)):bK(a,r)}var Km=-1,Kh=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,i,o){this.factory=t,this.name=o,this.canSeeViewProviders=n,this.injectImpl=i}};function $ye(e){return(e.flags&8)!==0}function jye(e){return(e.flags&16)!==0}function Gye(e,t,n){let i=0;for(;i<n.length;){let o=n[i];if(typeof o=="number"){if(o!==0)break;i++;let r=n[i++],s=n[i++],a=n[i++];e.setAttribute(t,s,a,r)}else{let r=o,s=n[++i];Uye(r)?e.setProperty(t,r,s):e.setAttribute(t,r,s),i++}}return i}function nZ(e){return e===3||e===4||e===6}function Uye(e){return e.charCodeAt(0)===64}function Zm(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){let o=t[i];typeof o=="number"?n=o:n===0||(n===-1||n===2?CK(e,n,o,null,t[++i]):CK(e,n,o,null,null))}}return e}function CK(e,t,n,i,o){let r=0,s=e.length;if(t===-1)s=-1;else for(;r<e.length;){let a=e[r++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=r-1;break}}}for(;r<e.length;){let a=e[r];if(typeof a=="number")break;if(a===n){o!==null&&(e[r+1]=o);return}r++,o!==null&&r++}s!==-1&&(e.splice(s,0,t),r=s+1),e.splice(r++,0,n),o!==null&&e.splice(r++,0,o)}function iZ(e){return e!==Km}function Q1(e){return e&32767}function Wye(e){return e>>16}function J1(e,t){let n=Wye(e),i=t;for(;n>0;)i=i[zh],n--;return i}var AN=!0;function X1(e){let t=AN;return AN=e,t}var qye=256,oZ=qye-1,rZ=5,Kye=0,xl={};function Zye(e,t,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(Nh)&&(i=n[Nh]),i==null&&(i=n[Nh]=Kye++);let o=i&oZ,r=1<<o;t.data[e+(o>>rZ)]|=r}function eD(e,t){let n=sZ(e,t);if(n!==-1)return n;let i=t[ut];i.firstCreatePass&&(e.injectorIndex=t.length,xN(i.data,e),xN(t,null),xN(i.blueprint,null));let o=p3(e,t),r=e.injectorIndex;if(iZ(o)){let s=Q1(o),a=J1(o,t),l=a[ut].data;for(let c=0;c<8;c++)t[r+c]=a[s+c]|l[s+c]}return t[r+8]=o,r}function xN(e,t){e.push(0,0,0,0,0,0,0,0,t)}function sZ(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function p3(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,i=null,o=t;for(;o!==null;){if(i=uZ(o),i===null)return Km;if(n++,o=o[zh],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return Km}function ON(e,t,n){Zye(e,t,n)}function Yye(e,t){if(t==="class")return e.classes;if(t==="style")return e.styles;let n=e.attrs;if(n){let i=n.length,o=0;for(;o<i;){let r=n[o];if(nZ(r))break;if(r===0)o=o+2;else if(typeof r=="number")for(o++;o<i&&typeof n[o]=="string";)o++;else{if(r===t)return n[o+1];o=o+2}}}return null}function aZ(e,t,n){if(n&8||e!==void 0)return e;E1(t,"NodeInjector")}function lZ(e,t,n,i){if(n&8&&i===void 0&&(i=null),(n&3)===0){let o=e[Mc],r=br(void 0);try{return o?o.get(t,i,n&8):VL(t,i,n&8)}finally{br(r)}}return aZ(i,t,n)}function cZ(e,t,n,i=0,o){if(e!==null){if(t[Rt]&2048&&!(i&2)){let s=ebe(e,t,n,i,xl);if(s!==xl)return s}let r=dZ(e,t,n,i,xl);if(r!==xl)return r}return lZ(t,n,i,o)}function dZ(e,t,n,i,o){let r=Jye(n);if(typeof r=="function"){if(!fN(t,e,i))return i&1?aZ(o,n,i):lZ(t,n,i,o);try{let s;if(s=r(i),s==null&&!(i&8))E1(n);else return s}finally{mN()}}else if(typeof r=="number"){let s=null,a=sZ(e,t),l=Km,c=i&1?t[wr][Cr]:null;for((a===-1||i&4)&&(l=a===-1?p3(e,t):t[a+8],l===Km||!xK(i,!1)?a=-1:(s=t[ut],a=Q1(l),t=J1(l,t)));a!==-1;){let u=t[ut];if(wK(r,a,u.data)){let h=Qye(a,t,n,s,i,c);if(h!==xl)return h}l=t[a+8],l!==Km&&xK(i,t[ut].data[a+8]===c)&&wK(r,a,t)?(s=u,a=Q1(l),t=J1(l,t)):a=-1}}return o}function Qye(e,t,n,i,o,r){let s=t[ut],a=s.data[e+8],l=i==null?Kd(a)&&AN:i!=s&&(a.type&3)!==0,c=o&1&&r===a,u=q1(a,s,n,l,c);return u!==null?Fb(t,s,u,a,o):xl}function q1(e,t,n,i,o){let r=e.providerIndexes,s=t.data,a=r&1048575,l=e.directiveStart,c=e.directiveEnd,u=r>>20,h=i?a:a+u,f=o?a+u:c;for(let m=h;m<f;m++){let _=s[m];if(m<l&&n===_||m>=l&&_.type===n)return m}if(o){let m=s[l];if(m&&yl(m)&&m.type===n)return l}return null}function Fb(e,t,n,i,o){let r=e[n],s=t.data;if(r instanceof Kh){let a=r;if(a.resolving){let m=Oq(s[n]);throw zL(m)}let l=X1(a.canSeeViewProviders);a.resolving=!0;let c=s[n].type||s[n],u,h=a.injectImpl?br(a.injectImpl):null,f=fN(e,i,0);try{r=e[n]=a.factory(void 0,o,s,e,i),t.firstCreatePass&&n>=i.directiveStart&&Vye(n,s[n],t)}finally{h!==null&&br(h),X1(l),a.resolving=!1,mN()}}return r}function Jye(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Nh)?e[Nh]:void 0;return typeof t=="number"?t>=0?t&oZ:Xye:t}function wK(e,t,n){let i=1<<e;return!!(n[t+(e>>rZ)]&i)}function xK(e,t){return!(e&2)&&!(e&1&&t)}var qh=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,i){return cZ(this._tNode,this._lView,t,Oh(i),n)}};function Xye(){return new qh(to(),ht())}function gn(e){return $b(()=>{let t=e.prototype.constructor,n=t[fb]||FN(t),i=Object.prototype,o=Object.getPrototypeOf(e.prototype).constructor;for(;o&&o!==i;){let r=o[fb]||FN(o);if(r&&r!==n)return r;o=Object.getPrototypeOf(o)}return r=>new r})}function FN(e){return RL(e)?()=>{let t=FN(Ao(e));return t&&t()}:$d(e)}function ebe(e,t,n,i,o){let r=e,s=t;for(;r!==null&&s!==null&&s[Rt]&2048&&!jm(s);){let a=dZ(r,s,n,i|2,xl);if(a!==xl)return a;let l=r.parent;if(!l){let c=s[KL];if(c){let u=c.get(n,xl,i);if(u!==xl)return u}l=uZ(s),s=s[zh]}r=l}return o}function uZ(e){let t=e[ut],n=t.type;return n===2?t.declTNode:n===1?e[Cr]:null}function f3(e){return Yye(to(),e)}function tbe(){return eg(to(),ht())}function eg(e,t){return new Oe(ka(e,t))}var Oe=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=tbe}return e})();function hZ(e){return e instanceof Oe?e.nativeElement:e}function nbe(){return this._results[Symbol.iterator]()}var Ws=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ie}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let i=zq(t);(this._changesDetected=!Bq(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=nbe};function pZ(e){return(e.flags&128)===128}var m3=(function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e})(m3||{}),fZ=new Map,ibe=0;function obe(){return ibe++}function rbe(e){fZ.set(e[wb],e)}function LN(e){fZ.delete(e[wb])}var SK="__ngContext__";function Ym(e,t){_l(t)?(e[SK]=t[wb],rbe(t)):e[SK]=t}function mZ(e){return vZ(e[Hm])}function gZ(e){return vZ(e[js])}function vZ(e){for(;e!==null&&!Da(e);)e=e[js];return e}var sbe;function g3(e){sbe=e}var Jd=new q("",{factory:()=>abe}),abe="ng";var pD=new q(""),Tc=new q("",{providedIn:"platform",factory:()=>"unknown"}),jb=new q(""),tg=new q("",{factory:()=>k(Je).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var _Z="r";var yZ="di";var bZ=!1,CZ=new q("",{factory:()=>bZ});var lbe=(e,t,n,i)=>{};function cbe(e,t,n,i){lbe(e,t,n,i)}function fD(e){return(e.flags&32)===32}var dbe=()=>null;function wZ(e,t,n=!1){return dbe(e,t,n)}function xZ(e,t){let n=e.contentQueries;if(n!==null){let i=dt(null);try{for(let o=0;o<n.length;o+=2){let r=n[o],s=n[o+1];if(s!==-1){let a=e.data[s];Ib(r),a.contentQueries(2,t[s],s)}}}finally{dt(i)}}}function NN(e,t,n){Ib(0);let i=dt(null);try{t(e,n)}finally{dt(i)}}function v3(e,t,n){if(YL(t)){let i=dt(null);try{let o=t.directiveStart,r=t.directiveEnd;for(let s=o;s<r;s++){let a=e.data[s];if(a.contentQueries){let l=n[s];a.contentQueries(1,l,s)}}}finally{dt(i)}}}var Ta=(function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e[e.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",e})(Ta||{});var $1;function ube(){if($1===void 0&&($1=null,fl.trustedTypes))try{$1=fl.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return $1}function mD(e){return ube()?.createHTML(e)||e}var Rc=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${w1})`}},BN=class extends Rc{getTypeName(){return"HTML"}},zN=class extends Rc{getTypeName(){return"Style"}},VN=class extends Rc{getTypeName(){return"Script"}},HN=class extends Rc{getTypeName(){return"URL"}},$N=class extends Rc{getTypeName(){return"ResourceURL"}};function Dl(e){return e instanceof Rc?e.changingThisBreaksApplicationSecurity:e}function Xd(e,t){let n=SZ(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${w1})`)}return n===t}function SZ(e){return e instanceof Rc&&e.getTypeName()||null}function _3(e){return new BN(e)}function y3(e){return new zN(e)}function b3(e){return new VN(e)}function C3(e){return new HN(e)}function w3(e){return new $N(e)}function hbe(e){let t=new GN(e);return pbe()?new jN(t):t}var jN=class{inertDocumentHelper;constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let n=new window.DOMParser().parseFromString(mD(t),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(t):(n.firstChild?.remove(),n)}catch{return null}}},GN=class{defaultDoc;inertDocument;constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let n=this.inertDocument.createElement("template");return n.innerHTML=mD(t),n}};function pbe(){try{return!!new window.DOMParser().parseFromString(mD(""),"text/html")}catch{return!1}}var fbe=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Gb(e){return e=String(e),e.match(fbe)?e:"unsafe:"+e}function Pc(e){let t={};for(let n of e.split(","))t[n]=!0;return t}function Ub(...e){let t={};for(let n of e)for(let i in n)n.hasOwnProperty(i)&&(t[i]=!0);return t}var EZ=Pc("area,br,col,hr,img,wbr"),DZ=Pc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),kZ=Pc("rp,rt"),mbe=Ub(kZ,DZ),gbe=Ub(DZ,Pc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),vbe=Ub(kZ,Pc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),EK=Ub(EZ,gbe,vbe,mbe),IZ=Pc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),_be=Pc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ybe=Pc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),bbe=Ub(IZ,_be,ybe),Cbe=Pc("script,style,template"),UN=class{sanitizedSomething=!1;buf=[];sanitizeChildren(t){let n=t.firstChild,i=!0,o=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?i=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,i&&n.firstChild){o.push(n),n=Sbe(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let r=xbe(n);if(r){n=r;break}n=o.pop()}}return this.buf.join("")}startElement(t){let n=DK(t).toLowerCase();if(!EK.hasOwnProperty(n))return this.sanitizedSomething=!0,!Cbe.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let i=t.attributes;for(let o=0;o<i.length;o++){let r=i.item(o),s=r.name,a=s.toLowerCase();if(!bbe.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=r.value;IZ[a]&&(l=Gb(l)),this.buf.push(" ",s,'="',kK(l),'"')}return this.buf.push(">"),!0}endElement(t){let n=DK(t).toLowerCase();EK.hasOwnProperty(n)&&!EZ.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(kK(t))}};function wbe(e,t){return(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function xbe(e){let t=e.nextSibling;if(t&&e!==t.previousSibling)throw MZ(t);return t}function Sbe(e){let t=e.firstChild;if(t&&wbe(e,t))throw MZ(t);return t}function DK(e){let t=e.nodeName;return typeof t=="string"?t:"FORM"}function MZ(e){return new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`)}var Ebe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Dbe=/([^\#-~ |!])/g;function kK(e){return e.replace(/&/g,"&amp;").replace(Ebe,function(t){let n=t.charCodeAt(0),i=t.charCodeAt(1);return"&#"+((n-55296)*1024+(i-56320)+65536)+";"}).replace(Dbe,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var j1;function x3(e,t){let n=null;try{j1=j1||hbe(e);let i=t?String(t):"";n=j1.getInertBodyElement(i);let o=5,r=i;do{if(o===0)throw new Error("Failed to sanitize html because the input is unstable");o--,i=r,r=n.innerHTML,n=j1.getInertBodyElement(i)}while(i!==r);let a=new UN().sanitizeChildren(IK(n)||n);return mD(a)}finally{if(n){let i=IK(n)||n;for(;i.firstChild;)i.firstChild.remove()}}}function IK(e){return"content"in e&&kbe(e)?e.content:null}function kbe(e){return e.nodeType===Node.ELEMENT_NODE&&e.nodeName==="TEMPLATE"}var Ibe=/^>|^->|<!--|-->|--!>|<!-$/g,Mbe=/(<|>)/g,Rbe="\u200B$1\u200B";function Tbe(e){return e.replace(Ibe,t=>t.replace(Mbe,Rbe))}function Pbe(e,t){return e.createText(t)}function Abe(e,t,n){e.setValue(t,n)}function Obe(e,t){return e.createComment(Tbe(t))}function RZ(e,t,n){return e.createElement(t,n)}function tD(e,t,n,i,o){e.insertBefore(t,n,i,o)}function TZ(e,t,n){e.appendChild(t,n)}function MK(e,t,n,i,o){i!==null?tD(e,t,n,i,o):TZ(e,t,n)}function PZ(e,t,n,i){e.removeChild(null,t,n,i)}function Fbe(e,t,n){e.setAttribute(t,"style",n)}function Lbe(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function AZ(e,t,n){let{mergedAttrs:i,classes:o,styles:r}=n;i!==null&&Gye(e,t,i),o!==null&&Lbe(e,t,o),r!==null&&Fbe(e,t,r)}var mo=(function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e})(mo||{});function Wb(e){let t=Nbe();return t?t.sanitize(mo.URL,e)||"":Xd(e,"URL")?Dl(e):Gb(ml(e))}function Nbe(){let e=ht();return e&&e[gl].sanitizer}function qb(e){return e.ownerDocument.defaultView}function OZ(e){return e instanceof Function?e():e}function Bbe(e,t,n){let i=e.length;for(;;){let o=e.indexOf(t,n);if(o===-1)return o;if(o===0||e.charCodeAt(o-1)<=32){let r=t.length;if(o+r===i||e.charCodeAt(o+r)<=32)return o}n=o+1}}var FZ="ng-template";function zbe(e,t,n,i){let o=0;if(i){for(;o<t.length&&typeof t[o]=="string";o+=2)if(t[o]==="class"&&Bbe(t[o+1].toLowerCase(),n,0)!==-1)return!0}else if(S3(e))return!1;if(o=t.indexOf(1,o),o>-1){let r;for(;++o<t.length&&typeof(r=t[o])=="string";)if(r.toLowerCase()===n)return!0}return!1}function S3(e){return e.type===4&&e.value!==FZ}function Vbe(e,t,n){let i=e.type===4&&!n?FZ:e.value;return t===i}function Hbe(e,t,n){let i=4,o=e.attrs,r=o!==null?Gbe(o):0,s=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!s&&!Ma(i)&&!Ma(l))return!1;if(s&&Ma(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!Vbe(e,l,n)||l===""&&t.length===1){if(Ma(i))return!1;s=!0}}else if(i&8){if(o===null||!zbe(e,o,l,n)){if(Ma(i))return!1;s=!0}}else{let c=t[++a],u=$be(l,o,S3(e),n);if(u===-1){if(Ma(i))return!1;s=!0;continue}if(c!==""){let h;if(u>r?h="":h=o[u+1].toLowerCase(),i&2&&c!==h){if(Ma(i))return!1;s=!0}}}}return Ma(i)||s}function Ma(e){return(e&1)===0}function $be(e,t,n,i){if(t===null)return-1;let o=0;if(i||!n){let r=!1;for(;o<t.length;){let s=t[o];if(s===e)return o;if(s===3||s===6)r=!0;else if(s===1||s===2){let a=t[++o];for(;typeof a=="string";)a=t[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=r?1:2}return-1}else return Ube(t,e)}function LZ(e,t,n=!1){for(let i=0;i<t.length;i++)if(Hbe(e,t[i],n))return!0;return!1}function jbe(e){let t=e.attrs;if(t!=null){let n=t.indexOf(5);if((n&1)===0)return t[n+1]}return null}function Gbe(e){for(let t=0;t<e.length;t++){let n=e[t];if(nZ(n))return t}return e.length}function Ube(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let i=e[n];if(typeof i=="number")return-1;if(i===t)return n;n++}return-1}function Wbe(e,t){e:for(let n=0;n<t.length;n++){let i=t[n];if(e.length===i.length){for(let o=0;o<e.length;o++)if(e[o]!==i[o])continue e;return!0}}return!1}function RK(e,t){return e?":not("+t.trim()+")":t}function qbe(e){let t=e[0],n=1,i=2,o="",r=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(i&2){let a=e[++n];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?o+="."+s:i&4&&(o+=" "+s);else o!==""&&!Ma(s)&&(t+=RK(r,o),o=""),i=s,r=r||!Ma(i);n++}return o!==""&&(t+=RK(r,o)),t}function Kbe(e){return e.map(qbe).join(",")}function Zbe(e){let t=[],n=[],i=1,o=2;for(;i<e.length;){let r=e[i];if(typeof r=="string")o===2?r!==""&&t.push(r,e[++i]):o===8&&n.push(r);else{if(!Ma(o))break;o=r}i++}return n.length&&t.push(1,...n),t}var Lo={};function E3(e,t,n,i,o,r,s,a,l,c,u){let h=si+i,f=h+o,m=Ybe(h,f),_=typeof c=="function"?c():c;return m[ut]={type:e,blueprint:m,template:n,queries:null,viewQuery:a,declTNode:t,data:m.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof r=="function"?r():r,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:_,incompleteFirstPass:!1,ssrId:u}}function Ybe(e,t){let n=[];for(let i=0;i<t;i++)n.push(i<e?null:Lo);return n}function Qbe(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=E3(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function D3(e,t,n,i,o,r,s,a,l,c,u){let h=t.blueprint.slice();return h[Ea]=o,h[Rt]=i|4|128|8|64|1024,(c!==null||e&&e[Rt]&2048)&&(h[Rt]|=2048),eN(h),h[fo]=h[zh]=e,h[zi]=n,h[gl]=s||e&&e[gl],h[zn]=a||e&&e[zn],h[Mc]=l||e&&e[Mc]||null,h[Cr]=r,h[wb]=obe(),h[Bh]=u,h[KL]=c,h[wr]=t.type==2?e[wr]:h,h}function Jbe(e,t,n){let i=ka(t,e),o=Qbe(n),r=e[gl].rendererFactory,s=k3(e,D3(e,o,null,NZ(n),i,t,null,r.createRenderer(i,n),null,null,null));return e[t.index]=s}function NZ(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function BZ(e,t,n,i){if(n===0)return-1;let o=t.length;for(let r=0;r<n;r++)t.push(i),e.blueprint.push(i),e.data.push(null);return o}function k3(e,t){return e[Hm]?e[qL][js]=t:e[Hm]=t,e[qL]=t,t}function P(e=1){zZ(Jn(),ht(),Ia()+e,!1)}function zZ(e,t,n,i){if(!i)if((t[Rt]&3)===3){let r=e.preOrderCheckHooks;r!==null&&U1(t,r,n)}else{let r=e.preOrderHooks;r!==null&&W1(t,r,0,n)}Yd(n)}var gD=(function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e})(gD||{});function WN(e,t,n,i){let o=dt(null);try{let[r,s,a]=e.inputs[n],l=null;(s&gD.SignalBased)!==0&&(l=t[r][po]),l!==null&&l.transformFn!==void 0?i=l.transformFn(i):a!==null&&(i=a.call(t,i)),e.setInput!==null?e.setInput(t,l,i,n,r):YK(t,l,r,i)}finally{dt(o)}}var Sl=(function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e})(Sl||{}),Xbe;function I3(e,t){return Xbe(e,t)}var Zh=new Set,vD=(function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e})(vD||{}),kl=new q(""),TK=new Set;function Ac(e){TK.has(e)||(TK.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var _D=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=ee({token:e,providedIn:"root",factory:()=>new e})}return e})(),M3=[0,1,2,3],R3=(()=>{class e{ngZone=k(me);scheduler=k(Sa);errorHandler=k(Oo,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){k(kl,{optional:!0})}execute(){let n=this.sequences.size>0;n&&Tn(_n.AfterRenderHooksStart),this.executing=!0;for(let i of M3)for(let o of this.sequences)if(!(o.erroredOrDestroyed||!o.hooks[i]))try{o.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let r=o.hooks[i];return r(o.pipelinedValue)},o.snapshot))}catch(r){o.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&Tn(_n.AfterRenderHooksEnd)}register(n){let{view:i}=n;i!==void 0?((i[Hh]??=[]).push(n),Uh(i),i[Rt]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,i){return i?i.run(vD.AFTER_NEXT_RENDER,n):n()}static \u0275prov=ee({token:e,providedIn:"root",factory:()=>new e})}return e})(),Lb=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,n,i,o,r,s=null){this.impl=t,this.hooks=n,this.view=i,this.once=o,this.snapshot=s,this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[Hh];t&&(this.view[Hh]=t.filter(n=>n!==this))}};function ai(e,t){let n=t?.injector??k(Ke);return Ac("NgAfterNextRender"),tCe(e,n,t,!0)}function eCe(e){return e instanceof Function?[void 0,void 0,e,void 0]:[e.earlyRead,e.write,e.mixedReadWrite,e.read]}function tCe(e,t,n,i){let o=t.get(_D);o.impl??=t.get(R3);let r=t.get(kl,null,{optional:!0}),s=n?.manualCleanup!==!0?t.get(Eo):null,a=t.get(Um,null,{optional:!0}),l=new Lb(o.impl,eCe(e),a?.view,i,s,r?.snapshot(null));return o.impl.register(l),l}var VZ=new q("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:k(Qn)})});function HZ(e,t,n){let i=e.get(VZ);if(Array.isArray(t))for(let o of t)i.queue.add(o),n?.detachedLeaveAnimationFns?.push(o);else i.queue.add(t),n?.detachedLeaveAnimationFns?.push(t);i.scheduler&&i.scheduler(e)}function nCe(e,t){let n=e.get(VZ);if(t.detachedLeaveAnimationFns){for(let i of t.detachedLeaveAnimationFns)n.queue.delete(i);t.detachedLeaveAnimationFns=void 0}}function iCe(e,t){for(let[n,i]of t)HZ(e,i.animateFns)}function PK(e,t,n,i){let o=e?.[$h]?.enter;t!==null&&o&&o.has(n.index)&&iCe(i,o)}function qm(e,t,n,i,o,r,s,a){if(o!=null){let l,c=!1;Da(o)?l=o:_l(o)&&(c=!0,o=o[Ea]);let u=Gs(o);e===0&&i!==null?(PK(a,i,r,n),s==null?TZ(t,i,u):tD(t,i,u,s||null,!0)):e===1&&i!==null?(PK(a,i,r,n),tD(t,i,u,s||null,!0)):e===2?AK(a,r,n,h=>{PZ(t,u,c,h)}):e===3&&AK(a,r,n,()=>{t.destroyNode(u)}),l!=null&&fCe(t,e,n,l,r,i,s)}}function oCe(e,t){$Z(e,t),t[Ea]=null,t[Cr]=null}function rCe(e,t,n,i,o,r){i[Ea]=o,i[Cr]=t,bD(e,i,n,1,o,r)}function $Z(e,t){t[gl].changeDetectionScheduler?.notify(9),bD(e,t,t[zn],2,null,null)}function sCe(e){let t=e[Hm];if(!t)return SN(e[ut],e);for(;t;){let n=null;if(_l(t))n=t[Hm];else{let i=t[Ai];i&&(n=i)}if(!n){for(;t&&!t[js]&&t!==e;)_l(t)&&SN(t[ut],t),t=t[fo];t===null&&(t=e),_l(t)&&SN(t[ut],t),n=t&&t[js]}t=n}}function T3(e,t){let n=e[jh],i=n.indexOf(t);n.splice(i,1)}function yD(e,t){if(Gh(t))return;let n=t[zn];n.destroyNode&&bD(e,t,n,3,null,null),sCe(t)}function SN(e,t){if(Gh(t))return;let n=dt(null);try{t[Rt]&=-129,t[Rt]|=256,t[ms]&&Vd(t[ms]),cCe(e,t),lCe(e,t),t[ut].type===1&&t[zn].destroy();let i=t[Wd];if(i!==null&&Da(t[fo])){i!==t[fo]&&T3(i,t);let o=t[vl];o!==null&&o.detachView(e)}LN(t)}finally{dt(n)}}function AK(e,t,n,i){let o=e?.[$h];if(o==null||o.leave==null||!o.leave.has(t.index))return i(!1);e&&Zh.add(e),HZ(n,()=>{if(o.leave&&o.leave.has(t.index)){let s=o.leave.get(t.index),a=[];if(s){for(let l=0;l<s.animateFns.length;l++){let c=s.animateFns[l],{promise:u}=c();a.push(u)}o.detachedLeaveAnimationFns=void 0}o.running=Promise.allSettled(a),aCe(e,i)}else e&&Zh.delete(e),i(!1)},o)}function aCe(e,t){let n=e[$h]?.running;if(n){n.then(()=>{e[$h].running=void 0,Zh.delete(e),t(!0)});return}t(!1)}function lCe(e,t){let n=e.cleanup,i=t[Vm];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?i[a]():i[-a].unsubscribe(),s+=2}else{let a=i[n[s+1]];n[s].call(a)}i!==null&&(t[Vm]=null);let o=t[Sc];if(o!==null){t[Sc]=null;for(let s=0;s<o.length;s++){let a=o[s];a()}}let r=t[jd];if(r!==null){t[jd]=null;for(let s of r)s.destroy()}}function cCe(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let o=t[n[i]];if(!(o instanceof Kh)){let r=n[i+1];if(Array.isArray(r))for(let s=0;s<r.length;s+=2){let a=o[r[s]],l=r[s+1];Tn(_n.LifecycleHookStart,a,l);try{l.call(a)}finally{Tn(_n.LifecycleHookEnd,a,l)}}else{Tn(_n.LifecycleHookStart,o,r);try{r.call(o)}finally{Tn(_n.LifecycleHookEnd,o,r)}}}}}function jZ(e,t,n){return dCe(e,t.parent,n)}function dCe(e,t,n){let i=t;for(;i!==null&&i.type&168;)t=i,i=t.parent;if(i===null)return n[Ea];if(Kd(i)){let{encapsulation:o}=e.data[i.directiveStart+i.componentOffset];if(o===Ta.None||o===Ta.Emulated)return null}return ka(i,n)}function GZ(e,t,n){return hCe(e,t,n)}function uCe(e,t,n){return e.type&40?ka(e,n):null}var hCe=uCe,OK;function P3(e,t,n,i){let o=jZ(e,i,t),r=t[zn],s=i.parent||t[Cr],a=GZ(s,i,t);if(o!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)MK(r,o,n[l],a,!1);else MK(r,o,n,a,!1);OK!==void 0&&OK(r,i,t,n,o)}function Ab(e,t){if(t!==null){let n=t.type;if(n&3)return ka(t,e);if(n&4)return qN(-1,e[t.index]);if(n&8){let i=t.child;if(i!==null)return Ab(e,i);{let o=e[t.index];return Da(o)?qN(-1,o):Gs(o)}}else{if(n&128)return Ab(e,t.next);if(n&32)return I3(t,e)()||Gs(e[t.index]);{let i=UZ(e,t);if(i!==null){if(Array.isArray(i))return i[0];let o=Gd(e[wr]);return Ab(o,i)}else return Ab(e,t.next)}}}return null}function UZ(e,t){if(t!==null){let i=e[wr][Cr],o=t.projection;return i.projection[o]}return null}function qN(e,t){let n=Ai+e+1;if(n<t.length){let i=t[n],o=i[ut].firstChild;if(o!==null)return Ab(i,o)}return t[qd]}function A3(e,t,n,i,o,r,s){for(;n!=null;){let a=i[Mc];if(n.type===128){n=n.next;continue}let l=i[n.index],c=n.type;if(s&&t===0&&(l&&Ym(Gs(l),i),n.flags|=2),!fD(n))if(c&8)A3(e,t,n.child,i,o,r,!1),qm(t,e,a,o,l,n,r,i);else if(c&32){let u=I3(n,i),h;for(;h=u();)qm(t,e,a,o,h,n,r,i);qm(t,e,a,o,l,n,r,i)}else c&16?WZ(e,t,i,n,o,r):qm(t,e,a,o,l,n,r,i);n=s?n.projectionNext:n.next}}function bD(e,t,n,i,o,r){A3(n,i,e.firstChild,t,o,r,!1)}function pCe(e,t,n){let i=t[zn],o=jZ(e,n,t),r=n.parent||t[Cr],s=GZ(r,n,t);WZ(i,0,t,n,o,s)}function WZ(e,t,n,i,o,r){let s=n[wr],l=s[Cr].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];qm(t,e,n[Mc],o,u,i,r,n)}else{let c=l,u=s[fo];pZ(i)&&(c.flags|=128),A3(e,t,c,u,o,r,!0)}}function fCe(e,t,n,i,o,r,s){let a=i[qd],l=Gs(i);a!==l&&qm(t,e,n,r,a,o,s);for(let c=Ai;c<i.length;c++){let u=i[c];bD(u[ut],u,e,t,r,a)}}function mCe(e,t,n,i,o){if(t)o?e.addClass(n,i):e.removeClass(n,i);else{let r=i.indexOf("-")===-1?void 0:Sl.DashCase;o==null?e.removeStyle(n,i,r):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),r|=Sl.Important),e.setStyle(n,i,o,r))}}function qZ(e,t,n,i,o){let r=Ia(),s=i&2;try{Yd(-1),s&&t.length>si&&zZ(e,t,si,!1);let a=s?_n.TemplateUpdateStart:_n.TemplateCreateStart;Tn(a,o,n),n(i,o)}finally{Yd(r);let a=s?_n.TemplateUpdateEnd:_n.TemplateCreateEnd;Tn(a,o,n)}}function CD(e,t,n){CCe(e,t,n),(n.flags&64)===64&&wCe(e,t,n)}function Kb(e,t,n=ka){let i=t.localNames;if(i!==null){let o=t.index+1;for(let r=0;r<i.length;r+=2){let s=i[r+1],a=s===-1?n(t,e):e[s];e[o++]=a}}}function gCe(e,t,n,i){let r=i.get(CZ,bZ)||n===Ta.ShadowDom||n===Ta.ExperimentalIsolatedShadowDom,s=e.selectRootElement(t,r);return vCe(s),s}function vCe(e){_Ce(e)}var _Ce=()=>null;function yCe(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function KZ(e,t,n,i,o,r){let s=t[ut];if(N3(e,s,t,n,i)){Kd(e)&&bCe(t,e.index);return}e.type&3&&(n=yCe(n)),ZZ(e,t,n,i,o,r)}function ZZ(e,t,n,i,o,r){if(e.type&3){let s=ka(e,t);i=r!=null?r(i,e.value||"",n):i,o.setProperty(s,n,i)}else e.type&12}function bCe(e,t){let n=Us(t,e);n[Rt]&16||(n[Rt]|=64)}function CCe(e,t,n){let i=n.directiveStart,o=n.directiveEnd;Kd(n)&&Jbe(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||eD(n,t);let r=n.initialInputs;for(let s=i;s<o;s++){let a=e.data[s],l=Fb(t,e,s,n);if(Ym(l,t),r!==null&&DCe(t,s-i,l,a,n,r),yl(a)){let c=Us(n.index,t);c[zi]=Fb(t,e,s,n)}}}function wCe(e,t,n){let i=n.directiveStart,o=n.directiveEnd,r=n.index,s=aK();try{Yd(r);for(let a=i;a<o;a++){let l=e.data[a],c=t[a];O1(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&xCe(l,c)}}finally{Yd(-1),O1(s)}}function xCe(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function O3(e,t){let n=e.directiveRegistry,i=null;if(n)for(let o=0;o<n.length;o++){let r=n[o];LZ(t,r.selectors,!1)&&(i??=[],yl(r)?i.unshift(r):i.push(r))}return i}function SCe(e,t,n,i,o,r){let s=ka(e,t);ECe(t[zn],s,r,e.value,n,i,o)}function ECe(e,t,n,i,o,r,s){if(r==null)e.removeAttribute(t,o,n);else{let a=s==null?ml(r):s(r,i||"",o);e.setAttribute(t,o,a,n)}}function DCe(e,t,n,i,o,r){let s=r[t];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];WN(i,n,l,c)}}function F3(e,t,n,i,o){let r=si+n,s=t[ut],a=o(s,t,e,i,n);t[r]=a,Gm(e,!0);let l=e.type===2;return l?(AZ(t[zn],a,e),(eK()===0||$m(e))&&Ym(a,t),tK()):Ym(a,t),B1()&&(!l||!fD(e))&&P3(s,t,a,e),e}function L3(e){let t=e;return dN()?uN():(t=t.parent,Gm(t,!1)),t}function kCe(e,t){let n=e[Mc];if(!n)return;let i;try{i=n.get(vs,null)}catch{i=null}i?.(t)}function N3(e,t,n,i,o){let r=e.inputs?.[i],s=e.hostDirectiveInputs?.[i],a=!1;if(s)for(let l=0;l<s.length;l+=2){let c=s[l],u=s[l+1],h=t.data[c];WN(h,n[c],u,o),a=!0}if(r)for(let l of r){let c=n[l],u=t.data[l];WN(u,c,i,o),a=!0}return a}function ICe(e,t){let n=Us(t,e),i=n[ut];MCe(i,n);let o=n[Ea];o!==null&&n[Bh]===null&&(n[Bh]=wZ(o,n[Mc])),Tn(_n.ComponentStart);try{B3(i,n,n[zi])}finally{Tn(_n.ComponentEnd,n[zi])}}function MCe(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function B3(e,t,n){L1(t);try{let i=e.viewQuery;i!==null&&NN(1,i,n);let o=e.template;o!==null&&qZ(e,t,o,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[vl]?.finishViewCreation(e),e.staticContentQueries&&xZ(e,t),e.staticViewQueries&&NN(2,e.viewQuery,n);let r=e.components;r!==null&&RCe(t,r)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{t[Rt]&=-5,N1()}}function RCe(e,t){for(let n=0;n<t.length;n++)ICe(e,t[n])}function Zb(e,t,n,i){let o=dt(null);try{let r=t.tView,a=e[Rt]&4096?4096:16,l=D3(e,r,n,a,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=e[t.index];l[Wd]=c;let u=e[vl];return u!==null&&(l[vl]=u.createEmbeddedView(r)),B3(r,l,n),l}finally{dt(o)}}function Qm(e,t){return!t||t.firstChild===null||pZ(e)}function Nb(e,t,n,i,o=!1){for(;n!==null;){if(n.type===128){n=o?n.projectionNext:n.next;continue}let r=t[n.index];r!==null&&i.push(Gs(r)),Da(r)&&YZ(r,i);let s=n.type;if(s&8)Nb(e,t,n.child,i);else if(s&32){let a=I3(n,t),l;for(;l=a();)i.push(l)}else if(s&16){let a=UZ(t,n);if(Array.isArray(a))i.push(...a);else{let l=Gd(t[wr]);Nb(l[ut],l,a,i,!0)}}n=o?n.projectionNext:n.next}return i}function YZ(e,t){for(let n=Ai;n<e.length;n++){let i=e[n],o=i[ut].firstChild;o!==null&&Nb(i[ut],i,o,t)}e[qd]!==e[Ea]&&t.push(e[qd])}function QZ(e){if(e[Hh]!==null){for(let t of e[Hh])t.impl.addSequence(t);e[Hh].length=0}}var JZ=[];function TCe(e){return e[ms]??PCe(e)}function PCe(e){let t=JZ.pop()??Object.create(OCe);return t.lView=e,t}function ACe(e){e.lView[ms]!==e&&(e.lView=null,JZ.push(e))}var OCe=x(g({},gm),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{Uh(e.lView)},consumerOnSignalRead(){this.lView[ms]=this}});function FCe(e){let t=e[ms]??Object.create(LCe);return t.lView=e,t}var LCe=x(g({},gm),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=Gd(e.lView);for(;t&&!XZ(t[ut]);)t=Gd(t);t&&tN(t)},consumerOnSignalRead(){this.lView[ms]=this}});function XZ(e){return e.type!==2}function eY(e){if(e[jd]===null)return;let t=!0;for(;t;){let n=!1;for(let i of e[jd])i.dirty&&(n=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));t=n&&!!(e[Rt]&8192)}}var NCe=100;function tY(e,t=0){let i=e[gl].rendererFactory,o=!1;o||i.begin?.();try{BCe(e,t)}finally{o||i.end?.()}}function BCe(e,t){let n=hN();try{gb(!0),KN(e,t);let i=0;for(;Eb(e);){if(i===NCe)throw new _e(103,!1);i++,KN(e,1)}}finally{gb(n)}}function zCe(e,t,n,i){if(Gh(t))return;let o=t[Rt],r=!1,s=!1;L1(t);let a=!0,l=null,c=null;r||(XZ(e)?(c=TCe(t),l=Sh(c)):VE()===null?(a=!1,c=FCe(t),l=Sh(c)):t[ms]&&(Vd(t[ms]),t[ms]=null));try{eN(t),oK(e.bindingStartIndex),n!==null&&qZ(e,t,n,2,i);let u=(o&3)===3;if(!r)if(u){let m=e.preOrderCheckHooks;m!==null&&U1(t,m,null)}else{let m=e.preOrderHooks;m!==null&&W1(t,m,0,null),wN(t,0)}if(s||VCe(t),eY(t),nY(t,0),e.contentQueries!==null&&xZ(e,t),!r)if(u){let m=e.contentCheckHooks;m!==null&&U1(t,m)}else{let m=e.contentHooks;m!==null&&W1(t,m,1),wN(t,1)}$Ce(e,t);let h=e.components;h!==null&&oY(t,h,0);let f=e.viewQuery;if(f!==null&&NN(2,f,i),!r)if(u){let m=e.viewCheckHooks;m!==null&&U1(t,m)}else{let m=e.viewHooks;m!==null&&W1(t,m,2),wN(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[M1]){for(let m of t[M1])m();t[M1]=null}r||(QZ(t),t[Rt]&=-73)}catch(u){throw r||Uh(t),u}finally{c!==null&&(vm(c,l),a&&ACe(c)),N1()}}function nY(e,t){for(let n=mZ(e);n!==null;n=gZ(n))for(let i=Ai;i<n.length;i++){let o=n[i];iY(o,t)}}function VCe(e){for(let t=mZ(e);t!==null;t=gZ(t)){if(!(t[Rt]&2))continue;let n=t[jh];for(let i=0;i<n.length;i++){let o=n[i];tN(o)}}}function HCe(e,t,n){Tn(_n.ComponentStart);let i=Us(t,e);try{iY(i,n)}finally{Tn(_n.ComponentEnd,i[zi])}}function iY(e,t){T1(e)&&KN(e,t)}function KN(e,t){let i=e[ut],o=e[Rt],r=e[ms],s=!!(t===0&&o&16);if(s||=!!(o&64&&t===0),s||=!!(o&1024),s||=!!(r?.dirty&&_m(r)),s||=!1,r&&(r.dirty=!1),e[Rt]&=-9217,s)zCe(i,e,i.template,e[zi]);else if(o&8192){let a=dt(null);try{eY(e),nY(e,1);let l=i.components;l!==null&&oY(e,l,1),QZ(e)}finally{dt(a)}}}function oY(e,t,n){for(let i=0;i<t.length;i++)HCe(e,t[i],n)}function $Ce(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let o=n[i];if(o<0)Yd(~o);else{let r=o,s=n[++i],a=n[++i];sK(s,r);let l=t[r];Tn(_n.HostBindingsUpdateStart,l);try{a(2,l)}finally{Tn(_n.HostBindingsUpdateEnd,l)}}}}finally{Yd(-1)}}function z3(e,t){let n=hN()?64:1088;for(e[gl].changeDetectionScheduler?.notify(t);e;){e[Rt]|=n;let i=Gd(e);if(jm(e)&&!i)return e;e=i}return null}function rY(e,t,n,i){return[e,!0,0,t,null,i,null,n,null,null]}function sY(e,t){let n=Ai+t;if(n<e.length)return e[n]}function Yb(e,t,n,i=!0){let o=t[ut];if(jCe(o,t,e,n),i){let s=qN(n,e),a=t[zn],l=a.parentNode(e[qd]);l!==null&&rCe(o,e[Cr],a,t,l,s)}let r=t[Bh];r!==null&&r.firstChild!==null&&(r.firstChild=null)}function aY(e,t){let n=Bb(e,t);return n!==void 0&&yD(n[ut],n),n}function Bb(e,t){if(e.length<=Ai)return;let n=Ai+t,i=e[n];if(i){let o=i[Wd];o!==null&&o!==e&&T3(o,i),t>0&&(e[n-1][js]=i[js]);let r=bb(e,Ai+t);oCe(i[ut],i);let s=r[vl];s!==null&&s.detachView(r[ut]),i[fo]=null,i[js]=null,i[Rt]&=-129}return i}function jCe(e,t,n,i){let o=Ai+i,r=n.length;i>0&&(n[o-1][js]=t),i<r-Ai?(t[js]=n[o],HL(n,Ai+i,t)):(n.push(t),t[js]=null),t[fo]=n;let s=t[Wd];s!==null&&n!==s&&lY(s,t);let a=t[vl];a!==null&&a.insertView(e),P1(t),t[Rt]|=128}function lY(e,t){let n=e[jh],i=t[fo];if(_l(i))e[Rt]|=2;else{let o=i[fo][wr];t[wr]!==o&&(e[Rt]|=2)}n===null?e[jh]=[t]:n.push(t)}var Qd=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,n=t[ut];return Nb(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n}get context(){return this._lView[zi]}set context(t){this._lView[zi]=t}get destroyed(){return Gh(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[fo];if(Da(t)){let n=t[xb],i=n?n.indexOf(this):-1;i>-1&&(Bb(t,i),bb(n,i))}this._attachedToViewContainer=!1}yD(this._lView[ut],this._lView)}onDestroy(t){nN(this._lView,t)}markForCheck(){z3(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Rt]&=-129}reattach(){P1(this._lView),this._lView[Rt]|=128}detectChanges(){this._lView[Rt]|=1024,tY(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=jm(this._lView),n=this._lView[Wd];n!==null&&!t&&T3(n,this._lView),$Z(this._lView[ut],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new _e(902,!1);this._appRef=t;let n=jm(this._lView),i=this._lView[Wd];i!==null&&!n&&lY(i,this._lView),P1(this._lView)}};var xr=(()=>{class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=GCe;constructor(n,i,o){this._declarationLView=n,this._declarationTContainer=i,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,i){return this.createEmbeddedViewImpl(n,i)}createEmbeddedViewImpl(n,i,o){let r=Zb(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:i,dehydratedView:o});return new Qd(r)}}return e})();function GCe(){return wD(to(),ht())}function wD(e,t){return e.type&4?new xr(t,e,eg(e,t)):null}function ng(e,t,n,i,o){let r=e.data[t];if(r===null)r=UCe(e,t,n,i,o),rK()&&(r.flags|=32);else if(r.type&64){r.type=n,r.value=i,r.attrs=o;let s=nK();r.injectorIndex=s===null?-1:s.injectorIndex}return Gm(r,!0),r}function UCe(e,t,n,i,o){let r=cN(),s=dN(),a=s?r:r&&r.parent,l=e.data[t]=qCe(e,a,n,t,i,o);return WCe(e,l,r,s),l}function WCe(e,t,n,i){e.firstChild===null&&(e.firstChild=t),n!==null&&(i?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function qCe(e,t,n,i,o,r){let s=t?t.injectorIndex:-1,a=0;return sN()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:r,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function KCe(e){let t=e[ZL]??[],i=e[fo][zn],o=[];for(let r of t)r.data[yZ]!==void 0?o.push(r):ZCe(r,i);e[ZL]=o}function ZCe(e,t){let n=0,i=e.firstChild;if(i){let o=e.data[_Z];for(;n<o;){let r=i.nextSibling;PZ(t,i,!1),i=r,n++}}}var YCe=()=>null,QCe=()=>null;function nD(e,t){return YCe(e,t)}function cY(e,t,n){return QCe(e,t,n)}var dY=class{},xD=class{},ZN=class{resolveComponentFactory(t){throw new _e(917,!1)}},Qb=class{static NULL=new ZN},xi=class{},Pn=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>JCe()}return e})();function JCe(){let e=ht(),t=to(),n=Us(t.index,e);return(_l(n)?n:e)[zn]}var uY=(()=>{class e{static \u0275prov=ee({token:e,providedIn:"root",factory:()=>null})}return e})();var K1={},YN=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,i){let o=this.injector.get(t,K1,i);return o!==K1||n===K1?o:this.parentInjector.get(t,n,i)}};function iD(e,t,n){let i=n?e.styles:null,o=n?e.classes:null,r=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")r=a;else if(r==1)o=x1(o,a);else if(r==2){let l=a,c=t[++s];i=x1(i,l+": "+c+";")}}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=o:e.classesWithoutHost=o}function ye(e,t=0){let n=ht();if(n===null)return Ze(e,t);let i=to();return cZ(i,n,Ao(e),t)}function V3(){let e="invalid";throw new Error(e)}function hY(e,t,n,i,o){let r=i===null?null:{"":-1},s=o(e,n);if(s!==null){let a=s,l=null,c=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,l,c]=u.resolveHostDirectives(s);break}twe(e,t,n,a,r,l,c)}r!==null&&i!==null&&XCe(n,i,r)}function XCe(e,t,n){let i=e.localNames=[];for(let o=0;o<t.length;o+=2){let r=n[t[o+1]];if(r==null)throw new _e(-301,!1);i.push(t[o],r)}}function ewe(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function twe(e,t,n,i,o,r,s){let a=i.length,l=null;for(let f=0;f<a;f++){let m=i[f];l===null&&yl(m)&&(l=m,ewe(e,n,f)),ON(eD(n,t),e,m.type)}awe(n,e.data.length,a),l?.viewProvidersResolver&&l.viewProvidersResolver(l);for(let f=0;f<a;f++){let m=i[f];m.providersResolver&&m.providersResolver(m)}let c=!1,u=!1,h=BZ(e,t,a,null);a>0&&(n.directiveToIndex=new Map);for(let f=0;f<a;f++){let m=i[f];if(n.mergedAttrs=Zm(n.mergedAttrs,m.hostAttrs),iwe(e,n,t,h,m),swe(h,m,o),s!==null&&s.has(m)){let[y,w]=s.get(m);n.directiveToIndex.set(m.type,[h,y+n.directiveStart,w+n.directiveStart])}else(r===null||!r.has(m))&&n.directiveToIndex.set(m.type,h);m.contentQueries!==null&&(n.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(n.flags|=64);let _=m.type.prototype;!c&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),c=!0),!u&&(_.ngOnChanges||_.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),u=!0),h++}nwe(e,n,r)}function nwe(e,t,n){for(let i=t.directiveStart;i<t.directiveEnd;i++){let o=e.data[i];if(n===null||!n.has(o))FK(0,t,o,i),FK(1,t,o,i),NK(t,i,!1);else{let r=n.get(o);LK(0,t,r,i),LK(1,t,r,i),NK(t,i,!0)}}}function FK(e,t,n,i){let o=e===0?n.inputs:n.outputs;for(let r in o)if(o.hasOwnProperty(r)){let s;e===0?s=t.inputs??={}:s=t.outputs??={},s[r]??=[],s[r].push(i),pY(t,r)}}function LK(e,t,n,i){let o=e===0?n.inputs:n.outputs;for(let r in o)if(o.hasOwnProperty(r)){let s=o[r],a;e===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(i,r),pY(t,s)}}function pY(e,t){t==="class"?e.flags|=8:t==="style"&&(e.flags|=16)}function NK(e,t,n){let{attrs:i,inputs:o,hostDirectiveInputs:r}=e;if(i===null||!n&&o===null||n&&r===null||S3(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let s=null,a=0;for(;a<i.length;){let l=i[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!n&&o.hasOwnProperty(l)){let c=o[l];for(let u of c)if(u===t){s??=[],s.push(l,i[a+1]);break}}else if(n&&r.hasOwnProperty(l)){let c=r[l];for(let u=0;u<c.length;u+=2)if(c[u]===t){s??=[],s.push(c[u+1],i[a+1]);break}}a+=2}e.initialInputs??=[],e.initialInputs.push(s)}function iwe(e,t,n,i,o){e.data[i]=o;let r=o.factory||(o.factory=$d(o.type,!0)),s=new Kh(r,yl(o),ye,null);e.blueprint[i]=s,n[i]=s,owe(e,t,i,BZ(e,n,o.hostVars,Lo),o)}function owe(e,t,n,i,o){let r=o.hostBindings;if(r){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;rwe(s)!=a&&s.push(a),s.push(n,i,r)}}function rwe(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function swe(e,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;yl(t)&&(n[""]=e)}}function awe(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function H3(e,t,n,i,o,r,s,a){let l=t[ut],c=l.consts,u=gs(c,s),h=ng(l,e,n,i,u);return r&&hY(l,t,h,gs(c,a),o),h.mergedAttrs=Zm(h.mergedAttrs,h.attrs),h.attrs!==null&&iD(h,h.attrs,!1),h.mergedAttrs!==null&&iD(h,h.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,h),h}function $3(e,t){eZ(e,t),YL(t)&&e.queries.elementEnd(t)}function lwe(e,t,n,i,o,r){let s=t.consts,a=gs(s,o),l=ng(t,e,n,i,a);if(l.mergedAttrs=Zm(l.mergedAttrs,l.attrs),r!=null){let c=gs(s,r);l.localNames=[];for(let u=0;u<c.length;u+=2)l.localNames.push(c[u],-1)}return l.attrs!==null&&iD(l,l.attrs,!1),l.mergedAttrs!==null&&iD(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function SD(e,t,n){return e[t]=n}function cwe(e,t){return e[t]}function _s(e,t,n){if(n===Lo)return!1;let i=e[t];return Object.is(i,n)?!1:(e[t]=n,!0)}function zb(e,t,n,i){let o=_s(e,t,n);return _s(e,t+1,i)||o}function dwe(e,t,n,i,o){let r=zb(e,t,n,i);return _s(e,t+2,o)||r}function uwe(e,t,n,i,o,r){let s=zb(e,t,n,i);return zb(e,t+2,o,r)||s}function Z1(e,t,n){return function i(o){let r=Kd(e)?Us(e.index,t):t;z3(r,5);let s=t[zi],a=BK(t,s,n,o),l=i.__ngNextListenerFn__;for(;l;)a=BK(t,s,l,o)&&a,l=l.__ngNextListenerFn__;return a}}function BK(e,t,n,i){let o=dt(null);try{return Tn(_n.OutputStart,t,n),n(i)!==!1}catch(r){return kCe(e,r),!1}finally{Tn(_n.OutputEnd,t,n),dt(o)}}function fY(e,t,n,i,o,r,s,a){let l=$m(e),c=!1,u=null;if(!i&&l&&(u=pwe(t,n,r,e.index)),u!==null){let h=u.__ngLastListenerFn__||u;h.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,c=!0}else{let h=ka(e,n),f=i?i(h):h;cbe(n,f,r,a);let m=o.listen(f,r,a);if(!hwe(r)){let _=i?y=>i(Gs(y[e.index])):e.index;mY(_,t,n,r,a,m,!1)}}return c}function hwe(e){return e.startsWith("animation")||e.startsWith("transition")}function pwe(e,t,n,i){let o=e.cleanup;if(o!=null)for(let r=0;r<o.length-1;r+=2){let s=o[r];if(s===n&&o[r+1]===i){let a=t[Vm],l=o[r+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(r+=2)}return null}function mY(e,t,n,i,o,r,s){let a=t.firstCreatePass?oN(t):null,l=iN(n),c=l.length;l.push(o,r),a&&a.push(i,e,c,(c+1)*(s?-1:1))}function zK(e,t,n,i,o,r){let s=t[n],a=t[ut],c=a.data[n].outputs[i],h=s[c].subscribe(r);mY(e.index,a,t,o,r,h,!0)}var QN=Symbol("BINDING");var oD=class extends Qb{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Dc(t);return new Yh(n,this.ngModule)}};function fwe(e){return Object.keys(e).map(t=>{let[n,i,o]=e[t],r={propName:n,templateName:t,isSignal:(i&gD.SignalBased)!==0};return o&&(r.transform=o),r})}function mwe(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}function gwe(e,t,n){let i=t instanceof Qn?t:t?.injector;return i&&e.getStandaloneInjector!==null&&(i=e.getStandaloneInjector(i)||i),i?new YN(n,i):n}function vwe(e){let t=e.get(xi,null);if(t===null)throw new _e(407,!1);let n=e.get(uY,null),i=e.get(Sa,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:i,ngReflect:!1}}function _we(e,t){let n=gY(e);return RZ(t,n,n==="svg"?QL:n==="math"?Kq:null)}function gY(e){return(e.selectors[0][0]||"div").toLowerCase()}var Yh=class extends xD{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=fwe(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=mwe(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=Kbe(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,i,o,r,s){Tn(_n.DynamicComponentStart);let a=dt(null);try{let l=this.componentDef,c=ywe(i,l,s,r),u=gwe(l,o||this.ngModule,t),h=vwe(u),f=h.rendererFactory.createRenderer(null,l),m=i?gCe(f,i,l.encapsulation,u):_we(l,f),_=s?.some(VK)||r?.some(C=>typeof C!="function"&&C.bindings.some(VK)),y=D3(null,c,null,512|NZ(l),null,null,h,f,u,null,wZ(m,u,!0));y[si]=m,L1(y);let w=null;try{let C=H3(si,y,2,"#host",()=>c.directiveRegistry,!0,0);AZ(f,m,C),Ym(m,y),CD(c,y,C),v3(c,C,y),$3(c,C),n!==void 0&&Cwe(C,this.ngContentSelectors,n),w=Us(C.index,y),y[zi]=w[zi],B3(c,y,null)}catch(C){throw w!==null&&LN(w),LN(y),C}finally{Tn(_n.DynamicComponentEnd),N1()}return new rD(this.componentType,y,!!_)}finally{dt(a)}}};function ywe(e,t,n,i){let o=e?["ng-version","21.0.5"]:Zbe(t.selectors[0]),r=null,s=null,a=0;if(n)for(let u of n)a+=u[QN].requiredVars,u.create&&(u.targetIdx=0,(r??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(i)for(let u=0;u<i.length;u++){let h=i[u];if(typeof h!="function")for(let f of h.bindings){a+=f[QN].requiredVars;let m=u+1;f.create&&(f.targetIdx=m,(r??=[]).push(f)),f.update&&(f.targetIdx=m,(s??=[]).push(f))}}let l=[t];if(i)for(let u of i){let h=typeof u=="function"?u:u.type,f=BL(h);l.push(f)}return E3(0,null,bwe(r,s),1,a,l,null,null,null,[o],null)}function bwe(e,t){return!e&&!t?null:n=>{if(n&1&&e)for(let i of e)i.create();if(n&2&&t)for(let i of t)i.update()}}function VK(e){let t=e[QN].kind;return t==="input"||t==="twoWay"}var rD=class extends dY{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n,i){super(),this._rootLView=n,this._hasInputBindings=i,this._tNode=Sb(n[ut],si),this.location=eg(this._tNode,n),this.instance=Us(this._tNode.index,n)[zi],this.hostView=this.changeDetectorRef=new Qd(n,void 0),this.componentType=t}setInput(t,n){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let o=this._rootLView,r=N3(i,o[ut],o,t,n);this.previousInputValues.set(t,n);let s=Us(i.index,o);z3(s,1)}get injector(){return new qh(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function Cwe(e,t,n){let i=e.projection=[];for(let o=0;o<t.length;o++){let r=n[o];i.push(r!=null&&r.length?Array.from(r):null)}}var li=(()=>{class e{static __NG_ELEMENT_ID__=wwe}return e})();function wwe(){let e=to();return _Y(e,ht())}var xwe=li,vY=class extends xwe{_lContainer;_hostTNode;_hostLView;constructor(t,n,i){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=i}get element(){return eg(this._hostTNode,this._hostLView)}get injector(){return new qh(this._hostTNode,this._hostLView)}get parentInjector(){let t=p3(this._hostTNode,this._hostLView);if(iZ(t)){let n=J1(t,this._hostLView),i=Q1(t),o=n[ut].data[i+8];return new qh(o,n)}else return new qh(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=HK(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-Ai}createEmbeddedView(t,n,i){let o,r;typeof i=="number"?o=i:i!=null&&(o=i.index,r=i.injector);let s=nD(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},r,s);return this.insertImpl(a,o,Qm(this._hostTNode,s)),a}createComponent(t,n,i,o,r,s,a){let l=t&&!Lye(t),c;if(l)c=n;else{let w=n||{};c=w.index,i=w.injector,o=w.projectableNodes,r=w.environmentInjector||w.ngModuleRef,s=w.directives,a=w.bindings}let u=l?t:new Yh(Dc(t)),h=i||this.parentInjector;if(!r&&u.ngModule==null){let C=(l?h:this.parentInjector).get(Qn,null);C&&(r=C)}let f=Dc(u.componentType??{}),m=nD(this._lContainer,f?.id??null),_=m?.firstChild??null,y=u.create(h,o,_,r,s,a);return this.insertImpl(y.hostView,c,Qm(this._hostTNode,m)),y}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,i){let o=t._lView;if(Yq(o)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=o[fo],c=new vY(l,l[Cr],l[fo]);c.detach(c.indexOf(t))}}let r=this._adjustIndex(n),s=this._lContainer;return Yb(s,o,r,i),t.attachToViewContainerRef(),HL(EN(s),r,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=HK(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),i=Bb(this._lContainer,n);i&&(bb(EN(this._lContainer),n),yD(i[ut],i))}detach(t){let n=this._adjustIndex(t,-1),i=Bb(this._lContainer,n);return i&&bb(EN(this._lContainer),n)!=null?new Qd(i):null}_adjustIndex(t,n=0){return t??this.length+n}};function HK(e){return e[xb]}function EN(e){return e[xb]||(e[xb]=[])}function _Y(e,t){let n,i=t[e.index];return Da(i)?n=i:(n=rY(i,t,null,e),t[e.index]=n,k3(t,n)),Ewe(n,t,e,i),new vY(n,e,t)}function Swe(e,t){let n=e[zn],i=n.createComment(""),o=ka(t,e),r=n.parentNode(o);return tD(n,r,i,n.nextSibling(o),!1),i}var Ewe=Iwe,Dwe=()=>!1;function kwe(e,t,n){return Dwe(e,t,n)}function Iwe(e,t,n,i){if(e[qd])return;let o;n.type&8?o=Gs(i):o=Swe(t,n),e[qd]=o}var JN=class e{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},XN=class e{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let i=t.contentQueries!==null?t.contentQueries[0]:n.length,o=[];for(let r=0;r<i;r++){let s=n.getByIndex(r),a=this.queries[s.indexInDeclarationView];o.push(a.clone())}return new e(o)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)G3(t,n).matches!==null&&this.queries[n].setDirty()}},sD=class{flags;read;predicate;constructor(t,n,i=null){this.flags=n,this.read=i,typeof t=="string"?this.predicate=Awe(t):this.predicate=t}},e3=class e{queries;constructor(t=[]){this.queries=t}elementStart(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let i=0;i<this.length;i++){let o=n!==null?n.length:0,r=this.getByIndex(i).embeddedTView(t,o);r&&(r.indexInDeclarationView=i,n!==null?n.push(r):n=[r])}return n!==null?new e(n):null}template(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},t3=class e{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,n=-1){this.metadata=t,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=t.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let o=0;o<i.length;o++){let r=i[o];this.matchTNodeWithReadOption(t,n,Mwe(n,r)),this.matchTNodeWithReadOption(t,n,q1(n,t,r,!1,!1))}else i===xr?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,q1(n,t,i,!1,!1))}matchTNodeWithReadOption(t,n,i){if(i!==null){let o=this.metadata.read;if(o!==null)if(o===Oe||o===li||o===xr&&n.type&4)this.addMatch(n.index,-2);else{let r=q1(n,t,o,!1,!1);r!==null&&this.addMatch(n.index,r)}else this.addMatch(n.index,i)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function Mwe(e,t){let n=e.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1]}return null}function Rwe(e,t){return e.type&11?eg(e,t):e.type&4?wD(e,t):null}function Twe(e,t,n,i){return n===-1?Rwe(t,e):n===-2?Pwe(e,t,i):Fb(e,e[ut],n,t)}function Pwe(e,t,n){if(n===Oe)return eg(t,e);if(n===xr)return wD(t,e);if(n===li)return _Y(t,e)}function yY(e,t,n,i){let o=t[vl].queries[i];if(o.matches===null){let r=e.data,s=n.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=r[c];a.push(Twe(t,u,s[l+1],n.metadata.read))}}o.matches=a}return o.matches}function n3(e,t,n,i){let o=e.queries.getByIndex(n),r=o.matches;if(r!==null){let s=yY(e,t,o,n);for(let a=0;a<r.length;a+=2){let l=r[a];if(l>0)i.push(s[a/2]);else{let c=r[a+1],u=t[-l];for(let h=Ai;h<u.length;h++){let f=u[h];f[Wd]===f[fo]&&n3(f[ut],f,c,i)}if(u[jh]!==null){let h=u[jh];for(let f=0;f<h.length;f++){let m=h[f];n3(m[ut],m,c,i)}}}}}return i}function j3(e,t){return e[vl].queries[t].queryList}function bY(e,t,n){let i=new Ws((n&4)===4);return Xq(e,t,i,i.destroy),(t[vl]??=new XN).queries.push(new JN(i))-1}function CY(e,t,n){let i=Jn();return i.firstCreatePass&&(xY(i,new sD(e,t,n),-1),(t&2)===2&&(i.staticViewQueries=!0)),bY(i,ht(),t)}function wY(e,t,n,i){let o=Jn();if(o.firstCreatePass){let r=to();xY(o,new sD(t,n,i),r.index),Owe(o,e),(n&2)===2&&(o.staticContentQueries=!0)}return bY(o,ht(),n)}function Awe(e){return e.split(",").map(t=>t.trim())}function xY(e,t,n){e.queries===null&&(e.queries=new e3),e.queries.track(new t3(t,n))}function Owe(e,t){let n=e.contentQueries||(e.contentQueries=[]),i=n.length?n[n.length-1]:-1;t!==i&&n.push(e.queries.length-1,t)}function G3(e,t){return e.queries.getByIndex(t)}function SY(e,t){let n=e[ut],i=G3(n,t);return i.crossesNgTemplate?n3(n,e,t,[]):yY(n,e,i,t)}function EY(e,t,n){let i,o=nb(()=>{i._dirtyCounter();let r=Fwe(i,e);if(t&&r===void 0)throw new _e(-951,!1);return r});return i=o[po],i._dirtyCounter=$t(0),i._flatValue=void 0,o}function U3(e){return EY(!0,!1,e)}function W3(e){return EY(!0,!0,e)}function DY(e,t){let n=e[po];n._lView=ht(),n._queryIndex=t,n._queryList=j3(n._lView,t),n._queryList.onDirty(()=>n._dirtyCounter.update(i=>i+1))}function Fwe(e,t){let n=e._lView,i=e._queryIndex;if(n===void 0||i===void 0||n[Rt]&4)return t?void 0:er;let o=j3(n,i),r=SY(n,i);return o.reset(r,hZ),t?o.first:o._changesDetected||e._flatValue===void 0?e._flatValue=o.toArray():e._flatValue}var El=class{},ED=class{};var aD=class extends El{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new oD(this);constructor(t,n,i,o=!0){super(),this.ngModuleType=t,this._parent=n;let r=NL(t);this._bootstrapComponents=OZ(r.bootstrap),this._r3Injector=gN(t,n,[{provide:El,useValue:this},{provide:Qb,useValue:this.componentFactoryResolver},...i],Ec(t),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},lD=class extends ED{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new aD(this.moduleType,t,[])}};var Vb=class extends El{injector;componentFactoryResolver=new oD(this);instance=null;constructor(t){super();let n=new Lh([...t.providers,{provide:El,useValue:this},{provide:Qb,useValue:this.componentFactoryResolver}],t.parent||zm(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Jb(e,t,n=null){return new Vb({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var Lwe=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let i=GL(!1,n.type),o=i.length>0?Jb([i],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ee({token:e,providedIn:"environment",factory:()=>new e(Ze(Qn))})}return e})();function pe(e){return $b(()=>{let t=kY(e),n=x(g({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===m3.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?o=>o.get(Lwe).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Ta.Emulated,styles:e.styles||er,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&Ac("NgStandalone"),IY(n);let i=e.dependencies;return n.directiveDefs=$K(i,Nwe),n.pipeDefs=$K(i,Aq),n.id=Vwe(n),n})}function Nwe(e){return Dc(e)||BL(e)}function $e(e){return $b(()=>({type:e.type,bootstrap:e.bootstrap||er,declarations:e.declarations||er,imports:e.imports||er,exports:e.exports||er,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Bwe(e,t){if(e==null)return Ud;let n={};for(let i in e)if(e.hasOwnProperty(i)){let o=e[i],r,s,a,l;Array.isArray(o)?(a=o[0],r=o[1],s=o[2]??r,l=o[3]||null):(r=o,s=o,a=gD.None,l=null),n[r]=[i,a,l],t[r]=s}return n}function zwe(e){if(e==null)return Ud;let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function ke(e){return $b(()=>{let t=kY(e);return IY(t),t})}function In(e){return{type:e.type,name:e.name,factory:null,pure:e.pure!==!1,standalone:e.standalone??!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function kY(e){let t={};return{type:e.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||Ud,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||er,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Bwe(e.inputs,t),outputs:zwe(e.outputs),debugInfo:null}}function IY(e){e.features?.forEach(t=>t(e))}function $K(e,t){return e?()=>{let n=typeof e=="function"?e():e,i=[];for(let o of n){let r=t(o);r!==null&&i.push(r)}return i}:null}function Vwe(e){let t=0,n=typeof e.consts=="function"?"":e.consts,i=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let r of i.join("|"))t=Math.imul(31,t)+r.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function Hwe(e){return Object.getPrototypeOf(e.prototype).constructor}function Tt(e){let t=Hwe(e.type),n=!0,i=[e];for(;t;){let o;if(yl(e))o=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new _e(903,!1);o=t.\u0275dir}if(o){if(n){i.push(o);let s=e;s.inputs=DN(e.inputs),s.declaredInputs=DN(e.declaredInputs),s.outputs=DN(e.outputs);let a=o.hostBindings;a&&Wwe(e,a);let l=o.viewQuery,c=o.contentQueries;if(l&&Gwe(e,l),c&&Uwe(e,c),$we(e,o),Pq(e.outputs,o.outputs),yl(o)&&o.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(o.data.animation)}}let r=o.features;if(r)for(let s=0;s<r.length;s++){let a=r[s];a&&a.ngInherit&&a(e),a===Tt&&(n=!1)}}t=Object.getPrototypeOf(t)}jwe(i)}function $we(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let i=t.inputs[n];i!==void 0&&(e.inputs[n]=i,e.declaredInputs[n]=t.declaredInputs[n])}}function jwe(e){let t=0,n=null;for(let i=e.length-1;i>=0;i--){let o=e[i];o.hostVars=t+=o.hostVars,o.hostAttrs=Zm(o.hostAttrs,n=Zm(n,o.hostAttrs))}}function DN(e){return e===Ud?{}:e===er?[]:e}function Gwe(e,t){let n=e.viewQuery;n?e.viewQuery=(i,o)=>{t(i,o),n(i,o)}:e.viewQuery=t}function Uwe(e,t){let n=e.contentQueries;n?e.contentQueries=(i,o,r)=>{t(i,o,r),n(i,o,r)}:e.contentQueries=t}function Wwe(e,t){let n=e.hostBindings;n?e.hostBindings=(i,o)=>{t(i,o),n(i,o)}:e.hostBindings=t}function MY(e,t,n,i,o,r,s,a){if(n.firstCreatePass){e.mergedAttrs=Zm(e.mergedAttrs,e.attrs);let u=e.tView=E3(2,e,o,r,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,e),u.queries=n.queries.embeddedTView(e))}a&&(e.flags|=a),Gm(e,!1);let l=Kwe(n,t,e,i);B1()&&P3(n,t,l,e),Ym(l,t);let c=rY(l,t,l,e);t[i+si]=c,k3(t,c),kwe(c,e,t)}function qwe(e,t,n,i,o,r,s,a,l,c,u){let h=n+si,f;return t.firstCreatePass?(f=ng(t,h,4,s||null,a||null),A1()&&hY(t,e,f,gs(t.consts,c),O3),eZ(t,f)):f=t.data[h],MY(f,e,t,n,i,o,r,l),$m(f)&&CD(t,e,f),c!=null&&Kb(e,f,u),f}function Jm(e,t,n,i,o,r,s,a,l,c,u){let h=n+si,f;if(t.firstCreatePass){if(f=ng(t,h,4,s||null,a||null),c!=null){let m=gs(t.consts,c);f.localNames=[];for(let _=0;_<m.length;_+=2)f.localNames.push(m[_],-1)}}else f=t.data[h];return MY(f,e,t,n,i,o,r,l),c!=null&&Kb(e,f,u),f}function Si(e,t,n,i,o,r,s,a){let l=ht(),c=Jn(),u=gs(c.consts,r);return qwe(l,c,e,t,n,i,o,u,void 0,s,a),Si}function Xb(e,t,n,i,o,r,s,a){let l=ht(),c=Jn(),u=gs(c.consts,r);return Jm(l,c,e,t,n,i,o,u,void 0,s,a),Xb}var Kwe=Zwe;function Zwe(e,t,n,i){return Tb(!0),t[zn].createComment("")}var DD=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function Oc(e){return typeof e=="function"&&e[po]!==void 0}function q3(e){return Oc(e)&&typeof e.set=="function"}var K3=new q("");function Fc(e){return!!e&&typeof e.then=="function"}function kD(e){return!!e&&typeof e.subscribe=="function"}var RY=new q("");var Z3=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,i)=>{this.resolve=n,this.reject=i});appInits=k(RY,{optional:!0})??[];injector=k(Ke);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let o of this.appInits){let r=Fo(this.injector,o);if(Fc(r))n.push(r);else if(kD(r)){let s=new Promise((a,l)=>{r.subscribe({complete:a,error:l})});n.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{i()}).catch(o=>{this.reject(o)}),n.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),ID=new q("");function TY(){eL(()=>{let e="";throw new _e(600,e)})}function PY(e){return e.isBoundToModule}var Ywe=10;var tr=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=k(vs);afterRenderManager=k(_D);zonelessEnabled=k(Wm);rootEffectScheduler=k(H1);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ie;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=k(Cl);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(tt(n=>!n))}constructor(){k(kl,{optional:!0})}whenStable(){let n;return new Promise(i=>{n=this.isStable.subscribe({next:o=>{o&&i()}})}).finally(()=>{n.unsubscribe()})}_injector=k(Qn);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,i){return this.bootstrapImpl(n,i)}bootstrapImpl(n,i,o=Ke.NULL){return this._injector.get(me).run(()=>{Tn(_n.BootstrapComponentStart);let s=n instanceof xD;if(!this._injector.get(Z3).done){let _="";throw new _e(405,_)}let l;s?l=n:l=this._injector.get(Qb).resolveComponentFactory(n),this.componentTypes.push(l.componentType);let c=PY(l)?void 0:this._injector.get(El),u=i||l.selector,h=l.create(o,[],u,c),f=h.location.nativeElement,m=h.injector.get(K3,null);return m?.registerApplication(f),h.onDestroy(()=>{this.detachView(h.hostView),Ob(this.components,h),m?.unregisterApplication(f)}),this._loadComponent(h),Tn(_n.BootstrapComponentEnd,h),h})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Tn(_n.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(vD.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw Tn(_n.ChangeDetectionEnd),new _e(101,!1);let n=dt(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,dt(n),this.afterTick.next(),Tn(_n.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(xi,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<Ywe;){Tn(_n.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{Tn(_n.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:o}of this.allViews){if(!i&&!Eb(o))continue;let r=i&&!this.zonelessEnabled?0:1;tY(o,r),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Eb(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){let i=n;Ob(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(o){this.internalErrorHandler(o)}this.components.push(n),this._injector.get(ID,[]).forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Ob(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new _e(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Ob(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function pt(e,t,n,i){let o=ht(),r=Zd();if(_s(o,r,t)){let s=Jn(),a=Mb();SCe(a,o,e,t,n,i)}return pt}var Ect=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var i3=class{destroy(t){}updateValue(t,n){}swap(t,n){let i=Math.min(t,n),o=Math.max(t,n),r=this.detach(o);if(o-i>1){let s=this.detach(i);this.attach(i,r),this.attach(o,s)}else this.attach(i,r)}move(t,n){this.attach(n,this.detach(t))}};function kN(e,t,n,i,o){return e===n&&Object.is(t,i)?1:Object.is(o(e,t),o(n,i))?-1:0}function Qwe(e,t,n,i){let o,r,s=0,a=e.length-1,l=void 0;if(Array.isArray(t)){dt(i);let c=t.length-1;for(dt(null);s<=a&&s<=c;){let u=e.at(s),h=t[s],f=kN(s,u,s,h,n);if(f!==0){f<0&&e.updateValue(s,h),s++;continue}let m=e.at(a),_=t[c],y=kN(a,m,c,_,n);if(y!==0){y<0&&e.updateValue(a,_),a--,c--;continue}let w=n(s,u),C=n(a,m),S=n(s,h);if(Object.is(S,C)){let I=n(c,_);Object.is(I,w)?(e.swap(s,a),e.updateValue(a,_),c--,a--):e.move(a,s),e.updateValue(s,h),s++;continue}if(o??=new cD,r??=GK(e,s,a,n),o3(e,o,s,S))e.updateValue(s,h),s++,a++;else if(r.has(S))o.set(w,e.detach(s)),a--;else{let I=e.create(s,t[s]);e.attach(s,I),s++,a++}}for(;s<=c;)jK(e,o,n,s,t[s]),s++}else if(t!=null){dt(i);let c=t[Symbol.iterator]();dt(null);let u=c.next();for(;!u.done&&s<=a;){let h=e.at(s),f=u.value,m=kN(s,h,s,f,n);if(m!==0)m<0&&e.updateValue(s,f),s++,u=c.next();else{o??=new cD,r??=GK(e,s,a,n);let _=n(s,f);if(o3(e,o,s,_))e.updateValue(s,f),s++,a++,u=c.next();else if(!r.has(_))e.attach(s,e.create(s,f)),s++,a++,u=c.next();else{let y=n(s,h);o.set(y,e.detach(s)),a--}}}for(;!u.done;)jK(e,o,n,e.length,u.value),u=c.next()}for(;s<=a;)e.destroy(e.detach(a--));o?.forEach(c=>{e.destroy(c)})}function o3(e,t,n,i){return t!==void 0&&t.has(i)?(e.attach(n,t.get(i)),t.delete(i),!0):!1}function jK(e,t,n,i,o){if(o3(e,t,i,n(i,o)))e.updateValue(i,o);else{let r=e.create(i,o);e.attach(i,r)}}function GK(e,t,n,i){let o=new Set;for(let r=t;r<=n;r++)o.add(i(r,e.at(r)));return o}var cD=class{kvMap=new Map;_vMap=void 0;has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let n=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(t,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,n){if(this.kvMap.has(t)){let i=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let o=this._vMap;for(;o.has(i);)i=o.get(i);o.set(i,n)}else this.kvMap.set(t,n)}forEach(t){for(let[n,i]of this.kvMap)if(t(i,n),this._vMap!==void 0){let o=this._vMap;for(;o.has(i);)i=o.get(i),t(i,n)}}};function K(e,t,n,i,o,r,s,a){Ac("NgControlFlow");let l=ht(),c=Jn(),u=gs(c.consts,r);return Jm(l,c,e,t,n,i,o,u,256,s,a),Hr}function Hr(e,t,n,i,o,r,s,a){Ac("NgControlFlow");let l=ht(),c=Jn(),u=gs(c.consts,r);return Jm(l,c,e,t,n,i,o,u,512,s,a),Hr}function Z(e,t){Ac("NgControlFlow");let n=ht(),i=Zd(),o=n[i]!==Lo?n[i]:-1,r=o!==-1?dD(n,si+o):void 0,s=0;if(_s(n,i,e)){let a=dt(null);try{if(r!==void 0&&aY(r,s),e!==-1){let l=si+e,c=dD(n,l),u=l3(n[ut],l),h=cY(c,u,n),f=Zb(n,u,t,{dehydratedView:h});Yb(c,f,s,Qm(u,h))}}finally{dt(a)}}else if(r!==void 0){let a=sY(r,s);a!==void 0&&(a[zi]=t)}}var r3=class{lContainer;$implicit;$index;constructor(t,n,i){this.lContainer=t,this.$implicit=n,this.$index=i}get $count(){return this.lContainer.length-Ai}};function eC(e){return e}function qn(e,t){return t}var s3=class{hasEmptyBlock;trackByFn;liveCollection;constructor(t,n,i){this.hasEmptyBlock=t,this.trackByFn=n,this.liveCollection=i}};function an(e,t,n,i,o,r,s,a,l,c,u,h,f){Ac("NgControlFlow");let m=ht(),_=Jn(),y=l!==void 0,w=ht(),C=a?s.bind(w[wr][zi]):s,S=new s3(y,C);w[si+e]=S,Jm(m,_,e+1,t,n,i,o,gs(_.consts,r),256),y&&Jm(m,_,e+2,l,c,u,h,gs(_.consts,f),512)}var a3=class extends i3{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(t,n,i){super(),this.lContainer=t,this.hostLView=n,this.templateTNode=i}get length(){return this.lContainer.length-Ai}at(t){return this.getLView(t)[zi].$implicit}attach(t,n){let i=n[Bh];this.needsIndexUpdate||=t!==this.length,Yb(this.lContainer,n,t,Qm(this.templateTNode,i)),Jwe(this.lContainer,t)}detach(t){return this.needsIndexUpdate||=t!==this.length-1,Xwe(this.lContainer,t),e0e(this.lContainer,t)}create(t,n){let i=nD(this.lContainer,this.templateTNode.tView.ssrId);return Zb(this.hostLView,this.templateTNode,new r3(this.lContainer,n,t),{dehydratedView:i})}destroy(t){yD(t[ut],t)}updateValue(t,n){this.getLView(t)[zi].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[zi].$index=t}getLView(t){return t0e(this.lContainer,t)}};function ln(e){let t=dt(null),n=Ia();try{let i=ht(),o=i[ut],r=i[n],s=n+1,a=dD(i,s);if(r.liveCollection===void 0){let c=l3(o,s);r.liveCollection=new a3(a,i,c)}else r.liveCollection.reset();let l=r.liveCollection;if(Qwe(l,e,r.trackByFn,t),l.updateIndexes(),r.hasEmptyBlock){let c=Zd(),u=l.length===0;if(_s(i,c,u)){let h=n+2,f=dD(i,h);if(u){let m=l3(o,h),_=cY(f,m,i),y=Zb(i,m,void 0,{dehydratedView:_});Yb(f,y,0,Qm(m,_))}else o.firstUpdatePass&&KCe(f),aY(f,0)}}}finally{dt(t)}}function dD(e,t){return e[t]}function Jwe(e,t){if(e.length<=Ai)return;let n=Ai+t,i=e[n],o=i?i[$h]:void 0;if(i&&o&&o.detachedLeaveAnimationFns&&o.detachedLeaveAnimationFns.length>0){let r=i[Mc];nCe(r,o),Zh.delete(i),o.detachedLeaveAnimationFns=void 0}}function Xwe(e,t){if(e.length<=Ai)return;let n=Ai+t,i=e[n],o=i?i[$h]:void 0;o&&o.leave&&o.leave.size>0&&(o.detachedLeaveAnimationFns=[])}function e0e(e,t){return Bb(e,t)}function t0e(e,t){return sY(e,t)}function l3(e,t){return Sb(e,t)}function le(e,t,n){let i=ht(),o=Zd();if(_s(i,o,t)){let r=Jn(),s=Mb();KZ(s,i,e,t,i[zn],n)}return le}function c3(e,t,n,i,o){N3(t,e,n,o?"class":"style",i)}function M(e,t,n,i){let o=ht(),r=o[ut],s=e+si,a=r.firstCreatePass?H3(s,o,2,t,O3,A1(),n,i):r.data[s];if(F3(a,o,e,t,AY),$m(a)){let l=o[ut];CD(l,o,a),v3(l,a,o)}return i!=null&&Kb(o,a),M}function R(){let e=Jn(),t=to(),n=L3(t);return e.firstCreatePass&&$3(e,n),aN(n)&&lN(),rN(),n.classesWithoutHost!=null&&$ye(n)&&c3(e,n,ht(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&jye(n)&&c3(e,n,ht(),n.stylesWithoutHost,!1),R}function Ae(e,t,n,i){return M(e,t,n,i),R(),Ae}function Ei(e,t,n,i){let o=ht(),r=o[ut],s=e+si,a=r.firstCreatePass?lwe(s,r,2,t,n,i):r.data[s];return F3(a,o,e,t,AY),i!=null&&Kb(o,a),Ei}function no(){let e=to(),t=L3(e);return aN(t)&&lN(),rN(),no}function go(e,t,n,i){return Ei(e,t,n,i),no(),go}var AY=(e,t,n,i,o)=>(Tb(!0),RZ(t[zn],i,pK()));function Y3(e,t,n){let i=ht(),o=i[ut],r=e+si,s=o.firstCreatePass?H3(r,i,8,"ng-container",O3,A1(),t,n):o.data[r];if(F3(s,i,e,"ng-container",n0e),$m(s)){let a=i[ut];CD(a,i,s),v3(a,s,i)}return n!=null&&Kb(i,s),Y3}function Q3(){let e=Jn(),t=to(),n=L3(t);return e.firstCreatePass&&$3(e,n),Q3}function ig(e,t,n){return Y3(e,t,n),Q3(),ig}var n0e=(e,t,n,i,o)=>(Tb(!0),Obe(t[zn],""));function Ge(){return ht()}function nr(e,t,n){let i=ht(),o=Zd();if(_s(i,o,t)){let r=Jn(),s=Mb();ZZ(s,i,e,t,i[zn],n)}return nr}var Pb=void 0;function i0e(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return t===1&&n===0?1:5}var o0e=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Pb,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Pb,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",Pb,Pb,Pb],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",i0e],IN={};function ys(e){let t=r0e(e),n=UK(t);if(n)return n;let i=t.split("-")[0];if(n=UK(i),n)return n;if(i==="en")return o0e;throw new _e(701,!1)}function UK(e){return e in IN||(IN[e]=fl.ng&&fl.ng.common&&fl.ng.common.locales&&fl.ng.common.locales[e]),IN[e]}var Vi=(function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e})(Vi||{});function r0e(e){return e.toLowerCase().replace(/_/g,"-")}var tC="en-US";var s0e=tC;function OY(e){typeof e=="string"&&(s0e=e.toLowerCase().replace(/_/g,"-"))}function Q(e,t,n){let i=ht(),o=Jn(),r=to();return FY(o,i,i[zn],r,e,t,n),Q}function eu(e,t,n){let i=ht(),o=Jn(),r=to();return(r.type&3||n)&&fY(r,o,i,n,i[zn],e,t,Z1(r,i,t)),eu}function FY(e,t,n,i,o,r,s){let a=!0,l=null;if((i.type&3||s)&&(l??=Z1(i,t,r),fY(i,e,t,s,n,o,r,l)&&(a=!1)),a){let c=i.outputs?.[o],u=i.hostDirectiveOutputs?.[o];if(u&&u.length)for(let h=0;h<u.length;h+=2){let f=u[h],m=u[h+1];l??=Z1(i,t,r),zK(i,t,f,m,o,l)}if(c&&c.length)for(let h of c)l??=Z1(i,t,r),zK(i,t,h,o,o,l)}}function A(e=1){return hK(e)}function a0e(e,t){let n=null,i=jbe(e);for(let o=0;o<t.length;o++){let r=t[o];if(r==="*"){n=o;continue}if(i===null?LZ(e,r,!0):Wbe(i,r))return o}return n}function yn(e){let t=ht()[wr][Cr];if(!t.projection){let n=e?e.length:1,i=t.projection=Vq(n,null),o=i.slice(),r=t.child;for(;r!==null;){if(r.type!==128){let s=e?a0e(r,e):0;s!==null&&(o[s]?o[s].projectionNext=r:i[s]=r,o[s]=r)}r=r.next}}}function st(e,t=0,n,i,o,r){let s=ht(),a=Jn(),l=i?e+1:null;l!==null&&Jm(s,a,l,i,o,r,null,n);let c=ng(a,si+e,16,null,n||null);c.projection===null&&(c.projection=t),uN();let h=!s[Bh]||sN();s[wr][Cr].projection[c.projection]===null&&l!==null?l0e(s,a,l):h&&!fD(c)&&pCe(a,s,c)}function l0e(e,t,n){let i=si+n,o=t.data[i],r=e[i],s=nD(r,o.tView.ssrId),a=Zb(e,o,void 0,{dehydratedView:s});Yb(r,a,0,Qm(o,s))}function No(e,t,n,i){return wY(e,t,n,i),No}function bn(e,t,n){return CY(e,t,n),bn}function Ye(e){let t=ht(),n=Jn(),i=F1();Ib(i+1);let o=G3(n,i);if(e.dirty&&Zq(t)===((o.metadata.flags&2)===2)){if(o.matches===null)e.reset([]);else{let r=SY(t,i);e.reset(r,hZ),e.notifyOnChanges()}return!0}return!1}function Qe(){return j3(ht(),F1())}function MD(e,t,n,i,o){return DY(t,wY(e,n,i,o)),MD}function RD(e,t,n,i){return DY(e,CY(t,n,i)),RD}function TD(e=1){Ib(F1()+e)}function bs(e){let t=iK();return R1(t,si+e)}function G1(e,t){return e<<17|t<<2}function Qh(e){return e>>17&32767}function c0e(e){return(e&2)==2}function d0e(e,t){return e&131071|t<<17}function d3(e){return e|2}function Xm(e){return(e&131068)>>2}function MN(e,t){return e&-131069|t<<2}function u0e(e){return(e&1)===1}function u3(e){return e|1}function h0e(e,t,n,i,o,r){let s=r?t.classBindings:t.styleBindings,a=Qh(s),l=Xm(s);e[i]=n;let c=!1,u;if(Array.isArray(n)){let h=n;u=h[1],(u===null||Bm(h,u)>0)&&(c=!0)}else u=n;if(o)if(l!==0){let f=Qh(e[a+1]);e[i+1]=G1(f,a),f!==0&&(e[f+1]=MN(e[f+1],i)),e[a+1]=d0e(e[a+1],i)}else e[i+1]=G1(a,0),a!==0&&(e[a+1]=MN(e[a+1],i)),a=i;else e[i+1]=G1(l,0),a===0?a=i:e[l+1]=MN(e[l+1],i),l=i;c&&(e[i+1]=d3(e[i+1])),WK(e,u,i,!0),WK(e,u,i,!1),p0e(t,u,e,i,r),s=G1(a,l),r?t.classBindings=s:t.styleBindings=s}function p0e(e,t,n,i,o){let r=o?e.residualClasses:e.residualStyles;r!=null&&typeof t=="string"&&Bm(r,t)>=0&&(n[i+1]=u3(n[i+1]))}function WK(e,t,n,i){let o=e[n+1],r=t===null,s=i?Qh(o):Xm(o),a=!1;for(;s!==0&&(a===!1||r);){let l=e[s],c=e[s+1];f0e(l,t)&&(a=!0,e[s+1]=i?u3(c):d3(c)),s=i?Qh(c):Xm(c)}a&&(e[n+1]=i?d3(o):u3(o))}function f0e(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Bm(e,t)>=0:!1}var Ra={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function m0e(e){return e.substring(Ra.key,Ra.keyEnd)}function g0e(e){return v0e(e),LY(e,NY(e,0,Ra.textEnd))}function LY(e,t){let n=Ra.textEnd;return n===t?-1:(t=Ra.keyEnd=_0e(e,Ra.key=t,n),NY(e,t,n))}function v0e(e){Ra.key=0,Ra.keyEnd=0,Ra.value=0,Ra.valueEnd=0,Ra.textEnd=e.length}function NY(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function _0e(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}function Di(e,t,n){return BY(e,t,n,!1),Di}function be(e,t){return BY(e,t,null,!0),be}function ki(e){b0e(D0e,y0e,e,!0)}function y0e(e,t){for(let n=g0e(t);n>=0;n=LY(t,n))k1(e,m0e(t),!0)}function BY(e,t,n,i){let o=ht(),r=Jn(),s=kb(2);if(r.firstUpdatePass&&VY(r,e,s,i),t!==Lo&&_s(o,s,t)){let a=r.data[Ia()];HY(r,a,o,o[zn],e,o[s+1]=I0e(t,n),i,s)}}function b0e(e,t,n,i){let o=Jn(),r=kb(2);o.firstUpdatePass&&VY(o,null,r,i);let s=ht();if(n!==Lo&&_s(s,r,n)){let a=o.data[Ia()];if($Y(a,i)&&!zY(o,r)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(n=x1(l,n||"")),c3(o,a,s,n,i)}else k0e(o,a,s,s[zn],s[r+1],s[r+1]=E0e(e,t,n),i,r)}}function zY(e,t){return t>=e.expandoStartIndex}function VY(e,t,n,i){let o=e.data;if(o[n+1]===null){let r=o[Ia()],s=zY(e,n);$Y(r,i)&&t===null&&!s&&(t=!1),t=C0e(o,r,t,i),h0e(o,r,t,n,s,i)}}function C0e(e,t,n,i){let o=lK(e),r=i?t.residualClasses:t.residualStyles;if(o===null)(i?t.classBindings:t.styleBindings)===0&&(n=RN(null,e,t,n,i),n=Hb(n,t.attrs,i),r=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==o)if(n=RN(o,e,t,n,i),r===null){let l=w0e(e,t,i);l!==void 0&&Array.isArray(l)&&(l=RN(null,e,t,l[1],i),l=Hb(l,t.attrs,i),x0e(e,t,i,l))}else r=S0e(e,t,i)}return r!==void 0&&(i?t.residualClasses=r:t.residualStyles=r),n}function w0e(e,t,n){let i=n?t.classBindings:t.styleBindings;if(Xm(i)!==0)return e[Qh(i)]}function x0e(e,t,n,i){let o=n?t.classBindings:t.styleBindings;e[Qh(o)]=i}function S0e(e,t,n){let i,o=t.directiveEnd;for(let r=1+t.directiveStylingLast;r<o;r++){let s=e[r].hostAttrs;i=Hb(i,s,n)}return Hb(i,t.attrs,n)}function RN(e,t,n,i,o){let r=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(r=t[a],i=Hb(i,r.hostAttrs,o),r!==e);)a++;return e!==null&&(n.directiveStylingLast=a),i}function Hb(e,t,n){let i=n?1:2,o=-1;if(t!==null)for(let r=0;r<t.length;r++){let s=t[r];typeof s=="number"?o=s:o===i&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),k1(e,s,n?!0:t[++r]))}return e===void 0?null:e}function E0e(e,t,n){if(n==null||n==="")return er;let i=[],o=Dl(n);if(Array.isArray(o))for(let r=0;r<o.length;r++)e(i,o[r],!0);else if(typeof o=="object")for(let r in o)o.hasOwnProperty(r)&&e(i,r,o[r]);else typeof o=="string"&&t(i,o);return i}function D0e(e,t,n){let i=String(t);i!==""&&!i.includes(" ")&&k1(e,i,n)}function k0e(e,t,n,i,o,r,s,a){o===Lo&&(o=er);let l=0,c=0,u=0<o.length?o[0]:null,h=0<r.length?r[0]:null;for(;u!==null||h!==null;){let f=l<o.length?o[l+1]:void 0,m=c<r.length?r[c+1]:void 0,_=null,y;u===h?(l+=2,c+=2,f!==m&&(_=h,y=m)):h===null||u!==null&&u<h?(l+=2,_=u):(c+=2,_=h,y=m),_!==null&&HY(e,t,n,i,_,y,s,a),u=l<o.length?o[l]:null,h=c<r.length?r[c]:null}}function HY(e,t,n,i,o,r,s,a){if(!(t.type&3))return;let l=e.data,c=l[a+1],u=u0e(c)?qK(l,t,n,o,Xm(c),s):void 0;if(!uD(u)){uD(r)||c0e(c)&&(r=qK(l,null,n,o,a,s));let h=JL(Ia(),n);mCe(i,s,h,o,r)}}function qK(e,t,n,i,o,r){let s=t===null,a;for(;o>0;){let l=e[o],c=Array.isArray(l),u=c?l[1]:l,h=u===null,f=n[o+1];f===Lo&&(f=h?er:void 0);let m=h?I1(f,i):u===i?f:void 0;if(c&&!uD(m)&&(m=I1(l,i)),uD(m)&&(a=m,s))return a;let _=e[o+1];o=s?Qh(_):Xm(_)}if(t!==null){let l=r?t.residualClasses:t.residualStyles;l!=null&&(a=I1(l,i))}return a}function uD(e){return e!==void 0}function I0e(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=Ec(Dl(e)))),e}function $Y(e,t){return(e.flags&(t?8:16))!==0}function N(e,t=""){let n=ht(),i=Jn(),o=e+si,r=i.firstCreatePass?ng(i,o,1,t,null):i.data[o],s=M0e(i,n,r,t,e);n[o]=s,B1()&&P3(i,n,s,r),Gm(r,!1)}var M0e=(e,t,n,i,o)=>(Tb(!0),Pbe(t[zn],i));function R0e(e,t,n,i=""){return _s(e,Zd(),n)?t+ml(n)+i:Lo}function T0e(e,t,n,i,o,r=""){let s=pN(),a=zb(e,s,n,o);return kb(2),a?t+ml(n)+i+ml(o)+r:Lo}function P0e(e,t,n,i,o,r,s,a=""){let l=pN(),c=dwe(e,l,n,o,s);return kb(3),c?t+ml(n)+i+ml(o)+r+ml(s)+a:Lo}function nt(e){return qe("",e),nt}function qe(e,t,n){let i=ht(),o=R0e(i,e,t,n);return o!==Lo&&J3(i,Ia(),o),qe}function og(e,t,n,i,o){let r=ht(),s=T0e(r,e,t,n,i,o);return s!==Lo&&J3(r,Ia(),s),og}function PD(e,t,n,i,o,r,s){let a=ht(),l=P0e(a,e,t,n,i,o,r,s);return l!==Lo&&J3(a,Ia(),l),PD}function J3(e,t,n){let i=JL(t,e);Abe(e[zn],i,n)}function ir(e,t,n){q3(t)&&(t=t());let i=ht(),o=Zd();if(_s(i,o,t)){let r=Jn(),s=Mb();KZ(s,i,e,t,i[zn],n)}return ir}function Sr(e,t){let n=q3(e);return n&&e.set(t),n}function or(e,t){let n=ht(),i=Jn(),o=to();return FY(i,n,n[zn],o,e,t),or}function KK(e,t,n){let i=Jn();i.firstCreatePass&&jY(t,i.data,i.blueprint,yl(e),n)}function jY(e,t,n,i,o){if(e=Ao(e),Array.isArray(e))for(let r=0;r<e.length;r++)jY(e[r],t,n,i,o);else{let r=Jn(),s=ht(),a=to(),l=Fh(e)?e:Ao(e.provide),c=WL(e),u=a.providerIndexes&1048575,h=a.directiveStart,f=a.providerIndexes>>20;if(Fh(e)||!e.multi){let m=new Kh(c,o,ye,null),_=PN(l,t,o?u:u+f,h);_===-1?(ON(eD(a,s),r,l),TN(r,e,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(m),s.push(m)):(n[_]=m,s[_]=m)}else{let m=PN(l,t,u+f,h),_=PN(l,t,u,u+f),y=m>=0&&n[m],w=_>=0&&n[_];if(o&&!w||!o&&!y){ON(eD(a,s),r,l);let C=F0e(o?O0e:A0e,n.length,o,i,c,e);!o&&w&&(n[_].providerFactory=C),TN(r,e,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(C),s.push(C)}else{let C=GY(n[o?_:m],c,!o&&i);TN(r,e,m>-1?m:_,C)}!o&&i&&w&&n[_].componentProviders++}}}function TN(e,t,n,i){let o=Fh(t),r=Uq(t);if(o||r){let l=(r?Ao(t.useClass):t).prototype.ngOnDestroy;if(l){let c=e.destroyHooks||(e.destroyHooks=[]);if(!o&&t.multi){let u=c.indexOf(n);u===-1?c.push(n,[i,l]):c[u+1].push(i,l)}else c.push(n,l)}}}function GY(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function PN(e,t,n,i){for(let o=n;o<i;o++)if(t[o]===e)return o;return-1}function A0e(e,t,n,i,o){return h3(this.multi,[])}function O0e(e,t,n,i,o){let r=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=Fb(i,i[ut],this.providerFactory.index,o);s=l.slice(0,a),h3(r,s);for(let c=a;c<l.length;c++)s.push(l[c])}else s=[],h3(r,s);return s}function h3(e,t){for(let n=0;n<e.length;n++){let i=e[n];t.push(i())}return t}function F0e(e,t,n,i,o,r){let s=new Kh(e,n,ye,null);return s.multi=[],s.index=t,s.componentProviders=0,GY(s,o,i&&!n),s}function kt(e,t){return n=>{n.providersResolver=(i,o)=>KK(i,o?o(e):e,!1),t&&(n.viewProvidersResolver=(i,o)=>KK(i,o?o(t):t,!0))}}function rg(e,t,n){let i=Db()+e,o=ht();return o[i]===Lo?SD(o,i,n?t.call(n):t()):cwe(o,i)}function X3(e,t,n,i,o,r,s){return B0e(ht(),Db(),e,t,n,i,o,r,s)}function eB(e,t){let n=e[t];return n===Lo?void 0:n}function L0e(e,t,n,i,o,r){let s=t+n;return _s(e,s,o)?SD(e,s+1,r?i.call(r,o):i(o)):eB(e,s+1)}function N0e(e,t,n,i,o,r,s){let a=t+n;return zb(e,a,o,r)?SD(e,a+2,s?i.call(s,o,r):i(o,r)):eB(e,a+2)}function B0e(e,t,n,i,o,r,s,a,l){let c=t+n;return uwe(e,c,o,r,s,a)?SD(e,c+4,l?i.call(l,o,r,s,a):i(o,r,s,a)):eB(e,c+4)}function bt(e,t){let n=Jn(),i,o=e+si;n.firstCreatePass?(i=z0e(t,n.pipeRegistry),n.data[o]=i,i.onDestroy&&(n.destroyHooks??=[]).push(o,i.onDestroy)):i=n.data[o];let r=i.factory||(i.factory=$d(i.type,!0)),s,a=br(ye);try{let l=X1(!1),c=r();return X1(l),XL(n,ht(),o,c),c}finally{br(a)}}function z0e(e,t){if(t)for(let n=t.length-1;n>=0;n--){let i=t[n];if(e===i.name)return i}}function Ot(e,t,n){let i=e+si,o=ht(),r=R1(o,i);return UY(o,i)?L0e(o,Db(),t,r.transform,n,r):r.transform(n)}function Jh(e,t,n,i){let o=e+si,r=ht(),s=R1(r,o);return UY(r,o)?N0e(r,Db(),t,s.transform,n,i,s):s.transform(n,i)}function UY(e,t){return e[ut].data[t].pure}function sg(e,t){return wD(e,t)}var hD=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},tB=(()=>{class e{compileModuleSync(n){return new lD(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let i=this.compileModuleSync(n),o=NL(n),r=OZ(o.declarations).reduce((s,a)=>{let l=Dc(a);return l&&s.push(new Yh(l)),s},[]);return new hD(i,r)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var WY=(()=>{class e{applicationErrorHandler=k(vs);appRef=k(tr);taskService=k(Cl);ngZone=k(me);zonelessEnabled=k(Wm);tracing=k(kl,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Mt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(vb):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(V1,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?yN:_N;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(vb+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(n),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,yN(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function qY(){return[{provide:Sa,useExisting:WY},{provide:me,useClass:_b},{provide:Wm,useValue:!0}]}function V0e(){return typeof $localize<"u"&&$localize.locale||tC}var nC=new q("",{factory:()=>k(nC,{optional:!0,skipSelf:!0})||V0e()});var AD=class{destroyed=!1;listeners=null;errorHandler=k(Oo,{optional:!0});destroyRef=k(Eo);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(t){if(this.destroyed)throw new _e(953,!1);return(this.listeners??=[]).push(t),{unsubscribe:()=>{let n=this.listeners?.indexOf(t);n!==void 0&&n!==-1&&this.listeners?.splice(n,1)}}}emit(t){if(this.destroyed){console.warn(pl(953,!1));return}if(this.listeners===null)return;let n=dt(null);try{for(let i of this.listeners)try{i(t)}catch(o){this.errorHandler?.handleError(o)}}finally{dt(n)}}};function Er(e,t){return nb(e,t?.equal)}var FD=Symbol("InputSignalNode#UNSET"),tQ=x(g({},ib),{transformFn:void 0,applyValueToInputSignal(e,t){bm(e,t)}});function nQ(e,t){let n=Object.create(tQ);n.value=e,n.transformFn=t?.transform;function i(){if(xh(n),n.value===FD){let o=null;throw new _e(-950,o)}return n.value}return i[po]=n,i}var ag=class{attributeName;constructor(t){this.attributeName=t}__NG_ELEMENT_ID__=()=>f3(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},iQ=(()=>{let e=new q("");return e.__NG_ELEMENT_ID__=t=>{let n=to();if(n===null)throw new _e(204,!1);if(n.type&2)return n.value;if(t&8)return null;throw new _e(204,!1)},e})();function KY(e,t){return nQ(e,t)}function rxe(e){return nQ(FD,e)}var oQ=(KY.required=rxe,KY);function ZY(e,t){return U3(t)}function sxe(e,t){return W3(t)}var oC=(ZY.required=sxe,ZY);function YY(e,t){return U3(t)}function axe(e,t){return W3(t)}var rQ=(YY.required=axe,YY);function sQ(e,t){let n=Object.create(tQ),i=new AD;n.value=e;function o(){return xh(n),QY(n.value),n.value}return o[po]=n,o.asReadonly=z1.bind(o),o.set=r=>{n.equal(n.value,r)||(bm(n,r),i.emit(r))},o.update=r=>{QY(n.value),o.set(r(n.value))},o.subscribe=i.subscribe.bind(i),o.destroyRef=i.destroyRef,o}function QY(e){if(e===FD)throw new _e(952,!1)}function JY(e,t){return sQ(e,t)}function lxe(e){return sQ(FD,e)}var rC=(JY.required=lxe,JY);var cxe=(()=>{class e{zone=k(me);changeDetectionScheduler=k(Sa);applicationRef=k(tr);applicationErrorHandler=k(vs);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),dxe=new q("",{factory:()=>!1});function uxe({ngZoneFactory:e,scheduleInRootZone:t}){return e??=()=>new me(x(g({},lQ()),{scheduleInRootZone:t})),[{provide:Wm,useValue:!1},{provide:me,useFactory:e},{provide:kc,multi:!0,useFactory:()=>{let n=k(cxe,{optional:!0});return()=>n.initialize()}},{provide:kc,multi:!0,useFactory:()=>{let n=k(hxe);return()=>{n.initialize()}}},{provide:V1,useValue:t??vN}]}function aQ(e){let t=e?.scheduleInRootZone,n=uxe({ngZoneFactory:()=>{let i=lQ(e);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Ac("NgZone_CoalesceEvent"),new me(i)},scheduleInRootZone:t});return Ic([{provide:dxe,useValue:!0},n])}function lQ(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var hxe=(()=>{class e{subscription=new Mt;initialized=!1;zone=k(me);pendingTasks=k(Cl);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{me.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{me.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var iB=new q(""),pxe=new q("");function iC(e){return!e.moduleRef}function fxe(e){let t=iC(e)?e.r3Injector:e.moduleRef.injector,n=t.get(me);return n.run(()=>{iC(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let i=t.get(vs),o;if(n.runOutsideAngular(()=>{o=n.onError.subscribe({next:i})}),iC(e)){let r=()=>t.destroy(),s=e.platformInjector.get(iB);s.add(r),t.onDestroy(()=>{o.unsubscribe(),s.delete(r)})}else{let r=()=>e.moduleRef.destroy(),s=e.platformInjector.get(iB);s.add(r),e.moduleRef.onDestroy(()=>{Ob(e.allPlatformModules,e.moduleRef),o.unsubscribe(),s.delete(r)})}return gxe(i,n,()=>{let r=t.get(Cl),s=r.add(),a=t.get(Z3);return a.runInitializers(),a.donePromise.then(()=>{let l=t.get(nC,tC);if(OY(l||tC),!t.get(pxe,!0))return iC(e)?t.get(tr):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(iC(e)){let u=t.get(tr);return e.rootComponent!==void 0&&u.bootstrap(e.rootComponent),u}else return mxe?.(e.moduleRef,e.allPlatformModules),e.moduleRef}).finally(()=>void r.remove(s))})})}var mxe;function gxe(e,t,n){try{let i=n();return Fc(i)?i.catch(o=>{throw t.runOutsideAngular(()=>e(o)),o}):i}catch(i){throw t.runOutsideAngular(()=>e(i)),i}}var OD=null;function vxe(e=[],t){return Ke.create({name:t,providers:[{provide:Cb,useValue:"platform"},{provide:iB,useValue:new Set([()=>OD=null])},...e]})}function _xe(e=[]){if(OD)return OD;let t=vxe(e);return OD=t,TY(),yxe(t),t}function yxe(e){let t=e.get(pD,null);Fo(e,()=>{t?.forEach(n=>n())})}var dn=(()=>{class e{static __NG_ELEMENT_ID__=bxe}return e})();function bxe(e){return Cxe(to(),ht(),(e&16)===16)}function Cxe(e,t,n){if(Kd(e)&&!n){let i=Us(e.index,t);return new Qd(i,i)}else if(e.type&175){let i=t[wr];return new Qd(i,t)}return null}function cQ(e){let{rootComponent:t,appProviders:n,platformProviders:i,platformRef:o}=e;Tn(_n.BootstrapApplicationStart);try{let r=o?.injector??_xe(i),s=[qY(),gK,...n||[]],a=new Vb({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1});return fxe({r3Injector:a.injector,platformInjector:r,rootComponent:t})}catch(r){return Promise.reject(r)}finally{Tn(_n.BootstrapApplicationEnd)}}function $(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function $r(e,t=NaN){return!isNaN(parseFloat(e))&&!isNaN(Number(e))?Number(e):t}var nB=Symbol("NOT_SET"),dQ=new Set,wxe=x(g({},ib),{kind:"afterRenderEffectPhase",consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,value:nB,cleanup:null,consumerMarkedDirty(){if(this.sequence.impl.executing){if(this.sequence.lastPhase===null||this.sequence.lastPhase<this.phase)return;this.sequence.erroredOrDestroyed=!0}this.sequence.scheduler.notify(7)},phaseFn(e){if(this.sequence.lastPhase=this.phase,!this.dirty)return this.signal;if(this.dirty=!1,this.value!==nB&&!_m(this))return this.signal;try{for(let o of this.cleanup??dQ)o()}finally{this.cleanup?.clear()}let t=[];e!==void 0&&t.push(e),t.push(this.registerCleanupFn);let n=Sh(this),i;try{i=this.userFn.apply(null,t)}finally{vm(this,n)}return(this.value===nB||!this.equal(this.value,i))&&(this.value=i,this.version++),this.signal}}),oB=class extends Lb{scheduler;lastPhase=null;nodes=[void 0,void 0,void 0,void 0];onDestroyFns=null;constructor(t,n,i,o,r,s=null){super(t,[void 0,void 0,void 0,void 0],i,!1,r.get(Eo),s),this.scheduler=o;for(let a of M3){let l=n[a];if(l===void 0)continue;let c=Object.create(wxe);c.sequence=this,c.phase=a,c.userFn=l,c.dirty=!0,c.signal=()=>(xh(c),c.value),c.signal[po]=c,c.registerCleanupFn=u=>(c.cleanup??=new Set).add(u),this.nodes[a]=c,this.hooks[a]=u=>c.phaseFn(u)}}afterRun(){super.afterRun(),this.lastPhase=null}destroy(){if(this.onDestroyFns!==null)for(let t of this.onDestroyFns)t();super.destroy();for(let t of this.nodes)if(t)try{for(let n of t.cleanup??dQ)n()}finally{Vd(t)}}};function uQ(e,t){let n=t?.injector??k(Ke),i=n.get(Sa),o=n.get(_D),r=n.get(kl,null,{optional:!0});o.impl??=n.get(R3);let s=e;typeof s=="function"&&(s={mixedReadWrite:e});let a=n.get(Um,null,{optional:!0}),l=new oB(o.impl,[s.earlyRead,s.write,s.mixedReadWrite,s.read],a?.view,i,n,r?.snapshot(null));return o.impl.register(l),l}function LD(e,t){let n=Dc(e),i=t.elementInjector||zm();return new Yh(n).create(i,t.projectableNodes,t.hostElement,t.environmentInjector,t.directives,t.bindings)}var hQ=null;function qs(){return hQ}function sB(e){hQ??=e}var sC=class{},lg=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:()=>k(pQ),providedIn:"platform"})}return e})();var pQ=(()=>{class e extends lg{_location;_history;_doc=k(Je);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return qs().getBaseHref(this._doc)}onPopState(n){let i=qs().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",n,!1),()=>i.removeEventListener("popstate",n)}onHashChange(n){let i=qs().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",n,!1),()=>i.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,i,o){this._history.pushState(n,i,o)}replaceState(n,i,o){this._history.replaceState(n,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function gQ(e,t){return e?t?e.endsWith("/")?t.startsWith("/")?e+t.slice(1):e+t:t.startsWith("/")?e+t:`${e}/${t}`:e:t}function fQ(e){let t=e.search(/#|\?|$/);return e[t-1]==="/"?e.slice(0,t-1)+e.slice(t):e}function tu(e){return e&&e[0]!=="?"?`?${e}`:e}var ND=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:()=>k(Sxe),providedIn:"root"})}return e})(),xxe=new q(""),Sxe=(()=>{class e extends ND{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,i){super(),this._platformLocation=n,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??k(Je).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return gQ(this._baseHref,n)}path(n=!1){let i=this._platformLocation.pathname+tu(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${i}${o}`:i}pushState(n,i,o,r){let s=this.prepareExternalUrl(o+tu(r));this._platformLocation.pushState(n,i,s)}replaceState(n,i,o,r){let s=this.prepareExternalUrl(o+tu(r));this._platformLocation.replaceState(n,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(i){return new(i||e)(Ze(lg),Ze(xxe,8))};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),nu=(()=>{class e{_subject=new ie;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let i=this._locationStrategy.getBaseHref();this._basePath=kxe(fQ(mQ(i))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,i=""){return this.path()==this.normalize(n+tu(i))}normalize(n){return e.stripTrailingSlash(Dxe(this._basePath,mQ(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,i="",o=null){this._locationStrategy.pushState(o,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+tu(i)),o)}replaceState(n,i="",o=null){this._locationStrategy.replaceState(o,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+tu(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",i){this._urlChangeListeners.forEach(o=>o(n,i))}subscribe(n,i,o){return this._subject.subscribe({next:n,error:i??void 0,complete:o??void 0})}static normalizeQueryParams=tu;static joinWithSlash=gQ;static stripTrailingSlash=fQ;static \u0275fac=function(i){return new(i||e)(Ze(ND))};static \u0275prov=ee({token:e,factory:()=>Exe(),providedIn:"root"})}return e})();function Exe(){return new nu(Ze(ND))}function Dxe(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function mQ(e){return e.replace(/\/index.html$/,"")}function kxe(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var rr=(function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e})(rr||{}),Vn=(function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e})(Vn||{}),jr=(function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e})(jr||{}),Nc={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function bQ(e){return ys(e)[Vi.LocaleId]}function CQ(e,t,n){let i=ys(e),o=[i[Vi.DayPeriodsFormat],i[Vi.DayPeriodsStandalone]],r=Ks(o,t);return Ks(r,n)}function wQ(e,t,n){let i=ys(e),o=[i[Vi.DaysFormat],i[Vi.DaysStandalone]],r=Ks(o,t);return Ks(r,n)}function xQ(e,t,n){let i=ys(e),o=[i[Vi.MonthsFormat],i[Vi.MonthsStandalone]],r=Ks(o,t);return Ks(r,n)}function SQ(e,t){let i=ys(e)[Vi.Eras];return Ks(i,t)}function aC(e,t){let n=ys(e);return Ks(n[Vi.DateFormat],t)}function lC(e,t){let n=ys(e);return Ks(n[Vi.TimeFormat],t)}function cC(e,t){let i=ys(e)[Vi.DateTimeFormat];return Ks(i,t)}function dC(e,t){let n=ys(e),i=n[Vi.NumberSymbols][t];if(typeof i>"u"){if(t===Nc.CurrencyDecimal)return n[Vi.NumberSymbols][Nc.Decimal];if(t===Nc.CurrencyGroup)return n[Vi.NumberSymbols][Nc.Group]}return i}function EQ(e){if(!e[Vi.ExtraData])throw new _e(2303,!1)}function DQ(e){let t=ys(e);return EQ(t),(t[Vi.ExtraData][2]||[]).map(i=>typeof i=="string"?aB(i):[aB(i[0]),aB(i[1])])}function kQ(e,t,n){let i=ys(e);EQ(i);let o=[i[Vi.ExtraData][0],i[Vi.ExtraData][1]],r=Ks(o,t)||[];return Ks(r,n)||[]}function Ks(e,t){for(let n=t;n>-1;n--)if(typeof e[n]<"u")return e[n];throw new _e(2304,!1)}function aB(e){let[t,n]=e.split(":");return{hours:+t,minutes:+n}}var Mxe=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,BD={},Rxe=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function IQ(e,t,n,i){let o=zxe(e);t=Lc(n,t)||t;let s=[],a;for(;t;)if(a=Rxe.exec(t),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;t=u}else{s.push(t);break}let l=o.getTimezoneOffset();i&&(l=RQ(i,l),o=Bxe(o,i));let c="";return s.forEach(u=>{let h=Lxe(u);c+=h?h(o,n,l):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function jD(e,t,n){let i=new Date(0);return i.setFullYear(e,t,n),i.setHours(0,0,0),i}function Lc(e,t){let n=bQ(e);if(BD[n]??={},BD[n][t])return BD[n][t];let i="";switch(t){case"shortDate":i=aC(e,jr.Short);break;case"mediumDate":i=aC(e,jr.Medium);break;case"longDate":i=aC(e,jr.Long);break;case"fullDate":i=aC(e,jr.Full);break;case"shortTime":i=lC(e,jr.Short);break;case"mediumTime":i=lC(e,jr.Medium);break;case"longTime":i=lC(e,jr.Long);break;case"fullTime":i=lC(e,jr.Full);break;case"short":let o=Lc(e,"shortTime"),r=Lc(e,"shortDate");i=zD(cC(e,jr.Short),[o,r]);break;case"medium":let s=Lc(e,"mediumTime"),a=Lc(e,"mediumDate");i=zD(cC(e,jr.Medium),[s,a]);break;case"long":let l=Lc(e,"longTime"),c=Lc(e,"longDate");i=zD(cC(e,jr.Long),[l,c]);break;case"full":let u=Lc(e,"fullTime"),h=Lc(e,"fullDate");i=zD(cC(e,jr.Full),[u,h]);break}return i&&(BD[n][t]=i),i}function zD(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(n,i){return t!=null&&i in t?t[i]:n})),e}function Pa(e,t,n="-",i,o){let r="";(e<0||o&&e<=0)&&(o?e=-e+1:(e=-e,r=n));let s=String(e);for(;s.length<t;)s="0"+s;return i&&(s=s.slice(s.length-t)),r+s}function Txe(e,t){return Pa(e,3).substring(0,t)}function io(e,t,n=0,i=!1,o=!1){return function(r,s){let a=Pxe(e,r);if((n>0||a>-n)&&(a+=n),e===3)a===0&&n===-12&&(a=12);else if(e===6)return Txe(a,t);let l=dC(s,Nc.MinusSign);return Pa(a,t,l,i,o)}}function Pxe(e,t){switch(e){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new _e(2301,!1)}}function Xn(e,t,n=rr.Format,i=!1){return function(o,r){return Axe(o,r,e,t,n,i)}}function Axe(e,t,n,i,o,r){switch(n){case 2:return xQ(t,o,i)[e.getMonth()];case 1:return wQ(t,o,i)[e.getDay()];case 0:let s=e.getHours(),a=e.getMinutes();if(r){let c=DQ(t),u=kQ(t,o,i),h=c.findIndex(f=>{if(Array.isArray(f)){let[m,_]=f,y=s>=m.hours&&a>=m.minutes,w=s<_.hours||s===_.hours&&a<_.minutes;if(m.hours<_.hours){if(y&&w)return!0}else if(y||w)return!0}else if(f.hours===s&&f.minutes===a)return!0;return!1});if(h!==-1)return u[h]}return CQ(t,o,i)[s<12?0:1];case 3:return SQ(t,i)[e.getFullYear()<=0?0:1];default:let l=n;throw new _e(2302,!1)}}function VD(e){return function(t,n,i){let o=-1*i,r=dC(n,Nc.MinusSign),s=o>0?Math.floor(o/60):Math.ceil(o/60);switch(e){case 0:return(o>=0?"+":"")+Pa(s,2,r)+Pa(Math.abs(o%60),2,r);case 1:return"GMT"+(o>=0?"+":"")+Pa(s,1,r);case 2:return"GMT"+(o>=0?"+":"")+Pa(s,2,r)+":"+Pa(Math.abs(o%60),2,r);case 3:return i===0?"Z":(o>=0?"+":"")+Pa(s,2,r)+":"+Pa(Math.abs(o%60),2,r);default:throw new _e(2310,!1)}}}var Oxe=0,$D=4;function Fxe(e){let t=jD(e,Oxe,1).getDay();return jD(e,0,1+(t<=$D?$D:$D+7)-t)}function MQ(e){let t=e.getDay(),n=t===0?-3:$D-t;return jD(e.getFullYear(),e.getMonth(),e.getDate()+n)}function lB(e,t=!1){return function(n,i){let o;if(t){let r=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();o=1+Math.floor((s+r)/7)}else{let r=MQ(n),s=Fxe(r.getFullYear()),a=r.getTime()-s.getTime();o=1+Math.round(a/6048e5)}return Pa(o,e,dC(i,Nc.MinusSign))}}function HD(e,t=!1){return function(n,i){let r=MQ(n).getFullYear();return Pa(r,e,dC(i,Nc.MinusSign),t)}}var cB={};function Lxe(e){if(cB[e])return cB[e];let t;switch(e){case"G":case"GG":case"GGG":t=Xn(3,Vn.Abbreviated);break;case"GGGG":t=Xn(3,Vn.Wide);break;case"GGGGG":t=Xn(3,Vn.Narrow);break;case"y":t=io(0,1,0,!1,!0);break;case"yy":t=io(0,2,0,!0,!0);break;case"yyy":t=io(0,3,0,!1,!0);break;case"yyyy":t=io(0,4,0,!1,!0);break;case"Y":t=HD(1);break;case"YY":t=HD(2,!0);break;case"YYY":t=HD(3);break;case"YYYY":t=HD(4);break;case"M":case"L":t=io(1,1,1);break;case"MM":case"LL":t=io(1,2,1);break;case"MMM":t=Xn(2,Vn.Abbreviated);break;case"MMMM":t=Xn(2,Vn.Wide);break;case"MMMMM":t=Xn(2,Vn.Narrow);break;case"LLL":t=Xn(2,Vn.Abbreviated,rr.Standalone);break;case"LLLL":t=Xn(2,Vn.Wide,rr.Standalone);break;case"LLLLL":t=Xn(2,Vn.Narrow,rr.Standalone);break;case"w":t=lB(1);break;case"ww":t=lB(2);break;case"W":t=lB(1,!0);break;case"d":t=io(2,1);break;case"dd":t=io(2,2);break;case"c":case"cc":t=io(7,1);break;case"ccc":t=Xn(1,Vn.Abbreviated,rr.Standalone);break;case"cccc":t=Xn(1,Vn.Wide,rr.Standalone);break;case"ccccc":t=Xn(1,Vn.Narrow,rr.Standalone);break;case"cccccc":t=Xn(1,Vn.Short,rr.Standalone);break;case"E":case"EE":case"EEE":t=Xn(1,Vn.Abbreviated);break;case"EEEE":t=Xn(1,Vn.Wide);break;case"EEEEE":t=Xn(1,Vn.Narrow);break;case"EEEEEE":t=Xn(1,Vn.Short);break;case"a":case"aa":case"aaa":t=Xn(0,Vn.Abbreviated);break;case"aaaa":t=Xn(0,Vn.Wide);break;case"aaaaa":t=Xn(0,Vn.Narrow);break;case"b":case"bb":case"bbb":t=Xn(0,Vn.Abbreviated,rr.Standalone,!0);break;case"bbbb":t=Xn(0,Vn.Wide,rr.Standalone,!0);break;case"bbbbb":t=Xn(0,Vn.Narrow,rr.Standalone,!0);break;case"B":case"BB":case"BBB":t=Xn(0,Vn.Abbreviated,rr.Format,!0);break;case"BBBB":t=Xn(0,Vn.Wide,rr.Format,!0);break;case"BBBBB":t=Xn(0,Vn.Narrow,rr.Format,!0);break;case"h":t=io(3,1,-12);break;case"hh":t=io(3,2,-12);break;case"H":t=io(3,1);break;case"HH":t=io(3,2);break;case"m":t=io(4,1);break;case"mm":t=io(4,2);break;case"s":t=io(5,1);break;case"ss":t=io(5,2);break;case"S":t=io(6,1);break;case"SS":t=io(6,2);break;case"SSS":t=io(6,3);break;case"Z":case"ZZ":case"ZZZ":t=VD(0);break;case"ZZZZZ":t=VD(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=VD(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=VD(2);break;default:return null}return cB[e]=t,t}function RQ(e,t){e=e.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function Nxe(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function Bxe(e,t,n){let o=e.getTimezoneOffset(),r=RQ(t,o);return Nxe(e,-1*(r-o))}function zxe(e){if(vQ(e))return e;if(typeof e=="number"&&!isNaN(e))return new Date(e);if(typeof e=="string"){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){let[o,r=1,s=1]=e.split("-").map(a=>+a);return jD(o,r-1,s)}let n=parseFloat(e);if(!isNaN(e-n))return new Date(n);let i;if(i=e.match(Mxe))return Vxe(i)}let t=new Date(e);if(!vQ(t))throw new _e(2311,!1);return t}function Vxe(e){let t=new Date(0),n=0,i=0,o=e[8]?t.setUTCFullYear:t.setFullYear,r=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),i=Number(e[9]+e[11])),o.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));let s=Number(e[4]||0)-n,a=Number(e[5]||0)-i,l=Number(e[6]||0),c=Math.floor(parseFloat("0."+(e[7]||0))*1e3);return r.call(t,s,a,l,c),t}function vQ(e){return e instanceof Date&&!isNaN(e.valueOf())}var dB=/\s+/,_Q=[],uC=(()=>{class e{_ngEl;_renderer;initialClasses=_Q;rawClass;stateMap=new Map;constructor(n,i){this._ngEl=n,this._renderer=i}set klass(n){this.initialClasses=n!=null?n.trim().split(dB):_Q}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(dB):n}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let i of n)this._updateState(i,!0);else if(n!=null)for(let i of Object.keys(n))this._updateState(i,!!n[i]);this._applyStateDiff()}_updateState(n,i){let o=this.stateMap.get(n);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(n,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let i=n[0],o=n[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(n,i){n=n.trim(),n.length>0&&n.split(dB).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}static \u0275fac=function(i){return new(i||e)(ye(Oe),ye(Pn))};static \u0275dir=ke({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return e})();var hC=(()=>{class e{_viewContainer;_context=new GD;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,i){this._viewContainer=n,this._thenTemplateRef=i}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){yQ(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){yQ(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,i){return!0}static \u0275fac=function(i){return new(i||e)(ye(li),ye(xr))};static \u0275dir=ke({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return e})(),GD=class{$implicit=null;ngIf=null};function yQ(e,t){if(e&&!e.createEmbeddedView)throw new _e(2020,!1)}var pC=(()=>{class e{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(n){this._viewContainerRef=n}ngOnChanges(n){if(this._shouldRecreateView(n)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let o=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,o,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(n){return!!n.ngTemplateOutlet||!!n.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(n,i,o)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,o):!1,get:(n,i,o)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,o)}})}static \u0275fac=function(i){return new(i||e)(ye(li))};static \u0275dir=ke({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[sn]})}return e})();function pB(e,t){return new _e(2100,!1)}var uB=class{createSubscription(t,n,i){return mi(()=>t.subscribe({next:n,error:i}))}dispose(t){mi(()=>t.unsubscribe())}},hB=class{createSubscription(t,n,i){return t.then(o=>n?.(o),o=>i?.(o)),{unsubscribe:()=>{n=null,i=null}}}dispose(t){t.unsubscribe()}},Hxe=new hB,$xe=new uB,fB=(()=>{class e{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=k(vs);constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,i=>this._updateLatestValue(n,i),i=>this.applicationErrorHandler(i))}_selectStrategy(n){if(Fc(n))return Hxe;if(kD(n))return $xe;throw pB(e,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,i){n===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(i){return new(i||e)(ye(dn,16))};static \u0275pipe=In({name:"async",type:e,pure:!1})}return e})();var jxe=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,fC=(()=>{class e{transform(n){if(n==null)return null;if(typeof n!="string")throw pB(e,n);return n.replace(jxe,i=>i[0].toUpperCase()+i.slice(1).toLowerCase())}static \u0275fac=function(i){return new(i||e)};static \u0275pipe=In({name:"titlecase",type:e,pure:!0})}return e})();var Gxe="mediumDate",TQ=new q(""),PQ=new q(""),mC=(()=>{class e{locale;defaultTimezone;defaultOptions;constructor(n,i,o){this.locale=n,this.defaultTimezone=i,this.defaultOptions=o}transform(n,i,o,r){if(n==null||n===""||n!==n)return null;try{let s=i??this.defaultOptions?.dateFormat??Gxe,a=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return IQ(n,s,r||this.locale,a)}catch(s){throw pB(e,s.message)}}static \u0275fac=function(i){return new(i||e)(ye(nC,16),ye(TQ,24),ye(PQ,24))};static \u0275pipe=In({name:"date",type:e,pure:!0})}return e})();var Xh=(()=>{class e{transform(n){return JSON.stringify(n,null,2)}static \u0275fac=function(i){return new(i||e)};static \u0275pipe=In({name:"json",type:e,pure:!1})}return e})();var oo=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({})}return e})();function gC(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let i=n.indexOf("="),[o,r]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(o.trim()===t)return decodeURIComponent(r)}return null}var ep=class{};var mB="browser";function Bc(e){return e===mB}var vC=class{_doc;constructor(t){this._doc=t}manager},UD=(()=>{class e extends vC{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,o,r){return n.addEventListener(i,o,r),()=>this.removeEventListener(n,i,o,r)}removeEventListener(n,i,o,r){return n.removeEventListener(i,o,r)}static \u0275fac=function(i){return new(i||e)(Ze(Je))};static \u0275prov=ee({token:e,factory:e.\u0275fac})}return e})(),KD=new q(""),yB=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,i){this._zone=i,n.forEach(s=>{s.manager=this});let o=n.filter(s=>!(s instanceof UD));this._plugins=o.slice().reverse();let r=n.find(s=>s instanceof UD);r&&this._plugins.push(r)}addEventListener(n,i,o,r){return this._findPluginFor(i).addEventListener(n,i,o,r)}getZone(){return this._zone}_findPluginFor(n){let i=this._eventNameToPlugin.get(n);if(i)return i;if(i=this._plugins.find(r=>r.supports(n)),!i)throw new _e(5101,!1);return this._eventNameToPlugin.set(n,i),i}static \u0275fac=function(i){return new(i||e)(Ze(KD),Ze(me))};static \u0275prov=ee({token:e,factory:e.\u0275fac})}return e})(),gB="ng-app-id";function AQ(e){for(let t of e)t.remove()}function OQ(e,t){let n=t.createElement("style");return n.textContent=e,n}function Wxe(e,t,n,i){let o=e.head?.querySelectorAll(`style[${gB}="${t}"],link[${gB}="${t}"]`);if(o)for(let r of o)r.removeAttribute(gB),r instanceof HTMLLinkElement?i.set(r.href.slice(r.href.lastIndexOf("/")+1),{usage:0,elements:[r]}):r.textContent&&n.set(r.textContent,{usage:0,elements:[r]})}function _B(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var bB=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,i,o,r={}){this.doc=n,this.appId=i,this.nonce=o,Wxe(n,i,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,i){for(let o of n)this.addUsage(o,this.inline,OQ);i?.forEach(o=>this.addUsage(o,this.external,_B))}removeStyles(n,i){for(let o of n)this.removeUsage(o,this.inline);i?.forEach(o=>this.removeUsage(o,this.external))}addUsage(n,i,o){let r=i.get(n);r?r.usage++:i.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,o(n,this.doc)))})}removeUsage(n,i){let o=i.get(n);o&&(o.usage--,o.usage<=0&&(AQ(o.elements),i.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])AQ(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[i,{elements:o}]of this.inline)o.push(this.addElement(n,OQ(i,this.doc)));for(let[i,{elements:o}]of this.external)o.push(this.addElement(n,_B(i,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,i){return this.nonce&&i.setAttribute("nonce",this.nonce),n.appendChild(i)}static \u0275fac=function(i){return new(i||e)(Ze(Je),Ze(Jd),Ze(tg,8),Ze(Tc))};static \u0275prov=ee({token:e,factory:e.\u0275fac})}return e})(),vB={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},CB=/%COMP%/g;var LQ="%COMP%",qxe=`_nghost-${LQ}`,Kxe=`_ngcontent-${LQ}`,Zxe=!0,Yxe=new q("",{factory:()=>Zxe});function Qxe(e){return Kxe.replace(CB,e)}function Jxe(e){return qxe.replace(CB,e)}function NQ(e,t){return t.map(n=>n.replace(CB,e))}var wB=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,i,o,r,s,a,l=null,c=null){this.eventManager=n,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=r,this.doc=s,this.ngZone=a,this.nonce=l,this.tracingService=c,this.platformIsServer=!1,this.defaultRenderer=new _C(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;let o=this.getOrCreateRenderer(n,i);return o instanceof qD?o.applyToHost(n):o instanceof yC&&o.applyStyles(),o}getOrCreateRenderer(n,i){let o=this.rendererByCompId,r=o.get(i.id);if(!r){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer,f=this.tracingService;switch(i.encapsulation){case Ta.Emulated:r=new qD(l,c,i,this.appId,u,s,a,h,f);break;case Ta.ShadowDom:return new WD(l,n,i,s,a,this.nonce,h,f,c);case Ta.ExperimentalIsolatedShadowDom:return new WD(l,n,i,s,a,this.nonce,h,f);default:r=new yC(l,c,i,u,s,a,h,f);break}o.set(i.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(i){return new(i||e)(Ze(yB),Ze(bB),Ze(Jd),Ze(Yxe),Ze(Je),Ze(me),Ze(tg),Ze(kl,8))};static \u0275prov=ee({token:e,factory:e.\u0275fac})}return e})(),_C=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,i,o,r){this.eventManager=t,this.doc=n,this.ngZone=i,this.platformIsServer=o,this.tracingService=r}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(vB[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(FQ(t)?t.content:t).appendChild(n)}insertBefore(t,n,i){t&&(FQ(t)?t.content:t).insertBefore(n,i)}removeChild(t,n){n.remove()}selectRootElement(t,n){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new _e(-5104,!1);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,o){if(o){n=o+":"+n;let r=vB[o];r?t.setAttributeNS(r,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){let o=vB[i];o?t.removeAttributeNS(o,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,o){o&(Sl.DashCase|Sl.Important)?t.style.setProperty(n,i,o&Sl.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&Sl.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t!=null&&(t[n]=i)}setValue(t,n){t.nodeValue=n}listen(t,n,i,o){if(typeof t=="string"&&(t=qs().getGlobalEventTarget(this.doc,t),!t))throw new _e(5102,!1);let r=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(r=this.tracingService.wrapEventListener(t,n,r)),this.eventManager.addEventListener(t,n,r,o)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;t(n)===!1&&n.preventDefault()}}};function FQ(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var WD=class extends _C{hostEl;sharedStylesHost;shadowRoot;constructor(t,n,i,o,r,s,a,l,c){super(t,o,r,a,l),this.hostEl=n,this.sharedStylesHost=c,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=NQ(i.id,u);for(let f of u){let m=document.createElement("style");s&&m.setAttribute("nonce",s),m.textContent=f,this.shadowRoot.appendChild(m)}let h=i.getExternalStyles?.();if(h)for(let f of h){let m=_B(f,o);s&&m.setAttribute("nonce",s),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},yC=class extends _C{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,i,o,r,s,a,l,c){super(t,r,s,a,l),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o;let u=i.styles;this.styles=c?NQ(c,u):u,this.styleUrls=i.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Zh.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},qD=class extends yC{contentAttr;hostAttr;constructor(t,n,i,o,r,s,a,l,c){let u=o+"-"+i.id;super(t,n,i,r,s,a,l,c,u),this.contentAttr=Qxe(u),this.hostAttr=Jxe(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}};var ZD=class e extends sC{supportsDOMEvents=!0;static makeCurrent(){sB(new e)}onAndCancel(t,n,i,o){return t.addEventListener(n,i,o),()=>{t.removeEventListener(n,i,o)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=Xxe();return n==null?null:eSe(n)}resetBaseElement(){bC=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return gC(document.cookie,t)}},bC=null;function Xxe(){return bC=bC||document.head.querySelector("base"),bC?bC.getAttribute("href"):null}function eSe(e){return new URL(e,document.baseURI).pathname}var tSe=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac})}return e})(),BQ=["alt","control","meta","shift"],nSe={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},iSe={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},zQ=(()=>{class e extends vC{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,i,o,r){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qs().onAndCancel(n,s.domEventName,a,r))}static parseEventName(n){let i=n.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let r=e._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),BQ.forEach(c=>{let u=i.indexOf(c);u>-1&&(i.splice(u,1),s+=c+".")}),s+=r,i.length!=0||r.length===0)return null;let l={};return l.domEventName=o,l.fullKey=s,l}static matchEventFullKeyCode(n,i){let o=nSe[n.key]||n.key,r="";return i.indexOf("code.")>-1&&(o=n.code,r="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),BQ.forEach(s=>{if(s!==o){let a=iSe[s];a(n)&&(r+=s+".")}}),r+=o,r===i)}static eventCallback(n,i,o){return r=>{e.matchEventFullKeyCode(r,n)&&o.runGuarded(()=>i(r))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(i){return new(i||e)(Ze(Je))};static \u0275prov=ee({token:e,factory:e.\u0275fac})}return e})();function xB(e,t,n){let i=g({rootComponent:e,platformRef:n?.platformRef},oSe(t));return cQ(i)}function oSe(e){return{appProviders:[...cSe,...e?.providers??[]],platformProviders:lSe}}function rSe(){ZD.makeCurrent()}function sSe(){return new Oo}function aSe(){return g3(document),document}var lSe=[{provide:Tc,useValue:mB},{provide:pD,useValue:rSe,multi:!0},{provide:Je,useFactory:aSe}];var cSe=[{provide:Cb,useValue:"root"},{provide:Oo,useFactory:sSe},{provide:KD,useClass:UD,multi:!0},{provide:KD,useClass:zQ,multi:!0},wB,bB,yB,{provide:xi,useExisting:wB},{provide:ep,useClass:tSe},[]];var Il=class e{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let i=n.indexOf(":");if(i>0){let o=n.slice(0,i),r=n.slice(i+1).trim();this.addHeaderEntry(o,r)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,i)=>{this.addHeaderEntry(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,n);let o=(t.op==="a"?this.headers.get(n):void 0)||[];o.push(...i),this.headers.set(n,o);break;case"d":let r=t.value;if(!r)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>r.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(t,n){let i=t.toLowerCase();this.maybeSetNormalizedName(t,i),this.headers.has(i)?this.headers.get(i).push(n):this.headers.set(i,[n])}setHeaderEntries(t,n){let i=(Array.isArray(n)?n:[n]).map(r=>r.toString()),o=t.toLowerCase();this.headers.set(o,i),this.maybeSetNormalizedName(t,o)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var QD=class{map=new Map;set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}},JD=class{encodeKey(t){return VQ(t)}encodeValue(t){return VQ(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function dSe(e,t){let n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(o=>{let r=o.indexOf("="),[s,a]=r==-1?[t.decodeKey(o),""]:[t.decodeKey(o.slice(0,r)),t.decodeValue(o.slice(r+1))],l=n.get(s)||[];l.push(a),n.set(s,l)}),n}var uSe=/%(\d[a-f0-9])/gi,hSe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function VQ(e){return encodeURIComponent(e).replace(uSe,(t,n)=>hSe[n]??t)}function YD(e){return`${e}`}var zc=class e{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new JD,t.fromString){if(t.fromObject)throw new _e(2805,!1);this.map=dSe(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{let i=t.fromObject[n],o=Array.isArray(i)?i.map(YD):[YD(i)];this.map.set(n,o)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){let n=[];return Object.keys(t).forEach(i=>{let o=t[i];Array.isArray(o)?o.forEach(r=>{n.push({param:i,value:r,op:"a"})}):n.push({param:i,value:o,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let n=this.encoder.encodeKey(t);return this.map.get(t).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let n=(t.op==="a"?this.map.get(t.param):void 0)||[];n.push(YD(t.value)),this.map.set(t.param,n);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],o=i.indexOf(YD(t.value));o!==-1&&i.splice(o,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};function pSe(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function HQ(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function $Q(e){return typeof Blob<"u"&&e instanceof Blob}function jQ(e){return typeof FormData<"u"&&e instanceof FormData}function fSe(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var GQ="Content-Type",UQ="Accept",qQ="text/plain",KQ="application/json",mSe=`${KQ}, ${qQ}, */*`,cg=class e{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(t,n,i,o){this.url=n,this.method=t.toUpperCase();let r;if(pSe(this.method)||o?(this.body=i!==void 0?i:null,r=o):r=i,r){if(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,this.keepalive=!!r.keepalive,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.context&&(this.context=r.context),r.params&&(this.params=r.params),r.priority&&(this.priority=r.priority),r.cache&&(this.cache=r.cache),r.credentials&&(this.credentials=r.credentials),typeof r.timeout=="number"){if(r.timeout<1||!Number.isInteger(r.timeout))throw new _e(2822,"");this.timeout=r.timeout}r.mode&&(this.mode=r.mode),r.redirect&&(this.redirect=r.redirect),r.integrity&&(this.integrity=r.integrity),r.referrer&&(this.referrer=r.referrer),r.referrerPolicy&&(this.referrerPolicy=r.referrerPolicy),this.transferCache=r.transferCache}if(this.headers??=new Il,this.context??=new QD,!this.params)this.params=new zc,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),l=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||HQ(this.body)||$Q(this.body)||jQ(this.body)||fSe(this.body)?this.body:this.body instanceof zc?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||jQ(this.body)?null:$Q(this.body)?this.body.type||null:HQ(this.body)?null:typeof this.body=="string"?qQ:this.body instanceof zc?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?KQ:null}clone(t={}){let n=t.method||this.method,i=t.url||this.url,o=t.responseType||this.responseType,r=t.keepalive??this.keepalive,s=t.priority||this.priority,a=t.cache||this.cache,l=t.mode||this.mode,c=t.redirect||this.redirect,u=t.credentials||this.credentials,h=t.referrer||this.referrer,f=t.integrity||this.integrity,m=t.referrerPolicy||this.referrerPolicy,_=t.transferCache??this.transferCache,y=t.timeout??this.timeout,w=t.body!==void 0?t.body:this.body,C=t.withCredentials??this.withCredentials,S=t.reportProgress??this.reportProgress,I=t.headers||this.headers,O=t.params||this.params,F=t.context??this.context;return t.setHeaders!==void 0&&(I=Object.keys(t.setHeaders).reduce((H,j)=>H.set(j,t.setHeaders[j]),I)),t.setParams&&(O=Object.keys(t.setParams).reduce((H,j)=>H.set(j,t.setParams[j]),O)),new e(n,i,w,{params:O,headers:I,context:F,reportProgress:S,responseType:o,withCredentials:C,transferCache:_,keepalive:r,cache:a,priority:s,timeout:y,mode:l,redirect:c,credentials:u,referrer:h,integrity:f,referrerPolicy:m})}},np=(function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e})(np||{}),ug=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(t,n=200,i="OK"){this.headers=t.headers||new Il,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||i,this.url=t.url||null,this.redirected=t.redirected,this.responseType=t.responseType,this.ok=this.status>=200&&this.status<300}},XD=class e extends ug{constructor(t={}){super(t)}type=np.ResponseHeader;clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},CC=class e extends ug{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=np.Response;clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0,redirected:t.redirected??this.redirected,responseType:t.responseType??this.responseType})}},dg=class extends ug{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},gSe=200,vSe=204;var _Se=new q("");var ySe=/^\)\]\}',?\n/;var EB=(()=>{class e{xhrFactory;tracingService=k(kl,{optional:!0});constructor(n){this.xhrFactory=n}maybePropagateTrace(n){return this.tracingService?.propagate?this.tracingService.propagate(n):n}handle(n){if(n.method==="JSONP")throw new _e(-2800,!1);let i=this.xhrFactory;return et(null).pipe(eo(()=>new yt(r=>{let s=i.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((w,C)=>s.setRequestHeader(w,C.join(","))),n.headers.has(UQ)||s.setRequestHeader(UQ,mSe),!n.headers.has(GQ)){let w=n.detectContentTypeHeader();w!==null&&s.setRequestHeader(GQ,w)}if(n.timeout&&(s.timeout=n.timeout),n.responseType){let w=n.responseType.toLowerCase();s.responseType=w!=="json"?w:"text"}let a=n.serializeBody(),l=null,c=()=>{if(l!==null)return l;let w=s.statusText||"OK",C=new Il(s.getAllResponseHeaders()),S=s.responseURL||n.url;return l=new XD({headers:C,status:s.status,statusText:w,url:S}),l},u=this.maybePropagateTrace(()=>{let{headers:w,status:C,statusText:S,url:I}=c(),O=null;C!==vSe&&(O=typeof s.response>"u"?s.responseText:s.response),C===0&&(C=O?gSe:0);let F=C>=200&&C<300;if(n.responseType==="json"&&typeof O=="string"){let H=O;O=O.replace(ySe,"");try{O=O!==""?JSON.parse(O):null}catch(j){O=H,F&&(F=!1,O={error:j,text:O})}}F?(r.next(new CC({body:O,headers:w,status:C,statusText:S,url:I||void 0})),r.complete()):r.error(new dg({error:O,headers:w,status:C,statusText:S,url:I||void 0}))}),h=this.maybePropagateTrace(w=>{let{url:C}=c(),S=new dg({error:w,status:s.status||0,statusText:s.statusText||"Unknown Error",url:C||void 0});r.error(S)}),f=h;n.timeout&&(f=this.maybePropagateTrace(w=>{let{url:C}=c(),S=new dg({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:C||void 0});r.error(S)}));let m=!1,_=this.maybePropagateTrace(w=>{m||(r.next(c()),m=!0);let C={type:np.DownloadProgress,loaded:w.loaded};w.lengthComputable&&(C.total=w.total),n.responseType==="text"&&s.responseText&&(C.partialText=s.responseText),r.next(C)}),y=this.maybePropagateTrace(w=>{let C={type:np.UploadProgress,loaded:w.loaded};w.lengthComputable&&(C.total=w.total),r.next(C)});return s.addEventListener("load",u),s.addEventListener("error",h),s.addEventListener("timeout",f),s.addEventListener("abort",h),n.reportProgress&&(s.addEventListener("progress",_),a!==null&&s.upload&&s.upload.addEventListener("progress",y)),s.send(a),r.next({type:np.Sent}),()=>{s.removeEventListener("error",h),s.removeEventListener("abort",h),s.removeEventListener("load",u),s.removeEventListener("timeout",f),n.reportProgress&&(s.removeEventListener("progress",_),a!==null&&s.upload&&s.upload.removeEventListener("progress",y)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(i){return new(i||e)(Ze(ep))};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ZQ(e,t){return t(e)}function bSe(e,t){return(n,i)=>t.intercept(n,{handle:o=>e(o,i)})}function CSe(e,t,n){return(i,o)=>Fo(n,()=>t(i,r=>e(r,o)))}var YQ=new q(""),DB=new q("",{factory:()=>[]}),QQ=new q(""),kB=new q("",{providedIn:"root",factory:()=>!0});function wSe(){let e=null;return(t,n)=>{e===null&&(e=(k(YQ,{optional:!0})??[]).reduceRight(bSe,ZQ));let i=k(Wh);if(k(kB)){let r=i.add();return e(t,n).pipe(xa(r))}else return e(t,n)}}var IB=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:function(i){let o=null;return i?o=new(i||e):o=Ze(EB),o},providedIn:"root"})}return e})();var ek=(()=>{class e{backend;injector;chain=null;pendingTasks=k(Wh);contributeToStability=k(kB);constructor(n,i){this.backend=n,this.injector=i}handle(n){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(DB),...this.injector.get(QQ,[])]));this.chain=i.reduceRight((o,r)=>CSe(o,r,this.injector),ZQ)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(n,o=>this.backend.handle(o)).pipe(xa(i))}else return this.chain(n,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||e)(Ze(IB),Ze(Qn))};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),MB=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:function(i){let o=null;return i?o=new(i||e):o=Ze(ek),o},providedIn:"root"})}return e})();function SB(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,credentials:e.credentials,transferCache:e.transferCache,timeout:e.timeout,keepalive:e.keepalive,priority:e.priority,cache:e.cache,mode:e.mode,redirect:e.redirect,integrity:e.integrity,referrer:e.referrer,referrerPolicy:e.referrerPolicy}}var iu=(()=>{class e{handler;constructor(n){this.handler=n}request(n,i,o={}){let r;if(n instanceof cg)r=n;else{let l;o.headers instanceof Il?l=o.headers:l=new Il(o.headers);let c;o.params&&(o.params instanceof zc?c=o.params:c=new zc({fromObject:o.params})),r=new cg(n,i,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:c,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache,keepalive:o.keepalive,priority:o.priority,cache:o.cache,mode:o.mode,redirect:o.redirect,credentials:o.credentials,referrer:o.referrer,referrerPolicy:o.referrerPolicy,integrity:o.integrity,timeout:o.timeout})}let s=et(r).pipe(Pm(l=>this.handler.handle(l)));if(n instanceof cg||o.observe==="events")return s;let a=s.pipe(zt(l=>l instanceof CC));switch(o.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return a.pipe(tt(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new _e(2806,!1);return l.body}));case"blob":return a.pipe(tt(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new _e(2807,!1);return l.body}));case"text":return a.pipe(tt(l=>{if(l.body!==null&&typeof l.body!="string")throw new _e(2808,!1);return l.body}));case"json":default:return a.pipe(tt(l=>l.body))}case"response":return a;default:throw new _e(2809,!1)}}delete(n,i={}){return this.request("DELETE",n,i)}get(n,i={}){return this.request("GET",n,i)}head(n,i={}){return this.request("HEAD",n,i)}jsonp(n,i){return this.request("JSONP",n,{params:new zc().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,i={}){return this.request("OPTIONS",n,i)}patch(n,i,o={}){return this.request("PATCH",n,SB(o,i))}post(n,i,o={}){return this.request("POST",n,SB(o,i))}put(n,i,o={}){return this.request("PUT",n,SB(o,i))}static \u0275fac=function(i){return new(i||e)(Ze(MB))};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var xSe=new q("",{factory:()=>!0}),SSe="XSRF-TOKEN",ESe=new q("",{providedIn:"root",factory:()=>SSe}),DSe="X-XSRF-TOKEN",kSe=new q("",{providedIn:"root",factory:()=>DSe}),ISe=(()=>{class e{cookieName=k(ESe);doc=k(Je);lastCookieString="";lastToken=null;parseCount=0;getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=gC(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),JQ=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:function(i){let o=null;return i?o=new(i||e):o=Ze(ISe),o},providedIn:"root"})}return e})();function MSe(e,t){if(!k(xSe)||e.method==="GET"||e.method==="HEAD")return t(e);try{let o=k(lg).href,{origin:r}=new URL(o),{origin:s}=new URL(e.url,r);if(r!==s)return t(e)}catch{return t(e)}let n=k(JQ).getToken(),i=k(kSe);return n!=null&&!e.headers.has(i)&&(e=e.clone({headers:e.headers.set(i,n)})),t(e)}var RB=(function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e})(RB||{});function RSe(e,t){return{\u0275kind:e,\u0275providers:t}}function TB(...e){let t=[iu,ek,{provide:MB,useExisting:ek},{provide:IB,useFactory:()=>k(_Se,{optional:!0})??k(EB)},{provide:DB,useValue:MSe,multi:!0}];for(let n of e)t.push(...n.\u0275providers);return Ic(t)}var WQ=new q("");function PB(){return RSe(RB.LegacyInterceptors,[{provide:WQ,useFactory:wSe},{provide:DB,useExisting:WQ,multi:!0}])}var eJ=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(i){return new(i||e)(Ze(Je))};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var wC=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:function(i){let o=null;return i?o=new(i||e):o=Ze(TSe),o},providedIn:"root"})}return e})(),TSe=(()=>{class e extends wC{_doc;constructor(n){super(),this._doc=n}sanitize(n,i){if(i==null)return null;switch(n){case mo.NONE:return i;case mo.HTML:return Xd(i,"HTML")?Dl(i):x3(this._doc,String(i)).toString();case mo.STYLE:return Xd(i,"Style")?Dl(i):i;case mo.SCRIPT:if(Xd(i,"Script"))return Dl(i);throw new _e(5200,!1);case mo.URL:return Xd(i,"URL")?Dl(i):Gb(String(i));case mo.RESOURCE_URL:if(Xd(i,"ResourceURL"))return Dl(i);throw new _e(5201,!1);default:throw new _e(5202,!1)}}bypassSecurityTrustHtml(n){return _3(n)}bypassSecurityTrustStyle(n){return y3(n)}bypassSecurityTrustScript(n){return b3(n)}bypassSecurityTrustUrl(n){return C3(n)}bypassSecurityTrustResourceUrl(n){return w3(n)}static \u0275fac=function(i){return new(i||e)(Ze(Je))};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Lt="primary",AC=Symbol("RouteTitle"),NB=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function gg(e){return new NB(e)}function PSe(e,t,n){let i=n.path.split("/");if(i.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||i.length<e.length))return null;let o={};for(let r=0;r<i.length;r++){let s=i[r],a=e[r];if(s[0]===":")o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,i.length),posParams:o}}function sk(e){return new Promise((t,n)=>{e.pipe(ul()).subscribe({next:i=>t(i),error:i=>n(i)})})}function ASe(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Ml(e[n],t[n]))return!1;return!0}function Ml(e,t){let n=e?BB(e):void 0,i=t?BB(t):void 0;if(!n||!i||n.length!=i.length)return!1;let o;for(let r=0;r<n.length;r++)if(o=n[r],!dJ(e[o],t[o]))return!1;return!0}function BB(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function dJ(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),i=[...t].sort();return n.every((o,r)=>i[r]===o)}else return e===t}function uJ(e){return e.length>0?e[e.length-1]:null}function lp(e){return lb(e)?e:Fc(e)?Ti(Promise.resolve(e)):et(e)}function hJ(e){return lb(e)?sk(e):Promise.resolve(e)}var OSe={exact:fJ,subset:mJ},pJ={exact:FSe,subset:LSe,ignored:()=>!0};function nJ(e,t,n){return OSe[n.paths](e.root,t.root,n.matrixParams)&&pJ[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function FSe(e,t){return Ml(e,t)}function fJ(e,t,n){if(!rp(e.segments,t.segments)||!ik(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!e.children[i]||!fJ(e.children[i],t.children[i],n))return!1;return!0}function LSe(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>dJ(e[n],t[n]))}function mJ(e,t,n){return gJ(e,t,t.segments,n)}function gJ(e,t,n,i){if(e.segments.length>n.length){let o=e.segments.slice(0,n.length);return!(!rp(o,n)||t.hasChildren()||!ik(o,n,i))}else if(e.segments.length===n.length){if(!rp(e.segments,n)||!ik(e.segments,n,i))return!1;for(let o in t.children)if(!e.children[o]||!mJ(e.children[o],t.children[o],i))return!1;return!0}else{let o=n.slice(0,e.segments.length),r=n.slice(e.segments.length);return!rp(e.segments,o)||!ik(e.segments,o,i)||!e.children[Lt]?!1:gJ(e.children[Lt],t,r,i)}}function ik(e,t,n){return t.every((i,o)=>pJ[n](e[o].parameters,i.parameters))}var Rl=class{root;queryParams;fragment;_queryParamMap;constructor(t=new An([],{}),n={},i=null){this.root=t,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=gg(this.queryParams),this._queryParamMap}toString(){return zSe.serialize(this)}},An=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ok(this)}},op=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=gg(this.parameters),this._parameterMap}toString(){return _J(this)}};function NSe(e,t){return rp(e,t)&&e.every((n,i)=>Ml(n.parameters,t[i].parameters))}function rp(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.path===t[i].path)}function BSe(e,t){let n=[];return Object.entries(e.children).forEach(([i,o])=>{i===Lt&&(n=n.concat(t(o,i)))}),Object.entries(e.children).forEach(([i,o])=>{i!==Lt&&(n=n.concat(t(o,i)))}),n}var vk=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:()=>new sp,providedIn:"root"})}return e})(),sp=class{parse(t){let n=new VB(t);return new Rl(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${xC(t.root,!0)}`,i=$Se(t.queryParams),o=typeof t.fragment=="string"?`#${VSe(t.fragment)}`:"";return`${n}${i}${o}`}},zSe=new sp;function ok(e){return e.segments.map(t=>_J(t)).join("/")}function xC(e,t){if(!e.hasChildren())return ok(e);if(t){let n=e.children[Lt]?xC(e.children[Lt],!1):"",i=[];return Object.entries(e.children).forEach(([o,r])=>{o!==Lt&&i.push(`${o}:${xC(r,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=BSe(e,(i,o)=>o===Lt?[xC(e.children[Lt],!1)]:[`${o}:${xC(i,!1)}`]);return Object.keys(e.children).length===1&&e.children[Lt]!=null?`${ok(e)}/${n[0]}`:`${ok(e)}/(${n.join("//")})`}}function vJ(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function tk(e){return vJ(e).replace(/%3B/gi,";")}function VSe(e){return encodeURI(e)}function zB(e){return vJ(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rk(e){return decodeURIComponent(e)}function iJ(e){return rk(e.replace(/\+/g,"%20"))}function _J(e){return`${zB(e.path)}${HSe(e.parameters)}`}function HSe(e){return Object.entries(e).map(([t,n])=>`;${zB(t)}=${zB(n)}`).join("")}function $Se(e){let t=Object.entries(e).map(([n,i])=>Array.isArray(i)?i.map(o=>`${tk(n)}=${tk(o)}`).join("&"):`${tk(n)}=${tk(i)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var jSe=/^[^\/()?;#]+/;function AB(e){let t=e.match(jSe);return t?t[0]:""}var GSe=/^[^\/()?;=#]+/;function USe(e){let t=e.match(GSe);return t?t[0]:""}var WSe=/^[^=?&#]+/;function qSe(e){let t=e.match(WSe);return t?t[0]:""}var KSe=/^[^&#]+/;function ZSe(e){let t=e.match(KSe);return t?t[0]:""}var VB=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new An([],{}):new An([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(i[Lt]=new An(t,n)),i}parseSegment(){let t=AB(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new _e(4009,!1);return this.capture(t),new op(rk(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=USe(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let o=AB(this.remaining);o&&(i=o,this.capture(i))}t[rk(n)]=rk(i)}parseQueryParam(t){let n=qSe(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let s=ZSe(this.remaining);s&&(i=s,this.capture(i))}let o=iJ(n),r=iJ(i);if(t.hasOwnProperty(o)){let s=t[o];Array.isArray(s)||(s=[s],t[o]=s),s.push(r)}else t[o]=r}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=AB(this.remaining),o=this.remaining[i.length];if(o!=="/"&&o!==")"&&o!==";")throw new _e(4010,!1);let r;i.indexOf(":")>-1?(r=i.slice(0,i.indexOf(":")),this.capture(r),this.capture(":")):t&&(r=Lt);let s=this.parseChildren();n[r??Lt]=Object.keys(s).length===1&&s[Lt]?s[Lt]:new An([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new _e(4011,!1)}};function yJ(e){return e.segments.length>0?new An([],{[Lt]:e}):e}function bJ(e){let t={};for(let[i,o]of Object.entries(e.children)){let r=bJ(o);if(i===Lt&&r.segments.length===0&&r.hasChildren())for(let[s,a]of Object.entries(r.children))t[s]=a;else(r.segments.length>0||r.hasChildren())&&(t[i]=r)}let n=new An(e.segments,t);return YSe(n)}function YSe(e){if(e.numberOfChildren===1&&e.children[Lt]){let t=e.children[Lt];return new An(e.segments.concat(t.segments),t.children)}return e}function vg(e){return e instanceof Rl}function QSe(e,t,n=null,i=null,o=new sp){let r=CJ(e);return wJ(r,t,n,i,o)}function CJ(e){let t;function n(r){let s={};for(let l of r.children){let c=n(l);s[l.outlet]=c}let a=new An(r.url,s);return r===e&&(t=a),a}let i=n(e.root),o=yJ(i);return t??o}function wJ(e,t,n,i,o){let r=e;for(;r.parent;)r=r.parent;if(t.length===0)return OB(r,r,r,n,i,o);let s=JSe(t);if(s.toRoot())return OB(r,r,new An([],{}),n,i,o);let a=XSe(s,r,e),l=a.processChildren?EC(a.segmentGroup,a.index,s.commands):SJ(a.segmentGroup,a.index,s.commands);return OB(r,a.segmentGroup,l,n,i,o)}function ak(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function IC(e){return typeof e=="object"&&e!=null&&e.outlets}function oJ(e,t,n){e||="\u0275";let i=new Rl;return i.queryParams={[e]:t},n.parse(n.serialize(i)).queryParams[e]}function OB(e,t,n,i,o,r){let s={};for(let[c,u]of Object.entries(i??{}))s[c]=Array.isArray(u)?u.map(h=>oJ(c,h,r)):oJ(c,u,r);let a;e===t?a=n:a=xJ(e,t,n);let l=yJ(bJ(a));return new Rl(l,s,o)}function xJ(e,t,n){let i={};return Object.entries(e.children).forEach(([o,r])=>{r===t?i[o]=n:i[o]=xJ(r,t,n)}),new An(e.segments,i)}var lk=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,i){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=i,t&&i.length>0&&ak(i[0]))throw new _e(4003,!1);let o=i.find(IC);if(o&&o!==uJ(i))throw new _e(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function JSe(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new lk(!0,0,e);let t=0,n=!1,i=e.reduce((o,r,s)=>{if(typeof r=="object"&&r!=null){if(r.outlets){let a={};return Object.entries(r.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...o,{outlets:a}]}if(r.segmentPath)return[...o,r.segmentPath]}return typeof r!="string"?[...o,r]:s===0?(r.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?t++:a!=""&&o.push(a))}),o):[...o,r]},[]);return new lk(n,t,i)}var pg=class{segmentGroup;processChildren;index;constructor(t,n,i){this.segmentGroup=t,this.processChildren=n,this.index=i}};function XSe(e,t,n){if(e.isAbsolute)return new pg(t,!0,0);if(!n)return new pg(t,!1,NaN);if(n.parent===null)return new pg(n,!0,0);let i=ak(e.commands[0])?0:1,o=n.segments.length-1+i;return eEe(n,o,e.numberOfDoubleDots)}function eEe(e,t,n){let i=e,o=t,r=n;for(;r>o;){if(r-=o,i=i.parent,!i)throw new _e(4005,!1);o=i.segments.length}return new pg(i,!1,o-r)}function tEe(e){return IC(e[0])?e[0].outlets:{[Lt]:e}}function SJ(e,t,n){if(e??=new An([],{}),e.segments.length===0&&e.hasChildren())return EC(e,t,n);let i=nEe(e,t,n),o=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){let r=new An(e.segments.slice(0,i.pathIndex),{});return r.children[Lt]=new An(e.segments.slice(i.pathIndex),e.children),EC(r,0,o)}else return i.match&&o.length===0?new An(e.segments,{}):i.match&&!e.hasChildren()?HB(e,t,n):i.match?EC(e,0,o):HB(e,t,n)}function EC(e,t,n){if(n.length===0)return new An(e.segments,{});{let i=tEe(n),o={};if(Object.keys(i).some(r=>r!==Lt)&&e.children[Lt]&&e.numberOfChildren===1&&e.children[Lt].segments.length===0){let r=EC(e.children[Lt],t,n);return new An(e.segments,r.children)}return Object.entries(i).forEach(([r,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[r]=SJ(e.children[r],t,s))}),Object.entries(e.children).forEach(([r,s])=>{i[r]===void 0&&(o[r]=s)}),new An(e.segments,o)}}function nEe(e,t,n){let i=0,o=t,r={match:!1,pathIndex:0,commandIndex:0};for(;o<e.segments.length;){if(i>=n.length)return r;let s=e.segments[o],a=n[i];if(IC(a))break;let l=`${a}`,c=i<n.length-1?n[i+1]:null;if(o>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!sJ(l,c,s))return r;i+=2}else{if(!sJ(l,{},s))return r;i++}o++}return{match:!0,pathIndex:o,commandIndex:i}}function HB(e,t,n){let i=e.segments.slice(0,t),o=0;for(;o<n.length;){let r=n[o];if(IC(r)){let l=iEe(r.outlets);return new An(i,l)}if(o===0&&ak(n[0])){let l=e.segments[t];i.push(new op(l.path,rJ(n[0]))),o++;continue}let s=IC(r)?r.outlets[Lt]:`${r}`,a=o<n.length-1?n[o+1]:null;s&&a&&ak(a)?(i.push(new op(s,rJ(a))),o+=2):(i.push(new op(s,{})),o++)}return new An(i,{})}function iEe(e){let t={};return Object.entries(e).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[n]=HB(new An([],{}),0,i))}),t}function rJ(e){let t={};return Object.entries(e).forEach(([n,i])=>t[n]=`${i}`),t}function sJ(e,t,n){return e==n.path&&Ml(t,n.parameters)}var DC="imperative",Bo=(function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e})(Bo||{}),Zs=class{id;url;constructor(t,n){this.id=t,this.url=n}},_g=class extends Zs{type=Bo.NavigationStart;navigationTrigger;restoredState;constructor(t,n,i="imperative",o=null){super(t,n),this.navigationTrigger=i,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ou=class extends Zs{urlAfterRedirects;type=Bo.NavigationEnd;constructor(t,n,i){super(t,n),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Gr=(function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e[e.Aborted=4]="Aborted",e})(Gr||{}),ck=(function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e})(ck||{}),Vc=class extends Zs{reason;code;type=Bo.NavigationCancel;constructor(t,n,i,o){super(t,n),this.reason=i,this.code=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ru=class extends Zs{reason;code;type=Bo.NavigationSkipped;constructor(t,n,i,o){super(t,n),this.reason=i,this.code=o}},MC=class extends Zs{error;target;type=Bo.NavigationError;constructor(t,n,i,o){super(t,n),this.error=i,this.target=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},dk=class extends Zs{urlAfterRedirects;state;type=Bo.RoutesRecognized;constructor(t,n,i,o){super(t,n),this.urlAfterRedirects=i,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$B=class extends Zs{urlAfterRedirects;state;type=Bo.GuardsCheckStart;constructor(t,n,i,o){super(t,n),this.urlAfterRedirects=i,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jB=class extends Zs{urlAfterRedirects;state;shouldActivate;type=Bo.GuardsCheckEnd;constructor(t,n,i,o,r){super(t,n),this.urlAfterRedirects=i,this.state=o,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},GB=class extends Zs{urlAfterRedirects;state;type=Bo.ResolveStart;constructor(t,n,i,o){super(t,n),this.urlAfterRedirects=i,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},UB=class extends Zs{urlAfterRedirects;state;type=Bo.ResolveEnd;constructor(t,n,i,o){super(t,n),this.urlAfterRedirects=i,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},WB=class{route;type=Bo.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},qB=class{route;type=Bo.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},KB=class{snapshot;type=Bo.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ZB=class{snapshot;type=Bo.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},YB=class{snapshot;type=Bo.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},QB=class{snapshot;type=Bo.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var RC=class{},yg=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function oEe(e){return!(e instanceof RC)&&!(e instanceof yg)}function rEe(e,t){return e.providers&&!e._injector&&(e._injector=Jb(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Aa(e){return e.outlet||Lt}function sEe(e,t){let n=e.filter(i=>Aa(i)===t);return n.push(...e.filter(i=>Aa(i)!==t)),n}function Cg(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var JB=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Cg(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new OC(this.rootInjector)}},OC=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,i){let o=this.getOrCreateContext(n);o.outlet=i,this.contexts.set(n,o)}onChildOutletDestroyed(n){let i=this.getContext(n);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let i=this.getContext(n);return i||(i=new JB(this.rootInjector),this.contexts.set(n,i)),i}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(i){return new(i||e)(Ze(Qn))};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),uk=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=XB(t,this._root);return n?n.children.map(i=>i.value):[]}firstChild(t){let n=XB(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=ez(t,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==t)}pathFromRoot(t){return ez(t,this._root).map(n=>n.value)}};function XB(e,t){if(e===t.value)return t;for(let n of t.children){let i=XB(e,n);if(i)return i}return null}function ez(e,t){if(e===t.value)return[t];for(let n of t.children){let i=ez(e,n);if(i.length)return i.unshift(t),i}return[]}var ws=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function hg(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var hk=class extends uk{snapshot;constructor(t,n){super(t),this.snapshot=n,az(this,t)}toString(){return this.snapshot.toString()}};function EJ(e){let t=aEe(e),n=new kn([new op("",{})]),i=new kn({}),o=new kn({}),r=new kn({}),s=new kn(""),a=new ap(n,i,r,s,o,Lt,e,t.root);return a.snapshot=t.root,new hk(new ws(a,[]),t)}function aEe(e){let t={},n={},i={},r=new fg([],t,i,"",n,Lt,e,null,{});return new fk("",new ws(r,[]))}var ap=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,i,o,r,s,a,l){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=o,this.dataSubject=r,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(tt(c=>c[AC]))??et(void 0),this.url=t,this.params=n,this.queryParams=i,this.fragment=o,this.data=r}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(tt(t=>gg(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(tt(t=>gg(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function pk(e,t,n="emptyOnly"){let i,{routeConfig:o}=e;return t!==null&&(n==="always"||o?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:g(g({},t.params),e.params),data:g(g({},t.data),e.data),resolve:g(g(g(g({},e.data),t.data),o?.data),e._resolvedData)}:i={params:g({},e.params),data:g({},e.data),resolve:g(g({},e.data),e._resolvedData??{})},o&&kJ(o)&&(i.resolve[AC]=o.title),i}var fg=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[AC]}constructor(t,n,i,o,r,s,a,l,c){this.url=t,this.params=n,this.queryParams=i,this.fragment=o,this.data=r,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=gg(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=gg(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},fk=class extends uk{url;constructor(t,n){super(n),this.url=t,az(this,n)}toString(){return DJ(this._root)}};function az(e,t){t.value._routerState=e,t.children.forEach(n=>az(e,n))}function DJ(e){let t=e.children.length>0?` { ${e.children.map(DJ).join(", ")} } `:"";return`${e.value}${t}`}function FB(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Ml(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Ml(t.params,n.params)||e.paramsSubject.next(n.params),ASe(t.url,n.url)||e.urlSubject.next(n.url),Ml(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function tz(e,t){let n=Ml(e.params,t.params)&&NSe(e.url,t.url),i=!e.parent!=!t.parent;return n&&!i&&(!e.parent||tz(e.parent,t.parent))}function kJ(e){return typeof e.title=="string"||e.title===null}var lEe=new q(""),IJ=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Lt;activateEvents=new V;deactivateEvents=new V;attachEvents=new V;detachEvents=new V;routerOutletData=oQ();parentContexts=k(OC);location=k(li);changeDetector=k(dn);inputBinder=k(_k,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:i,previousValue:o}=n.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _e(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _e(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _e(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,i){this.activated=n,this._activatedRoute=i,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,i){if(this.isActivated)throw new _e(4013,!1);this._activatedRoute=n;let o=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new nz(n,a,o.injector,this.routerOutletData);this.activated=o.createComponent(s,{index:o.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[sn]})}return e})(),nz=class{route;childContexts;parent;outletData;constructor(t,n,i,o){this.route=t,this.childContexts=n,this.parent=i,this.outletData=o}get(t,n){return t===ap?this.route:t===OC?this.childContexts:t===lEe?this.outletData:this.parent.get(t,n)}},_k=new q("");var MJ=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275cmp=pe({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,o){i&1&&Ae(0,"router-outlet")},dependencies:[IJ],encapsulation:2})}return e})();function lz(e){let t=e.children&&e.children.map(lz),n=t?x(g({},e),{children:t}):g({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Lt&&(n.component=MJ),n}function cEe(e,t,n){let i=TC(e,t._root,n?n._root:void 0);return new hk(i,t)}function TC(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=t.value;let o=dEe(e,t,n);return new ws(i,o)}else{if(e.shouldAttach(t.value)){let r=e.retrieve(t.value);if(r!==null){let s=r.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>TC(e,a)),s}}let i=uEe(t.value),o=t.children.map(r=>TC(e,r));return new ws(i,o)}}function dEe(e,t,n){return t.children.map(i=>{for(let o of n.children)if(e.shouldReuseRoute(i.value,o.value.snapshot))return TC(e,i,o);return TC(e,i)})}function uEe(e){return new ap(new kn(e.url),new kn(e.params),new kn(e.queryParams),new kn(e.fragment),new kn(e.data),e.outlet,e.component,e)}var PC=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},RJ="ngNavigationCancelingError";function mk(e,t){let{redirectTo:n,navigationBehaviorOptions:i}=vg(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,o=TJ(!1,Gr.Redirect);return o.url=n,o.navigationBehaviorOptions=i,o}function TJ(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[RJ]=!0,n.cancellationCode=t,n}function hEe(e){return PJ(e)&&vg(e.url)}function PJ(e){return!!e&&e[RJ]}var pEe=(e,t,n,i)=>tt(o=>(new iz(t,o.targetRouterState,o.currentRouterState,n,i).activate(e),o)),iz=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,i,o,r){this.routeReuseStrategy=t,this.futureState=n,this.currState=i,this.forwardEvent=o,this.inputBindingEnabled=r}activate(t){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,t),FB(this.futureState.root),this.activateChildRoutes(n,i,t)}deactivateChildRoutes(t,n,i){let o=hg(n);t.children.forEach(r=>{let s=r.value.outlet;this.deactivateRoutes(r,o[s],i),delete o[s]}),Object.values(o).forEach(r=>{this.deactivateRouteAndItsChildren(r,i)})}deactivateRoutes(t,n,i){let o=t.value,r=n?n.value:null;if(o===r)if(o.component){let s=i.getContext(o.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,i);else r&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let i=n.getContext(t.value.outlet),o=i&&t.value.component?i.children:n,r=hg(t);for(let s of Object.values(r))this.deactivateRouteAndItsChildren(s,o);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let i=n.getContext(t.value.outlet),o=i&&t.value.component?i.children:n,r=hg(t);for(let s of Object.values(r))this.deactivateRouteAndItsChildren(s,o);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,n,i){let o=hg(n);t.children.forEach(r=>{this.activateRoutes(r,o[r.value.outlet],i),this.forwardEvent(new QB(r.value.snapshot))}),t.children.length&&this.forwardEvent(new ZB(t.value.snapshot))}activateRoutes(t,n,i){let o=t.value,r=n?n.value:null;if(FB(o),o===r)if(o.component){let s=i.getOrCreateContext(o.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,i);else if(o.component){let s=i.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),FB(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=o,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,i)}},gk=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},mg=class{component;route;constructor(t,n){this.component=t,this.route=n}};function fEe(e,t,n){let i=e._root,o=t?t._root:null;return SC(i,o,n,[i.value])}function mEe(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function wg(e,t){let n=Symbol(),i=t.get(e,n);return i===n?typeof e=="function"&&!TL(e)?e:t.get(e):i}function SC(e,t,n,i,o={canDeactivateChecks:[],canActivateChecks:[]}){let r=hg(t);return e.children.forEach(s=>{gEe(s,r[s.value.outlet],n,i.concat([s.value]),o),delete r[s.value.outlet]}),Object.entries(r).forEach(([s,a])=>kC(a,n.getContext(s),o)),o}function gEe(e,t,n,i,o={canDeactivateChecks:[],canActivateChecks:[]}){let r=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&r.routeConfig===s.routeConfig){let l=vEe(s,r,r.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new gk(i)):(r.data=s.data,r._resolvedData=s._resolvedData),r.component?SC(e,t,a?a.children:null,i,o):SC(e,t,n,i,o),l&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new mg(a.outlet.component,s))}else s&&kC(t,a,o),o.canActivateChecks.push(new gk(i)),r.component?SC(e,null,a?a.children:null,i,o):SC(e,null,n,i,o);return o}function vEe(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!rp(e.url,t.url);case"pathParamsOrQueryParamsChange":return!rp(e.url,t.url)||!Ml(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tz(e,t)||!Ml(e.queryParams,t.queryParams);case"paramsChange":default:return!tz(e,t)}}function kC(e,t,n){let i=hg(e),o=e.value;Object.entries(i).forEach(([r,s])=>{o.component?t?kC(s,t.children.getContext(r),n):kC(s,null,n):kC(s,t,n)}),o.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new mg(t.outlet.component,o)):n.canDeactivateChecks.push(new mg(null,o)):n.canDeactivateChecks.push(new mg(null,o))}function FC(e){return typeof e=="function"}function _Ee(e){return typeof e=="boolean"}function yEe(e){return e&&FC(e.canLoad)}function bEe(e){return e&&FC(e.canActivate)}function CEe(e){return e&&FC(e.canActivateChild)}function wEe(e){return e&&FC(e.canDeactivate)}function xEe(e){return e&&FC(e.canMatch)}function AJ(e){return e instanceof Rh||e?.name==="EmptyError"}var nk=Symbol("INITIAL_VALUE");function bg(){return eo(e=>cb(e.map(t=>t.pipe(ri(1),Pi(nk)))).pipe(tt(t=>{for(let n of t)if(n!==!0){if(n===nk)return nk;if(n===!1||SEe(n))return n}return!0}),zt(t=>t!==nk),ri(1)))}function SEe(e){return vg(e)||e instanceof PC}function OJ(e){return e.aborted?et(void 0).pipe(ri(1)):new yt(t=>{let n=()=>{t.next(),t.complete()};return e.addEventListener("abort",n),()=>e.removeEventListener("abort",n)})}function FJ(e){return Vt(OJ(e))}function EEe(e,t){return Po(n=>{let{targetSnapshot:i,currentSnapshot:o,guards:{canActivateChecks:r,canDeactivateChecks:s}}=n;return s.length===0&&r.length===0?et(x(g({},n),{guardsResult:!0})):DEe(s,i,o,e).pipe(Po(a=>a&&_Ee(a)?kEe(i,r,e,t):et(a)),tt(a=>x(g({},n),{guardsResult:a})))})}function DEe(e,t,n,i){return Ti(e).pipe(Po(o=>PEe(o.component,o.route,n,t,i)),ul(o=>o!==!0,!0))}function kEe(e,t,n,i){return Ti(t).pipe(Pm(o=>Hd(MEe(o.route.parent,i),IEe(o.route,i),TEe(e,o.path,n),REe(e,o.route,n))),ul(o=>o!==!0,!0))}function IEe(e,t){return e!==null&&t&&t(new YB(e)),et(!0)}function MEe(e,t){return e!==null&&t&&t(new KB(e)),et(!0)}function REe(e,t,n){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return et(!0);let o=i.map(r=>xc(()=>{let s=Cg(t)??n,a=wg(r,s),l=bEe(a)?a.canActivate(t,e):Fo(s,()=>a(t,e));return lp(l).pipe(ul())}));return et(o).pipe(bg())}function TEe(e,t,n){let i=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(s=>mEe(s)).filter(s=>s!==null).map(s=>xc(()=>{let a=s.guards.map(l=>{let c=Cg(s.node)??n,u=wg(l,c),h=CEe(u)?u.canActivateChild(i,e):Fo(c,()=>u(i,e));return lp(h).pipe(ul())});return et(a).pipe(bg())}));return et(r).pipe(bg())}function PEe(e,t,n,i,o){let r=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!r||r.length===0)return et(!0);let s=r.map(a=>{let l=Cg(t)??o,c=wg(a,l),u=wEe(c)?c.canDeactivate(e,t,n,i):Fo(l,()=>c(e,t,n,i));return lp(u).pipe(ul())});return et(s).pipe(bg())}function AEe(e,t,n,i,o){let r=t.canLoad;if(r===void 0||r.length===0)return et(!0);let s=r.map(a=>{let l=wg(a,e),c=yEe(l)?l.canLoad(t,n):Fo(e,()=>l(t,n)),u=lp(c);return o?u.pipe(FJ(o)):u});return et(s).pipe(bg(),LJ(i))}function LJ(e){return dL(wi(t=>{if(typeof t!="boolean")throw mk(e,t)}),tt(t=>t===!0))}function OEe(e,t,n,i,o){let r=t.canMatch;if(!r||r.length===0)return et(!0);let s=r.map(a=>{let l=wg(a,e),c=xEe(l)?l.canMatch(t,n):Fo(e,()=>l(t,n)),u=lp(c);return o?u.pipe(FJ(o)):u});return et(s).pipe(bg(),LJ(i))}var ip=class NJ extends Error{segmentGroup;constructor(t){super(),this.segmentGroup=t||null,Object.setPrototypeOf(this,NJ.prototype)}},oz=class BJ extends Error{urlTree;constructor(t){super(),this.urlTree=t,Object.setPrototypeOf(this,BJ.prototype)}};function FEe(e){throw new _e(4e3,!1)}function LEe(e){throw TJ(!1,Gr.GuardRejected)}var NEe=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){return E(this,null,function*(){let i=[],o=n.root;for(;;){if(i=i.concat(o.segments),o.numberOfChildren===0)return i;if(o.numberOfChildren>1||!o.children[Lt])throw FEe(`${t.redirectTo}`);o=o.children[Lt]}})}applyRedirectCommands(t,n,i,o,r){return E(this,null,function*(){let s=yield BEe(n,o,r);if(s instanceof Rl)throw new oz(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),t,i);if(s[0]==="/")throw new oz(a);return a})}applyRedirectCreateUrlTree(t,n,i,o){let r=this.createSegmentGroup(t,n.root,i,o);return new Rl(r,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let i={};return Object.entries(t).forEach(([o,r])=>{if(typeof r=="string"&&r[0]===":"){let a=r.substring(1);i[o]=n[a]}else i[o]=r}),i}createSegmentGroup(t,n,i,o){let r=this.createSegments(t,n.segments,i,o),s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(t,l,i,o)}),new An(r,s)}createSegments(t,n,i,o){return n.map(r=>r.path[0]===":"?this.findPosParam(t,r,o):this.findOrReturn(r,i))}findPosParam(t,n,i){let o=i[n.path.substring(1)];if(!o)throw new _e(4001,!1);return o}findOrReturn(t,n){let i=0;for(let o of n){if(o.path===t.path)return n.splice(i),o;i++}return t}};function BEe(e,t,n){if(typeof e=="string")return Promise.resolve(e);let i=e,{queryParams:o,fragment:r,routeConfig:s,url:a,outlet:l,params:c,data:u,title:h}=t;return sk(lp(Fo(n,()=>i({params:c,data:u,queryParams:o,fragment:r,routeConfig:s,url:a,outlet:l,title:h}))))}var rz={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zEe(e,t,n,i,o,r){let s=zJ(e,t,n);return s.matched?(i=rEe(t,i),OEe(i,t,n,o,r).pipe(tt(a=>a===!0?s:g({},rz)))):et(s)}function zJ(e,t,n){if(t.path==="**")return VEe(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?g({},rz):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let o=(t.matcher||PSe)(n,e,t);if(!o)return g({},rz);let r={};Object.entries(o.posParams??{}).forEach(([a,l])=>{r[a]=l.path});let s=o.consumed.length>0?g(g({},r),o.consumed[o.consumed.length-1].parameters):r;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function VEe(e){return{matched:!0,parameters:e.length>0?uJ(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function aJ(e,t,n,i){return n.length>0&&jEe(e,n,i)?{segmentGroup:new An(t,$Ee(i,new An(n,e.children))),slicedSegments:[]}:n.length===0&&GEe(e,n,i)?{segmentGroup:new An(e.segments,HEe(e,n,i,e.children)),slicedSegments:n}:{segmentGroup:new An(e.segments,e.children),slicedSegments:n}}function HEe(e,t,n,i){let o={};for(let r of n)if(yk(e,t,r)&&!i[Aa(r)]){let s=new An([],{});o[Aa(r)]=s}return g(g({},i),o)}function $Ee(e,t){let n={};n[Lt]=t;for(let i of e)if(i.path===""&&Aa(i)!==Lt){let o=new An([],{});n[Aa(i)]=o}return n}function jEe(e,t,n){return n.some(i=>yk(e,t,i)&&Aa(i)!==Lt)}function GEe(e,t,n){return n.some(i=>yk(e,t,i))}function yk(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function UEe(e,t,n){return t.length===0&&!e.children[n]}var WEe=class{};function qEe(e,t,n,i,o,r,s="emptyOnly",a){return E(this,null,function*(){return new ZEe(e,t,n,i,o,s,r,a).recognize()})}var KEe=31,ZEe=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,i,o,r,s,a,l){this.injector=t,this.configLoader=n,this.rootComponentType=i,this.config=o,this.urlTree=r,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=l,this.applyRedirects=new NEe(this.urlSerializer,this.urlTree)}noMatchError(t){return new _e(4002,`'${t.segmentGroup}'`)}recognize(){return E(this,null,function*(){let t=aJ(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:i}=yield this.match(t),o=new ws(i,n),r=new fk("",o),s=QSe(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,r.url=this.urlSerializer.serialize(s),{state:r,tree:s}})}match(t){return E(this,null,function*(){let n=new fg([],Object.freeze({}),Object.freeze(g({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Lt,this.rootComponentType,null,{});try{return{children:yield this.processSegmentGroup(this.injector,this.config,t,Lt,n),rootSnapshot:n}}catch(i){if(i instanceof oz)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof ip?this.noMatchError(i):i}})}processSegmentGroup(t,n,i,o,r){return E(this,null,function*(){if(i.segments.length===0&&i.hasChildren())return this.processChildren(t,n,i,r);let s=yield this.processSegment(t,n,i,i.segments,o,!0,r);return s instanceof ws?[s]:[]})}processChildren(t,n,i,o){return E(this,null,function*(){let r=[];for(let l of Object.keys(i.children))l==="primary"?r.unshift(l):r.push(l);let s=[];for(let l of r){let c=i.children[l],u=sEe(n,l),h=yield this.processSegmentGroup(t,u,c,l,o);s.push(...h)}let a=VJ(s);return YEe(a),a})}processSegment(t,n,i,o,r,s,a){return E(this,null,function*(){for(let l of n)try{return yield this.processSegmentAgainstRoute(l._injector??t,n,l,i,o,r,s,a)}catch(c){if(c instanceof ip||AJ(c))continue;throw c}if(UEe(i,o,r))return new WEe;throw new ip(i)})}processSegmentAgainstRoute(t,n,i,o,r,s,a,l){return E(this,null,function*(){if(Aa(i)!==s&&(s===Lt||!yk(o,r,i)))throw new ip(o);if(i.redirectTo===void 0)return this.matchSegmentAgainstRoute(t,o,i,r,s,l);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(t,o,n,i,r,s,l);throw new ip(o)})}expandSegmentAgainstRouteUsingRedirect(t,n,i,o,r,s,a){return E(this,null,function*(){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:h,remainingSegments:f}=zJ(n,o,r);if(!l)throw new ip(n);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>KEe&&(this.allowRedirects=!1));let m=new fg(r,c,Object.freeze(g({},this.urlTree.queryParams)),this.urlTree.fragment,lJ(o),Aa(o),o.component??o._loadedComponent??null,o,cJ(o)),_=pk(m,a,this.paramsInheritanceStrategy);if(m.params=Object.freeze(_.params),m.data=Object.freeze(_.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let y=yield this.applyRedirects.applyRedirectCommands(u,o.redirectTo,h,m,t),w=yield this.applyRedirects.lineralizeSegments(o,y);return this.processSegment(t,i,n,w.concat(f),s,!1,a)})}matchSegmentAgainstRoute(t,n,i,o,r,s){return E(this,null,function*(){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=yield sk(zEe(n,i,o,t,this.urlSerializer,this.abortSignal));if(i.path==="**"&&(n.children={}),!a?.matched)throw new ip(n);t=i._injector??t;let{routes:l}=yield this.getChildConfig(t,i,o),c=i._loadedInjector??t,{parameters:u,consumedSegments:h,remainingSegments:f}=a,m=new fg(h,u,Object.freeze(g({},this.urlTree.queryParams)),this.urlTree.fragment,lJ(i),Aa(i),i.component??i._loadedComponent??null,i,cJ(i)),_=pk(m,s,this.paramsInheritanceStrategy);m.params=Object.freeze(_.params),m.data=Object.freeze(_.data);let{segmentGroup:y,slicedSegments:w}=aJ(n,h,f,l);if(w.length===0&&y.hasChildren()){let I=yield this.processChildren(c,l,y,m);return new ws(m,I)}if(l.length===0&&w.length===0)return new ws(m,[]);let C=Aa(i)===r,S=yield this.processSegment(c,l,y,w,C?Lt:r,!0,m);return new ws(m,S instanceof ws?[S]:[])})}getChildConfig(t,n,i){return E(this,null,function*(){if(n.children)return{routes:n.children,injector:t};if(n.loadChildren){if(n._loadedRoutes!==void 0)return{routes:n._loadedRoutes,injector:n._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(yield sk(AEe(t,n,i,this.urlSerializer,this.abortSignal))){let r=yield this.configLoader.loadChildren(t,n);return n._loadedRoutes=r.routes,n._loadedInjector=r.injector,r}throw LEe(n)}return{routes:[],injector:t}})}};function YEe(e){e.sort((t,n)=>t.value.outlet===Lt?-1:n.value.outlet===Lt?1:t.value.outlet.localeCompare(n.value.outlet))}function QEe(e){let t=e.value.routeConfig;return t&&t.path===""}function VJ(e){let t=[],n=new Set;for(let i of e){if(!QEe(i)){t.push(i);continue}let o=t.find(r=>i.value.routeConfig===r.value.routeConfig);o!==void 0?(o.children.push(...i.children),n.add(o)):t.push(i)}for(let i of n){let o=VJ(i.children);t.push(new ws(i.value,o))}return t.filter(i=>!n.has(i))}function lJ(e){return e.data||{}}function cJ(e){return e.resolve||{}}var JEe=new q("",{factory:()=>qEe});function XEe(e,t,n,i,o,r,s){let a=e.get(JEe);return Po(l=>et(l).pipe(eo(c=>a(e,t,n,i,c.extractedUrl,o,r,s)),tt(({state:c,tree:u})=>x(g({},l),{targetSnapshot:c,urlAfterRedirects:u}))))}function e1e(e,t){return Po(n=>{let{targetSnapshot:i,guards:{canActivateChecks:o}}=n;if(!o.length)return et(n);let r=new Set(o.map(l=>l.route)),s=new Set;for(let l of r)if(!s.has(l))for(let c of HJ(l))s.add(c);let a=0;return Ti(s).pipe(Pm(l=>r.has(l)?t1e(l,i,e,t):(l.data=pk(l,l.parent,e).resolve,et(void 0))),wi(()=>a++),p1(1),Po(l=>a===s.size?et(n):So))})}function HJ(e){let t=e.children.map(n=>HJ(n)).flat();return[e,...t]}function t1e(e,t,n,i){let o=e.routeConfig,r=e._resolve;return o?.title!==void 0&&!kJ(o)&&(r[AC]=o.title),xc(()=>(e.data=pk(e,e.parent,n).resolve,n1e(r,e,t,i).pipe(tt(s=>(e._resolvedData=s,e.data=g(g({},e.data),s),null)))))}function n1e(e,t,n,i){let o=BB(e);if(o.length===0)return et({});let r={};return Ti(o).pipe(Po(s=>i1e(e[s],t,n,i).pipe(ul(),wi(a=>{if(a instanceof PC)throw mk(new sp,a);r[s]=a}))),p1(1),tt(()=>r),dl(s=>AJ(s)?So:ab(s)))}function i1e(e,t,n,i){let o=Cg(t)??i,r=wg(e,o),s=r.resolve?r.resolve(t,n):Fo(o,()=>r(t,n));return lp(s)}function LB(e){return eo(t=>{let n=e(t);return n?Ti(n).pipe(tt(()=>t)):et(t)})}var $J=(()=>{class e{buildTitle(n){let i,o=n.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(r=>r.outlet===Lt);return i}getResolvedTitleForRoute(n){return n.data[AC]}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:()=>k(o1e),providedIn:"root"})}return e})(),o1e=(()=>{class e extends $J{title;constructor(n){super(),this.title=n}updateTitle(n){let i=this.buildTitle(n);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||e)(Ze(eJ))};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),bk=new q("",{factory:()=>({})}),Ck=new q(""),jJ=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=k(tB);loadComponent(n,i){return E(this,null,function*(){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Promise.resolve(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let o=E(this,null,function*(){try{let r=yield hJ(Fo(n,()=>i.loadComponent())),s=yield UJ(GJ(r));return this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=s,s}finally{this.componentLoaders.delete(i)}});return this.componentLoaders.set(i,o),o})}loadChildren(n,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Promise.resolve({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=E(this,null,function*(){try{let r=yield r1e(i,this.compiler,n,this.onLoadEndListener);return i._loadedRoutes=r.routes,i._loadedInjector=r.injector,r}finally{this.childrenLoaders.delete(i)}});return this.childrenLoaders.set(i,o),o}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function r1e(e,t,n,i){return E(this,null,function*(){let o=yield hJ(Fo(n,()=>e.loadChildren())),r=yield UJ(GJ(o)),s;r instanceof ED||Array.isArray(r)?s=r:s=yield t.compileModuleAsync(r),i&&i(e);let a,l,c=!1;return Array.isArray(s)?(l=s,c=!0):(a=s.create(n).injector,l=a.get(Ck,[],{optional:!0,self:!0}).flat()),{routes:l.map(lz),injector:a}})}function s1e(e){return e&&typeof e=="object"&&"default"in e}function GJ(e){return s1e(e)?e.default:e}function UJ(e){return E(this,null,function*(){return e})}var cz=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:()=>k(a1e),providedIn:"root"})}return e})(),a1e=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,i){return n}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),WJ=new q("");var l1e=()=>{},qJ=new q(""),KJ=(()=>{class e{currentNavigation=$t(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=$t(null);events=new ie;transitionAbortWithErrorSubject=new ie;configLoader=k(jJ);environmentInjector=k(Qn);destroyRef=k(Eo);urlSerializer=k(vk);rootContexts=k(OC);location=k(nu);inputBindingEnabled=k(_k,{optional:!0})!==null;titleStrategy=k($J);options=k(bk,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=k(cz);createViewTransition=k(WJ,{optional:!0});navigationErrorHandler=k(qJ,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>et(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=o=>this.events.next(new WB(o)),i=o=>this.events.next(new qB(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let i=++this.navigationId;mi(()=>{this.transitions?.next(x(g({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))})}setupNavigations(n){return this.transitions=new kn(null),this.transitions.pipe(zt(i=>i!==null),eo(i=>{let o=!1,r=new AbortController;return et(i).pipe(eo(s=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Gr.SupersededByNewNavigation),So;this.currentTransition=i;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:a?x(g({},a),{previousNavigation:null}):null,abort:()=>r.abort()});let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&c!=="reload")return this.events.next(new ru(s.id,this.urlSerializer.serialize(s.rawUrl),"",ck.IgnoredSameUrlNavigation)),s.resolve(!1),So;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return et(s).pipe(eo(u=>(this.events.next(new _g(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?So:Promise.resolve(u))),XEe(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,r.signal),wi(u=>{i.targetSnapshot=u.targetSnapshot,i.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(f=>(f.finalUrl=u.urlAfterRedirects,f));let h=new dk(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:u,extractedUrl:h,source:f,restoredState:m,extras:_}=s,y=new _g(u,this.urlSerializer.serialize(h),f,m);this.events.next(y);let w=EJ(this.rootComponentType).snapshot;return this.currentTransition=i=x(g({},s),{targetSnapshot:w,urlAfterRedirects:h,extras:x(g({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(C=>(C.finalUrl=h,C)),et(i)}else return this.events.next(new ru(s.id,this.urlSerializer.serialize(s.extractedUrl),"",ck.IgnoredByUrlHandlingStrategy)),s.resolve(!1),So}),wi(s=>{let a=new $B(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),tt(s=>(this.currentTransition=i=x(g({},s),{guards:fEe(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),i)),EEe(this.environmentInjector,s=>this.events.next(s)),wi(s=>{if(i.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw mk(this.urlSerializer,s.guardsResult);let a=new jB(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),zt(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Gr.GuardRejected),!1)),LB(s=>{if(s.guards.canActivateChecks.length!==0)return et(s).pipe(wi(a=>{let l=new GB(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),eo(a=>{let l=!1;return et(a).pipe(e1e(this.paramsInheritanceStrategy,this.environmentInjector),wi({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(a,"",Gr.NoDataFromResolver)}}))}),wi(a=>{let l=new UB(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),LB(s=>{let a=c=>{let u=[];if(c.routeConfig?._loadedComponent)c.component=c.routeConfig?._loadedComponent;else if(c.routeConfig?.loadComponent){let h=Cg(c)??this.environmentInjector;u.push(this.configLoader.loadComponent(h,c.routeConfig).then(f=>{c.component=f}))}for(let h of c.children)u.push(...a(h));return u},l=a(s.targetSnapshot.root);return l.length===0?et(s):Ti(Promise.all(l).then(()=>s))}),LB(()=>this.afterPreactivation()),eo(()=>{let{currentSnapshot:s,targetSnapshot:a}=i,l=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return l?Ti(l).pipe(tt(()=>i)):et(i)}),tt(s=>{let a=cEe(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=i=x(g({},s),{targetRouterState:a}),this.currentNavigation.update(l=>(l.targetRouterState=a,l)),i}),wi(()=>{this.events.next(new RC)}),pEe(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),ri(1),Vt(OJ(r.signal).pipe(zt(()=>!o&&!i.targetRouterState),wi(()=>{this.cancelNavigationTransition(i,r.signal.reason+"",Gr.Aborted)}))),wi({next:s=>{o=!0,this.currentNavigation.update(a=>(a.abort=l1e,a)),this.lastSuccessfulNavigation.set(mi(this.currentNavigation)),this.events.next(new ou(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{o=!0}}),Vt(this.transitionAbortWithErrorSubject.pipe(wi(s=>{throw s}))),xa(()=>{r.abort(),o||this.cancelNavigationTransition(i,"",Gr.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),dl(s=>{if(this.destroyed)return i.resolve(!1),So;if(o=!0,PJ(s))this.events.next(new Vc(i.id,this.urlSerializer.serialize(i.extractedUrl),s.message,s.cancellationCode)),hEe(s)?this.events.next(new yg(s.url,s.navigationBehaviorOptions)):i.resolve(!1);else{let a=new MC(i.id,this.urlSerializer.serialize(i.extractedUrl),s,i.targetSnapshot??void 0);try{let l=Fo(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(l instanceof PC){let{message:c,cancellationCode:u}=mk(this.urlSerializer,l);this.events.next(new Vc(i.id,this.urlSerializer.serialize(i.extractedUrl),c,u)),this.events.next(new yg(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(l){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(l)}}return So}))}))}cancelNavigationTransition(n,i,o){let r=new Vc(n.id,this.urlSerializer.serialize(n.extractedUrl),i,o);this.events.next(r),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=mi(this.currentNavigation),o=i?.targetBrowserUrl??i?.extractedUrl;return n.toString()!==o?.toString()&&!i?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function c1e(e){return e!==DC}var d1e=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:()=>k(u1e),providedIn:"root"})}return e})(),sz=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},u1e=(()=>{class e extends sz{static \u0275fac=(()=>{let n;return function(o){return(n||(n=gn(e)))(o||e)}})();static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),dz=(()=>{class e{urlSerializer=k(vk);options=k(bk,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=k(nu);urlHandlingStrategy=k(cz);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Rl;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:i,targetBrowserUrl:o}){let r=n!==void 0?this.urlHandlingStrategy.merge(n,i):i,s=o??r;return s instanceof Rl?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:i,initialUrl:o}){i&&n?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,o),this.routerState=n):this.rawUrlTree=o}routerState=EJ(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:()=>k(ZJ),providedIn:"root"})}return e})(),ZJ=(()=>{class e extends dz{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{n(i.url,i.state,"popstate")})})}handleRouterEvent(n,i){n instanceof _g?this.updateStateMemento():n instanceof ru?this.commitTransition(i):n instanceof dk?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):n instanceof RC?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):n instanceof Vc&&n.code!==Gr.SupersededByNewNavigation&&n.code!==Gr.Redirect?this.restoreHistory(i):n instanceof MC?this.restoreHistory(i,!0):n instanceof ou&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:i,id:o}){let{replaceUrl:r,state:s}=i;if(this.location.isCurrentPathEqualTo(n)||r){let a=this.browserPageId,l=g(g({},s),this.generateNgRouterState(o,a));this.location.replaceState(n,"",l)}else{let a=g(g({},s),this.generateNgRouterState(o,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,r=this.currentPageId-o;r!==0?this.location.historyGo(r):this.getCurrentUrlTree()===n.finalUrl&&r===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,i){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:i}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(o){return(n||(n=gn(e)))(o||e)}})();static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function YJ(e,t){e.events.pipe(zt(n=>n instanceof ou||n instanceof Vc||n instanceof MC||n instanceof ru),tt(n=>n instanceof ou||n instanceof ru?0:(n instanceof Vc?n.code===Gr.Redirect||n.code===Gr.SupersededByNewNavigation:!1)?2:1),zt(n=>n!==2),ri(1)).subscribe(()=>{t()})}var h1e={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},p1e={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},uz=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=k(DD);stateManager=k(dz);options=k(bk,{optional:!0})||{};pendingTasks=k(Cl);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=k(KJ);urlSerializer=k(vk);location=k(nu);urlHandlingStrategy=k(cz);injector=k(Qn);_events=new ie;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=k(d1e);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=k(Ck,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!k(_k,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Mt;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,r=mi(this.navigationTransitions.currentNavigation);if(o!==null&&r!==null){if(this.stateManager.handleRouterEvent(i,r),i instanceof Vc&&i.code!==Gr.Redirect&&i.code!==Gr.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof ou)this.navigated=!0;else if(i instanceof yg){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),l=g({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||c1e(o.source)},s);this.scheduleNavigation(a,DC,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}oEe(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortWithErrorSubject.next(o)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),DC,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,i,o)=>{this.navigateToSyncWithBrowser(n,o,i)})}navigateToSyncWithBrowser(n,i,o){let r={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let l=g({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(r.state=l)}let a=this.parseUrl(n);this.scheduleNavigation(a,i,s,r).catch(l=>{this.disposed||this.injector.get(vs)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return mi(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(lz),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,i={}){let{relativeTo:o,queryParams:r,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=g(g({},this.currentUrlTree.queryParams),r);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}u!==null&&(u=this.removeEmptyProps(u));let h;try{let f=o?o.snapshot:this.routerState.snapshot.root;h=CJ(f)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),h=this.currentUrlTree.root}return wJ(h,n,u,c??null,this.urlSerializer)}navigateByUrl(n,i={skipLocationChange:!1}){let o=vg(n)?n:this.parseUrl(n),r=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(r,DC,null,i)}navigate(n,i={skipLocationChange:!1}){return f1e(n),this.navigateByUrl(this.createUrlTree(n,i),i)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(pl(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,i){let o;if(i===!0?o=g({},h1e):i===!1?o=g({},p1e):o=i,vg(n))return nJ(this.currentUrlTree,n,o);let r=this.parseUrl(n);return nJ(this.currentUrlTree,r,o)}removeEmptyProps(n){return Object.entries(n).reduce((i,[o,r])=>(r!=null&&(i[o]=r),i),{})}scheduleNavigation(n,i,o,r,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((h,f)=>{a=h,l=f});let u=this.pendingTasks.add();return YJ(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:r,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(h=>Promise.reject(h))}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function f1e(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new _e(4008,!1)}var m1e=new q("");function hz(e,...t){return Ic([{provide:Ck,multi:!0,useValue:e},[],{provide:ap,useFactory:g1e},{provide:ID,multi:!0,useFactory:v1e},t.map(n=>n.\u0275providers)])}function g1e(){return k(uz).routerState.root}function v1e(){let e=k(Ke);return t=>{let n=e.get(tr);if(t!==n.components[0])return;let i=e.get(uz),o=e.get(_1e);e.get(y1e)===1&&i.initialNavigation(),e.get(b1e,null,{optional:!0})?.setUpPreloading(),e.get(m1e,null,{optional:!0})?.init(),i.resetRootComponentType(n.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var _1e=new q("",{factory:()=>new ie}),y1e=new q("",{factory:()=>1});var b1e=new q("");var QJ=[];function JJ(e,t){let i=!t?.manualCleanup?t?.injector?.get(Eo)??k(Eo):null,o=w1e(t?.equal),r;t?.requireSync?r=$t({kind:0},{equal:o}):r=$t({kind:1,value:t?.initialValue},{equal:o});let s,a=e.subscribe({next:l=>r.set({kind:1,value:l}),error:l=>{r.set({kind:2,error:l}),s?.()},complete:()=>{s?.()}});if(t?.requireSync&&r().kind===0)throw new _e(601,!1);return s=i?.onDestroy(a.unsubscribe.bind(a)),Er(()=>{let l=r();switch(l.kind){case 1:return l.value;case 2:throw l.error;case 0:throw new _e(601,!1)}},{equal:t?.equal})}function w1e(e=Object.is){return(t,n)=>t.kind===1&&n.kind===1&&e(t.value,n.value)}function gz(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var dp=gz();function rX(e){dp=e}var zC={exec:()=>null};function Dn(e,t=""){let n=typeof e=="string"?e:e.source,i={replace:(o,r)=>{let s=typeof r=="string"?r:r.source;return s=s.replace(Dr.caret,"$1"),n=n.replace(o,s),i},getRegex:()=>new RegExp(n,t)};return i}var x1e=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Dr={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},S1e=/^(?:[ \t]*(?:\n|$))+/,E1e=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,D1e=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,VC=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,k1e=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,vz=/(?:[*+-]|\d{1,9}[.)])/,sX=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,aX=Dn(sX).replace(/bull/g,vz).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),I1e=Dn(sX).replace(/bull/g,vz).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),_z=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,M1e=/^[^\n]+/,yz=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,R1e=Dn(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",yz).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),T1e=Dn(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,vz).getRegex(),Ek="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",bz=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,P1e=Dn("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",bz).replace("tag",Ek).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),lX=Dn(_z).replace("hr",VC).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ek).getRegex(),A1e=Dn(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",lX).getRegex(),Cz={blockquote:A1e,code:E1e,def:R1e,fences:D1e,heading:k1e,hr:VC,html:P1e,lheading:aX,list:T1e,newline:S1e,paragraph:lX,table:zC,text:M1e},XJ=Dn("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",VC).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ek).getRegex(),O1e=x(g({},Cz),{lheading:I1e,table:XJ,paragraph:Dn(_z).replace("hr",VC).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",XJ).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ek).getRegex()}),F1e=x(g({},Cz),{html:Dn(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",bz).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:zC,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Dn(_z).replace("hr",VC).replace("heading",` *#{1,6} *[^
]`).replace("lheading",aX).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()}),L1e=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,N1e=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,cX=/^( {2,}|\\)\n(?!\s*$)/,B1e=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Dk=/[\p{P}\p{S}]/u,wz=/[\s\p{P}\p{S}]/u,dX=/[^\s\p{P}\p{S}]/u,z1e=Dn(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,wz).getRegex(),uX=/(?!~)[\p{P}\p{S}]/u,V1e=/(?!~)[\s\p{P}\p{S}]/u,H1e=/(?:[^\s\p{P}\p{S}]|~)/u,$1e=Dn(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",x1e?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),hX=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,j1e=Dn(hX,"u").replace(/punct/g,Dk).getRegex(),G1e=Dn(hX,"u").replace(/punct/g,uX).getRegex(),pX="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",U1e=Dn(pX,"gu").replace(/notPunctSpace/g,dX).replace(/punctSpace/g,wz).replace(/punct/g,Dk).getRegex(),W1e=Dn(pX,"gu").replace(/notPunctSpace/g,H1e).replace(/punctSpace/g,V1e).replace(/punct/g,uX).getRegex(),q1e=Dn("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,dX).replace(/punctSpace/g,wz).replace(/punct/g,Dk).getRegex(),K1e=Dn(/\\(punct)/,"gu").replace(/punct/g,Dk).getRegex(),Z1e=Dn(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Y1e=Dn(bz).replace("(?:-->|$)","-->").getRegex(),Q1e=Dn("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Y1e).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),xk=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,J1e=Dn(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",xk).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),fX=Dn(/^!?\[(label)\]\[(ref)\]/).replace("label",xk).replace("ref",yz).getRegex(),mX=Dn(/^!?\[(ref)\](?:\[\])?/).replace("ref",yz).getRegex(),X1e=Dn("reflink|nolink(?!\\()","g").replace("reflink",fX).replace("nolink",mX).getRegex(),eX=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,xz={_backpedal:zC,anyPunctuation:K1e,autolink:Z1e,blockSkip:$1e,br:cX,code:N1e,del:zC,emStrongLDelim:j1e,emStrongRDelimAst:U1e,emStrongRDelimUnd:q1e,escape:L1e,link:J1e,nolink:mX,punctuation:z1e,reflink:fX,reflinkSearch:X1e,tag:Q1e,text:B1e,url:zC},eDe=x(g({},xz),{link:Dn(/^!?\[(label)\]\((.*?)\)/).replace("label",xk).getRegex(),reflink:Dn(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",xk).getRegex()}),pz=x(g({},xz),{emStrongRDelimAst:W1e,emStrongLDelim:G1e,url:Dn(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",eX).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Dn(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",eX).getRegex()}),tDe=x(g({},pz),{br:Dn(cX).replace("{2,}","*").getRegex(),text:Dn(pz.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),wk={normal:Cz,gfm:O1e,pedantic:F1e},LC={normal:xz,gfm:pz,breaks:tDe,pedantic:eDe},nDe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tX=e=>nDe[e];function Hc(e,t){if(t){if(Dr.escapeTest.test(e))return e.replace(Dr.escapeReplace,tX)}else if(Dr.escapeTestNoEncode.test(e))return e.replace(Dr.escapeReplaceNoEncode,tX);return e}function nX(e){try{e=encodeURI(e).replace(Dr.percentDecode,"%")}catch{return null}return e}function iX(e,t){let n=e.replace(Dr.findPipe,(r,s,a)=>{let l=!1,c=s;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),i=n.split(Dr.splitPipe),o=0;if(i[0].trim()||i.shift(),i.length>0&&!i.at(-1)?.trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;o<i.length;o++)i[o]=i[o].trim().replace(Dr.slashPipe,"|");return i}function NC(e,t,n){let i=e.length;if(i===0)return"";let o=0;for(;o<i;){let r=e.charAt(i-o-1);if(r===t&&!n)o++;else if(r!==t&&n)o++;else break}return e.slice(0,i-o)}function iDe(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let i=0;i<e.length;i++)if(e[i]==="\\")i++;else if(e[i]===t[0])n++;else if(e[i]===t[1]&&(n--,n<0))return i;return n>0?-2:-1}function oX(e,t,n,i,o){let r=t.href,s=t.title||null,a=e[1].replace(o.other.outputLinkReplace,"$1");i.state.inLink=!0;let l={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:r,title:s,text:a,tokens:i.inlineTokens(a)};return i.state.inLink=!1,l}function oDe(e,t,n){let i=e.match(n.other.indentCodeCompensation);if(i===null)return t;let o=i[1];return t.split(`
`).map(r=>{let s=r.match(n.other.beginningSpace);if(s===null)return r;let[a]=s;return a.length>=o.length?r.slice(o.length):r}).join(`
`)}var Sk=class{options;rules;lexer;constructor(e){this.options=e||dp}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:NC(n,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let n=t[0],i=oDe(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){let i=NC(n,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(n=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:NC(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let n=NC(t[0],`
`).split(`
`),i="",o="",r=[];for(;n.length>0;){let s=!1,a=[],l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))a.push(n[l]),s=!0;else if(!s)a.push(n[l]);else break;n=n.slice(l);let c=a.join(`
`),u=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${c}`:c,o=o?`${o}
${u}`:u;let h=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,r,!0),this.lexer.state.top=h,n.length===0)break;let f=r.at(-1);if(f?.type==="code")break;if(f?.type==="blockquote"){let m=f,_=m.raw+`
`+n.join(`
`),y=this.blockquote(_);r[r.length-1]=y,i=i.substring(0,i.length-m.raw.length)+y.raw,o=o.substring(0,o.length-m.text.length)+y.text;break}else if(f?.type==="list"){let m=f,_=m.raw+`
`+n.join(`
`),y=this.list(_);r[r.length-1]=y,i=i.substring(0,i.length-f.raw.length)+y.raw,o=o.substring(0,o.length-m.raw.length)+y.raw,n=_.substring(r.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:r,text:o}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim(),i=n.length>1,o={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");let r=this.rules.other.listItemRegex(n),s=!1;for(;e;){let l=!1,c="",u="";if(!(t=r.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let h=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,y=>" ".repeat(3*y.length)),f=e.split(`
`,1)[0],m=!h.trim(),_=0;if(this.options.pedantic?(_=2,u=h.trimStart()):m?_=t[1].length+1:(_=t[2].search(this.rules.other.nonSpaceChar),_=_>4?1:_,u=h.slice(_),_+=t[1].length),m&&this.rules.other.blankLine.test(f)&&(c+=f+`
`,e=e.substring(f.length+1),l=!0),!l){let y=this.rules.other.nextBulletRegex(_),w=this.rules.other.hrRegex(_),C=this.rules.other.fencesBeginRegex(_),S=this.rules.other.headingBeginRegex(_),I=this.rules.other.htmlBeginRegex(_);for(;e;){let O=e.split(`
`,1)[0],F;if(f=O,this.options.pedantic?(f=f.replace(this.rules.other.listReplaceNesting,"  "),F=f):F=f.replace(this.rules.other.tabCharGlobal,"    "),C.test(f)||S.test(f)||I.test(f)||y.test(f)||w.test(f))break;if(F.search(this.rules.other.nonSpaceChar)>=_||!f.trim())u+=`
`+F.slice(_);else{if(m||h.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||C.test(h)||S.test(h)||w.test(h))break;u+=`
`+f}!m&&!f.trim()&&(m=!0),c+=O+`
`,e=e.substring(O.length+1),h=F.slice(_)}}o.loose||(s?o.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(s=!0)),o.items.push({type:"list_item",raw:c,task:!!this.options.gfm&&this.rules.other.listIsTask.test(u),loose:!1,text:u,tokens:[]}),o.raw+=c}let a=o.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;o.raw=o.raw.trimEnd();for(let l of o.items){if(this.lexer.state.top=!1,l.tokens=this.lexer.blockTokens(l.text,[]),l.task){if(l.text=l.text.replace(this.rules.other.listReplaceTask,""),l.tokens[0]?.type==="text"||l.tokens[0]?.type==="paragraph"){l.tokens[0].raw=l.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),l.tokens[0].text=l.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let u=this.lexer.inlineQueue.length-1;u>=0;u--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[u].src)){this.lexer.inlineQueue[u].src=this.lexer.inlineQueue[u].src.replace(this.rules.other.listReplaceTask,"");break}}let c=this.rules.other.listTaskCheckbox.exec(l.raw);if(c){let u={type:"checkbox",raw:c[0]+" ",checked:c[0]!=="[ ]"};l.checked=u.checked,o.loose?l.tokens[0]&&["paragraph","text"].includes(l.tokens[0].type)&&"tokens"in l.tokens[0]&&l.tokens[0].tokens?(l.tokens[0].raw=u.raw+l.tokens[0].raw,l.tokens[0].text=u.raw+l.tokens[0].text,l.tokens[0].tokens.unshift(u)):l.tokens.unshift({type:"paragraph",raw:u.raw,text:u.raw,tokens:[u]}):l.tokens.unshift(u)}}if(!o.loose){let c=l.tokens.filter(h=>h.type==="space"),u=c.length>0&&c.some(h=>this.rules.other.anyLine.test(h.raw));o.loose=u}}if(o.loose)for(let l of o.items){l.loose=!0;for(let c of l.tokens)c.type==="text"&&(c.type="paragraph")}return o}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:i,title:o}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let n=iX(t[1]),i=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],r={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===i.length){for(let s of i)this.rules.other.tableAlignRight.test(s)?r.align.push("right"):this.rules.other.tableAlignCenter.test(s)?r.align.push("center"):this.rules.other.tableAlignLeft.test(s)?r.align.push("left"):r.align.push(null);for(let s=0;s<n.length;s++)r.header.push({text:n[s],tokens:this.lexer.inline(n[s]),header:!0,align:r.align[s]});for(let s of o)r.rows.push(iX(s,r.header.length).map((a,l)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:r.align[l]})));return r}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let r=NC(n.slice(0,-1),"\\");if((n.length-r.length)%2===0)return}else{let r=iDe(t[2],"()");if(r===-2)return;if(r>-1){let s=(t[0].indexOf("!")===0?5:4)+t[1].length+r;t[2]=t[2].substring(0,r),t[0]=t[0].substring(0,s).trim(),t[3]=""}}let i=t[2],o="";if(this.options.pedantic){let r=this.rules.other.pedanticHrefTitle.exec(i);r&&(i=r[1],o=r[3])}else o=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?i=i.slice(1):i=i.slice(1,-1)),oX(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let i=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=t[i.toLowerCase()];if(!o){let r=n[0].charAt(0);return{type:"text",raw:r,text:r}}return oX(n,o,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!(!i||i[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!n||this.rules.inline.punctuation.exec(n))){let o=[...i[0]].length-1,r,s,a=o,l=0,c=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,t=t.slice(-1*e.length+o);(i=c.exec(t))!=null;){if(r=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!r)continue;if(s=[...r].length,i[3]||i[4]){a+=s;continue}else if((i[5]||i[6])&&o%3&&!((o+s)%3)){l+=s;continue}if(a-=s,a>0)continue;s=Math.min(s,s+a+l);let u=[...i[0]][0].length,h=e.slice(0,o+i.index+u+s);if(Math.min(o,s)%2){let m=h.slice(1,-1);return{type:"em",raw:h,text:m,tokens:this.lexer.inlineTokens(m)}}let f=h.slice(2,-2);return{type:"strong",raw:h,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(n),o=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return i&&o&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let n,i;return t[2]==="@"?(n=t[1],i="mailto:"+n):(n=t[1],i=n),{type:"link",raw:t[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let n,i;if(t[2]==="@")n=t[0],i="mailto:"+n;else{let o;do o=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(o!==t[0]);n=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}},Oa=class fz{tokens;options;state;inlineQueue;tokenizer;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||dp,this.options.tokenizer=this.options.tokenizer||new Sk,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:Dr,block:wk.normal,inline:LC.normal};this.options.pedantic?(n.block=wk.pedantic,n.inline=LC.pedantic):this.options.gfm&&(n.block=wk.gfm,this.options.breaks?n.inline=LC.breaks:n.inline=LC.gfm),this.tokenizer.rules=n}static get rules(){return{block:wk,inline:LC}}static lex(t,n){return new fz(n).lex(t)}static lexInline(t,n){return new fz(n).inlineTokens(t)}lex(t){t=t.replace(Dr.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let i=this.inlineQueue[n];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],i=!1){for(this.options.pedantic&&(t=t.replace(Dr.tabCharGlobal,"    ").replace(Dr.spaceLine,""));t;){let o;if(this.options.extensions?.block?.some(s=>(o=s.call({lexer:this},t,n))?(t=t.substring(o.raw.length),n.push(o),!0):!1))continue;if(o=this.tokenizer.space(t)){t=t.substring(o.raw.length);let s=n.at(-1);o.raw.length===1&&s!==void 0?s.raw+=`
`:n.push(o);continue}if(o=this.tokenizer.code(t)){t=t.substring(o.raw.length);let s=n.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+o.raw,s.text+=`
`+o.text,this.inlineQueue.at(-1).src=s.text):n.push(o);continue}if(o=this.tokenizer.fences(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.heading(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.hr(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.blockquote(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.list(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.html(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.def(t)){t=t.substring(o.raw.length);let s=n.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+o.raw,s.text+=`
`+o.raw,this.inlineQueue.at(-1).src=s.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title},n.push(o));continue}if(o=this.tokenizer.table(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.lheading(t)){t=t.substring(o.raw.length),n.push(o);continue}let r=t;if(this.options.extensions?.startBlock){let s=1/0,a=t.slice(1),l;this.options.extensions.startBlock.forEach(c=>{l=c.call({lexer:this},a),typeof l=="number"&&l>=0&&(s=Math.min(s,l))}),s<1/0&&s>=0&&(r=t.substring(0,s+1))}if(this.state.top&&(o=this.tokenizer.paragraph(r))){let s=n.at(-1);i&&s?.type==="paragraph"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+o.raw,s.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):n.push(o),i=r.length!==t.length,t=t.substring(o.raw.length);continue}if(o=this.tokenizer.text(t)){t=t.substring(o.raw.length);let s=n.at(-1);s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+o.raw,s.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):n.push(o);continue}if(t){let s="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(s);break}else throw new Error(s)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let i=t,o=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)l.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,o.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let r;for(;(o=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)r=o[2]?o[2].length:0,i=i.slice(0,o.index+r)+"["+"a".repeat(o[0].length-r-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);i=this.options.hooks?.emStrongMask?.call({lexer:this},i)??i;let s=!1,a="";for(;t;){s||(a=""),s=!1;let l;if(this.options.extensions?.inline?.some(u=>(l=u.call({lexer:this},t,n))?(t=t.substring(l.raw.length),n.push(l),!0):!1))continue;if(l=this.tokenizer.escape(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.tag(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.link(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(l.raw.length);let u=n.at(-1);l.type==="text"&&u?.type==="text"?(u.raw+=l.raw,u.text+=l.text):n.push(l);continue}if(l=this.tokenizer.emStrong(t,i,a)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.codespan(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.br(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.del(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.autolink(t)){t=t.substring(l.raw.length),n.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(t))){t=t.substring(l.raw.length),n.push(l);continue}let c=t;if(this.options.extensions?.startInline){let u=1/0,h=t.slice(1),f;this.options.extensions.startInline.forEach(m=>{f=m.call({lexer:this},h),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(c=t.substring(0,u+1))}if(l=this.tokenizer.inlineText(c)){t=t.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(a=l.raw.slice(-1)),s=!0;let u=n.at(-1);u?.type==="text"?(u.raw+=l.raw,u.text+=l.text):n.push(l);continue}if(t){let u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return n}},su=class{options;parser;constructor(e){this.options=e||dp}space(e){return""}code({text:e,lang:t,escaped:n}){let i=(t||"").match(Dr.notSpaceStart)?.[0],o=e.replace(Dr.endingNewline,"")+`
`;return i?'<pre><code class="language-'+Hc(i)+'">'+(n?o:Hc(o,!0))+`</code></pre>
`:"<pre><code>"+(n?o:Hc(o,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,n=e.start,i="";for(let s=0;s<e.items.length;s++){let a=e.items[s];i+=this.listitem(a)}let o=t?"ol":"ul",r=t&&n!==1?' start="'+n+'"':"";return"<"+o+r+`>
`+i+"</"+o+`>
`}listitem(e){return`<li>${this.parser.parse(e.tokens)}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let o=0;o<e.header.length;o++)n+=this.tablecell(e.header[o]);t+=this.tablerow({text:n});let i="";for(let o=0;o<e.rows.length;o++){let r=e.rows[o];n="";for(let s=0;s<r.length;s++)n+=this.tablecell(r[s]);i+=this.tablerow({text:n})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Hc(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){let i=this.parser.parseInline(n),o=nX(e);if(o===null)return i;e=o;let r='<a href="'+e+'"';return t&&(r+=' title="'+Hc(t)+'"'),r+=">"+i+"</a>",r}image({href:e,title:t,text:n,tokens:i}){i&&(n=this.parser.parseInline(i,this.parser.textRenderer));let o=nX(e);if(o===null)return Hc(n);e=o;let r=`<img src="${e}" alt="${n}"`;return t&&(r+=` title="${Hc(t)}"`),r+=">",r}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Hc(e.text)}},Sz=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}checkbox({raw:e}){return e}},Fa=class mz{options;renderer;textRenderer;constructor(t){this.options=t||dp,this.options.renderer=this.options.renderer||new su,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Sz}static parse(t,n){return new mz(n).parse(t)}static parseInline(t,n){return new mz(n).parseInline(t)}parse(t){let n="";for(let i=0;i<t.length;i++){let o=t[i];if(this.options.extensions?.renderers?.[o.type]){let s=o,a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(s.type)){n+=a||"";continue}}let r=o;switch(r.type){case"space":{n+=this.renderer.space(r);break}case"hr":{n+=this.renderer.hr(r);break}case"heading":{n+=this.renderer.heading(r);break}case"code":{n+=this.renderer.code(r);break}case"table":{n+=this.renderer.table(r);break}case"blockquote":{n+=this.renderer.blockquote(r);break}case"list":{n+=this.renderer.list(r);break}case"checkbox":{n+=this.renderer.checkbox(r);break}case"html":{n+=this.renderer.html(r);break}case"def":{n+=this.renderer.def(r);break}case"paragraph":{n+=this.renderer.paragraph(r);break}case"text":{n+=this.renderer.text(r);break}default:{let s='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return n}parseInline(t,n=this.renderer){let i="";for(let o=0;o<t.length;o++){let r=t[o];if(this.options.extensions?.renderers?.[r.type]){let a=this.options.extensions.renderers[r.type].call({parser:this},r);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){i+=a||"";continue}}let s=r;switch(s.type){case"escape":{i+=n.text(s);break}case"html":{i+=n.html(s);break}case"link":{i+=n.link(s);break}case"image":{i+=n.image(s);break}case"checkbox":{i+=n.checkbox(s);break}case"strong":{i+=n.strong(s);break}case"em":{i+=n.em(s);break}case"codespan":{i+=n.codespan(s);break}case"br":{i+=n.br(s);break}case"del":{i+=n.del(s);break}case"text":{i+=n.text(s);break}default:{let a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}},BC=class{options;block;constructor(e){this.options=e||dp}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?Oa.lex:Oa.lexInline}provideParser(){return this.block?Fa.parse:Fa.parseInline}},rDe=class{defaults=gz();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Fa;Renderer=su;TextRenderer=Sz;Lexer=Oa;Tokenizer=Sk;Hooks=BC;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(let i of e)switch(n=n.concat(t.call(this,i)),i.type){case"table":{let o=i;for(let r of o.header)n=n.concat(this.walkTokens(r.tokens,t));for(let r of o.rows)for(let s of r)n=n.concat(this.walkTokens(s.tokens,t));break}case"list":{let o=i;n=n.concat(this.walkTokens(o.items,t));break}default:{let o=i;this.defaults.extensions?.childTokens?.[o.type]?this.defaults.extensions.childTokens[o.type].forEach(r=>{let s=o[r].flat(1/0);n=n.concat(this.walkTokens(s,t))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,t)))}}return n}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{let i=g({},n);if(i.async=this.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){let r=t.renderers[o.name];r?t.renderers[o.name]=function(...s){let a=o.renderer.apply(this,s);return a===!1&&(a=r.apply(this,s)),a}:t.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let r=t[o.level];r?r.unshift(o.tokenizer):t[o.level]=[o.tokenizer],o.start&&(o.level==="block"?t.startBlock?t.startBlock.push(o.start):t.startBlock=[o.start]:o.level==="inline"&&(t.startInline?t.startInline.push(o.start):t.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(t.childTokens[o.name]=o.childTokens)}),i.extensions=t),n.renderer){let o=this.defaults.renderer||new su(this.defaults);for(let r in n.renderer){if(!(r in o))throw new Error(`renderer '${r}' does not exist`);if(["options","parser"].includes(r))continue;let s=r,a=n.renderer[s],l=o[s];o[s]=(...c)=>{let u=a.apply(o,c);return u===!1&&(u=l.apply(o,c)),u||""}}i.renderer=o}if(n.tokenizer){let o=this.defaults.tokenizer||new Sk(this.defaults);for(let r in n.tokenizer){if(!(r in o))throw new Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;let s=r,a=n.tokenizer[s],l=o[s];o[s]=(...c)=>{let u=a.apply(o,c);return u===!1&&(u=l.apply(o,c)),u}}i.tokenizer=o}if(n.hooks){let o=this.defaults.hooks||new BC;for(let r in n.hooks){if(!(r in o))throw new Error(`hook '${r}' does not exist`);if(["options","block"].includes(r))continue;let s=r,a=n.hooks[s],l=o[s];BC.passThroughHooks.has(r)?o[s]=c=>{if(this.defaults.async&&BC.passThroughHooksRespectAsync.has(r))return E(this,null,function*(){let h=yield a.call(o,c);return l.call(o,h)});let u=a.call(o,c);return l.call(o,u)}:o[s]=(...c)=>{if(this.defaults.async)return E(this,null,function*(){let h=yield a.apply(o,c);return h===!1&&(h=yield l.apply(o,c)),h});let u=a.apply(o,c);return u===!1&&(u=l.apply(o,c)),u}}i.hooks=o}if(n.walkTokens){let o=this.defaults.walkTokens,r=n.walkTokens;i.walkTokens=function(s){let a=[];return a.push(r.call(this,s)),o&&(a=a.concat(o.call(this,s))),a}}this.defaults=g(g({},this.defaults),i)}),this}setOptions(e){return this.defaults=g(g({},this.defaults),e),this}lexer(e,t){return Oa.lex(e,t??this.defaults)}parser(e,t){return Fa.parse(e,t??this.defaults)}parseMarkdown(e){return(t,n)=>{let i=g({},n),o=g(g({},this.defaults),i),r=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&i.async===!1)return r(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return r(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return r(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(o.hooks&&(o.hooks.options=o,o.hooks.block=e),o.async)return E(this,null,function*(){let s=o.hooks?yield o.hooks.preprocess(t):t,a=yield(o.hooks?yield o.hooks.provideLexer():e?Oa.lex:Oa.lexInline)(s,o),l=o.hooks?yield o.hooks.processAllTokens(a):a;o.walkTokens&&(yield Promise.all(this.walkTokens(l,o.walkTokens)));let c=yield(o.hooks?yield o.hooks.provideParser():e?Fa.parse:Fa.parseInline)(l,o);return o.hooks?yield o.hooks.postprocess(c):c}).catch(r);try{o.hooks&&(t=o.hooks.preprocess(t));let s=(o.hooks?o.hooks.provideLexer():e?Oa.lex:Oa.lexInline)(t,o);o.hooks&&(s=o.hooks.processAllTokens(s)),o.walkTokens&&this.walkTokens(s,o.walkTokens);let a=(o.hooks?o.hooks.provideParser():e?Fa.parse:Fa.parseInline)(s,o);return o.hooks&&(a=o.hooks.postprocess(a)),a}catch(s){return r(s)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let i="<p>An error occurred:</p><pre>"+Hc(n.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(n);throw n}}},cp=new rDe;function Cn(e,t){return cp.parse(e,t)}Cn.options=Cn.setOptions=function(e){return cp.setOptions(e),Cn.defaults=cp.defaults,rX(Cn.defaults),Cn};Cn.getDefaults=gz;Cn.defaults=dp;Cn.use=function(...e){return cp.use(...e),Cn.defaults=cp.defaults,rX(Cn.defaults),Cn};Cn.walkTokens=function(e,t){return cp.walkTokens(e,t)};Cn.parseInline=cp.parseInline;Cn.Parser=Fa;Cn.parser=Fa.parse;Cn.Renderer=su;Cn.TextRenderer=Sz;Cn.Lexer=Oa;Cn.lexer=Oa.lex;Cn.Tokenizer=Sk;Cn.Hooks=BC;Cn.parse=Cn;var Z_t=Cn.options,Y_t=Cn.setOptions,Q_t=Cn.use,J_t=Cn.walkTokens,X_t=Cn.parseInline;var eyt=Fa.parse,tyt=Oa.lex;var sDe=["*"],aDe="Copy",lDe="Copied",cDe=(()=>{class e{constructor(){this._buttonClick$=new ie,this.copied=JJ(this._buttonClick$.pipe(eo(()=>Ni(et(!0),Ph(3e3).pipe(Am(!1)))),Om(),Fm(1))),this.copiedText=Er(()=>this.copied()?lDe:aDe)}onCopyToClipboardClick(){this._buttonClick$.next()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=pe({type:e,selectors:[["markdown-clipboard"]],decls:2,vars:3,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,o){i&1&&(Ei(0,"button",0),eu("click",function(){return o.onCopyToClipboardClick()}),N(1),no()),i&2&&(be("copied",o.copied()),P(),nt(o.copiedText()))},encapsulation:2,changeDetection:0})}}return e})(),dDe=new q("CLIPBOARD_OPTIONS");var uDe=new q("MARKED_EXTENSIONS"),hDe=new q("MARKED_OPTIONS"),pDe=new q("MERMAID_OPTIONS"),fDe=new q("SANITIZE");function mDe(e){return typeof e=="function"}var gDe="[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information",vDe="[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information",_De="[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information",yDe="[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information",bDe="[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function",CDe="[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information";var gX=(()=>{class e{get options(){return this._options}set options(n){this._options=g(g({},this.DEFAULT_MARKED_OPTIONS),n)}get renderer(){return this.options.renderer}set renderer(n){this.options.renderer=n}constructor(){this.clipboardOptions=k(dDe,{optional:!0}),this.extensions=k(uDe,{optional:!0}),this.http=k(iu,{optional:!0}),this.mermaidOptions=k(pDe,{optional:!0}),this.platform=k(Tc),this.sanitize=k(fDe,{optional:!0}),this.sanitizer=k(wC),this.DEFAULT_MARKED_OPTIONS={renderer:new su},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:void 0,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this.DEFAULT_SECURITY_CONTEXT=mo.HTML,this._options=null,this._reload$=new ie,this.reload$=this._reload$.asObservable(),this.options=k(hDe,{optional:!0})}parse(n,i=this.DEFAULT_PARSE_OPTIONS){let{decodeHtml:o,inline:r,emoji:s,mermaid:a,disableSanitizer:l}=i,c=g(g({},this.options),i.markedOptions),u=c.renderer||this.renderer||new su;this.extensions&&(this.renderer=this.extendsRendererForExtensions(u)),a&&(this.renderer=this.extendsRendererForMermaid(u));let h=this.trimIndentation(n),f=o?this.decodeHtml(h):h,m=s?this.parseEmoji(f):f,_=this.parseMarked(m,c,r);return l?_:this.sanitizeHtml(_)}render(n,i=this.DEFAULT_RENDER_OPTIONS,o){let{clipboard:r,clipboardOptions:s,katex:a,katexOptions:l,mermaid:c,mermaidOptions:u}=i;a&&this.renderKatex(n,g(g({},this.DEFAULT_KATEX_OPTIONS),l)),c&&this.renderMermaid(n,g(g(g({},this.DEFAULT_MERMAID_OPTIONS),this.mermaidOptions),u)),r&&this.renderClipboard(n,o,g(g(g({},this.DEFAULT_CLIPBOARD_OPTIONS),this.clipboardOptions),s)),this.highlight(n)}reload(){this._reload$.next()}getSource(n){if(!this.http)throw new Error(CDe);return this.http.get(n,{responseType:"text"}).pipe(tt(i=>this.handleExtension(n,i)))}highlight(n){if(!Bc(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;n||(n=document);let i=n.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(i,o=>o.classList.add("language-none")),Prism.highlightAllUnder(n)}decodeHtml(n){if(!Bc(this.platform))return n;let i=document.createElement("textarea");return i.innerHTML=n,i.value}extendsRendererForExtensions(n){let i=n;return i.\u0275NgxMarkdownRendererExtendedForExtensions===!0||(this.extensions&&this.extensions.length>0&&Cn.use(...this.extensions),i.\u0275NgxMarkdownRendererExtendedForExtensions=!0),n}extendsRendererForMermaid(n){let i=n;if(i.\u0275NgxMarkdownRendererExtendedForMermaid===!0)return n;let o=n.code;return n.code=r=>r.lang==="mermaid"?`<div class="mermaid">${r.text}</div>`:o(r),i.\u0275NgxMarkdownRendererExtendedForMermaid=!0,n}handleExtension(n,i){let o=n.lastIndexOf("://"),r=o>-1?n.substring(o+4):n,s=r.lastIndexOf("/"),a=s>-1?r.substring(s+1).split("?")[0]:"",l=a.lastIndexOf("."),c=l>-1?a.substring(l+1):"";return c&&c!=="md"?"```"+c+`
`+i+"\n```":i}parseMarked(n,i,o=!1){if(i.renderer){let r=g({},i.renderer);delete r.\u0275NgxMarkdownRendererExtendedForExtensions,delete r.\u0275NgxMarkdownRendererExtendedForMermaid,delete i.renderer,Cn.use({renderer:r})}return o?Cn.parseInline(n,i):Cn.parse(n,i)}parseEmoji(n){if(!Bc(this.platform))return n;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error(gDe);return joypixels.shortnameToUnicode(n)}renderKatex(n,i){if(Bc(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error(vDe);renderMathInElement(n,i)}}renderClipboard(n,i,o){if(!Bc(this.platform))return;if(typeof ClipboardJS>"u")throw new Error(yDe);if(!i)throw new Error(bDe);let{buttonComponent:r,buttonTemplate:s}=o,a=n.querySelectorAll("pre");for(let l=0;l<a.length;l++){let c=a.item(l),u=document.createElement("div");u.style.position="relative",c.parentNode.insertBefore(u,c),u.appendChild(c);let h=document.createElement("div");h.classList.add("markdown-clipboard-toolbar"),h.style.position="absolute",h.style.top=".5em",h.style.right=".5em",h.style.zIndex="1",u.insertAdjacentElement("beforeend",h),u.onmouseenter=()=>h.classList.add("hover"),u.onmouseleave=()=>h.classList.remove("hover");let f;if(r){let _=i.createComponent(r);f=_.hostView,_.changeDetectorRef.markForCheck()}else if(s)f=i.createEmbeddedView(s);else{let _=i.createComponent(cDe);f=_.hostView,_.changeDetectorRef.markForCheck()}let m;f.rootNodes.forEach(_=>{h.appendChild(_),m=new ClipboardJS(_,{text:()=>c.innerText})}),f.onDestroy(()=>m.destroy())}}renderMermaid(n,i=this.DEFAULT_MERMAID_OPTIONS){if(!Bc(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.initialize>"u")throw new Error(_De);let o=n.querySelectorAll(".mermaid");o.length!==0&&(mermaid.initialize(i),mermaid.run({nodes:o}))}trimIndentation(n){if(!n)return"";let i;return n.split(`
`).map(o=>{let r=i;return o.length>0&&(r=isNaN(r)?o.search(/\S|$/):Math.min(o.search(/\S|$/),r)),isNaN(i)&&(i=r),r?o.substring(r):o}).join(`
`)}sanitizeHtml(n){return E(this,null,function*(){return mDe(this.sanitize)?this.sanitize(yield n):this.sanitize!==mo.NONE?this.sanitizer.sanitize(this.sanitize??this.DEFAULT_SECURITY_CONTEXT,n)??"":n})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=ee({token:e,factory:e.\u0275fac})}}return e})(),Ez=(function(e){return e.CommandLine="command-line",e.LineHighlight="line-highlight",e.LineNumbers="line-numbers",e})(Ez||{}),vX=(()=>{class e{constructor(){this.element=k(Oe),this.markdownService=k(gX),this.viewContainerRef=k(li),this.error=new V,this.load=new V,this.ready=new V,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this.destroyed$=new ie}get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(n){this._disableSanitizer=this.coerceBooleanProperty(n)}get inline(){return this._inline}set inline(n){this._inline=this.coerceBooleanProperty(n)}get clipboard(){return this._clipboard}set clipboard(n){this._clipboard=this.coerceBooleanProperty(n)}get emoji(){return this._emoji}set emoji(n){this._emoji=this.coerceBooleanProperty(n)}get katex(){return this._katex}set katex(n){this._katex=this.coerceBooleanProperty(n)}get mermaid(){return this._mermaid}set mermaid(n){this._mermaid=this.coerceBooleanProperty(n)}get lineHighlight(){return this._lineHighlight}set lineHighlight(n){this._lineHighlight=this.coerceBooleanProperty(n)}get lineNumbers(){return this._lineNumbers}set lineNumbers(n){this._lineNumbers=this.coerceBooleanProperty(n)}get commandLine(){return this._commandLine}set commandLine(n){this._commandLine=this.coerceBooleanProperty(n)}ngOnChanges(){this.loadContent()}loadContent(){if(this.data!=null){this.handleData();return}if(this.src!=null){this.handleSrc();return}}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(Vt(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(n,i=!1){return E(this,null,function*(){let o={decodeHtml:i,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,disableSanitizer:this.disableSanitizer},r={clipboard:this.clipboard,clipboardOptions:this.getClipboardOptions(),katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},s=yield this.markdownService.parse(n,o);this.element.nativeElement.innerHTML=s,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,r,this.viewContainerRef),this.ready.emit()})}coerceBooleanProperty(n){return n!=null&&`${String(n)}`!="false"}getClipboardOptions(){if(this.clipboardButtonComponent||this.clipboardButtonTemplate)return{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate}}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:n=>{this.render(n).then(()=>{this.load.emit(n)})},error:n=>this.error.emit(n)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,Ez.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,Ez.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(n,i){let o=n.querySelectorAll("pre");for(let r=0;r<o.length;r++){let s=i instanceof Array?i:[i];o.item(r).classList.add(...s)}}setPluginOptions(n,i){let o=n.querySelectorAll("pre");for(let r=0;r<o.length;r++)Object.keys(i).forEach(s=>{let a=i[s];if(a){let l=this.toLispCase(s);o.item(r).setAttribute(l,a.toString())}})}toLispCase(n){let i=n.match(/([A-Z])/g);if(!i)return n;let o=n.toString();for(let r=0,s=i.length;r<s;r++)o=o.replace(new RegExp(i[r]),"-"+i[r].toLowerCase());return o.slice(0,1)==="-"&&(o=o.slice(1)),o}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=pe({type:e,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},features:[sn],ngContentSelectors:sDe,decls:1,vars:0,template:function(i,o){i&1&&(yn(),st(0))},encapsulation:2})}}return e})();function Dz(e){return[gX,e?.loader??[],e?.clipboardOptions??[],e?.markedOptions??[],e?.mermaidOptions??[],e?.markedExtensions??[],e?.sanitize??[]]}var _X=(()=>{class e{static forRoot(n){return{ngModule:e,providers:[Dz(n)]}}static forChild(){return{ngModule:e}}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=$e({type:e})}static{this.\u0275inj=ze({})}}return e})();var bp=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,n){let i=t?this.allAsyncListeners:this.allSyncListeners,o=i.get(e);return!o&&n&&(o=new Set,i.set(e,o)),o}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,n=!1){this.getListeners(e,n,!0).add(t)}removeEventListener(e,t,n=!1){let i=this.getListeners(e,n,!1);i&&(i.delete(t),i.size===0&&(n?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){this.getGlobalListeners(t).add(e)}removeGlobalListener(e,t=!1){this.getGlobalListeners(t).delete(e)}dispatchEvent(e){this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){let n=e.type;if(t&&"event"in e){let a=e.event;a instanceof Event&&(e.eventPath=a.composedPath())}let{frameworkOverrides:i}=this,o=a=>{let l=i?()=>i.wrapIncoming(a):a;t?this.dispatchAsync(l):l()},r=this.getListeners(n,t,!1);if((r?.size??0)>0){let a=new Set(r);for(let l of a)r?.has(l)&&o(()=>l(e))}let s=this.getGlobalListeners(t);if(s.size>0){let a=new Set(s);for(let l of a)o(()=>l(n,e))}}getGlobalListeners(e){return e?this.globalAsyncListeners:this.globalSyncListeners}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){let t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;let e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[];for(let t of e)t()}};function qc(e){return e==null||e===""?null:e}function Se(e){return e!=null&&e!==""}function di(e){return!Se(e)}function l4(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function rw(e,t){let n=e?JSON.stringify(e):null,i=t?JSON.stringify(t):null;return n===i}function xDe(e,t,n=!1){let i=e==null,o=t==null;if(e?.toNumber&&(e=e.toNumber()),t?.toNumber&&(t=t.toNumber()),i&&o)return 0;if(i)return-1;if(o)return 1;function r(s,a){return s>a?1:s<a?-1:0}if(typeof e!="string"||!n)return r(e,t);try{return e.localeCompare(t)}catch{return r(e,t)}}var SDe=/[&<>"']/g,EDe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Zg(e){return e?.toString().toString()??null}function ZC(e){return Zg(e)?.replace(SDe,t=>EDe[t])??null}function Pl(e){return e.eRootDiv.getRootNode()}function vi(e){return Pl(e).activeElement}function ko(e){let{gos:t,eRootDiv:n}=e,i=null,o=t.get("getDocument");return o&&Se(o)?i=o():n&&(i=n.ownerDocument),i&&Se(i)?i:document}function Vee(e){let t=vi(e);return t===null||t===ko(e).body}function Hee(e){return ko(e).defaultView||window}function j4(e){let t=null,n=null;try{t=ko(e).fullscreenElement}catch{}finally{t||(t=Pl(e));let i=t.querySelector("body");i?n=i:t instanceof ShadowRoot?n=t:t instanceof Document?n=t?.documentElement:n=t}return n}function DDe(e){return j4(e)?.clientWidth??(window.innerWidth||-1)}function kDe(e){return j4(e)?.clientHeight??(window.innerHeight||-1)}function za(e,t,n){n==null||typeof n=="string"&&n==""?$ee(e,t):ta(e,t,n)}function ta(e,t,n){e.setAttribute(jee(t),n.toString())}function $ee(e,t){e.removeAttribute(jee(t))}function jee(e){return`aria-${e}`}function pu(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function IDe(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function MDe(e){return e.getAttribute("aria-label")}function jg(e,t){za(e,"label",t)}function sw(e,t){za(e,"labelledby",t)}function Gee(e,t){za(e,"live",t)}function RDe(e,t){za(e,"atomic",t)}function TDe(e,t){za(e,"relevant",t)}function PDe(e,t){za(e,"invalid",t)}function ADe(e,t){za(e,"disabled",t)}function Uee(e,t){za(e,"hidden",t)}function c4(e,t){ta(e,"expanded",t)}function ODe(e,t){ta(e,"setsize",t)}function FDe(e,t){ta(e,"posinset",t)}function LDe(e,t){ta(e,"multiselectable",t)}function NDe(e,t){ta(e,"rowcount",t)}function Yk(e,t){ta(e,"rowindex",t)}function BDe(e,t){ta(e,"rowspan",t)}function zDe(e,t){ta(e,"colcount",t)}function Wee(e,t){ta(e,"colindex",t)}function VDe(e,t){ta(e,"colspan",t)}function HDe(e,t){ta(e,"sort",t)}function $De(e){$ee(e,"sort")}function qee(e,t){za(e,"selected",t)}function jDe(e,t){za(e,"controls",t)}function GDe(e,t){jDe(e,t.id),sw(t,e.id)}function yX(e,t){za(e,"owns",t)}function yI(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var UDe="[tabindex], input, select, button, textarea, [href]",Kee="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function YC(e){return!e||!e.matches("input, select, button, textarea")||!e.matches(Kee)?!1:Hl(e)}function ci(e,t,n={}){let{skipAriaHidden:i}=n;e.classList.toggle("ag-hidden",!t),i||Uee(e,!t)}function WDe(e,t,n={}){let{skipAriaHidden:i}=n;e.classList.toggle("ag-invisible",!t),i||Uee(e,!t)}function aw(e,t){let n="disabled",i=t?r=>r.setAttribute(n,""):r=>r.removeAttribute(n);i(e);let o=e.querySelectorAll("input")??[];for(let r of o)i(r)}function fp(e,t,n){let i=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof n=="number"){if(++i>n)break}else if(e===n)break}return!1}function Ep(e){let{height:t,width:n,borderTopWidth:i,borderRightWidth:o,borderBottomWidth:r,borderLeftWidth:s,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:u,marginTop:h,marginRight:f,marginBottom:m,marginLeft:_,boxSizing:y}=window.getComputedStyle(e),w=Number.parseFloat;return{height:w(t||"0"),width:w(n||"0"),borderTopWidth:w(i||"0"),borderRightWidth:w(o||"0"),borderBottomWidth:w(r||"0"),borderLeftWidth:w(s||"0"),paddingTop:w(a||"0"),paddingRight:w(l||"0"),paddingBottom:w(c||"0"),paddingLeft:w(u||"0"),marginTop:w(h||"0"),marginRight:w(f||"0"),marginBottom:w(m||"0"),marginLeft:w(_||"0"),boxSizing:y}}function G4(e){let t=Ep(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom-t.borderTopWidth-t.borderBottomWidth:t.height}function lw(e){let t=Ep(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight-t.borderLeftWidth-t.borderRightWidth:t.width}function Zee(e){let{height:t,marginBottom:n,marginTop:i}=Ep(e);return Math.floor(t+n+i)}function Qk(e){let{width:t,marginLeft:n,marginRight:i}=Ep(e);return Math.floor(t+n+i)}function Yee(e){let t=e.getBoundingClientRect(),{borderTopWidth:n,borderLeftWidth:i,borderRightWidth:o,borderBottomWidth:r}=Ep(e);return{top:t.top+(n||0),left:t.left+(i||0),right:t.right+(o||0),bottom:t.bottom+(r||0)}}function Jk(e,t){let n=e.scrollLeft;return t&&(n=Math.abs(n)),n}function Xk(e,t,n){n&&(t*=-1),e.scrollLeft=t}function Vo(e){for(;e?.firstChild;)e.firstChild.remove()}function Wr(e){e?.parentNode&&e.remove()}function Qee(e){return!!e.offsetParent}function Hl(e){return e.checkVisibility?e.checkVisibility({checkVisibilityCSS:!0}):!(!Qee(e)||window.getComputedStyle(e).visibility!=="visible")}function U4(e){let t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function Jee(e,t,n){n&&n.nextSibling===t||(e.firstChild?n?n.nextSibling?e.insertBefore(t,n.nextSibling):e.appendChild(t):e.firstChild&&e.firstChild!==t&&e.insertAdjacentElement("afterbegin",t):e.appendChild(t))}function Xee(e,t){for(let n=0;n<t.length;n++){let i=t[n],o=e.children[n];o!==i&&e.insertBefore(i,o)}}function qDe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLocaleLowerCase()}`)}function yw(e,t){if(t)for(let n of Object.keys(t)){let i=t[n];if(!n?.length||i==null)continue;let o=qDe(n),r=i.toString(),s=r.replace(/\s*!important/g,""),a=s.length!=r.length?"important":void 0;e.style.setProperty(o,s,a)}}function Bk(e){return()=>{let t=e();return t?W4(t)||ete(t):!0}}function W4(e){return e.clientWidth<e.scrollWidth}function ete(e){return e.clientHeight<e.scrollHeight}function eI(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):Nl(e,t)}function Nl(e,t){t=q4(t),e.style.width=t,e.style.maxWidth=t,e.style.minWidth=t}function QC(e,t){t=q4(t),e.style.height=t,e.style.maxHeight=t,e.style.minHeight=t}function q4(e){return typeof e=="number"?`${e}px`:e}function K4(e){return e instanceof Node||e instanceof HTMLElement}function xs(e,t,n){n==null||n===""?e.removeAttribute(t):e.setAttribute(t,n.toString())}function _u(e,t,n){let o=Hee(e).ResizeObserver,r=o?new o(n):null;return r?.observe(t),()=>r?.disconnect()}function Xc(e,t){let n=Hee(e);n.requestAnimationFrame?n.requestAnimationFrame(t):n.webkitRequestAnimationFrame?n.webkitRequestAnimationFrame(t):n.setTimeout(t,0)}var tte="data-ref",kz;function bX(){return kz??(kz=document.createTextNode(" ")),kz.cloneNode()}function bw(e){let{attrs:t,children:n,cls:i,ref:o,role:r,tag:s}=e,a=document.createElement(s);if(i&&(a.className=i),o&&a.setAttribute(tte,o),r&&a.setAttribute("role",r),t)for(let l of Object.keys(t))a.setAttribute(l,t[l]);if(n)if(typeof n=="string")a.textContent=n;else{let l=!0;for(let c of n)c&&(typeof c=="string"?(a.appendChild(document.createTextNode(c)),l=!1):typeof c=="function"?a.appendChild(c()):(l&&(a.appendChild(bX()),l=!1),a.append(bw(c)),a.appendChild(bX())))}return a}var KDe=["touchstart","touchend","touchmove","touchcancel","scroll"],ZDe=["wheel"],Iz={},nte=(()=>{let e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return n=>{if(typeof Iz[n]=="boolean")return Iz[n];let i=document.createElement(e[n]||"div");return n="on"+n,Iz[n]=n in i}})();function YDe(e,t){return!t||!e?!1:JDe(t).indexOf(e)>=0}function QDe(e){let t=[],n=e.target;for(;n;)t.push(n),n=n.parentElement;return t}function JDe(e){let t=e;return t.path?t.path:t.composedPath?t.composedPath():QDe(t)}function XDe(e,t,n){let i=eke(t),o;i!=null&&(o={passive:i}),e.addEventListener(t,n,o)}var eke=e=>{let t=KDe.includes(e),n=ZDe.includes(e);if(t)return!0;if(n)return!1};function ite(e,t,n){if(n===0)return!1;let i=Math.abs(e.clientX-t.clientX),o=Math.abs(e.clientY-t.clientY);return Math.max(i,o)<=n}var JC=(e,t)=>{let n=e.identifier;for(let i=0,o=t.length;i<o;++i){let r=t[i];if(r.identifier===n)return r}return null};function cw(e,t){return e.gos.isElementInThisInstance(t.target)}function tke(e,t,n){let o=e.getBoundingClientRect().height,r=DDe(n)-2,s=kDe(n)-2;if(!e.offsetParent)return;let l=Yee(e.offsetParent),{clientY:c,clientX:u}=t,h=c-l.top-o/2,f=u-l.left-10,m=ko(n),_=m.defaultView||window,y=_.pageYOffset||m.documentElement.scrollTop,w=_.pageXOffset||m.documentElement.scrollLeft;r>0&&f+e.clientWidth>r+w&&(f=r+w-e.clientWidth),f<0&&(f=0),s>0&&h+e.clientHeight>s+y&&(h=s+y-e.clientHeight),h<0&&(h=0),e.style.left=`${f}px`,e.style.top=`${h}px`}var zk=(e,...t)=>{for(let n of t){let[i,o,r,s]=n;i.addEventListener(o,r,s),e.push(n)}},Z4=e=>{if(e){for(let[t,n,i,o]of e)t.removeEventListener(n,i,o);e.length=0}},du=e=>{e.cancelable&&e.preventDefault()};function nke(e,t){return t}function ote(e){return e?.getLocaleTextFunc()??nke}function ike(e,t,n,i){let o=t[n];return e.getLocaleTextFunc()(n,typeof o=="function"?o(i):o,i)}function oke(e){return(t,n,i)=>e({key:t,defaultValue:n,variableValues:i})}function rke(e){return(t,n,i)=>{let o=e?.[t];if(o&&i?.length){let r=0;for(;!(r>=i.length||o.indexOf("${variable}")===-1);)o=o.replace("${variable}",i[r++])}return o??n}}var $l=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.beans=e,this.stubContext=e.context,this.eventSvc=e.eventSvc,this.gos=e.gos}destroy(){let{destroyFunctions:e}=this;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,n){this.localEventService||(this.localEventService=new bp),this.localEventService.addEventListener(e,t,n)}removeEventListener(e,t,n){this.localEventService?.removeEventListener(e,t,n)}dispatchLocalEvent(e){this.localEventService?.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventSvc,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){let n=[];for(let i of Object.keys(t)){let o=t[i];o&&n.push(this._setupListener(e,i,o))}return n}_setupListener(e,t,n){if(this.destroyed)return()=>null;let i;if(ske(e))e.__addEventListener(t,n),i=()=>(e.__removeEventListener(t,n),null);else{let o=ake(e);e instanceof HTMLElement?XDe(e,t,n):o?e.addListener(t,n):e.addEventListener(t,n),i=o?()=>(e.removeListener(t,n),null):()=>(e.removeEventListener(t,n),null)}return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(o=>o!==i),null)}setupPropertyListener(e,t){let{gos:n}=this;n.addPropertyEventListener(e,t);let i=()=>(n.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(o=>o!==i),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupPropertyListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;let n=e.join("-")+this.propertyListenerId++,i=o=>{if(o.changeSet){if(o.changeSet&&o.changeSet.id===this.lastChangeSetIdLookup[n])return;this.lastChangeSetIdLookup[n]=o.changeSet.id}let r={type:"propertyChanged",changeSet:o.changeSet,source:o.source};t(r)};for(let o of e)this.setupPropertyListener(o,i)}getLocaleTextFunc(){return ote(this.beans.localeSvc)}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createOptionalManagedBean(e,t){return e?this.createManagedBean(e,t):void 0}createManagedBean(e,t){let n=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),n}createBean(e,t,n){return(t||this.stubContext).createBean(e,n)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function ske(e){return e.__addEventListener!==void 0}function ake(e){return e.eventServiceType==="global"}var te=class extends $l{},CX={};function Y4(e,t){CX[t]||(e(),CX[t]=!0)}var lke={pending:!1,funcs:[]},cke={pending:!1,funcs:[]};function d4(e,t="setTimeout",n){let i=t==="raf"?cke:lke;if(i.funcs.push(e),i.pending)return;i.pending=!0;let o=()=>{let r=i.funcs.slice();i.funcs.length=0,i.pending=!1;for(let s of r)s()};t==="raf"?Xc(n,o):window.setTimeout(o,0)}function zo(e,t,n){let i;return function(...o){let r=this;window.clearTimeout(i),i=window.setTimeout(function(){e.isAlive()&&t.apply(r,o)},n)}}function wX(e,t){let n=0;return function(...i){let o=this,r=Date.now();r-n<t||(n=r,e.apply(o,i))}}function dke(e,t,n,i=100){let o=Date.now(),r=null,s=!1,a=()=>{r!=null&&(window.clearInterval(r),r=null)};e.addDestroyFunc(a);let l=()=>{let c=Date.now()-o>i;(t()||c)&&(n(),s=!0,a())};l(),s||(r=window.setInterval(l,10))}var rte=new Set(["__proto__","constructor","prototype"]);function uke(e,t){if(e!=null){if(Array.isArray(e)){for(let n=0;n<e.length;n++)t(n.toString(),e[n]);return}for(let n of Object.keys(e).filter(i=>!rte.has(i)))t(n,e[n])}}function kr(e,t,n=!0,i=!1){Se(t)&&uke(t,(o,r)=>{let s=e[o];s!==r&&(i&&s==null&&r!=null&&typeof r=="object"&&r.constructor===Object&&(s={},e[o]=s),xX(r)&&xX(s)&&!Array.isArray(s)?kr(s,r,n,i):(n||r!==void 0)&&(e[o]=r))})}function xX(e){return typeof e=="object"&&e!==null}var hke=(()=>{let e=class jc{static applyGlobalGridOptions(n){if(!jc.gridOptions)return g({},n);let i={};return kr(i,jc.gridOptions,!0,!0),jc.mergeStrategy==="deep"?kr(i,n,!0,!0):i=g(g({},i),n),jc.gridOptions.context&&(i.context=jc.gridOptions.context),n.context&&(jc.mergeStrategy==="deep"&&i.context&&kr(n.context,i.context,!0,!0),i.context=n.context),i}static applyGlobalGridOption(n,i){if(jc.mergeStrategy==="deep"){let o=pke(n);if(o&&typeof o=="object"&&typeof i=="object")return jc.applyGlobalGridOptions({[n]:i})[n]}return i}};return e.gridOptions=void 0,e.mergeStrategy="shallow",e})(),dw=hke;function ste(e,t="shallow"){dw.gridOptions=e,dw.mergeStrategy=t}function pke(e){return dw.gridOptions?.[e]}var fke={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,rowDragInsertDelay:500,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1,rowNumbers:!1,enableFilterHandlers:!1},ate="https://www.ag-grid.com";function fu(e,t,...n){e.get("debug")&&console.log("AG Grid: "+t,...n)}function XC(e,...t){Y4(()=>console.warn("AG Grid: "+e,...t),e+t?.join(""))}function Pg(e,...t){Y4(()=>console.error("AG Grid: "+e,...t),e+t?.join(""))}var lte=new Set,tI={},Ag={},Vk,cte=!1,dte=!1,mke=!1;function gke(e){let[t,n]=e.version.split(".")||[],[i,o]=Vk.split(".")||[];return t===i&&n===o}function vke(e){Vk||(Vk=e.version);let t=i=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${i} Please update all modules to the same version.`;e.version?gke(e)||Pg(t(`'${e.moduleName}' is version ${e.version} but the other modules are version ${Vk}.`)):Pg(t(`'${e.moduleName}' is incompatible.`));let n=e.validate?.();n&&!n.isValid&&Pg(`${n.message}`)}function uw(e,t,n=!1){n||(cte=!0),vke(e);let i=e.rowModels??["all"];lte.add(e);let o;t!==void 0?(dte=!0,Ag[t]===void 0&&(Ag[t]={}),o=Ag[t]):o=tI;for(let r of i)o[r]===void 0&&(o[r]={}),o[r][e.moduleName]=e;if(e.dependsOn)for(let r of e.dependsOn)uw(r,t,n)}function _ke(e){delete Ag[e]}function u4(e,t,n){let i=o=>!!tI[o]?.[e]||!!Ag[t]?.[o]?.[e];return i(n)||i("all")}function Q4(){return dte}function yke(e,t){let n=Ag[e]??{};return[...Object.values(tI.all??{}),...Object.values(n.all??{}),...Object.values(tI[t]??{}),...Object.values(n[t]??{})]}function bke(){return new Set(lte)}function Cke(){return cte}function ute(){return mke}var bI=class{static register(e){uw(e,void 0)}static registerModules(e){for(let t of e)uw(t,void 0)}},we="34.3.1",SX=2e3,EX=100,hte="_version_",pte=null,Og=`${ate}/javascript-data-grid`;function wke(e){pte=e}function xke(e){Og=e}function fte(e,t,n){return pte?.(e,t)??[kke(e,t,n)]}function J4(e,t,n,i,o){e(`${i?"warning":"error"} #${t}`,...fte(t,n,o))}function Ske(e){if(!e)return String(e);let t={};for(let n of Object.keys(e))typeof e[n]!="object"&&typeof e[n]!="function"&&(t[n]=e[n]);return JSON.stringify(t)}function Eke(e){let t=e;return e instanceof Error?t=e.toString():typeof e=="object"&&(t=Ske(e)),t}function nI(e){return e===void 0?"undefined":e===null?"null":e}function h4(e,t){return`${e}?${t.toString()}`}function Dke(e,t,n){let i=Array.from(t.entries()).sort((r,s)=>s[1].length-r[1].length),o=h4(e,t);for(let[r,s]of i){if(r===hte)continue;let a=o.length-n;if(a<=0)break;let l="...",c=a+l.length,u=s.length-c>EX?s.slice(0,s.length-c)+l:s.slice(0,EX)+l;t.set(r,u),o=h4(e,t)}return o}function mte(e,t){let n=new URLSearchParams;if(n.append(hte,we),t)for(let r of Object.keys(t))n.append(r,Eke(t[r]));let i=`${Og}/errors/${e}`,o=h4(i,n);return o.length<=SX?o:Dke(i,n,SX)}var kke=(e,t,n)=>{let i=mte(e,t),o=`${n?n+` 
`:""}Visit ${i}`;return ute()?o:`${o}${n?"":` 
  Alternatively register the ValidationModule to see the full message in the console.`}`};function ce(...e){J4(XC,e[0],e[1],!0)}function On(...e){J4(Pg,e[0],e[1],!1)}function qC(e,t,n){J4(Pg,e,t,!1,n)}function Ike(e,t){let n=t[0];return`error #${n} `+fte(n,t[1],e).join(" ")}function Bl(...e){return Ike(void 0,e)}function gte(e,t){return e.get("rowModelType")===t}function $i(e,t){return gte(e,"clientSide")}function Yg(e,t){return gte(e,"serverSide")}function Ho(e,t){return e.get("domLayout")===t}function mp(e){return oI(e)!==void 0}function vte(e){return typeof e.get("getRowHeight")=="function"}function Mke(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")}function mu(e,t,n=!1,i){let{gos:o,environment:r}=e;if(i==null&&(i=r.getDefaultRowHeight()),vte(o)){if(n)return{height:i,estimated:!0};let l={node:t,data:t.data},c=o.getCallback("getRowHeight")(l);if(p4(c))return c===0&&ce(23),{height:Math.max(1,c),estimated:!1}}if(t.detail&&o.get("masterDetail"))return Rke(o);let s=o.get("rowHeight");return{height:s&&p4(s)?s:i,estimated:!1}}function Rke(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};let t=e.get("detailRowHeight");return p4(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}function gp(e){let{environment:t,gos:n}=e,i=n.get("rowHeight");if(!i||di(i))return t.getDefaultRowHeight();let o=t.refreshRowHeightVariable();return o!==-1?o:(ce(24),t.getDefaultRowHeight())}function p4(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}function _te(e,t,n){let i=t[e.getDomDataKey()];return i?i[n]:void 0}function Cp(e,t,n,i){let o=e.getDomDataKey(),r=t[o];di(r)&&(r={},t[o]=r),r[n]=i}function Fg(e){return e.get("ensureDomOrder")?!1:e.get("animateRows")}function yte(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||Ho(e,"print"))}function Ol(e){return!e.get("autoGroupColumnDef")?.comparator&&!e.get("treeData")}function f4(e){let t=e.get("groupAggFiltering");if(typeof t=="function")return e.getCallback("groupAggFiltering");if(t===!0)return()=>!0}function bte(e){return e.get("grandTotalRow")}function Cte(e,t){return t?!1:e.get("groupDisplayType")==="groupRows"}function wte(e,t,n){return!!t.group&&!t.footer&&Cte(e,n)}function Gg(e){let t=e.getCallback("getRowId");return t===void 0?t:n=>{let i=t(n);return typeof i!="string"&&(Y4(()=>ce(25,{id:i}),"getRowIdString"),i=String(i)),i}}function Tke(e,t){let n=e.get("groupHideParentOfSingleChild");return!!(n===!0||n==="leafGroupsOnly"&&t.leafGroup||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")&&t.leafGroup)}function Pke(e){let t=e.get("maxConcurrentDatasourceRequests");return t>0?t:void 0}function Lg(e){return e?.checkboxes??!0}function Hk(e){return e?.mode==="multiRow"&&(e.headerCheckbox??!0)}function iI(e){if(typeof e=="object")return e.checkboxLocation??"selectionColumn"}function Mz(e){return e?.hideDisabledCheckboxes??!1}function Ake(e){return typeof e.get("rowSelection")!="string"}function Qc(e){let t=e.get("cellSelection");return t!==void 0?!!t:e.get("enableRangeSelection")}function xte(e){let t=e.get("rowSelection")??"single";if(typeof t=="string"){let n=e.get("suppressRowClickSelection"),i=e.get("suppressRowDeselection");return n&&i?!1:n?"enableDeselection":i?"enableSelection":!0}return t.mode==="singleRow"||t.mode==="multiRow"?t.enableClickSelection??!1:!1}function Oke(e){let t=xte(e);return t===!0||t==="enableSelection"}function Fke(e){let t=xte(e);return t===!0||t==="enableDeselection"}function m4(e){let t=e.get("rowSelection");return typeof t=="string"?e.get("isRowSelectable"):t?.isRowSelectable}function oI(e){let t="beanName"in e&&e.beanName==="gos"?e.get("rowSelection"):e.rowSelection;if(typeof t=="string")switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}switch(t?.mode){case"multiRow":case"singleRow":return t.mode;default:return}}function hw(e){return oI(e)==="multiRow"}function Lke(e){let t=e.get("rowSelection");return typeof t=="string"?e.get("rowMultiSelectWithClick"):t?.enableSelectionWithoutKeys??!1}function rI(e){let t=e.get("rowSelection");if(typeof t=="string"){let n=e.get("groupSelectsChildren"),i=e.get("groupSelectsFiltered");return n&&i?"filteredDescendants":n?"descendants":"self"}return t?.mode==="multiRow"?t.groupSelects:void 0}function Ste(e,t=!0){let n=e.get("rowSelection");return typeof n!="object"?t?"all":void 0:n.mode==="multiRow"?n.selectAll:"all"}function Nke(e){let t=e.get("rowSelection");return typeof t=="string"?!1:t?.mode==="multiRow"?t.ctrlASelectsRows??!1:!1}function pw(e){let t=rI(e);return t==="descendants"||t==="filteredDescendants"}function DX(e){let t=e.get("rowSelection");return typeof t=="object"&&t.masterSelects||"self"}function Bke(e){return e.isModuleRegistered("SetFilter")&&!e.get("suppressSetFilterByDefault")}function Ss(e){return e.get("columnMenu")==="legacy"}function zke(e){return!Ss(e)}function Vke(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}function Ete(e,t,n){typeof e!="object"&&(e={});let i=g({},e);for(let o of n){let r=t[o];typeof r<"u"&&(i[o]=r)}return i}function Dte(e,t){if(!e)return;let n={},i=!1;for(let s of Object.keys(e))n[s]=e[s],i=!0;if(!i)return;let o={type:"gridOptionsChanged",options:n};t.dispatchEvent(o);let r=g({type:"componentStateChanged"},n);t.dispatchEvent(r)}function at(e,t){return e.addCommon(t)}function kX({gos:e},t){return t.button===2||t.ctrlKey&&e.get("allowContextMenuWithControlKey")}var Hke={resizable:!0,sortable:!0},$ke=0;function kte(){return $ke++}function gu(e){return e instanceof Dp}var Dp=class extends te{constructor(e,t,n,i){super(),this.colDef=e,this.userProvidedColDef=t,this.colId=n,this.primary=i,this.isColumn=!0,this.instanceId=kte(),this.autoHeaderHeight=null,this.moving=!1,this.resizing=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new bp,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null,this.colIdSanitised=ZC(n)}destroy(){super.destroy(),this.beans.rowSpanSvc?.deregister(this)}getInstanceId(){return this.instanceId}setState(){let{colDef:e,beans:{sortSvc:t,pinnedCols:n,colFlex:i}}=this;t?.initCol(this);let o=e.hide;o!==void 0?this.visible=!o:this.visible=!e.initialHide,n?.initCol(this),i?.initCol(this)}setColDef(e,t,n){let i=e.spanRows!==this.colDef.spanRows;this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),i&&(this.beans.rowSpanSvc?.deregister(this),this.initRowSpan()),this.dispatchColEvent("colDefChanged",n)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.setState(),this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.initRowSpan(),this.addPivotListener()}initDotNotation(){let{gos:e,colDef:{field:t,tooltipField:n}}=this,i=e.get("suppressFieldDotNotation");this.fieldContainsDots=Se(t)&&t.includes(".")&&!i,this.tooltipFieldContainsDots=Se(n)&&n.includes(".")&&!i}initMinAndMaxWidths(){let e=this.colDef;this.minWidth=e.minWidth??this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.beans.tooltipSvc?.initCol(this)}initRowSpan(){this.colDef.spanRows&&this.beans.rowSpanSvc?.register(this)}addPivotListener(){let e=this.beans.pivotColDefSvc,t=this.colDef.pivotValueColumn;!e||!t||this.addManagedListeners(t,{colDefChanged:n=>{let i=e.recreateColDef(this.colDef);this.setColDef(i,i,n.source)}})}resetActualWidth(e){let t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t,n=e.width,i=e.initialWidth;return n!=null?t=n:i!=null?t=i:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){return this.beans.showRowGroupCols?.isRowGroupDisplayed(this,e)??!1}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(e,t){this.colEventSvc.addEventListener(e,t)}__removeEventListener(e,t){this.colEventSvc.removeEventListener(e,t)}addEventListener(e,t){this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,this.colEventSvc);let n=this.frameworkEventListenerService?.wrap(e,t)??t;this.colEventSvc.addEventListener(e,n)}removeEventListener(e,t){let n=this.frameworkEventListenerService?.unwrap(e,t)??t;this.colEventSvc.removeEventListener(e,n)}createColumnFunctionCallbackParams(e){return at(this.gos,{node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){return this.beans.cellNavigation?.isSuppressNavigable(this,e)??!1}isCellEditable(e){return this.beans.editSvc?.isCellEditable({rowNode:e,column:this})??!1}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.beans.selectionSvc?.isCellCheckboxSelection(this,e)??!1}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?.suppressPaste??null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??Hke[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){let n=this.createColumnFunctionCallbackParams(e);return t(n)}return!1}createColumnEvent(e,t){return at(this.gos,{type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return di(this.sort)}isSorting(){return Se(this.sort)}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchColEvent("leftChanged",t))}isFilterActive(){return this.filterActive}isHovered(){return ce(261),!!this.beans.colHover?.isHovered(this)}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.dispatchColEvent("firstRightPinnedChanged",t))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.dispatchColEvent("lastLeftPinnedChanged",t))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){let n=e===!0;this.visible!==n&&(this.visible=n,this.dispatchColEvent("visibleChanged",t)),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getFirstRealParent(){let e=this.getOriginalParent();for(;e?.isPadding();)e=e.getOriginalParent();return e}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e?.isPadding())return{numberOfParents:0,isSpanningTotal:!1};let t=e.getPaddingLevel()+1,n=!0;for(;e;){if(!e.isPadding()){n=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:n}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){let t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return at(this.gos,{node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(di(this.colDef.colSpan))return 1;let t=this.createBaseColDefParams(e),n=this.colDef.colSpan(t);return Math.max(n,1)}getRowSpan(e){if(di(this.colDef.rowSpan))return 1;let t=this.createBaseColDefParams(e),n=this.colDef.rowSpan(t);return Math.max(n,1)}setActualWidth(e,t,n=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex!=null&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),n||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.dispatchColEvent("widthChanged",e)}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchColEvent(e,t,n){let i=this.createColumnEvent(e,t);n&&kr(i,n),this.colEventSvc.dispatchEvent(i)}dispatchStateUpdatedEvent(e){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key:e})}};function ar(e){return e instanceof $k}var $k=class extends te{constructor(e,t,n,i){super(),this.colGroupDef=e,this.groupId=t,this.padding=n,this.level=i,this.isColumn=!1,this.expandable=!1,this.instanceId=kte(),this.expandableListenerRemoveCallback=null,this.expanded=!!e?.openByDefault}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}forEachLeafColumn(e){if(this.children)for(let t of this.children)gu(t)?e(t):ar(t)&&t.forEachLeafColumn(e)}addLeafColumns(e){if(this.children)for(let t of this.children)gu(t)?e.push(t):ar(t)&&t.addLeafColumns(e)}getColumnGroupShow(){let e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();let e=this.onColumnVisibilityChanged.bind(this);for(let t of this.getLeafColumns())t.__addEventListener("visibleChanged",e);this.expandableListenerRemoveCallback=()=>{for(let t of this.getLeafColumns())t.__removeEventListener("visibleChanged",e);this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,n=!1,i=this.findChildrenRemovingPadding();for(let r=0,s=i.length;r<s;r++){let a=i[r];if(!a.isVisible())continue;let l=a.getColumnGroupShow();l==="open"?(e=!0,n=!0):l==="closed"?(t=!0,n=!0):(e=!0,t=!0)}let o=e&&t&&n;this.expandable!==o&&(this.expandable=o,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){let e=[],t=n=>{for(let i of n)ar(i)&&i.isPadding()?t(i.children):e.push(i)};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},jke={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function IX(e,t,n){let i={},o=e.gos;return Object.assign(i,o.get("defaultColGroupDef")),Object.assign(i,t),o.validateColDef(i,n),i}var Gke=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=l4(e);let n=0;for(;;){let i=e??t;if(i?n!==0&&(i+="_"+n):i=n,!this.existingKeys[i]){let o=String(i);return e&&n>0&&ce(273,{providedId:e,usedId:o}),this.existingKeys[o]=!0,o}n++}}},Dyt=Object.freeze([]);function Hn(e){if(e?.length)return e[e.length-1]}function yu(e,t,n){if(e===t)return!0;if(!e||!t)return e==null&&t==null;let i=e.length;if(i!==t.length)return!1;for(let o=0;o<i;o++)if(e[o]!==t[o]&&!n?.(e[o],t[o]))return!1;return!0}function HC(e,t){if(e)for(let n of e)t(n)}function Ba(e,t){let n=e.indexOf(t);n>=0&&e.splice(n,1)}function MX(e,t,n){for(let i=0;i<t.length;i++)Ba(e,t[i]);for(let i=t.length-1;i>=0;i--)e.splice(n,0,t[i])}var CI="ag-Grid-AutoColumn",Ite="ag-Grid-SelectionColumn",Mte="ag-Grid-RowNumbersColumn";function Rte(e){let t=[],n=i=>{for(let o=0;o<i.length;o++){let r=i[o];gu(r)?t.push(r):ar(r)&&n(r.getChildren())}};return n(e),t}function Gc(e){return e.reduce((t,n)=>t+n.getActualWidth(),0)}function sI(e,t,n){let i={};if(!t)return;Zc(null,t,r=>{i[r.getInstanceId()]=r}),n&&Zc(null,n,r=>{i[r.getInstanceId()]=null});let o=Object.values(i).filter(r=>r!=null);e.context.destroyBeans(o)}function X4(e){return e.getId().startsWith(CI)}function ed(e){return(typeof e=="string"?e:"getColId"in e?e.getColId():e.colId)?.startsWith(Ite)??!1}function Kc(e){return(typeof e=="string"?e:"getColId"in e?e.getColId():e.colId)?.startsWith(Mte)??!1}function Uke(e){return ed(e)||Kc(e)}function aI(e){let t=[];return e instanceof Array?t=e:typeof e=="string"&&(t=e.split(",")),t}function Wke(e,t){return yu(e,t,(n,i)=>n.getColId()===i.getColId())}function qke(e){e.map={};for(let t of e.list)e.map[t.getId()]=t}function Ng(e){return e==="optionsUpdated"?"gridOptionsChanged":e}function ew(e,t){let n=e===t,i=e.getColDef()===t,o=e.getColId()==t;return n||i||o}var Kke=(e,t)=>(n,i)=>{let o={value1:void 0,value2:void 0},r=!1;return e&&(e[n]!==void 0&&(o.value1=e[n],r=!0),Se(i)&&e[i]!==void 0&&(o.value2=e[i],r=!0)),!r&&t&&(t[n]!==void 0&&(o.value1=t[n]),Se(i)&&t[i]!==void 0&&(o.value2=t[i])),o},Zke=(e,t)=>{ar(e)&&e.setupExpandable(),e.originalParent=t};function Yke(e,t=null,n,i,o){let r=new Gke,{existingCols:s,existingGroups:a,existingColKeys:l}=Qke(i);r.addExistingKeys(l);let c=Tte(e,t,0,n,s,r,a,o),{colGroupSvc:u}=e,h=u?.findMaxDepth(c,0)??0,f=u?u.balanceColumnTree(c,0,h,r):c;return Zc(null,f,Zke),{columnTree:f,treeDepth:h}}function Qke(e){let t=[],n=[],i=[];return e&&Zc(null,e,o=>{if(ar(o)){let r=o;n.push(r)}else{let r=o;i.push(r.getId()),t.push(r)}}),{existingCols:t,existingGroups:n,existingColKeys:i}}function Tte(e,t,n,i,o,r,s,a){if(!t)return[];let{colGroupSvc:l}=e,c=new Array(t.length);for(let u=0;u<c.length;u++){let h=t[u];l&&iIe(h)?c[u]=l.createProvidedColumnGroup(i,h,n,o,r,s,a):c[u]=Jke(e,i,h,o,r,a)}return c}function Jke(e,t,n,i,o,r){let s=eIe(n,i);s&&i?.splice(s.idx,1);let a=s?.column;if(a){let l=g4(e,n,a.getColId());a.setColDef(l,n,r),Xke(e,a,l,r)}else{let l=o.getUniqueKey(n.colId,n.field),c=g4(e,n,l);a=new Dp(c,n,l,t),e.context.createBean(a)}return e.dataTypeSvc?.addColumnListeners(a),a}function Pte(e,t,n,i,o,r,s,a){let{sortSvc:l,pinnedCols:c,colFlex:u}=e;n!==void 0&&t.setVisible(!n,a),l&&(l.updateColSort(t,i,a),o!==void 0&&l.setColSortIndex(t,o)),r!==void 0&&c?.setColPinned(t,r),s!==void 0&&u?.setColFlex(t,s)}function Xke(e,t,n,i){Pte(e,t,n.hide,n.sort,n.sortIndex,n.pinned,n.flex,i);let o=t.getFlex();if(!(o!=null&&o>0))if(n.width!=null)t.setActualWidth(n.width,i);else{let r=t.getActualWidth();t.setActualWidth(r,i)}}function eIe(e,t){if(t)for(let n=0;n<t.length;n++){let i=t[n].getUserProvidedColDef();if(!i)continue;if(e.colId!=null){if(t[n].getId()===e.colId)return{idx:n,column:t[n]};continue}if(e.field!=null){if(i.field===e.field)return{idx:n,column:t[n]};continue}if(i===e)return{idx:n,column:t[n]}}}function g4(e,t,n,i){let{gos:o,dataTypeSvc:r}=e,s={},a=o.get("defaultColDef");kr(s,a,!1,!0);let l=tIe(e,s,t,n);l&&nIe(e,l,s);let c=s.cellDataType;kr(s,t,!1,!0),c!==void 0&&(s.cellDataType=c);let u=o.get("autoGroupColumnDef"),h=Ol(o);return t.rowGroup&&u&&h&&kr(s,{sort:u.sort,initialSort:u.initialSort},!1,!0),r&&(r.postProcess(s),r.validateColDef(s)),o.validateColDef(s,n,i),s}function tIe(e,t,n,i){let o=e.dataTypeSvc?.updateColDefAndGetColumnType(t,n,i),r=n.type??o??t.type;return t.type=r,r?aI(r):void 0}function nIe(e,t,n){if(!t.length)return;let i=Object.assign({},jke),o=e.gos.get("columnTypes")||{};for(let r of Object.keys(o)){let s=o[r];r in i?ce(34,{key:r}):(s.type&&ce(35),i[r]=s)}for(let r of t){let s=i[r.trim()];s?kr(n,s,!1,!0):ce(36,{t:r})}}function iIe(e){return e.children!==void 0}function Zc(e,t,n){if(t)for(let i=0;i<t.length;i++){let o=t[i];ar(o)&&Zc(o,o.getChildren(),n),n(o,e)}}function Ate(e,t){let n=[],i=[],o=[];return e.forEach(s=>{let a=s.getColDef().lockPosition;a==="right"?o.push(s):a==="left"||a===!0?n.push(s):i.push(s)}),t.get("enableRtl")?[...o,...i,...n]:[...n,...i,...o]}function Ote(e,t){let n=!0;return Zc(null,t,i=>{if(!ar(i))return;let o=i;if(!o.getColGroupDef()?.marryChildren)return;let a=[];for(let f of o.getLeafColumns()){let m=e.indexOf(f);a.push(m)}let l=Math.max.apply(Math,a),c=Math.min.apply(Math,a),u=l-c,h=o.getLeafColumns().length-1;u>h&&(n=!1)}),n}function Fte(e,t){if(!e||e.length==0)return;let n=t(e[0]);for(let i=1;i<e.length;i++)if(n!==t(e[i]))return;return n}function Lte(e,t,n){if(!t.length)return;let i=t.length===1?t[0]:null,o=Fte(t,r=>r.getPinned());e.dispatchEvent({type:"columnPinned",pinned:o??null,columns:t,column:i,source:n})}function oIe(e,t,n){if(!t.length)return;let i=t.length===1?t[0]:null,o=Fte(t,r=>r.isVisible());e.dispatchEvent({type:"columnVisible",visible:o,columns:t,column:i,source:n})}function rIe(e,t,n,i){e.dispatchEvent({type:t,columns:n,column:n&&n.length==1?n[0]:null,source:i})}function Ug(e,t,n,i,o=null){t?.length&&e.dispatchEvent({type:"columnResized",columns:t,column:t.length===1?t[0]:null,flexColumns:o,finished:n,source:i})}function Na(e,t,n){let{colModel:i,rowGroupColsSvc:o,pivotColsSvc:r,autoColSvc:s,selectionColSvc:a,colAnimation:l,visibleCols:c,pivotResultCols:u,environment:h,valueColsSvc:f,eventSvc:m,gos:_}=e,y=i.getColDefCols()??[],w=a?.getColumns();if(!y.length&&!w?.length)return!1;if(t?.state&&!t.state.forEach)return ce(32),!1;let C=(F,H,j,re,ae)=>{if(!F)return;let se=Kke(H,t.defaultState),Te=se("flex").value1;if(Pte(e,F,se("hide").value1,se("sort").value1,se("sortIndex").value1,se("pinned").value1,Te,n),Te==null){let ue=se("width").value1;if(ue!=null){let De=F.getColDef().minWidth??h.getDefaultColumnMinWidth();De!=null&&ue>=De&&F.setActualWidth(ue,n)}}ae||!F.isPrimary()||(f?.syncColumnWithState(F,n,se),o?.syncColumnWithState(F,n,se,j),r?.syncColumnWithState(F,n,se,re))},S=(F,H,j)=>{let re=Nte(e,n),ae=H.slice(),se={},Te={},ue=[],De=[],Ne=[],Pe=0,Le=o?.columns.slice()??[],mt=r?.columns.slice()??[];for(let We of F){let vt=We.colId;if(vt.startsWith(CI)){ue.push(We),Ne.push(We);continue}if(ed(vt)){De.push(We),Ne.push(We);continue}let Dt=j(vt);Dt?(C(Dt,We,se,Te,!1),Ba(ae,Dt)):(Ne.push(We),Pe+=1)}let ve=We=>C(We,null,se,Te,!1);ae.forEach(ve),o?.sortColumns(RX.bind(o,se,Le)),r?.sortColumns(RX.bind(r,Te,mt)),i.refreshCols(!1,n);let Ve=(We,vt,It=[])=>{for(let Dt of vt){let jt=We(Dt.colId);Ba(It,jt),C(jt,Dt,null,null,!0)}It.forEach(ve)};return Ve(We=>s?.getColumn(We)??null,ue,s?.getColumns()?.slice()),Ve(We=>a?.getColumn(We)??null,De,a?.getColumns()?.slice()),aIe(t,i,_),c.refresh(n),m.dispatchEvent({type:"columnEverythingChanged",source:n}),re(),{unmatchedAndAutoStates:Ne,unmatchedCount:Pe}};l?.start();let{unmatchedAndAutoStates:I,unmatchedCount:O}=S(t.state||[],y,F=>i.getColDefCol(F));if(I.length>0||Se(t.defaultState)){let F=u?.getPivotResultCols()?.list??[];O=S(I,F,H=>u?.getPivotResultCol(H)??null).unmatchedCount}return l?.finish(),O===0}function sIe(e,t){let{colModel:n,autoColSvc:i,selectionColSvc:o,eventSvc:r,gos:s}=e,a=n.getColDefCols();if(!a?.length)return;let l=n.getColDefColTree(),c=Rte(l),u=[],h=1e3,f=1e3,m=S=>{let I=Bte(S);di(I.rowGroupIndex)&&I.rowGroup&&(I.rowGroupIndex=h++),di(I.pivotIndex)&&I.pivot&&(I.pivotIndex=f++),u.push(I)};i?.getColumns()?.forEach(m),o?.getColumns()?.forEach(m),c?.forEach(m),Na(e,{state:u},t);let _=i?.getColumns()??[],C=[...o?.getColumns()??[],..._,...a].map(S=>({colId:S.colId}));Na(e,{state:C,applyOrder:!0},t),r.dispatchEvent(at(s,{type:"columnsReset",source:t}))}function Nte(e,t){let{rowGroupColsSvc:n,pivotColsSvc:i,valueColsSvc:o,colModel:r,sortSvc:s,eventSvc:a}=e,l={rowGroupColumns:n?.columns.slice()??[],pivotColumns:i?.columns.slice()??[],valueColumns:o?.columns.slice()??[]},c=lI(e),u={};for(let h of c)u[h.colId]=h;return()=>{let h=(H,j,re,ae)=>{let se=j.map(ae),Te=re.map(ae);if(yu(se,Te))return;let De=new Set(j);for(let Pe of re)De.delete(Pe)||De.add(Pe);let Ne=[...De];a.dispatchEvent({type:H,columns:Ne,column:Ne.length===1?Ne[0]:null,source:t})},f=H=>{let j=[];return r.forAllCols(re=>{let ae=u[re.getColId()];ae&&H(ae,re)&&j.push(re)}),j},m=H=>H.getColId();h("columnRowGroupChanged",l.rowGroupColumns,n?.columns??[],m),h("columnPivotChanged",l.pivotColumns,i?.columns??[],m);let y=f((H,j)=>{let re=H.aggFunc!=null,ae=re!=j.isValueActive(),se=re&&H.aggFunc!=j.getAggFunc();return ae||se});y.length>0&&rIe(a,"columnValueChanged",y,t),Ug(a,f((H,j)=>H.width!=j.getActualWidth()),!0,t),Lte(a,f((H,j)=>H.pinned!=j.getPinned()),t),oIe(a,f((H,j)=>H.hide==j.isVisible()),t);let O=f((H,j)=>H.sort!=j.getSort()||H.sortIndex!=j.getSortIndex());O.length>0&&s?.dispatchSortChangedEvents(t,O);let F=lI(e);cIe(c,F,t,r,a)}}function lI(e){let{colModel:t,rowGroupColsSvc:n,pivotColsSvc:i}=e,o=t.getColDefCols();if(di(o)||!t.isAlive())return[];let r=n?.columns,s=i?.columns,a=[],l=u=>{let h=u.isRowGroupActive()&&r?r.indexOf(u):null,f=u.isPivotActive()&&s?s.indexOf(u):null,m=u.isValueActive()?u.getAggFunc():null,_=u.getSort()!=null?u.getSort():null,y=u.getSortIndex()!=null?u.getSortIndex():null;a.push({colId:u.getColId(),width:u.getActualWidth(),hide:!u.isVisible(),pinned:u.getPinned(),sort:_,sortIndex:y,aggFunc:m,rowGroup:u.isRowGroupActive(),rowGroupIndex:h,pivot:u.isPivotActive(),pivotIndex:f,flex:u.getFlex()??null})};t.forAllCols(u=>l(u));let c=new Map(t.getCols().map((u,h)=>[u.getColId(),h]));return a.sort((u,h)=>{let f=c.has(u.colId)?c.get(u.colId):-1,m=c.has(h.colId)?c.get(h.colId):-1;return f-m}),a}function Bte(e){let t=(_,y)=>_??y??null,n=e.getColDef(),i=t(n.sort,n.initialSort),o=t(n.sortIndex,n.initialSortIndex),r=t(n.hide,n.initialHide),s=t(n.pinned,n.initialPinned),a=t(n.width,n.initialWidth),l=t(n.flex,n.initialFlex),c=t(n.rowGroupIndex,n.initialRowGroupIndex),u=t(n.rowGroup,n.initialRowGroup);c==null&&!u&&(c=null,u=null);let h=t(n.pivotIndex,n.initialPivotIndex),f=t(n.pivot,n.initialPivot);h==null&&!f&&(h=null,f=null);let m=t(n.aggFunc,n.initialAggFunc);return{colId:e.getColId(),sort:i,sortIndex:o,hide:r,pinned:s,width:a,flex:l,rowGroup:u,rowGroupIndex:c,pivot:f,pivotIndex:h,aggFunc:m}}function aIe(e,t,n){if(!e.applyOrder||!e.state)return;let i=[];for(let o of e.state)o.colId!=null&&i.push(o.colId);lIe(t.cols,i,t,n)}function lIe(e,t,n,i){if(e==null)return;let o=[],r={};for(let a of t){if(r[a])continue;let l=e.map[a];l&&(o.push(l),r[a]=!0)}let s=0;for(let a of e.list){let l=a.getColId();if(r[l]!=null)continue;l.startsWith(CI)?o.splice(s++,0,a):o.push(a)}if(o=Ate(o,i),!Ote(o,n.getColTree())){ce(39);return}e.list=o}function cIe(e,t,n,i,o){let r={};for(let u of t)r[u.colId]=u;let s={};for(let u of e)r[u.colId]&&(s[u.colId]=!0);let a=e.filter(u=>s[u.colId]),l=t.filter(u=>s[u.colId]),c=[];l.forEach((u,h)=>{let f=a?.[h];if(f&&f.colId!==u.colId){let m=i.getCol(f.colId);m&&c.push(m)}}),c.length&&o.dispatchEvent({type:"columnMoved",columns:c,column:c.length===1?c[0]:null,finished:!0,source:n})}var RX=(e,t,n,i)=>{let o=e[n.getId()],r=e[i.getId()],s=o!=null,a=r!=null;if(s&&a)return o-r;if(s)return-1;if(a)return 1;let l=t.indexOf(n),c=t.indexOf(i),u=l>=0,h=c>=0;return u&&h?l-c:u?-1:1},dIe=class extends te{constructor(){super(...arguments),this.beanName="colModel",this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get("pivotMode"),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents","rowNumbers","hidePaddedHeaderRows"],e=>this.refreshAll(Ng(e.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],this.recreateColumnDefs.bind(this)),this.addManagedPropertyListener("pivotMode",e=>this.setPivotMode(this.gos.get("pivotMode"),Ng(e.source)))}createColsFromColDefs(e){let{beans:t}=this,{valueCache:n,colAutosize:i,rowGroupColsSvc:o,pivotColsSvc:r,valueColsSvc:s,visibleCols:a,eventSvc:l,groupHierarchyColSvc:c}=t,u=this.colDefs?Nte(t,e):void 0;n?.expire();let h=this.colDefCols?.list,f=this.colDefCols?.tree,m=Yke(t,this.colDefs,!0,f,e);sI(t,this.colDefCols?.tree,m.columnTree);let _=m.columnTree,y=m.treeDepth,w=Rte(_),C={};for(let S of w)C[S.getId()]=S;this.colDefCols={tree:_,treeDepth:y,list:w,map:C},this.createColumnsForService([c],this.colDefCols,e),o?.extractCols(e,h),r?.extractCols(e,h),s?.extractCols(e,h),this.ready=!0,this.refreshCols(!0,e),a.refresh(e),l.dispatchEvent({type:"columnEverythingChanged",source:e}),u&&(this.changeEventsDispatching=!0,u(),this.changeEventsDispatching=!1),l.dispatchEvent({type:"newColumnsLoaded",source:e}),e==="gridInitializing"&&i?.applyAutosizeStrategy()}refreshCols(e,t){if(!this.colDefCols)return;let n=this.cols?.tree;this.saveColOrder();let{autoColSvc:i,selectionColSvc:o,rowNumbersSvc:r,quickFilter:s,pivotResultCols:a,showRowGroupCols:l,rowAutoHeight:c,visibleCols:u,colViewport:h,eventSvc:f}=this.beans,m=this.selectCols(a,this.colDefCols);this.createColumnsForService([i,o,r],m,t);let _=Mke(this.gos,this.showingPivotResult);(!e||_)&&this.restoreColOrder(m),this.positionLockedCols(m),l?.refresh(),s?.refreshCols(),this.setColSpanActive(),c?.setAutoHeightActive(m),u.clear(),h.clear(),!yu(n,this.cols.tree)&&f.dispatchEvent({type:"gridColumnsChanged"})}createColumnsForService(e,t,n){for(let i of e)i&&(i.createColumns(t,o=>{this.lastOrder=o(this.lastOrder),this.lastPivotOrder=o(this.lastPivotOrder)},n),i.addColumns(t))}selectCols(e,t){let n=e?.getPivotResultCols()??null;this.showingPivotResult=n!=null;let{map:i,list:o,tree:r,treeDepth:s}=n??t;return this.cols={list:o.slice(),map:g({},i),tree:r.slice(),treeDepth:s},n&&(n.list.some(l=>this.cols?.map[l.getColId()]!==void 0)||(this.lastPivotOrder=null)),this.cols}getColsToShow(){if(!this.cols)return[];let{valueColsSvc:e,selectionColSvc:t,gos:n}=this.beans,i=this.isPivotMode()&&!this.showingPivotResult,o=t?.isSelectionColumnEnabled(),r=n.get("rowNumbers"),s=e?.columns;return this.cols.list.filter(l=>{let c=X4(l);if(i){let u=s?.includes(l);return c||u||o&&ed(l)||r&&Kc(l)}else return c||l.isVisible()})}refreshAll(e){this.ready&&(this.refreshCols(!1,e),this.beans.visibleCols.refresh(e))}setColsVisible(e,t=!1,n){Na(this.beans,{state:e.map(i=>({colId:typeof i=="string"?i:i.getColId(),hide:!t}))},n)}restoreColOrder(e){let t=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!t)return;let n=t.filter(h=>e.map[h.getId()]!=null);if(n.length===0)return;if(n.length===e.list.length){e.list=n;return}let i=h=>{let f=h.getOriginalParent();return f?f.getChildren().length>1?!0:i(f):!1};if(!n.some(h=>i(h))){let h=new Set(n);for(let f of e.list)h.has(f)||n.push(f);e.list=n;return}let o=new Map;for(let h=0;h<n.length;h++){let f=n[h];o.set(f,h)}let r=e.list.filter(h=>!o.has(h));if(r.length===0){e.list=n;return}let s=(h,f)=>{let m=f?f.getOriginalParent():h.getOriginalParent();if(!m)return null;let _=null,y=null;for(let w of m.getChildren())if(!(w===f||w===h)){if(w instanceof Dp){let C=o.get(w);if(C==null)continue;(_==null||_<C)&&(_=C,y=w);continue}w.forEachLeafColumn(C=>{let S=o.get(C);S!=null&&(_==null||_<S)&&(_=S,y=C)})}return y??s(h,m)},a=[],l=new Map;for(let h of r){let f=s(h,null);if(f==null){a.push(h);continue}let m=l.get(f);m===void 0?l.set(f,h):Array.isArray(m)?m.push(h):l.set(f,[m,h])}let c=new Array(e.list.length),u=c.length-1;for(let h=a.length-1;h>=0;h--)c[u--]=a[h];for(let h=n.length-1;h>=0;h--){let f=n[h],m=l.get(f);if(m)if(Array.isArray(m))for(let _=m.length-1;_>=0;_--){let y=m[_];c[u--]=y}else c[u--]=m;c[u--]=f}e.list=c}positionLockedCols(e){e.list=Ate(e.list,this.gos)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list??null:this.lastOrder=this.cols?.list??null}getColumnDefs(e){return this.colDefCols&&this.beans.colDefFactory?.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,this.cols?.list??[],e)}setColSpanActive(){this.colSpanActive=!!this.cols?.list.some(e=>e.getColDef().colSpan!=null)}isPivotMode(){return this.pivotMode}setPivotMode(e,t){if(e===this.pivotMode||(this.pivotMode=e,!this.ready))return;this.refreshCols(!1,t);let{visibleCols:n,eventSvc:i}=this.beans;n.refresh(t),i.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){let e=this.beans.pivotColsSvc?.columns;return this.pivotMode&&!!e?.length}recreateColumnDefs(e){if(!this.cols)return;this.beans.autoColSvc?.updateColumns(e);let t=Ng(e.source);this.createColsFromColDefs(t)}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){sI(this.beans,this.colDefCols?.tree),super.destroy()}getColTree(){return this.cols?.tree??[]}getColDefColTree(){return this.colDefCols?.tree??[]}getColDefCols(){return this.colDefCols?.list??null}getCols(){return this.cols?.list??[]}forAllCols(e){let{pivotResultCols:t,autoColSvc:n,selectionColSvc:i,groupHierarchyColSvc:o}=this.beans;HC(this.colDefCols?.list,e),HC(n?.columns?.list,e),HC(i?.columns?.list,e),HC(o?.columns?.list,e),HC(t?.getPivotResultCols()?.list,e)}getColsForKeys(e){return e?e.map(t=>this.getCol(t)).filter(t=>t!=null):[]}getColDefCol(e){return this.colDefCols?.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColById(e){return this.cols?.map[e]??null}getColFromCollection(e,t){if(t==null)return null;let{map:n,list:i}=t;if(typeof e=="string"&&n[e])return n[e];for(let a=0;a<i.length;a++)if(ew(i[a],e))return i[a];let{autoColSvc:o,selectionColSvc:r,groupHierarchyColSvc:s}=this.beans;return o?.getColumn(e)??r?.getColumn(e)??s?.getColumn(e)??null}};var zte=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){let t=this.existingIds[e],n;return typeof t!="number"?n=0:n=t+1,this.existingIds[e]=n,n}};function Cw(e,t,n){return n&&e.addDestroyFunc(()=>t.destroyBean(n)),n??e}var Ce=null;function TX(e){return typeof e?.getGui=="function"}var Vte=class{constructor(e){this.cssClassStates={},this.getGui=e}toggleCss(e,t){if(!e)return;if(e.indexOf(" ")>=0){let i=(e||"").split(" ");if(i.length>1){for(let o of i)this.toggleCss(o,t);return}}this.cssClassStates[e]!==t&&e.length&&(this.getGui()?.classList.toggle(e,t),this.cssClassStates[e]=t)}},uIe=0,ww=class extends $l{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=uIe++,this.cssManager=new Vte(()=>this.eGui),this.componentSelectors=new Map((t??[]).map(n=>[n.selector,n])),e&&this.setTemplate(e)}preConstruct(){this.wireTemplate(this.getGui());let e="component-"+Object.getPrototypeOf(this)?.constructor?.name;for(let t of this.css??[])this.beans.environment.addGlobalCSS(t,e)}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getDataRefAttribute(e){return e.getAttribute?e.getAttribute(tte):null}applyElementsToComponent(e,t,n,i=null){if(t===void 0&&(t=this.getDataRefAttribute(e)),t){let o=this[t];if(o===Ce)this[t]=i??e;else{let r=n?.[t];if(!this.suppressDataRefValidation&&!r)throw new Error(`data-ref: ${t} on ${this.constructor.name} with ${o}`)}}}createChildComponentsFromTags(e,t){let n=[];for(let i of e.childNodes??[])n.push(i);for(let i of n){if(!(i instanceof HTMLElement))continue;let o=this.createComponentFromElement(i,r=>{let s=r.getGui();if(s)for(let a of i.attributes??[])s.setAttribute(a.name,a.value)},t);if(o){if(o.addItems&&i.children.length){this.createChildComponentsFromTags(i,t);let r=Array.prototype.slice.call(i.children);o.addItems(r)}this.swapComponentForNode(o,e,i)}else i.childNodes&&this.createChildComponentsFromTags(i,t)}}createComponentFromElement(e,t,n){let i=e.nodeName,o=this.getDataRefAttribute(e),r=i.indexOf("AG-")===0,s=r?this.componentSelectors.get(i):null,a=null;if(s){let l=n&&o?n[o]:void 0;a=new s.component(l),a.setParentComponent(this),this.createBean(a,null,t)}else if(r)throw new Error(`selector: ${i}`);return this.applyElementsToComponent(e,o,n,a),a}swapComponentForNode(e,t,n){let i=e.getGui();t.replaceChild(i,n),t.insertBefore(document.createComment(n.nodeName),i),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e){let t=this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui());for(let n of e)n.setAttribute("tabindex",t.toString())}setTemplate(e,t,n){let i;typeof e=="string"||e==null?i=U4(e):i=bw(e),this.setTemplateFromElement(i,t,n)}setTemplateFromElement(e,t,n,i=!1){if(this.eGui=e,this.suppressDataRefValidation=i,t)for(let o=0;o<t.length;o++){let r=t[o];this.componentSelectors.set(r.selector,r)}this.wireTemplate(e,n)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let n=t;return e==null?null:(n||(n=this.eGui),K4(e)?{element:e,parent:n}:{element:e.getGui(),parent:n})}prependChild(e,t){let{element:n,parent:i}=this.getContainerAndElement(e,t)||{};!n||!i||i.insertAdjacentElement("afterbegin",n)}appendChild(e,t){let{element:n,parent:i}=this.getContainerAndElement(e,t)||{};!n||!i||i.appendChild(n)}isDisplayed(){return this.displayed}setVisible(e,t={}){if(e!==this.visible){this.visible=e;let{skipAriaHidden:n}=t;WDe(this.eGui,e,{skipAriaHidden:n})}}setDisplayed(e,t={}){if(e!==this.displayed){this.displayed=e;let{skipAriaHidden:n}=t;ci(this.eGui,e,{skipAriaHidden:n});let i={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(i)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),super.destroy()}addGuiEventListener(e,t,n){this.eGui.addEventListener(e,t,n),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,t))}addCss(e){this.cssManager.toggleCss(e,!0)}removeCss(e){this.cssManager.toggleCss(e,!1)}toggleCss(e,t){this.cssManager.toggleCss(e,t)}registerCSS(e){this.css||(this.css=[]),this.css.push(e)}},Mn=class extends ww{};function Hte(e){return typeof e=="object"&&!!e.component}function hIe(e,t){return new Ii(n=>{n(window.setInterval(e,t))})}var Ii=class KC{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(n=>this.onDone(n),n=>this.onReject(n))}static all(t){return t.length?new KC(n=>{let i=t.length,o=new Array(i);t.forEach((r,s)=>{r.then(a=>{o[s]=a,i--,i===0&&n(o)})})}):KC.resolve()}static resolve(t=null){return new KC(n=>n(t))}then(t){return new KC(n=>{this.status===1?n(t(this.resolution)):this.waiters.push(i=>n(t(i)))})}onDone(t){this.status=1,this.resolution=t;for(let n of this.waiters)n(t)}onReject(t){}};function pIe(e){return e?e.prototype&&"getGui"in e.prototype:!1}function $te(e,t,n,i){let{name:o}=n,r,s,a,l,c,u;if(t){let h=t,f=h[o+"Selector"],m=f?f(i):null,_=y=>{typeof y=="string"?r=y:y!=null&&y!==!0&&(e.isFrameworkComponent(y)?a=y:s=y)};m?(_(m.component),l=m.params,c=m.popup,u=m.popupPosition):_(h[o])}return{compName:r,jsComp:s,fwComp:a,paramsFromSelector:l,popupFromSelector:c,popupPositionFromSelector:u}}var fIe=class extends te{constructor(){super(...arguments),this.beanName="userCompFactory"}wireBeans(e){this.agCompUtils=e.agCompUtils,this.registry=e.registry,this.frameworkCompWrapper=e.frameworkCompWrapper,this.gridOptions=e.gridOptions}getCompDetailsFromGridOptions(e,t,n,i=!1){return this.getCompDetails(this.gridOptions,e,t,n,i)}getCompDetails(e,t,n,i,o=!1){let{name:r,cellRenderer:s}=t,{compName:a,jsComp:l,fwComp:c,paramsFromSelector:u,popupFromSelector:h,popupPositionFromSelector:f}=$te(this.beans.frameworkOverrides,e,t,i),m,_,y=I=>{let O=this.registry.getUserComponent(r,I);O&&(l=O.componentFromFramework?void 0:O.component,c=O.componentFromFramework?O.component:void 0,m=O.params,_=O.processParams)};if(a!=null&&y(a),l==null&&c==null&&n!=null&&y(n),l&&s&&!pIe(l)&&(l=this.agCompUtils?.adaptFunction(t,l)),!l&&!c){let{validation:I}=this.beans;o&&(a!==n||!n)?a?I?.isProvidedUserComp(a)||On(50,{compName:a}):n?I||On(260,x(g({},this.gos.getModuleErrorParams()),{propName:r,compName:n})):On(216,{name:r}):n&&!I&&On(146,{comp:n});return}let w=this.mergeParams(e,t,i,u,m,_),C=l==null,S=l??c;return{componentFromFramework:C,componentClass:S,params:w,type:t,popupFromSelector:h,popupPositionFromSelector:f,newAgStackInstance:()=>this.newAgStackInstance(S,C,w,t)}}newAgStackInstance(e,t,n,i){let o=!t,r;o?r=new e:r=this.frameworkCompWrapper.wrap(e,i.mandatoryMethods,i.optionalMethods,i),this.createBean(r);let s=r.init?.(n);return s==null?Ii.resolve(r):s.then(()=>r)}mergeParams(e,t,n,i=null,o,r){let s=g(g({},n),o),l=e?.[t.name+"Params"];if(typeof l=="function"){let c=l(n);kr(s,c)}else typeof l=="object"&&kr(s,l);return kr(s,i),r?r(s):s}},mIe={name:"dateComponent",mandatoryMethods:["getDate","setDate"],optionalMethods:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","refresh"]},gIe={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]},vIe={name:"headerComponent",optionalMethods:["refresh"]},_Ie={name:"innerHeaderComponent"},yIe={name:"innerHeaderGroupComponent"},bIe={name:"headerGroupComponent"};var CIe={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0};var wIe={name:"loadingCellRenderer",cellRenderer:!0},xIe={name:"cellEditor",mandatoryMethods:["getValue"],optionalMethods:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},SIe={name:"loadingOverlayComponent",optionalMethods:["refresh"]},EIe={name:"noRowsOverlayComponent",optionalMethods:["refresh"]},DIe={name:"tooltipComponent"},eV={name:"filter",mandatoryMethods:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethods:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},kIe={name:"floatingFilterComponent",mandatoryMethods:["onParentModelChanged"],optionalMethods:["afterGuiAttached","refresh"]},IIe={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},MIe={name:"loadingCellRenderer",cellRenderer:!0},RIe={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:!0},TIe={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:!0};function PIe(e,t){return e.getCompDetailsFromGridOptions(gIe,"agDragAndDropImage",t,!0)}function AIe(e,t,n){return e.getCompDetails(t,vIe,"agColumnHeader",n)}function OIe(e,t,n){return e.getCompDetails(t,_Ie,void 0,n)}function FIe(e,t){let n=t.columnGroup.getColGroupDef();return e.getCompDetails(n,bIe,"agColumnGroupHeader",t)}function LIe(e,t,n){return e.getCompDetails(t,yIe,void 0,n)}function NIe(e,t){return e.getCompDetailsFromGridOptions(IIe,void 0,t,!0)}function BIe(e,t){return e.getCompDetailsFromGridOptions(MIe,"agLoadingCellRenderer",t,!0)}function zIe(e,t){return e.getCompDetailsFromGridOptions(RIe,"agGroupRowRenderer",t,!0)}function VIe(e,t){return e.getCompDetailsFromGridOptions(TIe,"agDetailCellRenderer",t,!0)}function PX(e,t,n){return e.getCompDetails(t,CIe,void 0,n)}function AX(e,t,n){return e.getCompDetails(t,wIe,"agSkeletonCellRenderer",n,!0)}function jte(e,t,n){return e.getCompDetails(t,xIe,"agCellEditor",n,!0)}function HIe(e,t,n,i){let o=t.filter;return Hte(o)&&(t={filter:o.component,filterParams:t.filterParams}),e.getCompDetails(t,eV,i,n,!0)}function $Ie(e,t,n){return e.getCompDetails(t,mIe,"agDateInput",n,!0)}function jIe(e,t){return e.getCompDetailsFromGridOptions(SIe,"agLoadingOverlay",t,!0)}function GIe(e,t){return e.getCompDetailsFromGridOptions(EIe,"agNoRowsOverlay",t,!0)}function UIe(e,t){return e.getCompDetails(t.colDef,DIe,"agTooltipComponent",t,!0)}function WIe(e,t,n,i){return e.getCompDetails(t,kIe,i,n)}function Gte(e,t){return $te(e,t,eV)}function Rz(e,t,n){return e.mergeParams(t,eV,n)}function fw(e){let t=e;return t?.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}function qIe(e){return typeof e=="object"&&!!e.getComp}var W={BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",SPACE:" ",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",DELETE:"Delete",F2:"F2",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",PAGE_HOME:"Home",PAGE_END:"End",A:"KeyA",C:"KeyC",D:"KeyD",V:"KeyV",X:"KeyX",Y:"KeyY",Z:"KeyZ"},tV=class extends ww{isPopup(){return!0}setParentComponent(e){e.addCss("ag-has-popup"),super.setParentComponent(e)}destroy(){let e=this.parentComponent;e?.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},Tz,Pz,Az,Oz,v4,_4,Fz;function bu(){return Tz===void 0&&(Tz=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),Tz}function Ute(){return Pz===void 0&&(Pz=/(firefox)/i.test(navigator.userAgent)),Pz}function Wte(){return Az===void 0&&(Az=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),Az}function vp(){return Oz===void 0&&(Oz=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),Oz}function y4(e){if(!e)return null;let t=e.tabIndex,n=e.getAttribute("tabIndex");return t===-1&&(n===null||n===""&&!Ute())?null:t.toString()}function KIe(){if(Fz!==void 0)return Fz;if(!document.body)return-1;let e=1e6,t=Ute()?6e6:1e9,n=document.createElement("div");for(document.body.appendChild(n);;){let i=e*2;if(n.style.height=i+"px",i>t||n.clientHeight!==i)break;e=i}return n.remove(),Fz=e,e}function ZIe(){return _4==null&&qte(),_4}function qte(){let e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let n=t.offsetWidth-t.clientWidth;n===0&&t.clientWidth===0&&(n=null),t.parentNode&&t.remove(),n!=null&&(_4=n,v4=n===0)}function Kte(){return v4==null&&qte(),v4}var nV="T",YIe=new RegExp(`[${nV} ]`),QIe=new RegExp(`^\\d{4}-\\d{2}-\\d{2}(${nV}\\d{2}:\\d{2}:\\d{2}\\D?)?`);function Fl(e,t){return e.toString().padStart(t,"0")}function Es(e,t=!0,n=nV){if(!e)return null;let i=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(o=>Fl(o,2)).join("-");return t&&(i+=n+[e.getHours(),e.getMinutes(),e.getSeconds()].map(o=>Fl(o,2)).join(":")),i}function kk(e,t=!0){return e?t?[String(e.getFullYear()),String(e.getMonth()+1),Fl(e.getDate(),2),Fl(e.getHours(),2),`:${Fl(e.getMinutes(),2)}`,`:${Fl(e.getSeconds(),2)}`]:[e.getFullYear(),e.getMonth()+1,Fl(e.getDate(),2)].map(String):null}var Lz=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"},OX=["January","February","March","April","May","June","July","August","September","October","November","December"],Nz=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function b4(e,t){if(t==null)return Es(e,!1);let n=Fl(e.getFullYear(),4),i={YYYY:()=>n.slice(n.length-4,n.length),YY:()=>n.slice(n.length-2,n.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>OX[e.getMonth()],MMM:()=>OX[e.getMonth()].slice(0,3),MM:()=>Fl(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${Lz(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${Lz(e.getDate())}`,DD:()=>Fl(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>Nz[e.getDay()],ddd:()=>Nz[e.getDay()].slice(0,3),dd:()=>Nz[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${Lz(e.getDay())}`,d:()=>`${e.getDay()}`},o=new RegExp(Object.keys(i).join("|"),"g");return t.replace(o,r=>r in i?i[r]():r)}function jk(e,t=!1){return!!Kr(e,t)}function JIe(e){return jk(e,!0)}function Kr(e,t=!1,n){if(!e||!n&&!QIe.test(e))return null;let[i,o]=e.split(YIe);if(!i)return null;let r=i.split("-").map(m=>Number.parseInt(m,10));if(r.filter(m=>!isNaN(m)).length!==3)return null;let[s,a,l]=r,c=new Date(s,a-1,l);if(c.getFullYear()!==s||c.getMonth()!==a-1||c.getDate()!==l||!o&&t)return null;if(!o||o==="00:00:00")return c;let[u,h,f]=o.split(":").map(m=>Number.parseInt(m,10));if(u>=0&&u<24)c.setHours(u);else if(t)return null;if(h>=0&&h<60)c.setMinutes(h);else if(t)return null;if(f>=0&&f<60)c.setSeconds(f);else if(t)return null;return c}function C4(e){let{inputValue:t,allSuggestions:n,hideIrrelevant:i,filterByPercentageOfBestMatch:o}=e,r=(n??[]).map((l,c)=>({value:l,relevance:XIe(t,l),idx:c}));if(r.sort((l,c)=>l.relevance-c.relevance),i&&(r=r.filter(l=>l.relevance<Math.max(l.value.length,t.length))),r.length>0&&o&&o>0){let c=r[0].relevance*o;r=r.filter(u=>c-u.relevance<0)}let s=[],a=[];for(let l of r)s.push(l.value),a.push(l.idx);return{values:s,indices:a}}function XIe(e,t){e.length<t.length&&([e,t]=[t,e]);let n=[],i=[],o=e.length,r=t.length;for(let a=0;a<=r;a++)n[a]=a;let s=0;for(let a=1;a<=o;a++){i[0]=a;for(let l=1;l<=r;l++){let c=e[a-1],u=t[l-1];if(c.toLocaleLowerCase()===u.toLocaleLowerCase())++s,c===u&&++s,a>1&&l>1&&e[a-2].toLocaleLowerCase()===t[l-2].toLocaleLowerCase()&&(++s,e[a-2]===t[l-2]&&++s),a<o/2-10&&++s,i[l]=n[l-1];else{let h=i[l-1],f=n[l],m=n[l-1];i[l]=1+Math.min(h,f,m)}}[n,i]=[i,n]}return n[r]/(s+1)}function Zte(e){return e.altKey||e.ctrlKey||e.metaKey?!1:e.key?.length===1}var w4=!1,cI=0;function eMe(e){cI>0||(e.addEventListener("keydown",dI),e.addEventListener("mousedown",dI))}function tMe(e){cI>0||(e.removeEventListener("keydown",dI),e.removeEventListener("mousedown",dI))}function dI(e){let t=w4,n=e.type==="keydown";n&&(e.ctrlKey||e.metaKey||e.altKey)||t!==n&&(w4=n)}function nMe(e){let t=ko(e);return eMe(t),cI++,()=>{cI--,tMe(t)}}function iMe(){return w4}function Bg(e,t,n=!1){let i=UDe,o=Kee;t&&(o+=", "+t),n&&(o+=', [tabindex="-1"]');let r=Array.prototype.slice.apply(e.querySelectorAll(i)).filter(l=>Hl(l)),s=Array.prototype.slice.apply(e.querySelectorAll(o));return s.length?((l,c)=>l.filter(u=>c.indexOf(u)===-1))(r,s):r}function wp(e,t=!1,n=!1,i=!1){let o=Bg(e,i?".ag-tab-guard":null,n),r=t?Hn(o):o[0];return r?(r.focus({preventScroll:!0}),!0):!1}function kp(e,t,n,i){let o=Bg(t,n?':not([tabindex="-1"])':null),r=vi(e),s;n?s=o.findIndex(l=>l.contains(r)):s=o.indexOf(r);let a=s+(i?-1:1);return a<0||a>=o.length?null:o[a]}function Yte(e,t=5){let n=0;for(;e&&y4(e)===null&&++n<=t;)e=e.parentElement;return y4(e)===null?null:e}var oMe=".ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}.ag-label-align-right>*{flex:none}.ag-label-align-top{align-items:flex-start;flex-direction:column;>*{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}",rMe=class extends ww{constructor(e,t,n){super(t,n),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{},this.registerCSS(oMe)}postConstruct(){this.addCss("ag-labeled"),this.eLabel.classList.add("ag-label");let{labelSeparator:e,label:t,labelWidth:n,labelAlignment:i,disabled:o}=this.config;o!=null&&this.setDisabled(o),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),n!=null&&this.setLabelWidth(n),this.setLabelAlignment(i||this.labelAlignment),this.refreshLabel()}refreshLabel(){let{label:e,eLabel:t}=this;Vo(t),typeof e=="string"?t.innerText=e+this.labelSeparator:e&&t.appendChild(e),e===""?(ci(t,!1),pu(t,"presentation")):(ci(t,!0),pu(t,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){let e=this.eLabel;return e.id=e.id||`ag-${this.getCompId()}-label`,e.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){let n=this.getGui().classList;return n.toggle("ag-label-align-left",e==="left"),n.toggle("ag-label-align-right",e==="right"),n.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(eI(this.eLabel,e),this)}setDisabled(e){e=!!e;let t=this.getGui();return aw(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},Qte=class extends rMe{constructor(e,t,n,i){super(e,t,n),this.className=i}postConstruct(){super.postConstruct();let{width:e,value:t,onValueChange:n}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),n!=null&&this.onValueChange(n),this.className&&this.addCss(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){let e=this.getAriaElement(),t=this.getLabelId(),n=this.getLabel();n==null||n==""||MDe(e)!==null?sw(e,""):sw(e,t??"")}setAriaLabel(e){return jg(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return Nl(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}};function sMe(e){return{tag:"div",role:"presentation",children:[{tag:"div",ref:"eLabel",cls:"ag-input-field-label"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-input-wrapper",role:"presentation",children:[{tag:e,ref:"eInput",cls:"ag-input-field-input"}]}]}}var hp=class extends Qte{constructor(e,t,n="text",i="input"){super(e,e?.template??sMe(i),[],t),this.inputType=n,this.displayFieldTag=i,this.eLabel=Ce,this.eWrapper=Ce,this.eInput=Ce}postConstruct(){super.postConstruct(),this.setInputType(this.inputType);let{eLabel:e,eWrapper:t,eInput:n,className:i}=this;e.classList.add(`${i}-label`),t.classList.add(`${i}-input-wrapper`),n.classList.add(`${i}-input`),this.addCss("ag-input-field"),n.id=n.id||`ag-${this.getCompId()}-input`;let{inputName:o,inputWidth:r}=this.config;o!=null&&this.setInputName(o),r!=null&&this.setInputWidth(r),this.addInputListeners(),this.activateTabIndex([n])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(e){this.displayFieldTag==="input"&&(this.inputType=e,xs(this.eInput,"type",e))}getInputElement(){return this.eInput}setInputWidth(e){return eI(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){let t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return xs(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return jg(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return aw(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)xs(this.eInput,"autocomplete",null);else{let t=typeof e=="string"?e:"off";xs(this.eInput,"autocomplete",t)}return this}},iV=class extends hp{constructor(e,t="ag-checkbox",n="checkbox"){super(e,t,n),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();let{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;let e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){let t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){if(this.isSelected()===e)return;this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0;let n=this.eInput;n.checked=e,n.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(e,t,n){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:n});let i=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:i.id,name:i.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;let t=this.isSelected(),n=this.selected=e.target.checked;this.refreshSelectedClass(n),this.dispatchChange(n,t,e)}refreshSelectedClass(e){let t=this.eWrapper.classList;t.toggle("ag-checked",e===!0),t.toggle("ag-indeterminate",e==null)}},oV={selector:"AG-CHECKBOX",component:iV},aMe=class extends iV{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){let t=this.eInput;e.selected&&e.name&&t.name&&t.name===e.name&&e.id&&t.id!==e.id&&this.setValue(!1,!0)}};var Ip=class extends hp{constructor(e,t="ag-text-field",n="text"){super(e,t,n)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){let n=this.eInput;return n.value!==e&&(n.value=Se(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){let e=new RegExp(`[${this.config.allowedCharPattern}]`),t=n=>{Zte(n)&&n.key&&!e.test(n.key)&&n.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:n=>{n.clipboardData?.getData("text")?.split("").some(o=>!e.test(o))&&n.preventDefault()}})}},wI={selector:"AG-INPUT-TEXT-FIELD",component:Ip},lMe=class extends hp{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){let n=super.setValue(e,t);return this.eInput.value=e,n}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},cMe={selector:"AG-INPUT-TEXT-AREA",component:lMe},rV=class extends Ip{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct();let e=this.eInput;this.addManagedListeners(e,{blur:()=>{let r=Number.parseFloat(e.value),s=isNaN(r)?"":this.normalizeValue(r.toString());this.value!==s&&this.setValue(s)},wheel:this.onWheel.bind(this)}),e.step="any";let{precision:t,min:n,max:i,step:o}=this.config;typeof t=="number"&&this.setPrecision(t),typeof n=="number"&&this.setMin(n),typeof i=="number"&&this.setMax(i),typeof o=="number"&&this.setStep(o)}onWheel(e){vi(this.beans)===this.eInput&&e.preventDefault()}normalizeValue(e){return e===""?"":(this.precision!=null&&(e=this.adjustPrecision(e)),e)}adjustPrecision(e,t){let n=this.precision;if(n==null)return e;if(t){let o=Number.parseFloat(e).toFixed(n);return Number.parseFloat(o).toString()}let i=String(e).split(".");if(i.length>1){if(i[1].length<=n)return e;if(n>0)return`${i[0]}.${i[1].slice(0,n)}`}return i[0]}setMin(e){return this.min===e?this:(this.min=e,xs(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,xs(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,xs(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(n=>super.setValue(n,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,n){if(Se(n)){let i=this.isScientificNotation(n);if(i&&this.eInput.validity.valid)return e(n);if(!i){n=this.adjustPrecision(n);let o=this.normalizeValue(n);i=n!=o}if(i)return t(n)}return e(n)}getValue(){let e=this.eInput;if(!e.validity.valid)return;let t=e.value;return this.isScientificNotation(t)?this.adjustPrecision(t,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},dMe={selector:"AG-INPUT-NUMBER-FIELD",component:rV},uMe=class extends Ip{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();let e=bu();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){vi(this.beans)===this.eInput&&e.preventDefault()}setMin(e){let t=e instanceof Date?Es(e??null,!!this.includeTime)??void 0:e;return this.min===t?this:(this.min=t,xs(this.eInput,"min",t),this)}setMax(e){let t=e instanceof Date?Es(e??null,!!this.includeTime)??void 0:e;return this.max===t?this:(this.max=t,xs(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,xs(this.eInput,"step",e),this)}setIncludeTime(e){return this.includeTime===e?this:(this.includeTime=e,super.setInputType(e?"datetime-local":"date"),e&&this.setStep(1),this)}getDate(){if(this.eInput.validity.valid)return Kr(this.getValue())??void 0}setDate(e,t){this.setValue(Es(e??null,this.includeTime),t)}},Jte={selector:"AG-INPUT-DATE-FIELD",component:uMe},hMe=".ag-list-item{align-items:center;display:flex;height:var(--ag-list-item-height);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;&.ag-active-item{background-color:var(--ag-row-hover-color)}}",pMe="ag-active-item",fMe=(e,t)=>({tag:"div",cls:`ag-list-item ag-${e}-list-item`,attrs:{role:"option"},children:[{tag:"span",ref:"eText",children:t}]}),mMe=class extends ww{constructor(e,t,n){super(fMe(e,t)),this.label=t,this.value=n,this.eText=Ce}postConstruct(){this.createTooltip(),this.addEventListeners()}setHighlighted(e){let t=this.getGui();t.classList.toggle(pMe,e),qee(t,e),this.dispatchLocalEvent({type:"itemHighlighted",highlighted:e})}getHeight(){return this.getGui().clientHeight}setIndex(e,t){let n=this.getGui();FDe(n,e),ODe(n,t)}createTooltip(){let e={getTooltipValue:()=>this.label,getGui:()=>this.getGui(),getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>W4(this.eText)},t=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("highlightTooltipFeature",!1,e,this));t&&(this.tooltipFeature=t)}addEventListeners(){let e=this.getParentComponent();e&&(this.addGuiEventListener("mouseover",()=>{e.highlightItem(this)}),this.addGuiEventListener("mousedown",t=>{t.preventDefault(),t.stopPropagation(),e.setValue(this.value)}))}},gMe=class extends ww{constructor(e="default"){super({tag:"div",cls:`ag-list ag-${e}-list`}),this.cssIdentifier=e,this.options=[],this.listItems=[],this.highlightedItem=null,this.registerCSS(hMe)}postConstruct(){let e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()})}handleKeyDown(e){let t=e.key;switch(t){case W.ENTER:if(!this.highlightedItem)this.setValue(this.getValue());else{let n=this.listItems.indexOf(this.highlightedItem);this.setValueByIndex(n)}break;case W.DOWN:case W.UP:e.preventDefault(),this.navigate(t);break;case W.PAGE_DOWN:case W.PAGE_UP:case W.PAGE_HOME:case W.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}addOptions(e){for(let t of e)this.addOption(t);return this}addOption(e){let{value:t,text:n}=e,i=n??t;return this.options.push({value:t,text:i}),this.renderOption(t,i),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0);for(let e of this.listItems)e.destroy();Vo(this.getGui()),this.listItems=[],this.refreshAriaRole()}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;let n=this.options.findIndex(i=>i.value===e);if(n!==-1){let i=this.options[n];this.value=i.value,this.displayValue=i.text,this.highlightItem(this.listItems[n]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();let e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.listItems[e])}highlightItem(e){let t=e.getGui();if(!Hl(t))return;this.clearHighlighted(),e.setHighlighted(!0),this.highlightedItem=e;let n=this.getGui(),{scrollTop:i,clientHeight:o}=n,{offsetTop:r,offsetHeight:s}=t;(r+s>i+o||r<i)&&t.scrollIntoView({block:"nearest"})}hideItemTooltip(){this.highlightedItem?.tooltipFeature?.attemptToHideTooltip()}destroy(){this.hideItemTooltip(),super.destroy()}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}clearHighlighted(){this.highlightedItem?.setHighlighted(!1),this.highlightedItem=null}renderOption(e,t){let n=new mMe(this.cssIdentifier,t,e);n.setParentComponent(this);let i=this.createManagedBean(n);this.listItems.push(i),this.getGui().appendChild(i.getGui())}navigate(e){let t=e===W.DOWN,n,{listItems:i,highlightedItem:o}=this;if(!o)n=t?i[0]:Hn(i);else{let s=i.indexOf(o)+(t?1:-1);s=Math.min(Math.max(s,0),i.length-1),n=i[s]}this.highlightItem(n)}navigateToPage(e){let{listItems:t,highlightedItem:n}=this;if(!n||t.length===0)return;let i=t.indexOf(n),o=this.options.length-1,r=t[0].getHeight(),s=Math.floor(this.getGui().clientHeight/r),a=-1;e===W.PAGE_HOME?a=0:e===W.PAGE_END?a=o:e===W.PAGE_DOWN?a=Math.min(i+s,o):e===W.PAGE_UP&&(a=Math.max(i-s,0)),a!==-1&&this.highlightItem(t[a])}refreshAriaRole(){pu(this.getGui(),this.options.length===0?"presentation":"listbox")}updateIndices(){this.refreshAriaRole();let e=this.listItems,t=e.length;e.forEach((n,i)=>{n.setIndex(i+1,t)})}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},vMe=".ag-picker-field-display{flex:1 1 auto}.ag-picker-field{align-items:center;display:flex}.ag-picker-field-icon{border:0;cursor:pointer;display:flex;margin:0;padding:0}.ag-picker-field-wrapper{background-color:var(--ag-picker-button-background-color);border:var(--ag-picker-button-border);border-radius:5px;min-height:max(var(--ag-list-item-height),calc(var(--ag-spacing)*4));overflow:hidden;&:where(.ag-picker-has-focus),&:where(:focus-within){background-color:var(--ag-picker-button-focus-background-color);border:var(--ag-picker-button-focus-border);box-shadow:var(--ag-focus-shadow);&:where(.invalid){box-shadow:var(--ag-focus-error-shadow)}}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:disabled{opacity:.5}}",_Me={tag:"div",cls:"ag-picker-field",role:"presentation",children:[{tag:"div",ref:"eLabel"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-picker-field-wrapper ag-picker-collapsed",children:[{tag:"div",ref:"eDisplayField",cls:"ag-picker-field-display"},{tag:"div",ref:"eIcon",cls:"ag-picker-field-icon",attrs:{"aria-hidden":"true"}}]}]},yMe=class extends Qte{constructor(e){if(super(e,e?.template||_Me,e?.agComponents||[],e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=Ce,this.eWrapper=Ce,this.eDisplayField=Ce,this.eIcon=Ce,this.registerCSS(vMe),this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;let{pickerGap:t,maxPickerHeight:n,variableWidth:i,minPickerWidth:o,maxPickerWidth:r}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!i,n!=null&&this.setPickerMaxHeight(n),o!=null&&this.setPickerMinWidth(o),r!=null&&this.setPickerMaxWidth(r)}postConstruct(){super.postConstruct(),this.setupAria();let e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);let t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});let{pickerIcon:n,inputWidth:i}=this.config;if(n){let o=this.beans.iconSvc.createIconNoSpan(n);o&&this.eIcon.appendChild(o)}i!=null&&this.setInputWidth(i)}setupAria(){let e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),c4(e,!1),this.ariaRole&&pu(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){let t=this.getFocusableElement();if(t!==this.eWrapper&&e?.target===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case W.UP:case W.DOWN:case W.ENTER:case W.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case W.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());let e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){let e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));let t=this.getLocaleTextFunc(),{config:{pickerAriaLabelKey:n,pickerAriaLabelValue:i,modalPicker:o=!0},maxPickerHeight:r,minPickerWidth:s,maxPickerWidth:a,variableWidth:l,beans:c,eWrapper:u}=this,h={modal:o,eChild:e,closeOnEsc:!0,closedCallback:()=>{let y=Vee(c);this.beforeHidePicker(),y&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(n,i),anchorToElement:u};e.style.position="absolute";let f=c.popupSvc,m=f.addPopup(h);l?(s&&(e.style.minWidth=s),e.style.width=q4(Qk(u)),a&&(e.style.maxWidth=a)):eI(e,a??Qk(u));let _=r??`${G4(f.getPopupParent())}px`;return e.style.setProperty("max-height",_),this.alignPickerToComponent(),m.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;let{pickerGap:e,config:{pickerType:t},beans:{popupSvc:n,gos:i},eWrapper:o,pickerComponent:r}=this,s=i.get("enableRtl")?"right":"left";n.positionPopupByComponent({type:t,eventSource:o,ePopup:r.getGui(),position:"under",alignSide:s,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);let e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;let t=this.getAriaElement();c4(t,e);let n=this.eWrapper.classList;n.toggle("ag-picker-expanded",e),n.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){this.pickerComponent?.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&(this.hideCurrentPicker(),this.dispatchLocalEvent({type:"pickerHidden"}))}setInputWidth(e){return eI(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},bMe=".ag-select{align-items:center;display:flex;&.ag-disabled{opacity:.5}}:where(.ag-select){.ag-picker-field-wrapper{cursor:default}&.ag-disabled .ag-picker-field-wrapper:focus{box-shadow:none}&:not(.ag-cell-editor,.ag-label-align-top){min-height:var(--ag-list-item-height)}.ag-picker-field-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-picker-field-icon{align-items:center;display:flex}}:where(.ag-ltr) :where(.ag-select){.ag-picker-field-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding)/2);padding-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-select){.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-cell-horizontal-padding)/2)}}.ag-select-list{background-color:var(--ag-picker-list-background-color);border:var(--ag-picker-list-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);overflow:hidden auto}.ag-select-list-item{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;:where(span){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}:where(.ag-ltr) .ag-select-list-item{padding-left:calc(var(--ag-cell-horizontal-padding)/2)}:where(.ag-rtl) .ag-select-list-item{padding-right:calc(var(--ag-cell-horizontal-padding)/2)}",sV=class extends yMe{constructor(e){super(g({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"selectOpen",ariaRole:"combobox"},e)),this.registerCSS(bMe)}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{shouldDisplayTooltip:Bk(()=>this.eDisplayField),getGui:()=>this.getGui()})),super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");let{options:e,value:t,placeholder:n}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),n&&t==null&&(this.eDisplayField.textContent=n),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){let e=this.createBean(new gMe("select"));this.listComponent=e,e.setParentComponent(this);let t=e.getAriaElement(),n=`ag-select-list-${e.getCompId()}`;t.setAttribute("id",n),GDe(this.getAriaElement(),t),e.addManagedElementListeners(e.getGui(),{mousedown:i=>{i?.preventDefault()}}),e.addManagedListeners(e,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})},fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}beforeHidePicker(){this.listComponent?.hideItemTooltip(),super.beforeHidePicker()}onKeyDown(e){let{key:t}=e;switch(t===W.TAB&&this.hidePicker(),t){case W.ENTER:case W.UP:case W.DOWN:case W.PAGE_UP:case W.PAGE_DOWN:case W.PAGE_HOME:case W.PAGE_END:e.preventDefault(),this.isPickerDisplayed?this.listComponent?.handleKeyDown(e):super.onKeyDown(e);break;case W.ESCAPE:super.onKeyDown(e);break;case W.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){let e=this.listComponent;e&&(super.showPicker(),e.refreshHighlighted())}addOptions(e){for(let t of e)this.addOption(t);return this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){return this.listComponent?.clearOptions(),this.setValue(void 0,!0),this}setValue(e,t,n){let{listComponent:i,config:{placeholder:o},eDisplayField:r,tooltipFeature:s}=this;if(this.value===e||!i)return this;if(n||i.setValue(e,!0),i.getValue()===this.getValue())return this;let l=i.getDisplayValue();return l==null&&o&&(l=o),r.textContent=l,s?.setTooltipAndRefresh(l??null),super.setValue(e,t)}destroy(){this.listComponent=this.destroyBean(this.listComponent),super.destroy()}},CMe={selector:"AG-SELECT",component:sV};var wMe=':where(.ag-root-wrapper,.ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart),:where(.ag-root-wrapper,.ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]){box-sizing:border-box;&:after,&:before{box-sizing:border-box}&:where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none;&:where(.invalid){box-shadow:inset var(--ag-focus-error-shadow)}}&:where(button){color:inherit}}:where(.ag-root-wrapper,ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]) ::-ms-clear{display:none}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-popup-child{top:0;z-index:5;&:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-chart,.ag-dnd-ghost,.ag-external,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-disabled,[disabled]{.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-resizer{pointer-events:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}',aV=typeof window!="object"||!window?.document?.fonts?.forEach,x4=!1,Wg=(e,t,n,i,o,r)=>{if(aV||x4)return;i&&(e=`@layer ${CSS.escape(i)} { ${e} }`);let s=zg.map.get(t);if(s||(s=[],zg.map.set(t,s)),s.some(u=>u.css===e))return;let a=document.createElement("style");r&&a.setAttribute("nonce",r),a.dataset.agGlobalCss=n,a.textContent=e;let l={css:e,el:a,priority:o},c;for(let u of s){if(u.priority>o)break;c=u}if(c){c.el.insertAdjacentElement("afterend",a);let u=s.indexOf(c);s.splice(u+1,0,l)}else t.insertBefore(a,t.querySelector(":not(title, meta)")),s.push(l)},Xte=(e,t,n,i)=>{Wg(wMe,e,"shared",t,0,n),i?.forEach((o,r)=>o.forEach(s=>Wg(s,e,r,t,0,n)))},xMe=e=>{zg.grids.add(e)},SMe=e=>{if(zg.grids.delete(e),zg.grids.size===0){zg.map=new WeakMap;for(let t of document.head.querySelectorAll("style[data-ag-global-css]"))t.remove()}},FX,zg=(FX=typeof window=="object"?window:{}).agStyleInjectionState??(FX.agStyleInjectionState={map:new WeakMap,grids:new Set}),zl=e=>new ene(e),uu="$default",EMe=0,ene=class{constructor({feature:e,params:t,modeParams:n={},css:i,cssImports:o}){this.feature=e,this.css=i,this.cssImports=o,this.modeParams=g({[uu]:g(g({},n[uu]??{}),t??{})},n)}use(e,t,n){let i=this._inject;if(i==null){let{css:o}=this;if(o){let r=`ag-theme-${this.feature??"part"}-${++EMe}`;typeof o=="function"&&(o=o()),o=`:where(.${r}) {
${o}
}
`;for(let s of this.cssImports??[])o=`@import url(${JSON.stringify(s)});
${o}`;i={css:o,class:r}}else i=!1;this._inject=i}return i&&e&&Wg(i.css,e,i.class,t,1,n),i?i.class:!1}},DMe=e=>e.replace(/[A-Z]/g,t=>`-${t}`).toLowerCase(),tne=e=>`--ag-${DMe(e)}`,Vl=e=>`var(${tne(e)})`,kMe=(e,t,n)=>Math.max(t,Math.min(n,e)),IMe=e=>{let t=new Map;return n=>{let i=n;return t.has(i)||t.set(i,e(n)),t.get(i)}},Al=e=>({ref:"accentColor",mix:e}),Ys=e=>({ref:"foregroundColor",mix:e}),Js=e=>({ref:"foregroundColor",mix:e,onto:"backgroundColor"}),MMe=e=>({ref:"foregroundColor",mix:e,onto:"headerBackgroundColor"}),qr={ref:"backgroundColor"},Ig={ref:"foregroundColor"},Uc={ref:"accentColor"},uI={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:Ys(.15),chromeBackgroundColor:Js(.02),browserColorScheme:"light"},RMe=x(g({},uI),{textColor:Ig,accentColor:"#2196f3",invalidColor:"#e02525",fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],subtleTextColor:{ref:"textColor",mix:.5},borderWidth:1,borderRadius:4,spacing:8,fontSize:14,focusShadow:{spread:3,color:Al(.5)},focusErrorShadow:{spread:3,color:{ref:"invalidColor",onto:"backgroundColor",mix:.5}},popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},listItemHeight:{calc:"max(iconSize, dataFontSize) + widgetVerticalSpacing"},dragAndDropImageBackgroundColor:qr,dragAndDropImageBorder:!0,dragAndDropImageNotAllowedBorder:{color:{ref:"invalidColor",onto:"dragAndDropImageBackgroundColor",mix:.5}},dragAndDropImageShadow:{ref:"popupShadow"},iconSize:16,iconColor:"inherit",toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:Uc,toggleButtonOffBackgroundColor:Js(.3),toggleButtonSwitchBackgroundColor:qr,toggleButtonSwitchInset:2,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipErrorBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.1},tooltipTextColor:{ref:"textColor"},tooltipErrorTextColor:{ref:"invalidColor"},tooltipBorder:!0,tooltipErrorBorder:{color:{ref:"invalidColor",onto:"backgroundColor",mix:.25}}}),TMe=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"],PMe=IMe(e=>(e=e.toLowerCase(),TMe.find(t=>e.endsWith(t.toLowerCase()))??"length")),xI=e=>typeof e=="object"&&e?.ref?Vl(e.ref):typeof e=="string"?e:typeof e=="number"?String(e):!1,lV=e=>{if(typeof e=="string")return e;if(e&&"ref"in e){let t=Vl(e.ref);return e.mix==null?t:`color-mix(in srgb, ${e.onto?Vl(e.onto):"transparent"}, ${t} ${kMe(e.mix*100,0,100)}%)`}return!1},AMe=xI,Mg=e=>typeof e=="string"?e:typeof e=="number"?`${e}px`:e&&"calc"in e?`calc(${e.calc.replace(/ ?[*/+] ?/g," $& ").replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,n=>n[0]==="-"?n:" "+Vl(n)+" ")})`:e&&"ref"in e?Vl(e.ref):!1,OMe=xI,S4=(e,t)=>typeof e=="string"?e:e===!0?S4({},t):e===!1?t==="columnBorder"?S4({color:"transparent"},t):"none":e&&"ref"in e?Vl(e.ref):nne(e.style??"solid")+" "+Mg(e.width??{ref:"borderWidth"})+" "+lV(e.color??{ref:"borderColor"}),FMe=e=>typeof e=="string"?e:e===!1?"none":e&&"ref"in e?Vl(e.ref):[Mg(e.offsetX??0),Mg(e.offsetY??0),Mg(e.radius??0),Mg(e.spread??0),lV(e.color??{ref:"foregroundColor"})].join(" "),nne=xI,ine=e=>typeof e=="string"?e.includes(",")?e:LX(e):e&&"googleFont"in e?ine(e.googleFont):e&&"ref"in e?Vl(e.ref):Array.isArray(e)?e.map(t=>(typeof t=="object"&&"googleFont"in t&&(t=t.googleFont),LX(t))).join(", "):!1,LX=e=>/^[\w-]+$|\w\(/.test(e)?e:JSON.stringify(e),LMe=xI,one=e=>typeof e=="string"?e:e&&"url"in e?`url(${JSON.stringify(e.url)})`:e&&"svg"in e?one({url:`data:image/svg+xml,${encodeURIComponent(e.svg)}`}):e&&"ref"in e?Vl(e.ref):!1,NMe=(e,t,n)=>typeof e=="string"?e:typeof e=="number"?(e>=10&&n.warn(104,{value:e,param:t}),`${e}s`):e&&"ref"in e?Vl(e.ref):!1,BMe={color:lV,colorScheme:AMe,length:Mg,scale:OMe,border:S4,borderStyle:nne,shadow:FMe,image:one,fontFamily:ine,fontWeight:LMe,duration:NMe},zMe=(e,t,n)=>{let i=PMe(e);return BMe[i](t,e,n)};var VMe=e=>new rne(e),rne=class sne{constructor(t,n=[]){this.themeLogger=t,this.parts=n}withPart(t){return typeof t=="function"&&(t=t()),t instanceof ene?new sne(this.themeLogger,[...this.parts,t]):(this.themeLogger.preInitErr(259,"Invalid part",{part:t}),this)}withoutPart(t){return this.withPart(zl({feature:t}))}withParams(t,n=uu){return this.withPart(zl({modeParams:{[n]:t}}))}_startUse({styleContainer:t,cssLayer:n,nonce:i,loadThemeGoogleFonts:o,moduleCss:r}){if(aV||x4)return;$Me(),Xte(t,n,i,r);let s=HMe(this);if(s.length>0)for(let a of s)o&&jMe(a,i);for(let a of this.parts)a.use(t,n,i)}_getCssClass(){return x4?"ag-theme-quartz":this._cssClassCache??(this._cssClassCache=NX(this.parts).map(t=>t.use(void 0,void 0,void 0)).filter(Boolean).join(" "))}_getModeParams(){let t=this._paramsCache;if(!t){let n={[uu]:g({},RMe)};for(let i of NX(this.parts))for(let o of Object.keys(i.modeParams)){let r=i.modeParams[o];if(r){let s=n[o]??(n[o]={}),a=new Set;for(let l of Object.keys(r)){let c=r[l];c!==void 0&&(s[l]=c,a.add(l))}if(o===uu)for(let l of Object.keys(n)){let c=n[l];if(l!==uu)for(let u of a)delete c[u]}}}this._paramsCache=t=n}return t}_getPerInstanceCss(t){let n="##SELECTOR##",i=this._paramsCssCache;if(!i){let o="",r="",s=this._getModeParams();for(let l of Object.keys(s)){let c=s[l];if(l!==uu){let h=`:where([data-ag-theme-mode="${typeof CSS=="object"?CSS.escape(l):l}"]) & {
`;o+=h,r+=h}for(let u of Object.keys(c).sort()){let h=c[u],f=zMe(u,h,this.themeLogger);if(f===!1)this.themeLogger.error(107,{key:u,value:h});else{let m=tne(u),_=m.replace("--ag-","--ag-inherited-");o+=`	${m}: var(${_}, ${f});
`,r+=`	${_}: var(${m});
`}}l!==uu&&(o+=`}
`,r+=`}
`)}let a=`${n} {
${o}}
`;a+=`:has(> ${n}):not(${n}) {
${r}}
`,this._paramsCssCache=i=a}return i.replaceAll(n,`:where(.${t})`)}},NX=e=>{let t=new Map;for(let i of e)t.set(i.feature,i);let n=[];for(let i of e)(!i.feature||t.get(i.feature)===i)&&n.push(i);return n},HMe=e=>{let t=new Set,n=r=>{if(Array.isArray(r))r.forEach(n);else{let s=r?.googleFont;typeof s=="string"&&t.add(s)}};return Object.values(e._getModeParams()).flatMap(r=>Object.values(r)).forEach(n),Array.from(t).sort()},BX=!1,$Me=()=>{if(!BX){BX=!0;for(let e of Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]')))e.remove()}},jMe=(e,t)=>E(null,null,function*(){let n=`@import url('https://${GMe}/css2?family=${encodeURIComponent(e)}:wght@100;200;300;400;500;600;700;800;900&display=swap');
`;Wg(n,document.head,`googleFont:${e}`,void 0,0,t)}),GMe="fonts.googleapis.com",UMe=1,WMe=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,this.instanceId=UMe++,e?.beanClasses&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){this.id=e.id,this.beans.context=this,this.destroyCallback=e.destroyCallback;for(let t of Object.keys(e.providedBeanInstances))this.beans[t]=e.providedBeanInstances[t];for(let t of e.beanClasses){let n=new t;n.beanName?this.beans[n.beanName]=n:console.error(`Bean ${t.name} is missing beanName`),this.createdBeans.push(n)}for(let t of e.derivedBeans??[]){let{beanName:n,bean:i}=t(this);this.beans[n]=i,this.createdBeans.push(i)}e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){return this.initBeans([e],t),e}initBeans(e,t){let n=this.beans;for(let i of e)i.preWireBeans?.(n),i.wireBeans?.(n);for(let i of e)i.preConstruct?.();t&&e.forEach(t);for(let i of e)i.postConstruct?.()}getBeans(){return this.beans}getBean(e){return this.beans[e]}getId(){return this.id}destroy(){if(this.destroyed)return;this.destroyed=!0;let e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[],this.destroyCallback?.()}destroyBean(e){e?.destroy?.()}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},qMe=0,KMe=class extends $l{constructor(){super(...arguments),this.beanName="environment",this.paramsClass=`ag-theme-params-${++qMe}`,this.globalCSS=[]}wireBeans(e){this.eRootDiv=e.eRootDiv}postConstruct(){let{gos:e,eRootDiv:t}=this;e.setInstanceDomData(t),this.eStyleContainer=e.get("themeStyleContainer")??(t.getRootNode()===document?document.head:t),this.cssLayer=e.get("themeCssLayer"),this.styleNonce=e.get("styleNonce"),this.addManagedPropertyListener("theme",()=>this.handleThemeChange()),this.handleThemeChange(),this.initVariables(),this.addDestroyFunc(()=>SMe(this)),this.mutationObserver=new MutationObserver(()=>{this.fireStylesChangedEvent("themeChanged")}),this.addDestroyFunc(()=>this.mutationObserver.disconnect())}applyThemeClasses(e,t=[]){let{theme:n}=this,i;n?i=`${this.paramsClass} ${n._getCssClass()}`:i=this.applyLegacyThemeClasses();for(let o of Array.from(e.classList))o.startsWith("ag-theme-")&&e.classList.remove(o);if(i){let o=e.className;e.className=`${o}${o?" ":""}${i}${t?.length?" "+t.join(" "):""}`}}applyLegacyThemeClasses(){let e="";this.mutationObserver.disconnect();let t=this.eRootDiv;for(;t;){let n=!1;for(let i of Array.from(t.classList))i.startsWith("ag-theme-")&&(n=!0,e=e?`${e} ${i}`:i);n&&this.mutationObserver.observe(t,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement}return e}addGlobalCSS(e,t){this.theme?Wg(e,this.eStyleContainer,t,this.cssLayer,0,this.styleNonce):this.globalCSS.push([e,t])}handleThemeChange(){let{gos:e,theme:t}=this,n=e.get("theme"),i;if(n==="legacy")i=void 0;else{let o=n??this.getDefaultTheme();o instanceof rne?i=o:this.themeError(o)}i!==t&&this.handleNewTheme(i),this.postProcessThemeChange(i,n)}handleNewTheme(e){let{gos:t,eRootDiv:n,globalCSS:i}=this,o=this.getAdditionalCss();if(e){xMe(this),Xte(this.eStyleContainer,this.cssLayer,this.styleNonce,o);for(let[s,a]of i)Wg(s,this.eStyleContainer,a,this.cssLayer,0,this.styleNonce);i.length=0}this.theme=e,e?._startUse({loadThemeGoogleFonts:t.get("loadThemeGoogleFonts"),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer,nonce:this.styleNonce,moduleCss:o});let r=this.eParamsStyle;if(!r){r=this.eParamsStyle=bw({tag:"style"});let s=t.get("styleNonce");s&&r.setAttribute("nonce",s),n.appendChild(r)}aV||(r.textContent=e?._getPerInstanceCss(this.paramsClass)||""),this.applyThemeClasses(n),this.fireStylesChangedEvent("themeChanged")}},ZMe=class extends $l{constructor(){super(...arguments),this.beanName="registry"}registerDynamicBeans(e){if(e){this.dynamicBeans??(this.dynamicBeans={});for(let t of Object.keys(e))this.dynamicBeans[t]=e[t]}}createDynamicBean(e,t,...n){if(!this.dynamicBeans)throw new Error(this.getDynamicError(e,!0));let i=this.dynamicBeans[e];if(i==null){if(t)throw new Error(this.getDynamicError(e,!1));return}return new i(...n)}},YMe=class extends $l{constructor(){super(...arguments),this.beanName="eventSvc",this.eventServiceType="global",this.globalSvc=new bp}addListener(e,t,n){this.globalSvc.addEventListener(e,t,n)}removeListener(e,t,n){this.globalSvc.removeEventListener(e,t,n)}addGlobalListener(e,t=!1){this.globalSvc.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalSvc.removeGlobalListener(e,t)}dispatchEvent(e){this.globalSvc.dispatchEvent(this.gos.addCommon(e))}dispatchEventOnce(e){this.globalSvc.dispatchEventOnce(this.gos.addCommon(e))}},ane=class extends $l{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}postConstruct(){this.refreshTooltip()}setBrowserTooltip(e,t){let n="title",i=this.ctrl.getGui();i&&(e!=null&&(e!=""||t)?i.setAttribute(n,e):i.removeAttribute(n))}updateTooltipText(){let{getTooltipValue:e}=this.ctrl;e&&(this.tooltip=e())}createTooltipFeatureIfNeeded(){if(this.tooltipManager==null){let e=this.beans.registry.createDynamicBean("tooltipStateManager",!0,this.ctrl,()=>this.tooltip);e&&(this.tooltipManager=this.createBean(e,this.beans.context))}}attemptToShowTooltip(){this.tooltipManager?.prepareToShowTooltip()}attemptToHideTooltip(){this.tooltipManager?.hideTooltip()}setTooltipAndRefresh(e){this.tooltip=e,this.refreshTooltip()}refreshTooltip(e){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)):(this.setBrowserTooltip(e?"":null,e),this.createTooltipFeatureIfNeeded())}destroy(){this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context),super.destroy()}},QMe=1e3,JMe=1e3,zX=100,VX,Ik=!1,XMe=class extends $l{constructor(e,t){super(),this.tooltipCtrl=e,this.getTooltipValue=t,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(e){this.popupSvc=e.popupSvc}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");let e=this.tooltipCtrl.getGui();this.tooltipTrigger===0&&this.addManagedListeners(e,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(e,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(e,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(e,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(e){let t=this.gos.get(e);return Math.max(200,t)}getTooltipDelay(e){return e==="show"?this.tooltipCtrl.getTooltipShowDelayOverride?.()??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipCtrl.getTooltipHideDelayOverride?.()??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){let e=this.gos.get("tooltipTrigger");return!e||e==="hover"?0:1}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!vp()&&(Ik?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},zX):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){let t=e.relatedTarget,n=this.tooltipCtrl.getGui(),i=this.tooltipComp?.getGui();this.isInteractingWithTooltip||n.contains(t)||this.interactionEnabled&&i?.contains(t)||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(e){if(this.state!=0||Ik)return;let t=0;e&&(t=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=1}isLastTooltipHiddenRecently(){return Date.now()-VX<QMe}setToDoNothing(e){!e&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.clearEventHandlers(),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){let e=this.getTooltipValue(),t=this.tooltipCtrl;if(!Se(e)||t.shouldDisplayTooltip&&!t.shouldDisplayTooltip()){this.setToDoNothing();return}let n=this.gos.addCommon(g({location:t.getLocation?.()??"UNKNOWN",value:e,hideTooltipCallback:()=>this.hideTooltip(!0)},t.getAdditionalParams?.()));this.state=2,this.tooltipInstanceCount++;let i=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.createTooltipComp(n,i)}hideTooltip(e){!e&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),VX=Date.now()),this.eventSvc.dispatchEvent({type:"tooltipHide",parentGui:this.tooltipCtrl.getGui()}),e&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(e,t){if(this.state!==2||this.tooltipInstanceCount!==e){this.destroyBean(t);return}let i=t.getGui();this.tooltipComp=t,i.classList.contains("ag-tooltip")||i.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&i.classList.add("ag-tooltip-animate"),this.interactionEnabled&&i.classList.add("ag-tooltip-interactive");let o=this.getLocaleTextFunc(),r=this.popupSvc?.addPopup({eChild:i,ariaLabel:o("ariaLabelTooltip","Tooltip")});if(r&&(this.tooltipPopupDestroyFunc=r.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){let s=()=>this.setToDoNothing();[this.onBodyScrollEventCallback]=this.addManagedEventListeners({bodyScroll:s}),this.setEventHandlers(s)}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(i,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(ko(this.beans),{keydown:s=>{i.contains(s?.target)||this.onKeyDown()}}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(i,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventSvc.dispatchEvent({type:"tooltipShow",tooltipGui:i,parentGui:this.tooltipCtrl.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){let e=this.tooltipComp?.getGui(),t=vi(this.beans);return!!e&&e.contains(t)}onTooltipFocusOut(e){let t=this.tooltipCtrl.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,t.contains(e.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){let e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupSvc?.positionPopupUnderMouseEvent(x(g({},e),{mouseEvent:this.lastMouseEvent})):this.popupSvc?.positionPopupByComponent(x(g({},e),{eventSource:this.tooltipCtrl.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");let e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,n=this.tooltipTrigger===0?JMe:0;window.setTimeout(()=>{e(),this.destroyBean(t)},n),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){for(let e of[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener])e&&e();this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){Ik=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},zX)}unlockService(){Ik=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}},eRe=class extends ane{constructor(e,t,n){super(e,n),this.highlightTracker=t,this.onHighlight=this.onHighlight.bind(this)}postConstruct(){super.postConstruct(),this.wireHighlightListeners()}wireHighlightListeners(){this.addManagedPropertyListener("tooltipTrigger",({currentValue:e})=>{this.setTooltipMode(e)}),this.setTooltipMode(this.gos.get("tooltipTrigger")),this.highlightTracker.addEventListener("itemHighlighted",this.onHighlight)}onHighlight(e){this.tooltipMode===1&&(e.highlighted?this.attemptToShowTooltip():this.attemptToHideTooltip())}setTooltipMode(e="focus"){this.tooltipMode=e==="focus"?1:0}destroy(){this.highlightTracker.removeEventListener("itemHighlighted",this.onHighlight),super.destroy()}},Mk=0,tRe=200,nRe=class extends $l{constructor(){super(...arguments),this.beanName="popupSvc",this.popupList=[]}getPopupParent(){let e=this.gos.get("popupParent");return e||this.getDefaultPopupParent()}positionPopupUnderMouseEvent(e){let{ePopup:t,nudgeX:n,nudgeY:i,skipObserver:o}=e;this.positionPopup({ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:!0,skipObserver:o,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e,e.type,e.ePopup,null,e.mouseEvent)})}calculatePointerAlign(e){let t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){let{ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:o,eventSource:r,alignSide:s="left",position:a="over",type:l}=e,c=r.getBoundingClientRect(),u=this.getParentRect();this.setAlignedTo(r,t);let h=()=>{let f=c.left-u.left;s==="right"&&(f-=t.offsetWidth-c.width);let m;return a==="over"?(m=c.top-u.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,c,u,e.nudgeY||0)==="under"?m=c.top-u.top+c.height:m=c.top-t.offsetHeight-(i||0)*2-u.top),{x:f,y:m}};this.positionPopup({ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:o,updatePosition:h,postProcessCallback:()=>this.callPostProcessPopup(e,l,t,r,null)})}shouldRenderUnderOrAbove(e,t,n,i){let o=n.bottom-t.bottom,r=t.top-n.top,s=e.offsetHeight+i;return o>s?"under":r>s||r>o?"above":"under"}setAlignedStyles(e,t){let n=this.getPopupIndex(e);if(n===-1)return;let i=this.popupList[n],{alignedToElement:o}=i;if(!o)return;let r=["right","left","over","above","under"];for(let s of r)o.classList.remove(`ag-has-popup-positioned-${s}`),e.classList.remove(`ag-popup-positioned-${s}`);t&&(o.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}setAlignedTo(e,t){let n=this.getPopupIndex(t);if(n!==-1){let i=this.popupList[n];i.alignedToElement=e}}positionPopup(e){let{ePopup:t,keepWithinBounds:n,nudgeX:i,nudgeY:o,skipObserver:r,updatePosition:s}=e,a={width:0,height:0},l=(c=!1)=>{let{x:u,y:h}=s();c&&t.clientWidth===a.width&&t.clientHeight===a.height||(a.width=t.clientWidth,a.height=t.clientHeight,i&&(u+=i),o&&(h+=o),n&&(u=this.keepXYWithinBounds(t,u,1),h=this.keepXYWithinBounds(t,h,0)),t.style.left=`${u}px`,t.style.top=`${h}px`,e.postProcessCallback&&e.postProcessCallback())};if(l(),!r){let c=_u(this.beans,t,()=>l(!0));setTimeout(()=>c(),tRe)}}getParentRect(){let e=ko(this.beans),t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),Yee(t)}keepXYWithinBounds(e,t,n){let i=n===0,o=i?"clientHeight":"clientWidth",r=i?"top":"left",s=i?"height":"width",a=i?"scrollTop":"scrollLeft",l=ko(this.beans),c=l.documentElement,u=this.getPopupParent(),h=e.getBoundingClientRect(),f=u.getBoundingClientRect(),m=l.documentElement.getBoundingClientRect(),_=u===l.body,y=Math.ceil(h[s]),C=_?(i?Zee:Qk)(c)+c[a]:u[o];_&&(C-=Math.abs(m[r]-f[r]));let S=C-y;return Math.min(Math.max(t,0),Math.max(S,0))}addPopup(e){let{eChild:t,ariaLabel:n,ariaOwns:i,alwaysOnTop:o,positionCallback:r,anchorToElement:s}=e,a=this.getPopupIndex(t);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(t);let l=this.createPopupWrapper(t,!!o,n,i),c=this.addEventListenersToPopup(x(g({},e),{wrapperEl:l}));return r&&r(),this.addPopupToPopupList(t,l,c,s),{hideFunc:c}}initialisePopupPosition(e){let n=this.getPopupParent().getBoundingClientRect();Se(e.style.top)||(e.style.top=`${n.top*-1}px`),Se(e.style.left)||(e.style.left=`${n.left*-1}px`)}createPopupWrapper(e,t,n,i){let o=this.getPopupParent(),{environment:r,gos:s}=this.beans,a=bw({tag:"div"});return r.applyThemeClasses(a),a.classList.add("ag-popup"),e.classList.add(s.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||pu(e,"dialog"),n?jg(e,n):i&&(e.id||(e.id=`popup-component-${Mk}`),yX(i,e.id)),a.appendChild(e),o.appendChild(a),t?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),a}addEventListenersToPopup(e){let t=this.beans,n=ko(t),{wrapperEl:i,eChild:o,closedCallback:r,afterGuiAttached:s,closeOnEsc:a,modal:l,ariaOwns:c}=e,u=!1,h=y=>{if(!i.contains(vi(t)))return;y.key===W.ESCAPE&&!this.isStopPropagation(y)&&_({keyboardEvent:y})},f=y=>_({mouseEvent:y}),m=y=>_({touchEvent:y}),_=(y={})=>{let{mouseEvent:w,touchEvent:C,keyboardEvent:S,forceHide:I}=y;!I&&(this.isEventFromCurrentPopup({mouseEvent:w,touchEvent:C},o)||u)||(u=!0,i.remove(),n.removeEventListener("keydown",h),n.removeEventListener("mousedown",f),n.removeEventListener("touchstart",m),n.removeEventListener("contextmenu",f),this.eventSvc.removeListener("dragStarted",f),r&&r(w||C||S),this.removePopupFromPopupList(o,c))};return s&&s({hidePopup:_}),window.setTimeout(()=>{a&&n.addEventListener("keydown",h),l&&(n.addEventListener("mousedown",f),this.eventSvc.addListener("dragStarted",f),n.addEventListener("touchstart",m),n.addEventListener("contextmenu",f))},0),_}addPopupToPopupList(e,t,n,i){this.popupList.push({element:e,wrapper:t,hideFunc:n,instanceId:Mk,isAnchored:!!i}),i&&this.setPopupPositionRelatedToElement(e,i),Mk=Mk+1}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){let n=this.getPopupIndex(e);if(n===-1)return;let i=this.popupList[n];if(i.stopAnchoringPromise&&i.stopAnchoringPromise.then(r=>r&&r()),i.stopAnchoringPromise=void 0,i.isAnchored=!1,!t)return;let o=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:i.hideFunc});return i.stopAnchoringPromise=o,i.isAnchored=!0,o}removePopupFromPopupList(e,t){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),t&&yX(t,null),this.popupList=this.popupList.filter(n=>n.element!==e)}keepPopupPositionedRelativeTo(e){let t=this.getPopupParent(),n=t.getBoundingClientRect(),{element:i,ePopup:o}=e,r=i.getBoundingClientRect(),s=h=>Number.parseInt(h.substring(0,h.length-1),10),a=(h,f)=>{let m=n[h]-r[h],_=s(o.style[h]);return{initialDiff:m,lastDiff:m,initial:_,last:_,direction:f}},l=a("top",0),c=a("left",1),u=this.beans.frameworkOverrides;return new Ii(h=>{u.wrapIncoming(()=>{hIe(()=>{let f=t.getBoundingClientRect(),m=i.getBoundingClientRect();if(m.top==0&&m.left==0&&m.height==0&&m.width==0){e.hidePopup();return}let y=(w,C)=>{let S=s(o.style[C]);w.last!==S&&(w.initial=S,w.last=S);let I=f[C]-m[C];if(I!=w.lastDiff){let O=this.keepXYWithinBounds(o,w.initial+w.initialDiff-I,w.direction);o.style[C]=`${O}px`,w.last=O}w.lastDiff=I};y(l,"top"),y(c,"left")},200).then(f=>{h(()=>{f!=null&&window.clearInterval(f)})})},"popupPositioning")})}isEventFromCurrentPopup(e,t){let{mouseEvent:n,touchEvent:i}=e,o=n||i;if(!o)return!1;let r=this.getPopupIndex(t);if(r===-1)return!1;for(let s=r;s<this.popupList.length;s++){let a=this.popupList[s];if(YDe(a.element,o))return!0}return this.isElementWithinCustomPopup(o.target)}isElementWithinCustomPopup(e){let t=ko(this.beans);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){let n=this.getWrapper(e);n&&(n.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(n))}bringPopupToFront(e){let t=this.getPopupParent(),n=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),i=n.length,o=this.getWrapper(e);if(!o||i<=1||!t.contains(e))return;let r=[],s=[];for(let f of n)f!==o&&(f.classList.contains("ag-always-on-top")?s.push(f):r.push(f));let a=[],l=s.length,h=o.classList.contains("ag-always-on-top")||!l?[...r,...s,o]:[...r,o,...s];for(let f=0;f<=i;f++){let m=h[f];if(n[f]===h[f]||m===o)continue;let _=m.querySelectorAll("div");for(let y of _)y.scrollTop!==0&&a.push([y,y.scrollTop]);f===0?t.insertAdjacentElement("afterbegin",m):h[f-1].insertAdjacentElement("afterend",m)}for(;a.length;){let f=a.pop();f[0].scrollTop=f[1]}}},iRe=class extends tV{constructor(){super({tag:"div",cls:"ag-tooltip"})}init(e){let{value:t}=e,n=this.getGui();n.textContent=Zg(t);let i=e.location.replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase();n.classList.add(`ag-${i}-tooltip`)}},lne=(e,t)=>{if(t!=null&&e?.setPointerCapture)try{return e.setPointerCapture(t),e.hasPointerCapture(t)}catch{}return!1},oRe=(e,t)=>{if(typeof PointerEvent>"u"||!(t instanceof PointerEvent))return null;let n=t.pointerId;if(!lne(e,n))return null;let i={eElement:e,pointerId:n,onLost(o){sRe(i,o)}};return e.addEventListener("lostpointercapture",i.onLost),i},rRe=e=>{if(!e)return;cne(e);let{eElement:t,pointerId:n}=e;if(t){try{t.releasePointerCapture(n)}catch{}e.eElement=null}},cne=e=>{let{eElement:t,onLost:n}=e;t&&n&&(t.removeEventListener("lostpointercapture",n),e.onLost=null)},sRe=(e,t)=>{cne(e);let{eElement:n,pointerId:i}=e;n&&t.pointerId===i&&lne(n,i)},xg,Rg,$c=e=>{if(!Rg)Rg=new WeakSet;else if(Rg.has(e))return!1;return Rg.add(e),!0},aRe=class extends $l{constructor(){super(...arguments),this.beanName="dragSvc",this.dragging=!1,this.drag=null,this.dragSources=[]}get startTarget(){return this.drag?.start.target??null}isPointer(){return!!xg?.has(Pl(this.beans))}hasPointerCapture(){let e=this.drag?.pointerCapture;return!!(e&&this.beans.eRootDiv.hasPointerCapture?.(e.pointerId))}destroy(){this.drag&&this.cancelDrag();let e=this.dragSources;for(let t of e)HX(t);e.length=0,super.destroy()}removeDragSource(e){let t=this.dragSources;for(let n=0,i=t.length;n<i;++n){let o=t[n];if(o.params===e){t.splice(n,1),HX(o);break}}}addDragSource(e){if(!this.isAlive())return;let{eElement:t,includeTouch:n}=e,i=[],o;if(n){let c=t.style;c&&(o=c.touchAction,c.touchAction="none")}let r={handlers:i,params:e,oldTouchAction:o};this.dragSources.push(r),zk(i,[t,"pointerdown",c=>this.onPointerDown(e,c),{passive:!1}],[t,"mousedown",c=>this.onMouseDown(e,c)]);let l=this.gos.get("suppressTouch");n&&!l&&zk(i,[t,"touchstart",u=>this.onTouchStart(e,u),{passive:!1}])}cancelDrag(e){let t=this.drag;e??(e=t?.eElement),e&&this.eventSvc.dispatchEvent({type:"dragCancelled",target:e}),t?.params.onDragCancel?.(),this.destroyDrag()}shouldPreventMouseEvent(e){let t=e.type;return(t==="mousemove"||t==="pointermove")&&e.cancelable&&cw(this.beans,e)&&!YC(zz(e))}initDrag(e,...t){this.drag=e;let n=this.beans,i=a=>this.onScroll(a),o=a=>this.onKeyDown(a),r=Pl(n),s=ko(n);zk(e.handlers,[r,"contextmenu",du],[r,"keydown",o],[s,"scroll",i,{capture:!0}],[s.defaultView||window,"scroll",i],...t)}destroyDrag(){this.dragging=!1;let e=this.drag;if(e){let t=e.rootEl;xg?.get(t)===e&&xg?.delete(t),this.drag=null,rRe(e.pointerCapture),Z4(e.handlers)}}onPointerDown(e,t){if(this.isPointer())return;let n=this.beans;if(Rg?.has(t))return;let i=t.pointerType;if(i==="touch"&&(n.gos.get("suppressTouch")||!e.includeTouch||(e.stopPropagationForTouch&&t.stopPropagation(),YC(zz(t))))||!t.isPrimary||i==="mouse"&&t.button!==0)return;this.destroyDrag();let o=Pl(n),r=e.eElement,s=t.pointerId,a=new Bz(o,e,t,s);xg??(xg=new WeakMap),xg.set(o,a);let l=h=>{h.pointerId===s&&this.onMouseOrPointerMove(h)},c=h=>{h.pointerId===s&&this.onMouseOrPointerUp(h)},u=h=>{h.pointerId===s&&$c(h)&&this.cancelDrag()};this.initDrag(a,[o,"pointerup",c],[o,"pointercancel",u],[o,"pointermove",l,{passive:!1}],[o,"touchmove",du,{passive:!1}],[r,"mousemove",du,{passive:!1}]),e.dragStartPixels===0?this.onMouseOrPointerMove(t):$c(t)}onTouchStart(e,t){if(this.gos.get("suppressTouch")||!e.includeTouch||!$c(t)||YC(zz(t)))return;if(e.stopPropagationForTouch&&t.stopPropagation(),this.isPointer()){du(t);return}this.destroyDrag();let i=this.beans,o=Pl(i),r=new Bz(o,e,t.touches[0]),s=c=>this.onTouchMove(c),a=c=>this.onTouchUp(c),l=t.target??e.eElement;this.initDrag(r,[Pl(i),"touchmove",du,{passive:!1}],[l,"touchmove",s,{passive:!0}],[l,"touchend",a,{passive:!0}],[l,"touchcancel",a,{passive:!0}]),e.dragStartPixels===0&&this.onMove(r.start)}onMouseDown(e,t){if(t.button!==0||Rg?.has(t)||this.isPointer())return;let n=this.beans;this.destroyDrag();let i=new Bz(Pl(n),e,t),o=a=>this.onMouseOrPointerMove(a),r=a=>this.onMouseOrPointerUp(a),s=Pl(n);this.initDrag(i,[s,"mousemove",o],[s,"mouseup",r]),e.dragStartPixels===0?this.onMouseOrPointerMove(t):$c(t)}onScroll(e){if(!$c(e))return;let t=this.drag,n=t?.lastDrag;n&&this.dragging&&t.params?.onDragging(n)}onMouseOrPointerMove(e){$c(e)&&(bu()&&ko(this.beans).getSelection()?.removeAllRanges(),this.shouldPreventMouseEvent(e)&&du(e),this.onMove(e))}onTouchMove(e){let t=this.drag;if(!t||!$c(e))return;let n=JC(t.start,e.touches);n&&(e.preventDefault(),this.onMove(n))}onMove(e){let t=this.drag;if(!t)return;t.lastDrag=e;let n=t.params;if(!this.dragging){let i=t.start,r=n.dragStartPixels??4;if(ite(e,i,r)||(this.dragging=!0,n.capturePointer&&(t.pointerCapture=oRe(this.beans.eRootDiv,e)),this.eventSvc.dispatchEvent({type:"dragStarted",target:n.eElement}),n.onDragStart(i),this.drag!==t)||(n.onDragging(i),this.drag!==t))return}n.onDragging(e)}onTouchUp(e){let t=this.drag;t&&$c(e)&&this.onUp(JC(t.start,e.changedTouches))}onMouseOrPointerUp(e){$c(e)&&this.onUp(e)}onUp(e){let t=this.drag;t&&(e||(e=t.lastDrag),e&&this.dragging&&(this.dragging=!1,t.params.onDragStop(e),this.eventSvc.dispatchEvent({type:"dragStopped",target:t.params.eElement})),this.destroyDrag())}onKeyDown(e){e.key===W.ESCAPE&&this.cancelDrag()}},HX=e=>{Z4(e.handlers);let t=e.oldTouchAction;if(t!=null){let n=e.params.eElement.style;n&&(n.touchAction=t)}},Bz=class{constructor(e,t,n,i=null){this.rootEl=e,this.params=t,this.start=n,this.pointerId=i,this.handlers=[],this.lastDrag=null,this.pointerCapture=null,this.eElement=t.eElement}},zz=e=>{let t=e.target;return t instanceof Element?t:null},lRe=class extends $l{constructor(){super(...arguments),this.beanName="dragAndDrop",this.dragSourceAndParamsList=[],this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.dragSource=null,this.dragImageParent=null,this.dragImageCompPromise=null,this.dragImageComp=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.dropTargets=[],this.lastDropTarget=null}addDragSource(e,t=!1){let n={capturePointer:!0,dragSource:e,eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:i=>this.onDragStart(e,i),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push(n),this.beans.dragSvc.addDragSource(n)}setDragImageCompIcon(e,t=!1){let n=this.dragImageComp;n&&(t||this.dragImageLastIcon!==e)&&(this.dragImageLastIcon=e,n.setIcon(e,t))}removeDragSource(e){let{dragSourceAndParamsList:t,beans:n}=this,i=t.find(o=>o.dragSource===e);i&&(n.dragSvc?.removeDragSource(i),Ba(t,i))}destroy(){let{dragSourceAndParamsList:e,dropTargets:t,beans:n}=this,i=n.dragSvc;for(let o of e)i?.removeDragSource(o);e.length=0,t.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){let e=this.lastMouseEvent;e&&this.onDragging(e,!0)}onDragStart(e,t){this.lastMouseEvent=t,this.dragSource=e,this.dragItem=e.getDragItem();let n=e.eElement.getBoundingClientRect();this.dragInitialSourcePointerOffsetX=t.clientX-n.left,this.dragInitialSourcePointerOffsetY=t.clientY-n.top,e.onDragStarted?.(),this.createAndUpdateDragImageComp(e)}onDragStop(e){let{dragSource:t,lastDropTarget:n}=this;if(t?.onDragStopped?.(),n){let i=this.dropTargetEvent(n,e,!1);n.onDragStop?.(i)}this.clearDragAndDropProperties()}onDragCancel(){let{dragSource:e,lastDropTarget:t,lastMouseEvent:n}=this;if(e?.onDragCancelled?.(),t&&n){let i=this.dropTargetEvent(t,n,!1);t.onDragCancel?.(i)}this.clearDragAndDropProperties()}onDragging(e,t=!1){this.positionDragImageComp(e);let n=this.findCurrentDropTarget(e),{lastDropTarget:i,dragSource:o,dragItem:r}=this,s=!1;if(n!==i){if(s=!0,i){let a=this.dropTargetEvent(i,e,t);i.onDragLeave?.(a)}if(i!==null&&!n?this.handleExit(o,r):i===null&&n&&this.handleEnter(o,r),n){let a=this.dropTargetEvent(n,e,t);n.onDragEnter?.(a)}this.lastDropTarget=n}else if(n){let a=this.dropTargetEvent(n,e,t);n.onDragging?.(a),a?.changed&&(s=!0)}this.lastMouseEvent=e,s&&this.updateDragImageComp()}clearDragAndDropProperties(){this.removeDragImageComp(this.dragImageComp),this.dragImageCompPromise=null,this.dragImageParent=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.lastDropTarget=null,this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.dragSource=null}getAllContainersFromDropTarget(e){let t=e.getSecondaryContainers?e.getSecondaryContainers():null,n=[[e.getContainer()]];return t?n.concat(t):n}isMouseOnDropTarget(e,t){let n=this.getAllContainersFromDropTarget(t),i=!1,o=(a,l)=>{for(let c of l){let{width:u,height:h,left:f,right:m,top:_,bottom:y}=c.getBoundingClientRect();if(u===0||h===0)return!1;let w=a.clientX>=f&&a.clientX<m,C=a.clientY>=_&&a.clientY<y;if(!w||!C)return!1}return!0};for(let a of n)if(o(e,a)){i=!0;break}let{eElement:r,type:s}=this.dragSource;return t.targetContainsSource&&!t.getContainer().contains(r)?!1:i&&t.isInterestedIn(s,r)}findCurrentDropTarget(e){let t=this.dropTargets.filter(r=>this.isMouseOnDropTarget(e,r)),n=t.length;if(n===0)return null;if(n===1)return t[0];let o=Pl(this.beans).elementsFromPoint(e.clientX,e.clientY);for(let r of o)for(let s of t)if(this.getAllContainersFromDropTarget(s).flatMap(l=>l).indexOf(r)!==-1)return s;return null}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.find(t=>t.external&&t.getContainer()===e)||null}dropTargetEvent(e,t,n){let{dragSource:i,dragItem:o,lastDraggingEvent:r,lastMouseEvent:s,dragInitialSourcePointerOffsetX:a,dragInitialSourcePointerOffsetY:l}=this,c=e.getContainer(),u=c.getBoundingClientRect(),{clientX:h,clientY:f}=t,m=h-(s?.clientX||0),_=f-(s?.clientY||0),y=this.createEvent({event:t,x:h-u.left,y:f-u.top,vDirection:_>0?"down":_<0?"up":null,hDirection:m<0?"left":m>0?"right":null,initialSourcePointerOffsetX:a,initialSourcePointerOffsetY:l,dragSource:i,fromNudge:n,dragItem:o,dropZoneTarget:c,dropTarget:r?.dropTarget??null,changed:!!r?.changed});return this.lastDraggingEvent=y,y}positionDragImageComp(e){let t=this.dragImageComp?.getGui();t&&tke(t,e,this.beans)}removeDragImageComp(e){this.dragImageComp===e&&(this.dragImageComp=null),e&&(e.getGui()?.remove(),this.destroyBean(e))}createAndUpdateDragImageComp(e){let t=this.createDragImageComp(e)??null;this.dragImageCompPromise=t,t?.then(n=>{if(t!==this.dragImageCompPromise||!this.lastMouseEvent||!this.isAlive()){this.destroyBean(n);return}this.dragImageCompPromise=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0;let i=this.dragImageComp;i!==n&&(this.dragImageComp=n,this.removeDragImageComp(i)),n&&(this.appendDragImageComp(n),this.updateDragImageComp())})}appendDragImageComp(e){let t=e.getGui(),n=t.style;n.position="absolute",n.zIndex="9999",this.beans.dragSvc?.hasPointerCapture()&&(n.pointerEvents="none"),this.gos.setInstanceDomData(t),this.beans.environment.applyThemeClasses(t),n.top="20px",n.left="20px";let i=j4(this.beans);this.dragImageParent=i,i?i.appendChild(t):this.warnNoBody()}updateDragImageComp(){let{dragImageComp:e,dragSource:t,lastDropTarget:n,lastDraggingEvent:i,dragImageLastLabel:o}=this;if(!e)return;this.setDragImageCompIcon(n?.getIconName?.(i)??null);let r=t?.dragItemName;typeof r=="function"&&(r=r(i)),r||(r=""),o!==r&&(this.dragImageLastLabel=r,e.setLabel(r))}};var cRe=class extends lRe{createEvent(e){return at(this.gos,e)}createDragImageComp(e){let{gos:t,beans:n}=this;return PIe(n.userCompFactory,at(t,{dragSource:e}))?.newAgStackInstance()}handleEnter(e,t){e?.onGridEnter?.(t)}handleExit(e,t){e?.onGridExit?.(t)}warnNoBody(){ce(54)}isDropZoneWithinThisGrid(e){return this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody.contains(e.dropZoneTarget)}registerGridDropTarget(e,t){let n={getContainer:e,isInterestedIn:i=>i===1||i===0,getIconName:()=>"notAllowed"};this.addDropTarget(n),t.addDestroyFunc(()=>this.removeDropTarget(n))}};function dne(e,t){return e+"_"+t}function Hi(e){return e instanceof mw}var mw=class extends te{constructor(e,t,n,i){super(),this.providedColumnGroup=e,this.groupId=t,this.partId=n,this.pinned=i,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.colIdSanitised=ZC(this.getUniqueId())}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return dne(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){let e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){for(let e of this.displayedChildren)Hi(e)&&e.checkLeft();if(this.displayedChildren.length>0)if(this.gos.get("enableRtl")){let t=Hn(this.displayedChildren).getLeft();this.setLeft(t)}else{let e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;for(let t of this.displayedChildren??[])e+=t.getActualWidth();return e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;for(let t of this.displayedChildren)t.isResizable()&&(e=!0);return e}getMinWidth(){let e=0;for(let t of this.displayedChildren)e+=t.getMinWidth();return e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){let e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){return!!this.getColGroupDef()?.autoHeaderHeight}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){let t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){for(let t of this.displayedChildren??[])gu(t)?e.push(t):Hi(t)&&t.addDisplayedLeafColumns(e)}addLeafColumns(e){for(let t of this.children??[])gu(t)?e.push(t):Hi(t)&&t.addLeafColumns(e)}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){let e=this.getParent();return!this.isPadding()||!e?.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e?.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}for(let n of this.children??[]){if(Hi(n)&&!n.displayedChildren?.length)continue;switch(n.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(n);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(n);break;default:this.displayedChildren.push(n);break}}this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},E4="row-group-",cV="t-",dV="b-",dRe=0,vu=class{constructor(e){this.master=!1,this.detail=void 0,this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this._leafs=void 0,this.childrenMapped=null,this.treeParent=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=dRe++,this.alreadyRendered=!1,this.hovered=!1,this.__selected=!1,this.beans=e}get allLeafChildren(){let e=this._leafs;return e===void 0?this.beans.groupStage?.loadLeafs?.(this)??null:e}set allLeafChildren(e){this._leafs=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){let{valueCache:n,eventSvc:i}=this.beans,o=this.data;this.data=e,n?.onDataChanged(),this.updateDataOnDetailNode(),this.resetQuickFilterAggregateText();let r=this.createDataChangedEvent(e,o,t);if(this.__localEventService?.dispatchEvent(r),this.sibling){this.sibling.data=e;let a=this.sibling.createDataChangedEvent(e,o,t);this.sibling.__localEventService?.dispatchEvent(a)}i.dispatchEvent({type:"rowNodeDataChanged",node:this});let s=this.pinnedSibling;s&&(s.data=e,s.__localEventService?.dispatchEvent(s.createDataChangedEvent(e,o,t)),i.dispatchEvent({type:"rowNodeDataChanged",node:s}))}updateDataOnDetailNode(){let e=this.detailNode;e&&(e.data=this.data)}createDataChangedEvent(e,t,n){return{type:"dataChanged",node:this,oldData:t,newData:e,update:n}}getRowIndexString(){return this.rowIndex==null?(On(13),null):this.rowPinned==="top"?cV+this.rowIndex:this.rowPinned==="bottom"?dV+this.rowIndex:this.rowIndex.toString()}setDataAndId(e,t){let{selectionSvc:n}=this.beans,i=n?.createDaemonNode?.(this),o=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),n&&(n.updateRowSelectable(this),n.syncInRowNode(this,i));let r=this.createDataChangedEvent(e,o,!1);this.__localEventService?.dispatchEvent(r)}setId(e){let t=Gg(this.beans.gos);if(t)if(this.data){let n=this.parent?.getRoute()??[];this.id=t({data:this.data,parentKeys:n.length>0?n:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(E4)&&On(14,{groupPrefix:E4})}else this.id=void 0;else this.id=e}setRowTop(e){if(this.oldRowTop=this.rowTop,this.rowTop===e)return;this.rowTop=e,this.dispatchRowEvent("topChanged");let t=e!==null;this.displayed!==t&&(this.displayed=t,this.dispatchRowEvent("displayedChanged"))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(e){this.hovered=e}isHovered(){return this.hovered}setRowHeight(e,t=!1){this.rowHeight=e,this.rowHeightEstimated=t,this.dispatchRowEvent("heightChanged")}setExpanded(e,t,n){this.beans.expansionSvc?.setExpanded(this,e,t,n)}setDataValue(e,t,n){let{colModel:i,valueSvc:o,gos:r,editSvc:s}=this.beans,a=typeof e!="string"?e:i.getCol(e)??i.getColDefCol(e);if(!a)return!1;let l=o.getValueForDisplay(a,this,void 0,void 0,"api").value;if(r.get("readOnlyEdit")){let{beans:{eventSvc:u},data:h,rowIndex:f,rowPinned:m}=this;return u.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:f,rowPinned:m,column:a,colDef:a.colDef,data:h,node:this,oldValue:l,newValue:t,value:t,source:n}),!1}if(s&&!s.committing){let u=s.setDataValue({rowNode:this,column:a},t,n);if(u!=null)return u}let c=o.setValue(this,a,t,n);return this.dispatchCellChangedEvent(a,t,l),c&&this.pinnedSibling?.dispatchCellChangedEvent(a,t,l),c}updateHasChildren(){let e=this.group&&!this.footer||!!this.childrenAfterGroup?.length,{rowChildrenSvc:t}=this.beans;t&&(e=t.getHasChildrenValue(this)),e!==this.__hasChildren&&(this.__hasChildren=!!e,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(e,t,n){let i={type:"cellChanged",node:this,column:e,newValue:t,oldValue:n};this.__localEventService?.dispatchEvent(i)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.beans.expansionSvc?.isExpandable(this)??!1}isSelected(){if(this.footer)return this.sibling.isSelected();let e=this.rowPinned&&this.pinnedSibling;return e?e.isSelected():this.__selected}depthFirstSearch(e){let t=this.childrenAfterGroup;if(t)for(let n=0,i=t.length;n<i;++n)t[n].depthFirstSearch(e);e(this)}dispatchRowEvent(e){this.__localEventService?.dispatchEvent({type:e,node:this})}setSelected(e,t=!1,n="api"){this.beans.selectionSvc?.setNodesSelected({nodes:[this],newValue:e,clearSelection:t,source:n})}isRowPinned(){return!!this.rowPinned}__addEventListener(e,t){(this.__localEventService??(this.__localEventService=new bp)).addEventListener(e,t)}__removeEventListener(e,t){this.removeLocalListener(e,t)}addEventListener(e,t){this.beans.validation?.checkRowEvents(e);let n=this.__localEventService??(this.__localEventService=new bp);this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,n);let i=this.frameworkEventListenerService?.wrap(e,t)??t;n.addEventListener(e,i)}removeEventListener(e,t){let n=this.frameworkEventListenerService?.unwrap(e,t)??t;this.removeLocalListener(e,n)}removeLocalListener(e,t){let n=this.__localEventService;n&&(n.removeEventListener(e,t),n.noRegisteredListenersExist()&&(this.__localEventService=null))}isFullWidthCell(){if(ce(61),this.detail)return!0;let e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;let e=[],t=this;for(;t?.key!=null;)e.push(t.key),t=t.parent;return e.reverse()}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.dispatchRowEvent("rowIndexChanged"))}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.dispatchRowEvent("allChildrenCountChanged"))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.dispatchRowEvent("uiLevelChanged"))}getFirstChild(){let e=this.childStore;return e?e.getFirstNode():this.childrenAfterSort?.[0]??null}};function uRe(e,t,n){return at(t,{type:n,node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned})}var hRe=new Set(["__autoHeights","__checkAutoHeightsDebounced","__localEventService","__objectId","_leafs","childStore","oldRowTop","sticky","treeNodeFlags","treeParent"]),pRe=(e,t)=>{let n=new vu(t);for(let i of Object.keys(e))hRe.has(i)||(n[i]=e[i]);return n.oldRowTop=null,n},une=e=>{for(;e?.length;){let t=e[0];if(t.data)return t;e=t.childrenAfterGroup}},hne={agSetColumnFilter:"agSetColumnFilterHandler",agMultiColumnFilter:"agMultiColumnFilterHandler",agGroupColumnFilter:"agGroupColumnFilterHandler",agNumberColumnFilter:"agNumberColumnFilterHandler",agDateColumnFilter:"agDateColumnFilterHandler",agTextColumnFilter:"agTextColumnFilterHandler"},fRe=new Set(Object.values(hne));function au(e,t){let n=e.filterUi;if(!n)return null;if(n.created)return n.promise;if(t)return null;let i=n.create(n.refreshed),o=n;return o.created=!0,o.promise=i,i}function mRe(e,t,n,i,o,r,s){return t.refresh?.(x(g({},n),{model:i,source:r,additionalEventAttributes:s})),e().then(a=>{if(a){let{filter:l,filterParams:c}=a;pne(l,c,i,o,r,s)}})}function pne(e,t,n,i,o,r){e?.refresh?.(x(g({},t),{model:n,state:i,source:o,additionalEventAttributes:r}))}function fne(e,t,n){let i=e();i?.created&&i.promise.then(o=>{let r=t();pne(o,i.filterParams,r,n()??{model:r},"ui")})}function $X(e,t,n,i,o,r,s){let a,l=!1,c;switch(e){case"apply":{let u=i();c=u?.model??null,s&&(c=s(c)),a={state:u?.state,model:c},l=!0;break}case"clear":{a={model:null};break}case"reset":{a={model:null},l=!0,c=null;break}case"cancel":{a={model:n()};break}}o(a),l?r(c):fne(t,n,i)}function Do(e,t){return e[t]??null}function ji(e){return bw(e)}function gRe(e){return{tag:"div",cls:e}}var vRe=class extends Mn{constructor(e){let{className:t="ag-filter-apply-panel"}=e??{};super(gRe(t)),this.listeners=[],this.validationMessage=null,this.className=t}updateButtons(e,t){let n=this.buttons;if(this.buttons=e,n===e)return;let i=this.getGui();Vo(i);let o;this.destroyListeners();let r=document.createDocumentFragment(),s=this.className,a=({type:c,label:u})=>{let h=C=>{this.dispatchLocalEvent({type:c,event:C})};["apply","clear","reset","cancel"].includes(c)||ce(75);let f=c==="apply",_=ji({tag:"button",attrs:{type:f&&t?"submit":"button"},ref:`${c}FilterButton`,cls:`ag-button ag-standard-button ${s}-button${f?" "+s+"-apply-button":""}`,children:u});this.activateTabIndex([_]),f&&(o=_);let y=C=>{C.key===W.ENTER&&(C.preventDefault(),h(C))},w=this.listeners;_.addEventListener("click",h),w.push(()=>_.removeEventListener("click",h)),_.addEventListener("keydown",y),w.push(()=>_.removeEventListener("keydown",y)),r.append(_)};for(let c of e)a(c);this.eApply=o;let l=this.validationTooltipFeature;o&&!l?this.validationTooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eApply,getLocation:()=>"advancedFilter",getTooltipShowDelayOverride:()=>1e3})):!o&&l&&(this.validationTooltipFeature=this.destroyBean(l)),i.append(r)}getApplyButton(){return this.eApply}updateValidity(e,t=null){let n=this.eApply;n&&(aw(n,e===!1),this.validationMessage=t??null,this.validationTooltipFeature?.setTooltipAndRefresh(this.validationMessage))}destroyListeners(){for(let e of this.listeners)e();this.listeners=[]}destroy(){this.destroyListeners(),super.destroy()}};var _Re={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd",filterSummaryInactive:"is (All)",filterSummaryContains:"contains",filterSummaryNotContains:"does not contain",filterSummaryTextEquals:"equals",filterSummaryTextNotEqual:"does not equal",filterSummaryStartsWith:"begins with",filterSummaryEndsWith:"ends with",filterSummaryBlank:"is blank",filterSummaryNotBlank:"is not blank",filterSummaryEquals:"=",filterSummaryNotEqual:"!=",filterSummaryGreaterThan:">",filterSummaryGreaterThanOrEqual:">=",filterSummaryLessThan:"<",filterSummaryLessThanOrEqual:"<=",filterSummaryInRange:"between",filterSummaryInRangeValues:e=>`(${e[0]}, ${e[1]})`,filterSummaryTextQuote:e=>`"${e[0]}"`};function hu(e,t,n){return ike(e,_Re,t,n)}function uV(e,t){let{debounceMs:n}=e;return SI(e)?(n!=null&&ce(71),0):n??t}function SI(e){return(e.buttons?.indexOf("apply")??-1)>=0}var yRe=class extends Mn{constructor(e,t,n,i,o,r){super(),this.column=e,this.wrapper=t,this.eventParent=n,this.updateModel=i,this.isGlobalButtons=o,this.enableGlobalButtonCheck=r,this.hidePopup=null,this.applyActive=!1}postConstruct(){let{comp:e,params:t}=this.wrapper,n=t,i=n.useForm,o=i?"form":"div";this.setTemplate({tag:o,cls:"ag-filter-wrapper"}),i&&this.addManagedElementListeners(this.getGui(),{submit:r=>{r?.preventDefault()},keydown:this.handleKeyDown.bind(this)}),this.appendChild(e.getGui()),this.params=n,this.resetButtonsPanel(n),this.addManagedListeners(this.eventParent,g({filterParamsChanged:({column:r,params:s})=>{r===this.column&&this.resetButtonsPanel(s,this.params)},filterStateChanged:({column:r,state:s})=>{r===this.column&&this.eButtons?.updateValidity(s.valid!==!1)},filterAction:({column:r,action:s,event:a})=>{r===this.column&&this.afterAction(s,a)}},this.enableGlobalButtonCheck?{filterGlobalButtons:({isGlobal:r})=>{if(r!==this.isGlobalButtons){this.isGlobalButtons=r;let s=this.params;this.resetButtonsPanel(s,s,!0)}}}:void 0))}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup)}resetButtonsPanel(e,t,n){let{buttons:i,readOnly:o}=t??{},{buttons:r,readOnly:s,useForm:a}=e;if(!n&&o===s&&rw(i,r))return;let l=r&&r.length>0&&!e.readOnly&&!this.isGlobalButtons,c=this.eButtons;if(l){let u=r.map(h=>{let f=`${h}Filter`;return{type:h,label:hu(this,f)}});if(this.applyActive=SI(this.params),!c){c=this.createBean(new vRe),this.appendChild(c.getGui());let h=this.column,f=m=>({event:_})=>{this.updateModel(h,m,{fromButtons:!0}),this.afterAction(m,_)};c?.addManagedListeners(c,{apply:f("apply"),clear:f("clear"),reset:f("reset"),cancel:f("cancel")}),this.eButtons=c}c.updateButtons(u,a)}else this.applyActive=!1,c&&(Wr(c.getGui()),this.eButtons=this.destroyBean(c))}close(e){let t=this.hidePopup;if(!t)return;let n=e,i=n?.key,o;(i===W.ENTER||i===W.SPACE)&&(o={keyboardEvent:n}),t(o),this.hidePopup=null}afterAction(e,t){let{params:n,applyActive:i}=this,o=n?.closeOnApply;switch(e){case"apply":{t?.preventDefault(),o&&i&&this.close(t);break}case"reset":{o&&i&&this.close();break}case"cancel":{o&&this.close(t);break}}}handleKeyDown(e){!e.defaultPrevented&&e.key===W.ENTER&&this.applyActive&&(this.updateModel(this.column,"apply",{fromButtons:!0}),this.afterAction("apply",e))}destroy(){this.hidePopup=null,this.eButtons=this.destroyBean(this.eButtons)}},bRe={tag:"div",cls:"ag-filter"},CRe=class extends Mn{constructor(e,t,n){super(bRe),this.column=e,this.source=t,this.enableGlobalButtonCheck=n,this.wrapper=null}postConstruct(){this.beans.colFilter?.activeFilterComps.add(this),this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return this.wrapper!=null}getFilter(){return this.wrapper?.then(e=>e.comp)??null}afterInit(){return this.wrapper?.then(()=>{})??Ii.resolve()}afterGuiAttached(e){this.afterGuiAttachedParams=e,this.wrapper?.then(t=>{this.comp?.afterGuiAttached(e),t?.comp?.afterGuiAttached?.(e)})}afterGuiDetached(){this.wrapper?.then(e=>{e?.comp?.afterGuiDetached?.()})}createFilter(e){let{column:t,source:n,beans:{colFilter:i}}=this,o=i.getFilterUiForDisplay(t)??null;this.wrapper=o,o?.then(r=>{if(!r)return;let{isHandler:s,comp:a}=r,l;if(s){let c=!!this.enableGlobalButtonCheck,u=this.createBean(new yRe(t,r,i,i.updateModel.bind(i),c&&i.isGlobalButtons,c));this.comp=u,l=u.getGui()}else l=a.getGui(),Se(l)||ce(69,{guiFromFilter:l});this.appendChild(l),e?this.eventSvc.dispatchEvent({type:"filterOpened",column:t,source:n,eGui:this.getGui()}):a.afterGuiAttached?.(this.afterGuiAttachedParams)})}onFilterDestroyed(e){let{source:t,column:n}=e;(t==="api"||t==="paramsUpdated")&&n.getId()===this.column.getId()&&this.beans.colModel.getColDefCol(this.column)&&(Vo(this.getGui()),this.comp=this.destroyBean(this.comp),this.createFilter())}destroy(){this.beans.colFilter?.activeFilterComps.delete(this),this.eventSvc.dispatchEvent({type:"filterClosed",column:this.column}),this.wrapper=null,this.comp=this.destroyBean(this.comp),this.afterGuiAttachedParams=void 0,super.destroy()}},jX={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},GX=["january","february","march","april","may","june","july","august","september","october","november","december"];function wRe(e,t){return e==null?-1:t==null?1:Number.parseFloat(e)-Number.parseFloat(t)}function UX(e){return e instanceof Date&&!isNaN(e.getTime())}var D4={number:()=>{},boolean:()=>({maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(e,t)=>t,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(e,t)=>t===!1,numberOfInputs:0}]}),date:()=>({isValidDate:UX}),dateString:({dataTypeDefinition:e})=>({comparator:(t,n)=>{let i=e.dateParser(n);return n==null||i<t?-1:i>t?1:0},isValidDate:t=>typeof t=="string"&&UX(e.dateParser(t))}),dateTime:e=>D4.date(e),dateTimeString:e=>D4.dateString(e),object:()=>{},text:()=>{}},k4={number:()=>({comparator:wRe}),boolean:({t:e})=>({valueFormatter:t=>Se(t.value)?e(String(t.value),t.value?"True":"False"):e("blanks","(Blanks)")}),date:({formatValue:e,t})=>({valueFormatter:n=>{let i=e(n);return Se(i)?i:t("blanks","(Blanks)")},treeList:!0,treeListFormatter:(n,i)=>{if(n==="NaN")return t("invalidDate","Invalid Date");if(i===1&&n!=null){let o=GX[Number(n)-1];return t(o,jX[o])}return n??t("blanks","(Blanks)")},treeListPathGetter:n=>kk(n,!1)}),dateString:({formatValue:e,dataTypeDefinition:t,t:n})=>({valueFormatter:i=>{let o=e(i);return Se(o)?o:n("blanks","(Blanks)")},treeList:!0,treeListPathGetter:i=>kk(t.dateParser(i??void 0),!1),treeListFormatter:(i,o)=>{if(o===1&&i!=null){let r=GX[Number(i)-1];return n(r,jX[r])}return i??n("blanks","(Blanks)")}}),dateTime:e=>{let t=k4.date(e);return t.treeListPathGetter=kk,t},dateTimeString(e){let t=e.dataTypeDefinition.dateParser,n=k4.dateString(e);return n.treeListPathGetter=i=>kk(t(i??void 0)),n},object:({formatValue:e,t})=>({valueFormatter:n=>{let i=e(n);return Se(i)?i:t("blanks","(Blanks)")}}),text:()=>{}};function xRe(e,t,n,i,o,r,s){let a=t,l=n,c=e==="agSetColumnFilter";!l&&i.baseDataType==="object"&&!c&&(l=({column:m,node:_})=>o({column:m,node:_,value:r.valueSvc.getValue(m,_)}));let h=(c?k4:D4)[i.baseDataType],f=h({dataTypeDefinition:i,formatValue:o,t:s});return a=typeof t=="object"?g(g({},f),t):f,{filterParams:a,filterValueGetter:l}}var SRe={boolean:"agTextColumnFilter",date:"agDateColumnFilter",dateString:"agDateColumnFilter",dateTime:"agDateColumnFilter",dateTimeString:"agDateColumnFilter",number:"agNumberColumnFilter",object:"agTextColumnFilter",text:"agTextColumnFilter"},ERe={boolean:"agTextColumnFloatingFilter",date:"agDateColumnFloatingFilter",dateString:"agDateColumnFloatingFilter",dateTime:"agDateColumnFloatingFilter",dateTimeString:"agDateColumnFloatingFilter",number:"agNumberColumnFloatingFilter",object:"agTextColumnFloatingFilter",text:"agTextColumnFloatingFilter"};function DRe(e,t=!1){return(t?ERe:SRe)[e??"text"]}var mne="ag-resizer-wrapper",lu=(e,t)=>({tag:"div",ref:`${e}Resizer`,cls:`ag-resizer ag-resizer-${t}`}),kRe={tag:"div",cls:mne,children:[lu("eTopLeft","topLeft"),lu("eTop","top"),lu("eTopRight","topRight"),lu("eRight","right"),lu("eBottomRight","bottomRight"),lu("eBottom","bottom"),lu("eBottomLeft","bottomLeft"),lu("eLeft","left")]},IRe=class extends te{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupSvc=e.popupSvc,this.dragSvc=e.dragSvc}center(e){let{clientHeight:t,clientWidth:n}=this.offsetParent,i=n/2-this.getWidth()/2,o=t/2-this.getHeight()/2;this.offsetElement(i,o,e)}initialisePosition(e){if(this.positioned)return;let{centered:t,forcePopupParentAsOffsetParent:n,minWidth:i,width:o,minHeight:r,height:s,x:a,y:l}=this.config;this.offsetParent||this.setOffsetParent();let c=0,u=0,h=Hl(this.element);if(h){let f=this.findBoundaryElement(),m=window.getComputedStyle(f);if(m.minWidth!=null){let _=f.offsetWidth-this.element.offsetWidth;u=Number.parseInt(m.minWidth,10)-_}if(m.minHeight!=null){let _=f.offsetHeight-this.element.offsetHeight;c=Number.parseInt(m.minHeight,10)-_}}if(this.minHeight=r||c,this.minWidth=i||u,o&&this.setWidth(o),s&&this.setHeight(s),(!o||!s)&&this.refreshSize(),t)this.center(e);else if(a||l)this.offsetElement(a,l,e);else if(h&&n){let f=this.boundaryEl,m=!0;if(f||(f=this.findBoundaryElement(),m=!1),f){let _=Number.parseFloat(f.style.top),y=Number.parseFloat(f.style.left);m?this.offsetElement(isNaN(y)?0:y,isNaN(_)?0:_,e):this.setPosition(y,_)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;let n=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragSvc?.addDragSource(n),this.moveElementDragListener=n):(this.dragSvc?.removeDragSource(n),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{let i=!!e[t],o=this.getResizerElement(t),r={dragStartPixels:0,eElement:o,onDragStart:s=>this.onResizeStart(s,t),onDragging:this.onResize.bind(this),onDragStop:s=>this.onResizeEnd(s,t)};(i||!this.isAlive()&&!i)&&(i?(this.dragSvc?.addDragSource(r),this.resizeListeners.push(r),o.style.pointerEvents="all"):o.style.pointerEvents="none",this.resizable[t]=i)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";let{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){let{popup:t}=this.config,n=this.element,i=!1;if(typeof e=="string"&&e.includes("%"))QC(n,e),e=Zee(n),i=!0;else if(e=Math.max(this.minHeight,e),this.positioned){let o=this.getAvailableHeight();o&&e>o&&(e=o)}this.getHeight()!==e&&(i?(n.style.maxHeight="unset",n.style.minHeight="unset"):t?QC(n,e):(n.style.height=`${e}px`,n.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:Number.parseFloat(e)))}getAvailableHeight(){let{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();let{clientHeight:n}=this.offsetParent;if(!n)return null;let i=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),r=e?this.position.y:i.top,s=e?0:o.top,a=0;if(t){let c=this.element.parentElement;if(c){let{bottom:u}=c.getBoundingClientRect();a=u-i.bottom}}return n+s-r-a}getWidth(){return this.element.offsetWidth}setWidth(e){let t=this.element,{popup:n}=this.config,i=!1;if(typeof e=="string"&&e.includes("%"))Nl(t,e),e=Qk(t),i=!0;else if(this.positioned){e=Math.max(this.minWidth,e);let{clientWidth:o}=this.offsetParent,r=n?this.position.x:this.element.getBoundingClientRect().left;o&&e+r>o&&(e=o-r)}this.getWidth()!==e&&(i?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?Nl(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:Number.parseFloat(e)))}offsetElement(e=0,t=0,n){let{forcePopupParentAsOffsetParent:i}=this.config,o=i?this.boundaryEl:this.element;o&&(this.popupSvc?.positionPopup({ePopup:o,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t}),postProcessCallback:n}),this.setPosition(Number.parseFloat(o.style.left),Number.parseFloat(o.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;let t=()=>{let n=this.getAvailableHeight();this.element.style.setProperty("max-height",`${n}px`)};e&&this.popupSvc?(this.resizeObserverSubscriber?.(),this.resizeObserverSubscriber=_u(this.beans,this.popupSvc?.getPopupParent(),t)):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){let{e:t,isLeft:n,isTop:i,anywhereWithin:o,topBuffer:r}=e,s=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y,l=this.shouldSkipX(t,!!n,!!o,s)?0:s,c=this.shouldSkipY(t,!!i,r,a)?0:a;return{movementX:l,movementY:c}}shouldSkipX(e,t,n,i){let o=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),s=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:o.left,l=a<=0&&r.left>=e.clientX||r.right<=e.clientX&&r.right<=s.right;return l?!0:(t?l=i<0&&e.clientX>a+r.left||i>0&&e.clientX<a+r.left:n?l=i<0&&e.clientX>s.right||i>0&&e.clientX<a+r.left:l=i<0&&e.clientX>s.right||i>0&&e.clientX<s.right,l)}shouldSkipY(e,t,n=0,i){let o=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),s=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:o.top,l=a<=0&&r.top>=e.clientY||r.bottom<=e.clientY&&r.bottom<=s.bottom;return l?!0:(t?l=i<0&&e.clientY>a+r.top+n||i>0&&e.clientY<a+r.top:l=i<0&&e.clientY>s.bottom||i>0&&e.clientY<s.bottom,l)}createResizeMap(){let e=t=>({element:this.element.querySelector(`[data-ref=${t}Resizer]`)});this.resizerMap={topLeft:e("eTopLeft"),top:e("eTop"),topRight:e("eTopRight"),right:e("eRight"),bottomRight:e("eBottomRight"),bottom:e("eBottom"),bottomLeft:e("eBottomLeft"),left:e("eLeft")}}addResizers(){if(this.resizersAdded)return;let e=this.element;e&&(e.appendChild(ji(kRe)),this.createResizeMap(),this.resizersAdded=!0)}removeResizers(){this.resizerMap=void 0,this.element.querySelector(`.${mne}`)?.remove(),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");let{popup:n,forcePopupParentAsOffsetParent:i}=this.config;!n&&!i&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){let t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(n=>!n.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){let e=this.getSiblings()||[],t=0,n=0;for(let i=0;i<e.length;i++){let o=e[i],r=!!o.style.flex&&o.style.flex!=="0 0 auto";if(o===this.element)continue;let s=this.minHeight||0,a=this.minWidth||0;if(r){let l=window.getComputedStyle(o);l.minHeight&&(s=Number.parseInt(l.minHeight,10)),l.minWidth&&(a=Number.parseInt(l.minWidth,10))}else s=o.offsetHeight,a=o.offsetWidth;t+=s,n+=a}return{height:t,width:n}}applySizeToSiblings(e){let t=null,n=this.getSiblings();if(n){for(let i=0;i<n.length;i++){let o=n[i];o!==t&&(e?o.style.height=`${o.offsetHeight}px`:o.style.width=`${o.offsetWidth}px`,o.style.flex="0 0 auto",o===this.element&&(t=n[i+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;let{popup:t,forcePopupParentAsOffsetParent:n}=this.config,{isTop:i,isRight:o,isBottom:r,isLeft:s}=this.currentResizer,a=o||s,l=r||i,{movementX:c,movementY:u}=this.calculateMouseMovement({e,isLeft:s,isTop:i}),h=this.position.x,f=this.position.y,m=0,_=0;if(a&&c){let y=s?-1:1,w=this.getWidth(),C=w+c*y,S=!1;s&&(m=w-C,(h+m<=0||C<=this.minWidth)&&(S=!0,m=0)),S||this.setWidth(C)}if(l&&u){let y=i?-1:1,w=this.getHeight(),C=w+u*y,S=!1;i?(_=w-C,(f+_<=0||C<=this.minHeight)&&(S=!0,_=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&w<C&&this.getMinSizeOfSiblings().height+C>this.element.parentElement.offsetHeight&&(S=!0),S||this.setHeight(C)}this.updateDragStartPosition(e.clientX,e.clientY),((t||n)&&m||_)&&this.offsetElement(h+m,f+_)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){let e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;let{x:t,y:n}=this.position,i;this.config.calculateTopBuffer&&(i=this.config.calculateTopBuffer());let{movementX:o,movementY:r}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:i});this.offsetElement(t+o,n+r),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent&&this.popupSvc?this.offsetParent=this.popupSvc.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){let e=this.resizeListeners.pop();this.dragSvc?.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragSvc?.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},gne="__ag_Grid_Stop_Propagation";function xp(e){e[gne]=!0}function Yc(e){return e[gne]===!0}var MRe="ag-focus-managed",Qg=class extends te{constructor(e,t={}){super(),this.eFocusable=e,this.callbacks=t,this.callbacks=g({shouldStopEventPropagation:()=>!1,onTabKeyDown:n=>{if(n.defaultPrevented)return;let i=kp(this.beans,this.eFocusable,!1,n.shiftKey);i&&(i.focus(),n.preventDefault())}},t)}postConstruct(){let{eFocusable:e,callbacks:{onFocusIn:t,onFocusOut:n}}=this;e.classList.add(MRe),this.addKeyDownListeners(e),t&&this.addManagedElementListeners(e,{focusin:t}),n&&this.addManagedElementListeners(e,{focusout:n})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:t=>{if(t.defaultPrevented||Yc(t))return;let{callbacks:n}=this;if(n.shouldStopEventPropagation(t)){xp(t);return}t.key===W.TAB?n.onTabKeyDown(t):n.handleKeyDown&&n.handleKeyDown(t)}})}},RRe=class extends Mn{constructor(e,t){super(),this.filterNameKey=e,this.cssIdentifier=t,this.applyActive=!1,this.debouncePending=!1,this.defaultDebounceMs=0}postConstruct(){let e={tag:"div",cls:`ag-filter-body-wrapper ag-${this.cssIdentifier}-body-wrapper`,children:[this.createBodyTemplate()]};this.setTemplate(e,this.getAgComponents()),this.createManagedBean(new Qg(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=this.createBean(new IRe(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}))}handleKeyDown(e){}init(e){let t=e;this.setParams(t),this.setModelIntoUi(t.state.model,!0).then(()=>this.updateUiVisibility())}refresh(e){let t=e,n=this.params;this.params=t,t.source==="colDef"&&this.updateParams(t,n);let o=t.state,r=this.state;return this.state=o,(o.model!==r.model||o.state!==r.state)&&this.setModelIntoUi(o.model),!0}setParams(e){this.params=e,this.state=e.state,this.commonUpdateParams(e)}updateParams(e,t){this.commonUpdateParams(e,t)}commonUpdateParams(e,t){this.applyActive=SI(e),this.setupApplyDebounced()}doesFilterPass(e){ce(283);let{getHandler:t,model:n,column:i}=this.params;return t().doesFilterPass(x(g({},e),{model:n,handlerParams:this.beans.colFilter.getHandlerParams(i)}))}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return ce(284),this.params.model!=null}setupApplyDebounced(){let e=uV(this.params,this.defaultDebounceMs),t=zo(this,this.checkApplyDebounce.bind(this),e);this.applyDebounced=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.doApplyModel())}getModel(){return ce(285),this.params.model}setModel(e){ce(286);let{beans:t,params:n}=this;return t.colFilter.setModelForColumnLegacy(n.column,e)}applyModel(e="api"){return this.doApplyModel()}canApply(e){return!0}doApplyModel(e){let{params:t,state:n}=this,i=!this.areModelsEqual(t.model,n.model);return i&&t.onAction("apply",e),i}onNewRowsLoaded(){}onUiChanged(e,t=!1){this.updateUiVisibility();let n=this.getModelFromUi(),i={model:n,state:this.getState(),valid:this.canApply(n)};this.state=i;let o=this.params;o.onStateChange(i),o.onUiChange(this.getUiChangeEventParams()),this.gos.get("enableFilterHandlers")||this.eventSvc.dispatchEvent({type:"filterModified",column:o.column,filterInstance:this}),e??(e=this.applyActive?void 0:"debounce"),e==="immediately"?this.doApplyModel({afterFloatingFilter:t,afterDataChange:!1}):e==="debounce"&&this.applyDebounced()}getState(){}getUiChangeEventParams(){}afterGuiAttached(e){this.lastContainerType=e?.container,this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){let{positionableFeature:t,gos:n}=this;if(!t)return;let i=e==="floatingFilter"||e==="columnFilter";i?(t.restoreLastSize(),t.setResizable(n.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(t.removeSizeFromEl(),t.setResizable(!1)),t.constrainSizeToAvailableHeight(i)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature?.constrainSizeToAvailableHeight(!1)}destroy(){this.positionableFeature=this.destroyBean(this.positionableFeature),super.destroy()}translate(e){return hu(this,e)}getPositionableElement(){return this.getGui()}areModelsEqual(e,t){return e===t||e==null&&t==null?!0:e==null||t==null?!1:this.areNonNullModelsEqual(e,t)}};function vne(e){return!!e.operator}function TRe(e,t,n){if(t==null)return null;let i=null,{compName:o,jsComp:r,fwComp:s}=Gte(e,t);return o?i={agSetColumnFilter:"agSetColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[o]:r==null&&s==null&&t.filter===!0&&(i=n()),i}var La={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"},hV=class extends te{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){let e=this.gos.get("domLayout"),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},n=t.autoHeight?La.AUTO_HEIGHT:t.print?La.PRINT:La.NORMAL;this.view.updateLayoutClasses(n,t)}},cu="Viewport",WX="fakeVScrollComp",Vz=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"],qX=100,Hz=150,PRe=class extends te{constructor(e){super(),this.clearRetryListenerFncs=[],this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.lastIsHorizontalScrollShowing=!1,this.scrollTimer=0,this.isScrollActive=!1,this.isVerticalPositionInvalidated=!0,this.isHorizontalPositionInvalidated=!0,this.eBodyViewport=e,this.resetLastHScrollDebounced=zo(this,()=>this.lastScrollSource[1]=null,Hz),this.resetLastVScrollDebounced=zo(this,()=>this.lastScrollSource[0]=null,Hz)}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.animationFrameSvc=e.animationFrameSvc,this.visibleCols=e.visibleCols}destroy(){super.destroy(),this.clearRetryListenerFncs=[],window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");let e=this.invalidateVerticalScroll.bind(this),t=this.invalidateHorizontalScroll.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),bodyHeightChanged:e,scrollGapChanged:t}),this.addManagedElementListeners(this.eBodyViewport,{scroll:e}),this.ctrlsSvc.whenReady(this,n=>{this.centerRowsCtrl=n.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}invalidateHorizontalScroll(){this.isHorizontalPositionInvalidated=!0}invalidateVerticalScroll(){this.isVerticalPositionInvalidated=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,cu)});for(let e of Vz){let t=this.ctrlsSvc.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){let e=this.ctrlsSvc.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),n=t?zo(this,this.onVScroll.bind(this,cu),qX):this.onVScroll.bind(this,cu),i=t?zo(this,this.onVScroll.bind(this,WX),qX):this.onVScroll.bind(this,WX);this.addManagedElementListeners(this.eBodyViewport,{scroll:n}),this.registerScrollPartner(e,i)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){this.centerRowsCtrl!=null&&(e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(let t of[...Vz,cu]){if(this.lastScrollSource[1]===t)continue;let n=this.getViewportForSource(t);Xk(n,e,this.enableRtl)}}getViewportForSource(e){return e===cu?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(e).eViewport}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(t===0?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;let t=this.centerRowsCtrl.eViewport,{scrollLeft:n}=t;if(this.shouldBlockScrollUpdate(1,n,!0))return;let i=Jk(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(i),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;if(e===cu?t=this.eBodyViewport.scrollTop:t=this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0))return;let{animationFrameSvc:n}=this;n?.setScrollTop(t),this.nextScrollTop=t,e===cu?this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,n?.active?n.schedule():this.scrollGridIfNeeded(!0),this.resetLastVScrollDebounced()}doHorizontalScroll(e){let t=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}isScrolling(){return this.isScrollActive}fireScrollEvent(e){let t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.isScrollActive=!0,this.eventSvc.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout(()=>{this.scrollTimer=0,this.isScrollActive=!1,this.eventSvc.dispatchEvent(x(g({},t),{type:"bodyScrollEnd"}))},Hz)}shouldBlockScrollUpdate(e,t,n=!1){return n&&!vp()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){let t=G4(this.eBodyViewport),{scrollHeight:n}=this.eBodyViewport;return e<0||e+t>n}shouldBlockHorizontalScroll(e){let t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:n}=this.centerRowsCtrl.eViewport;if(this.enableRtl){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>n}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){let e=this.scrollLeft,t=!1;for(let n of Vz)if(this.getViewportForSource(n).scrollLeft!==e){t=!0;break}t&&this.onHScroll(cu)}scrollGridIfNeeded(e=!1){let t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,e&&this.invalidateVerticalScroll(),this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(e,t=!1){let i=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl?e=e>0?0:i:e=Math.min(Math.max(e,0),i)),Xk(this.centerRowsCtrl.eViewport,Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.invalidateVerticalScroll(),this.eBodyViewport.scrollTop=e}getVScrollPosition(){if(!this.isVerticalPositionInvalidated){let{lastOffsetHeight:n,lastScrollTop:i}=this;return{top:i,bottom:i+n}}this.isVerticalPositionInvalidated=!1;let{scrollTop:e,offsetHeight:t}=this.eBodyViewport;return this.lastScrollTop=e,this.lastOffsetHeight=t,{top:e,bottom:e+t}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.isHorizontalPositionInvalidated&&(this.lastIsHorizontalScrollShowing=this.centerRowsCtrl.isHorizontalScrollShowing(),this.isHorizontalPositionInvalidated=!1),this.lastIsHorizontalScrollShowing}scrollHorizontally(e){let t=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.eViewport.scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){let{rowModel:n}=this.beans,i=n.getRowCount(),o=-1;for(let r=0;r<i;r++){let s=n.getRow(r);if(typeof e=="function"){if(s&&e(s)){o=r;break}}else if(e===s||e===s.data){o=r;break}}o>=0&&this.ensureIndexVisible(o,t)}ensureIndexVisible(e,t,n=0){if(Ho(this.gos,"print"))return;let{rowModel:i}=this.beans,o=i.getRowCount();if(typeof e!="number"||e<0||e>=o){ce(88,{index:e});return}this.clearRetryListeners();let{frameworkOverrides:r,pageBounds:s,rowContainerHeight:a,rowRenderer:l}=this.beans;r.wrapIncoming(()=>{let c=this.ctrlsSvc.getGridBodyCtrl(),u=i.getRow(e),h,f,m=0;this.invalidateVerticalScroll();do{let{stickyTopHeight:_,stickyBottomHeight:y}=c,w=u.rowTop,C=u.rowHeight,S=s.getPixelOffset(),I=u.rowTop-S,O=I+u.rowHeight,F=this.getVScrollPosition(),H=a.divStretchOffset,j=F.top+H,re=F.bottom+H,ae=re-j,se=a.getScrollPositionForPixel(I),Te=a.getScrollPositionForPixel(O-ae),ue=Math.min((se+Te)/2,I),De=j+_>I,Ne=re-y<O,Pe=null;t==="top"?Pe=se-_:t==="bottom"?Pe=Te+y:t==="middle"?Pe=ue:De?Pe=se-_:Ne&&(Te-se>ae?Pe=se-_:Pe=Te+y),Pe!==null&&(this.setVerticalScrollPosition(Pe),l.redraw({afterScroll:!0})),h=w!==u.rowTop||C!==u.rowHeight,f=_!==c.stickyTopHeight||y!==c.stickyBottomHeight,m++}while((h||f)&&m<10);if(this.animationFrameSvc?.flushAllFrames(),n<10&&(u?.stub||!this.beans.rowAutoHeight?.areRowsMeasured())){let _=this.getVScrollPosition().top;this.clearRetryListenerFncs=this.addManagedEventListeners({bodyScroll:()=>{let y=this.getVScrollPosition().top;_!==y&&this.clearRetryListeners()},modelUpdated:()=>{this.clearRetryListeners(),!(e>=i.getRowCount())&&this.ensureIndexVisible(e,t,n+1)}})}})}clearRetryListeners(){for(let e of this.clearRetryListenerFncs)e();this.clearRetryListenerFncs=[]}ensureColumnVisible(e,t="auto"){let{colModel:n,frameworkOverrides:i}=this.beans,o=n.getCol(e);if(!o||o.isPinned()||!this.visibleCols.isColDisplayed(o))return;let r=this.getPositionedHorizontalScroll(o,t);i.wrapIncoming(()=>{r!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(r),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameSvc?.flushAllFrames()})}getPositionedHorizontalScroll(e,t){let{columnBeforeStart:n,columnAfterEnd:i}=this.isColumnOutsideViewport(e),o=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),r=this.centerRowsCtrl.getCenterWidth(),s=this.enableRtl,a=(s?n:i)||o,l=s?i:n;t!=="auto"&&(a=t==="start",l=t==="end");let c=t==="middle";if(a||l||c){let{colLeft:u,colMiddle:h,colRight:f}=this.getColumnBounds(e);return c?h-r/2:a?s?f:u:s?u-r:f-r}return null}isColumnOutsideViewport(e){let{start:t,end:n}=this.getViewportBounds(),{colLeft:i,colRight:o}=this.getColumnBounds(e),r=this.enableRtl,s=r?t>o:n<o,a=r?n<i:t>i;return{columnBeforeStart:s,columnAfterEnd:a}}getColumnBounds(e){let t=this.enableRtl,n=this.visibleCols.bodyWidth,i=e.getActualWidth(),o=e.getLeft(),r=t?-1:1,s=t?n-o:o,a=s+i*r,l=s+i/2*r;return{colLeft:s,colMiddle:l,colRight:a}}getViewportBounds(){let e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),n=t,i=e+t;return{start:n,end:i,width:e}}},pV=class extends te{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}postConstruct(){let e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){let e=Ho(this.gos,"print"),{visibleCols:t,scrollVisibleSvc:n}=this.beans,i=t.bodyWidth,o=t.getColsLeftWidth(),r=t.getDisplayedColumnsRightWidth(),s;e?s=i+o+r:(s=i,this.addSpacer&&(this.gos.get("enableRtl")?o:r)===0&&n.verticalScrollShowing&&(s+=n.getScrollbarWidth())),this.callback(s)}},ARe=class extends te{constructor(e){super(),this.centerContainerCtrl=e}wireBeans(e){this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){let{beans:e,centerContainerCtrl:t,gridBodyCtrl:n}=this,i=()=>{Xc(e,()=>{this.onCenterViewportResized()})};t.registerViewportResizeListener(i),n.registerBodyViewportResizeListener(i)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){let{pinnedCols:e,colFlex:t}=this.beans;e?.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();let n=this.centerContainerCtrl.getCenterWidth();n!==this.centerWidth&&(this.centerWidth=n,t?.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){let e=this.gridBodyCtrl.eBodyViewport,t=G4(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventSvc.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){if(!this.isAlive())return;let e={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(e)}onHorizontalViewportChanged(){let e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.beans.colViewport.setScrollPosition(e,t)}};function Gk(e,t,n,i){let o=t.getColDef().cellRendererParams?.suppressMouseEventHandling;return _ne(e,t,n,i,o)}function ORe(e,t,n,i){let o=t?.suppressMouseEventHandling;return _ne(e,void 0,n,i,o)}function _ne(e,t,n,i,o){return o?o(at(e,{column:t,node:n,event:i})):!1}function yne(e,t,n){let i=t;for(;i;){let o=_te(e,i,n);if(o)return o;i=i.parentElement}return null}var hI="cellCtrl";function fV(e,t){return yne(e,t,hI)}var pI="renderedRow";function FRe(e,t){return yne(e,t,pI)}function I4(e,t,n,i,o){let r=i?i.getColDef().suppressKeyboardEvent:void 0;if(!r)return!1;let s=at(e,{event:t,editing:o,column:i,node:n,data:n.data,colDef:i.getColDef()});return!!(r&&r(s))}function LRe(e){let{pinnedRowModel:t,rowModel:n}=e,[i,o]=[t?.isEmpty("top")??!0,t?.isEmpty("bottom")??!0],r=i?null:"top",s,a;o?(s=null,a=n.getRowCount()-1):(s="bottom",a=t?.getPinnedBottomRowCount()??-1);let{visibleCols:l,rangeSvc:c}=e,u=l.allCols;!c||!u?.length||c.setCellRange({rowStartIndex:0,rowStartPinned:r,rowEndIndex:a,rowEndPinned:s})}var NRe=65,BRe=67,zRe=86,VRe=68,HRe=90,$Re=89;function jRe(e){let{keyCode:t}=e,n;switch(t){case NRe:n=W.A;break;case BRe:n=W.C;break;case zRe:n=W.V;break;case VRe:n=W.D;break;case HRe:n=W.Z;break;case $Re:n=W.Y;break;default:n=e.code}return n}var GRe=class extends te{constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.beans.touchSvc?.mockRowContextMenu(this),this.editSvc=this.beans.editSvc}addKeyboardListeners(){let e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){let t=["dblclick","contextmenu","mouseover","mouseout","click",nte("touchstart")?"touchstart":"mousedown"];for(let n of t){let i=this.processMouseEvent.bind(this,n);this.addManagedElementListeners(this.element,{[n]:i})}}processMouseEvent(e,t){if(!cw(this.beans,t)||Yc(t))return;let{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(t.target);e==="contextmenu"?(n?.column&&n.dispatchCellContextMenuEvent(t),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(t,void 0,i,n)):(n&&n.onMouseEvent(e,t),i&&i.onMouseEvent(e,t))}getControlsForEventTarget(e){let{gos:t}=this;return{cellCtrl:fV(t,e),rowCtrl:FRe(t,e)}}processKeyboardEvent(e,t){let{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(n?this.processCellKeyboardEvent(n,e,t):i?.isFullWidth()&&this.processFullWidthRowKeyboardEvent(i,e,t))}processCellKeyboardEvent(e,t,n){let i=this.editSvc?.isEditing(e,{withOpenEditor:!0})??!1;!I4(this.gos,n,e.rowNode,e.column,i)&&t==="keydown"&&(!i&&this.beans.navigation?.handlePageScrollingKey(n)||e.onKeyDown(n),this.doGridOperations(n,i),Zte(n)&&e.processCharacter(n)),t==="keydown"&&this.eventSvc.dispatchEvent(e.createEvent(n,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,n){let{rowNode:i}=e,{focusSvc:o,navigation:r}=this.beans,a=o.getFocusedCell()?.column;if(!I4(this.gos,n,i,a,!1)){let c=n.key;if(t==="keydown")switch(c){case W.PAGE_HOME:case W.PAGE_END:case W.PAGE_UP:case W.PAGE_DOWN:r?.handlePageScrollingKey(n,!0);break;case W.LEFT:case W.RIGHT:if(!this.gos.get("embedFullWidthRows"))break;case W.UP:case W.DOWN:e.onKeyboardNavigate(n);break;case W.TAB:e.onTabKeyDown(n);break;default:}}t==="keydown"&&this.eventSvc.dispatchEvent(e.createRowEvent("cellKeyDown",n))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!cw(this.beans,e))return;let n=jRe(e),{clipboardSvc:i,undoRedo:o}=this.beans;if(n===W.A)return this.onCtrlAndA(e);if(n===W.C)return this.onCtrlAndC(i,e);if(n===W.D)return this.onCtrlAndD(i,e);if(n===W.V)return this.onCtrlAndV(i,e);if(n===W.X)return this.onCtrlAndX(i,e);if(n===W.Y)return this.onCtrlAndY(o);if(n===W.Z)return this.onCtrlAndZ(o,e)}onCtrlAndA(e){let{beans:{rowModel:t,rangeSvc:n,selectionSvc:i},gos:o}=this;n&&Qc(o)&&!Nke(o)&&t.isRowsToRender()?LRe(this.beans):i&&i.selectAllRowNodes({source:"keyboardSelectAll",selectAll:Ste(o)}),e.preventDefault()}onCtrlAndC(e,t){if(!e||this.gos.get("enableCellTextSelection"))return;let{cellCtrl:n}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||(t.preventDefault(),e.copyToClipboard())}onCtrlAndX(e,t){if(!e||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;let{cellCtrl:n}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||(t.preventDefault(),e.cutToClipboard(void 0,"ui"))}onCtrlAndV(e,t){let{cellCtrl:n}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||e&&!this.gos.get("suppressClipboardPaste")&&e.pasteFromClipboard()}onCtrlAndD(e,t){e&&!this.gos.get("suppressClipboardPaste")&&e.copyRangeDown(),t.preventDefault()}onCtrlAndZ(e,t){!this.gos.get("undoRedoCellEditing")||!e||(t.preventDefault(),t.shiftKey?e.redo("ui"):e.undo("ui"))}onCtrlAndY(e){e?.redo("ui")}},bne=class extends te{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(e){let t=e.uiContainerHeight,n=t!=null?`${t}px`:"";this.eContainer.style.height=n,this.eViewport&&(this.eViewport.style.height=n)}},Rk=e=>e.topRowCtrls,Tk=e=>e.getStickyTopRowCtrls(),Pk=e=>e.getStickyBottomRowCtrls(),Ak=e=>e.bottomRowCtrls,Ok=e=>e.allRowCtrls,$z=e=>e.getCtrls("top"),jz=e=>e.getCtrls("center"),Gz=e=>e.getCtrls("bottom"),URe={center:{type:"center",name:"center-cols",getRowCtrls:Ok,getSpannedRowCtrls:jz},left:{type:"left",name:"pinned-left-cols",pinnedType:"left",getRowCtrls:Ok,getSpannedRowCtrls:jz},right:{type:"right",name:"pinned-right-cols",pinnedType:"right",getRowCtrls:Ok,getSpannedRowCtrls:jz},fullWidth:{type:"fullWidth",name:"full-width",fullWidth:!0,getRowCtrls:Ok},topCenter:{type:"center",name:"floating-top",getRowCtrls:Rk,getSpannedRowCtrls:$z},topLeft:{type:"left",name:"pinned-left-floating",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:Rk,getSpannedRowCtrls:$z},topRight:{type:"right",name:"pinned-right-floating",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:Rk,getSpannedRowCtrls:$z},topFullWidth:{type:"fullWidth",name:"floating-top-full-width",fullWidth:!0,getRowCtrls:Rk},stickyTopCenter:{type:"center",name:"sticky-top",getRowCtrls:Tk},stickyTopLeft:{type:"left",name:"pinned-left-sticky-top",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:Tk},stickyTopRight:{type:"right",name:"pinned-right-sticky-top",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:Tk},stickyTopFullWidth:{type:"fullWidth",name:"sticky-top-full-width",fullWidth:!0,getRowCtrls:Tk},stickyBottomCenter:{type:"center",name:"sticky-bottom",getRowCtrls:Pk},stickyBottomLeft:{type:"left",name:"pinned-left-sticky-bottom",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:Pk},stickyBottomRight:{type:"right",name:"pinned-right-sticky-bottom",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:Pk},stickyBottomFullWidth:{type:"fullWidth",name:"sticky-bottom-full-width",fullWidth:!0,getRowCtrls:Pk},bottomCenter:{type:"center",name:"floating-bottom",getRowCtrls:Ak,getSpannedRowCtrls:Gz},bottomLeft:{type:"left",name:"pinned-left-floating-bottom",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:Ak,getSpannedRowCtrls:Gz},bottomRight:{type:"right",name:"pinned-right-floating-bottom",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:Ak,getSpannedRowCtrls:Gz},bottomFullWidth:{type:"fullWidth",name:"floating-bottom-full-width",fullWidth:!0,getRowCtrls:Ak}};function Cne(e){return`ag-${xw(e).name}-viewport`}function Uk(e){let t=xw(e);return t.container??`ag-${t.name}-container`}function WRe(e){return`ag-${xw(e).name}-spanned-cells-container`}function xw(e){return URe[e]}var qRe=["topCenter","topLeft","topRight"],KRe=["bottomCenter","bottomLeft","bottomRight"],ZRe=["center","left","right"],YRe=["center","left","right","fullWidth"],QRe=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],JRe=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],XRe=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],wne=["stickyTopCenter","stickyTopLeft","stickyTopRight"],xne=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],eTe=[...wne,"stickyTopFullWidth",...xne,"stickyBottomFullWidth"],tTe=[...qRe,...KRe,...ZRe,...wne,...xne],nTe=class extends te{constructor(e){super(),this.name=e,this.visible=!0,this.EMPTY_CTRLS=[],this.options=xw(e)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new ARe(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}setComp(e,t,n,i){this.comp=e,this.eContainer=t,this.eSpannedContainer=n,this.eViewport=i,this.createManagedBean(new GRe(this.eViewport??this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();let{pinnedCols:o,rangeSvc:r}=this.beans,s=()=>this.onPinnedWidthChanged();this.forContainers(JRe,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(o?.createPinnedWidthFeature(!0,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:s})}),this.forContainers(XRe,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(o?.createPinnedWidthFeature(!1,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:s})}),this.forContainers(YRe,()=>this.createManagedBean(new bne(this.eContainer,this.name==="center"?i:void 0))),r&&this.forContainers(tTe,()=>this.createManagedBean(r.createDragListenerFeature(this.eContainer))),this.forContainers(QRe,()=>this.createManagedBean(new pV(a=>this.comp.setContainerWidth(`${a}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}addListeners(){let{spannedRowRenderer:e,gos:t}=this.beans,n=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({displayedColumnsChanged:n,displayedColumnsWidthChanged:n,displayedRowsChanged:i=>this.onDisplayedRowsChanged(i.afterScroll)}),n(),this.onDisplayedRowsChanged(),e&&this.options.getSpannedRowCtrls&&t.get("enableCellSpan")&&this.addManagedListeners(e,{spannedRowsUpdated:()=>{let i=this.options.getSpannedRowCtrls(e);i&&this.comp.setSpannedRowCtrls(i,!1)}})}listenOnDomOrder(){if(eTe.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}let t=()=>{let n=this.gos.get("ensureDomOrder"),i=Ho(this.gos,"print");this.comp.setDomOrder(n||i)};this.addManagedPropertyListener("domLayout",t),t()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){let{dragSvc:e}=this.beans;if(!e)return;let t=n=>{e.dragging&&n.cancelable&&n.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",t))}onHorizontalViewportChanged(e=!1){let t=this.getCenterWidth(),n=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(t,n,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return lw(this.eViewport)}getCenterViewportScrollLeft(){return Jk(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){let t=_u(this.beans,this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return Qee(this.eViewport)}getViewportScrollLeft(){return Jk(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||W4(this.eViewport)}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){Xk(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){let e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){let t=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}let n=Ho(this.gos,"print"),o=this.gos.get("embedFullWidthRows")||n,r=t.filter(s=>{let a=s.isFullWidth();return this.options.fullWidth?!o&&a:o||!a});this.comp.setRowCtrls({rowCtrls:r,useFlushSync:e})}},Sne="ag-force-vertical-scroll",iTe="ag-selectable",oTe="ag-column-moving",rTe=class extends te{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colModel=e.colModel,this.scrollVisibleSvc=e.scrollVisibleSvc,this.pinnedRowModel=e.pinnedRowModel,this.filterManager=e.filterManager,this.rowGroupColsSvc=e.rowGroupColsSvc}setComp(e,t,n,i,o,r,s){this.comp=e,this.eGridBody=t,this.eBodyViewport=n,this.eTop=i,this.eBottom=o,this.eStickyTop=r,this.eStickyBottom=s,this.eCenterColsViewport=n.querySelector(`.${Cne("center")}`),this.eFullWidthContainer=n.querySelector(`.${Uk("fullWidth")}`),this.eStickyTopFullWidthContainer=r.querySelector(`.${Uk("stickyTopFullWidth")}`),this.eStickyBottomFullWidthContainer=s.querySelector(`.${Uk("stickyBottomFullWidth")}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",a=>this.setCellTextSelection(a.currentValue)),this.createManagedBean(new hV(this.comp)),this.scrollFeature=this.createManagedBean(new PRe(n)),this.beans.rowDragSvc?.setupRowDrag(n,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([i,n,o,r,s]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),this.filterManager?.setupAdvFilterHeaderComp(i),this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){let e=this.setFloatingHeights.bind(this),t=this.setGridRootRole.bind(this),n=this.toggleRowResizeStyles.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,pinnedRowsChanged:e,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:t,columnPivotChanged:t,rowResizeStarted:n,rowResizeEnded:n}),this.addManagedPropertyListener("treeData",t)}toggleRowResizeStyles(e){let t=e.type==="rowResizeStarted";this.eBodyViewport.classList.toggle("ag-prevent-animation",t)}onGridColumnsChanged(){let e=this.beans.colModel.getCols();this.comp.setColumnCount(e.length)}onScrollVisibilityChanged(){let{scrollVisibleSvc:e}=this,t=e.verticalScrollShowing;this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();let n=t&&e.getScrollbarWidth()||0,i=Kte()?16:0,o=`calc(100% + ${n+i}px)`;Xc(this.beans,()=>this.comp.setBodyViewportWidth(o)),this.updateScrollingClasses()}setGridRootRole(){let{rowGroupColsSvc:e,colModel:t}=this,n=this.gos.get("treeData");if(!n){let i=t.isPivotMode();n=(e?e.columns.length:0)>=(i?2:1)}this.comp.setGridRootRole(n?"treegrid":"grid")}addFocusListeners(e){for(let t of e)this.addManagedElementListeners(t,{focusin:n=>{let{target:i}=n,o=fp(i,"ag-root",t);t.classList.toggle("ag-has-focus",!o)},focusout:n=>{let{target:i,relatedTarget:o}=n,r=t.contains(o),s=fp(o,"ag-root",t);fp(i,"ag-root",t)||(!r||s)&&t.classList.remove("ag-has-focus")}})}setColumnMovingCss(e){this.comp.setColumnMovingCss(oTe,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(iTe,e)}updateScrollingClasses(){let{eGridBody:{classList:e},scrollVisibleSvc:t}=this;e.toggle("ag-body-vertical-content-no-gap",!t.verticalScrollGap),e.toggle("ag-body-horizontal-content-no-gap",!t.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){this.beans.editSvc?.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){let e=(this.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.filterManager?.getHeaderRowCount()??0),{rowModel:t}=this.beans,n=t.isLastRowIndexKnown()?t.getRowCount():-1,i=n===-1?-1:e+n;this.comp.setRowCount(i)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){let t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){let e=this.gos.get("alwaysShowVerticalScroll"),t=e?Sne:null,n=Ho(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||n&&ete(this.eBodyViewport)}setupRowAnimationCssClass(){let{rowContainerHeight:e,environment:t}=this.beans,n=t.sizesMeasured,i=()=>{let o=n&&Fg(this.gos)&&!e.stretching,r=o?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(r,o)};i(),this.addManagedEventListeners({heightScaleChanged:i}),this.addManagedPropertyListener("animateRows",i),this.addManagedEventListeners({gridStylesChanged:()=>{!n&&t.sizesMeasured&&(n=!0,i())}})}addBodyViewportListener(){let{eBodyViewport:e,eStickyTop:t,eStickyBottom:n,eTop:i,eBottom:o,beans:{popupSvc:r,touchSvc:s}}=this,a=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(e,{contextmenu:a}),s?.mockBodyContextMenu(this,a),this.addManagedElementListeners(e,{wheel:this.onBodyViewportWheel.bind(this,r)});let l=this.onStickyWheel.bind(this);for(let u of[t,n,i,o])this.addManagedElementListeners(u,{wheel:l});let c=this.onHorizontalWheel.bind(this);for(let u of["left","right","topLeft","topRight","bottomLeft","bottomRight"])this.addManagedElementListeners(this.ctrlsSvc.get(u).eContainer,{wheel:c});this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){let{deltaX:t,deltaY:n,shiftKey:i}=e;(i||Math.abs(t)>Math.abs(n))&&cw(this.beans,e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){let{deltaY:t}=e;this.scrollVertically(t)>0&&e.preventDefault()}onHorizontalWheel(e){let{deltaX:t,deltaY:n,shiftKey:i}=e;(i||Math.abs(t)>Math.abs(n))&&this.scrollGridBodyToMatchEvent(e)}scrollGridBodyToMatchEvent(e){let{deltaX:t,deltaY:n}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||n})}onBodyViewportContextMenu(e,t,n){if(!e&&!n)return;this.gos.get("preventDefaultOnContextMenu")&&(e||n).preventDefault();let{target:i}=e||t;(i===this.eBodyViewport||i===this.ctrlsSvc.get("center").eViewport)&&this.beans.contextMenuSvc?.showContextMenu({mouseEvent:e,touchEvent:n,value:null,anchorToElement:this.eGridBody,source:"ui"})}onBodyViewportWheel(e,t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&e?.hasAnchoredPopup()&&t.preventDefault()}scrollVertically(e){let t=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}setFloatingHeights(){let{pinnedRowModel:e,beans:{environment:t}}=this,n=e?.getPinnedTopTotalHeight(),i=e?.getPinnedBottomTotalHeight(),o=t.getPinnedRowBorderWidth(),r=t.getRowBorderWidth(),s=o-r,a=n?s+n:0,l=i?s+i:0;this.comp.setTopHeight(a),this.comp.setBottomHeight(l),this.comp.setTopInvisible(a<=0),this.comp.setBottomInvisible(l<=0),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{let t=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}setStickyTopOffsetTop(){let t=this.ctrlsSvc.get("gridHeaderCtrl").headerHeight+(this.filterManager?.getHeaderHeight()??0),n=this.pinnedRowModel?.getPinnedTopTotalHeight()??0,i=0;t>0&&(i+=t),n>0&&(i+=n),i>0&&(i+=1),this.comp.setStickyTopTop(`${i}px`)}setStickyBottomOffsetBottom(){let{pinnedRowModel:e,scrollVisibleSvc:t,comp:n}=this,i=e?.getPinnedBottomTotalHeight()??0,r=t.horizontalScrollShowing&&t.getScrollbarWidth()||0,s=i+r;n.setStickyBottomBottom(`${s}px`)}};function sTe(e,t){return fV(e,t.target)?.getFocusedCellPosition()??null}function KX(e,t){let n=Ho(e.gos,"normal"),i=t,o,r;i.clientX!=null||i.clientY!=null?(o=i.clientX,r=i.clientY):(o=i.x,r=i.y);let{pageFirstPixel:s}=e.pageBounds.getCurrentPagePixelRange();if(r+=s,n){let a=e.ctrlsSvc.getScrollFeature(),l=a.getVScrollPosition(),c=a.getHScrollPosition();o+=c.left,r+=l.top}return{x:o,y:r}}var Ene=class extends Mn{constructor(e,t){super(),this.direction=t,this.eViewport=Ce,this.eContainer=Ce,this.hideTimeout=0,this.setTemplate(e)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.toggleCss("ag-apple-scrollbar",Wte()||vp())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=Kte(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){let e=this.getGui(),t=()=>this.toggleCss("ag-scrollbar-active",!0),n=()=>this.toggleCss("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:n,touchend:n})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),Xc(this.beans,()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=0),this.toggleCss("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.toggleCss("ag-scrollbar-scrolling",!1),this.hideTimeout=0},400)}})}attemptSettingScrollPosition(e){let t=this.eViewport;dke(this,()=>Hl(t),()=>this.setScrollPosition(e),100)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}},aTe={tag:"div",cls:"ag-body-horizontal-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eLeftSpacer",cls:"ag-horizontal-left-spacer"},{tag:"div",ref:"eViewport",cls:"ag-body-horizontal-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-horizontal-scroll-container"}]},{tag:"div",ref:"eRightSpacer",cls:"ag-horizontal-right-spacer"}]},lTe=class extends Ene{constructor(){super(aTe,"horizontal"),this.eLeftSpacer=Ce,this.eRightSpacer=Ce,this.setScrollVisibleDebounce=0}wireBeans(e){this.visibleCols=e.visibleCols,this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){super.postConstruct();let e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.beans.ctrlsSvc.register("fakeHScrollComp",this),this.createManagedBean(new pV(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){if(!this.invisibleScrollbar)return;let e=this.beans.pinnedRowModel?.getPinnedBottomTotalHeight()??0;this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){let e=this.scrollVisibleSvc.verticalScrollShowing,t=this.visibleCols.getDisplayedColumnsRightWidth(),n=!this.enableRtl&&e,i=this.scrollVisibleSvc.getScrollbarWidth();n&&(t+=i),Nl(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=i);let o=this.visibleCols.getColsLeftWidth();this.enableRtl&&e&&(o+=i),Nl(this.eLeftSpacer,o),this.eLeftSpacer.classList.toggle("ag-scroller-corner",o<=i)}setScrollVisible(){let e=this.scrollVisibleSvc.horizontalScrollShowing,t=this.invisibleScrollbar,n=this.gos.get("suppressHorizontalScroll"),i=e&&this.scrollVisibleSvc.getScrollbarWidth()||0,r=n?0:i===0&&t?16:i,s=()=>{this.setScrollVisibleDebounce=0,this.toggleCss("ag-scrollbar-invisible",t),QC(this.getGui(),r),QC(this.eViewport,r),QC(this.eContainer,r),r||this.eContainer.style.setProperty("min-height","1px"),this.setVisible(e,{skipAriaHidden:!0})};window.clearTimeout(this.setScrollVisibleDebounce),e?this.setScrollVisibleDebounce=window.setTimeout(s,100):s()}getScrollPosition(){return Jk(this.eViewport,this.enableRtl)}setScrollPosition(e){Hl(this.eViewport)||this.attemptSettingScrollPosition(e),Xk(this.eViewport,e,this.enableRtl)}},cTe={selector:"AG-FAKE-HORIZONTAL-SCROLL",component:lTe},dTe={tag:"div",cls:"ag-body-vertical-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eViewport",cls:"ag-body-vertical-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-vertical-scroll-container"}]}]},uTe=class extends Ene{constructor(){super(dTe,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new bne(this.eContainer));let{ctrlsSvc:e}=this.beans;e.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,e)})}setScrollVisible(){let{scrollVisibleSvc:e}=this.beans,t=e.verticalScrollShowing,n=this.invisibleScrollbar,i=t&&e.getScrollbarWidth()||0,o=i===0&&n?16:i;this.toggleCss("ag-scrollbar-invisible",n),Nl(this.getGui(),o),Nl(this.eViewport,o),Nl(this.eContainer,o),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(e){let n=e.getGridBodyCtrl().eBodyViewport,i=this.getScrollPosition(),o=n.scrollTop;i!=o&&this.setScrollPosition(o,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(e,t){!t&&!Hl(this.eViewport)&&this.attemptSettingScrollPosition(e),this.eViewport.scrollTop=e}},hTe={selector:"AG-FAKE-VERTICAL-SCROLL",component:uTe},pTe="ag-column-first",fTe="ag-column-last";function Dne(e,t,n,i){return di(e)?[]:gTe(e.headerClass,e,t,n,i)}function kne(e,t,n){e.toggleCss(pTe,n.isColAtEdge(t,"first")),e.toggleCss(fTe,n.isColAtEdge(t,"last"))}function mTe(e,t,n,i){return at(t,{colDef:e,column:n,columnGroup:i})}function gTe(e,t,n,i,o){if(di(e))return[];let r;if(typeof e=="function"){let s=mTe(t,n,i,o);r=e(s)}else r=e;return typeof r=="string"?[r]:Array.isArray(r)?[...r]:[]}function vTe(e,t,n){t.addManagedElementListeners(n,{keydown:i=>{if(!i.defaultPrevented&&i.key===W.TAB){let o=i.shiftKey;kp(e,n,!1,o)||qg(e,o)&&i.preventDefault()}}})}function _Te(e,t){return e.ctrlsSvc.get("gridCtrl").focusInnerElement(t)}function _p(e){return e.gos.get("suppressHeaderFocus")||!!e.overlays?.isExclusive()}function EI(e){return e.gos.get("suppressCellFocus")||!!e.overlays?.isExclusive()}function qg(e,t,n=!1){let i=e.ctrlsSvc.get("gridCtrl");return!n&&i.focusNextInnerContainer(t)?!0:((n||!t&&!i.isDetailGrid())&&i.forceFocusOutOfContainer(t),!1)}function Ll(e){return e.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0}function mV(e){let t=[],n=e.ctrlsSvc.getHeaderRowContainerCtrls();for(let i of n){if(!i)continue;let o=i.getGroupRowCount()||0;for(let r=0;r<o;r++){let s=i.getGroupRowCtrlAtIndex(r),a=t[r];if(s){let l=yTe(e,s);(a==null||l>a)&&(t[r]=l)}}}return t}function yTe(e,t){let i=e.colModel.isPivotMode()?CTe(e):Mne(e),o=t.getHeaderCellCtrls();for(let r of o){let{column:s}=r,a=s.getAutoHeaderHeight();a!=null&&a>i&&s.isAutoHeaderHeight()&&(i=a)}return i}function gV(e){let n=e.colModel.isPivotMode()?bTe(e):Sw(e);return e.colModel.forAllCols(i=>{let o=i.getAutoHeaderHeight();o!=null&&o>n&&i.isAutoHeaderHeight()&&(n=o)}),n}function Sw(e){return e.gos.get("headerHeight")??e.environment.getDefaultHeaderHeight()}function Ine(e){return e.gos.get("floatingFiltersHeight")??Sw(e)}function Mne(e){return e.gos.get("groupHeaderHeight")??Sw(e)}function bTe(e){return e.gos.get("pivotHeaderHeight")??Sw(e)}function CTe(e){return e.gos.get("pivotGroupHeaderHeight")??Mne(e)}function wTe(e,t){return e.headerRowIndex===t.headerRowIndex&&e.column===t.column}var xTe=class extends te{setComp(e,t,n){this.comp=e,this.eGui=t;let{beans:i}=this,{headerNavigation:o,touchSvc:r,ctrlsSvc:s}=i;o&&this.createManagedBean(new Qg(n,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,i),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,i)}),this.onPivotModeChanged(i),this.setupHeaderHeight();let a=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:a}),r?.mockHeaderContextMenu(this,a),s.register("gridHeaderCtrl",this)}setupHeaderHeight(){let e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({headerRowsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>Xc(this.beans,()=>e()),gridStylesChanged:e,advancedFilterEnabledChanged:e})}setHeaderHeight(){let{beans:e}=this,t=0,n=mV(e).reduce((r,s)=>r+s,0),i=gV(e);if(e.filterManager?.hasFloatingFilters()&&(t+=Ine(e)),t+=n,t+=i,this.headerHeight===t)return;this.headerHeight=t;let o=`${t+1}px`;this.comp.setHeightAndMinHeight(o),this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(e){let t=e.colModel.isPivotMode();this.comp.toggleCss("ag-pivot-on",t),this.comp.toggleCss("ag-pivot-off",!t)}onDisplayedColumnsChanged(e){let n=e.visibleCols.allCols.some(i=>i.isSpanHeaderHeight());this.comp.toggleCss("ag-header-allow-overflow",n)}onTabKeyDown(e){let t=this.gos.get("enableRtl"),n=e.shiftKey,i=n!==t?"LEFT":"RIGHT",{beans:o}=this,{headerNavigation:r,focusSvc:s}=o;(r.navigateHorizontally(i,!0,e)||!n&&s.focusOverlay(!1)||qg(o,n,!0))&&e.preventDefault()}handleKeyDown(e){let t=null,{headerNavigation:n}=this.beans;switch(e.key){case W.LEFT:t="LEFT";case W.RIGHT:{Se(t)||(t="RIGHT"),n.navigateHorizontally(t,!1,e)&&e.preventDefault();break}case W.UP:t="UP";case W.DOWN:{Se(t)||(t="DOWN"),n.navigateVertically(t,e)&&e.preventDefault();break}default:return}}onFocusOut(e){let{relatedTarget:t}=e,{eGui:n,beans:i}=this;!t&&n.contains(vi(i))||n.contains(t)||(i.focusSvc.focusedHeader=null)}onHeaderContextMenu(e,t,n){let{menuSvc:i,ctrlsSvc:o}=this.beans;if(!e&&!n||!i?.isHeaderContextMenuEnabled())return;let{target:r}=e??t;(r===this.eGui||r===o.getHeaderRowContainerCtrl()?.eViewport)&&i.showHeaderContextMenu(void 0,e,n)}},vV=class extends Mn{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}},STe={tag:"div",cls:"ag-header-cell",role:"columnheader",children:[{tag:"div",ref:"eResize",cls:"ag-header-cell-resize",role:"presentation"},{tag:"div",ref:"eHeaderCompWrapper",cls:"ag-header-cell-comp-wrapper",role:"presentation"}]},ETe=class extends vV{constructor(e){super(STe,e),this.eResize=Ce,this.eHeaderCompWrapper=Ce,this.headerCompVersion=0}postConstruct(){let e=this.getGui(),t=()=>{let i=this.ctrl.getSelectAllGui();i&&(this.eResize.insertAdjacentElement("afterend",i),this.addDestroyFunc(()=>i.remove()))},n={setWidth:i=>e.style.width=i,toggleCss:(i,o)=>this.toggleCss(i,o),setUserStyles:i=>yw(e,i),setAriaSort:i=>i?HDe(e,i):$De(e),setUserCompDetails:i=>this.setUserCompDetails(i),getUserCompInstance:()=>this.headerComp,refreshSelectAllGui:t,removeSelectAllGui:()=>this.ctrl.getSelectAllGui()?.remove()};this.ctrl.setComp(n,this.getGui(),this.eResize,this.eHeaderCompWrapper,void 0),t()}destroy(){this.destroyHeaderComp(),super.destroy()}destroyHeaderComp(){this.headerComp&&(this.headerCompGui?.remove(),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;let t=this.headerCompVersion;e.newAgStackInstance().then(n=>this.afterCompCreated(t,n))}afterCompCreated(e,t){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(t);return}this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}},DTe={tag:"div",cls:"ag-header-group-cell",role:"columnheader",children:[{tag:"div",ref:"eHeaderCompWrapper",cls:"ag-header-cell-comp-wrapper",role:"presentation"},{tag:"div",ref:"eResize",cls:"ag-header-cell-resize",role:"presentation"}]},kTe=class extends vV{constructor(e){super(DTe,e),this.eResize=Ce,this.eHeaderCompWrapper=Ce}postConstruct(){let e=this.getGui(),t=(i,o)=>o!=null?e.setAttribute(i,o):e.removeAttribute(i),n={toggleCss:(i,o)=>this.toggleCss(i,o),setUserStyles:i=>yw(e,i),setHeaderWrapperHidden:i=>{i?this.eHeaderCompWrapper.style.setProperty("display","none"):this.eHeaderCompWrapper.style.removeProperty("display")},setHeaderWrapperMaxHeight:i=>{i!=null?this.eHeaderCompWrapper.style.setProperty("max-height",`${i}px`):this.eHeaderCompWrapper.style.removeProperty("max-height"),this.eHeaderCompWrapper.classList.toggle("ag-header-cell-comp-wrapper-limited-height",i!=null)},setResizableDisplayed:i=>ci(this.eResize,i),setWidth:i=>e.style.width=i,setAriaExpanded:i=>t("aria-expanded",i),setUserCompDetails:i=>this.setUserCompDetails(i),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(n,e,this.eResize,this.eHeaderCompWrapper,void 0)}setUserCompDetails(e){e.newAgStackInstance().then(t=>this.afterHeaderCompCreated(t))}afterHeaderCompCreated(e){let t=()=>this.destroyBean(e);if(!this.isAlive()){t();return}let n=this.getGui(),i=e.getGui();this.eHeaderCompWrapper.appendChild(i),this.addDestroyFunc(t),this.headerGroupComp=e,this.ctrl.setDragSource(n)}},ITe={tag:"div",cls:"ag-header-cell ag-floating-filter",role:"gridcell",children:[{tag:"div",ref:"eFloatingFilterBody",role:"presentation"},{tag:"div",ref:"eButtonWrapper",cls:"ag-floating-filter-button ag-hidden",role:"presentation",children:[{tag:"button",ref:"eButtonShowMainFilter",cls:"ag-button ag-floating-filter-button-button",attrs:{type:"button",tabindex:"-1"}}]}]},MTe=class extends vV{constructor(e){super(ITe,e),this.eFloatingFilterBody=Ce,this.eButtonWrapper=Ce,this.eButtonShowMainFilter=Ce}postConstruct(){let e=this.getGui(),t={toggleCss:(n,i)=>this.toggleCss(n,i),setUserStyles:n=>yw(e,n),addOrRemoveBodyCssClass:(n,i)=>this.eFloatingFilterBody.classList.toggle(n,i),setButtonWrapperDisplayed:n=>ci(this.eButtonWrapper,n),setCompDetails:n=>this.setCompDetails(n),getFloatingFilterComp:()=>this.compPromise,setWidth:n=>e.style.width=n,setMenuIcon:n=>this.eButtonShowMainFilter.appendChild(n)};this.ctrl.setComp(t,e,this.eButtonShowMainFilter,this.eFloatingFilterBody,void 0)}setCompDetails(e){if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(t=>this.afterCompCreated(t))}destroy(){this.destroyFloatingFilterComp(),super.destroy()}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.floatingFilterComp.getGui().remove(),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}}},RTe=class extends Mn{constructor(e){super({tag:"div",cls:e.headerRowClass,role:"row"}),this.ctrl=e,this.headerComps={}}postConstruct(){this.getGui().setAttribute("tabindex",String(this.gos.get("tabIndex"))),Yk(this.getGui(),this.ctrl.getAriaRowIndex());let t={setHeight:n=>this.getGui().style.height=n,setTop:n=>this.getGui().style.top=n,setHeaderCtrls:(n,i)=>this.setHeaderCtrls(n,i),setWidth:n=>this.getGui().style.width=n,setRowIndex:n=>Yk(this.getGui(),n)};this.ctrl.setComp(t,void 0)}destroy(){this.setHeaderCtrls([],!1),super.destroy()}setHeaderCtrls(e,t){if(!this.isAlive())return;let n=this.headerComps;this.headerComps={};for(let i of e){let o=i.instanceId,r=n[o];delete n[o],r==null&&(r=this.createHeaderComp(i),this.getGui().appendChild(r.getGui())),this.headerComps[o]=r}if(Object.values(n).forEach(i=>{i.getGui().remove(),this.destroyBean(i)}),t){let i=Object.values(this.headerComps);i.sort((r,s)=>{let a=r.getCtrl().column.getLeft(),l=s.getCtrl().column.getLeft();return a-l});let o=i.map(r=>r.getGui());Xee(this.getGui(),o)}}createHeaderComp(e){let t;switch(this.ctrl.type){case"group":t=new kTe(e);break;case"filter":t=new MTe(e);break;default:t=new ETe(e);break}return this.createBean(t),t.setParentComponent(this),t}},_V=class extends te{constructor(e,t,n,i){super(),this.columnOrGroup=e,this.eCell=t,this.colsSpanning=i,this.columnOrGroup=e,this.ariaEl=t.querySelector("[role=columnheader]")||t,this.beans=n}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){let{beans:e,colsSpanning:t}=this;return e.gos.get("enableRtl")&&t?Hn(t):this.columnOrGroup}postConstruct(){let e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){let{gos:e,colAnimation:t}=this.beans,n=e.get("suppressColumnMoveAnimation"),i=Se(this.columnOrGroup.getOldLeft());t?.isActive()&&i&&!n?this.animateInLeft():this.onLeftChanged()}animateInLeft(){let e=this.getColumnOrGroup(),t=this.modifyLeftForPrintLayout(e,e.getOldLeft()),n=this.modifyLeftForPrintLayout(e,e.getLeft());this.setLeft(t),this.actualLeft=n,this.beans.colAnimation.executeNextVMTurn(()=>{this.actualLeft===n&&this.setLeft(n)})}onLeftChanged(){let e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){let{gos:n,visibleCols:i}=this.beans;if(!Ho(n,"print")||e.getPinned()==="left")return t;let r=i.getColsLeftWidth();if(e.getPinned()==="right"){let s=i.bodyWidth;return r+s+t}return r+t}setLeft(e){if(Se(e)&&(this.eCell.style.left=`${e}px`),Hi(this.columnOrGroup)){let t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&VDe(this.ariaEl,t.length)}}},TTe=0,Rne="headerCtrl",yV=class extends te{constructor(e,t){super(),this.column=e,this.rowCtrl=t,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.reAttemptToFocus=!1,this.instanceId=e.getUniqueId()+"-"+TTe++}postConstruct(){let e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}setComp(e,t,n,i,o){t.setAttribute("col-id",this.column.colIdSanitised),this.wireComp(e,t,n,i,o),this.reAttemptToFocus&&(this.reAttemptToFocus=!1,this.focus(this.lastFocusEvent??void 0))}shouldStopEventPropagation(e){let{headerRowIndex:t,column:n}=this.beans.focusSvc.focusedHeader,i=n.getDefinition(),o=i?.suppressHeaderKeyboardEvent;if(!Se(o))return!1;let r=at(this.gos,{colDef:i,column:n,headerRowIndex:t,event:e});return!!o(r)}getWrapperHasFocus(){return vi(this.beans)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}refreshHeaderStyles(){let e=this.column.getDefinition();if(!e)return;let{headerStyle:t}=e,n;if(typeof t=="function"){let i=this.getHeaderClassParams();n=t(i)}else n=t;n&&this.comp.setUserStyles(n)}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(e){let{wrapperElement:t,checkMeasuringCallback:n,compBean:i}=e,{beans:o}=this,r=h=>{if(!this.isAlive()||!i.isAlive())return;let{paddingTop:f,paddingBottom:m,borderBottomWidth:_,borderTopWidth:y}=Ep(this.eGui),w=f+m+_+y,S=t.offsetHeight+w;if(h<5){let O=!ko(o)?.contains(t),F=S==0;if(O||F){d4(()=>r(h+1),"raf",o);return}}this.setColHeaderHeight(this.column,S)},s=!1,a,l=()=>{let h=this.column.isAutoHeaderHeight();h&&!s&&c(),!h&&s&&u()},c=()=>{s=!0,this.comp.toggleCss("ag-header-cell-auto-height",!0),r(0),a=_u(this.beans,t,()=>r(0))},u=()=>{s=!1,a&&a(),this.comp.toggleCss("ag-header-cell-auto-height",!1),a=void 0};l(),i.addDestroyFunc(()=>u()),i.addManagedListeners(this.column,{widthChanged:()=>s&&r(0)}),i.addManagedEventListeners({sortChanged:()=>{s&&window.setTimeout(()=>r(0))}}),n&&n(l)}onDisplayedColumnsChanged(){let{comp:e,column:t,beans:n,eGui:i}=this;!e||!t||!i||(kne(e,t,n.visibleCols),Wee(i,n.visibleCols.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){let e=_p(this.beans);this.eGui&&xs(this.eGui,"tabindex",e?null:"-1")}onGuiKeyDown(e){let t=vi(this.beans),n=e.key===W.LEFT||e.key===W.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey||((this.isResizing||n)&&(e.preventDefault(),e.stopImmediatePropagation()),!n))return;let o=e.key===W.LEFT!==this.gos.get("enableRtl")?"left":"right";if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;let r=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(r,e.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(o)}moveHeader(e){this.beans.colMoves?.moveHeader(e,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(e){let t=this.getResizeDiff(e),{pinnedCols:n}=this.beans;return n?n.getHeaderResizeDiff(t,this.column):t}getResizeDiff(e){let{gos:t,column:n}=this,i=e.key===W.LEFT!==t.get("enableRtl"),o=n.getPinned(),r=t.get("enableRtl");return o&&r!==(o==="right")&&(i=!i),(i?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{this.resizeFeature?.toggleColumnResizing(!1)},150))}handleKeyDown(e){let t=this.getWrapperHasFocus();switch(e.key){case W.PAGE_DOWN:case W.PAGE_UP:case W.PAGE_HOME:case W.PAGE_END:t&&e.preventDefault()}}addDomData(e){let t=Rne,{eGui:n,gos:i}=this;Cp(i,n,t,this),e.addDestroyFunc(()=>Cp(i,n,t,null))}focus(e){if(!this.isAlive())return!1;let{eGui:t}=this;return t?(t.focus(),this.lastFocusEvent=e||null):this.reAttemptToFocus=!0,!0}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop?.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,n){let i=e??t,{menuSvc:o,gos:r}=this.beans;r.get("preventDefaultOnContextMenu")&&i.preventDefault(),o?.isHeaderContextMenuEnabled(n)&&o.showHeaderContextMenu(n,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",n)}dispatchColumnMouseEvent(e,t){this.eventSvc.dispatchEvent({type:e,column:t})}setColHeaderHeight(e,t){if(!e.setAutoHeaderHeight(t))return;let{eventSvc:n}=this;e.isColumn?n.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"}):n.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}},PTe=class extends yV{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}wireComp(e,t,n,i,o){this.comp=e;let{rowCtrl:r,column:s,beans:a}=this,{colResize:l,context:c,colHover:u,rangeSvc:h}=a,f=Cw(this,c,o);this.setGui(t,f),this.updateState(),this.setupWidth(f),this.setupMovingCss(f),this.setupMenuClass(f),this.setupSortableClass(f),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:i,checkMeasuringCallback:_=>this.setRefreshFunction("measuring",_),compBean:f}),this.addColumnHoverListener(f),this.setupFilterClass(f),this.setupStylesFromColDef(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(f),this.setupSelectAll(f),this.setupUserComp(),this.refreshAria(),l?this.resizeFeature=f.createManagedBean(l.createResizeFeature(r.pinned,s,n,e,this)):ci(n,!1),u?.createHoverFeature(f,[s],t),h?.createRangeHighlightFeature(f,s,e),f.createManagedBean(new _V(s,t,a)),f.createManagedBean(new Qg(t,{shouldStopEventPropagation:_=>this.shouldStopEventPropagation(_),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(f),f.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader","enableAdvancedFilter"],()=>this.refresh()),f.addManagedListeners(s,{colDefChanged:()=>this.refresh()}),f.addManagedListeners(s,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});let m=()=>this.checkDisplayName();f.addManagedEventListeners({columnValueChanged:m,columnRowGroupChanged:m,columnPivotChanged:m,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),f.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){this.beans.colResize?.resizeHeader(this.column,e,t)}getHeaderClassParams(){let{column:e,beans:t}=this,n=e.colDef;return at(t.gos,{colDef:n,column:e,floatingFilter:!1})}setupUserComp(){let e=this.lookupUserCompDetails();e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){let e=this.createParams(),t=this.column.getColDef();return AIe(this.beans.userCompFactory,t,e)}createParams(){let{menuSvc:e,sortSvc:t,colFilter:n,gos:i}=this.beans;return at(i,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!!e?.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!!n&&(!this.openFilterEnabled||Ss(this.gos)),showColumnMenu:(r,s)=>{e?.showColumnMenu({column:this.column,buttonElement:r,positionBy:"button",onClosedCallback:s})},showColumnMenuAfterMouseClick:(r,s)=>{e?.showColumnMenu({column:this.column,mouseEvent:r,positionBy:"mouse",onClosedCallback:s})},showFilter:r=>{e?.showFilterMenu({column:this.column,buttonElement:r,containerType:"columnFilter",positionBy:"button"})},progressSort:r=>{t?.progressSort(this.column,!!r,"uiColumnSorted")},setSort:(r,s)=>{t?.setSortForColumn(this.column,r,!!s,"uiColumnSorted")},eGridHeader:this.eGui,setTooltip:(r,s)=>{i.assertModuleRegistered("Tooltip",3),this.setupTooltip(r,s)}})}setupSelectAll(e){let{selectionSvc:t}=this.beans;t&&(this.selectAllFeature=e.createOptionalManagedBean(t.createSelectAllFeature(this.column)),this.selectAllFeature?.setComp(this),e.addManagedPropertyListener("rowSelection",()=>{let n=t.createSelectAllFeature(this.column);n&&!this.selectAllFeature?(this.selectAllFeature=e.createManagedBean(n),this.selectAllFeature?.setComp(this),this.comp.refreshSelectAllGui()):this.selectAllFeature&&!n&&(this.comp.removeSelectAllGui(),this.selectAllFeature=this.destroyBean(this.selectAllFeature))}))}getSelectAllGui(){return this.selectAllFeature?.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===W.SPACE&&this.selectAllFeature?.onSpaceKeyDown(e),e.key===W.ENTER&&this.onEnterKeyDown(e),e.key===W.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){e.ctrlKey||e.metaKey?this.showMenuOnKeyPress(e,!0):this.sortable&&this.beans.sortSvc?.progressSort(this.column,e.shiftKey,"uiColumnSorted")}showMenuOnKeyPress(e,t){let n=this.comp.getUserCompInstance();ZX(n)&&n.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),iMe()&&this.setActiveHeader(!0)}onFocusOut(e){this.eGui.contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderTooltip(this.tooltipFeature,this,e,t)}setupStylesFromColDef(){this.setRefreshFunction("headerStyles",this.refreshHeaderStyles.bind(this)),this.refreshHeaderStyles()}setupClassesFromColDef(){let e=()=>{let t=this.column.getColDef(),n=Dne(t,this.gos,this.column,null),i=this.userHeaderClasses;this.userHeaderClasses=new Set(n);for(let o of n)i.has(o)?i.delete(o):this.comp.toggleCss(o,!0);for(let o of i)this.comp.toggleCss(o,!1)};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){this.dragSourceElement=e,this.removeDragSource(),!(!e||!this.draggable)&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(e,this.column,this.displayName)??null)}updateState(){let{menuSvc:e}=this.beans;this.menuEnabled=!!e?.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=!!e?.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria();for(let e of Object.values(this.refreshFunctions))e()}refreshHeaderComp(){let e=this.lookupUserCompDetails();if(!e)return;(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==e.componentClass?this.attemptHeaderCompRefresh(e.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){let t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){let e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){let t=()=>{let n=this.column.getActualWidth();this.comp.setWidth(`${n}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){let t=()=>{this.comp.toggleCss("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){let t=()=>{this.comp?.toggleCss("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){let t=()=>{this.comp.toggleCss("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){let t=()=>{let n=this.column.isFilterActive();this.comp.toggleCss("ag-header-cell-filtered",n),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){let e=()=>{let t=!!this.column.getColDef().wrapHeaderText;this.comp.toggleCss("ag-header-cell-wrap-text",t)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){let e=this.column.getHighlighted(),t=e===0,n=e===1;this.comp.toggleCss("ag-header-highlight-before",t),this.comp.toggleCss("ag-header-highlight-after",n)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){let{eGui:e,column:t,comp:n,beans:i}=this,o=mV(this.beans),r=o.reduce((f,m)=>f+m,0)===0;if(n.toggleCss("ag-header-parent-hidden",r),!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),n.toggleCss("ag-header-span-height",!1),n.toggleCss("ag-header-span-total",!1);return}let{numberOfParents:s,isSpanningTotal:a}=this.column.getColumnGroupPaddingInfo();n.toggleCss("ag-header-span-height",s>0);let l=gV(i);if(s===0){n.toggleCss("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${l}px`);return}n.toggleCss("ag-header-span-total",a);let c=(this.column.getFirstRealParent()?.getLevel()??-1)+1,u=o.length-c,h=0;for(let f=0;f<u;f++)h+=o[o.length-1-f];e.style.setProperty("top",`${-h}px`),e.style.setProperty("height",`${l+h}px`)}refreshAriaSort(){if(this.sortable){let e=this.getLocaleTextFunc(),t=this.beans.sortSvc?.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(IDe(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){let e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!Ss(this.gos)){let e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){let e=this.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains(vi(this.beans)))return;let e=Array.from(this.ariaDescriptionProperties.keys()).sort((t,n)=>t==="filter"?-1:n.charCodeAt(0)-t.charCodeAt(0)).map(t=>this.ariaDescriptionProperties.get(t)).join(". ");this.beans.ariaAnnounce?.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){this.beans.colHover?.addHeaderColumnHoverListener(e,this.comp,this.column)}addActiveHeaderMouseListeners(e){let t=o=>this.handleMouseOverChange(o.type==="mouseenter"),n=()=>{this.setActiveHeader(!0),this.dispatchColumnMouseEvent("columnHeaderClicked",this.column)},i=o=>this.handleContextMenuMouseEvent(o,void 0,this.column);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:n,contextmenu:i})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.toggleCss("ag-header-active",e)}getAnchorElementForMenu(e){let t=this.comp.getUserCompInstance();return ZX(t)?t.getAnchorElementForMenu(e):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function ZX(e){return typeof e?.getAnchorElementForMenu=="function"&&typeof e.onMenuKeyboardShortcut=="function"}var ATe=0,Uz=class extends te{constructor(e,t,n){super(),this.rowIndex=e,this.pinned=t,this.type=n,this.instanceId=ATe++,this.comp=null,this.allCtrls=[];let i="ag-header-row-column";n==="group"?i="ag-header-row-group":n==="filter"&&(i="ag-header-row-filter"),this.headerRowClass=`ag-header-row ${i}`}setRowIndex(e){this.rowIndex=e,this.comp?.setRowIndex(this.getAriaRowIndex()),this.onRowHeightChanged()}postConstruct(){this.isPrintLayout=Ho(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.allCtrls.every(e=>e.eGui!=null):!1}setComp(e,t,n=!0){this.comp=e,t=Cw(this,this.beans.context,t),n&&(this.setRowIndex(this.rowIndex),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){let t=this.onRowHeightChanged.bind(this),n=this.onDisplayedColumnsChanged.bind(this);e.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:n,virtualColumnsChanged:i=>this.onVirtualColumnsChanged(i.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",n),e.addManagedPropertyListener("ensureDomOrder",i=>this.isEnsureDomOrder=i.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}onDisplayedColumnsChanged(){this.isPrintLayout=Ho(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){if(!this.comp)return;let e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){let{visibleCols:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){if(!this.comp)return;let{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let e=0,t=mV(this.beans);for(let o=0;o<t.length;o++){if(o===this.rowIndex&&this.type==="group")return{topOffset:e,rowHeight:t[o]};e+=t[o]}let n=gV(this.beans);if(this.type==="column")return{topOffset:e,rowHeight:n};e+=n;let i=Ine(this.beans);return{topOffset:e,rowHeight:i}}onVirtualColumnsChanged(e=!1){if(!this.comp)return;let t=this.getUpdatedHeaderCtrls(),n=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,n,e)}getUpdatedHeaderCtrls(){let e=this.ctrlsById;this.ctrlsById=new Map;let t=this.getColumnsInViewport();for(let i of t)this.recycleAndCreateHeaderCtrls(i,this.ctrlsById,e);let n=i=>{let{focusSvc:o,visibleCols:r}=this.beans;return o.isHeaderWrapperFocused(i)?r.isVisible(i.column):!1};if(e)for(let[i,o]of e)n(o)?this.ctrlsById.set(i,o):this.destroyBean(o);return this.allCtrls=Array.from(this.ctrlsById.values()),this.allCtrls}getHeaderCellCtrls(){return this.allCtrls}recycleAndCreateHeaderCtrls(e,t,n){if(e.isEmptyGroup())return;let i=e.getUniqueId(),o;if(n&&(o=n.get(i),n.delete(i)),o&&o.column!=e&&(this.destroyBean(o),o=void 0),o==null)switch(this.type){case"filter":{o=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",!0,e,this));break}case"group":o=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",!0,e,this));break;default:o=this.createBean(new PTe(e,this));break}t.set(i,o)}getColumnsInViewport(){if(!this.isPrintLayout)return this.getComponentsToRender();if(this.pinned)return[];let e=[];for(let t of["left",null,"right"])e.push(...this.getComponentsToRender(t));return e}getComponentsToRender(e=this.pinned){return this.type==="group"?this.beans.colViewport.getHeadersToRender(e,this.rowIndex):this.beans.colViewport.getColumnHeadersToRender(e)}focusHeader(e,t){let n=this.allCtrls.find(o=>o.column==e);return n?n.focus(t):!1}destroy(){this.allCtrls=this.destroyBeans(this.allCtrls),this.ctrlsById=void 0,this.comp=null,super.destroy()}},OTe=class extends te{constructor(e){super(),this.pinned=e,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(e,t){this.comp=e,this.eViewport=t;let{pinnedCols:n,ctrlsSvc:i,colModel:o,colMoves:r}=this.beans;this.setupCenterWidth(),n?.setupHeaderPinnedWidth(this),this.setupDragAndDrop(r,this.eViewport);let s=this.refresh.bind(this,!0);this.addManagedEventListeners({displayedColumnsChanged:s,advancedFilterEnabledChanged:s});let a=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;i.register(a,this),o.ready&&this.refresh()}getAllCtrls(){let e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){let{focusSvc:t,filterManager:n,visibleCols:i}=this.beans,o=0,r=t.getFocusHeaderToUseAfterRefresh(),s=()=>{let h=i.headerGroupRowCount;o=h,e||(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls));let f=this.groupsRowCtrls.length;if(f!==h){if(f>h){for(let m=h;m<f;m++)this.destroyBean(this.groupsRowCtrls[m]);this.groupsRowCtrls.length=h;return}for(let m=f;m<h;m++){let _=this.createBean(new Uz(m,this.pinned,"group"));this.groupsRowCtrls.push(_)}}},a=()=>{let h=o++;if(this.hidden){this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl);return}this.columnsRowCtrl==null||!e?(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.columnsRowCtrl=this.createBean(new Uz(h,this.pinned,"column"))):this.columnsRowCtrl.rowIndex!==h&&this.columnsRowCtrl.setRowIndex(h)},l=()=>{this.includeFloatingFilter=!!n?.hasFloatingFilters()&&!this.hidden;let h=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){h();return}e||h();let f=o++;this.filtersRowCtrl?this.filtersRowCtrl.rowIndex!==f&&this.filtersRowCtrl.setRowIndex(f):this.filtersRowCtrl=this.createBean(new Uz(f,this.pinned,"filter"))},c=this.getAllCtrls();s(),a(),l();let u=this.getAllCtrls();this.comp.setCtrls(u),this.restoreFocusOnHeader(t,r),c.length!==u.length&&this.beans.eventSvc.dispatchEvent({type:"headerRowsChanged"})}getHeaderCtrlForColumn(e){let t=n=>n?.getHeaderCellCtrls().find(i=>i.column===e);if(gu(e))return t(this.columnsRowCtrl);if(this.groupsRowCtrls.length!==0)for(let n=0;n<this.groupsRowCtrls.length;n++){let i=t(this.groupsRowCtrls[n]);if(i)return i}}getHtmlElementForColumnHeader(e){return this.getHeaderCtrlForColumn(e)?.eGui??null}getRowType(e){return this.getAllCtrls()[e]?.type}focusHeader(e,t,n){let o=this.getAllCtrls()[e];return o?o.focusHeader(t,n):!1}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(e,t){let n=e?.createBodyDropTarget(this.pinned,t);n&&this.createManagedBean(n)}restoreFocusOnHeader(e,t){if(!t)return;let{column:n}=t;n.getPinned()==this.pinned&&e.focusHeaderPosition({headerPosition:t,scroll:!1})}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new pV(e=>this.comp.setCenterWidth(`${e}px`),!0))}},FTe=class extends te{constructor(){super(...arguments),this.beanName="menuSvc"}postConstruct(){let{enterpriseMenuFactory:e,filterMenuFactory:t}=this.beans;this.activeMenuFactory=e??t}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){this.showColumnMenuCommon(QX(this.beans),e,e.containerType,!0)}showHeaderContextMenu(e,t,n){this.activeMenuFactory?.showMenuAfterContextMenuEvent(e,t,n)}hidePopupMenu(){this.beans.contextMenuSvc?.hideActiveMenu(),this.activeMenuFactory?.hideActiveMenu()}hideFilterMenu(){QX(this.beans)?.hideActiveMenu()}isColumnMenuInHeaderEnabled(e){let{suppressHeaderMenuButton:t}=e.getColDef();return!t&&!!this.activeMenuFactory?.isMenuEnabled(e)&&(Ss(this.gos)||!!this.beans.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&!!this.beans.filterManager?.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){return!(e&&gu(e)?e.getColDef():e?.getColGroupDef())?.suppressHeaderContextMenu&&this.gos.get("columnMenu")==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){let e=!this.isSuppressMenuHide();return!(vp()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!Ss(this.gos)&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return!!this.beans.filterManager?.isFilterAllowed(e)&&!Ss(this.gos)&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isFloatingFilterButtonEnabled(e){return!e.getColDef().suppressFloatingFilterButton}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){let e=this.gos,t=e.get("suppressMenuHide");return Ss(e)?e.exists("suppressMenuHide")?t:!1:t}showColumnMenuCommon(e,t,n,i){let{positionBy:o,onClosedCallback:r}=t,s=t.column;if(o==="button"){let{buttonElement:a}=t;e?.showMenuAfterButtonClick(s,a,n,r,i)}else if(o==="mouse"){let{mouseEvent:a}=t;e?.showMenuAfterMouseEvent(s,a,n,r,i)}else if(s){let a=this.beans,l=a.ctrlsSvc;l.getScrollFeature().ensureColumnVisible(s,"auto"),Xc(a,()=>{let c=l.getHeaderRowContainerCtrl(s.getPinned())?.getHeaderCtrlForColumn(s);c&&e?.showMenuAfterButtonClick(s,c.getAnchorElementForMenu(i),n,r,i)})}}};function YX(e,t,n){e.menuVisible!==t&&(e.menuVisible=t,e.dispatchColEvent("menuVisibleChanged",n))}function QX(e){let{enterpriseMenuFactory:t,filterMenuFactory:n,gos:i}=e;return t&&Ss(i)?t:n}var DI=class extends tV{constructor(){super(...arguments),this.errorMessages=null}init(e){this.params=e,this.initialiseEditor(e),this.eEditor.onValueChange(()=>e.validate())}destroy(){this.errorMessages=null}},Tne=class extends Mn{constructor(){super()}},LTe={tag:"span",cls:"ag-overlay-loading-center"},NTe=class extends Tne{init(){let e=qc(this.gos.get("overlayLoadingTemplate")?.trim());if(this.setTemplate(e??LTe),!e){let n=this.getLocaleTextFunc()("loadingOoo","Loading...");this.getGui().textContent=n,this.beans.ariaAnnounce.announceValue(n,"overlay")}}},BTe={tag:"span",cls:"ag-overlay-no-rows-center"},zTe=class extends Tne{init(){let e=qc(this.gos.get("overlayNoRowsTemplate")?.trim());if(this.setTemplate(e??BTe),!e){let n=this.getLocaleTextFunc()("noRowsToShow","No Rows To Show");this.getGui().textContent=n,this.beans.ariaAnnounce.announceValue(n,"overlay")}}};function VTe(e,t,n){let i=Xs(e,t,n);if(i){let{className:r}=i;if(typeof r=="string"&&r.includes("ag-icon")||typeof r=="object"&&r["ag-icon"])return i}let o=ji({tag:"span"});return o.appendChild(i),o}function Xs(e,t,n){let i=null;e==="smallDown"?ce(262):e==="smallLeft"?ce(263):e==="smallRight"&&ce(264);let o=n?.getColDef().icons;if(o&&(i=o[e]),t.gos&&!i){let r=t.gos.get("icons");r&&(i=r[e])}if(i){let r;if(typeof i=="function")r=i();else if(typeof i=="string")r=i;else{ce(38,{iconName:e});return}if(typeof r=="string")return U4(r);if(K4(r))return r;ce(133,{iconName:e});return}else{let r=t.registry.getIcon(e);return r||t.validation?.validateIcon(e),ji({tag:"span",cls:`ag-icon ag-icon-${r??e}`,role:"presentation",attrs:{unselectable:"on"}})}}var HTe=".ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}.ag-dnd-ghost-not-allowed{border:var(--ag-drag-and-drop-image-not-allowed-border)}",$Te={tag:"div",children:[{tag:"div",ref:"eGhost",cls:"ag-dnd-ghost ag-unselectable",children:[{tag:"span",ref:"eIcon",cls:"ag-dnd-ghost-icon ag-shake-left-to-right"},{tag:"div",ref:"eLabel",cls:"ag-dnd-ghost-label"}]}]},jTe=class extends Mn{constructor(){super(),this.dragSource=null,this.eIcon=Ce,this.eLabel=Ce,this.eGhost=Ce,this.registerCSS(HTe)}postConstruct(){let e=t=>VTe(t,this.beans,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate($Te),this.beans.environment.applyThemeClasses(this.eGhost)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t){let{eGhost:n,eIcon:i,dragSource:o,dropIconMap:r,gos:s}=this;Vo(i);let a=null;e||(e=o?.getDefaultIconName?o.getDefaultIconName():"notAllowed"),a=r[e],n.classList.toggle("ag-dnd-ghost-not-allowed",e==="notAllowed"),i.classList.toggle("ag-shake-left-to-right",t),!(a===r.hide&&s.get("suppressDragLeaveHidesColumns"))&&a&&i.appendChild(a)}setLabel(e){this.eLabel.textContent=e}},GTe=".ag-checkbox-cell{height:100%}",UTe={tag:"div",cls:"ag-cell-wrapper ag-checkbox-cell",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},WTe=class extends Mn{constructor(){super(UTe,[oV]),this.eCheckbox=Ce,this.registerCSS(GTe)}init(e){this.refresh(e);let{eCheckbox:t,beans:n}=this,i=t.getInputElement();i.setAttribute("tabindex","-1"),Gee(i,"polite"),this.addManagedListeners(i,{click:o=>{if(xp(o),t.isDisabled())return;let r=t.getValue();this.onCheckboxChanged(r)},dblclick:o=>{xp(o)}}),this.addManagedElementListeners(e.eGridCell,{keydown:o=>{if(o.key===W.SPACE&&!t.isDisabled()){e.eGridCell===vi(n)&&t.toggle();let r=t.getValue();this.onCheckboxChanged(r),o.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,n=!0,{value:i,column:o,node:r}=e;if(r.group&&o)if(typeof i=="boolean")t=i;else{let h=o.getColId();h.startsWith(CI)?t=i==null||i===""?void 0:i==="true":r.aggData&&r.aggData[h]!==void 0||r.sourceRowIndex>=0?t=i??void 0:n=!1}else t=i??void 0;let{eCheckbox:s}=this;if(!n){s.setDisplayed(!1);return}s.setValue(t);let a=e.disabled??!o?.isCellEditable(r);s.setDisabled(a);let l=this.getLocaleTextFunc(),c=yI(l,t),u=a?c:`${l("ariaToggleCellValue","Press SPACE to toggle cell value")} (${c})`;s.setInputAriaLabel(u)}onCheckboxChanged(e){let{params:t}=this,{column:n,node:i,value:o}=t;this.beans?.editSvc?.setEditingCells([{column:n,colId:n.getColId(),rowIndex:i.rowIndex,rowPinned:i.rowPinned,state:"changed",oldValue:o,newValue:o}],{update:!0,forceRefreshOfEditCellsOnly:!0});let r=i.setDataValue(n,e,"renderer");this.beans.editSvc?.stopEditing({rowNode:i,column:n},{source:this.beans.editSvc?.isBatchEditing()?"ui":"api"}),r||this.updateCheckbox(t)}},JX=class{constructor(e,t){this.beans=e,this.floating=t,this.all=new Set,this.visible=new Set,this.order=[],this.queued=new Set}size(){return this.visible.size}add(e){let{all:t,visible:n,order:i}=this;t.has(e)||(t.add(e),n.add(e),i.push(e),this.sort())}delete(e){this.all.delete(e),this.visible.delete(e),this.queued.delete(e.id),Ba(this.order,e)}has(e){return this.visible.has(e)}forEach(e){this.order.forEach(e)}getByIndex(e){return this.order[e]}getById(e){for(let t of this.visible)if(t.id==e)return t}clear(){let{all:e,visible:t,order:n,queued:i}=this;e.clear(),i.clear(),t.clear(),n.length=0}sort(){let{sortSvc:e,rowNodeSorter:t,gos:n}=this.beans,i=e?.getSortOptions()??[],o=ZTe(this.order);if(this.order.sort((s,a)=>(s.pinnedSibling?.rowIndex??0)-(a.pinnedSibling?.rowIndex??0)),this.order=t?.doFullSort(this.order,i)??this.order,!o)return;let r=bte(n);r==="bottom"||r==="pinnedBottom"?this.order.push(o):this.order.unshift(o)}hide(e){let{all:t,visible:n}=this;t.forEach(i=>e(i)?n.delete(i):n.add(i)),this.order=Array.from(n),this.sort()}queue(e){this.queued.add(e)}unqueue(e){this.queued.delete(e)}forEachQueued(e){this.queued.forEach(e)}};function Pne(e){if(e.level===-1)return!0;let t=e.parent;return t?.childrenAfterSort?.some(n=>n==e)?Pne(t):!1}function Wz(e,t){let{gos:n,rowModel:i,filterManager:o}=e;return Yg(n,i)?!i.getRowNode(t.id):o?.isAnyFilterPresent()?!Pne(t):n.get("pivotMode")?!t.group:!1}function qTe(e){return!!e.footer&&e.level===-1}function KTe(e){return!!e.pinnedSibling&&qTe(e.pinnedSibling)}function ZTe(e){let t=e.findIndex(KTe);if(t>-1)return e.splice(t,1)?.[0]}var XX=class extends te{postConstruct(){let{gos:e,beans:t}=this;this.top=new JX(t,"top"),this.bottom=new JX(t,"bottom");let n=o=>Wz(t,o.pinnedSibling),i=()=>{let o=e.get("isRowPinned");o&&e.get("enableRowPinning")&&t.rowModel.forEachNode(r=>this.pinRow(r,o(r)),!0),this.refreshRowPositions(),this.dispatchRowPinnedEvents()};this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this),modelUpdated:({keepRenderedRows:o})=>{this.tryToEmptyQueues(),this.pinGrandTotalRow(),this.forContainers(s=>s.hide(n));let r=this.refreshRowPositions();(!o||r)&&this.dispatchRowPinnedEvents()},columnRowGroupChanged:()=>{this.forContainers(QTe),this.refreshRowPositions()},rowNodeDataChanged:({node:o})=>{(e.get("isRowPinnable")?.(o)??!0)||this.pinRow(o,null)},firstDataRendered:i}),this.addManagedPropertyListener("pivotMode",()=>{this.forContainers(o=>o.hide(n)),this.dispatchRowPinnedEvents()}),this.addManagedPropertyListener("grandTotalRow",({currentValue:o})=>{this._grandTotalPinned=o==="pinnedBottom"?"bottom":o==="pinnedTop"?"top":null}),this.addManagedPropertyListener("isRowPinned",i)}destroy(){this.reset(!1),super.destroy()}reset(e=!0){this.forContainers(t=>{let n=[];t.forEach(i=>n.push(i)),n.forEach(i=>this.pinRow(i,null)),t.clear()}),e&&this.dispatchRowPinnedEvents()}pinRow(e,t,n){if(e.footer&&e.level>-1)return;if(e.footer&&e.level===-1){this._grandTotalPinned=t,XTe(this.beans);return}let i=e.rowPinned??e.pinnedSibling?.rowPinned;if(i!=null&&t!=null&&t!=i){let s=e.rowPinned?e:e.pinnedSibling,a=e.rowPinned?e.pinnedSibling:e;this.pinRow(s,null,n),this.pinRow(a,t,n);return}let r=n&&JTe(this.beans,e,n);if(r){r.forEach(s=>this.pinRow(s,t));return}if(t==null){let s=e.rowPinned?e:e.pinnedSibling,a=this.findPinnedRowNode(s);if(!a)return;a.delete(s);let l=s.pinnedSibling;qz(s),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(l)}else{let s=eee(this.beans,e,t),a=this.getContainer(t);a.add(s),Wz(this.beans,e)&&a.hide(l=>Wz(this.beans,l.pinnedSibling)),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(e)}}isManual(){return!0}isEmpty(e){return this.getContainer(e).size()===0}isRowsToRender(e){return!this.isEmpty(e)}ensureRowHeightsValid(){let e=!1,t=0,n=i=>{if(i.rowHeightEstimated){let o=mu(this.beans,i);i.setRowTop(t),i.setRowHeight(o.height),t+=o.height,e=!0}};return this.bottom.forEach(n),t=0,this.top.forEach(n),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}getPinnedTopTotalHeight(){return tee(this.top)}getPinnedBottomTotalHeight(){return tee(this.bottom)}getPinnedTopRowCount(){return this.top.size()}getPinnedBottomRowCount(){return this.bottom.size()}getPinnedTopRow(e){return this.top.getByIndex(e)}getPinnedBottomRow(e){return this.bottom.getByIndex(e)}getPinnedRowById(e,t){return this.getContainer(t).getById(e)}forEachPinnedRow(e,t){this.getContainer(e).forEach(t)}getPinnedState(){let e=t=>{let n=[];return this.forEachPinnedRow(t,i=>n.push(i.pinnedSibling.id)),n};return{top:e("top"),bottom:e("bottom")}}setPinnedState(e){this.forContainers((t,n)=>{for(let i of e[n]){let o=this.beans.rowModel.getRowNode(i);o?this.pinRow(o,n):t.queue(i)}})}getGrandTotalPinned(){return this._grandTotalPinned}setGrandTotalPinned(e){this._grandTotalPinned=e}tryToEmptyQueues(){this.forContainers((e,t)=>{let n=new Set;e.forEachQueued(i=>{let o=this.beans.rowModel.getRowNode(i);o&&n.add(o)});for(let i of n)e.unqueue(i.id),this.pinRow(i,t)})}pinGrandTotalRow(){let{gos:e,beans:t,_grandTotalPinned:n}=this,i=t.rowModel;if(!$i(e,i))return;let o=i.rootNode?.sibling;if(!o)return;let r=o.pinnedSibling,s=r&&this.findPinnedRowNode(r);if(n){if(s&&s.floating!==n&&(s.delete(r),qz(r)),!s||s.floating!==n){let a=eee(t,o,n);this.getContainer(n).add(a)}}else{if(!s)return;s.delete(r),qz(r)}}onGridStylesChanges(e){e.rowHeightChanged&&this.forContainers(t=>t.forEach(n=>n.setRowHeight(n.rowHeight,!0)))}getContainer(e){return e==="top"?this.top:this.bottom}findPinnedRowNode(e){if(this.top.has(e))return this.top;if(this.bottom.has(e))return this.bottom}refreshRowPositions(e){let t=i=>YTe(this.beans,i);if(e)return t(this.getContainer(e));let n=!1;return this.forContainers(i=>{let o=t(i);n||(n=o)}),n}forContainers(e){e(this.top,"top"),e(this.bottom,"bottom")}dispatchRowPinnedEvents(e){this.eventSvc.dispatchEvent({type:"pinnedRowsChanged"}),e?.dispatchRowEvent("rowPinned")}};function YTe(e,t){let n=0,i=!1;return t.forEach((o,r)=>{if(i||(i=o.rowTop!==n),o.setRowTop(n),o.rowHeightEstimated||o.rowHeight==null){let s=mu(e,o).height;i||(i=o.rowHeight!==s),o.setRowHeight(s)}o.setRowIndex(r),n+=o.rowHeight}),i}function eee(e,t,n){if(t.pinnedSibling)return t.pinnedSibling;let i=pRe(t,e);i.setRowTop(null),i.setRowIndex(null),i.rowPinned=n;let o=n==="top"?cV:dV;return i.id=`${o}${n}-${t.id}`,i.pinnedSibling=t,t.pinnedSibling=i,i}function qz(e){if(!e.pinnedSibling)return;e.rowPinned=null,e.setRowTop(null),e.setRowIndex(null);let t=e.pinnedSibling;e.pinnedSibling=void 0,t&&(t.pinnedSibling=void 0,t.rowPinned=null)}function QTe(e){let t=new Set;e.forEach(n=>{n.group&&t.add(n)}),t.forEach(n=>e.delete(n))}function JTe(e,t,n){let{rowSpanSvc:i}=e,o=(n&&i?.isCellSpanning(n,t))??!1;if(n&&o)return i?.getCellSpan(n,t)?.spannedNodes}function tee(e){let t=e.size();if(t===0)return 0;let n=e.getByIndex(t-1);return n===void 0?0:n.rowTop+n.rowHeight}function XTe({gos:e,rowModel:t}){$i(e,t)&&t.refreshModel({step:"map"})}var nee=class extends te{constructor(){super(...arguments),this.nextId=0,this.pinnedTopRows={cache:{},order:[]},this.pinnedBottomRows={cache:{},order:[]}}postConstruct(){let e=this.gos;this.setPinnedRowData(e.get("pinnedTopRowData"),"top"),this.setPinnedRowData(e.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",t=>this.setPinnedRowData(t.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",t=>this.setPinnedRowData(t.currentValue,"bottom")),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}reset(){}isEmpty(e){return this.getCache(e).order.length===0}isRowsToRender(e){return!this.isEmpty(e)}isManual(){return!1}pinRow(e,t){}onGridStylesChanges(e){if(e.rowHeightChanged){let t=n=>{n.setRowHeight(n.rowHeight,!0)};$C(this.pinnedBottomRows,t),$C(this.pinnedTopRows,t)}}ensureRowHeightsValid(){let e=!1,t=0,n=i=>{if(i.rowHeightEstimated){let o=mu(this.beans,i);i.setRowTop(t),i.setRowHeight(o.height),t+=o.height,e=!0}};return $C(this.pinnedBottomRows,n),t=0,$C(this.pinnedTopRows,n),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventSvc.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){let n=this.getCache(t);if(e===void 0){n.order.length=0,n.cache={};return}let i=Gg(this.gos),o=t==="top"?cV:dV,r=new Set(n.order),s=[],a=new Set,l=0,c=-1;for(let u of e){let h=i?.({data:u,level:0,rowPinned:t})??o+this.nextId++;if(a.has(h)){ce(96,{id:h,data:u});continue}c++,a.add(h),s.push(h);let f=tw(n,h);if(f!==void 0)f.data!==u&&f.updateData(u),l+=this.setRowTopAndRowIndex(f,l,c),r.delete(h);else{let m=new vu(this.beans);m.id=h,m.data=u,m.rowPinned=t,l+=this.setRowTopAndRowIndex(m,l,c),n.cache[h]=m,n.order.push(h)}}for(let u of r)tw(n,u)?.clearRowTopAndRowIndex(),delete n.cache[u];n.order=s}setRowTopAndRowIndex(e,t,n){return e.setRowTop(t),e.setRowHeight(mu(this.beans,e).height),e.setRowIndex(n),e.rowHeight}getPinnedTopTotalHeight(){return iee(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return iee(this.pinnedBottomRows)}getPinnedTopRowCount(){return R4(this.pinnedTopRows)}getPinnedBottomRowCount(){return R4(this.pinnedBottomRows)}getPinnedTopRow(e){return M4(this.pinnedTopRows,e)}getPinnedBottomRow(e){return M4(this.pinnedBottomRows,e)}getPinnedRowById(e,t){return tw(this.getCache(t),e)}forEachPinnedRow(e,t){return $C(this.getCache(e),t)}getCache(e){return e==="top"?this.pinnedTopRows:this.pinnedBottomRows}getPinnedState(){return{top:[],bottom:[]}}setPinnedState(){}getGrandTotalPinned(){}setGrandTotalPinned(){}};function iee(e){let t=R4(e);if(t===0)return 0;let n=M4(e,t-1);return n===void 0?0:n.rowTop+n.rowHeight}function tw(e,t){return e.cache[t]}function M4(e,t){return tw(e,e.order[t])}function $C(e,t){e.order.forEach((n,i)=>{let o=tw(e,n);o&&t(o,i)})}function R4(e){return e.order.length}var ePe=class extends te{constructor(){super(...arguments),this.beanName="pinnedRowModel"}postConstruct(){let{gos:e}=this,t=()=>{let n=e.get("enableRowPinning"),i=bte(e),r=!!n||(i==="pinnedBottom"||i==="pinnedTop"),s=r?this.inner instanceof nee:this.inner instanceof XX;this.inner&&s&&this.destroyBean(this.inner),(s||!this.inner)&&(this.inner=this.createManagedBean(r?new XX:new nee))};this.addManagedPropertyListeners(["enableRowPinning","grandTotalRow"],t),t()}reset(){return this.inner.reset()}isEmpty(e){return this.inner.isEmpty(e)}isManual(){return this.inner.isManual()}isRowsToRender(e){return this.inner.isRowsToRender(e)}pinRow(e,t,n){return this.inner.pinRow(e,t,n)}ensureRowHeightsValid(){return this.inner.ensureRowHeightsValid()}getPinnedRowById(e,t){return this.inner.getPinnedRowById(e,t)}getPinnedTopTotalHeight(){return this.inner.getPinnedTopTotalHeight()}getPinnedBottomTotalHeight(){return this.inner.getPinnedBottomTotalHeight()}getPinnedTopRowCount(){return this.inner.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.inner.getPinnedBottomRowCount()}getPinnedTopRow(e){return this.inner.getPinnedTopRow(e)}getPinnedBottomRow(e){return this.inner.getPinnedBottomRow(e)}forEachPinnedRow(e,t){return this.inner.forEachPinnedRow(e,t)}getPinnedState(){return this.inner.getPinnedState()}setPinnedState(e){return this.inner.setPinnedState(e)}setGrandTotalPinned(e){return this.inner.setGrandTotalPinned(e)}getGrandTotalPinned(){return this.inner.getGrandTotalPinned()}};function Ew(e){return!!(e.rowPinned&&e.pinnedSibling)}function Qs(e,t,n,i){let o=t==="top";if(!n)return Qs(e,t,o?e.getPinnedTopRow(0):e.getPinnedBottomRow(0),i);if(!i){let l=o?e.getPinnedTopRowCount():e.getPinnedBottomRowCount();return Qs(e,t,n,o?e.getPinnedTopRow(l-1):e.getPinnedBottomRow(l-1))}let r=!1,s=!1,a=[];return e.forEachPinnedRow(t,l=>{if(l===n&&!r){r=!0,a.push(l);return}if(r&&l===i){s=!0,a.push(l);return}r&&!s&&a.push(l)}),a}var tPe={tag:"div",cls:"ag-selection-checkbox",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},nPe=class extends Mn{constructor(){super(tPe,[oV]),this.eCheckbox=Ce}postConstruct(){this.eCheckbox.setPassive(!0)}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){let e=this.getLocaleTextFunc(),{rowNode:t,eCheckbox:n}=this,i=t.isSelected(),o=yI(e,i),[r,s]=t.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],a=e(r,s);n.setValue(i,!0),n.setInputAriaLabel(`${a} (${o})`)}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:xp,click:i=>{xp(i),this.beans.selectionSvc?.handleSelectionEvent(i,this.rowNode,"checkboxSelected")}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.addManagedPropertyListener("rowSelection",({currentValue:i,previousValue:o})=>{let r=typeof i=="object"?Mz(i):void 0,s=typeof o=="object"?Mz(o):void 0;r!==s&&this.onSelectableChanged()}),m4(this.gos)||typeof this.getIsVisible()=="function"){let i=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:i}),this.addManagedListeners(this.rowNode,{dataChanged:i,cellChanged:i}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}showOrHideSelect(){let{column:e,rowNode:t,overrides:n,gos:i}=this,o=t.selectable,r=this.getIsVisible(),s;if(typeof r=="function"){let h=n?.callbackParams;if(!e)s=r(x(g({},h),{node:t,data:t.data}));else{let f=e.createColumnFunctionCallbackParams(t);s=r(g(g({},h),f))}}else s=r??!1;let a=o&&!s||!o&&s,l=o||s,c=i.get("rowSelection"),u=c&&typeof c!="string"?!Mz(c):!!e?.getColDef().showDisabledCheckboxes;this.setVisible(l&&(a?u:!0)),this.setDisplayed(l&&(a?u:!0)),l&&this.eCheckbox.setDisabled(a),n?.removeHidden&&this.setDisplayed(l)}getIsVisible(){let e=this.overrides;if(e)return e.isVisible;let t=this.gos.get("rowSelection");return t&&typeof t!="string"?Lg(t):this.column?.getColDef()?.checkboxSelection}},iPe=class{constructor(e,t){this.rowModel=e,this.pinnedRowModel=t,this.selectAll=!1,this.rootId=null,this.endId=null,this.cachedRange=[]}reset(){this.rootId=null,this.endId=null,this.cachedRange.length=0}setRoot(e){this.rootId=e.id,this.endId=null,this.cachedRange.length=0}setEndRange(e){this.endId=e.id,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){let e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.getNodesInRange(e,t)??[]}return this.cachedRange}isInRange(e){return this.rootId===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(e){if(this.rootId)return this.getRowNode(this.rootId);if(e)return this.setRoot(e),e}getEnd(){if(this.endId)return this.getRowNode(this.endId)}getRowNode(e){let t,{rowModel:n,pinnedRowModel:i}=this;return t??(t=n.getRowNode(e)),i?.isManual()&&(t??(t=i.getPinnedRowById(e,"top")),t??(t=i.getPinnedRowById(e,"bottom"))),t}truncate(e){let t=this.getRange();if(t.length===0)return{keep:[],discard:[]};let n=t[0].id===this.rootId,i=t.findIndex(o=>o.id===e.id);if(i>-1){let o=t.slice(0,i),r=t.slice(i+1);return this.setEndRange(e),n?{keep:o,discard:r}:{keep:r,discard:o}}else return{keep:t,discard:[]}}extend(e,t=!1){let n=this.getRoot();if(n==null){let o=this.getRange().slice();return t&&e.depthFirstSearch(r=>!r.group&&o.push(r)),o.push(e),this.setRoot(e),{keep:o,discard:[]}}let i=this.getNodesInRange(n,e);if(!i)return this.setRoot(e),{keep:[e],discard:[]};if(i.find(o=>o.id===this.endId))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{let o=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:o}}}getNodesInRange(e,t){let{pinnedRowModel:n,rowModel:i}=this;if(!n?.isManual())return i.getNodesInRangeForSelection(e,t);if(e.rowPinned==="top"&&!t.rowPinned)return Qs(n,"top",e,void 0).concat(i.getNodesInRangeForSelection(i.getRow(0),t)??[]);if(e.rowPinned==="bottom"&&!t.rowPinned){let o=Qs(n,"bottom",void 0,e),r=i.getRowCount(),s=i.getRow(r-1);return(i.getNodesInRangeForSelection(t,s)??[]).concat(o)}if(!e.rowPinned&&!t.rowPinned)return i.getNodesInRangeForSelection(e,t);if(e.rowPinned==="top"&&t.rowPinned==="top")return Qs(n,"top",e,t);if(e.rowPinned==="bottom"&&t.rowPinned==="top"){let o=Qs(n,"top",t,void 0),r=Qs(n,"bottom",void 0,e),s=i.getRow(0),a=i.getRow(i.getRowCount()-1);return o.concat(i.getNodesInRangeForSelection(s,a)??[]).concat(r)}if(!e.rowPinned&&t.rowPinned==="top")return Qs(n,"top",t,void 0).concat(i.getNodesInRangeForSelection(i.getRow(0),e)??[]);if(e.rowPinned==="top"&&t.rowPinned==="bottom"){let o=Qs(n,"top",e,void 0),r=Qs(n,"bottom",void 0,t),s=i.getRow(0),a=i.getRow(i.getRowCount()-1);return o.concat(i.getNodesInRangeForSelection(s,a)??[]).concat(r)}if(e.rowPinned==="bottom"&&t.rowPinned==="bottom")return Qs(n,"bottom",e,t);if(!e.rowPinned&&t.rowPinned==="bottom"){let o=Qs(n,"bottom",void 0,t),r=i.getRow(i.getRowCount());return(i.getNodesInRangeForSelection(e,r)??[]).concat(o)}return null}},oPe=class extends te{constructor(e){super(),this.column=e,this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1}onSpaceKeyDown(e){let t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(vi(this.beans))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e;let t=this.createManagedBean(new iV);this.cbSelectAll=t,t.addCss("ag-header-select-all"),pu(t.getGui(),"presentation"),this.showOrHideSelectAll();let n=this.updateStateOfCheckbox.bind(this);this.addManagedEventListeners({newColumnsLoaded:()=>this.showOrHideSelectAll(),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:n,paginationChanged:n,modelUpdated:n}),this.addManagedPropertyListener("rowSelection",({currentValue:i,previousValue:o})=>{let r=s=>typeof s=="string"||!s||s.mode==="singleRow"?void 0:s.selectAll;r(i)!==r(o)&&this.showOrHideSelectAll(),this.updateStateOfCheckbox()}),this.addManagedListeners(t,{fieldValueChanged:this.onCbSelectAll.bind(this)}),t.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onDisplayedColumnsChanged(e){this.isAlive()&&this.showOrHideSelectAll(e.source==="uiColumnMoved")}showOrHideSelectAll(e=!1){let t=this.isCheckboxSelection();this.cbSelectAllVisible=t,this.cbSelectAll.setDisplayed(t),t&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel(e)}updateStateOfCheckbox(){if(!this.cbSelectAllVisible||this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;let e=this.getSelectAllMode(),t=this.beans.selectionSvc,n=this.cbSelectAll,i=t.getSelectAllState(e);n.setValue(i);let o=t.hasNodesToSelect(e);n.setDisabled(!o),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(e=!1){let t=this.getLocaleTextFunc(),{headerCellCtrl:n,cbSelectAll:i,cbSelectAllVisible:o}=this,r=i.getValue(),s=yI(t,r),a=t("ariaRowSelectAll","Press Space to toggle all rows selection");n.setAriaDescriptionProperty("selectAll",o?`${a} (${s})`:null),i.setInputAriaLabel(t("ariaHeaderSelection","Column with Header Selection")),e||n.announceAriaDescription()}checkSelectionType(e){return hw(this.gos)?!0:(ce(128,{feature:e}),!1)}checkRightRowModelType(e){let{gos:t,rowModel:n}=this.beans;return $i(t)||Yg(t)?!0:(ce(129,{feature:e,rowModel:n.getType()}),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;let e=this.cbSelectAll.getValue(),t=this.getSelectAllMode(),n="uiSelectAll";t==="currentPage"?n="uiSelectAllCurrentPage":t==="filtered"&&(n="uiSelectAllFiltered");let i={source:n,selectAll:t},o=this.beans.selectionSvc;e?o.selectAllRowNodes(i):o.deselectAllRowNodes(i)}isCheckboxSelection(){let{column:e,gos:t,beans:n}=this,r=typeof t.get("rowSelection")=="object"?"headerCheckbox":"headerCheckboxSelection";return Ane(n,e)&&this.checkRightRowModelType(r)&&this.checkSelectionType(r)}getSelectAllMode(){let e=Ste(this.gos,!1);if(e)return e;let{headerCheckboxSelectionCurrentPageOnly:t,headerCheckboxSelectionFilteredOnly:n}=this.column.getColDef();return t?"currentPage":n?"filtered":"all"}destroy(){super.destroy(),this.cbSelectAll=void 0,this.headerCellCtrl=void 0}};function Ane({gos:e,selectionColSvc:t},n){let i=e.get("rowSelection"),o=n.getColDef(),{headerCheckboxSelection:r}=o,s=!1;if(typeof i=="object"){let l=ed(n),c=X4(n);(iI(i)==="autoGroupColumn"&&c||l&&t?.isSelectionColumnEnabled())&&(s=Hk(i))}else typeof r=="function"?s=r(at(e,{column:n,colDef:o})):s=!!r;return s}var rPe=class extends te{postConstruct(){let{gos:e,beans:t}=this;this.selectionCtx=new iPe(t.rowModel,t.pinnedRowModel),this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>{let n=m4(e);n!==this.isRowSelectable&&(this.isRowSelectable=n,this.updateSelectable())}),this.isRowSelectable=m4(e),this.addManagedEventListeners({cellValueChanged:n=>this.updateRowSelectable(n.node),rowNodeDataChanged:n=>this.updateRowSelectable(n.node)})}destroy(){super.destroy(),this.selectionCtx.reset()}createCheckboxSelectionComponent(){return new nPe}createSelectAllFeature(e){if(Ane(this.beans,e))return new oPe(e)}isMultiSelect(){return hw(this.gos)}onRowCtrlSelected(e,t,n){let i=!!e.rowNode.isSelected();e.forEachGui(n,o=>{o.rowComp.toggleCss("ag-row-selected",i);let r=o.element;qee(r,i),r.contains(vi(this.beans))&&t(o)})}announceAriaRowSelection(e){if(this.isRowSelectionBlocked(e))return;let t=e.isSelected(),n=this.beans.editSvc?.isEditing({rowNode:e});if(!e.selectable||n)return;let o=this.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row`);this.beans.ariaAnnounce?.announceValue(o,"rowSelection")}isRowSelectionBlocked(e){return!e.selectable||e.rowPinned&&!Ew(e)||!mp(this.gos)}updateRowSelectable(e,t){let n=e.rowPinned&&e.pinnedSibling?e.pinnedSibling.selectable:this.isRowSelectable?.(e)??!0;return this.setRowSelectable(e,n,t),n}setRowSelectable(e,t,n){if(e.selectable!==t){if(e.selectable=t,e.dispatchRowEvent("selectableChanged"),n)return;if(pw(this.gos)){let o=this.calculateSelectedFromChildren(e);this.setNodesSelected({nodes:[e],newValue:o??!1,source:"selectableChanged"});return}e.isSelected()&&!e.selectable&&this.setNodesSelected({nodes:[e],newValue:!1,source:"selectableChanged"})}}calculateSelectedFromChildren(e){let t=!1,n=!1;if(!e.childrenAfterGroup?.length)return e.selectable?e.__selected:null;for(let i=0;i<e.childrenAfterGroup.length;i++){let o=e.childrenAfterGroup[i],r=o.isSelected();if(!o.selectable){let s=this.calculateSelectedFromChildren(o);if(s===null)continue;r=s}switch(r){case!0:t=!0;break;case!1:n=!0;break;default:return}}if(!(t&&n))return t?!0:n?!1:e.selectable?e.__selected:null}selectRowNode(e,t,n,i="api"){let o=!e.selectable&&t,r=e.__selected===t;if(o||r)return!1;e.__selected=t,e.dispatchRowEvent("rowSelected");let s=e.sibling;s&&s.footer&&s.__localEventService&&s.dispatchRowEvent("rowSelected");let a=e.pinnedSibling;return a?.rowPinned&&a.__localEventService&&a.dispatchRowEvent("rowSelected"),this.eventSvc.dispatchEvent(x(g({},uRe(e,this.gos,"rowSelected")),{event:n||null,source:i})),!0}isCellCheckboxSelection(e,t){let n=this.gos.get("rowSelection");if(n&&typeof n!="string"){let i=ed(e)&&Lg(n);return e.isColumnFunc(t,i)}else return e.isColumnFunc(t,e.colDef.checkboxSelection)}inferNodeSelections(e,t,n,i){let{gos:o,selectionCtx:r}=this,s=e.isSelected(),a=pw(o),l=Oke(o),c=Fke(o),u=this.isMultiSelect(),h=i==="rowClicked";if(h&&!(l||c))return null;if(t&&n&&u){let f=r.getRoot();if(f)if(f.isSelected()){let m=r.isInRange(e)?r.truncate(e):r.extend(e,a);return{deselect:m.discard,select:m.keep,reset:!1}}else{let m=r.extend(e,a);return{select:[],deselect:m.keep,reset:!1}}else return null}else if(t&&u){let f=r.selectAll?this.beans.rowModel.getRow(0):void 0,m=r.getRoot(f),_=r.isInRange(e)?r.truncate(e):r.extend(e,a);return{select:_.keep,deselect:_.discard,reset:r.selectAll||!!(m&&!m.isSelected())}}else if(n){if(h){let f=!s;return f&&!l||!f&&!c?null:(r.setRoot(e),{node:e,newValue:f,clearSelection:!1})}return r.setRoot(e),{node:e,newValue:!s,clearSelection:!u}}else{r.setRoot(e);let f=Lke(o),m=rI(o)==="filteredDescendants",_=h&&(!f||!l);if(m&&s===void 0&&$i(o))return{node:e,newValue:!1,checkFilteredNodes:!0,clearSelection:!u||_};if(h){let y=s?!f:l;return y===s&&!_||y&&!l||!y&&!c?null:{node:e,newValue:y,clearSelection:!u||_,keepDescendants:e.group&&a}}return{node:e,newValue:!s,clearSelection:!u||_}}}},Kz={TAB_GUARD:"ag-tab-guard",TAB_GUARD_TOP:"ag-tab-guard-top",TAB_GUARD_BOTTOM:"ag-tab-guard-bottom"},sPe=class extends te{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;let{comp:t,eTopGuard:n,eBottomGuard:i,focusTrapActive:o,forceFocusOutWhenTabGuardsAreEmpty:r,isFocusableContainer:s,focusInnerElement:a,onFocusIn:l,onFocusOut:c,shouldStopEventPropagation:u,onTabKeyDown:h,handleKeyDown:f,isEmpty:m,eFocusableElement:_}=e;this.comp=t,this.eTopGuard=n,this.eBottomGuard=i,this.providedFocusInnerElement=a,this.eFocusableElement=_,this.focusTrapActive=!!o,this.forceFocusOutWhenTabGuardsAreEmpty=!!r,this.isFocusableContainer=!!s,this.providedFocusIn=l,this.providedFocusOut=c,this.providedShouldStopEventPropagation=u,this.providedOnTabKeyDown=h,this.providedHandleKeyDown=f,this.providedIsEmpty=m}postConstruct(){this.createManagedBean(new Qg(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards();for(let e of[this.eTopGuard,this.eBottomGuard])this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)})}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;let e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&(this.providedIsEmpty?this.providedIsEmpty():Bg(this.eFocusableElement,".ag-tab-guard").length===0)){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;let t=e.target===this.eBottomGuard;!(this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t))&&this.forceFocusOutWhenTabGuardsAreEmpty&&this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}findNextElementOutsideAndFocus(e){let t=ko(this.beans),n=Bg(t.body,null,!0),i=n.indexOf(e?this.eTopGuard:this.eBottomGuard);if(i===-1)return;let o,r;e?(o=0,r=i):(o=i+1,r=n.length);let s=n.slice(o,r),a=this.gos.get("tabIndex");s.sort((l,c)=>{let u=Number.parseInt(l.getAttribute("tabindex")||"0"),h=Number.parseInt(c.getAttribute("tabindex")||"0");return h===a?1:u===a?-1:u===0?1:h===0?-1:u-h}),s[e?s.length-1:0]?.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;let t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();let n=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),n&&(n.focus(),e.preventDefault())}focusInnerElement(e=!1){let t=Bg(this.eFocusableElement);return this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length?(t[e?t.length-1:0].focus({preventScroll:!0}),!0):!1}getNextFocusableElement(e){return kp(this.beans,this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;let t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},aPe=class extends te{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();let{eTopGuard:t,eBottomGuard:n,eFocusableElement:i}=this,o=[t,n],r={setTabIndex:w=>{for(let C of o)w!=null?C.setAttribute("tabindex",w):C.removeAttribute("tabindex")}};this.addTabGuards(t,n);let{focusTrapActive:s=!1,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:h,shouldStopEventPropagation:f,isEmpty:m,forceFocusOutWhenTabGuardsAreEmpty:_,isFocusableContainer:y}=e;this.tabGuardCtrl=this.createManagedBean(new sPe({comp:r,focusTrapActive:s,eTopGuard:t,eBottomGuard:n,eFocusableElement:i,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:h,shouldStopEventPropagation:f,isEmpty:m,forceFocusOutWhenTabGuardsAreEmpty:_,isFocusableContainer:y}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){let t=ko(this.beans).createElement("div"),n=e==="top"?Kz.TAB_GUARD_TOP:Kz.TAB_GUARD_BOTTOM;return t.classList.add(Kz.TAB_GUARD,n),pu(t,"presentation"),t}addTabGuards(e,t){let n=this.eFocusableElement;n.insertAdjacentElement("afterbegin",e),n.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){let e=[this.eTopGuard,this.eBottomGuard];Vo(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,n){K4(t)||(t=t.getGui());let{eBottomGuard:i}=this;i?i.insertAdjacentElement("beforebegin",t):e(t,n)}destroy(){let{eTopGuard:e,eBottomGuard:t}=this;Wr(e),Wr(t),super.destroy()}},One=class extends Mn{initialiseTabGuard(e){this.tabGuardFeature=this.createManagedBean(new aPe(this)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(e=!1){this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},lPe=500,cPe=550,Fk,dPe=e=>{if(!Fk)Fk=new WeakSet;else if(Fk.has(e))return!1;return Fk.add(e),!0},up=class{constructor(e,t=!1){this.eElement=e,this.preventClick=t,this.startListener=null,this.handlers=[],this.eventSvc=void 0,this.touchStart=null,this.lastTapTime=null,this.longPressTimer=0,this.moved=!1}addEventListener(e,t){let n=this.eventSvc;if(!n){if(n===null)return;this.eventSvc=n=new bp;let i=this.onTouchStart.bind(this);this.startListener=i,this.eElement.addEventListener("touchstart",i,{passive:!0})}n.addEventListener(e,t)}removeEventListener(e,t){this.eventSvc?.removeEventListener(e,t)}onTouchStart(e){if(this.touchStart||!dPe(e))return;let t=e.touches[0];this.touchStart=t;let n=this.handlers;if(!n.length){let i=this.eElement,o=i.ownerDocument,r=this.onTouchMove.bind(this),s=this.onTouchEnd.bind(this),a=this.onTouchCancel.bind(this),l={passive:!0},c={passive:!1};zk(n,[i,"touchmove",r,l],[o,"touchcancel",a,l],[o,"touchend",s,c],[o,"contextmenu",du,c])}this.clearLongPress(),this.longPressTimer=window.setTimeout(()=>{this.longPressTimer=0,this.touchStart===t&&!this.moved&&(this.moved=!0,this.eventSvc?.dispatchEvent({type:"longTap",touchStart:t,touchEvent:e}))},cPe)}onTouchMove(e){let{moved:t,touchStart:n}=this;if(!t&&n){let i=JC(n,e.touches);i&&!ite(i,n,4)&&(this.clearLongPress(),this.moved=!0)}}onTouchEnd(e){let t=this.touchStart;!t||!JC(t,e.changedTouches)||(this.moved||(this.eventSvc?.dispatchEvent({type:"tap",touchStart:t}),this.checkDoubleTap(t)),this.preventClick&&du(e),this.cancel())}onTouchCancel(e){let t=this.touchStart;!t||!JC(t,e.changedTouches)||(this.lastTapTime=null,this.cancel())}checkDoubleTap(e){let t=Date.now(),n=this.lastTapTime;n&&t-n>lPe&&(this.eventSvc?.dispatchEvent({type:"doubleTap",touchStart:e}),t=null),this.lastTapTime=t}cancel(){this.clearLongPress(),Z4(this.handlers),this.touchStart=null}clearLongPress(){window.clearTimeout(this.longPressTimer),this.longPressTimer=0,this.moved=!1}destroy(){let e=this.startListener;e&&(this.startListener=null,this.eElement.removeEventListener("touchstart",e)),this.cancel(),this.eElement=null,this.eventSvc=null}};var uPe=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.includes("x"),this.scrollVertically=e.scrollAxis.includes("y"),this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}get scrolling(){return this.tickingInterval!==null}check(e,t=!1){let n=t||this.shouldSkipVerticalScroll();if(n&&this.shouldSkipHorizontalScroll())return;let i=this.scrollContainer.getBoundingClientRect(),o=this.scrollByTick;this.tickLeft=e.clientX<i.left+o,this.tickRight=e.clientX>i.right-o,this.tickUp=e.clientY<i.top+o&&!n,this.tickDown=e.clientY>i.bottom-o&&!n,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;let e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){let t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){let t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},bV=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.batchFrameworkComps=!1,this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t(),this.baseDocLink=`${ate}/${this.frameworkName}-data-grid`,xke(this.baseDocLink)}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return this.baseDocLink+(e?"/"+e:"")}};function hPe(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionSvc").api}}var pPe=["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","pageBoundsListener","rowSpanSvc","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"],oee=Object.fromEntries(pPe.map((e,t)=>[e,t]));function fPe(e,t){let n=(e.beanName?oee[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,i=(t.beanName?oee[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return n-i}function mPe(e,t){return e?.beanName==="gridDestroySvc"?-1:t?.beanName==="gridDestroySvc"?1:0}var gPe={tag:"div",cls:"ag-pinned-left-header",role:"rowgroup"},vPe={tag:"div",cls:"ag-pinned-right-header",role:"rowgroup"},_Pe={tag:"div",cls:"ag-header-viewport",role:"rowgroup",attrs:{tabindex:"-1"},children:[{tag:"div",ref:"eCenterContainer",cls:"ag-header-container",role:"presentation"}]},Zz=class extends Mn{constructor(e){super(),this.eCenterContainer=Ce,this.headerRowComps={},this.rowCompsList=[],this.pinned=e}postConstruct(){this.selectAndSetTemplate();let e={setDisplayed:n=>this.setDisplayed(n),setCtrls:n=>this.setCtrls(n),setCenterWidth:n=>this.eCenterContainer.style.width=n,setViewportScrollLeft:n=>this.getGui().scrollLeft=n,setPinnedContainerWidth:n=>{let i=this.getGui();i.style.width=n,i.style.maxWidth=n,i.style.minWidth=n}};this.createManagedBean(new OTe(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){let e=this.pinned=="left",t=this.pinned=="right",n=e?gPe:t?vPe:_Pe;this.setTemplate(n),this.eRowContainer=this.eCenterContainer!==Ce?this.eCenterContainer:this.getGui()}destroy(){this.setCtrls([]),super.destroy()}destroyRowComp(e){this.destroyBean(e),e.getGui().remove()}setCtrls(e){let t=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let n,i=o=>{let r=o.getGui();r.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(r),n&&Jee(this.eRowContainer,r,n),n=r};for(let o of e){let r=o.instanceId,s=t[r];delete t[r];let a=s||this.createBean(new RTe(o));this.headerRowComps[r]=a,this.rowCompsList.push(a),i(a)}for(let o of Object.values(t))this.destroyRowComp(o)}},yPe={tag:"div",cls:"ag-header",role:"presentation"},bPe=class extends Mn{constructor(){super(yPe)}postConstruct(){let e={toggleCss:(i,o)=>this.toggleCss(i,o),setHeightAndMinHeight:i=>{this.getGui().style.height=i,this.getGui().style.minHeight=i}};this.createManagedBean(new xTe).setComp(e,this.getGui(),this.getFocusableElement());let n=i=>{this.createManagedBean(i),this.appendChild(i)};n(new Zz("left")),n(new Zz(null)),n(new Zz("right"))}},CPe={selector:"AG-HEADER-ROOT",component:bPe},wPe=class extends Mn{constructor(e,t,n,i,o){super(),this.cellCtrl=t,this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.gos=e.gos,this.column=t.column,this.rowNode=t.rowNode,this.eRow=i;let r=ji({tag:"div",role:t.getCellAriaRole(),attrs:{"comp-id":`${this.getCompId()}`,"col-id":t.column.colIdSanitised}});this.eCell=r;let s;t.isCellSpanning()?(s=ji({tag:"div",cls:"ag-spanned-cell-wrapper",role:"presentation"}),s.appendChild(r),this.setTemplateFromElement(s)):this.setTemplateFromElement(r),this.cellCssManager=new Vte(()=>r),this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1);let a={toggleCss:(l,c)=>this.cellCssManager.toggleCss(l,c),setUserStyles:l=>yw(r,l),getFocusableElement:()=>r,setIncludeSelection:l=>this.includeSelection=l,setIncludeRowDrag:l=>this.includeRowDrag=l,setIncludeDndSource:l=>this.includeDndSource=l,setRenderDetails:(l,c,u)=>this.setRenderDetails(l,c,u),setEditDetails:(l,c,u)=>this.setEditDetails(l,c,u),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue(),refreshEditStyles:(l,c)=>this.refreshEditStyles(l,c)};t.setComp(a,r,s,this.eCellWrapper,n,o,void 0)}getParentOfValue(){return this.eCellValue??this.eCellWrapper??this.eCell}setRenderDetails(e,t,n){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;let o=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!(n||o)&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(t)),this.rowDraggingComp?.refreshVisibility()}setEditDetails(e,t,n){e?this.createCellEditorInstance(e,t,n):this.destroyEditor()}removeControls(){let e=this.beans.context;this.checkboxSelectionComp=e.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=e.destroyBean(this.dndSourceComp),this.rowDraggingComp=e.destroyBean(this.rowDraggingComp)}refreshWrapper(e){let t=this.includeRowDrag||this.includeDndSource||this.includeSelection,n=t||this.forceWrapper,i=n&&this.eCellWrapper==null;i&&(this.eCellWrapper=ji({tag:"div",cls:"ag-cell-wrapper",role:"presentation"}),this.eCell.appendChild(this.eCellWrapper));let o=!n&&this.eCellWrapper!=null;o&&(Wr(this.eCellWrapper),this.eCellWrapper=void 0),this.cellCssManager.toggleCss("ag-cell-value",!n);let r=!e&&n,s=r&&this.eCellValue==null;if(s){let c=this.cellCtrl.getCellValueClass();this.eCellValue=ji({tag:"span",cls:c,role:"presentation"}),this.eCellWrapper.appendChild(this.eCellValue)}let a=!r&&this.eCellValue!=null;a&&(Wr(this.eCellValue),this.eCellValue=void 0);let l=i||o||s||a;return l&&this.removeControls(),!e&&t&&this.addControls(),l}addControls(){let{cellCtrl:e,eCellWrapper:t,eCellValue:n,includeRowDrag:i,includeDndSource:o,includeSelection:r}=this,s=a=>{a&&t.insertBefore(a.getGui(),n)};i&&this.rowDraggingComp==null&&(this.rowDraggingComp=e.createRowDragComp(),s(this.rowDraggingComp)),o&&this.dndSourceComp==null&&(this.dndSourceComp=e.createDndSource(),s(this.dndSourceComp)),r&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=e.createSelectionCheckbox(),s(this.checkboxSelectionComp))}createCellEditorInstance(e,t,n){let i=this.editorVersion,o=e.newAgStackInstance(),{params:r}=e;o.then(a=>this.afterCellEditorCreated(i,a,r,t,n)),di(this.cellEditor)&&r.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){let t=this.getParentOfValue();Vo(t);let n=Zg(e);n!=null&&(t.textContent=n)}destroyRenderer(){let{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),Wr(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){let{context:e}=this.beans;(this.cellEditorPopupWrapper?.getGui().contains(vi(this.beans))||this.cellCtrl.hasBrowserFocus())&&this.eCell.focus({preventScroll:!0}),this.hideEditorPopup?.(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),Wr(this.cellEditorGui),this.cellCtrl.disableEditorTooltipFeature(),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){if(this.cellRenderer?.refresh==null||this.cellRendererClass!==e.componentClass)return!1;let t=this.cellRenderer.refresh(e.params);return t===!0||t===void 0}createCellRendererInstance(e){let t=this.rendererVersion,n=r=>s=>{if(this.rendererVersion!==t||!this.isAlive())return;let l=r.newAgStackInstance(),c=this.afterCellRendererCreated.bind(this,t,r.componentClass);l?.then(c)},{animationFrameSvc:i}=this.beans,o;if(i?.active&&this.firstRender?o=(r,s=!1)=>{i.createTask(n(r),this.rowNode.rowIndex,"p2",r.componentFromFramework,s)}:o=r=>n(r)(),e.params?.deferRender&&!this.cellCtrl.rowNode.group){let{loadingComp:r,onReady:s}=this.cellCtrl.getDeferLoadingCellRenderer();r&&(o(r),s.then(()=>o(e,!0)))}else o(e)}afterCellRendererCreated(e,t,n){if(!this.isAlive()||e!==this.rendererVersion){this.beans.context.destroyBean(n);return}this.cellRenderer=n,this.cellRendererClass=t;let o=n.getGui();if(this.cellRendererGui=o,o!=null){let r=this.getParentOfValue();Vo(r),r.appendChild(o)}}afterCellEditorCreated(e,t,n,i,o){let r=e!==this.editorVersion,{context:s}=this.beans;if(r){s.destroyBean(t);return}if(t.isCancelBeforeStart?.()){s.destroyBean(t),this.cellCtrl.stopEditing(!0);return}if(!t.getGui){ce(97,{colId:this.column.getId()}),s.destroyBean(t);return}this.cellEditor=t,this.cellEditorGui=t.getGui();let l=i||t.isPopup?.();l?this.addPopupCellEditor(n,o):this.addInCellEditor(),this.refreshEditStyles(!0,l),t.afterGuiAttached?.(),this.cellCtrl.enableEditorTooltipFeature(t),this.cellCtrl.cellEditorAttached()}refreshEditStyles(e,t){let{cellCssManager:n}=this;n.toggleCss("ag-cell-inline-editing",e&&!t),n.toggleCss("ag-cell-popup-editing",e&&!!t),n.toggleCss("ag-cell-not-inline-editing",!e||!!t)}addInCellEditor(){let{eCell:e}=this;e.contains(vi(this.beans))&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),Vo(this.getParentOfValue()),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(e,t){let{gos:n,context:i,popupSvc:o,editSvc:r}=this.beans;n.get("editType")==="fullRow"&&ce(98);let s=this.cellEditorPopupWrapper=i.createBean(r.createPopupEditorWrapper(e)),{cellEditor:a,cellEditorGui:l,eCell:c,rowNode:u,column:h,cellCtrl:f}=this,m=s.getGui();l&&m.appendChild(l);let _=n.get("stopEditingWhenCellsLoseFocus"),y=t??a.getPopupPosition?.()??"over",w=n.get("enableRtl"),C={ePopup:m,column:h,rowNode:u,type:"popupCellEditor",eventSource:c,position:y,alignSide:w?"right":"left",keepWithinBounds:!0},S=o.positionPopupByComponent.bind(o,C),I=o.addPopup({modal:_,eChild:m,closeOnEsc:!0,closedCallback:()=>{f.onPopupEditorClosed()},anchorToElement:c,positionCallback:S,ariaOwns:c});I&&(this.hideEditorPopup=I.hideFunc)}detach(){this.getGui().remove()}destroy(){this.destroyRenderer(),this.destroyEditor(),this.removeControls(),super.destroy()}},xPe=class extends Mn{constructor(e,t,n){super(),this.cellComps=new Map,this.beans=t,this.rowCtrl=e;let i=ji({tag:"div",role:"row",attrs:{"comp-id":`${this.getCompId()}`}});this.setInitialStyle(i,n),this.setTemplateFromElement(i);let o=i.style;this.domOrder=this.rowCtrl.getDomOrder();let r={setDomOrder:s=>this.domOrder=s,setCellCtrls:s=>this.setCellCtrls(s),showFullWidth:s=>this.showFullWidth(s),getFullWidthCellRenderer:()=>this.fullWidthCellRenderer,getFullWidthCellRendererParams:()=>this.fullWidthCellRendererParams,toggleCss:(s,a)=>this.toggleCss(s,a),setUserStyles:s=>yw(i,s),setTop:s=>o.top=s,setTransform:s=>o.transform=s,setRowIndex:s=>i.setAttribute("row-index",s),setRowId:s=>i.setAttribute("row-id",s),setRowBusinessKey:s=>i.setAttribute("row-business-key",s),refreshFullWidth:s=>{let a=s();return this.fullWidthCellRendererParams=a,this.fullWidthCellRenderer?.refresh?.(a)??!1}};e.setComp(r,this.getGui(),n,void 0),this.addDestroyFunc(()=>{e.unsetComp(n)})}setInitialStyle(e,t){let n=this.rowCtrl.getInitialTransform(t);if(n)e.style.setProperty("transform",n);else{let i=this.rowCtrl.getInitialRowTop(t);i&&e.style.setProperty("top",i)}}showFullWidth(e){let t=i=>{if(this.isAlive()){let o=i.getGui();this.getGui().appendChild(o),this.rowCtrl.setupDetailRowAutoHeight(o),this.setFullWidthRowComp(i,e.params)}else this.beans.context.destroyBean(i)};e.newAgStackInstance().then(t)}setCellCtrls(e){let t=new Map(this.cellComps);for(let n of e){let i=n.instanceId;this.cellComps.has(i)?t.delete(i):this.newCellComp(n)}this.destroyCells(t),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;let t=[];for(let n of e){let i=this.cellComps.get(n.instanceId);i&&t.push(i.getGui())}Xee(this.getGui(),t)}newCellComp(e){let t=this.beans.editSvc?.isEditing(e,{withOpenEditor:!0})??!1,n=new wPe(this.beans,e,this.rowCtrl.printLayout,this.getGui(),t);this.cellComps.set(e.instanceId,n),this.getGui().appendChild(n.getGui())}destroy(){super.destroy(),this.destroyCells(this.cellComps)}setFullWidthRowComp(e,t){this.fullWidthCellRenderer=e,this.fullWidthCellRendererParams=t,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer),this.fullWidthCellRendererParams=void 0})}destroyCells(e){for(let t of e.values()){if(!t)return;let n=t.cellCtrl.instanceId;if(this.cellComps.get(n)!==t)return;t.detach(),t.destroy(),this.cellComps.delete(n)}}};function SPe(e,t,n){let i=!!n.gos.get("enableCellSpan")&&!!t.getSpannedRowCtrls,o={tag:"div",ref:"eContainer",cls:Uk(e),role:"rowgroup"};if(t.type==="center"||i){let r={tag:"div",ref:"eSpannedContainer",cls:`ag-spanning-container ${WRe(e)}`,role:"presentation"};return o.role="presentation",{tag:"div",ref:"eViewport",cls:`ag-viewport ${Cne(e)}`,role:"rowgroup",children:[o,i?r:null]}}return o}var EPe=class extends Mn{constructor(e){super(),this.eViewport=Ce,this.eContainer=Ce,this.eSpannedContainer=Ce,this.rowCompsNoSpan={},this.rowCompsWithSpan={},this.name=e?.name,this.options=xw(this.name)}postConstruct(){this.setTemplate(SPe(this.name,this.options,this.beans));let e={setHorizontalScroll:n=>this.eViewport.scrollLeft=n,setViewportHeight:n=>this.eViewport.style.height=n,setRowCtrls:({rowCtrls:n})=>this.setRowCtrls(n),setSpannedRowCtrls:n=>this.setRowCtrls(n,!0),setDomOrder:n=>{this.domOrder=n},setContainerWidth:n=>{this.eContainer.style.width=n,this.eSpannedContainer&&(this.eSpannedContainer.style.width=n)},setOffsetTop:n=>{let i=`translateY(${n})`;this.eContainer.style.transform=i,this.eSpannedContainer&&(this.eSpannedContainer.style.transform=i)}};this.createManagedBean(new nTe(this.name)).setComp(e,this.eContainer,this.eSpannedContainer,this.eViewport)}destroy(){this.setRowCtrls([]),this.setRowCtrls([],!0),super.destroy(),this.lastPlacedElement=null}setRowCtrls(e,t){let{beans:n,options:i}=this,o=t?this.eSpannedContainer:this.eContainer,r=t?g({},this.rowCompsWithSpan):g({},this.rowCompsNoSpan),s={};t?this.rowCompsWithSpan=s:this.rowCompsNoSpan=s,this.lastPlacedElement=null;let a=[];for(let l of e){let c=l.instanceId,u=r[c],h;if(u)h=u,delete r[c];else{if(!l.rowNode.displayed)continue;h=new xPe(l,n,i.type)}s[c]=h,a.push([h,!u])}this.removeOldRows(Object.values(r)),this.addRowNodes(a,o)}addRowNodes(e,t){let{domOrder:n}=this;for(let[i,o]of e){let r=i.getGui();n?this.ensureDomOrder(r,t):o&&t.appendChild(r)}}removeOldRows(e){for(let t of e)t.getGui().remove(),t.destroy()}ensureDomOrder(e,t){Jee(t,e,this.lastPlacedElement),this.lastPlacedElement=e}},DPe={selector:"AG-ROW-CONTAINER",component:EPe};function jC(e,t){return t.map(n=>{let i=`e${n[0].toUpperCase()+n.substring(1)}RowContainer`;return e[i]={name:n},{tag:"ag-row-container",ref:i,attrs:{name:n}}})}function kPe(e){let t={},n={tag:"div",ref:"eGridRoot",cls:"ag-root ag-unselectable",children:[{tag:"ag-header-root"},{tag:"div",ref:"eTop",cls:"ag-floating-top",role:"presentation",children:jC(t,["topLeft","topCenter","topRight","topFullWidth"])},{tag:"div",ref:"eBody",cls:"ag-body",role:"presentation",children:[{tag:"div",ref:"eBodyViewport",cls:"ag-body-viewport",role:"presentation",children:jC(t,["left","center","right","fullWidth"])},{tag:"ag-fake-vertical-scroll"}]},{tag:"div",ref:"eStickyTop",cls:"ag-sticky-top",role:"presentation",children:jC(t,["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])},{tag:"div",ref:"eStickyBottom",cls:"ag-sticky-bottom",role:"presentation",children:jC(t,["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])},{tag:"div",ref:"eBottom",cls:"ag-floating-bottom",role:"presentation",children:jC(t,["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])},{tag:"ag-fake-horizontal-scroll"},e?{tag:"ag-overlay-wrapper"}:null]};return{paramsMap:t,elementParams:n}}var IPe=class extends Mn{constructor(){super(...arguments),this.eGridRoot=Ce,this.eBodyViewport=Ce,this.eStickyTop=Ce,this.eStickyBottom=Ce,this.eTop=Ce,this.eBottom=Ce,this.eBody=Ce}postConstruct(){let{overlays:e,rangeSvc:t}=this.beans,n=e?.getOverlayWrapperSelector(),{paramsMap:i,elementParams:o}=kPe(!!n);this.setTemplate(o,[...n?[n]:[],cTe,hTe,CPe,DPe],i);let r=(a,l)=>{let c=`${a}px`;l.style.minHeight=c,l.style.height=c},s={setRowAnimationCssOnBodyViewport:(a,l)=>this.setRowAnimationCssOnBodyViewport(a,l),setColumnCount:a=>zDe(this.getGui(),a),setRowCount:a=>NDe(this.getGui(),a),setTopHeight:a=>r(a,this.eTop),setBottomHeight:a=>r(a,this.eBottom),setTopInvisible:a=>this.eTop.classList.toggle("ag-invisible",a),setBottomInvisible:a=>this.eBottom.classList.toggle("ag-invisible",a),setStickyTopHeight:a=>this.eStickyTop.style.height=a,setStickyTopTop:a=>this.eStickyTop.style.top=a,setStickyTopWidth:a=>this.eStickyTop.style.width=a,setStickyBottomHeight:a=>{this.eStickyBottom.style.height=a,this.eStickyBottom.classList.toggle("ag-invisible",a==="0px")},setStickyBottomBottom:a=>this.eStickyBottom.style.bottom=a,setStickyBottomWidth:a=>this.eStickyBottom.style.width=a,setColumnMovingCss:(a,l)=>this.toggleCss(a,l),updateLayoutClasses:(a,l)=>{let c=[this.eBodyViewport.classList,this.eBody.classList];for(let u of c)u.toggle(La.AUTO_HEIGHT,l.autoHeight),u.toggle(La.NORMAL,l.normal),u.toggle(La.PRINT,l.print);this.toggleCss(La.AUTO_HEIGHT,l.autoHeight),this.toggleCss(La.NORMAL,l.normal),this.toggleCss(La.PRINT,l.print)},setAlwaysVerticalScrollClass:(a,l)=>this.eBodyViewport.classList.toggle(Sne,l),registerBodyViewportResizeListener:a=>{let l=_u(this.beans,this.eBodyViewport,a);this.addDestroyFunc(()=>l())},setPinnedTopBottomOverflowY:a=>this.eTop.style.overflowY=this.eBottom.style.overflowY=a,setCellSelectableCss:(a,l)=>{for(let c of[this.eTop,this.eBodyViewport,this.eBottom])c.classList.toggle(a,l)},setBodyViewportWidth:a=>this.eBodyViewport.style.width=a,setGridRootRole:a=>pu(this.eGridRoot,a)};this.ctrl=this.createManagedBean(new rTe),this.ctrl.setComp(s,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(t&&Qc(this.gos)||hw(this.gos))&&LDe(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,t){let n=this.eBodyViewport.classList;n.toggle("ag-row-animation",t),n.toggle("ag-row-no-animation",!t)}},MPe={selector:"AG-GRID-BODY",component:IPe},RPe=class extends te{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(e,t,n){this.view=e,this.eGridHostDiv=t,this.eGui=n,this.eGui.setAttribute("grid-id",this.beans.context.getId());let{dragAndDrop:i,ctrlsSvc:o}=this.beans;i?.registerGridDropTarget(()=>this.eGui,this),this.createManagedBean(new hV(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");let r=_u(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>r()),o.register("gridCtrl",this)}isDetailGrid(){return Yte(this.getGui())?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){let e=this.beans;return{paginationSelector:e.pagination?.getPaginationSelector(),gridHeaderDropZonesSelector:e.registry?.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:e.sideBar?.getSelector(),statusBarSelector:e.registry?.getSelector("AG-STATUS-BAR"),watermarkSelector:e.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){let{view:t}=this;if(e===!1)t.setCursor(null);else{let n=e===1?"ew-resize":"ns-resize";t.setCursor(n)}}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){let t=this.getFocusableContainers(),{indexWithFocus:n,nextIndex:i}=this.getNextFocusableIndex(t,e);if(i<0||i>=t.length)return!1;if(i===0){if(n>0){let{visibleCols:o,focusSvc:r}=this.beans,s=o.allCols,a=Hn(s);if(r.focusGridView({column:a,backwards:!0}))return!0}return!1}return this.focusContainer(t[i],e)}focusInnerElement(e){if(this.gos.getCallback("focusGridInnerElement")?.({fromBottom:!!e}))return!0;let n=this.getFocusableContainers(),{focusSvc:i,visibleCols:o}=this.beans,r=o.allCols;if(e){if(n.length>1)return this.focusContainer(Hn(n),e);let s=Hn(r);if(i.focusGridView({column:s,backwards:e}))return!0}if(this.gos.get("headerHeight")===0||_p(this.beans)){if(i.focusGridView({column:r[0],backwards:e}))return!0;for(let s=1;s<n.length;s++)if(wp(n[s].getGui(),e))return!0;return!1}return i.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){let t=this.view.getFocusableContainers(),{nextIndex:n,indexWithFocus:i}=this.getNextFocusableIndex(t,e);if(i===-1||n<0||n>=t.length)return;let o=t[n];o.setAllowFocus?.(!0),setTimeout(()=>{o.setAllowFocus?.(!1)})}isFocusable(){let e=this.beans;return!EI(e)||!_p(e)||!!e.sideBar?.comp?.isDisplayed()}getNextFocusableIndex(e,t){let n=vi(this.beans),i=e.findIndex(r=>r.getGui().contains(n)),o=i+(t?-1:1);return{indexWithFocus:i,nextIndex:o}}focusContainer(e,t){e.setAllowFocus?.(!0);let n=wp(e.getGui(),t,!1,!0);return e.setAllowFocus?.(!1),n}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},TPe=class extends One{constructor(e){super(),this.gridBody=Ce,this.sideBar=Ce,this.pagination=Ce,this.rootWrapperBody=Ce,this.eGridDiv=e}postConstruct(){let e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:r=>this.addCss(r),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:r=>{this.getGui().style.userSelect=r??"",this.getGui().style.webkitUserSelect=r??""},setCursor:r=>{this.getGui().style.cursor=r??""}},t=this.createManagedBean(new RPe),n=t.getOptionalSelectors(),i=this.createTemplate(n),o=[MPe,...Object.values(n).filter(r=>!!r)];this.setTemplate(i,o),t.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:r=>t.focusInnerElement(r),forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:()=>!t.isFocusable()})}insertGridIntoDom(){let e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(()=>{e.remove(),fu(this.gos,"Grid removed from DOM")})}updateLayoutClasses(e,t){let n=this.rootWrapperBody.classList,{AUTO_HEIGHT:i,NORMAL:o,PRINT:r}=La,{autoHeight:s,normal:a,print:l}=t;n.toggle(i,s),n.toggle(o,a),n.toggle(r,l),this.toggleCss(i,s),this.toggleCss(o,a),this.toggleCss(r,l)}createTemplate(e){let t=e.gridHeaderDropZonesSelector?{tag:"ag-grid-header-drop-zones"}:null,n=e.sideBarSelector?{tag:"ag-side-bar",ref:"sideBar"}:null,i=e.statusBarSelector?{tag:"ag-status-bar"}:null,o=e.watermarkSelector?{tag:"ag-watermark"}:null,r=e.paginationSelector?{tag:"ag-pagination",ref:"pagination"}:null;return{tag:"div",cls:"ag-root-wrapper",role:"presentation",children:[t,{tag:"div",ref:"rootWrapperBody",cls:"ag-root-wrapper-body",role:"presentation",children:[{tag:"ag-grid-body",ref:"gridBody"},n]},i,r,o]}}getFocusableElement(){return this.rootWrapperBody}forceFocusOutOfContainer(e=!1){if(!e&&this.pagination?.isDisplayed()){this.pagination.forceFocusOutOfContainer(e);return}super.forceFocusOutOfContainer(e)}getFocusableContainers(){let e=[this.gridBody];for(let t of[this.sideBar,this.pagination])t&&e.push(t);return e.filter(t=>Hl(t.getGui()))}},Ct=(e,t)=>{for(let n of Object.keys(t))t[n]=e;return t},ree=g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g(g({dispatchEvent:"CommunityCore"},Ct("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,isModuleRegistered:0})),Ct("GridState",{getState:0,setState:0})),Ct("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0})),Ct("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0})),Ct("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0})),Ct("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0})),Ct("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0})),Ct("ValueCache",{expireValueCache:0})),Ct("CellApi",{getCellValue:0})),Ct("SharedMenu",{showColumnMenu:0,hidePopupMenu:0})),Ct("Sort",{onSortChanged:0})),Ct("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,forEachPinnedRow:0})),Ct("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0})),Ct("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0})),Ct("HighlightChanges",{flashCells:0})),Ct("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getRowDropPositionIndicator:0,setRowDropPositionIndicator:0})),Ct("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0})),Ct("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0})),Ct("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0})),Ct("ColumnMove",{moveColumnByIndex:0,moveColumns:0})),Ct("ColumnResize",{setColumnWidths:0})),Ct("ColumnHover",{isColumnHovered:0})),Ct("EditCore",{getCellEditorInstances:0,getEditingCells:0,getEditRowValues:0,stopEditing:0,startEditingCell:0,isEditing:0,validateEdit:0})),Ct("BatchEdit",{startBatchEdit:0,cancelBatchEdit:0,commitBatchEdit:0,isBatchEditing:0})),Ct("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0})),Ct("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0})),Ct("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,hideColumnFilter:0,getColumnFilterHandler:0,doFilterAction:0})),Ct("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0})),Ct("Find",{findGetActiveMatch:0,findGetTotalMatches:0,findGoTo:0,findNext:0,findPrevious:0,findGetNumMatches:0,findGetParts:0,findClearActive:0,findRefresh:0})),Ct("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0})),Ct("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0})),Ct("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0})),Ct("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0,onRowHeightChanged:0,resetRowHeights:0})),Ct("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0})),Ct("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0})),Ct("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0})),Ct("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0})),Ct("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0})),Ct("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0})),Ct("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0})),Ct("ContextMenu",{showContextMenu:0})),Ct("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0})),Ct("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0})),Ct("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0})),Ct("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0})),Ct("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0})),Ct("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0,onRowHeightChanged:0,resetRowHeights:0})),Ct("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0})),Ct("StatusBar",{getStatusPanel:0})),Ct("AiToolkit",{getStructuredSchema:0})),Yz={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},PPe=(e,t)=>e.eventSvc.dispatchEvent(t),Fne=class{};Reflect.defineProperty(Fne,"name",{value:"GridApi"});var APe=class extends te{constructor(){super(),this.beanName="apiFunctionSvc",this.api=new Fne,this.fns=x(g({},Yz),{dispatchEvent:PPe}),this.preDestroyLink="";let{api:e}=this;for(let t of Object.keys(ree))e[t]=this.makeApi(t)[t]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){let{fns:n,beans:i}=this;n!==Yz&&(n[e]=i?.validation?.validateApiFunction(e,t)??t)}makeApi(e){return{[e]:(...t)=>{let{beans:n,fns:{[e]:i}}=this;return i?i(n,...t):this.apiNotFound(e)}}}apiNotFound(e){let{beans:t,gos:n,preDestroyLink:i}=this;if(!t)ce(26,{fnName:e,preDestroyLink:i});else{let o=ree[e];n.assertModuleRegistered(o,`api.${e}`)&&ce(27,{fnName:e,module:o})}}destroy(){super.destroy(),this.fns=Yz,this.beans=null}};function OPe(e){return e.context.getId()}function FPe(e){e.gridDestroySvc.destroy()}function LPe(e){return e.gridDestroySvc.destroyCalled}function NPe(e,t){return e.gos.get(t)}function BPe(e,t,n){Lne(e,{[t]:n})}function Lne(e,t){e.gos.updateGridOptions({options:t})}function zPe(e,t){let n=t.replace(/Module$/,"");return e.gos.isModuleRegistered(n)}var VPe={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{draggable:"true"}},HPe=class extends Mn{constructor(e,t,n){super(VPe),this.rowNode=e,this.column=t,this.eCell=n}postConstruct(){this.getGui().appendChild(Xs("rowDrag",this.beans,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){let{rowNode:t,column:n,eCell:i,gos:o}=this,r=n.getColDef().dndSourceOnRowDrag,s=e.dataTransfer;if(s.setDragImage(i,0,0),r){let a=at(o,{rowNode:t,dragEvent:e});r(a)}else try{let a=JSON.stringify(t.data);s.setData("application/json",a),s.setData("text/plain",a)}catch{}}checkVisibility(){let e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}};function $Pe(e,t){e.rowDragSvc?.rowDragFeature?.addRowDropZone(t)}function jPe(e,t){let n=e.dragAndDrop?.findExternalZone(t.getContainer());n&&e.dragAndDrop?.removeDropTarget(n)}function GPe(e,t){return e.rowDragSvc?.rowDragFeature?.getRowDropZone(t)}function UPe(e){let t=e.rowDropHighlightSvc;return t?{row:t.row,dropIndicatorPosition:t.position}:{row:null,dropIndicatorPosition:"none"}}function WPe(e,t){let n=e.rowDropHighlightSvc;if(!n)return;let i=t?.row,o=t?.dropIndicatorPosition;o!=="above"&&o!=="below"&&o!=="inside"&&(o="none");let r=i?.rowIndex;r==null||o==="none"?n.clear():n.set(i,o)}var qPe=class extends aRe{shouldPreventMouseEvent(e){return this.gos.get("enableCellTextSelection")&&super.shouldPreventMouseEvent(e)}},KPe=class extends te{constructor(){super(...arguments),this.beanName="horizontalResizeSvc"}addResizeBar(e){let t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc:n}=this.beans;return n.addDragSource(t),()=>n.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();let n=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(n)}setResizeIcons(){let e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(1),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){let e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},ZPe={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{"aria-hidden":"true"}},YPe=class extends Mn{constructor(e,t,n,i,o,r=!1){super(),this.cellValueFn=e,this.rowNode=t,this.column=n,this.customGui=i,this.dragStartPixels=o,this.alwaysVisible=r,this.dragSource=null}isCustomGui(){return this.customGui!=null}postConstruct(){let{beans:e,customGui:t}=this;t?this.setDragElement(t,this.dragStartPixels):(this.setTemplate(ZPe),this.getGui().appendChild(Xs("rowDrag",e,null)),this.addDragSource()),this.alwaysVisible||this.initCellDrag()}initCellDrag(){let{beans:e,gos:t,rowNode:n}=this,i=this.refreshVisibility.bind(this);this.addManagedPropertyListener("suppressRowDrag",i),this.addManagedListeners(n,{dataChanged:i,cellChanged:i}),this.addManagedListeners(e.eventSvc,t.get("rowDragManaged")?{sortChanged:i,filterChanged:i,columnRowGroupChanged:i,newColumnsLoaded:i}:{newColumnsLoaded:i})}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}refreshVisibility(){if(this.alwaysVisible)return;let e={skipAriaHidden:!0};if(this.isNeverDisplayed()){this.setDisplayed(!1,e);return}let t=this.column,n=typeof t?.getColDef().rowDrag=="function",i=!t||this.isCustomGui()||t.isRowDrag(this.rowNode);i&&this.rowNode.footer&&this.gos.get("rowDragManaged")&&(i=!1,n=!0),this.setDisplayed(n||i,e),this.setVisible(i,e)}isNeverDisplayed(){let{gos:e,beans:t}=this;return!!(e.get("suppressRowDrag")||e.get("rowDragManaged")&&t.rowDragSvc.rowDragFeature?.shouldPreventRowMove()&&!t.dragAndDrop?.hasExternalDropZones())}getSelectedNodes(){let e=this.rowNode;if(!this.gos.get("rowDragMultiRow"))return[e];let n=this.beans.selectionSvc?.getSelectedNodes()??[];return n.indexOf(e)!==-1?n:[e]}getDragItem(){let{column:e,rowNode:t}=this;return{rowNode:t,rowNodes:this.getSelectedNodes(),columns:e?[e]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){let t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){if(this.dragSource&&this.removeDragSource(),this.gos.get("rowDragManaged")&&this.rowNode.footer)return;let t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:i=>{i?.preventDefault()}})[0]);let n=this.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:i=>{let o=i?.dragItem||this.getDragItem(),r=(i?.dropTarget?.rows.length??o.rowNodes?.length)||1,s=this.getRowDragText(this.column);return s?s(o,r):r===1?this.cellValueFn():`${r} ${n("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDrop.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},Wk=class{constructor(){this.reordered=!1,this.removals=new Set,this.updates=new Set,this.adds=new Set}};function QPe(e){let{rowIndex:t,rowPinned:n,column:i}=e;return`${t}.${n??"null"}.${i.getId()}`}function Nne(e,t){let n=e.column===t.column,i=e.rowPinned===t.rowPinned,o=e.rowIndex===t.rowIndex;return n&&i&&o}function JPe(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(Se(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}function XPe(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}function eAe(e){let t=0,n,{pinnedRowModel:i,rowModel:o,pageBounds:r}=e;return i?.getPinnedTopRowCount()?n="top":o.getRowCount()?(n=null,t=r.getFirstRow()):i?.getPinnedBottomRowCount()&&(n="bottom"),n===void 0?null:{rowIndex:t,rowPinned:n}}function tAe(e){let t,n=null,{pinnedRowModel:i,pageBounds:o}=e,r=i?.getPinnedBottomRowCount(),s=i?.getPinnedTopRowCount();return r?(n="bottom",t=r-1):e.rowModel.getRowCount()?t=o.getLastRow():s&&(n="top",t=s-1),t===void 0?null:{rowIndex:t,rowPinned:n}}function Jc(e,t){switch(t.rowPinned){case"top":return e.pinnedRowModel?.getPinnedTopRow(t.rowIndex);case"bottom":return e.pinnedRowModel?.getPinnedBottomRow(t.rowIndex);default:return e.rowModel.getRow(t.rowIndex)}}function Tg(e,t){let n=e.spannedRowRenderer?.getCellByPosition(t);if(n)return n;let i=e.rowRenderer.getRowByPosition(t);return i?i.getCellCtrl(t.column):null}function nAe(e,t,n){let{rowModel:i,pinnedRowModel:o}=e,r;return r??(r=i?.getRowNode(t)),n?r??(r=o?.getPinnedRowById(t,n)):(r??(r=o?.getPinnedRowById(t,"top")),r??(r=o?.getPinnedRowById(t,"bottom"))),r}function fI(e,t,n=!1){let{rowIndex:i,rowPinned:o}=t,{pageBounds:r,pinnedRowModel:s,rowModel:a}=e;if(i===0)return o==="top"?null:o==="bottom"&&a.isRowsToRender()?{rowIndex:r.getLastRow(),rowPinned:null}:s?.isRowsToRender("top")?{rowIndex:s.getPinnedTopRowCount()-1,rowPinned:"top"}:null;if(n){let l=o?void 0:a.getRow(i);return Bne(e,l,!0)??{rowIndex:i-1,rowPinned:o}}return{rowIndex:i-1,rowPinned:o}}function see(e,t,n=!1){let{rowIndex:i,rowPinned:o}=t,{pageBounds:r,pinnedRowModel:s,rowModel:a}=e;if(iAe(e,t))return o==="bottom"?null:o==="top"&&a.isRowsToRender()?{rowIndex:r.getFirstRow(),rowPinned:null}:s?.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;if(n){let l=o?void 0:a.getRow(i);return Bne(e,l)??{rowIndex:i+1,rowPinned:o}}return{rowIndex:i+1,rowPinned:o}}function Bne(e,t,n=!1){let{gos:i,rowRenderer:o}=e;if(!t?.sticky||!yte(i))return;let r=o.getStickyTopRowCtrls(),s=o.getStickyBottomRowCtrls(),a=!s.some(h=>h.rowNode.rowIndex===t.rowIndex),l=a?r:s,c=(n?-1:1)*(a?-1:1),u;for(let h=0;h<l.length;h++)if(l[h].rowNode.rowIndex===t.rowIndex){u=l[h+c];break}return u?{rowIndex:u.rowNode.rowIndex,rowPinned:null}:void 0}function iAe(e,t){let{rowPinned:n,rowIndex:i}=t,{pinnedRowModel:o,pageBounds:r}=e;return n==="top"?(o?.getPinnedTopRowCount()??0)-1<=i:n==="bottom"?(o?.getPinnedBottomRowCount()??0)-1<=i:r.getLastRow()<=i}var gw=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}depthFirstSearchChangedPath(e,t){let{rowNode:n,children:i}=e;if(i)for(let o=0;o<i.length;++o)this.depthFirstSearchChangedPath(i[o],t);t(n)}depthFirstSearchEverything(e,t,n){let i=e.childrenAfterGroup;if(i)for(let o=0,r=i.length;o<r;++o){let s=i[o];s.childrenAfterGroup?this.depthFirstSearchEverything(s,t,n):n&&t(s)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,n=!1){this.active&&!n?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,n=0;for(;!this.mapToItems[t.id];){let i={rowNode:t,children:null};this.mapToItems[t.id]=i,n++,t=t.parent}return n}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let n=e;for(;n;){this.nodeIdsToColumns[n.id]||(this.nodeIdsToColumns[n.id]={});for(let i of t)this.nodeIdsToColumns[n.id][i.getId()]=!0;n=n.parent}}linkPathItems(e,t){let n=e;for(let i=0;i<t;i++){let o=this.mapToItems[n.id],r=this.mapToItems[n.parent.id];r.children||(r.children=[]),r.children.push(o),n=n.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;let n=this.createPathItems(e);this.linkPathItems(e,n),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;let n=this.nodeIdsToColumns[e.id];return t.filter(o=>n[o.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;let n=this.nodeIdsToColumns[e.id];return t.filter(o=>!n[o.getId()])}},oAe=class{constructor(e,t){this.beans=e,this.groupThrottled=!1,this.scrollChanged=!1,this.scrollChanging=!1,this.oldVScroll=null,this.groupTimer=null,this.groupTarget=null,this.onGroupThrottle=()=>{this.groupTimer=null,this.groupThrottled=!0,this.beans.dragAndDrop?.nudge()};let n=()=>t.scrollFeature.getVScrollPosition().top;this.autoScroll=new uPe({scrollContainer:t.eBodyViewport,scrollAxis:"y",getVerticalPosition:n,setVerticalPosition:i=>t.scrollFeature.setVerticalScrollPosition(i),onScrollCallback:()=>{let i=n();if(this.oldVScroll!==i){this.oldVScroll=i,this.scrollChanging=!0;return}let o=this.scrollChanging;this.scrollChanged=o,this.scrollChanging=!1,o&&(this.beans.dragAndDrop?.nudge(),this.scrollChanged=!1)}})}updateGroup(e,t){this.groupTarget&&this.groupTarget!==e&&this.clearGroup(),e&&(t&&this.groupThrottled&&!e.expanded&&e.childrenAfterSort?.length&&e.isExpandable()&&e.setExpanded(!0,void 0,!0),e.expanded&&e.childrenAfterSort?.length&&(this.groupThrottled=!0,this.groupTarget=e))}startGroup(e){this.groupTarget=e,this.groupTimer===null&&(this.groupTimer=window.setTimeout(this.onGroupThrottle,this.beans.gos.get("rowDragInsertDelay")))}clearGroup(){this.groupThrottled=!1,this.groupTarget=null;let e=this.groupTimer;e!==null&&(this.groupTimer=null,window.clearTimeout(e))}clear(){this.clearGroup(),this.autoScroll.ensureCleared(),this.oldVScroll=null,this.scrollChanged=!1,this.scrollChanging=!1}},rAe=class extends te{constructor(e){super(),this.eContainer=e,this.lastDraggingEvent=null,this.nudger=null}postConstruct(){let e=this.beans;e.ctrlsSvc.whenReady(this,t=>{this.nudger=new oAe(e,t.gridBodyCtrl)})}destroy(){super.destroy(),this.nudger?.clear(),this.nudger=null,this.lastDraggingEvent=null,this.eContainer=null}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(e){return e?.dropTarget?.allowed===!1||this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){let{rowGroupColsSvc:e,filterManager:t,sortSvc:n}=this.beans;return!!((e?.columns??[]).length||t?.isAnyFilterPresent()||n?.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];let t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){let n=this.beans.selectionSvc?.getSelectedNodes();if(n&&n.indexOf(t)>=0)return n.slice().sort(lAe)}return[t]}onDragEnter(e){this.dragging(e,!0)}onDragging(e){this.dragging(e,!1)}dragging(e,t){let{lastDraggingEvent:n,beans:i}=this;if(t){let s=this.getRowNodes(e);e.dragItem.rowNodes=s,cee(s,!0)}this.lastDraggingEvent=e;let o=e.fromNudge,r=this.makeRowsDrop(n,e,o,!1);i.rowDropHighlightSvc?.fromDrag(e),t&&this.dispatchGridEvent("rowDragEnter",e),this.dispatchGridEvent("rowDragMove",e),r?.rowDragManaged&&r.moved&&r.allowed&&r.sameGrid&&!r.suppressMoveWhenRowDragging&&(!o&&!this.nudger?.autoScroll.scrolling||this.nudger?.scrollChanged)&&this.dropRows(r),this.nudger?.autoScroll.check(e.event)}isFromThisGrid(e){return e.dragSource.dragSourceDomDataKey===this.gos.getDomDataKey()}makeRowsDrop(e,t,n,i){let{beans:o,gos:r}=this,s=this.newRowsDrop(t,i),a=o.rowModel;if(t.dropTarget=s,t.changed=!1,!s)return null;let{sameGrid:l,rootNode:c,source:u,target:h,rows:f}=s;h??(h=a.getRow(a.getRowCount()-1)??null);let m=!!this.beans.groupStage?.treeData&&l,_=null;if(h?.footer){let I=qk(a,-1,h)??qk(a,1,h);_=h.sibling??c,h=I??null}h?.detail&&(h=h.parent),s.moved&&(s.moved=u!==h);let y=.5;if(h&&(l&&s.moved&&(_||!m)?y=u.rowIndex>h.rowIndex?-.5:.5:y=(s.y-h.rowTop-h.rowHeight/2)/h.rowHeight||0),!m&&l&&h&&s.moved&&$i(r)){let I=cAe(a,s);I&&(y=u.rowIndex>I.rowIndex?-.5:.5,h=I,s.moved&&(s.moved=u!==h))}let w=this.nudger;w?.updateGroup(h,n),m&&!_&&w&&(!h||y>=.5&&h.rowIndex===o.pageBounds.getLastRow()?_=c:s.moved&&this.targetShouldBeParent(h,y,f)&&(w.groupThrottled&&(_=h),!n&&(!_||h&&!h.expanded&&h.childrenAfterSort?.length)&&w.startGroup(h)),_??(_=h?.parent??c));let C=!1;if(_){if(_===h&&_!==c){let I=_.expanded?qk(a,1,h):null;I?.parent===_?(h=I,y=-.5):C=!0}if(h&&!C){let I=h;for(;I&&I!==c&&I!==_;)h=I,I=I.parent}}s.target=h,s.newParent=_,s.moved&&(s.moved=u!==h);let S=y<0?"above":"below";return s.position=s.moved?C?"inside":S:"none",this.validateRowsDrop(s,m,S,i),t.changed||(t.changed=aAe(e?.dropTarget,s)),s}newRowsDrop(e,t){let{beans:n,gos:i}=this,o=n.rowModel.rootNode,r=$i(i)?i.get("rowDragManaged"):!1,s=i.get("suppressMoveWhenRowDragging"),a=this.isFromThisGrid(e),{rowNode:l,rowNodes:c}=e.dragItem;if(c||(c=l?[l]:[]),l||(l=c[0]),!l||!o)return null;let u=this.beans.dragAndDrop.isDropZoneWithinThisGrid(e),h=!0;r&&(!c.length||this.shouldPreventRowMove()||(s||!a)&&!u)&&(h=!1);let f=KX(n,e).y,m=this.getOverNode(f);return{api:n.gridApi,context:n.gridOptions.context,draggingEvent:e,rowDragManaged:r,suppressMoveWhenRowDragging:s,sameGrid:a,withinGrid:u,rootNode:o,moved:l!==m,y:f,overNode:m,overIndex:m?.rowIndex??-1,position:"none",source:l,target:m??null,newParent:null,rows:c,allowed:h,highlight:!t&&r&&s&&(u||!a)}}validateRowsDrop(e,t,n,i){let{rowDragManaged:o,suppressMoveWhenRowDragging:r}=e;t||(e.newParent=null),r&&!e.moved&&(e.allowed=!1);let s=(!o||e.allowed)&&this.gos.get("isRowValidDropPosition");if(s){t&&e.newParent&&aee(e.rows,e.newParent)&&(e.newParent=null);let a=s(e);if(!a)e.allowed=!1;else if(typeof a=="object"){a.rows!==void 0&&(e.rows=a.rows??[]),t&&a.newParent!==void 0&&(e.newParent=a.newParent),a.target!==void 0&&(e.target=a.target),a.position&&(e.position=a.position),a.allowed!==void 0?e.allowed=a.allowed:o||(e.allowed=!0);let l=e.draggingEvent;a.changed&&l&&(l.changed=!0),!i&&a.highlight!==void 0&&(e.highlight=a.highlight)}}o&&(e.rows=this.filterRows(e)),t&&e.newParent&&aee(e.rows,e.newParent)&&(e.newParent=null),r&&(!e.rows.length||e.position==="none")&&(e.allowed=!1),(!e.allowed||!e.newParent)&&e.position==="inside"&&(e.position=n)}targetShouldBeParent(e,t,n){let i=e.rowIndex,o=.25;if(t<-.5+o)return!1;if(t<.5-o)return!0;let r,s=i+1,a=this.beans.rowModel;do r=a.getRow(s++);while(r?.footer);let l=e.childrenAfterGroup;if(r&&r.parent===e&&l?.length){let c=new Set(n);for(let u of l)if(u.rowIndex!==null&&!c.has(u))return!0}return!1}addRowDropZone(e){if(!e.getContainer()){ce(55);return}let t=this.beans.dragAndDrop;if(t.findExternalZone(e.getContainer())){ce(56);return}let n=e.fromGrid?e:{getContainer:e.getContainer,onDragEnter:e.onDragEnter&&(o=>e.onDragEnter(this.rowDragEvent("rowDragEnter",o))),onDragLeave:e.onDragLeave&&(o=>e.onDragLeave(this.rowDragEvent("rowDragLeave",o))),onDragging:e.onDragging&&(o=>e.onDragging(this.rowDragEvent("rowDragMove",o))),onDragStop:e.onDragStop&&(o=>e.onDragStop(this.rowDragEvent("rowDragEnd",o))),onDragCancel:e.onDragCancel&&(o=>e.onDragCancel(this.rowDragEvent("rowDragCancel",o)))},i=g({isInterestedIn:o=>o===2,getIconName:()=>"move",external:!0},n);t.addDropTarget(i),this.addDestroyFunc(()=>t.removeDropTarget(i))}getRowDropZone(e){return{getContainer:this.getContainer.bind(this),onDragEnter:n=>{this.onDragEnter(n),e?.onDragEnter?.(this.rowDragEvent("rowDragEnter",n))},onDragLeave:n=>{this.onDragLeave(n),e?.onDragLeave?.(this.rowDragEvent("rowDragLeave",n))},onDragging:n=>{this.onDragging(n),e?.onDragging?.(this.rowDragEvent("rowDragMove",n))},onDragStop:n=>{this.onDragStop(n),e?.onDragStop?.(this.rowDragEvent("rowDragEnd",n))},onDragCancel:n=>{this.onDragCancel(n),e?.onDragCancel?.(this.rowDragEvent("rowDragCancel",n))},fromGrid:!0}}getOverNode(e){let{pageBounds:t,rowModel:n}=this.beans,o=e>t.getCurrentPagePixelRange().pageLastPixel?-1:n.getRowIndexAtPixel(e);return o>=0?n.getRow(o):void 0}rowDragEvent(e,t){let n=this.beans,{dragItem:i,dropTarget:o,event:r,vDirection:s}=t,a=o?.rootNode===n.rowModel.rootNode,l=a?o.y:KX(n,t).y,c=a?o.overNode:this.getOverNode(l),u=a?o.overIndex:c?.rowIndex??-1;return{api:n.gridApi,context:n.gridOptions.context,type:e,event:r,node:i.rowNode,nodes:i.rowNodes,overIndex:u,overNode:c,y:l,vDirection:s,rowsDrop:o}}dispatchGridEvent(e,t){let n=this.rowDragEvent(e,t);this.eventSvc.dispatchEvent(n)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e)}onDragStop(e){let t=this.makeRowsDrop(this.lastDraggingEvent,e,!1,!0);this.dispatchGridEvent("rowDragEnd",e),t?.allowed&&t.rowDragManaged&&(t.suppressMoveWhenRowDragging||!t.sameGrid||this.nudger?.autoScroll.scrolling)&&this.dropRows(t),this.stopDragging(e)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e)}stopDragging(e){this.nudger?.clear(),this.beans.rowDropHighlightSvc?.fromDrag(null),cee(e.dragItem.rowNodes,!1)}dropRows(e){return e.sameGrid?this.csrmMoveRows(e):this.csrmAddRows(e)}csrmAddRows({position:e,target:t,rows:n}){let i=Gg(this.gos),o=this.beans.rowModel,r=n.filter(({data:a,rowPinned:l})=>!o.getRowNode(i?.({data:a,level:0,rowPinned:l})??a.id)).map(({data:a})=>a);if(r.length===0)return!1;let s=t?lee(t)+(e==="above"?0:1):void 0;return o.updateRowData({add:r,addIndex:s}),!0}filterRows({newParent:e,rows:t}){let n;for(let i=0,o=t.length;i<o;++i){let r=!0,s=t[i];(!s||s.footer||s.rowTop===null&&s!==this.beans.rowModel.getRowNode(s.id)||e&&s.parent!==e&&sAe(s,e)||!T4(s))&&(r=!1),r?n?.push(s):n??(n=t.slice(0,i))}return n??t}csrmMoveRows({position:e,target:t,rows:n,newParent:i,rootNode:o}){let r=!1,s=new Set;for(let f of n){i&&f.parent!==i&&(f.treeParent=i,r=!0);let m=T4(f);m&&s.add(m)}if(!r&&s.size===0)return!1;let a=this.beans.focusSvc,l=a.getFocusedCell(),c=l&&Tg(this.beans,l);if(s.size&&this.reorderLeafChildren(s,...this.getMoveRowsBounds(s,t,e==="above"))&&(r=!0),!r)return!1;let u=this.beans.rowModel,h=new Wk;return h.reordered=!0,u.refreshModel({step:"group",keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedPath:new gw(!1,o),changedRowNodes:h}),c?c.focusCell():a.clearFocusedCell(),!0}getMoveRowsBounds(e,t,n){let i=this.beans.rowModel.rootNode?._leafs?.length??0,o=t?lee(t):-1;o<0||o>=i?o=i:n||++o;let r=o,s=Math.min(o,i-1);for(let a of e){let l=a.sourceRowIndex;l<r&&(r=l),l>s&&(s=l)}return[r,o,s]}reorderLeafChildren(e,t,n,i){let o=!1,r=this.beans.rowModel.rootNode?._leafs;if(!e.size||!r)return!1;let s=t;for(let l=t;l<n;++l){let c=r[l];e.has(c)||(c.sourceRowIndex!==s&&(c.sourceRowIndex=s,r[s]=c,o=!0),++s)}let a=i;for(let l=i;l>=n;--l){let c=r[l];e.has(c)||(c.sourceRowIndex!==a&&(c.sourceRowIndex=a,r[a]=c,o=!0),--a)}for(let l of e)l.sourceRowIndex!==s&&(l.sourceRowIndex=s,r[s]=l,o=!0),++s;return o}},qk=(e,t,n)=>{if(n){let i=e.getRowCount(),o=n.rowIndex+t;for(;o>=0&&o<i;){let r=e.getRow(o);if(!r||!r.footer&&!r.detail)return r;o+=t}}},sAe=(e,t)=>{let n=t;for(;n;){if(n===e)return!0;n=n.parent}return!1},aee=(e,t)=>{for(let n=0,i=e.length;n<i;++n)if(e[n].parent!==t)return!1;return!0},lee=e=>{let t=T4(e);return t!==void 0?t.sourceRowIndex:-1},T4=e=>e.data?e:une(e.childrenAfterGroup),aAe=(e,t)=>e!==t&&(!e||e.sameGrid!==t.sameGrid||e.allowed!==t.allowed||e.position!==t.position||e.target!==t.target||e.source!==t.source||e.newParent!==t.newParent||!yu(e.rows,t.rows)),lAe=({rowIndex:e},{rowIndex:t})=>e!==null&&t!==null?e-t:0,cee=(e,t)=>{for(let n=0,i=e?.length||0;n<i;++n){let o=e[n];o.dragging!==t&&(o.dragging=t,o.dispatchRowEvent("draggingChanged"))}},cAe=(e,t)=>{let n=null,i=t.target;if(i&&t.rows.indexOf(i)<0)return null;let o=t.source;if(!i||!o)return null;let r=i.rowIndex-o.rowIndex,s=r<0?-1:1;r=t.suppressMoveWhenRowDragging?Math.abs(r):1;let a=new Set(t.rows);do{let l=qk(e,s,i);if(!l)break;a.has(l)||(n=l,--r),i=l}while(r>0);return n},dAe=class extends te{constructor(){super(...arguments),this.beanName="rowDragSvc"}setupRowDrag(e,t){let n=t.createManagedBean(new rAe(e)),i=this.beans.dragAndDrop;i.addDropTarget(n),t.addDestroyFunc(()=>i.removeDropTarget(n)),this.rowDragFeature=n}createRowDragComp(e,t,n,i,o,r){return new YPe(e,t,n,i,o,r)}createRowDragCompForRow(e,t){if(Qc(this.gos))return;let n=this.getLocaleTextFunc();return this.createRowDragComp(()=>`1 ${n("rowDragRow","row")}`,e,void 0,t,void 0,!0)}createRowDragCompForCell(e,t,n,i,o,r){let s=this.gos;return s.get("rowDragManaged")&&(!$i(s)||s.get("pagination"))?void 0:this.createRowDragComp(n,e,t,i,o,r)}},uAe=class extends te{constructor(){super(...arguments),this.beanName="rowDropHighlightSvc",this.uiLevel=0,this.dragging=!1,this.row=null,this.position="none"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this)})}onModelUpdated(){let e=this.row,t=this.dragging;!e||e?.rowIndex===null||this.position==="none"?this.clear():this.set(e,this.position),this.dragging=t}destroy(){this.clear(),super.destroy()}clear(){let e=this.row;this.dragging=!1,e&&(this.uiLevel=0,this.position="none",this.row=null,e.dispatchRowEvent("rowHighlightChanged"))}set(e,t){let n=e!==this.row,i=e.uiLevel,o=t!==this.position,r=i!==this.uiLevel;this.dragging=!1,(n||o||r)&&(n&&this.clear(),this.uiLevel=i,this.position=t,this.row=e,e.dispatchRowEvent("rowHighlightChanged"))}fromDrag(e){let t=e?.dropTarget;if(t){let{highlight:n,target:i,position:o}=t;if(n&&i&&o!=="none"){this.set(i,o),this.dragging=!0;return}}this.dragging&&this.clear()}},zne={moduleName:"Drag",version:we,beans:[qPe]},hAe={moduleName:"DragAndDrop",version:we,dynamicBeans:{dndSourceComp:HPe},icons:{rowDrag:"grip"}},Vne={moduleName:"SharedDragAndDrop",version:we,beans:[cRe],dependsOn:[zne],userComponents:{agDragAndDropImage:jTe},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}},pAe={moduleName:"RowDrag",version:we,beans:[uAe,dAe],apiFunctions:{addRowDropZone:$Pe,removeRowDropZone:jPe,getRowDropZoneParams:GPe,getRowDropPositionIndicator:UPe,setRowDropPositionIndicator:WPe},dependsOn:[Vne]},fAe={moduleName:"HorizontalResize",version:we,beans:[KPe],dependsOn:[zne]},mAe=":where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}",gAe=class extends te{constructor(){super(...arguments),this.beanName="colAnimation",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){if(this.active)return;let{gos:e}=this;e.get("suppressColumnMoveAnimation")||e.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;let e=this.animationThreadCount,{gridBodyCtrl:t}=this;t.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&t.setColumnMovingCss(!1)})}flush(e,t){let{executeNextFuncs:n,executeLaterFuncs:i}=this;if(n.length===0&&i.length===0){e(),t();return}let o=r=>{for(;r.length;){let s=r.pop();s&&s()}};this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e(),o(n)},0),window.setTimeout(()=>{t(),o(i)},200)})}};function vAe(e,t,n){e.colMoves?.moveColumnByIndex(t,n,"api")}function _Ae(e,t,n){e.colMoves?.moveColumns(t,n,"api")}var yAe=class extends te{constructor(e){super(),this.pinned=e,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;let t=e.dragItem.columns;if(t)for(let n of t)n.isPrimary()&&(n.isAnyFunctionActive()||(n.isAllowValue()?this.columnsToAggregate.push(n):n.isAllowRowGroup()?this.columnsToGroup.push(n):n.isAllowPivot()&&this.columnsToPivot.push(n)))}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){let{valueColsSvc:t,rowGroupColsSvc:n,pivotColsSvc:i}=this.beans;this.columnsToAggregate.length>0&&t?.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&n?.addColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&i?.addColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}};function bAe(e,t){!t||t.length<=1||t.filter(i=>e.indexOf(i)<0).length>0||t.sort((i,o)=>{let r=e.indexOf(i),s=e.indexOf(o);return r-s})}function CAe(e){let t=[...e];for(let n of e){let i=null,o=n.getParent();for(;o!=null&&o.getDisplayedLeafColumns().length===1;)i=o,o=o.getParent();if(i!=null){let s=!!i.getColGroupDef()?.marryChildren?i.getProvidedColumnGroup().getLeafColumns():i.getLeafColumns();for(let a of s)t.includes(a)||t.push(a)}}return t}function wAe(e,t,n,i){let o=i.allCols,r=null,s=null;for(let a=0;a<e.length;a++){let l=e[a],c=n.getProposedColumnOrder(t,l);if(!n.doesOrderPassRules(c))continue;let u=c.filter(f=>o.includes(f));if(s===null)s=u;else if(!yu(u,s))break;let h=SAe(c);(r===null||h<r.fragCount)&&(r={move:l,fragCount:h})}return r}function Hne(e){let{isFromHeader:t,fromLeft:n,xPosition:i,fromEnter:o,fakeEvent:r,pinned:s,gos:a,colModel:l,colMoves:c,visibleCols:u}=e,{allMovingColumns:h}=e;t&&(h=CAe(h));let f=h.slice();bAe(l.getCols(),f);let m=DAe({movingCols:f,draggingRight:n,xPosition:i,pinned:s,gos:a,colModel:l,visibleCols:u}),_=xAe(f,l);if(m.length===0)return;let y=m[0];if(_!==null&&(t||!o)&&!r&&(!n&&y>=_||n&&y<=_))return;let C=wAe(m,f,c,u);if(!C)return;let S=C.move;if(!(S>l.getCols().length-f.length))return{columns:f,toIndex:S}}function $ne(e){let{columns:t,toIndex:n}=Hne(e)||{},{finished:i,colMoves:o}=e;return!t||n==null?null:(o.moveColumns(t,n,"uiColumnMoved",i),i?null:{columns:t,toIndex:n})}function xAe(e,t){let n=t.getCols(),i=e.map(l=>n.indexOf(l)).sort((l,c)=>l-c),o=i[0];return Hn(i)-o!==i.length-1?null:o}function SAe(e){function t(i){let o=[],r=i.getOriginalParent();for(;r!=null;)o.push(r),r=r.getOriginalParent();return o}let n=0;for(let i=0;i<e.length-1;i++){let o=t(e[i]),r=t(e[i+1]);[o,r]=o.length>r.length?[o,r]:[r,o];for(let s of o)r.indexOf(s)===-1&&n++}return n}function EAe(e,t){switch(t){case"left":return e.leftCols;case"right":return e.rightCols;default:return e.centerCols}}function DAe(e){let{movingCols:t,draggingRight:n,xPosition:i,pinned:o,gos:r,colModel:s,visibleCols:a}=e;if(r.get("suppressMovableColumns")||t.some(I=>I.getColDef().suppressMovable))return[];let c=EAe(a,o),u=s.getCols(),h=c.filter(I=>t.includes(I)),f=c.filter(I=>!t.includes(I)),m=u.filter(I=>!t.includes(I)),_=0,y=i;if(n){let I=0;for(let O of h)I+=O.getActualWidth();y-=I}if(y>0){for(let I=0;I<f.length;I++){let O=f[I];if(y-=O.getActualWidth(),y<0)break;_++}n&&_++}let w;if(_>0){let I=f[_-1];w=m.indexOf(I)+1}else w=m.indexOf(f[0]),w===-1&&(w=0);let C=[w],S=(I,O)=>I-O;if(n){let I=w+1,O=u.length-1;for(;I<=O;)C.push(I),I++;C.sort(S)}else{let I=w,O=u.length-1,F=u[I];for(;I<=O&&c.indexOf(F)<0;)I++,C.push(I),F=u[I];I=w-1;let H=0;for(;I>=H;)C.push(I),I--;C.sort(S).reverse()}return C}function P4(e){let{pinned:t,fromKeyboard:n,gos:i,ctrlsSvc:o,useHeaderRow:r,skipScrollPadding:s}=e,a=o.getHeaderRowContainerCtrl(t)?.eViewport,{x:l}=e;return a?(n&&(l-=a.getBoundingClientRect().left),i.get("enableRtl")&&(r&&(a=a.querySelector(".ag-header-row")),l=a.clientWidth-l),t==null&&!s&&(l+=o.get("center").getCenterViewportScrollLeft()),l):0}function Qz(e,t){for(let n of e)n.moving=t,n.dispatchColEvent("movingChanged","uiColumnMoved")}var dee=7,A4=100,Lk=A4/2,kAe=5,IAe=100,MAe=class extends te{constructor(e){super(),this.pinned=e,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!Se(e)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){let{pinned:e,lastDraggingEvent:t}=this,{dragItem:n}=t||{},i=n?.columns??[];for(let o of i){let r=o.getPinned();if(o.getColDef().lockPinned){if(r==e)return"move";continue}let s=n?.containerType;if(s===e||!e)return"move";if(e&&(!r||s!==e))return"pinned"}return"notAllowed"}onDragEnter(e){let t=e.dragItem,n=t.columns;if(e.dragSource.type===0)this.setColumnsVisible(n,!0,"uiColumnDragged");else{let o=t.visibleState,r=(n||[]).filter(s=>o[s.getId()]&&!s.isVisible());this.setColumnsVisible(r,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(n,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,n=!1,i=!1){let{gos:o,ctrlsSvc:r}=this.beans,s=o.get("suppressMoveWhenColumnDragging");if(i&&!s){this.finishColumnMoving();return}if(this.lastDraggingEvent=e,!e||!i&&di(e.hDirection))return;let a=P4({x:e.x,pinned:this.pinned,gos:o,ctrlsSvc:r});t||this.checkCenterForScrolling(a),s?this.handleColumnDragWhileSuppressingMovement(e,t,n,a,i):this.handleColumnDragWhileAllowingMovement(e,t,n,a,i)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.updateDragItemContainerType(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,n){if(!e?.length)return;let i=e.filter(o=>!o.getColDef().lockVisible);i.length&&this.beans.colModel.setColsVisible(i,t,n)}finishColumnMoving(){this.clearHighlighted();let e=this.lastMovedInfo;if(!e)return;let{columns:t,toIndex:n}=e;this.beans.colMoves.moveColumns(t,n,"uiColumnMoved",!0)}updateDragItemContainerType(){let{lastDraggingEvent:e}=this;if(this.gos.get("suppressMoveWhenColumnDragging")||!e)return;let t=e.dragItem;t&&(t.containerType=this.pinned)}handleColumnDragWhileSuppressingMovement(e,t,n,i,o){let r=this.getAllMovingColumns(e,!0);if(o){let s=this.isAttemptingToPin(r);s&&this.attemptToPinColumns(r,void 0,!0);let{fromLeft:a,xPosition:l}=this.getNormalisedXPositionInfo(r,s)||{};if(a==null||l==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:r,xPosition:l,fromEnter:t,fakeEvent:n,fromLeft:a})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(r,i)}}handleColumnDragWhileAllowingMovement(e,t,n,i,o){let r=this.getAllMovingColumns(e),s=this.normaliseDirection(e.hDirection)==="right",a=e.dragSource.type===1,l=this.getMoveColumnParams({allMovingColumns:r,isFromHeader:a,xPosition:i,fromLeft:s,fromEnter:t,fakeEvent:n}),c=$ne(x(g({},l),{finished:o}));c&&(this.lastMovedInfo=c)}getAllMovingColumns(e,t=!1){let n=e.dragSource.getDragItem(),i=null;t?(i=n.columnsInSplit,i||(i=n.columns)):i=n.columns;let o=r=>r.getColDef().lockPinned?r.getPinned()==this.pinned:!0;return i?i.filter(o):[]}getMoveColumnParams(e){let{allMovingColumns:t,isFromHeader:n,xPosition:i,fromLeft:o,fromEnter:r,fakeEvent:s}=e,{gos:a,colModel:l,colMoves:c,visibleCols:u}=this.beans;return{allMovingColumns:t,isFromHeader:n,fromLeft:o,xPosition:i,pinned:this.pinned,fromEnter:r,fakeEvent:s,gos:a,colModel:l,colMoves:c,visibleCols:u}}highlightHoveredColumn(e,t){let{gos:n,colModel:i}=this.beans,o=n.get("enableRtl"),r=i.getCols().filter(u=>u.isVisible()&&u.getPinned()===this.pinned),s=null,a=null,l=null;for(let u of r){if(a=u.getActualWidth(),s=this.getNormalisedColumnLeft(u,0,o),s!=null){let h=s+a;if(s<=t&&h>=t){l=u;break}}s=null,a=null}if(l)e.indexOf(l)!==-1&&(l=null);else{for(let u=r.length-1;u>=0;u--){let h=r[u],f=r[u].getParent();if(!f){l=h;break}let m=f?.getDisplayedLeafColumns();if(m.length){l=Hn(m);break}}if(!l)return;s=this.getNormalisedColumnLeft(l,0,o),a=l.getActualWidth()}if(this.lastHighlightedColumn?.column!==l&&this.clearHighlighted(),l==null||s==null||a==null)return;let c;t-s<a/2!==o?c=0:c=1,uee(l,c),this.lastHighlightedColumn={column:l,position:c}}getNormalisedXPositionInfo(e,t){let{gos:n,visibleCols:i}=this.beans,o=n.get("enableRtl"),{firstMovingCol:r,column:s,position:a}=this.getColumnMoveAndTargetInfo(e,t,o);if(!r||!s||a==null)return;let l=i.allCols,c=l.indexOf(r),u=l.indexOf(s),h=a===0!==o,f=c<u||c===u&&!h,m=0;if(h?f&&(m-=1):f||(m+=1),u+m===c)return;let _=l[u+m];if(!_)return;let y=this.getNormalisedColumnLeft(_,20,o);return{fromLeft:f,xPosition:y}}getColumnMoveAndTargetInfo(e,t,n){let i=this.lastHighlightedColumn||{},{firstMovingCol:o,lastMovingCol:r}=RAe(e);if(!o||!r||i.column||!t)return g({firstMovingCol:o},i);let a=this.getPinDirection()==="left";return{firstMovingCol:o,position:a?1:0,column:a!==n?o:r}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case"left":return"right";case"right":return"left"}return e}getNormalisedColumnLeft(e,t,n){let{gos:i,ctrlsSvc:o}=this.beans,r=e.getLeft();if(r==null)return null;let s=e.getActualWidth();return P4({x:n?r+s-t:r+t,pinned:e.getPinned(),useHeaderRow:n,skipScrollPadding:!0,gos:i,ctrlsSvc:o})}isAttemptingToPin(e){let t=this.needToMoveLeft||this.needToMoveRight,n=this.failedMoveAttempts>dee;return t&&n||e.some(i=>i.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){let{allMovingColumns:t,xPosition:n,fromEnter:i,fakeEvent:o,fromLeft:r}=e,s=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:n,fromLeft:r,fromEnter:i,fakeEvent:o}),{columns:a,toIndex:l}=Hne(s)||{};a&&l!=null&&(this.lastMovedInfo={columns:a,toIndex:l}),this.finishColumnMoving()}clearHighlighted(){let{lastHighlightedColumn:e}=this;e&&(uee(e.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;let t=this.beans.ctrlsSvc.get("center"),n=t.getCenterViewportScrollLeft(),i=n+t.getCenterWidth(),o,r;this.gos.get("enableRtl")?(o=e<n+Lk,r=e>i-Lk):(r=e<n+Lk,o=e>i-Lk),this.needToMoveRight=o,this.needToMoveLeft=r,r||o?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),IAe),this.beans.dragAndDrop.setDragImageCompIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.beans.dragAndDrop.setDragImageCompIcon(this.getIconName()))}moveInterval(){let e;this.intervalCount++,e=10+this.intervalCount*kAe,e>A4&&(e=A4);let t=null,n=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?t=n.scrollHorizontally(-e):this.needToMoveRight&&(t=n.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;let{pinnedCols:i,dragAndDrop:o,gos:r}=this.beans;if(this.failedMoveAttempts<=dee+1||!i)return;if(o.setDragImageCompIcon("pinned"),!r.get("suppressMoveWhenColumnDragging")){let s=this.lastDraggingEvent?.dragItem.columns;this.attemptToPinColumns(s,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(e,t,n=!1){let i=(e||[]).filter(s=>!s.getColDef().lockPinned);if(!i.length)return 0;n&&(t=this.getPinDirection());let{pinnedCols:o,dragAndDrop:r}=this.beans;return o?.setColsPinned(i,t,"uiColumnDragged"),n&&r.nudge(),i.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}};function uee(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchColEvent("headerHighlightChanged","uiColumnMoved"))}function RAe(e){let t=e.length,n,i;for(let o=0;o<t;o++){if(!n){let r=e[o];r.getLeft()!=null&&(n=r)}if(!i){let r=e[t-1-o];r.getLeft()!=null&&(i=r)}if(n&&i)break}return{firstMovingCol:n,lastMovingCol:i}}var TAe=class extends te{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){let{ctrlsSvc:e,dragAndDrop:t}=this.beans,n=this.pinned;e.whenReady(this,i=>{let o,r=i.gridBodyCtrl.eBodyViewport;switch(n){case"left":o=[[r,i.left.eContainer],[i.bottomLeft.eContainer],[i.topLeft.eContainer]];break;case"right":o=[[r,i.right.eContainer],[i.bottomRight.eContainer],[i.topRight.eContainer]];break;default:o=[[r,i.center.eViewport],[i.bottomCenter.eViewport],[i.topCenter.eViewport]];break}this.eSecondaryContainers=o}),this.moveColumnFeature=this.createManagedBean(new MAe(n)),this.bodyDropPivotTarget=this.createManagedBean(new yAe(n)),t.addDropTarget(this),this.addDestroyFunc(()=>t.removeDropTarget(this))}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.beans.colModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},PAe=class extends te{constructor(){super(...arguments),this.beanName="colMoves"}moveColumnByIndex(e,t,n){let i=this.beans.colModel.getCols();if(!i)return;let o=i[e];this.moveColumns([o],t,n)}moveColumns(e,t,n,i=!0){let{colModel:o,colAnimation:r,visibleCols:s,eventSvc:a}=this.beans,l=o.getCols();if(!l)return;if(t>l.length-e.length){ce(30,{toIndex:t});return}r?.start();let c=o.getColsForKeys(e);this.doesMovePassRules(c,t)&&(MX(o.getCols(),c,t),s.refresh(n),a.dispatchEvent({type:"columnMoved",columns:c,column:c.length===1?c[0]:null,toIndex:t,finished:i,source:n})),r?.finish()}doesMovePassRules(e,t){let n=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(n)}doesOrderPassRules(e){let{colModel:t,gos:n}=this.beans;return!(!Ote(e,t.getColTree())||!(o=>{let r=c=>c?c==="left"||c===!0?-1:1:0,s=n.get("enableRtl"),a=s?1:-1,l=!0;for(let c of o){let u=r(c.getColDef().lockPosition);s?u>a&&(l=!1):u<a&&(l=!1),a=u}return l})(e))}getProposedColumnOrder(e,t){let i=this.beans.colModel.getCols().slice();return MX(i,e,t),i}createBodyDropTarget(e,t){return new TAe(e,t)}moveHeader(e,t,n,i,o){let{ctrlsSvc:r,gos:s,colModel:a,visibleCols:l,focusSvc:c}=this.beans,u=t.getBoundingClientRect(),h=u.left,f=Hi(n),m=f?u.width:n.getActualWidth(),_=e==="left"!==s.get("enableRtl"),y=P4({x:_?h-20:h+m+20,pinned:i,fromKeyboard:!0,gos:s,ctrlsSvc:r}),w=c.focusedHeader;$ne({allMovingColumns:f?n.getLeafColumns():[n],isFromHeader:!0,fromLeft:e==="right",xPosition:y,pinned:i,fromEnter:!1,fakeEvent:!1,gos:s,colModel:a,colMoves:this,visibleCols:l,finished:!0});let C;if(f){let S=n.getDisplayedLeafColumns();C=_?S[0]:Hn(S)}else C=n;if(r.getScrollFeature().ensureColumnVisible(C,"auto"),(!o.isAlive()||s.get("ensureDomOrder"))&&w){let S;if(f){let I=n.getGroupId(),O=n.getLeafColumns();if(!O.length)return;let F=O[0].getParent();if(!F)return;S=AAe(F,I)}else S=n;S&&c.focusHeaderPosition({headerPosition:x(g({},w),{column:S})})}}setDragSourceForHeader(e,t,n){let{gos:i,colModel:o,dragAndDrop:r,visibleCols:s}=this.beans,a=!i.get("suppressDragLeaveHidesColumns"),l=Hi(t),c=l?t.getProvidedColumnGroup().getLeafColumns():[t],h={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:l?()=>FAe(t,s.allCols):()=>OAe(t),dragItemName:n,onDragStarted:()=>{a=!i.get("suppressDragLeaveHidesColumns"),Qz(c,!0)},onDragStopped:()=>Qz(c,!1),onDragCancelled:()=>Qz(c,!1),onGridEnter:f=>{if(a){let{columns:m=[],visibleState:_}=f??{},y=l?C=>!_||_[C.getColId()]:()=>!0,w=m.filter(C=>!C.getColDef().lockVisible&&y(C));o.setColsVisible(w,!0,"uiColumnMoved")}},onGridExit:f=>{if(a){let m=f?.columns?.filter(_=>!_.getColDef().lockVisible)||[];o.setColsVisible(m,!1,"uiColumnMoved")}}};return r.addDragSource(h,!0),h}};function AAe(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}}function OAe(e){let t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t,containerType:e.pinned}}function FAe(e,t){let n=e.getProvidedColumnGroup().getLeafColumns(),i={};for(let a of n)i[a.getId()]=a.isVisible();let o=[];for(let a of t)n.indexOf(a)>=0&&(o.push(a),Ba(n,a));for(let a of n)o.push(a);let r=[],s=e.getLeafColumns();for(let a of o)s.indexOf(a)!==-1&&r.push(a);return{columns:o,columnsInSplit:r,visibleState:i,containerType:r[0]?.pinned}}var LAe={moduleName:"ColumnMove",version:we,beans:[PAe,gAe],apiFunctions:{moveColumnByIndex:vAe,moveColumns:_Ae},dependsOn:[Vne],css:[mAe]},NAe=class extends te{constructor(){super(...arguments),this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){let n=this.getHeaderCellForColumn(e);if(!n)return-1;let i=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(e);return t||i.push(n),this.getPreferredWidthForElements(i)}getPreferredWidthForColumnGroup(e){let t=this.getHeaderCellForColumn(e);return t?this.getPreferredWidthForElements([t]):-1}getPreferredWidthForElements(e,t){let n=document.createElement("form");n.style.position="fixed";let i=this.centerRowContainerCtrl.eContainer;for(let r of e)this.cloneItemIntoDummy(r,n);i.appendChild(n);let o=n.offsetWidth;return n.remove(),t=t??this.gos.get("autoSizePadding"),o+t}getHeaderCellForColumn(e){let t=null;for(let n of this.beans.ctrlsSvc.getHeaderRowContainerCtrls()){let i=n.getHtmlElementForColumnHeader(e);i!=null&&(t=i)}return t}cloneItemIntoDummy(e,t){let n=e.cloneNode(!0);n.style.width="",n.style.position="static",n.style.left="";let i=document.createElement("div"),o=i.classList;["ag-header-cell","ag-header-group-cell"].some(a=>n.classList.contains(a))?(o.add("ag-header","ag-header-row"),i.style.position="static"):o.add("ag-row");let s=e.parentElement;for(;s;){if(["ag-header-row","ag-row"].some(l=>s.classList.contains(l))){for(let l=0;l<s.classList.length;l++){let c=s.classList[l];c!="ag-row-position-absolute"&&o.add(c)}break}s=s.parentElement}i.appendChild(n),t.appendChild(i)}},jne={moduleName:"AutoWidth",version:we,beans:[NAe]};function BAe(e,t,n=!0,i="api"){e.colResize?.setColumnWidths(t,!1,n,i)}var zAe=class extends te{constructor(e,t,n,i){super(),this.comp=e,this.eResize=t,this.pinned=n,this.columnGroup=i}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}let{horizontalResizeSvc:e,gos:t,colAutosize:n}=this.beans,i=e.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(i),!t.get("suppressAutoSize")&&n&&this.addDestroyFunc(n.addColumnGroupResize(this.eResize,this.columnGroup,()=>this.resizeLeafColumnsToFit("uiColumnResized")))}onResizeStart(e){let{columnsToResize:t,resizeStartWidth:n,resizeRatios:i,groupAfterColumns:o,groupAfterStartWidth:r,groupAfterRatios:s}=this.getInitialValues(e);this.resizeCols=t,this.resizeStartWidth=n,this.resizeRatios=i,this.resizeTakeFromCols=o,this.resizeTakeFromStartWidth=r,this.resizeTakeFromRatios=s,this.toggleColumnResizing(!0)}onResizing(e,t,n="uiColumnResized"){let i=this.normaliseDragChange(t),o=this.resizeStartWidth+i;this.resizeColumnsFromLocalValues(o,n,e)}getInitialValues(e){let t=l=>l.reduce((c,u)=>c+u.getActualWidth(),0),n=(l,c)=>l.map(u=>u.getActualWidth()/c),i=this.getColumnsToResize(),o=t(i),r=n(i,o),s={columnsToResize:i,resizeStartWidth:o,resizeRatios:r},a=null;if(e&&(a=this.beans.colGroupSvc?.getGroupAtDirection(this.columnGroup,"After")??null),a){let l=a.getDisplayedLeafColumns(),c=s.groupAfterColumns=l.filter(h=>h.isResizable()),u=s.groupAfterStartWidth=t(c);s.groupAfterRatios=n(c,u)}else s.groupAfterColumns=void 0,s.groupAfterStartWidth=void 0,s.groupAfterRatios=void 0;return s}resizeLeafColumnsToFit(e){let t=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),n=this.getInitialValues();t>n.resizeStartWidth&&this.resizeColumns(n,t,e,!0)}resizeColumnsFromLocalValues(e,t,n=!0){if(!this.resizeCols||!this.resizeRatios)return;let i={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(i,e,t,n)}resizeColumns(e,t,n,i=!0){let{columnsToResize:o,resizeStartWidth:r,resizeRatios:s,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:c}=e,u=[];if(u.push({columns:o,ratios:s,width:t}),a){let h=t-r;u.push({columns:a,ratios:c,width:l-h})}this.beans.colResize?.resizeColumnSets({resizeSets:u,finished:i,source:n}),i&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.toggleCss("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}},VAe=class extends te{constructor(e,t,n,i,o){super(),this.pinned=e,this.column=t,this.eResize=n,this.comp=i,this.ctrl=o}postConstruct(){let e=[],t,n,i=()=>{if(ci(this.eResize,t),!t)return;let{horizontalResizeSvc:s,colAutosize:a}=this.beans,l=s.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});e.push(l),n&&a&&e.push(a.addColumnAutosizeListeners(this.eResize,this.column))},o=()=>{for(let s of e)s();e.length=0},r=()=>{let s=this.column.isResizable(),a=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(s!==t||a!==n)&&(t=s,n=a,o(),i())};r(),this.addDestroyFunc(o),this.ctrl.setRefreshFunction("resize",r)}onResizing(e,t){let{column:n,lastResizeAmount:i,resizeStartWidth:o,beans:r}=this,s=this.normaliseResizeAmount(t),a=o+s,l=[{key:n,newWidth:a}],{pinnedCols:c,ctrlsSvc:u,colResize:h}=r;if(this.column.getPinned()){let f=c?.leftWidth??0,m=c?.rightWidth??0,_=lw(u.getGridBodyCtrl().eBodyViewport)-50;if(f+m+(s-i)>_)return}this.lastResizeAmount=s,h?.setColumnWidths(l,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.column.resizing=e,this.comp.toggleCss("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e,n=this.pinned!=="left",i=this.pinned==="right";return this.gos.get("enableRtl")?n&&(t*=-1):i&&(t*=-1),t}},HAe=class extends te{constructor(){super(...arguments),this.beanName="colResize"}setColumnWidths(e,t,n,i){let o=[],{colModel:r,gos:s,visibleCols:a}=this.beans;for(let l of e){let c=r.getColDefCol(l.key)||r.getCol(l.key);if(!c)continue;if(o.push({width:l.newWidth,ratios:[1],columns:[c]}),s.get("colResizeDefault")==="shift"&&(t=!t),t){let h=a.getColAfter(c);if(!h)continue;let f=c.getActualWidth()-l.newWidth,m=h.getActualWidth()+f;o.push({width:m,ratios:[1],columns:[h]})}}o.length!==0&&this.resizeColumnSets({resizeSets:o,finished:n,source:i})}resizeColumnSets(e){let{resizeSets:t,finished:n,source:i}=e;if(!(!t||t.every(u=>$Ae(u)))){if(n){let u=t&&t.length>0?t[0].columns:null;Ug(this.eventSvc,u,n,i)}return}let r=[],s=[];for(let u of t){let{width:h,columns:f,ratios:m}=u,_={},y={};for(let S of f)s.push(S);let w=!0,C=0;for(;w;){if(C++,C>1e3){On(31);break}w=!1;let S=[],I=0,O=h;f.forEach((H,j)=>{if(y[H.getId()])O-=_[H.getId()];else{S.push(H);let ae=m[j];I+=ae}});let F=1/I;S.forEach((H,j)=>{let re=j===S.length-1,ae;re?ae=O:(ae=Math.round(m[j]*h*F),O-=ae);let se=H.getMinWidth(),Te=H.getMaxWidth();ae<se?(ae=se,y[H.getId()]=!0,w=!0):Te>0&&ae>Te&&(ae=Te,y[H.getId()]=!0,w=!0),_[H.getId()]=ae})}for(let S of f){let I=_[S.getId()];S.getActualWidth()!==I&&(S.setActualWidth(I,i),r.push(S))}}let a=r.length>0,l=[];if(a){let{colFlex:u,visibleCols:h,colViewport:f}=this.beans;l=u?.refreshFlexedColumns({resizingCols:s,skipSetLeft:!0})??[],h.setLeftValues(i),h.updateBodyWidths(),f.checkViewportColumns()}let c=s.concat(l);(a||n)&&Ug(this.eventSvc,c,n,i,l)}resizeHeader(e,t,n){if(!e.isResizable())return;let i=e.getActualWidth(),o=e.getMinWidth(),r=e.getMaxWidth(),s=Math.min(Math.max(i+t,o),r);this.setColumnWidths([{key:e,newWidth:s}],n,!0,"uiColumnResized")}createResizeFeature(e,t,n,i,o){return new VAe(e,t,n,i,o)}createGroupResizeFeature(e,t,n,i){return new zAe(e,t,n,i)}};function $Ae(e){let{columns:t,width:n}=e,i=0,o=0,r=!0;for(let l of t){let c=l.getMinWidth();i+=c||0;let u=l.getMaxWidth();u>0?o+=u:r=!1}let s=n>=i,a=!r||n<=o;return s&&a}var jAe={moduleName:"ColumnResize",version:we,beans:[HAe],apiFunctions:{setColumnWidths:BAe},dependsOn:[fAe,jne]},GAe=class extends te{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();let e=this.onWidthChanged.bind(this);for(let t of this.columnGroup.getLeafColumns())t.__addEventListener("widthChanged",e),t.__addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.__removeEventListener("widthChanged",e),t.__removeEventListener("visibleChanged",e)})}removeListenersOnChildrenColumns(){for(let e of this.removeChildListenersFuncs)e();this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){let e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.toggleCss("ag-hidden",e===0)}},UAe=class extends yV{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}wireComp(e,t,n,i,o){let{column:r,beans:s}=this,{context:a,colNames:l,colHover:c,rangeSvc:u,colResize:h}=s;this.comp=e,o=Cw(this,a,o),this.setGui(t,o),this.displayName=l.getDisplayNameForColumnGroup(r,"header"),this.refreshHeaderStyles(),this.addClasses(),this.setupMovingCss(o),this.setupExpandable(o),this.setupTooltip(),this.setupAutoHeight({wrapperElement:i,compBean:o}),this.setupUserComp(),this.addHeaderMouseListeners(o),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();let f=this.rowCtrl.pinned,m=r.getProvidedColumnGroup().getLeafColumns();c?.createHoverFeature(o,m,t),u?.createRangeHighlightFeature(o,r,e),o.createManagedBean(new _V(r,t,s)),o.createManagedBean(new GAe(e,r)),h?this.resizeFeature=o.createManagedBean(h.createGroupResizeFeature(e,n,f,r)):e.setResizableDisplayed(!1),o.createManagedBean(new Qg(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(o,m),o.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(o),o.addDestroyFunc(()=>this.clearComponent())}getHeaderClassParams(){let{column:e,beans:t}=this,n=e.getDefinition();return at(t.gos,{colDef:n,columnGroup:e,floatingFilter:!1})}refreshMaxHeaderHeight(){let{gos:e,comp:t}=this,n=e.get("groupHeaderHeight");n!=null?n===0?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(n):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(let n of t)e.addManagedListeners(n,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,n)})}onLeafColumnHighlightChanged(e){let t=this.column.getDisplayedLeafColumns(),n=t[0]===e,i=Hn(t)===e;if(!n&&!i)return;let o=e.getHighlighted(),r=!!this.rowCtrl.getHeaderCellCtrls().find(l=>l.column.isMoving()),s=!1,a=!1;if(r){let l=this.beans.gos.get("enableRtl"),c=o===1,u=o===0;n&&(l?a=c:s=u),i&&(l?s=u:a=c)}this.comp.toggleCss("ag-header-highlight-before",s),this.comp.toggleCss("ag-header-highlight-after",a)}resizeHeader(e,t){let{resizeFeature:n}=this;if(!n)return;let i=n.getInitialValues(t);n.resizeColumns(i,i.resizeStartWidth+e,"uiColumnResized",!0)}resizeLeafColumnsToFit(e){this.resizeFeature?.resizeLeafColumnsToFit(e)}setupUserComp(){let{colGroupSvc:e,userCompFactory:t,gos:n,enterpriseMenuFactory:i}=this.beans,o=this.column,r=o.getProvidedColumnGroup(),s=at(n,{displayName:this.displayName,columnGroup:o,setExpanded:l=>{e.setColumnGroupOpened(r,l,"gridInitializing")},setTooltip:(l,c)=>{n.assertModuleRegistered("Tooltip",3),this.setupTooltip(l,c)},showColumnMenu:(l,c)=>i?.showMenuAfterButtonClick(r,l,"columnMenu",c),showColumnMenuAfterMouseClick:(l,c)=>i?.showMenuAfterMouseEvent(r,l,"columnMenu",c),eGridHeader:this.eGui}),a=FIe(t,s);a&&this.comp.setUserCompDetails(a)}addHeaderMouseListeners(e){let t=o=>this.handleMouseOverChange(o.type==="mouseenter"),n=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),i=o=>this.handleContextMenuMouseEvent(o,void 0,this.column.getProvidedColumnGroup());e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:n,contextmenu:i})}handleMouseOverChange(e){this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderGroupTooltip(this.tooltipFeature,this,e,t)}setupExpandable(e){let t=this.column.getProvidedColumnGroup();this.refreshExpanded();let n=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:n,expandableChanged:n})}refreshExpanded(){let{column:e}=this;this.expandable=e.isExpandable();let t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0),this.refreshHeaderStyles()}addClasses(){let{column:e}=this,t=e.getColGroupDef(),n=Dne(t,this.gos,null,e);e.isPadding()?(n.push("ag-header-group-cell-no-group"),e.getLeafColumns().every(o=>o.isSpanHeaderHeight())&&n.push("ag-header-span-height")):(n.push("ag-header-group-cell-with-group"),t?.wrapHeaderText&&n.push("ag-header-cell-wrap-text"));for(let i of n)this.comp.toggleCss(i,!0)}setupMovingCss(e){let{column:t}=this,i=t.getProvidedColumnGroup().getLeafColumns(),o=()=>this.comp.toggleCss("ag-header-cell-moving",t.isMoving());for(let r of i)e.addManagedListeners(r,{movingChanged:o});o()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||this.focusThis()}handleKeyDown(e){super.handleKeyDown(e);let t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===W.ENTER){let n=this.column,i=!n.isExpanded();this.beans.colGroupSvc.setColumnGroupOpened(n.getProvidedColumnGroup(),i,"uiColumnExpanded")}}setDragSource(e){!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),e&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(e,this.column,this.displayName)??null))}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some(e=>e.getColDef().suppressMovable||e.getColDef().lockPosition)}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function WAe(e,t,n){e.colGroupSvc?.setColumnGroupOpened(t,n,"api")}function qAe(e,t,n){return e.colGroupSvc?.getColumnGroup(t,n)??null}function KAe(e,t){return e.colGroupSvc?.getProvidedColGroup(t)??null}function ZAe(e,t,n){return e.colNames.getDisplayNameForColumnGroup(t,n)||""}function YAe(e){return e.colGroupSvc?.getColumnGroupState()??[]}function QAe(e,t){e.colGroupSvc?.setColumnGroupState(t,"api")}function JAe(e){e.colGroupSvc?.resetColumnGroupState("api")}function XAe(e){return e.visibleCols.treeLeft}function eOe(e){return e.visibleCols.treeCenter}function tOe(e){return e.visibleCols.treeRight}function nOe(e){return e.visibleCols.getAllTrees()}function iOe(e,t){for(let n=0;n<t.length;n++){let i=e.indexOf(t[n]);i>=0&&(e[i]=e[e.length-1],e.pop())}}var oOe=class extends te{constructor(){super(...arguments),this.beanName="visibleCols",this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.headerGroupRowCount=0,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(e,t=!1){let{colFlex:n,colModel:i,colGroupSvc:o,colViewport:r,selectionColSvc:s}=this.beans;t||this.buildTrees(i,o),o?.updateOpenClosedVisibility(),this.leftCols=Jz(this.treeLeft),this.centerCols=Jz(this.treeCenter),this.rightCols=Jz(this.treeRight),s?.refreshVisibility(this.leftCols,this.centerCols,this.rightCols),this.joinColsAriaOrder(i),this.joinCols(),this.headerGroupRowCount=this.getHeaderRowCount(),this.setLeftValues(e),this.autoHeightCols=this.allCols.filter(a=>a.isAutoHeight()),n?.refreshFlexedColumns(),this.updateBodyWidths(),this.setFirstRightAndLastLeftPinned(i,this.leftCols,this.rightCols,e),r.checkViewportColumns(!1),this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source:e})}getHeaderRowCount(){if(!this.gos.get("hidePaddedHeaderRows"))return this.beans.colModel.cols.treeDepth;let e=0;for(let t of this.allCols){let n=t.getParent();for(;n;){if(!n.isPadding()){let i=n.getProvidedColumnGroup().getLevel()+1;i>e&&(e=i);break}n=n.getParent()}}return e}updateBodyWidths(){let e=Gc(this.centerCols),t=Gc(this.leftCols),n=Gc(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==n)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=n,this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e,t,n,i){let o,r;this.gos.get("enableRtl")?(o=t?t[0]:null,r=n?Hn(n):null):(o=t?Hn(t):null,r=n?n[0]:null);for(let s of e.getCols())s.setLastLeftPinned(s===o,i),s.setFirstRightPinned(s===r,i)}buildTrees(e,t){let n=e.getColsToShow(),i=n.filter(l=>l.getPinned()=="left"),o=n.filter(l=>l.getPinned()=="right"),r=n.filter(l=>l.getPinned()!="left"&&l.getPinned()!="right"),s=new zte,a=l=>t?t.createColumnGroups(l):l.columns;this.treeLeft=a({columns:i,idCreator:s,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=a({columns:o,idCreator:s,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=a({columns:r,idCreator:s,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(e){let t=e.getCols(),n=[],i=[],o=[];for(let r of t){let s=r.getPinned();s?s===!0||s==="left"?n.push(r):o.push(r):i.push(r)}this.ariaOrderColumns=n.concat(i).concat(o)}getAriaColIndex(e){let t;return Hi(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}setLeftValuesOfGroups(){for(let e of[this.treeLeft,this.treeRight,this.treeCenter])for(let t of e)Hi(t)&&t.checkLeft()}setLeftValuesOfCols(e){let{colModel:t}=this.beans;if(!t.getColDefCols())return;let i=t.getCols().slice(0),o=this.gos.get("enableRtl");for(let r of[this.leftCols,this.rightCols,this.centerCols]){if(o){let s=Gc(r);for(let a of r)s-=a.getActualWidth(),a.setLeft(s,e)}else{let s=0;for(let a of r)a.setLeft(s,e),s+=a.getActualWidth()}iOe(i,r)}for(let r of i)r.setLeft(null,e)}joinCols(){this.gos.get("enableRtl")?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(e){return this.allCols.indexOf(e)>=0}getLeftColsForRow(e){let{leftCols:t,beans:{colModel:n}}=this;return n.colSpanActive?this.getColsForRow(e,t):t}getRightColsForRow(e){let{rightCols:t,beans:{colModel:n}}=this;return n.colSpanActive?this.getColsForRow(e,t):t}getColsForRow(e,t,n,i){let o=[],r=null;for(let s=0;s<t.length;s++){let a=t[s],l=t.length-s,c=Math.min(a.getColSpan(e),l),u=[a];if(c>1){let f=c-1;for(let m=1;m<=f;m++)u.push(t[s+m]);s+=f}let h;if(n){h=!1;for(let f of u)n(f)&&(h=!0)}else h=!0;h&&(o.length===0&&r&&(i&&i(a))&&o.push(r),o.push(a)),r=a}return o}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(e){let t=this.allCols,n=t.indexOf(e);return n>0?t[n-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};let e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};yp(this.treeCenter,!1,e),yp(this.treeLeft,!1,e),yp(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}getFirstColumn(){let e=this.gos.get("enableRtl"),t=["leftCols","centerCols","rightCols"];e&&t.reverse();for(let n=0;n<t.length;n++){let i=this[t[n]];if(i.length)return e?Hn(i):i[0]}return null}getColAfter(e){let t=this.allCols,n=t.indexOf(e);return n<t.length-1?t[n+1]:null}getColsLeftWidth(){return Gc(this.leftCols)}getDisplayedColumnsRightWidth(){return Gc(this.rightCols)}isColAtEdge(e,t){let n=this.allCols;if(!n.length)return!1;let i=t==="first",o;if(Hi(e)){let r=e.getDisplayedLeafColumns();if(!r.length)return!1;o=i?r[0]:Hn(r)}else o=e;return(i?n[0]:Hn(n))===o}};function yp(e,t,n){if(e)for(let i=0;i<e.length;i++){let o=e[i];if(Hi(o)){let r=t?o.getDisplayedChildren():o.getChildren();yp(r,t,n)}n(o)}}function Jz(e){let t=[];return yp(e,!0,n=>{gu(n)&&t.push(n)}),t}var rOe=class extends te{constructor(){super(...arguments),this.beanName="colGroupSvc"}getColumnGroupState(){let e=[],t=this.beans.colModel.getColTree();return Zc(null,t,n=>{ar(n)&&e.push({groupId:n.getGroupId(),open:n.isExpanded()})}),e}resetColumnGroupState(e){let t=this.beans.colModel.getColDefColTree();if(!t)return;let n=[];Zc(null,t,i=>{if(ar(i)){let o=i.getColGroupDef(),r={groupId:i.getGroupId(),open:o?o.openByDefault:void 0};n.push(r)}}),this.setColumnGroupState(n,e)}setColumnGroupState(e,t){let{colModel:n,colAnimation:i,visibleCols:o,eventSvc:r}=this.beans;if(!n.getColTree().length)return;i?.start();let a=[];for(let l of e){let c=l.groupId,u=l.open,h=this.getProvidedColGroup(c);h&&h.isExpanded()!==u&&(h.setExpanded(u),a.push(h))}o.refresh(t,!0),a.length&&r.dispatchEvent({type:"columnGroupOpened",columnGroup:a.length===1?a[0]:void 0,columnGroups:a}),i?.finish()}setColumnGroupOpened(e,t,n){let i;ar(e)?i=e.getId():i=e||"",this.setColumnGroupState([{groupId:i,open:t}],n)}getProvidedColGroup(e){let t=null;return Zc(null,this.beans.colModel.getColTree(),n=>{ar(n)&&n.getId()===e&&(t=n)}),t}getGroupAtDirection(e,t){let n=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),i=e.getDisplayedLeafColumns(),o=t==="After"?Hn(i):i[0],r=`getCol${t}`;for(;;){let s=this.beans.visibleCols[r](o);if(!s)return null;let a=this.getColGroupAtLevel(s,n);if(a!==e)return a}}getColGroupAtLevel(e,t){let n=e.getParent(),i,o;for(;i=n.getProvidedColumnGroup().getLevel(),o=n.getPaddingLevel(),!(i+o<=t);)n=n.getParent();return n}updateOpenClosedVisibility(){let e=this.beans.visibleCols.getAllTrees();yp(e,!1,t=>{Hi(t)&&t.calculateDisplayedColumns()})}getColumnGroup(e,t){if(!e)return null;if(Hi(e))return e;let n=this.beans.visibleCols.getAllTrees(),i=typeof t=="number",o=null;return yp(n,!1,r=>{if(Hi(r)){let s=r,a;i?a=e===s.getGroupId()&&t===s.getPartId():a=e===s.getGroupId(),a&&(o=s)}}),o}createColumnGroups(e){let{columns:t,idCreator:n,pinned:i,oldDisplayedGroups:o,isStandaloneStructure:r}=e,s=this.mapOldGroupsById(o),a=[],l=t;for(;l.length;){let c=l;l=[];let u=0,h=f=>{let m=u;u=f;let _=c[m],w=(Hi(_)?_.getProvidedColumnGroup():_).getOriginalParent();if(w==null){for(let S=m;S<f;S++)a.push(c[S]);return}let C=this.createColumnGroup(w,n,s,i,r);for(let S=m;S<f;S++)C.addChild(c[S]);l.push(C)};for(let f=1;f<c.length;f++){let m=c[f],y=(Hi(m)?m.getProvidedColumnGroup():m).getOriginalParent(),w=c[u],S=(Hi(w)?w.getProvidedColumnGroup():w).getOriginalParent();y!==S&&h(f)}u<c.length&&h(c.length)}return r||this.setupParentsIntoCols(a,null),a}createProvidedColumnGroup(e,t,n,i,o,r,s){let a=o.getUniqueKey(t.groupId||null,null),l=IX(this.beans,t,a),c=new $k(l,a,!1,n);this.createBean(c);let u=this.findExistingGroup(t,r);u&&r.splice(u.idx,1);let h=u?.group;h&&c.setExpanded(h.isExpanded());let f=Tte(this.beans,l.children,n+1,e,i,o,r,s);return c.setChildren(f),c}balanceColumnTree(e,t,n,i){let o=[];for(let r=0;r<e.length;r++){let s=e[r];if(ar(s)){let a=s,l=this.balanceColumnTree(a.getChildren(),t+1,n,i);a.setChildren(l),o.push(a)}else{let a,l;for(let c=t;c<n;c++){let u=i.getUniqueKey(null,null),h=IX(this.beans,null,u),f=new $k(h,u,!0,c);this.createBean(f),l&&l.setChildren([f]),l=f,a||(a=l)}if(a&&l)if(o.push(a),e.some(u=>ar(u))){l.setChildren([s]);continue}else{l.setChildren(e);break}o.push(s)}}return o}findDepth(e){let t=0,n=e;for(;n?.[0]&&ar(n[0]);)t++,n=n[0].getChildren();return t}findMaxDepth(e,t){let n=t;for(let i=0;i<e.length;i++){let o=e[i];if(ar(o)){let r=o,s=this.findMaxDepth(r.getChildren(),t+1);n<s&&(n=s)}}return n}balanceTreeForAutoCols(e,t){let n=[];for(let i of e){let o=i;for(let r=t-1;r>=0;r--){let s=new $k(null,`FAKE_PATH_${i.getId()}}_${r}`,!0,r);this.createBean(s),s.setChildren([o]),o.originalParent=s,o=s}t===0&&(i.originalParent=null),n.push(o)}return n}findExistingGroup(e,t){if(e.groupId!=null)for(let i=0;i<t.length;i++){let o=t[i];if(o.getColGroupDef()&&o.getId()===e.groupId)return{idx:i,group:o}}}createColumnGroup(e,t,n,i,o){let r=e.getGroupId(),s=t.getInstanceIdForKey(r),a=dne(r,s),l=n[a];return l&&l.getProvidedColumnGroup()!==e&&(l=null),Se(l)?l.reset():(l=new mw(e,r,s,i),o||this.createBean(l)),l}mapOldGroupsById(e){let t={},n=i=>{for(let o of i)if(Hi(o)){let r=o;t[o.getUniqueId()]=r,n(r.getChildren())}};return e&&n(e),t}setupParentsIntoCols(e,t){for(let n of e??[])if(n.parent!==t&&(this.beans.colViewport.colsWithinViewportHash=""),n.parent=t,Hi(n)){let i=n;this.setupParentsIntoCols(i.getChildren(),i)}}},sOe={moduleName:"ColumnGroup",version:we,dynamicBeans:{headerGroupCellCtrl:UAe},beans:[rOe],apiFunctions:{getAllDisplayedColumnGroups:nOe,getCenterDisplayedColumnGroups:eOe,getColumnGroup:qAe,getColumnGroupState:YAe,getDisplayNameForColumnGroup:ZAe,getLeftDisplayedColumnGroups:XAe,getProvidedColumnGroup:KAe,getRightDisplayedColumnGroups:tOe,resetColumnGroupState:JAe,setColumnGroupOpened:WAe,setColumnGroupState:QAe}},aOe={tag:"div",cls:"ag-skeleton-container"},lOe=class extends Mn{constructor(){super(aOe)}init(e){let t=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",t),this.addDestroyFunc(()=>sw(e.eParentOfValue)),sw(e.eParentOfValue,t),e.deferRender?this.setupLoading(e):e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){let e=this.getLocaleTextFunc();this.getGui().textContent=e("loadingError","ERR");let t=e("ariaSkeletonCellLoadingFailed","Row failed to load");jg(this.getGui(),t)}setupLoading(e){let t=ji({tag:"div",cls:"ag-skeleton-effect"}),n=e.node.rowIndex;if(n!=null){let r=75+25*(n%2===0?Math.sin(n):Math.cos(n));t.style.width=`${r}%`}this.getGui().appendChild(t);let i=this.getLocaleTextFunc(),o=e.deferRender?i("ariaDeferSkeletonCellLoading","Cell is loading"):i("ariaSkeletonCellLoading","Row data is loading");jg(this.getGui(),o)}refresh(e){return!1}},cOe={moduleName:"CheckboxCellRenderer",version:we,userComponents:{agCheckboxCellRenderer:WTe}},dOe={moduleName:"SkeletonCellRenderer",version:we,userComponents:{agSkeletonCellRenderer:lOe}};function uOe(e,t){let n=e.colModel.getColDefCol(t);return n?n.getColDef():null}function hOe(e){return e.colModel.getColumnDefs(!0)}function pOe(e,t,n){return e.colNames.getDisplayNameForColumn(t,n)||""}function fOe(e,t){return e.colModel.getColDefCol(t)}function mOe(e){return e.colModel.getColDefCols()}function gOe(e,t){return Na(e,t,"api")}function vOe(e){return lI(e)}function _Oe(e){sIe(e,"api")}function yOe(e){return e.visibleCols.isPinningLeft()||e.visibleCols.isPinningRight()}function bOe(e){return e.visibleCols.isPinningLeft()}function COe(e){return e.visibleCols.isPinningRight()}function wOe(e,t){return e.visibleCols.getColAfter(t)}function xOe(e,t){return e.visibleCols.getColBefore(t)}function SOe(e,t,n){e.colModel.setColsVisible(t,n,"api")}function EOe(e,t,n){e.pinnedCols?.setColsPinned(t,n,"api")}function DOe(e){return e.colModel.getCols()}function kOe(e){return e.visibleCols.leftCols}function IOe(e){return e.visibleCols.centerCols}function MOe(e){return e.visibleCols.rightCols}function ROe(e){return e.visibleCols.allCols}function TOe(e){return e.colViewport.getViewportColumns()}function O4(e,t){if(!e)return;let n=e,i={};for(let o of Object.keys(n)){if(t&&t.indexOf(o)>=0||rte.has(o))continue;let r=n[o];typeof r=="object"&&r!==null&&r.constructor===Object?i[o]=O4(r):i[o]=r}return i}var POe=class extends te{constructor(){super(...arguments),this.beanName="colDefFactory"}wireBeans(e){this.rowGroupColsSvc=e.rowGroupColsSvc,this.pivotColsSvc=e.pivotColsSvc}getColumnDefs(e,t,n,i,o=!1){let r=e.slice();t?r.sort((l,c)=>n.indexOf(l)-n.indexOf(c)):(n||o)&&r.sort((l,c)=>i.indexOf(l)-i.indexOf(c));let s=this.rowGroupColsSvc?.columns,a=this.pivotColsSvc?.columns;return this.buildColumnDefs(r,s,a)}buildColumnDefs(e,t=[],n=[]){let i=[],o={};for(let r of e){let s=this.createDefFromColumn(r,t,n),a=!0,l=s,c=r.getOriginalParent(),u=null;for(;c;){let h=null;if(c.isPadding()){c=c.getOriginalParent();continue}let f=o[c.getGroupId()];if(f){f.children.push(l),a=!1;break}if(h=this.createDefFromGroup(c),h&&(h.children=[l],o[h.groupId]=h,l=h,c=c.getOriginalParent()),c!=null&&u===c){a=!1;break}u=c}a&&i.push(l)}return i}createDefFromGroup(e){let t=O4(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,n){let i=O4(e.getColDef());return i.colId=e.getColId(),i.width=e.getActualWidth(),i.rowGroup=e.isRowGroupActive(),i.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,i.pivot=e.isPivotActive(),i.pivotIndex=e.isPivotActive()?n.indexOf(e):null,i.aggFunc=e.isValueActive()?e.getAggFunc():null,i.hide=e.isVisible()?void 0:!0,i.pinned=e.isPinned()?e.getPinned():null,i.sort=e.getSort()?e.getSort():null,i.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,i}},AOe=class extends te{constructor(){super(...arguments),this.beanName="colFlex",this.columnsHidden=!1}refreshFlexedColumns(e={}){let t=e.source??"flex";e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth);let n=this.flexViewportWidth,{visibleCols:i,colDelayRenderSvc:o}=this.beans,r=i.centerCols,s=-1;if(e.resizingCols){let y=new Set(e.resizingCols);for(let w=r.length-1;w>=0;w--)if(y.has(r[w])){s=w;break}}let a=!1,l=r.map((y,w)=>{let C=y.getFlex(),S=C!=null&&C>0&&w>s;return a||(a=S),{col:y,isFlex:S,flex:Math.max(0,C??0),initialSize:y.getActualWidth(),min:y.getMinWidth(),max:y.getMaxWidth(),targetSize:0}});if(a?(o?.hideColumns("colFlex"),this.columnsHidden=!0):this.columnsHidden&&this.revealColumns(o),!n||!a)return[];let c=l.length,u=l.reduce((y,w)=>y+w.flex,0),h=n,f=(y,w)=>{y.frozenSize=w,y.col.setActualWidth(w,t),h-=w,u-=y.flex,c-=1},m=y=>y.frozenSize!=null;for(let y of l)y.isFlex||f(y,y.initialSize);for(;c>0;){let y=Math.round(u<1?h*u:h),w,C=0,S=0;for(let F of l){if(m(F))continue;w=F,S+=y*(F.flex/u);let H=S-C,j=Math.round(H);F.targetSize=j,C+=j}w&&(w.targetSize+=y-C);let I=0;for(let F of l){if(m(F))continue;let H=F.targetSize,j=Math.min(Math.max(H,F.min),F.max);I+=j-H,F.violationType=j===H?void 0:j<H?"max":"min",F.targetSize=j}let O=I===0?"all":I>0?"min":"max";for(let F of l)m(F)||(O==="all"||F.violationType===O)&&f(F,F.targetSize)}e.skipSetLeft||i.setLeftValues(t),e.updateBodyWidths&&i.updateBodyWidths();let _=l.filter(y=>y.isFlex&&!y.violationType).map(y=>y.col);if(e.fireResizedEvent){let y=l.filter(C=>C.initialSize!==C.frozenSize).map(C=>C.col),w=l.filter(C=>C.flex).map(C=>C.col);Ug(this.eventSvc,y,!0,t,w)}return this.revealColumns(o),_}revealColumns(e){this.columnsHidden&&(e?.revealColumns("colFlex"),this.columnsHidden=!1)}initCol(e){let{flex:t,initialFlex:n}=e.colDef;t!==void 0?e.flex=t:n!==void 0&&(e.flex=n)}setColFlex(e,t){e.flex=t??null,e.dispatchStateUpdatedEvent("flex")}};function nw(e,t,n){if(!t||!e)return;if(!n)return e[t];let i=t.split("."),o=e;for(let r=0;r<i.length;r++){if(o==null)return;o=o[i[r]]}return o}var OOe=["dateTimeString","dateString","text","number","boolean","date"],FOe=class extends te{constructor(){super(...arguments),this.beanName="dataTypeSvc",this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[],this.columnDefinitionPropsPerDataType={number(){return{cellEditor:"agNumberCellEditor"}},boolean(){return{cellEditor:"agCheckboxCellEditor",cellRenderer:"agCheckboxCellRenderer",getFindText:()=>null,suppressKeyboardEvent:e=>!!e.colDef.editable&&e.event.key===W.SPACE}},date({formatValue:e}){return{cellEditor:"agDateCellEditor",keyCreator:e}},dateString({formatValue:e}){return{cellEditor:"agDateStringCellEditor",keyCreator:e}},dateTime(e){return this.date(e)},dateTimeString(e){return this.dateString(e)},object({formatValue:e,colModel:t,colId:n}){return{cellEditorParams:{useFormatter:!0},comparator:(i,o)=>{let r=t.getColDefCol(n),s=r?.getColDef();if(!r||!s)return 0;let a=i==null?"":e({column:r,node:null,value:i}),l=o==null?"":e({column:r,node:null,value:o});return a===l?0:a>l?1:-1},keyCreator:e}},text(){return{}}}}wireBeans(e){this.colModel=e.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(e)})}processDataTypeDefinitions(){let e=this.getDefaultDataTypes(),t={},n={},i=u=>h=>{let{column:f,node:m,value:_}=h,y=f.getColDef().valueFormatter;return y===u.groupSafeValueFormatter&&(y=u.valueFormatter),this.beans.valueSvc.formatValue(f,m,_,y)};for(let u of Object.keys(e)){let h=e[u],f=x(g({},h),{groupSafeValueFormatter:fee(h,this.gos)});t[u]=f,n[u]=i(f)}let o=this.gos.get("dataTypeDefinitions")??{},r={};for(let u of Object.keys(o)){let h=o[u],f=this.processDataTypeDefinition(h,o,[u],e);f&&(t[u]=f,h.dataTypeMatcher&&(r[u]=h.dataTypeMatcher),n[u]=i(f))}let{valueParser:s,valueFormatter:a}=e.object,{valueParser:l,valueFormatter:c}=t.object;this.hasObjectValueParser=l!==s,this.hasObjectValueFormatter=c!==a,this.formatValueFuncs=n,this.dataTypeDefinitions=t,this.dataTypeMatchers=this.sortKeysInMatchers(r,e)}sortKeysInMatchers(e,t){let n=g({},e);for(let i of OOe)delete n[i],n[i]=e[i]??t[i].dataTypeMatcher;return n}processDataTypeDefinition(e,t,n,i){let o,r=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let s=i[r],a=t[r];if(s&&a&&(s=a),!pee(e,s,r))return;o=hee(s,e)}else{if(n.includes(r)){ce(44);return}let s=t[r];if(!pee(e,s,r))return;let a=this.processDataTypeDefinition(s,t,[...n,r],i);if(!a)return;o=hee(a,e)}return x(g({},o),{groupSafeValueFormatter:fee(o,this.gos)})}updateColDefAndGetColumnType(e,t,n){let{cellDataType:i}=t,{field:o}=t;if(i===void 0&&(i=e.cellDataType),(i==null||i===!0)&&(i=this.canInferCellDataType(e,t)?this.inferCellDataType(o,n):!1),!i){e.cellDataType=!1;return}let r=this.dataTypeDefinitions[i];if(!r){ce(47,{cellDataType:i});return}return e.cellDataType=i,r.groupSafeValueFormatter&&(e.valueFormatter=r.groupSafeValueFormatter),r.valueParser&&(e.valueParser=r.valueParser),r.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,i,r,n),r.columnTypes}addColumnListeners(e){if(!this.isPendingInference)return;let t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;let n=i=>{t.add(i.key)};e.__addEventListener("columnStateUpdated",n),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.__removeEventListener("columnStateUpdated",n))}canInferCellDataType(e,t){let{gos:n}=this;if(!$i(n))return!1;let i={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(Xz(t,i))return!1;let o=t.type===null?e.type:t.type;if(o){let r=n.get("columnTypes")??{};if(aI(o).some(a=>{let l=r[a.trim()];return l&&Xz(l,i)}))return!1}return!Xz(e,i)}inferCellDataType(e,t){if(!e)return;let n,i=this.getInitialData();if(i){let r=e.includes(".")&&!this.gos.get("suppressFieldDotNotation");n=nw(i,e,r)}else this.initWaitForRowData(t);return n==null?void 0:Object.keys(this.dataTypeMatchers).find(r=>this.dataTypeMatchers[r](n))??"object"}getInitialData(){let e=this.gos.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;{let t=this.beans.rowModel.rootNode?._leafs;if(t?.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isPendingInference)return;this.isPendingInference=!0;let t=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize:n,eventSvc:i}=this.beans;t&&n&&(n.shouldQueueResizeOperations=!0);let[o]=this.addManagedEventListeners({rowDataUpdateStarted:r=>{let{firstRowData:s}=r;s&&(o?.(),this.isPendingInference=!1,this.processColumnsPendingInference(s,t),this.columnStateUpdatesPendingInference={},t&&n?.processResizeOperations(),i.dispatchEvent({type:"dataTypesInferred"}))}})}processColumnsPendingInference(e,t){this.initialData=e;let n=[];this.destroyColumnStateUpdateListeners();let i={},o={};for(let r of Object.keys(this.columnStateUpdatesPendingInference)){let s=this.columnStateUpdatesPendingInference[r],a=this.colModel.getCol(r);if(!a)return;let l=a.getColDef();if(!this.resetColDefIntoCol(a,"cellDataTypeInferred"))return;let c=a.getColDef();if(t&&c.type&&c.type!==l.type){let u=NOe(a,s);u.rowGroup&&u.rowGroupIndex==null&&(i[r]=u),u.pivot&&u.pivotIndex==null&&(o[r]=u),n.push(u)}}t&&n.push(...this.generateColumnStateForRowGroupAndPivotIndexes(i,o)),n.length&&Na(this.beans,{state:n},"cellDataTypeInferred"),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(e,t){let n={},{rowGroupColsSvc:i,pivotColsSvc:o}=this.beans;return i?.restoreColumnOrder(n,e),o?.restoreColumnOrder(n,t),Object.values(n)}resetColDefIntoCol(e,t){let n=e.getUserProvidedColDef();if(!n)return!1;let i=g4(this.beans,n,e.getColId());return e.setColDef(i,n,t),!0}getDateStringTypeDefinition(e){let{dateString:t}=this.dataTypeDefinitions;return e?this.getDataTypeDefinition(e)??t:t}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDateIncludesTimeFlag(e){return e==="dateTime"||e==="dateTimeString"}getDataTypeDefinition(e){let t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){return this.getDataTypeDefinition(e)?.baseDataType}checkType(e,t){if(t==null)return!0;let n=this.getDataTypeDefinition(e)?.dataTypeMatcher;return n?n(t):!0}validateColDef(e){let t=n=>ce(48,{property:n});if(e.cellDataType==="object"){let{object:n}=this.dataTypeDefinitions;e.valueFormatter===n.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&t("Formatter"),e.editable&&e.valueParser===n.valueParser&&!this.hasObjectValueParser&&t("Parser")}}postProcess(e){let t=e.cellDataType;if(!t||typeof t!="string")return;let{dataTypeDefinitions:n,beans:i,formatValueFuncs:o}=this,r=n[t];r&&i.colFilter?.setColDefPropsForDataType(e,r,o[t])}getFormatValue(e){return this.formatValueFuncs[e]}isColPendingInference(e){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[e]}setColDefPropertiesForBaseDataType(e,t,n,i){let o=this.formatValueFuncs[t],r=this.columnDefinitionPropsPerDataType[n.baseDataType]({colDef:e,cellDataType:t,colModel:this.colModel,dataTypeDefinition:n,colId:i,formatValue:o});Object.assign(e,r)}getDateObjectTypeDef(e){let t=this.getLocaleTextFunc(),n=this.getDateIncludesTimeFlag(e);return{baseDataType:e,valueParser:i=>Kr(i.newValue&&String(i.newValue)),valueFormatter:i=>i.value==null?"":!(i.value instanceof Date)||isNaN(i.value.getTime())?t("invalidDate","Invalid Date"):Es(i.value,n)??"",dataTypeMatcher:i=>i instanceof Date}}getDateStringTypeDef(e){let t=this.getDateIncludesTimeFlag(e);return{baseDataType:e,dateParser:n=>Kr(n)??void 0,dateFormatter:n=>Es(n??null,t)??void 0,valueParser:n=>jk(String(n.newValue))?n.newValue:null,valueFormatter:n=>jk(String(n.value))?String(n.value):"",dataTypeMatcher:n=>typeof n=="string"&&jk(n)}}getDefaultDataTypes(){let e=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:t=>t.newValue?.trim?.()===""?null:Number(t.newValue),valueFormatter:t=>t.value==null?"":typeof t.value!="number"||isNaN(t.value)?e("invalidNumber","Invalid Number"):String(t.value),dataTypeMatcher:t=>typeof t=="number"},text:{baseDataType:"text",valueParser:t=>t.newValue===""?null:l4(t.newValue),dataTypeMatcher:t=>typeof t=="string"},boolean:{baseDataType:"boolean",valueParser:t=>t.newValue==null?t.newValue:t.newValue?.trim?.()===""?null:String(t.newValue).toLowerCase()==="true",valueFormatter:t=>t.value==null?"":String(t.value),dataTypeMatcher:t=>typeof t=="boolean"},date:this.getDateObjectTypeDef("date"),dateString:this.getDateStringTypeDef("dateString"),dateTime:this.getDateObjectTypeDef("dateTime"),dateTimeString:x(g({},this.getDateStringTypeDef("dateTimeString")),{dataTypeMatcher:t=>typeof t=="string"&&JIe(t)}),object:{baseDataType:"object",valueParser:()=>null,valueFormatter:t=>l4(t.value)??""}}}destroyColumnStateUpdateListeners(){for(let e of this.columnStateUpdateListenerDestroyFuncs)e();this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}};function hee(e,t){let n=g(g({},e),t);return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(n.columnTypes=[...aI(e.columnTypes),...aI(t.columnTypes)]),n}function pee(e,t,n){return t?t.baseDataType!==e.baseDataType?(ce(46),!1):!0:(ce(45,{parentCellDataType:n}),!1)}function fee(e,t){if(e.valueFormatter)return n=>{if(n.node?.group){let i=(n.colDef.pivotValueColumn??n.column).getAggFunc();if(i){if(i==="first"||i==="last")return e.valueFormatter(n);if(e.baseDataType==="number"&&i!=="count"){if(typeof n.value=="number")return e.valueFormatter(n);if(typeof n.value=="object"){if(!n.value)return;if("toNumber"in n.value)return e.valueFormatter(x(g({},n),{value:n.value.toNumber()}));if("value"in n.value)return e.valueFormatter(x(g({},n),{value:n.value.value}))}}return}}else if(t.get("groupHideOpenParents")&&n.column.isRowGroupActive()&&typeof n.value=="string"&&!e.dataTypeMatcher?.(n.value))return;return e.valueFormatter(n)}}function LOe(e,t,n,i){if(!t[n])return!1;let o=e[n];return o===null?(t[n]=!1,!1):i===void 0?!!o:o===i}function Xz(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([n,i])=>LOe(e,t,n,i))}function NOe(e,t){let n=Bte(e);for(let i of t)delete n[i],i==="rowGroup"?delete n.rowGroupIndex:i==="pivot"&&delete n.pivotIndex;return n}var BOe={moduleName:"DataType",version:we,beans:[FOe],dependsOn:[cOe]},zOe={moduleName:"ColumnFlex",version:we,beans:[AOe]},Gne={moduleName:"ColumnApi",version:we,beans:[POe],apiFunctions:{getColumnDef:uOe,getDisplayNameForColumn:pOe,getColumn:fOe,getColumns:mOe,applyColumnState:gOe,getColumnState:vOe,resetColumnState:_Oe,isPinning:yOe,isPinningLeft:bOe,isPinningRight:COe,getDisplayedColAfter:wOe,getDisplayedColBefore:xOe,setColumnsVisible:SOe,setColumnsPinned:EOe,getAllGridColumns:DOe,getDisplayedLeftColumns:kOe,getDisplayedCenterColumns:IOe,getDisplayedRightColumns:MOe,getAllDisplayedColumns:ROe,getAllDisplayedVirtualColumns:TOe,getColumnDefs:hOe}};function VOe(e){if(!e||e==null)return null;let t=/([a-z])([A-Z])/g,n=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(n,"$1 $2$3").replace(/\./g," ").split(" ").map(o=>o.substring(0,1).toUpperCase()+(o.length>1?o.substring(1,o.length):"")).join(" ")}var HOe=class extends te{constructor(){super(...arguments),this.beanName="colNames"}getDisplayNameForColumn(e,t,n=!1){if(!e)return null;let i=this.getHeaderName(e.getColDef(),e,null,null,t),{aggColNameSvc:o}=this.beans;return n&&o?o.getHeaderName(e,i):i}getDisplayNameForProvidedColumnGroup(e,t,n){let i=t?.getColGroupDef();return i?this.getHeaderName(i,null,e,t,n):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,n,i,o){let r=e.headerValueGetter;if(r){let s=at(this.gos,{colDef:e,column:t,columnGroup:n,providedColumnGroup:i,location:o});return typeof r=="function"?r(s):typeof r=="string"?this.beans.expressionSvc?.evaluate(r,s)??null:""}else{if(e.headerName!=null)return e.headerName;if(e.field)return VOe(e.field)}return""}},$Oe=class extends te{constructor(){super(...arguments),this.beanName="colViewport",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.columnsToRenderLeft=[],this.columnsToRenderRight=[],this.columnsToRenderCenter=[]}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,n=!1){let{visibleCols:i}=this,o=i.isBodyWidthDirty;if(!(e===this.scrollWidth&&t===this.scrollPosition&&!o)){if(this.scrollWidth=e,this.scrollPosition=t,i.isBodyWidthDirty=!0,this.gos.get("enableRtl")){let s=i.bodyWidth;this.viewportLeft=s-t-e,this.viewportRight=s-t}else this.viewportLeft=t,this.viewportRight=e+t;this.colModel.ready&&this.checkViewportColumns(n)}}getColumnHeadersToRender(e){switch(e){case"left":return this.columnsToRenderLeft;case"right":return this.columnsToRenderRight;default:return this.columnsToRenderCenter}}getHeadersToRender(e,t){let n;switch(e){case"left":n=this.rowsOfHeadersToRenderLeft[t];break;case"right":n=this.rowsOfHeadersToRenderRight[t];break;default:n=this.rowsOfHeadersToRenderCenter[t];break}return n??[]}extractViewportColumns(){let e=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()||jOe(e)?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;let t=e.getLeft()||0,n=t+e.getActualWidth(),i=this.viewportLeft-200,o=this.viewportRight+200,r=t<i&&n<i,s=t>o&&n>o;return!r&&!s}getViewportColumns(){let{leftCols:e,rightCols:t}=this.visibleCols;return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.colModel.colSpanActive)return this.colsWithinViewport;let t=r=>{let s=r.getLeft();return Se(s)&&s>this.viewportLeft},n=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols:i}=this,o=i.centerCols;return i.getColsForRow(e,o,n,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}calculateHeaderRows(){let{leftCols:e,rightCols:t}=this.visibleCols;this.columnsToRenderLeft=e,this.columnsToRenderRight=t,this.columnsToRenderCenter=this.colsWithinViewport;let n=i=>{let o=new Set,r={};for(let s of i){let a=s.getParent(),l=s.isSpanHeaderHeight();for(;a&&!o.has(a);){if(l&&a.isPadding()){a=a.getParent();continue}let u=a.getProvidedColumnGroup().getLevel();r[u]??(r[u]=[]),r[u].push(a),o.add(a),a=a.getParent()}}return r};this.rowsOfHeadersToRenderLeft=n(e),this.rowsOfHeadersToRenderRight=n(t),this.rowsOfHeadersToRenderCenter=n(this.headerColsWithinViewport)}extractViewport(){let e=i=>`${i.getId()}-${i.getPinned()||"normal"}`;this.extractViewportColumns();let t=this.getViewportColumns().map(e).join("#"),n=this.colsWithinViewportHash!==t;return n&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),n}};function jOe(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}var GOe=class extends te{constructor(){super(...arguments),this.beanName="agCompUtils"}adaptFunction(e,t){if(!e.cellRenderer)return null;class n{refresh(){return!1}getGui(){return this.eGui}init(o){let r=t(o),s=typeof r;if(s==="string"||s==="number"||s==="boolean"){this.eGui=U4("<span>"+r+"</span>");return}if(r==null){this.eGui=ji({tag:"span"});return}this.eGui=r}}return n}},UOe={moduleName:"CellRendererFunction",version:we,beans:[GOe]},WOe=class extends ZMe{constructor(){super(...arguments),this.agGridDefaults={},this.agGridDefaultOverrides={},this.jsComps={},this.selectors={},this.icons={}}postConstruct(){let e=this.gos.get("components");if(e!=null)for(let t of Object.keys(e))this.jsComps[t]=e[t]}registerModule(e){let{icons:t,userComponents:n,dynamicBeans:i,selectors:o}=e;if(n){let r=(s,a,l,c)=>{this.agGridDefaults[s]=a,(l||c)&&(this.agGridDefaultOverrides[s]={params:l,processParams:c})};for(let s of Object.keys(n)){let a=n[s];if(qIe(a)&&(a=a.getComp(this.beans)),typeof a=="object"){let{classImp:l,params:c,processParams:u}=a;r(s,l,c,u)}else r(s,a)}}this.registerDynamicBeans(i);for(let r of o??[])this.selectors[r.selector]=r;if(t)for(let r of Object.keys(t))this.icons[r]=t[r]}getUserComponent(e,t){let n=(a,l,c,u)=>({componentFromFramework:l,component:a,params:c,processParams:u}),{frameworkOverrides:i}=this.beans,o=i.frameworkComponent(t,this.gos.get("components"));if(o!=null)return n(o,!0);let r=this.jsComps[t];if(r){let a=i.isFrameworkComponent(r);return n(r,a)}let s=this.agGridDefaults[t];if(s){let a=this.agGridDefaultOverrides[t];return n(s,!1,a?.params,a?.processParams)}return this.beans.validation?.missingUserComponent(e,t,this.agGridDefaults,this.jsComps),null}getSelector(e){return this.selectors[e]}getIcon(e){return this.icons[e]}getDynamicError(e,t){return t?Bl(279,{name:e}):this.beans.validation?.missingDynamicBean(e)??Bl(256)}},qOe=23,KOe=class extends te{constructor(){super(...arguments),this.beanName="ctrlsSvc",this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){this.addEventListener("ready",()=>{if(this.updateReady(),this.ready){for(let e of this.readyCallbacks)e(this.params);this.readyCallbacks.length=0}},this.beans.frameworkOverrides.runWhenReadyAsync?.()??!1)}updateReady(){let e=Object.values(this.params);this.ready=e.length===qOe&&e.every(t=>t?.isAlive()??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{let n=this.readyCallbacks.indexOf(t);n>=0&&this.readyCallbacks.splice(n,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){let{leftHeader:e,centerHeader:t,rightHeader:n}=this.params;return[e,n,t]}getHeaderRowContainerCtrl(e){let t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}},ZOe='.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-tab-guard{display:block;height:0;position:absolute;width:0}:where(.ag-virtual-list-viewport) .ag-tab-guard{position:sticky}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport,.ag-virtual-list-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important;&::-webkit-scrollbar{display:none!important}}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-floating-bottom-container,.ag-floating-top-container,.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-virtual-list-viewport{overflow:auto;width:100%}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-right-cols-container,.ag-sticky-bottom-container,.ag-sticky-top-container,.ag-virtual-list-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-virtual-list-container{overflow:hidden}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-scrolling,.ag-scrollbar-active){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-animation.ag-prevent-animation) .ag-row{transition:none!important;&:where(.ag-row.ag-after-created){transition:none!important}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value:not(.ag-allow-overflow),.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-top:not(.ag-invisible)){border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-bottom:not(.ag-invisible)){border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-data-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block;&:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}}.ag-group{position:relative;width:100%}.ag-group-title-bar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-title{display:inline;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-group-title-bar) .ag-group-title{cursor:default}.ag-group-toolbar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-container{display:flex}.ag-disabled .ag-group-container{pointer-events:none}.ag-disabled-group-container,.ag-disabled-group-title-bar{opacity:.5}.ag-group-container-horizontal{flex-flow:row wrap}.ag-group-container-vertical{flex-direction:column}.ag-group-title-bar-icon{cursor:pointer;flex:none}:where(.ag-ltr) .ag-group-title-bar-icon{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-group-title-bar-icon{margin-left:var(--ag-spacing)}:where(.ag-group-item-alignment-stretch) .ag-group-item{align-items:stretch}:where(.ag-group-item-alignment-start) .ag-group-item{align-items:flex-start}:where(.ag-group-item-alignment-end) .ag-group-item{align-items:flex-end}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-data-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%;&.ag-row-editing-invalid{background-color:var(--ag-full-row-edit-invalid-background-color)}}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-sticky-bottom{border-top:var(--ag-row-border);box-sizing:content-box!important}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-data-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after,.ag-row-highlight-inside:after{background-color:var(--ag-range-selection-border-color);content:"";height:1px;pointer-events:none;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after,:where(.ag-ltr) .ag-row-highlight-inside:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after,:where(.ag-rtl) .ag-row-highlight-inside:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-highlight-indent:after{display:block;width:auto}:where(.ag-ltr) .ag-row-highlight-indent:after{left:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size));right:1px}:where(.ag-rtl) .ag-row-highlight-indent:after{left:1px;right:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size))}.ag-row-highlight-inside:after{background-color:var(--ag-selected-row-background-color);border:1px solid var(--ag-range-selection-border-color);display:block;height:auto;inset:0;width:auto}.ag-body,.ag-floating-bottom,.ag-floating-top{background-color:var(--ag-data-background-color)}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-data-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-loading-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{background-color:var(--ag-row-loading-skeleton-effect-color)}50%{background-color:color-mix(in srgb,transparent,var(--ag-row-loading-skeleton-effect-color) 40%)}to{background-color:var(--ag-row-loading-skeleton-effect-color)}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden),.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)),.ag-header-group-cell{&:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}&:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}&:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}}:where(.ag-header-cell:not(.ag-floating-filter) *,.ag-header-group-cell *){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-accent-color);content:"";height:100%;position:absolute;width:1px}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2;&:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}}:where(.ag-ltr) .ag-header-cell-resize{right:-3px;&:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-rtl) .ag-header-cell-resize{left:-3px;&:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-virtual-list-item{height:var(--ag-list-item-height);position:absolute;width:100%}.ag-list-item-hovered:after{background-color:var(--ag-accent-color);content:"";height:1px;left:0;position:absolute;right:0}.ag-item-highlight-top:after{top:0}.ag-item-highlight-bottom:after{bottom:0}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab;:where(.ag-icon){color:var(--ag-drag-handle-color)}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color);&:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);position:relative;&:after{background-color:var(--ag-icon-button-active-indicator-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}:where(.ag-ltr) .ag-filter-active{&:after{right:-1px}}:where(.ag-rtl) .ag-filter-active{&:after{left:-1px}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}',YOe={wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:qr,sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonBorder:"solid 1px transparent",sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},cellFontFamily:{ref:"fontFamily"},headerFontWeight:500,headerFontSize:{ref:"fontSize"},dataFontSize:{ref:"fontSize"},headerTextColor:{ref:"textColor"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:Uc,rangeSelectionBackgroundColor:Al(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:Al(.5),rangeHeaderHighlightColor:MMe(.08),rowNumbersSelectedColor:Al(.5),rowHoverColor:Al(.08),columnHoverColor:Al(.05),selectedRowBackgroundColor:Al(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},dataBackgroundColor:qr,oddRowBackgroundColor:{ref:"dataBackgroundColor"},wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,paginationPanelHeight:{ref:"rowHeight",calc:"max(rowHeight, 22px)"},dragHandleColor:Ys(.7),headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},iconButtonColor:{ref:"iconColor"},iconButtonBackgroundColor:"transparent",iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:"iconButtonColor"},iconButtonHoverBackgroundColor:Ys(.1),iconButtonActiveColor:Uc,iconButtonActiveBackgroundColor:Al(.28),iconButtonActiveIndicatorColor:Uc,menuBorder:{color:Ys(.2)},menuBackgroundColor:Js(.03),menuTextColor:Js(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"},setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:Ys(.8),dialogShadow:{ref:"popupShadow"},cellEditingBorder:{color:Uc},cellEditingShadow:{ref:"cardShadow"},fullRowEditInvalidBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.25},dialogBorder:{color:Ys(.2)},panelBackgroundColor:qr,panelTitleBarHeight:{ref:"headerHeight"},panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarIconColor:{ref:"headerTextColor"},panelTitleBarTextColor:{ref:"headerTextColor"},panelTitleBarFontWeight:{ref:"headerFontWeight"},panelTitleBarBorder:!0,columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,columnDropCellBackgroundColor:Ys(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:Ys(.13)},selectCellBackgroundColor:Ys(.07),selectCellBorder:{color:Ys(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",filterPanelApplyButtonColor:qr,filterPanelApplyButtonBackgroundColor:Uc,filterPanelCardSubtleColor:{ref:"textColor",mix:.7},filterPanelCardSubtleHoverColor:{ref:"textColor"},findMatchColor:Ig,findMatchBackgroundColor:"#ffff00",findActiveMatchColor:Ig,findActiveMatchBackgroundColor:"#ffa500",filterToolPanelGroupIndent:{ref:"spacing"},rowLoadingSkeletonEffectColor:Ys(.15),statusBarLabelColor:Ig,statusBarLabelFontWeight:500,statusBarValueColor:Ig,statusBarValueFontWeight:500,pinnedSourceRowTextColor:{ref:"textColor"},pinnedSourceRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedSourceRowFontWeight:600,pinnedRowFontWeight:600,pinnedRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedRowTextColor:{ref:"textColor"}},QOe=".ag-cell-batch-edit{background-color:var(--ag-cell-batch-edit-background-color);color:var(--ag-cell-batch-edit-text-color);display:inherit}.ag-row-batch-edit{background-color:var(--ag-row-batch-edit-background-color);color:var(--ag-row-batch-edit-text-color)}",Une={cellBatchEditBackgroundColor:"rgba(220 181 139 / 16%)",cellBatchEditTextColor:"#422f00",rowBatchEditBackgroundColor:{ref:"cellBatchEditBackgroundColor"},rowBatchEditTextColor:{ref:"cellBatchEditTextColor"}},JOe=x(g({},Une),{cellBatchEditTextColor:"#f3d0b3"}),XOe=()=>zl({feature:"batchEditStyle",params:Une,css:QOe}),eFe=XOe(),tFe=":where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}",nFe={buttonTextColor:"inherit",buttonFontWeight:"normal",buttonBackgroundColor:"transparent",buttonBorder:!1,buttonBorderRadius:{ref:"borderRadius"},buttonHorizontalPadding:{calc:"spacing * 2"},buttonVerticalPadding:{ref:"spacing"},buttonHoverTextColor:{ref:"buttonTextColor"},buttonHoverBackgroundColor:{ref:"buttonBackgroundColor"},buttonHoverBorder:{ref:"buttonBorder"},buttonActiveTextColor:{ref:"buttonHoverTextColor"},buttonActiveBackgroundColor:{ref:"buttonHoverBackgroundColor"},buttonActiveBorder:{ref:"buttonHoverBorder"},buttonDisabledTextColor:{ref:"inputDisabledTextColor"},buttonDisabledBackgroundColor:{ref:"inputDisabledBackgroundColor"},buttonDisabledBorder:{ref:"inputDisabledBorder"}};var iFe=()=>zl({feature:"buttonStyle",params:x(g({},nFe),{buttonBackgroundColor:qr,buttonBorder:!0,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBorder:{color:Uc}}),css:tFe}),oFe=iFe();var rFe=".ag-column-drop-vertical-empty-message{align-items:center;border:dashed var(--ag-border-width);border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}";var sFe=()=>zl({feature:"columnDropStyle",css:rFe}),Wne=sFe();var aFe={warn:(...e)=>{ce(e[0],e[1])},error:(...e)=>{On(e[0],e[1])},preInitErr:(...e)=>{qC(e[0],e[2],e[1])}},lFe=()=>VMe(aFe).withParams(YOe).withPart(oFe).withPart(Wne).withPart(eFe),cFe='.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);:where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}&:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color);&:after{background-color:var(--ag-checkbox-checked-shape-color)}}&:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color);&:after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}}.ag-cell-editing-error .ag-checkbox-input-wrapper:focus-within{box-shadow:var(--ag-focus-error-shadow)}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}',dFe=()=>zl({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:qr,checkboxUncheckedBorderColor:Js(.3),checkboxCheckedBackgroundColor:Uc,checkboxCheckedBorderColor:{ref:"checkboxCheckedBackgroundColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:qr,checkboxIndeterminateBackgroundColor:Js(.3),checkboxIndeterminateBorderColor:{ref:"checkboxIndeterminateBackgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:qr,radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:cFe}),uFe=dFe();var qne=()=>x(g(g({},uI),JOe),{backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:Js(.05),rowHoverColor:Al(.15),selectedRowBackgroundColor:Al(.2),menuBackgroundColor:Js(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",filterPanelApplyButtonColor:Ig,findMatchColor:qr,findActiveMatchColor:qr,checkboxUncheckedBorderColor:Js(.4),toggleButtonOffBackgroundColor:Js(.4),rowBatchEditBackgroundColor:Js(.1)});var hFe=()=>x(g({},qne()),{backgroundColor:"#1f2836"});var pFe=()=>zl({feature:"colorScheme",params:uI,modeParams:{light:uI,dark:qne(),"dark-blue":hFe()}}),fFe=pFe();var Kne={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>'},Zne={"column-arrow":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 26C0 28.2092 1.79086 30 4 30H14C16.2091 30 18 28.2092 18 26V15H25.8786L24.4394 16.4393C23.8536 17.0251 23.8536 17.9749 24.4394 18.5607C25.0252 19.1464 25.9748 19.1464 26.5606 18.5607L30.5606 14.5607C31.1464 13.9749 31.1464 13.0251 30.5606 12.4393L26.5606 8.43934C25.9748 7.85356 25.0252 7.85356 24.4394 8.43934C23.8536 9.02512 23.8536 9.97488 24.4394 10.5607L25.8786 12H18V6C18 3.79086 16.2091 2 14 2H4C1.79086 2 0 3.79086 0 6V26ZM14 5H10.5V12H15V6C15 5.44772 14.5523 5 14 5ZM4 5H7.5V12H3V6C3 5.44772 3.44772 5 4 5ZM10.5 15H15V26C15 26.5522 14.5523 27 14 27H10.5V15ZM4 27H7.5V15H3V26C3 26.5522 3.44772 27 4 27Z" fill="currentColor"/></svg>',"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>',"pinned-top":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.53 3.72A.75.75 0 0 1 12 5H4a.75.75 0 0 1 0-1.5h8a.75.75 0 0 1 .53.22ZM3.269 10.744a.75.75 0 0 1 .2-.524l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06L8.75 8.56V14a.75.75 0 0 1-1.5 0V8.56l-2.72 2.72a.75.75 0 0 1-1.26-.536Z"/></svg>',"pinned-bottom":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M3.47 12.28A.75.75 0 0 1 4 11h8a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.53-.22ZM12.731 5.256a.75.75 0 0 1-.2.524l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06l2.72 2.72V2a.75.75 0 0 1 1.5 0v5.44l2.72-2.72a.75.75 0 0 1 1.26.536Z"/></svg>',"un-pin":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M8 11a.75.75 0 0 0-.75.75v3.333a.75.75 0 1 0 1.5 0V11.75A.75.75 0 0 0 8 11Z"/><path fill="currentColor" d="M13.11 1.436a.75.75 0 0 0-1.22-.872l-10 14a.75.75 0 1 0 1.22.872L5.207 12.5h7.376a.75.75 0 0 0 .75-.75v-1.174a2.08 2.08 0 0 0-1.153-1.863l-1.185-.599-.005-.002a.58.58 0 0 1-.323-.522V5.165a2.083 2.083 0 0 0 1.854-2.904l.589-.825Zm-3.943 5.52v.634a2.08 2.08 0 0 0 1.153 1.863l1.185.6.005.002a.58.58 0 0 1 .323.522V11H6.28l2.887-4.044ZM9.277 1H5.25a2.084 2.084 0 0 0-.083 4.165v1.676l1.5-2.132v-.292a.75.75 0 0 0-.75-.75H5.25a.584.584 0 0 1 0-1.167h2.972L9.277 1Z"/></svg>',"chevron-down":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6L8 10L4 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-up":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 10L8 6L12 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-left":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-right":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"filter-add":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.12126 7.75L10.8517 7.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M6.65934 11.748L9.32778 11.748" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M12.2943 1.04872V6.19184M14.9886 3.74341H9.68478" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M8.25488 3C8.04799 3.18323 7.91706 3.45099 7.91699 3.74902C7.91713 4.04868 8.04988 4.31681 8.25879 4.5H2C1.58579 4.5 1.25 4.16421 1.25 3.75C1.25 3.33579 1.58579 3 2 3H8.25488Z" fill="currentColor"/></svg>',edit:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 10.6262V12.5012H5.375L10.905 6.97122L9.03 5.09622L3.5 10.6262ZM12.355 5.52122C12.4014 5.47497 12.4381 5.42002 12.4632 5.35953C12.4883 5.29905 12.5012 5.23421 12.5012 5.16872C12.5012 5.10324 12.4883 5.0384 12.4632 4.97791C12.4381 4.91742 12.4014 4.86248 12.355 4.81622L11.185 3.64622C11.1387 3.59987 11.0838 3.5631 11.0233 3.53801C10.9628 3.51291 10.898 3.5 10.8325 3.5C10.767 3.5 10.7022 3.51291 10.6417 3.53801C10.5812 3.5631 10.5263 3.59987 10.48 3.64622L9.565 4.56122L11.44 6.43622L12.355 5.52122Z" fill="currentColor"/></svg>'},mFe=(e={})=>{let t="";for(let n of[...Object.keys(Kne),...Object.keys(Zne)]){let i=gFe(n,e.strokeWidth);t+=`.ag-icon-${n}::before { mask-image: url('data:image/svg+xml,${encodeURIComponent(i)}'); }
`}return t},gFe=(e,t=1.5)=>{let n=Zne[e];if(n)return n;let i=Kne[e];if(!i)throw new Error(`Missing icon data for ${e}`);return`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="${t}" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>`+i+"</svg>"},vFe=(e={})=>zl({feature:"iconSet",css:()=>mFe(e)});var _Fe=vFe();var yFe=':where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}.ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-right:var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}',bFe=".ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){&:focus{box-shadow:var(--ag-focus-shadow);&:where(.invalid),&:where(:invalid){box-shadow:var(--ag-focus-error-shadow)}}}";var CFe={inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"},pickerButtonBorder:!1,pickerButtonFocusBorder:{ref:"inputFocusBorder"},pickerButtonBackgroundColor:{ref:"backgroundColor"},pickerButtonFocusBackgroundColor:{ref:"backgroundColor"},pickerListBorder:!1,pickerListBackgroundColor:{ref:"backgroundColor"},colorPickerThumbSize:18,colorPickerTrackSize:12,colorPickerThumbBorderWidth:3,colorPickerTrackBorderRadius:12,colorPickerColorBorderRadius:4};var wFe=()=>zl({feature:"inputStyle",params:x(g({},CFe),{inputBackgroundColor:qr,inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:Uc},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:Js(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}},pickerButtonBorder:!0,pickerListBorder:!0}),css:()=>yFe+bFe}),xFe=wFe();var SFe='.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:solid var(--ag-border-width) var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:solid var(--ag-border-width) var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative;&:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}&.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}&:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}&.ag-tab-selected:after{opacity:1}}:where(.ag-ltr) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}}}:where(.ag-rtl) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}}}';var EFe={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:{ref:"borderWidth"},tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1};var DFe=()=>zl({feature:"tabStyle",params:x(g({},EFe),{tabBarBorder:!0,tabBarBackgroundColor:Ys(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:qr}),css:SFe}),kFe=DFe();var IFe=()=>lFe().withPart(uFe).withPart(fFe).withPart(_Fe).withPart(kFe).withPart(xFe).withPart(Wne).withParams({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]}),CV=IFe();var MFe={cssName:"--ag-cell-horizontal-padding",changeKey:"cellHorizontalPaddingChanged",defaultValue:16},RFe={cssName:"--ag-indentation-level",changeKey:"indentationLevelChanged",defaultValue:0,noWarn:!0,cacheDefault:!0},TFe={cssName:"--ag-row-group-indent-size",changeKey:"rowGroupIndentSizeChanged",defaultValue:0},mee={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},gee={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},vee={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},e4={cssName:"--ag-row-border",changeKey:"rowBorderWidthChanged",defaultValue:1,border:!0},_ee={cssName:"--ag-pinned-row-border",changeKey:"pinnedRowBorderWidthChanged",defaultValue:1,border:!0};function PFe(e,t){for(let n of t.sort((i,o)=>i.moduleName.localeCompare(o.moduleName))){let i=n.css;i&&e.set(`module-${n.moduleName}`,i)}}var AFe=class extends KMe{constructor(){super(...arguments),this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1}initVariables(){this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.getSizeEl(mee),this.getSizeEl(gee),this.getSizeEl(vee),this.getSizeEl(e4),this.getSizeEl(_ee),this.refreshRowBorderWidthVariable()}getPinnedRowBorderWidth(){return this.getCSSVariablePixelValue(_ee)}getRowBorderWidth(){return this.getCSSVariablePixelValue(e4)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(mee)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(gee)}getDefaultCellHorizontalPadding(){return this.getCSSVariablePixelValue(MFe)}getCellPaddingLeft(){let e=this.getDefaultCellHorizontalPadding(),t=this.getCSSVariablePixelValue(RFe),n=this.getCSSVariablePixelValue(TFe);return e-1+n*t}getCellPadding(){let e=this.getDefaultCellHorizontalPadding()-1;return this.getCellPaddingLeft()+e}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(vee)}refreshRowHeightVariable(){let{eRootDiv:e}=this,t=e.style.getPropertyValue("--ag-line-height").trim(),n=this.gos.get("rowHeight");if(n==null||isNaN(n)||!isFinite(n))return t!==null&&e.style.setProperty("--ag-line-height",null),-1;let i=`${n}px`;return t!=i?(e.style.setProperty("--ag-line-height",i),n):t!=""?Number.parseFloat(t):-1}getCSSVariablePixelValue(e){let t=this.lastKnownValues.get(e);if(t!=null)return t;let n=this.measureSizeEl(e);return n==="detached"||n==="no-styles"?(e.cacheDefault&&this.lastKnownValues.set(e,e.defaultValue),e.defaultValue):(this.lastKnownValues.set(e,n),n)}measureSizeEl(e){let t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";let n=t.offsetWidth;return n===t4?"no-styles":(this.sizesMeasured=!0,n)}getMeasurementContainer(){let e=this.eMeasurementContainer;return e||(e=this.eMeasurementContainer=ji({tag:"div",cls:"ag-measurement-container"}),this.eRootDiv.appendChild(e)),e}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;let n=this.getMeasurementContainer();t=ji({tag:"div"});let{border:i,noWarn:o}=e;i?(t.className="ag-measurement-element-border",t.style.setProperty("--ag-internal-measurement-border",`var(${e.cssName}, solid ${t4}px)`)):t.style.width=`var(${e.cssName}, ${t4}px)`,n.appendChild(t),this.sizeEls.set(e,t);let r=this.measureSizeEl(e);r==="no-styles"&&!o&&ce(9,{variable:e});let s=_u(this.beans,t,()=>{let a=this.measureSizeEl(e);a==="detached"||a==="no-styles"||(this.lastKnownValues.set(e,a),a!==r&&(r=a,this.fireStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>s()),t}fireStylesChangedEvent(e){e==="rowBorderWidthChanged"&&this.refreshRowBorderWidthVariable(),this.eventSvc.dispatchEvent({type:"gridStylesChanged",[e]:!0})}refreshRowBorderWidthVariable(){let e=this.getCSSVariablePixelValue(e4);this.eRootDiv.style.setProperty("--ag-internal-row-border-width",`${e}px`)}postProcessThemeChange(e,t){e&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")&&On(t?106:239)}getAdditionalCss(){let e=new Map;return e.set("core",[ZOe]),PFe(e,Array.from(bke())),e}getDefaultTheme(){return CV}themeError(e){On(240,{theme:e})}},t4=15538,OFe=class extends YMe{postConstruct(){let{globalListener:e,globalSyncListener:t}=this.beans;e&&this.addGlobalListener(e,!0),t&&this.addGlobalListener(t,!1)}};function Yne(e,t,n){let i=e.visibleCols.headerGroupRowCount;if(n>=i)return{column:t,headerRowIndex:n};let o=t.getParent();for(;o&&o.getProvidedColumnGroup().getLevel()>n;)o=o.getParent();let r=t.isSpanHeaderHeight();return!o||r&&o.isPadding()?{column:t,headerRowIndex:i}:{column:o,headerRowIndex:o.getProvidedColumnGroup().getLevel()}}var FFe=class extends te{constructor(){super(...arguments),this.beanName="headerNavigation",this.currentHeaderRowWithoutSpan=-1}postConstruct(){let e=this.beans;e.ctrlsSvc.whenReady(this,n=>{this.gridBodyCon=n.gridBodyCtrl});let t=ko(e);this.addManagedElementListeners(t,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(e,t){let n,{colModel:i,colGroupSvc:o,ctrlsSvc:r}=this.beans;if(typeof e=="string"?(n=i.getCol(e),n||(n=o?.getColumnGroup(e)??null)):n=e,!n)return null;let a=r.getHeaderRowContainerCtrl()?.getAllCtrls(),l=Hn(a||[]).type==="filter",c=Ll(this.beans)-1,u=-1,h=n;for(;h;)u++,h=h.getParent();let f=u;return t&&l&&f===c-1&&f++,f===-1?null:{headerRowIndex:f,column:n}}navigateVertically(e,t){let{focusSvc:n,visibleCols:i}=this.beans,{focusedHeader:o}=n;if(!o)return!1;let{headerRowIndex:r}=o,s=o.column,a=Ll(this.beans),l=this.getHeaderRowType(r),c=i.headerGroupRowCount,{headerRowIndex:u,column:h,headerRowIndexWithoutSpan:f}=e==="UP"?LFe(l,s,r):NFe(s,r,c),m=!1;return u<0&&(u=0,h=s,m=!0),u>=a?(u=-1,this.currentHeaderRowWithoutSpan=-1):f!==void 0&&(this.currentHeaderRowWithoutSpan=f),!m&&!h?!1:n.focusHeaderPosition({headerPosition:{headerRowIndex:u,column:h},allowUserOverride:!0,event:t})}navigateHorizontally(e,t=!1,n){let{focusSvc:i,gos:o}=this.beans,r=g({},i.focusedHeader),s,a;this.currentHeaderRowWithoutSpan!==-1?r.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=r.headerRowIndex,e==="LEFT"!==o.get("enableRtl")?(a="Before",s=this.findHeader(r,a)):(a="After",s=this.findHeader(r,a));let l=o.getCallback("tabToNextHeader");if(t&&l){let c=i.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:s,direction:a});if(c){let{headerRowIndex:u}=i.focusedHeader||{};u!=null&&u!=r.headerRowIndex&&(this.currentHeaderRowWithoutSpan=u)}return c}return s||!t?i.focusHeaderPosition({headerPosition:s,direction:a,fromTab:t,allowUserOverride:!0,event:n}):this.focusNextHeaderRow(r,a,n)}focusNextHeaderRow(e,t,n){let i=this.beans,o=e.headerRowIndex,r=null,s,a=Ll(i),l=this.beans.visibleCols.allCols;if(t==="Before"){if(o<=0)return!1;r=Hn(l),s=o-1,this.currentHeaderRowWithoutSpan-=1}else r=l[0],s=o+1,this.currentHeaderRowWithoutSpan<a?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1;let{column:c,headerRowIndex:u}=Yne(this.beans,r,s);return u>=a&&(u=-1),i.focusSvc.focusHeaderPosition({headerPosition:{column:c,headerRowIndex:u},direction:t,fromTab:!0,allowUserOverride:!0,event:n})}scrollToColumn(e,t="After"){if(e.getPinned())return;let n;if(Hi(e)){let i=e.getDisplayedLeafColumns();n=t==="Before"?Hn(i):i[0]}else n=e;this.gridBodyCon.scrollFeature.ensureColumnVisible(n)}findHeader(e,t){let{colGroupSvc:n,visibleCols:i}=this.beans,o=e.column;if(o instanceof mw){let l=o.getDisplayedLeafColumns();o=t==="Before"?l[0]:l[l.length-1]}let r=t==="Before"?i.getColBefore(o):i.getColAfter(o);if(!r)return;let s=i.headerGroupRowCount;if(e.headerRowIndex>=s)return{headerRowIndex:e.headerRowIndex,column:r};let a=n?.getColGroupAtLevel(r,e.headerRowIndex);return a?a.isPadding()&&r.isSpanHeaderHeight()?{headerRowIndex:i.headerGroupRowCount,column:r}:{headerRowIndex:e.headerRowIndex,column:a??r}:{headerRowIndex:r instanceof Dp&&r.isSpanHeaderHeight()?i.headerGroupRowCount:e.headerRowIndex,column:r}}getHeaderRowType(e){let t=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}};function LFe(e,t,n){let i=n-1;if(e!=="filter"){let o=t instanceof Dp&&t.isSpanHeaderHeight(),r=t.getParent();for(;r&&(r.getProvidedColumnGroup().getLevel()>i||o&&r.isPadding());)r=r.getParent();if(r)return o?{column:r,headerRowIndex:r.getProvidedColumnGroup().getLevel(),headerRowIndexWithoutSpan:i}:{column:r,headerRowIndex:i,headerRowIndexWithoutSpan:i}}return{column:t,headerRowIndex:i,headerRowIndexWithoutSpan:i}}function NFe(e,t,n){let i=t+1,o={column:e,headerRowIndex:i,headerRowIndexWithoutSpan:i};if(e instanceof mw){if(i>=n)return{column:e.getDisplayedLeafColumns()[0],headerRowIndex:n,headerRowIndexWithoutSpan:i};let s=e.getDisplayedChildren()[0];if(s instanceof mw&&s.isPadding()){let l=s.getDisplayedLeafColumns()[0];l.isSpanHeaderHeight()&&(s=l)}o.column=s,s instanceof Dp&&s.isSpanHeaderHeight()&&(o.headerRowIndex=n,o.headerRowIndexWithoutSpan=i)}return o}var BFe=class extends te{constructor(){super(...arguments),this.beanName="focusSvc",this.focusFallbackTimeout=null,this.needsFocusRestored=!1}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.rowRenderer=e.rowRenderer,this.navigation=e.navigation,this.filterManager=e.filterManager,this.overlays=e.overlays}postConstruct(){let e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.addDestroyFunc(nMe(this.beans))}attemptToRecoverFocus(){this.needsFocusRestored=!0,this.focusFallbackTimeout!=null&&clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=window.setTimeout(this.setFocusRecovered.bind(this),100)}setFocusRecovered(){this.needsFocusRestored=!1,this.focusFallbackTimeout!=null&&(clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=null)}shouldTakeFocus(){return this.gos.get("suppressFocusAfterRefresh")?(this.setFocusRecovered(),!1):this.needsFocusRestored?(this.setFocusRecovered(),!0):this.doesRowOrCellHaveBrowserFocus()}onColumnEverythingChanged(){if(!this.focusedCell)return;let e=this.focusedCell.column,t=this.colModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){let{gos:e,focusedCell:t}=this;return e.get("suppressFocusAfterRefresh")||e.get("suppressCellFocus")||!t||!this.doesRowOrCellHaveBrowserFocus()?null:t}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeader||!this.isDomDataPresentInHierarchy(vi(this.beans),Rne)?null:this.focusedHeader}doesRowOrCellHaveBrowserFocus(){let e=vi(this.beans);return this.isDomDataPresentInHierarchy(e,hI)?!0:this.isDomDataPresentInHierarchy(e,pI)}isDomDataPresentInHierarchy(e,t){let n=e;for(;n;){if(_te(this.gos,n,t))return!0;n=n.parentNode}return!1}getFocusedCell(){return this.focusedCell}getFocusEventParams(e){let{rowIndex:t,rowPinned:n,column:i}=e,o={rowIndex:t,rowPinned:n,column:i,isFullWidthCell:!1},r=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:n});return r&&(o.isFullWidthCell=r.isFullWidth()),o}clearFocusedCell(){if(this.focusedCell==null)return;let e=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent(g({type:"cellFocusCleared"},e))}setFocusedCell(e){this.setFocusRecovered();let{column:t,rowIndex:n,rowPinned:i,forceBrowserFocus:o=!1,preventScrollOnBrowserFocus:r=!1,sourceEvent:s}=e,a=this.colModel.getCol(t);if(!a){this.focusedCell=null;return}this.focusedCell={rowIndex:n,rowPinned:qc(i),column:a};let l=this.getFocusEventParams(this.focusedCell);this.eventSvc.dispatchEvent(x(g(g({type:"cellFocused"},l),this.previousCellFocusParams&&{previousParams:this.previousCellFocusParams}),{forceBrowserFocus:o,preventScrollOnBrowserFocus:r,sourceEvent:s})),this.previousCellFocusParams=l}isCellFocused(e){return this.focusedCell==null?!1:Nne(e,this.focusedCell)}isHeaderWrapperFocused(e){if(this.focusedHeader==null)return!1;let{column:t,rowCtrl:{rowIndex:n,pinned:i}}=e,{column:o,headerRowIndex:r}=this.focusedHeader;return t===o&&n===r&&i==o.getPinned()}focusHeaderPosition(e){if(this.setFocusRecovered(),_p(this.beans))return!1;let{direction:t,fromTab:n,allowUserOverride:i,event:o,fromCell:r,rowWithoutSpanValue:s,scroll:a=!0}=e,{headerPosition:l}=e;if(r&&this.filterManager?.isAdvFilterHeaderActive())return this.focusAdvancedFilter(l);if(i){let c=this.focusedHeader,u=Ll(this.beans);if(n){let h=this.gos.getCallback("tabToNextHeader");h&&(l=this.getHeaderPositionFromUserFunc({userFunc:h,direction:t,currentPosition:c,headerPosition:l,headerRowCount:u}))}else{let h=this.gos.getCallback("navigateToNextHeader");if(h&&o){let f={key:o.key,previousHeaderPosition:c,nextHeaderPosition:l,headerRowCount:u,event:o};l=h(f)}}}return l?this.focusProvidedHeaderPosition({headerPosition:l,direction:t,event:o,fromCell:r,rowWithoutSpanValue:s,scroll:a}):!1}focusHeaderPositionFromUserFunc(e){if(_p(this.beans))return!1;let{userFunc:t,headerPosition:n,direction:i,event:o}=e,r=this.focusedHeader,s=Ll(this.beans),a=this.getHeaderPositionFromUserFunc({userFunc:t,direction:i,currentPosition:r,headerPosition:n,headerRowCount:s});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:i,event:o})}getHeaderPositionFromUserFunc(e){let{userFunc:t,direction:n,currentPosition:i,headerPosition:o,headerRowCount:r}=e,a=t({backwards:n==="Before",previousHeaderPosition:i,nextHeaderPosition:o,headerRowCount:r});return a===!0?i:a===!1?null:a}focusProvidedHeaderPosition(e){let{headerPosition:t,direction:n,fromCell:i,rowWithoutSpanValue:o,event:r,scroll:s=!0}=e,{column:a,headerRowIndex:l}=t,{filterManager:c,ctrlsSvc:u,headerNavigation:h}=this.beans;if(this.focusedHeader&&wTe(e.headerPosition,this.focusedHeader))return!1;if(l===-1)return c?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView({column:a,event:r});s&&h?.scrollToColumn(a,n);let m=u.getHeaderRowContainerCtrl(a.getPinned())?.focusHeader(t.headerRowIndex,a,r)||!1;return h&&m&&(o!=null||i)&&(h.currentHeaderRowWithoutSpan=o??-1),m}focusFirstHeader(){if(this.overlays?.isExclusive()&&this.focusOverlay())return!0;let e=this.visibleCols.allCols[0];if(!e)return!1;let t=Yne(this.beans,e,0);return this.focusHeaderPosition({headerPosition:t,rowWithoutSpanValue:0})}focusLastHeader(e){if(this.overlays?.isExclusive()&&this.focusOverlay(!0))return!0;let t=Ll(this.beans)-1,n=Hn(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:n},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){return this.filterManager?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(e,t){return this.focusedCell==null?!1:this.focusedCell.rowIndex===e&&this.focusedCell.rowPinned===qc(t)}focusOverlay(e){let t=this.overlays?.isVisible()&&this.overlays.eWrapper?.getGui();return!!t&&wp(t,e)}focusGridView(e){let{backwards:t=!1,canFocusOverlay:n=!0,event:i}=e;if(this.overlays?.isExclusive())return n&&this.focusOverlay(t);if(EI(this.beans))return t&&!_p(this.beans)?this.focusLastHeader():n&&this.focusOverlay(t)?!0:t?!1:qg(this.beans,t);let o=t?tAe(this.beans):eAe(this.beans);if(o){let r=e.column??this.focusedHeader?.column,{rowIndex:s,rowPinned:a}=o,l=Jc(this.beans,o);if(!r||!l||s==null)return!1;if(r.isSuppressNavigable(l)){let c=this.gos.get("enableRtl"),u;return!i||i.key===W.TAB?u=c?W.LEFT:W.RIGHT:u=i.key,this.beans.navigation?.navigateToNextCell(null,u,{rowIndex:s,column:r,rowPinned:a||null},!0),!0}return this.navigation?.ensureCellVisible({rowIndex:s,column:r,rowPinned:a}),t&&this.rowRenderer.getRowByPosition(o)?.isFullWidth()&&this.navigation?.tryToFocusFullWidthRow(o,t)||(this.setFocusedCell({rowIndex:s,column:r,rowPinned:qc(a),forceBrowserFocus:!0}),this.beans.rangeSvc?.setRangeToCell({rowIndex:s,rowPinned:a,column:r})),!0}return!!(n&&this.focusOverlay(t)||t&&this.focusLastHeader())}focusAdvancedFilter(e){return this.advFilterFocusColumn=e?.column,this.beans.advancedFilter?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(e,t){let n=(t?void 0:this.advFilterFocusColumn)??this.visibleCols.allCols?.[0];return e?this.focusHeaderPosition({headerPosition:{column:n,headerRowIndex:Ll(this.beans)-1}}):this.focusGridView({column:n})}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}},zFe=class extends te{constructor(){super(...arguments),this.beanName="scrollVisibleSvc"}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colAnimation=e.colAnimation}postConstruct(){this.horizontalScrollShowing=this.gos.get("alwaysShowHorizontalScroll")===!0,this.verticalScrollShowing=this.gos.get("alwaysShowVerticalScroll")===!0,this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.updateScrollVisible.bind(this),displayedColumnsWidthChanged:this.updateScrollVisible.bind(this)})}updateScrollVisible(){let{colAnimation:e}=this;e?.isActive()?e.executeLaterVMTurn(()=>{e.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){let e=this.ctrlsSvc.get("center");if(!e||this.colAnimation?.isActive())return;let t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){let e=this.ctrlsSvc.get("center"),t=e.hasHorizontalScrollGap(),n=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==n)&&(this.horizontalScrollGap=t,this.verticalScrollGap=n,this.eventSvc.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"}))}getScrollbarWidth(){if(this.scrollbarWidth==null){let e=this.gos.get("scrollbarWidth"),n=typeof e=="number"&&e>=0?e:ZIe();n!=null&&(this.scrollbarWidth=n,this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},VFe=class extends te{constructor(){super(...arguments),this.beanName="gridDestroySvc",this.destroyCalled=!1}destroy(){if(this.destroyCalled)return;let{stateSvc:e,ctrlsSvc:t,context:n}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:e?.getState()??{}}),this.destroyCalled=!0,t.get("gridCtrl")?.destroyGridUi(),n.destroy(),super.destroy()}},Kk=new Set(["gridPreDestroyed","fillStart","pasteStart"]),HFe=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","pinnedRowsChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterUiChanged","filterOpened","floatingFilterUiChanged","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel","findChanged","rowResizeStarted","rowResizeEnded","columnsReset","bulkEditingStarted","bulkEditingStopped","batchEditingStarted","batchEditingStopped"];var wV=HFe.reduce((e,t)=>(e[t]=Vke(t),e),{}),GC=(e,t)=>({tag:"span",ref:`eSort${e}`,cls:`ag-sort-indicator-icon ag-sort-${t} ag-hidden`,attrs:{"aria-hidden":"true"}}),$Fe={tag:"span",cls:"ag-sort-indicator-container",children:[GC("Order","order"),GC("Asc","ascending-icon"),GC("Desc","descending-icon"),GC("Mixed","mixed-icon"),GC("None","none-icon")]},xV=class extends Mn{constructor(e){super(),this.eSortOrder=Ce,this.eSortAsc=Ce,this.eSortDesc=Ce,this.eSortMixed=Ce,this.eSortNone=Ce,e||this.setTemplate($Fe)}attachCustomElements(e,t,n,i,o){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=n,this.eSortMixed=i,this.eSortNone=o}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!e.isSortable()&&!e.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);let n=this.updateIcons.bind(this),i=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",n),this.addManagedEventListeners({newColumnsLoaded:n,sortChanged:i,columnRowGroupChanged:i}),this.onSortChanged()}addInIcon(e,t,n){if(t==null)return;let i=Xs(e,this.beans,n);i&&t.appendChild(i)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){let{eSortAsc:e,eSortDesc:t,eSortNone:n,column:i,gos:o,beans:r}=this,s=r.sortSvc.getDisplaySortForColumn(i);if(e&&ci(e,s==="asc",{skipAriaHidden:!0}),t&&ci(t,s==="desc",{skipAriaHidden:!0}),n){let a=!i.getColDef().unSortIcon&&!o.get("unSortIcon"),l=s==null;ci(n,!a&&l,{skipAriaHidden:!0})}}setupMultiSortIndicator(){let{eSortMixed:e,column:t,gos:n}=this;this.addInIcon("sortUnSort",e,t);let i=t.getColDef().showRowGroup;Ol(n)&&i&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){let{eSortMixed:e,beans:t,column:n}=this;if(e){let i=t.sortSvc.getDisplaySortForColumn(n)==="mixed";ci(e,i,{skipAriaHidden:!0})}}updateSortOrder(){let{eSortOrder:e,column:t,beans:{sortSvc:n}}=this;if(!e)return;let i=n.getColumnsWithSortingOrdered(),o=n.getDisplaySortIndexForColumn(t)??-1,r=i.some(a=>n.getDisplaySortIndexForColumn(a)??!1),s=o>=0&&r;ci(e,s,{skipAriaHidden:!0}),o>=0?e.textContent=(o+1).toString():Vo(e)}},jFe={selector:"AG-SORT-INDICATOR",component:xV},vw=["asc","desc",null],GFe=class extends te{constructor(){super(...arguments),this.beanName="sortSvc"}progressSort(e,t,n){let i=this.getNextSortDirection(e);this.setSortForColumn(e,i,t,n)}progressSortFromEvent(e,t){let i=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.progressSort(e,i,"uiColumnSorted")}setSortForColumn(e,t,n,i){t!=="asc"&&t!=="desc"&&(t=null);let{gos:o,showRowGroupCols:r}=this.beans,s=Ol(o),a=[e];if(s&&e.getColDef().showRowGroup){let h=r?.getSourceColumnsForGroupColumn?.(e)?.filter(f=>f.isSortable());h&&(a=[e,...h])}for(let u of a)this.setColSort(u,t,i);let l=(n||o.get("alwaysMultiSort"))&&!o.get("suppressMultiSort"),c=[];if(!l){let u=this.clearSortBarTheseColumns(a,i);c.push(...u)}this.updateSortIndex(e),c.push(...a),this.dispatchSortChangedEvents(i,c)}updateSortIndex(e){let{gos:t,colModel:n,showRowGroupCols:i}=this.beans,o=Ol(t),r=i?.getShowRowGroupCol(e.getId()),s=o&&r||e,a=this.getColumnsWithSortingOrdered();n.forAllCols(u=>this.setColSortIndex(u,null));let l=a.filter(u=>o&&u.getColDef().showRowGroup?!1:u!==s);(s.getSort()?[...l,s]:l).forEach((u,h)=>this.setColSortIndex(u,h))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let e=!1;return this.beans.colModel.forAllCols(t=>{t.getSort()&&(e=!0)}),e}dispatchSortChangedEvents(e,t){let n={type:"sortChanged",source:e};t&&(n.columns=t),this.eventSvc.dispatchEvent(n)}clearSortBarTheseColumns(e,t){let n=[];return this.beans.colModel.forAllCols(i=>{e.includes(i)||(i.getSort()&&n.push(i),this.setColSort(i,void 0,t))}),n}getNextSortDirection(e){let t=e.getColDef().sortingOrder??this.gos.get("sortingOrder")??vw,n=t.indexOf(e.getSort()),i=n<0,o=n==t.length-1;return i||o?t[0]:t[n+1]}getIndexedSortMap(){let{gos:e,colModel:t,showRowGroupCols:n,rowGroupColsSvc:i}=this.beans,o=[];if(t.forAllCols(c=>{c.getSort()&&o.push(c)}),t.isPivotMode()){let c=Ol(e);o=o.filter(u=>{let h=!!u.getAggFunc(),f=!u.isPrimary(),m=c?n?.getShowRowGroupCol(u.getId()):u.getColDef().showRowGroup;return h||f||m})}let r=i?.columns.filter(c=>!!c.getSort())??[],s={};o.forEach((c,u)=>s[c.getId()]=u),o.sort((c,u)=>{let h=c.getSortIndex(),f=u.getSortIndex();if(h!=null&&f!=null)return h-f;if(h==null&&f==null){let m=s[c.getId()],_=s[u.getId()];return m>_?1:-1}else return f==null?-1:1});let a=Ol(e)&&!!r.length;a&&(o=[...new Set(o.map(c=>n?.getShowRowGroupCol(c.getId())??c))]);let l=new Map;if(o.forEach((c,u)=>l.set(c,u)),a)for(let c of r){let u=n.getShowRowGroupCol(c.getId());l.set(c,l.get(u))}return l}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([,e],[,t])=>e-t).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){let t=Ol(this.gos),n=!!e.getColDef().showRowGroup;return t&&n}getDisplaySortForColumn(e){let t=this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSort();let i=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,o=i[0].getSort();return i.every(s=>s.getSort()==o)?o:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}setupHeader(e,t,n){let i=0;e.addManagedListeners(t,{movingChanged:()=>{i=Date.now()}}),n&&e.addManagedElementListeners(n,{click:r=>{let s=t.isMoving(),l=Date.now()-i<50;s||l||this.progressSortFromEvent(t,r)}});let o=()=>{let r=t.getSort();if(e.toggleCss("ag-header-cell-sorted-asc",r==="asc"),e.toggleCss("ag-header-cell-sorted-desc",r==="desc"),e.toggleCss("ag-header-cell-sorted-none",!r),t.getColDef().showRowGroup){let l=!this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(t)?.every(c=>t.getSort()==c.getSort());e.toggleCss("ag-header-cell-sorted-mixed",l)}};e.addManagedEventListeners({sortChanged:o,columnRowGroupChanged:o})}initCol(e){let{sort:t,initialSort:n,sortIndex:i,initialSortIndex:o}=e.colDef;t!==void 0?(t==="asc"||t==="desc")&&(e.sort=t):(n==="asc"||n==="desc")&&(e.sort=n),i!==void 0?i!==null&&(e.sortIndex=i):o!==null&&(e.sortIndex=o)}updateColSort(e,t,n){t!==void 0&&(t==="desc"||t==="asc"?this.setColSort(e,t,n):this.setColSort(e,void 0,n))}setColSort(e,t,n){e.sort!==t&&(e.sort=t,e.dispatchColEvent("sortChanged",n)),e.dispatchStateUpdatedEvent("sort")}setColSortIndex(e,t){e.sortIndex=t,e.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(e){return new xV(e)}getSortIndicatorSelector(){return jFe}},Vg={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agDateColumnFloatingFilter:"DateFilter",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agNewFiltersToolPanel:"NewFiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar",agFindCellRenderer:"Find"};function yee(e){return`"${e}"`}var UFe=()=>({checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."},rowGroupingHierarchy:{version:"34.3",message:"Use `colDef.groupHierarchy` instead."}}),WFe={aggFunc:"SharedAggregation",autoHeight:"RowAutoHeight",cellClass:"CellStyle",cellClassRules:"CellStyle",cellEditor:({cellEditor:e,editable:t})=>t?typeof e=="string"?Vg[e]??"CustomEditor":"CustomEditor":null,cellRenderer:({cellRenderer:e})=>typeof e!="string"?null:Vg[e],cellStyle:"CellStyle",columnChooserParams:"ColumnMenu",contextMenuItems:"ContextMenu",dndSource:"DragAndDrop",dndSourceOnRowDrag:"DragAndDrop",editable:({editable:e,cellEditor:t})=>e&&!t?"TextEditor":null,enableCellChangeFlash:"HighlightChanges",enablePivot:"SharedPivot",enableRowGroup:"SharedRowGrouping",enableValue:"SharedAggregation",filter:({filter:e})=>e&&typeof e!="string"&&typeof e!="boolean"?"CustomFilter":typeof e=="string"?Vg[e]??"ColumnFilter":"ColumnFilter",floatingFilter:"ColumnFilter",getQuickFilterText:"QuickFilter",headerTooltip:"Tooltip",headerTooltipValueGetter:"Tooltip",mainMenuItems:"ColumnMenu",menuTabs:e=>{let t=["columnsMenuTab","generalMenuTab"];return e.menuTabs?.some(n=>t.includes(n))?"ColumnMenu":null},pivot:"SharedPivot",pivotIndex:"SharedPivot",rowDrag:"RowDrag",rowGroup:"SharedRowGrouping",rowGroupIndex:"SharedRowGrouping",tooltipField:"Tooltip",tooltipValueGetter:"Tooltip",tooltipComponentSelector:"Tooltip",spanRows:"CellSpan",groupHierarchy:"SharedRowGrouping"},qFe=()=>({autoHeight:{supportedRowModels:["clientSide","serverSide"],validate:(t,{paginationAutoPageSize:n})=>n?"colDef.autoHeight is not supported with paginationAutoPageSize.":null},cellRendererParams:{validate:t=>(t.rowGroup!=null||t.rowGroupIndex!=null||t.cellRenderer==="agGroupCellRenderer")&&"checkbox"in t.cellRendererParams?'Since v33.0, `cellRendererParams.checkbox` has been deprecated. Use `rowSelection.checkboxLocation = "autoGroupColumn"` instead.':null},flex:{validate:(t,n)=>n.autoSizeStrategy?"colDef.flex is not supported with gridOptions.autoSizeStrategy":null},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(t,{rowSelection:n})=>n==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(t,{rowSelection:n})=>n==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(t,{rowSelection:n})=>n==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerValueGetter:{validate:t=>{let n=t.headerValueGetter;return typeof n=="function"||typeof n=="string"?null:"headerValueGetter must be a function or a valid string expression"}},icons:{validate:({icons:t})=>{if(t){if(t.smallDown)return Bl(262);if(t.smallLeft)return Bl(263);if(t.smallRight)return Bl(264)}return null}},sortingOrder:{validate:t=>{let n=t.sortingOrder;if(Array.isArray(n)&&n.length>0){let i=n.filter(o=>!vw.includes(o));if(i.length>0)return`sortingOrder must be an array with elements from [${vw.map(nI).join()}], currently it includes [${i.map(nI).join()}]`}else if(!Array.isArray(n)||n.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${n}`;return null}},type:{validate:t=>{let n=t.type;return n instanceof Array?n.some(o=>typeof o!="string")?"if colDef.type is supplied an array it should be of type 'string[]'":null:typeof n=="string"?null:"colDef.type should be of type 'string' | 'string[]'"}},rowSpan:{validate:(t,{suppressRowTransform:n})=>n?null:"colDef.rowSpan requires suppressRowTransform to be enabled."},spanRows:{dependencies:{editable:{required:[!1,void 0]},rowDrag:{required:[!1,void 0]},colSpan:{required:[void 0]},rowSpan:{required:[void 0]}},validate:(t,{rowSelection:n,cellSelection:i,suppressRowTransform:o,enableCellSpan:r,rowDragEntireRow:s,enableCellTextSelection:a})=>typeof n=="object"&&n?.mode==="singleRow"&&n?.enableClickSelection?"colDef.spanRows is not supported with rowSelection.clickSelection":i?"colDef.spanRows is not supported with cellSelection.":o?"colDef.spanRows is not supported with suppressRowTransform.":r?s?"colDef.spanRows is not supported with rowDragEntireRow.":a?"colDef.spanRows is not supported with enableCellTextSelection.":null:"colDef.spanRows requires enableCellSpan to be enabled."},groupHierarchy:{validate(t,{groupHierarchyConfig:n={}},i){let o=new Set(["year","quarter","month","formattedMonth","day","hour","minute","second"]),r=[];for(let s of t.groupHierarchy??[]){if(typeof s=="object"){i.validation?.validateColDef(s);continue}!o.has(s)&&!(s in n)&&r.push(yee(s))}if(r.length>0){let s=`The following parts of colDef.groupHierarchy are not recognised: ${r.join(", ")}.`,a=`Choose one of ${[...o].map(yee).join(", ")}, or define your own parts in gridOptions.groupHierarchyConfig.`;return`${s}
${a}`}return null}}}),KFe={headerName:void 0,columnGroupShow:void 0,headerStyle:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,headerTooltipValueGetter:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,spanRows:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,tooltipComponentSelector:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0,dateComponent:void 0,dateComponentParams:void 0,getFindText:void 0,rowGroupingHierarchy:void 0,groupHierarchy:void 0},ZFe=()=>Object.keys(KFe),YFe=()=>({objectName:"colDef",allProperties:ZFe(),docsUrl:"column-properties/",deprecations:UFe(),validations:qFe()}),QFe=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","treeDataChildrenField","treeDataParentIdField","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","invalidEditValueMode","grandTotalRow","themeCssLayer","findSearchValue","styleNonce","renderingMode"],JFe=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","themeStyleContainer","statusBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterParent","advancedFilterBuilderParams","advancedFilterParams","initialState","autoSizeStrategy","selectionColumnDef","findOptions","filterHandlers","groupHierarchyConfig"],XFe=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"],Qne=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns","rowDragInsertDelay"],e2e=["theme","rowSelection"],SV=["cellSelection","sideBar","rowNumbers","suppressGroupChangesColumnVisibility","groupAggFiltering","suppressStickyTotalRow","groupHideParentOfSingleChild","enableRowPinning"],Jne=["loadThemeGoogleFonts","suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","allowContextMenuWithControlKey","suppressContextMenu","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","enableCellSpan","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault","enableFilterHandlers","suppressStartEditOnTab","hidePaddedHeaderRows","ssrmExpandAllAffectsAllRows"],t2e=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getFullRowEditValidationErrors","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","chartMenuItems","groupTotalRow","alwaysPassFilter","isRowPinnable","isRowPinned","isRowValidDropPosition"],n2e=()=>[...XFe,...JFe,...QFe,...Qne,...t2e,...Jne,...SV,...e2e],i2e=()=>({suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."},groupRemoveSingleChildren:{version:"33",message:"Use `groupHideParentOfSingleChild` instead."},groupRemoveLowestSingleChildren:{version:"33",message:'Use `groupHideParentOfSingleChild: "leafGroupsOnly"` instead.'},suppressRowGroupHidesColumns:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressHideOnGroup"` instead.'},suppressMakeColumnVisibleAfterUnGroup:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressShowOnUngroup"` instead.'},unSortIcon:{version:"33",message:"Use `defaultColDef.unSortIcon` instead."},sortingOrder:{version:"33",message:"Use `defaultColDef.sortingOrder` instead."},suppressPropertyNamesCheck:{version:"33",message:"`gridOptions` and `columnDefs` both have a `context` property that should be used for arbitrary user data. This means that column definitions and gridOptions should only contain valid properties making this property redundant."},suppressAdvancedFilterEval:{version:"34",message:"Advanced filter no longer uses function evaluation, so this option has no effect."}});function Tl(e,t,n){return typeof t=="number"||t==null?t==null||t>=n?null:`${e}: value should be greater than or equal to ${n}`:`${e}: value should be a number`}var o2e={alignedGrids:"AlignedGrids",allowContextMenuWithControlKey:"ContextMenu",autoSizeStrategy:"ColumnAutoSize",cellSelection:"CellSelection",columnHoverHighlight:"ColumnHover",datasource:"InfiniteRowModel",doesExternalFilterPass:"ExternalFilter",editType:"EditCore",invalidEditValueMode:"EditCore",enableAdvancedFilter:"AdvancedFilter",enableCellSpan:"CellSpan",enableCharts:"IntegratedCharts",enableRangeSelection:"CellSelection",enableRowPinning:"PinnedRow",findSearchValue:"Find",getFullRowEditValidationErrors:"EditCore",getContextMenuItems:"ContextMenu",getLocaleText:"Locale",getMainMenuItems:"ColumnMenu",getRowClass:"RowStyle",getRowStyle:"RowStyle",groupTotalRow:"SharedRowGrouping",grandTotalRow:"ClientSideRowModelHierarchy",initialState:"GridState",isExternalFilterPresent:"ExternalFilter",isRowPinnable:"PinnedRow",isRowPinned:"PinnedRow",localeText:"Locale",masterDetail:"SharedMasterDetail",pagination:"Pagination",pinnedBottomRowData:"PinnedRow",pinnedTopRowData:"PinnedRow",pivotMode:"SharedPivot",pivotPanelShow:"RowGroupingPanel",quickFilterText:"QuickFilter",rowClass:"RowStyle",rowClassRules:"RowStyle",rowData:"ClientSideRowModel",rowDragManaged:"RowDrag",rowGroupPanelShow:"RowGroupingPanel",rowNumbers:"RowNumbers",rowSelection:"SharedRowSelection",rowStyle:"RowStyle",serverSideDatasource:"ServerSideRowModel",sideBar:"SideBar",statusBar:"StatusBar",treeData:"SharedTreeData",undoRedoCellEditing:"UndoRedoEdit",valueCache:"ValueCache",viewportDatasource:"ViewportRowModel"},r2e=()=>{let e={autoSizePadding:{validate({autoSizePadding:n}){return Tl("autoSizePadding",n,0)}},cacheBlockSize:{supportedRowModels:["serverSide","infinite"],validate({cacheBlockSize:n}){return Tl("cacheBlockSize",n,1)}},cacheOverflowSize:{validate({cacheOverflowSize:n}){return Tl("cacheOverflowSize",n,1)}},datasource:{supportedRowModels:["infinite"]},domLayout:{validate:n=>{let i=n.domLayout,o=["autoHeight","normal","print"];return i&&!o.includes(i)?`domLayout must be one of [${o.join()}], currently it's ${i}`:null}},enableFillHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeSelection:{dependencies:{rowDragEntireRow:{required:[!1,void 0]}}},enableRowPinning:{supportedRowModels:["clientSide"],validate({enableRowPinning:n,pinnedTopRowData:i,pinnedBottomRowData:o}){return n&&(i||o)?"Manual row pinning cannot be used together with pinned row data. Either set `enableRowPinning` to `false`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":null}},isRowPinnable:{supportedRowModels:["clientSide"],validate({enableRowPinning:n,isRowPinnable:i,pinnedTopRowData:o,pinnedBottomRowData:r}){return i&&(o||r)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinnable`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!n&&i?"`isRowPinnable` requires `enableRowPinning` to be set.":null}},isRowPinned:{supportedRowModels:["clientSide"],validate({enableRowPinning:n,isRowPinned:i,pinnedTopRowData:o,pinnedBottomRowData:r}){return i&&(o||r)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinned`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!n&&i?"`isRowPinned` requires `enableRowPinning` to be set.":null}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:{required:[void 0,"bottom"]},treeData:{required:[void 0,!1],reason:"Tree Data has values at the group level so it doesn't make sense to hide them."}}},groupHideParentOfSingleChild:{dependencies:{groupHideOpenParents:{required:[void 0,!1]}}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveSingleChildren:{required:[void 0,!1]}}},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveLowestSingleChildren:{required:[void 0,!1]}}},groupSelectsChildren:{dependencies:{rowSelection:{required:["multiple"]}}},groupHierarchyConfig:{validate({groupHierarchyConfig:n={}},i,o){for(let r of Object.keys(n))o.validation?.validateColDef(n[r]);return null}},icons:{validate:({icons:n})=>{if(n){if(n.smallDown)return Bl(262);if(n.smallLeft)return Bl(263);if(n.smallRight)return Bl(264)}return null}},infiniteInitialRowCount:{validate({infiniteInitialRowCount:n}){return Tl("infiniteInitialRowCount",n,1)}},initialGroupOrderComparator:{supportedRowModels:["clientSide"]},ssrmExpandAllAffectsAllRows:{validate:n=>{if(typeof n.ssrmExpandAllAffectsAllRows=="boolean"){if(n.rowModelType!=="serverSide")return"'ssrmExpandAllAffectsAllRows' is only supported with the Server Side Row Model.";if(n.ssrmExpandAllAffectsAllRows&&typeof n.getRowId!="function")return"'getRowId' callback must be provided for Server Side Row Model grouping to work correctly."}return null}},keepDetailRowsCount:{validate({keepDetailRowsCount:n}){return Tl("keepDetailRowsCount",n,1)}},paginationPageSize:{validate({paginationPageSize:n}){return Tl("paginationPageSize",n,1)}},paginationPageSizeSelector:{validate:n=>{let i=n.paginationPageSizeSelector;return typeof i=="boolean"||i==null||i.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}},pivotMode:{dependencies:{treeData:{required:[!1,void 0],reason:"Pivot Mode is not supported with Tree Data."}}},quickFilterText:{supportedRowModels:["clientSide"]},rowBuffer:{validate({rowBuffer:n}){return Tl("rowBuffer",n,0)}},rowClass:{validate:n=>typeof n.rowClass=="function"?"rowClass should not be a function, please use getRowClass instead":null},rowData:{supportedRowModels:["clientSide"]},rowDragManaged:{supportedRowModels:["clientSide"],dependencies:{pagination:{required:[!1,void 0]}}},rowSelection:{validate({rowSelection:n}){return n&&typeof n=="string"?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':n&&typeof n!="object"?"Expected `RowSelectionOptions` object for the `rowSelection` property.":n&&n.mode!=="multiRow"&&n.mode!=="singleRow"?`Selection mode "${n.mode}" is invalid. Use one of 'singleRow' or 'multiRow'.`:null}},rowStyle:{validate:n=>{let i=n.rowStyle;return i&&typeof i=="function"?"rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead":null}},serverSideDatasource:{supportedRowModels:["serverSide"]},serverSideInitialRowCount:{supportedRowModels:["serverSide"],validate({serverSideInitialRowCount:n}){return Tl("serverSideInitialRowCount",n,1)}},serverSideOnlyRefreshFilteredGroups:{supportedRowModels:["serverSide"]},serverSideSortAllLevels:{supportedRowModels:["serverSide"]},sortingOrder:{validate:n=>{let i=n.sortingOrder;if(Array.isArray(i)&&i.length>0){let o=i.filter(r=>!vw.includes(r));if(o.length>0)return`sortingOrder must be an array with elements from [${vw.map(nI).join()}], currently it includes [${o.map(nI).join()}]`}else if(!Array.isArray(i)||i.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${i}`;return null}},tooltipHideDelay:{validate:n=>n.tooltipHideDelay&&n.tooltipHideDelay<0?"tooltipHideDelay should not be lower than 0":null},tooltipShowDelay:{validate:n=>n.tooltipShowDelay&&n.tooltipShowDelay<0?"tooltipShowDelay should not be lower than 0":null},treeData:{supportedRowModels:["clientSide","serverSide"],validate:n=>{let i=n.rowModelType??"clientSide";switch(i){case"clientSide":{let{treeDataChildrenField:o,treeDataParentIdField:r,getDataPath:s,getRowId:a}=n;if(!o&&!r&&!s)return"treeData requires either 'treeDataChildrenField' or 'treeDataParentIdField' or 'getDataPath' in the clientSide row model.";if(o){if(s)return"Cannot use both 'treeDataChildrenField' and 'getDataPath' at the same time.";if(r)return"Cannot use both 'treeDataChildrenField' and 'treeDataParentIdField' at the same time."}if(r){if(!a)return"getRowId callback not provided, tree data with parent id cannot be built.";if(s)return"Cannot use both 'treeDataParentIdField' and 'getDataPath' at the same time."}return null}case"serverSide":{let o=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${i} row model.`;return n.isServerSideGroup&&n.getServerSideGroupKey?null:o}}return null}},viewportDatasource:{supportedRowModels:["viewport"]},viewportRowModelBufferSize:{validate({viewportRowModelBufferSize:n}){return Tl("viewportRowModelBufferSize",n,0)}},viewportRowModelPageSize:{validate({viewportRowModelPageSize:n}){return Tl("viewportRowModelPageSize",n,1)}},rowDragEntireRow:{dependencies:{cellSelection:{required:[void 0]}}},autoGroupColumnDef:{validate({autoGroupColumnDef:n,showOpenedGroup:i}){return n?.field&&i?"autoGroupColumnDef.field and showOpenedGroup are not supported when used together.":n?.valueGetter&&i?"autoGroupColumnDef.valueGetter and showOpenedGroup are not supported when used together.":null}},renderingMode:{validate:n=>{let i=n.renderingMode,o=["default","legacy"];return i&&!o.includes(i)?`renderingMode must be one of [${o.join()}], currently it's ${i}`:null}},autoSizeStrategy:{validate:({autoSizeStrategy:n})=>{if(!n)return null;let i=["fitCellContents","fitGridWidth","fitProvidedWidth"],o=n.type;return o!=="fitCellContents"&&o!=="fitGridWidth"&&o!=="fitProvidedWidth"?`Invalid Auto-size strategy. \`autoSizeStrategy\` must be one of ${i.map(r=>'"'+r+'"').join(", ")}, currently it's ${o}`:o==="fitProvidedWidth"&&typeof n.width!="number"?`When using the 'fitProvidedWidth' auto-size strategy, must provide a numeric \`width\`. You provided ${n.width}`:null}}},t={};for(let n of Jne)t[n]={expectedType:"boolean"};for(let n of Qne)t[n]={expectedType:"number"};return kr(t,e),t},s2e=()=>({objectName:"gridOptions",allProperties:[...n2e(),...Object.values(wV)],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:i2e(),validations:r2e()}),a2e=0,l2e=0,bee="__ag_grid_instance",c2e=class extends te{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.instanceId=l2e++,this.gridReadyFired=!1,this.queueEvents=[],this.propEventSvc=new bp,this.globalEventHandlerFactory=e=>(t,n)=>{if(!this.isAlive())return;let i=Kk.has(t);if(i&&!e||!i&&e||!d2e(t))return;let o=(r,s)=>{let a=wV[r],l=this.gridOptions[a];typeof l=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>l(s))};if(this.gridReadyFired)o(t,n);else if(t==="gridReady"){o(t,n),this.gridReadyFired=!0;for(let r of this.queueEvents)o(r.eventName,r.event);this.queueEvents=[]}else this.queueEvents.push({eventName:t,event:n})}}wireBeans(e){this.gridOptions=e.gridOptions,this.validation=e.validation,this.api=e.gridApi,this.gridId=e.context.getId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.validateGridOptions(this.gridOptions),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:e})=>{this.updateGridOptions({options:e,force:!0,source:"optionsUpdated"})}})}destroy(){super.destroy(),this.queueEvents=[]}get(e){return this.gridOptions[e]??fke[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return Se(this.gridOptions[e])}mergeGridCommonParams(e){return e&&(n=>e(this.addCommon(n)))}updateGridOptions({options:e,force:t,source:n="api"}){let i={id:a2e++,properties:[]},o=[],{gridOptions:r,validation:s}=this;for(let a of Object.keys(e)){let l=dw.applyGlobalGridOption(a,e[a]);s?.warnOnInitialPropertyUpdate(n,a);let c=t||typeof l=="object"&&n==="api",u=r[a];if(c||u!==l){r[a]=l;let h={type:a,currentValue:l,previousValue:u,changeSet:i,source:n};o.push(h)}}this.validateGridOptions(this.gridOptions),i.properties=o.map(a=>a.type);for(let a of o)fu(this,`Updated property ${a.type} from`,a.previousValue," to ",a.currentValue),this.propEventSvc.dispatchEvent(a)}addPropertyEventListener(e,t){this.propEventSvc.addEventListener(e,t)}removePropertyEventListener(e,t){this.propEventSvc.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}addCommon(e){return e.api=this.api,e.context=this.gridOptionsContext,e}validateOptions(e,t){for(let n of Object.keys(e)){let i=e[n];if(i==null||i===!1)continue;let o=t[n];typeof o=="function"&&(o=o(e,this.gridOptions,this.beans)),o&&this.assertModuleRegistered(o,n)}}validateGridOptions(e){this.validateOptions(e,o2e),this.validation?.processGridOptions(e)}validateColDef(e,t,n){(n||!this.beans.dataTypeSvc?.isColPendingInference(t))&&(this.validateOptions(e,WFe),this.validation?.validateColDef(e))}assertModuleRegistered(e,t){let n=Array.isArray(e)?e.some(i=>this.isModuleRegistered(i)):this.isModuleRegistered(e);return n||On(200,x(g({},this.getModuleErrorParams()),{moduleName:e,reasonOrId:t})),n}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:Q4(),rowModelType:this.get("rowModelType"),isUmd:ute()}}isModuleRegistered(e){return u4(e,this.gridId,this.get("rowModelType"))}setInstanceDomData(e){e[bee]=this.instanceId}isElementInThisInstance(e){let t=e;for(;t;){let n=t[bee];if(Se(n))return n===this.instanceId;t=t.parentElement}return!1}};function d2e(e){return!!wV[e]}function Xne(e){let t={"aria-hidden":"true"};return{tag:"div",cls:"ag-cell-label-container",role:"presentation",children:[{tag:"span",ref:"eMenu",cls:"ag-header-icon ag-header-cell-menu-button",attrs:t},{tag:"span",ref:"eFilterButton",cls:"ag-header-icon ag-header-cell-filter-button",attrs:t},{tag:"div",ref:"eLabel",cls:"ag-header-cell-label",role:"presentation",children:[{tag:"span",ref:"eText",cls:"ag-header-cell-text"},{tag:"span",ref:"eFilter",cls:"ag-header-icon ag-header-label-icon ag-filter-icon",attrs:t},e?{tag:"ag-sort-indicator",ref:"eSortIndicator"}:null]}]}}var u2e=Xne(!0),h2e=Xne(!1),p2e=class extends Mn{constructor(){super(...arguments),this.eFilter=Ce,this.eFilterButton=Ce,this.eSortIndicator=Ce,this.eMenu=Ce,this.eLabel=Ce,this.eText=Ce,this.eSortOrder=Ce,this.eSortAsc=Ce,this.eSortDesc=Ce,this.eSortMixed=Ce,this.eSortNone=Ce,this.isLoadingInnerComponent=!1}refresh(e){let t=this.params;if(this.params=e,this.workOutTemplate(e,!!this.beans?.sortSvc)!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||e.enableSorting!=this.currentSort||this.currentSuppressMenuHide!=null&&this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon)return!1;if(this.innerHeaderComponent){let n=g({},e);kr(n,e.innerHeaderComponentParams),this.innerHeaderComponent.refresh?.(n)}else this.setDisplayName(e);return!0}workOutTemplate(e,t){let n=e.template;return n?n?.trim?n.trim():n:t?u2e:h2e}init(e){this.params=e;let{sortSvc:t,touchSvc:n,rowNumbersSvc:i,userCompFactory:o}=this.beans,r=t?.getSortIndicatorSelector();this.currentTemplate=this.workOutTemplate(e,!!r),this.setTemplate(this.currentTemplate,r?[r]:void 0),n?.setupForHeader(this),this.setMenu(),this.setupSort(),i?.setupForHeader(this),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(o,e),this.setDisplayName(e)}workOutInnerHeaderComponent(e,t){let n=OIe(e,t,t);n&&(this.isLoadingInnerComponent=!0,n.newAgStackInstance().then(i=>{this.isLoadingInnerComponent=!1,i&&(this.isAlive()?(this.innerHeaderComponent=i,this.eText&&this.eText.appendChild(i.getGui())):this.destroyBean(i))}))}setDisplayName(e){let{displayName:t}=e,n=this.currentDisplayName;this.currentDisplayName=t,!(!this.eText||n===t||this.innerHeaderComponent||this.isLoadingInnerComponent)&&(this.eText.textContent=Zg(t))}addInIcon(e,t,n){let i=Xs(e,this.beans,n);i&&t.appendChild(i)}workOutShowMenu(){return this.params.enableMenu&&!!this.beans.menuSvc?.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return!!this.beans.menuSvc?.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){Wr(this.eMenu),this.eMenu=void 0;return}let{gos:e,eMenu:t,params:n}=this,i=Ss(e);this.addInIcon(i?"menu":"menuAlt",t,n.column),t.classList.toggle("ag-header-menu-icon",!i);let o=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=o,this.addManagedElementListeners(t,{click:()=>this.showColumnMenu(this.eMenu)}),this.toggleMenuAlwaysShow(o)}toggleMenuAlwaysShow(e){this.eMenu?.classList.toggle("ag-header-menu-always-show",e)}showColumnMenu(e){let{currentSuppressMenuHide:t,params:n}=this;t||this.toggleMenuAlwaysShow(!0),n.showColumnMenu(e,()=>{t||this.toggleMenuAlwaysShow(!1)})}onMenuKeyboardShortcut(e){let{params:t,gos:n,beans:i,eMenu:o,eFilterButton:r}=this,s=t.column,a=Ss(n);if(e&&!a){if(i.menuSvc?.isFilterMenuInHeaderEnabled(s))return t.showFilter(r??o??this.getGui()),!0}else if(t.enableMenu)return this.showColumnMenu(o??r??this.getGui()),!0;return!1}setupSort(){let{sortSvc:e}=this.beans;if(!e)return;let{enableSorting:t,column:n}=this.params;if(this.currentSort=t,!this.eSortIndicator){this.eSortIndicator=this.createBean(e.createSortIndicator(!0));let{eSortIndicator:i,eSortOrder:o,eSortAsc:r,eSortDesc:s,eSortMixed:a,eSortNone:l}=this;i.attachCustomElements(o,r,s,a,l)}this.eSortIndicator.setupSort(n),this.currentSort&&e.setupHeader(this,n,this.eLabel)}setupFilterIcon(){let{eFilter:e,params:t}=this;if(!e)return;let n=()=>{let i=t.column.isFilterActive();ci(e,i,{skipAriaHidden:!0})};this.configureFilter(t.enableFilterIcon,e,n,"filterActive")}setupFilterButton(){let{eFilterButton:e,params:t}=this;if(!e)return;this.configureFilter(t.enableFilterButton,e,this.onFilterChangedButton.bind(this),"filter")?this.addManagedElementListeners(e,{click:()=>t.showFilter(e)}):this.eFilterButton=void 0}configureFilter(e,t,n,i){if(!e)return Wr(t),!1;let o=this.params.column;return this.addInIcon(i,t,o),this.addManagedListeners(o,{filterChanged:n}),n(),!0}onFilterChangedButton(){let e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){let{eFilterButton:t,eMenu:n}=this;return e?t??n??this.getGui():n??t??this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent&&(this.destroyBean(this.innerHeaderComponent),this.innerHeaderComponent=void 0)}},f2e={tag:"div",cls:"ag-header-group-cell-label",role:"presentation",children:[{tag:"span",ref:"agLabel",cls:"ag-header-group-text",role:"presentation"},{tag:"span",ref:"agOpened",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"},{tag:"span",ref:"agClosed",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"}]},m2e=class extends Mn{constructor(){super(f2e),this.agOpened=Ce,this.agClosed=Ce,this.agLabel=Ce,this.isLoadingInnerComponent=!1}init(e){let{userCompFactory:t,touchSvc:n}=this.beans;this.params=e,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(t,e),this.setupLabel(e),this.addGroupExpandIcon(e),this.setupExpandIcons(),n?.setupForHeaderGroup(this)}checkWarnings(){this.params.template&&ce(89)}workOutInnerHeaderGroupComponent(e,t){let n=LIe(e,t,t);n&&(this.isLoadingInnerComponent=!0,n.newAgStackInstance().then(i=>{this.isLoadingInnerComponent=!1,i&&(this.isAlive()?(this.innerHeaderGroupComponent=i,this.agLabel.appendChild(i.getGui())):this.destroyBean(i))}))}setupExpandIcons(){let{agOpened:e,agClosed:t,params:{columnGroup:n},beans:i}=this;this.addInIcon("columnGroupOpened",e),this.addInIcon("columnGroupClosed",t);let o=l=>{if(Yc(l))return;let c=!n.isExpanded();i.colGroupSvc.setColumnGroupOpened(n.getProvidedColumnGroup(),c,"uiColumnExpanded")};this.addTouchAndClickListeners(i,t,o),this.addTouchAndClickListeners(i,e,o);let r=l=>{xp(l)};this.addManagedElementListeners(t,{dblclick:r}),this.addManagedElementListeners(e,{dblclick:r}),this.addManagedElementListeners(this.getGui(),{dblclick:o}),this.updateIconVisibility();let s=n.getProvidedColumnGroup(),a=this.updateIconVisibility.bind(this);this.addManagedListeners(s,{expandedChanged:a,expandableChanged:a})}addTouchAndClickListeners(e,t,n){e.touchSvc?.setupForHeaderGroupElement(this,t,n),this.addManagedElementListeners(t,{click:n})}updateIconVisibility(){let{agOpened:e,agClosed:t,params:{columnGroup:n}}=this;if(n.isExpandable()){let i=n.isExpanded();ci(e,i),ci(t,!i)}else ci(e,!1),ci(t,!1)}addInIcon(e,t){let n=Xs(e,this.beans,null);n&&t.appendChild(n)}addGroupExpandIcon(e){if(!e.columnGroup.isExpandable()){let{agOpened:t,agClosed:n}=this;ci(t,!1),ci(n,!1)}}setupLabel(e){let{displayName:t,columnGroup:n}=e,i=this.innerHeaderGroupComponent||this.isLoadingInnerComponent;Se(t)&&!i&&(this.agLabel.textContent=Zg(t)),this.toggleCss("ag-sticky-label",!n.getColGroupDef()?.suppressStickyLabel)}destroy(){super.destroy(),this.innerHeaderGroupComponent&&(this.destroyBean(this.innerHeaderGroupComponent),this.innerHeaderGroupComponent=void 0)}},g2e={moduleName:"ColumnHeaderComp",version:we,userComponents:{agColumnHeader:p2e},icons:{menu:"menu",menuAlt:"menu-alt"}},v2e={moduleName:"ColumnGroupHeaderComp",version:we,userComponents:{agColumnGroupHeader:m2e},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}},_2e=class extends te{constructor(){super(...arguments),this.beanName="animationFrameSvc",this.p1={list:[],sorted:!1},this.p2={list:[],sorted:!1},this.f1={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastScrollTop=0,this.taskCount=0}setScrollTop(e){this.scrollGoingDown=e>=this.lastScrollTop,e===0&&(this.scrollGoingDown=!0),this.lastScrollTop=e}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame"),this.batchFrameworkComps=this.beans.frameworkOverrides.batchFrameworkComps}verify(){this.active===!1&&ce(92)}createTask(e,t,n,i,o=!1){this.verify();let r=n;i&&this.batchFrameworkComps&&(r="f1");let s={task:e,index:t,createOrder:++this.taskCount,deferred:o};this.addTaskToList(this[r],s),this.schedule()}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;let t=this.scrollGoingDown?1:-1;e.list.sort((n,i)=>n.deferred!==i.deferred?n.deferred?-1:1:n.index!==i.index?t*(i.index-n.index):i.createOrder-n.createOrder),e.sorted=!0}addDestroyTask(e){this.verify(),this.destroyTasks.push(e),this.schedule()}executeFrame(e){let{p1:t,p2:n,f1:i,destroyTasks:o,beans:r}=this,{ctrlsSvc:s,frameworkOverrides:a}=r,l=t.list,c=n.list,u=i.list,h=Date.now(),f=0,m=e<=0,_=s.getScrollFeature();for(;m||f<e;){if(!_.scrollGridIfNeeded()){let w;if(l.length)this.sortTaskList(t),w=l.pop().task;else if(c.length)this.sortTaskList(n),w=c.pop().task;else if(u.length)a.wrapOutgoing(()=>{for(;(m||f<e)&&!_.scrollGridIfNeeded();){if(u.length)this.sortTaskList(i),w=u.pop().task,w();else break;f=Date.now()-h}}),w=()=>{};else if(o.length)w=o.pop();else break;w()}f=Date.now()-h}l.length||c.length||u.length||o.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){let e=this.executeFrame.bind(this,60);Xc(this.beans,e)}isQueueEmpty(){return!this.ticking}},y2e={moduleName:"AnimationFrame",version:we,beans:[_2e]},b2e=class extends te{constructor(){super(...arguments),this.beanName="iconSvc"}createIconNoSpan(e,t){return Xs(e,this.beans,t?.column)}},C2e=class extends te{constructor(){super(...arguments),this.beanName="touchSvc"}mockBodyContextMenu(e,t){this.mockContextMenu(e,e.eBodyViewport,t)}mockHeaderContextMenu(e,t){this.mockContextMenu(e,e.eGui,t)}mockRowContextMenu(e){if(!vp())return;let t=(n,i,o)=>{let{rowCtrl:r,cellCtrl:s}=e.getControlsForEventTarget(o?.target??null);s?.column&&s.dispatchCellContextMenuEvent(o??null),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(void 0,o,r,s)};this.mockContextMenu(e,e.element,t)}handleCellDoubleClick(e,t){return(()=>{if(!vp()||nte("dblclick"))return!1;let i=Date.now(),o=i-e.lastIPadMouseClickEvent<200;return e.lastIPadMouseClickEvent=i,o})()?(e.onCellDoubleClicked(t),t.preventDefault(),!0):!1}setupForHeader(e){let{gos:t,sortSvc:n,menuSvc:i}=this.beans;if(t.get("suppressTouch"))return;let{params:o,eMenu:r,eFilterButton:s}=e,a=new up(e.getGui(),!0);e.addDestroyFunc(()=>a.destroy());let l=e.shouldSuppressMenuHide(),c=l&&Se(r)&&o.enableMenu,u=a;if(c&&(u=new up(r,!0),e.addDestroyFunc(()=>u.destroy())),o.enableMenu||i?.isHeaderContextMenuEnabled(o.column)){let h=c?"tap":"longTap",f=m=>o.showColumnMenuAfterMouseClick(m.touchStart);e.addManagedListeners(u,{[h]:f}),e.addManagedListeners(a,{longTap:f})}if(o.enableSorting){let h=f=>{let m=f.touchStart.target;l&&(r?.contains(m)||s?.contains(m))||n?.progressSort(o.column,!1,"uiColumnSorted")};e.addManagedListeners(a,{tap:h})}if(o.enableFilterButton&&s){let h=new up(s,!0);e.addManagedListeners(h,{tap:()=>o.showFilter(s)}),e.addDestroyFunc(()=>h.destroy())}}setupForHeaderGroup(e){let t=e.params;if(this.beans.menuSvc?.isHeaderContextMenuEnabled(t.columnGroup.getProvidedColumnGroup())){let n=new up(t.eGridHeader,!0),i=o=>t.showColumnMenuAfterMouseClick(o.touchStart);e.addManagedListeners(n,{longTap:i}),e.addDestroyFunc(()=>n.destroy())}}setupForHeaderGroupElement(e,t,n){let i=new up(t,!0);e.addManagedListeners(i,{tap:n}),e.addDestroyFunc(()=>i.destroy())}mockContextMenu(e,t,n){if(!vp())return;let i=new up(t),o=r=>{cw(this.beans,r.touchEvent)&&n(void 0,r.touchStart,r.touchEvent)};e.addManagedListeners(i,{longTap:o}),e.addDestroyFunc(()=>i.destroy())}},w2e={moduleName:"Touch",version:we,beans:[C2e]},x2e=class extends te{constructor(){super(...arguments),this.beanName="cellNavigation"}wireBeans(e){this.rowSpanSvc=e.rowSpanSvc}getNextCellToFocus(e,t,n=!1){return n?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){let n=e===W.UP,i=e===W.DOWN,o=e===W.LEFT,r,s,{pageBounds:a,gos:l,visibleCols:c,pinnedRowModel:u}=this.beans,{rowPinned:h}=t;if(n||i)h&&u?n?s=0:s=h==="top"?u.getPinnedTopRowCount()-1:u.getPinnedBottomRowCount()-1:s=n?a.getFirstRow():a.getLastRow(),r=t.column;else{let f=l.get("enableRtl");s=t.rowIndex,r=(o!==f?c.allCols:[...c.allCols].reverse()).find(_=>this.isCellGoodToFocusOn({rowIndex:s,rowPinned:null,column:_}))}return r?{rowIndex:s,rowPinned:h,column:r}:null}getNextCellToFocusWithoutCtrlPressed(e,t){let n=t,i=!1;for(;!i;){switch(e){case W.UP:n=this.getCellAbove(n);break;case W.DOWN:n=this.getCellBelow(n);break;case W.RIGHT:n=this.gos.get("enableRtl")?this.getCellToLeft(n):this.getCellToRight(n);break;case W.LEFT:n=this.gos.get("enableRtl")?this.getCellToRight(n):this.getCellToLeft(n);break;default:n=null,ce(8,{key:e});break}n?i=this.isCellGoodToFocusOn(n):i=!0}return n}isCellGoodToFocusOn(e){let t=e.column,n,{pinnedRowModel:i,rowModel:o}=this.beans;switch(e.rowPinned){case"top":n=i?.getPinnedTopRow(e.rowIndex);break;case"bottom":n=i?.getPinnedBottomRow(e.rowIndex);break;default:n=o.getRow(e.rowIndex);break}return n?!this.isSuppressNavigable(t,n):!1}getCellToLeft(e){if(!e)return null;let t=this.beans.visibleCols.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;let t=this.beans.visibleCols.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellBelow(e){if(!e)return null;let t=this.rowSpanSvc?.getCellEnd(e)??e,n=see(this.beans,t,!0);return n?{rowIndex:n.rowIndex,column:e.column,rowPinned:n.rowPinned}:null}getCellAbove(e){if(!e)return null;let t=this.rowSpanSvc?.getCellStart(e)??e,n=fI(this.beans,{rowIndex:t.rowIndex,rowPinned:t.rowPinned},!0);return n?{rowIndex:n.rowIndex,column:e.column,rowPinned:n.rowPinned}:null}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){let{visibleCols:t,pagination:n}=this.beans,i=t.allCols,o=e.rowIndex,r=e.rowPinned,s=t.getColAfter(e.column);if(!s){s=i[0];let a=see(this.beans,e,!0);if(di(a)||!a.rowPinned&&!(n?.isRowInPage(a.rowIndex)??!0))return null;o=a?a.rowIndex:null,r=a?a.rowPinned:null}return{rowIndex:o,column:s,rowPinned:r}}getNextTabbedCellBackwards(e){let{beans:t}=this,{visibleCols:n,pagination:i}=t,o=n.allCols,r=e.rowIndex,s=e.rowPinned,a=n.getColBefore(e.column);if(!a){a=Hn(o);let l=fI(t,{rowIndex:e.rowIndex,rowPinned:e.rowPinned},!0);if(di(l)||!l.rowPinned&&!(i?.isRowInPage(l.rowIndex)??!0))return null;r=l?l.rowIndex:null,s=l?l.rowPinned:null}return{rowIndex:r,column:a,rowPinned:s}}isSuppressNavigable(e,t){let{suppressNavigable:n}=e.colDef;if(typeof n=="boolean")return n;if(typeof n=="function"){let i=e.createColumnFunctionCallbackParams(t);return n(i)}return!1}};function S2e(e){return e.focusSvc.getFocusedCell()}function E2e(e){return e.focusSvc.clearFocusedCell()}function D2e(e,t,n,i){e.focusSvc.setFocusedCell({rowIndex:t,column:n,rowPinned:i,forceBrowserFocus:!0})}function k2e(e,t){return e.navigation?.tabToNextCell(!1,t)??!1}function I2e(e,t){return e.navigation?.tabToNextCell(!0,t)??!1}function M2e(e,t,n=!1){let i=e.headerNavigation?.getHeaderPositionForColumn(t,n);i&&e.focusSvc.focusHeaderPosition({headerPosition:i})}var R2e=class extends te{constructor(){super(...arguments),this.beanName="editModelSvc",this.edits=new Map,this.cellValidations=new eie,this.rowValidations=new tie,this.suspendEdits=!1}suspend(e){this.suspendEdits=e}removeEdits({rowNode:e,column:t}){if(!this.hasEdits({rowNode:e})||!e)return;let n=this.getEditRow(e);t?n.delete(t):n.clear(),n.size===0&&this.edits.delete(e)}getEditRow(e,t={}){if(this.suspendEdits||this.edits.size===0)return;let n=e&&this.edits.get(e);if(n)return n;if(t.checkSiblings){let i=e.pinnedSibling;if(i)return this.getEditRow(i)}}getEditRowDataValue(e,{checkSiblings:t}={}){if(!e||this.edits.size===0)return;let n=this.getEditRow(e),i=e.pinnedSibling,o=t&&i&&this.getEditRow(i);if(!n&&!o)return;let r=Object.assign({},e.data),s=(a,l)=>a.forEach(({pendingValue:c},u)=>{c!==ea&&(l[u.getColId()]=c)});return n&&s(n,r),o&&s(o,r),r}getEdit(e,t){let n=this._getEdit(e);return t&&n?g({},n):n}_getEdit(e){if(!this.suspendEdits&&this.edits.size!==0)return e.rowNode&&e.column&&this.getEditRow(e.rowNode)?.get(e.column)}getEditMap(e=!0){if(this.suspendEdits||this.edits.size===0)return new Map;if(!e)return this.edits;let t=new Map;return this.edits.forEach((n,i)=>{let o=new Map;n.forEach((l,a)=>{var c=l,{editorState:r}=c,s=Be(c,["editorState"]);return o.set(a,g({},s))}),t.set(i,o)}),t}setEditMap(e){this.edits.clear(),e.forEach((t,n)=>{let i=new Map;t.forEach((o,r)=>i.set(r,g({},o))),this.edits.set(n,i)})}setEdit(e,t){(this.edits.size===0||!this.edits.has(e.rowNode))&&this.edits.set(e.rowNode,new Map);let n=this._getEdit(e),i=Object.assign(g(g({editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}},n),t));return this.getEditRow(e.rowNode).set(e.column,i),i}clearEditValue(e){let{rowNode:t,column:n}=e;if(t)if(n){let i=this._getEdit(e);i&&(i.editorValue=void 0,i.pendingValue=i.sourceValue,i.state="changed")}else this.getEditRow(t)?.forEach(i=>{i.editorValue=void 0,i.pendingValue=i.sourceValue,i.state="changed"})}getState(e){if(!this.suspendEdits)return this.getEdit(e)?.state}getEditPositions(e){if(this.suspendEdits||(e??this.edits).size===0)return[];let t=[];return(e??this.edits).forEach((n,i)=>{for(let r of n.keys()){let o=n.get(r),{editorState:s}=o,a=Be(o,["editorState"]);t.push(g({rowNode:i,column:r},a))}}),t}hasRowEdits(e,t){return this.suspendEdits||this.edits.size===0?!1:!!this.getEditRow(e,t)}hasEdits(e={},t={}){if(this.suspendEdits||this.edits.size===0)return!1;let{rowNode:n,column:i}=e,{withOpenEditor:o}=t;if(n){let r=this.getEditRow(n,t);return r?i?o?this.getEdit(e)?.state==="editing":r.has(i)??!1:r.size!==0?o?Array.from(r.values()).some(({state:s})=>s==="editing"):!0:!1:!1}return o?this.getEditPositions().some(({state:r})=>r==="editing"):this.edits.size>0}start(e){let t=this.getEditRow(e.rowNode)??new Map,{rowNode:n,column:i}=e;i&&!t.has(i)&&t.set(i,{editorValue:void 0,pendingValue:ea,sourceValue:this.beans.valueSvc.getValue(i,n,!1,"api"),state:"editing",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}}),this.edits.set(n,t)}stop(e){this.hasEdits(e)&&(e?this.removeEdits(e):this.clear())}clear(){for(let e of this.edits.values())e.clear();this.edits.clear()}getCellValidationModel(){return this.cellValidations}getRowValidationModel(){return this.rowValidations}setCellValidationModel(e){this.cellValidations=e}setRowValidationModel(e){this.rowValidations=e}destroy(){super.destroy(),this.clear()}},eie=class{constructor(){this.cellValidations=new Map}getCellValidation(e){let{rowNode:t,column:n}=e||{};return this.cellValidations?.get(t)?.get(n)}hasCellValidation(e){return!e?.rowNode||!e.column?this.cellValidations.size>0:!!this.getCellValidation(e)}setCellValidation(e,t){let{rowNode:n,column:i}=e;this.cellValidations.has(n)||this.cellValidations.set(n,new Map),this.cellValidations.get(n).set(i,t)}clearCellValidation(e){let{rowNode:t,column:n}=e;this.cellValidations.get(t)?.delete(n)}setCellValidationMap(e){this.cellValidations=e}getCellValidationMap(){return this.cellValidations}clearCellValidationMap(){this.cellValidations.clear()}},tie=class{constructor(){this.rowValidations=new Map}getRowValidation(e){let{rowNode:t}=e||{};return this.rowValidations.get(t)}hasRowValidation(e){return e?.rowNode?!!this.getRowValidation(e):this.rowValidations.size>0}setRowValidation({rowNode:e},t){this.rowValidations.set(e,t)}clearRowValidation({rowNode:e}){this.rowValidations.delete(e)}setRowValidationMap(e){this.rowValidations=e}getRowValidationMap(){return this.rowValidations}clearRowValidationMap(){this.rowValidations.clear()}};function EV(e,t={}){let{rowIndex:n,rowId:i,rowCtrl:o,rowPinned:r}=t;if(o)return o;let{rowModel:s,rowRenderer:a}=e,{rowNode:l}=t;return l||(i?l=nAe(e,i,r):n!=null&&(l=s.getRow(n))),a.getRowCtrls(l?[l]:[])?.[0]}function gi(e,t={}){let{cellCtrl:n,colId:i,columnId:o,column:r}=t;if(n)return n;let s=e.colModel.getCol(i??o??F4(r)),a=t.rowCtrl??EV(e,t),l=a?.getCellCtrl(s)??void 0;if(l)return l;let c=t.rowNode??a?.rowNode;if(c)return e.rowRenderer.getCellCtrls([c],[s])?.[0]}function Cee(e){let{editSvc:t}=e;t?.isBatchEditing()?Hg(e):t?.stopEditing(void 0,{source:"api"})}function T2e(e,t,n){let{gos:i,popupSvc:o}=t;if(!i.get("stopEditingWhenCellsLoseFocus"))return;let r=s=>{let a=s.relatedTarget;if(y4(a)===null){Cee(t);return}let l=n.some(c=>c.contains(a))&&i.isElementInThisInstance(a);l||(l=!!o&&(o.getActivePopups().some(c=>c.contains(a))||o.isElementWithinCustomPopup(a))),l||Cee(t)};for(let s of n)e.addManagedElementListeners(s,{focusout:r})}function F4(e){if(e)return typeof e=="string"?e:e.getColId()}var ea=Symbol("unedited");function nie(e,t={}){let n=[],i=e.rowRenderer.getCellCtrls(t.rowNodes,t.columns);for(let o of i){let r=o.comp?.getCellEditor();r&&n.push({ctrl:o,editor:fw(r)})}return n}var P2e=(e,t={})=>nie(e,t).map(n=>n.editor);function A2e(e,t,n,i,o,r){t.length===0&&n?.rowNode&&n?.column&&Kg(e,n,{key:i,event:o,cellStartedEdit:r});let{valueSvc:s,editSvc:a,editModelSvc:l}=e,{rowNode:c,column:u}=n??{};for(let h of t){let{rowNode:f,column:m}=h,_=gi(e,h);if(!_){if(f&&m){let w=s.getValue(m,f,void 0,"api"),I=(n?.rowNode===f&&n?.column===m&&i||void 0)??a?.getCellDataValue(h,!1)??s.getValueForDisplay(m,f)?.value??w??ea;l?.setEdit(h,{pendingValue:I,sourceValue:w,state:"editing"})}continue}let y=r&&c===_.rowNode&&_.column===u;Kg(e,{rowNode:c,column:_.column},{key:y?i:null,event:y?o:null,cellStartedEdit:y&&r})}}function Wc({pendingValue:e,sourceValue:t}){return e===ea&&(e=t),e!==t}function Kg(e,t,n){let i=e.gos.get("enableGroupEdit"),{key:o,event:r,cellStartedEdit:s,silent:a}=n??{},l=gi(e,t),c=l?.comp?.getCellEditor(),u=oie(e,t,o,s&&!a),h=e.editModelSvc?.getEdit(t),f=u.value;if(f===void 0&&(f=h?.sourceValue),e.editModelSvc?.setEdit(t,{editorValue:f,state:"editing"}),c){c.refresh?.(u);return}let m=t.column.getColDef(),_=jte(e.userCompFactory,m,u),y=_?.popupFromSelector!=null?_.popupFromSelector:!!m.cellEditorPopup,w=_?.popupPositionFromSelector!=null?_.popupPositionFromSelector:m.cellEditorPopupPosition;if(rie(_.params,r),l){l.editCompDetails=_,l.onEditorAttachedFuncs.push(()=>l.rangeFeature?.unsetComp()),l.comp?.setEditDetails(_,y,w,e.gos.get("reactiveCustomComponents")),l?.rowCtrl?.refreshRow({suppressFlash:!0});let C=e.editModelSvc?.getEdit(t,!0);!a&&!C?.editorState?.cellStartedEditing&&(e.editSvc?.dispatchCellEvent(t,r,"cellEditingStarted",i?{value:f}:{}),e.editModelSvc?.setEdit(t,{editorState:{cellStartedEditing:!0}}))}}function iie(e,t,n){let i={editorValueExists:!1};if(DV(e)&&(t.getValidationErrors?.()?.length??0)>0||n?.isCancelling)return i;if(n?.isStopping){let r=t?.isCancelAfterEnd?.();if(r)return x(g({},i),{isCancelAfterEnd:r})}return{editorValue:t.getValue(),editorValueExists:!0}}function oie(e,t,n,i){let{valueSvc:o,gos:r,editSvc:s}=e,a=e.gos.get("enableGroupEdit"),l=gi(e,t),c=t.rowNode?.rowIndex??void 0,u=s?.isBatchEditing(),h=e.colModel.getCol(t.column.getId()),{rowNode:f,column:m}=t,_=l.comp?.getCellEditor(),y=s?.getCellDataValue(t,!1),w=y===void 0?_?iie(e,_)?.editorValue:void 0:y,C=w===ea?o.getValueForDisplay(h,f)?.value:w;return at(r,{value:a?w:C,eventKey:n??null,column:m,colDef:m.getColDef(),rowIndex:c,node:f,data:f.data,cellStartedEdit:i??!1,onKeyDown:l?.onKeyDown.bind(l),stopEditing:S=>{s.stopEditing(t,{source:u?"ui":"api",suppressNavigateAfterEdit:S}),mI(e,t)},eGridCell:l?.eGui,parseValue:S=>o.parseValue(h,f,S,l?.value),formatValue:l?.formatValue.bind(l),validate:()=>{s?.validateEdit()}})}function L4(e,t){let{editModelSvc:n}=e;n?.getEditMap().forEach((i,o)=>{i.forEach((r,s)=>{!t&&(r.state==="editing"||r.pendingValue===ea)||!Wc(r)&&(r.state!=="editing"||t)&&n?.removeEdits({rowNode:o,column:s})})})}function O2e(e,t){let n=t.comp?.getCellEditor();if(!n?.refresh)return;let{eventKey:i,cellStartedEdit:o}=t.editCompDetails.params,{column:r}=t,s=oie(e,t,i,o),a=r.getColDef(),l=jte(e.userCompFactory,a,s);n.refresh(rie(l.params,i))}function rie(e,t){return t instanceof KeyboardEvent&&e.column.getColDef().cellEditor==="agNumberCellEditor"?e.suppressPreventDefault=["-","+",".","e"].includes(t?.key??"")||e.suppressPreventDefault:t?.preventDefault?.(),e}function pp(e,t){for(let n of e.editModelSvc?.getEditPositions()??[]){let i=gi(e,n);if(!i)continue;let o=i.comp?.getCellEditor();if(!o)continue;let{editorValue:r,editorValueExists:s,isCancelAfterEnd:a}=iie(e,o,t);a&&e.editModelSvc?.setEdit(n,{editorState:{isCancelAfterEnd:a}}),Zk(e,n,r,void 0,!s,t)}}function Zk(e,t,n,i,o,r){let{editModelSvc:s,valueSvc:a}=e;if(!s)return;let{rowNode:l,column:c}=t;if(!(l&&c))return;let u=s.getEdit(t,!0);u?.sourceValue||(u=s.setEdit(t,{sourceValue:a.getValue(c,l,void 0,"api"),pendingValue:u?u.editorValue:ea})),s.setEdit(t,{editorValue:o?u.sourceValue:n}),r?.persist&&F2e(e,t)}function F2e(e,t){let{editModelSvc:n}=e,i=n?.getEdit(t,!0);n?.setEdit(t,{pendingValue:i?.editorValue})}function Hg(e,t,n){t||(t=e.editModelSvc?.getEditPositions());for(let i of t??[])mI(e,i,n)}function mI(e,t,n){let i=e.gos.get("enableGroupEdit"),{editModelSvc:o}=e,r=gi(e,t),s=o?.getEdit(t,!0);if(!r){s&&o?.setEdit(t,{state:"changed"});return}let{comp:a}=r;if(a&&!a.getCellEditor()){if(r?.refreshCell(),s){o?.setEdit(t,{state:"changed"});let c=i?wee(n,s):{valueChanged:!1,newValue:void 0,oldValue:s.sourceValue};xee(e,t,c,n)}return}if(DV(e)){let c=a?.getCellEditor()?.getValidationErrors?.(),u=o?.getCellValidationModel();c?.length?u?.setCellValidation(t,{errorMessages:c}):u?.clearCellValidation(t)}o?.setEdit(t,{state:"changed"}),a?.setEditDetails(),a?.refreshEditStyles(!1,!1),r?.refreshCell({force:!0,suppressFlash:!0});let l=o?.getEdit(t);if(l&&l.state==="changed"){let c=i?wee(n,l):{valueChanged:Wc(l)&&!n?.cancel,newValue:n?.cancel||l.editorState.isCancelAfterEnd?void 0:l?.editorValue??s?.pendingValue,oldValue:l?.sourceValue};xee(e,t,c,n)}}function wee(e,t){return e?.cancel?{valueChanged:!1,oldValue:t.sourceValue,newValue:void 0,value:t.sourceValue}:{valueChanged:!1,oldValue:t.sourceValue,newValue:t.pendingValue,value:t.sourceValue}}function xee(e,t,n,{silent:i,event:o}={}){let{editSvc:r,editModelSvc:s}=e,a=s?.getEdit(t),{editorState:l}=a||{},{isCancelBeforeStart:c}=l||{};!i&&!c&&(r?.dispatchCellEvent(t,o,"cellEditingStopped",n),s?.setEdit(t,{editorState:{cellStoppedEditing:!0}}))}function DV(e){let{gos:t,colModel:n}=e,i=!!t.get("getFullRowEditValidationErrors"),o=n.getColumnDefs()?.filter(s=>s.editable).some(({cellEditorParams:s})=>{let{minLength:a,maxLength:l,getValidationErrors:c,min:u,max:h}=s||{};return a!==void 0||l!==void 0||c!==void 0||u!==void 0||h!==void 0}),r=e.gridApi.getCellEditorInstances().some(s=>s.getValidationElement||s.getValidationErrors);return o||i||r}function Sp(e,t){if(!(t||DV(e)))return;let n=nie(e),i=new eie,{ariaAnnounce:o,localeSvc:r,editModelSvc:s,gos:a}=e,l=a.get("editType")==="fullRow",u=ote(r)("ariaValidationErrorPrefix","Cell Editor Validation");for(let f of n){let{ctrl:m,editor:_}=f,{rowNode:y,column:w}=m,C=_.getValidationErrors?.()??[],S=_.getValidationElement?.(!1)||!_.isPopup?.()&&m.eGui;if(S){let I=C!=null&&C.length>0,O=I?C.join(". "):"";PDe(S,I),I&&o.announceValue(`${u} ${C}`,"editorValidation"),S instanceof HTMLInputElement?S.setCustomValidity(O):S.classList.toggle("invalid",I)}C?.length>0&&i.setCellValidation({rowNode:y,column:w},{errorMessages:C})}pp(e,{persist:!1}),s?.setCellValidationModel(i);let h=new Set;for(let{ctrl:f}of n)h.add(f.rowCtrl);if(l){let f=L2e(e);s?.setRowValidationModel(f)}for(let f of h.values()){f.rowEditStyleFeature?.applyRowStyles();for(let m of f.getAllCellCtrls())m.tooltipFeature?.refreshTooltip(!0),m.editorTooltipFeature?.refreshTooltip(!0),m.editStyleFeature?.applyCellStyles?.()}}var L2e=e=>{let t=new tie,n=e.gos.get("getFullRowEditValidationErrors"),i=e.editModelSvc?.getEditMap();if(!i)return t;for(let o of i.keys()){let r=i.get(o);if(!r)continue;let s=[],{rowIndex:a,rowPinned:l}=o;for(let u of r.keys()){let h=r.get(u);if(!h)continue;let{editorValue:f,pendingValue:m,sourceValue:_}=h,y=f??(m===ea?void 0:m)??_;s.push({column:u,colId:u.getColId(),rowIndex:a,rowPinned:l,oldValue:_,newValue:y})}let c=n?.({editorsState:s})??[];c.length>0&&t.setRowValidation({rowNode:o},{errorMessages:c})}return t};function N2e(e){Sp(e,!0);let t=e.editModelSvc?.getCellValidationModel().getCellValidationMap();if(!t)return null;let n=[];return t.forEach((i,o)=>{i.forEach(({errorMessages:r},s)=>{n.push({column:s,rowIndex:o.rowIndex,rowPinned:o.rowPinned,messages:r??null})})}),n}function B2e(e,t,n,{rowNode:i,column:o},r){return at(e.gos,{type:n,node:i,data:i.data,value:r,column:o,colDef:o.getColDef(),rowPinned:i.rowPinned,event:t,rowIndex:i.rowIndex})}function z2e(e,t=!1){return e===W.DELETE?!0:!t&&e===W.BACKSPACE?Wte():!1}var V2e=class extends te{constructor(e,t,n,i){super(),this.cellCtrl=e,this.rowNode=n,this.rowCtrl=i,this.beans=t}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(e){let t=e.key;switch(t){case W.ENTER:this.onEnterKeyDown(e);break;case W.F2:this.onF2KeyDown(e);break;case W.ESCAPE:this.onEscapeKeyDown(e);break;case W.TAB:this.onTabKeyDown(e);break;case W.BACKSPACE:case W.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case W.DOWN:case W.UP:case W.RIGHT:case W.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){let{cellCtrl:n,beans:i}=this;if(!i.editSvc?.isEditing(n,{withOpenEditor:!0})){if(e.shiftKey&&n.isRangeSelectionEnabled())this.onShiftRangeSelect(e);else{let o=n.getFocusedCellPosition();i.navigation?.navigateToNextCell(e,t,o,!0)}e.preventDefault()}}onShiftRangeSelect(e){let{rangeSvc:t,navigation:n}=this.beans;if(!t)return;let i=t.extendLatestRangeInDirection(e);i&&(e.key===W.LEFT||e.key===W.RIGHT?n?.ensureColumnVisible(i.column):n?.ensureRowVisible(i.rowIndex))}onTabKeyDown(e){this.beans.navigation?.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){let{cellCtrl:n,beans:i,rowNode:o}=this,{gos:r,rangeSvc:s,eventSvc:a,editSvc:l}=i;if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),z2e(e,r.get("enableCellEditingOnBackspace"))&&!l?.isEditing(n,{withOpenEditor:!0})){if(s&&Qc(r))s.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(n.isCellEditable()){let{column:c}=n,u=this.beans.valueSvc.getDeleteValue(c,o);o.setDataValue(c,u,"cellClear")}}else l?.isEditing(n,{withOpenEditor:!0})||i.editSvc?.startEditing(n,{startedEdit:!0,event:t});a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}onEnterKeyDown(e){let{cellCtrl:t,beans:n}=this,{editSvc:i,navigation:o}=n,r=i?.isEditing(t,{withOpenEditor:!0}),s=t.rowNode,a=i?.isRowEditing(s,{withOpenEditor:!0}),l=c=>{i?.startEditing(c,{startedEdit:!0,event:e,source:"edit"})&&e.preventDefault()};if(r||a){if(this.isCtrlEnter(e)){i?.applyBulkEdit(t,n?.rangeSvc?.getCellRanges()||[]);return}if(Sp(n),i?.checkNavWithValidation(void 0,e)==="block-stop")return;i?.isEditing(t,{withOpenEditor:!0})?i?.stopEditing(t,{event:e,source:"edit"}):a&&!t.isCellEditable()?i?.stopEditing({rowNode:s},{event:e,source:"edit"}):l(t)}else if(n.gos.get("enterNavigatesVertically")){let c=e.shiftKey?W.UP:W.DOWN;o?.navigateToNextCell(null,c,t.cellPosition,!1)}else{if(i?.hasValidationErrors())return;i?.hasValidationErrors(t)&&i.revertSingleCellEdit(t,!0),l(t)}}isCtrlEnter(e){return(e.ctrlKey||e.metaKey)&&e.key===W.ENTER}onF2KeyDown(e){let{cellCtrl:t,beans:{editSvc:n}}=this;n?.isEditing()&&(Sp(this.beans),n?.checkNavWithValidation(void 0,e)==="block-stop")||n?.startEditing(t,{startedEdit:!0,event:e})}onEscapeKeyDown(e){let{cellCtrl:t,beans:{editSvc:n}}=this;n?.checkNavWithValidation(t,e)==="block-stop"&&n.revertSingleCellEdit(t),n?.stopEditing(t,{event:e,cancel:!0})}processCharacter(e){let n=e.target!==this.eGui,{beans:{editSvc:i},cellCtrl:o}=this;if(n||i?.isEditing(o,{withOpenEditor:!0}))return;if(e.key===W.SPACE)this.onSpaceKeyDown(e);else if(i?.isCellEditable(o,"ui")){if(i?.hasValidationErrors()&&!i?.hasValidationErrors(o))return;i?.startEditing(o,{startedEdit:!0,event:e,source:"api"}),!o.editCompDetails?.params?.suppressPreventDefault&&e.preventDefault()}}onSpaceKeyDown(e){let{gos:t,editSvc:n}=this.beans,{rowNode:i}=this.cellCtrl;!n?.isEditing(this.cellCtrl,{withOpenEditor:!0})&&mp(t)&&this.beans.selectionSvc?.handleSelectionEvent(e,i,"spaceKey"),e.preventDefault()}},H2e=class extends te{constructor(e,t,n){super(),this.cellCtrl=e,this.column=n,this.beans=t}onMouseEvent(e,t){if(!Yc(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.beans.touchSvc?.handleCellDoubleClick(this,e))return;let{eventSvc:t,rangeSvc:n,editSvc:i,editModelSvc:o,frameworkOverrides:r,gos:s}=this.beans,a=e.ctrlKey||e.metaKey,{cellCtrl:l}=this,{column:c,cellPosition:u,rowNode:h}=l,f=Gk(s,c,h,e);n&&a&&!f&&n.getCellRangeCount(u)>1&&n.intersectLastRange(!0);let m=l.createEvent(e,"cellClicked");m.isEventHandlingSuppressed=f,t.dispatchEvent(m);let _=c.getColDef();if(_.onCellClicked&&window.setTimeout(()=>{r.wrapOutgoing(()=>{_.onCellClicked(m)})},0),!f&&o?.getState(l)!=="editing"){let y=i?.isEditing(),w=o?.getCellValidationModel().getCellValidationMap().size??0,C=o?.getRowValidationModel().getRowValidationMap().size??0;if(y&&(w>0||C>0))return;i?.shouldStartEditing(l,e)?i?.startEditing(l,{event:e}):i?.shouldStopEditing(l,e)&&(this.beans.gos.get("editType")==="fullRow"?i?.stopEditing(l,{event:e,source:"edit"}):i?.stopEditing(void 0,{event:e,source:"edit"}))}}onCellDoubleClicked(e){let{column:t,beans:n,cellCtrl:i}=this,{eventSvc:o,frameworkOverrides:r,editSvc:s,editModelSvc:a,gos:l}=n,c=Gk(l,i.column,i.rowNode,e),u=t.getColDef(),h=i.createEvent(e,"cellDoubleClicked");if(h.isEventHandlingSuppressed=c,o.dispatchEvent(h),typeof u.onCellDoubleClicked=="function"&&window.setTimeout(()=>{r.wrapOutgoing(()=>{u.onCellDoubleClicked(h)})},0),!c&&s?.shouldStartEditing(i,e)&&a?.getState(i)!=="editing"){let f=s?.isEditing(),m=a?.getCellValidationModel().getCellValidationMap().size??0,_=a?.getRowValidationModel().getRowValidationMap().size??0;if(f&&(m>0||_>0))return;s?.startEditing(i,{event:e})}}onMouseDown(e){let{ctrlKey:t,metaKey:n,shiftKey:i}=e,o=e.target,{cellCtrl:r,beans:s}=this,{eventSvc:a,rangeSvc:l,rowNumbersSvc:c,focusSvc:u,gos:h,editSvc:f}=s,{column:m,rowNode:_,cellPosition:y}=r,w=Gk(h,m,_,e),C=()=>{let F=r.createEvent(e,"cellMouseDown");F.isEventHandlingSuppressed=w,a.dispatchEvent(F)};if(w){C();return}if(this.isRightClickInExistingRange(e))return;let S=l&&!l.isEmpty(),I=this.containsWidget(o),O=Kc(m);if(c&&O&&!c.handleMouseDownOnCell(y,e)){l&&e.preventDefault(),e.stopImmediatePropagation();return}if(!i||!S){let F=f?.isEditing(r),j=h.get("enableCellTextSelection")&&e.defaultPrevented,re=(bu()||j)&&!F&&!YC(o)&&!I;r.focusCell(re,e)}if(i&&S&&!u.isCellFocused(y)){e.preventDefault();let F=u.getFocusedCell();if(F){let{column:H,rowIndex:j,rowPinned:re}=F;f?.isEditing(F)&&f?.stopEditing(F),u.setFocusedCell({column:H,rowIndex:j,rowPinned:re,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,sourceEvent:e})}}if(!I){if(l){O&&e.preventDefault();let F=kX(s,e)&&O;if(i)l.extendLatestRangeToCell(y);else if(!F){let H=t||n;l.setRangeToCell(y,H)}}C()}}isRightClickInExistingRange(e){let{rangeSvc:t}=this.beans;if(t){let n=t.isCellInAnyRange(this.cellCtrl.cellPosition),i=kX(this.beans,e);if(n&&i)return!0}return!1}containsWidget(e){return fp(e,"ag-selection-checkbox",3)||fp(e,"ag-drag-handle",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;let{eventSvc:t,colHover:n}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),n?.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;let{eventSvc:t,colHover:n}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),n?.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;let t=this.cellCtrl.eGui,n=t.contains(e.target),i=t.contains(e.relatedTarget);return n&&i}},$2e=class extends te{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.column,this.rowNode=e.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}init(){this.eSetLeft=this.cellCtrl.getRootElement(),this.eContent=this.cellCtrl.eGui;let e=this.cellCtrl.getCellSpan();if(e||(this.setupColSpan(),this.setupRowSpan()),this.onLeftChanged(),this.onWidthChanged(),e||this._legacyApplyRowSpan(),e){let t=this.refreshSpanHeight.bind(this,e);t(),this.addManagedListeners(this.beans.eventSvc,{paginationChanged:t,recalculateRowBounds:t,pinnedHeightChanged:t})}}refreshSpanHeight(e){let t=e.getCellHeight();t!=null&&(this.eContent.style.height=`${t}px`)}onNewColumnsLoaded(){let e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this._legacyApplyRowSpan(!0))}onDisplayColumnsChanged(){let e=this.getColSpanningList();yu(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eContent)return;let e=this.getCellWidth();this.eContent.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){let{column:e,rowNode:t}=this,n=e.getColSpan(t),i=[];if(n===1)i.push(e);else{let o=e,r=e.getPinned();for(let s=0;o&&s<n&&(i.push(o),o=this.beans.visibleCols.getColAfter(o),!(!o||di(o)||r!==o.getPinned()));s++);}return i}onLeftChanged(){if(!this.eSetLeft)return;let e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=Hn(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.printLayout||this.column.getPinned()==="left")return e;let{visibleCols:t}=this.beans,n=t.getColsLeftWidth();if(this.column.getPinned()==="right"){let i=t.bodyWidth;return n+i+(e||0)}return n+(e||0)}_legacyApplyRowSpan(e){if(this.rowSpan===1&&!e)return;let n=gp(this.beans)*this.rowSpan;this.eContent.style.height=`${n}px`,this.eContent.style.zIndex="1"}destroy(){super.destroy()}},j2e="ag-cell",G2e="ag-cell-auto-height",U2e="ag-cell-normal-height",W2e="ag-cell-focus",q2e="ag-cell-first-right-pinned",K2e="ag-cell-last-left-pinned",Z2e="ag-cell-not-inline-editing",Y2e="ag-cell-wrap-text",Q2e=0,$g=class extends te{constructor(e,t,n,i){super(),this.column=e,this.rowNode=t,this.rowCtrl=i,this.rangeFeature=void 0,this.rowResizeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.editStyleFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.focusEventWhileNotReady=null,this.hasBeenFocused=!1,this.hasEdit=!1,this.tooltipFeature=void 0,this.editorTooltipFeature=void 0,this.beans=n,this.gos=n.gos,this.editSvc=n.editSvc,this.hasEdit=!!n.editSvc;let{colId:o}=e;this.instanceId=o+"-"+Q2e++,this.createCellPosition(),this.updateAndFormatValue(!1)}addFeatures(){let{beans:e}=this;this.positionFeature=new $2e(this,e),this.customStyleFeature=e.cellStyles?.createCellCustomStyleFeature(this,e),this.editStyleFeature=e.editSvc?.createCellStyleFeature(this,e),this.mouseListener=new H2e(this,e,this.column),this.keyboardListener=new V2e(this,e,this.rowNode,this.rowCtrl),this.enableTooltipFeature();let{rangeSvc:t}=e;t&&Qc(e.gos)&&(this.rangeFeature=t.createCellRangeFeature(e,this)),Kc(this.column)&&(this.rowResizeFeature=this.beans.rowNumbersSvc.createRowNumbersRowResizerFeature(e,this))}isCellSpanning(){return!1}getCellSpan(){}removeFeatures(){let e=this.beans.context;this.positionFeature=e.destroyBean(this.positionFeature),this.editorTooltipFeature=e.destroyBean(this.editorTooltipFeature),this.customStyleFeature=e.destroyBean(this.customStyleFeature),this.editStyleFeature=e.destroyBean(this.editStyleFeature),this.mouseListener=e.destroyBean(this.mouseListener),this.keyboardListener=e.destroyBean(this.keyboardListener),this.rangeFeature=e.destroyBean(this.rangeFeature),this.rowResizeFeature=e.destroyBean(this.rowResizeFeature),this.disableTooltipFeature()}enableTooltipFeature(e,t){this.tooltipFeature=this.beans.tooltipSvc?.enableCellTooltipFeature(this,e,t)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}enableEditorTooltipFeature(e){this.editorTooltipFeature&&this.disableEditorTooltipFeature(),this.editorTooltipFeature=this.beans.tooltipSvc?.setupCellEditorTooltip(this,e),Sp(this.beans)}disableEditorTooltipFeature(){this.editorTooltipFeature=this.beans.context.destroyBean(this.editorTooltipFeature)}setComp(e,t,n,i,o,r,s){if(this.comp=e,this.eGui=t,this.printLayout=o,s??(s=this),this.addDomData(s),this.addFeatures(),s.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.setupFocus(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(i,s),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),this.positionFeature?.init(),this.customStyleFeature?.setComp(e),this.editStyleFeature?.setComp(e),this.tooltipFeature?.refreshTooltip(),this.keyboardListener?.init(),this.rangeFeature?.setComp(e),this.rowResizeFeature?.refreshRowResizer(),r&&this.isCellEditable()||this.hasEdit&&this.editSvc?.isEditing(this,{withOpenEditor:!0})?this.editSvc?.startEditing(this,{startedEdit:!1,source:"api",silent:!0,continueEditing:!0}):this.showValue(!1,!0),this.onCompAttachedFuncs.length){for(let a of this.onCompAttachedFuncs)a();this.onCompAttachedFuncs=[]}}setupAutoHeight(e,t){this.isAutoHeight=this.beans.rowAutoHeight?.setupCellAutoHeight(this,e,t)??!1}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){let e=this.column.getColDef();return e.cellRenderer!=null||e.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}getDeferLoadingCellRenderer(){let{beans:e,column:t}=this,{userCompFactory:n,ctrlsSvc:i,eventSvc:o}=e,r=t.getColDef(),s=this.createCellRendererParams();s.deferRender=!0;let a=AX(n,r,s);if(i.getGridBodyCtrl()?.scrollFeature?.isScrolling()){let l,c=new Ii(h=>{l=h}),[u]=this.addManagedListeners(o,{bodyScrollEnd:()=>{l(),u()}});return{loadingComp:a,onReady:c}}return{loadingComp:a,onReady:Ii.resolve()}}showValue(e,t){let{beans:n,column:i,rowNode:o,rangeFeature:r}=this,{userCompFactory:s}=n,a=this.getValueToDisplay(),l,c=o.stub&&o.groupData?.[i.getId()]==null,u=i.getColDef();if(c||this.isCellRenderer()){let h=this.createCellRendererParams();!c||Kc(i)?l=PX(s,u,h):l=AX(s,u,h)}if(!l&&!c&&n.findSvc?.isMatch(o,i)){let h=this.createCellRendererParams();l=PX(s,x(g({},i.getColDef()),{cellRenderer:"agFindCellRenderer"}),h)}if(this.hasEdit&&this.editSvc.isBatchEditing()&&this.editSvc.isRowEditing(o,{checkSiblings:!0})){let h=this.editSvc.prepDetailsDuringBatch(this,{compDetails:l,valueToDisplay:a});h&&(h.compDetails?l=h.compDetails:h.valueToDisplay&&(a=h.valueToDisplay))}this.comp.setRenderDetails(l,a,e),this.customRowDragComp?.refreshVisibility(),!t&&r&&Xc(n,()=>r?.refreshHandle()),this.rowResizeFeature?.refreshRowResizer()}setupControlComps(){let e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e),!0),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}getCellValueClass(){let e="ag-cell-value",t=this.column.getColDef().cellRenderer==="agCheckboxCellRenderer",n="";return t&&(n=" ag-allow-overflow"),`${e}${n}`}isIncludeControl(e,t=!1){return(this.rowNode.rowPinned==null||t&&Ew(this.rowNode))&&!!e}isCheckboxSelection(e){let{rowSelection:t,groupDisplayType:n}=this.beans.gridOptions,i=iI(t),o=ed(this.column);return n==="custom"&&i!=="selectionColumn"&&o?!1:e.checkboxSelection||o&&typeof t=="object"&&Lg(t)}refreshShouldDestroy(){let e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e),!0),n=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),i=this.includeDndSource!=this.isIncludeControl(e.dndSource),o=this.isAutoHeight!=this.column.isAutoHeight();return t||n||i||o}onPopupEditorClosed(){let{editSvc:e}=this.beans;e?.isEditing(this,{withOpenEditor:!0})&&e?.stopEditing(this,{source:e?.isBatchEditing()?"ui":"api"})}stopEditing(e=!1){let{editSvc:t}=this.beans;return t?.stopEditing(this,{cancel:e,source:t?.isBatchEditing()?"ui":"api"})??!1}createCellRendererParams(){let{value:e,valueFormatted:t,column:n,rowNode:i,comp:o,eGui:r,beans:{valueSvc:s,gos:a,editSvc:l}}=this;return at(a,{value:e,valueFormatted:t,getValue:()=>s.getValueForDisplay(n,i).value,setValue:u=>l?.setDataValue({rowNode:i,column:n},u)||i.setDataValue(n,u),formatValue:this.formatValue.bind(this),data:i.data,node:i,pinned:n.getPinned(),colDef:n.getColDef(),column:n,refreshCell:this.refreshCell.bind(this),eGridCell:r,eParentOfValue:o.getParentOfValue(),registerRowDragger:(u,h,f,m)=>this.registerRowDragger(u,h,m),setTooltip:(u,h)=>{a.assertModuleRegistered("Tooltip",3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(u,h),this.tooltipFeature?.refreshTooltip()}})}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){if(this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(e),this.hasEdit&&this.editCompDetails){let{editSvc:t,comp:n}=this;!n?.getCellEditor()&&t.isEditing(this,{withOpenEditor:!0})&&t.startEditing(this,{startedEdit:!1,source:"api",silent:!0})}}refreshCell({force:e,suppressFlash:t,newData:n}={}){let{editStyleFeature:i,customStyleFeature:o,rowCtrl:{rowEditStyleFeature:r},beans:{cellFlashSvc:s,filterManager:a},column:l,comp:c,suppressRefreshCell:u,tooltipFeature:h}=this;if(u)return;let{field:f,valueGetter:m,showRowGroup:_,enableCellChangeFlash:y}=l.getColDef(),w=f==null&&m==null&&_==null,C=e||w||n,S=!!c,I=this.updateAndFormatValue(S),O=C||I;if(S){if(O){this.showValue(!!n,!1);let F=a?.isSuppressFlashingCellsBecauseFiltering();!t&&!F&&y&&s?.flashCell(this),i?.applyCellStyles?.(),o?.applyUserStyles(),o?.applyClassesFromColDef(),r?.applyRowStyles()}h?.refreshTooltip(),o?.applyCellClassRules()}}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(e){return this.callValueFormatter(e)??e}callValueFormatter(e){return this.beans.valueSvc.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){let t=this.value,n=this.valueFormatted,{value:i,valueFormatted:o}=this.beans.valueSvc.getValueForDisplay(this.column,this.rowNode,!0);return this.value=i,this.valueFormatted=o,e?!this.valuesAreEqual(t,this.value)||this.valueFormatted!=n:!0}valuesAreEqual(e,t){let n=this.column.getColDef();return n.equals?n.equals(e,t):e===t}addDomData(e){let t=this.eGui;Cp(this.beans.gos,t,hI,this),e.addDestroyFunc(()=>Cp(this.beans.gos,t,hI,null))}createEvent(e,t){let{rowNode:n,column:i,value:o,beans:r}=this;return B2e(r,e,t,{rowNode:n,column:i},o)}processCharacter(e){this.keyboardListener?.processCharacter(e)}onKeyDown(e){this.keyboardListener?.onKeyDown(e)}onMouseEvent(e,t){this.mouseListener?.onMouseEvent(e,t)}getColSpanningList(){return this.positionFeature?.getColSpanningList()??[]}onLeftChanged(){this.comp&&this.positionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){let{comp:e,column:t,beans:n}=this;kne(e,t,n.visibleCols)}refreshAriaColIndex(){let e=this.beans.visibleCols.getAriaColIndex(this.column);Wee(this.eGui,e)}onWidthChanged(){return this.positionFeature?.onWidthChanged()}getRowPosition(){let{rowIndex:e,rowPinned:t}=this.cellPosition;return{rowIndex:e,rowPinned:t}}updateRangeBordersIfRangeCount(){this.comp&&this.rangeFeature?.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.comp&&this.rangeFeature?.onCellSelectionChanged()}isRangeSelectionEnabled(){return this.rangeFeature!=null}focusCell(e=!1,t){let n=this.editSvc?.allowedFocusTargetOnValidation(this);n&&n!==this||this.beans.focusSvc.setFocusedCell(x(g({},this.getFocusedCellPosition()),{forceBrowserFocus:e,sourceEvent:t}))}restoreFocus(e=!1){let{beans:{editSvc:t,focusSvc:n},comp:i}=this;if(!i||t?.isEditing(this)||!this.isCellFocused()||!n.shouldTakeFocus())return;let o=()=>{if(!this.isAlive())return;let r=i.getFocusableElement();this.isCellFocused()&&r.focus({preventScroll:!0})};if(e){setTimeout(o,0);return}o()}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.restoreFocus(),this.rangeFeature?.onCellSelectionChanged(),this.rowResizeFeature?.refreshRowResizer()}onSuppressCellFocusChanged(e){let t=this.eGui;t&&(Kc(this.column)&&(e=!0),xs(t,"tabindex",e?void 0:-1))}onFirstRightPinnedChanged(){if(!this.comp)return;let e=this.column.isFirstRightPinned();this.comp.toggleCss(q2e,e)}onLastLeftPinnedChanged(){if(!this.comp)return;let e=this.column.isLastLeftPinned();this.comp.toggleCss(K2e,e)}checkCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}isCellFocused(){let e=this.checkCellFocused();return this.hasBeenFocused||(this.hasBeenFocused=e),e}setupFocus(){this.restoreFocus(!0),this.onCellFocused(this.focusEventWhileNotReady??void 0)}onCellFocused(e){let{beans:t}=this;if(EI(t))return;if(!this.comp){e&&(this.focusEventWhileNotReady=e);return}let n=this.isCellFocused(),i=t.editSvc?.isEditing(this)??!1;if(this.comp.toggleCss(W2e,n),n&&e?.forceBrowserFocus){let o=this.comp.getFocusableElement();if(i){let r=Bg(o,null,!0);r.length&&(o=r[0])}o.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}n&&e&&this.rowCtrl.announceDescription()}createCellPosition(){let{rowIndex:e,rowPinned:t}=this.rowNode;this.cellPosition={rowIndex:e,rowPinned:qc(t),column:this.column}}applyStaticCssClasses(){let{comp:e}=this;e.toggleCss(j2e,!0),e.toggleCss(Z2e,!0);let t=this.column.isAutoHeight()==!0;e.toggleCss(G2e,t),e.toggleCss(U2e,!t)}onColumnHover(){this.beans.colHover?.onCellColumnHover(this.column,this.comp)}onColDefChanged(){this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editSvc?.isEditing(this)?this.editSvc?.handleColDefChanged(this):this.refreshOrDestroyCell({force:!0,suppressFlash:!0}))}setWrapText(){let e=this.column.getColDef().wrapText==!0;this.comp.toggleCss(Y2e,e)}dispatchCellContextMenuEvent(e){let t=this.column.getColDef(),n=this.createEvent(e,"cellContextMenu"),{beans:i}=this;i.eventSvc.dispatchEvent(n),t.onCellContextMenu&&window.setTimeout(()=>{i.frameworkOverrides.wrapOutgoing(()=>{t.onCellContextMenu(n)})},0)}getCellRenderer(){return this.comp?.getCellRenderer()??null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.isCellFocused()&&this.hasBrowserFocus()&&this.beans.focusSvc.attemptToRecoverFocus(),super.destroy()}hasBrowserFocus(){return this.eGui?.contains(vi(this.beans))??!1}createSelectionCheckbox(){let e=this.beans.selectionSvc?.createCheckboxSelectionComponent();if(e)return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){let e=this.beans.registry.createDynamicBean("dndSourceComp",!1,this.rowNode,this.column,this.eGui);return e&&this.beans.context.createBean(e),e}registerRowDragger(e,t,n){if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,t);return}let i=this.createRowDragComp(e,t,n);i&&(this.customRowDragComp=i,this.addDestroyFunc(()=>{this.beans.context.destroyBean(i),this.customRowDragComp=null}),i.refreshVisibility())}createRowDragComp(e,t,n){let i=this.beans.rowDragSvc?.createRowDragCompForCell(this.rowNode,this.column,()=>this.value,e,t,n);if(i)return this.beans.context.createBean(i),i}cellEditorAttached(){for(let e of this.onEditorAttachedFuncs)e();this.onEditorAttachedFuncs=[]}setFocusedCellPosition(e){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}};function kV(e,t,n,i,o,r){if(n==null&&t==null)return;let s={},a={},l=(c,u)=>{for(let h of c.split(" "))h.trim()!=""&&u(h)};if(n){let c=Object.keys(n);for(let u=0;u<c.length;u++){let h=c[u],f=n[h],m;typeof f=="string"?m=e?e.evaluate(f,i):!0:typeof f=="function"&&(m=f(i)),l(h,_=>{m?s[_]=!0:a[_]=!0})}}if(t&&r)for(let c of Object.keys(t))l(c,u=>{s[u]||(a[u]=!0)});r&&Object.keys(a).forEach(r),Object.keys(s).forEach(o)}function See(e){if(e.group)return e.level;let t=e.parent;return t?t.level+1:0}var J2e=class extends te{constructor(){super(...arguments),this.beanName="rowStyleSvc"}processClassesFromGridOptions(e,t){let n=this.gos,i=s=>{if(typeof s=="string")e.push(s);else if(Array.isArray(s))for(let a of s)e.push(a)},o=n.get("rowClass");o&&i(o);let r=n.getCallback("getRowClass");if(r){let s={data:t.data,node:t,rowIndex:t.rowIndex},a=r(s);i(a)}}preProcessRowClassRules(e,t){this.processRowClassRules(t,n=>{e.push(n)},()=>{})}processRowClassRules(e,t,n){let{gos:i,expressionSvc:o}=this.beans,r=at(i,{data:e.data,node:e,rowIndex:e.rowIndex});kV(o,void 0,i.get("rowClassRules"),r,t,n)}processStylesFromGridOptions(e){let t=this.gos,n=t.get("rowStyle"),i=t.getCallback("getRowStyle"),o;if(i){let r={data:e.data,node:e,rowIndex:e.rowIndex};o=i(r)}if(o||n)return Object.assign({},n,o)}},X2e=0,gI=class extends te{constructor(e,t,n,i,o){super(),this.rowNode=e,this.useAnimationFrameForCreate=i,this.printLayout=o,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=t,this.gos=t.gos,this.paginationPage=t.pagination?.getCurrentPage()??0,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+X2e++,this.rowId=ZC(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=See(this.rowNode),this.setRowType(),this.setAnimateFlags(n),this.rowStyles=this.processStylesFromGridOptions(),this.rowEditStyleFeature=t.editSvc?.createRowStyleFeature(this,t),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;let e=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=ZC(e)}updateGui(e,t){e==="left"?this.leftGui=t:e==="right"?this.rightGui=t:e==="fullWidth"?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,n,i){let{context:o,focusSvc:r}=this.beans;i=Cw(this,o,i);let s={rowComp:e,element:t,containerType:n,compBean:i};this.allRowGuis.push(s),this.updateGui(n,s),this.initialiseRowComp(s);let a=this.rowNode,l=this.rowType==="FullWidthLoading"||a.stub,c=!a.data&&this.beans.rowModel.getType()==="infinite";!l&&!c&&!a.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent();let u=this.fullWidthGui?.element;u&&!this.beans.editSvc?.isEditing(this)&&r.isRowFocused(a.rowIndex,a.rowPinned)&&r.shouldTakeFocus()&&setTimeout(()=>u.focus({preventScroll:!0}),0)}unsetComp(e){this.allRowGuis=this.allRowGuis.filter(t=>t.containerType!==e),this.updateGui(e,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(e){let t=e?"none":"";for(let n of this.allRowGuis)n.element.style.display=t}initialiseRowComp(e){let t=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),mp(t)&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);let n=e.rowComp,i=this.getInitialRowClasses(e.containerType);for(let o of i)n.toggleCss(o,!0);this.executeSlideAndFadeAnimations(e),this.rowNode.group&&c4(e.element,this.rowNode.expanded==!0),this.setRowCompRowId(n),this.setRowCompRowBusinessKey(n),Cp(t,e.element,pI,this),e.compBean.addDestroyFunc(()=>Cp(t,e.element,pI,null)),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,e),this.rowNode.rowIndex,"p2",!1):this.addHoverFunctionality(e),this.isFullWidth()&&this.setupFullWidth(e),t.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask(()=>{this.isAlive()&&e.rowComp.toggleCss("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){this.businessKey!=null&&e.setRowBusinessKey(this.businessKey)}setRowCompRowId(e){let t=ZC(this.rowNode.id);this.rowId=t,t!=null&&e.setRowId(t)}executeSlideAndFadeAnimations(e){let{containerType:t}=e;this.slideInAnimation[t]&&(d4(()=>{this.onTopChanged()}),this.slideInAnimation[t]=!1),this.fadeInAnimation[t]&&(d4(()=>{e.rowComp.toggleCss("ag-opacity-zero",!1)}),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){let t=this.beans.rowDragSvc?.createRowDragCompForRow(this.rowNode,e.element);if(!t)return;let n=this.createBean(t,this.beans.context);this.rowDragComps.push(n),e.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(i=>i!==n),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,this.beans.context),this.destroyBean(n,this.beans.context)})}setupFullWidth(e){let t=this.getPinnedForContainer(e.containerType),n=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(n)}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(e=>e?.rowComp?.getFullWidthCellRenderer()):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){let e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;let t={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};e(t)}areAllContainersReady(){let{leftGui:e,centerGui:t,rightGui:n,beans:{visibleCols:i}}=this,o=!!e||!i.isPinningLeft(),r=!!t,s=!!n||!i.isPinningRight();return o&&r&&s}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;let e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this.rowNode}):!1}setRowType(){let e=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),t=this.isNodeFullWidthCell(),n=this.gos.get("masterDetail")&&this.rowNode.detail,i=this.beans.colModel.isPivotMode(),o=wte(this.gos,this.rowNode,i);e?this.rowType="FullWidthLoading":n?this.rowType="FullWidthDetail":t?this.rowType="FullWidth":o?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(e=!1,t=!1){if(this.isFullWidth())return;let{animationFrameSvc:n}=this.beans;if(!n?.active||e||this.printLayout){this.updateColumnListsImpl(t);return}this.updateColumnListsPending||(n.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"p1",!1),this.updateColumnListsPending=!0)}getNewCellCtrl(e){if(!this.beans.rowSpanSvc?.isCellSpanning(e,this.rowNode))return new $g(e,this.rowNode,this.beans,this)}isCorrectCtrlForSpan(e){return!this.beans.rowSpanSvc?.isCellSpanning(e.column,this.rowNode)}createCellCtrls(e,t,n=null){let i={list:[],map:{}},o=(c,u,h)=>{h!=null?i.list.splice(h,0,u):i.list.push(u),i.map[c]=u},r=[];for(let c of t){let u=c.getInstanceId(),h=e.map[u];h&&!this.isCorrectCtrlForSpan(h)&&(h.destroy(),h=void 0),h||(h=this.getNewCellCtrl(c)),h&&o(u,h)}for(let c of e.list){let u=c.column.getInstanceId();if(i.map[u]!=null)continue;!this.isCellEligibleToBeRemoved(c,n)?r.push([u,c]):c.destroy()}if(r.length)for(let[c,u]of r){let h=i.list.findIndex(m=>m.column.getLeft()>u.column.getLeft()),f=h===-1?void 0:Math.max(h-1,0);o(c,u,f)}let{focusSvc:s,visibleCols:a}=this.beans,l=s.getFocusedCell();if(l&&l.column.getPinned()==n){let c=l.column.getInstanceId();if(!i.map[c]&&a.allCols.includes(l.column)){let h=this.createFocusedCellCtrl();if(h){let f=i.list.findIndex(_=>_.column.getLeft()>h.column.getLeft()),m=f===-1?void 0:Math.max(f-1,0);o(c,h,m)}}}return i}createFocusedCellCtrl(){let{focusSvc:e,rowSpanSvc:t}=this.beans,n=e.getFocusedCell();if(!n)return;let i=t?.getCellSpan(n.column,this.rowNode);if(i){if(i.firstNode!==this.rowNode||!i.doesSpanContain(n))return}else if(!e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned))return;return this.getNewCellCtrl(n.column)}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){for(let t of this.allRowGuis){let n=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(n,e)}}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){let e=this.beans.colViewport,t=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{let n=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,n);let i=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,i,"left");let o=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,o,"right")}}isCellEligibleToBeRemoved(e,t){let{column:o}=e;if(o.getPinned()!=t||!this.isCorrectCtrlForSpan(e))return!0;let{visibleCols:r,editSvc:s}=this.beans,a=s?.isEditing(e),l=e.isCellFocused();return a||l?!(r.allCols.indexOf(o)>=0):!0}getDomOrder(){return this.gos.get("ensureDomOrder")||Ho(this.gos,"print")}listenOnDomOrder(e){let t=()=>{e.rowComp.setDomOrder(this.getDomOrder())};e.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],t)}setAnimateFlags(e){if(this.rowNode.sticky||!e)return;let t=Se(this.rowNode.oldRowTop),{visibleCols:n}=this.beans,i=n.isPinningLeft(),o=n.isPinningRight();if(t){let{slideInAnimation:r}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){r.fullWidth=!0;return}r.center=!0,r.left=i,r.right=o}else{let{fadeInAnimation:r}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){r.fullWidth=!0;return}r.center=!0,r.left=i,r.right=o}}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){let e=(s,a)=>s?s.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(s.element,a).params):!0,t=e(this.fullWidthGui,null),n=e(this.centerGui,null),i=e(this.leftGui,"left"),o=e(this.rightGui,"right");return t&&n&&i&&o}addListeners(){let{beans:e,gos:t,rowNode:n}=this,{expansionSvc:i,eventSvc:o,context:r,rowSpanSvc:s}=e;this.addManagedListeners(this.rowNode,g({heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this)},i?.getRowExpandedListeners(this)??{})),n.detail&&this.addManagedListeners(n.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(n,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this),rowPinned:this.onRowPinned.bind(this)}),this.addManagedListeners(o,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),s&&this.addManagedListeners(s,{spannedCellsUpdated:({pinned:a})=>{a&&!n.rowPinned||this.updateColumnLists()}}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,r),this.tooltipFeature=this.destroyBean(this.tooltipFeature,r),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,r)}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(t.get("rowDragEntireRow")){for(let l of this.allRowGuis)this.addRowDraggerToRow(l);return}this.rowDragComps=this.destroyBeans(this.rowDragComps,r)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{for(let e of this.getAllCellCtrls())e.onRowIndexChanged()},cellChanged:e=>{for(let t of this.getAllCellCtrls())t.onCellChanged(e)}})}onRowPinned(){for(let e of this.allRowGuis)e.rowComp.toggleCss("ag-row-pinned-source",!!this.rowNode.pinnedSibling)}onRowNodeDataChanged(e){this.refreshRow({suppressFlash:!e.update,newData:!e.update})}refreshRow(e){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}for(let n of this.getAllCellCtrls())n.refreshCell(e);for(let n of this.allRowGuis)this.setRowCompRowId(n.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(n.rowComp);this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.rowEditStyleFeature?.applyRowStyles(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){let e=this.beans.rowDropHighlightSvc,t=e?.row===this.rowNode?e.position:"none",n=t==="above",i=t==="inside",o=t==="below",s=this.gos.get("treeData")&&(o||n),a=this.rowNode.uiLevel.toString();for(let l of this.allRowGuis){let c=l.rowComp;c.toggleCss("ag-row-highlight-above",n),c.toggleCss("ag-row-highlight-inside",i),c.toggleCss("ag-row-highlight-below",o),c.toggleCss("ag-row-highlight-indent",s),s?l.element.style.setProperty("--ag-row-highlight-level",a):l.element.style.removeProperty("--ag-row-highlight-level")}}postProcessRowDragging(){let e=this.rowNode.dragging;for(let t of this.allRowGuis)t.rowComp.toggleCss("ag-row-dragging",e)}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.rowAutoHeight?.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:qc(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){let t=this.findFullWidthInfoForEvent(e);if(!t)return;let{rowGui:n,column:i}=t;if(!(n.element===e.target))return;let s=this.rowNode,{focusSvc:a,navigation:l}=this.beans,c=a.getFocusedCell(),u={rowIndex:s.rowIndex,rowPinned:s.rowPinned,column:c?.column??i};l?.navigateToNextCell(e,e.key,u,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||Yc(e))return;let t=this.allRowGuis.find(a=>a.element.contains(e.target)),n=t?t.element:null,i=n===e.target,o=vi(this.beans),r=!1;n&&o&&(r=n.contains(o)&&o.classList.contains("ag-cell"));let s=null;!i&&!r&&(s=kp(this.beans,n,!1,e.shiftKey)),(this.isFullWidth()&&i||!s)&&this.beans.navigation?.onTabKeyDown(this,e)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){let e=this.allRowGuis.find(t=>Hl(t.element))?.element;return e?e.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){let t=this.isFullWidth()&&e?void 0:this.gos.get("tabIndex");for(let n of this.allRowGuis)xs(n.element,"tabindex",t)}onFullWidthRowFocused(e){let t=this.rowNode,n=e?this.isFullWidth()&&e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned:!1,i;if(this.fullWidthGui)i=this.fullWidthGui.element;else{let r=this.beans.colModel.getCol(e?.column)?.pinned;r?i=r==="right"?this.rightGui?.element:this.leftGui?.element:i=this.centerGui?.element}i&&(i.classList.toggle("ag-full-width-focus",n),n&&e?.forceBrowserFocus&&i.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){let n={list:[],map:{}};for(let i of e.list)i!==t&&(n.list.push(i),n.map[i.column.getInstanceId()]=i);return n}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t);break}}createRowEvent(e,t){let{rowNode:n}=this;return at(this.gos,{type:e,node:n,data:n.data,rowIndex:n.rowIndex,rowPinned:n.rowPinned,event:t})}createRowEventWithSource(e,t){let n=this.createRowEvent(e,t);return n.source=this,n}onRowDblClick(e){if(Yc(e))return;let t=this.createRowEventWithSource("rowDoubleClicked",e);t.isEventHandlingSuppressed=this.isSuppressMouseEvent(e),this.beans.eventSvc.dispatchEvent(t)}findFullWidthInfoForEvent(e){if(!e)return;let t=this.findFullWidthRowGui(e.target),n=this.getColumnForFullWidth(t);if(!(!t||!n))return{rowGui:t,column:n}}findFullWidthRowGui(e){return this.allRowGuis.find(t=>t.element.contains(e))}getColumnForFullWidth(e){let{visibleCols:t}=this.beans;switch(e?.containerType){case"center":return t.centerCols[0];case"left":return t.leftCols[0];case"right":return t.rightCols[0];default:return t.allCols[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=fp(e.target,"ag-row-drag",3),!this.isFullWidth()||this.isSuppressMouseEvent(e))return;let{rangeSvc:t,focusSvc:n}=this.beans;t?.removeAllCellRanges();let i=this.findFullWidthInfoForEvent(e);if(!i)return;let{rowGui:o,column:r}=i,s=o.element,a=e.target,l=this.rowNode,c=e.defaultPrevented||bu();s&&s.contains(a)&&YC(a)&&(c=!1),n.setFocusedCell({rowIndex:l.rowIndex,column:r,rowPinned:l.rowPinned,forceBrowserFocus:c})}isSuppressMouseEvent(e){let{gos:t,rowNode:n}=this;if(this.isFullWidth()){let o=this.findFullWidthRowGui(e.target);return ORe(t,o?.rowComp.getFullWidthCellRendererParams(),n,e)}let i=fV(t,e.target);return i!=null&&Gk(t,i.column,n,e)}onRowClick(e){if(Yc(e)||this.lastMouseDownOnDragger)return;let n=this.isSuppressMouseEvent(e),{eventSvc:i,selectionSvc:o}=this.beans,r=this.createRowEventWithSource("rowClicked",e);r.isEventHandlingSuppressed=n,i.dispatchEvent(r),!n&&o?.handleSelectionEvent(e,this.rowNode,"rowClicked")}setupDetailRowAutoHeight(e){this.rowType==="FullWidthDetail"&&this.beans.masterDetailSvc?.setupDetailRowAutoHeight(this,e)}createFullWidthCompDetails(e,t){let{gos:n,rowNode:i}=this,o=at(n,{fullWidth:!0,data:i.data,node:i,value:i.key,valueFormatted:i.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(s,a,l,c)=>this.addFullWidthRowDragging(s,a,l,c),setTooltip:(s,a)=>{n.assertModuleRegistered("Tooltip",3),this.setupFullWidthRowTooltip(s,a)}}),r=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return VIe(r,o);case"FullWidthGroup":{let{value:s,valueFormatted:a}=this.beans.valueSvc.getValueForDisplay(void 0,this.rowNode,!0);return o.value=s,o.valueFormatted=a,zIe(r,o)}case"FullWidthLoading":return BIe(r,o);default:return NIe(r,o)}}setupFullWidthRowTooltip(e,t){this.fullWidthGui&&(this.tooltipFeature=this.beans.tooltipSvc?.setupFullWidthRowTooltip(this.tooltipFeature,this,e,t))}addFullWidthRowDragging(e,t,n="",i){let{rowDragSvc:o,context:r}=this.beans;if(!o||!this.isFullWidth())return;let s=o.createRowDragComp(()=>n,this.rowNode,void 0,e,t,i);this.createBean(s,r),this.addDestroyFunc(()=>{this.destroyBean(s,r)})}onUiLevelChanged(){let e=See(this.rowNode);if(this.rowLevel!=e){let t="ag-row-level-"+e,n="ag-row-level-"+this.rowLevel;for(let i of this.allRowGuis)i.rowComp.toggleCss(t,!0),i.rowComp.toggleCss(n,!1)}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){let e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();if(this.firstRowOnPage!==e){this.firstRowOnPage=e;for(let n of this.allRowGuis)n.rowComp.toggleCss("ag-row-first",e)}if(this.lastRowOnPage!==t){this.lastRowOnPage=t;for(let n of this.allRowGuis)n.rowComp.toggleCss("ag-row-last",t)}}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){let e=[];if(this.beans.rowStyleSvc?.processClassesFromGridOptions(e,this.rowNode),!!e.length)for(let t of e)for(let n of this.allRowGuis)n.rowComp.toggleCss(t,!0)}postProcessRowClassRules(){this.beans.rowStyleSvc?.processRowClassRules(this.rowNode,e=>{for(let t of this.allRowGuis)t.rowComp.toggleCss(e,!0)},e=>{for(let t of this.allRowGuis)t.rowComp.toggleCss(e,!1)})}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,n=>n.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return e==="left"||e==="right"?e:null}getInitialRowClasses(e){let t=this.getPinnedForContainer(e),n=this.isFullWidth(),{rowNode:i,beans:o}=this,r=[];r.push("ag-row"),r.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeInAnimation[e]&&r.push("ag-opacity-zero"),r.push(i.rowIndex%2===0?"ag-row-even":"ag-row-odd"),i.isRowPinned()&&(r.push("ag-row-pinned"),o.pinnedRowModel?.isManual()&&r.push("ag-row-pinned-manual")),!i.isRowPinned()&&i.pinnedSibling&&r.push("ag-row-pinned-source"),i.isSelected()&&r.push("ag-row-selected"),i.footer&&r.push("ag-row-footer"),r.push("ag-row-level-"+this.rowLevel),i.stub&&r.push("ag-row-loading"),n&&r.push("ag-full-width-row"),o.expansionSvc?.addExpandedCss(r,i),i.dragging&&r.push("ag-row-dragging");let{rowStyleSvc:s}=o;return s&&(s.processClassesFromGridOptions(r,i),s.preProcessRowClassRules(r,i)),r.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),this.isFirstRowOnPage()&&r.push("ag-row-first"),this.isLastRowOnPage()&&r.push("ag-row-last"),n&&(t==="left"&&r.push("ag-cell-last-left-pinned"),t==="right"&&r.push("ag-cell-first-right-pinned")),r}processStylesFromGridOptions(){return this.beans.rowStyleSvc?.processStylesFromGridOptions(this.rowNode)??this.emptyStyle}onRowSelected(e){this.beans.selectionSvc?.onRowCtrlSelected(this,t=>{(t===this.centerGui||t===this.fullWidthGui)&&this.announceDescription()},e)}announceDescription(){this.beans.selectionSvc?.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(e){if(!this.active)return;let{element:t,compBean:n}=e,{rowNode:i,beans:o,gos:r}=this;n.addManagedListeners(t,{pointerenter:s=>{s.pointerType==="mouse"&&i.dispatchRowEvent("mouseEnter")},pointerleave:s=>{s.pointerType==="mouse"&&i.dispatchRowEvent("mouseLeave")}}),n.addManagedListeners(i,{mouseEnter:()=>{!o.dragSvc?.dragging&&!r.get("suppressRowHoverHighlight")&&(t.classList.add("ag-row-hover"),i.setHovered(!0))},mouseLeave:()=>{this.resetHoveredStatus(t)}})}resetHoveredStatus(e){let t=e?[e]:this.allRowGuis.map(n=>n.element);for(let n of t)n.classList.remove("ag-row-hover");this.rowNode.setHovered(!1)}roundRowTopToBounds(e){let t=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition(),n=this.applyPaginationOffset(t.top,!0)-100,i=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(n,e),i)}forEachGui(e,t){if(e)t(e);else for(let n of this.allRowGuis)t(n)}isRowRendered(){return this.allRowGuis.length>0}onRowHeightChanged(e){if(this.rowNode.rowHeight==null)return;let t=this.rowNode.rowHeight,n=this.beans.environment.getDefaultRowHeight(),o=vte(this.gos)?mu(this.beans,this.rowNode).height:void 0,r=o?`${Math.min(n,o)-2}px`:void 0;this.forEachGui(e,s=>{s.element.style.height=`${t}px`,r&&s.element.style.setProperty("--ag-line-height",r)})}destroyFirstPass(e=!1){this.active=!1;let{rowNode:t}=this;if(!e&&Fg(this.gos)&&!t.sticky)if(t.rowTop!=null){let o=this.roundRowTopToBounds(t.rowTop);this.setRowTop(o)}else for(let o of this.allRowGuis)o.rowComp.toggleCss("ag-opacity-zero",!0);this.fullWidthGui?.element.contains(vi(this.beans))&&this.beans.focusSvc.attemptToRecoverFocus(),t.setHovered(!1);let n=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(n),this.beans.eventSvc.dispatchEvent(n),super.destroy()}destroySecondPass(){this.allRowGuis.length=0;let e=t=>{for(let n of t.list)n.destroy();return{list:[],map:{}}};this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,t=>{t.rowComp.toggleCss("ag-row-focus",this.rowFocused),t.rowComp.toggleCss("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){let{focusSvc:e}=this.beans,t=e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses())}onPaginationChanged(){let e=this.beans.pagination?.getCurrentPage()??0;this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,t=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;let n=this.beans.pageBounds.getPixelOffset();return e+n*(t?1:-1)}setRowTop(e){if(!this.printLayout&&Se(e)){let t=this.applyPaginationOffset(e),o=`${this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeight.getRealPixelPosition(t)}px`;this.setRowTopStyle(o)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";let t=this.rowNode,n;if(t.sticky)n=t.stickyRowTop;else{let i=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,o=this.applyPaginationOffset(i);n=t.isRowPinned()?o:this.beans.rowContainerHeight.getRealPixelPosition(o)}return n+"px"}setRowTopStyle(e){for(let t of this.allRowGuis)this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform(`translateY(${e})`)}getCellCtrl(e,t=!1){let n=null;for(let i of this.getAllCellCtrls())i.column==e&&(n=i);if(n!=null||t)return n;for(let i of this.getAllCellCtrls())i?.getColSpanningList().indexOf(e)>=0&&(n=i);return n}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(e){let t=this.rowNode.getRowIndexString();if(t===null)return;let n=(this.beans.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.beans.filterManager?.getHeaderRowCount()??0),i=this.rowNode.rowIndex%2===0,o=n+this.rowNode.rowIndex+1;this.forEachGui(e,r=>{r.rowComp.setRowIndex(t),r.rowComp.toggleCss("ag-row-even",i),r.rowComp.toggleCss("ag-row-odd",!i),Yk(r.element,o)})}},eLe=class extends te{constructor(){super(),this.beanName="navigation",this.onPageDown=wX(this.onPageDown,100),this.onPageUp=wX(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){let n=e.key,i=e.altKey,o=e.ctrlKey||e.metaKey,r=!!this.beans.rangeSvc&&e.shiftKey,s=sTe(this.gos,e),a=!1;switch(n){case W.PAGE_HOME:case W.PAGE_END:!o&&!i&&(this.onHomeOrEndKey(n),a=!0);break;case W.LEFT:case W.RIGHT:case W.UP:case W.DOWN:if(!s)return!1;o&&!i&&!r&&(this.onCtrlUpDownLeftRight(n,s),a=!0);break;case W.PAGE_DOWN:case W.PAGE_UP:!o&&!i&&(a=this.handlePageUpDown(n,s,t));break}return a&&e.preventDefault(),a}handlePageUpDown(e,t,n){return n&&(t=this.beans.focusSvc.getFocusedCell()),t?(e===W.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo({scrollIndex:e,scrollType:t,scrollColumn:n,focusIndex:i,focusColumn:o,isAsync:r,rowPinned:s}){let{scrollFeature:a}=this.gridBodyCon;Se(n)&&!n.isPinned()&&a.ensureColumnVisible(n),Se(e)&&a.ensureIndexVisible(e,t),r||a.ensureIndexVisible(i);let{focusSvc:l,rangeSvc:c}=this.beans;l.setFocusedCell({rowIndex:i,column:o,rowPinned:s,forceBrowserFocus:!0}),c?.setRangeToCell({rowIndex:i,rowPinned:s,column:o})}onPageDown(e){let t=this.beans,n=n4(t),i=this.getViewportHeight(),{pageBounds:o,rowModel:r,rowAutoHeight:s}=t,a=o.getPixelOffset(),l=n.top+i,c=r.getRowIndexAtPixel(l+a);s?.active?this.navigateToNextPageWithAutoHeight(e,c):this.navigateToNextPage(e,c)}onPageUp(e){let t=this.beans,n=n4(t),{pageBounds:i,rowModel:o,rowAutoHeight:r}=t,s=i.getPixelOffset(),a=n.top,l=o.getRowIndexAtPixel(a+s);r?.active?this.navigateToNextPageWithAutoHeight(e,l,!0):this.navigateToNextPage(e,l,!0)}navigateToNextPage(e,t,n=!1){let{pageBounds:i,rowModel:o}=this.beans,r=this.getViewportHeight(),s=i.getFirstRow(),a=i.getLastRow(),l=i.getPixelOffset(),c=o.getRow(e.rowIndex),u=n?c?.rowHeight-r-l:r-l,h=c?.rowTop+u,f=o.getRowIndexAtPixel(h+l);if(f===e.rowIndex){let _=n?-1:1;t=f=e.rowIndex+_}let m;n?(m="bottom",f<s&&(f=s),t<s&&(t=s)):(m="top",f>a&&(f=a),t>a&&(t=a)),this.isRowTallerThanView(o.getRow(f))&&(t=f,m="top"),this.navigateTo({scrollIndex:t,scrollType:m,scrollColumn:null,focusIndex:f,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,n=!1){this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{let i=this.getNextFocusIndexForAutoHeight(e,n);this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:i,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){let n=t?-1:1,i=this.getViewportHeight(),{pageBounds:o,rowModel:r}=this.beans,s=o.getLastRow(),a=0,l=e.rowIndex;for(;l>=0&&l<=s;){let c=r.getRow(l);if(c){let u=c.rowHeight??0;if(a+u>i)break;a+=u}l+=n}return Math.max(0,Math.min(l,s))}getViewportHeight(){let e=this.beans,t=n4(e),n=this.beans.scrollVisibleSvc.getScrollbarWidth(),i=t.bottom-t.top;return e.ctrlsSvc.get("center").isHorizontalScrollShowing()&&(i-=n),i}isRowTallerThanView(e){if(!e)return!1;let t=e.rowHeight;return typeof t!="number"?!1:t>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){let n=this.beans.cellNavigation.getNextCellToFocus(e,t,!0),i=this.getNormalisedPosition(n),{rowIndex:o,rowPinned:r,column:s}=i??n,a=s;this.navigateTo({scrollIndex:o,scrollType:null,scrollColumn:a,focusIndex:o,focusColumn:a,rowPinned:r})}onHomeOrEndKey(e){let t=e===W.PAGE_HOME,{visibleCols:n,pageBounds:i,rowModel:o}=this.beans,r=n.allCols,s=t?i.getFirstRow():i.getLastRow(),a=o.getRow(s);if(!a)return;let l=(t?r:[...r].reverse()).find(c=>!c.isSuppressNavigable(a));l&&this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:l,focusIndex:s,focusColumn:l})}onTabKeyDown(e,t){let n=t.shiftKey,i=this.tabToNextCellCommon(e,n,t),o=this.beans,{ctrlsSvc:r,pageBounds:s,focusSvc:a,gos:l}=o;if(i!==!1){i?t.preventDefault():i===null&&r.get("gridCtrl").allowFocusForNextCoreContainer(n);return}if(n){let{rowIndex:c,rowPinned:u}=e.getRowPosition();(u?c===0:c===s.getFirstRow())&&(l.get("headerHeight")===0||_p(o)?qg(o,!0,!0):(t.preventDefault(),a.focusPreviousFromFirstCell(t)))}else e instanceof $g&&e.focusCell(!0),(a.focusOverlay(!1)||qg(o,n))&&t.preventDefault()}tabToNextCell(e,t){let n=this.beans,{focusSvc:i,rowRenderer:o}=n,r=i.getFocusedCell();if(!r)return!1;let s=Tg(n,r);return!s&&(s=o.getRowByPosition(r),!s?.isFullWidth())?!1:!!this.tabToNextCellCommon(s,e,t,"api")}tabToNextCellCommon(e,t,n,i="ui"){let{editSvc:o,focusSvc:r}=this.beans,s,a=e instanceof $g?e:e.getAllCellCtrls()?.[0];return o?.isEditing()?s=o?.moveToNextCell(a,t,n,i):s=this.moveToNextCellNotEditing(e,t,n),s===null?s:s||!!r.focusedHeader}moveToNextCellNotEditing(e,t,n){let i=this.beans.visibleCols.allCols,o;if(e instanceof gI){if(o=x(g({},e.getRowPosition()),{column:t?i[0]:Hn(i)}),this.gos.get("embedFullWidthRows")&&n){let s=e.findFullWidthInfoForEvent(n);s&&(o.column=s.column)}}else o=e.getFocusedCellPosition();let r=this.findNextCellToFocusOn(o,{backwards:t,startEditing:!1});if(r===!1)return null;if(r instanceof $g)r.focusCell(!0);else if(r)return this.tryToFocusFullWidthRow(r,t);return Se(r)}findNextCellToFocusOn(e,{backwards:t,startEditing:n,skipToNextEditableCell:i}){let o=e,r=this.beans,{cellNavigation:s,gos:a,focusSvc:l,rowRenderer:c,rangeSvc:u}=r;for(;;){e!==o&&(e=o),t||(o=this.getLastCellOfColSpan(o)),o=s.getNextTabbedCell(o,t);let h=a.getCallback("tabToNextCell");if(Se(h)){let y=h({backwards:t,editing:n,previousCellPosition:e,nextCellPosition:o||null});if(y===!0)o=e;else{if(y===!1)return!1;o={rowIndex:y.rowIndex,column:y.column,rowPinned:y.rowPinned}}}if(!o)return null;if(o.rowIndex<0){let _=Ll(r);return l.focusHeaderPosition({headerPosition:{headerRowIndex:_+o.rowIndex,column:o.column},fromCell:!0}),null}let f=a.get("editType")==="fullRow";if(n&&(!f||i)&&!this.isCellEditable(o))continue;this.ensureCellVisible(o);let m=Tg(r,o);if(!m){let _=c.getRowByPosition(o);if(!_||!_.isFullWidth()||n)continue;return x(g({},_.getRowPosition()),{column:o?.column})}if(!s.isSuppressNavigable(m.column,m.rowNode))return m.setFocusedCellPosition(o),u?.setRangeToCell(o),m}}isCellEditable(e){let t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}lookupRowNodeForCell({rowIndex:e,rowPinned:t}){let{pinnedRowModel:n,rowModel:i}=this.beans;return t==="top"?n?.getPinnedTopRow(e):t==="bottom"?n?.getPinnedBottomRow(e):i.getRow(e)}navigateToNextCell(e,t,n,i){let o=n,r=!1,s=this.beans,{cellNavigation:a,focusSvc:l,gos:c}=s;for(;o&&(o===n||!this.isValidNavigateCell(o));)c.get("enableRtl")?t===W.LEFT&&(o=this.getLastCellOfColSpan(o)):t===W.RIGHT&&(o=this.getLastCellOfColSpan(o)),o=a.getNextCellToFocus(t,o),r=di(o);if(r&&e&&e.key===W.UP&&(o={rowIndex:-1,rowPinned:null,column:n.column}),i){let h=c.getCallback("navigateToNextCell");if(Se(h)){let m=h({key:t,previousCellPosition:n,nextCellPosition:o||null,event:e});Se(m)?o={rowPinned:m.rowPinned,rowIndex:m.rowIndex,column:m.column}:o=null}}if(!o)return;if(o.rowIndex<0){let h=Ll(s);l.focusHeaderPosition({headerPosition:{headerRowIndex:h+o.rowIndex,column:n.column},event:e||void 0,fromCell:!0});return}let u=this.getNormalisedPosition(o);u?this.focusPosition(u):this.tryToFocusFullWidthRow(o)}getNormalisedPosition(e){if(!!this.beans.spannedRowRenderer?.getCellByPosition(e))return e;this.ensureCellVisible(e);let n=Tg(this.beans,e);return n?(e=n.getFocusedCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){let{visibleCols:n,rowRenderer:i,focusSvc:o,eventSvc:r}=this.beans,s=n.allCols;if(!i.getRowByPosition(e)?.isFullWidth())return!1;let l=o.getFocusedCell(),c={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?Hn(s):s[0])};this.focusPosition(c);let u=t??(l!=null&&JPe(c,l));return r.dispatchEvent({type:"fullWidthRowFocused",rowIndex:c.rowIndex,rowPinned:c.rowPinned,column:c.column,isFullWidthCell:!0,fromBelow:u}),!0}focusPosition(e){let{focusSvc:t,rangeSvc:n}=this.beans;t.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),n?.setRangeToCell(e)}isValidNavigateCell(e){return!!Jc(this.beans,e)}getLastCellOfColSpan(e){let t=Tg(this.beans,e);if(!t)return e;let n=t.getColSpanningList();return n.length===1?e:{rowIndex:e.rowIndex,column:Hn(n),rowPinned:e.rowPinned}}ensureCellVisible(e){let t=yte(this.gos),n=this.beans.rowModel.getRow(e.rowIndex),i=t&&n?.sticky,{scrollFeature:o}=this.gridBodyCon;!i&&di(e.rowPinned)&&o.ensureIndexVisible(e.rowIndex),e.column.isPinned()||o.ensureColumnVisible(e.column)}ensureColumnVisible(e){let t=this.gridBodyCon.scrollFeature;e.isPinned()||t.ensureColumnVisible(e)}ensureRowVisible(e){this.gridBodyCon.scrollFeature.ensureIndexVisible(e)}};function n4(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}var tLe={moduleName:"KeyboardNavigation",version:we,beans:[eLe,x2e,FFe],apiFunctions:{getFocusedCell:S2e,clearFocusedCell:E2e,setFocusedCell:D2e,setFocusedHeader:M2e,tabToNextCell:k2e,tabToPreviousCell:I2e}},nLe=class extends te{constructor(){super(...arguments),this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventSvc.dispatchEvent({type:"paginationChanged",animate:e?.animate??!1,newData:e?.newData??!1,newPage:e?.newPage??!1,newPageSize:e?.newPageSize??!1,keepRenderedRows:e?.keepRenderedRows??!1})}calculatePages(){let{pageBounds:e,pagination:t,rowModel:n}=this.beans;t?t.calculatePages():e.calculateBounds(0,n.getRowCount()-1)}},iLe=class extends te{constructor(){super(...arguments),this.beanName="pageBounds",this.pixelOffset=0}getFirstRow(){return this.topRowBounds?.rowIndex??-1}getLastRow(){return this.bottomRowBounds?.rowIndex??-1}getCurrentPageHeight(){let{topRowBounds:e,bottomRowBounds:t}=this;return!e||!t?0:Math.max(t.rowTop+t.rowHeight-e.rowTop,0)}getCurrentPagePixelRange(){let{topRowBounds:e,bottomRowBounds:t}=this,n=e?.rowTop??0,i=t?t.rowTop+t.rowHeight:0;return{pageFirstPixel:n,pageLastPixel:i}}calculateBounds(e,t){let{rowModel:n}=this.beans,i=n.getRowBounds(e);i&&(i.rowIndex=e),this.topRowBounds=i;let o=n.getRowBounds(t);o&&(o.rowIndex=t),this.bottomRowBounds=o,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){let e=this.topRowBounds?.rowTop??0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},oLe=".ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}",rLe=class extends te{constructor(e,t){super(),this.isLeft=e,this.elements=t,this.getWidth=e?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({[`${this.isLeft?"left":"right"}PinnedWidthChanged`]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){let e=this.getWidth(),t=e>0;for(let n of this.elements)n&&(ci(n,t),Nl(n,e))}},sLe=class extends te{constructor(){super(...arguments),this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>{this.gridBodyCtrl=t.gridBodyCtrl});let e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){let{gos:e,visibleCols:t,eventSvc:n}=this.beans,i=Ho(e,"print"),o=i?0:t.getColsLeftWidth(),r=i?0:t.getDisplayedColumnsRightWidth();o!=this.leftWidth&&(this.leftWidth=o,n.dispatchEvent({type:"leftPinnedWidthChanged"})),r!=this.rightWidth&&(this.rightWidth=r,n.dispatchEvent({type:"rightPinnedWidthChanged"}))}keepPinnedColumnsNarrowerThanViewport(){let e=this.gridBodyCtrl.eBodyViewport,t=lw(e);if(t<=50)return;let n=this.getPinnedColumnsOverflowingViewport(t-50),i=this.gos.getCallback("processUnpinnedColumns"),{columns:o,hasLockedPinned:r}=n,s=o;!s.length&&!r||(i&&(s=i({columns:s,viewportWidth:t})),s?.length&&(s=s.filter(a=>!Kc(a)),this.setColsPinned(s,null,"viewportSizeFeature")))}createPinnedWidthFeature(e,...t){return new rLe(e,t)}setColsPinned(e,t,n){let{colModel:i,colAnimation:o,visibleCols:r,gos:s}=this.beans;if(!i.cols||!e?.length)return;if(Ho(s,"print")){ce(37);return}o?.start();let a;t===!0||t==="left"?a="left":t==="right"?a="right":a=null;let l=[];for(let c of e){if(!c)continue;let u=i.getCol(c);u&&u.getPinned()!==a&&(this.setColPinned(u,a),l.push(u))}l.length&&(r.refresh(n),Lte(this.eventSvc,l,n)),o?.finish()}initCol(e){let{pinned:t,initialPinned:n}=e.colDef;t!==void 0?this.setColPinned(e,t):this.setColPinned(e,n)}setColPinned(e,t){t===!0||t==="left"?e.pinned="left":t==="right"?e.pinned="right":e.pinned=null,e.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(e){let{scrollVisibleSvc:t}=this.beans;if(e.pinned==null)return;let n=e.pinned==="left",i=e.pinned==="right";e.hidden=!0;let o=()=>{let r=n?this.leftWidth:this.rightWidth;if(r==null)return;let s=r==0,a=e.hidden!==s,l=this.gos.get("enableRtl"),c=t.getScrollbarWidth(),h=t.verticalScrollShowing&&(l&&n||!l&&i)?r+c:r;e.comp.setPinnedContainerWidth(`${h}px`),e.comp.setDisplayed(!s),a&&(e.hidden=s,e.refresh())};e.addManagedEventListeners({leftPinnedWidthChanged:o,rightPinnedWidthChanged:o,scrollVisibilityChanged:o,scrollbarWidthChanged:o})}getHeaderResizeDiff(e,t){if(t.getPinned()){let{leftWidth:i,rightWidth:o}=this,r=lw(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(i+o+e>r)if(r>i+o)e=r-i-o;else return 0}return e}getPinnedColumnsOverflowingViewport(e){let t=this.rightWidth??0,n=this.leftWidth??0,i=t+n,o=!1;if(i<e)return{columns:[],hasLockedPinned:o};let{visibleCols:r}=this.beans,s=[...r.leftCols],a=[...r.rightCols],l=0,c=0,u=0,h=[],f=i-u-e;for(;(c<s.length||l<a.length)&&f>0;){if(l<a.length){let m=a[l++];if(m.colDef.lockPinned){o=!0;continue}f-=m.getActualWidth(),h.push(m)}if(c<s.length&&f>0){let m=s[c++];if(m.colDef.lockPinned){o=!0;continue}f-=m.getActualWidth(),h.push(m)}}return{columns:h,hasLockedPinned:o}}},aLe={moduleName:"PinnedColumn",version:we,beans:[sLe],css:[oLe]},lLe=class extends te{constructor(){super(),this.beanName="ariaAnnounce",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement="",this.updateAnnouncement=zo(this,this.updateAnnouncement.bind(this),200)}postConstruct(){let e=this.beans,t=ko(e),n=this.descriptionContainer=t.createElement("div");n.classList.add("ag-aria-description-container"),Gee(n,"polite"),TDe(n,"additions text"),RDe(n,!0),e.eGridDiv.appendChild(n)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;let e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.handleAnnouncementUpdate(e)},50)}handleAnnouncementUpdate(e){if(!this.isAlive()||!this.descriptionContainer)return;let t=e;if(t==null||t.replace(/[ .]/g,"")==""){this.lastAnnouncement="";return}this.lastAnnouncement===t&&(t=`${t}\u200B`),this.lastAnnouncement=t,this.descriptionContainer.textContent=t}destroy(){super.destroy();let{descriptionContainer:e}=this;e&&(Vo(e),e.remove()),this.descriptionContainer=null,this.pendingAnnouncements.clear()}},cLe={moduleName:"Aria",version:we,beans:[lLe]},dLe=":where(.ag-delay-render){.ag-cell,.ag-header-cell,.ag-header-group-cell,.ag-row,.ag-spanned-cell-wrapper{visibility:hidden}}",Eee="ag-delay-render",uLe=class extends te{constructor(){super(...arguments),this.beanName="colDelayRenderSvc",this.hideRequested=!1,this.alreadyRevealed=!1,this.timesRetried=0,this.requesters=new Set}hideColumns(e){this.alreadyRevealed||this.requesters.has(e)||(this.requesters.add(e),this.hideRequested||(this.beans.ctrlsSvc.whenReady(this,t=>{t.gridBodyCtrl.eGridBody.classList.add(Eee)}),this.hideRequested=!0))}revealColumns(e){if(this.alreadyRevealed||!this.isAlive()||(this.requesters.delete(e),this.requesters.size>0))return;let{renderStatus:t,ctrlsSvc:n}=this.beans;if(t){if(!t.areHeaderCellsRendered()&&this.timesRetried<5){this.timesRetried++,setTimeout(()=>this.revealColumns(e));return}this.timesRetried=0}n.getGridBodyCtrl().eGridBody.classList.remove(Eee),this.alreadyRevealed=!0}},hLe={moduleName:"ColumnDelayRender",version:we,beans:[uLe],css:[dLe]};function pLe(e){e.overlays?.showLoadingOverlay()}function fLe(e){e.overlays?.showNoRowsOverlay()}function mLe(e){e.overlays?.hideOverlay()}var gLe=".ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-loading-wrapper{pointer-events:all}.ag-overlay-loading-center{background:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);padding:var(--ag-spacing)}",vLe={tag:"div",cls:"ag-overlay",role:"presentation",children:[{tag:"div",cls:"ag-overlay-panel",role:"presentation",children:[{tag:"div",ref:"eOverlayWrapper",cls:"ag-overlay-wrapper",role:"presentation"}]}]},sie=class extends Mn{constructor(){super(vLe),this.eOverlayWrapper=Ce,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeCssClass=null,this.elToFocusAfter=null,this.registerCSS(gLe)}handleKeyDown(e){if(e.key!==W.TAB||e.defaultPrevented||Yc(e))return;let t=this.beans;if(kp(t,this.eOverlayWrapper,!1,e.shiftKey))return;let i=!1;e.shiftKey?i=t.focusSvc.focusGridView({column:Hn(t.visibleCols.allCols),backwards:!0,canFocusOverlay:!1}):i=qg(t,!1),i&&e.preventDefault()}updateLayoutClasses(e,t){let n=this.eOverlayWrapper.classList,{AUTO_HEIGHT:i,NORMAL:o,PRINT:r}=La;n.toggle(i,t.autoHeight),n.toggle(o,t.normal),n.toggle(r,t.print)}postConstruct(){this.createManagedBean(new hV(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){let t=this.eOverlayWrapper.classList;this.activeCssClass&&t.toggle(this.activeCssClass,!1),this.activeCssClass=e,t.toggle(e,!0)}showOverlay(e,t,n,i){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,!!e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),n&&this.isGridFocused()){let o=vi(this.beans);o&&!Vee(this.beans)&&(this.elToFocusAfter=o)}e.then(o=>{if(this.activePromise!==e){this.activeOverlay!==o&&(this.destroyBean(o),o=null);return}if(this.activePromise=null,!!o){if(this.activeOverlay!==o&&(this.eOverlayWrapper.appendChild(o.getGui()),this.activeOverlay=o,i)){let r=o;this.updateListenerDestroyFunc=this.addManagedPropertyListener(i,({currentValue:s})=>{r.refresh?.(at(this.gos,g({},s??{})))})}n&&this.isGridFocused()&&wp(this.eOverlayWrapper)}})}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){this.activePromise=null;let e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.isGridFocused()&&(t=null);let n=this.updateListenerDestroyFunc;n&&(n(),this.updateListenerDestroyFunc=null),this.destroyBean(e),Vo(this.eOverlayWrapper),t?.focus?.({preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){let e=vi(this.beans);return!!e&&this.beans.eGridDiv.contains(e)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setOverlayWrapperComp(void 0),super.destroy()}},_Le={selector:"AG-OVERLAY-WRAPPER",component:sie},yLe=class extends te{constructor(){super(...arguments),this.beanName="overlays",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}postConstruct(){this.isClientSide=$i(this.gos),this.isServerSide=!this.isClientSide&&Yg(this.gos);let e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.refreshWrapperPadding.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.eWrapper=e,this.updateOverlayVisibility()}isVisible(){return this.state!==0&&!!this.eWrapper}isExclusive(){return this.state===1&&!!this.eWrapper}showLoadingOverlay(){this.showInitialOverlay=!1;let e=this.gos,t=e.get("loading");!t&&(t!==void 0||e.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1;let e=this.gos;e.get("loading")||e.get("suppressNoRowsOverlay")||this.doShowNoRowsOverlay()}hideOverlay(){if(this.showInitialOverlay=!1,this.gos.get("loading")){ce(99);return}this.doHideOverlay()}getOverlayWrapperSelector(){return _Le}getOverlayWrapperCompClass(){return sie}updateOverlayVisibility(){if(!this.eWrapper){this.state=0;return}let{state:e,isClientSide:t,isServerSide:n,beans:{gos:i,colModel:o,rowModel:r}}=this,s=this.gos.get("loading");s!==void 0&&(this.showInitialOverlay=!1),this.showInitialOverlay&&s===void 0&&!i.get("suppressLoadingOverlay")&&(s=!i.get("columnDefs")||!o.ready||!i.get("rowData")&&t),s?e!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,t&&r.isEmpty()&&!i.get("suppressNoRowsOverlay")?e!==2&&this.doShowNoRowsOverlay():(e===1||!n&&e!==0)&&this.doHideOverlay())}doShowLoadingOverlay(){this.eWrapper&&(this.state=1,this.showOverlay(jIe(this.beans.userCompFactory,at(this.gos,{})),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.eWrapper&&(this.state=2,this.showOverlay(GIe(this.beans.userCompFactory,at(this.gos,{})),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.eWrapper&&(this.state=0,this.eWrapper.hideOverlay(),this.updateExclusive())}showOverlay(e,t,n){let i=e?.newAgStackInstance()??null;this.eWrapper?.showOverlay(i,t,this.isExclusive(),n),this.refreshWrapperPadding()}updateExclusive(){let e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"})}refreshWrapperPadding(){let e=this.eWrapper;if(!e)return;let t=0;this.state===2&&(t=this.beans.ctrlsSvc.get("gridHeaderCtrl")?.headerHeight||0),this.wrapperPadding!==t&&(this.wrapperPadding=t,e.updateOverlayWrapperPaddingTop(t))}},bLe={moduleName:"Overlay",version:we,userComponents:{agLoadingOverlay:NTe,agNoRowsOverlay:zTe},apiFunctions:{showLoadingOverlay:pLe,showNoRowsOverlay:fLe,hideOverlay:mLe},beans:[yLe]},CLe=class extends te{constructor(){super(...arguments),this.beanName="rowContainerHeight",this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=KIe(),fu(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;let e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;let e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;fu(this.gos,`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){let t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventSvc.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){let e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;let t=this.modelHeight-this.getUiBodyHeight(),n=e/t;return this.maxScrollY*n}},wLe=400,xLe=class extends te{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{let e=()=>{for(let r of this.getAllCellCtrls())r.onCellSelectionChanged()},t=()=>{for(let r of this.getAllCellCtrls())r.updateRangeBordersIfRangeCount()},n=()=>{this.eventSvc.addListener("cellSelectionChanged",e),this.eventSvc.addListener("columnMoved",t),this.eventSvc.addListener("columnPinned",t),this.eventSvc.addListener("columnVisible",t)},i=()=>{this.eventSvc.removeListener("cellSelectionChanged",e),this.eventSvc.removeListener("columnMoved",t),this.eventSvc.removeListener("columnPinned",t),this.eventSvc.removeListener("columnVisible",t)};this.addDestroyFunc(()=>i()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{Qc(this.gos)?n():i()}),Qc(this.gos)&&n()}}wireBeans(e){this.pageBounds=e.pageBounds,this.colModel=e.colModel,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusSvc=e.focusSvc,this.rowContainerHeight=e.rowContainerHeight,this.ctrlsSvc=e.ctrlsSvc,this.editSvc=e.editSvc}postConstruct(){this.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),pinnedRowsChanged:this.onPinnedRowsChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",i=>this.onSuppressCellFocusChanged(i.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.addManagedPropertyListener("cellSelection",({currentValue:i,previousValue:o})=>{(!o&&i||o&&!i)&&this.redrawRows()});let{stickyRowSvc:e,gos:t,showRowGroupCols:n}=this.beans;if(n&&this.addManagedPropertyListener("showOpenedGroup",()=>{let i=n.getShowRowGroupCols();i.length&&this.refreshCells({columns:i,force:!0})}),e)this.stickyRowFeature=e.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{let i=this.gridBodyCtrl;i.setStickyTopHeight(0),i.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=Ho(t,"print"),this.embedFullWidthRows=this.printLayout||t.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){let e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new SLe(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?.stickyTopRowCtrls??[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?.stickyBottomRowCtrls??[]}updateAllRowCtrls(){let e=Object.values(this.rowCtrlsByRowIndex),t=Object.values(this.zombieRowCtrls),n=this.cachedRowCtrls?.getEntries()??[];t.length>0||n.length>0?this.allRowCtrls=[...e,...t,...n]:this.allRowCtrls=e}isCellBeingRendered(e,t){let n=this.rowCtrlsByRowIndex[e];return!t||!n?!!n:n.isFullWidth()?!0:!!this.beans.spannedRowRenderer?.getCellByPosition({rowIndex:e,column:t,rowPinned:null})||!!n.getCellCtrl(t)||!n.isRowRendered()}updateCellFocus(e){for(let t of this.getAllCellCtrls())t.onCellFocused(e);for(let t of this.getFullWidthRowCtrls())t.onFullWidthRowFocused(e)}onCellFocusChanged(e){if(e?.rowIndex!=null&&!e.rowPinned){let t=this.beans.colModel.getCol(e.column)??void 0;this.isCellBeingRendered(e.rowIndex,t)||this.redraw()}this.updateCellFocus(e)}onSuppressCellFocusChanged(e){for(let t of this.getAllCellCtrls())t.onSuppressCellFocusChanged(e);for(let t of this.getFullWidthRowCtrls())t.onSuppressCellFocusChanged(e)}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>this.onCellFocusChanged(e),cellFocusCleared:()=>this.updateCellFocus(),flashCells:e=>{let{cellFlashSvc:t}=this.beans;if(t)for(let n of this.getAllCellCtrls())t.onFlashCells(n,e)},columnHoverChanged:()=>{for(let e of this.getAllCellCtrls())e.onColumnHover()},displayedColumnsChanged:()=>{for(let e of this.getAllCellCtrls())e.onDisplayedColumnsChanged()},displayedColumnsWidthChanged:()=>{if(this.printLayout)for(let e of this.getAllCellCtrls())e.onLeftChanged()}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){for(let e of this.destroyFuncsForColumnListeners)e();this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners();let e=this.colModel.getCols();for(let t of e){let n=l=>{for(let c of this.getAllCellCtrls())c.column===t&&l(c)},i=()=>{n(l=>l.onLeftChanged())},o=()=>{n(l=>l.onWidthChanged())},r=()=>{n(l=>l.onFirstRightPinnedChanged())},s=()=>{n(l=>l.onLastLeftPinnedChanged())},a=()=>{n(l=>l.onColDefChanged())};t.__addEventListener("leftChanged",i),t.__addEventListener("widthChanged",o),t.__addEventListener("firstRightPinnedChanged",r),t.__addEventListener("lastLeftPinnedChanged",s),t.__addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{t.__removeEventListener("leftChanged",i),t.__removeEventListener("widthChanged",o),t.__removeEventListener("firstRightPinnedChanged",r),t.__removeEventListener("lastLeftPinnedChanged",s),t.__removeEventListener("colDefChanged",a)})}}onDomLayoutChanged(){let e=Ho(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),n=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,n&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;let e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){let t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsNotSpanningForColumn(e){let t=[];for(let n of this.getAllRowCtrls()){let i=n.getCellCtrl(e,!0)?.eGui;i&&t.push(i)}return t}refreshFloatingRowComps(e=!0){this.refreshFloatingRows(this.topRowCtrls,"top",e),this.refreshFloatingRows(this.bottomRowCtrls,"bottom",e)}refreshFloatingRows(e,t,n){let{pinnedRowModel:i,beans:o,printLayout:r}=this,s=Object.fromEntries(e.map(l=>[l.rowNode.id,l]));i?.forEachPinnedRow(t,(l,c)=>{let u=e[c];u&&i.getPinnedRowById(u.rowNode.id,t)===void 0&&(u.destroyFirstPass(),u.destroySecondPass()),l.id in s&&n?(e[c]=s[l.id],delete s[l.id]):e[c]=new gI(l,o,!1,!1,r)});let a=(t==="top"?i?.getPinnedTopRowCount():i?.getPinnedBottomRowCount())??0;e.length=a}onPinnedRowDataChanged(){let e={recycleRows:!0};this.redrawAfterModelUpdate(e)}onPinnedRowsChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e,t=!1){if(e.sticky)this.stickyRowFeature?.refreshStickyNode(e);else if(this.cachedRowCtrls?.has(e)){this.cachedRowCtrls.removeRow(e);return}else{let n=i=>{let o=i[e.rowIndex];o&&o.rowNode===e&&(o.destroyFirstPass(),o.destroySecondPass(),i[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":n(this.topRowCtrls);break;case"bottom":n(this.bottomRowCtrls);break;default:n(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){let{editSvc:t}=this.beans;if(t?.isEditing()&&(t.isBatchEditing()?t.cleanupEditors():t.stopEditing(void 0,{source:"api"})),e!=null){for(let i of e??[])this.redrawRow(i,!0);this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();let t=this.beans.focusSvc?.getFocusCellToUseAfterRefresh();this.updateContainerHeights(),this.scrollToTopIfNewData(e);let n=!e.domLayoutChanged&&!!e.recycleRows,i=e.animate&&Fg(this.gos),o=n?this.getRowsToRecycle():null;n||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();let{stickyRowFeature:r,gos:s}=this;if(r){r.checkStickyRows();let a=r.extraTopHeight+r.extraBottomHeight;a&&this.updateContainerHeights(a)}this.recycleRows(o,i),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(s.get("enableRowPinning")?n:void 0),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){let t=e.newData||e.newPage,n=this.gos.get("suppressScrollOnNewData");t&&!n&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(e=0){let{rowContainerHeight:t}=this;if(this.printLayout){t.setModelHeight(null);return}let n=this.pageBounds.getCurrentPageHeight();n===0&&(n=1),t.setModelHeight(n+e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error(Bl(252));this.refreshInProgress=!0,this.beans.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.beans.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){if(!e)return;let t=this.beans.focusSvc,n=this.findPositionToFocus(e);if(!n){t.focusHeaderPosition({headerPosition:{headerRowIndex:Ll(this.beans)-1,column:e.column}});return}if(e.rowIndex!==n.rowIndex||e.rowPinned!=n.rowPinned){t.setFocusedCell(x(g({},n),{preventScrollOnBrowserFocus:!0,forceBrowserFocus:!0}));return}t.doesRowOrCellHaveBrowserFocus()||this.updateCellFocus(at(this.gos,x(g({},n),{forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"})))}findPositionToFocus(e){let{pagination:t,pageBounds:n}=this.beans,i=e;for(i.rowPinned==null&&t&&n&&!t.isRowInPage(i.rowIndex)&&(i={rowPinned:null,rowIndex:n.getFirstRow()});i;){if(i.rowPinned==null&&n)if(i.rowIndex<n.getFirstRow()){if(i=fI(this.beans,{rowPinned:null,rowIndex:0}),!i)return null}else i.rowIndex>n.getLastRow()&&(i={rowPinned:null,rowIndex:n.getLastRow()});let o=this.getRowByPosition(i);if(o?.isAlive())return x(g({},o.getRowPosition()),{column:e.column});i=fI(this.beans,i)}return null}getAllCellCtrls(){let e=[],t=this.getAllRowCtrls(),n=t.length;for(let i=0;i<n;i++){let o=t[i].getAllCellCtrls(),r=o.length;for(let s=0;s<r;s++)e.push(o[s])}return e}getAllRowCtrls(){let{spannedRowRenderer:e}=this.beans,t=this.getStickyTopRowCtrls(),n=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...t,...n,...e?.getCtrls("top")??[],...e?.getCtrls("bottom")??[],...e?.getCtrls("center")??[],...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(e,t,n){let i=this.rowCtrlsByRowIndex[t];i&&i.addEventListener(e,n)}refreshCells({rowNodes:e,columns:t,force:n,suppressFlash:i}={}){let o={force:n,newData:!1,suppressFlash:i};for(let r of this.getCellCtrls(e,t))r.refreshOrDestroyCell(o);this.refreshFullWidth(e)}refreshRows(e={}){for(let t of this.getRowCtrls(e.rowNodes))t.refreshRow(e);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=!1;for(let n of this.getRowCtrls(e)){if(!n.isFullWidth())continue;n.refreshFullWidth()||(t=!0,this.redrawRow(n.rowNode,!0))}t&&this.dispatchDisplayedRowsChanged(!1)}getRowCtrls(e){let t=N4(e),n=this.getAllRowCtrls();return!e||!t?n:n.filter(i=>{let o=i.rowNode;return B4(o,t)})}getCellCtrls(e,t){let n;Se(t)&&(n={},t.forEach(o=>{let r=this.colModel.getCol(o);Se(r)&&(n[r.getId()]=!0)}));let i=[];for(let o of this.getRowCtrls(e))for(let r of o.getAllCellCtrls()){let s=r.column.getId();n&&!n[s]||i.push(r)}return i}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){let t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),this.stickyRowFeature?.destroyStickyCtrls()}getRowsToRecycle(){let e=[];for(let n of Object.keys(this.rowCtrlsByRowIndex))this.rowCtrlsByRowIndex[n].rowNode.id==null&&e.push(n);this.removeRowCtrls(e);let t={};for(let n of Object.values(this.rowCtrlsByRowIndex)){let i=n.rowNode;t[i.id]=n}return this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){for(let n of e){let i=this.rowCtrlsByRowIndex[n];i&&(i.destroyFirstPass(t),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[n]}}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){let{focusSvc:t,animationFrameSvc:n}=this.beans,{afterScroll:i}=e,o,r=this.stickyRowFeature;r&&(o=t?.getFocusCellToUseAfterRefresh()||void 0);let s=this.firstRenderedRow,a=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let l=!1;if(r){l=r.checkStickyRows();let u=r.extraTopHeight+r.extraBottomHeight;u&&this.updateContainerHeights(u)}let c=this.firstRenderedRow!==s||this.lastRenderedRow!==a;if(!(i&&!l&&!c)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,i),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(i&&!l),o!=null)){let u=t?.getFocusCellToUseAfterRefresh();o!=null&&u==null&&(n?.flushAllFrames(),this.restoreFocusedCell(o))}}removeRowCompsNotToDraw(e,t){let n={};for(let r of e)n[r]=!0;let o=Object.keys(this.rowCtrlsByRowIndex).filter(r=>!n[r]);this.removeRowCtrls(o,t)}calculateIndexesToDraw(e){let t=[];for(let s=this.firstRenderedRow;s<=this.lastRenderedRow;s++)t.push(s);let n=this.beans.pagination,i=this.beans.focusSvc?.getFocusedCell()?.rowIndex;i!=null&&(i<this.firstRenderedRow||i>this.lastRenderedRow)&&(!n||n.isRowInPage(i))&&i<this.rowModel.getRowCount()&&t.push(i);let o=s=>{let a=s.rowNode.rowIndex;a==null||a===i||(a<this.firstRenderedRow||a>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(s)&&t.push(a)};for(let s of Object.values(this.rowCtrlsByRowIndex))o(s);if(e)for(let s of Object.values(e))o(s);t.sort((s,a)=>s-a);let r=[];for(let s=0;s<t.length;s++){let a=t[s],l=this.rowModel.getRow(a);l&&!l.sticky&&r.push(a)}return r}recycleRows(e,t=!1,n=!1){let i=this.calculateIndexesToDraw(e);(this.printLayout||n)&&(t=!1),this.removeRowCompsNotToDraw(i,!t);for(let o of i)this.createOrUpdateRowCtrl(o,e,t,n);if(e){let{animationFrameSvc:o}=this.beans;o?.active&&n&&!this.printLayout?o.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){let{visibleCols:e}=this.beans,t=e.isPinningLeft(),n=e.isPinningRight();(this.pinningLeft!==t||n!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=n,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){let e=[];for(let t of this.getFullWidthRowCtrls()){let n=t.rowNode.rowIndex;e.push(n.toString())}this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){let t=N4(e);return this.getAllRowCtrls().filter(n=>{if(!n.isFullWidth())return!1;let i=n.rowNode;return!(t!=null&&!B4(i,t))})}createOrUpdateRowCtrl(e,t,n,i){let o,r=this.rowCtrlsByRowIndex[e];if(r||(o=this.rowModel.getRow(e),Se(o)&&Se(t)&&t[o.id]&&o.alreadyRendered&&(r=t[o.id],t[o.id]=null)),!r)if(o||(o=this.rowModel.getRow(e)),Se(o))r=this.createRowCon(o,n,i);else return;o&&(o.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=r}destroyRowCtrls(e,t){let n=[];if(e){for(let i of Object.values(e))if(i){if(this.cachedRowCtrls&&i.isCacheable()){this.cachedRowCtrls.addRow(i);continue}if(i.destroyFirstPass(!t),t){let o=i.instanceId;this.zombieRowCtrls[o]=i,n.push(()=>{i.destroySecondPass(),delete this.zombieRowCtrls[o]})}else i.destroySecondPass()}}t&&(n.push(()=>{this.isAlive()&&(this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged())}),window.setTimeout(()=>{for(let i of n)i()},wLe))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){let e=this.getRowBuffer(),t=gp(this.beans);return e*t}workOutFirstAndLastRowsToRender(){let{rowContainerHeight:e,pageBounds:t,rowModel:n}=this;e.updateOffset();let i,o;if(!n.isRowsToRender())i=0,o=-1;else if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),i=t.getFirstRow(),o=t.getLastRow();else{let u=this.getRowBufferInPixels(),h=this.ctrlsSvc.getScrollFeature(),f=this.gos.get("suppressRowVirtualisation"),m=!1,_,y;do{let O=t.getPixelOffset(),{pageFirstPixel:F,pageLastPixel:H}=t.getCurrentPagePixelRange(),j=e.divStretchOffset,re=h.getVScrollPosition(),ae=re.top,se=re.bottom;f?(_=F+j,y=H+j):(_=Math.max(ae+O-u,F)+j,y=Math.min(se+O+u,H)+j),this.firstVisibleVPixel=Math.max(ae+O,F)+j,this.lastVisibleVPixel=Math.min(se+O,H)+j,m=this.ensureAllRowsInRangeHaveHeightsCalculated(_,y)}while(m);let w=n.getRowIndexAtPixel(_),C=n.getRowIndexAtPixel(y),S=t.getFirstRow(),I=t.getLastRow();w<S&&(w=S),C>I&&(C=I),i=w,o=C}let r=Ho(this.gos,"normal"),s=this.gos.get("suppressMaxRenderedRowRestriction"),a=Math.max(this.getRowBuffer(),500);r&&!s&&o-i>a&&(o=i+a);let l=i!==this.firstRenderedRow,c=o!==this.lastRenderedRow;(l||c)&&(this.firstRenderedRow=i,this.lastRenderedRow=o,this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:i,lastRow:o}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,Xc(this.beans,()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){let n=this.pinnedRowModel?.ensureRowHeightsValid(),i=this.stickyRowFeature?.ensureRowHeightsValid(),{pageBounds:o,rowModel:r}=this,s=r.ensureRowHeightsValid(e,t,o.getFirstRow(),o.getLastRow());return(s||i)&&this.eventSvc.dispatchEvent({type:"recalculateRowBounds"}),i||s||n?(this.updateContainerHeights(),!0):!1}doNotUnVirtualiseRow(e){let i=e.rowNode,o=this.focusSvc.isRowFocused(i.rowIndex,i.rowPinned),r=this.editSvc?.isEditing(e),s=i.detail;return o||r||s?!!this.isRowPresent(i):!1}isRowPresent(e){return this.rowModel.isRowPresent(e)?this.beans.pagination?.isRowInPage(e.rowIndex)??!0:!1}createRowCon(e,t,n){let i=this.cachedRowCtrls?.getRow(e)??null;if(i)return i;let o=n&&!this.printLayout&&!!this.beans.animationFrameSvc?.active;return new gI(e,this.beans,t,o,this.printLayout)}getRenderedNodes(){let e=Object.values(this.rowCtrlsByRowIndex).map(i=>i.rowNode),t=this.getStickyTopRowCtrls().map(i=>i.rowNode),n=this.getStickyBottomRowCtrls().map(i=>i.rowNode);return[...t,...e,...n]}getRowByPosition(e){let t,{rowIndex:n}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[n];break;case"bottom":t=this.bottomRowCtrls[n];break;default:t=this.rowCtrlsByRowIndex[n],t||(t=this.getStickyTopRowCtrls().find(i=>i.rowNode.rowIndex===n)||null,t||(t=this.getStickyBottomRowCtrls().find(i=>i.rowNode.rowIndex===n)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;let i=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!i}},SLe=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.rowNode.id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){let t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e?.id==null)return null;let t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.rowNode!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){let t=e.id,n=this.entriesMap[t];delete this.entriesMap[t],Ba(this.entriesList,n)}removeFromCache(e){let t=e.rowNode.id;delete this.entriesMap[t],Ba(this.entriesList,e)}getEntries(){return this.entriesList}};function N4(e){if(!e)return;let t={top:{},bottom:{},normal:{}};for(let n of e){let i=n.id;switch(n.rowPinned){case"top":t.top[i]=n;break;case"bottom":t.bottom[i]=n;break;default:t.normal[i]=n;break}}return t}function B4(e,t){let n=e.id;switch(e.rowPinned){case"top":return t.top[n]!=null;case"bottom":return t.bottom[n]!=null;default:return t.normal[n]!=null}}var ELe=class extends te{constructor(){super(...arguments),this.beanName="rowNodeSorter"}postConstruct(){let{gos:e}=this;this.isAccentedSort=e.get("accentedSort"),this.primaryColumnsSortGroups=Ol(e),this.addManagedPropertyListener("accentedSort",t=>this.isAccentedSort=t.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=Ol(e))}doFullSort(e,t){let n=e.map((i,o)=>({currentPos:o,rowNode:i}));return n.sort(this.compareRowNodes.bind(this,t)),n.map(i=>i.rowNode)}compareRowNodes(e,t,n){let i=t.rowNode,o=n.rowNode;for(let r=0,s=e.length;r<s;r++){let a=e[r],l=a.sort==="desc",c=this.getValue(i,a.column),u=this.getValue(o,a.column),h,f=this.getComparator(a,i);if(f?h=f(c,u,i,o,l):h=xDe(c,u,this.isAccentedSort),!isNaN(h)&&h!==0)return a.sort==="asc"?h:h*-1}return t.currentPos-n.currentPos}getComparator(e,t){let n=e.column,i=n.getColDef().comparator;if(i!=null)return i;if(!n.getColDef().showRowGroup)return;let o=!t.group&&n.getColDef().field;if(!o)return;let r=this.beans.colModel.getColDefCol(o);if(r)return r.getColDef().comparator}getValue(e,t){let{valueSvc:n,colModel:i,showRowGroupCols:o,gos:r}=this.beans;if(!this.primaryColumnsSortGroups)return n.getValue(t,e,!1);if(e.rowGroupColumn===t){if(Cte(r,i.isPivotActive())){let c=e.data?e:une(e.childrenAfterGroup);return c&&n.getValue(t,c,!1)}let l=o?.getShowRowGroupCol(t.getId());return l?e.groupData?.[l.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return n.getValue(t,e,!1)}};function DLe(e){e.sortSvc?.onSortChanged("api")}var aie={moduleName:"Sort",version:we,beans:[GFe,ELe],apiFunctions:{onSortChanged:DLe},userComponents:{agSortIndicator:xV},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"}},kLe=class extends te{constructor(){super(...arguments),this.beanName="syncSvc",this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.beans.ctrlsSvc.whenReady(this,()=>{let e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){let{colModel:t,rowModel:n}=this.beans;t.setColumnDefs(e??[],"gridInitializing"),n.start()}gridReady(){let{eventSvc:e,gos:t}=this;e.dispatchEvent({type:"gridReady"}),fu(t,`initialised successfully, enterprise = ${t.isModuleRegistered("EnterpriseCore")}`)}setColumnDefs(e){let t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.beans.colModel.setColumnDefs(t,Ng(e.source))}}};function ILe(e){e.valueCache?.expire()}function MLe(e,t){let{colKey:n,rowNode:i,useFormatter:o}=t,r=e.colModel.getColDefCol(n)??e.colModel.getCol(n);if(di(r))return null;let s=e.valueSvc.getValueForDisplay(r,i,o);return o?s.valueFormatted??Zg(s.value):s.value}var RLe="paste",TLe=class extends te{constructor(){super(...arguments),this.beanName="changeDetectionSvc",this.clientSideRowModel=null}postConstruct(){let{gos:e,rowModel:t}=this.beans;$i(e,t)&&(this.clientSideRowModel=t),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){let{gos:t,rowRenderer:n}=this.beans;if(e.source===RLe||t.get("suppressChangeDetection"))return;let i=e.node,o=[i],r=this.clientSideRowModel,s=r?.rootNode;if(s&&!i.isRowPinned()){let a=t.get("aggregateOnlyChangedColumns"),l=new gw(a,s);l.addParentNode(i.parent,[e.column]),r.doAggregate(l),l.forEachChangedNodeDepthFirst(c=>{o.push(c),c.sibling&&o.push(c.sibling)})}n.refreshCells({rowNodes:o})}},PLe=class extends te{constructor(){super(...arguments),this.beanName="expressionSvc",this.cache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);On(15,{expression:e})}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(n){return On(16,{expression:e,params:t,e:n}),null}}createExpressionFunction(e){let t=this.cache;if(t[e])return t[e];let n=this.createFunctionBody(e),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",n);return t[e]=i,i}createFunctionBody(e){return e.includes("return")?e:"return "+e+";"}},ALe=class extends te{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){let e=this.gos;this.active=e.get("valueCache"),this.neverExpires=e.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,n){if(this.active){let i=this.cacheVersion;e.__cacheVersion!==i&&(e.__cacheVersion=i,e.__cacheData={}),e.__cacheData[t]=n}}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},OLe={moduleName:"ValueCache",version:we,beans:[ALe],apiFunctions:{expireValueCache:ILe}},FLe={moduleName:"Expression",version:we,beans:[PLe]},LLe={moduleName:"ChangeDetection",version:we,beans:[TLe]},NLe={moduleName:"CellApi",version:we,apiFunctions:{getCellValue:MLe}},BLe=class extends te{constructor(){super(...arguments),this.beanName="valueSvc",this.hasEditSvc=!1,this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionSvc=e.expressionSvc,this.colModel=e.colModel,this.valueCache=e.valueCache,this.dataTypeSvc=e.dataTypeSvc,this.editSvc=e.editSvc,this.hasEditSvc=!!e.editSvc}postConstruct(){this.initialised||this.init()}init(){this.executeValueGetter=this.valueCache?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=Yg(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;let e=t=>this.callColumnCellValueChangedHandler(t);this.eventSvc.addListener("cellValueChanged",e,!0),this.addDestroyFunc(()=>this.eventSvc.removeListener("cellValueChanged",e,!0)),this.addManagedPropertyListener("treeData",t=>this.isTreeData=t.currentValue)}getValueForDisplay(e,t,n=!1,i=!1,o="ui"){let{showRowGroupColValueSvc:r}=this.beans,s=!e&&t.group,a=e?.colDef.showRowGroup,l=!this.isTreeData||t.footer;if(r&&l&&(s||a)){let y=r.getGroupValue(t,e);if(y==null)return{value:null,valueFormatted:null};if(!n)return{value:y.value,valueFormatted:null};let w=r.formatAndPrefixGroupColValue(y,e,i);return{value:y.value,valueFormatted:w}}if(!e)return{value:t.key,valueFormatted:null};let c=t.leafGroup&&this.colModel.isPivotMode(),u=t.group&&t.expanded&&!t.footer&&!c,h=this.gos.get("groupSuppressBlankHeader")||!t.sibling,f=u&&!h,m=this.getValue(e,t,f,o),_=n&&!(i&&e.colDef.useValueFormatterForExport===!1);return{value:m,valueFormatted:_?this.formatValue(e,t,m):null}}getValue(e,t,n=!1,i="ui"){if(this.initialised||this.init(),!t)return;let o=e.getColDef(),r=o.field,s=e.getColId(),a=t.data;if(this.hasEditSvc&&i==="ui"){let y=this.editSvc;if(y.isEditing()){let w=y.getCellDataValue({rowNode:t,column:e},!0);if(w!==void 0)return w}}let l,c=o.showRowGroup;if(typeof c=="string"&&(this.beans.rowGroupColsSvc?.getColumnIndex(c)??-1)>t.level)return null;let u=typeof c!="string"||!t.group,h=t.groupData&&s in t.groupData,f=!n&&t.aggData&&t.aggData[s]!==void 0,m=this.isSsrm&&n&&!!o.aggFunc,_=this.isSsrm&&t.footer&&t.field&&(o.showRowGroup===!0||o.showRowGroup===t.field);if(this.isTreeData&&f)l=t.aggData[s];else if(this.isTreeData&&o.valueGetter)l=this.executeValueGetter(o.valueGetter,a,e,t);else if(this.isTreeData&&r&&a)l=nw(a,r,e.isFieldContainsDots());else if(h)l=t.groupData[s];else if(f)l=t.aggData[s];else if(o.valueGetter&&!m){if(!u)return l;l=this.executeValueGetter(o.valueGetter,a,e,t)}else if(_)l=nw(a,t.field,e.isFieldContainsDots());else if(r&&a&&!m){if(!u)return l;l=nw(a,r,e.isFieldContainsDots())}if(this.cellExpressions&&typeof l=="string"&&l.indexOf("=")===0){let y=l.substring(1);l=this.executeValueGetter(y,a,e,t)}return l}parseValue(e,t,n,i){let o=e.getColDef(),r=o.valueParser;if(Se(r)){let s=at(this.gos,{node:t,data:t?.data,oldValue:i,newValue:n,colDef:o,column:e});return typeof r=="function"?r(s):this.expressionSvc?.evaluate(r,s)}return n}getDeleteValue(e,t){return Se(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t).value)??null:null}formatValue(e,t,n,i,o=!0){let{expressionSvc:r}=this.beans,s=null,a,l=e.getColDef();if(i?a=i:o&&(a=l.valueFormatter),a){let c=t?t.data:null,u=at(this.gos,{value:n,node:t,data:c,colDef:l,column:e});typeof a=="function"?s=a(u):s=r?r.evaluate(a,u):null}else if(l.refData)return l.refData[n]||"";return s==null&&Array.isArray(n)&&(s=n.join(", ")),s}setValue(e,t,n,i){let o=this.colModel.getColDefCol(t);if(!e||!o)return!1;di(e.data)&&(e.data={});let{field:r,valueSetter:s}=o.getColDef();if(di(r)&&di(s))return ce(17),!1;if(this.dataTypeSvc&&!this.dataTypeSvc.checkType(o,n))return ce(135),!1;let a=at(this.gos,{node:e,data:e.data,oldValue:this.getValue(o,e,void 0,i),newValue:n,colDef:o.getColDef(),column:o});a.newValue=n;let l;if(Se(s)?typeof s=="function"?l=s(a):l=this.expressionSvc?.evaluate(s,a):l=this.setValueUsingField(e.data,r,n,o.isFieldContainsDots()),l===void 0&&(l=!0),!l)return!1;e.resetQuickFilterAggregateText(),this.valueCache?.onDataChanged();let c=this.getValue(o,e);return this.dispatchCellValueChangedEvent(e,a,c,i),e.pinnedSibling&&this.dispatchCellValueChangedEvent(e.pinnedSibling,a,c,i),!0}dispatchCellValueChangedEvent(e,t,n,i){this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:t.column,colDef:t.colDef,data:e.data,node:e,oldValue:t.oldValue,newValue:n,value:n,source:i})}callColumnCellValueChangedHandler(e){let t=e.colDef.onCellValueChanged;typeof t=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,n,i){if(!t)return!1;let o=!1;if(!i)o=e[t]===n,o||(e[t]=n);else{let r=t.split("."),s=e;for(;r.length>0&&s;){let a=r.shift();r.length===0?(o=s[a]===n,o||(s[a]=n)):s=s[a]}}return!o}executeValueGetterWithValueCache(e,t,n,i){let o=n.getColId(),r=this.valueCache.getValue(i,o);if(r!==void 0)return r;let s=this.executeValueGetterWithoutValueCache(e,t,n,i);return this.valueCache.setValue(i,o,s),s}executeValueGetterWithoutValueCache(e,t,n,i){let o=at(this.gos,{data:t,node:i,column:n,colDef:n.getColDef(),getValue:this.getValueCallback.bind(this,i)}),r;return typeof e=="function"?r=e(o):r=this.expressionSvc?.evaluate(e,o),r}getValueCallback(e,t){let n=this.colModel.getColDefCol(t);return n?this.getValue(n,e):null}getKeyForNode(e,t){let n=this.getValue(e,t),i=e.getColDef().keyCreator,o=n;if(i){let r=at(this.gos,{value:n,colDef:e.getColDef(),column:e,node:t,data:t.data});o=i(r)}return typeof o=="string"||o==null||(o=String(o),o==="[object Object]"&&ce(121)),o}},zLe={moduleName:"CommunityCore",version:we,beans:[VFe,APe,WOe,fIe,CLe,oOe,OFe,c2e,dIe,iLe,nLe,xLe,BLe,BFe,AFe,zFe,KOe,kLe,HOe,$Oe,b2e],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId:OPe,destroy:FPe,isDestroyed:LPe,getGridOption:NPe,setGridOption:BPe,updateGridOptions:Lne,isModuleRegistered:zPe},dependsOn:[BOe,LAe,jAe,aie,g2e,sOe,v2e,bLe,LLe,y2e,tLe,aLe,cLe,w2e,UOe,zOe,FLe,dOe,hLe]},lie={AdvancedFilter:1,AiToolkit:1,AllEnterprise:1,BatchEdit:1,CellSelection:1,Clipboard:1,ColumnMenu:1,ColumnsToolPanel:1,ContextMenu:1,ExcelExport:1,FiltersToolPanel:1,Find:1,GridCharts:1,IntegratedCharts:1,GroupFilter:1,MasterDetail:1,Menu:1,MultiFilter:1,NewFiltersToolPanel:1,Pivot:1,RangeSelection:1,RichSelect:1,RowNumbers:1,RowGrouping:1,RowGroupingPanel:1,ServerSideRowModelApi:1,ServerSideRowModel:1,SetFilter:1,SideBar:1,Sparklines:1,StatusBar:1,TreeData:1,ViewportRowModel:1},i4=["TextFilter","NumberFilter","DateFilter","SetFilter","MultiFilter","GroupFilter","CustomFilter"],VLe={EditCore:["TextEditor","NumberEditor","DateEditor","CheckboxEditor","LargeTextEditor","SelectEditor","RichSelect","CustomEditor"],CheckboxCellRenderer:["AllCommunity"],ClientSideRowModelHierarchy:["RowGrouping","Pivot","TreeData"],ColumnFilter:i4,ColumnGroupHeaderComp:["AllCommunity"],ColumnGroup:["AllCommunity"],ColumnHeaderComp:["AllCommunity"],ColumnMove:["AllCommunity"],ColumnResize:["AllCommunity"],CommunityCore:["AllCommunity"],CsrmSsrmSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],RowModelSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],EnterpriseCore:["AllEnterprise"],FilterCore:[...i4,"QuickFilter","ExternalFilter","AdvancedFilter"],GroupCellRenderer:["RowGrouping","Pivot","TreeData","MasterDetail","ServerSideRowModel"],KeyboardNavigation:["AllCommunity"],LoadingCellRenderer:["ServerSideRowModel"],MenuCore:["ColumnMenu","ContextMenu"],MenuItem:["ColumnMenu","ContextMenu","MultiFilter","IntegratedCharts","ColumnsToolPanel"],Overlay:["AllCommunity"],PinnedColumn:["AllCommunity"],SharedAggregation:["RowGrouping","Pivot","TreeData","ServerSideRowModel"],SharedDragAndDrop:["AllCommunity"],SharedMasterDetail:["MasterDetail","ServerSideRowModel"],SharedMenu:[...i4,"ColumnMenu","ContextMenu"],SharedPivot:["Pivot","ServerSideRowModel"],SharedRowGrouping:["RowGrouping","ServerSideRowModel"],SharedRowSelection:["RowSelection","ServerSideRowModel"],SkeletonCellRenderer:["ServerSideRowModel"],Sort:["AllCommunity"],SsrmInfiniteSharedApi:["InfiniteRowModel","ServerSideRowModelApi"],SharedTreeData:["TreeData","ServerSideRowModel"]},HLe={InfiniteRowModel:"infinite",ClientSideRowModelApi:"clientSide",ClientSideRowModel:"clientSide",ServerSideRowModelApi:"serverSide",ServerSideRowModel:"serverSide",ViewportRowModel:"viewport"};function $Le(e,t){let n=[];for(let i of Array.isArray(e)?e:[e]){let o=VLe[i];if(o)for(let r of o){let s=HLe[r];(!s||s===t)&&n.push(r)}else n.push(i)}return n}var cie=()=>`No AG Grid modules are registered! It is recommended to start with all Community features via the AllCommunityModule:
                    
    import { ModuleRegistry, AllCommunityModule } from 'ag-grid-community';
    
    ModuleRegistry.registerModules([ AllCommunityModule ]);
    `,jLe=e=>{let t=e.map(i=>`import { ${iw(i)} } from '${lie[i]?"ag-grid-enterprise":"ag-grid-community"}';`);return e.some(i=>i==="IntegratedCharts"||i==="Sparklines")&&t.push("import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';"),`import { ModuleRegistry } from 'ag-grid-community'; 
${t.join(` 
`)} 

ModuleRegistry.registerModules([ ${e.map(i=>iw(i,!0)).join(", ")} ]); 

For more info see: ${Og}/modules/`};function iw(e,t=!1){return t&&(e==="IntegratedCharts"||e==="Sparklines")?`${e}Module.with(AgChartsEnterpriseModule)`:`${e}Module`}function GLe(e,t){let n=t.filter(r=>r==="IntegratedCharts"||r==="Sparklines"),i="";return!globalThis?.agCharts&&n.length>0?i=`Unable to use ${e} as either the ag-charts-community or ag-charts-enterprise script needs to be included alongside ag-grid-enterprise.
`:t.some(r=>lie[r])&&(i=i+`Unable to use ${e} as that requires the ag-grid-enterprise script to be included.
`),i}function die({moduleName:e,rowModelType:t}){return`To use the ${e}Module you must set the gridOption "rowModelType='${t}'"`}var Dee=({reasonOrId:e,moduleName:t,gridScoped:n,gridId:i,rowModelType:o,additionalText:r,isUmd:s})=>{let a=$Le(t,o),l=typeof e=="string"?e:KLe[e];if(s)return GLe(l,a);let c=a.filter(f=>f==="IntegratedCharts"||f==="Sparklines"),u=c.length>0?`${c.map(f=>iw(f)).join()} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.`:"";return`${`Unable to use ${l} as ${a.length>1?"one of "+a.map(f=>iw(f)).join(", "):iw(a[0])} is not registered${n?" for gridId: "+i:""}. ${u} Check if you have registered the module:
`}
${jLe(a)}`+(r?` 

${r}`:"")},kee=e=>`${e} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.

import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';
import { ModuleRegistry } from 'ag-grid-community';
import { ${e} } from 'ag-grid-enterprise';
    
ModuleRegistry.registerModules([${e}.with(AgChartsEnterpriseModule)]);
    `,ULe=e=>`AG Grid: Unable to use the Clipboard API (navigator.clipboard.${e}()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.`,WLe={1:()=>"`rowData` must be an array",2:({nodeId:e})=>`Duplicate node id '${e}' detected from getRowId callback, this could cause issues in your grid.`,3:()=>"Calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.",4:({id:e})=>`Could not find row id=${e}, data item was not found for this id`,5:({data:e})=>["Could not find data item as object was not found.",e," Consider using getRowId to help the Grid find matching row data"],6:()=>"'groupHideOpenParents' only works when specifying specific columns for 'colDef.showRowGroup'",7:()=>"Pivoting is not supported with aligned grids as it may produce different columns in each grid.",8:({key:e})=>`Unknown key for navigation ${e}`,9:({variable:e})=>`No value for ${e?.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e?.defaultValue} will be used and updated when styles load.`,10:({eventType:e})=>`As of v33, the '${e}' event is deprecated. Use the global 'modelUpdated' event to determine when row children have changed.`,11:()=>"No gridOptions provided to createGrid",12:({colKey:e})=>["column ",e," not found"],13:()=>"Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid.",14:({groupPrefix:e})=>`Row IDs cannot start with ${e}, this is a reserved prefix for AG Grid's row grouping feature.`,15:({expression:e})=>["value should be either a string or a function",e],16:({expression:e,params:t,e:n})=>["Processing of the expression failed","Expression = ",e,"Params = ",t,"Exception = ",n],17:()=>"you need either field or valueSetter set on colDef for editing to work",18:()=>"alignedGrids contains an undefined option.",19:()=>"alignedGrids - No api found on the linked grid.",20:()=>`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`,21:()=>"pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.",22:({key:e})=>`${e} is an initial property and cannot be updated.`,23:()=>"The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.",24:()=>"row height must be a number if not using standard row model",25:({id:e})=>["The getRowId callback must return a string. The ID ",e," is being cast to a string."],26:({fnName:e,preDestroyLink:t})=>`Grid API function ${e}() cannot be called as the grid has been destroyed.
 Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
 To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${t}`,27:({fnName:e,module:t})=>`API function '${e}' not registered to module '${t}'`,28:()=>"setRowCount cannot be used while using row grouping.",29:()=>"tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?",30:({toIndex:e})=>["tried to insert columns in invalid location, toIndex = ",e,"remember that you should not count the moving columns when calculating the new index"],31:()=>"infinite loop in resizeColumnSets",32:()=>"applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state.",33:()=>"stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON.",34:({key:e})=>`the column type '${e}' is a default column type and cannot be overridden.`,35:()=>"Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type.",36:({t:e})=>"colDef.type '"+e+"' does not correspond to defined gridOptions.columnTypes",37:()=>"Changing the column pinning status is not allowed with domLayout='print'",38:({iconName:e})=>`provided icon '${e}' needs to be a string or a function`,39:()=>"Applying column order broke a group where columns should be married together. Applying new order has been discarded.",40:({e,method:t})=>`${e}
${ULe(t)}`,41:()=>"Browser did not allow document.execCommand('copy'). Ensure 'api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons.",42:()=>"Browser does not support document.execCommand('copy') for clipboard operations",43:({iconName:e})=>`As of v33, icon '${e}' is deprecated. Use the icon CSS name instead.`,44:()=>'Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.',45:({parentCellDataType:e})=>`The data type definition ${e} does not exist.`,46:()=>'The "baseDataType" property of a data type definition must match that of its parent.',47:({cellDataType:e})=>`Missing data type definition - "${e}"`,48:({property:e})=>`Cell data type is "object" but no Value ${e} has been provided. Please either provide an object data type definition with a Value ${e}, or set "colDef.value${e}"`,49:({methodName:e})=>`Framework component is missing the method ${e}()`,50:({compName:e})=>`Could not find component ${e}, did you forget to configure this component?`,51:()=>"Export cancelled. Export is not allowed as per your configuration.",52:()=>"There is no `window` associated with the current `document`",53:()=>"unknown value type during csv conversion",54:()=>"Could not find document body, it is needed for drag and drop and context menu.",55:()=>"addRowDropZone - A container target needs to be provided",56:()=>"addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.",57:()=>"unable to show popup filter, filter instantiation failed",58:()=>"no values found for select cellEditor",59:()=>"cannot select pinned rows",60:()=>"cannot select node until it has finished loading",61:()=>"since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option.",62:({colId:e})=>`setFilterModel() - no column found for colId: ${e}`,63:({colId:e})=>`setFilterModel() - unable to fully apply model, filtering disabled for colId: ${e}`,64:({colId:e})=>`setFilterModel() - unable to fully apply model, unable to create filter for colId: ${e}`,65:()=>"filter missing setModel method, which is needed for setFilterModel",66:()=>"filter API missing getModel method, which is needed for getFilterModel",67:()=>"Filter is missing isFilterActive() method",68:()=>"Column Filter API methods have been disabled as Advanced Filters are enabled.",69:({guiFromFilter:e})=>`getGui method from filter returned ${e}; it should be a DOM element.`,70:({newFilter:e})=>`Grid option quickFilterText only supports string inputs, received: ${typeof e}`,71:()=>"debounceMs is ignored when apply button is present",72:({keys:e})=>["ignoring FilterOptionDef as it doesn't contain one of ",e],73:()=>"invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'",74:()=>"no filter options for filter",75:()=>"Unknown button type specified",76:({filterModelType:e})=>['Unexpected type of filter "',e,'", it looks like the filter was configured with incorrect Filter Options'],77:()=>"Filter model is missing 'conditions'",78:()=>'Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.',79:()=>'"filterParams.maxNumConditions" must be greater than or equal to zero.',80:()=>'"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.',81:()=>'"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".',82:({param:e})=>`DateFilter ${e} is not a number`,83:()=>"DateFilter minValidYear should be <= maxValidYear",84:()=>"DateFilter minValidDate should be <= maxValidDate",85:()=>"DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.",86:()=>"DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.",87:()=>"DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.",88:({index:e})=>`Invalid row index for ensureIndexVisible: ${e}`,89:()=>"A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)",90:()=>"datasource is missing getRows method",91:()=>"Filter is missing method doesFilterPass",92:()=>"AnimationFrameService called but animation frames are off",93:()=>"cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`",94:({paginationPageSizeOption:e,pageSizeSet:t,pageSizesSet:n,pageSizeOptions:i})=>`'paginationPageSize=${e}'${t?"":" (default value)"}, but ${e} is not included in${n?"":" the default"} paginationPageSizeSelector=[${i?.join(", ")}].`,95:({paginationPageSizeOption:e,paginationPageSizeSelector:t})=>`Either set '${t}' to an array that includes ${e} or to 'false' to disable the page size selector.`,96:({id:e,data:t})=>["Duplicate ID",e,"found for pinned row with data",t,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter."],97:({colId:e})=>`cellEditor for column ${e} is missing getGui() method`,98:()=>"popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.",99:()=>"Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.",101:({propertyName:e,componentName:t,agGridDefaults:n,jsComps:i})=>{let o=[],r=[...Object.keys(n??[]).filter(a=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(a)),...Object.keys(i??[]).filter(a=>!!i[a])],s=C4({inputValue:t,allSuggestions:r,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return o.push(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.
`),s.length>0&&o.push(`         Did you mean: [${s.slice(0,3)}]?
`),o.push("If using a custom component check it has been registered correctly."),o},102:()=>"selectAll: 'filtered' only works when gridOptions.rowModelType='clientSide'",103:()=>"Invalid selection state. When using client-side row model, the state must conform to `string[]`.",104:({value:e,param:t})=>`Numeric value ${e} passed to ${t} param will be interpreted as ${e} seconds. If this is intentional use "${e}s" to silence this warning.`,105:({e})=>["chart rendering failed",e],106:()=>`Theming API and Legacy Themes are both used in the same page. A Theming API theme has been provided to the 'theme' grid option, but the file (ag-grid.css) is also included and will cause styling issues. Remove ag-grid.css from the page. See the migration guide: ${Og}/theming-migration/`,107:({key:e,value:t})=>`Invalid value for theme param ${e} - ${t}`,108:({e})=>["chart update failed",e],109:({inputValue:e,allSuggestions:t})=>{let n=C4({inputValue:e,allSuggestions:t,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return[`Could not find '${e}' aggregate function. It was configured as "aggFunc: '${e}'" but it wasn't found in the list of registered aggregations.`,n.length>0?`         Did you mean: [${n.slice(0,3)}]?`:"","If using a custom aggregation function check it has been registered correctly."].join(`
`)},110:()=>"groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup",111:()=>"Invalid selection state. When `groupSelects` is enabled, the state must conform to `IServerSideGroupSelectionState`.",113:()=>"Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values",114:({component:e})=>`Could not find component with name of ${e}. Is it in Vue.components?`,116:()=>"Invalid selection state. The state must conform to `IServerSideSelectionState`.",117:()=>"selectAll must be of boolean type.",118:()=>"Infinite scrolling must be enabled in order to set the row count.",119:()=>"Unable to instantiate filter",120:()=>"MultiFloatingFilterComp expects MultiFilter as its parent",121:()=>"a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (see AG Grid docs) or b) to toString() on the object to return a key",122:()=>"could not find the document, document is empty",123:()=>"Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model.",124:()=>"No active charts to update.",125:({chartId:e})=>`Unable to update chart. No active chart found with ID: ${e}.`,126:()=>"unable to restore chart as no chart model is provided",127:({allRange:e})=>`unable to create chart as ${e?"there are no columns in the grid":"no range is selected"}.`,128:({feature:e})=>`${e} is only available if using 'multiRow' selection mode.`,129:({feature:e,rowModel:t})=>`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`,130:()=>'cannot multi select unless selection mode is "multiRow"',132:()=>"Row selection features are not available unless `rowSelection` is enabled.",133:({iconName:e})=>`icon '${e}' function should return back a string or a dom object`,134:({iconName:e})=>`Did not find icon '${e}'`,135:()=>"Data type of the new value does not match the cell data type of the column",136:()=>"Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.",137:({type:e,currentChartType:t})=>`Unable to update chart as a '${e}' update type is not permitted on a ${t}.`,138:({chartType:e})=>`invalid chart type supplied: ${e}`,139:({customThemeName:e})=>`a custom chart theme with the name ${e} has been supplied but not added to the 'chartThemes' list`,140:({name:e})=>`no stock theme exists with the name '${e}' and no custom chart theme with that name was supplied to 'customChartThemes'`,141:()=>"cross filtering with row grouping is not supported.",142:()=>"cross filtering is only supported in the client side row model.",143:({panel:e})=>`'${e}' is not a valid Chart Tool Panel name`,144:({type:e})=>`Invalid charts data panel group name supplied: '${e}'`,145:({group:e})=>`As of v32, only one charts customize panel group can be expanded at a time. '${e}' will not be expanded.`,146:({comp:e})=>`Unable to instantiate component '${e}' as its module hasn't been loaded. Add 'ValidationModule' to see which module is required.`,147:({group:e})=>`Invalid charts customize panel group name supplied: '${e}'`,148:({group:e})=>`invalid chartGroupsDef config '${e}'`,149:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,150:()=>"'seriesChartTypes' are required when the 'customCombo' chart type is specified.",151:({chartType:e})=>`invalid chartType '${e}' supplied in 'seriesChartTypes', converting to 'line' instead.`,152:({colId:e})=>`no 'seriesChartType' found for colId = '${e}', defaulting to 'line'.`,153:({chartDataType:e})=>`unexpected chartDataType value '${e}' supplied, instead use 'category', 'series' or 'excluded'`,154:({colId:e})=>`cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: ${e}`,155:({option:e})=>`'${e}' is not a valid Chart Toolbar Option`,156:({panel:e})=>`Invalid panel in chartToolPanelsDef.panels: '${e}'`,157:({unrecognisedGroupIds:e})=>["unable to find group(s) for supplied groupIds:",e],158:()=>"can not expand a column item that does not represent a column group header",159:()=>"Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty.",160:()=>"Export cancelled. Export is not allowed as per your configuration.",161:()=>"The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'",162:({id:e,dataType:t})=>`Unrecognized data type for excel export [${e}.dataType=${t}]`,163:({featureName:e})=>`Excel table export does not work with ${e}. The exported Excel file will not contain any Excel tables.
 Please turn off ${e} to enable Excel table exports.`,164:()=>"Unable to add data table to Excel sheet: A table already exists.",165:()=>"Unable to add data table to Excel sheet: Missing required parameters.",166:({unrecognisedGroupIds:e})=>["unable to find groups for these supplied groupIds:",e],167:({unrecognisedColIds:e})=>["unable to find columns for these supplied colIds:",e],168:()=>"detailCellRendererParams.template should be function or string",169:()=>'Reference to eDetailGrid was missing from the details template. Please add data-ref="eDetailGrid" to the template.',170:({providedStrategy:e})=>`invalid cellRendererParams.refreshStrategy = ${e} supplied, defaulting to refreshStrategy = 'rows'.`,171:()=>"could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions",172:()=>"could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData",173:({group:e})=>`invalid chartGroupsDef config '${e}'`,174:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,175:({menuTabName:e,itemsToConsider:t})=>[`Trying to render an invalid menu item '${e}'. Check that your 'menuTabs' contains one of `,t],176:({key:e})=>`unknown menu item type ${e}`,177:()=>"valid values for cellSelection.handle.direction are 'x', 'y' and 'xy'. Default to 'xy'.",178:({colId:e})=>`column ${e} is not visible`,179:()=>"totalValueGetter should be either a function or a string (expression)",180:()=>"agRichSelectCellEditor requires cellEditorParams.values to be set",181:()=>"agRichSelectCellEditor cannot have `multiSelect` and `allowTyping` set to `true`. AllowTyping has been turned off.",182:()=>'you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data',183:()=>"Group Column Filter only works on group columns. Please use a different filter.",184:({parentGroupData:e,childNodeData:t})=>["duplicate group keys for row data, keys should be unique",[e,t]],185:({data:e})=>["getDataPath() should not return an empty path",[e]],186:({rowId:e,rowData:t,duplicateRowsData:n})=>["duplicate group keys for row data, keys should be unique",e,t,...n??[]],187:({rowId:e,firstData:t,secondData:n})=>[`Duplicate node id ${e}. Row IDs are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.`,"first instance",t,"second instance",n],188:e=>`getRowId callback must be provided for Server Side Row Model ${e?.feature||"selection"} to work correctly.`,189:({startRow:e})=>`invalid value ${e} for startRow, the value should be >= 0`,190:({rowGroupId:e,data:t})=>["null and undefined values are not allowed for server side row model keys",e?`column = ${e}`:"","data is ",t],194:({method:e})=>`calling gridApi.${e}() is only possible when using rowModelType=\`clientSide\`.`,195:({justCurrentPage:e})=>`selecting just ${e?"current page":"filtered"} only works when gridOptions.rowModelType='clientSide'`,196:({key:e})=>`Provided ids must be of string type. Invalid id provided: ${e}`,197:()=>"`toggledNodes` must be an array of string ids.",199:()=>"getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model. Use `api.getServerSideSelectionState()` instead.",200:Dee,201:({rowModelType:e})=>`Could not find row model for rowModelType = ${e}`,202:()=>"`getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model. Use `api.getServerSideSelectionState()` instead.",203:()=>"Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.",204:()=>"Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.",205:({duplicateIdText:e})=>`Unable to display rows as duplicate row ids (${e}) were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.`,206:()=>"getRowId callback must be implemented for transactions to work. Transaction was ignored.",207:()=>'The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.',208:()=>"Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects.",209:()=>`Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects. See ${Og}/filter-set-filter-list/#filter-value-types`,210:()=>"Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects?",211:()=>"property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.",212:()=>"please review all your toolPanel components, it seems like at least one of them doesn't have an id",213:()=>"Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.",214:({key:e})=>`unable to lookup Tool Panel as invalid key supplied: ${e}`,215:({key:e,defaultByKey:t})=>`the key ${e} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(t??{}).join(",")}`,216:({name:e})=>`Missing component for '${e}'`,217:({invalidColIds:e})=>["unable to find grid columns for the supplied colDef(s):",e],218:({property:e,defaultOffset:t})=>`${e} must be a number, the value you provided is not a valid number. Using the default of ${t}px.`,219:({property:e})=>`Property ${e} does not exist on the target object.`,220:({lineDash:e})=>`'${e}' is not a valid 'lineDash' option.`,221:()=>"agAggregationComponent should only be used with the client and server side row model.",222:()=>"agFilteredRowCountComponent should only be used with the client side row model.",223:()=>"agSelectedRowCountComponent should only be used with the client and server side row model.",224:()=>"agTotalAndFilteredRowCountComponent should only be used with the client side row model.",225:()=>"agTotalRowCountComponent should only be used with the client side row model.",226:()=>"viewport is missing init method.",227:()=>"menu item icon must be DOM node or string",228:({menuItemOrString:e})=>`unrecognised menu item ${e}`,229:({index:e})=>["invalid row index for ensureIndexVisible: ",e],230:()=>"detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://www.ag-grid.com/react-data-grid/master-detail-custom-detail/",231:()=>"As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.",232:()=>"Using both rowData and v-model. rowData will be ignored.",233:({methodName:e})=>`Framework component is missing the method ${e}()`,234:()=>'Group Column Filter does not work with the colDef property "field". This property will be ignored.',235:()=>'Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.',236:()=>'Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.',237:()=>"Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.",238:()=>"setRowCount can only accept a positive row count.",239:()=>'Theming API and CSS File Themes are both used in the same page. In v33 we released the Theming API as the new default method of styling the grid. See the migration docs https://www.ag-grid.com/react-data-grid/theming-migration/. Because no value was provided to the `theme` grid option it defaulted to themeQuartz. But the file (ag-grid.css) is also included and will cause styling issues. Either pass the string "legacy" to the theme grid option to use v32 style themes, or remove ag-grid.css from the page to use Theming API.',240:({theme:e})=>`theme grid option must be a Theming API theme object or the string "legacy", received: ${e}`,243:()=>"Failed to deserialize state - each provided state object must be an object.",244:()=>"Failed to deserialize state - `selectAllChildren` must be a boolean value or undefined.",245:()=>"Failed to deserialize state - `toggledNodes` must be an array.",246:()=>"Failed to deserialize state - Every `toggledNode` requires an associated string id.",247:()=>`Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule. 
Please rebuild the selection state and reapply it.`,248:()=>"SetFloatingFilter expects SetFilter as its parent",249:()=>"Must supply a Value Formatter in Set Filter params when using a Key Creator",250:()=>"Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.",251:({chartType:e})=>`AG Grid: Unable to create chart as an invalid chartType = '${e}' was supplied.`,252:()=>`cannot get grid to draw rows when it is in the middle of drawing rows. 
Your code probably called a grid API method while the grid was in the render stage. 
To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). 
To see what part of your code that caused the refresh check this stacktrace.`,253:({version:e})=>["Illegal version string: ",e],254:()=>"Cannot create chart: no chart themes available.",255:({point:e})=>`Lone surrogate U+${e?.toString(16).toUpperCase()} is not a scalar value`,256:()=>"Unable to initialise. See validation error, or load ValidationModule if missing.",257:()=>kee("IntegratedChartsModule"),258:()=>kee("SparklinesModule"),259:({part:e})=>`the argument to theme.withPart must be a Theming API part object, received: ${e}`,260:({propName:e,compName:t,gridScoped:n,gridId:i,rowModelType:o})=>Dee({reasonOrId:`AG Grid '${e}' component: ${t}`,moduleName:Vg[t],gridId:i,gridScoped:n,rowModelType:o}),261:()=>"As of v33, `column.isHovered()` is deprecated. Use `api.isColumnHovered(column)` instead.",262:()=>'As of v33, icon key "smallDown" is deprecated. Use "advancedFilterBuilderSelect" for Advanced Filter Builder dropdown, "selectOpen" for Select cell editor and dropdowns (e.g. Integrated Charts menu), "richSelectOpen" for Rich Select cell editor.',263:()=>'As of v33, icon key "smallLeft" is deprecated. Use "panelDelimiterRtl" for Row Group Panel / Pivot Panel, "subMenuOpenRtl" for sub-menus.',264:()=>'As of v33, icon key "smallRight" is deprecated. Use "panelDelimiter" for Row Group Panel / Pivot Panel, "subMenuOpen" for sub-menus.',265:({colId:e})=>`Unable to infer chart data type for column '${e}' if first data entry is null. Please specify "chartDataType", or a "cellDataType" in the column definition. For more information, see ${Og}/integrated-charts-range-chart#coldefchartdatatype .`,266:()=>'As of v33.1, using "keyCreator" with the Rich Select Editor has been deprecated. It now requires the "formatValue" callback to convert complex data to strings.',267:()=>"Detail grids can not use a different theme to the master grid, the `theme` detail grid option will be ignored.",268:()=>"Transactions aren't supported with tree data when using treeDataChildrenField",269:()=>"When `masterSelects: 'detail'`, detail grids must be configured with multi-row selection",270:({id:e,parentId:t})=>`Cycle detected for row with id='${e}' and parent id='${t}'. Resetting the parent for row with id='${e}' and showing it as a root-level node.`,271:({id:e,parentId:t})=>`Parent row not found for row with id='${e}' and parent id='${t}'. Showing row with id='${e}' as a root-level node.`,272:()=>cie(),273:({providedId:e,usedId:t})=>`Provided column id '${e}' was already in use, ensure all column and group ids are unique. Using '${t}' instead.`,274:({prop:e})=>{let t=`Since v33, ${e} has been deprecated.`;switch(e){case"maxComponentCreationTimeMs":t+=" This property is no longer required and so will be removed in a future version.";break;case"setGridApi":t+=" This method is not called by AG Grid. To access the GridApi see: https://ag-grid.com/react-data-grid/grid-interface/#grid-api ";break;case"children":t+=" For multiple versions AgGridReact does not support children.";break}return t},275:die,276:()=>"Row Numbers Row Resizer cannot be used when Grid Columns have `autoHeight` enabled.",277:({colId:e})=>`'enableFilterHandlers' is set to true, but column '${e}' does not have 'filter.doesFilterPass' or 'filter.handler' set.`,278:({colId:e})=>`Unable to create filter handler for column '${e}'`,279:e=>{},280:({colId:e})=>`'name' must be provided for custom filter components for column '${e}`,281:({colId:e})=>`Filter for column '${e}' does not have 'filterParams.buttons', but the new Filters Tool Panel has buttons configured. Either configure buttons for the filter, or disable buttons on the Filters Tool Panel.`,282:()=>"New filter tool panel requires `enableFilterHandlers: true`.",283:()=>"As of v34, use the same method on the filter handler (`api.getColumnFilterHandler(colKey)`) instead.",284:()=>"As of v34, filters are active when they have a model. Use `api.getColumnFilterModel()` instead.",285:()=>"As of v34, use (`api.getColumnFilterModel()`) instead.",286:()=>"As of v34, use (`api.setColumnFilterModel()`) instead.",287:()=>"`api.doFilterAction()` requires `enableFilterHandlers = true",288:()=>"`api.getColumnFilterModel(key, true)` requires `enableFilterHandlers = true",289:({rowModelType:e})=>`Row Model '${e}' is not supported with Batch Editing`,290:({rowIndex:e,rowPinned:t})=>`Row with index '${e}' and pinned state '${t}' not found`,291:()=>"License Key being set multiple times with different values. This can result in an incorrect license key being used,",292:({colId:e})=>`The Multi Filter for column '${e}' has buttons configured against the child filters. When 'enableFilterHandlers=true', buttons must instead be provided against the parent Multi Filter params. The child filter buttons will be ignored.`};function qLe(e,t){let n=WLe[e];if(!n)return[`Missing error text for error id ${e}!`];let i=n(t),r=`
See ${mte(e,t)}`;return Array.isArray(i)?i.concat(r):[i,r]}var KLe={1:"Charting Aggregation",2:"pivotResultFields",3:"setTooltip"},Iee=new WeakMap,Mee=new WeakMap;function uie(e,t,n){if(!t)return On(11),{};let i=n,o;if(!i?.setThemeOnGridDiv){let s=ji({tag:"div"});s.style.height="100%",e.appendChild(s),e=s,o=()=>e.remove()}return new YLe().create(e,t,s=>{let a=new TPe(e);s.createBean(a)},void 0,n,o)}var ZLe=1,YLe=class{create(e,t,n,i,o,r){let s=dw.applyGlobalGridOptions(t),a=s.gridId??String(ZLe++),l=this.getRegisteredModules(o,a,s.rowModelType),c=this.createBeansList(s.rowModelType,l,a),u=this.createProvidedBeans(e,s,o);if(!c)return;let f={providedBeanInstances:u,beanClasses:c,id:a,beanInitComparator:fPe,beanDestroyComparator:mPe,derivedBeans:[hPe],destroyCallback:()=>{Mee.delete(_),Iee.delete(e),_ke(a),r?.()}},m=new WMe(f);this.registerModuleFeatures(m,l),n(m),m.getBean("syncSvc").start(),i?.(m);let _=m.getBean("gridApi");return Iee.set(e,_),Mee.set(_,e),_}getRegisteredModules(e,t,n){return uw(zLe,void 0,!0),e?.modules?.forEach(i=>uw(i,t)),yke(t,Ree(n))}registerModuleFeatures(e,t){let n=e.getBean("registry"),i=e.getBean("apiFunctionSvc");for(let o of t){n.registerModule(o);let r=o.apiFunctions;if(r){let s=Object.keys(r);for(let a of s)i?.addFunction(a,r[a])}}}createProvidedBeans(e,t,n){let i=n?n.frameworkOverrides:null;di(i)&&(i=new bV);let o={gridOptions:t,eGridDiv:e,eRootDiv:e,globalListener:n?n.globalListener:null,globalSyncListener:n?n.globalSyncListener:null,frameworkOverrides:i};return n?.providedBeanInstances&&Object.assign(o,n.providedBeanInstances),o}createBeansList(e,t,n){let i={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"},o=Ree(e),r=i[o];if(!r){qC(201,{rowModelType:o},`Unknown rowModelType ${o}.`);return}if(!Cke()){qC(272,void 0,cie());return}if(!e){let a=Object.entries(i).filter(([l,c])=>u4(c,n,l));if(a.length==1){let[l,c]=a[0];if(l!==o){let u={moduleName:c,rowModelType:l};qC(275,u,die(u));return}}}if(!u4(r,n,o)){qC(200,{reasonOrId:`rowModelType = '${o}'`,moduleName:r,gridScoped:Q4(),gridId:n,rowModelType:o},`Missing module ${r}Module for rowModelType ${o}.`);return}let s=new Set;for(let a of t)for(let l of a.beans??[])s.add(l);return Array.from(s)}};function Ree(e){return e??"clientSide"}function Cu(e){let t=e.rowModel;return t.getType()==="clientSide"?t:void 0}function kI(e){let t=e.rowModel;return t.getType()==="infinite"?t:void 0}function QLe(e){let t=e.rowModel;return t.getType()==="serverSide"?t:void 0}var JLe=class extends te{constructor(){super(...arguments),this.beanName="localeSvc"}getLocaleTextFunc(){let e=this.gos,t=e.getCallback("getLocaleText");return t?oke(t):rke(e.get("localeText"))}};function XLe(e,t=!1){let n=[],i=[],o=[],r=[],s=[],a=[],l=[],c=[],u=[],h=0;for(let f=0;f<e.length;f++){let{colId:m,sort:_,sortIndex:y,rowGroup:w,rowGroupIndex:C,aggFunc:S,pivot:I,pivotIndex:O,pinned:F,hide:H,width:j,flex:re}=e[f];u.push(m),_&&(n[y??h++]={colId:m,sort:_}),w&&(i[C??0]=m),typeof S=="string"&&o.push({colId:m,aggFunc:S}),I&&(r[O??0]=m),F&&(F==="right"?a:s).push(m),H&&l.push(m),(re!=null||j)&&c.push({colId:m,flex:re??void 0,width:j})}return{sort:n.length?{sortModel:o4(n)}:void 0,rowGroup:i.length?{groupColIds:o4(i)}:void 0,aggregation:o.length?{aggregationModel:o}:void 0,pivot:r.length||t?{pivotMode:t,pivotColIds:o4(r)}:void 0,columnPinning:s.length||a.length?{leftColIds:s,rightColIds:a}:void 0,columnVisibility:l.length?{hiddenColIds:l}:void 0,columnSizing:c.length?{columnSizingModel:c}:void 0,columnOrder:u.length?{orderedColIds:u}:void 0}}function o4(e){return e.filter(t=>t!=null)}function eNe(e){let t=[];for(let{groupId:n,open:i}of e)i&&t.push(n);return t.length?{openColumnGroupIds:t}:void 0}var hie=class{wrap(e,t,n,i){let o=this.createWrapper(e,i);for(let r of t??[])this.createMethod(o,r,!0);for(let r of n??[])this.createMethod(o,r,!1);return o}createMethod(e,t,n){e.addMethod(t,this.createMethodProxy(e,t,n))}createMethodProxy(e,t,n){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(n&&ce(49,{methodName:t}),null)}}};function r4(e){return e.get("tooltipShowMode")==="whenTruncated"}function tNe(e,t){if(typeof e!="number")return"";let n=t(),i=n("thousandSeparator",","),o=n("decimalSeparator",".");return e.toString().replace(".",o).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${i}`)}var nNe=class extends te{getFileName(e){let t=this.getDefaultFileExtension();return e?.length||(e=this.getDefaultFileName()),e.includes(".")?e:`${e}.${t}`}getData(e){let t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},iNe=class{constructor(e){let{colModel:t,rowGroupColsSvc:n,colNames:i,valueSvc:o,gos:r,processCellCallback:s,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c}=e;this.colModel=t,this.rowGroupColsSvc=n,this.colNames=i,this.valueSvc=o,this.gos=r,this.processCellCallback=s,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=c}prepare(e){}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,n,i,o){let r=t===0&&wte(this.gos,o,this.colModel.isPivotMode());if(this.processRowGroupCallback&&(this.gos.get("treeData")||o.group)&&(e.isRowGroupDisplayed(o.rowGroupColumn?.getColId()??"")||r))return{value:this.processRowGroupCallback(at(this.gos,{column:e,node:o}))??""};if(this.processCellCallback)return{value:this.processCellCallback(at(this.gos,{accumulatedRowIndex:n,column:e,node:o,value:this.valueSvc.getValueForDisplay(e,o,void 0,void 0).value,type:i,parseValue:f=>this.valueSvc.parseValue(e,o,f,this.valueSvc.getValue(e,o,void 0)),formatValue:f=>this.valueSvc.formatValue(e,o,f)??f}))??""};let s=this.gos.get("treeData"),a=this.valueSvc,l=o.level===-1&&o.footer,c=e.colDef.showRowGroup===!0&&(o.group||s);if(!l&&(r||c)){let f="",m=o;for(;m&&m.level!==-1;){let{value:_,valueFormatted:y}=a.getValueForDisplay(r?void 0:e,m,!0,!0);f=` -> ${y??_??""}${f}`,m=m.parent}return{value:f,valueFormatted:f}}let{value:u,valueFormatted:h}=a.getValueForDisplay(e,o,!0,!0);return{value:u??"",valueFormatted:h}}getHeaderName(e,t){return e?e(at(this.gos,{column:t})):this.colNames.getDisplayNameForColumn(t,"csv",!0)}};function oNe(e,t){let n=document.defaultView||window;if(!n){ce(52);return}let i=document.createElement("a"),o=n.URL.createObjectURL(t);i.setAttribute("href",o),i.setAttribute("download",e),i.style.display="none",document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:n})),i.remove(),n.setTimeout(()=>{n.URL.revokeObjectURL(o)},0)}var rNe={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,groupLockGroupColumns:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,renderingMode:!0,columnMenu:!0,suppressSetFilterByDefault:!0,getDataPath:!0,enableCellSpan:!0,enableFilterHandlers:!0,filterHandlers:!0},Ur="clientSide",sr="serverSide",Sg="infinite",sNe={onGroupExpandedOrCollapsed:[Ur],refreshClientSideRowModel:[Ur],isRowDataEmpty:[Ur],forEachLeafNode:[Ur],forEachNodeAfterFilter:[Ur],forEachNodeAfterFilterAndSort:[Ur],resetRowHeights:[Ur,sr],applyTransaction:[Ur],applyTransactionAsync:[Ur],flushAsyncTransactions:[Ur],getBestCostNodeSelection:[Ur],getServerSideSelectionState:[sr],setServerSideSelectionState:[sr],applyServerSideTransaction:[sr],applyServerSideTransactionAsync:[sr],applyServerSideRowData:[sr],retryServerSideLoads:[sr],flushServerSideAsyncTransactions:[sr],refreshServerSide:[sr],getServerSideGroupLevelState:[sr],refreshInfiniteCache:[Sg],purgeInfiniteCache:[Sg],getInfiniteRowCount:[Sg],isLastRowIndexKnown:[Sg,sr],expandAll:[Ur,sr],collapseAll:[Ur,sr],onRowHeightChanged:[Ur,sr],setRowCount:[Sg,sr],getCacheBlockState:[Sg,sr]},aNe={showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"},selectAllFiltered:{version:"v33",old:"selectAllFiltered()",new:'selectAll("filtered")'},deselectAllFiltered:{version:"v33",old:"deselectAllFiltered()",new:'deselectAll("filtered")'},selectAllOnCurrentPage:{version:"v33",old:"selectAllOnCurrentPage()",new:'selectAll("currentPage")'},deselectAllOnCurrentPage:{version:"v33",old:"deselectAllOnCurrentPage()",new:'deselectAll("currentPage")'}};function lNe(e,t,n){let i=aNe[e];if(i){let{version:r,new:s,old:a,message:l}=i,c=a??e;return(...u)=>{let h=s?`Please use ${s} instead. `:"";return XC(`Since ${r} api.${c} is deprecated. ${h}${l??""}`),t.apply(t,u)}}let o=sNe[e];return o?(...r)=>{let s=n.rowModel.getType();if(!o.includes(s)){Pg(`api.${e} can only be called when gridOptions.rowModelType is ${o.join(" or ")}`);return}return t.apply(t,r)}:t}var cNe={detailCellRendererCtrl:"SharedMasterDetail",dndSourceComp:"DragAndDrop",fillHandle:"CellSelection",groupCellRendererCtrl:"GroupCellRenderer",headerFilterCellCtrl:"ColumnFilter",headerGroupCellCtrl:"ColumnGroup",rangeHandle:"CellSelection",tooltipFeature:"Tooltip",highlightTooltipFeature:"Tooltip",tooltipStateManager:"Tooltip",groupStrategy:"RowGrouping",treeGroupStrategy:"TreeData",rowNumberRowResizer:"RowNumbers",singleCell:"EditCore",fullRow:"EditCore",agSetColumnFilterHandler:"SetFilter",agMultiColumnFilterHandler:"MultiFilter",agGroupColumnFilterHandler:"GroupFilter",agNumberColumnFilterHandler:"NumberFilter",agDateColumnFilterHandler:"DateFilter",agTextColumnFilterHandler:"TextFilter"},dNe={expanded:1,contracted:1,"tree-closed":1,"tree-open":1,"tree-indeterminate":1,pin:1,"eye-slash":1,arrows:1,left:1,right:1,group:1,aggregation:1,pivot:1,"not-allowed":1,chart:1,cross:1,cancel:1,tick:1,first:1,previous:1,next:1,last:1,linked:1,unlinked:1,"color-picker":1,loading:1,menu:1,"menu-alt":1,filter:1,"filter-add":1,columns:1,maximize:1,minimize:1,copy:1,cut:1,paste:1,grip:1,save:1,csv:1,excel:1,"small-down":1,"small-left":1,"small-right":1,"small-up":1,asc:1,desc:1,none:1,up:1,down:1,plus:1,minus:1,settings:1,"checkbox-checked":1,"checkbox-indeterminate":1,"checkbox-unchecked":1,"radio-button-on":1,"radio-button-off":1,eye:1,"column-arrow":1,"un-pin":1,"pinned-top":1,"pinned-bottom":1,"chevron-up":1,"chevron-down":1,"chevron-left":1,"chevron-right":1,edit:1},uNe={chart:"MenuCore",cancel:"EnterpriseCore",first:"Pagination",previous:"Pagination",next:"Pagination",last:"Pagination",linked:"IntegratedCharts",loadingMenuItems:"MenuCore",unlinked:"IntegratedCharts",menu:"ColumnHeaderComp",legacyMenu:"ColumnMenu",filter:"ColumnFilter",filterActive:"ColumnFilter",filterAdd:"NewFiltersToolPanel",filterCardCollapse:"NewFiltersToolPanel",filterCardExpand:"NewFiltersToolPanel",filterCardEditing:"NewFiltersToolPanel",filterTab:"ColumnMenu",filtersToolPanel:"FiltersToolPanel",columns:["MenuCore"],columnsToolPanel:["ColumnsToolPanel"],maximize:"EnterpriseCore",minimize:"EnterpriseCore",save:"MenuCore",columnGroupOpened:"ColumnGroupHeaderComp",columnGroupClosed:"ColumnGroupHeaderComp",accordionOpen:"EnterpriseCore",accordionClosed:"EnterpriseCore",accordionIndeterminate:"EnterpriseCore",columnSelectClosed:["ColumnsToolPanel","ColumnMenu"],columnSelectOpen:["ColumnsToolPanel","ColumnMenu"],columnSelectIndeterminate:["ColumnsToolPanel","ColumnMenu"],columnMovePin:"SharedDragAndDrop",columnMoveHide:"SharedDragAndDrop",columnMoveMove:"SharedDragAndDrop",columnMoveLeft:"SharedDragAndDrop",columnMoveRight:"SharedDragAndDrop",columnMoveGroup:"SharedDragAndDrop",columnMoveValue:"SharedDragAndDrop",columnMovePivot:"SharedDragAndDrop",dropNotAllowed:"SharedDragAndDrop",ensureColumnVisible:["ColumnsToolPanel","ColumnMenu"],groupContracted:"GroupCellRenderer",groupExpanded:"GroupCellRenderer",setFilterGroupClosed:"SetFilter",setFilterGroupOpen:"SetFilter",setFilterGroupIndeterminate:"SetFilter",setFilterLoading:"SetFilter",close:"EnterpriseCore",check:"MenuItem",colorPicker:"CommunityCore",groupLoading:"LoadingCellRenderer",menuAlt:"ColumnHeaderComp",menuPin:"MenuCore",menuValue:"MenuCore",menuAddRowGroup:["MenuCore","ColumnsToolPanel"],menuRemoveRowGroup:["MenuCore","ColumnsToolPanel"],clipboardCopy:"MenuCore",clipboardCut:"MenuCore",clipboardPaste:"MenuCore",pivotPanel:["ColumnsToolPanel","RowGroupingPanel"],rowGroupPanel:["ColumnsToolPanel","RowGroupingPanel"],valuePanel:"ColumnsToolPanel",columnDrag:"EnterpriseCore",rowDrag:["RowDrag","DragAndDrop"],csvExport:"MenuCore",excelExport:"MenuCore",smallDown:"CommunityCore",selectOpen:"CommunityCore",richSelectOpen:"RichSelect",richSelectRemove:"RichSelect",smallLeft:"CommunityCore",smallRight:"CommunityCore",subMenuOpen:"MenuItem",subMenuOpenRtl:"MenuItem",panelDelimiter:"RowGroupingPanel",panelDelimiterRtl:"RowGroupingPanel",smallUp:"CommunityCore",sortAscending:["MenuCore","Sort"],sortDescending:["MenuCore","Sort"],sortUnSort:["MenuCore","Sort"],advancedFilterBuilder:"AdvancedFilter",advancedFilterBuilderDrag:"AdvancedFilter",advancedFilterBuilderInvalid:"AdvancedFilter",advancedFilterBuilderMoveUp:"AdvancedFilter",advancedFilterBuilderMoveDown:"AdvancedFilter",advancedFilterBuilderAdd:"AdvancedFilter",advancedFilterBuilderRemove:"AdvancedFilter",advancedFilterBuilderSelectOpen:"AdvancedFilter",chartsMenu:"IntegratedCharts",chartsMenuEdit:"IntegratedCharts",chartsMenuAdvancedSettings:"IntegratedCharts",chartsMenuAdd:"IntegratedCharts",chartsColorPicker:"IntegratedCharts",chartsThemePrevious:"IntegratedCharts",chartsThemeNext:"IntegratedCharts",chartsDownload:"IntegratedCharts",checkboxChecked:"CommunityCore",checkboxIndeterminate:"CommunityCore",checkboxUnchecked:"CommunityCore",radioButtonOn:"CommunityCore",radioButtonOff:"CommunityCore",rowPin:"PinnedRow",rowUnpin:"PinnedRow",rowPinBottom:"PinnedRow",rowPinTop:"PinnedRow"},hNe=new Set(["colorPicker","smallUp","checkboxChecked","checkboxIndeterminate","checkboxUnchecked","radioButtonOn","radioButtonOff","smallDown","smallLeft","smallRight"]),pNe=class extends te{constructor(){super(...arguments),this.beanName="validation"}wireBeans(e){this.gridOptions=e.gridOptions,wke(qLe)}warnOnInitialPropertyUpdate(e,t){e==="api"&&rNe[t]&&ce(22,{key:t})}processGridOptions(e){this.processOptions(e,s2e())}validateApiFunction(e,t){return lNe(e,t,this.beans)}missingUserComponent(e,t,n,i){let o=Vg[t];o?this.gos.assertModuleRegistered(o,`AG Grid '${e}' component: ${t}`):ce(101,{propertyName:e,componentName:t,agGridDefaults:n,jsComps:i})}missingDynamicBean(e){let t=cNe[e];return t?Bl(200,x(g({},this.gos.getModuleErrorParams()),{moduleName:t,reasonOrId:e})):void 0}checkRowEvents(e){mNe.has(e)&&ce(10,{eventType:e})}validateIcon(e){if(hNe.has(e)&&ce(43,{iconName:e}),dNe[e])return;let t=uNe[e];if(t){On(200,{reasonOrId:`icon '${e}'`,moduleName:t,gridScoped:Q4(),gridId:this.beans.context.getId(),rowModelType:this.gos.get("rowModelType"),additionalText:"Alternatively, use the CSS icon name directly."});return}ce(134,{iconName:e})}isProvidedUserComp(e){return!!Vg[e]}validateColDef(e){this.processOptions(e,YFe())}processOptions(e,t){let{validations:n,deprecations:i,allProperties:o,propertyExceptions:r,objectName:s,docsUrl:a}=t;o&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...r??[],...Object.keys(i)],o,s,a);let l=new Set;if(Object.keys(e).forEach(u=>{let h=i[u];if(h){let{message:S,version:I}=h;l.add(`As of v${I}, ${String(u)} is deprecated. ${S??""}`)}let f=e[u];if(f==null||f===!1)return;let m=n[u];if(!m)return;let{dependencies:_,validate:y,supportedRowModels:w,expectedType:C}=m;if(C){let S=typeof f;if(S!==C){l.add(`${String(u)} should be of type '${C}' but received '${S}' (${f}).`);return}}if(w){let S=this.gridOptions.rowModelType??"clientSide";if(!w.includes(S)){l.add(`${String(u)} is not supported with the '${S}' row model. It is only valid with: ${w.join(", ")}.`);return}}if(_){let S=this.checkForRequiredDependencies(u,_,e);if(S){l.add(S);return}}if(y){let S=y(e,this.gridOptions,this.beans);if(S){l.add(S);return}}}),l.size>0)for(let u of l)XC(u)}checkForRequiredDependencies(e,t,n){let o=Object.entries(t).filter(([r,s])=>{let a=n[r];return!s.required.includes(a)});return o.length===0?null:o.map(([r,s])=>`'${String(e)}' requires '${r}' to be one of [${s.required.map(a=>a===null?"null":a===void 0?"undefined":a).join(", ")}]. ${s.reason??""}`).join(`
           `)}checkProperties(e,t,n,i,o){let r=["__ob__","__v_skip","__metadata__"],s=fNe(Object.getOwnPropertyNames(e),[...r,...t,...n],n),a=Object.keys(s);for(let l of a){let c=s[l],u=`invalid ${i} property '${l}' did you mean any of these: ${c.slice(0,8).join(", ")}.`;n.includes("context")&&(u+=`
If you are trying to annotate ${i} with application data, use the '${i}.context' property instead.`),XC(u)}if(a.length>0&&o){let l=this.beans.frameworkOverrides.getDocLink(o);XC(`to see all the valid ${i} properties please check: ${l}`)}}};function fNe(e,t,n){let i={},o=e.filter(r=>!t.some(s=>s===r));if(o.length>0)for(let r of o)i[r]=C4({inputValue:r,allSuggestions:n}).values;return i}var mNe=new Set(["firstChildChanged","lastChildChanged","childIndexChanged"]),gNe={moduleName:"Validation",version:we,beans:[pNe]};function pie(e){let t=e.sibling;t&&(t.childrenAfterFilter=e.childrenAfterFilter)}var vNe=class extends te{constructor(){super(...arguments),this.beanName="filterStage",this.step="filter",this.refreshProps=["excludeChildrenWhenTreeDataFiltering"]}wireBeans(e){this.filterManager=e.filterManager}execute(e){let{changedPath:t}=e;this.filter(t)}filter(e){let t=!!this.filterManager?.isChildFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){let n=(i,o)=>{i.hasChildren()&&e&&!o?i.childrenAfterFilter=i.childrenAfterGroup.filter(r=>{let s=r.childrenAfterFilter&&r.childrenAfterFilter.length>0,a=r.data&&this.filterManager.doesRowPassFilter({rowNode:r});return s||a}):i.childrenAfterFilter=i.childrenAfterGroup,pie(i)};if(this.doingTreeDataFiltering()){let i=(r,s)=>{if(r.childrenAfterGroup)for(let a=0;a<r.childrenAfterGroup.length;a++){let l=r.childrenAfterGroup[a],c=s||this.filterManager.doesRowPassFilter({rowNode:l});l.childrenAfterGroup?i(r.childrenAfterGroup[a],c):n(l,c)}n(r,s)},o=r=>i(r,!1);t.executeFromRootNode(o)}else{let i=o=>n(o,!1);t.forEachChangedNodeDepthFirst(i,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},_Ne=class extends yV{constructor(){super(...arguments),this.iconCreated=!1}wireComp(e,t,n,i,o){this.comp=e;let r=Cw(this,this.beans.context,o);this.eButtonShowMainFilter=n,this.eFloatingFilterBody=i,this.setGui(t,r),this.setupActive(),this.refreshHeaderStyles(),this.setupWidth(r),this.setupLeft(r),this.setupHover(r),this.setupFocus(r),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(r),this.setupUi(),r.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(r);let s=()=>this.onColDefChanged(r);r.addManagedListeners(this.column,{colDefChanged:s}),r.addManagedEventListeners({filterSwitched:({column:a})=>{a===this.column&&s()}}),r.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}getHeaderClassParams(){let{column:e,beans:t}=this,n=e.colDef;return at(t.gos,{colDef:n,column:e,floatingFilter:!0})}setupActive(){let e=this.column.getColDef(),t=!!e.filter,n=!!e.floatingFilter;this.active=t&&n}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;let e=Xs("filter",this.beans,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new Qg(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){let e=this.getLocaleTextFunc();jg(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){let{beans:t}=this;if(vi(t)===this.eGui)return;let o=kp(t,this.eGui,null,e.shiftKey);if(o){t.headerNavigation?.scrollToColumn(this.column),e.preventDefault(),o.focus();return}let r=this.findNextColumnWithFloatingFilter(e.shiftKey);r&&t.focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:this.rowCtrl.rowIndex,column:r},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){let t=this.beans.visibleCols,n=this.column;do if(n=e?t.getColBefore(n):t.getColAfter(n),!n)break;while(!n.getColDef().filter||!n.getColDef().floatingFilter);return n}handleKeyDown(e){super.handleKeyDown(e);let t=this.getWrapperHasFocus();switch(e.key){case W.UP:case W.DOWN:case W.LEFT:case W.RIGHT:if(t)return;xp(e);case W.ENTER:t&&wp(this.eGui)&&e.preventDefault();break;case W.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;let n=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),i=!!e.relatedTarget&&fp(e.relatedTarget,"ag-floating-filter");if(n&&i&&e.target===this.eGui){let o=this.lastFocusEvent,r=!!(o&&o.key===W.TAB);if(o&&r){let s=o.shiftKey;wp(this.eGui,s)}}this.focusThis()}setupHover(e){this.beans.colHover?.addHeaderFilterColumnHoverListener(e,this.comp,this.column,this.eGui)}setupLeft(e){let t=new _V(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.beans.menuSvc?.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!Ss(this.gos)}setupUserComp(){if(!this.active)return;let e=this.beans.colFilter?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){let e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.beans.menuSvc?.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;let{beans:{colFilter:t},column:n,gos:i}=this,o=r=>{if(r?.source==="filterDestroyed"&&(!this.isAlive()||!t?.isAlive()))return;let s=this.comp.getFloatingFilterComp();s&&s.then(a=>{if(a){if(i.get("enableFilterHandlers")){let u=r,h="filter";u?.afterFloatingFilter?h="ui":u?.afterDataChange?h="dataChanged":r?.source==="api"&&(h="api"),this.updateFloatingFilterParams(this.userCompDetails,h);return}let l=t?.getCurrentFloatingFilterParentModel(n),c=r?x(g({},r),{columns:r.columns??[],source:r.source==="api"?"api":"columnFilter"}):null;a.onParentModelChanged(l,c)}})};[this.destroySyncListener]=e.addManagedListeners(n,{filterChanged:o}),t?.isFilterActive(n)&&o(null)}setupWidth(e){let t=()=>{let n=`${this.column.getActualWidth()}px`;this.comp.setWidth(n)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){let e=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){let t=this.active;this.setupActive();let n=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());let i=this.beans.colFilter,o=this.active?i?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,r=this.comp.getFloatingFilterComp();!r||!o?this.updateCompDetails(e,o,n):r.then(s=>{!s||i?.areFilterCompsDifferent(this.userCompDetails??null,o)?this.updateCompDetails(e,o,n):this.updateFloatingFilterParams(o,"colDef")})}updateCompDetails(e,t,n){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),n&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e,t){if(!e)return;let n=e.params;this.comp.getFloatingFilterComp()?.then(i=>{typeof i?.refresh=="function"&&(this.gos.get("enableFilterHandlers")&&(n=x(g({},n),{model:Do(this.beans.colFilter?.model??{},this.column.getColId()),source:t})),i.refresh(n))})}addResizeAndMoveKeyboardListeners(){}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}};function yNe(e,t){let n=e.colModel.getCol(t);if(!n){On(12,{colKey:t});return}e.menuSvc?.showColumnMenu({column:n,positionBy:"auto"})}function bNe(e){e.menuSvc?.hidePopupMenu()}var CNe={moduleName:"SharedMenu",version:we,beans:[FTe],apiFunctions:{showColumnMenu:yNe,hidePopupMenu:bNe}},wNe=class extends nRe{postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getDefaultPopupParent(){return this.gridCtrl.getGui()}positionPopupForMenu(e){let{eventSource:t,ePopup:n,event:i}=e,o=t.getBoundingClientRect(),r=this.getParentRect();this.setAlignedTo(t,n);let s=!1,a=()=>{let l=this.keepXYWithinBounds(n,o.top-r.top,0),c=n.clientWidth>0?n.clientWidth:200;s||(n.style.minWidth=`${c}px`,s=!0);let h=r.right-r.left-c,f;return this.gos.get("enableRtl")?(f=_(),f<0&&(f=m(),this.setAlignedStyles(n,"left")),f>h&&(f=0,this.setAlignedStyles(n,"right"))):(f=m(),f>h&&(f=_(),this.setAlignedStyles(n,"right")),f<0&&(f=0,this.setAlignedStyles(n,"left"))),{x:f,y:l};function m(){return o.right-r.left-2}function _(){return o.left-r.left-c}};this.positionPopup({ePopup:n,keepWithinBounds:!0,updatePosition:a,postProcessCallback:()=>this.callPostProcessPopup(e,"subMenu",n,t,i instanceof MouseEvent?i:void 0)})}callPostProcessPopup(e,t,n,i,o){let r=this.gos.getCallback("postProcessPopup");if(r){let{column:s,rowNode:a}=e;r({column:s,rowNode:a,ePopup:n,type:t,eventSource:i,mouseEvent:o})}}getActivePopups(){return this.popupList.map(e=>e.element)}handleThemeChange(e){if(e.themeChanged){let t=this.beans.environment;for(let n of this.popupList)t.applyThemeClasses(n.wrapper)}}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isStopPropagation(e){return Yc(e)}},II={moduleName:"Popup",version:we,beans:[wNe]},xNe=".ag-set-filter{--ag-indentation-level:0}.ag-set-filter-item{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-set-filter-item{padding-left:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}:where(.ag-rtl) .ag-set-filter-item{padding-right:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}.ag-set-filter-item-checkbox{display:flex;height:100%;width:100%}.ag-set-filter-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr) .ag-set-filter-group-icons{margin-right:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-set-filter-group-icons{margin-left:var(--ag-widget-container-horizontal-padding)}.ag-filter-body-wrapper{display:flex;flex-direction:column}:where(.ag-menu:not(.ag-tabs) .ag-filter) .ag-filter-body-wrapper,:where(.ag-menu:not(.ag-tabs) .ag-filter)>:not(.ag-filter-wrapper){min-width:180px}.ag-filter-filter{flex:1 1 0px}.ag-filter-condition{display:flex;justify-content:center}.ag-floating-filter-body{display:flex;flex:1 1 auto;height:100%;position:relative}.ag-floating-filter-full-body{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;width:100%}:where(.ag-floating-filter-full-body)>div{flex:1 1 auto}.ag-floating-filter-input{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}:where(.ag-input-field-input[type=date]),:where(.ag-input-field-input[type=datetime-local]){width:1px}}.ag-floating-filter-button{display:flex;flex:none}.ag-date-floating-filter-wrapper{display:flex}.ag-set-floating-filter-input :where(input)[disabled]{pointer-events:none}.ag-floating-filter-button-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:var(--ag-icon-size);width:var(--ag-icon-size)}.ag-filter-loading{align-items:unset;background-color:var(--ag-chrome-background-color);height:100%;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;width:100%;z-index:1;:where(.ag-menu) &{background-color:var(--ag-menu-background-color)}}.ag-filter-separator{border-top:solid var(--ag-border-width) var(--menu-separator-color)}:where(.ag-filter-select) .ag-picker-field-wrapper{width:0}.ag-filter-condition-operator{height:17px}:where(.ag-ltr) .ag-filter-condition-operator-or{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-condition-operator-or{margin-right:calc(var(--ag-spacing)*2)}.ag-set-filter-select-all{padding-top:var(--ag-widget-container-vertical-padding)}.ag-filter-no-matches,.ag-set-filter-list{height:calc(var(--ag-list-item-height)*6)}.ag-filter-no-matches{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-set-filter-tree-list{height:calc(var(--ag-list-item-height)*10)}.ag-set-filter-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-container-vertical-padding)}.ag-filter-to{margin-top:var(--ag-widget-vertical-spacing)}.ag-mini-filter{margin:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-set-filter-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-rtl) .ag-set-filter-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-filter-menu) .ag-set-filter-list{min-width:200px}.ag-filter-virtual-list-item:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-filter-apply-panel{display:flex;justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) var(--ag-widget-container-vertical-padding)}.ag-filter-apply-panel-button{line-height:1.5}:where(.ag-ltr) .ag-filter-apply-panel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-apply-panel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-simple-filter-body-wrapper{display:flex;flex-direction:column;min-height:calc(var(--ag-list-item-height) + var(--ag-widget-container-vertical-padding) + var(--ag-widget-vertical-spacing));overflow-y:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);padding-bottom:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));&>*{margin-bottom:var(--ag-widget-vertical-spacing)}:where(.ag-resizer-wrapper){margin:0}}.ag-multi-filter-menu-item{margin:var(--ag-spacing) 0}.ag-multi-filter-group-title-bar{background-color:transparent;color:var(--ag-header-text-color);font-weight:500;padding:calc(var(--ag-spacing)*1.5) var(--ag-spacing)}.ag-group-filter-field-select-wrapper{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}";function SNe(e){let t=e.filterManager;return!!t?.isColumnFilterPresent()||!!t?.isAggregateFilterPresent()}function ENe(e,t){return e.filterManager?.getColumnFilterInstance(t)??Promise.resolve(void 0)}function DNe(e,t){let n=e.colModel.getColDefCol(t);if(n)return e.colFilter?.destroyFilter(n,"api")}function kNe(e,t){e.frameworkOverrides.wrapIncoming(()=>e.filterManager?.setFilterModel(t))}function INe(e){return e.filterManager?.getFilterModel()??{}}function MNe(e,t,n){let{gos:i,colModel:o,colFilter:r}=e;n&&!i.get("enableFilterHandlers")&&(ce(288),n=!1);let s=o.getColDefCol(t);return s?r?.getModelForColumn(s,n)??null:null}function RNe(e,t,n){return e.filterManager?.setColumnFilterModel(t,n)??Promise.resolve()}function TNe(e,t){let n=e.colModel.getCol(t);if(!n){On(12,{colKey:t});return}e.menuSvc?.showFilterMenu({column:n,containerType:"columnFilter",positionBy:"auto"})}function PNe(e){e.menuSvc?.hideFilterMenu()}function ANe(e,t){let n=e.colModel.getCol(t);if(!n){On(12,{colKey:t});return}return e.colFilter?.getHandler(n,!0)}function ONe(e,t){let{colModel:n,colFilter:i,gos:o}=e;if(!o.get("enableFilterHandlers")){ce(287);return}let{colId:r,action:s}=t;if(r){let a=n.getColById(r);a&&i?.updateModel(a,s)}else i?.updateAllModels(s)}var FNe={filterHandler:()=>({doesFilterPass:()=>!0})},LNe=class extends te{constructor(){super(...arguments),this.beanName="colFilter",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.modelUpdates=[],this.columnModelUpdates=[],this.state=new Map,this.handlerMap=g({},hne),this.isGlobalButtons=!1,this.activeFilterComps=new Set}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)});let e=this.gos,t=g({},e.get("initialState")?.filter?.filterModel??{});this.initialModel=t,this.model=g({},t),e.get("enableFilterHandlers")||delete this.handlerMap.agMultiColumnFilter}refreshModel(){this.onNewRowsLoaded("rowDataUpdated")}setModel(e,t="api",n){let{colModel:i,dataTypeSvc:o,filterManager:r}=this.beans;if(o?.isPendingInference){this.modelUpdates.push({model:e,source:t});return}let s=[],a=this.getModel(!0);if(e){let l=new Set(Object.keys(e));this.allColumnFilters.forEach((c,u)=>{let h=e[u];s.push(this.setModelOnFilterWrapper(c,h)),l.delete(u)}),l.forEach(c=>{let u=i.getColDefCol(c)||i.getCol(c);if(!u){ce(62,{colId:c});return}if(!u.isFilterAllowed()){ce(63,{colId:c});return}let h=this.getOrCreateFilterWrapper(u,!0);if(!h){ce(64,{colId:c});return}s.push(this.setModelOnFilterWrapper(h,e[c],!0))})}else this.model={},this.allColumnFilters.forEach(l=>{s.push(this.setModelOnFilterWrapper(l,null))});Ii.all(s).then(()=>{let l=this.getModel(!0),c=[];this.allColumnFilters.forEach((u,h)=>{let f=a?a[h]:null,m=l?l[h]:null;rw(f,m)||c.push(u.column)}),c.length>0?r?.onFilterChanged({columns:c,source:t}):n&&this.updateActive("filterChanged")})}getModel(e){let t={},{allColumnFilters:n,initialModel:i,beans:{colModel:o}}=this;if(n.forEach((r,s)=>{let a=this.getModelFromFilterWrapper(r);Se(a)&&(t[s]=a)}),!e)for(let r of Object.keys(i)){let s=i[r];Se(s)&&!n.has(r)&&o.getCol(r)?.isFilterAllowed()&&(t[r]=s)}return t}setState(e,t,n="api"){if(this.state.clear(),t)for(let i of Object.keys(t)){let o=t[i];this.state.set(i,{model:Do(this.model,i),state:o})}this.setModel(e,n,!0)}getState(){let e=this.state;if(!e.size)return;let t={},n=!1;return e.forEach((i,o)=>{let r=i.state;r!=null&&(n=!0,t[o]=r)}),n?t:void 0}getModelFromFilterWrapper(e){let n=e.column.getColId();if(e.isHandler)return Do(this.model,n);let i=e.filter;return i?typeof i.getModel!="function"?(ce(66),null):i.getModel():Do(this.initialModel,n)}isFilterPresent(){return this.activeColumnFilters.length>0}isAggFilterPresent(){return!!this.activeAggregateFilters.length}disableFilters(){this.initialModel={};let{allColumnFilters:e}=this;return e.size?(e.forEach(t=>this.disposeFilterWrapper(t,"advancedFilterEnabled")),!0):!1}updateActiveFilters(){let e=c=>c?c.isFilterActive?c.isFilterActive():(ce(67),!1):!1,{colModel:t,gos:n}=this.beans,i=!!f4(n),o=c=>{if(!c.isPrimary())return!0;let h=!t.isPivotActive();return!c.isValueActive()||!h?!1:t.isPivotMode()?!0:i},r=[],s=[],a=(c,u,h)=>{u&&(o(c)?r.push(h):s.push(h))},l=[];return this.allColumnFilters.forEach(c=>{let u=c.column,h=u.getColId();if(c.isHandler)l.push(Ii.resolve().then(()=>{a(u,this.isHandlerActive(u),{colId:h,isHandler:!0,handler:c.handler,handlerParams:c.handlerParams})}));else{let f=au(c);f&&l.push(f.then(m=>{a(u,e(m),{colId:h,isHandler:!1,comp:m})}))}}),Ii.all(l).then(()=>{this.activeAggregateFilters=r,this.activeColumnFilters=s})}updateFilterFlagInColumns(e,t){let n=[];return this.allColumnFilters.forEach(i=>{let o=i.column;if(i.isHandler)n.push(Ii.resolve().then(()=>{this.setColFilterActive(o,this.isHandlerActive(o),e,t)}));else{let r=au(i);r&&n.push(r.then(s=>{this.setColFilterActive(o,s.isFilterActive(),e,t)}))}}),this.beans.groupFilter?.updateFilterFlags(e,t),Ii.all(n)}doFiltersPass(e,t,n){let{data:i,aggData:o}=e,r=n?this.activeAggregateFilters:this.activeColumnFilters,s=n?o:i,a=this.model;for(let l=0;l<r.length;l++){let c=r[l],{colId:u,isHandler:h}=c;if(u!==t)if(h){let{handler:f,handlerParams:m}=c;if(!f.doesFilterPass({node:e,data:s,model:Do(a,u),handlerParams:m}))return!1}else{let f=c.comp;if(typeof f.doesFilterPass!="function"){On(91);continue}if(!f.doesFilterPass({node:e,data:s}))return!1}}return!0}getHandlerParams(e){let t=this.allColumnFilters.get(e.getColId());return t?.isHandler?t.handlerParams:void 0}callOnFilterChangedOutsideRenderCycle(e){let{rowRenderer:t,filterManager:n}=this.beans,i=()=>{this.isAlive()&&n?.onFilterChanged(e)};t.isRefreshInProgress()?setTimeout(i,0):i()}updateBeforeFilterChanged(e={}){let{column:t,additionalEventAttributes:n}=e,i=t?.getColId();return this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",n).then(()=>{this.allColumnFilters.forEach(o=>{let{column:r,isHandler:s}=o;i!==r.getColId()&&(s&&o.handler.onAnyFilterChanged?.(),au(o,s)?.then(a=>{typeof a?.onAnyFilterChanged=="function"&&a.onAnyFilterChanged()}))}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){let t=[];this.allColumnFilters.forEach(n=>{let i=n.isHandler;i&&n.handler.onNewRowsLoaded?.();let o=au(n,i);o&&t.push(o.then(r=>{r.onNewRowsLoaded?.()}))}),Ii.all(t).then(()=>this.updateActive(e,{afterDataChange:!0}))}updateActive(e,t){this.updateFilterFlagInColumns(e,t).then(()=>this.updateActiveFilters())}createGetValue(e,t){let{filterValueSvc:n,colModel:i}=this.beans;return(o,r)=>{let s=r?i.getCol(r):e;return s?n.getValue(s,o,t):void 0}}isFilterActive(e){let t=this.cachedFilter(e);if(t?.isHandler)return this.isHandlerActive(e);let n=t?.filter;return n?n.isFilterActive():Do(this.initialModel,e.getColId())!=null}isHandlerActive(e){let t=Se(Do(this.model,e.getColId()));if(t)return t;let n=this.beans.groupFilter;return n?.isGroupFilter(e)?n.isFilterActive(e):!1}getOrCreateFilterUi(e){let t=this.getOrCreateFilterWrapper(e,!0);return t?au(t):null}getFilterUiForDisplay(e){let t=this.getOrCreateFilterWrapper(e,!0);if(!t)return null;let n=au(t);return n?n.then(i=>({comp:i,params:t.filterUi.filterParams,isHandler:t.isHandler})):null}getHandler(e,t){let n=this.getOrCreateFilterWrapper(e,t);return n?.isHandler?n.handler:void 0}getOrCreateFilterWrapper(e,t){if(!e.isFilterAllowed())return;let n=this.cachedFilter(e);return!n&&t&&(n=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,n)),n}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e,t=!1){return this.getDefaultFilterFromDataType(()=>this.beans.dataTypeSvc?.getBaseDataType(e),t)}getDefaultFilterFromDataType(e,t=!1){return Bke(this.gos)?t?"agSetColumnFloatingFilter":"agSetColumnFilter":DRe(e(),t)}getDefaultFloatingFilter(e){return this.getDefaultFilter(e,!0)}createFilterComp(e,t,n,i,o,r){let s=()=>{let c=this.createFilterCompParams(e,o,r),u=i(c,o);return HIe(this.beans.userCompFactory,t,u,n)},a=s();return a?{compDetails:a,createFilterUi:c=>(c?s():a).newAgStackInstance()}:null}createFilterInstance(e,t,n,i){let o=this.beans.selectableFilter;o?.isSelectable(t)&&(t=o.getFilterDef(e,t));let{handler:r,handlerParams:s,handlerGenerator:a}=this.createHandler(e,t,n)??{},l=this.createFilterComp(e,t,n,i,!!r,"init");if(!l)return{compDetails:null,createFilterUi:null,handler:r,handlerGenerator:a,handlerParams:s};let{compDetails:c,createFilterUi:u}=l;return this.isGlobalButtons&&(c.params?.buttons?.length||ce(281,{colId:e.getColId()})),{compDetails:c,handler:r,handlerGenerator:a,handlerParams:s,createFilterUi:u}}createBaseFilterParams(e,t){let{filterManager:n,rowModel:i}=this.beans;return at(this.gos,{column:e,colDef:e.getColDef(),getValue:this.createGetValue(e),doesRowPassOtherFilter:t?()=>!0:o=>n?.doesRowPassOtherFilters(e.getColId(),o)??!0,rowModel:i})}createFilterCompParams(e,t,n,i){let o=this.filterChangedCallbackFactory(e),r=this.createBaseFilterParams(e,i);if(r.filterChangedCallback=o,r.filterModifiedCallback=i?()=>{}:s=>this.filterModified(e,s),t){let s=r,a=e.getColId(),l=Do(this.model,a);s.model=l,s.state=this.state.get(a)??{model:l},s.onModelChange=(c,u)=>{this.updateStoredModel(a,c),this.refreshHandlerAndUi(e,c,"ui",!1,u).then(()=>{o(x(g({},u),{source:"columnFilter"}))})},s.onStateChange=c=>{this.updateState(e,c),this.updateOrRefreshFilterUi(e)},s.onAction=(c,u,h)=>{this.updateModel(e,c,u),this.dispatchLocalEvent({type:"filterAction",column:e,action:c,event:h})},s.getHandler=()=>this.getHandler(e,!0),s.onUiChange=c=>this.filterUiChanged(e,c),s.source=n}return r}createFilterUiForHandler(e,t){return t?{created:!1,create:t,filterParams:e.params,compDetails:e}:null}createFilterUiLegacy(e,t,n){let i=t(),o={created:!0,create:t,filterParams:e.params,compDetails:e,promise:i};return i.then(n),o}createFilterWrapper(e){let{compDetails:t,handler:n,handlerGenerator:i,handlerParams:o,createFilterUi:r}=this.createFilterInstance(e,e.getColDef(),this.getDefaultFilter(e),a=>a),s=e.getColId();if(n)return delete this.initialModel[s],n.init?.(x(g({},o),{source:"init",model:Do(this.model,s)})),{column:e,isHandler:!0,handler:n,handlerGenerator:i,handlerParams:o,filterUi:this.createFilterUiForHandler(t,r)};if(r){let a={column:e,filterUi:null,isHandler:!1};return a.filterUi=this.createFilterUiLegacy(t,r,l=>{a.filter=l??void 0}),a}return{column:e,filterUi:null,isHandler:!1}}createHandlerFunc(e,t,n){let{gos:i,frameworkOverrides:o,registry:r}=this.beans,s,a=m=>{let _=m.filter;if(Hte(_)){let y=_.handler;return y||(s=_.doesFilterPass,s?()=>({doesFilterPass:s}):void 0)}return typeof _=="string"?_:void 0},l=i.get("enableFilterHandlers"),c=l?a(t):void 0,u=m=>()=>this.createBean(r.createDynamicBean(m,!0)),h,f;if(typeof c=="string"){let m=i.get("filterHandlers")?.[c];m!=null?h=m:fRe.has(c)&&(h=u(c),f=c)}else h=c;if(!h){let m,{compName:_,jsComp:y,fwComp:w}=Gte(o,t);_?m=_:y==null&&w==null&&t.filter===!0&&(m=n),f=this.handlerMap[m],f&&(h=u(f))}return h?{filterHandler:h,handlerNameOrCallback:s??f}:l?($i(i)&&ce(277,{colId:e.getColId()}),FNe):void 0}createHandler(e,t,n){let i=this.createHandlerFunc(e,t,n);if(!i)return;let o=Rz(this.beans.userCompFactory,t,this.createFilterCompParams(e,!0,"init")),{handlerNameOrCallback:r,filterHandler:s}=i,{handler:a,handlerParams:l}=this.createHandlerFromFunc(e,s,o);return{handler:a,handlerParams:l,handlerGenerator:r??s}}createHandlerFromFunc(e,t,n){let i=e.getColDef(),o=t(at(this.gos,{column:e,colDef:i})),r=this.createHandlerParams(e,n);return{handler:o,handlerParams:r}}createHandlerParams(e,t){let n=e.getColDef(),i=e.getColId(),o=this.filterChangedCallbackFactory(e);return at(this.gos,{colDef:n,column:e,getValue:this.createGetValue(e),doesRowPassOtherFilter:r=>this.beans.filterManager?.doesRowPassOtherFilters(i,r)??!0,onModelChange:(r,s)=>{this.updateStoredModel(i,r),this.refreshHandlerAndUi(e,r,"handler",!1,s).then(()=>{o(x(g({},s),{source:"columnFilter"}))})},filterParams:t})}onColumnsChanged(){let e=[],{colModel:t,filterManager:n,groupFilter:i}=this.beans;this.allColumnFilters.forEach((r,s)=>{let a;r.column.isPrimary()?a=t.getColDefCol(s):a=t.getCol(s),!(a&&a===r.column)&&(e.push(r.column),this.disposeFilterWrapper(r,"columnChanged"),this.disposeColumnListener(s))});let o=i&&e.every(r=>i.isGroupFilter(r));e.length>0&&!o&&n?.onFilterChanged({columns:e,source:"api"})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;let n=this.beans.groupFilter;return n?.isGroupFilter(e)?n.isFilterAllowed(e):!0}getFloatingFilterCompDetails(e,t){let{userCompFactory:n,frameworkOverrides:i,selectableFilter:o}=this.beans,r=f=>{let m=this.getOrCreateFilterUi(e);m?.then(_=>{f(fw(_))})},s=e.getColDef(),a=o?.isSelectable(s)?o.getFilterDef(e,s):s,l=TRe(i,a,()=>this.getDefaultFloatingFilter(e))??"agReadOnlyFloatingFilter",c=this.gos.get("enableFilterHandlers"),u=Rz(n,a,this.createFilterCompParams(e,c,"init",!0)),h=at(this.gos,{column:e,filterParams:u,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:r,showParentFilter:t});if(c){let f=h,m=e.getColId(),_=this.filterChangedCallbackFactory(e);f.onUiChange=y=>this.floatingFilterUiChanged(e,y),f.model=Do(this.model,m),f.onModelChange=(y,w)=>{this.updateStoredModel(m,y),this.refreshHandlerAndUi(e,y,"floating",!0,w).then(()=>{_(x(g({},w),{source:"columnFilter"}))})},f.getHandler=()=>this.getHandler(e,!0),f.source="init"}return WIe(n,s,h,l)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilterUi(e,t,n,i){let o="paramsUpdated";if(e.isHandler){let r=t.getColId();delete this.initialModel[r],this.state.delete(r);let s=e.filterUi,a=this.createFilterUiForHandler(n,i);e.filterUi=a;let l=this.eventSvc;s?.created?s.promise.then(c=>{this.destroyBean(c),l.dispatchEvent({type:"filterDestroyed",source:o,column:t})}):l.dispatchEvent({type:"filterHandlerDestroyed",source:o,column:t})}else this.destroyFilter(t,o)}destroyFilter(e,t="api"){let n=e.getColId(),i=this.allColumnFilters.get(n);this.disposeColumnListener(n),delete this.initialModel[n],i&&this.disposeFilterWrapper(i,t).then(o=>{o&&this.isAlive()&&this.beans.filterManager?.onFilterChanged({columns:[e],source:"api"})})}disposeColumnListener(e){let t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){let n=!1,{column:i,isHandler:o,filterUi:r}=e,s=i.getColId();o&&(n=this.isHandlerActive(i),this.destroyBean(e.handler),delete this.model[s],this.state.delete(s));let a=()=>{this.setColFilterActive(i,!1,"filterDestroyed"),this.allColumnFilters.delete(s),this.eventSvc.dispatchEvent({type:"filterDestroyed",source:t,column:i})};if(r){if(r.created)return r.promise.then(l=>(n=o?n:!!l?.isFilterActive(),this.destroyBean(l),a(),n));a()}return Ii.resolve(n)}filterChangedCallbackFactory(e){return t=>{this.callOnFilterChangedOutsideRenderCycle({additionalEventAttributes:t,columns:[e],column:e,source:t?.source??"columnFilter"})}}filterParamsChanged(e,t="api"){let n=this.allColumnFilters.get(e);if(!n)return;let i=this.beans,o=n.column,r=o.getColDef(),s=o.isFilterAllowed(),a=this.getDefaultFilter(o),l=i.selectableFilter,c=l?.isSelectable(r)?l.getFilterDef(o,r):r,u=s?this.createHandlerFunc(o,c,this.getDefaultFilter(o)):void 0,h=!!u,f=n.isHandler;if(f!=h){this.destroyFilter(o,"paramsUpdated");return}let{compDetails:m,createFilterUi:_}=(s?this.createFilterComp(o,c,a,w=>w,h,"colDef"):null)??{compDetails:null,createFilterUi:null},y=m?.params??Rz(i.userCompFactory,c,this.createFilterCompParams(o,h,"colDef"));if(f){let w=u?.handlerNameOrCallback??u?.filterHandler,C=Do(this.model,e);if(n.handlerGenerator!=w){let S=n.handler,{handler:I,handlerParams:O}=this.createHandlerFromFunc(o,u.filterHandler,y);n.handler=I,n.handlerParams=O,n.handlerGenerator=w,delete this.model[e],I.init?.(x(g({},O),{source:"init",model:null})),this.destroyBean(S),C!=null&&this.beans.filterManager?.onFilterChanged({columns:[o],source:t})}else{let S=this.createHandlerParams(o,m?.params);n.handlerParams=S,n.handler.refresh?.(x(g({},S),{source:"colDef",model:C}))}}if(this.areFilterCompsDifferent(n.filterUi?.compDetails??null,m)||!n.filterUi||!m){this.destroyFilterUi(n,o,m,_);return}n.filterUi.filterParams=y,au(n,f)?.then(w=>{(w?.refresh?w.refresh(y):!0)===!1?this.destroyFilterUi(n,o,m,_):this.dispatchLocalEvent({type:"filterParamsChanged",column:o,params:y})})}refreshHandlerAndUi(e,t,n,i,o){let r=this.cachedFilter(e);if(!r)return i&&this.getOrCreateFilterWrapper(e,!0),Ii.resolve();if(!r.isHandler)return Ii.resolve();let{filterUi:s,handler:a,handlerParams:l}=r;return mRe(()=>{if(s){let{created:c,filterParams:u}=s;if(c)return s.promise.then(h=>h?{filter:h,filterParams:u}:void 0);s.refreshed=!0}return Ii.resolve(void 0)},a,l,t,this.state.get(e.getColId())??{model:t},n,o)}setColumnFilterWrapper(e,t){let n=e.getColId();this.allColumnFilters.set(n,t),this.allColumnListeners.set(n,this.addManagedListeners(e,{colDefChanged:()=>this.filterParamsChanged(n)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;let{componentClass:n}=e,{componentClass:i}=t;return!(n===i||n?.render&&i?.render&&n.render===i.render)}hasFloatingFilters(){return this.beans.colModel.getCols().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e){let t=this.beans.colModel.getColDefCol(e);if(!t)return Promise.resolve(void 0);let n=this.getOrCreateFilterUi(t);return n?new Promise(i=>{n.then(o=>{i(fw(o))})}):Promise.resolve(null)}processFilterModelUpdateQueue(){this.modelUpdates.forEach(({model:e,source:t})=>this.setModel(e,t)),this.modelUpdates=[],this.columnModelUpdates.forEach(({key:e,model:t,resolve:n})=>{this.setModelForColumn(e,t).then(()=>n())}),this.columnModelUpdates=[]}getModelForColumn(e,t){if(t){let{state:i,model:o}=this,r=e.getColId(),s=i.get(r);return s?s.model??null:Do(o,r)}let n=this.cachedFilter(e);return n?this.getModelFromFilterWrapper(n):null}setModelForColumn(e,t){if(this.beans.dataTypeSvc?.isPendingInference){let n=()=>{},i=new Promise(o=>{n=o});return this.columnModelUpdates.push({key:e,model:t,resolve:n}),i}return new Promise(n=>{this.setModelForColumnLegacy(e,t).then(i=>n(i))})}getStateForColumn(e){return this.state.get(e)??{model:Do(this.model,e)}}setModelForColumnLegacy(e,t){let n=this.beans.colModel.getColDefCol(e),i=n?this.getOrCreateFilterWrapper(n,!0):null;return i?this.setModelOnFilterWrapper(i,t):Ii.resolve()}setColDefPropsForDataType(e,t,n){let i=e.filter,o=i===!0?this.getDefaultFilterFromDataType(()=>t.baseDataType):i;if(typeof o!="string")return;let r,s,a=this.beans,{filterParams:l,filterValueGetter:c}=e;o==="agMultiColumnFilter"?{filterParams:r,filterValueGetter:s}=a.multiFilter?.getParamsForDataType(l,c,t,n)??{}:{filterParams:r,filterValueGetter:s}=xRe(o,l,c,t,n,a,this.getLocaleTextFunc()),e.filterParams=r,s&&(e.filterValueGetter=s)}setColFilterActive(e,t,n,i){e.filterActive!==t&&(e.filterActive=t,e.dispatchColEvent("filterActiveChanged",n)),e.dispatchColEvent("filterChanged",n,i)}setModelOnFilterWrapper(e,t,n){return new Ii(i=>{if(e.isHandler){let r=e.column,s=r.getColId(),a=this.model[s];if(this.updateStoredModel(s,t),n&&t===a){i();return}this.refreshHandlerAndUi(r,t,"api").then(()=>i());return}let o=au(e);if(o){o.then(r=>{if(typeof r?.setModel!="function"){ce(65),i();return}(r.setModel(t)||Ii.resolve()).then(()=>i())});return}i()})}updateStoredModel(e,t){Se(t)?this.model[e]=t:delete this.model[e];let n=this.state.get(e),i={model:t,state:n?.state};this.state.set(e,i)}filterModified(e,t){this.getOrCreateFilterUi(e)?.then(n=>{this.eventSvc.dispatchEvent(g({type:"filterModified",column:e,filterInstance:n},t))})}filterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent(g({type:"filterUiChanged",column:e},t))}floatingFilterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent(g({type:"floatingFilterUiChanged",column:e},t))}updateModel(e,t,n){let i=e.getColId(),o=this.cachedFilter(e),r=()=>o?.filterUi;$X(t,r,()=>Do(this.model,i),()=>this.state.get(i),s=>this.updateState(e,s),s=>r()?.filterParams?.onModelChange(s,n),o?.isHandler?o.handler.processModelToApply?.bind(o.handler):void 0)}updateAllModels(e,t){let n=[];this.allColumnFilters.forEach((i,o)=>{let r=this.beans.colModel.getColDefCol(o);r&&$X(e,()=>i.filterUi,()=>Do(this.model,o),()=>this.state.get(o),s=>this.updateState(r,s),s=>{this.updateStoredModel(o,s),this.dispatchLocalEvent({type:"filterAction",column:r,action:e}),n.push(this.refreshHandlerAndUi(r,s,"ui"))},i?.isHandler?i.handler.processModelToApply?.bind(i.handler):void 0)}),n.length&&Ii.all(n).then(()=>{this.callOnFilterChangedOutsideRenderCycle({source:"columnFilter",additionalEventAttributes:t,columns:[]})})}updateOrRefreshFilterUi(e){let t=e.getColId();fne(()=>this.cachedFilter(e)?.filterUi,()=>Do(this.model,t),()=>this.state.get(t))}updateState(e,t){this.state.set(e.getColId(),t),this.dispatchLocalEvent({type:"filterStateChanged",column:e,state:t})}canApplyAll(){let{state:e,model:t,activeFilterComps:n}=this;for(let o of n)if(o.source==="COLUMN_MENU")return!1;let i=!1;for(let o of e.keys()){let r=e.get(o);if(r.valid===!1)return!1;(r.model??null)!==Do(t,o)&&(i=!0)}return i}hasUnappliedModel(e){let{model:t,state:n}=this;return(n.get(e)?.model??null)!==Do(t,e)}setGlobalButtons(e){this.isGlobalButtons=e,this.dispatchLocalEvent({type:"filterGlobalButtons",isGlobal:e})}shouldKeepStateOnDetach(e,t){if(t==="newFiltersToolPanel")return!0;let n=this.beans.filterPanelSvc;return n?.isActive?!!n.getState(e.getColId()):!1}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear(),this.state.clear(),this.activeFilterComps.clear()}};function NNe(e){return!!e.filterManager?.isAnyFilterPresent()}function BNe(e,t="api"){e.filterManager?.onFilterChanged({source:t})}var zNe=class extends te{constructor(){super(...arguments),this.beanName="filterManager",this.advFilterModelUpdateQueue=[]}wireBeans(e){this.quickFilter=e.quickFilter,this.advancedFilter=e.advancedFilter,this.colFilter=e.colFilter}postConstruct(){let e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:i})=>this.onAdvFilterEnabledChanged(i),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.quickFilter&&this.addManagedListeners(this.quickFilter,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})});let{gos:n}=this;this.alwaysPassFilter=n.get("alwaysPassFilter"),this.addManagedPropertyListener("alwaysPassFilter",()=>{this.alwaysPassFilter=n.get("alwaysPassFilter"),this.onFilterChanged({source:"api"})})}isExternalFilterPresentCallback(){let e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"&&e({})}doesExternalFilterPass(e){let t=this.gos.get("doesExternalFilterPass");return typeof t=="function"&&t(e)}setFilterState(e,t,n="api"){this.isAdvFilterEnabled()||this.colFilter?.setState(e,t,n)}setFilterModel(e,t="api",n){if(this.isAdvFilterEnabled()){n||this.warnAdvFilters();return}this.colFilter?.setModel(e,t)}getFilterModel(){return this.colFilter?.getModel()??{}}getFilterState(){return this.colFilter?.getState()}isColumnFilterPresent(){return!!this.colFilter?.isFilterPresent()}isAggregateFilterPresent(){return!!this.colFilter?.isAggFilterPresent()}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.externalFilterPresent||this.isAdvFilterPresent()}isAnyFilterPresent(){return this.isChildFilterPresent()||this.isAggregateFilterPresent()}isAdvFilterPresent(){return this.isAdvFilterEnabled()&&this.advancedFilter.isFilterPresent()}onAdvFilterEnabledChanged(e){e?this.colFilter?.disableFilters()&&this.onFilterChanged({source:"advancedFilter"}):this.advancedFilter?.isFilterPresent()&&(this.advancedFilter.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvFilterEnabled(){return!!this.advancedFilter?.isEnabled()}isAdvFilterHeaderActive(){return this.isAdvFilterEnabled()&&this.advancedFilter.isHeaderActive()}refreshFiltersForAggregations(){f4(this.gos)&&this.isAnyFilterPresent()&&this.onFilterChanged()}onFilterChanged(e={}){let{source:t,additionalEventAttributes:n,columns:i=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.colFilter?this.colFilter.updateBeforeFilterChanged(e):Ii.resolve()).then(()=>{let o={source:t,type:"filterChanged",columns:i};n&&kr(o,n),this.eventSvc.dispatchEvent(o),this.colFilter?.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){return!!this.colFilter?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilter?.isFilterPresent()}updateAggFiltering(){this.aggFiltering=!!f4(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.beans.colModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,colIdToSkip:e})}doesRowPassAggregateFilters(e){let{rowNode:t}=e;return this.alwaysPassFilter?.(t)?!0:!(this.isAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.isAggregateFilterPresent()&&!this.colFilter.doFiltersPass(t,e.colIdToSkip,!0))}doesRowPassFilter(e){let{rowNode:t}=e;return this.alwaysPassFilter?.(t)?!0:!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.externalFilterPresent&&!this.doesExternalFilterPass(t)||this.isColumnFilterPresent()&&!this.colFilter.doFiltersPass(t,e.colIdToSkip)||this.isAdvFilterPresent()&&!this.advancedFilter.doesFilterPass(t))}isFilterAllowed(e){return this.isAdvFilterEnabled()?!1:!!this.colFilter?.isFilterAllowed(e)}getAdvFilterModel(){return this.isAdvFilterEnabled()?this.advancedFilter.getModel():null}setAdvFilterModel(e,t="api"){if(this.isAdvFilterEnabled()){if(this.beans.dataTypeSvc?.isPendingInference){this.advFilterModelUpdateQueue.push(e);return}this.advancedFilter.setModel(e??null),this.onFilterChanged({source:t})}}toggleAdvFilterBuilder(e,t){this.isAdvFilterEnabled()&&this.advancedFilter.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvFilterColumns(){this.isAdvFilterEnabled()&&this.advancedFilter.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvFilterEnabled()?!1:!!this.colFilter?.hasFloatingFilters()}getColumnFilterInstance(e){return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve(void 0)):this.colFilter?.getFilterInstance(e)??Promise.resolve(void 0)}warnAdvFilters(){ce(68)}setupAdvFilterHeaderComp(e){this.advancedFilter?.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvFilterHeaderActive()?this.advancedFilter.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){for(let e of this.advFilterModelUpdateQueue)this.setAdvFilterModel(e);this.advFilterModelUpdateQueue=[]}setColumnFilterModel(e,t){return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve()):this.colFilter?.setModelForColumn(e,t)??Promise.resolve()}},VNe=class extends te{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupSvc=e.popupSvc}hideActiveMenu(){this.hidePopup?.()}showMenuAfterMouseEvent(e,t,n,i){e&&!e.isColumn||this.showPopup(e,o=>{this.popupSvc?.positionPopupUnderMouseEvent({column:e,type:n,mouseEvent:t,ePopup:o})},n,t.target,Ss(this.gos),i)}showMenuAfterButtonClick(e,t,n,i){if(e&&!e.isColumn)return;let o=-1,r="left",s=Ss(this.gos);!s&&this.gos.get("enableRtl")&&(o=1,r="right");let a=s?void 0:4*o,l=s?void 0:4;this.showPopup(e,c=>{this.popupSvc?.positionPopupByComponent({type:n,eventSource:t,ePopup:c,nudgeX:a,nudgeY:l,alignSide:r,keepWithinBounds:!0,position:"under",column:e})},n,t,s,i)}showPopup(e,t,n,i,o,r){let s=e?this.createBean(new CRe(e,"COLUMN_MENU")):void 0;if(this.activeMenu=s,!s?.hasFilter()||!e){On(57);return}let a=ji({tag:"div",cls:`ag-menu${o?"":" ag-filter-menu"}`,role:"presentation"});[this.tabListener]=this.addManagedElementListeners(a,{keydown:y=>this.trapFocusWithin(y,a)}),a.appendChild(s?.getGui());let l,c=()=>s?.afterGuiDetached(),u=zke(this.gos)?i??this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody:void 0,h=y=>{YX(e,!1,"contextMenu");let w=y instanceof KeyboardEvent;this.tabListener&&(this.tabListener=this.tabListener()),w&&i&&Hl(i)&&Yte(i)?.focus({preventScroll:!0}),c(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,n,e),r?.()},f=this.getLocaleTextFunc(),m=o&&n!=="columnFilter"?f("ariaLabelColumnMenu","Column Menu"):f("ariaLabelColumnFilter","Column Filter"),_=this.popupSvc?.addPopup({modal:!0,eChild:a,closeOnEsc:!0,closedCallback:h,positionCallback:()=>t(a),anchorToElement:u,ariaLabel:m});_&&(this.hidePopup=l=_.hideFunc),s.afterInit().then(()=>{t(a),s.afterGuiAttached({container:n,hidePopup:l})}),YX(e,!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,n,e)}trapFocusWithin(e,t){e.key!==W.TAB||e.defaultPrevented||kp(this.beans,t,!1,e.shiftKey)||(e.preventDefault(),wp(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,n){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:n??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},HNe=class extends te{constructor(){super(...arguments),this.beanName="filterValueSvc"}getValue(e,t,n){if(!t)return;let i=e.getColDef(),{selectableFilter:o,valueSvc:r}=this.beans,s=n??o?.getFilterValueGetter(e.getColId())??i.filterValueGetter;return s?this.executeFilterValueGetter(s,t.data,e,t,i):r.getValue(e,t)}executeFilterValueGetter(e,t,n,i,o){let{expressionSvc:r,valueSvc:s}=this.beans,a=at(this.gos,{data:t,node:i,column:n,colDef:o,getValue:s.getValueCallback.bind(s,i)});return typeof e=="function"?e(a):r?.evaluate(e,a)}},$Ne={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eFloatingFilterText"}]},jNe=class extends Mn{constructor(){super($Ne,[wI]),this.eFloatingFilterText=Ce}init(e){this.params=e;let t=this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0);if(this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`),this.gos.get("enableFilterHandlers")){let n=e,i=n.getHandler();if(i.getModelAsString){let o=i.getModelAsString(n.model);this.eFloatingFilterText.setValue(o)}}}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){let n=t.getModelAsString(e);this.eFloatingFilterText.setValue(n)}})}refresh(e){this.init(e)}},IV=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions??t,this.mapCustomOptions(),this.defaultOption=this.getDefaultItem(e.defaultOption)}refresh(e,t){let n=e.filterOptions??t;this.filterOptions!==n&&(this.filterOptions=n,this.customFilterOptions={},this.mapCustomOptions()),this.defaultOption=this.getDefaultItem(e.defaultOption)}mapCustomOptions(){let{filterOptions:e}=this;if(e)for(let t of e){if(typeof t=="string")continue;let n=[["displayKey"],["displayName"],["predicate","test"]],i=o=>o.some(r=>t[r]!=null)?!0:(ce(72,{keys:o}),!1);if(!n.every(i)){this.filterOptions=e.filter(o=>o===t)||[];continue}this.customFilterOptions[t.displayKey]=t}}getDefaultItem(e){let{filterOptions:t}=this;if(e)return e;if(t.length>=1){let n=t[0];if(typeof n=="string")return n;if(n.displayKey)return n.displayKey;ce(73)}else ce(74)}getCustomOption(e){return this.customFilterOptions[e]}};function ow(e,t,n){return n==null?e.splice(t):e.splice(t,n)}function vI(e){return e==null||typeof e=="string"&&e.trim().length===0}function GNe(e){return e==="AND"||e==="OR"?e:"AND"}function UNe(e,t,n){if(e==null)return;let{predicate:i}=e;if(i!=null&&!t.some(o=>o==null))return i(t,n)}function WNe(e,t){let n=e.length;return n>t&&(e.splice(t),ce(78),n=t),n}function _w(e,t){let n=t.getCustomOption(e);if(n){let{numberOfInputs:o}=n;return o??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}var MV=class extends RRe{constructor(e,t,n){super(e,"simple-filter"),this.mapValuesFromModel=t,this.defaultOptions=n,this.eTypes=[],this.eJoinPanels=[],this.eJoinAnds=[],this.eJoinOrs=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}setParams(e){super.setParams(e);let t=new IV;this.optionsFactory=t,t.init(e,this.defaultOptions),this.commonUpdateSimpleParams(e),this.createOption(),this.createMissingConditionsAndOperators()}updateParams(e,t){this.optionsFactory.refresh(e,this.defaultOptions),super.updateParams(e,t),this.commonUpdateSimpleParams(e)}commonUpdateSimpleParams(e){this.setNumConditions(e),this.defaultJoinOperator=GNe(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.createFilterListOptions();let t=this.getGui();this.isReadOnly()?t.setAttribute("tabindex","-1"):t.removeAttribute("tabindex")}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged("immediately",!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,n)=>{let i=n===0?e:this.optionsFactory.defaultOption;t.setValue(i,!0)})}getModelFromUi(){let e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.filterType,operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){let{eJoinOrs:e,defaultJoinOperator:t}=this;return e.length===0?t:e[0].getValue()===!0?"OR":"AND"}areNonNullModelsEqual(e,t){let n=!e.operator,i=!t.operator;if(!n&&i||n&&!i)return!1;let r;if(n){let s=e,a=t;r=this.areSimpleModelsEqual(s,a)}else{let s=e,a=t;r=s.operator===a.operator&&yu(s.conditions,a.conditions,(l,c)=>this.areSimpleModelsEqual(l,c))}return r}setModelIntoUi(e,t){if(e==null)return this.resetUiToDefaults(t),Ii.resolve();if(e.operator){let i=e,o=i.conditions;o==null&&(o=[],ce(77));let r=WNe(o,this.maxNumConditions),s=this.getNumConditions();if(r<s)this.removeConditionsAndOperators(r);else if(r>s)for(let l=s;l<r;l++)this.createJoinOperatorPanel(),this.createOption();let a=i.operator==="OR";this.eJoinAnds.forEach(l=>l.setValue(!a,!0)),this.eJoinOrs.forEach(l=>l.setValue(a,!0)),o.forEach((l,c)=>{this.eTypes[c].setValue(l.type,!0),this.setConditionIntoUi(l,c)})}else{let i=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(i.type,!0),this.setConditionIntoUi(i,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.updateUiVisibility(),t||this.params.onUiChange(this.getUiChangeEventParams()),Ii.resolve()}setNumConditions(e){let t=e.maxNumConditions??2;t<1&&(ce(79),t=1),this.maxNumConditions=t;let n=e.numAlwaysVisibleConditions??1;n<1&&(ce(80),n=1),n>t&&(ce(81),n=t),this.numAlwaysVisibleConditions=n}createOption(){let e=this.getGui(),t=this.createManagedBean(new sV);this.eTypes.push(t),t.addCss("ag-filter-select"),e.appendChild(t.getGui());let n=this.createEValue();this.eConditionBodies.push(n),e.appendChild(n),this.putOptionsIntoDropdown(t),this.resetType(t);let i=this.getNumConditions()-1;this.forEachPositionInput(i,o=>this.resetInput(o)),this.addChangedListeners(t,i)}createJoinOperatorPanel(){let e=ji({tag:"div",cls:"ag-filter-condition"});this.eJoinPanels.push(e);let t=this.createJoinOperator(this.eJoinAnds,e,"and"),n=this.createJoinOperator(this.eJoinOrs,e,"or");this.getGui().appendChild(e);let i=this.eJoinPanels.length-1,o=this.joinOperatorId++;this.resetJoinOperatorAnd(t,i,o),this.resetJoinOperatorOr(n,i,o),this.isReadOnly()||(t.onValueChange(this.listener),n.onValueChange(this.listener))}createJoinOperator(e,t,n){let i=this.createManagedBean(new aMe);e.push(i);let o="ag-filter-condition-operator";return i.addCss(o),i.addCss(`${o}-${n}`),t.appendChild(i.getGui()),i}createFilterListOptions(){this.filterListOptions=this.optionsFactory.filterOptions.map(e=>typeof e=="string"?this.createBoilerplateListOption(e):this.createCustomListOption(e))}putOptionsIntoDropdown(e){let{filterListOptions:t}=this;for(let n of t)e.addOption(n);e.setDisabled(t.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){let{displayKey:t}=e,n=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:n?this.getLocaleTextFunc()(n.displayKey,n.displayName):this.translate(t)}}createBodyTemplate(){return null}getAgComponents(){return[]}updateUiVisibility(){let e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let n=0;n<this.getNumConditions();n++)this.isConditionUiComplete(n)?e=n:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{let n=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<n){this.removeConditionsAndOperators(n+1);let i=e+1,o=n-i;o>0&&this.removeConditionsAndOperators(i,o),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((i,o)=>{let r=this.isConditionDisabled(o,e);i.setDisabled(r||this.filterListOptions.length<=1),o===1&&(aw(this.eJoinPanels[0],r),this.eJoinAnds[0].setDisabled(r),this.eJoinOrs[0].setDisabled(r))}),this.eConditionBodies.forEach((i,o)=>{ci(i,this.isConditionBodyVisible(o))});let n=(t??this.getJoinOperator())==="OR";for(let i of this.eJoinAnds)i.setValue(!n,!0);for(let i of this.eJoinOrs)i.setValue(n,!0);this.forEachInput((i,o,r,s)=>{this.setElementDisplayed(i,o<s),this.setElementDisabled(i,this.isConditionDisabled(r,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;let{eTypes:n,eConditionBodies:i,eJoinPanels:o,eJoinAnds:r,eJoinOrs:s}=this;this.removeComponents(n,e,t),this.removeElements(i,e,t),this.removeEValues(e,t);let a=Math.max(e-1,0);this.removeElements(o,a,t),this.removeComponents(r,a,t),this.removeComponents(s,a,t)}removeElements(e,t,n){let i=ow(e,t,n);for(let o of i)Wr(o)}removeComponents(e,t,n){let i=ow(e,t,n);for(let o of i)Wr(o.getGui()),this.destroyBean(o)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e?.suppressFocus){let t;if(!this.isReadOnly()){let n=this.getInputs(0)[0];n instanceof hp&&this.isConditionBodyVisible(0)?t=n.getInputElement():t=this.eTypes[0]?.getFocusableElement()}(t??this.getGui()).focus({preventScroll:!0})}}afterGuiDetached(){super.afterGuiDetached();let e=this.params;if(this.beans.colFilter?.shouldKeepStateOnDetach(e.column))return;e.onStateChange({model:e.model});let t=-1,n=-1,i=!1,o=this.getJoinOperator();for(let s=this.getNumConditions()-1;s>=0;s--)if(this.isConditionUiComplete(s))t===-1&&(t=s,n=s);else{let a=s>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(s-1),l=s<t;(a||l)&&(this.removeConditionsAndOperators(s,1),i=!0,l&&n--)}let r=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),r=!0),this.shouldAddNewConditionAtEnd(n===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),r=!0),r&&this.updateConditionStatusesAndValues(n,o),i&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=n}getModelAsString(e){return this.params.getHandler()?.getModelAsString?.(e)??""}getPlaceholderText(e,t){let n=this.translate(e);if(typeof this.filterPlaceholder=="function"){let i=this.eTypes[t].getValue(),o=this.translate(i);n=this.filterPlaceholder({filterOptionKey:i,filterOption:o,placeholder:n})}else typeof this.filterPlaceholder=="string"&&(n=this.filterPlaceholder);return n}resetPlaceholder(){let e=this.getLocaleTextFunc();this.forEachInput((t,n,i,o)=>{if(!(t instanceof hp))return;let r=n===0&&o>1?"inRangeStart":n===0?"filterOoo":"inRangeEnd",s=n===0&&o>1?e("ariaFilterFromValue","Filter from value"):n===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(r,i)),t.setInputAriaLabel(s)})}setElementValue(e,t,n){e instanceof hp&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){TX(e)&&ci(e.getGui(),t)}setElementDisabled(e,t){TX(e)&&aw(e.getGui(),t)}attachElementOnChange(e,t){e instanceof hp&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,n)=>{this.forEachPositionTypeInput(n,t,e)})}forEachPositionInput(e,t){let n=this.getConditionType(e);this.forEachPositionTypeInput(e,n,t)}forEachPositionTypeInput(e,t,n){let i=_w(t,this.optionsFactory),o=this.getInputs(e);for(let r=0;r<o.length;r++){let s=o[r];s!=null&&n(s,r,e,i)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){let t=this.getConditionType(e);return _w(t,this.optionsFactory)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(n=>n==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){let e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinAnds.forEach((t,n)=>this.resetJoinOperatorAnd(t,n,this.joinOperatorId+n)),this.eJoinOrs.forEach((t,n)=>this.resetJoinOperatorOr(t,n,this.joinOperatorId+n)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,this.updateUiVisibility(),e||this.params.onUiChange(this.getUiChangeEventParams())}resetType(e){let n=this.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.defaultOption,!0).setAriaLabel(n).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,n){this.resetJoinOperator(e,t,this.defaultJoinOperator==="AND",this.translate("andCondition"),n)}resetJoinOperatorOr(e,t,n){this.resetJoinOperator(e,t,this.defaultJoinOperator==="OR",this.translate("orCondition"),n)}resetJoinOperator(e,t,n,i,o){this.updateJoinOperatorDisabled(e.setValue(n,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${o}`).setLabel(i),t)}updateJoinOperatorsDisabled(){let e=(t,n)=>this.updateJoinOperatorDisabled(t,n);this.eJoinAnds.forEach(e),this.eJoinOrs.forEach(e)}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){let n=this.mapValuesFromModel(e,this.optionsFactory);this.forEachInput((i,o,r)=>{r===t&&this.setElementValue(i,n[o]!=null?n[o]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,n,i)=>{this.setElementValue(t,n===0&&i===0?e:null,!0)})}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,n=>{this.attachElementOnChange(n,this.listener)}))}hasInvalidInputs(){return!1}isReadOnly(){return!!this.params.readOnly}},fie=class{constructor(e,t,n,i,o,r){this.alive=!0,this.context=e,this.eParent=o;let s=$Ie(t,n,i);s&&s.newAgStackInstance().then(a=>{if(!this.alive){e.destroyBean(a);return}if(this.dateComp=a,!a)return;o.appendChild(a.getGui()),a?.afterGuiAttached?.();let{tempValue:l,disabled:c}=this;l&&a.setDate(l),c!=null&&a.setDisabled?.(c),r?.(this)})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){let t=this.dateComp;t?t.setDate(e):this.tempValue=e}setDisabled(e){let t=this.dateComp;t?t.setDisabled?.(e):this.disabled=e}setDisplayed(e){ci(this.eParent,e)}setInputPlaceholder(e){this.dateComp?.setInputPlaceholder?.(e)}setInputAriaLabel(e){this.dateComp?.setInputAriaLabel?.(e)}afterGuiAttached(e){this.dateComp?.afterGuiAttached?.(e)}updateParams(e){this.dateComp?.refresh?.(e)}},RV=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"];function mie(e,t){let{dateFrom:n,dateTo:i,type:o}=e||{};return[n&&Kr(n,void 0,!0)||null,i&&Kr(i,void 0,!0)||null].slice(0,_w(o,t))}var Tee=1e3,Pee=1/0,qNe=class extends MV{constructor(){super("dateFilter",mie,RV),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=Tee,this.maxValidYear=Pee,this.minValidDate=null,this.maxValidDate=null,this.filterType="date"}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}commonUpdateSimpleParams(e){super.commonUpdateSimpleParams(e);let t=(l,c)=>{let u=e[l];if(u!=null)if(isNaN(u))ce(82,{param:l});else return u==null?c:Number(u);return c},n=t("minValidYear",Tee),i=t("maxValidYear",Pee);this.minValidYear=n,this.maxValidYear=i,n>i&&ce(83);let{minValidDate:o,maxValidDate:r}=e,s=o instanceof Date?o:Kr(o);this.minValidDate=s;let a=r instanceof Date?r:Kr(r);this.maxValidDate=a,s&&a&&s>a&&ce(84)}createDateCompWrapper(e){let{beans:{userCompFactory:t,context:n,gos:i},params:o}=this,r=new fie(n,t,o.colDef,at(i,{onDateChanged:()=>this.onUiChanged(),filterParams:o,location:"filter"}),e);return this.addDestroyFunc(()=>r.destroy()),r}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}createEValue(){let e=ji({tag:"div",cls:"ag-filter-body"});return this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,n,i){let o=ji({tag:"div",cls:`ag-filter-${i} ag-filter-date-${i}`});t.push(o),e.appendChild(o),n.push(this.createDateCompWrapper(o))}removeEValues(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),ow(this.eConditionPanelsFrom,e,t),ow(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,n){let i=ow(e,t,n);for(let o of i)o.destroy()}isValidDateValue(e){if(e===null)return!1;let{minValidDate:t,maxValidDate:n,minValidYear:i,maxValidYear:o}=this;if(t){if(e<t)return!1}else if(e.getUTCFullYear()<i)return!1;if(n){if(e>n)return!1}else if(e.getUTCFullYear()>o)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((n,i,o,r)=>{o!==e||!t||i>=r||(t=t&&this.isValidDateValue(n.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}createCondition(e){let t=this.getConditionType(e),n={},i=this.getValues(e),o=this.params.useIsoSeparator?"T":" ";return i.length>0&&(n.dateFrom=Es(i[0],!0,o)),i.length>1&&(n.dateTo=Es(i[1],!0,o)),g({dateFrom:null,dateTo:null,filterType:this.filterType,type:t},n)}resetPlaceholder(){let e=this.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),n=e("ariaFilterValue","Filter Value");this.forEachInput(i=>{i.setInputPlaceholder(t),i.setInputAriaLabel(n)})}getInputs(e){let{dateConditionFromComps:t,dateConditionToComps:n}=this;return e>=t.length?[null,null]:[t[e],n[e]]}getValues(e){let t=[];return this.forEachPositionInput(e,(n,i,o,r)=>{i<r&&t.push(n.getDate())}),t}translate(e){return e==="lessThan"?super.translate("before"):e==="greaterThan"?super.translate("after"):super.translate(e)}},gie=class extends te{constructor(e,t){super(),this.mapValuesFromModel=e,this.defaultOptions=t}init(e){let t=e.filterParams,n=new IV;this.optionsFactory=n,n.init(t,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(n,t)),this.updateParams(e),this.validateModel(e)}refresh(e){if(e.source==="colDef"){let t=e.filterParams,n=this.optionsFactory;n.refresh(t,this.defaultOptions),this.filterModelFormatter.updateParams({optionsFactory:n,filterParams:t}),this.updateParams(e)}this.validateModel(e)}updateParams(e){this.params=e}doesFilterPass(e){let t=e.model;if(t==null)return!0;let{operator:n}=t,i=[];if(n){let s=t;i.push(...s.conditions??[])}else i.push(t);let o=n&&n==="OR"?"some":"every",r=this.params.getValue(e.node);return i[o](s=>this.individualConditionPasses(e,s,r))}getModelAsString(e,t){return this.filterModelFormatter.getModelAsString(e,t)??""}validateModel(e){let{model:t,filterParams:{filterOptions:n,maxNumConditions:i}}=e;if(t==null)return;let r=vne(t)?t.conditions:[t],s=n?.map(u=>typeof u=="string"?u:u.displayKey)??this.defaultOptions;if(!(!r||r.every(u=>s.find(h=>h===u.type)!==void 0))){this.params=x(g({},e),{model:null}),e.onModelChange(null);return}let l=!1,c=this.filterType;if((r&&!r.every(u=>u.filterType===c)||t.filterType!==c)&&(r=r.map(u=>x(g({},u),{filterType:c})),l=!0),typeof i=="number"&&r&&r.length>i&&(r=r.slice(0,i),l=!0),l){let u=r.length>1?x(g({},t),{filterType:c,conditions:r}):x(g({},r[0]),{filterType:c});this.params=x(g({},e),{model:u}),e.onModelChange(u)}}individualConditionPasses(e,t,n){let i=this.optionsFactory,o=this.mapValuesFromModel(t,i),r=i.getCustomOption(t.type),s=UNe(r,o,n);return s??(n==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(o,n,t,e))}},vie=class extends gie{evaluateNullValue(e){let{includeBlanksInEquals:t,includeBlanksInNotEqual:n,includeBlanksInGreaterThan:i,includeBlanksInLessThan:o,includeBlanksInRange:r}=this.params.filterParams;switch(e){case"equals":if(t)return!0;break;case"notEqual":if(n)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(i)return!0;break;case"lessThan":case"lessThanOrEqual":if(o)return!0;break;case"inRange":if(r)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,n){let i=n.type;if(!this.isValid(t))return i==="notEqual"||i==="notBlank";let o=this.comparator(),r=e[0]!=null?o(e[0],t):0;switch(i){case"equals":return r===0;case"notEqual":return r!==0;case"greaterThan":return r>0;case"greaterThanOrEqual":return r>=0;case"lessThan":return r<0;case"lessThanOrEqual":return r<=0;case"inRange":{let s=o(e[1],t);return this.params.filterParams.inRangeInclusive?r>=0&&s<=0:r>0&&s<0}case"blank":return vI(t);case"notBlank":return!vI(t);default:return ce(76,{filterModelType:i}),!0}}},_ie={equals:"Equals",notEqual:"NotEqual",greaterThan:"GreaterThan",greaterThanOrEqual:"GreaterThanOrEqual",lessThan:"LessThan",lessThanOrEqual:"LessThanOrEqual",inRange:"InRange"},KNe={contains:"Contains",notContains:"NotContains",equals:"TextEquals",notEqual:"TextNotEqual",startsWith:"StartsWith",endsWith:"EndsWith",inRange:"InRange"},TV=class extends te{constructor(e,t,n){super(),this.optionsFactory=e,this.filterParams=t,this.valueFormatter=n}getModelAsString(e,t){let n=this.getLocaleTextFunc(),i=t==="filterToolPanel";if(!e)return i?hu(this,"filterSummaryInactive"):null;if(e.operator!=null){let r=e,a=(r.conditions??[]).map(c=>this.getModelAsString(c,t)),l=r.operator==="AND"?"andCondition":"orCondition";return a.join(` ${hu(this,l)} `)}else{if(e.type==="blank"||e.type==="notBlank")return i?hu(this,e.type==="blank"?"filterSummaryBlank":"filterSummaryNotBlank"):n(e.type,e.type);{let r=e,s=this.optionsFactory.getCustomOption(r.type),{displayKey:a,displayName:l,numberOfInputs:c}=s||{};return a&&l&&c===0?n(a,l):this.conditionToString(r,i,r.type==="inRange"||c===2,a,l)}}}updateParams(e){let{optionsFactory:t,filterParams:n}=e;this.optionsFactory=t,this.filterParams=n}conditionForToolPanel(e,t,n,i,o,r){let s,a=this.getTypeKey(e);return a&&(s=hu(this,a)),o&&r&&(s=this.getLocaleTextFunc()(o,r)),s!=null?t?`${s} ${hu(this,"filterSummaryInRangeValues",[n(),i()])}`:`${s} ${n()}`:null}getTypeKey(e){let t=this.filterTypeKeys[e];return t?`filterSummary${t}`:null}formatValue(e){let t=this.valueFormatter;return t?t(e??null)??"":String(e)}},yie=class extends TV{constructor(e,t){super(e,t,n=>{let{dataTypeSvc:i,valueSvc:o}=this.beans,r=t.column,s=i?.getDateFormatterFunction(r),a=s?s(n??void 0):n;return o.formatValue(r,null,a)}),this.filterTypeKeys=_ie}conditionToString(e,t,n,i,o){let{type:r}=e,s=Kr(e.dateFrom),a=Kr(e.dateTo),l=this.filterParams.inRangeFloatingFilterDateFormat,c=t?this.formatValue.bind(this):f=>b4(f,l),u=()=>s!==null?c(s):"null",h=()=>a!==null?c(a):"null";if(t){let f=this.conditionForToolPanel(r,n,u,h,i,o);if(f!=null)return f}return n?`${u()}-${h()}`:s!=null?c(s):`${r}`}};function ZNe(e,t){let n=t;return n<e?-1:n>e?1:0}var YNe=class extends vie{constructor(){super(mie,RV),this.filterType="date",this.FilterModelFormatterClass=yie}comparator(){return this.params.filterParams.comparator??ZNe}isValid(e){let t=this.params.filterParams.isValidDate;return!t||t(e)}},bie=class extends Mn{constructor(){super(...arguments),this.defaultDebounceMs=0}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.defaultOption;return}let t=e.operator,n;t?n=e.conditions[0]:n=e,this.lastType=n.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;let n=e;return this.isTypeEditable(n.type)}init(e){this.params=e;let t=this.gos.get("enableFilterHandlers");if(this.reactive=t,this.setParams(e),t){let n=e;this.onModelUpdated(n.model)}}setParams(e){let t=new IV;this.optionsFactory=t,t.init(e.filterParams,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(t,e.filterParams)),this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){let n=this.optionsFactory.defaultOption;t||(this.lastType=n),this.readOnly=!!e.filterParams.readOnly;let i=this.isTypeEditable(n);this.setEditable(i)}refresh(e){this.params=e;let t=e,n=this.reactive;if((!n||t.source==="colDef")&&this.updateParams(e),n){let{source:i,model:o}=t;if(i==="dataChanged"||i==="ui")return;this.onModelUpdated(o)}}updateParams(e){let t=this.optionsFactory;t.refresh(e.filterParams,this.defaultOptions),this.setSimpleParams(e),this.filterModelFormatter.updateParams({optionsFactory:t,filterParams:e.filterParams})}onParentModelChanged(e,t){t?.afterFloatingFilter||t?.afterDataChange||this.onModelUpdated(e)}hasSingleInput(e){let t=this.optionsFactory.getCustomOption(e)?.numberOfInputs;return t==null||t==1}isTypeEditable(e){let t=["inRange","empty","blank","notBlank"];return!!e&&!this.readOnly&&this.hasSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){return`${this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0)} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`}},QNe={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eReadOnlyText"},{tag:"div",ref:"eDateWrapper",cls:"ag-date-floating-filter-wrapper"}]},JNe=class extends bie{constructor(){super(QNe,[wI]),this.eReadOnlyText=Ce,this.eDateWrapper=Ce,this.FilterModelFormatterClass=yie,this.filterType="date",this.defaultOptions=RV}setParams(e){super.setParams(e),this.createDateComponent();let t=this.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}updateParams(e){super.updateParams(e),this.dateComp.updateParams(this.getDateComponentParams()),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){let t=!this.readOnly&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){let n=e?Kr(e.dateFrom):null;this.dateComp.setDate(n),this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){ci(this.eDateWrapper,e),ci(this.eReadOnlyText.getGui(),!e)}onModelUpdated(e){super.setLastTypeFromModel(e),this.updateCompOnModelChange(e)}onDateChanged(){let e=this.dateComp.getDate();if(this.reactive){let t=this.params;t.onUiChange();let n=t.model,i=Es(e),o=i==null?null:x(g({},n??{filterType:this.filterType,type:this.lastType??this.optionsFactory.defaultOption}),{dateFrom:i});t.onModelChange(o,{afterFloatingFilter:!0})}else this.params.parentFilterInstance(t=>{t?.onFloatingFilterChanged(this.lastType||null,e)})}getDateComponentParams(){let{filterParams:e}=this.params,t=uV(e,this.defaultDebounceMs);return at(this.gos,{onDateChanged:zo(this,this.onDateChanged.bind(this),t),filterParams:e,location:"floatingFilter"})}createDateComponent(){let{beans:{context:e,userCompFactory:t},eDateWrapper:n,params:i}=this;this.dateComp=new fie(e,t,i.column.getColDef(),this.getDateComponentParams(),n,o=>{o.setInputAriaLabel(this.getAriaLabel(i))}),this.addDestroyFunc(()=>this.dateComp.destroy())}},XNe={tag:"div",cls:"ag-filter-filter",children:[{tag:"ag-input-text-field",ref:"eDateInput",cls:"ag-date-filter"}]},e3e=class extends Mn{constructor(){super(XNe,[wI]),this.eDateInput=Ce,this.isApply=!1,this.applyOnFocusOut=!1}init(e){this.params=e,this.setParams(e);let t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus({preventScroll:!0})},input:this.handleInput.bind(this,!1),change:this.handleInput.bind(this,!0),focusout:this.handleFocusOut.bind(this)})}handleInput(e){if(!this.eDateInput.isDisabled()){if(this.isApply){this.applyOnFocusOut=!e,e&&this.params.onDateChanged();return}e||this.params.onDateChanged()}}handleFocusOut(){this.applyOnFocusOut&&(this.applyOnFocusOut=!1,this.params.onDateChanged())}setParams(e){let t=this.eDateInput.getInputElement(),n=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=n&&bu();let{minValidYear:i,maxValidYear:o,minValidDate:r,maxValidDate:s,buttons:a,includeTime:l,colDef:c}=e.filterParams||{},u=this.beans.dataTypeSvc,h=l??u?.getDateIncludesTimeFlag?.(c.cellDataType)??!1;if(n?h?(t.type="datetime-local",t.step="1"):t.type="date":t.type="text",r&&i&&ce(85),s&&o&&ce(86),r&&s){let[f,m]=[r,s].map(_=>_ instanceof Date?_:Kr(_));f&&m&&f.getTime()>m.getTime()&&ce(87)}r?r instanceof Date?t.min=b4(r):t.min=r:i&&(t.min=`${i}-01-01`),s?s instanceof Date?t.max=b4(s):t.max=s:o&&(t.max=`${o}-12-31`),this.isApply=e.location==="floatingFilter"&&!!a?.includes("apply")}refresh(e){this.params=e,this.setParams(e)}getDate(){return Kr(this.eDateInput.getValue())}setDate(e){let t=this.params.filterParams.colDef.cellDataType,n=this.beans.dataTypeSvc?.getDateIncludesTimeFlag(t)??!1;this.eDateInput.setValue(Es(e,n))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){e?.suppressFocus||this.eDateInput.getInputElement().focus({preventScroll:!0})}shouldUseBrowserDatePicker(e){return e?.filterParams?.browserDatePicker??!0}},PV=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"];function z4(e){let{allowedCharPattern:t}=e??{};return t??null}function V4(e){return e==null||isNaN(e)?null:e}function Cie(e,t){let{filter:n,filterTo:i,type:o}=e||{};return[V4(n),V4(i)].slice(0,_w(o,t))}var t3e=class extends MV{constructor(){super("numberFilter",Cie,PV),this.eValuesFrom=[],this.eValuesTo=[],this.filterType="number",this.defaultDebounceMs=500}setElementValue(e,t,n){let{numberFormatter:i}=this.params,o=!n&&i?i(t??null):t;super.setElementValue(e,o)}createEValue(){let e=z4(this.params),t=ji({tag:"div",cls:"ag-filter-body",role:"presentation"});return this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,n,i){let o=this.createManagedBean(i?new Ip({allowedCharPattern:i}):new rV);o.addCss(`ag-filter-${n}`),o.addCss("ag-filter-filter"),t.push(o),e.appendChild(o.getGui())}removeEValues(e,t){let n=i=>this.removeComponents(i,e,t);n(this.eValuesFrom),n(this.eValuesTo)}getValues(e){let t=[];return this.forEachPositionInput(e,(n,i,o,r)=>{i<r&&t.push(V4(this.stringToFloat(n.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}stringToFloat(e){if(typeof e=="number")return e;let t=qc(e);t!=null&&t.trim()===""&&(t=null);let n=this.params.numberParser;return n?n(t):t==null||t.trim()==="-"?null:Number.parseFloat(t)}createCondition(e){let t=this.getConditionType(e),n={filterType:this.filterType,type:t},i=this.getValues(e);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}getInputs(e){let{eValuesFrom:t,eValuesTo:n}=this;return e>=t.length?[null,null]:[t[e],n[e]]}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{t.getInputElement().validity.valid||(e=!0)}),e}},wie=class extends TV{constructor(e,t){super(e,t,t.numberFormatter),this.filterTypeKeys=_ie}conditionToString(e,t,n,i,o){let{filter:r,filterTo:s,type:a}=e,l=this.formatValue.bind(this);if(t){let c=this.conditionForToolPanel(a,n,()=>l(r),()=>l(s),i,o);if(c!=null)return c}return n?`${l(r)}-${l(s)}`:r!=null?l(r):`${a}`}},n3e=class extends vie{constructor(){super(Cie,PV),this.filterType="number",this.FilterModelFormatterClass=wie}comparator(){return(e,t)=>e===t?0:e<t?1:-1}isValid(e){return!isNaN(e)}},xie=class extends te{constructor(e){super(),this.params=e,this.eInput=Ce,this.onValueChanged=()=>{}}setupGui(e){this.eInput=this.createManagedBean(new Ip(this.params?.config));let t=this.eInput.getGui();e.appendChild(t);let n=i=>this.onValueChanged(i);this.addManagedListeners(t,{input:n,keydown:n})}setEditable(e){this.eInput.setDisabled(!e)}getValue(){return this.eInput.getValue()}setValue(e,t){this.eInput.setValue(e,t)}setValueChangedListener(e){this.onValueChanged=e}setParams({ariaLabel:e,autoComplete:t}){let{eInput:n}=this;n.setInputAriaLabel(e),t!==void 0&&n.setAutoComplete(t)}};function H4(e){let t=e?.trim();return t===""?e:t}function Sie(e,t){let{filter:n,filterTo:i,type:o}=e||{};return[n||null,i||null].slice(0,_w(o,t))}var i3e={tag:"div",ref:"eFloatingFilterInputContainer",cls:"ag-floating-filter-input",role:"presentation"},Eie=class extends bie{constructor(){super(...arguments),this.eFloatingFilterInputContainer=Ce,this.defaultDebounceMs=500}postConstruct(){this.setTemplate(i3e)}onModelUpdated(e){this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.inputSvc.setValue(this.filterModelFormatter.getModelAsString(e))}setParams(e){this.setupFloatingFilterInputService(e),super.setParams(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.inputSvc=this.createFloatingFilterInputService(e),this.inputSvc.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){let t=e.browserAutoComplete??!1,{inputSvc:n,defaultDebounceMs:i,readOnly:o}=this;if(n.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=SI(e.filterParams),!o){let r=uV(e.filterParams,i),s=zo(this,this.syncUpWithParentFilter.bind(this),r);n.setValueChangedListener(s)}}updateParams(e){super.updateParams(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){let{inputSvc:t}=this,n=t.getValue();Vo(this.eFloatingFilterInputContainer),this.destroyBean(t),this.setupFloatingFilterInputService(e),t.setValue(n,!0)}syncUpWithParentFilter(e){let t=e.key===W.ENTER,n=this.reactive;if(n&&this.params.onUiChange(),this.applyActive&&!t)return;let{inputSvc:i,params:o,lastType:r}=this,s=i.getValue();if(o.filterParams.trimInput&&(s=H4(s),i.setValue(s,!0)),n){let a=o,l=a.model,c=this.convertValue(s),u=c==null?null:x(g({},l??{filterType:this.filterType,type:r??this.optionsFactory.defaultOption}),{filter:c});a.onModelChange(u,{afterFloatingFilter:!0})}else o.parentFilterInstance(a=>{a?.onFloatingFilterChanged(r||null,s||null)})}convertValue(e){return e||null}setEditable(e){this.inputSvc.setEditable(e)}},o3e=class extends te{constructor(){super(...arguments),this.onValueChanged=()=>{},this.numberInputActive=!0}setupGui(e){this.eNumberInput=this.createManagedBean(new rV),this.eTextInput=this.createManagedBean(new Ip),this.eTextInput.setDisabled(!0);let t=this.eNumberInput.getGui(),n=this.eTextInput.getGui();e.appendChild(t),e.appendChild(n),this.setupListeners(t,i=>this.onValueChanged(i)),this.setupListeners(n,i=>this.onValueChanged(i))}setEditable(e){this.numberInputActive=e,this.eNumberInput.setDisplayed(this.numberInputActive),this.eTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eNumberInput.setAutoComplete(e),this.eTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eNumberInput:this.eTextInput}setValueChangedListener(e){this.onValueChanged=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eNumberInput.setInputAriaLabel(e),this.eTextInput.setInputAriaLabel(e)}},r3e=class extends Eie{constructor(){super(...arguments),this.FilterModelFormatterClass=wie,this.filterType="number",this.defaultOptions=PV}updateParams(e){z4(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.updateParams(e)}createFloatingFilterInputService(e){return this.allowedCharPattern=z4(e.filterParams),this.allowedCharPattern?this.createManagedBean(new xie({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new o3e)}convertValue(e){return e?Number(e):null}},AV=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],s3e=class extends MV{constructor(){super("textFilter",Sie,AV),this.filterType="text",this.eValuesFrom=[],this.eValuesTo=[],this.defaultDebounceMs=500}createCondition(e){let t=this.getConditionType(e),n={filterType:this.filterType,type:t},i=this.getValues(e);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){let{eValuesFrom:t,eValuesTo:n}=this;return e>=t.length?[null,null]:[t[e],n[e]]}getValues(e){let t=[];return this.forEachPositionInput(e,(n,i,o,r)=>{i<r&&t.push(qc(n.getValue()))}),t}createEValue(){let e=ji({tag:"div",cls:"ag-filter-body",role:"presentation"}),{eValuesFrom:t,eValuesTo:n}=this;return this.createFromToElement(e,t,"from"),this.createFromToElement(e,n,"to"),e}createFromToElement(e,t,n){let i=this.createManagedBean(new Ip);i.addCss(`ag-filter-${n}`),i.addCss("ag-filter-filter"),t.push(i),e.appendChild(i.getGui())}removeEValues(e,t){let n=r=>this.removeComponents(r,e,t),{eValuesFrom:i,eValuesTo:o}=this;n(i),n(o)}},Die=class extends TV{constructor(){super(...arguments),this.filterTypeKeys=KNe}conditionToString(e,t,n,i,o){let{filter:r,filterTo:s,type:a}=e;if(t){let l=u=>()=>hu(this,"filterSummaryTextQuote",[u]),c=this.conditionForToolPanel(a,n,l(r),l(s),i,o);if(c!=null)return c}return n?`${r}-${s}`:r!=null?`${r}`:`${a}`}},a3e=({filterOption:e,value:t,filterText:n})=>{if(n==null)return!1;switch(e){case"contains":return t.includes(n);case"notContains":return!t.includes(n);case"equals":return t===n;case"notEqual":return t!=n;case"startsWith":return t.indexOf(n)===0;case"endsWith":{let i=t.lastIndexOf(n);return i>=0&&i===t.length-n.length}default:return!1}},l3e=e=>e,c3e=e=>e==null?null:e.toString().toLowerCase(),d3e=class extends gie{constructor(){super(Sie,AV),this.filterType="text",this.FilterModelFormatterClass=Die}updateParams(e){super.updateParams(e);let t=e.filterParams;this.matcher=t.textMatcher??a3e,this.formatter=t.textFormatter??(t.caseSensitive?l3e:c3e)}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,n,i){let o=e.map(f=>this.formatter(f))||[],r=this.formatter(t),{api:s,colDef:a,column:l,context:c,filterParams:{textFormatter:u}}=this.params;if(n.type==="blank")return vI(t);if(n.type==="notBlank")return!vI(t);let h={api:s,colDef:a,column:l,context:c,node:i.node,data:i.data,filterOption:n.type,value:r,textFormatter:u};return o.some(f=>this.matcher(x(g({},h),{filterText:f})))}processModelToApply(e){if(e&&this.params.filterParams.trimInput){let t=n=>{let i=g({},n),{filter:o,filterTo:r}=n;return o&&(i.filter=H4(o)??null),r&&(i.filterTo=H4(r)??null),i};return vne(e)?x(g({},e),{conditions:e.conditions.map(t)}):t(e)}return e}},u3e=class extends Eie{constructor(){super(...arguments),this.FilterModelFormatterClass=Die,this.filterType="text",this.defaultOptions=AV}createFloatingFilterInputService(){return this.createManagedBean(new xie)}};function h3e(e){return!!e.quickFilter?.isFilterPresent()}function p3e(e){return e.quickFilter?.getText()}function f3e(e){e.quickFilter?.resetCache()}var m3e=class extends te{constructor(){super(...arguments),this.beanName="quickFilter",this.quickFilter=null,this.quickFilterParts=null}postConstruct(){let e=this.resetCache.bind(this),t=this.gos;this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{t.get("includeHiddenColumnsInQuickFilter")||this.resetCache()}}),this.addManagedPropertyListener("quickFilterText",n=>this.setFilter(n.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onColumnConfigChanged()),this.quickFilter=this.parseFilter(t.get("quickFilterText")),this.parser=t.get("quickFilterParser"),this.matcher=t.get("quickFilterMatcher"),this.setFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setParserAndMatcher())}refreshCols(){let{autoColSvc:e,colModel:t,gos:n,pivotResultCols:i}=this.beans,o=t.isPivotMode(),r=e?.getColumns(),s=t.getColDefCols(),a=(o&&!n.get("applyQuickFilterBeforePivotOrAgg")?i?.getPivotResultCols()?.list:s)??[];r&&(a=a.concat(r)),this.colsToUse=n.get("includeHiddenColumnsInQuickFilter")?a:a.filter(l=>l.isVisible()||l.isRowGroupActive())}isFilterPresent(){return this.quickFilter!==null}doesRowPass(e){let t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassMatcher(t,e):this.quickFilterParts.every(n=>t?this.doesRowPassCache(e,n):this.doesRowPassNoCache(e,n))}resetCache(){this.beans.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}getText(){return this.gos.get("quickFilterText")}setFilterParts(){let{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseFilter(e){return Se(e)?e.toUpperCase():null}setFilter(e){if(e!=null&&typeof e!="string"){ce(70,{newFilter:e});return}let t=this.parseFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setParserAndMatcher(){let e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),n=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,n&&(this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onColumnConfigChanged(){this.refreshCols(),this.resetCache(),this.isFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassNoCache(e,t){return this.colsToUse.some(n=>{let i=this.getTextForColumn(n,e);return Se(i)&&i.includes(t)})}doesRowPassCache(e,t){return this.checkGenerateAggText(e),e.quickFilterAggregateText.includes(t)}doesRowPassMatcher(e,t){let n;e?(this.checkGenerateAggText(t),n=t.quickFilterAggregateText):n=this.getAggText(t);let{quickFilterParts:i,matcher:o}=this;return o(i,n)}checkGenerateAggText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getAggText(e))}getTextForColumn(e,t){let n=this.beans.filterValueSvc.getValue(e,t),i=e.getColDef();if(i.getQuickFilterText){let o=at(this.gos,{value:n,node:t,data:t.data,column:e,colDef:i});n=i.getQuickFilterText(o)}return Se(n)?n.toString().toUpperCase():null}getAggText(e){let t=[];for(let n of this.colsToUse){let i=this.getTextForColumn(n,e);Se(i)&&t.push(i)}return t.join(`
`)}},g3e={moduleName:"ClientSideRowModelFilter",version:we,rowModels:["clientSide"],beans:[vNe]},OV={moduleName:"FilterCore",version:we,beans:[zNe],apiFunctions:{isAnyFilterPresent:NNe,onFilterChanged:BNe},css:[xNe],dependsOn:[g3e]},kie={moduleName:"FilterValue",version:we,beans:[HNe]},MI={moduleName:"ColumnFilter",version:we,beans:[LNe,VNe],dynamicBeans:{headerFilterCellCtrl:_Ne},icons:{filter:"filter",filterActive:"filter"},apiFunctions:{isColumnFilterPresent:SNe,getColumnFilterInstance:ENe,destroyFilter:DNe,setFilterModel:kNe,getFilterModel:INe,getColumnFilterModel:MNe,setColumnFilterModel:RNe,showColumnFilter:TNe,hideColumnFilter:PNe,getColumnFilterHandler:ANe,doFilterAction:ONe},dependsOn:[OV,II,kie,CNe]},v3e={moduleName:"CustomFilter",version:we,userComponents:{agReadOnlyFloatingFilter:jNe},dependsOn:[MI]},_3e={moduleName:"TextFilter",version:we,dependsOn:[MI],userComponents:{agTextColumnFilter:{classImp:s3e,params:{useForm:!0}},agTextColumnFloatingFilter:u3e},dynamicBeans:{agTextColumnFilterHandler:d3e}},y3e={moduleName:"NumberFilter",version:we,dependsOn:[MI],userComponents:{agNumberColumnFilter:{classImp:t3e,params:{useForm:!0}},agNumberColumnFloatingFilter:r3e},dynamicBeans:{agNumberColumnFilterHandler:n3e}},b3e={moduleName:"DateFilter",version:we,dependsOn:[MI],userComponents:{agDateColumnFilter:{classImp:qNe,params:{useForm:!0}},agDateInput:e3e,agDateColumnFloatingFilter:JNe},dynamicBeans:{agDateColumnFilterHandler:YNe}},C3e={moduleName:"QuickFilterCore",version:we,rowModels:["clientSide"],beans:[m3e],dependsOn:[OV,kie]},w3e={moduleName:"QuickFilter",version:we,apiFunctions:{isQuickFilterPresent:h3e,getQuickFilter:p3e,resetQuickFilter:f3e},dependsOn:[C3e]},x3e={moduleName:"ExternalFilter",version:we,dependsOn:[OV]},S3e=".ag-tooltip{background-color:var(--ag-tooltip-background-color);border:var(--ag-tooltip-border);border-radius:var(--ag-border-radius);color:var(--ag-tooltip-text-color);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;white-space:normal;z-index:99999;&:where(.ag-cell-editor-tooltip){background-color:var(--ag-tooltip-error-background-color);border:var(--ag-tooltip-error-border);color:var(--ag-tooltip-error-text-color);font-weight:500}}.ag-tooltip-custom{position:absolute;z-index:99999}.ag-tooltip-custom:where(:not(.ag-tooltip-interactive)),.ag-tooltip:where(:not(.ag-tooltip-interactive)){pointer-events:none}.ag-tooltip-animate{transition:opacity 1s;&:where(.ag-tooltip-hiding){opacity:0}}",s4=(e,t,n)=>{let{editModelSvc:i}=e,o=i?.getCellValidationModel()?.getCellValidation(t)?.errorMessages,r=i?.getRowValidationModel().getRowValidation(t)?.errorMessages,s=o||r;return s?.length?s.join(n("tooltipValidationErrorSeparator",". ")):void 0},E3e=class extends te{constructor(){super(...arguments),this.beanName="tooltipSvc"}setupHeaderTooltip(e,t,n,i){e&&t.destroyBean(e);let o=this.gos,r=r4(o),{column:s,eGui:a}=t,l=s.getColDef();!i&&r&&!l.headerComponent&&(i=Bk(()=>a.querySelector(".ag-header-cell-text")));let c="header",h=this.beans.colNames.getDisplayNameForColumn(s,"header",!0),f=n??h,m={getGui:()=>a,getLocation:()=>c,getTooltipValue:()=>n??l?.headerTooltipValueGetter?.(at(o,{location:c,colDef:l,column:s,value:f,valueFormatted:h}))??l?.headerTooltip,shouldDisplayTooltip:i,getAdditionalParams:()=>({column:s,colDef:s.getColDef()})},_=this.createTooltipFeature(m);return _&&(_=t.createBean(_),t.setRefreshFunction("tooltip",()=>_.refreshTooltip())),_}setupHeaderGroupTooltip(e,t,n,i){e&&t.destroyBean(e);let o=this.gos,r=r4(o),{column:s,eGui:a}=t,l=s.getColGroupDef();!i&&r&&!l?.headerGroupComponent&&(i=Bk(()=>a.querySelector(".ag-header-group-text")));let c="headerGroup",h=this.beans.colNames.getDisplayNameForColumnGroup(s,"header"),f=n??h,m={getGui:()=>a,getLocation:()=>c,getTooltipValue:()=>n??l?.headerTooltipValueGetter?.(at(o,{location:c,colDef:l,column:s,value:f,valueFormatted:h}))??l?.headerTooltip,shouldDisplayTooltip:i,getAdditionalParams:()=>{let y={column:s};return l&&(y.colDef=l),y}},_=this.createTooltipFeature(m);return _&&t.createBean(_)}enableCellTooltipFeature(e,t,n){let{beans:i}=this,{gos:o,editSvc:r}=i,{column:s,rowNode:a}=e,l="cell",c=()=>{let m=!!!r?.isEditing(e)&&s4(i,e,this.getLocaleTextFunc());if(m)return l="cellEditor",m;l="cell";let _=s.getColDef(),y=a.data;if(_.tooltipField&&Se(y))return nw(y,_.tooltipField,s.isTooltipFieldContainsDots());let w=_.tooltipValueGetter;return w?w(at(o,{location:"cell",colDef:s.getColDef(),column:s,rowIndex:e.cellPosition.rowIndex,node:a,data:a.data,value:e.value,valueFormatted:e.valueFormatted})):null},u=r4(o);n||(u&&!e.isCellRenderer()?n=()=>{let f=!!r?.isEditing(e);if(!f&&s4(i,e,this.getLocaleTextFunc()))return!0;if(!s.isTooltipEnabled())return!1;let y=Bk(()=>{let w=e.eGui;return w.children.length===0?w:w.querySelector(".ag-cell-value")});return!f&&y()}:n=()=>!r?.isEditing(e));let h={getGui:()=>e.eGui,getLocation:()=>l,getTooltipValue:t!=null?()=>t:c,shouldDisplayTooltip:n,getAdditionalParams:()=>({column:s,colDef:s.getColDef(),rowIndex:e.cellPosition.rowIndex,node:a,data:a.data,valueFormatted:e.valueFormatted})};return this.createTooltipFeature(h,i)}setupFullWidthRowTooltip(e,t,n,i){let o={getGui:()=>t.getFullWidthElement(),getTooltipValue:()=>n,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:i},r=this.beans,s=r.context;e&&t.destroyBean(e,s);let a=this.createTooltipFeature(o,r);if(a)return t.createBean(a,s)}setupCellEditorTooltip(e,t){let{beans:n}=this,{context:i}=n,o=t.getValidationElement?.(!0)||!t.isPopup?.()&&e.eGui;if(!o)return;let r={getGui:()=>o,getTooltipValue:()=>s4(n,e,this.getLocaleTextFunc()),getLocation:()=>"cellEditor",shouldDisplayTooltip:()=>{let{editModelSvc:a}=n,l=a?.getRowValidationModel()?.getRowValidationMap(),c=a?.getCellValidationModel()?.getCellValidationMap(),u=!!l&&l.size>0,h=!!c&&c.size>0;return u||h}},s=this.createTooltipFeature(r,n);if(s)return e.createBean(s,i)}initCol(e){let{colDef:t}=e;e.tooltipEnabled=Se(t.tooltipField)||Se(t.tooltipValueGetter)||Se(t.tooltipComponent)}createTooltipFeature(e,t){return this.beans.registry.createDynamicBean("tooltipFeature",!1,e,t)}},D3e=class extends XMe{createTooltipComp(e,t){UIe(this.beans.userCompFactory,e)?.newAgStackInstance().then(t)}setEventHandlers(e){[this.onColumnMovedEventCallback]=this.addManagedEventListeners({columnMoved:e})}clearEventHandlers(){this.onColumnMovedEventCallback?.(),this.onColumnMovedEventCallback=void 0}},Iie={moduleName:"Tooltip",version:we,beans:[E3e],dynamicBeans:{tooltipFeature:ane,highlightTooltipFeature:eRe,tooltipStateManager:D3e},userComponents:{agTooltipComponent:iRe},dependsOn:[II],css:[S3e]},kg=class{constructor(e){this.cellValueChanges=e}},a4=class extends kg{constructor(e,t,n,i){super(e),this.initialRange=t,this.finalRange=n,this.ranges=i}},k3e=10,Aee=class{constructor(e){this.actionStack=[],this.maxStackSize=e||k3e,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},I3e=class extends te{constructor(){super(...arguments),this.beanName="undoRedo",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.batchEditing=!1,this.bulkEditing=!1,this.onCellValueChanged=e=>{let t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},n=this.activeCellEdit!==null&&Nne(this.activeCellEdit,t),i=this.activeRowEdit!==null&&XPe(this.activeRowEdit,t);if(!(n||i||this.isPasting||this.isRangeInAction))return;let{rowPinned:r,rowIndex:s,column:a,oldValue:l,value:c}=e,u={rowPinned:r,rowIndex:s,columnId:a.getColId(),newValue:c,oldValue:l};this.cellValueChanges.push(u)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}postConstruct(){let{gos:e,ctrlsSvc:t}=this.beans;if(!e.get("undoRedoCellEditing"))return;let n=e.get("undoRedoCellEditingLimit");if(n<=0)return;this.undoStack=new Aee(n),this.redoStack=new Aee(n),this.addListeners();let i=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:o=>{o.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:i,newColumnsLoaded:i,columnGroupOpened:i,columnRowGroupChanged:i,columnMoved:i,columnPinned:i,columnVisible:i,rowDragEnd:i}),t.whenReady(this,o=>{this.gridBodyCtrl=o.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?.getCurrentStackSize()??0}getCurrentRedoStackSize(){return this.redoStack?.getCurrentStackSize()??0}undo(e){let{eventSvc:t,undoStack:n,redoStack:i}=this;t.dispatchEvent({type:"undoStarted",source:e});let o=this.undoRedo(n,i,"initialRange","oldValue","undo");t.dispatchEvent({type:"undoEnded",source:e,operationPerformed:o})}redo(e){let{eventSvc:t,undoStack:n,redoStack:i}=this;t.dispatchEvent({type:"redoStarted",source:e});let o=this.undoRedo(i,n,"finalRange","newValue","redo");t.dispatchEvent({type:"redoEnded",source:e,operationPerformed:o})}undoRedo(e,t,n,i,o){if(!e)return!1;let r=e.pop();return r?.cellValueChanges?(this.processAction(r,s=>s[i],o),r instanceof a4?this.processRange(r.ranges||[r[n]]):this.processCell(r.cellValueChanges),t.push(r),!0):!1}processAction(e,t,n){for(let i of e.cellValueChanges){let{rowIndex:o,rowPinned:r,columnId:s}=i,a={rowIndex:o,rowPinned:r},l=Jc(this.beans,a);l.displayed&&l.setDataValue(s,t(i),n)}}processRange(e){let t,n=this.beans.rangeSvc;n.removeAllCellRanges(!0),e.forEach((i,o)=>{if(!i)return;let r=i.startRow,s=i.endRow;o===e.length-1&&(t={rowPinned:r.rowPinned,rowIndex:r.rowIndex,columnId:i.startColumn.getColId()},this.setLastFocusedCell(t));let a={rowStartIndex:r.rowIndex,rowStartPinned:r.rowPinned,rowEndIndex:s.rowIndex,rowEndPinned:s.rowPinned,columnStart:i.startColumn,columns:i.columns};n.addCellRange(a)})}processCell(e){let t=e[0],{rowIndex:n,rowPinned:i}=t,o={rowIndex:n,rowPinned:i},r=Jc(this.beans,o),s={rowPinned:t.rowPinned,rowIndex:r.rowIndex,columnId:t.columnId};this.setLastFocusedCell(s)}setLastFocusedCell(e){let{rowIndex:t,columnId:n,rowPinned:i}=e,{colModel:o,focusSvc:r,rangeSvc:s}=this.beans,a=o.getCol(n);if(!a)return;let{scrollFeature:l}=this.gridBodyCtrl;l.ensureIndexVisible(t),l.ensureColumnVisible(a);let c={rowIndex:t,column:a,rowPinned:i};r.setFocusedCell(x(g({},c),{forceBrowserFocus:!0})),s?.setRangeToCell(c)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{let e=new kg(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){let n=new kg(this.cellValueChanges);this.pushActionsToUndoStack(n)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{let e=new kg(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{let t=new a4(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e,{rangeSvc:t,gos:n}=this.beans;t&&Qc(n)?e=new a4(this.cellValueChanges,void 0,void 0,[...t.getCellRanges()]):e=new kg(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1},batchEditingStarted:()=>this.startBigChange("batchEditing"),batchEditingStopped:({changes:e})=>this.stopBigChange("batchEditing",e),bulkEditingStarted:()=>this.startBigChange("bulkEditing"),bulkEditingStopped:({changes:e})=>this.stopBigChange("bulkEditing",e)})}startBigChange(e){this.updateBigChange(e,!0)}updateBigChange(e,t){e==="bulkEditing"?this.bulkEditing=t:this.batchEditing=t}stopBigChange(e,t){if(e==="bulkEditing"&&!this.bulkEditing||e==="batchEditing"&&!this.batchEditing||(this.updateBigChange(e,!1),t?.length===0))return;let n=new kg(t??[]);this.pushActionsToUndoStack(n),this.cellValueChanges=[]}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}},M3e=".ag-cell-inline-editing{border:var(--ag-cell-editing-border)!important;border-radius:var(--ag-border-radius);box-shadow:var(--ag-cell-editing-shadow);padding:0;z-index:1;.ag-cell-edit-wrapper,.ag-cell-editor,.ag-cell-wrapper,:where(.ag-cell-editor) .ag-input-field-input,:where(.ag-cell-editor) .ag-wrapper{height:100%;line-height:normal;min-height:100%;width:100%}&.ag-cell-editing-error{border-color:var(--ag-invalid-color)!important}}:where(.ag-popup-editor) .ag-large-text{background-color:var(--ag-background-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);padding:0}.ag-large-text-input{display:block;height:auto;padding:var(--ag-cell-horizontal-padding)}:where(.ag-rtl .ag-large-text-input) textarea{resize:none}:where(.ag-ltr) .ag-checkbox-edit{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-checkbox-edit{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-row.ag-row-editing-invalid .ag-cell-inline-editing){opacity:.8}.ag-popup-editor{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}",R3e={tag:"div",cls:"ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit",children:[{tag:"ag-checkbox",ref:"eEditor",role:"presentation"}]},T3e=class extends DI{constructor(){super(R3e,[oV]),this.eEditor=Ce}initialiseEditor(e){let t=e.value??void 0,n=this.eEditor;n.setValue(t),n.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(n,{fieldValueChanged:o=>this.setAriaLabel(o.selected)})}getValue(){return this.eEditor.getValue()}focusIn(){this.eEditor.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){let t=this.getLocaleTextFunc(),n=yI(t,e),i=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eEditor.setInputAriaLabel(`${i} (${n})`)}getValidationElement(e){return e?this.params.eGridCell:this.eEditor.getInputElement()}getValidationErrors(){let{params:e}=this,{getValidationErrors:t}=e,n=this.getValue();return t?t({value:n,internalErrors:null,cellEditorParams:e}):null}},RI=class extends DI{constructor(e){super(),this.cellEditorInput=e,this.eEditor=Ce}initialiseEditor(e){let{cellEditorInput:t}=this;this.setTemplate({tag:"div",cls:"ag-cell-edit-wrapper",children:[t.getTemplate()]},t.getAgComponents());let{eEditor:n}=this,{cellStartedEdit:i,eventKey:o,suppressPreventDefault:r}=e;n.getInputElement().setAttribute("title",""),t.init(n,e);let s,a=!0;i?(this.focusAfterAttached=!0,o===W.BACKSPACE||o===W.DELETE?s="":o&&o.length===1?r?a=!1:s=o:(s=t.getStartValue(),o!==W.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,s=t.getStartValue()),a&&s!=null&&n.setStartValue(s),this.addGuiEventListener("keydown",l=>{let{key:c}=l;(c===W.PAGE_UP||c===W.PAGE_DOWN)&&l.preventDefault()})}afterGuiAttached(){let e=this.getLocaleTextFunc(),t=this.eEditor;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;bu()||t.getFocusableElement().focus();let n=t.getInputElement();this.highlightAllOnFocus?n.select():this.cellEditorInput.setCaret?.()}focusIn(){let{eEditor:e}=this,t=e.getFocusableElement(),n=e.getInputElement();t.focus(),n.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){return this.cellEditorInput.getValidationErrors()}},P3e={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},A3e=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return P3e}getAgComponents(){return[Jte]}init(e,t){this.eEditor=e,this.params=t;let{min:n,max:i,step:o,colDef:r}=t;n!=null&&e.setMin(n),i!=null&&e.setMax(i),o!=null&&e.setStep(o),this.includeTime=t.includeTime??this.getDataTypeService()?.getDateIncludesTimeFlag?.(r.cellDataType),this.includeTime!=null&&e.setIncludeTime(this.includeTime)}getValidationErrors(){let t=this.eEditor.getInputElement().valueAsDate,{params:n}=this,{min:i,max:o,getValidationErrors:r}=n,s=[],a=this.getLocaleTextFunc();if(t instanceof Date&&!isNaN(t.getTime())){if(i){let l=i instanceof Date?i:new Date(i);if(t<l){let c=l.toLocaleDateString();s.push(a("minDateValidation",`Date must be after ${c}`,[c]))}}if(o){let l=o instanceof Date?o:new Date(o);if(t>l){let c=l.toLocaleDateString();s.push(a("maxDateValidation",`Date must be before ${c}`,[c]))}}}return s.length||(s=null),r?r({value:t,cellEditorParams:n,internalErrors:s}):s}getValue(){let{eEditor:e,params:t}=this,n=e.getDate();return!Se(n)&&!Se(t.value)?t.value:n??null}getStartValue(){let{value:e}=this.params;if(e instanceof Date)return Es(e,this.includeTime??!1)}},O3e=class extends RI{constructor(){super(new A3e(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}},F3e={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},L3e=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return F3e}getAgComponents(){return[Jte]}init(e,t){this.eEditor=e,this.params=t;let{min:n,max:i,step:o,colDef:r}=t;n!=null&&e.setMin(n),i!=null&&e.setMax(i),o!=null&&e.setStep(o),this.includeTime=t.includeTime??this.getDataTypeService()?.getDateIncludesTimeFlag?.(r.cellDataType),this.includeTime!=null&&e.setIncludeTime(this.includeTime)}getValidationErrors(){let{eEditor:e,params:t}=this,n=e.getInputElement().value,i=this.formatDate(this.parseDate(n??void 0)),{min:o,max:r,getValidationErrors:s}=t,a=[];if(i){let l=new Date(i),c=this.getLocaleTextFunc();if(o){let u=new Date(o);if(l<u){let h=u.toLocaleDateString();a.push(c("minDateValidation",`Date must be after ${h}`,[h]))}}if(r){let u=new Date(r);if(l>u){let h=u.toLocaleDateString();a.push(c("maxDateValidation",`Date must be before ${h}`,[h]))}}}return a.length||(a=null),s?s({value:this.getValue(),cellEditorParams:t,internalErrors:a}):a}getValue(){let{params:e,eEditor:t}=this,n=this.formatDate(t.getDate());return!Se(n)&&!Se(e.value)?e.value:e.parseValue(n??"")}getStartValue(){return Es(this.parseDate(this.params.value??void 0)??null,this.includeTime??!1)}parseDate(e){let t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):Kr(e)??void 0}formatDate(e){let t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):Es(e??null,this.includeTime??!1)??void 0}},N3e=class extends RI{constructor(){super(new L3e(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}},B3e={tag:"div",cls:"ag-large-text",children:[{tag:"ag-input-text-area",ref:"eEditor",cls:"ag-large-text-input"}]},z3e=class extends DI{constructor(){super(B3e,[cMe]),this.eEditor=Ce}initialiseEditor(e){let{eEditor:t}=this,{cellStartedEdit:n,eventKey:i,maxLength:o,cols:r,rows:s}=e;this.focusAfterAttached=n,t.getInputElement().setAttribute("title",""),t.setMaxLength(o||200).setCols(r||60).setRows(s||10);let a;n?(this.focusAfterAttached=!0,i===W.BACKSPACE||i===W.DELETE?a="":i&&i.length===1?a=i:(a=this.getStartValue(e),i!==W.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,a=this.getStartValue(e)),a!=null&&t.setValue(a,!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}getStartValue(e){let{value:t}=e;return t?.toString()??t}onKeyDown(e){let t=e.key;(t===W.LEFT||t===W.UP||t===W.RIGHT||t===W.DOWN||e.shiftKey&&t===W.ENTER)&&e.stopPropagation()}afterGuiAttached(){let{eEditor:e,focusAfterAttached:t,highlightAllOnFocus:n}=this,i=this.getLocaleTextFunc();e.setInputAriaLabel(i("ariaInputEditor","Input Editor")),t&&(e.getFocusableElement().focus(),n&&e.getInputElement().select())}getValue(){let{eEditor:e,params:t}=this,{value:n}=t,i=e.getValue();return!Se(i)&&!Se(n)?n:t.parseValue(i)}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){let{params:e}=this,{maxLength:t,getValidationErrors:n}=e,i=this.getLocaleTextFunc(),o=this.getValue(),r=[];return typeof o=="string"&&t!=null&&o.length>t&&r.push(i("maxLengthValidation",`Must be ${t} characters or fewer.`,[String(t)])),r.length||(r=null),n?n({value:o,internalErrors:r,cellEditorParams:e}):r}},V3e={tag:"ag-input-number-field",ref:"eEditor",cls:"ag-cell-editor"},H3e=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return V3e}getAgComponents(){return[dMe]}init(e,t){this.eEditor=e,this.params=t;let{max:n,min:i,precision:o,step:r}=t;n!=null&&e.setMax(n),i!=null&&e.setMin(i),o!=null&&e.setPrecision(o),r!=null&&e.setStep(r);let s=e.getInputElement();t.preventStepping?e.addManagedElementListeners(s,{keydown:this.preventStepping}):t.showStepperButtons&&s.classList.add("ag-number-field-input-stepper")}getValidationErrors(){let{params:e}=this,{min:t,max:n,getValidationErrors:i}=e,r=this.eEditor.getInputElement().valueAsNumber,s=this.getLocaleTextFunc(),a=[];return typeof r=="number"&&(t!=null&&r<t&&a.push(s("minValueValidation",`Must be greater than or equal to ${t}.`,[String(t)])),n!=null&&r>n&&a.push(s("maxValueValidation",`Must be less than or equal to ${n}.`,[String(n)]))),a.length||(a=null),i?i({value:r,cellEditorParams:e,internalErrors:a}):a}preventStepping(e){(e.key===W.UP||e.key===W.DOWN)&&e.preventDefault()}getValue(){let{eEditor:e,params:t}=this,n=e.getValue();if(!Se(n)&&!Se(t.value))return t.value;let i=t.parseValue(n);if(i==null)return i;if(typeof i=="string"){if(i==="")return null;i=Number(i)}return isNaN(i)?null:i}getStartValue(){return this.params.value}setCaret(){bu()&&this.eEditor.getInputElement().focus({preventScroll:!0})}},$3e=class extends RI{constructor(){super(new H3e(()=>this.getLocaleTextFunc()))}},j3e={tag:"div",cls:"ag-cell-edit-wrapper",children:[{tag:"ag-select",ref:"eEditor",cls:"ag-cell-editor"}]},G3e=class extends DI{constructor(){super(j3e,[CMe]),this.eEditor=Ce,this.startedByEnter=!1}wireBeans(e){this.valueSvc=e.valueSvc}initialiseEditor(e){this.focusAfterAttached=e.cellStartedEdit;let{eEditor:t,valueSvc:n,gos:i}=this,{values:o,value:r,eventKey:s}=e;if(di(o)){ce(58);return}this.startedByEnter=s!=null?s===W.ENTER:!1;let a=!1;o.forEach(h=>{let f={value:h},m=n.formatValue(e.column,null,h),_=m!=null;f.text=_?m:h,t.addOption(f),a=a||r===h}),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);let{valueListGap:l,valueListMaxWidth:c,valueListMaxHeight:u}=e;l!=null&&t.setPickerGap(l),u!=null&&t.setPickerMaxHeight(u),c!=null&&t.setPickerMaxWidth(c),i.get("editType")!=="fullRow"&&this.addManagedListeners(this.eEditor,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eEditor.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eEditor.showPicker()})}focusIn(){this.eEditor.getFocusableElement().focus()}getValue(){return this.eEditor.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getAriaElement()}getValidationErrors(){let{params:e}=this,{values:t,getValidationErrors:n}=e,i=this.getValue(),o=[];if(t&&!t.includes(i)){let r=this.getLocaleTextFunc();o.push(r("invalidSelectionValidation","Invalid selection."))}else o=null;return n?n({value:i,internalErrors:o,cellEditorParams:e}):o}},U3e={tag:"ag-input-text-field",ref:"eEditor",cls:"ag-cell-editor"},W3e=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return U3e}getAgComponents(){return[wI]}init(e,t){this.eEditor=e,this.params=t;let n=t.maxLength;n!=null&&e.setMaxLength(n)}getValidationErrors(){let{params:e}=this,{maxLength:t,getValidationErrors:n}=e,i=this.getValue(),o=this.getLocaleTextFunc(),r=[];return t!=null&&typeof i=="string"&&i.length>t&&r.push(o("maxLengthValidation",`Must be ${t} characters or fewer.`,[String(t)])),r.length||(r=null),n?n({value:i,cellEditorParams:e,internalErrors:r}):r}getValue(){let{eEditor:e,params:t}=this,n=e.getValue();return!Se(n)&&!Se(t.value)?t.value:t.parseValue(n)}getStartValue(){let e=this.params;return e.useFormatter||e.column.getColDef().refData?e.formatValue(e.value):e.value}setCaret(){bu()&&this.eEditor.getInputElement().focus({preventScroll:!0});let e=this.eEditor,t=e.getValue(),n=Se(t)&&t.length||0;n&&e.getInputElement().setSelectionRange(n,n)}},Oee=class extends RI{constructor(){super(new W3e(()=>this.getLocaleTextFunc()))}};function q3e(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}function K3e(e){return e.ctrlsSvc.getScrollFeature().getHScrollPosition()}function Mie(e,t,n="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureColumnVisible(t,n),"ensureVisible")}function Rie(e,t,n){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureIndexVisible(t,n),"ensureVisible")}function Z3e(e,t,n=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureNodeVisible(t,n),"ensureVisible")}function Y3e(e){e.undoRedo?.undo("api")}function Q3e(e){e.undoRedo?.redo("api")}function J3e(e,t){return e.editModelSvc?.getEditRowDataValue(t,{checkSiblings:!0})}function X3e(e){let t=e.editModelSvc?.getEditMap(),n=[];return t?.forEach((i,o)=>{let{rowIndex:r,rowPinned:s}=o;i.forEach((a,l)=>{let{editorValue:c,pendingValue:u,sourceValue:h,state:f}=a,m=Wc(a),_=c??u;_===ea&&(_=void 0);let y={newValue:_,oldValue:h,state:f,column:l,colId:l.getColId(),colKey:l.getColId(),rowIndex:r,rowPinned:s};(f==="editing"||f==="changed"&&m)&&n.push(y)})}),n}function eBe(e,t=!1){let{editSvc:n}=e;if(n?.isBatchEditing()){if(t)for(let i of e.editModelSvc?.getEditPositions()??[])i.state==="editing"&&n.revertSingleCellEdit(i);else pp(e,{persist:!0});Hg(e,void 0,{cancel:t})}else n?.stopEditing(void 0,{cancel:t,source:"edit",forceStop:!t,forceCancel:t})}function tBe(e,t){let n=gi(e,t);return e.editSvc?.isEditing(n)??!1}function nBe(e,t){let{key:n,colKey:i,rowIndex:o,rowPinned:r}=t,{editSvc:s,colModel:a}=e,l=a.getCol(i);if(!l){ce(12,{colKey:i});return}let u=Jc(e,{rowIndex:o,rowPinned:r||null,column:l});if(!u){ce(290,{rowIndex:o,rowPinned:r});return}if(!l.isCellEditable(u))return;r==null&&Rie(e,o),Mie(e,i),s?.startEditing({rowNode:u,column:l},{event:n?new KeyboardEvent("keydown",{key:n}):void 0,source:"api"})}function iBe(e){return e.editSvc?.validateEdit()||null}function oBe(e){return e.undoRedo?.getCurrentUndoStackSize()??0}function rBe(e){return e.undoRedo?.getCurrentRedoStackSize()??0}var sBe={tag:"div",cls:"ag-popup-editor",attrs:{tabindex:"-1"}},aBe=class extends tV{constructor(e){super(sBe),this.params=e}postConstruct(){Cp(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){let e=this.getGui(),t=this.params,n=i=>{I4(this.gos,i,t.node,t.column,!0)||t.onKeyDown(i)};this.addManagedElementListeners(e,{keydown:n})}};function lBe(e,{column:t},n,i,o="ui"){if(n instanceof KeyboardEvent&&(n.key===W.TAB||n.key===W.ENTER||n.key===W.F2||n.key===W.BACKSPACE&&i))return!0;if(n?.shiftKey&&e.rangeSvc?.getCellRanges().length!=0)return!1;let s=t?.getColDef(),a=cBe(e.gos,s),l=n?.type;return l==="click"&&n?.detail===1&&a===1||l==="dblclick"&&n?.detail===2&&a===2?!0:o==="api"?i??!1:!1}function cBe(e,t){return e.get("suppressClickEdit")===!0?0:e.get("singleClickEdit")===!0||t?.singleClickEdit?1:2}function $4(e,{rowNode:t,column:n},i="ui"){let o=n.getColDef().editable,r=e.editModelSvc;return n.isColumnFunc(t,o)||!!r&&r.hasEdits({rowNode:t,column:n},{withOpenEditor:!0})}function dBe(e,t,n="ui"){let i=$4(e,t,n);return i===!0||n==="ui"?i:e.colModel.getCols().some(r=>$4(e,{rowNode:t.rowNode,column:r},n))}var _I=(e,t=!1)=>{if(e!==void 0)return Wc(e)||t&&e.state==="editing"};function Tie(e,t,n=!1){return _I(e.editModelSvc?.getEdit(t),n)}var Pie=(e,t,n)=>{if(e)for(let i=0,o=e.length;i<o;++i){let r=e[i];if(r.data&&(_I(t?.getEdit({rowNode:r,column:n}))||_I(t?.getEdit({rowNode:r.pinnedSibling,column:n})))||Pie(r.childrenAfterGroup,t,n))return!0}};function Aie(e,t){let{column:n,rowNode:i}=t;return e.gos.get("groupTotalRow")&&!i?.footer?!1:Pie(i?.childrenAfterGroup,e.editModelSvc,n)}function Oie(e,{rowNode:t,column:n}){if(t=t.pinnedSibling,!!t)return _I(e.editModelSvc?.getEdit({rowNode:t,column:n}))}var uBe=class extends te{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}setComp(e){this.cellComp=e,this.applyCellStyles()}applyCellStyles(){let{cellCtrl:e,editSvc:t,beans:n}=this;if(t?.isBatchEditing()&&t.isEditing()){let o=Tie(n,e)||Aie(n,e)||Oie(n,e);this.applyBatchingStyle(o)}else this.applyBatchingStyle(!1);let i=!!this.editModelSvc?.getCellValidationModel().hasCellValidation(this.cellCtrl);this.cellComp.toggleCss("ag-cell-editing-error",i)}applyBatchingStyle(e){this.cellComp.toggleCss("ag-cell-editing",e??!1),this.cellComp.toggleCss("ag-cell-batch-edit",(e&&this.editSvc?.isBatchEditing())??!1)}},hBe=class extends te{constructor(e,t){super(),this.rowCtrl=e,this.beans=t,this.gos=t.gos,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}applyRowStyles(){let{rowCtrl:e,editModelSvc:t,beans:n}=this,i=e.rowNode,o=t?.getEditRow(i),r=this.editModelSvc?.getRowValidationModel().hasRowValidation({rowNode:i});if(!o&&i.pinnedSibling&&(i=i.pinnedSibling,o=t?.getEditRow(i)),o){let s=Array.from(o.keys()).some(a=>{let l={rowNode:i,column:a};return Tie(n,l,!0)||Aie(n,l)||Oie(n,l)});this.applyStyle(r,s);return}this.applyStyle(r)}applyStyle(e=!1,t=!1){let n=this.editSvc?.isBatchEditing()??!1,i=this.gos.get("editType")==="fullRow";this.rowCtrl?.forEachGui(void 0,({rowComp:o})=>{o.toggleCss("ag-row-editing",i&&t),o.toggleCss("ag-row-batch-edit",i&&t&&n),o.toggleCss("ag-row-inline-editing",t),o.toggleCss("ag-row-not-inline-editing",!t),o.toggleCss("ag-row-editing-invalid",i&&t&&e)})}},pBe=({rowModel:e,pinnedRowModel:t,editModelSvc:n},i)=>{let o=new Set;e.forEachNode(r=>i.has(r)&&o.add(r)),t?.forEachPinnedRow("top",r=>i.has(r)&&o.add(r)),t?.forEachPinnedRow("bottom",r=>i.has(r)&&o.add(r));for(let r of i)o.has(r)||n.removeEdits({rowNode:r});return o},fBe=({editModelSvc:e},t,n)=>{for(let i of t)e?.getEditRow(i)?.forEach((o,r)=>!n.has(r)&&e.removeEdits({rowNode:i,column:r}))},mBe=e=>()=>{let t=new Set(e.colModel.getCols()),n=e.editModelSvc.getEditMap(!0),i=new Set(n.keys());fBe(e,pBe(e,i),t)},gBe=new Set(["undo","redo","paste","bulk","rangeSvc"]),vBe=new Set(["ui","api"]),Fie={paste:"api",rangeSvc:"api",fillHandle:"api",cellClear:"api",bulk:"api"},_Be=new Set(Object.keys(Fie)),yBe=new Set(["paste","rangeSvc","renderer","cellClear","redo","undo"]),Nk={cancel:!0,source:"api"},bBe={cancel:!1,source:"api"},Eg={checkSiblings:!0},UC={force:!0,suppressFlash:!0},CBe=class extends te{constructor(){super(...arguments),this.beanName="editSvc",this.batch=!1,this.stopping=!1,this.committing=!1}postConstruct(){let{beans:e}=this;this.model=e.editModelSvc,this.valueSvc=e.valueSvc,this.rangeSvc=e.rangeSvc,this.addManagedPropertyListener("editType",({currentValue:i})=>{this.stopEditing(void 0,Nk),this.createStrategy(i)});let t=mBe(e),n=()=>{let i=this.model.getCellValidationModel().getCellValidationMap().size>0,o=this.model.getRowValidationModel().getRowValidationMap().size>0;return i||o?this.stopEditing(void 0,Nk):this.isEditing()&&(this.isBatchEditing()?Hg(e,this.model.getEditPositions()):this.stopEditing(void 0,bBe)),!1};this.addManagedEventListeners({columnPinned:t,columnVisible:t,columnRowGroupChanged:t,rowExpansionStateChanged:t,pinnedRowsChanged:t,displayedRowsChanged:t,sortChanged:n,filterChanged:n,cellFocused:this.onCellFocused.bind(this)})}isBatchEditing(){return this.batch}setBatchEditing(e){e?(this.batch=!0,this.stopEditing(void 0,Nk)):(this.stopEditing(void 0,Nk),this.batch=!1)}createStrategy(e){let{beans:t,gos:n,strategy:i}=this,o=Fee(n,e);if(i){if(i.beanName===o)return i;this.destroyStrategy()}return this.strategy=this.createOptionalManagedBean(t.registry.createDynamicBean(o,!0))}destroyStrategy(){this.strategy&&(this.strategy.destroy(),this.strategy=this.destroyBean(this.strategy))}shouldStartEditing(e,t,n,i="ui"){let o=lBe(this.beans,e,t,n,i);return o&&(this.strategy??(this.strategy=this.createStrategy())),o}shouldStopEditing(e,t,n="ui"){return this.strategy?.shouldStop(e,t,n)??null}shouldCancelEditing(e,t,n="ui"){return this.strategy?.shouldCancel(e,t,n)??null}validateEdit(){return N2e(this.beans)}isEditing(e,t){return this.model.hasEdits(e,t??Eg)}isRowEditing(e,t){return(e&&this.model.hasRowEdits(e,t))??!1}startEditing(e,t){let{startedEdit:n=!0,event:i=null,source:o="ui",ignoreEventKey:r=!1,silent:s}=t;if(this.strategy??(this.strategy=this.createStrategy()),!this.isCellEditable(e,"api"))return;let a=gi(this.beans,e);if(a&&!a.comp){a.onCompAttachedFuncs.push(()=>this.startEditing(e,t));return}let l=this.shouldStartEditing(e,i,n,o);if(l===!1&&o!=="api"){this.isEditing(e)&&this.stopEditing();return}!this.batch&&this.shouldStopEditing(e,void 0,o)&&!t.continueEditing&&this.stopEditing(void 0,{source:o}),l&&this.isBatchEditing()&&this.dispatchBatchEvent("batchEditingStarted",new Map),this.strategy.start({position:e,event:i,source:o,ignoreEventKey:r,startedEdit:n,silent:s})}stopEditing(e,t){let{event:n,cancel:i,source:o="ui",forceCancel:r,forceStop:s}=t||{},{beans:a,model:l}=this;if(_Be.has(o)&&this.isBatchEditing())return this.bulkRefresh(e),!1;let c=this.committing?Fie[o]:o;if(!(this.committing||this.isEditing(e)||this.isBatchEditing()&&l.hasEdits(e,Eg))||!this.strategy||this.stopping)return!1;this.stopping=!0;let h=gi(a,e);h&&(h.onEditorAttachedFuncs=[]);let f=l.getEditMap(!0),m=!1,_=!i&&(!!this.shouldStopEditing(e,n,c)||this.committing&&!this.batch)||(s??!1),y=i&&!!this.shouldCancelEditing(e,n,c)||(r??!1);if(_||y){pp(a,{persist:!0,isCancelling:y||i,isStopping:_});let w=l.getEditMap(),C=this.processEdits(w,i,o);this.strategy?.stop(i,n);for(let S of C)l.clearEditValue(S);this.bulkRefresh(void 0,f);for(let S of l.getEditPositions(w)){let I=gi(a,S),O=Wc(S);I?.refreshCell({force:!0,suppressFlash:!O})}f=w,m||(m=_)}else if(n instanceof KeyboardEvent&&this.batch&&this.strategy?.midBatchInputsAllowed(e)&&this.isEditing(e,{withOpenEditor:!0})){let{key:w}=n,C=w===W.ENTER,S=w===W.ESCAPE,I=w===W.TAB;(C||I||S)&&(C||I?pp(a,{persist:!0}):S&&this.revertSingleCellEdit(h),this.isBatchEditing()?this.strategy?.cleanupEditors():Hg(a,l.getEditPositions(),{event:n,cancel:S}),n.preventDefault(),this.bulkRefresh(e,f,{suppressFlash:!0}),f=l.getEditMap())}else pp(a,{persist:!0}),f=l.getEditMap();return m&&e&&this.model.removeEdits(e),this.navigateAfterEdit(t,h?.cellPosition),L4(a),this.model.hasEdits()||(this.model.getCellValidationModel().clearCellValidationMap(),this.model.getRowValidationModel().clearRowValidationMap()),this.bulkRefresh(),y&&this.beans.rowRenderer.refreshRows({rowNodes:Array.from(f.keys())}),this.isBatchEditing()&&(this.beans.rowRenderer.refreshRows({suppressFlash:!0,force:!0}),m&&_&&this.dispatchBatchEvent("batchEditingStopped",f)),this.stopping=!1,m}navigateAfterEdit(e,t){if(!e||!t)return;let{event:n,suppressNavigateAfterEdit:i}=e;if(!(n instanceof KeyboardEvent)||i)return;let{key:r,shiftKey:s}=n,a=this.gos.get("enterNavigatesVerticallyAfterEdit");if(r!==W.ENTER||!a)return;let l=s?W.UP:W.DOWN;this.beans.navigation?.navigateToNextCell(null,l,t,!1)}processEdits(e,t=!1,n){let i=Array.from(e.keys()),o=this.model.getCellValidationModel().getCellValidationMap().size>0||this.model.getRowValidationModel().getRowValidationMap().size>0,r=[];for(let s of i){let a=e.get(s);for(let l of a.keys()){let c=a.get(l),u={rowNode:s,column:l},h=Wc(c);!t&&h&&!o&&(this.setNodeDataValue(s,l,c.pendingValue,void 0,n)||r.push(u))}}return r}setNodeDataValue(e,t,n,i,o="edit"){let{beans:r}=this,s=gi(r,{rowNode:e,column:t}),a=vBe.has(o)?"edit":o;s&&(s.suppressRefreshCell=!0),this.commitNextEdit();let l=e.setDataValue(t,n,a);return s&&(s.suppressRefreshCell=!1),i&&s?.refreshCell(UC),l}setEditMap(e,t){this.strategy??(this.strategy=this.createStrategy()),this.strategy?.setEditMap(e,t),this.bulkRefresh();let n=UC;t?.forceRefreshOfEditCellsOnly&&(n=g(g({},wBe(e)),UC)),this.beans.rowRenderer.refreshCells(n)}dispatchEditValuesChanged({rowNode:e,column:t},n={}){if(!e||!t||!n)return;let{pendingValue:i,sourceValue:o}=n,{rowIndex:r,rowPinned:s,data:a}=e;this.beans.eventSvc.dispatchEvent({type:"cellEditValuesChanged",node:e,rowIndex:r,rowPinned:s,column:t,source:"api",data:a,newValue:i,oldValue:o,value:i,colDef:t.getColDef()})}bulkRefresh(e={},t,n={}){let{beans:i,gos:o}=this,{editModelSvc:r,rowModel:s}=i;$i(o,s)&&(e.rowNode&&e.column?this.refCell(e,this.model.getEdit(e),n):t&&r?.getEditMap(!1)?.forEach((a,l)=>{for(let c of a.keys())this.refCell({rowNode:l,column:c},a.get(c),n)}))}refCell({rowNode:e,column:t},n,i={}){let{beans:o,gos:r}=this,s=new Set([e]),a=new Set,l=e.pinnedSibling;l&&s.add(l);let c=e.sibling;c&&a.add(c);let u=e.parent;for(;u;)u.sibling?.footer&&r.get("groupTotalRow")||!u.parent&&u.sibling&&r.get("grandTotalRow")?a.add(u.sibling):a.add(u),u=u.parent;for(let h of s)this.dispatchEditValuesChanged({rowNode:h,column:t},n);for(let h of s)gi(o,{rowNode:h,column:t})?.refreshCell(i);for(let h of a)gi(o,{rowNode:h,column:t})?.refreshCell(i)}stopAllEditing(e=!1,t="ui"){this.isEditing()&&this.stopEditing(void 0,{cancel:e,source:t})}isCellEditable(e,t="ui"){let{rowNode:n}=e,{gos:i,beans:o}=this;if(n.group){if(i.get("treeData")){if(!n.data&&!i.get("enableGroupEdit"))return!1}else if(!i.get("enableGroupEdit"))return!1}let r=Fee(i)==="fullRow"?dBe(o,e,t):$4(o,e,t);return r&&(this.strategy??(this.strategy=this.createStrategy())),r}cellEditingInvalidCommitBlocks(){return this.gos.get("invalidEditValueMode")==="block"}checkNavWithValidation(e,t,n=!0){if(this.hasValidationErrors(e)){let i=gi(this.beans,e);return this.cellEditingInvalidCommitBlocks()?(t?.preventDefault?.(),n&&(!i?.hasBrowserFocus()&&i?.focusCell(),i?.comp?.getCellEditor()?.focusIn?.()),"block-stop"):(i&&this.revertSingleCellEdit(i),"revert-continue")}return"continue"}revertSingleCellEdit(e,t=!1){let n=gi(this.beans,e);n?.comp?.getCellEditor()&&(Hg(this.beans,[e],{silent:!0}),this.model.clearEditValue(e),Kg(this.beans,e,{silent:!0}),Sp(this.beans),n?.refreshCell(UC),t&&(n?.focusCell(),n?.comp?.getCellEditor()?.focusIn?.()))}hasValidationErrors(e){Sp(this.beans);let t=gi(this.beans,e);t&&(t.refreshCell(UC),t.rowCtrl.rowEditStyleFeature?.applyRowStyles());let n=!1;return e?.rowNode?(n||(n=this.model.getRowValidationModel().hasRowValidation({rowNode:e.rowNode})),e.column&&(n||(n=this.model.getCellValidationModel().hasCellValidation({rowNode:e.rowNode,column:e.column})))):(n||(n=this.model.getCellValidationModel().getCellValidationMap().size>0),n||(n=this.model.getRowValidationModel().getRowValidationMap().size>0)),n}moveToNextCell(e,t,n,i="ui"){let o,r=this.isEditing(),s=r&&this.checkNavWithValidation(void 0,n)==="block-stop";return e instanceof $g&&r&&(o=this.strategy?.moveToNextEditingCell(e,t,n,i,s)),o===null||(o=o||!!this.beans.focusSvc.focusedHeader,o===!1&&!s&&this.stopEditing()),o}getCellDataValue({rowNode:e,column:t},n=!0){if(!e||!t)return;let i=this.model.getEdit({rowNode:e,column:t}),o=e.pinnedSibling;if(o){let s=this.model.getEdit({rowNode:o,column:t});s&&(i=s)}let r=n?i?.editorValue??i?.pendingValue:i?.pendingValue;return r===ea||!i?i?.sourceValue??this.valueSvc.getValue(t,e,!1,"api"):r}addStopEditingWhenGridLosesFocus(e){T2e(this,this.beans,e)}createPopupEditorWrapper(e){return new aBe(e)}commitNextEdit(){this.committing=!0}setDataValue(e,t,n){try{if((!this.isEditing()||this.committing)&&!yBe.has(n))return;let{beans:i}=this;this.strategy??(this.strategy=this.createStrategy());let o=this.isBatchEditing()?"ui":this.committing?n??"api":"api";if(!n||gBe.has(n))return Zk(i,e,t,n,void 0,{persist:!0}),this.setNodeDataValue(e.rowNode,e.column,t,!0,n);let r=this.model.getEdit(e);if(r){if(r.pendingValue===t)return!1;if(r.sourceValue!==t)return Zk(i,e,t,n,void 0,{persist:!0}),this.stopEditing(e,{source:o,suppressNavigateAfterEdit:!0}),!0;if(r.sourceValue===t)return i.editModelSvc?.removeEdits(e),this.dispatchEditValuesChanged(e,x(g({},r),{pendingValue:t})),!0}return Zk(i,e,t,n,void 0,{persist:!0}),this.stopEditing(e,{source:o,suppressNavigateAfterEdit:!0}),!0}finally{this.committing=!1}}handleColDefChanged(e){O2e(this.beans,e)}destroy(){this.model.clear(),this.destroyStrategy(),super.destroy()}prepDetailsDuringBatch(e,t){if(!this.batch||!this.model.hasRowEdits(e.rowNode,Eg))return;let{rowNode:i,column:o}=e,{compDetails:r,valueToDisplay:s}=t;if(r){let{params:l}=r;return l.data=this.model.getEditRowDataValue(i,Eg),{compDetails:r}}let a=this.model.getEditRow(e.rowNode,Eg);if(s!==void 0&&a?.has(o))return{valueToDisplay:this.valueSvc.getValue(o,i)}}cleanupEditors(){this.strategy?.cleanupEditors()}dispatchCellEvent(e,t,n,i){this.strategy?.dispatchCellEvent(e,t,n,i)}dispatchBatchEvent(e,t){this.eventSvc.dispatchEvent(this.createBatchEditEvent(e,t))}createBatchEditEvent(e,t){return at(this.gos,g({type:e},e==="batchEditingStopped"?{changes:this.toEventChangeList(t)}:{}))}toEventChangeList(e){return this.model.getEditPositions(e).map(t=>({rowIndex:t.rowNode.rowIndex,rowPinned:t.rowNode.rowPinned,columnId:t.column.getColId(),newValue:t.pendingValue,oldValue:t.sourceValue}))}applyBulkEdit({rowNode:e,column:t},n){if(!n||n.length===0)return;let{beans:i,rangeSvc:o,valueSvc:r}=this;pp(i,{persist:!0});let s=this.model.getEditMap(!0),a=s.get(e)?.get(t)?.pendingValue;this.batch||this.eventSvc.dispatchEvent({type:"bulkEditingStarted"}),n.forEach(c=>{if(o?.forEachRowInRange(c,u=>{let h=Jc(i,u);if(h===void 0)return;let f=s.get(h)??new Map;for(let m of c.columns)if(m&&this.isCellEditable({rowNode:h,column:m},"api")){let _=r.getValue(m,h,!0,"api"),y=r.parseValue(m,h??null,a,_);Number.isNaN(y)&&(y=null),f.set(m,{editorValue:void 0,pendingValue:y,sourceValue:_,state:"changed",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}})}f.size>0&&s.set(h,f)}),this.setEditMap(s),this.batch){this.cleanupEditors(),L4(i),this.bulkRefresh();return}this.commitNextEdit(),this.stopEditing(void 0,{source:"bulk"}),this.eventSvc.dispatchEvent({type:"bulkEditingStopped",changes:this.toEventChangeList(s)})}),this.bulkRefresh();let l=gi(i,{rowNode:e,column:t});l&&l.focusCell(!0)}createCellStyleFeature(e,t){return new uBe(e,t)}createRowStyleFeature(e,t){return new hBe(e,t)}setEditingCells(e,t){let{beans:n}=this,{colModel:i,valueSvc:o}=n,r=new Map;for(let{colId:s,column:a,colKey:l,rowIndex:c,rowPinned:u,newValue:h,state:f}of e){let m=s?i.getCol(s):l?i.getCol(l):a;if(!m)continue;let _=Jc(n,{rowIndex:c,rowPinned:u});if(!_)continue;let y=o.getValue(m,_,!0,"api");if(!t?.forceRefreshOfEditCellsOnly&&!Wc({pendingValue:h,sourceValue:y})&&f!=="editing")continue;let w=r.get(_);w||(w=new Map,r.set(_,w)),h===void 0&&(h=ea),w.set(m,{editorValue:void 0,pendingValue:h,sourceValue:y,state:f??"changed",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}})}this.setEditMap(r,t)}onCellFocused(e){let t=gi(this.beans,e);if(!t||!this.isEditing(t,Eg))return;let n=this.model.getEdit(t);if(!n||!Wc(n))return;let o=this.getLocaleTextFunc()("ariaPendingChange","Pending Change");this.beans.ariaAnnounce?.announceValue(o,"pendingChange")}allowedFocusTargetOnValidation(e){return gi(this.beans,e)}};function wBe(e){return{rowNodes:e?Array.from(e.keys()):void 0,columns:e?[...new Set(Array.from(e.values()).flatMap(t=>Array.from(t.keys())))]:void 0}}function Fee(e,t){return t??e.get("editType")??"singleCell"}var Lie=class extends te{postConstruct(){this.model=this.beans.editModelSvc,this.editSvc=this.beans.editSvc,this.addManagedEventListeners({cellFocused:this.onCellFocusChanged?.bind(this),cellFocusCleared:this.onCellFocusChanged?.bind(this)})}clearEdits(e){this.model.clearEditValue(e)}onCellFocusChanged(e){let t,n=e.previousParams,{editSvc:i,beans:o}=this,r=e.type==="cellFocused"?e.sourceEvent:null;n&&(t=gi(o,n));let{gos:s,editModelSvc:a}=o,l=e.type==="cellFocusCleared";if(i.isEditing(void 0,{withOpenEditor:!0})){let{column:c,rowIndex:u,rowPinned:h}=e,f={column:c,rowNode:Jc(o,{rowIndex:u,rowPinned:h})},m=s.get("invalidEditValueMode")==="block";if(m)return;let _=!m,y=!!a?.getCellValidationModel().hasCellValidation(f),w=_&&y;(n||l?i.stopEditing(void 0,{cancel:w,source:l&&_?"api":void 0,event:r}):!0)||(i.isBatchEditing()?i.cleanupEditors():i.stopEditing(void 0,{source:"api"}))}t?.refreshCell({suppressFlash:!0,force:!0})}stop(e,t){let n=this.model.getEditPositions(),i={all:[],pass:[],fail:[]};for(let o of n){if(i.all.push(o),(this.model.getCellValidationModel().getCellValidation(o)?.errorMessages?.length??0)>0){i.fail.push(o);continue}i.pass.push(o)}if(e)for(let o of n)mI(this.beans,o,{cancel:e}),this.model.stop(o);else{let o=this.processValidationResults(i);if(o.destroy.length>0)for(let r of o.destroy)mI(this.beans,r,{event:t,cancel:e}),this.model.stop(r);if(o.keep.length>0)for(let r of o.keep){let s=gi(this.beans,r);this.editSvc?.cellEditingInvalidCommitBlocks()||s&&this.editSvc.revertSingleCellEdit(s)}}return!0}cleanupEditors({rowNode:e}={},t){pp(this.beans,{persist:!1});let n=this.model.getEditPositions(),i=[];if(e)for(let o of n)o.rowNode!==e&&i.push(o);else for(let o of n)i.push(o);Hg(this.beans,i),L4(this.beans,t)}setFocusOutOnEditor(e){e.comp?.getCellEditor()?.focusOut?.()}setFocusInOnEditor(e){let t=e.comp,n=t?.getCellEditor();if(n?.focusIn)n.focusIn();else{let i=this.beans.gos.get("editType")==="fullRow";e.focusCell(i),e.onEditorAttachedFuncs.push(()=>t?.getCellEditor()?.focusIn?.())}}setupEditors(e){let{event:t,ignoreEventKey:n=!1,startedEdit:i,position:o,cells:r=this.model.getEditPositions()}=e,s=t instanceof KeyboardEvent&&!n&&t.key||void 0;A2e(this.beans,r,o,s,t,i)}dispatchCellEvent(e,t,n,i){let o=gi(this.beans,e);o&&this.eventSvc.dispatchEvent(g(g({},o.createEvent(t??null,n)),i))}dispatchRowEvent(e,t,n){if(n)return;let i=EV(this.beans,e);i&&this.eventSvc.dispatchEvent(i.createRowEvent(t))}shouldStop(e,t,n="ui"){let i=this.editSvc.isBatchEditing();return i&&n==="api"?!0:i&&(n==="ui"||n==="edit")?!1:n==="api"?!0:t instanceof KeyboardEvent&&!i?t.key===W.ENTER:null}shouldCancel(e,t,n="ui"){let i=this.editSvc.isBatchEditing();return!!(t instanceof KeyboardEvent&&!i&&t.key===W.ESCAPE||i&&n==="api"||n==="api")}setEditMap(e,t){t?.update||this.editSvc.stopEditing(void 0,{cancel:!0,source:"api"});let n=[];if(e.forEach((i,o)=>{i.forEach((r,s)=>{r.state==="editing"&&n.push(x(g({},r),{rowNode:o,column:s}))})}),t?.update&&(e=new Map([...this.model.getEditMap(),...e])),this.model?.setEditMap(e),n.length>0){let i=n.at(-1),o=i.pendingValue===ea?void 0:i.pendingValue;this.start({position:i,event:new KeyboardEvent("keydown",{key:o}),source:"api"});let r=gi(this.beans,i);r&&this.setFocusInOnEditor(r)}}destroy(){this.cleanupEditors(),super.destroy()}},xBe=class extends Lie{constructor(){super(...arguments),this.beanName="fullRow",this.startedRows=[]}shouldStop(e,t,n="ui"){let{rowNode:i}=e||{};if(!EV(this.beans,{rowNode:this.rowNode}))return!0;let r=super.shouldStop({rowNode:this.rowNode},t,n);return r!==null?r:this.rowNode?i!==this.rowNode:!1}midBatchInputsAllowed({rowNode:e}){return e?this.model.hasEdits({rowNode:e}):!1}clearEdits(e){this.model.clearEditValue(e)}start(e){let{position:t,silent:n,startedEdit:i,event:o,ignoreEventKey:r}=e,{rowNode:s}=t;this.rowNode!==s&&super.cleanupEditors(t);let a=this.beans.visibleCols.allCols,l=[],c=[];for(let u of a)u.isCellEditable(s)&&c.push(u);if(c.length!=0){this.dispatchRowEvent({rowNode:s},"rowEditingStarted",n),this.startedRows.push(s);for(let u of c){let h={rowNode:s,column:u};l.push(h),this.model.hasEdits(h)||this.model.start(h)}this.rowNode=s,this.setupEditors({cells:l,position:t,startedEdit:i,event:o,ignoreEventKey:r})}}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){let{rowNode:n}=this;if(n&&!this.model.hasRowEdits(n))return!1;let i=[];if(e||this.model.getEditMap().forEach((o,r)=>{if(!(!o||o.size===0)){for(let s of o.values())if(Wc(s)){i.push(r);break}}}),Sp(this.beans),!e&&this.editSvc?.checkNavWithValidation({rowNode:n})==="block-stop")return!1;super.stop(e,t);for(let o of i)this.dispatchRowEvent({rowNode:o},"rowValueChanged");return this.cleanupEditors({rowNode:n},!0),this.rowNode=void 0,!0}onCellFocusChanged(e){let{rowIndex:t}=e,n=e.previousParams;if(n?.rowIndex===t||e.sourceEvent instanceof KeyboardEvent)return;let i=gi(this.beans,n);this.gos.get("invalidEditValueMode")==="block"&&i&&(this.model.getCellValidationModel().getCellValidation(i)||this.model.getRowValidationModel().getRowValidation(i))||super.onCellFocusChanged(e)}cleanupEditors(e={},t){super.cleanupEditors(e,t);for(let n of this.startedRows)this.dispatchRowEvent({rowNode:n},"rowEditingStopped");this.startedRows.length=0}moveToNextEditingCell(e,t,n,i="ui",o=!1){let r=e.cellPosition,s;this.model.suspend(!0);try{s=this.beans.navigation?.findNextCellToFocusOn(r,{backwards:t,startEditing:!0,skipToNextEditableCell:!1})}finally{this.model.suspend(!1)}if(s===!1)return null;if(s==null)return!1;let a=s.cellPosition,l=e.isCellEditable(),c=s.isCellEditable(),u=a&&r.rowIndex===a.rowIndex&&r.rowPinned===a.rowPinned;l&&this.setFocusOutOnEditor(e),this.restoreEditors();let h=this.gos.get("suppressStartEditOnTab");return c&&!o?h?s.focusCell(!0,n):(s.comp?.getCellEditor()||Kg(this.beans,s,{event:n,cellStartedEdit:!0}),this.setFocusInOnEditor(s),s.focusCell(!1,n)):(c&&o&&this.setFocusInOnEditor(s),s.focusCell(!0,n)),!u&&!o&&(this.editSvc?.stopEditing({rowNode:e.rowNode},{event:n}),this.cleanupEditors(s,!0),h?s.focusCell(!0,n):this.editSvc.startEditing(s,{startedEdit:!0,event:n,source:i,ignoreEventKey:!0})),e.rowCtrl?.refreshRow({suppressFlash:!0,force:!0}),!0}restoreEditors(){this.model.getEditMap().forEach((e,t)=>e.forEach(({state:n},i)=>{if(n!=="editing")return;let o=gi(this.beans,{rowNode:t,column:i});o&&!o.comp?.getCellEditor()&&Kg(this.beans,o,{silent:!0})}))}destroy(){super.destroy(),this.rowNode=void 0,this.startedRows.length=0}},SBe=class extends Lie{constructor(){super(...arguments),this.beanName="singleCell"}shouldStop(e,t,n="ui"){let i=super.shouldStop(e,t,n);if(i!==null)return i;let{rowNode:o,column:r}=e||{};return(!this.rowNode||!this.column)&&o&&r?null:this.rowNode!==o||this.column!==r}midBatchInputsAllowed(e){return this.model.hasEdits(e)}start(e){let{position:t,startedEdit:n,event:i,ignoreEventKey:o}=e;(this.rowNode!==t.rowNode||this.column!==t.column)&&super.cleanupEditors(),this.rowNode=t.rowNode,this.column=t.column,this.model.start(t),this.setupEditors({cells:[t],position:t,startedEdit:n,event:i,ignoreEventKey:o})}dispatchRowEvent(e,t,n){}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){return super.stop(e,t),this.rowNode=void 0,this.column=void 0,!0}onCellFocusChanged(e){let{colModel:t,editSvc:n}=this.beans,{rowIndex:i,column:o,rowPinned:r}=e,s=Jc(this.beans,{rowIndex:i,rowPinned:r}),a=F4(o),l=t.getCol(a),c=e.previousParams;if(c){let u=F4(c.column);if(c?.rowIndex===i&&u===a&&c?.rowPinned===r)return}n?.isEditing({rowNode:s,column:l},{withOpenEditor:!0})&&e.type==="cellFocused"||super.onCellFocusChanged(e)}moveToNextEditingCell(e,t,n,i="ui",o=!1){let r=this.beans.focusSvc.getFocusedCell();r&&(e=Tg(this.beans,r)??e);let s=e.cellPosition,a,l=this.beans.gos.get("editType")==="fullRow";l&&this.model.suspend(!0),o||(e.eGui.focus(),this.editSvc?.stopEditing(e,{source:this.editSvc?.isBatchEditing()?"ui":"api",event:n}));try{a=this.beans.navigation?.findNextCellToFocusOn(s,{backwards:t,startEditing:!0})}finally{l&&this.model.suspend(!1)}if(a===!1)return null;if(a==null)return!1;let c=a.cellPosition,u=e.isCellEditable(),h=a.isCellEditable(),f=c&&s.rowIndex===c.rowIndex&&s.rowPinned===c.rowPinned;u&&!o&&this.setFocusOutOnEditor(e);let m=this.gos.get("suppressStartEditOnTab");if(!f&&!o&&(super.cleanupEditors(a,!0),m?a.focusCell(!0,n):this.editSvc.startEditing(a,{startedEdit:!0,event:n,source:i,ignoreEventKey:!0})),h&&!o){if(a.focusCell(!1,n),m)a.focusCell(!0,n);else if(!a.comp?.getCellEditor()){let _=this.editSvc?.isEditing(a,{withOpenEditor:!0});Kg(this.beans,a,{event:n,cellStartedEdit:!0,silent:_}),this.setFocusInOnEditor(a),this.cleanupEditors(a)}}else h&&o&&this.setFocusInOnEditor(a),a.focusCell(!0,n);return e.rowCtrl?.refreshRow({suppressFlash:!0,force:!0}),!0}destroy(){super.destroy(),this.rowNode=void 0,this.column=void 0}},wu={moduleName:"EditCore",version:we,beans:[R2e,CBe],apiFunctions:{getEditingCells:X3e,getEditRowValues:J3e,getCellEditorInstances:P2e,startEditingCell:nBe,stopEditing:eBe,isEditing:tBe,validateEdit:iBe},dynamicBeans:{singleCell:SBe,fullRow:xBe},dependsOn:[II,Iie],css:[M3e]},EBe={moduleName:"UndoRedoEdit",version:we,beans:[I3e],apiFunctions:{undoCellEditing:Y3e,redoCellEditing:Q3e,getCurrentUndoSize:oBe,getCurrentRedoSize:rBe},dependsOn:[wu]},DBe={moduleName:"TextEditor",version:we,userComponents:{agCellEditor:Oee,agTextCellEditor:Oee},dependsOn:[wu]},kBe={moduleName:"NumberEditor",version:we,userComponents:{agNumberCellEditor:{classImp:$3e}},dependsOn:[wu]},IBe={moduleName:"DateEditor",version:we,userComponents:{agDateCellEditor:O3e,agDateStringCellEditor:N3e},dependsOn:[wu]},MBe={moduleName:"CheckboxEditor",version:we,userComponents:{agCheckboxCellEditor:T3e},dependsOn:[wu]},RBe={moduleName:"SelectEditor",version:we,userComponents:{agSelectCellEditor:G3e},dependsOn:[wu]},TBe={moduleName:"LargeTextEditor",version:we,userComponents:{agLargeTextCellEditor:z3e},dependsOn:[wu]},PBe={moduleName:"CustomEditor",version:we,dependsOn:[wu]},ABe=class extends te{constructor(){super(...arguments),this.beanName="selectionColSvc"}postConstruct(){this.addManagedPropertyListener("rowSelection",e=>{this.onSelectionOptionsChanged(e.currentValue,e.previousValue,Ng(e.source))}),this.addManagedPropertyListener("selectionColumnDef",this.updateColumns.bind(this))}addColumns(e){let t=this.columns;t!=null&&(e.list=t.list.concat(e.list),e.tree=t.tree.concat(e.tree),qke(e))}createColumns(e,t){let n=()=>{sI(this.beans,this.columns?.tree),this.columns=null},i=e.treeDepth,r=(this.columns?.treeDepth??-1)==i,s=this.generateSelectionCols();if(Wke(s,this.columns?.list??[])&&r)return;n();let{colGroupSvc:l}=this.beans,c=l?.findDepth(e.tree)??0,u=l?.balanceTreeForAutoCols(s,c)??[];this.columns={list:s,tree:u,treeDepth:c,map:{}},t(f=>{if(!f)return null;let m=f.filter(_=>!ed(_));return[...s,...m]})}updateColumns(e){let t=Ng(e.source);for(let n of this.columns?.list??[]){let i=this.createSelectionColDef(e.currentValue);n.setColDef(i,null,t),Na(this.beans,{state:[x(g({},i),{colId:n.getColId()})]},t)}}getColumn(e){return this.columns?.list.find(t=>ew(t,e))??null}getColumns(){return this.columns?.list??null}isSelectionColumnEnabled(){let{gos:e,beans:t}=this,n=e.get("rowSelection");if(typeof n!="object"||!mp(e))return!1;let i=(t.autoColSvc?.getColumns()?.length??0)>0;if(n.checkboxLocation==="autoGroupColumn"&&i)return!1;let o=!!Lg(n),r=Hk(n);return o||r}createSelectionColDef(e){let{gos:t}=this,n=e??t.get("selectionColumnDef"),i=t.get("enableRtl"),a=n??{},{rowSpan:o,spanRows:r}=a,s=Be(a,["rowSpan","spanRows"]);return x(g({width:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:i?"right":"left",comparator(l,c,u,h){let f=u.isSelected(),m=h.isSelected();return f===m?0:f?1:-1},editable:!1,suppressFillHandle:!0,pinned:null},s),{colId:Ite,chartDataType:"excluded"})}generateSelectionCols(){if(!this.isSelectionColumnEnabled())return[];let e=this.createSelectionColDef(),t=e.colId;this.gos.validateColDef(e,t,!0);let n=new Dp(e,null,t,!1);return this.createBean(n),[n]}onSelectionOptionsChanged(e,t,n){let i=t&&typeof t!="string"?Lg(t):void 0,o=e&&typeof e!="string"?Lg(e):void 0,r=i!==o,s=t&&typeof t!="string"?Hk(t):void 0,a=e&&typeof e!="string"?Hk(e):void 0,l=s!==a,c=iI(e),u=iI(t);(r||l||c!==u)&&this.beans.colModel.refreshAll(n)}destroy(){sI(this.beans,this.columns?.tree),super.destroy()}refreshVisibility(e,t,n){if(!this.columns?.list.length)return;let i=e.length+t.length+n.length;if(i===0)return;let o=this.columns.list[0];if(!o.isVisible())return;let r=()=>{let l;switch(o.pinned){case"left":case!0:l=e;break;case"right":l=n;break;default:l=t}l&&Ba(l,o)};(this.beans.rowNumbersSvc?.getColumn(Mte)?2:1)===i&&r()}};function OBe(e,t){if(!t.nodes.every(s=>s.rowPinned&&!Ew(s)?(ce(59),!1):s.id===void 0?(ce(60),!1):!0))return;let{nodes:i,source:o,newValue:r}=t;e.selectionSvc?.setNodesSelected({nodes:i,source:o??"api",newValue:r})}function FBe(e,t,n="apiSelectAll"){e.selectionSvc?.selectAllRowNodes({source:n,selectAll:t})}function LBe(e,t,n="apiSelectAll"){e.selectionSvc?.deselectAllRowNodes({source:n,selectAll:t})}function NBe(e,t="apiSelectAllFiltered"){e.selectionSvc?.selectAllRowNodes({source:t,selectAll:"filtered"})}function BBe(e,t="apiSelectAllFiltered"){e.selectionSvc?.deselectAllRowNodes({source:t,selectAll:"filtered"})}function zBe(e,t="apiSelectAllCurrentPage"){e.selectionSvc?.selectAllRowNodes({source:t,selectAll:"currentPage"})}function VBe(e,t="apiSelectAllCurrentPage"){e.selectionSvc?.deselectAllRowNodes({source:t,selectAll:"currentPage"})}function HBe(e){return e.selectionSvc?.getSelectedNodes()??[]}function $Be(e){return e.selectionSvc?.getSelectedRows()??[]}var jBe=class extends rPe{constructor(){super(...arguments),this.beanName="selectionSvc",this.selectedNodes=new Map,this.detailSelection=new Map,this.masterSelectsDetail=!1}postConstruct(){super.postConstruct();let{gos:e}=this;this.mode=oI(e),this.groupSelectsDescendants=pw(e),this.groupSelectsFiltered=rI(e)==="filteredDescendants",this.masterSelectsDetail=DX(e)==="detail",this.addManagedPropertyListeners(["groupSelectsChildren","groupSelectsFiltered","rowSelection"],()=>{let t=pw(e),n=oI(e),i=rI(e)==="filteredDescendants";this.masterSelectsDetail=DX(e)==="detail",(t!==this.groupSelectsDescendants||i!==this.groupSelectsFiltered||n!==this.mode)&&(this.deselectAllRowNodes({source:"api"}),this.groupSelectsDescendants=t,this.groupSelectsFiltered=i,this.mode=n)}),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes()}handleSelectionEvent(e,t,n){if(this.isRowSelectionBlocked(t))return 0;let i=this.inferNodeSelections(t,e.shiftKey,e.metaKey||e.ctrlKey,n);if(i==null)return 0;if(this.selectionCtx.selectAll=!1,"select"in i)return i.reset?this.resetNodes():this.selectRange(i.deselect,!1,n),this.selectRange(i.select,!0,n);{let o=i.checkFilteredNodes?Bie(i.node):i.newValue;return this.setNodesSelected({nodes:[i.node],newValue:o,clearSelection:i.clearSelection,keepDescendants:i.keepDescendants,event:e,source:n})}}setNodesSelected({newValue:e,clearSelection:t,suppressFinishActions:n,nodes:i,event:o,source:r,keepDescendants:s=!1}){if(i.length===0)return 0;let{gos:a}=this;if(!mp(a)&&e)return ce(132),0;if(i.length>1&&!this.isMultiSelect())return ce(130),0;let l=0;for(let c=0;c<i.length;c++){let u=i[c],h=Dg(u);if(h.rowPinned&&!Ew(h)){ce(59);continue}if(h.id===void 0){ce(60);continue}this.groupSelectsFiltered&&h.group&&!a.get("treeData")||this.selectRowNode(h,e,o,r)&&(this.detailSelection.delete(h.id),l++),this.groupSelectsDescendants&&h.childrenAfterGroup?.length&&(l+=this.selectChildren(h,e,r))}return n||(i.length===1&&r==="api"&&this.selectionCtx.setRoot(Dg(i[0])),e&&(t||!this.isMultiSelect())&&(l+=this.clearOtherNodes(Dg(i[0]),s,r)),l>0&&(this.updateGroupsFromChildrenSelections(r),this.dispatchSelectionChanged(r))),l}selectRange(e,t,n){let i=0;return e.forEach(o=>{let r=Dg(o);if(r.group&&this.groupSelectsDescendants)return;this.selectRowNode(r,t,void 0,n)&&i++}),i>0&&(this.updateGroupsFromChildrenSelections(n),this.dispatchSelectionChanged(n)),i}selectChildren(e,t,n){let i=this.groupSelectsFiltered?e.childrenAfterAggFilter:e.childrenAfterGroup;return i?this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,source:n,nodes:i}):0}getSelectedNodes(){return Array.from(this.selectedNodes.values())}getSelectedRows(){let e=[];return this.selectedNodes.forEach(t=>t.data&&e.push(t.data)),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){let t=new Map;this.selectedNodes.forEach((n,i)=>{e(n)&&t.set(i,n)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsDescendants)return!1;let{gos:n,rowModel:i}=this.beans;if(!$i(n,i))return!1;let o=i.rootNode;if(!o)return!1;t||(t=new gw(!0,o),t.active=!1);let r=!1;return t.forEachChangedNodeDepthFirst(s=>{if(s!==o){let a=this.calculateSelectedFromChildren(s);r=this.selectRowNode(s,a===null?!1:a,void 0,e)||r}}),r}clearOtherNodes(e,t,n){let i=new Map,o=0;return this.selectedNodes.forEach(r=>{let s=r.id==e.id;if((t?!UBe(e,r):!0)&&!s){let l=this.selectedNodes.get(r.id);o+=this.setNodesSelected({nodes:[l],newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:n}),this.groupSelectsDescendants&&r.parent&&i.set(r.parent.id,r.parent)}}),i.forEach(r=>{let s=this.calculateSelectedFromChildren(r);this.selectRowNode(r,s===null?!1:s,void 0,n)}),o}onRowSelected(e){let t=e.node;this.groupSelectsDescendants&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}createDaemonNode(e){if(!e.id)return;let t=new vu(this.beans);return t.id=e.id,t.data=e.data,t.__selected=e.__selected,t.level=e.level,t}syncInOldRowNode(e,t){t&&e.id!==t.id&&this.selectedNodes.get(t.id)==e&&this.selectedNodes.set(t.id,t)}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.__selected=!0,this.selectedNodes.set(e.id,e)):e.__selected=!1}reset(e){let t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes.forEach(e=>{this.selectRowNode(e,!1)}),this.selectedNodes.clear()}getBestCostNodeSelection(){let{gos:e,rowModel:t}=this.beans;if(!$i(e,t))return;let n=t.getTopLevelNodes();if(n===null)return;let i=[];function o(r){for(let s=0,a=r.length;s<a;s++){let l=r[s];l.isSelected()?i.push(l):l.group&&l.childrenAfterGroup&&o(l.childrenAfterGroup)}}return o(n),i}isEmpty(){return this.getSelectionCount()===0}deselectAllRowNodes({source:e,selectAll:t}){let n=$i(this.gos),i=!1,o=r=>{let s=this.selectRowNode(Dg(r),!1,void 0,e);i||(i=s)};if(t==="currentPage"||t==="filtered"){if(!n){On(102);return}this.getNodesToSelect(t).forEach(o)}else this.selectedNodes.forEach(o),this.reset(e);if(this.selectionCtx.selectAll=!1,n&&this.groupSelectsDescendants){let r=this.updateGroupsFromChildrenSelections(e);i||(i=r)}i&&this.dispatchSelectionChanged(e)}getSelectedCounts(e){let t=0,n=0;return this.getNodesToSelect(e).forEach(i=>{this.groupSelectsDescendants&&i.group||(i.isSelected()?t++:i.selectable&&n++)}),{selectedCount:t,notSelectedCount:n}}getSelectAllState(e){let{selectedCount:t,notSelectedCount:n}=this.getSelectedCounts(e);return Nie(t,n)??null}hasNodesToSelect(e){return this.getNodesToSelect(e).filter(t=>t.selectable).length>0}getNodesToSelect(e){if(!this.canSelectAll())return[];let t=[],n=o=>t.push(o);if(e==="currentPage")return this.forEachNodeOnPage(o=>{if(!o.group){n(o);return}if(!o.expanded&&!o.footer){let r=s=>{n(s),s.childrenAfterFilter?.forEach(r)};r(o);return}this.groupSelectsDescendants||n(o)}),t;let i=this.beans.rowModel;return e==="filtered"?(i.forEachNodeAfterFilter(n),t):(i.forEachNode(n),t)}forEachNodeOnPage(e){let{pageBounds:t,rowModel:n}=this.beans,i=t.getFirstRow(),o=t.getLastRow();for(let r=i;r<=o;r++){let s=n.getRow(r);s&&e(s)}}selectAllRowNodes(e){let{gos:t,selectionCtx:n}=this;if(!mp(t)){ce(132);return}if(Ake(t)&&!hw(t)){ce(130);return}if(!this.canSelectAll())return;let{source:i,selectAll:o}=e,r=!1;if(this.getNodesToSelect(o).forEach(s=>{let a=this.selectRowNode(Dg(s),!0,void 0,i);r||(r=a)}),n.selectAll=!0,$i(t)&&this.groupSelectsDescendants){let s=this.updateGroupsFromChildrenSelections(i);r||(r=s)}r&&this.dispatchSelectionChanged(i)}getSelectionState(){return this.isEmpty()?null:Array.from(this.selectedNodes.keys())}setSelectionState(e,t,n){if(e||(e=[]),!Array.isArray(e)){On(103);return}let i=new Set(e),o=[];this.beans.rowModel.forEachNode(r=>{i.has(r.id)&&o.push(r)}),n&&this.resetNodes(),this.setNodesSelected({newValue:!0,nodes:o,source:t})}canSelectAll(){return $i(this.beans.gos)}updateSelectable(e){let{gos:t,rowModel:n}=this.beans;if(!mp(t))return;let i="selectableChanged",o=e!==void 0,r=$i(t)&&this.groupSelectsDescendants,s=[],a=l=>{if(o&&!l.group)return;if(r&&l.group){let u=l.childrenAfterGroup?.some(h=>h.selectable)??!1;this.setRowSelectable(l,u,!0);return}!this.updateRowSelectable(l,!0)&&l.isSelected()&&s.push(l)};if(r){if(e===void 0){let l=n.rootNode;e=l?new gw(!1,l):void 0}e?.forEachChangedNodeDepthFirst(a,!o,!o)}else n.forEachNode(a);s.length&&this.setNodesSelected({nodes:s,newValue:!1,source:i}),!o&&r&&this.updateGroupsFromChildrenSelections?.(i)}updateSelectableAfterGrouping(e){this.updateSelectable(e),this.groupSelectsDescendants&&this.updateGroupsFromChildrenSelections?.("rowGroupChanged",e)&&this.dispatchSelectionChanged("rowGroupChanged")}refreshMasterNodeState(e,t){if(!this.masterSelectsDetail)return;let n=e.detailNode?.detailGridInfo?.api;if(!n)return;let i=GBe(n);if(e.isSelected()!==i&&this.selectRowNode(e,i,t,"masterDetail")&&this.dispatchSelectionChanged("masterDetail"),!i){let r=this.detailSelection.get(e.id)??new Set;for(let s of n.getSelectedNodes())r.add(s.id);this.detailSelection.set(e.id,r)}}setDetailSelectionState(e,t,n){if(this.masterSelectsDetail){if(!hw(t)){ce(269);return}switch(e.isSelected()){case!0:{n.selectAll();break}case!1:{n.deselectAll();break}case void 0:{let i=this.detailSelection.get(e.id);if(i){let o=[];for(let r of i){let s=n.getRowNode(r);s&&o.push(s)}n.setNodesSelected({nodes:o,newValue:!0,source:"masterDetail"})}break}default:break}}}dispatchSelectionChanged(e){this.eventSvc.dispatchEvent({type:"selectionChanged",source:e,selectedNodes:this.getSelectedNodes(),serverSideState:null})}};function Dg(e){return Ew(e)?e.pinnedSibling:e.footer?e.sibling:e}function GBe(e){let t=0,n=0;return e.forEachNode(i=>{i.isSelected()?t++:i.selectable&&n++}),Nie(t,n)}function Nie(e,t){if(e===0&&t===0)return!1;if(!(e>0&&t>0))return e>0}function UBe(e,t){let n=t.parent;for(;n;){if(n===e)return!0;n=n.parent}return!1}function Bie(e){let t=e.isSelected()===!1,n=e.childrenAfterFilter?.some(Bie)??!1;return t||n}var WBe={moduleName:"SharedRowSelection",version:we,beans:[ABe],apiFunctions:{setNodesSelected:OBe,selectAll:FBe,deselectAll:LBe,selectAllFiltered:NBe,deselectAllFiltered:BBe,selectAllOnCurrentPage:zBe,deselectAllOnCurrentPage:VBe,getSelectedNodes:HBe,getSelectedRows:$Be}},qBe={moduleName:"RowSelection",version:we,rowModels:["clientSide","infinite","viewport"],beans:[jBe],dependsOn:[WBe]};function KBe(e){e.expansionSvc?.expandAll(!0)}function ZBe(e){e.expansionSvc?.expandAll(!1)}function zie(e){e.rowModel?.onRowHeightChanged()}function Vie(e){if(e.rowAutoHeight?.active){ce(3);return}e.rowModel?.resetRowHeights()}function YBe(e,t,n){let i=QLe(e);if(i){if(e.rowGroupColsSvc?.columns.length===0){if(t<0){On(238);return}i.setRowCount(t,n);return}On(28);return}kI(e)?.setRowCount(t,n)}function QBe(e){return Yg(e.gos)?e.rowModel.getBlockStates():e.rowNodeBlockLoader?.getBlockState()??{}}function JBe(e){return e.rowModel.isLastRowIndexKnown()}var XBe={moduleName:"CsrmSsrmSharedApi",version:we,apiFunctions:{expandAll:KBe,collapseAll:ZBe}},eze={moduleName:"RowModelSharedApi",version:we,apiFunctions:{onRowHeightChanged:zie,resetRowHeights:Vie}},tze={moduleName:"SsrmInfiniteSharedApi",version:we,apiFunctions:{setRowCount:YBe,getCacheBlockState:QBe,isLastRowIndexKnown:JBe}},nze=class extends te{constructor(){super(...arguments),this.beanName="alignedGridsSvc",this.consuming=!1}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[],t=typeof e=="function";return typeof e=="function"&&(e=e()),e.map(i=>{if(!i){On(18),t||On(20);return}if(this.isGridApi(i))return i;let o=i;return"current"in o?o.current?.api:(o.api||On(19),o.api)}).filter(i=>!!i&&!i.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){let e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){if(!this.consuming)for(let t of this.getAlignedGridApis())t.isDestroyed()||t.dispatchEvent(e)}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.beans.ctrlsSvc.getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,t){let n=[];return e.columns?e.columns.forEach(i=>{n.push(t(i))}):e.column&&n.push(t(e.column)),n}getMasterColumns(e){return this.extractDataFromEvent(e,t=>t)}getColumnIds(e){return this.extractDataFromEvent(e,t=>t.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{this.processColumnEvent(e);break}case"columnGroupOpened":{this.processGroupOpenedEvent(e);break}case"columnPivotChanged":ce(21);break}})}processGroupOpenedEvent(e){let{colGroupSvc:t}=this.beans;if(t)for(let n of e.columnGroups){let i=null;n&&(i=t.getProvidedColGroup(n.getGroupId())),!(n&&!i)&&t.setColumnGroupOpened(i,n.isExpanded(),"alignedGridChanged")}}processColumnEvent(e){let t=e.column,n=null,i=this.beans,{colResize:o,ctrlsSvc:r,colModel:s}=i;if(t&&(n=s.getColDefCol(t.getColId())),t&&!n)return;let a=this.getMasterColumns(e);switch(e.type){case"columnMoved":{let h=e.api.getColumnState().map(f=>({colId:f.colId}));Na(i,{state:h,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{let h=e.api.getColumnState().map(f=>({colId:f.colId,hide:f.hide}));Na(i,{state:h},"alignedGridChanged")}break;case"columnPinned":{let h=e.api.getColumnState().map(f=>({colId:f.colId,pinned:f.pinned}));Na(i,{state:h},"alignedGridChanged")}break;case"columnResized":{let u=e,h={};for(let f of a)h[f.getId()]={key:f.getColId(),newWidth:f.getActualWidth()};for(let f of u.flexColumns??[])h[f.getId()]&&delete h[f.getId()];o?.setColumnWidths(Object.values(h),!1,u.finished,"alignedGridChanged");break}}let c=r.getGridBodyCtrl().isVerticalScrollShowing();for(let u of this.getAlignedGridApis())u.setGridOption("alwaysShowVerticalScroll",c)}},ize={moduleName:"AlignedGrids",version:we,beans:[nze],dependsOn:[Gne]},oze=class extends te{constructor(e){super(),this.rootNode=e,this.nextId=0,this.allNodesMap={},Lee(e)}getRowNode(e){return this.allNodesMap[e]}setNewRowData(e){let{selectionSvc:t,pinnedRowModel:n,groupStage:i}=this.beans;t?.reset("rowDataChanged"),n?.isManual()&&n.reset(),this.dispatchRowDataUpdateStarted(e),this.allNodesMap=Object.create(null),this.nextId=0;let o=Lee(this.rootNode),r=new Array(e.length);o._leafs=r;let s=0,a=i?.getNestedDataGetter(),l=a?new Set:null,c=(u,h)=>{let f=u.level+1;for(let m=0,_=h.length;m<_;++m){let y=h[m];if(!y)continue;let w=this.createRowNode(y,f);if(w.sourceRowIndex=s,r[s++]=w,l&&!l.has(y)){l.add(y),w.treeParent=u;let C=a(y);C&&c(w,C)}}};c(o,e),r.length=s}setImmutableRowData(e,t){let{rootNode:n,gos:i}=this;this.dispatchRowDataUpdateStarted(t);let o=Gg(i),r=e.changedRowNodes,{adds:s,updates:a}=r,l=new Set,c=[],u=this.beans.groupStage?.getNestedDataGetter(),h=i.get("suppressMaintainUnsortedOrder")?void 0:!1,f=-1,m=!1,_=(C,S)=>{if(!h&&h!==void 0){let I=C.sourceRowIndex;h=I<=f,f=I}C.data!==S&&(C.updateData(S),s.has(C)||a.add(C),!C.selectable&&C.isSelected()&&c.push(C))},y=(C,S,I)=>{for(let O=0,F=S.length;O<F;++O){let H=S[O];if(!H)continue;let j=this.getRowNode(o({data:H,level:I}));if(j?(_(j,H),m||(m=!!u&&j.treeParent!==C)):(j=this.createRowNode(H,I),s.add(j)),!u||l.has(j)){l.add(j);continue}l.add(j),j.treeParent=C;let re=u(H);re&&y(j,re,I+1)}};y(n,t,0);let w=this.deleteUnusedNodes(l,r,c)||h||s.size>0;if(w){let C=n._leafs??(n._leafs=[]);h===void 0?cze(C,l,r):lze(C,l)&&(r.reordered=!0)}(w||m||a.size)&&(e.rowDataUpdated=!0,this.deselect(c))}deleteUnusedNodes(e,{removals:t},n){let i=this.rootNode._leafs;for(let o=0,r=i.length;o<r;o++){let s=i[o];e.has(s)||(t.add(s),s.isSelected()&&n.push(s),this.deleteNode(s))}return t.size>0}updateRowData(e,t){if(this.dispatchRowDataUpdateStarted(e.add),this.beans.groupStage?.getNestedDataGetter())return ce(268),{remove:[],update:[],add:[]};let n=[],i=Gg(this.gos),o=this.executeRemove(i,e,t,n),r=this.executeUpdate(i,e,t,n),s=this.executeAdd(e,t);return this.deselect(n),{remove:o,update:r,add:s}}executeRemove(e,{remove:t},{adds:n,updates:i,removals:o},r){let s=this.rootNode._leafs,a=s?.length,l=t?.length;if(!l||!a)return[];let c=0,u=a,h=0,f,m=new Array(l);for(let _=0;_<l;++_){let y=this.lookupNode(e,t[_]);if(!y)continue;let w=y.sourceRowIndex;w<u&&(u=w),w>h&&(h=w),y.isSelected()&&r.push(y),this.deleteNode(y),n.delete(y)?(f??(f=new Set),f.add(y)):(i.delete(y),o.add(y)),m[c++]=y}return m.length=c,c&&aze(s,u,h,o,f),m}executeUpdate(e,{update:t},{adds:n,updates:i},o){let r=t?.length;if(!r)return[];let s=new Array(r),a=0;for(let l=0;l<r;l++){let c=t[l],u=this.lookupNode(e,c);u&&(u.updateData(c),!u.selectable&&u.isSelected()&&o.push(u),s[a++]=u,n.has(u)||i.add(u))}return s.length=a,s}executeAdd(e,t){var n;let i=(n=this.rootNode)._leafs??(n._leafs=[]),o=i.length,r=e.add,s=r?.length;if(!s)return[];let a=o+s,l=this.sanitizeAddIndex(i,e.addIndex);if(l<o){for(let h=o-1,f=a-1;h>=l;--h){let m=i[h];m.sourceRowIndex=f,i[f--]=m}t.reordered=!0}i.length=a;let c=new Array(s),u=t.adds;for(let h=0;h<s;h++){let f=this.createRowNode(r[h],0);u.add(f),f.sourceRowIndex=l,i[l]=f,c[h]=f,l++}return c}dispatchRowDataUpdateStarted(e){this.eventSvc.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e?.length?e[0]:null})}deselect(e){let t="rowDataChanged",n=this.beans.selectionSvc;e.length&&n?.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),n?.updateGroupsFromChildrenSelections?.(t),e.length&&this.eventSvc.dispatchEvent({type:"selectionChanged",source:t,selectedNodes:n?.getSelectedNodes()??null,serverSideState:null})}createRowNode(e,t){let n=new vu(this.beans);n.parent=this.rootNode,n.level=t,n.group=!1,n.expanded=!1,n.setDataAndId(e,String(this.nextId++));let i=n.id,o=this.allNodesMap;return o[i]&&ce(2,{nodeId:i}),o[i]=n,n}deleteNode(e){e.clearRowTopAndRowIndex();let t=e.id,n=this.allNodesMap;n[t]===e&&delete n[t];let i=e.pinnedSibling;i&&this.beans.pinnedRowModel?.pinRow(i,null)}lookupNode(e,t){if(!e)return sze(this.rootNode._leafs,t);let n=e({data:t,level:0}),i=this.allNodesMap[n];return i||(On(4,{id:n}),null)}sanitizeAddIndex(e,t){let n=e.length;if(typeof t!="number"||t<0||t>=n||Number.isNaN(t))return n;t=Math.ceil(t);let i=this.gos;return t>0&&i.get("treeData")&&i.get("getDataPath")&&(t=rze(e,t)),t}},rze=(e,t)=>{for(let n=0,i=e.length;n<i;n++)if(e[n]?.rowIndex==t-1)return n+1;return t},Lee=e=>{e.group=!0,e.level=-1,e.id="ROOT_NODE_ID",e._leafs?.length!==0&&(e._leafs=[]);let t=[],n=[],i=[],o=[];e.childrenAfterGroup=t,e.childrenAfterSort=n,e.childrenAfterAggFilter=i,e.childrenAfterFilter=o;let r=e.sibling;return r&&(r.childrenAfterGroup=t,r.childrenAfterSort=n,r.childrenAfterAggFilter=i,r.childrenAfterFilter=o,r.childrenMapped=e.childrenMapped),e.updateHasChildren(),e},sze=(e,t)=>{if(e)for(let n=0,i=e.length;n<i;n++){let o=e[n];if(o.data===t)return o}return On(5,{data:t}),null},aze=(e,t,n,i,o)=>{t=Math.max(0,t);for(let r=t,s=e.length;r<s;++r){let a=e[r];r<=n&&(i.has(a)||o?.has(a))||(a.sourceRowIndex=t,e[t++]=a)}e.length=t},lze=(e,t)=>{let n=t.size;e.length=n;let i=0,o=!1,r=!1;for(let s of t){let a=s.sourceRowIndex;a===i?r||(r=o):(a>=0?r=!0:o=!0,s.sourceRowIndex=i,e[i]=s),++i}return r},cze=(e,t,{removals:n,adds:i})=>{let o=e.length;e.length=t.size;let r=0;for(let s=0;s<o;++s){let a=e[s];n.has(a)||(r!==s&&(a.sourceRowIndex=r,e[r]=a),++r)}for(let s of i)s.sourceRowIndex<0&&(s.sourceRowIndex=r,e[r++]=s);e.length=r},Hie=e=>{let t=e.childrenAfterSort,n=e.sibling;if(n&&(n.childrenAfterSort=t),!!t)for(let i=0,o=t.length-1;i<=o;i++){let r=t[i],s=i===0,a=i===o;r.firstChild!==s&&(r.firstChild=s,r.dispatchRowEvent("firstChildChanged")),r.lastChild!==a&&(r.lastChild=a,r.dispatchRowEvent("lastChildChanged")),r.childIndex!==i&&(r.childIndex=i,r.dispatchRowEvent("childIndexChanged"))}},dze=class extends te{constructor(){super(...arguments),this.beanName="sortStage",this.step="sort",this.refreshProps=["postSortRows","groupDisplayType","accentedSort"]}execute(e){let t=this.beans.sortSvc.getSortOptions(),n=t.length>0&&!!e.changedRowNodes&&this.gos.get("deltaSort");this.sort(t,n,e.changedRowNodes,e.changedPath)}sort(e,t,n,i){let{gos:o,colModel:r,rowGroupColsSvc:s,rowNodeSorter:a,rowRenderer:l,showRowGroupCols:c}=this.beans,u=o.get("groupMaintainOrder"),h=r.getCols().some(S=>S.isRowGroupActive()),f=s?.columns,m=r.isPivotMode(),_=o.getCallback("postSortRows"),y=!1,w,C=S=>{let I=m&&S.leafGroup,O=u&&h&&!S.leafGroup;O&&(w??(w=this.shouldSortContainsGroupCols(e)),O&&(O=!w));let F=null;if(O){let H=!1;if(f){let j=S.level+1;j<f.length&&(H=f[j].getSort()===null)}H||(F=pze(S))}else!e.length||I||(t&&n?F=uze(a,S,n,i,e):F=a.doFullSort(S.childrenAfterAggFilter,e));if(F||(F=S.childrenAfterAggFilter?.slice(0)??[]),y||(y=S.childrenAfterSort?.[0]!==F[0]),S.childrenAfterSort=F,Hie(S),_){let H={nodes:S.childrenAfterSort};_(H)}};if(i?.forEachChangedNodeDepthFirst(C),y&&o.get("groupHideOpenParents")){let S=c?.getShowRowGroupCols();S?.length&&l.refreshCells({columns:S,force:!0})}}shouldSortContainsGroupCols(e){let t=e.length;if(!t)return!1;if(Ol(this.gos)){for(let n=0;n<t;++n){let i=e[n].column;if(i.isPrimary()&&i.isRowGroupActive())return!0}return!1}for(let n=0;n<t;++n)if(e[n].column.getColDef().showRowGroup)return!0;return!1}},uze=(e,t,n,i,o)=>{let r=t.childrenAfterAggFilter,s=t.childrenAfterSort;if(!s)return e.doFullSort(r,o);let a=new Set,l=[],{updates:c,adds:u}=n;for(let f=0,m=r.length;f<m;++f){let _=r[f];c.has(_)||u.has(_)||i&&!i.canSkip(_)?l.push({currentPos:l.length,rowNode:_}):a.add(_)}let h=s.filter(f=>a.has(f)).map((f,m)=>({currentPos:m,rowNode:f}));return l.sort((f,m)=>e.compareRowNodes(o,f,m)),hze(e,o,l,h)},hze=(e,t,n,i)=>{let o=0,r=0,s=n.length,a=i.length,l=new Array(s+a),c=0;for(;o<s&&r<a;){let u=n[o],h=i[r];e.compareRowNodes(t,u,h)<0?(l[c++]=u.rowNode,++o):(l[c++]=h.rowNode,++r)}for(;o<s;)l[c++]=n[o++].rowNode;for(;r<a;)l[c++]=i[r++].rowNode;return l},pze=e=>{let t=e.childrenAfterSort,n=e.childrenAfterAggFilter,i=t?.length,o=n?.length;if(!i||!o)return null;let r=new Array(o),s=new Set;for(let l=0;l<o;++l)s.add(n[l]);let a=0;for(let l=0;l<i;++l){let c=t[l];s.delete(c)&&(r[a++]=c)}if(s.size===0&&a===i)return t;for(let l of s)r[a++]=l;return r.length=a,r},fze=class extends te{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null,this.rowCountReady=!1,this.nodeManager=void 0,this.rowsToDisplay=[],this.rowDataUpdatedPending=!1,this.asyncTransactions=null,this.asyncTransactionsTimer=0,this.started=!1,this.refreshingModel=!1,this.rowNodesCountReady=!1,this.stages=[],this.stagesRefreshProps=new Map,this.onRowHeightChanged_debounced=zo(this,this.onRowHeightChanged.bind(this),100)}postConstruct(){let e=this.beans,t=new vu(e);this.rootNode=t,this.nodeManager=this.createBean(new oze(t));let n=this.refreshModel.bind(this,{step:"group"}),i=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame")});this.addManagedEventListeners({newColumnsLoaded:i,columnRowGroupChanged:n,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:n,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this),rowExpansionStateChanged:this.onRowGroupOpened.bind(this)}),this.addPropertyListeners()}addPropertyListeners(){let{beans:e,stagesRefreshProps:t}=this,n=[e.groupStage,e.filterStage,e.pivotStage,e.aggStage,e.sortStage,e.filterAggStage,e.flattenStage].filter(i=>!!i);this.stages=n;for(let i=n.length-1;i>=0;--i)for(let o of n[i].refreshProps)t.set(o,i);this.addManagedPropertyListeners([...t.keys()],i=>{let o=i.changeSet?.properties;o&&this.onPropChange(o)}),this.addManagedPropertyListener("rowData",()=>this.onPropChange(["rowData"])),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.started=!0,this.rowNodesCountReady?this.refreshModel({step:"group",rowDataUpdated:!0,newData:!0}):this.setInitialData()}setInitialData(){this.gos.get("rowData")&&this.onPropChange(["rowData"])}ensureRowHeightsValid(e,t,n,i){let o,r=!1;do{o=!1;let s=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(s,n),c=Math.min(a,i);for(let u=l;u<=c;u++){let h=this.getRow(u);if(h.rowHeightEstimated){let f=mu(this.beans,h);h.setRowHeight(f.height),o=!0,r=!0}}o&&this.setRowTopAndRowIndex()}while(o);return r}onPropChange(e){let{nodeManager:t,gos:n,beans:i}=this,o=i.groupStage;if(!t)return;let r=new Set(e),s=o?.onPropChange(r),a;r.has("rowData")?a=n.get("rowData"):s&&(a=o?.extractData()),a&&!Array.isArray(a)&&(a=null,ce(1));let l={step:"nothing",changedProps:r};a&&(!s&&!this.isEmpty()&&a.length>0&&n.exists("getRowId")&&!n.get("resetRowDataOnUpdate")?(l.keepRenderedRows=!0,l.animate=!n.get("suppressAnimationFrame"),l.changedRowNodes=new Wk,t.setImmutableRowData(l,a)):(l.rowDataUpdated=!0,l.newData=!0,t.setNewRowData(a),this.rowNodesCountReady=!0));let c=l.rowDataUpdated?"group":this.getRefreshedStage(e);c&&(l.step=c,this.refreshModel(l))}getRefreshedStage(e){let{stages:t,stagesRefreshProps:n}=this,i=t.length,o=i;for(let r=0,s=e.length;r<s&&o;++r)o=Math.min(o,n.get(e[r])??o);return o<i?t[o].step:null}setRowTopAndRowIndex(e){let{beans:t,rowsToDisplay:n}=this,i=t.environment.getDefaultRowHeight(),o=0,r=Ho(this.gos,"normal");for(let s=0,a=n.length;s<a;++s){let l=n[s],c=l.id;if(c!=null&&e?.add(c),l.rowHeight==null){let u=mu(t,l,r,i);l.setRowHeight(u.height,u.estimated)}l.setRowTop(o),l.setRowIndex(s),o+=l.rowHeight}}clearRowTopAndRowIndex(e,t){let n=e.active,i=s=>{s?.id!=null&&!t.has(s.id)&&s.clearRowTopAndRowIndex()},o=s=>{i(s),i(s.detailNode),i(s.sibling);let a=s.childrenAfterGroup;if(!s.hasChildren()||!a)return;let l=s.level==-1;if(!(n&&!l&&!s.expanded))for(let u=0,h=a.length;u<h;++u)o(a[u])},r=this.rootNode;r&&o(r)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay.length}getTopLevelRowCount(){let{rootNode:e,rowsToDisplay:t}=this;if(!e||!t.length)return 0;if(t[0]===e)return 1;let i=e.sibling?.displayed?1:0;return(e.childrenAfterSort?.length??0)+i}getTopLevelRowDisplayedIndex(e){let{beans:t,rootNode:n,rowsToDisplay:i}=this;if(!n||!i.length||i[0]===n)return e;let r=n.childrenAfterSort,s=l=>{let c=r[l];if(this.gos.get("groupHideOpenParents"))for(;c.expanded&&c.childrenAfterSort&&c.childrenAfterSort.length>0;)c=c.childrenAfterSort[0];return c.rowIndex},a=t.footerSvc;return a?a?.getTopDisplayIndex(i,e,r,s):s(e)}getTopLevelIndexFromDisplayedIndex(e){let{rootNode:t,rowsToDisplay:n}=this;if(!t||!n.length||n[0]===t)return e;let o=this.getRow(e);o.footer&&(o=o.sibling);let r=o.parent;for(;r&&r!==t;)o=r,r=o.parent;let s=t.childrenAfterSort?.indexOf(o)??-1;return s>=0?s:e}getRowBounds(e){let t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){this.refreshModel({step:"map",keepRenderedRows:!0,animate:Fg(this.gos)})}onFilterChanged({afterDataChange:e,columns:t}){if(!e){let i=t.length===0||t.some(o=>o.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:i,keepRenderedRows:!0,animate:Fg(this.gos)})}}onSortChanged(){this.refreshModel({step:"sort",keepRenderedRows:!0,animate:Fg(this.gos)})}getType(){return"clientSide"}onValueChanged(){this.refreshModel({step:this.beans.colModel.isPivotActive()?"pivot":"aggregate"})}createChangePath(e){let t=new gw(!1,this.rootNode);return t.active=e,t}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;let{changedRowNodes:t,newData:n,rowDataUpdated:i}=e;return!(!t||n||!i||t.removals.size||t.adds.size)}refreshModel(e){let{nodeManager:t,beans:n,eventSvc:i,started:o,refreshingModel:r}=this;if(!t)return;let s=!!e.rowDataUpdated,a=e.changedPath??(e.changedPath=this.createChangePath(!e.newData&&s));if(o&&s&&i.dispatchEvent({type:"rowDataUpdated"}),!o||r||n.colModel.changeEventsDispatching||this.isSuppressModelUpdateAfterUpdateTransaction(e)){this.rowDataUpdatedPending||(this.rowDataUpdatedPending=s);return}switch(this.rowDataUpdatedPending&&(this.rowDataUpdatedPending=!1,e.step="group"),this.refreshingModel=!0,n.masterDetailSvc?.refreshModel(e),s&&e.step!=="group"&&n.colFilter?.refreshModel(),e.step){case"group":this.doGrouping(e);case"filter":this.doFilter(a);case"pivot":this.doPivot(a);case"aggregate":this.doAggregate(a);case"filter_aggregates":this.doFilterAggregates(a);case"sort":this.doSort(e.changedRowNodes,a);case"map":this.doRowsToDisplay()}let l=new Set;this.setRowTopAndRowIndex(l),this.clearRowTopAndRowIndex(a,l),this.refreshingModel=!1,i.dispatchEvent({type:"modelUpdated",animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack})}isEmpty(){return!this.rootNode?._leafs?.length||!this.beans.colModel?.ready}isRowsToRender(){return this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let n=!1,i=!1,o=[],r=pw(this.gos);return this.forEachNodeAfterFilterAndSort(s=>{if(i)return;if(n&&(s===t||s===e)&&(i=!0,r&&s.group)){$ie(o,s);return}if(!n){if(s!==t&&s!==e)return;n=!0,t===e&&(i=!0)}(!s.group||!r)&&o.push(s)}),o}getTopLevelNodes(){return this.rootNode?.childrenAfterGroup??null}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){let t=this.rowsToDisplay,n=t.length;if(this.isEmpty()||n===0)return-1;let i=0,o=n-1;if(e<=0)return 0;if(t[o].rowTop<=e)return o;let s=-1,a=-1;for(;;){let l=Math.floor((i+o)/2),c=t[l];if(this.isRowInPixel(c,e)||(c.rowTop<e?i=l+1:c.rowTop>e&&(o=l-1),s===i&&a===o))return l;s=i,a=o}}isRowInPixel(e,t){let n=e.rowTop,i=n+e.rowHeight;return n<=t&&i>t}forEachLeafNode(e){let t=this.rootNode?._leafs;if(t)for(let n=0,i=t.length;n<i;++n)e(t[n],n)}forEachNode(e,t=!1){this.depthFirstSearchRowNodes(e,t)}forEachDisplayedNode(e){let t=this.rowsToDisplay;for(let n=0,i=t.length;n<i;++n)e(t[n],n)}forEachNodeAfterFilter(e,t=!1){this.depthFirstSearchRowNodes(e,t,n=>n.childrenAfterAggFilter)}forEachNodeAfterFilterAndSort(e,t=!1){this.depthFirstSearchRowNodes(e,t,n=>n.childrenAfterSort)}forEachPivotNode(e,t,n){let{colModel:i,rowGroupColsSvc:o}=this.beans;if(!i.isPivotMode())return;if(!o?.columns.length){e(this.rootNode,0);return}let r=n?"childrenAfterSort":"childrenAfterGroup";this.depthFirstSearchRowNodes(e,t,s=>s.leafGroup?null:s[r])}depthFirstSearchRowNodes(e,t=!1,n=r=>r.childrenAfterGroup,i=this.rootNode,o=0){let r=o;if(!i)return r;let s=i===this.rootNode;if(s||e(i,r++),i.hasChildren()&&!i.footer){let a=n(i);if(a){let l=this.beans.footerSvc;r=l?.addTotalRows(r,i,e,t,s,"top")??r;for(let c of a)r=this.depthFirstSearchRowNodes(e,t,n,c,r);return l?.addTotalRows(r,i,e,t,s,"bottom")??r}}return r}doAggregate(e){let t=this.rootNode;t&&this.beans.aggStage?.execute({rowNode:t,changedPath:e})}doFilterAggregates(e){let t=this.rootNode,n=this.beans.filterAggStage;if(n){n.execute({rowNode:t,changedPath:e});return}t.childrenAfterAggFilter=t.childrenAfterFilter}doSort(e,t){let n=this.beans.sortStage;if(n){n.execute({rowNode:this.rootNode,changedRowNodes:e,changedPath:t});return}t.forEachChangedNodeDepthFirst(i=>{i.childrenAfterSort=i.childrenAfterAggFilter.slice(0),Hie(i)})}doGrouping(e){let t=this.rootNode,i=this.beans.groupStage?.execute({rowNode:t,changedRowNodes:e.changedRowNodes,changedPath:e.changedPath,afterColumnsChanged:!!e.afterColumnsChanged});if(i===void 0){let o=t._leafs;t.childrenAfterGroup=o,t.updateHasChildren();let r=t.sibling;r&&(r.childrenAfterGroup=o)}(i||e.rowDataUpdated)&&this.beans.colFilter?.refreshModel(),!this.rowCountReady&&this.rowNodesCountReady&&(this.rowCountReady=!0,this.eventSvc.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){let t=this.beans.filterStage;if(t){t.execute({rowNode:this.rootNode,changedPath:e});return}e.forEachChangedNodeDepthFirst(n=>{n.childrenAfterFilter=n.childrenAfterGroup,pie(n)},!0)}doPivot(e){this.beans.pivotStage?.execute({rowNode:this.rootNode,changedPath:e})}getRowNode(e){let t=this.nodeManager?.getRowNode(e);return typeof t=="object"?t:typeof e=="string"&&e.indexOf(E4)===0?this.beans.groupStage?.getNode(e):void 0}batchUpdateRowData(e,t){if(!this.asyncTransactionsTimer){this.asyncTransactions=[];let n=this.gos.get("asyncTransactionWaitMillis");this.asyncTransactionsTimer=setTimeout(()=>this.executeBatchUpdateRowData(),n)}this.asyncTransactions.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){let e=this.asyncTransactionsTimer;e&&(clearTimeout(e),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){let{nodeManager:e,beans:t,eventSvc:n,asyncTransactions:i}=this;if(!e)return;t.valueCache?.onDataChanged();let o=[],r=[],s=new Wk;for(let{rowDataTransaction:a,callback:l}of i??[]){this.rowNodesCountReady=!0;let c=e.updateRowData(a,s);o.push(c),l&&r.push(l.bind(null,c))}this.commitTransactions(s),r.length>0&&setTimeout(()=>{for(let a=0,l=r.length;a<l;a++)r[a]()},0),o.length>0&&n.dispatchEvent({type:"asyncTransactionsFlushed",results:o}),this.asyncTransactionsTimer=0,this.asyncTransactions=null}updateRowData(e){let t=this.nodeManager;if(!t)return null;this.beans.valueCache?.onDataChanged(),this.rowNodesCountReady=!0;let n=new Wk,i=t.updateRowData(e,n);return this.commitTransactions(n),i}commitTransactions(e){this.refreshModel({step:"group",rowDataUpdated:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedRowNodes:e,changedPath:this.createChangePath(!0)})}doRowsToDisplay(){let{beans:e,rootNode:t}=this,n=e.flattenStage;if(n){this.rowsToDisplay=n.execute({rowNode:t});return}let i=this.rootNode.childrenAfterSort??[];for(let o of i)o.setUiLevel(0);this.rowsToDisplay=i}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepUndoRedoStack:!0})}resetRowHeights(){let e=this.rootNode;if(!e)return;let t=this.resetRowHeightsForAllRowNodes();e.setRowHeight(e.rowHeight,!0);let n=e.sibling;n?.setRowHeight(n.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);let n=t.detailNode;n?.setRowHeight(n.rowHeight,!0);let i=t.sibling;i?.setRowHeight(i.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){e.rowHeightChanged&&!this.beans.rowAutoHeight?.active&&this.resetRowHeights()}onGridReady(){this.started||this.setInitialData()}destroy(){super.destroy(),this.nodeManager=this.destroyBean(this.nodeManager),this.started=!1,this.rootNode=null,this.rowsToDisplay=[],this.asyncTransactions=null,clearTimeout(this.asyncTransactionsTimer)}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}},$ie=(e,t)=>{let n=t.childrenAfterGroup;if(n)for(let i=0,o=n.length;i<o;++i){let r=n[i];r.data&&e.push(r),r.group&&$ie(e,r)}};function mze(e){e.expansionSvc?.onGroupExpandedOrCollapsed()}function gze(e,t){let n=Cu(e);n&&((!t||t==="everything")&&(t="group"),n.refreshModel({step:t,keepRenderedRows:!0,animate:!e.gos.get("suppressAnimationFrame")}))}function vze(e){return Cu(e)?.isEmpty()??!0}function _ze(e,t){Cu(e)?.forEachLeafNode(t)}function yze(e,t){Cu(e)?.forEachNodeAfterFilter(t)}function bze(e,t){Cu(e)?.forEachNodeAfterFilterAndSort(t)}function Cze(e,t){return e.frameworkOverrides.wrapIncoming(()=>Cu(e)?.updateRowData(t))}function wze(e,t,n){e.frameworkOverrides.wrapIncoming(()=>Cu(e)?.batchUpdateRowData(t,n))}function xze(e){e.frameworkOverrides.wrapIncoming(()=>Cu(e)?.flushAsyncTransactions())}function Sze(e){return e.selectionSvc?.getBestCostNodeSelection()}var TI={moduleName:"ClientSideRowModel",version:we,rowModels:["clientSide"],beans:[fze,dze],dependsOn:[aie]},Eze={moduleName:"ClientSideRowModelApi",version:we,apiFunctions:{onGroupExpandedOrCollapsed:mze,refreshClientSideRowModel:gze,isRowDataEmpty:vze,forEachLeafNode:_ze,forEachNodeAfterFilter:yze,forEachNodeAfterFilterAndSort:bze,applyTransaction:Cze,applyTransactionAsync:wze,flushAsyncTransactions:xze,getBestCostNodeSelection:Sze,resetRowHeights:Vie,onRowHeightChanged:zie},dependsOn:[XBe,eze]},Dze=class extends te{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel}serialize(e,t={}){let{allColumns:n,columnKeys:i,skipRowGroups:o,exportRowNumbers:r}=t,s=this.getColumnsToExport({allColumns:n,skipRowGroups:o,columnKeys:i,exportRowNumbers:r});return[this.prepareSession(s),this.prependContent(t),this.exportColumnGroups(t,s),this.exportHeaders(t,s),this.processPinnedTopRows(t,s),this.processRows(t,s),this.processPinnedBottomRows(t,s),this.appendContent(t)].reduce((a,l)=>l(a),e).parse()}processRow(e,t,n,i){let o=t.shouldRowBeSkipped||(()=>!1),s=t.rowPositions!=null||!!t.onlySelected,a=this.gos.get("groupHideOpenParents")&&!s,l=this.colModel.isPivotMode()?i.leafGroup:!i.group,c=!!i.footer,u=i.allChildrenCount===1&&i.childrenAfterGroup?.length===1&&Tke(this.gos,i);if(!l&&!c&&(t.skipRowGroups||u||a)||t.onlySelected&&!i.isSelected()||t.skipPinnedTop&&i.rowPinned==="top"||t.skipPinnedBottom&&i.rowPinned==="bottom"||i.stub||i.level===-1&&!l&&!c||o(at(this.gos,{node:i})))return;let m=e.onNewBodyRow(i);if(n.forEach((_,y)=>{m.onColumn(_,y,i)}),t.getCustomContentBelowRow){let _=t.getCustomContentBelowRow(at(this.gos,{node:i}));_&&e.addCustomContent(_)}}appendContent(e){return t=>{let n=e.appendContent;return n&&t.addCustomContent(n),t}}prependContent(e){return t=>{let n=e.prependContent;return n&&t.addCustomContent(n),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return n=>{if(!e.skipColumnGroupHeaders){let i=new zte,{colGroupSvc:o}=this.beans,r=o?o.createColumnGroups({columns:t,idCreator:i,pinned:null,isStandaloneStructure:!0}):t;this.recursivelyAddHeaderGroups(r,n,e.processGroupHeaderCallback)}return n}}exportHeaders(e,t){return n=>{if(!e.skipColumnHeaders){let i=n.onNewHeaderRow();t.forEach((o,r)=>{i.onColumn(o,r,void 0)})}return n}}processPinnedTopRows(e,t){return n=>{let i=this.processRow.bind(this,n,e,t);return e.rowPositions?e.rowPositions.filter(o=>o.rowPinned==="top").sort((o,r)=>o.rowIndex-r.rowIndex).map(o=>this.pinnedRowModel?.getPinnedTopRow(o.rowIndex)).forEach(i):this.pinnedRowModel?.isManual()||this.pinnedRowModel?.forEachPinnedRow("top",i),n}}processRows(e,t){return n=>{let i=this.rowModel,o=$i(this.gos,i),r=Yg(this.gos,i),s=!o&&e.onlySelected,a=this.processRow.bind(this,n,e,t),{exportedRows:l="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(c=>c.rowPinned==null).sort((c,u)=>c.rowIndex-u.rowIndex).map(c=>i.getRow(c.rowIndex)).forEach(a);else if(this.colModel.isPivotMode())o?i.forEachPivotNode(a,!0,l==="filteredAndSorted"):r?i.forEachNodeAfterFilterAndSort(a,!0):i.forEachNode(a);else if(e.onlySelectedAllPages||s){let c=this.beans.selectionSvc?.getSelectedNodes()??[];this.replicateSortedOrder(c),c.forEach(a)}else l==="all"?i.forEachNode(a):o||r?i.forEachNodeAfterFilterAndSort(a,!0):i.forEachNode(a);return n}}replicateSortedOrder(e){let{sortSvc:t,rowNodeSorter:n}=this.beans;if(!t||!n)return;let i=t.getSortOptions(),o=(r,s)=>r.rowIndex!=null&&s.rowIndex!=null?r.rowIndex-s.rowIndex:r.level===s.level?r.parent?.id===s.parent?.id?n.compareRowNodes(i,{rowNode:r,currentPos:r.rowIndex??-1},{rowNode:s,currentPos:s.rowIndex??-1}):o(r.parent,s.parent):r.level>s.level?o(r.parent,s):o(r,s.parent);e.sort(o)}processPinnedBottomRows(e,t){return n=>{let i=this.processRow.bind(this,n,e,t);return e.rowPositions?e.rowPositions.filter(o=>o.rowPinned==="bottom").sort((o,r)=>o.rowIndex-r.rowIndex).map(o=>this.pinnedRowModel?.getPinnedBottomRow(o.rowIndex)).forEach(i):this.pinnedRowModel?.isManual()||this.pinnedRowModel?.forEachPinnedRow("bottom",i),n}}getColumnsToExport(e){let{allColumns:t=!1,skipRowGroups:n=!1,exportRowNumbers:i=!1,columnKeys:o}=e,{colModel:r,gos:s,visibleCols:a}=this,l=r.isPivotMode(),c=f=>ed(f)?!1:!Kc(f)||i;if(o?.length)return r.getColsForKeys(o).filter(c);let u=s.get("treeData"),h=[];return t&&!l?h=r.getCols():h=a.allCols,h=h.filter(f=>c(f)&&(n&&!u?!X4(f):!0)),h}recursivelyAddHeaderGroups(e,t,n){let i=[];for(let o of e){let r=o;if(r.getChildren)for(let s of r.getChildren()??[])i.push(s)}e.length>0&&Hi(e[0])&&this.doAddHeaderHeader(t,e,n),i&&i.length>0&&this.recursivelyAddHeaderGroups(i,t,n)}doAddHeaderHeader(e,t,n){let i=e.onNewHeaderGroupingRow(),o=0;for(let r of t){let s=r,a;n?a=n(at(this.gos,{columnGroup:s})):a=this.beans.colNames.getDisplayNameForColumnGroup(s,"header");let c=(s.isExpandable()?s.getLeafColumns():[]).reduce((u,h,f,m)=>{let _=Hn(u);return h.getColumnGroupShow()==="open"?(!_||_[1]!=null)&&(_=[f],u.push(_)):_&&_[1]==null&&(_[1]=f-1),f===m.length-1&&_&&_[1]==null&&(_[1]=f),u},[]);i.onColumn(s,a||"",o++,s.getLeafColumns().length-1,c)}}},kze={moduleName:"SharedExport",version:we,beans:[Dze]},Nee=`\r
`,Ize=class extends iNe{constructor(e){super(e),this.config=e,this.isFirstLine=!0,this.result="";let{suppressQuotes:t,columnSeparator:n}=e;this.suppressQuotes=t,this.columnSeparator=n}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,Nee),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((n,i)=>{i!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(n.data.value||""),n.mergeAcross&&this.appendEmptyCells(n.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,n,i){n!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(i)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,n){t!=0&&(this.result+=this.columnSeparator);let i=this.extractRowCellValue(e,t,t,"csv",n);this.result+=this.putInQuotes(i.valueFormatted??i.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(ce(53),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=Nee),this.isFirstLine=!1}},Mze=class extends nNe{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.colModel=e.colModel,this.colNames=e.colNames,this.rowGroupColsSvc=e.rowGroupColsSvc,this.valueSvc=e.valueSvc}getMergedParams(e){let t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){ce(51);return}let t=this.getMergedParams(e),n=this.getData(t),i=new Blob(["\uFEFF",n],{type:"text/plain"}),o=typeof t.fileName=="function"?t.fileName(at(this.gos,{})):t.fileName;oNe(this.getFileName(o),i)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){let n=t?Object.assign({},e):this.getMergedParams(e);return this.getData(n)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){let{colModel:t,colNames:n,rowGroupColsSvc:i,valueSvc:o,gos:r}=this,{processCellCallback:s,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c,suppressQuotes:u,columnSeparator:h}=e;return new Ize({colModel:t,colNames:n,valueSvc:o,gos:r,processCellCallback:s||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:l||void 0,processRowGroupCallback:c||void 0,suppressQuotes:u||!1,columnSeparator:h||",",rowGroupColsSvc:i})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function Rze(e,t){return e.csvCreator?.getDataAsCsv(t)}function Tze(e,t){e.csvCreator?.exportDataAsCsv(t)}var Pze={moduleName:"CsvExport",version:we,beans:[Mze],apiFunctions:{getDataAsCsv:Rze,exportDataAsCsv:Tze},dependsOn:[kze]},Aze=class extends te{constructor(e,t,n){super(),this.id=e,this.parentCache=t,this.params=n,this.state="needsLoading",this.version=0,this.startRow=e*n.blockSize,this.endRow=this.startRow+n.blockSize}load(){this.state="loading",this.loadFromDatasource()}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed"),this.dispatchLocalEvent({type:"loadComplete"})}pageLoaded(e,t,n){this.successCommon(e,{rowData:t,rowCount:n})}isRequestMostRecentAndLive(e){let t=e===this.version,n=this.isAlive();return t&&n}successCommon(e,t){this.dispatchLocalEvent({type:"loadComplete"}),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}postConstruct(){this.rowNodes=[];let{params:{blockSize:e,rowHeight:t},startRow:n,beans:i,rowNodes:o}=this;for(let r=0;r<e;r++){let s=n+r,a=new vu(i);a.setRowHeight(t),a.uiLevel=0,a.setRowIndex(s),a.setRowTop(t*s),o.push(a)}}getBlockStateJson(){let{id:e,startRow:t,endRow:n,state:i}=this;return{id:""+e,state:{blockNumber:e,startRow:t,endRow:n,pageStatus:i}}}setDataAndId(e,t,n){Se(t)?e.setDataAndId(t,n.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){let e=this.createLoadParams();if(di(this.params.datasource.getRows)){ce(90);return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}createLoadParams(){let{startRow:e,endRow:t,version:n,params:{sortModel:i,filterModel:o},gos:r}=this;return{startRow:e,endRow:t,successCallback:this.pageLoaded.bind(this,n),failCallback:this.pageLoadFailed.bind(this,n),sortModel:i,filterModel:o,context:at(r,{}).context}}forEachNode(e,t,n){this.rowNodes.forEach((i,o)=>{this.startRow+o<n&&e(i,t.value++)})}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.value++);let n=e-this.startRow;return this.rowNodes[n]}processServerResult(e){let{rowNodes:t,beans:n}=this;t.forEach((o,r)=>{let s=e.rowData?e.rowData[r]:void 0;!o.id&&o.alreadyRendered&&s&&(t[r]=new vu(n),t[r].setRowIndex(o.rowIndex),t[r].setRowTop(o.rowTop),t[r].setRowHeight(o.rowHeight),o.clearRowTopAndRowIndex()),this.setDataAndId(t[r],s,this.startRow+r)});let i=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,i)}destroy(){for(let e of this.rowNodes)e.clearRowTopAndRowIndex();super.destroy()}},Oze=2,Fze=class extends te{constructor(e){super(),this.params=e,this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount}getRow(e,t=!1){let n=Math.floor(e/this.params.blockSize),i=this.blocks[n];if(!i){if(t)return;i=this.createBlock(n)}return i.getRow(e)}createBlock(e){let t=this.params,n=this.createBean(new Aze(e,this,t));return this.blocks[n.id]=n,this.blockCount++,this.purgeBlocksIfNeeded(n),t.rowNodeBlockLoader.addBlock(n),n}refreshCache(){if(this.blockCount==0){this.purgeCache();return}for(let t of this.getBlocksInOrder())t.setStateWaitingToLoad();this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){for(let e of this.getBlocksInOrder())this.destroyBlock(e);super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(fu(this.gos,`InfiniteCache - onPageLoaded: page = ${e.id}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){let t=this.getBlocksInOrder().filter(s=>s!=e),n=(s,a)=>a.lastAccessed-s.lastAccessed;t.sort(n);let i=this.params.maxBlocksInCache>0,o=i?this.params.maxBlocksInCache-1:null,r=Oze-1;t.forEach((s,a)=>{let l=s.state==="needsLoading"&&a>=r,c=i?a>=o:!1;if(l||c){if(this.isBlockCurrentlyDisplayed(s)||this.isBlockFocused(s))return;this.removeBlockFromCache(s)}})}isBlockFocused(e){let t=this.beans.focusSvc.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;let{startRow:n,endRow:i}=e;return t.rowIndex>=n&&t.rowIndex<i}isBlockCurrentlyDisplayed(e){let{startRow:t,endRow:n}=e;return this.beans.rowRenderer.isRangeInRenderedViewport(t,n-1)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){let{blockSize:n,overflowSize:i}=this.params,r=(e.id+1)*n+i;this.rowCount<r&&(this.rowCount=r)}}setRowCount(e,t){this.rowCount=e,Se(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){let t={value:0};for(let n of this.getBlocksInOrder())n.forEachNode(e,t,this.rowCount)}getBlocksInOrder(){let e=(n,i)=>n.id-i.id;return Object.values(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.id],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventSvc.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){let e=[];for(let t of this.getBlocksInOrder())t.id*this.params.blockSize>=this.rowCount&&e.push(t);if(e.length>0)for(let t of e)this.destroyBlock(t)}purgeCache(){for(let e of this.getBlocksInOrder())this.removeBlockFromCache(e);this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){let n=[],i=-1,o=!1,r={value:0},s=!1;for(let l of this.getBlocksInOrder())if(!s){if(o&&i+1!==l.id){s=!0;continue}i=l.id,l.forEachNode(c=>{let u=c===e||c===t;(o||u)&&n.push(c),u&&(o=!o)},r,this.rowCount)}return s||o?[]:n}},Lze=class extends te{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){if(this.gos.get("rowModelType")!=="infinite")return;let e=this.beans,t=new vu(e);this.rootNode=t,t.level=-1,this.rowHeight=gp(e),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache())}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy(),this.rootNode=null}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.beans.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.reset.bind(this),sortChanged:this.reset.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.dispatchModelUpdatedEvent.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=gp(this.beans),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onColumnEverything(){let e;this.cacheParams?e=!rw(this.cacheParams.sortModel,this.beans.sortSvc?.getSortModel()??[]):e=!0,e&&this.reset()}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?.getRowNodesInRange(e,t)??[]}reset(){if(!this.datasource)return;Gg(this.gos)!=null||this.beans.selectionSvc?.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventSvc.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){this.destroyCache();let e=this.beans,{filterManager:t,sortSvc:n,rowNodeBlockLoader:i,eventSvc:o,gos:r}=e;this.cacheParams={datasource:this.datasource,filterModel:t?.getFilterModel()??{},sortModel:n?.getSortModel()??[],rowNodeBlockLoader:i,initialRowCount:r.get("infiniteInitialRowCount"),maxBlocksInCache:r.get("maxBlocksInCache"),rowHeight:gp(e),overflowSize:r.get("cacheOverflowSize"),blockSize:r.get("cacheBlockSize"),lastAccessedSequence:{value:0}},this.infiniteCache=this.createBean(new Fze(this.cacheParams)),o.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache=this.destroyBean(this.infiniteCache)}getRow(e){let t=this.infiniteCache;if(t&&!(e>=t.getRowCount()))return t.getRow(e)}getRowNode(e){let t;return this.forEachNode(n=>{n.id===e&&(t=n)}),t}forEachNode(e){this.infiniteCache?.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){let t=Math.floor(e/this.rowHeight),n=this.getRowCount()-1;return t>n?n:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache?.refreshCache()}purgeCache(){this.infiniteCache?.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?.isLastRowIndexKnown()??!1}setRowCount(e,t){this.infiniteCache?.setRowCount(e,t)}resetRowHeights(){}onRowHeightChanged(){}};function Nze(e){kI(e)?.refreshCache()}function Bze(e){kI(e)?.purgeCache()}function zze(e){return kI(e)?.getRowCount()}var Vze=class extends te{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=Pke(this.gos);let e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=zo(this,this.performCheckBlocksToLoad.bind(this),e))}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){Ba(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad()}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){fu(this.gos,"RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}let e=this.maxConcurrentRequests!=null?this.maxConcurrentRequests-this.activeBlockLoadsCount:1,t=this.blocks.filter(n=>n.state==="needsLoading").slice(0,e);this.activeBlockLoadsCount+=t.length;for(let n of t)n.load();this.printCacheStatus()}getBlockState(){let e={};return this.blocks.forEach(t=>{let{id:n,state:i}=t.getBlockStateJson();e[n]=i}),e}printCacheStatus(){fu(this.gos,`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}},Hze={moduleName:"InfiniteRowModelCore",version:we,rowModels:["infinite"],beans:[Lze,Vze]},$ze={moduleName:"InfiniteRowModel",version:we,apiFunctions:{refreshInfiniteCache:Nze,purgeInfiniteCache:Bze,getInfiniteRowCount:zze},dependsOn:[Hze,tze]},jze="\u2191",Gze="\u2193",Uze={tag:"span",children:[{tag:"span",ref:"eDelta",cls:"ag-value-change-delta"},{tag:"span",ref:"eValue",cls:"ag-value-change-value"}]},Wze=class extends Mn{constructor(){super(Uze),this.eValue=Ce,this.eDelta=Ce,this.refreshCount=0}init(e){this.refresh(e,!0)}showDelta(e,t){let n=Math.abs(t),i=e.formatValue(n),o=Se(i)?i:n,r=t>=0,s=this.eDelta;r?s.textContent=jze+o:s.textContent=Gze+o,s.classList.toggle("ag-value-change-delta-up",r),s.classList.toggle("ag-value-change-delta-down",!r)}setTimerToRemoveDelta(){this.refreshCount++;let e=this.refreshCount;this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),Vo(this.eDelta)}refresh(e,t=!1){let{value:n,valueFormatted:i}=e,{eValue:o,lastValue:r,beans:s}=this;if(n===r||(Se(i)?o.textContent=i:Se(n)?o.textContent=n:Vo(o),s.filterManager?.isSuppressFlashingCellsBecauseFiltering()))return!1;let a=n&&typeof n=="object"&&"toNumber"in n?n.toNumber():n,l=r&&typeof r=="object"&&"toNumber"in r?r.toNumber():r;if(a===l)return!1;if(typeof a=="number"&&typeof l=="number"){let c=a-l;this.showDelta(e,c)}return r&&o.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=n,!0}},qze=".ag-value-slide-out{opacity:1}:where(.ag-ltr) .ag-value-slide-out{margin-right:5px;transition:opacity 3s,margin-right 3s}:where(.ag-rtl) .ag-value-slide-out{margin-left:5px;transition:opacity 3s,margin-left 3s}:where(.ag-ltr,.ag-rtl) .ag-value-slide-out{transition-timing-function:linear}.ag-value-slide-out-end{opacity:0}:where(.ag-ltr) .ag-value-slide-out-end{margin-right:10px}:where(.ag-rtl) .ag-value-slide-out-end{margin-left:10px}",Kze={tag:"span",children:[{tag:"span",ref:"eCurrent",cls:"ag-value-slide-current"}]},Zze=class extends Mn{constructor(){super(Kze),this.eCurrent=Ce,this.refreshCount=0,this.registerCSS(qze)}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;let e=this.refreshCount;this.ePrevious?.remove();let{beans:t,eCurrent:n}=this,i=ji({tag:"span",cls:"ag-value-slide-previous ag-value-slide-out"});this.ePrevious=i,i.textContent=n.textContent,this.getGui().insertBefore(i,n),t.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.ePrevious?.remove(),this.ePrevious=null)},3e3)})}refresh(e,t=!1){let n=e.value;if(di(n)&&(n=""),n===this.lastValue||this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering())return!1;t||this.addSlideAnimation(),this.lastValue=n;let i=this.eCurrent;return Se(e.valueFormatted)?i.textContent=e.valueFormatted:Se(e.value)?i.textContent=n:Vo(i),!0}},Yze=class extends te{constructor(){super(...arguments),this.beanName="cellFlashSvc",this.nextAnimationTime=null,this.nextAnimationCycle=null,this.animations={highlight:new Map,"data-changed":new Map}}animateCell(e,t,n=this.beans.gos.get("cellFlashDuration"),i=this.beans.gos.get("cellFadeDuration")){let o=this.animations[t];o.delete(e);let r=Date.now(),s=r+n,a=r+n+i,l={phase:"flash",flashEndTime:s,fadeEndTime:a};o.set(e,l);let c=`ag-cell-${t}`,u=`${c}-animation`,{comp:h,eGui:{style:f}}=e;h.toggleCss(c,!0),h.toggleCss(u,!1),f.removeProperty("transition"),f.removeProperty("transition-delay"),this.nextAnimationTime&&s+15<this.nextAnimationTime&&(clearTimeout(this.nextAnimationCycle),this.nextAnimationCycle=null,this.nextAnimationTime=null),this.nextAnimationCycle||(this.beans.frameworkOverrides.wrapIncoming(()=>{this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),n)}),this.nextAnimationTime=s)}advanceAnimations(){let e=Date.now(),t=null;for(let n of Object.keys(this.animations)){let i=this.animations[n],o=`ag-cell-${n}`,r=`${o}-animation`;for(let[s,a]of i){if(!s.isAlive()||!s.comp){i.delete(s);continue}let{phase:l,flashEndTime:c,fadeEndTime:u}=a,h=l==="flash"?c:u;if(!(e+15>=h)){t=Math.min(h,t??1/0);continue}let{comp:m,eGui:{style:_}}=s;switch(l){case"flash":m.toggleCss(o,!1),m.toggleCss(r,!0),_.transition=`background-color ${u-c}ms`,_.transitionDelay=`${c-e}ms`,t=Math.min(u,t??1/0),a.phase="fade";break;case"fade":m.toggleCss(o,!1),m.toggleCss(r,!1),_.removeProperty("transition"),_.removeProperty("transition-delay"),i.delete(s);break}}}t==null?(this.nextAnimationTime=null,this.nextAnimationCycle=null):t&&(this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),t-e),this.nextAnimationTime=t)}onFlashCells(e,t){if(!e.comp)return;let n=QPe(e.cellPosition);t.cells[n]&&this.animateCell(e,"highlight")}flashCell(e,t){this.animateCell(e,"data-changed",t?.flashDuration,t?.fadeDuration)}destroy(){for(let e of Object.keys(this.animations))this.animations[e].clear()}};function Qze(e,t={}){let{cellFlashSvc:n}=e;n&&e.frameworkOverrides.wrapIncoming(()=>{for(let i of e.rowRenderer.getCellCtrls(t.rowNodes,t.columns))n.flashCell(i,t)})}var Jze={moduleName:"HighlightChanges",version:we,beans:[Yze],userComponents:{agAnimateShowChangeCellRenderer:Wze,agAnimateSlideCellRenderer:Zze},apiFunctions:{flashCells:Qze}};function Xze(e){return e.stateSvc?.getState()??{}}function e4e(e,t,n){return e.stateSvc?.setState(t,n)}function Bee(e){return e=g({},e),e.version||(e.version="32.1.0"),e.version==="32.1.0"&&(e=t4e(e)),e.version=we,e}function t4e(e){return e.cellSelection=n4e(e,"rangeSelection"),e}function n4e(e,t){if(e&&typeof e=="object")return e[t]}var i4e=class extends te{constructor(){super(...arguments),this.beanName="stateSvc",this.updateRowGroupExpansionStateTimer=0,this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=zo(this,()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=zo(this,()=>{this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(this.updateCachedState("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowGroupExpansion",void 0)):(this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("ssrmRowGroupExpansion",void 0))},0),this.onRowSelectedDebounced=zo(this,()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}postConstruct(){let{gos:e,ctrlsSvc:t,colDelayRenderSvc:n}=this.beans;this.isClientSideRowModel=$i(e);let i=Bee(e.get("initialState")??{}),o=i.partialColumnState;delete i.partialColumnState,this.cachedState=i;let r=this.suppressEventsAndDispatchInitEvent.bind(this);t.whenReady(this,()=>r(()=>this.setupStateOnGridReady(i))),(i.columnOrder||i.columnVisibility||i.columnSizing||i.columnPinning||i.columnGroup)&&n?.hideColumns("columnState");let[s,a,l]=this.addManagedEventListeners({newColumnsLoaded:({source:c})=>{c==="gridInitializing"&&(s(),r(()=>{this.setupStateOnColumnsInitialised(i,!!o),n?.revealColumns("columnState")}))},rowCountReady:()=>{a?.(),r(()=>this.setupStateOnRowCountReady(i))},firstDataRendered:()=>{l?.(),r(()=>this.setupStateOnFirstDataRendered(i))}})}destroy(){super.destroy(),clearTimeout(this.updateRowGroupExpansionStateTimer),this.queuedUpdateSources.clear()}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setState(e,t){let n=Bee(e);delete n.partialColumnState,this.cachedState=n,this.startSuppressEvents();let i="api",o=t?new Set(t):void 0;this.setGridReadyState(n,i,o),this.setColumnsInitialisedState(n,i,!!o,o),this.setRowCountState(n,i,o),setTimeout(()=>{this.isAlive()&&this.setFirstDataRenderedState(n,i,o),this.stopSuppressEvents(i)})}setGridReadyState(e,t,n){t==="api"&&!n?.has("sideBar")&&this.beans.sideBar?.comp?.setState(e.sideBar),this.updateCachedState("sideBar",this.getSideBarState())}setupStateOnGridReady(e){this.setGridReadyState(e,"gridInitializing");let t=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:t,sideBarUpdated:t})}updateColumnAndGroupState(){this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState())}setColumnsInitialisedState(e,t,n,i){this.setColumnState(e,t,n,i),this.setColumnGroupState(e,t,i),this.updateColumnAndGroupState()}setupStateOnColumnsInitialised(e,t){this.setColumnsInitialisedState(e,"gridInitializing",t);let n=i=>()=>this.updateColumnState([i]);this.addManagedEventListeners({columnValueChanged:n("aggregation"),columnMoved:n("columnOrder"),columnPinned:n("columnPinning"),columnResized:n("columnSizing"),columnVisible:n("columnVisibility"),columnPivotChanged:n("pivot"),columnPivotModeChanged:n("pivot"),columnRowGroupChanged:n("rowGroup"),sortChanged:n("sort"),newColumnsLoaded:this.updateColumnAndGroupState.bind(this),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setRowCountState(e,t,n){let{filter:i,rowGroupExpansion:o,ssrmRowGroupExpansion:r,rowSelection:s,pagination:a}=e,l=(u,h)=>!n?.has(u)&&(h||t==="api");l("filter",i)&&this.setFilterState(i),l("rowGroupExpansion",o)&&this.setRowGroupExpansionState(r,o,t),l("rowSelection",s)&&this.setRowSelectionState(s,t),l("pagination",a)&&this.setPaginationState(a,t);let c=this.updateCachedState.bind(this);c("filter",this.getFilterState()),this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(c("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),c("rowGroupExpansion",void 0)):(c("rowGroupExpansion",this.getRowGroupExpansionState()),c("ssrmRowGroupExpansion",void 0)),c("rowSelection",this.getRowSelectionState()),c("pagination",this.getPaginationState())}setupStateOnRowCountReady(e){this.setRowCountState(e,"gridInitializing");let t=this.updateCachedState.bind(this),n=()=>{this.updateRowGroupExpansionStateTimer=0,this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(t("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),t("rowGroupExpansion",void 0)):(t("rowGroupExpansion",this.getRowGroupExpansionState()),t("ssrmRowGroupExpansion",void 0))},i=()=>t("filter",this.getFilterState()),{gos:o,colFilter:r}=this.beans;this.addManagedEventListeners({filterChanged:i,rowExpansionStateChanged:this.onRowGroupOpenedDebounced,expandOrCollapseAll:n,columnRowGroupChanged:n,rowDataUpdated:()=>{(o.get("groupDefaultExpanded")!==0||o.get("isGroupOpenByDefault"))&&(this.updateRowGroupExpansionStateTimer||(this.updateRowGroupExpansionStateTimer=setTimeout(n)))},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:s=>{(s.newPage||s.newPageSize)&&t("pagination",this.getPaginationState())}}),r&&this.addManagedListeners(r,{filterStateChanged:i})}setFirstDataRenderedState(e,t,n){let{scroll:i,cellSelection:o,focusedCell:r,columnOrder:s,rowPinning:a}=e,l=(h,f)=>!n?.has(h)&&(f||t==="api");l("focusedCell",r)&&this.setFocusedCellState(r),l("cellSelection",o)&&this.setCellSelectionState(o),l("scroll",i)&&this.setScrollState(i),l("rowPinning",a)&&this.setRowPinningState(a),this.setColumnPivotState(!!s?.orderedColIds,t);let c=this.updateCachedState.bind(this);c("sideBar",this.getSideBarState()),c("focusedCell",this.getFocusedCellState());let u=this.getRangeSelectionState();c("rangeSelection",u),c("cellSelection",u),c("scroll",this.getScrollState())}setupStateOnFirstDataRendered(e){this.setFirstDataRenderedState(e,"gridInitializing");let t=this.updateCachedState.bind(this),n=()=>t("focusedCell",this.getFocusedCellState());this.addManagedEventListeners({cellFocused:n,cellFocusCleared:n,cellSelectionChanged:i=>{if(i.finished){let o=this.getRangeSelectionState();t("rangeSelection",o),t("cellSelection",o)}},bodyScrollEnd:()=>t("scroll",this.getScrollState()),pinnedRowsChanged:()=>t("rowPinning",this.getRowPinningState())})}getColumnState(){let e=this.beans;return XLe(lI(e),e.colModel.isPivotMode())}setColumnState(e,t,n,i){let{sort:o,rowGroup:r,aggregation:s,pivot:a,columnPinning:l,columnVisibility:c,columnSizing:u,columnOrder:h}=e,f=!1,m=(Te,ue)=>{let De=!i?.has(Te)&&!!(ue||t==="api");return f||(f=De),De},_={},y=Te=>{let ue=_[Te];return ue||(ue={colId:Te},_[Te]=ue,ue)},w={},C=m("sort",o);C&&o?.sortModel.forEach(({colId:Te,sort:ue},De)=>{let Ne=y(Te);Ne.sort=ue,Ne.sortIndex=De}),(C||!n)&&(w.sort=null,w.sortIndex=null);let S=m("rowGroup",r);S&&r?.groupColIds.forEach((Te,ue)=>{let De=y(Te);De.rowGroup=!0,De.rowGroupIndex=ue}),(S||!n)&&(w.rowGroup=null,w.rowGroupIndex=null);let I=m("aggregation",s);I&&s?.aggregationModel.forEach(({colId:Te,aggFunc:ue})=>{y(Te).aggFunc=ue}),(I||!n)&&(w.aggFunc=null);let O=m("pivot",a);O&&(a?.pivotColIds.forEach((Te,ue)=>{let De=y(Te);De.pivot=!0,De.pivotIndex=ue}),this.gos.updateGridOptions({options:{pivotMode:!!a?.pivotMode},source:t})),(O||!n)&&(w.pivot=null,w.pivotIndex=null);let F=m("columnPinning",l);if(F){for(let Te of l?.leftColIds??[])y(Te).pinned="left";for(let Te of l?.rightColIds??[])y(Te).pinned="right"}(F||!n)&&(w.pinned=null);let H=m("columnVisibility",c);if(H)for(let Te of c?.hiddenColIds??[])y(Te).hide=!0;(H||!n)&&(w.hide=null);let j=m("columnSizing",u);if(j)for(let{colId:Te,flex:ue,width:De}of u?.columnSizingModel??[]){let Ne=y(Te);Ne.flex=ue??null,Ne.width=De}(j||!n)&&(w.flex=null);let re=h?.orderedColIds,ae=!!re?.length&&!i?.has("columnOrder"),se=ae?re.map(Te=>y(Te)):Object.values(_);(se.length||f)&&(this.columnStates=se,Na(this.beans,{state:se,applyOrder:ae,defaultState:w},t))}setColumnPivotState(e,t){let n=this.columnStates;this.columnStates=void 0;let i=this.columnGroupStates;this.columnGroupStates=void 0;let o=this.beans,{pivotResultCols:r,colGroupSvc:s}=o;if(r?.isPivotResultColsPresent()){if(n){let a=[];for(let l of n)r.getPivotResultCol(l.colId)&&a.push(l);Na(o,{state:a,applyOrder:e},t)}i&&s?.setColumnGroupState(i,t)}}getColumnGroupState(){let e=this.beans.colGroupSvc;if(!e)return;let t=e.getColumnGroupState();return eNe(t)}setColumnGroupState(e,t,n){let i=this.beans.colGroupSvc;if(!i||n?.has("columnGroup")||t!=="api"&&!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;let o=new Set(e.columnGroup?.openColumnGroupIds),s=i.getColumnGroupState().map(({groupId:a})=>{let l=o.has(a);return l&&o.delete(a),{groupId:a,open:l}});for(let a of o)s.push({groupId:a,open:!0});s.length&&(this.columnGroupStates=s),i.setColumnGroupState(s,t)}getFilterState(){let e=this.beans.filterManager,t=e?.getFilterModel();t&&Object.keys(t).length===0&&(t=void 0);let n=e?.getFilterState(),i=e?.getAdvFilterModel()??void 0;return t||i||n?{filterModel:t,columnFilterState:n,advancedFilterModel:i}:void 0}setFilterState(e){let t=this.beans.filterManager,{filterModel:n,columnFilterState:i,advancedFilterModel:o}=e??{filterModel:null,columnFilterState:null,advancedFilterModel:null};(n!==void 0||i!==void 0)&&t?.setFilterState(n??null,i??null,"columnFilter"),o!==void 0&&t?.setAdvFilterModel(o??null,"advancedFilter")}getRangeSelectionState(){let e=this.beans.rangeSvc?.getCellRanges().map(t=>{let{id:n,type:i,startRow:o,endRow:r,columns:s,startColumn:a}=t;return{id:n,type:i,startRow:o,endRow:r,colIds:s.map(l=>l.getColId()),startColId:a.getColId()}});return e?.length?{cellRanges:e}:void 0}setCellSelectionState(e){let{gos:t,rangeSvc:n,colModel:i,visibleCols:o}=this.beans;if(!Qc(t)||!n)return;let r=[];for(let s of e?.cellRanges??[]){let a=[];for(let c of s.colIds){let u=i.getCol(c);u&&a.push(u)}if(!a.length)continue;let l=i.getCol(s.startColId);if(!l){let c=o.allCols,u=new Set(a);l=c.find(h=>u.has(h))}r.push(x(g({},s),{columns:a,startColumn:l}))}n.setCellRanges(r)}getScrollState(){if(!this.isClientSideRowModel)return;let e=this.beans.ctrlsSvc.getScrollFeature(),{left:t}=e?.getHScrollPosition()??{left:0},{top:n}=e?.getVScrollPosition()??{top:0};return n||t?{top:n,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;let{top:t,left:n}=e??{top:0,left:0},{frameworkOverrides:i,rowRenderer:o,animationFrameSvc:r,ctrlsSvc:s}=this.beans;i.wrapIncoming(()=>{s.get("center").setCenterViewportScrollLeft(n),s.getScrollFeature()?.setVerticalScrollPosition(t),o.redraw({afterScroll:!0}),r?.flushAllFrames()})}getSideBarState(){return this.beans.sideBar?.comp?.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;let e=this.beans.focusSvc.getFocusedCell();if(e){let{column:t,rowIndex:n,rowPinned:i}=e;return{colId:t.getColId(),rowIndex:n,rowPinned:i}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;let{focusSvc:t,colModel:n}=this.beans;if(!e){t.clearFocusedCell();return}let{colId:i,rowIndex:o,rowPinned:r}=e;t.setFocusedCell({column:n.getCol(i),rowIndex:o,rowPinned:r,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){let{pagination:e,gos:t}=this.beans;if(!e)return;let n=e.getCurrentPage(),i=t.get("paginationAutoPageSize")?void 0:e.getPageSize();if(!(!n&&!i))return{page:n,pageSize:i}}setPaginationState(e,t){let{pagination:n,gos:i}=this.beans;if(!n)return;let{pageSize:o,page:r}=e??{page:0,pageSize:i.get("paginationPageSize")},s=t==="gridInitializing";o&&!i.get("paginationAutoPageSize")&&n.setPageSize(o,s?"initialState":"pageSizeSelector"),typeof r=="number"&&(s?n.setPage(r):n.goToPage(r))}getRowSelectionState(){let e=this.beans.selectionSvc;if(!e)return;let t=e.getSelectionState();return!t||!Array.isArray(t)&&(t.selectAll===!1||t.selectAllChildren===!1)&&!t?.toggledNodes?.length?void 0:t}setRowSelectionState(e,t){this.beans.selectionSvc?.setSelectionState(e,t,t==="api")}getRowGroupExpansionState(){let{expansionSvc:e}=this.beans;if(e)return e.getExpansionState()}getRowPinningState(){return this.beans.pinnedRowModel?.getPinnedState()}setRowPinningState(e){let t=this.beans.pinnedRowModel;e?t?.setPinnedState(e):t?.reset()}setRowGroupExpansionState(e,t,n){let i=this.beans.expansionSvc;if(!i)return;let o=t??{expandedRowGroupIds:[],collapsedRowGroupIds:[]};i.setExpansionState(o,n)}updateColumnState(e){let t=this.getColumnState(),n=!1,i=this.cachedState;for(let o of Object.keys(t)){let r=t[o];rw(r,i[o])||(n=!0)}this.cachedState=g(g({},i),t),n&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){let n=this.cachedState[e];this.setCachedStateValue(e,t),rw(t,n)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState=x(g({},this.cachedState),{[e]:t})}refreshStaleState(){let e=this.staleStateKeys;for(let t of e)t==="rowSelection"&&this.setCachedStateValue(t,this.getRowSelectionState());e.clear()}dispatchStateUpdateEvent(e){if(!this.suppressEvents){for(let t of e)this.queuedUpdateSources.add(t);this.dispatchStateUpdateEventDebounced()}}dispatchQueuedStateUpdateEvents(){let e=this.queuedUpdateSources,t=Array.from(e);e.clear(),this.eventSvc.dispatchEvent({type:"stateUpdated",sources:t,state:this.cachedState})}startSuppressEvents(){this.suppressEvents=!0,this.beans.colAnimation?.setSuppressAnimation(!0)}stopSuppressEvents(e){setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.beans.colAnimation?.setSuppressAnimation(!1),this.dispatchStateUpdateEvent([e]))})}suppressEventsAndDispatchInitEvent(e){this.startSuppressEvents(),e(),this.stopSuppressEvents("gridInitializing")}},o4e={moduleName:"GridState",version:we,beans:[i4e],apiFunctions:{getState:Xze,setState:e4e}};function r4e(e){return e.rowModel.isLastRowIndexKnown()}function s4e(e){return e.pagination?.getPageSize()??100}function a4e(e){return e.pagination?.getCurrentPage()??0}function l4e(e){return e.pagination?.getTotalPages()??1}function c4e(e){return e.pagination?e.pagination.getMasterRowCount():e.rowModel.getRowCount()}function d4e(e){e.pagination?.goToNextPage()}function u4e(e){e.pagination?.goToPreviousPage()}function h4e(e){e.pagination?.goToFirstPage()}function p4e(e){e.pagination?.goToLastPage()}function f4e(e,t){e.pagination?.goToPage(t)}var m4e=class extends te{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeSvc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowsCtrl=e.center;let t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.beans.pagination.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;let e=this.centerRowsCtrl.viewportSizeFeature.getBodyHeight();if(e>0){let t=this.beans,n=()=>{let i=Math.max(gp(t),1),o=Math.floor(e/i);t.pagination.setPageSize(o,"autoCalculated")};this.isBodyRendered?zo(this,n,50)():(n(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}},WC="paginationPageSizeSelector",g4e={tag:"span",cls:"ag-paging-page-size"},v4e=class extends Mn{constructor(){super(g4e),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;let e=this.selectPageSizeComp.getValue();if(!e)return;let t=Number(e);isNaN(t)||t<1||t===this.pagination.getPageSize()||(this.pagination.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.pagination=e.pagination}postConstruct(){this.addManagedPropertyListener(WC,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!e?.newPageSize)return;let t=this.pagination.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){Vo(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(WC)!==!1}reloadPageSizesSelector(){let e=this.getPageSizeSelectorValues(),t=this.pagination.getPageSize(),n=!t||!e.includes(t);if(n){let o=this.gos.exists("paginationPageSize"),r=this.gos.get(WC)!==!0;ce(94,{pageSizeSet:o,pageSizesSet:r,pageSizeOptions:e,paginationPageSizeOption:t}),r||ce(95,{paginationPageSizeOption:t,paginationPageSizeSelector:WC}),e.unshift("")}let i=String(n?"":t);this.selectPageSizeComp?(yu(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(i,!0)):this.createPageSizeSelectorComp(e,i),this.hasEmptyOption=n}createPageSizeSelectOptions(e){return e.map(t=>({value:String(t)}))}createPageSizeSelectorComp(e,t){let n=this.getLocaleTextFunc(),i=n("pageSizeSelectorLabel","Page Size:"),o=n("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new sV).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(o).setLabel(i).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){let e=[20,50,100],t=this.gos.get(WC);return!Array.isArray(t)||!t?.length?e:[...t].sort((n,i)=>n-i)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},_4e={selector:"AG-PAGE-SIZE-SELECTOR",component:v4e},y4e=".ag-paging-panel{align-items:center;border-top:var(--ag-footer-row-border);display:flex;gap:calc(var(--ag-spacing)*4);height:var(--ag-pagination-panel-height);justify-content:flex-end;padding:0 var(--ag-cell-horizontal-padding)}:where(.ag-paging-page-size) .ag-wrapper{min-width:50px}.ag-paging-page-summary-panel{align-items:center;display:flex;gap:var(--ag-cell-widget-spacing);.ag-disabled &{pointer-events:none}}.ag-paging-button{cursor:pointer;position:relative;&.ag-disabled{cursor:default;opacity:.5}}.ag-paging-number,.ag-paging-row-summary-panel-number{font-weight:500}",b4e=class extends One{constructor(){super(),this.btFirst=Ce,this.btPrevious=Ce,this.btNext=Ce,this.btLast=Ce,this.lbRecordCount=Ce,this.lbFirstRowOnPage=Ce,this.lbLastRowOnPage=Ce,this.lbCurrent=Ce,this.lbTotal=Ce,this.pageSizeComp=Ce,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1,this.registerCSS(y4e)}wireBeans(e){this.rowModel=e.rowModel,this.pagination=e.pagination,this.ariaAnnounce=e.ariaAnnounce}postConstruct(){let e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[_4e]);let{btFirst:t,btPrevious:n,btNext:i,btLast:o}=this;this.activateTabIndex([t,n,i,o]),t.insertAdjacentElement("afterbegin",Xs(e?"last":"first",this.beans)),n.insertAdjacentElement("afterbegin",Xs(e?"next":"previous",this.beans)),i.insertAdjacentElement("afterbegin",Xs(e?"previous":"next",this.beans)),o.insertAdjacentElement("afterbegin",Xs(e?"first":"last",this.beans)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:r=>this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(r):_Te(this.beans,r),forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){let t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){if(!this.areListenersSetup){this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)});for(let e of[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}]){let{el:t,fn:n}=e;this.addManagedListeners(t,{click:n,keydown:i=>{(i.key===W.ENTER||i.key===W.SPACE)&&(i.preventDefault(),n())}})}vTe(this.beans,this,this.getGui()),this.areListenersSetup=!0}}onBtFirst(){this.previousAndFirstButtonsDisabled||this.pagination.goToFirstPage()}formatNumber(e){let t=this.gos.getCallback("paginationNumberFormatter");return t?t({value:e}):tNe(e,this.getLocaleTextFunc.bind(this))}getTemplate(){let e=this.getLocaleTextFunc(),t=`ag-${this.getCompId()}`;return{tag:"div",cls:"ag-paging-panel ag-unselectable",attrs:{id:`${t}`},children:[{tag:"ag-page-size-selector",ref:"pageSizeComp"},{tag:"span",cls:"ag-paging-row-summary-panel",children:[{tag:"span",ref:"lbFirstRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-first-row`}},{tag:"span",attrs:{id:`${t}-to`},children:e("to","to")},{tag:"span",ref:"lbLastRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-last-row`}},{tag:"span",attrs:{id:`${t}-of`},children:e("of","of")},{tag:"span",ref:"lbRecordCount",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-row-count`}}]},{tag:"span",cls:"ag-paging-page-summary-panel",role:"presentation",children:[{tag:"div",ref:"btFirst",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("firstPage","First Page")}},{tag:"div",ref:"btPrevious",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("previousPage","Previous Page")}},{tag:"span",cls:"ag-paging-description",children:[{tag:"span",attrs:{id:`${t}-start-page`},children:e("page","Page")},{tag:"span",ref:"lbCurrent",cls:"ag-paging-number",attrs:{id:`${t}-start-page-number`}},{tag:"span",attrs:{id:`${t}-of-page`},children:e("of","of")},{tag:"span",ref:"lbTotal",cls:"ag-paging-number",attrs:{id:`${t}-of-page-number`}}]},{tag:"div",ref:"btNext",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("nextPage","Next Page")}},{tag:"div",ref:"btLast",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("lastPage","Last Page")}}]}]}}onBtNext(){this.nextButtonDisabled||this.pagination.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.pagination.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.pagination.goToLastPage()}enableOrDisableButtons(){let e=this.pagination.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),n=this.pagination.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);let i=this.isZeroPagesToDisplay(),o=e===n-1;this.nextButtonDisabled=o||i,this.lastButtonDisabled=!t||i||e===n-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){ADe(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){let e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages();return e&&t===0}updateLabels(){let e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages(),n=this.pagination.getMasterRowCount(),i=e?n:null,o=this.pagination.getCurrentPage(),r=this.pagination.getPageSize(),s,a;this.isZeroPagesToDisplay()?s=a=0:(s=r*o+1,a=s+r-1,e&&a>i&&(a=i));let l=s+r-1,c=!e&&n<l,u=this.formatNumber(s);this.lbFirstRowOnPage.textContent=u;let h,f=this.getLocaleTextFunc();c?h=f("pageLastRowUnknown","?"):h=this.formatNumber(a),this.lbLastRowOnPage.textContent=h;let _=t>0?o+1:0,y=this.formatNumber(_);this.lbCurrent.textContent=y;let w,C;if(e)w=this.formatNumber(t),C=this.formatNumber(i);else{let S=f("more","more");w=S,C=S}this.lbTotal.textContent=w,this.lbRecordCount.textContent=C,this.announceAriaStatus(u,h,C,y,w)}announceAriaStatus(e,t,n,i,o){let r=this.getLocaleTextFunc(),s=r("page","Page"),a=r("to","to"),l=r("of","of"),c=`${e} ${a} ${t} ${l} ${n}`,u=`${s} ${i} ${l} ${o}`;c!==this.ariaRowStatus&&(this.ariaRowStatus=c,this.ariaAnnounce?.announceValue(c,"paginationRow")),u!==this.ariaPageStatus&&(this.ariaPageStatus=u,this.ariaAnnounce?.announceValue(u,"paginationPage"))}},C4e={selector:"AG-PAGINATION",component:b4e},w4e=class extends te{constructor(){super(...arguments),this.beanName="pagination",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}postConstruct(){let e=this.gos;this.active=e.get("pagination"),this.pageSizeFromGridOptions=e.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return C4e}isPaginateChildRows(){let e=this.gos;return e.get("groupHideParentOfSingleChild")||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")?!0:e.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){let t=this.currentPage;if(!this.active||t===e||typeof t!="number")return;let{editSvc:n}=this.beans;n?.isEditing()&&(n.isBatchEditing()?n.cleanupEditors():n.stopEditing(void 0,{source:"api"})),this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0})}goToPageWithIndex(e){if(!this.active)return;let t=e;this.paginateChildRows||(t=this.beans.rowModel.getTopLevelIndexFromDisplayedIndex?.(e)??e),this.goToPage(Math.floor(t/this.pageSize))}isRowInPage(e){return this.active?e>=this.topDisplayedRowIndex&&e<=this.bottomDisplayedRowIndex:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){let e=this.beans.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return Se(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:Se(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:Se(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:Se(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.beans.pageBounds.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;let e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){let n=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}n!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){let e=this.totalPages;this.currentPage>=e&&(this.currentPage=e-1);let t=this.currentPage;(!isFinite(t)||isNaN(t)||t<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){let e=this.beans.rowModel,t=e.getTopLevelRowCount();if(this.masterRowCount=t,t<=0){this.setZeroRows();return}let n=this.pageSize,i=t-1;this.totalPages=Math.floor(i/n)+1,this.adjustCurrentPageIfInvalid();let o=this.currentPage,r=n*o,s=n*(o+1)-1;if(s>i&&(s=i),this.topDisplayedRowIndex=e.getTopLevelRowDisplayedIndex(r),s===i)this.bottomDisplayedRowIndex=e.getRowCount()-1;else{let a=e.getTopLevelRowDisplayedIndex(s+1);this.bottomDisplayedRowIndex=a-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){let e=this.beans.rowModel.getRowCount();if(this.masterRowCount=e,e===0){this.setZeroRows();return}let{pageSize:t,currentPage:n}=this,i=e-1;this.totalPages=Math.floor(i/t)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=t*n,this.bottomDisplayedRowIndex=t*(n+1)-1,this.bottomDisplayedRowIndex>i&&(this.bottomDisplayedRowIndex=i)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.beans.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){let{keepRenderedRows:t=!1,newPage:n=!1,newPageSize:i=!1}=e;this.eventSvc.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:n,newPageSize:i,keepRenderedRows:t})}},x4e={moduleName:"Pagination",version:we,beans:[w4e,m4e],icons:{first:"first",previous:"previous",next:"next",last:"last"},apiFunctions:{paginationIsLastPageFound:r4e,paginationGetPageSize:s4e,paginationGetCurrentPage:a4e,paginationGetTotalPages:l4e,paginationGetRowCount:c4e,paginationGoToNextPage:d4e,paginationGoToPreviousPage:u4e,paginationGoToFirstPage:h4e,paginationGoToLastPage:p4e,paginationGoToPage:f4e},dependsOn:[II]};function S4e(e,t={}){let n=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(n))}function jie(e,t,n,i,o){t&&(i&&t.parent&&t.parent.level!==-1&&jie(e,t.parent,n,i,o),t.setExpanded(n,void 0,o))}function E4e(e,t){return e.rowModel.getRowNode(t)}function D4e(e,t,n,i){e.rowRenderer.addRenderedRowListener(t,n,i)}function k4e(e){return e.rowRenderer.getRenderedNodes()}function I4e(e,t,n){e.rowModel.forEachNode(t,n)}function M4e(e){return e.rowRenderer.firstRenderedRow}function R4e(e){return e.rowRenderer.lastRenderedRow}function T4e(e,t){return e.rowModel.getRow(t)}function P4e(e){return e.rowModel.getRowCount()}var A4e={moduleName:"RowApi",version:we,apiFunctions:{redrawRows:S4e,setRowNodeExpanded:jie,getRowNode:E4e,addRenderedRowListener:D4e,getRenderedNodes:k4e,forEachNode:I4e,getFirstDisplayedRowIndex:M4e,getLastDisplayedRowIndex:R4e,getDisplayedRowAtIndex:T4e,getDisplayedRowCount:P4e}},O4e={moduleName:"ScrollApi",version:we,apiFunctions:{getVerticalPixelRange:q3e,getHorizontalPixelRange:K3e,ensureColumnVisible:Mie,ensureIndexVisible:Rie,ensureNodeVisible:Z3e}};function F4e(e,t,n){if(!t)return;let i=e.ctrlsSvc.getGridBodyCtrl().eGridBody,o=`aria-${t}`;n===null?i.removeAttribute(o):i.setAttribute(o,n)}function L4e(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function N4e(e){e.frameworkOverrides.wrapIncoming(()=>{for(let t of e.ctrlsSvc.getHeaderRowContainerCtrls())t.refresh()})}function B4e(e){return e.animationFrameSvc?.isQueueEmpty()??!0}function z4e(e){e.animationFrameSvc?.flushAllFrames()}function V4e(e){return{rowHeight:gp(e),headerHeight:Sw(e)}}function H4e(e,t={}){let n=[];for(let r of e.rowRenderer.getCellCtrls(t.rowNodes,t.columns)){let s=r.getCellRenderer();s!=null&&n.push(fw(s))}if(t.columns?.length)return n;let i=[],o=N4(t.rowNodes);for(let r of e.rowRenderer.getAllRowCtrls()){if(o&&!B4(r.rowNode,o)||!r.isFullWidth())continue;let s=r.getFullWidthCellRenderers();for(let a=0;a<s.length;a++){let l=s[a];l!=null&&i.push(fw(l))}}return[...i,...n]}var $4e={moduleName:"RenderApi",version:we,apiFunctions:{setGridAriaProperty:F4e,refreshCells:L4e,refreshHeader:N4e,isAnimationFrameQueueEmpty:B4e,flushAllAnimationFrames:z4e,getSizesForCurrentTheme:V4e,getCellRendererInstances:H4e}};function j4e(e,t){typeof t=="number"?e.colAutosize?.sizeColumnsToFit(t,"api"):e.colAutosize?.sizeColumnsToFitGridBody(t)}function Gie({colAutosize:e,visibleCols:t},n,i){Array.isArray(n)?e?.autoSizeCols({colKeys:n,skipHeader:i,source:"api"}):e?.autoSizeCols(x(g({},n),{colKeys:n.colIds??t.allCols,source:"api"}))}function G4e(e,t){t&&typeof t=="object"?Gie(e,t):e.colAutosize?.autoSizeAllColumns({source:"api",skipHeader:t})}var U4e=class extends te{constructor(){super(...arguments),this.beanName="colAutosize",this.timesDelayed=0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}postConstruct(){let{gos:e}=this,t=e.get("autoSizeStrategy");if(t){let n=!1,i=t.type;if(i==="fitGridWidth"||i==="fitProvidedWidth")n=!0;else if(i==="fitCellContents"){this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered(t)});let o=e.get("rowData");n=o!=null&&o.length>0&&$i(e)}n&&this.beans.colDelayRenderSvc?.hideColumns(i)}}autoSizeCols(e){let{eventSvc:t,visibleCols:n}=this.beans;this.innerAutoSizeCols(e).then(i=>{let o=c=>Ug(t,Array.from(c),!0,"autosizeColumns");if(!e.scaleUpToFitGridWidth)return o(i);let r=zee(this.beans),s=c=>n.leftCols.some(u=>ew(u,c)),a=c=>n.rightCols.some(u=>ew(u,c)),l=e.colKeys.filter(c=>!ed(c)&&!Kc(c)&&!s(c)&&!a(c));this.sizeColumnsToFit(r,e.source,!0,{defaultMaxWidth:e.defaultMaxWidth,defaultMinWidth:e.defaultMinWidth,columnLimits:e.columnLimits?.map(c=>x(g({},c),{key:c.colId})),colKeys:l,onlyScaleUp:!0}),o(i)})}innerAutoSizeCols(e){return new Promise((t,n)=>{if(this.shouldQueueResizeOperations)return this.pushResizeOperation(()=>this.innerAutoSizeCols(e).then(t,n));let{colKeys:i,skipHeader:o,skipHeaderGroups:r,stopAtGroup:s,defaultMaxWidth:a,defaultMinWidth:l,columnLimits:c=[],source:u="api"}=e,{animationFrameSvc:h,renderStatus:f,colModel:m,autoWidthCalc:_,visibleCols:y}=this.beans;if(h?.flushAllFrames(),this.timesDelayed<5&&f&&(!f.areHeaderCellsRendered()||!f.areCellsRendered())){this.timesDelayed++,setTimeout(()=>{this.isAlive()&&this.innerAutoSizeCols(e).then(t,n)});return}this.timesDelayed=0;let w=new Set,C=-1,S=Object.fromEntries(c.map(j=>{var re=j,{colId:F}=re,H=Be(re,["colId"]);return[F,H]})),I=o??this.gos.get("skipHeaderOnAutoSize"),O=r??I;for(;C!==0;){C=0;let F=[];for(let H of i){if(!H||Uke(H))continue;let j=m.getCol(H);if(!j||w.has(j))continue;let re=_.getPreferredWidthForColumn(j,I);if(re>0){let ae=S[j.colId]??{};ae.minWidth??(ae.minWidth=l),ae.maxWidth??(ae.maxWidth=a);let se=W4e(j,re,ae);j.setActualWidth(se,u),w.add(j),C++}F.push(j)}F.length&&y.refresh(u)}O||this.autoSizeColumnGroupsByColumns(i,u,s),t(w)})}autoSizeColumn(e,t,n){this.autoSizeCols({colKeys:[e],skipHeader:n,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,n){let{colModel:i,ctrlsSvc:o}=this.beans,r=new Set,s=i.getColsForKeys(e);for(let l of s){let c=l.getParent();for(;c&&c!=n;)c.isPadding()||r.add(c),c=c.getParent()}let a;for(let l of r){for(let c of o.getHeaderRowContainerCtrls())if(a=c.getHeaderCtrlForColumn(l),a)break;a?.resizeLeafColumnsToFit(t)}}autoSizeAllColumns(e){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.autoSizeAllColumns(e));return}this.autoSizeCols(g({colKeys:this.beans.visibleCols.allCols},e))}addColumnAutosizeListeners(e,t){let n=this.gos.get("skipHeaderOnAutoSize"),i=()=>{this.autoSizeColumn(t,"uiColumnResized",n)};e.addEventListener("dblclick",i);let o=new up(e);return o.addEventListener("doubleTap",i),()=>{e.removeEventListener("dblclick",i),o.destroy()}}addColumnGroupResize(e,t,n){let i=this.gos.get("skipHeaderOnAutoSize"),o=()=>{let r=[],s=t.getDisplayedLeafColumns();for(let a of s)a.getColDef().suppressAutoSize||r.push(a.getColId());r.length>0&&this.autoSizeCols({colKeys:r,skipHeader:i,stopAtGroup:t,source:"uiColumnResized"}),n()};return e.addEventListener("dblclick",o),()=>e.removeEventListener("dblclick",o)}sizeColumnsToFitGridBody(e,t){if(!this.isAlive())return;let n=zee(this.beans);if(n>0){this.sizeColumnsToFit(n,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,-1)},500):ce(29)}sizeColumnsToFit(e,t="sizeColumnsToFit",n,i){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,n,i));return}let o={};for(let _ of i?.columnLimits??[]){let y=_,{key:w}=y,C=Be(y,["key"]);o[typeof w=="string"?w:w.getColId()]=C}let r=this.beans.visibleCols.allCols;if(e<=0||!r.length)return;let s=Gc(r);if(i?.onlyScaleUp&&s>e||e===s&&r.every(C=>{if(C.colDef.suppressSizeToFit)return!0;let S=o?.[C.getId()],I=S?.minWidth??i?.defaultMinWidth,O=S?.maxWidth??i?.defaultMaxWidth,F=C.getActualWidth();return(I==null||F>=I)&&(O==null||F<=O)}))return;let l=[],c=[];for(let w of r){let C=i?.colKeys?.some(S=>ew(w,S))??!0;w.getColDef().suppressSizeToFit||!C?c.push(w):l.push(w)}let u=l.slice(0),h=!1,f=w=>{Ba(l,w),c.push(w)};for(let w of l){w.resetActualWidth(t);let C=o?.[w.getId()],S=C?.minWidth??i?.defaultMinWidth,I=C?.maxWidth??i?.defaultMaxWidth,O=w.getActualWidth();typeof S=="number"&&O<S?w.setActualWidth(S,t,!0):typeof I=="number"&&O>I&&w.setActualWidth(I,t,!0)}for(;!h;){h=!0;let w=e-Gc(c);if(w<=0)for(let C of l){let S=o?.[C.getId()]?.minWidth??i?.defaultMinWidth??C.minWidth;C.setActualWidth(S,t,!0)}else{let C=w/Gc(l),S=w;for(let I=l.length-1;I>=0;I--){let O=l[I],F=o?.[O.getId()],H=F?.minWidth??i?.defaultMinWidth,j=F?.maxWidth??i?.defaultMaxWidth,re=O.getMinWidth(),ae=O.getMaxWidth(),se=typeof H=="number"&&H>re?H:re,Te=typeof j=="number"&&j<ae?j:ae,ue=Math.round(O.getActualWidth()*C);ue<se?(ue=se,f(O),h=!1):ue>Te?(ue=Te,f(O),h=!1):I===0&&(ue=S),O.setActualWidth(ue,t,!0),S-=ue}}}for(let w of u)w.fireColumnWidthChangedEvent(t);let m=this.beans.visibleCols;m.setLeftValues(t),m.updateBodyWidths(),!n&&Ug(this.eventSvc,u,!0,t)}applyAutosizeStrategy(){let{gos:e,colDelayRenderSvc:t}=this.beans,n=e.get("autoSizeStrategy");n?.type!=="fitGridWidth"&&n?.type!=="fitProvidedWidth"||setTimeout(()=>{if(!this.isAlive())return;let i=n.type;if(i==="fitGridWidth"){let{columnLimits:o,defaultMinWidth:r,defaultMaxWidth:s}=n,a=o?.map(({colId:l,minWidth:c,maxWidth:u})=>({key:l,minWidth:c,maxWidth:u}));this.sizeColumnsToFitGridBody({defaultMinWidth:r,defaultMaxWidth:s,columnLimits:a})}else i==="fitProvidedWidth"&&this.sizeColumnsToFit(n.width,"sizeColumnsToFit");t?.revealColumns(i)})}onFirstDataRendered(n){var i=n,{colIds:e}=i,t=Be(i,["colIds"]);setTimeout(()=>{if(!this.isAlive())return;let o="autosizeColumns";e?this.autoSizeCols(x(g({},t),{source:o,colKeys:e})):this.autoSizeAllColumns(x(g({},t),{source:o})),this.beans.colDelayRenderSvc?.revealColumns(t.type)})}processResizeOperations(){this.shouldQueueResizeOperations=!1;for(let e of this.resizeOperationQueue)e();this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}destroy(){this.resizeOperationQueue.length=0,super.destroy()}};function W4e(e,t,n={}){let i=n.minWidth??e.getMinWidth();t<i&&(t=i);let o=n.maxWidth??e.getMaxWidth();return t>o&&(t=o),t}function zee({ctrlsSvc:e,scrollVisibleSvc:t}){let n=e.getGridBodyCtrl(),o=n.isVerticalScrollShowing()?t.getScrollbarWidth():0;return lw(n.eGridBody)-o}var q4e={moduleName:"ColumnAutoSize",version:we,beans:[U4e],apiFunctions:{sizeColumnsToFit:j4e,autoSizeColumns:Gie,autoSizeAllColumns:G4e},dependsOn:[jne]},K4e=".ag-row-pinned-source{background-color:var(--ag-pinned-source-row-background-color);color:var(--ag-pinned-source-row-text-color);font-weight:var(--ag-pinned-source-row-font-weight)}.ag-row-pinned-manual{background-color:var(--ag-pinned-row-background-color);color:var(--ag-pinned-row-text-color);font-weight:var(--ag-pinned-row-font-weight)}";function Z4e(e){return e.pinnedRowModel?.getPinnedTopRowCount()??0}function Y4e(e){return e.pinnedRowModel?.getPinnedBottomRowCount()??0}function Q4e(e,t){return e.pinnedRowModel?.getPinnedTopRow(t)}function J4e(e,t){return e.pinnedRowModel?.getPinnedBottomRow(t)}function X4e(e,t,n){return e.pinnedRowModel?.forEachPinnedRow(t,n)}var eVe={moduleName:"PinnedRow",version:we,beans:[ePe],css:[K4e],apiFunctions:{getPinnedTopRowCount:Z4e,getPinnedBottomRowCount:Y4e,getPinnedTopRow:Q4e,getPinnedBottomRow:J4e,forEachPinnedRow:X4e},icons:{rowPin:"pin",rowPinTop:"pinned-top",rowPinBottom:"pinned-bottom",rowUnpin:"un-pin"}},tVe=class{constructor(e,t){this.col=e,this.firstNode=t,this.cellSpan=!0,this.spannedNodes=new Set,this.addSpannedNode(t)}reset(){this.spannedNodes.clear(),this.addSpannedNode(this.firstNode)}addSpannedNode(e){this.spannedNodes.add(e),this.lastNode=e}getLastNode(){return this.lastNode}getCellHeight(){return this.lastNode.rowTop+this.lastNode.rowHeight-this.firstNode.rowTop-1}doesSpanContain(e){return e.column!==this.col||e.rowPinned!=this.firstNode.rowPinned?!1:this.firstNode.rowIndex<=e.rowIndex&&e.rowIndex<=this.lastNode.rowIndex}getLastNodeAutoHeight(){let e=this.firstNode.__autoHeights?.[this.col.getColId()];if(e==null)return;let t=0;for(let n of this.spannedNodes)n!==this.lastNode&&(t+=n.rowHeight);return e-t}},nVe=class extends te{constructor(e){super(),this.column=e}buildCache(e){let{column:t,beans:{gos:n,pinnedRowModel:i,rowModel:o,valueSvc:r,pagination:s}}=this,{colDef:a}=t,l=this.getNodeMap(e),c=new Map,u=n.getCallback("isFullWidthRow"),h=a.equals,f=a.spanRows,m=typeof f=="function",_=null,y=null,w,C=(I,O)=>{_=I,y=null,w=O},S=I=>{let O=!I.isExpandable()&&!I.group&&!I.detail&&(u?!u({rowNode:I}):!0);if(I.rowIndex==null||!O){C(null,null);return}if(_==null||I.level!==_.level||I.footer||y&&I.rowIndex-1!==y?.getLastNode().rowIndex){C(I,r.getValue(t,I));return}let F=r.getValue(t,I);if(m){let H=at(n,{valueA:w,nodeA:_,valueB:F,nodeB:I,column:t,colDef:a});if(!f(H)){C(I,F);return}}else if(h?!h(w,F):w!==F){C(I,F);return}if(!y){let H=l?.get(_);H?.firstNode===_?(H.reset(),y=H):y=new tVe(t,_),c.set(_,y)}y.addSpannedNode(I),c.set(I,y)};switch(e){case"center":o.forEachDisplayedNode?.(I=>{(!s||s.isRowInPage(I.rowIndex))&&S(I)}),this.centerValueNodeMap=c;break;case"top":i?.forEachPinnedRow("top",S),this.topValueNodeMap=c;break;case"bottom":i?.forEachPinnedRow("bottom",S),this.bottomValueNodeMap=c;break}}isCellSpanning(e){return!!this.getCellSpan(e)}getCellSpan(e){return this.getNodeMap(e.rowPinned).get(e)}getNodeMap(e){switch(e){case"top":return this.topValueNodeMap;case"bottom":return this.bottomValueNodeMap;default:return this.centerValueNodeMap}}},iVe=class extends te{constructor(){super(...arguments),this.beanName="rowSpanSvc",this.spanningColumns=new Map,this.debouncePinnedEvent=zo(this,this.dispatchCellsUpdatedEvent.bind(this,!0),0),this.debounceModelEvent=zo(this,this.dispatchCellsUpdatedEvent.bind(this,!1),0),this.pinnedTimeout=null,this.modelTimeout=null}postConstruct(){let e=this.onRowDataUpdated.bind(this),t=this.buildPinnedCaches.bind(this);this.addManagedEventListeners({paginationChanged:this.buildModelCaches.bind(this),pinnedRowDataChanged:t,pinnedRowsChanged:t,rowNodeDataChanged:e,cellValueChanged:e})}register(e){let{gos:t}=this.beans;if(!t.get("enableCellSpan")||this.spanningColumns.has(e))return;let n=this.createManagedBean(new nVe(e));this.spanningColumns.set(e,n),n.buildCache("top"),n.buildCache("bottom"),n.buildCache("center"),this.debouncePinnedEvent(),this.debounceModelEvent()}dispatchCellsUpdatedEvent(e){this.dispatchLocalEvent({type:"spannedCellsUpdated",pinned:e})}deregister(e){this.spanningColumns.delete(e)}onRowDataUpdated({node:e}){let{spannedRowRenderer:t}=this.beans;if(e.rowPinned){if(this.pinnedTimeout!=null)return;this.pinnedTimeout=window.setTimeout(()=>{this.pinnedTimeout=null,this.buildPinnedCaches(),t?.createCtrls("top"),t?.createCtrls("bottom")},0);return}this.modelTimeout==null&&(this.modelTimeout=window.setTimeout(()=>{this.modelTimeout=null,this.buildModelCaches(),t?.createCtrls("center")},0))}buildModelCaches(){this.modelTimeout!=null&&clearTimeout(this.modelTimeout),this.spanningColumns.forEach(e=>e.buildCache("center")),this.debounceModelEvent()}buildPinnedCaches(){this.pinnedTimeout!=null&&clearTimeout(this.pinnedTimeout),this.spanningColumns.forEach(e=>{e.buildCache("top"),e.buildCache("bottom")}),this.debouncePinnedEvent()}isCellSpanning(e,t){let n=this.spanningColumns.get(e);return n?n.isCellSpanning(t):!1}getCellSpanByPosition(e){let{pinnedRowModel:t,rowModel:n}=this.beans,i=e.column,o=e.rowIndex,r=this.spanningColumns.get(i);if(!r)return;let s;switch(e.rowPinned){case"top":s=t?.getPinnedTopRow(o);break;case"bottom":s=t?.getPinnedBottomRow(o);break;default:s=n.getRow(o)}if(s)return r.getCellSpan(s)}getCellStart(e){let t=this.getCellSpanByPosition(e);return t?x(g({},e),{rowIndex:t.firstNode.rowIndex}):e}getCellEnd(e){let t=this.getCellSpanByPosition(e);return t?x(g({},e),{rowIndex:t.getLastNode().rowIndex}):e}getCellSpan(e,t){let n=this.spanningColumns.get(e);if(n)return n.getCellSpan(t)}forEachSpannedColumn(e,t){for(let[n,i]of this.spanningColumns)if(i.isCellSpanning(e)){let o=i.getCellSpan(e);t(n,o)}}destroy(){super.destroy(),this.spanningColumns.clear()}},oVe=class extends $g{constructor(e,t,n){super(e.col,e.firstNode,n,t),this.cellSpan=e,this.SPANNED_CELL_CSS_CLASS="ag-spanned-cell"}setComp(e,t,n,i,o,r,s){this.eWrapper=n,super.setComp(e,t,n,i,o,r,s),this.setAriaRowSpan(),this.refreshAriaRowIndex()}isCellSpanning(){return!0}getCellSpan(){return this.cellSpan}refreshAriaRowIndex(){let{eGui:e,rowNode:t}=this;!e||t.rowIndex==null||Yk(e,t.rowIndex)}setAriaRowSpan(){BDe(this.eGui,this.cellSpan.spannedNodes.size)}setFocusedCellPosition(e){this.focusedCellPosition=e}getFocusedCellPosition(){return this.focusedCellPosition??this.cellPosition}checkCellFocused(){let e=this.beans.focusSvc.getFocusedCell();return!!e&&this.cellSpan.doesSpanContain(e)}applyStaticCssClasses(){super.applyStaticCssClasses(),this.comp.toggleCss(this.SPANNED_CELL_CSS_CLASS,!0)}onCellFocused(e){let{beans:t}=this;if(EI(t)){this.focusedCellPosition=void 0;return}let n=this.isCellFocused();n||(this.focusedCellPosition=void 0),e&&n&&(this.focusedCellPosition={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column}),super.onCellFocused(e)}getRootElement(){return this.eWrapper}},rVe=class extends gI{onRowIndexChanged(){super.onRowIndexChanged();for(let e of this.getAllCellCtrls())e.refreshAriaRowIndex()}getInitialRowClasses(e){return["ag-spanned-row"]}getNewCellCtrl(e){let t=this.beans.rowSpanSvc?.getCellSpan(e,this.rowNode);if(!(!t||t.firstNode!==this.rowNode))return new oVe(t,this,this.beans)}isCorrectCtrlForSpan(e){let t=this.beans.rowSpanSvc?.getCellSpan(e.column,this.rowNode);return!t||t.firstNode!==this.rowNode?!1:e.getCellSpan()===t}onRowHeightChanged(){}refreshFirstAndLastRowStyles(){}addHoverFunctionality(){}resetHoveredStatus(){}},sVe=class extends te{constructor(){super(...arguments),this.beanName="spannedRowRenderer",this.topCtrls=new Map,this.bottomCtrls=new Map,this.centerCtrls=new Map}postConstruct(){this.addManagedEventListeners({displayedRowsChanged:this.createAllCtrls.bind(this)})}createAllCtrls(){this.createCtrls("top"),this.createCtrls("bottom"),this.createCtrls("center")}createCtrls(e){let{rowSpanSvc:t}=this.beans,n=this.getCtrlsMap(e),i=n.size,o=this.getAllRelevantRowControls(e),r=new Map,s=!1;for(let l of o)l.isAlive()&&t?.forEachSpannedColumn(l.rowNode,(c,u)=>{if(r.has(u.firstNode))return;let h=n.get(u.firstNode);if(h){r.set(u.firstNode,h),n.delete(u.firstNode);return}s=!0;let f=new rVe(u.firstNode,this.beans,!1,!1,!1);r.set(u.firstNode,f)});this.setCtrlsMap(e,r);let a=r.size===i;if(!(!s&&a)){for(let l of n.values())l.destroyFirstPass(!0),l.destroySecondPass();this.dispatchLocalEvent({type:"spannedRowsUpdated",ctrlsKey:e})}}getAllRelevantRowControls(e){let{rowRenderer:t}=this.beans;switch(e){case"top":return t.topRowCtrls;case"bottom":return t.bottomRowCtrls;case"center":return t.allRowCtrls}}getCellByPosition(e){let{rowSpanSvc:t}=this.beans,n=t?.getCellSpanByPosition(e);if(!n)return;let i=this.getCtrlsMap(e.rowPinned).get(n.firstNode);if(i)return i.getAllCellCtrls().find(o=>o.column===e.column)}getCtrls(e){return[...this.getCtrlsMap(e).values()]}destroyRowCtrls(e){for(let t of this.getCtrlsMap(e).values())t.destroyFirstPass(!0),t.destroySecondPass();this.setCtrlsMap(e,new Map)}getCtrlsMap(e){switch(e){case"top":return this.topCtrls;case"bottom":return this.bottomCtrls;default:return this.centerCtrls}}setCtrlsMap(e,t){switch(e){case"top":this.topCtrls=t;break;case"bottom":this.bottomCtrls=t;break;default:this.centerCtrls=t;break}}destroy(){super.destroy(),this.destroyRowCtrls("top"),this.destroyRowCtrls("bottom"),this.destroyRowCtrls("center")}},aVe={moduleName:"CellSpan",version:we,beans:[iVe,sVe]},lVe=class extends te{constructor(e,t){super(),this.cellCtrl=e,this.staticClasses=[],this.beans=t,this.column=e.column}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){let{column:e,cellComp:t}=this,n=e.colDef,i=n.cellClassRules,o=this.getCellClassParams(e,n);kV(this.beans.expressionSvc,i===this.cellClassRules?void 0:this.cellClassRules,i,o,r=>t.toggleCss(r,!0),r=>t.toggleCss(r,!1)),this.cellClassRules=i}applyUserStyles(){let e=this.column,t=e.colDef,n=t.cellStyle;if(!n)return;let i;if(typeof n=="function"){let o=this.getCellClassParams(e,t);i=n(o)}else i=n;i&&this.cellComp.setUserStyles(i)}applyClassesFromColDef(){let{column:e,cellComp:t}=this,n=e.colDef,i=this.getCellClassParams(e,n);for(let r of this.staticClasses)t.toggleCss(r,!1);let o=this.beans.cellStyles.getStaticCellClasses(n,i);this.staticClasses=o;for(let r of o)t.toggleCss(r,!0)}getCellClassParams(e,t){let{value:n,rowNode:i}=this.cellCtrl;return at(this.beans.gos,{value:n,data:i.data,node:i,colDef:t,column:e,rowIndex:i.rowIndex})}},cVe=class extends te{constructor(){super(...arguments),this.beanName="cellStyles"}processAllCellClasses(e,t,n,i){kV(this.beans.expressionSvc,void 0,e.cellClassRules,t,n,i),this.processStaticCellClasses(e,t,n)}getStaticCellClasses(e,t){let{cellClass:n}=e;if(!n)return[];let i;return typeof n=="function"?i=n(t):i=n,typeof i=="string"&&(i=[i]),i||[]}createCellCustomStyleFeature(e,t){return new lVe(e,t)}processStaticCellClasses(e,t,n){this.getStaticCellClasses(e,t).forEach(o=>{n(o)})}},dVe={moduleName:"CellStyle",version:we,beans:[cVe]},uVe={moduleName:"RowStyle",version:we,beans:[J2e]};function hVe(e,t){return!!e.colHover?.isHovered(t)}var pVe=class extends te{constructor(e,t){super(),this.columns=e,this.element=t,this.destroyManagedListeners=[],this.enableFeature=n=>{let{beans:i,gos:o,element:r,columns:s}=this,a=i.colHover;if(n??!!o.get("columnHoverHighlight"))this.destroyManagedListeners=this.addManagedElementListeners(r,{mouseover:a.setMouseOver.bind(a,s),mouseout:a.clearMouseOver.bind(a)});else{for(let c of this.destroyManagedListeners)c();this.destroyManagedListeners=[]}}}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue:e})=>{this.enableFeature(e)}),this.enableFeature()}destroy(){super.destroy(),this.destroyManagedListeners=null}},fVe="ag-column-hover",mVe=class extends te{constructor(){super(...arguments),this.beanName="colHover"}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue:e})=>{e||this.clearMouseOver()})}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){if(!this.gos.get("columnHoverHighlight"))return!1;let t=this.selectedColumns;return!!t&&t.indexOf(e)>=0}addHeaderColumnHoverListener(e,t,n){let i=()=>{let o=this.isHovered(n);t.toggleCss("ag-column-hover",o)};e.addManagedEventListeners({columnHoverChanged:i}),i()}onCellColumnHover(e,t){if(!t)return;let n=this.isHovered(e);t.toggleCss(fVe,n)}addHeaderFilterColumnHoverListener(e,t,n,i){this.createHoverFeature(e,[n],i);let o=()=>{let r=this.isHovered(n);t.toggleCss("ag-column-hover",r)};e.addManagedEventListeners({columnHoverChanged:o}),o()}createHoverFeature(e,t,n){e.createManagedBean(new pVe(t,n))}updateState(e){this.selectedColumns=e,this.eventSvc.dispatchEvent({type:"columnHoverChanged"})}},gVe={moduleName:"ColumnHover",version:we,beans:[mVe],apiFunctions:{isColumnHovered:hVe}},vVe=class extends te{constructor(){super(...arguments),this.beanName="apiEventSvc",this.syncListeners=new Map,this.asyncListeners=new Map,this.syncGlobalListeners=new Set,this.globalListenerPairs=new Map}postConstruct(){this.wrapSvc=this.beans.frameworkOverrides.createGlobalEventListenerWrapper?.()}addListener(e,t){let n=this.wrapSvc?.wrap(e,t)??t,i=!Kk.has(e),o=i?this.asyncListeners:this.syncListeners;o.has(e)||o.set(e,new Set),o.get(e).add(n),this.eventSvc.addListener(e,n,i)}removeListener(e,t){let n=this.wrapSvc?.unwrap(e,t)??t,o=!!this.asyncListeners.get(e)?.delete(n);o||this.syncListeners.get(e)?.delete(n),this.eventSvc.removeListener(e,n,o)}addGlobalListener(e){let t=this.wrapSvc?.wrapGlobal(e)??e,n=(r,s)=>{Kk.has(r)&&t(r,s)},i=(r,s)=>{Kk.has(r)||t(r,s)};this.globalListenerPairs.set(e,{syncListener:n,asyncListener:i});let o=this.eventSvc;o.addGlobalListener(n,!1),o.addGlobalListener(i,!0)}removeGlobalListener(e){let{eventSvc:t,wrapSvc:n,globalListenerPairs:i}=this,o=n?.unwrapGlobal(e)??e;if(i.has(o)){let{syncListener:s,asyncListener:a}=i.get(o);t.removeGlobalListener(s,!1),t.removeGlobalListener(a,!0),i.delete(e)}else this.syncGlobalListeners.delete(o),t.removeGlobalListener(o,!1)}destroyEventListeners(e,t){e.forEach((n,i)=>{n.forEach(o=>this.eventSvc.removeListener(i,o,t)),n.clear()}),e.clear()}destroyGlobalListeners(e,t){for(let n of e)this.eventSvc.removeGlobalListener(n,t);e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncListeners,!1),this.destroyEventListeners(this.asyncListeners,!0),this.destroyGlobalListeners(this.syncGlobalListeners,!1);let{globalListenerPairs:e,eventSvc:t}=this;e.forEach(({syncListener:n,asyncListener:i})=>{t.removeGlobalListener(n,!1),t.removeGlobalListener(i,!0)}),e.clear()}};function _Ve(e,t,n){e.apiEventSvc?.addListener(t,n)}function yVe(e,t,n){e.apiEventSvc?.removeListener(t,n)}function bVe(e,t){e.apiEventSvc?.addGlobalListener(t)}function CVe(e,t){e.apiEventSvc?.removeGlobalListener(t)}var wVe={moduleName:"EventApi",version:we,apiFunctions:{addEventListener:_Ve,addGlobalListener:bVe,removeEventListener:yVe,removeGlobalListener:CVe},beans:[vVe]},xVe={moduleName:"Locale",version:we,beans:[JLe]},SVe=class extends te{constructor(){super(...arguments),this.beanName="rowAutoHeight",this.wasEverActive=!1,this._debouncedCalculateRowHeights=zo(this,this.calculateRowHeights.bind(this),1)}requestCheckAutoHeight(){this.wasEverActive&&this._debouncedCalculateRowHeights()}calculateRowHeights(){let{visibleCols:e,rowModel:t,rowSpanSvc:n,pinnedRowModel:i}=this.beans,o=e.autoHeightCols,r=!1,s=a=>{let l=a.__autoHeights,c=mu(this.beans,a).height;for(let u of o){let h=l?.[u.getColId()],f=n?.getCellSpan(u,a);if(f){if(f.getLastNode()!==a)continue;if(h=n?.getCellSpan(u,a)?.getLastNodeAutoHeight(),!h)return}if(h==null){if(this.colSpanSkipCell(u,a))continue;return}c=Math.max(h,c)}c!==a.rowHeight&&(a.setRowHeight(c),r=!0)};i?.forEachPinnedRow?.("top",s),i?.forEachPinnedRow?.("bottom",s),t.forEachDisplayedNode?.(s),r&&t.onRowHeightChanged?.()}setRowAutoHeight(e,t,n){if(e.__autoHeights??(e.__autoHeights={}),t==null){delete e.__autoHeights[n.getId()];return}let i=e.__autoHeights[n.getId()];e.__autoHeights[n.getId()]=t,i!==t&&this.requestCheckAutoHeight()}colSpanSkipCell(e,t){let{colModel:n,colViewport:i,visibleCols:o}=this.beans;if(!n.colSpanActive)return!1;let r=[];switch(e.getPinned()){case"left":r=o.getLeftColsForRow(t);break;case"right":r=o.getRightColsForRow(t);break;case null:r=i.getColsWithinViewport(t);break}return!r.includes(e)}setupCellAutoHeight(e,t,n){if(!e.column.isAutoHeight()||!t)return!1;this.wasEverActive=!0;let i=t.parentElement,{rowNode:o,column:r}=e,s=this.beans,a=u=>{if(this.beans.editSvc?.isEditing(e)||!e.isAlive()||!n.isAlive())return;let{paddingTop:h,paddingBottom:f,borderBottomWidth:m,borderTopWidth:_}=Ep(i),y=h+f+m+_,C=t.offsetHeight+y;if(u<5){let I=!ko(s)?.contains(t),O=C==0;if(I||O){window.setTimeout(()=>a(u+1),0);return}}this.setRowAutoHeight(o,C,r)},l=()=>a(0);l();let c=_u(s,t,l);return n.addDestroyFunc(()=>{c(),this.setRowAutoHeight(o,void 0,r)}),!0}setAutoHeightActive(e){this.active=e.list.some(t=>t.isVisible()&&t.isAutoHeight())}areRowsMeasured(){if(!this.active)return!0;let e=this.beans.rowRenderer.getAllRowCtrls(),t=null;for(let{rowNode:n}of e)if((!t||this.beans.colModel.colSpanActive)&&(t=this.beans.colViewport.getColsWithinViewport(n).filter(o=>o.isAutoHeight())),t.length!==0){if(!n.__autoHeights)return!1;for(let i of t){let o=n.__autoHeights[i.getColId()];if(!o||n.rowHeight<o)return!1}}return!0}},EVe={moduleName:"RowAutoHeight",version:we,beans:[SVe]},Uie={moduleName:"AllCommunity",version:we,dependsOn:[TI,Pze,$ze,gNe,DBe,kBe,IBe,MBe,RBe,TBe,PBe,EBe,_3e,y3e,b3e,v3e,w3e,x3e,o4e,ize,x4e,Gne,A4e,O4e,$4e,q4e,pAe,eVe,qBe,OLe,dVe,gVe,uVe,wVe,NLe,Jze,Iie,xVe,EVe,hAe,Eze,aVe]};bI.registerModules([Uie]);ste({theme:"legacy"});var Wie={providers:[aQ({eventCoalescing:!0}),hz(QJ),Dz(),TB(PB())]};function Jg(e){return!!e._zod}function Va(e,t){return Jg(e)?jS(e,t):e.safeParse(t)}function PI(e){if(!e)return;let t;if(Jg(e)?t=e._zod?.def?.shape:t=e.shape,!!t){if(typeof t=="function")try{return t()}catch{return}return t}}function Yie(e){if(Jg(e)){let r=e._zod?.def;if(r){if(r.value!==void 0)return r.value;if(Array.isArray(r.values)&&r.values.length>0)return r.values[0]}}let n=e._def;if(n){if(n.value!==void 0)return n.value;if(Array.isArray(n.values)&&n.values.length>0)return n.values[0]}let i=e.value;if(i!==void 0)return i}var he={};zy(he,{$brand:()=>HS,$input:()=>jF,$output:()=>$F,NEVER:()=>Vy,TimePrecision:()=>KF,ZodAny:()=>t6,ZodArray:()=>r6,ZodBase64:()=>XI,ZodBase64URL:()=>eM,ZodBigInt:()=>ov,ZodBigIntFormat:()=>iM,ZodBoolean:()=>iv,ZodCIDRv4:()=>QI,ZodCIDRv6:()=>JI,ZodCUID:()=>GI,ZodCUID2:()=>UI,ZodCatch:()=>x6,ZodCodec:()=>dM,ZodCustom:()=>Lw,ZodCustomStringFormat:()=>tv,ZodDate:()=>Tw,ZodDefault:()=>v6,ZodDiscriminatedUnion:()=>a6,ZodE164:()=>tM,ZodEmail:()=>VI,ZodEmoji:()=>$I,ZodEnum:()=>Xg,ZodError:()=>TVe,ZodFile:()=>f6,ZodFirstPartyTypeKind:()=>F6,ZodFunction:()=>P6,ZodGUID:()=>kw,ZodIPv4:()=>ZI,ZodIPv6:()=>YI,ZodISODate:()=>FI,ZodISODateTime:()=>OI,ZodISODuration:()=>NI,ZodISOTime:()=>LI,ZodIntersection:()=>l6,ZodIssueCode:()=>L6,ZodJWT:()=>nM,ZodKSUID:()=>KI,ZodLazy:()=>M6,ZodLiteral:()=>p6,ZodMAC:()=>QV,ZodMap:()=>u6,ZodNaN:()=>E6,ZodNanoID:()=>jI,ZodNever:()=>i6,ZodNonOptional:()=>lM,ZodNull:()=>e6,ZodNullable:()=>g6,ZodNumber:()=>nv,ZodNumberFormat:()=>Mp,ZodObject:()=>Pw,ZodOptional:()=>aM,ZodPipe:()=>cM,ZodPrefault:()=>y6,ZodPromise:()=>T6,ZodReadonly:()=>D6,ZodRealError:()=>Zr,ZodRecord:()=>Fw,ZodSet:()=>h6,ZodString:()=>ev,ZodStringFormat:()=>$n,ZodSuccess:()=>w6,ZodSymbol:()=>JV,ZodTemplateLiteral:()=>I6,ZodTransform:()=>m6,ZodTuple:()=>c6,ZodType:()=>Gt,ZodULID:()=>WI,ZodURL:()=>Rw,ZodUUID:()=>jl,ZodUndefined:()=>XV,ZodUnion:()=>Aw,ZodUnknown:()=>n6,ZodVoid:()=>o6,ZodXID:()=>qI,ZodXor:()=>s6,_ZodString:()=>zI,_default:()=>_6,_function:()=>Qoe,any:()=>oM,array:()=>Ee,base64:()=>voe,base64url:()=>_oe,bigint:()=>Moe,boolean:()=>Fn,catch:()=>S6,check:()=>Joe,cidrv4:()=>moe,cidrv6:()=>goe,clone:()=>_h,codec:()=>Koe,coerce:()=>Bw,config:()=>mc,core:()=>Bs,cuid:()=>aoe,cuid2:()=>loe,custom:()=>uM,date:()=>Foe,decode:()=>GV,decodeAsync:()=>WV,describe:()=>Xoe,discriminatedUnion:()=>Ow,e164:()=>yoe,email:()=>Jie,emoji:()=>roe,encode:()=>jV,encodeAsync:()=>UV,endsWith:()=>em,enum:()=>$o,file:()=>Goe,flattenError:()=>Hy,float32:()=>Eoe,float64:()=>Doe,formatError:()=>$y,fromJSONSchema:()=>rre,function:()=>Qoe,getErrorMap:()=>OVe,globalRegistry:()=>Ld,gt:()=>_c,gte:()=>_r,guid:()=>Xie,hash:()=>Soe,hex:()=>xoe,hostname:()=>woe,httpUrl:()=>ooe,includes:()=>Jf,instanceof:()=>tre,int:()=>BI,int32:()=>koe,int64:()=>Roe,intersection:()=>sv,ipv4:()=>hoe,ipv6:()=>foe,iso:()=>xu,json:()=>ire,jwt:()=>boe,keyof:()=>Loe,ksuid:()=>uoe,lazy:()=>R6,length:()=>Ch,literal:()=>Xe,locales:()=>HF,looseObject:()=>Gi,looseRecord:()=>Voe,lowercase:()=>Yf,lt:()=>vc,lte:()=>as,mac:()=>poe,map:()=>Hoe,maxLength:()=>bh,maxSize:()=>yh,meta:()=>ere,mime:()=>tm,minLength:()=>yc,minSize:()=>Bd,multipleOf:()=>Nd,nan:()=>qoe,nanoid:()=>soe,nativeEnum:()=>joe,negative:()=>pE,never:()=>rM,nonnegative:()=>mE,nonoptional:()=>C6,nonpositive:()=>fE,normalize:()=>im,null:()=>rv,nullable:()=>Iw,nullish:()=>Uoe,number:()=>un,object:()=>Re,optional:()=>ei,overwrite:()=>nm,parse:()=>zV,parseAsync:()=>VV,partialRecord:()=>zoe,pipe:()=>Mw,positive:()=>hE,prefault:()=>b6,preprocess:()=>Nw,prettifyError:()=>EO,promise:()=>Yoe,property:()=>gE,readonly:()=>k6,record:()=>Kn,refine:()=>A6,regex:()=>Zf,regexes:()=>gc,registry:()=>GF,safeDecode:()=>KV,safeDecodeAsync:()=>YV,safeEncode:()=>qV,safeEncodeAsync:()=>ZV,safeParse:()=>HV,safeParseAsync:()=>$V,set:()=>$oe,setErrorMap:()=>AVe,size:()=>Kf,slugify:()=>Uy,startsWith:()=>Xf,strictObject:()=>Noe,string:()=>z,stringFormat:()=>Coe,stringbool:()=>nre,success:()=>Woe,superRefine:()=>O6,symbol:()=>Poe,templateLiteral:()=>Zoe,toJSONSchema:()=>lm,toLowerCase:()=>rm,toUpperCase:()=>sm,transform:()=>sM,treeifyError:()=>SO,trim:()=>om,tuple:()=>d6,uint32:()=>Ioe,uint64:()=>Toe,ulid:()=>coe,undefined:()=>Aoe,union:()=>Nn,unknown:()=>jn,uppercase:()=>Qf,url:()=>HI,util:()=>Kt,uuid:()=>eoe,uuidv4:()=>toe,uuidv6:()=>noe,uuidv7:()=>ioe,void:()=>Ooe,xid:()=>doe,xor:()=>Boe});var Dw={};zy(Dw,{ZodAny:()=>t6,ZodArray:()=>r6,ZodBase64:()=>XI,ZodBase64URL:()=>eM,ZodBigInt:()=>ov,ZodBigIntFormat:()=>iM,ZodBoolean:()=>iv,ZodCIDRv4:()=>QI,ZodCIDRv6:()=>JI,ZodCUID:()=>GI,ZodCUID2:()=>UI,ZodCatch:()=>x6,ZodCodec:()=>dM,ZodCustom:()=>Lw,ZodCustomStringFormat:()=>tv,ZodDate:()=>Tw,ZodDefault:()=>v6,ZodDiscriminatedUnion:()=>a6,ZodE164:()=>tM,ZodEmail:()=>VI,ZodEmoji:()=>$I,ZodEnum:()=>Xg,ZodFile:()=>f6,ZodFunction:()=>P6,ZodGUID:()=>kw,ZodIPv4:()=>ZI,ZodIPv6:()=>YI,ZodIntersection:()=>l6,ZodJWT:()=>nM,ZodKSUID:()=>KI,ZodLazy:()=>M6,ZodLiteral:()=>p6,ZodMAC:()=>QV,ZodMap:()=>u6,ZodNaN:()=>E6,ZodNanoID:()=>jI,ZodNever:()=>i6,ZodNonOptional:()=>lM,ZodNull:()=>e6,ZodNullable:()=>g6,ZodNumber:()=>nv,ZodNumberFormat:()=>Mp,ZodObject:()=>Pw,ZodOptional:()=>aM,ZodPipe:()=>cM,ZodPrefault:()=>y6,ZodPromise:()=>T6,ZodReadonly:()=>D6,ZodRecord:()=>Fw,ZodSet:()=>h6,ZodString:()=>ev,ZodStringFormat:()=>$n,ZodSuccess:()=>w6,ZodSymbol:()=>JV,ZodTemplateLiteral:()=>I6,ZodTransform:()=>m6,ZodTuple:()=>c6,ZodType:()=>Gt,ZodULID:()=>WI,ZodURL:()=>Rw,ZodUUID:()=>jl,ZodUndefined:()=>XV,ZodUnion:()=>Aw,ZodUnknown:()=>n6,ZodVoid:()=>o6,ZodXID:()=>qI,ZodXor:()=>s6,_ZodString:()=>zI,_default:()=>_6,_function:()=>Qoe,any:()=>oM,array:()=>Ee,base64:()=>voe,base64url:()=>_oe,bigint:()=>Moe,boolean:()=>Fn,catch:()=>S6,check:()=>Joe,cidrv4:()=>moe,cidrv6:()=>goe,codec:()=>Koe,cuid:()=>aoe,cuid2:()=>loe,custom:()=>uM,date:()=>Foe,describe:()=>Xoe,discriminatedUnion:()=>Ow,e164:()=>yoe,email:()=>Jie,emoji:()=>roe,enum:()=>$o,file:()=>Goe,float32:()=>Eoe,float64:()=>Doe,function:()=>Qoe,guid:()=>Xie,hash:()=>Soe,hex:()=>xoe,hostname:()=>woe,httpUrl:()=>ooe,instanceof:()=>tre,int:()=>BI,int32:()=>koe,int64:()=>Roe,intersection:()=>sv,ipv4:()=>hoe,ipv6:()=>foe,json:()=>ire,jwt:()=>boe,keyof:()=>Loe,ksuid:()=>uoe,lazy:()=>R6,literal:()=>Xe,looseObject:()=>Gi,looseRecord:()=>Voe,mac:()=>poe,map:()=>Hoe,meta:()=>ere,nan:()=>qoe,nanoid:()=>soe,nativeEnum:()=>joe,never:()=>rM,nonoptional:()=>C6,null:()=>rv,nullable:()=>Iw,nullish:()=>Uoe,number:()=>un,object:()=>Re,optional:()=>ei,partialRecord:()=>zoe,pipe:()=>Mw,prefault:()=>b6,preprocess:()=>Nw,promise:()=>Yoe,readonly:()=>k6,record:()=>Kn,refine:()=>A6,set:()=>$oe,strictObject:()=>Noe,string:()=>z,stringFormat:()=>Coe,stringbool:()=>nre,success:()=>Woe,superRefine:()=>O6,symbol:()=>Poe,templateLiteral:()=>Zoe,transform:()=>sM,tuple:()=>d6,uint32:()=>Ioe,uint64:()=>Toe,ulid:()=>coe,undefined:()=>Aoe,union:()=>Nn,unknown:()=>jn,url:()=>HI,uuid:()=>eoe,uuidv4:()=>toe,uuidv6:()=>noe,uuidv7:()=>ioe,void:()=>Ooe,xid:()=>doe,xor:()=>Boe});var AI={};zy(AI,{endsWith:()=>em,gt:()=>_c,gte:()=>_r,includes:()=>Jf,length:()=>Ch,lowercase:()=>Yf,lt:()=>vc,lte:()=>as,maxLength:()=>bh,maxSize:()=>yh,mime:()=>tm,minLength:()=>yc,minSize:()=>Bd,multipleOf:()=>Nd,negative:()=>pE,nonnegative:()=>mE,nonpositive:()=>fE,normalize:()=>im,overwrite:()=>nm,positive:()=>hE,property:()=>gE,regex:()=>Zf,size:()=>Kf,slugify:()=>Uy,startsWith:()=>Xf,toLowerCase:()=>rm,toUpperCase:()=>sm,trim:()=>om,uppercase:()=>Qf});var xu={};zy(xu,{ZodISODate:()=>FI,ZodISODateTime:()=>OI,ZodISODuration:()=>NI,ZodISOTime:()=>LI,date:()=>LV,datetime:()=>FV,duration:()=>BV,time:()=>NV});var OI=Me("ZodISODateTime",(e,t)=>{zO.init(e,t),$n.init(e,t)});function FV(e){return ZF(OI,e)}var FI=Me("ZodISODate",(e,t)=>{VO.init(e,t),$n.init(e,t)});function LV(e){return YF(FI,e)}var LI=Me("ZodISOTime",(e,t)=>{HO.init(e,t),$n.init(e,t)});function NV(e){return QF(LI,e)}var NI=Me("ZodISODuration",(e,t)=>{$O.init(e,t),$n.init(e,t)});function BV(e){return JF(NI,e)}var Qie=(e,t)=>{IU.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>$y(e,n)},flatten:{value:n=>Hy(e,n)},addIssue:{value:n=>{e.issues.push(n),e.message=JSON.stringify(e.issues,xO,2)}},addIssues:{value:n=>{e.issues.push(...n),e.message=JSON.stringify(e.issues,xO,2)}},isEmpty:{get(){return e.issues.length===0}}})},TVe=Me("ZodError",Qie),Zr=Me("ZodError",Qie,{Parent:Error});var zV=MU(Zr),VV=RU(Zr),HV=TU(Zr),$V=PU(Zr),jV=AU(Zr),GV=OU(Zr),UV=FU(Zr),WV=LU(Zr),qV=NU(Zr),KV=BU(Zr),ZV=zU(Zr),YV=VU(Zr);var Gt=Me("ZodType",(e,t)=>(GS.init(e,t),Object.assign(e["~standard"],{jsonSchema:{input:M2(e,"input"),output:M2(e,"output")}}),e.toJSONSchema=GU(e,{}),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(Kt.mergeDefs(t,{checks:[...t.checks??[],...n.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]})),e.clone=(n,i)=>_h(e,n,i),e.brand=()=>e,e.register=(n,i)=>(n.add(e,i),e),e.parse=(n,i)=>zV(e,n,i,{callee:e.parse}),e.safeParse=(n,i)=>HV(e,n,i),e.parseAsync=(n,i)=>E(null,null,function*(){return VV(e,n,i,{callee:e.parseAsync})}),e.safeParseAsync=(n,i)=>E(null,null,function*(){return $V(e,n,i)}),e.spa=e.safeParseAsync,e.encode=(n,i)=>jV(e,n,i),e.decode=(n,i)=>GV(e,n,i),e.encodeAsync=(n,i)=>E(null,null,function*(){return UV(e,n,i)}),e.decodeAsync=(n,i)=>E(null,null,function*(){return WV(e,n,i)}),e.safeEncode=(n,i)=>qV(e,n,i),e.safeDecode=(n,i)=>KV(e,n,i),e.safeEncodeAsync=(n,i)=>E(null,null,function*(){return ZV(e,n,i)}),e.safeDecodeAsync=(n,i)=>E(null,null,function*(){return YV(e,n,i)}),e.refine=(n,i)=>e.check(A6(n,i)),e.superRefine=n=>e.check(O6(n)),e.overwrite=n=>e.check(nm(n)),e.optional=()=>ei(e),e.nullable=()=>Iw(e),e.nullish=()=>ei(Iw(e)),e.nonoptional=n=>C6(e,n),e.array=()=>Ee(e),e.or=n=>Nn([e,n]),e.and=n=>sv(e,n),e.transform=n=>Mw(e,sM(n)),e.default=n=>_6(e,n),e.prefault=n=>b6(e,n),e.catch=n=>S6(e,n),e.pipe=n=>Mw(e,n),e.readonly=()=>k6(e),e.describe=n=>{let i=e.clone();return Ld.add(i,{description:n}),i},Object.defineProperty(e,"description",{get(){return Ld.get(e)?.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return Ld.get(e);let i=e.clone();return Ld.add(i,n[0]),i},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),zI=Me("_ZodString",(e,t)=>{US.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(i,o,r)=>UU(e,i,o,r);let n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...i)=>e.check(Zf(...i)),e.includes=(...i)=>e.check(Jf(...i)),e.startsWith=(...i)=>e.check(Xf(...i)),e.endsWith=(...i)=>e.check(em(...i)),e.min=(...i)=>e.check(yc(...i)),e.max=(...i)=>e.check(bh(...i)),e.length=(...i)=>e.check(Ch(...i)),e.nonempty=(...i)=>e.check(yc(1,...i)),e.lowercase=i=>e.check(Yf(i)),e.uppercase=i=>e.check(Qf(i)),e.trim=()=>e.check(om()),e.normalize=(...i)=>e.check(im(...i)),e.toLowerCase=()=>e.check(rm()),e.toUpperCase=()=>e.check(sm()),e.slugify=()=>e.check(Uy())}),ev=Me("ZodString",(e,t)=>{US.init(e,t),zI.init(e,t),e.email=n=>e.check(WS(VI,n)),e.url=n=>e.check(Gy(Rw,n)),e.jwt=n=>e.check(uE(nM,n)),e.emoji=n=>e.check(QS($I,n)),e.guid=n=>e.check(jy(kw,n)),e.uuid=n=>e.check(qS(jl,n)),e.uuidv4=n=>e.check(KS(jl,n)),e.uuidv6=n=>e.check(ZS(jl,n)),e.uuidv7=n=>e.check(YS(jl,n)),e.nanoid=n=>e.check(JS(jI,n)),e.guid=n=>e.check(jy(kw,n)),e.cuid=n=>e.check(XS(GI,n)),e.cuid2=n=>e.check(eE(UI,n)),e.ulid=n=>e.check(tE(WI,n)),e.base64=n=>e.check(lE(XI,n)),e.base64url=n=>e.check(cE(eM,n)),e.xid=n=>e.check(nE(qI,n)),e.ksuid=n=>e.check(iE(KI,n)),e.ipv4=n=>e.check(oE(ZI,n)),e.ipv6=n=>e.check(rE(YI,n)),e.cidrv4=n=>e.check(sE(QI,n)),e.cidrv6=n=>e.check(aE(JI,n)),e.e164=n=>e.check(dE(tM,n)),e.datetime=n=>e.check(FV(n)),e.date=n=>e.check(LV(n)),e.time=n=>e.check(NV(n)),e.duration=n=>e.check(BV(n))});function z(e){return UF(ev,e)}var $n=Me("ZodStringFormat",(e,t)=>{kO.init(e,t),zI.init(e,t)}),VI=Me("ZodEmail",(e,t)=>{RO.init(e,t),$n.init(e,t)});function Jie(e){return WS(VI,e)}var kw=Me("ZodGUID",(e,t)=>{IO.init(e,t),$n.init(e,t)});function Xie(e){return jy(kw,e)}var jl=Me("ZodUUID",(e,t)=>{MO.init(e,t),$n.init(e,t)});function eoe(e){return qS(jl,e)}function toe(e){return KS(jl,e)}function noe(e){return ZS(jl,e)}function ioe(e){return YS(jl,e)}var Rw=Me("ZodURL",(e,t)=>{TO.init(e,t),$n.init(e,t)});function HI(e){return Gy(Rw,e)}function ooe(e){return Gy(Rw,g({protocol:/^https?$/,hostname:gc.domain},Kt.normalizeParams(e)))}var $I=Me("ZodEmoji",(e,t)=>{PO.init(e,t),$n.init(e,t)});function roe(e){return QS($I,e)}var jI=Me("ZodNanoID",(e,t)=>{AO.init(e,t),$n.init(e,t)});function soe(e){return JS(jI,e)}var GI=Me("ZodCUID",(e,t)=>{OO.init(e,t),$n.init(e,t)});function aoe(e){return XS(GI,e)}var UI=Me("ZodCUID2",(e,t)=>{FO.init(e,t),$n.init(e,t)});function loe(e){return eE(UI,e)}var WI=Me("ZodULID",(e,t)=>{LO.init(e,t),$n.init(e,t)});function coe(e){return tE(WI,e)}var qI=Me("ZodXID",(e,t)=>{NO.init(e,t),$n.init(e,t)});function doe(e){return nE(qI,e)}var KI=Me("ZodKSUID",(e,t)=>{BO.init(e,t),$n.init(e,t)});function uoe(e){return iE(KI,e)}var ZI=Me("ZodIPv4",(e,t)=>{jO.init(e,t),$n.init(e,t)});function hoe(e){return oE(ZI,e)}var QV=Me("ZodMAC",(e,t)=>{UO.init(e,t),$n.init(e,t)});function poe(e){return qF(QV,e)}var YI=Me("ZodIPv6",(e,t)=>{GO.init(e,t),$n.init(e,t)});function foe(e){return rE(YI,e)}var QI=Me("ZodCIDRv4",(e,t)=>{WO.init(e,t),$n.init(e,t)});function moe(e){return sE(QI,e)}var JI=Me("ZodCIDRv6",(e,t)=>{qO.init(e,t),$n.init(e,t)});function goe(e){return aE(JI,e)}var XI=Me("ZodBase64",(e,t)=>{KO.init(e,t),$n.init(e,t)});function voe(e){return lE(XI,e)}var eM=Me("ZodBase64URL",(e,t)=>{ZO.init(e,t),$n.init(e,t)});function _oe(e){return cE(eM,e)}var tM=Me("ZodE164",(e,t)=>{YO.init(e,t),$n.init(e,t)});function yoe(e){return dE(tM,e)}var nM=Me("ZodJWT",(e,t)=>{QO.init(e,t),$n.init(e,t)});function boe(e){return uE(nM,e)}var tv=Me("ZodCustomStringFormat",(e,t)=>{JO.init(e,t),$n.init(e,t)});function Coe(e,t,n={}){return am(tv,e,t,n)}function woe(e){return am(tv,"hostname",gc.hostname,e)}function xoe(e){return am(tv,"hex",gc.hex,e)}function Soe(e,t){let n=t?.enc??"hex",i=`${e}_${n}`,o=gc[i];if(!o)throw new Error(`Unrecognized hash format: ${i}`);return am(tv,i,o,t)}var nv=Me("ZodNumber",(e,t)=>{XO.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(i,o,r)=>WU(e,i,o,r),e.gt=(i,o)=>e.check(_c(i,o)),e.gte=(i,o)=>e.check(_r(i,o)),e.min=(i,o)=>e.check(_r(i,o)),e.lt=(i,o)=>e.check(vc(i,o)),e.lte=(i,o)=>e.check(as(i,o)),e.max=(i,o)=>e.check(as(i,o)),e.int=i=>e.check(BI(i)),e.safe=i=>e.check(BI(i)),e.positive=i=>e.check(_c(0,i)),e.nonnegative=i=>e.check(_r(0,i)),e.negative=i=>e.check(vc(0,i)),e.nonpositive=i=>e.check(as(0,i)),e.multipleOf=(i,o)=>e.check(Nd(i,o)),e.step=(i,o)=>e.check(Nd(i,o)),e.finite=()=>e;let n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function un(e){return XF(nv,e)}var Mp=Me("ZodNumberFormat",(e,t)=>{eF.init(e,t),nv.init(e,t)});function BI(e){return t2(Mp,e)}function Eoe(e){return n2(Mp,e)}function Doe(e){return i2(Mp,e)}function koe(e){return o2(Mp,e)}function Ioe(e){return r2(Mp,e)}var iv=Me("ZodBoolean",(e,t)=>{tF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>qU(e,n,i,o)});function Fn(e){return s2(iv,e)}var ov=Me("ZodBigInt",(e,t)=>{nF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(i,o,r)=>KU(e,i,o,r),e.gte=(i,o)=>e.check(_r(i,o)),e.min=(i,o)=>e.check(_r(i,o)),e.gt=(i,o)=>e.check(_c(i,o)),e.gte=(i,o)=>e.check(_r(i,o)),e.min=(i,o)=>e.check(_r(i,o)),e.lt=(i,o)=>e.check(vc(i,o)),e.lte=(i,o)=>e.check(as(i,o)),e.max=(i,o)=>e.check(as(i,o)),e.positive=i=>e.check(_c(BigInt(0),i)),e.negative=i=>e.check(vc(BigInt(0),i)),e.nonpositive=i=>e.check(as(BigInt(0),i)),e.nonnegative=i=>e.check(_r(BigInt(0),i)),e.multipleOf=(i,o)=>e.check(Nd(i,o));let n=e._zod.bag;e.minValue=n.minimum??null,e.maxValue=n.maximum??null,e.format=n.format??null});function Moe(e){return l2(ov,e)}var iM=Me("ZodBigIntFormat",(e,t)=>{iF.init(e,t),ov.init(e,t)});function Roe(e){return d2(iM,e)}function Toe(e){return u2(iM,e)}var JV=Me("ZodSymbol",(e,t)=>{oF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>ZU(e,n,i,o)});function Poe(e){return h2(JV,e)}var XV=Me("ZodUndefined",(e,t)=>{rF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>QU(e,n,i,o)});function Aoe(e){return p2(XV,e)}var e6=Me("ZodNull",(e,t)=>{sF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>YU(e,n,i,o)});function rv(e){return f2(e6,e)}var t6=Me("ZodAny",(e,t)=>{aF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>eW(e,n,i,o)});function oM(){return m2(t6)}var n6=Me("ZodUnknown",(e,t)=>{lF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>tW(e,n,i,o)});function jn(){return g2(n6)}var i6=Me("ZodNever",(e,t)=>{cF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>XU(e,n,i,o)});function rM(e){return v2(i6,e)}var o6=Me("ZodVoid",(e,t)=>{dF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>JU(e,n,i,o)});function Ooe(e){return _2(o6,e)}var Tw=Me("ZodDate",(e,t)=>{uF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(i,o,r)=>nW(e,i,o,r),e.min=(i,o)=>e.check(_r(i,o)),e.max=(i,o)=>e.check(as(i,o));let n=e._zod.bag;e.minDate=n.minimum?new Date(n.minimum):null,e.maxDate=n.maximum?new Date(n.maximum):null});function Foe(e){return y2(Tw,e)}var r6=Me("ZodArray",(e,t)=>{hF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>fW(e,n,i,o),e.element=t.element,e.min=(n,i)=>e.check(yc(n,i)),e.nonempty=n=>e.check(yc(1,n)),e.max=(n,i)=>e.check(bh(n,i)),e.length=(n,i)=>e.check(Ch(n,i)),e.unwrap=()=>e.element});function Ee(e,t){return jU(r6,e,t)}function Loe(e){let t=e._zod.def.shape;return $o(Object.keys(t))}var Pw=Me("ZodObject",(e,t)=>{HU.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>mW(e,n,i,o),Kt.defineLazy(e,"shape",()=>t.shape),e.keyof=()=>$o(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone(x(g({},e._zod.def),{catchall:n})),e.passthrough=()=>e.clone(x(g({},e._zod.def),{catchall:jn()})),e.loose=()=>e.clone(x(g({},e._zod.def),{catchall:jn()})),e.strict=()=>e.clone(x(g({},e._zod.def),{catchall:rM()})),e.strip=()=>e.clone(x(g({},e._zod.def),{catchall:void 0})),e.extend=n=>Kt.extend(e,n),e.safeExtend=n=>Kt.safeExtend(e,n),e.merge=n=>Kt.merge(e,n),e.pick=n=>Kt.pick(e,n),e.omit=n=>Kt.omit(e,n),e.partial=(...n)=>Kt.partial(aM,e,n[0]),e.required=(...n)=>Kt.required(lM,e,n[0])});function Re(e,t){let n=g({type:"object",shape:e??{}},Kt.normalizeParams(t));return new Pw(n)}function Noe(e,t){return new Pw(g({type:"object",shape:e,catchall:rM()},Kt.normalizeParams(t)))}function Gi(e,t){return new Pw(g({type:"object",shape:e,catchall:jn()},Kt.normalizeParams(t)))}var Aw=Me("ZodUnion",(e,t)=>{pF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>R2(e,n,i,o),e.options=t.options});function Nn(e,t){return new Aw(g({type:"union",options:e},Kt.normalizeParams(t)))}var s6=Me("ZodXor",(e,t)=>{Aw.init(e,t),fF.init(e,t),e._zod.processJSONSchema=(n,i,o)=>R2(e,n,i,o),e.options=t.options});function Boe(e,t){return new s6(g({type:"union",options:e,inclusive:!1},Kt.normalizeParams(t)))}var a6=Me("ZodDiscriminatedUnion",(e,t)=>{Aw.init(e,t),mF.init(e,t)});function Ow(e,t,n){return new a6(g({type:"union",options:t,discriminator:e},Kt.normalizeParams(n)))}var l6=Me("ZodIntersection",(e,t)=>{gF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>gW(e,n,i,o)});function sv(e,t){return new l6({type:"intersection",left:e,right:t})}var c6=Me("ZodTuple",(e,t)=>{vF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>vW(e,n,i,o),e.rest=n=>e.clone(x(g({},e._zod.def),{rest:n}))});function d6(e,t,n){let i=t instanceof GS,o=i?n:t,r=i?t:null;return new c6(g({type:"tuple",items:e,rest:r},Kt.normalizeParams(o)))}var Fw=Me("ZodRecord",(e,t)=>{_F.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>_W(e,n,i,o),e.keyType=t.keyType,e.valueType=t.valueType});function Kn(e,t,n){return new Fw(g({type:"record",keyType:e,valueType:t},Kt.normalizeParams(n)))}function zoe(e,t,n){let i=_h(e);return i._zod.values=void 0,new Fw(g({type:"record",keyType:i,valueType:t},Kt.normalizeParams(n)))}function Voe(e,t,n){return new Fw(g({type:"record",keyType:e,valueType:t,mode:"loose"},Kt.normalizeParams(n)))}var u6=Me("ZodMap",(e,t)=>{yF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>hW(e,n,i,o),e.keyType=t.keyType,e.valueType=t.valueType});function Hoe(e,t,n){return new u6(g({type:"map",keyType:e,valueType:t},Kt.normalizeParams(n)))}var h6=Me("ZodSet",(e,t)=>{bF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>pW(e,n,i,o),e.min=(...n)=>e.check(Bd(...n)),e.nonempty=n=>e.check(Bd(1,n)),e.max=(...n)=>e.check(yh(...n)),e.size=(...n)=>e.check(Kf(...n))});function $oe(e,t){return new h6(g({type:"set",valueType:e},Kt.normalizeParams(t)))}var Xg=Me("ZodEnum",(e,t)=>{CF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(i,o,r)=>iW(e,i,o,r),e.enum=t.entries,e.options=Object.values(t.entries);let n=new Set(Object.keys(t.entries));e.extract=(i,o)=>{let r={};for(let s of i)if(n.has(s))r[s]=t.entries[s];else throw new Error(`Key ${s} not found in enum`);return new Xg(x(g(x(g({},t),{checks:[]}),Kt.normalizeParams(o)),{entries:r}))},e.exclude=(i,o)=>{let r=g({},t.entries);for(let s of i)if(n.has(s))delete r[s];else throw new Error(`Key ${s} not found in enum`);return new Xg(x(g(x(g({},t),{checks:[]}),Kt.normalizeParams(o)),{entries:r}))}});function $o(e,t){let n=Array.isArray(e)?Object.fromEntries(e.map(i=>[i,i])):e;return new Xg(g({type:"enum",entries:n},Kt.normalizeParams(t)))}function joe(e,t){return new Xg(g({type:"enum",entries:e},Kt.normalizeParams(t)))}var p6=Me("ZodLiteral",(e,t)=>{wF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>oW(e,n,i,o),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function Xe(e,t){return new p6(g({type:"literal",values:Array.isArray(e)?e:[e]},Kt.normalizeParams(t)))}var f6=Me("ZodFile",(e,t)=>{xF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>aW(e,n,i,o),e.min=(n,i)=>e.check(Bd(n,i)),e.max=(n,i)=>e.check(yh(n,i)),e.mime=(n,i)=>e.check(tm(Array.isArray(n)?n:[n],i))});function Goe(e){return w2(f6,e)}var m6=Me("ZodTransform",(e,t)=>{SF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>uW(e,n,i,o),e._zod.parse=(n,i)=>{if(i.direction==="backward")throw new kU(e.constructor.name);n.addIssue=r=>{if(typeof r=="string")n.issues.push(Kt.issue(r,n.value,t));else{let s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),n.issues.push(Kt.issue(s))}};let o=t.transform(n.value,n);return o instanceof Promise?o.then(r=>(n.value=r,n)):(n.value=o,n)}});function sM(e){return new m6({type:"transform",transform:e})}var aM=Me("ZodOptional",(e,t)=>{EF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>kW(e,n,i,o),e.unwrap=()=>e._zod.def.innerType});function ei(e){return new aM({type:"optional",innerType:e})}var g6=Me("ZodNullable",(e,t)=>{DF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>yW(e,n,i,o),e.unwrap=()=>e._zod.def.innerType});function Iw(e){return new g6({type:"nullable",innerType:e})}function Uoe(e){return ei(Iw(e))}var v6=Me("ZodDefault",(e,t)=>{kF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>CW(e,n,i,o),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function _6(e,t){return new v6({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Kt.shallowClone(t)}})}var y6=Me("ZodPrefault",(e,t)=>{IF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>wW(e,n,i,o),e.unwrap=()=>e._zod.def.innerType});function b6(e,t){return new y6({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Kt.shallowClone(t)}})}var lM=Me("ZodNonOptional",(e,t)=>{MF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>bW(e,n,i,o),e.unwrap=()=>e._zod.def.innerType});function C6(e,t){return new lM(g({type:"nonoptional",innerType:e},Kt.normalizeParams(t)))}var w6=Me("ZodSuccess",(e,t)=>{RF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>lW(e,n,i,o),e.unwrap=()=>e._zod.def.innerType});function Woe(e){return new w6({type:"success",innerType:e})}var x6=Me("ZodCatch",(e,t)=>{TF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>xW(e,n,i,o),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function S6(e,t){return new x6({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}var E6=Me("ZodNaN",(e,t)=>{PF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>rW(e,n,i,o)});function qoe(e){return C2(E6,e)}var cM=Me("ZodPipe",(e,t)=>{AF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>SW(e,n,i,o),e.in=t.in,e.out=t.out});function Mw(e,t){return new cM({type:"pipe",in:e,out:t})}var dM=Me("ZodCodec",(e,t)=>{cM.init(e,t),OF.init(e,t)});function Koe(e,t,n){return new dM({type:"pipe",in:e,out:t,transform:n.decode,reverseTransform:n.encode})}var D6=Me("ZodReadonly",(e,t)=>{FF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>EW(e,n,i,o),e.unwrap=()=>e._zod.def.innerType});function k6(e){return new D6({type:"readonly",innerType:e})}var I6=Me("ZodTemplateLiteral",(e,t)=>{LF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>sW(e,n,i,o)});function Zoe(e,t){return new I6(g({type:"template_literal",parts:e},Kt.normalizeParams(t)))}var M6=Me("ZodLazy",(e,t)=>{zF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>IW(e,n,i,o),e.unwrap=()=>e._zod.def.getter()});function R6(e){return new M6({type:"lazy",getter:e})}var T6=Me("ZodPromise",(e,t)=>{BF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>DW(e,n,i,o),e.unwrap=()=>e._zod.def.innerType});function Yoe(e){return new T6({type:"promise",innerType:e})}var P6=Me("ZodFunction",(e,t)=>{NF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>dW(e,n,i,o)});function Qoe(e){return new P6({type:"function",input:Array.isArray(e?.input)?d6(e?.input):e?.input??Ee(jn()),output:e?.output??jn()})}var Lw=Me("ZodCustom",(e,t)=>{VF.init(e,t),Gt.init(e,t),e._zod.processJSONSchema=(n,i,o)=>cW(e,n,i,o)});function Joe(e){let t=new DO({check:"custom"});return t._zod.check=e,t}function uM(e,t){return x2(Lw,e??(()=>!0),t)}function A6(e,t={}){return S2(Lw,e,t)}function O6(e){return E2(e)}var Xoe=D2,ere=k2;function tre(e,t={error:`Input not instance of ${e.name}`}){let n=new Lw(g({type:"custom",check:"custom",fn:i=>i instanceof e,abort:!0},Kt.normalizeParams(t)));return n._zod.bag.Class=e,n}var nre=(...e)=>I2({Codec:dM,Boolean:iv,String:ev},...e);function ire(e){let t=R6(()=>Nn([z(e),un(),Fn(),rv(),Ee(t),Kn(z(),t)]));return t}function Nw(e,t){return Mw(sM(e),t)}var L6={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function AVe(e){mc({customError:e})}function OVe(){return mc().customError}var F6;F6||(F6={});var Fe=x(g(g({},Dw),AI),{iso:xu});function FVe(e,t){let n=e.$schema;return n==="https://json-schema.org/draft/2020-12/schema"?"draft-2020-12":n==="http://json-schema.org/draft-07/schema#"?"draft-7":n==="http://json-schema.org/draft-04/schema#"?"draft-4":t??"draft-2020-12"}function LVe(e,t){if(!e.startsWith("#"))throw new Error("External $ref is not supported, only local refs (#/...) are allowed");let n=e.slice(1).split("/").filter(Boolean);if(n.length===0)return t.rootSchema;let i=t.version==="draft-2020-12"?"$defs":"definitions";if(n[0]===i){let o=n[1];if(!o||!t.defs[o])throw new Error(`Reference not found: ${e}`);return t.defs[o]}throw new Error(`Reference not found: ${e}`)}function ore(e,t){if(e.not!==void 0){if(typeof e.not=="object"&&Object.keys(e.not).length===0)return Fe.never();throw new Error("not is not supported in Zod (except { not: {} } for never)")}if(e.unevaluatedItems!==void 0)throw new Error("unevaluatedItems is not supported");if(e.unevaluatedProperties!==void 0)throw new Error("unevaluatedProperties is not supported");if(e.if!==void 0||e.then!==void 0||e.else!==void 0)throw new Error("Conditional schemas (if/then/else) are not supported");if(e.dependentSchemas!==void 0||e.dependentRequired!==void 0)throw new Error("dependentSchemas and dependentRequired are not supported");if(e.$ref){let o=e.$ref;if(t.refs.has(o))return t.refs.get(o);if(t.processing.has(o))return Fe.lazy(()=>{if(!t.refs.has(o))throw new Error(`Circular reference not resolved: ${o}`);return t.refs.get(o)});t.processing.add(o);let r=LVe(o,t),s=lr(r,t);return t.refs.set(o,s),t.processing.delete(o),s}if(e.enum!==void 0){let o=e.enum;if(t.version==="openapi-3.0"&&e.nullable===!0&&o.length===1&&o[0]===null)return Fe.null();if(o.length===0)return Fe.never();if(o.length===1)return Fe.literal(o[0]);if(o.every(s=>typeof s=="string"))return Fe.enum(o);let r=o.map(s=>Fe.literal(s));return r.length<2?r[0]:Fe.union([r[0],r[1],...r.slice(2)])}if(e.const!==void 0)return Fe.literal(e.const);let n=e.type;if(Array.isArray(n)){let o=n.map(r=>{let s=x(g({},e),{type:r});return ore(s,t)});return o.length===0?Fe.never():o.length===1?o[0]:Fe.union(o)}if(!n)return Fe.any();let i;switch(n){case"string":{let o=Fe.string();if(e.format){let r=e.format;r==="email"?o=o.check(Fe.email()):r==="uri"||r==="uri-reference"?o=o.check(Fe.url()):r==="uuid"||r==="guid"?o=o.check(Fe.uuid()):r==="date-time"?o=o.check(Fe.iso.datetime()):r==="date"?o=o.check(Fe.iso.date()):r==="time"?o=o.check(Fe.iso.time()):r==="duration"?o=o.check(Fe.iso.duration()):r==="ipv4"?o=o.check(Fe.ipv4()):r==="ipv6"?o=o.check(Fe.ipv6()):r==="mac"?o=o.check(Fe.mac()):r==="cidr"?o=o.check(Fe.cidrv4()):r==="cidr-v6"?o=o.check(Fe.cidrv6()):r==="base64"?o=o.check(Fe.base64()):r==="base64url"?o=o.check(Fe.base64url()):r==="e164"?o=o.check(Fe.e164()):r==="jwt"?o=o.check(Fe.jwt()):r==="emoji"?o=o.check(Fe.emoji()):r==="nanoid"?o=o.check(Fe.nanoid()):r==="cuid"?o=o.check(Fe.cuid()):r==="cuid2"?o=o.check(Fe.cuid2()):r==="ulid"?o=o.check(Fe.ulid()):r==="xid"?o=o.check(Fe.xid()):r==="ksuid"&&(o=o.check(Fe.ksuid()))}typeof e.minLength=="number"&&(o=o.min(e.minLength)),typeof e.maxLength=="number"&&(o=o.max(e.maxLength)),e.pattern&&(o=o.regex(new RegExp(e.pattern))),i=o;break}case"number":case"integer":{let o=n==="integer"?Fe.number().int():Fe.number();typeof e.minimum=="number"&&(o=o.min(e.minimum)),typeof e.maximum=="number"&&(o=o.max(e.maximum)),typeof e.exclusiveMinimum=="number"?o=o.gt(e.exclusiveMinimum):e.exclusiveMinimum===!0&&typeof e.minimum=="number"&&(o=o.gt(e.minimum)),typeof e.exclusiveMaximum=="number"?o=o.lt(e.exclusiveMaximum):e.exclusiveMaximum===!0&&typeof e.maximum=="number"&&(o=o.lt(e.maximum)),typeof e.multipleOf=="number"&&(o=o.multipleOf(e.multipleOf)),i=o;break}case"boolean":{i=Fe.boolean();break}case"null":{i=Fe.null();break}case"object":{let o={},r=e.properties||{},s=new Set(e.required||[]);for(let[l,c]of Object.entries(r)){let u=lr(c,t);o[l]=s.has(l)?u:u.optional()}if(e.propertyNames){let l=lr(e.propertyNames,t),c=e.additionalProperties&&typeof e.additionalProperties=="object"?lr(e.additionalProperties,t):Fe.any();if(Object.keys(o).length===0){i=Fe.record(l,c);break}let u=Fe.object(o).passthrough(),h=Fe.looseRecord(l,c);i=Fe.intersection(u,h);break}if(e.patternProperties){let l=e.patternProperties,c=Object.keys(l),u=[];for(let f of c){let m=lr(l[f],t),_=Fe.string().regex(new RegExp(f));u.push(Fe.looseRecord(_,m))}let h=[];if(Object.keys(o).length>0&&h.push(Fe.object(o).passthrough()),h.push(...u),h.length===0)i=Fe.object({}).passthrough();else if(h.length===1)i=h[0];else{let f=Fe.intersection(h[0],h[1]);for(let m=2;m<h.length;m++)f=Fe.intersection(f,h[m]);i=f}break}let a=Fe.object(o);e.additionalProperties===!1?i=a.strict():typeof e.additionalProperties=="object"?i=a.catchall(lr(e.additionalProperties,t)):i=a.passthrough();break}case"array":{let o=e.prefixItems,r=e.items;if(o&&Array.isArray(o)){let s=o.map(l=>lr(l,t)),a=r&&typeof r=="object"&&!Array.isArray(r)?lr(r,t):void 0;a?i=Fe.tuple(s).rest(a):i=Fe.tuple(s),typeof e.minItems=="number"&&(i=i.check(Fe.minLength(e.minItems))),typeof e.maxItems=="number"&&(i=i.check(Fe.maxLength(e.maxItems)))}else if(Array.isArray(r)){let s=r.map(l=>lr(l,t)),a=e.additionalItems&&typeof e.additionalItems=="object"?lr(e.additionalItems,t):void 0;a?i=Fe.tuple(s).rest(a):i=Fe.tuple(s),typeof e.minItems=="number"&&(i=i.check(Fe.minLength(e.minItems))),typeof e.maxItems=="number"&&(i=i.check(Fe.maxLength(e.maxItems)))}else if(r!==void 0){let s=lr(r,t),a=Fe.array(s);typeof e.minItems=="number"&&(a=a.min(e.minItems)),typeof e.maxItems=="number"&&(a=a.max(e.maxItems)),i=a}else i=Fe.array(Fe.any());break}default:throw new Error(`Unsupported type: ${n}`)}return e.description&&(i=i.describe(e.description)),e.default!==void 0&&(i=i.default(e.default)),i}function lr(e,t){if(typeof e=="boolean")return e?Fe.any():Fe.never();let n=ore(e,t),i=e.type||e.enum!==void 0||e.const!==void 0;if(e.anyOf&&Array.isArray(e.anyOf)){let o=e.anyOf.map(s=>lr(s,t)),r=Fe.union(o);n=i?Fe.intersection(n,r):r}if(e.oneOf&&Array.isArray(e.oneOf)){let o=e.oneOf.map(s=>lr(s,t)),r=Fe.xor(o);n=i?Fe.intersection(n,r):r}if(e.allOf&&Array.isArray(e.allOf))if(e.allOf.length===0)n=i?n:Fe.any();else{let o=i?n:lr(e.allOf[0],t),r=i?0:1;for(let s=r;s<e.allOf.length;s++)o=Fe.intersection(o,lr(e.allOf[s],t));n=o}return e.nullable===!0&&t.version==="openapi-3.0"&&(n=Fe.nullable(n)),e.readOnly===!0&&(n=Fe.readonly(n)),n}function rre(e,t){if(typeof e=="boolean")return e?Fe.any():Fe.never();let n=FVe(e,t?.defaultTarget),i=e.$defs||e.definitions||{};return lr(e,{version:n,defs:i,refs:new Map,processing:new Set,rootSchema:e})}var Bw={};zy(Bw,{bigint:()=>VVe,boolean:()=>zVe,date:()=>HVe,number:()=>BVe,string:()=>NVe});function NVe(e){return WF(ev,e)}function BVe(e){return e2(nv,e)}function zVe(e){return a2(iv,e)}function VVe(e){return c2(ov,e)}function HVe(e){return b2(Tw,e)}mc($U());var lv="2025-11-25";var sre=[lv,"2025-06-18","2025-03-26","2024-11-05","2024-10-07"],Su="io.modelcontextprotocol/related-task",pM="2.0",jo=uM(e=>e!==null&&(typeof e=="object"||typeof e=="function")),are=Nn([z(),un().int()]),lre=z(),XSt=Gi({ttl:Nn([un(),rv()]).optional(),pollInterval:un().optional()}),$Ve=Re({ttl:un().optional()}),jVe=Re({taskId:z()}),z6=Gi({progressToken:are.optional(),[Su]:jVe.optional()}),Ds=Re({_meta:z6.optional()}),zw=Ds.extend({task:$Ve.optional()}),cre=e=>zw.safeParse(e).success,Go=Re({method:z(),params:Ds.loose().optional()}),na=Re({_meta:z6.optional()}),ia=Re({method:z(),params:na.loose().optional()}),Uo=Gi({_meta:z6.optional()}),fM=Nn([z(),un().int()]),dre=Re(g({jsonrpc:Xe(pM),id:fM},Go.shape)).strict(),Vw=e=>dre.safeParse(e).success,ure=Re(g({jsonrpc:Xe(pM)},ia.shape)).strict(),hre=e=>ure.safeParse(e).success,V6=Re({jsonrpc:Xe(pM),id:fM,result:Uo}).strict(),Rp=e=>V6.safeParse(e).success;var Pt=(function(e){return e[e.ConnectionClosed=-32e3]="ConnectionClosed",e[e.RequestTimeout=-32001]="RequestTimeout",e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.UrlElicitationRequired=-32042]="UrlElicitationRequired",e})(Pt||{}),H6=Re({jsonrpc:Xe(pM),id:fM.optional(),error:Re({code:un().int(),message:z(),data:jn().optional()})}).strict();var pre=e=>H6.safeParse(e).success;var mM=Nn([dre,ure,V6,H6]),eEt=Nn([V6,H6]),Tp=Uo.strict(),GVe=na.extend({requestId:fM.optional(),reason:z().optional()}),gM=ia.extend({method:Xe("notifications/cancelled"),params:GVe}),UVe=Re({src:z(),mimeType:z().optional(),sizes:Ee(z()).optional(),theme:$o(["light","dark"]).optional()}),Hw=Re({icons:Ee(UVe).optional()}),av=Re({name:z(),title:z().optional()}),fre=av.extend(x(g(g({},av.shape),Hw.shape),{version:z(),websiteUrl:z().optional(),description:z().optional()})),WVe=sv(Re({applyDefaults:Fn().optional()}),Kn(z(),jn())),qVe=Nw(e=>e&&typeof e=="object"&&!Array.isArray(e)&&Object.keys(e).length===0?{form:{}}:e,sv(Re({form:WVe.optional(),url:jo.optional()}),Kn(z(),jn()).optional())),KVe=Gi({list:jo.optional(),cancel:jo.optional(),requests:Gi({sampling:Gi({createMessage:jo.optional()}).optional(),elicitation:Gi({create:jo.optional()}).optional()}).optional()}),ZVe=Gi({list:jo.optional(),cancel:jo.optional(),requests:Gi({tools:Gi({call:jo.optional()}).optional()}).optional()}),YVe=Re({experimental:Kn(z(),jo).optional(),sampling:Re({context:jo.optional(),tools:jo.optional()}).optional(),elicitation:qVe.optional(),roots:Re({listChanged:Fn().optional()}).optional(),tasks:KVe.optional()}),QVe=Ds.extend({protocolVersion:z(),capabilities:YVe,clientInfo:fre}),JVe=Go.extend({method:Xe("initialize"),params:QVe});var XVe=Re({experimental:Kn(z(),jo).optional(),logging:jo.optional(),completions:jo.optional(),prompts:Re({listChanged:Fn().optional()}).optional(),resources:Re({subscribe:Fn().optional(),listChanged:Fn().optional()}).optional(),tools:Re({listChanged:Fn().optional()}).optional(),tasks:ZVe.optional()}),$6=Uo.extend({protocolVersion:z(),capabilities:XVe,serverInfo:fre,instructions:z().optional()}),mre=ia.extend({method:Xe("notifications/initialized"),params:na.optional()}),gre=e=>mre.safeParse(e).success,vM=Go.extend({method:Xe("ping"),params:Ds.optional()}),e6e=Re({progress:un(),total:ei(un()),message:ei(z())}),t6e=Re(x(g(g({},na.shape),e6e.shape),{progressToken:are})),cv=ia.extend({method:Xe("notifications/progress"),params:t6e}),n6e=Ds.extend({cursor:lre.optional()}),$w=Go.extend({params:n6e.optional()}),jw=Uo.extend({nextCursor:lre.optional()}),i6e=$o(["working","input_required","completed","failed","cancelled"]),Gw=Re({taskId:z(),status:i6e,ttl:Nn([un(),rv()]),createdAt:z(),lastUpdatedAt:z(),pollInterval:ei(un()),statusMessage:ei(z())}),Pp=Uo.extend({task:Gw}),o6e=na.merge(Gw),Uw=ia.extend({method:Xe("notifications/tasks/status"),params:o6e}),_M=Go.extend({method:Xe("tasks/get"),params:Ds.extend({taskId:z()})}),yM=Uo.merge(Gw),bM=Go.extend({method:Xe("tasks/result"),params:Ds.extend({taskId:z()})}),tEt=Uo.loose(),CM=$w.extend({method:Xe("tasks/list")}),wM=jw.extend({tasks:Ee(Gw)}),xM=Go.extend({method:Xe("tasks/cancel"),params:Ds.extend({taskId:z()})}),vre=Uo.merge(Gw),_re=Re({uri:z(),mimeType:ei(z()),_meta:Kn(z(),jn()).optional()}),yre=_re.extend({text:z()}),j6=z().refine(e=>{try{return atob(e),!0}catch{return!1}},{message:"Invalid Base64 string"}),bre=_re.extend({blob:j6}),Ww=$o(["user","assistant"]),dv=Re({audience:Ee(Ww).optional(),priority:un().min(0).max(1).optional(),lastModified:xu.datetime({offset:!0}).optional()}),Cre=Re(x(g(g({},av.shape),Hw.shape),{uri:z(),description:ei(z()),mimeType:ei(z()),annotations:dv.optional(),_meta:ei(Gi({}))})),r6e=Re(x(g(g({},av.shape),Hw.shape),{uriTemplate:z(),description:ei(z()),mimeType:ei(z()),annotations:dv.optional(),_meta:ei(Gi({}))})),s6e=$w.extend({method:Xe("resources/list")}),uv=jw.extend({resources:Ee(Cre)}),a6e=$w.extend({method:Xe("resources/templates/list")}),G6=jw.extend({resourceTemplates:Ee(r6e)}),U6=Ds.extend({uri:z()}),l6e=U6,c6e=Go.extend({method:Xe("resources/read"),params:l6e}),qw=Uo.extend({contents:Ee(Nn([yre,bre]))}),Kw=ia.extend({method:Xe("notifications/resources/list_changed"),params:na.optional()}),d6e=U6,u6e=Go.extend({method:Xe("resources/subscribe"),params:d6e}),h6e=U6,p6e=Go.extend({method:Xe("resources/unsubscribe"),params:h6e}),f6e=na.extend({uri:z()}),m6e=ia.extend({method:Xe("notifications/resources/updated"),params:f6e}),g6e=Re({name:z(),description:ei(z()),required:ei(Fn())}),v6e=Re(x(g(g({},av.shape),Hw.shape),{description:ei(z()),arguments:ei(Ee(g6e)),_meta:ei(Gi({}))})),_6e=$w.extend({method:Xe("prompts/list")}),Zw=jw.extend({prompts:Ee(v6e)}),y6e=Ds.extend({name:z(),arguments:Kn(z(),z()).optional()}),b6e=Go.extend({method:Xe("prompts/get"),params:y6e}),W6=Re({type:Xe("text"),text:z(),annotations:dv.optional(),_meta:Kn(z(),jn()).optional()}),q6=Re({type:Xe("image"),data:j6,mimeType:z(),annotations:dv.optional(),_meta:Kn(z(),jn()).optional()}),K6=Re({type:Xe("audio"),data:j6,mimeType:z(),annotations:dv.optional(),_meta:Kn(z(),jn()).optional()}),C6e=Re({type:Xe("tool_use"),name:z(),id:z(),input:Kn(z(),jn()),_meta:Kn(z(),jn()).optional()}),w6e=Re({type:Xe("resource"),resource:Nn([yre,bre]),annotations:dv.optional(),_meta:Kn(z(),jn()).optional()}),x6e=Cre.extend({type:Xe("resource_link")}),Z6=Nn([W6,q6,K6,x6e,w6e]),S6e=Re({role:Ww,content:Z6}),Yw=Uo.extend({description:z().optional(),messages:Ee(S6e)}),Y6=ia.extend({method:Xe("notifications/prompts/list_changed"),params:na.optional()}),E6e=Re({title:z().optional(),readOnlyHint:Fn().optional(),destructiveHint:Fn().optional(),idempotentHint:Fn().optional(),openWorldHint:Fn().optional()}),D6e=Re({taskSupport:$o(["required","optional","forbidden"]).optional()}),wre=Re(x(g(g({},av.shape),Hw.shape),{description:z().optional(),inputSchema:Re({type:Xe("object"),properties:Kn(z(),jo).optional(),required:Ee(z()).optional()}).catchall(jn()),outputSchema:Re({type:Xe("object"),properties:Kn(z(),jo).optional(),required:Ee(z()).optional()}).catchall(jn()).optional(),annotations:E6e.optional(),execution:D6e.optional(),_meta:Kn(z(),jn()).optional()})),k6e=$w.extend({method:Xe("tools/list")}),Qw=jw.extend({tools:Ee(wre)}),td=Uo.extend({content:Ee(Z6).default([]),structuredContent:Kn(z(),jn()).optional(),isError:Fn().optional()}),nEt=td.or(Uo.extend({toolResult:jn()})),I6e=zw.extend({name:z(),arguments:Kn(z(),jn()).optional()}),M6e=Go.extend({method:Xe("tools/call"),params:I6e}),Q6=ia.extend({method:Xe("notifications/tools/list_changed"),params:na.optional()}),xre=Re({autoRefresh:Fn().default(!0),debounceMs:un().int().nonnegative().default(300)}),Sre=$o(["debug","info","notice","warning","error","critical","alert","emergency"]),R6e=Ds.extend({level:Sre}),T6e=Go.extend({method:Xe("logging/setLevel"),params:R6e}),P6e=na.extend({level:Sre,logger:z().optional(),data:jn()}),J6=ia.extend({method:Xe("notifications/message"),params:P6e}),A6e=Re({name:z().optional()}),O6e=Re({hints:Ee(A6e).optional(),costPriority:un().min(0).max(1).optional(),speedPriority:un().min(0).max(1).optional(),intelligencePriority:un().min(0).max(1).optional()}),F6e=Re({mode:$o(["auto","required","none"]).optional()}),L6e=Re({type:Xe("tool_result"),toolUseId:z().describe("The unique identifier for the corresponding tool call."),content:Ee(Z6).default([]),structuredContent:Re({}).loose().optional(),isError:Fn().optional(),_meta:Kn(z(),jn()).optional()}),N6e=Ow("type",[W6,q6,K6]),hM=Ow("type",[W6,q6,K6,C6e,L6e]),B6e=Re({role:Ww,content:Nn([hM,Ee(hM)]),_meta:Kn(z(),jn()).optional()}),z6e=zw.extend({messages:Ee(B6e),modelPreferences:O6e.optional(),systemPrompt:z().optional(),includeContext:$o(["none","thisServer","allServers"]).optional(),temperature:un().optional(),maxTokens:un().int(),stopSequences:Ee(z()).optional(),metadata:jo.optional(),tools:Ee(wre).optional(),toolChoice:F6e.optional()}),Jw=Go.extend({method:Xe("sampling/createMessage"),params:z6e}),X6=Uo.extend({model:z(),stopReason:ei($o(["endTurn","stopSequence","maxTokens"]).or(z())),role:Ww,content:N6e}),V6e=Uo.extend({model:z(),stopReason:ei($o(["endTurn","stopSequence","maxTokens","toolUse"]).or(z())),role:Ww,content:Nn([hM,Ee(hM)])}),H6e=Re({type:Xe("boolean"),title:z().optional(),description:z().optional(),default:Fn().optional()}),$6e=Re({type:Xe("string"),title:z().optional(),description:z().optional(),minLength:un().optional(),maxLength:un().optional(),format:$o(["email","uri","date","date-time"]).optional(),default:z().optional()}),j6e=Re({type:$o(["number","integer"]),title:z().optional(),description:z().optional(),minimum:un().optional(),maximum:un().optional(),default:un().optional()}),G6e=Re({type:Xe("string"),title:z().optional(),description:z().optional(),enum:Ee(z()),default:z().optional()}),U6e=Re({type:Xe("string"),title:z().optional(),description:z().optional(),oneOf:Ee(Re({const:z(),title:z()})),default:z().optional()}),W6e=Re({type:Xe("string"),title:z().optional(),description:z().optional(),enum:Ee(z()),enumNames:Ee(z()).optional(),default:z().optional()}),q6e=Nn([G6e,U6e]),K6e=Re({type:Xe("array"),title:z().optional(),description:z().optional(),minItems:un().optional(),maxItems:un().optional(),items:Re({type:Xe("string"),enum:Ee(z())}),default:Ee(z()).optional()}),Z6e=Re({type:Xe("array"),title:z().optional(),description:z().optional(),minItems:un().optional(),maxItems:un().optional(),items:Re({anyOf:Ee(Re({const:z(),title:z()}))}),default:Ee(z()).optional()}),Y6e=Nn([K6e,Z6e]),Q6e=Nn([W6e,q6e,Y6e]),J6e=Nn([Q6e,H6e,$6e,j6e]),X6e=zw.extend({mode:Xe("form").optional(),message:z(),requestedSchema:Re({type:Xe("object"),properties:Kn(z(),J6e),required:Ee(z()).optional()})}),eHe=zw.extend({mode:Xe("url"),message:z(),elicitationId:z(),url:z().url()}),tHe=Nn([X6e,eHe]),Xw=Go.extend({method:Xe("elicitation/create"),params:tHe}),nHe=na.extend({elicitationId:z()}),iHe=ia.extend({method:Xe("notifications/elicitation/complete"),params:nHe}),e0=Uo.extend({action:$o(["accept","decline","cancel"]),content:Nw(e=>e===null?void 0:e,Kn(z(),Nn([z(),un(),Fn(),Ee(z())])).optional())}),oHe=Re({type:Xe("ref/resource"),uri:z()});var rHe=Re({type:Xe("ref/prompt"),name:z()}),sHe=Ds.extend({ref:Nn([rHe,oHe]),argument:Re({name:z(),value:z()}),context:Re({arguments:Kn(z(),z()).optional()}).optional()}),aHe=Go.extend({method:Xe("completion/complete"),params:sHe});var eH=Uo.extend({completion:Gi({values:Ee(z()).max(100),total:ei(un().int()),hasMore:ei(Fn())})}),lHe=Re({uri:z().startsWith("file://"),name:z().optional(),_meta:Kn(z(),jn()).optional()}),cHe=Go.extend({method:Xe("roots/list"),params:Ds.optional()}),dHe=Uo.extend({roots:Ee(lHe)}),uHe=ia.extend({method:Xe("notifications/roots/list_changed"),params:na.optional()}),iEt=Nn([vM,JVe,aHe,T6e,b6e,_6e,s6e,a6e,c6e,u6e,p6e,M6e,k6e,_M,bM,CM,xM]),oEt=Nn([gM,cv,mre,uHe,Uw]),rEt=Nn([Tp,X6,V6e,e0,dHe,yM,wM,Pp]),sEt=Nn([vM,Jw,Xw,cHe,_M,bM,CM,xM]),aEt=Nn([gM,cv,J6,m6e,Kw,Q6,Y6,Uw,iHe]),lEt=Nn([Tp,$6,eH,Yw,Zw,uv,G6,qw,td,Qw,yM,wM,Pp]),ct=class e extends Error{constructor(t,n,i){super(`MCP error ${t}: ${n}`),this.code=t,this.data=i,this.name="McpError"}static fromError(t,n,i){if(t===Pt.UrlElicitationRequired&&i){let o=i;if(o.elicitations)return new B6(o.elicitations,n)}return new e(t,n,i)}},B6=class extends ct{constructor(t,n=`URL elicitation${t.length>1?"s":""} required`){super(Pt.UrlElicitationRequired,n,{elicitations:t})}get elicitations(){return this.data?.elicitations??[]}};function Eu(e){return e==="completed"||e==="failed"||e==="cancelled"}var hHe=Symbol("Let zodToJsonSchema decide on which parser to use");var ZEt=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function tH(e){let n=PI(e)?.method;if(!n)throw new Error("Schema is missing a method literal");let i=Yie(n);if(typeof i!="string")throw new Error("Schema method literal must be a string");return i}function nH(e,t){let n=Va(e,t);if(!n.success)throw n.error;return n.data}var _He=6e4,SM=class{constructor(t){this._options=t,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this._taskProgressTokens=new Map,this._requestResolvers=new Map,this.setNotificationHandler(gM,n=>{this._oncancel(n)}),this.setNotificationHandler(cv,n=>{this._onprogress(n)}),this.setRequestHandler(vM,n=>({})),this._taskStore=t?.taskStore,this._taskMessageQueue=t?.taskMessageQueue,this._taskStore&&(this.setRequestHandler(_M,(n,i)=>E(this,null,function*(){let o=yield this._taskStore.getTask(n.params.taskId,i.sessionId);if(!o)throw new ct(Pt.InvalidParams,"Failed to retrieve task: Task not found");return g({},o)})),this.setRequestHandler(bM,(n,i)=>E(this,null,function*(){let o=()=>E(this,null,function*(){let r=n.params.taskId;if(this._taskMessageQueue){let a;for(;a=yield this._taskMessageQueue.dequeue(r,i.sessionId);){if(a.type==="response"||a.type==="error"){let l=a.message,c=l.id,u=this._requestResolvers.get(c);if(u)if(this._requestResolvers.delete(c),a.type==="response")u(l);else{let h=l,f=new ct(h.error.code,h.error.message,h.error.data);u(f)}else{let h=a.type==="response"?"Response":"Error";this._onerror(new Error(`${h} handler missing for request ${c}`))}continue}yield this._transport?.send(a.message,{relatedRequestId:i.requestId})}}let s=yield this._taskStore.getTask(r,i.sessionId);if(!s)throw new ct(Pt.InvalidParams,`Task not found: ${r}`);if(!Eu(s.status))return yield this._waitForTaskUpdate(r,i.signal),yield o();if(Eu(s.status)){let a=yield this._taskStore.getTaskResult(r,i.sessionId);return this._clearTaskQueue(r),x(g({},a),{_meta:x(g({},a._meta),{[Su]:{taskId:r}})})}return yield o()});return yield o()})),this.setRequestHandler(CM,(n,i)=>E(this,null,function*(){try{let{tasks:o,nextCursor:r}=yield this._taskStore.listTasks(n.params?.cursor,i.sessionId);return{tasks:o,nextCursor:r,_meta:{}}}catch(o){throw new ct(Pt.InvalidParams,`Failed to list tasks: ${o instanceof Error?o.message:String(o)}`)}})),this.setRequestHandler(xM,(n,i)=>E(this,null,function*(){try{let o=yield this._taskStore.getTask(n.params.taskId,i.sessionId);if(!o)throw new ct(Pt.InvalidParams,`Task not found: ${n.params.taskId}`);if(Eu(o.status))throw new ct(Pt.InvalidParams,`Cannot cancel task in terminal status: ${o.status}`);yield this._taskStore.updateTaskStatus(n.params.taskId,"cancelled","Client cancelled task execution.",i.sessionId),this._clearTaskQueue(n.params.taskId);let r=yield this._taskStore.getTask(n.params.taskId,i.sessionId);if(!r)throw new ct(Pt.InvalidParams,`Task not found after cancellation: ${n.params.taskId}`);return g({_meta:{}},r)}catch(o){throw o instanceof ct?o:new ct(Pt.InvalidRequest,`Failed to cancel task: ${o instanceof Error?o.message:String(o)}`)}})))}_oncancel(t){return E(this,null,function*(){if(!t.params.requestId)return;this._requestHandlerAbortControllers.get(t.params.requestId)?.abort(t.params.reason)})}_setupTimeout(t,n,i,o,r=!1){this._timeoutInfo.set(t,{timeoutId:setTimeout(o,n),startTime:Date.now(),timeout:n,maxTotalTimeout:i,resetTimeoutOnProgress:r,onTimeout:o})}_resetTimeout(t){let n=this._timeoutInfo.get(t);if(!n)return!1;let i=Date.now()-n.startTime;if(n.maxTotalTimeout&&i>=n.maxTotalTimeout)throw this._timeoutInfo.delete(t),ct.fromError(Pt.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:n.maxTotalTimeout,totalElapsed:i});return clearTimeout(n.timeoutId),n.timeoutId=setTimeout(n.onTimeout,n.timeout),!0}_cleanupTimeout(t){let n=this._timeoutInfo.get(t);n&&(clearTimeout(n.timeoutId),this._timeoutInfo.delete(t))}connect(t){return E(this,null,function*(){this._transport=t;let n=this.transport?.onclose;this._transport.onclose=()=>{n?.(),this._onclose()};let i=this.transport?.onerror;this._transport.onerror=r=>{i?.(r),this._onerror(r)};let o=this._transport?.onmessage;this._transport.onmessage=(r,s)=>{o?.(r,s),Rp(r)||pre(r)?this._onresponse(r):Vw(r)?this._onrequest(r,s):hre(r)?this._onnotification(r):this._onerror(new Error(`Unknown message type: ${JSON.stringify(r)}`))},yield this._transport.start()})}_onclose(){let t=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._taskProgressTokens.clear(),this._pendingDebouncedNotifications.clear();let n=ct.fromError(Pt.ConnectionClosed,"Connection closed");this._transport=void 0,this.onclose?.();for(let i of t.values())i(n)}_onerror(t){this.onerror?.(t)}_onnotification(t){let n=this._notificationHandlers.get(t.method)??this.fallbackNotificationHandler;n!==void 0&&Promise.resolve().then(()=>n(t)).catch(i=>this._onerror(new Error(`Uncaught error in notification handler: ${i}`)))}_onrequest(t,n){let i=this._requestHandlers.get(t.method)??this.fallbackRequestHandler,o=this._transport,r=t.params?._meta?.[Su]?.taskId;if(i===void 0){let u={jsonrpc:"2.0",id:t.id,error:{code:Pt.MethodNotFound,message:"Method not found"}};r&&this._taskMessageQueue?this._enqueueTaskMessage(r,{type:"error",message:u,timestamp:Date.now()},o?.sessionId).catch(h=>this._onerror(new Error(`Failed to enqueue error response: ${h}`))):o?.send(u).catch(h=>this._onerror(new Error(`Failed to send an error response: ${h}`)));return}let s=new AbortController;this._requestHandlerAbortControllers.set(t.id,s);let a=cre(t.params)?t.params.task:void 0,l=this._taskStore?this.requestTaskStore(t,o?.sessionId):void 0,c={signal:s.signal,sessionId:o?.sessionId,_meta:t.params?._meta,sendNotification:u=>E(this,null,function*(){let h={relatedRequestId:t.id};r&&(h.relatedTask={taskId:r}),yield this.notification(u,h)}),sendRequest:(u,h,f)=>E(this,null,function*(){let m=x(g({},f),{relatedRequestId:t.id});r&&!m.relatedTask&&(m.relatedTask={taskId:r});let _=m.relatedTask?.taskId??r;return _&&l&&(yield l.updateTaskStatus(_,"input_required")),yield this.request(u,h,m)}),authInfo:n?.authInfo,requestId:t.id,requestInfo:n?.requestInfo,taskId:r,taskStore:l,taskRequestedTtl:a?.ttl,closeSSEStream:n?.closeSSEStream,closeStandaloneSSEStream:n?.closeStandaloneSSEStream};Promise.resolve().then(()=>{a&&this.assertTaskHandlerCapability(t.method)}).then(()=>i(t,c)).then(u=>E(this,null,function*(){if(s.signal.aborted)return;let h={result:u,jsonrpc:"2.0",id:t.id};r&&this._taskMessageQueue?yield this._enqueueTaskMessage(r,{type:"response",message:h,timestamp:Date.now()},o?.sessionId):yield o?.send(h)}),u=>E(this,null,function*(){if(s.signal.aborted)return;let h={jsonrpc:"2.0",id:t.id,error:g({code:Number.isSafeInteger(u.code)?u.code:Pt.InternalError,message:u.message??"Internal error"},u.data!==void 0&&{data:u.data})};r&&this._taskMessageQueue?yield this._enqueueTaskMessage(r,{type:"error",message:h,timestamp:Date.now()},o?.sessionId):yield o?.send(h)})).catch(u=>this._onerror(new Error(`Failed to send response: ${u}`))).finally(()=>{this._requestHandlerAbortControllers.delete(t.id)})}_onprogress(t){let l=t.params,{progressToken:n}=l,i=Be(l,["progressToken"]),o=Number(n),r=this._progressHandlers.get(o);if(!r){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(t)}`));return}let s=this._responseHandlers.get(o),a=this._timeoutInfo.get(o);if(a&&s&&a.resetTimeoutOnProgress)try{this._resetTimeout(o)}catch(c){this._responseHandlers.delete(o),this._progressHandlers.delete(o),this._cleanupTimeout(o),s(c);return}r(i)}_onresponse(t){let n=Number(t.id),i=this._requestResolvers.get(n);if(i){if(this._requestResolvers.delete(n),Rp(t))i(t);else{let s=new ct(t.error.code,t.error.message,t.error.data);i(s)}return}let o=this._responseHandlers.get(n);if(o===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(t)}`));return}this._responseHandlers.delete(n),this._cleanupTimeout(n);let r=!1;if(Rp(t)&&t.result&&typeof t.result=="object"){let s=t.result;if(s.task&&typeof s.task=="object"){let a=s.task;typeof a.taskId=="string"&&(r=!0,this._taskProgressTokens.set(a.taskId,n))}}if(r||this._progressHandlers.delete(n),Rp(t))o(t);else{let s=ct.fromError(t.error.code,t.error.message,t.error.data);o(s)}}get transport(){return this._transport}close(){return E(this,null,function*(){yield this._transport?.close()})}requestStream(t,n,i){return Bt(this,null,function*(){let{task:o}=i??{};if(!o){try{yield{type:"result",result:yield new Ie(this.request(t,n,i))}}catch(s){yield{type:"error",error:s instanceof ct?s:new ct(Pt.InternalError,String(s))}}return}let r;try{let s=yield new Ie(this.request(t,Pp,i));if(s.task)r=s.task.taskId,yield{type:"taskCreated",task:s.task};else throw new ct(Pt.InternalError,"Task creation did not return a task");for(;;){let a=yield new Ie(this.getTask({taskId:r},i));if(yield{type:"taskStatus",task:a},Eu(a.status)){a.status==="completed"?yield{type:"result",result:yield new Ie(this.getTaskResult({taskId:r},n,i))}:a.status==="failed"?yield{type:"error",error:new ct(Pt.InternalError,`Task ${r} failed`)}:a.status==="cancelled"&&(yield{type:"error",error:new ct(Pt.InternalError,`Task ${r} was cancelled`)});return}if(a.status==="input_required"){yield{type:"result",result:yield new Ie(this.getTaskResult({taskId:r},n,i))};return}let l=a.pollInterval??this._options?.defaultTaskPollInterval??1e3;yield new Ie(new Promise(c=>setTimeout(c,l))),i?.signal?.throwIfAborted()}}catch(s){yield{type:"error",error:s instanceof ct?s:new ct(Pt.InternalError,String(s))}}})}request(t,n,i){let{relatedRequestId:o,resumptionToken:r,onresumptiontoken:s,task:a,relatedTask:l}=i??{};return new Promise((c,u)=>{let h=S=>{u(S)};if(!this._transport){h(new Error("Not connected"));return}if(this._options?.enforceStrictCapabilities===!0)try{this.assertCapabilityForMethod(t.method),a&&this.assertTaskCapability(t.method)}catch(S){h(S);return}i?.signal?.throwIfAborted();let f=this._requestMessageId++,m=x(g({},t),{jsonrpc:"2.0",id:f});i?.onprogress&&(this._progressHandlers.set(f,i.onprogress),m.params=x(g({},t.params),{_meta:x(g({},t.params?._meta||{}),{progressToken:f})})),a&&(m.params=x(g({},m.params),{task:a})),l&&(m.params=x(g({},m.params),{_meta:x(g({},m.params?._meta||{}),{[Su]:l})}));let _=S=>{this._responseHandlers.delete(f),this._progressHandlers.delete(f),this._cleanupTimeout(f),this._transport?.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:f,reason:String(S)}},{relatedRequestId:o,resumptionToken:r,onresumptiontoken:s}).catch(O=>this._onerror(new Error(`Failed to send cancellation: ${O}`)));let I=S instanceof ct?S:new ct(Pt.RequestTimeout,String(S));u(I)};this._responseHandlers.set(f,S=>{if(!i?.signal?.aborted){if(S instanceof Error)return u(S);try{let I=Va(n,S.result);I.success?c(I.data):u(I.error)}catch(I){u(I)}}}),i?.signal?.addEventListener("abort",()=>{_(i?.signal?.reason)});let y=i?.timeout??_He,w=()=>_(ct.fromError(Pt.RequestTimeout,"Request timed out",{timeout:y}));this._setupTimeout(f,y,i?.maxTotalTimeout,w,i?.resetTimeoutOnProgress??!1);let C=l?.taskId;if(C){let S=I=>{let O=this._responseHandlers.get(f);O?O(I):this._onerror(new Error(`Response handler missing for side-channeled request ${f}`))};this._requestResolvers.set(f,S),this._enqueueTaskMessage(C,{type:"request",message:m,timestamp:Date.now()}).catch(I=>{this._cleanupTimeout(f),u(I)})}else this._transport.send(m,{relatedRequestId:o,resumptionToken:r,onresumptiontoken:s}).catch(S=>{this._cleanupTimeout(f),u(S)})})}getTask(t,n){return E(this,null,function*(){return this.request({method:"tasks/get",params:t},yM,n)})}getTaskResult(t,n,i){return E(this,null,function*(){return this.request({method:"tasks/result",params:t},n,i)})}listTasks(t,n){return E(this,null,function*(){return this.request({method:"tasks/list",params:t},wM,n)})}cancelTask(t,n){return E(this,null,function*(){return this.request({method:"tasks/cancel",params:t},vre,n)})}notification(t,n){return E(this,null,function*(){if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(t.method);let i=n?.relatedTask?.taskId;if(i){let a=x(g({},t),{jsonrpc:"2.0",params:x(g({},t.params),{_meta:x(g({},t.params?._meta||{}),{[Su]:n.relatedTask})})});yield this._enqueueTaskMessage(i,{type:"notification",message:a,timestamp:Date.now()});return}if((this._options?.debouncedNotificationMethods??[]).includes(t.method)&&!t.params&&!n?.relatedRequestId&&!n?.relatedTask){if(this._pendingDebouncedNotifications.has(t.method))return;this._pendingDebouncedNotifications.add(t.method),Promise.resolve().then(()=>{if(this._pendingDebouncedNotifications.delete(t.method),!this._transport)return;let a=x(g({},t),{jsonrpc:"2.0"});n?.relatedTask&&(a=x(g({},a),{params:x(g({},a.params),{_meta:x(g({},a.params?._meta||{}),{[Su]:n.relatedTask})})})),this._transport?.send(a,n).catch(l=>this._onerror(l))});return}let s=x(g({},t),{jsonrpc:"2.0"});n?.relatedTask&&(s=x(g({},s),{params:x(g({},s.params),{_meta:x(g({},s.params?._meta||{}),{[Su]:n.relatedTask})})})),yield this._transport.send(s,n)})}setRequestHandler(t,n){let i=tH(t);this.assertRequestHandlerCapability(i),this._requestHandlers.set(i,(o,r)=>{let s=nH(t,o);return Promise.resolve(n(s,r))})}removeRequestHandler(t){this._requestHandlers.delete(t)}assertCanSetRequestHandler(t){if(this._requestHandlers.has(t))throw new Error(`A request handler for ${t} already exists, which would be overridden`)}setNotificationHandler(t,n){let i=tH(t);this._notificationHandlers.set(i,o=>{let r=nH(t,o);return Promise.resolve(n(r))})}removeNotificationHandler(t){this._notificationHandlers.delete(t)}_cleanupTaskProgressHandler(t){let n=this._taskProgressTokens.get(t);n!==void 0&&(this._progressHandlers.delete(n),this._taskProgressTokens.delete(t))}_enqueueTaskMessage(t,n,i){return E(this,null,function*(){if(!this._taskStore||!this._taskMessageQueue)throw new Error("Cannot enqueue task message: taskStore and taskMessageQueue are not configured");let o=this._options?.maxTaskQueueSize;yield this._taskMessageQueue.enqueue(t,n,i,o)})}_clearTaskQueue(t,n){return E(this,null,function*(){if(this._taskMessageQueue){let i=yield this._taskMessageQueue.dequeueAll(t,n);for(let o of i)if(o.type==="request"&&Vw(o.message)){let r=o.message.id,s=this._requestResolvers.get(r);s?(s(new ct(Pt.InternalError,"Task cancelled or completed")),this._requestResolvers.delete(r)):this._onerror(new Error(`Resolver missing for request ${r} during task ${t} cleanup`))}}})}_waitForTaskUpdate(t,n){return E(this,null,function*(){let i=this._options?.defaultTaskPollInterval??1e3;try{let o=yield this._taskStore?.getTask(t);o?.pollInterval&&(i=o.pollInterval)}catch{}return new Promise((o,r)=>{if(n.aborted){r(new ct(Pt.InvalidRequest,"Request cancelled"));return}let s=setTimeout(o,i);n.addEventListener("abort",()=>{clearTimeout(s),r(new ct(Pt.InvalidRequest,"Request cancelled"))},{once:!0})})})}requestTaskStore(t,n){let i=this._taskStore;if(!i)throw new Error("No task store configured");return{createTask:o=>E(this,null,function*(){if(!t)throw new Error("No request provided");return yield i.createTask(o,t.id,{method:t.method,params:t.params},n)}),getTask:o=>E(this,null,function*(){let r=yield i.getTask(o,n);if(!r)throw new ct(Pt.InvalidParams,"Failed to retrieve task: Task not found");return r}),storeTaskResult:(o,r,s)=>E(this,null,function*(){yield i.storeTaskResult(o,r,s,n);let a=yield i.getTask(o,n);if(a){let l=Uw.parse({method:"notifications/tasks/status",params:a});yield this.notification(l),Eu(a.status)&&this._cleanupTaskProgressHandler(o)}}),getTaskResult:o=>i.getTaskResult(o,n),updateTaskStatus:(o,r,s)=>E(this,null,function*(){let a=yield i.getTask(o,n);if(!a)throw new ct(Pt.InvalidParams,`Task "${o}" not found - it may have been cleaned up`);if(Eu(a.status))throw new ct(Pt.InvalidParams,`Cannot update task "${o}" from terminal status "${a.status}" to "${r}". Terminal states (completed, failed, cancelled) cannot transition to other states.`);yield i.updateTaskStatus(o,r,s,n);let l=yield i.getTask(o,n);if(l){let c=Uw.parse({method:"notifications/tasks/status",params:l});yield this.notification(c),Eu(l.status)&&this._cleanupTaskProgressHandler(o)}}),listTasks:o=>i.listTasks(o,n)}}};function Ere(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function Dre(e,t){let n=g({},e);for(let i in t){let o=i,r=t[o];if(r===void 0)continue;let s=n[o];Ere(s)&&Ere(r)?n[o]=g(g({},s),r):n[o]=r}return n}var gle=CO($5(),1),vle=CO(mle(),1);function l7e(){let e=new gle.default({strict:!1,validateFormats:!0,validateSchema:!1,allErrors:!0});return(0,vle.default)(e),e}var cR=class{constructor(t){this._ajv=t??l7e()}getValidator(t){let n="$id"in t&&typeof t.$id=="string"?this._ajv.getSchema(t.$id)??this._ajv.compile(t):this._ajv.compile(t);return i=>n(i)?{valid:!0,data:i,errorMessage:void 0}:{valid:!1,data:void 0,errorMessage:this._ajv.errorsText(n.errors)}}};var dR=class{constructor(t){this._client=t}callToolStream(o){return Bt(this,arguments,function*(t,n=td,i){let r=this._client,s=x(g({},i),{task:i?.task??(r.isToolTask(t.name)?{}:void 0)}),a=r.requestStream({method:"tools/call",params:t},n,s),l=r.getToolOutputValidator(t.name);try{for(var c=lt(a),u,h,f;u=!(h=yield new Ie(c.next())).done;u=!1){let m=h.value;if(m.type==="result"&&l){let _=m.result;if(!_.structuredContent&&!_.isError){yield{type:"error",error:new ct(Pt.InvalidRequest,`Tool ${t.name} has an output schema but did not return structured content`)};return}if(_.structuredContent)try{let y=l(_.structuredContent);if(!y.valid){yield{type:"error",error:new ct(Pt.InvalidParams,`Structured content does not match the tool's output schema: ${y.errorMessage}`)};return}}catch(y){if(y instanceof ct){yield{type:"error",error:y};return}yield{type:"error",error:new ct(Pt.InvalidParams,`Failed to validate structured content: ${y instanceof Error?y.message:String(y)}`)};return}}yield m}}catch{f=[h]}finally{try{u&&(h=c.return)&&(yield new Ie(h.call(c)))}finally{if(f)throw f[0]}}})}getTask(t,n){return E(this,null,function*(){return this._client.getTask({taskId:t},n)})}getTaskResult(t,n,i){return E(this,null,function*(){return this._client.getTaskResult({taskId:t},n,i)})}listTasks(t,n){return E(this,null,function*(){return this._client.listTasks(t?{cursor:t}:void 0,n)})}cancelTask(t,n){return E(this,null,function*(){return this._client.cancelTask({taskId:t},n)})}requestStream(t,n,i){return this._client.requestStream(t,n,i)}};function _le(e,t,n){if(!e)throw new Error(`${n} does not support task creation (required for ${t})`);switch(t){case"tools/call":if(!e.tools?.call)throw new Error(`${n} does not support task creation for tools/call (required for ${t})`);break;default:break}}function yle(e,t,n){if(!e)throw new Error(`${n} does not support task creation (required for ${t})`);switch(t){case"sampling/createMessage":if(!e.sampling?.createMessage)throw new Error(`${n} does not support task creation for sampling/createMessage (required for ${t})`);break;case"elicitation/create":if(!e.elicitation?.create)throw new Error(`${n} does not support task creation for elicitation/create (required for ${t})`);break;default:break}}function uR(e,t){if(!(!e||t===null||typeof t!="object")){if(e.type==="object"&&e.properties&&typeof e.properties=="object"){let n=t,i=e.properties;for(let o of Object.keys(i)){let r=i[o];n[o]===void 0&&Object.prototype.hasOwnProperty.call(r,"default")&&(n[o]=r.default),n[o]!==void 0&&uR(r,n[o])}}if(Array.isArray(e.anyOf))for(let n of e.anyOf)typeof n!="boolean"&&uR(n,t);if(Array.isArray(e.oneOf))for(let n of e.oneOf)typeof n!="boolean"&&uR(n,t)}}function c7e(e){if(!e)return{supportsFormMode:!1,supportsUrlMode:!1};let t=e.form!==void 0,n=e.url!==void 0;return{supportsFormMode:t||!t&&!n,supportsUrlMode:n}}var hR=class e extends SM{constructor(t,n){super(n),this._clientInfo=t,this._cachedToolOutputValidators=new Map,this._cachedKnownTaskTools=new Set,this._cachedRequiredTaskTools=new Set,this._listChangedDebounceTimers=new Map,this._capabilities=n?.capabilities??{},this._jsonSchemaValidator=n?.jsonSchemaValidator??new cR,n?.listChanged&&(this._pendingListChangedConfig=n.listChanged)}_setupListChangedHandlers(t){t.tools&&this._serverCapabilities?.tools?.listChanged&&this._setupListChangedHandler("tools",Q6,t.tools,()=>E(this,null,function*(){return(yield this.listTools()).tools})),t.prompts&&this._serverCapabilities?.prompts?.listChanged&&this._setupListChangedHandler("prompts",Y6,t.prompts,()=>E(this,null,function*(){return(yield this.listPrompts()).prompts})),t.resources&&this._serverCapabilities?.resources?.listChanged&&this._setupListChangedHandler("resources",Kw,t.resources,()=>E(this,null,function*(){return(yield this.listResources()).resources}))}get experimental(){return this._experimental||(this._experimental={tasks:new dR(this)}),this._experimental}registerCapabilities(t){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=Dre(this._capabilities,t)}setRequestHandler(t,n){let o=PI(t)?.method;if(!o)throw new Error("Schema is missing a method literal");let r;if(Jg(o)){let a=o;r=a._zod?.def?.value??a.value}else{let a=o;r=a._def?.value??a.value}if(typeof r!="string")throw new Error("Schema method literal must be a string");let s=r;if(s==="elicitation/create"){let a=(l,c)=>E(this,null,function*(){let u=Va(Xw,l);if(!u.success){let S=u.error instanceof Error?u.error.message:String(u.error);throw new ct(Pt.InvalidParams,`Invalid elicitation request: ${S}`)}let{params:h}=u.data;h.mode=h.mode??"form";let{supportsFormMode:f,supportsUrlMode:m}=c7e(this._capabilities.elicitation);if(h.mode==="form"&&!f)throw new ct(Pt.InvalidParams,"Client does not support form-mode elicitation requests");if(h.mode==="url"&&!m)throw new ct(Pt.InvalidParams,"Client does not support URL-mode elicitation requests");let _=yield Promise.resolve(n(l,c));if(h.task){let S=Va(Pp,_);if(!S.success){let I=S.error instanceof Error?S.error.message:String(S.error);throw new ct(Pt.InvalidParams,`Invalid task creation result: ${I}`)}return S.data}let y=Va(e0,_);if(!y.success){let S=y.error instanceof Error?y.error.message:String(y.error);throw new ct(Pt.InvalidParams,`Invalid elicitation result: ${S}`)}let w=y.data,C=h.mode==="form"?h.requestedSchema:void 0;if(h.mode==="form"&&w.action==="accept"&&w.content&&C&&this._capabilities.elicitation?.form?.applyDefaults)try{uR(C,w.content)}catch{}return w});return super.setRequestHandler(t,a)}if(s==="sampling/createMessage"){let a=(l,c)=>E(this,null,function*(){let u=Va(Jw,l);if(!u.success){let _=u.error instanceof Error?u.error.message:String(u.error);throw new ct(Pt.InvalidParams,`Invalid sampling request: ${_}`)}let{params:h}=u.data,f=yield Promise.resolve(n(l,c));if(h.task){let _=Va(Pp,f);if(!_.success){let y=_.error instanceof Error?_.error.message:String(_.error);throw new ct(Pt.InvalidParams,`Invalid task creation result: ${y}`)}return _.data}let m=Va(X6,f);if(!m.success){let _=m.error instanceof Error?m.error.message:String(m.error);throw new ct(Pt.InvalidParams,`Invalid sampling result: ${_}`)}return m.data});return super.setRequestHandler(t,a)}return super.setRequestHandler(t,n)}assertCapability(t,n){if(!this._serverCapabilities?.[t])throw new Error(`Server does not support ${t} (required for ${n})`)}connect(t,n){return E(this,null,function*(){if(yield Wn(e.prototype,this,"connect").call(this,t),t.sessionId===void 0)try{let i=yield this.request({method:"initialize",params:{protocolVersion:lv,capabilities:this._capabilities,clientInfo:this._clientInfo}},$6,n);if(i===void 0)throw new Error(`Server sent invalid initialize result: ${i}`);if(!sre.includes(i.protocolVersion))throw new Error(`Server's protocol version is not supported: ${i.protocolVersion}`);this._serverCapabilities=i.capabilities,this._serverVersion=i.serverInfo,t.setProtocolVersion&&t.setProtocolVersion(i.protocolVersion),this._instructions=i.instructions,yield this.notification({method:"notifications/initialized"}),this._pendingListChangedConfig&&(this._setupListChangedHandlers(this._pendingListChangedConfig),this._pendingListChangedConfig=void 0)}catch(i){throw this.close(),i}})}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(t){switch(t){case"logging/setLevel":if(!this._serverCapabilities?.logging)throw new Error(`Server does not support logging (required for ${t})`);break;case"prompts/get":case"prompts/list":if(!this._serverCapabilities?.prompts)throw new Error(`Server does not support prompts (required for ${t})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!this._serverCapabilities?.resources)throw new Error(`Server does not support resources (required for ${t})`);if(t==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${t})`);break;case"tools/call":case"tools/list":if(!this._serverCapabilities?.tools)throw new Error(`Server does not support tools (required for ${t})`);break;case"completion/complete":if(!this._serverCapabilities?.completions)throw new Error(`Server does not support completions (required for ${t})`);break;case"initialize":break;case"ping":break}}assertNotificationCapability(t){switch(t){case"notifications/roots/list_changed":if(!this._capabilities.roots?.listChanged)throw new Error(`Client does not support roots list changed notifications (required for ${t})`);break;case"notifications/initialized":break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(t){if(this._capabilities)switch(t){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${t})`);break;case"elicitation/create":if(!this._capabilities.elicitation)throw new Error(`Client does not support elicitation capability (required for ${t})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${t})`);break;case"tasks/get":case"tasks/list":case"tasks/result":case"tasks/cancel":if(!this._capabilities.tasks)throw new Error(`Client does not support tasks capability (required for ${t})`);break;case"ping":break}}assertTaskCapability(t){_le(this._serverCapabilities?.tasks?.requests,t,"Server")}assertTaskHandlerCapability(t){this._capabilities&&yle(this._capabilities.tasks?.requests,t,"Client")}ping(t){return E(this,null,function*(){return this.request({method:"ping"},Tp,t)})}complete(t,n){return E(this,null,function*(){return this.request({method:"completion/complete",params:t},eH,n)})}setLoggingLevel(t,n){return E(this,null,function*(){return this.request({method:"logging/setLevel",params:{level:t}},Tp,n)})}getPrompt(t,n){return E(this,null,function*(){return this.request({method:"prompts/get",params:t},Yw,n)})}listPrompts(t,n){return E(this,null,function*(){return this.request({method:"prompts/list",params:t},Zw,n)})}listResources(t,n){return E(this,null,function*(){return this.request({method:"resources/list",params:t},uv,n)})}listResourceTemplates(t,n){return E(this,null,function*(){return this.request({method:"resources/templates/list",params:t},G6,n)})}readResource(t,n){return E(this,null,function*(){return this.request({method:"resources/read",params:t},qw,n)})}subscribeResource(t,n){return E(this,null,function*(){return this.request({method:"resources/subscribe",params:t},Tp,n)})}unsubscribeResource(t,n){return E(this,null,function*(){return this.request({method:"resources/unsubscribe",params:t},Tp,n)})}callTool(o){return E(this,arguments,function*(t,n=td,i){if(this.isToolTaskRequired(t.name))throw new ct(Pt.InvalidRequest,`Tool "${t.name}" requires task-based execution. Use client.experimental.tasks.callToolStream() instead.`);let r=yield this.request({method:"tools/call",params:t},n,i),s=this.getToolOutputValidator(t.name);if(s){if(!r.structuredContent&&!r.isError)throw new ct(Pt.InvalidRequest,`Tool ${t.name} has an output schema but did not return structured content`);if(r.structuredContent)try{let a=s(r.structuredContent);if(!a.valid)throw new ct(Pt.InvalidParams,`Structured content does not match the tool's output schema: ${a.errorMessage}`)}catch(a){throw a instanceof ct?a:new ct(Pt.InvalidParams,`Failed to validate structured content: ${a instanceof Error?a.message:String(a)}`)}}return r})}isToolTask(t){return this._serverCapabilities?.tasks?.requests?.tools?.call?this._cachedKnownTaskTools.has(t):!1}isToolTaskRequired(t){return this._cachedRequiredTaskTools.has(t)}cacheToolMetadata(t){this._cachedToolOutputValidators.clear(),this._cachedKnownTaskTools.clear(),this._cachedRequiredTaskTools.clear();for(let n of t){if(n.outputSchema){let o=this._jsonSchemaValidator.getValidator(n.outputSchema);this._cachedToolOutputValidators.set(n.name,o)}let i=n.execution?.taskSupport;(i==="required"||i==="optional")&&this._cachedKnownTaskTools.add(n.name),i==="required"&&this._cachedRequiredTaskTools.add(n.name)}}getToolOutputValidator(t){return this._cachedToolOutputValidators.get(t)}listTools(t,n){return E(this,null,function*(){let i=yield this.request({method:"tools/list",params:t},Qw,n);return this.cacheToolMetadata(i.tools),i})}_setupListChangedHandler(t,n,i,o){let r=xre.safeParse(i);if(!r.success)throw new Error(`Invalid ${t} listChanged options: ${r.error.message}`);if(typeof i.onChanged!="function")throw new Error(`Invalid ${t} listChanged options: onChanged must be a function`);let{autoRefresh:s,debounceMs:a}=r.data,{onChanged:l}=i,c=()=>E(null,null,function*(){if(!s){l(null,null);return}try{let h=yield o();l(null,h)}catch(h){let f=h instanceof Error?h:new Error(String(h));l(f,null)}}),u=()=>{if(a){let h=this._listChangedDebounceTimers.get(t);h&&clearTimeout(h);let f=setTimeout(c,a);this._listChangedDebounceTimers.set(t,f)}else c()};this.setNotificationHandler(n,u)}sendRootsListChanged(){return E(this,null,function*(){return this.notification({method:"notifications/roots/list_changed"})})}};function pR(e){return e?e instanceof Headers?Object.fromEntries(e.entries()):Array.isArray(e)?Object.fromEntries(e):g({},e):{}}function ble(e=fetch,t){return t?(n,i)=>E(null,null,function*(){let o=x(g(g({},t),i),{headers:i?.headers?g(g({},pR(t.headers)),pR(i.headers)):t.headers});return e(n,o)}):e}var Y5;Y5=globalThis.crypto;function d7e(e){return E(this,null,function*(){return(yield Y5).getRandomValues(new Uint8Array(e))})}function u7e(e){return E(this,null,function*(){let t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~",n=Math.pow(2,8)-Math.pow(2,8)%t.length,i="";for(;i.length<e;){let o=yield d7e(e-i.length);for(let r of o)r<n&&(i+=t[r%t.length])}return i})}function h7e(e){return E(this,null,function*(){return yield u7e(e)})}function p7e(e){return E(this,null,function*(){let t=yield(yield Y5).subtle.digest("SHA-256",new TextEncoder().encode(e));return btoa(String.fromCharCode(...new Uint8Array(t))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")})}function Q5(e){return E(this,null,function*(){if(e||(e=43),e<43||e>128)throw`Expected a length between 43 and 128. Received ${e}.`;let t=yield h7e(e),n=yield p7e(t);return{code_verifier:t,code_challenge:n}})}var Zo=HI().superRefine((e,t)=>{if(!URL.canParse(e))return t.addIssue({code:L6.custom,message:"URL must be parseable",fatal:!0}),Vy}).refine(e=>{let t=new URL(e);return t.protocol!=="javascript:"&&t.protocol!=="data:"&&t.protocol!=="vbscript:"},{message:"URL cannot use javascript:, data:, or vbscript: scheme"}),wle=Gi({resource:z().url(),authorization_servers:Ee(Zo).optional(),jwks_uri:z().url().optional(),scopes_supported:Ee(z()).optional(),bearer_methods_supported:Ee(z()).optional(),resource_signing_alg_values_supported:Ee(z()).optional(),resource_name:z().optional(),resource_documentation:z().optional(),resource_policy_uri:z().url().optional(),resource_tos_uri:z().url().optional(),tls_client_certificate_bound_access_tokens:Fn().optional(),authorization_details_types_supported:Ee(z()).optional(),dpop_signing_alg_values_supported:Ee(z()).optional(),dpop_bound_access_tokens_required:Fn().optional()}),J5=Gi({issuer:z(),authorization_endpoint:Zo,token_endpoint:Zo,registration_endpoint:Zo.optional(),scopes_supported:Ee(z()).optional(),response_types_supported:Ee(z()),response_modes_supported:Ee(z()).optional(),grant_types_supported:Ee(z()).optional(),token_endpoint_auth_methods_supported:Ee(z()).optional(),token_endpoint_auth_signing_alg_values_supported:Ee(z()).optional(),service_documentation:Zo.optional(),revocation_endpoint:Zo.optional(),revocation_endpoint_auth_methods_supported:Ee(z()).optional(),revocation_endpoint_auth_signing_alg_values_supported:Ee(z()).optional(),introspection_endpoint:z().optional(),introspection_endpoint_auth_methods_supported:Ee(z()).optional(),introspection_endpoint_auth_signing_alg_values_supported:Ee(z()).optional(),code_challenge_methods_supported:Ee(z()).optional(),client_id_metadata_document_supported:Fn().optional()}),f7e=Gi({issuer:z(),authorization_endpoint:Zo,token_endpoint:Zo,userinfo_endpoint:Zo.optional(),jwks_uri:Zo,registration_endpoint:Zo.optional(),scopes_supported:Ee(z()).optional(),response_types_supported:Ee(z()),response_modes_supported:Ee(z()).optional(),grant_types_supported:Ee(z()).optional(),acr_values_supported:Ee(z()).optional(),subject_types_supported:Ee(z()),id_token_signing_alg_values_supported:Ee(z()),id_token_encryption_alg_values_supported:Ee(z()).optional(),id_token_encryption_enc_values_supported:Ee(z()).optional(),userinfo_signing_alg_values_supported:Ee(z()).optional(),userinfo_encryption_alg_values_supported:Ee(z()).optional(),userinfo_encryption_enc_values_supported:Ee(z()).optional(),request_object_signing_alg_values_supported:Ee(z()).optional(),request_object_encryption_alg_values_supported:Ee(z()).optional(),request_object_encryption_enc_values_supported:Ee(z()).optional(),token_endpoint_auth_methods_supported:Ee(z()).optional(),token_endpoint_auth_signing_alg_values_supported:Ee(z()).optional(),display_values_supported:Ee(z()).optional(),claim_types_supported:Ee(z()).optional(),claims_supported:Ee(z()).optional(),service_documentation:z().optional(),claims_locales_supported:Ee(z()).optional(),ui_locales_supported:Ee(z()).optional(),claims_parameter_supported:Fn().optional(),request_parameter_supported:Fn().optional(),request_uri_parameter_supported:Fn().optional(),require_request_uri_registration:Fn().optional(),op_policy_uri:Zo.optional(),op_tos_uri:Zo.optional(),client_id_metadata_document_supported:Fn().optional()}),xle=Re(g(g({},f7e.shape),J5.pick({code_challenge_methods_supported:!0}).shape)),Sle=Re({access_token:z(),id_token:z().optional(),token_type:z(),expires_in:Bw.number().optional(),scope:z().optional(),refresh_token:z().optional()}).strip(),Ele=Re({error:z(),error_description:z().optional(),error_uri:z().optional()}),Cle=Zo.optional().or(Xe("").transform(()=>{})),m7e=Re({redirect_uris:Ee(Zo),token_endpoint_auth_method:z().optional(),grant_types:Ee(z()).optional(),response_types:Ee(z()).optional(),client_name:z().optional(),client_uri:Zo.optional(),logo_uri:Cle,scope:z().optional(),contacts:Ee(z()).optional(),tos_uri:Cle,policy_uri:z().optional(),jwks_uri:Zo.optional(),jwks:oM().optional(),software_id:z().optional(),software_version:z().optional(),software_statement:z().optional()}).strip(),g7e=Re({client_id:z(),client_secret:z().optional(),client_id_issued_at:un().optional(),client_secret_expires_at:un().optional()}).strip(),Dle=m7e.merge(g7e),KMt=Re({error:z(),error_description:z().optional()}).strip(),ZMt=Re({token:z(),token_type_hint:z().optional()}).strip();function kle(e){let t=typeof e=="string"?new URL(e):new URL(e.href);return t.hash="",t}function Ile({requestedResource:e,configuredResource:t}){let n=typeof e=="string"?new URL(e):new URL(e.href),i=typeof t=="string"?new URL(t):new URL(t.href);if(n.origin!==i.origin||n.pathname.length<i.pathname.length)return!1;let o=n.pathname.endsWith("/")?n.pathname:n.pathname+"/",r=i.pathname.endsWith("/")?i.pathname:i.pathname+"/";return o.startsWith(r)}var Wi=class extends Error{constructor(t,n){super(t),this.errorUri=n,this.name=this.constructor.name}toResponseObject(){let t={error:this.errorCode,error_description:this.message};return this.errorUri&&(t.error_uri=this.errorUri),t}get errorCode(){return this.constructor.errorCode}},Mle=(()=>{class e extends Wi{}return e.errorCode="invalid_request",e})(),fR=(()=>{class e extends Wi{}return e.errorCode="invalid_client",e})(),mR=(()=>{class e extends Wi{}return e.errorCode="invalid_grant",e})(),gR=(()=>{class e extends Wi{}return e.errorCode="unauthorized_client",e})(),Rle=(()=>{class e extends Wi{}return e.errorCode="unsupported_grant_type",e})(),Tle=(()=>{class e extends Wi{}return e.errorCode="invalid_scope",e})(),Ple=(()=>{class e extends Wi{}return e.errorCode="access_denied",e})(),kv=(()=>{class e extends Wi{}return e.errorCode="server_error",e})(),Ale=(()=>{class e extends Wi{}return e.errorCode="temporarily_unavailable",e})(),Ole=(()=>{class e extends Wi{}return e.errorCode="unsupported_response_type",e})(),Fle=(()=>{class e extends Wi{}return e.errorCode="unsupported_token_type",e})(),Lle=(()=>{class e extends Wi{}return e.errorCode="invalid_token",e})(),Nle=(()=>{class e extends Wi{}return e.errorCode="method_not_allowed",e})(),Ble=(()=>{class e extends Wi{}return e.errorCode="too_many_requests",e})(),vR=(()=>{class e extends Wi{}return e.errorCode="invalid_client_metadata",e})(),zle=(()=>{class e extends Wi{}return e.errorCode="insufficient_scope",e})(),Vle=(()=>{class e extends Wi{}return e.errorCode="invalid_target",e})();var Hle={[Mle.errorCode]:Mle,[fR.errorCode]:fR,[mR.errorCode]:mR,[gR.errorCode]:gR,[Rle.errorCode]:Rle,[Tle.errorCode]:Tle,[Ple.errorCode]:Ple,[kv.errorCode]:kv,[Ale.errorCode]:Ale,[Ole.errorCode]:Ole,[Fle.errorCode]:Fle,[Lle.errorCode]:Lle,[Nle.errorCode]:Nle,[Ble.errorCode]:Ble,[vR.errorCode]:vR,[zle.errorCode]:zle,[Vle.errorCode]:Vle};var ld=class extends Error{constructor(t){super(t??"Unauthorized")}};function v7e(e){return["client_secret_basic","client_secret_post","none"].includes(e)}var X5="code",e8="S256";function _7e(e,t){let n=e.client_secret!==void 0;return t.length===0?n?"client_secret_post":"none":"token_endpoint_auth_method"in e&&e.token_endpoint_auth_method&&v7e(e.token_endpoint_auth_method)&&t.includes(e.token_endpoint_auth_method)?e.token_endpoint_auth_method:n&&t.includes("client_secret_basic")?"client_secret_basic":n&&t.includes("client_secret_post")?"client_secret_post":t.includes("none")?"none":n?"client_secret_post":"none"}function y7e(e,t,n,i){let{client_id:o,client_secret:r}=t;switch(e){case"client_secret_basic":b7e(o,r,n);return;case"client_secret_post":C7e(o,r,i);return;case"none":w7e(o,i);return;default:throw new Error(`Unsupported client authentication method: ${e}`)}}function b7e(e,t,n){if(!t)throw new Error("client_secret_basic authentication requires a client_secret");let i=btoa(`${e}:${t}`);n.set("Authorization",`Basic ${i}`)}function C7e(e,t,n){n.set("client_id",e),t&&n.set("client_secret",t)}function w7e(e,t){t.set("client_id",e)}function jle(e){return E(this,null,function*(){let t=e instanceof Response?e.status:void 0,n=e instanceof Response?yield e.text():e;try{let i=Ele.parse(JSON.parse(n)),{error:o,error_description:r,error_uri:s}=i,a=Hle[o]||kv;return new a(r||"",s)}catch(i){let o=`${t?`HTTP ${t}: `:""}Invalid OAuth error response: ${i}. Raw body: ${n}`;return new kv(o)}})}function k0(e,t){return E(this,null,function*(){try{return yield t8(e,t)}catch(n){if(n instanceof fR||n instanceof gR)return yield e.invalidateCredentials?.("all"),yield t8(e,t);if(n instanceof mR)return yield e.invalidateCredentials?.("tokens"),yield t8(e,t);throw n}})}function t8(s,a){return E(this,arguments,function*(e,{serverUrl:t,authorizationCode:n,scope:i,resourceMetadataUrl:o,fetchFn:r}){let l,c;try{l=yield E7e(t,{resourceMetadataUrl:o},r),l.authorization_servers&&l.authorization_servers.length>0&&(c=l.authorization_servers[0])}catch{}c||(c=new URL("/",t));let u=yield S7e(t,e,l),h=yield R7e(c,{fetchFn:r}),f=yield Promise.resolve(e.clientInformation());if(!f){if(n!==void 0)throw new Error("Existing OAuth client information is required when exchanging an authorization code");let S=h?.client_id_metadata_document_supported===!0,I=e.clientMetadataUrl;if(I&&!x7e(I))throw new vR(`clientMetadataUrl must be a valid HTTPS URL with a non-root pathname, got: ${I}`);if(S&&I)f={client_id:I},yield e.saveClientInformation?.(f);else{if(!e.saveClientInformation)throw new Error("OAuth client information must be saveable for dynamic registration");let F=yield F7e(c,{metadata:h,clientMetadata:e.clientMetadata,fetchFn:r});yield e.saveClientInformation(F),f=F}}let m=!e.redirectUrl;if(n!==void 0||m){let S=yield O7e(e,c,{metadata:h,resource:u,authorizationCode:n,fetchFn:r});return yield e.saveTokens(S),"AUTHORIZED"}let _=yield e.tokens();if(_?.refresh_token)try{let S=yield A7e(c,{metadata:h,clientInformation:f,refreshToken:_.refresh_token,resource:u,addClientAuthentication:e.addClientAuthentication,fetchFn:r});return yield e.saveTokens(S),"AUTHORIZED"}catch(S){if(!(!(S instanceof Wi)||S instanceof kv))throw S}let y=e.state?yield e.state():void 0,{authorizationUrl:w,codeVerifier:C}=yield T7e(c,{metadata:h,clientInformation:f,state:y,redirectUrl:e.redirectUrl,scope:i||l?.scopes_supported?.join(" ")||e.clientMetadata.scope,resource:u});return yield e.saveCodeVerifier(C),yield e.redirectToAuthorization(w),"REDIRECT"})}function x7e(e){if(!e)return!1;try{let t=new URL(e);return t.protocol==="https:"&&t.pathname!=="/"}catch{return!1}}function S7e(e,t,n){return E(this,null,function*(){let i=kle(e);if(t.validateResourceURL)return yield t.validateResourceURL(i,n?.resource);if(n){if(!Ile({requestedResource:i,configuredResource:n.resource}))throw new Error(`Protected resource ${n.resource} does not match expected ${i} (or origin)`);return new URL(n.resource)}})}function i8(e){let t=e.headers.get("WWW-Authenticate");if(!t)return{};let[n,i]=t.split(" ");if(n.toLowerCase()!=="bearer"||!i)return{};let o=n8(e,"resource_metadata")||void 0,r;if(o)try{r=new URL(o)}catch{}let s=n8(e,"scope")||void 0,a=n8(e,"error")||void 0;return{resourceMetadataUrl:r,scope:s,error:a}}function n8(e,t){let n=e.headers.get("WWW-Authenticate");if(!n)return null;let i=new RegExp(`${t}=(?:"([^"]+)"|([^\\s,]+))`),o=n.match(i);return o?o[1]||o[2]:null}function E7e(i,o){return E(this,arguments,function*(e,t,n=fetch){let r=yield I7e(e,"oauth-protected-resource",n,{protocolVersion:t?.protocolVersion,metadataUrl:t?.resourceMetadataUrl});if(!r||r.status===404)throw yield r?.body?.cancel(),new Error("Resource server does not implement OAuth 2.0 Protected Resource Metadata.");if(!r.ok)throw yield r.body?.cancel(),new Error(`HTTP ${r.status} trying to load well-known OAuth protected resource metadata.`);return wle.parse(yield r.json())})}function o8(i,o){return E(this,arguments,function*(e,t,n=fetch){try{return yield n(e,{headers:t})}catch(r){if(r instanceof TypeError)return t?o8(e,void 0,n):void 0;throw r}})}function D7e(e,t="",n={}){return t.endsWith("/")&&(t=t.slice(0,-1)),n.prependPathname?`${t}/.well-known/${e}`:`/.well-known/${e}${t}`}function $le(i,o){return E(this,arguments,function*(e,t,n=fetch){return yield o8(e,{"MCP-Protocol-Version":t},n)})}function k7e(e,t){return!e||e.status>=400&&e.status<500&&t!=="/"}function I7e(e,t,n,i){return E(this,null,function*(){let o=new URL(e),r=i?.protocolVersion??lv,s;if(i?.metadataUrl)s=new URL(i.metadataUrl);else{let l=D7e(t,o.pathname);s=new URL(l,i?.metadataServerUrl??o),s.search=o.search}let a=yield $le(s,r,n);if(!i?.metadataUrl&&k7e(a,o.pathname)){let l=new URL(`/.well-known/${t}`,o);a=yield $le(l,r,n)}return a})}function M7e(e){let t=typeof e=="string"?new URL(e):e,n=t.pathname!=="/",i=[];if(!n)return i.push({url:new URL("/.well-known/oauth-authorization-server",t.origin),type:"oauth"}),i.push({url:new URL("/.well-known/openid-configuration",t.origin),type:"oidc"}),i;let o=t.pathname;return o.endsWith("/")&&(o=o.slice(0,-1)),i.push({url:new URL(`/.well-known/oauth-authorization-server${o}`,t.origin),type:"oauth"}),i.push({url:new URL(`/.well-known/openid-configuration${o}`,t.origin),type:"oidc"}),i.push({url:new URL(`${o}/.well-known/openid-configuration`,t.origin),type:"oidc"}),i}function R7e(i){return E(this,arguments,function*(e,{fetchFn:t=fetch,protocolVersion:n=lv}={}){let o={"MCP-Protocol-Version":n,Accept:"application/json"},r=M7e(e);for(let{url:s,type:a}of r){let l=yield o8(s,o,t);if(l){if(!l.ok){if(yield l.body?.cancel(),l.status>=400&&l.status<500)continue;throw new Error(`HTTP ${l.status} trying to load ${a==="oauth"?"OAuth":"OpenID provider"} metadata from ${s}`)}return a==="oauth"?J5.parse(yield l.json()):xle.parse(yield l.json())}}})}function T7e(a,l){return E(this,arguments,function*(e,{metadata:t,clientInformation:n,redirectUrl:i,scope:o,state:r,resource:s}){let c;if(t){if(c=new URL(t.authorization_endpoint),!t.response_types_supported.includes(X5))throw new Error(`Incompatible auth server: does not support response type ${X5}`);if(t.code_challenge_methods_supported&&!t.code_challenge_methods_supported.includes(e8))throw new Error(`Incompatible auth server: does not support code challenge method ${e8}`)}else c=new URL("/authorize",e);let u=yield Q5(),h=u.code_verifier,f=u.code_challenge;return c.searchParams.set("response_type",X5),c.searchParams.set("client_id",n.client_id),c.searchParams.set("code_challenge",f),c.searchParams.set("code_challenge_method",e8),c.searchParams.set("redirect_uri",String(i)),r&&c.searchParams.set("state",r),o&&c.searchParams.set("scope",o),o?.includes("offline_access")&&c.searchParams.append("prompt","consent"),s&&c.searchParams.set("resource",s.href),{authorizationUrl:c,codeVerifier:h}})}function P7e(e,t,n){return new URLSearchParams({grant_type:"authorization_code",code:e,code_verifier:t,redirect_uri:String(n)})}function Gle(a,l){return E(this,arguments,function*(e,{metadata:t,tokenRequestParams:n,clientInformation:i,addClientAuthentication:o,resource:r,fetchFn:s}){let c=t?.token_endpoint?new URL(t.token_endpoint):new URL("/token",e),u=new Headers({"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"});if(r&&n.set("resource",r.href),o)yield o(u,n,c,t);else if(i){let f=t?.token_endpoint_auth_methods_supported??[],m=_7e(i,f);y7e(m,i,u,n)}let h=yield(s??fetch)(c,{method:"POST",headers:u,body:n});if(!h.ok)throw yield jle(h);return Sle.parse(yield h.json())})}function A7e(a,l){return E(this,arguments,function*(e,{metadata:t,clientInformation:n,refreshToken:i,resource:o,addClientAuthentication:r,fetchFn:s}){let c=new URLSearchParams({grant_type:"refresh_token",refresh_token:i}),u=yield Gle(e,{metadata:t,tokenRequestParams:c,clientInformation:n,addClientAuthentication:r,resource:o,fetchFn:s});return g({refresh_token:i},u)})}function O7e(s,a){return E(this,arguments,function*(e,t,{metadata:n,resource:i,authorizationCode:o,fetchFn:r}={}){let l=e.clientMetadata.scope,c;if(e.prepareTokenRequest&&(c=yield e.prepareTokenRequest(l)),!c){if(!o)throw new Error("Either provider.prepareTokenRequest() or authorizationCode is required");if(!e.redirectUrl)throw new Error("redirectUrl is required for authorization_code flow");let h=yield e.codeVerifier();c=P7e(o,h,e.redirectUrl)}let u=yield e.clientInformation();return Gle(t,{metadata:n,tokenRequestParams:c,clientInformation:u??void 0,addClientAuthentication:e.addClientAuthentication,resource:i,fetchFn:r})})}function F7e(o,r){return E(this,arguments,function*(e,{metadata:t,clientMetadata:n,fetchFn:i}){let s;if(t){if(!t.registration_endpoint)throw new Error("Incompatible auth server: does not support dynamic client registration");s=new URL(t.registration_endpoint)}else s=new URL("/register",e);let a=yield(i??fetch)(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!a.ok)throw yield jle(a);return Dle.parse(yield a.json())})}var _R=class extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}};function r8(e){}function Ule(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:t=r8,onError:n=r8,onRetry:i=r8,onComment:o}=e,r="",s=!0,a,l="",c="";function u(y){let w=s?y.replace(/^\xEF\xBB\xBF/,""):y,[C,S]=L7e(`${r}${w}`);for(let I of C)h(I);r=S,s=!1}function h(y){if(y===""){m();return}if(y.startsWith(":")){o&&o(y.slice(y.startsWith(": ")?2:1));return}let w=y.indexOf(":");if(w!==-1){let C=y.slice(0,w),S=y[w+1]===" "?2:1,I=y.slice(w+S);f(C,I,y);return}f(y,"",y)}function f(y,w,C){switch(y){case"event":c=w;break;case"data":l=`${l}${w}
`;break;case"id":a=w.includes("\0")?void 0:w;break;case"retry":/^\d+$/.test(w)?i(parseInt(w,10)):n(new _R(`Invalid \`retry\` value: "${w}"`,{type:"invalid-retry",value:w,line:C}));break;default:n(new _R(`Unknown field "${y.length>20?`${y.slice(0,20)}\u2026`:y}"`,{type:"unknown-field",field:y,value:w,line:C}));break}}function m(){l.length>0&&t({id:a,event:c||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),a=void 0,l="",c=""}function _(y={}){r&&y.consume&&h(r),s=!0,a=void 0,l="",c="",r=""}return{feed:u,reset:_}}function L7e(e){let t=[],n="",i=0;for(;i<e.length;){let o=e.indexOf("\r",i),r=e.indexOf(`
`,i),s=-1;if(o!==-1&&r!==-1?s=Math.min(o,r):o!==-1?o===e.length-1?s=-1:s=o:r!==-1&&(s=r),s===-1){n=e.slice(i);break}else{let a=e.slice(i,s);t.push(a),i=s+1,e[i-1]==="\r"&&e[i]===`
`&&i++}}return[t,n]}var yR=class extends TransformStream{constructor({onError:t,onRetry:n,onComment:i}={}){let o;super({start(r){o=Ule({onEvent:s=>{r.enqueue(s)},onError(s){t==="terminate"?r.error(s):typeof t=="function"&&t(s)},onRetry:n,onComment:i})},transform(r){o.feed(r)}})}};var N7e={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2},Ou=class extends Error{constructor(t,n){super(`Streamable HTTP error: ${n}`),this.code=t}},bR=class{constructor(t,n){this._hasCompletedAuthFlow=!1,this._url=t,this._resourceMetadataUrl=void 0,this._scope=void 0,this._requestInit=n?.requestInit,this._authProvider=n?.authProvider,this._fetch=n?.fetch,this._fetchWithInit=ble(n?.fetch,n?.requestInit),this._sessionId=n?.sessionId,this._reconnectionOptions=n?.reconnectionOptions??N7e}_authThenStart(){return E(this,null,function*(){if(!this._authProvider)throw new ld("No auth provider");let t;try{t=yield k0(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit})}catch(n){throw this.onerror?.(n),n}if(t!=="AUTHORIZED")throw new ld;return yield this._startOrAuthSse({resumptionToken:void 0})})}_commonHeaders(){return E(this,null,function*(){let t={};if(this._authProvider){let i=yield this._authProvider.tokens();i&&(t.Authorization=`Bearer ${i.access_token}`)}this._sessionId&&(t["mcp-session-id"]=this._sessionId),this._protocolVersion&&(t["mcp-protocol-version"]=this._protocolVersion);let n=pR(this._requestInit?.headers);return new Headers(g(g({},t),n))})}_startOrAuthSse(t){return E(this,null,function*(){let{resumptionToken:n}=t;try{let i=yield this._commonHeaders();i.set("Accept","text/event-stream"),n&&i.set("last-event-id",n);let o=yield(this._fetch??fetch)(this._url,{method:"GET",headers:i,signal:this._abortController?.signal});if(!o.ok){if(yield o.body?.cancel(),o.status===401&&this._authProvider)return yield this._authThenStart();if(o.status===405)return;throw new Ou(o.status,`Failed to open SSE stream: ${o.statusText}`)}this._handleSseStream(o.body,t,!0)}catch(i){throw this.onerror?.(i),i}})}_getNextReconnectionDelay(t){if(this._serverRetryMs!==void 0)return this._serverRetryMs;let n=this._reconnectionOptions.initialReconnectionDelay,i=this._reconnectionOptions.reconnectionDelayGrowFactor,o=this._reconnectionOptions.maxReconnectionDelay;return Math.min(n*Math.pow(i,t),o)}_scheduleReconnection(t,n=0){let i=this._reconnectionOptions.maxRetries;if(n>=i){this.onerror?.(new Error(`Maximum reconnection attempts (${i}) exceeded.`));return}let o=this._getNextReconnectionDelay(n);this._reconnectionTimeout=setTimeout(()=>{this._startOrAuthSse(t).catch(r=>{this.onerror?.(new Error(`Failed to reconnect SSE stream: ${r instanceof Error?r.message:String(r)}`)),this._scheduleReconnection(t,n+1)})},o)}_handleSseStream(t,n,i){if(!t)return;let{onresumptiontoken:o,replayMessageId:r}=n,s,a=!1,l=!1;E(this,null,function*(){try{let u=t.pipeThrough(new TextDecoderStream).pipeThrough(new yR({onRetry:m=>{this._serverRetryMs=m}})).getReader();for(;;){let{value:m,done:_}=yield u.read();if(_)break;if(m.id&&(s=m.id,a=!0,o?.(m.id)),!!m.data&&(!m.event||m.event==="message"))try{let y=mM.parse(JSON.parse(m.data));Rp(y)&&(l=!0,r!==void 0&&(y.id=r)),this.onmessage?.(y)}catch(y){this.onerror?.(y)}}(i||a)&&!l&&this._abortController&&!this._abortController.signal.aborted&&this._scheduleReconnection({resumptionToken:s,onresumptiontoken:o,replayMessageId:r},0)}catch(u){if(this.onerror?.(new Error(`SSE stream disconnected: ${u}`)),(i||a)&&!l&&this._abortController&&!this._abortController.signal.aborted)try{this._scheduleReconnection({resumptionToken:s,onresumptiontoken:o,replayMessageId:r},0)}catch(m){this.onerror?.(new Error(`Failed to reconnect: ${m instanceof Error?m.message:String(m)}`))}}})}start(){return E(this,null,function*(){if(this._abortController)throw new Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController})}finishAuth(t){return E(this,null,function*(){if(!this._authProvider)throw new ld("No auth provider");if((yield k0(this._authProvider,{serverUrl:this._url,authorizationCode:t,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit}))!=="AUTHORIZED")throw new ld("Failed to authorize")})}close(){return E(this,null,function*(){this._reconnectionTimeout&&(clearTimeout(this._reconnectionTimeout),this._reconnectionTimeout=void 0),this._abortController?.abort(),this.onclose?.()})}send(t,n){return E(this,null,function*(){try{let{resumptionToken:i,onresumptiontoken:o}=n||{};if(i){this._startOrAuthSse({resumptionToken:i,replayMessageId:Vw(t)?t.id:void 0}).catch(f=>this.onerror?.(f));return}let r=yield this._commonHeaders();r.set("content-type","application/json"),r.set("accept","application/json, text/event-stream");let s=x(g({},this._requestInit),{method:"POST",headers:r,body:JSON.stringify(t),signal:this._abortController?.signal}),a=yield(this._fetch??fetch)(this._url,s),l=a.headers.get("mcp-session-id");if(l&&(this._sessionId=l),!a.ok){let f=yield a.text().catch(()=>null);if(a.status===401&&this._authProvider){if(this._hasCompletedAuthFlow)throw new Ou(401,"Server returned 401 after successful authentication");let{resourceMetadataUrl:m,scope:_}=i8(a);if(this._resourceMetadataUrl=m,this._scope=_,(yield k0(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit}))!=="AUTHORIZED")throw new ld;return this._hasCompletedAuthFlow=!0,this.send(t)}if(a.status===403&&this._authProvider){let{resourceMetadataUrl:m,scope:_,error:y}=i8(a);if(y==="insufficient_scope"){let w=a.headers.get("WWW-Authenticate");if(this._lastUpscopingHeader===w)throw new Ou(403,"Server returned 403 after trying upscoping");if(_&&(this._scope=_),m&&(this._resourceMetadataUrl=m),this._lastUpscopingHeader=w??void 0,(yield k0(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetch}))!=="AUTHORIZED")throw new ld;return this.send(t)}}throw new Ou(a.status,`Error POSTing to endpoint: ${f}`)}if(this._hasCompletedAuthFlow=!1,this._lastUpscopingHeader=void 0,a.status===202){yield a.body?.cancel(),gre(t)&&this._startOrAuthSse({resumptionToken:void 0}).catch(f=>this.onerror?.(f));return}let u=(Array.isArray(t)?t:[t]).filter(f=>"method"in f&&"id"in f&&f.id!==void 0).length>0,h=a.headers.get("content-type");if(u)if(h?.includes("text/event-stream"))this._handleSseStream(a.body,{onresumptiontoken:o},!1);else if(h?.includes("application/json")){let f=yield a.json(),m=Array.isArray(f)?f.map(_=>mM.parse(_)):[mM.parse(f)];for(let _ of m)this.onmessage?.(_)}else throw yield a.body?.cancel(),new Ou(-1,`Unexpected content type: ${h}`);else yield a.body?.cancel()}catch(i){throw this.onerror?.(i),i}})}get sessionId(){return this._sessionId}terminateSession(){return E(this,null,function*(){if(this._sessionId)try{let t=yield this._commonHeaders(),n=x(g({},this._requestInit),{method:"DELETE",headers:t,signal:this._abortController?.signal}),i=yield(this._fetch??fetch)(this._url,n);if(yield i.body?.cancel(),!i.ok&&i.status!==405)throw new Ou(i.status,`Failed to terminate session: ${i.statusText}`);this._sessionId=void 0}catch(t){throw this.onerror?.(t),t}})}setProtocolVersion(t){this._protocolVersion=t}get protocolVersion(){return this._protocolVersion}resumeStream(t,n){return E(this,null,function*(){yield this._startOrAuthSse({resumptionToken:t,onresumptiontoken:n?.onresumptiontoken})})}};function CR(e){return e.title!==void 0&&e.title!==""?e.title:"annotations"in e&&e.annotations?.title?e.annotations.title:e.name}function I0(e){return e!==void 0&&Array.isArray(e.lc_namespace)}function M0(e){return e!==void 0&&oi.isRunnable(e)&&"lc_name"in e.constructor&&typeof e.constructor.lc_name=="function"&&e.constructor.lc_name()==="RunnableToolLike"}function R0(e){return!!e&&typeof e=="object"&&"name"in e&&"schema"in e&&(ds(e.schema)||e.schema!=null&&typeof e.schema=="object"&&"type"in e.schema&&typeof e.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(e.schema.type))}function Hp(e){return R0(e)||M0(e)||I0(e)}var s8={};_t(s8,{BaseToolkit:()=>B7e,DynamicStructuredTool:()=>wR,DynamicTool:()=>l8,StructuredTool:()=>T0,Tool:()=>a8,ToolInputParsingException:()=>_E,isLangChainTool:()=>Hp,isRunnableToolLike:()=>M0,isStructuredTool:()=>I0,isStructuredToolParams:()=>R0,tool:()=>P0});var T0=class extends G9{extras;returnDirect=!1;verboseParsingErrors=!1;get lc_namespace(){return["langchain","tools"]}responseFormat="content";defaultConfig;constructor(e){super(e??{}),this.verboseParsingErrors=e?.verboseParsingErrors??this.verboseParsingErrors,this.responseFormat=e?.responseFormat??this.responseFormat,this.defaultConfig=e?.defaultConfig??this.defaultConfig,this.metadata=e?.metadata??this.metadata,this.extras=e?.extras??this.extras}invoke(e,t){return E(this,null,function*(){let n,i=SE(cs(this.defaultConfig,t));return vE(e)?(n=e.args,i=x(g({},i),{toolCall:e})):n=e,this.call(n,i)})}call(e,t,n){return E(this,null,function*(){let i=vE(e)?e.args:e,o;if(ds(this.schema))try{o=yield ME(this.schema,i)}catch(m){let _="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(_=`${_}
Details: ${m.message}`),PE(m)&&(_=`${_}

${he.prettifyError(m)}`),new _E(_,JSON.stringify(e))}else{let m=E9(i,this.schema);if(!m.valid){let _="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(_=`${_}
Details: ${m.errors.map(y=>`${y.keywordLocation}: ${y.error}`).join(`
`)}`),new _E(_,JSON.stringify(e))}o=i}let r=um(t),a=yield Vs.configure(r.callbacks,this.callbacks,r.tags||n,this.tags,r.metadata,this.metadata,{verbose:this.verbose})?.handleToolStart(this.toJSON(),typeof e=="string"?e:JSON.stringify(e),r.runId,void 0,void 0,void 0,r.runName);delete r.runId;let l;try{l=yield this._call(o,a,r)}catch(m){throw yield a?.handleToolError(m),m}let c,u;if(this.responseFormat==="content_and_artifact")if(Array.isArray(l)&&l.length===2)[c,u]=l;else throw new Error(`Tool response format is "content_and_artifact" but the output was not a two-tuple.
Result: ${JSON.stringify(l)}`);else c=l;let h;vE(e)&&(h=e.id),!h&&AW(r)&&(h=r.toolCall.id);let f=z7e({content:c,artifact:u,toolCallId:h,name:this.name,metadata:this.metadata});return yield a?.handleToolEnd(f),f})}},a8=class extends T0{schema=wO.object({input:wO.string().optional()}).transform(e=>e.input);constructor(e){super(e)}call(e,t){let n=typeof e=="string"||e==null?{input:e}:e;return super.call(n,t)}},l8=class e extends a8{static lc_name(){return"DynamicTool"}name;description;func;constructor(t){super(t),this.name=t.name,this.description=t.description,this.func=t.func,this.returnDirect=t.returnDirect??this.returnDirect}call(t,n){return E(this,null,function*(){let i=um(n);return i.runName===void 0&&(i.runName=this.name),Wn(e.prototype,this,"call").call(this,t,i)})}_call(t,n,i){return E(this,null,function*(){return this.func(t,n,i)})}},wR=class e extends T0{static lc_name(){return"DynamicStructuredTool"}name;description;func;schema;constructor(t){super(t),this.name=t.name,this.description=t.description,this.func=t.func,this.returnDirect=t.returnDirect??this.returnDirect,this.schema=t.schema}call(t,n,i){return E(this,null,function*(){let o=um(n);return o.runName===void 0&&(o.runName=this.name),Wn(e.prototype,this,"call").call(this,t,o,i)})}_call(t,n,i){return this.func(t,n,i)}},B7e=class{getTools(){return this.tools}};function P0(e,t){let n=RE(t.schema),i=k9(t.schema);if(!t.schema||n||i)return new l8(x(g({},t),{description:t.description??t.schema?.description??`${t.name} tool`,func:(s,a,l)=>E(null,null,function*(){return new Promise((c,u)=>{let h=Hs(l,{callbacks:a?.getChild()});zr.runWithConfig(EE(h),()=>E(null,null,function*(){try{c(e(s,h))}catch(f){u(f)}}))})})}));let o=t.schema,r=t.description??t.schema.description??`${t.name} tool`;return new wR(x(g({},t),{description:r,schema:o,func:(s,a,l)=>E(null,null,function*(){return new Promise((c,u)=>{let h,f=()=>{l?.signal&&h&&l.signal.removeEventListener("abort",h)};l?.signal&&(h=()=>{f(),u(i9(l.signal))},l.signal.addEventListener("abort",h));let m=Hs(l,{callbacks:a?.getChild()});zr.runWithConfig(EE(m),()=>E(null,null,function*(){try{let _=yield e(s,m);if(l?.signal?.aborted){f();return}f(),c(_)}catch(_){f(),u(_)}}))})})}))}function z7e(e){let{content:t,artifact:n,toolCallId:i,metadata:o}=e;return i&&!BW(t)?typeof t=="string"||Array.isArray(t)&&t.every(r=>typeof r=="object")?new zs({status:"success",content:t,artifact:n,tool_call_id:i,name:e.name,metadata:o}):new zs({status:"success",content:V7e(t),artifact:n,tool_call_id:i,name:e.name,metadata:o}):t}function V7e(e){try{return JSON.stringify(e,null,2)??""}catch{return`${e}`}}var Fu=class e{formatToolForOpenAI(t){let n=o=>{if(!o||typeof o!="object")return o;let r=g({},o);if(o.type==="array"){if(!o.items)throw new Error("Array schema for key is missing 'items'.");Array.isArray(o.items)?r.items=o.items.map(s=>n(s)):r.items=n(o.items)}if(o.type==="object"&&o.properties){r.properties={};for(let[s,a]of Object.entries(o.properties))r.properties[s]=n(a)}return r},i={};return Object.entries(t.inputSchema.properties).forEach(([o,r])=>{let s=t.annotations?.[o]?.description||`user questions on ${t.title}`;i[o]=x(g({},n(r)),{description:s})}),{type:"function",function:{name:t.name,description:t.description.trim(),parameters:{type:"object",properties:i,required:t.inputSchema.required}}}}formatMultipleTools(t){return t.map(n=>this.formatToolForOpenAI(n))}convertToolForLangChain(t){let n=this.convertJsonSchemaToZod(t.inputSchema);return new wR({name:t.name,description:t.description.trim(),schema:n,func:i=>E(this,null,function*(){return`Tool ${t.name} executed with input: ${JSON.stringify(i)}`})})}convertMultipleTools(t){return t.map(n=>this.convertToolForLangChain(n))}convertJsonSchemaToZod(t){let n={};if(t.type==="object"&&t.properties)for(let[o,r]of Object.entries(t.properties))n[o]=this.convertPropertyToZod(r);let i=he.object(n);return t.required&&t.required.length>0?i.required():i}convertPropertyToZod(t){let{type:n,description:i}=t;switch(n){case"string":return he.string().describe(i||"");case"number":return he.number().describe(i||"");case"integer":return he.number().int().describe(i||"");case"boolean":return he.boolean().describe(i||"");case"array":if(t.items){let o=this.convertPropertyToZod(t.items);return he.array(o).describe(i||"")}return he.array(he.any()).describe(i||"");case"object":return t.properties?this.convertJsonSchemaToZod(t):he.object({}).describe(i||"");default:return he.any().describe(i||"")}}static \u0275fac=function(n){return new(n||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})};function A0(e,t){return e.lc_error_code=t,e.message=`${e.message}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langchain/errors/${t}/
`,e}function ot(e,t,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n}function G(e,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(e):i?i.value:t.get(e)}var d8=function(){let{crypto:e}=globalThis;if(e?.randomUUID)return d8=e.randomUUID.bind(e),e.randomUUID();let t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};function O0(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}var F0=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){let t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};var je=class extends Error{},vo=class e extends je{constructor(t,n,i,o){super(`${e.makeMessage(t,n,i)}`),this.status=t,this.headers=o,this.requestID=o?.get("x-request-id"),this.error=n;let r=n;this.code=r?.code,this.param=r?.param,this.type=r?.type}static makeMessage(t,n,i){let o=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return t&&o?`${t} ${o}`:t?`${t} status code (no body)`:o||"(no status code or body)"}static generate(t,n,i,o){if(!t||!o)return new Lu({message:i,cause:F0(n)});let r=n?.error;return t===400?new Iv(t,r,i,o):t===401?new Mv(t,r,i,o):t===403?new Rv(t,r,i,o):t===404?new Tv(t,r,i,o):t===409?new Pv(t,r,i,o):t===422?new Av(t,r,i,o):t===429?new Ov(t,r,i,o):t>=500?new Fv(t,r,i,o):new e(t,r,i,o)}},Oi=class extends vo{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}},Lu=class extends vo{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}},Yl=class extends Lu{constructor({message:t}={}){super({message:t??"Request timed out."})}},Iv=class extends vo{},Mv=class extends vo{},Rv=class extends vo{},Tv=class extends vo{},Pv=class extends vo{},Av=class extends vo{},Ov=class extends vo{},Fv=class extends vo{},Lv=class extends je{constructor(){super("Could not parse response content as the length limit was reached")}},Nv=class extends je{constructor(){super("Could not parse response content as the request was rejected by the content filter")}},Ql=class extends Error{constructor(t){super(t)}};var $7e=/^[a-z][a-z0-9+.-]*:/i,Wle=e=>$7e.test(e),hr=e=>(hr=Array.isArray,hr(e)),u8=hr;function h8(e){return typeof e!="object"?{}:e??{}}function qle(e){if(!e)return!0;for(let t in e)return!1;return!0}function Kle(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function L0(e){return e!=null&&typeof e=="object"&&!Array.isArray(e)}var Zle=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new je(`${e} must be an integer`);if(t<0)throw new je(`${e} must be a positive integer`);return t};var Yle=e=>{try{return JSON.parse(e)}catch{return}};var Jl=e=>new Promise(t=>setTimeout(t,e));var Nu="6.14.0";var ece=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function j7e(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}var G7e=()=>{let e=j7e();if(e==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nu,"X-Stainless-OS":Jle(Deno.build.os),"X-Stainless-Arch":Qle(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(e==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nu,"X-Stainless-OS":Jle(globalThis.process.platform??"unknown"),"X-Stainless-Arch":Qle(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};let t=U7e();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function U7e(){if(typeof navigator>"u"||!navigator)return null;let e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:t,pattern:n}of e){let i=n.exec(navigator.userAgent);if(i){let o=i[1]||0,r=i[2]||0,s=i[3]||0;return{browser:t,version:`${o}.${r}.${s}`}}}return null}var Qle=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",Jle=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown"),Xle,tce=()=>Xle??(Xle=G7e());function nce(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function p8(...e){let t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function xR(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return p8({start(){},pull(i){return E(this,null,function*(){let{done:o,value:r}=yield t.next();o?i.close():i.enqueue(r)})},cancel(){return E(this,null,function*(){yield t.return?.()})}})}function f8(e){if(e[Symbol.asyncIterator])return e;let t=e.getReader();return{next(){return E(this,null,function*(){try{let i=yield t.read();return i?.done&&t.releaseLock(),i}catch(i){throw t.releaseLock(),i}})},return(){return E(this,null,function*(){let i=t.cancel();return t.releaseLock(),yield i,{done:!0,value:void 0}})},[Symbol.asyncIterator](){return this}}}function ice(e){return E(this,null,function*(){if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){yield e[Symbol.asyncIterator]().return?.();return}let t=e.getReader(),n=t.cancel();t.releaseLock(),yield n})}var oce=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});var SR="RFC3986",m8=e=>String(e),ER={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:m8},g8="RFC1738";var DR=(e,t)=>(DR=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),DR(e,t)),Xl=(()=>{let e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})();var v8=1024,rce=(e,t,n,i,o)=>{if(e.length===0)return e;let r=e;if(typeof e=="symbol"?r=Symbol.prototype.toString.call(e):typeof e!="string"&&(r=String(e)),n==="iso-8859-1")return escape(r).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let s="";for(let a=0;a<r.length;a+=v8){let l=r.length>=v8?r.slice(a,a+v8):r,c=[];for(let u=0;u<l.length;++u){let h=l.charCodeAt(u);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||o===g8&&(h===40||h===41)){c[c.length]=l.charAt(u);continue}if(h<128){c[c.length]=Xl[h];continue}if(h<2048){c[c.length]=Xl[192|h>>6]+Xl[128|h&63];continue}if(h<55296||h>=57344){c[c.length]=Xl[224|h>>12]+Xl[128|h>>6&63]+Xl[128|h&63];continue}u+=1,h=65536+((h&1023)<<10|l.charCodeAt(u)&1023),c[c.length]=Xl[240|h>>18]+Xl[128|h>>12&63]+Xl[128|h>>6&63]+Xl[128|h&63]}s+=c.join("")}return s};function sce(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function _8(e,t){if(hr(e)){let n=[];for(let i=0;i<e.length;i+=1)n.push(t(e[i]));return n}return t(e)}var lce={brackets(e){return String(e)+"[]"},comma:"comma",indices(e,t){return String(e)+"["+t+"]"},repeat(e){return String(e)}},cce=function(e,t){Array.prototype.push.apply(e,hr(t)?t:[t])},ace,_o={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:rce,encodeValuesOnly:!1,format:SR,formatter:m8,indices:!1,serializeDate(e){return(ace??(ace=Function.prototype.call.bind(Date.prototype.toISOString)))(e)},skipNulls:!1,strictNullHandling:!1};function K7e(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"}var y8={};function dce(e,t,n,i,o,r,s,a,l,c,u,h,f,m,_,y,w,C){let S=e,I=C,O=0,F=!1;for(;(I=I.get(y8))!==void 0&&!F;){let se=I.get(e);if(O+=1,typeof se<"u"){if(se===O)throw new RangeError("Cyclic object value");F=!0}typeof I.get(y8)>"u"&&(O=0)}if(typeof c=="function"?S=c(t,S):S instanceof Date?S=f?.(S):n==="comma"&&hr(S)&&(S=_8(S,function(se){return se instanceof Date?f?.(se):se})),S===null){if(r)return l&&!y?l(t,_o.encoder,w,"key",m):t;S=""}if(K7e(S)||sce(S)){if(l){let se=y?t:l(t,_o.encoder,w,"key",m);return[_?.(se)+"="+_?.(l(S,_o.encoder,w,"value",m))]}return[_?.(t)+"="+_?.(String(S))]}let H=[];if(typeof S>"u")return H;let j;if(n==="comma"&&hr(S))y&&l&&(S=_8(S,l)),j=[{value:S.length>0?S.join(",")||null:void 0}];else if(hr(c))j=c;else{let se=Object.keys(S);j=u?se.sort(u):se}let re=a?String(t).replace(/\./g,"%2E"):String(t),ae=i&&hr(S)&&S.length===1?re+"[]":re;if(o&&hr(S)&&S.length===0)return ae+"[]";for(let se=0;se<j.length;++se){let Te=j[se],ue=typeof Te=="object"&&typeof Te.value<"u"?Te.value:S[Te];if(s&&ue===null)continue;let De=h&&a?Te.replace(/\./g,"%2E"):Te,Ne=hr(S)?typeof n=="function"?n(ae,De):ae:ae+(h?"."+De:"["+De+"]");C.set(e,O);let Pe=new WeakMap;Pe.set(y8,C),cce(H,dce(ue,Ne,n,i,o,r,s,a,n==="comma"&&y&&hr(S)?null:l,c,u,h,f,m,_,y,w,Pe))}return H}function Z7e(e=_o){if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");let t=e.charset||_o.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=SR;if(typeof e.format<"u"){if(!DR(ER,e.format))throw new TypeError("Unknown format option provided.");n=e.format}let i=ER[n],o=_o.filter;(typeof e.filter=="function"||hr(e.filter))&&(o=e.filter);let r;if(e.arrayFormat&&e.arrayFormat in lce?r=e.arrayFormat:"indices"in e?r=e.indices?"indices":"repeat":r=_o.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");let s=typeof e.allowDots>"u"?e.encodeDotInKeys?!0:_o.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:_o.addQueryPrefix,allowDots:s,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:_o.allowEmptyArrays,arrayFormat:r,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:_o.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?_o.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:_o.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:_o.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:_o.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:_o.encodeValuesOnly,filter:o,format:n,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:_o.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:_o.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:_o.strictNullHandling}}function b8(e,t={}){let n=e,i=Z7e(t),o,r;typeof i.filter=="function"?(r=i.filter,n=r("",n)):hr(i.filter)&&(r=i.filter,o=r);let s=[];if(typeof n!="object"||n===null)return"";let a=lce[i.arrayFormat],l=a==="comma"&&i.commaRoundTrip;o||(o=Object.keys(n)),i.sort&&o.sort(i.sort);let c=new WeakMap;for(let f=0;f<o.length;++f){let m=o[f];i.skipNulls&&n[m]===null||cce(s,dce(n[m],m,a,l,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,c))}let u=s.join(i.delimiter),h=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),u.length>0?h+u:""}function pce(e){let t=0;for(let o of e)t+=o.length;let n=new Uint8Array(t),i=0;for(let o of e)n.set(o,i),i+=o.length;return n}var uce;function Bv(e){let t;return(uce??(t=new globalThis.TextEncoder,uce=t.encode.bind(t)))(e)}var hce;function C8(e){let t;return(hce??(t=new globalThis.TextDecoder,hce=t.decode.bind(t)))(e)}var ks,Is,$p=class{constructor(){ks.set(this,void 0),Is.set(this,void 0),ot(this,ks,new Uint8Array,"f"),ot(this,Is,null,"f")}decode(t){if(t==null)return[];let n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?Bv(t):t;ot(this,ks,pce([G(this,ks,"f"),n]),"f");let i=[],o;for(;(o=Q7e(G(this,ks,"f"),G(this,Is,"f")))!=null;){if(o.carriage&&G(this,Is,"f")==null){ot(this,Is,o.index,"f");continue}if(G(this,Is,"f")!=null&&(o.index!==G(this,Is,"f")+1||o.carriage)){i.push(C8(G(this,ks,"f").subarray(0,G(this,Is,"f")-1))),ot(this,ks,G(this,ks,"f").subarray(G(this,Is,"f")),"f"),ot(this,Is,null,"f");continue}let r=G(this,Is,"f")!==null?o.preceding-1:o.preceding,s=C8(G(this,ks,"f").subarray(0,r));i.push(s),ot(this,ks,G(this,ks,"f").subarray(o.index),"f"),ot(this,Is,null,"f")}return i}flush(){return G(this,ks,"f").length?this.decode(`
`):[]}};ks=new WeakMap,Is=new WeakMap;$p.NEWLINE_CHARS=new Set([`
`,"\r"]);$p.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Q7e(e,t){for(let o=t??0;o<e.length;o++){if(e[o]===10)return{preceding:o,index:o+1,carriage:!1};if(e[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function fce(e){for(let i=0;i<e.length-1;i++){if(e[i]===10&&e[i+1]===10||e[i]===13&&e[i+1]===13)return i+2;if(e[i]===13&&e[i+1]===10&&i+3<e.length&&e[i+2]===13&&e[i+3]===10)return i+4}return-1}var IR={off:0,error:200,warn:300,info:400,debug:500},w8=(e,t,n)=>{if(e){if(Kle(IR,e))return e;qi(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(IR))}`)}};function N0(){}function kR(e,t,n){return!t||IR[e]>IR[n]?N0:t[e].bind(t)}var J7e={error:N0,warn:N0,info:N0,debug:N0},mce=new WeakMap;function qi(e){let t=e.logger,n=e.logLevel??"off";if(!t)return J7e;let i=mce.get(t);if(i&&i[0]===n)return i[1];let o={error:kR("error",t,n),warn:kR("warn",t,n),info:kR("info",t,n),debug:kR("debug",t,n)};return mce.set(t,[n,o]),o}var cd=e=>(e.options&&(e.options=g({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);var B0,ec=class e{constructor(t,n,i){this.iterator=t,B0.set(this,void 0),this.controller=n,ot(this,B0,i,"f")}static fromSSEResponse(t,n,i){let o=!1,r=i?qi(i):console;function s(){return Bt(this,null,function*(){if(o)throw new je("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let a=!1;try{try{for(var l=lt(X7e(t,n)),c,u,h;c=!(u=yield new Ie(l.next())).done;c=!1){let f=u.value;if(!a){if(f.data.startsWith("[DONE]")){a=!0;continue}if(f.event===null||!f.event.startsWith("thread.")){let m;try{m=JSON.parse(f.data)}catch(_){throw r.error("Could not parse message into JSON:",f.data),r.error("From chunk:",f.raw),_}if(m&&m.error)throw new vo(void 0,m.error,void 0,t.headers);yield m}else{let m;try{m=JSON.parse(f.data)}catch(_){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),_}if(f.event=="error")throw new vo(void 0,m.error,m.message,void 0);yield{event:f.event,data:m}}}}}catch{h=[u]}finally{try{c&&(u=l.return)&&(yield new Ie(u.call(l)))}finally{if(h)throw h[0]}}a=!0}catch(f){if(O0(f))return;throw f}finally{a||n.abort()}})}return new e(s,n,i)}static fromReadableStream(t,n,i){let o=!1;function r(){return Bt(this,null,function*(){let a=new $p,l=f8(t);try{for(var c=lt(l),u,h,f;u=!(h=yield new Ie(c.next())).done;u=!1){let m=h.value;for(let _ of a.decode(m))yield _}}catch{f=[h]}finally{try{u&&(h=c.return)&&(yield new Ie(h.call(c)))}finally{if(f)throw f[0]}}for(let m of a.flush())yield m})}function s(){return Bt(this,null,function*(){if(o)throw new je("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let a=!1;try{try{for(var l=lt(r()),c,u,h;c=!(u=yield new Ie(l.next())).done;c=!1){let f=u.value;a||f&&(yield JSON.parse(f))}}catch{h=[u]}finally{try{c&&(u=l.return)&&(yield new Ie(u.call(l)))}finally{if(h)throw h[0]}}a=!0}catch(f){if(O0(f))return;throw f}finally{a||n.abort()}})}return new e(s,n,i)}[(B0=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){let t=[],n=[],i=this.iterator(),o=r=>({next:()=>{if(r.length===0){let s=i.next();t.push(s),n.push(s)}return r.shift()}});return[new e(()=>o(t),this.controller,G(this,B0,"f")),new e(()=>o(n),this.controller,G(this,B0,"f"))]}toReadableStream(){let t=this,n;return p8({start(){return E(this,null,function*(){n=t[Symbol.asyncIterator]()})},pull(o){return E(this,null,function*(){try{let{value:r,done:s}=yield n.next();if(s)return o.close();let a=Bv(JSON.stringify(r)+`
`);o.enqueue(a)}catch(r){o.error(r)}})},cancel(){return E(this,null,function*(){yield n.return?.()})}})}};function X7e(e,t){return Bt(this,null,function*(){if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new je("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new je("Attempted to iterate over a response with no body");let n=new x8,i=new $p,o=f8(e.body);try{for(var r=lt(eUe(o)),s,a,l;s=!(a=yield new Ie(r.next())).done;s=!1){let c=a.value;for(let u of i.decode(c)){let h=n.decode(u);h&&(yield h)}}}catch{l=[a]}finally{try{s&&(a=r.return)&&(yield new Ie(a.call(r)))}finally{if(l)throw l[0]}}for(let c of i.flush()){let u=n.decode(c);u&&(yield u)}})}function eUe(e){return Bt(this,null,function*(){let t=new Uint8Array;try{for(var n=lt(e),i,o,r;i=!(o=yield new Ie(n.next())).done;i=!1){let s=o.value;if(s==null)continue;let a=s instanceof ArrayBuffer?new Uint8Array(s):typeof s=="string"?Bv(s):s,l=new Uint8Array(t.length+a.length);l.set(t),l.set(a,t.length),t=l;let c;for(;(c=fce(t))!==-1;)yield t.slice(0,c),t=t.slice(c)}}catch{r=[o]}finally{try{i&&(o=n.return)&&(yield new Ie(o.call(n)))}finally{if(r)throw r[0]}}t.length>0&&(yield t)})}var x8=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;let r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,i,o]=tUe(t,":");return o.startsWith(" ")&&(o=o.substring(1)),n==="event"?this.event=o:n==="data"&&this.data.push(o),null}};function tUe(e,t){let n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}function MR(e,t){return E(this,null,function*(){let{response:n,requestLogID:i,retryOfRequestLogID:o,startTime:r}=t,s=yield E(null,null,function*(){if(t.options.stream)return qi(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):ec.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;let l=n.headers.get("content-type")?.split(";")[0]?.trim();if(l?.includes("application/json")||l?.endsWith("+json")){let h=yield n.json();return S8(h,n)}return yield n.text()});return qi(e).debug(`[${i}] response parsed`,cd({retryOfRequestLogID:o,url:n.url,status:n.status,body:s,durationMs:Date.now()-r})),s})}function S8(e,t){return!e||typeof e!="object"||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}var z0,jp=class e extends Promise{constructor(t,n,i=MR){super(o=>{o(null)}),this.responsePromise=n,this.parseResponse=i,z0.set(this,void 0),ot(this,z0,t,"f")}_thenUnwrap(t){return new e(G(this,z0,"f"),this.responsePromise,(n,i)=>E(this,null,function*(){return S8(t(yield this.parseResponse(n,i),i),i.response)}))}asResponse(){return this.responsePromise.then(t=>t.response)}withResponse(){return E(this,null,function*(){let[t,n]=yield Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n,request_id:n.headers.get("x-request-id")}})}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(G(this,z0,"f"),t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}};z0=new WeakMap;var RR,V0=class{constructor(t,n,i,o){RR.set(this,void 0),ot(this,RR,t,"f"),this.options=o,this.response=n,this.body=i}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}getNextPage(){return E(this,null,function*(){let t=this.nextPageRequestOptions();if(!t)throw new je("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return yield G(this,RR,"f").requestAPIList(this.constructor,t)})}iterPages(){return Bt(this,null,function*(){let t=this;for(yield t;t.hasNextPage();)t=yield new Ie(t.getNextPage()),yield t})}[(RR=new WeakMap,Symbol.asyncIterator)](){return Bt(this,null,function*(){try{for(var t=lt(this.iterPages()),n,i,o;n=!(i=yield new Ie(t.next())).done;n=!1){let r=i.value;for(let s of r.getPaginatedItems())yield s}}catch{o=[i]}finally{try{n&&(i=t.return)&&(yield new Ie(i.call(t)))}finally{if(o)throw o[0]}}})}},H0=class extends jp{constructor(t,n,i){super(t,n,(o,r)=>E(null,null,function*(){return new i(o,r.response,yield MR(o,r),r.options)}))}[Symbol.asyncIterator](){return Bt(this,null,function*(){let t=yield new Ie(this);try{for(var n=lt(t),i,o,r;i=!(o=yield new Ie(n.next())).done;i=!1){let s=o.value;yield s}}catch{r=[o]}finally{try{i&&(o=n.return)&&(yield new Ie(o.call(n)))}finally{if(r)throw r[0]}}})}},tc=class extends V0{constructor(t,n,i,o){super(t,n,i,o),this.data=i.data||[],this.object=i.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}},Wt=class extends V0{constructor(t,n,i,o){super(t,n,i,o),this.data=i.data||[],this.has_more=i.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){let t=this.getPaginatedItems(),n=t[t.length-1]?.id;return n?x(g({},this.options),{query:x(g({},h8(this.options.query)),{after:n})}):null}},dd=class extends V0{constructor(t,n,i,o){super(t,n,i,o),this.data=i.data||[],this.has_more=i.has_more||!1,this.last_id=i.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){let t=this.last_id;return t?x(g({},this.options),{query:x(g({},h8(this.options.query)),{after:t})}):null}};var k8=()=>{if(typeof File>"u"){let{process:e}=globalThis,t=typeof e?.versions?.node=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function zv(e,t,n){return k8(),new File(e,t??"unknown_file",n)}function $0(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}var TR=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function",I8=(e,t)=>E(null,null,function*(){return E8(e.body)?x(g({},e),{body:yield vce(e.body,t)}):e}),Ms=(e,t)=>E(null,null,function*(){return x(g({},e),{body:yield vce(e.body,t)})}),gce=new WeakMap;function iUe(e){let t=typeof e=="function"?e:e.fetch,n=gce.get(t);if(n)return n;let i=E(null,null,function*(){try{let o="Response"in t?t.Response:(yield t("data:,")).constructor,r=new FormData;return r.toString()!==(yield new o(r).text())}catch{return!0}});return gce.set(t,i),i}var vce=(e,t)=>E(null,null,function*(){if(!(yield iUe(t)))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");let n=new FormData;return yield Promise.all(Object.entries(e||{}).map(([i,o])=>D8(n,i,o))),n}),_ce=e=>e instanceof Blob&&"name"in e,oUe=e=>typeof e=="object"&&e!==null&&(e instanceof Response||TR(e)||_ce(e)),E8=e=>{if(oUe(e))return!0;if(Array.isArray(e))return e.some(E8);if(e&&typeof e=="object"){for(let t in e)if(E8(e[t]))return!0}return!1},D8=(e,t,n)=>E(null,null,function*(){if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")e.append(t,String(n));else if(n instanceof Response)e.append(t,zv([yield n.blob()],$0(n)));else if(TR(n))e.append(t,zv([yield new Response(xR(n)).blob()],$0(n)));else if(_ce(n))e.append(t,n,$0(n));else if(Array.isArray(n))yield Promise.all(n.map(i=>D8(e,t+"[]",i)));else if(typeof n=="object")yield Promise.all(Object.entries(n).map(([i,o])=>D8(e,`${t}[${i}]`,o)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}});var yce=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",rUe=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&yce(e),sUe=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";function j0(e,t,n){return E(this,null,function*(){if(k8(),e=yield e,rUe(e))return e instanceof File?e:zv([yield e.arrayBuffer()],e.name);if(sUe(e)){let o=yield e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),zv(yield M8(o),t,n)}let i=yield M8(e);if(t||(t=$0(e)),!n?.type){let o=i.find(r=>typeof r=="object"&&"type"in r&&r.type);typeof o=="string"&&(n=x(g({},n),{type:o}))}return zv(i,t,n)})}function M8(e){return E(this,null,function*(){let t=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(yce(e))t.push(e instanceof Blob?e:yield e.arrayBuffer());else if(TR(e))try{for(var n=lt(e),i,o,r;i=!(o=yield n.next()).done;i=!1){let s=o.value;t.push(...yield M8(s))}}catch{r=[o]}finally{try{i&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r[0]}}else{let s=e?.constructor?.name;throw new Error(`Unexpected data type: ${typeof e}${s?`; constructor: ${s}`:""}${aUe(e)}`)}return t})}function aUe(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}var oe=class{constructor(t){this._client=t}};function Cce(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}var bce=Object.freeze(Object.create(null)),cUe=(e=Cce)=>function(n,...i){if(n.length===1)return n[0];let o=!1,r=[],s=n.reduce((u,h,f)=>{/[?#]/.test(h)&&(o=!0);let m=i[f],_=(o?encodeURIComponent:e)(""+m);return f!==i.length&&(m==null||typeof m=="object"&&m.toString===Object.getPrototypeOf(Object.getPrototypeOf(m.hasOwnProperty??bce)??bce)?.toString)&&(_=m+"",r.push({start:u.length+h.length,length:_.length,error:`Value of type ${Object.prototype.toString.call(m).slice(8,-1)} is not a valid path parameter`})),u+h+(f===i.length?"":_)},""),a=s.split(/[?#]/,1)[0],l=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,c;for(;(c=l.exec(a))!==null;)r.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(r.sort((u,h)=>u.start-h.start),r.length>0){let u=0,h=r.reduce((f,m)=>{let _=" ".repeat(m.start-u),y="^".repeat(m.length);return u=m.start+m.length,f+_+y},"");throw new je(`Path parameters result in path with invalid segments:
${r.map(f=>f.error).join(`
`)}
${s}
${h}`)}return s},ne=cUe(Cce);var Gp=class extends oe{list(t,n={},i){return this._client.getAPIList(ne`/chat/completions/${t}/messages`,Wt,g({query:n},i))}};function G0(e){return e!==void 0&&"function"in e&&e.function!==void 0}function wce(e,t){let n=g({},e);return Object.defineProperties(n,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:t,enumerable:!1}}),n}function U0(e){return e?.$brand==="auto-parseable-response-format"}function Up(e){return e?.$brand==="auto-parseable-tool"}function xce(e,t){return!t||!R8(t)?x(g({},e),{choices:e.choices.map(n=>(Ece(n.message.tool_calls),x(g({},n),{message:g(x(g({},n.message),{parsed:null}),n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0)})))}):W0(e,t)}function W0(e,t){let n=e.choices.map(i=>{if(i.finish_reason==="length")throw new Lv;if(i.finish_reason==="content_filter")throw new Nv;return Ece(i.message.tool_calls),x(g({},i),{message:x(g(g({},i.message),i.message.tool_calls?{tool_calls:i.message.tool_calls?.map(o=>pUe(t,o))??void 0}:void 0),{parsed:i.message.content&&!i.message.refusal?hUe(t,i.message.content):null})})});return x(g({},e),{choices:n})}function hUe(e,t){return e.response_format?.type!=="json_schema"?null:e.response_format?.type==="json_schema"?"$parseRaw"in e.response_format?e.response_format.$parseRaw(t):JSON.parse(t):null}function pUe(e,t){let n=e.tools?.find(i=>G0(i)&&i.function?.name===t.function.name);return x(g({},t),{function:x(g({},t.function),{parsed_arguments:Up(n)?n.$parseRaw(t.function.arguments):n?.function.strict?JSON.parse(t.function.arguments):null})})}function Sce(e,t){if(!e||!("tools"in e)||!e.tools)return!1;let n=e.tools?.find(i=>G0(i)&&i.function?.name===t.function.name);return G0(n)&&(Up(n)||n?.function.strict||!1)}function R8(e){return U0(e.response_format)?!0:e.tools?.some(t=>Up(t)||t.type==="function"&&t.function.strict===!0)??!1}function Ece(e){for(let t of e||[])if(t.type!=="function")throw new je(`Currently only \`function\` tool calls are supported; Received \`${t.type}\``)}function Dce(e){for(let t of e??[]){if(t.type!=="function")throw new je(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(t.function.strict!==!0)throw new je(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Vv=e=>e?.role==="assistant",T8=e=>e?.role==="tool";var P8,PR,AR,q0,K0,OR,Z0,ud,Y0,FR,LR,Hv,kce,Bu=class{constructor(){P8.add(this),this.controller=new AbortController,PR.set(this,void 0),AR.set(this,()=>{}),q0.set(this,()=>{}),K0.set(this,void 0),OR.set(this,()=>{}),Z0.set(this,()=>{}),ud.set(this,{}),Y0.set(this,!1),FR.set(this,!1),LR.set(this,!1),Hv.set(this,!1),ot(this,PR,new Promise((t,n)=>{ot(this,AR,t,"f"),ot(this,q0,n,"f")}),"f"),ot(this,K0,new Promise((t,n)=>{ot(this,OR,t,"f"),ot(this,Z0,n,"f")}),"f"),G(this,PR,"f").catch(()=>{}),G(this,K0,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emitFinal(),this._emit("end")},G(this,P8,"m",kce).bind(this))},0)}_connected(){this.ended||(G(this,AR,"f").call(this),this._emit("connect"))}get ended(){return G(this,Y0,"f")}get errored(){return G(this,FR,"f")}get aborted(){return G(this,LR,"f")}abort(){this.controller.abort()}on(t,n){return(G(this,ud,"f")[t]||(G(this,ud,"f")[t]=[])).push({listener:n}),this}off(t,n){let i=G(this,ud,"f")[t];if(!i)return this;let o=i.findIndex(r=>r.listener===n);return o>=0&&i.splice(o,1),this}once(t,n){return(G(this,ud,"f")[t]||(G(this,ud,"f")[t]=[])).push({listener:n,once:!0}),this}emitted(t){return new Promise((n,i)=>{ot(this,Hv,!0,"f"),t!=="error"&&this.once("error",i),this.once(t,n)})}done(){return E(this,null,function*(){ot(this,Hv,!0,"f"),yield G(this,K0,"f")})}_emit(t,...n){if(G(this,Y0,"f"))return;t==="end"&&(ot(this,Y0,!0,"f"),G(this,OR,"f").call(this));let i=G(this,ud,"f")[t];if(i&&(G(this,ud,"f")[t]=i.filter(o=>!o.once),i.forEach(({listener:o})=>o(...n))),t==="abort"){let o=n[0];!G(this,Hv,"f")&&!i?.length&&Promise.reject(o),G(this,q0,"f").call(this,o),G(this,Z0,"f").call(this,o),this._emit("end");return}if(t==="error"){let o=n[0];!G(this,Hv,"f")&&!i?.length&&Promise.reject(o),G(this,q0,"f").call(this,o),G(this,Z0,"f").call(this,o),this._emit("end")}}_emitFinal(){}};PR=new WeakMap,AR=new WeakMap,q0=new WeakMap,K0=new WeakMap,OR=new WeakMap,Z0=new WeakMap,ud=new WeakMap,Y0=new WeakMap,FR=new WeakMap,LR=new WeakMap,Hv=new WeakMap,P8=new WeakSet,kce=function(t){if(ot(this,FR,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new Oi),t instanceof Oi)return ot(this,LR,!0,"f"),this._emit("abort",t);if(t instanceof je)return this._emit("error",t);if(t instanceof Error){let n=new je(t.message);return n.cause=t,this._emit("error",n)}return this._emit("error",new je(String(t)))};function Ice(e){return typeof e.parse=="function"}var Rr,A8,NR,O8,F8,L8,Mce,Rce,fUe=10,$v=class extends Bu{constructor(){super(...arguments),Rr.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(t){this._chatCompletions.push(t),this._emit("chatCompletion",t);let n=t.choices[0]?.message;return n&&this._addMessage(n),t}_addMessage(t,n=!0){if("content"in t||(t.content=null),this.messages.push(t),n){if(this._emit("message",t),T8(t)&&t.content)this._emit("functionToolCallResult",t.content);else if(Vv(t)&&t.tool_calls)for(let i of t.tool_calls)i.type==="function"&&this._emit("functionToolCall",i.function)}}finalChatCompletion(){return E(this,null,function*(){yield this.done();let t=this._chatCompletions[this._chatCompletions.length-1];if(!t)throw new je("stream ended without producing a ChatCompletion");return t})}finalContent(){return E(this,null,function*(){return yield this.done(),G(this,Rr,"m",A8).call(this)})}finalMessage(){return E(this,null,function*(){return yield this.done(),G(this,Rr,"m",NR).call(this)})}finalFunctionToolCall(){return E(this,null,function*(){return yield this.done(),G(this,Rr,"m",O8).call(this)})}finalFunctionToolCallResult(){return E(this,null,function*(){return yield this.done(),G(this,Rr,"m",F8).call(this)})}totalUsage(){return E(this,null,function*(){return yield this.done(),G(this,Rr,"m",L8).call(this)})}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){let t=this._chatCompletions[this._chatCompletions.length-1];t&&this._emit("finalChatCompletion",t);let n=G(this,Rr,"m",NR).call(this);n&&this._emit("finalMessage",n);let i=G(this,Rr,"m",A8).call(this);i&&this._emit("finalContent",i);let o=G(this,Rr,"m",O8).call(this);o&&this._emit("finalFunctionToolCall",o);let r=G(this,Rr,"m",F8).call(this);r!=null&&this._emit("finalFunctionToolCallResult",r),this._chatCompletions.some(s=>s.usage)&&this._emit("totalUsage",G(this,Rr,"m",L8).call(this))}_createChatCompletion(t,n,i){return E(this,null,function*(){let o=i?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),G(this,Rr,"m",Mce).call(this,n);let r=yield t.chat.completions.create(x(g({},n),{stream:!1}),x(g({},i),{signal:this.controller.signal}));return this._connected(),this._addChatCompletion(W0(r,n))})}_runChatCompletion(t,n,i){return E(this,null,function*(){for(let o of n.messages)this._addMessage(o,!1);return yield this._createChatCompletion(t,n,i)})}_runTools(t,n,i){return E(this,null,function*(){let o="tool",m=n,{tool_choice:r="auto",stream:s}=m,a=Be(m,["tool_choice","stream"]),l=typeof r!="string"&&r.type==="function"&&r?.function?.name,{maxChatCompletions:c=fUe}=i||{},u=n.tools.map(_=>{if(Up(_)){if(!_.$callback)throw new je("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:_.$callback,name:_.function.name,description:_.function.description||"",parameters:_.function.parameters,parse:_.$parseRaw,strict:!0}}}return _}),h={};for(let _ of u)_.type==="function"&&(h[_.function.name||_.function.function.name]=_.function);let f="tools"in n?u.map(_=>_.type==="function"?{type:"function",function:{name:_.function.name||_.function.function.name,parameters:_.function.parameters,description:_.function.description,strict:_.function.strict}}:_):void 0;for(let _ of n.messages)this._addMessage(_,!1);for(let _=0;_<c;++_){let w=(yield this._createChatCompletion(t,x(g({},a),{tool_choice:r,tools:f,messages:[...this.messages]}),i)).choices[0]?.message;if(!w)throw new je("missing message in ChatCompletion response");if(!w.tool_calls?.length)return;for(let C of w.tool_calls){if(C.type!=="function")continue;let S=C.id,{name:I,arguments:O}=C.function,F=h[I];if(F){if(l&&l!==I){let ae=`Invalid tool_call: ${JSON.stringify(I)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:o,tool_call_id:S,content:ae});continue}}else{let ae=`Invalid tool_call: ${JSON.stringify(I)}. Available options are: ${Object.keys(h).map(se=>JSON.stringify(se)).join(", ")}. Please try again`;this._addMessage({role:o,tool_call_id:S,content:ae});continue}let H;try{H=Ice(F)?yield F.parse(O):O}catch(ae){let se=ae instanceof Error?ae.message:String(ae);this._addMessage({role:o,tool_call_id:S,content:se});continue}let j=yield F.function(H,this),re=G(this,Rr,"m",Rce).call(this,j);if(this._addMessage({role:o,tool_call_id:S,content:re}),l)return}}})}};Rr=new WeakSet,A8=function(){return G(this,Rr,"m",NR).call(this).content??null},NR=function(){let t=this.messages.length;for(;t-- >0;){let n=this.messages[t];if(Vv(n))return x(g({},n),{content:n.content??null,refusal:n.refusal??null})}throw new je("stream ended without producing a ChatCompletionMessage with role=assistant")},O8=function(){for(let t=this.messages.length-1;t>=0;t--){let n=this.messages[t];if(Vv(n)&&n?.tool_calls?.length)return n.tool_calls.filter(i=>i.type==="function").at(-1)?.function}},F8=function(){for(let t=this.messages.length-1;t>=0;t--){let n=this.messages[t];if(T8(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(i=>i.role==="assistant"&&i.tool_calls?.some(o=>o.type==="function"&&o.id===n.tool_call_id)))return n.content}},L8=function(){let t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(let{usage:n}of this._chatCompletions)n&&(t.completion_tokens+=n.completion_tokens,t.prompt_tokens+=n.prompt_tokens,t.total_tokens+=n.total_tokens);return t},Mce=function(t){if(t.n!=null&&t.n>1)throw new je("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Rce=function(t){return typeof t=="string"?t:t===void 0?"undefined":JSON.stringify(t)};var Q0=class e extends $v{static runTools(t,n,i){let o=new e,r=x(g({},i),{headers:x(g({},i?.headers),{"X-Stainless-Helper-Method":"runTools"})});return o._run(()=>o._runTools(t,n,r)),o}_addMessage(t,n=!0){super._addMessage(t,n),Vv(t)&&t.content&&this._emit("content",t.content)}};var Io={STR:1,NUM:2,ARR:4,OBJ:8,NULL:16,BOOL:32,NAN:64,INFINITY:128,MINUS_INFINITY:256,INF:384,SPECIAL:496,ATOM:499,COLLECTION:12,ALL:511},N8=class extends Error{},B8=class extends Error{};function mUe(e,t=Io.ALL){if(typeof e!="string")throw new TypeError(`expecting str, got ${typeof e}`);if(!e.trim())throw new Error(`${e} is empty`);return gUe(e.trim(),t)}var gUe=(e,t)=>{let n=e.length,i=0,o=f=>{throw new N8(`${f} at position ${i}`)},r=f=>{throw new B8(`${f} at position ${i}`)},s=()=>(h(),i>=n&&o("Unexpected end of input"),e[i]==='"'?a():e[i]==="{"?l():e[i]==="["?c():e.substring(i,i+4)==="null"||Io.NULL&t&&n-i<4&&"null".startsWith(e.substring(i))?(i+=4,null):e.substring(i,i+4)==="true"||Io.BOOL&t&&n-i<4&&"true".startsWith(e.substring(i))?(i+=4,!0):e.substring(i,i+5)==="false"||Io.BOOL&t&&n-i<5&&"false".startsWith(e.substring(i))?(i+=5,!1):e.substring(i,i+8)==="Infinity"||Io.INFINITY&t&&n-i<8&&"Infinity".startsWith(e.substring(i))?(i+=8,1/0):e.substring(i,i+9)==="-Infinity"||Io.MINUS_INFINITY&t&&1<n-i&&n-i<9&&"-Infinity".startsWith(e.substring(i))?(i+=9,-1/0):e.substring(i,i+3)==="NaN"||Io.NAN&t&&n-i<3&&"NaN".startsWith(e.substring(i))?(i+=3,NaN):u()),a=()=>{let f=i,m=!1;for(i++;i<n&&(e[i]!=='"'||m&&e[i-1]==="\\");)m=e[i]==="\\"?!m:!1,i++;if(e.charAt(i)=='"')try{return JSON.parse(e.substring(f,++i-Number(m)))}catch(_){r(String(_))}else if(Io.STR&t)try{return JSON.parse(e.substring(f,i-Number(m))+'"')}catch{return JSON.parse(e.substring(f,e.lastIndexOf("\\"))+'"')}o("Unterminated string literal")},l=()=>{i++,h();let f={};try{for(;e[i]!=="}";){if(h(),i>=n&&Io.OBJ&t)return f;let m=a();h(),i++;try{let _=s();Object.defineProperty(f,m,{value:_,writable:!0,enumerable:!0,configurable:!0})}catch(_){if(Io.OBJ&t)return f;throw _}h(),e[i]===","&&i++}}catch{if(Io.OBJ&t)return f;o("Expected '}' at end of object")}return i++,f},c=()=>{i++;let f=[];try{for(;e[i]!=="]";)f.push(s()),h(),e[i]===","&&i++}catch{if(Io.ARR&t)return f;o("Expected ']' at end of array")}return i++,f},u=()=>{if(i===0){e==="-"&&Io.NUM&t&&o("Not sure what '-' is");try{return JSON.parse(e)}catch(m){if(Io.NUM&t)try{return e[e.length-1]==="."?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch{}r(String(m))}}let f=i;for(e[i]==="-"&&i++;e[i]&&!",]}".includes(e[i]);)i++;i==n&&!(Io.NUM&t)&&o("Unterminated number literal");try{return JSON.parse(e.substring(f,i))}catch{e.substring(f,i)==="-"&&Io.NUM&t&&o("Not sure what '-' is");try{return JSON.parse(e.substring(f,e.lastIndexOf("e")))}catch(_){r(String(_))}}},h=()=>{for(;i<n&&` 
\r	`.includes(e[i]);)i++};return s()},z8=e=>mUe(e,Io.ALL^Io.NUM);var yo,hd,jv,zu,V8,BR,H8,$8,j8,zR,G8,Tce,Wp=class e extends $v{constructor(t){super(),yo.add(this),hd.set(this,void 0),jv.set(this,void 0),zu.set(this,void 0),ot(this,hd,t,"f"),ot(this,jv,[],"f")}get currentChatCompletionSnapshot(){return G(this,zu,"f")}static fromReadableStream(t){let n=new e(null);return n._run(()=>n._fromReadableStream(t)),n}static createChatCompletion(t,n,i){let o=new e(n);return o._run(()=>o._runChatCompletion(t,x(g({},n),{stream:!0}),x(g({},i),{headers:x(g({},i?.headers),{"X-Stainless-Helper-Method":"stream"})}))),o}_createChatCompletion(t,n,i){return E(this,null,function*(){Wn(e.prototype,this,"_createChatCompletion");let o=i?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),G(this,yo,"m",V8).call(this);let r=yield t.chat.completions.create(x(g({},n),{stream:!0}),x(g({},i),{signal:this.controller.signal}));this._connected();try{for(var s=lt(r),a,l,c;a=!(l=yield s.next()).done;a=!1){let u=l.value;G(this,yo,"m",H8).call(this,u)}}catch{c=[l]}finally{try{a&&(l=s.return)&&(yield l.call(s))}finally{if(c)throw c[0]}}if(r.controller.signal?.aborted)throw new Oi;return this._addChatCompletion(G(this,yo,"m",zR).call(this))})}_fromReadableStream(t,n){return E(this,null,function*(){let i=n?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),G(this,yo,"m",V8).call(this),this._connected();let o=ec.fromReadableStream(t,this.controller),r;try{for(var s=lt(o),a,l,c;a=!(l=yield s.next()).done;a=!1){let u=l.value;r&&r!==u.id&&this._addChatCompletion(G(this,yo,"m",zR).call(this)),G(this,yo,"m",H8).call(this,u),r=u.id}}catch{c=[l]}finally{try{a&&(l=s.return)&&(yield l.call(s))}finally{if(c)throw c[0]}}if(o.controller.signal?.aborted)throw new Oi;return this._addChatCompletion(G(this,yo,"m",zR).call(this))})}[(hd=new WeakMap,jv=new WeakMap,zu=new WeakMap,yo=new WeakSet,V8=function(){this.ended||ot(this,zu,void 0,"f")},BR=function(n){let i=G(this,jv,"f")[n.index];return i||(i={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},G(this,jv,"f")[n.index]=i,i)},H8=function(n){if(this.ended)return;let i=G(this,yo,"m",Tce).call(this,n);this._emit("chunk",n,i);for(let o of n.choices){let r=i.choices[o.index];o.delta.content!=null&&r.message?.role==="assistant"&&r.message?.content&&(this._emit("content",o.delta.content,r.message.content),this._emit("content.delta",{delta:o.delta.content,snapshot:r.message.content,parsed:r.message.parsed})),o.delta.refusal!=null&&r.message?.role==="assistant"&&r.message?.refusal&&this._emit("refusal.delta",{delta:o.delta.refusal,snapshot:r.message.refusal}),o.logprobs?.content!=null&&r.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:o.logprobs?.content,snapshot:r.logprobs?.content??[]}),o.logprobs?.refusal!=null&&r.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:o.logprobs?.refusal,snapshot:r.logprobs?.refusal??[]});let s=G(this,yo,"m",BR).call(this,r);r.finish_reason&&(G(this,yo,"m",j8).call(this,r),s.current_tool_call_index!=null&&G(this,yo,"m",$8).call(this,r,s.current_tool_call_index));for(let a of o.delta.tool_calls??[])s.current_tool_call_index!==a.index&&(G(this,yo,"m",j8).call(this,r),s.current_tool_call_index!=null&&G(this,yo,"m",$8).call(this,r,s.current_tool_call_index)),s.current_tool_call_index=a.index;for(let a of o.delta.tool_calls??[]){let l=r.message.tool_calls?.[a.index];l?.type&&(l?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:l.function?.name,index:a.index,arguments:l.function.arguments,parsed_arguments:l.function.parsed_arguments,arguments_delta:a.function?.arguments??""}):(l?.type,void 0))}}},$8=function(n,i){if(G(this,yo,"m",BR).call(this,n).done_tool_calls.has(i))return;let r=n.message.tool_calls?.[i];if(!r)throw new Error("no tool call snapshot");if(!r.type)throw new Error("tool call snapshot missing `type`");if(r.type==="function"){let s=G(this,hd,"f")?.tools?.find(a=>G0(a)&&a.function.name===r.function.name);this._emit("tool_calls.function.arguments.done",{name:r.function.name,index:i,arguments:r.function.arguments,parsed_arguments:Up(s)?s.$parseRaw(r.function.arguments):s?.function.strict?JSON.parse(r.function.arguments):null})}else r.type},j8=function(n){let i=G(this,yo,"m",BR).call(this,n);if(n.message.content&&!i.content_done){i.content_done=!0;let o=G(this,yo,"m",G8).call(this);this._emit("content.done",{content:n.message.content,parsed:o?o.$parseRaw(n.message.content):null})}n.message.refusal&&!i.refusal_done&&(i.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!i.logprobs_content_done&&(i.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!i.logprobs_refusal_done&&(i.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},zR=function(){if(this.ended)throw new je("stream has ended, this shouldn't happen");let n=G(this,zu,"f");if(!n)throw new je("request ended without sending any chunks");return ot(this,zu,void 0,"f"),ot(this,jv,[],"f"),vUe(n,G(this,hd,"f"))},G8=function(){let n=G(this,hd,"f")?.response_format;return U0(n)?n:null},Tce=function(n){var i,o,r,s;let a=G(this,zu,"f"),u=n,{choices:l}=u,c=Be(u,["choices"]);a?Object.assign(a,c):a=ot(this,zu,x(g({},c),{choices:[]}),"f");for(let y of n.choices){let w=y,{delta:C,finish_reason:S,index:I,logprobs:O=null}=w,F=Be(w,["delta","finish_reason","index","logprobs"]);let H=a.choices[I];if(H||(H=a.choices[I]=g({finish_reason:S,index:I,message:{},logprobs:O},F)),O)if(!H.logprobs)H.logprobs=Object.assign({},O);else{let h=O,{content:De,refusal:Ne}=h,Pe=Be(h,["content","refusal"]);Object.assign(H.logprobs,Pe),De&&((i=H.logprobs).content??(i.content=[]),H.logprobs.content.push(...De)),Ne&&((o=H.logprobs).refusal??(o.refusal=[]),H.logprobs.refusal.push(...Ne))}if(S&&(H.finish_reason=S,G(this,hd,"f")&&R8(G(this,hd,"f")))){if(S==="length")throw new Lv;if(S==="content_filter")throw new Nv}if(Object.assign(H,F),!C)continue;let f=C,{content:j,refusal:re,function_call:ae,role:se,tool_calls:Te}=f,ue=Be(f,["content","refusal","function_call","role","tool_calls"]);if(Object.assign(H.message,ue),re&&(H.message.refusal=(H.message.refusal||"")+re),se&&(H.message.role=se),ae&&(H.message.function_call?(ae.name&&(H.message.function_call.name=ae.name),ae.arguments&&((r=H.message.function_call).arguments??(r.arguments=""),H.message.function_call.arguments+=ae.arguments)):H.message.function_call=ae),j&&(H.message.content=(H.message.content||"")+j,!H.message.refusal&&G(this,yo,"m",G8).call(this)&&(H.message.parsed=z8(H.message.content))),Te){H.message.tool_calls||(H.message.tool_calls=[]);for(let m of Te){let _=m,{index:De,id:Ne,type:Pe,function:Le}=_,mt=Be(_,["index","id","type","function"]);let ve=(s=H.message.tool_calls)[De]??(s[De]={});Object.assign(ve,mt),Ne&&(ve.id=Ne),Pe&&(ve.type=Pe),Le&&(ve.function??(ve.function={name:Le.name??"",arguments:""})),Le?.name&&(ve.function.name=Le.name),Le?.arguments&&(ve.function.arguments+=Le.arguments,Sce(G(this,hd,"f"),ve)&&(ve.function.parsed_arguments=z8(ve.function.arguments)))}}}return a},Symbol.asyncIterator)](){let t=[],n=[],i=!1;return this.on("chunk",o=>{let r=n.shift();r?r.resolve(o):t.push(o)}),this.on("end",()=>{i=!0;for(let o of n)o.resolve(void 0);n.length=0}),this.on("abort",o=>{i=!0;for(let r of n)r.reject(o);n.length=0}),this.on("error",o=>{i=!0;for(let r of n)r.reject(o);n.length=0}),{next:()=>E(this,null,function*(){return t.length?{value:t.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((r,s)=>n.push({resolve:r,reject:s})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0})}),return:()=>E(this,null,function*(){return this.abort(),{value:void 0,done:!0}})}}toReadableStream(){return new ec(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};function vUe(e,t){let c=e,{id:n,choices:i,created:o,model:r,system_fingerprint:s}=c,a=Be(c,["id","choices","created","model","system_fingerprint"]),l=g(x(g({},a),{id:n,choices:i.map(y=>{var w=y,{message:u,finish_reason:h,index:f,logprobs:m}=w,_=Be(w,["message","finish_reason","index","logprobs"]);if(!h)throw new je(`missing finish_reason for choice ${f}`);let H=u,{content:C=null,function_call:S,tool_calls:I}=H,O=Be(H,["content","function_call","tool_calls"]),F=u.role;if(!F)throw new je(`missing role for choice ${f}`);if(S){let{arguments:j,name:re}=S;if(j==null)throw new je(`missing function_call.arguments for choice ${f}`);if(!re)throw new je(`missing function_call.name for choice ${f}`);return x(g({},_),{message:{content:C,function_call:{arguments:j,name:re},role:F,refusal:u.refusal??null},finish_reason:h,index:f,logprobs:m})}return I?x(g({},_),{index:f,finish_reason:h,logprobs:m,message:x(g({},O),{role:F,content:C,refusal:u.refusal??null,tool_calls:I.map((j,re)=>{let Le=j,{function:ae,type:se,id:Te}=Le,ue=Be(Le,["function","type","id"]),mt=ae||{},{arguments:De,name:Ne}=mt,Pe=Be(mt,["arguments","name"]);if(Te==null)throw new je(`missing choices[${f}].tool_calls[${re}].id
${VR(e)}`);if(se==null)throw new je(`missing choices[${f}].tool_calls[${re}].type
${VR(e)}`);if(Ne==null)throw new je(`missing choices[${f}].tool_calls[${re}].function.name
${VR(e)}`);if(De==null)throw new je(`missing choices[${f}].tool_calls[${re}].function.arguments
${VR(e)}`);return x(g({},ue),{id:Te,type:se,function:x(g({},Pe),{name:Ne,arguments:De})})})})}):x(g({},_),{message:x(g({},O),{content:C,role:F,refusal:u.refusal??null}),finish_reason:h,index:f,logprobs:m})}),created:o,model:r,object:"chat.completion"}),s?{system_fingerprint:s}:{});return xce(l,t)}function VR(e){return JSON.stringify(e)}var J0=class e extends Wp{static fromReadableStream(t){let n=new e(null);return n._run(()=>n._fromReadableStream(t)),n}static runTools(t,n,i){let o=new e(n),r=x(g({},i),{headers:x(g({},i?.headers),{"X-Stainless-Helper-Method":"runTools"})});return o._run(()=>o._runTools(t,n,r)),o}};var pd=class extends oe{constructor(){super(...arguments),this.messages=new Gp(this._client)}create(t,n){return this._client.post("/chat/completions",x(g({body:t},n),{stream:t.stream??!1}))}retrieve(t,n){return this._client.get(ne`/chat/completions/${t}`,n)}update(t,n,i){return this._client.post(ne`/chat/completions/${t}`,g({body:n},i))}list(t={},n){return this._client.getAPIList("/chat/completions",Wt,g({query:t},n))}delete(t,n){return this._client.delete(ne`/chat/completions/${t}`,n)}parse(t,n){return Dce(t.tools),this._client.chat.completions.create(t,x(g({},n),{headers:x(g({},n?.headers),{"X-Stainless-Helper-Method":"chat.completions.parse"})}))._thenUnwrap(i=>W0(i,t))}runTools(t,n){return t.stream?J0.runTools(this._client,t,n):Q0.runTools(this._client,t,n)}stream(t,n){return Wp.createChatCompletion(this._client,t,n)}};pd.Messages=Gp;var X0=(()=>{class e extends oe{constructor(){super(...arguments),this.completions=new pd(this._client)}}return e.Completions=pd,e})();var Pce=Symbol("brand.privateNullableHeaders");function*yUe(e){if(!e)return;if(Pce in e){let{values:i,nulls:o}=e;yield*co(i.entries());for(let r of o)yield[r,null];return}let t=!1,n;e instanceof Headers?n=e.entries():u8(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let i of n){let o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");let r=u8(i[1])?i[1]:[i[1]],s=!1;for(let a of r)a!==void 0&&(t&&!s&&(s=!0,yield[o,null]),yield[o,a])}}var ge=e=>{let t=new Headers,n=new Set;for(let i of e){let o=new Set;for(let[r,s]of yUe(i)){let a=r.toLowerCase();o.has(a)||(t.delete(r),o.add(a)),s===null?(t.delete(r),n.add(a)):(t.append(r,s),n.delete(a))}}return{[Pce]:!0,values:t,nulls:n}};var Gv=class extends oe{create(t,n){return this._client.post("/audio/speech",x(g({body:t},n),{headers:ge([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0}))}};var Uv=class extends oe{create(t,n){return this._client.post("/audio/transcriptions",Ms(x(g({body:t},n),{stream:t.stream??!1,__metadata:{model:t.model}}),this._client))}};var Wv=class extends oe{create(t,n){return this._client.post("/audio/translations",Ms(x(g({body:t},n),{__metadata:{model:t.model}}),this._client))}};var ex=(()=>{class e extends oe{constructor(){super(...arguments),this.transcriptions=new Uv(this._client),this.translations=new Wv(this._client),this.speech=new Gv(this._client)}}return e.Transcriptions=Uv,e.Translations=Wv,e.Speech=Gv,e})();var qp=class extends oe{create(t,n){return this._client.post("/batches",g({body:t},n))}retrieve(t,n){return this._client.get(ne`/batches/${t}`,n)}list(t={},n){return this._client.getAPIList("/batches",Wt,g({query:t},n))}cancel(t,n){return this._client.post(ne`/batches/${t}/cancel`,n)}};var qv=class extends oe{create(t,n){return this._client.post("/assistants",x(g({body:t},n),{headers:ge([{"OpenAI-Beta":"assistants=v2"},n?.headers])}))}retrieve(t,n){return this._client.get(ne`/assistants/${t}`,x(g({},n),{headers:ge([{"OpenAI-Beta":"assistants=v2"},n?.headers])}))}update(t,n,i){return this._client.post(ne`/assistants/${t}`,x(g({body:n},i),{headers:ge([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}list(t={},n){return this._client.getAPIList("/assistants",Wt,x(g({query:t},n),{headers:ge([{"OpenAI-Beta":"assistants=v2"},n?.headers])}))}delete(t,n){return this._client.delete(ne`/assistants/${t}`,x(g({},n),{headers:ge([{"OpenAI-Beta":"assistants=v2"},n?.headers])}))}};var Kv=class extends oe{create(t,n){return this._client.post("/realtime/sessions",x(g({body:t},n),{headers:ge([{"OpenAI-Beta":"assistants=v2"},n?.headers])}))}};var Zv=class extends oe{create(t,n){return this._client.post("/realtime/transcription_sessions",x(g({body:t},n),{headers:ge([{"OpenAI-Beta":"assistants=v2"},n?.headers])}))}};var HR=(()=>{class e extends oe{constructor(){super(...arguments),this.sessions=new Kv(this._client),this.transcriptionSessions=new Zv(this._client)}}return e.Sessions=Kv,e.TranscriptionSessions=Zv,e})();var Yv=class extends oe{create(t,n){return this._client.post("/chatkit/sessions",x(g({body:t},n),{headers:ge([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])}))}cancel(t,n){return this._client.post(ne`/chatkit/sessions/${t}/cancel`,x(g({},n),{headers:ge([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])}))}};var Qv=class extends oe{retrieve(t,n){return this._client.get(ne`/chatkit/threads/${t}`,x(g({},n),{headers:ge([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])}))}list(t={},n){return this._client.getAPIList("/chatkit/threads",dd,x(g({query:t},n),{headers:ge([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])}))}delete(t,n){return this._client.delete(ne`/chatkit/threads/${t}`,x(g({},n),{headers:ge([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])}))}listItems(t,n={},i){return this._client.getAPIList(ne`/chatkit/threads/${t}/items`,dd,x(g({query:n},i),{headers:ge([{"OpenAI-Beta":"chatkit_beta=v1"},i?.headers])}))}};var $R=(()=>{class e extends oe{constructor(){super(...arguments),this.sessions=new Yv(this._client),this.threads=new Qv(this._client)}}return e.Sessions=Yv,e.Threads=Qv,e})();var Jv=class extends oe{create(t,n,i){return this._client.post(ne`/threads/${t}/messages`,x(g({body:n},i),{headers:ge([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}retrieve(t,n,i){let{thread_id:o}=n;return this._client.get(ne`/threads/${o}/messages/${t}`,x(g({},i),{headers:ge([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}update(t,n,i){let s=n,{thread_id:o}=s,r=Be(s,["thread_id"]);return this._client.post(ne`/threads/${o}/messages/${t}`,x(g({body:r},i),{headers:ge([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}list(t,n={},i){return this._client.getAPIList(ne`/threads/${t}/messages`,Wt,x(g({query:n},i),{headers:ge([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}delete(t,n,i){let{thread_id:o}=n;return this._client.delete(ne`/threads/${o}/messages/${t}`,x(g({},i),{headers:ge([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}};var Xv=class extends oe{retrieve(t,n,i){let a=n,{thread_id:o,run_id:r}=a,s=Be(a,["thread_id","run_id"]);return this._client.get(ne`/threads/${o}/runs/${r}/steps/${t}`,x(g({query:s},i),{headers:ge([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}list(t,n,i){let s=n,{thread_id:o}=s,r=Be(s,["thread_id"]);return this._client.getAPIList(ne`/threads/${o}/runs/${t}/steps`,Wt,x(g({query:r},i),{headers:ge([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}};var Ace=e=>{if(typeof Buffer<"u"){let t=Buffer.from(e,"base64");return Array.from(new Float32Array(t.buffer,t.byteOffset,t.length/Float32Array.BYTES_PER_ELEMENT))}else{let t=atob(e),n=t.length,i=new Uint8Array(n);for(let o=0;o<n;o++)i[o]=t.charCodeAt(o);return Array.from(new Float32Array(i.buffer))}};var Vu=e=>{if(typeof globalThis.process<"u")return globalThis.process.env?.[e]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(e)?.trim()};var Yo,Zp,U8,nc,jR,Wa,Yp,e_,Kp,WR,Rs,GR,UR,ix,tx,nx,Oce,Fce,Lce,Nce,Bce,zce,Vce,fd=class extends Bu{constructor(){super(...arguments),Yo.add(this),U8.set(this,[]),nc.set(this,{}),jR.set(this,{}),Wa.set(this,void 0),Yp.set(this,void 0),e_.set(this,void 0),Kp.set(this,void 0),WR.set(this,void 0),Rs.set(this,void 0),GR.set(this,void 0),UR.set(this,void 0),ix.set(this,void 0)}[(U8=new WeakMap,nc=new WeakMap,jR=new WeakMap,Wa=new WeakMap,Yp=new WeakMap,e_=new WeakMap,Kp=new WeakMap,WR=new WeakMap,Rs=new WeakMap,GR=new WeakMap,UR=new WeakMap,ix=new WeakMap,Yo=new WeakSet,Symbol.asyncIterator)](){let t=[],n=[],i=!1;return this.on("event",o=>{let r=n.shift();r?r.resolve(o):t.push(o)}),this.on("end",()=>{i=!0;for(let o of n)o.resolve(void 0);n.length=0}),this.on("abort",o=>{i=!0;for(let r of n)r.reject(o);n.length=0}),this.on("error",o=>{i=!0;for(let r of n)r.reject(o);n.length=0}),{next:()=>E(this,null,function*(){return t.length?{value:t.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((r,s)=>n.push({resolve:r,reject:s})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0})}),return:()=>E(this,null,function*(){return this.abort(),{value:void 0,done:!0}})}}static fromReadableStream(t){let n=new Zp;return n._run(()=>n._fromReadableStream(t)),n}_fromReadableStream(t,n){return E(this,null,function*(){let i=n?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),this._connected();let o=ec.fromReadableStream(t,this.controller);try{for(var r=lt(o),s,a,l;s=!(a=yield r.next()).done;s=!1){let c=a.value;G(this,Yo,"m",tx).call(this,c)}}catch{l=[a]}finally{try{s&&(a=r.return)&&(yield a.call(r))}finally{if(l)throw l[0]}}if(o.controller.signal?.aborted)throw new Oi;return this._addRun(G(this,Yo,"m",nx).call(this))})}toReadableStream(){return new ec(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(t,n,i,o){let r=new Zp;return r._run(()=>r._runToolAssistantStream(t,n,i,x(g({},o),{headers:x(g({},o?.headers),{"X-Stainless-Helper-Method":"stream"})}))),r}_createToolAssistantStream(t,n,i,o){return E(this,null,function*(){let r=o?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));let s=x(g({},i),{stream:!0}),a=yield t.submitToolOutputs(n,s,x(g({},o),{signal:this.controller.signal}));this._connected();try{for(var l=lt(a),c,u,h;c=!(u=yield l.next()).done;c=!1){let f=u.value;G(this,Yo,"m",tx).call(this,f)}}catch{h=[u]}finally{try{c&&(u=l.return)&&(yield u.call(l))}finally{if(h)throw h[0]}}if(a.controller.signal?.aborted)throw new Oi;return this._addRun(G(this,Yo,"m",nx).call(this))})}static createThreadAssistantStream(t,n,i){let o=new Zp;return o._run(()=>o._threadAssistantStream(t,n,x(g({},i),{headers:x(g({},i?.headers),{"X-Stainless-Helper-Method":"stream"})}))),o}static createAssistantStream(t,n,i,o){let r=new Zp;return r._run(()=>r._runAssistantStream(t,n,i,x(g({},o),{headers:x(g({},o?.headers),{"X-Stainless-Helper-Method":"stream"})}))),r}currentEvent(){return G(this,GR,"f")}currentRun(){return G(this,UR,"f")}currentMessageSnapshot(){return G(this,Wa,"f")}currentRunStepSnapshot(){return G(this,ix,"f")}finalRunSteps(){return E(this,null,function*(){return yield this.done(),Object.values(G(this,nc,"f"))})}finalMessages(){return E(this,null,function*(){return yield this.done(),Object.values(G(this,jR,"f"))})}finalRun(){return E(this,null,function*(){if(yield this.done(),!G(this,Yp,"f"))throw Error("Final run was not received.");return G(this,Yp,"f")})}_createThreadAssistantStream(t,n,i){return E(this,null,function*(){let o=i?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));let r=x(g({},n),{stream:!0}),s=yield t.createAndRun(r,x(g({},i),{signal:this.controller.signal}));this._connected();try{for(var a=lt(s),l,c,u;l=!(c=yield a.next()).done;l=!1){let h=c.value;G(this,Yo,"m",tx).call(this,h)}}catch{u=[c]}finally{try{l&&(c=a.return)&&(yield c.call(a))}finally{if(u)throw u[0]}}if(s.controller.signal?.aborted)throw new Oi;return this._addRun(G(this,Yo,"m",nx).call(this))})}_createAssistantStream(t,n,i,o){return E(this,null,function*(){let r=o?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));let s=x(g({},i),{stream:!0}),a=yield t.create(n,s,x(g({},o),{signal:this.controller.signal}));this._connected();try{for(var l=lt(a),c,u,h;c=!(u=yield l.next()).done;c=!1){let f=u.value;G(this,Yo,"m",tx).call(this,f)}}catch{h=[u]}finally{try{c&&(u=l.return)&&(yield u.call(l))}finally{if(h)throw h[0]}}if(a.controller.signal?.aborted)throw new Oi;return this._addRun(G(this,Yo,"m",nx).call(this))})}static accumulateDelta(t,n){for(let[i,o]of Object.entries(n)){if(!t.hasOwnProperty(i)){t[i]=o;continue}let r=t[i];if(r==null){t[i]=o;continue}if(i==="index"||i==="type"){t[i]=o;continue}if(typeof r=="string"&&typeof o=="string")r+=o;else if(typeof r=="number"&&typeof o=="number")r+=o;else if(L0(r)&&L0(o))r=this.accumulateDelta(r,o);else if(Array.isArray(r)&&Array.isArray(o)){if(r.every(s=>typeof s=="string"||typeof s=="number")){r.push(...o);continue}for(let s of o){if(!L0(s))throw new Error(`Expected array delta entry to be an object but got: ${s}`);let a=s.index;if(a==null)throw console.error(s),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);let l=r[a];l==null?r.push(s):r[a]=this.accumulateDelta(l,s)}continue}else throw Error(`Unhandled record type: ${i}, deltaValue: ${o}, accValue: ${r}`);t[i]=r}return t}_addRun(t){return t}_threadAssistantStream(t,n,i){return E(this,null,function*(){return yield this._createThreadAssistantStream(n,t,i)})}_runAssistantStream(t,n,i,o){return E(this,null,function*(){return yield this._createAssistantStream(n,t,i,o)})}_runToolAssistantStream(t,n,i,o){return E(this,null,function*(){return yield this._createToolAssistantStream(n,t,i,o)})}};Zp=fd,tx=function(t){if(!this.ended)switch(ot(this,GR,t,"f"),G(this,Yo,"m",Lce).call(this,t),t.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":G(this,Yo,"m",Vce).call(this,t);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":G(this,Yo,"m",Fce).call(this,t);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":G(this,Yo,"m",Oce).call(this,t);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier");default:}},nx=function(){if(this.ended)throw new je("stream has ended, this shouldn't happen");if(!G(this,Yp,"f"))throw Error("Final run has not been received");return G(this,Yp,"f")},Oce=function(t){let[n,i]=G(this,Yo,"m",Bce).call(this,t,G(this,Wa,"f"));ot(this,Wa,n,"f"),G(this,jR,"f")[n.id]=n;for(let o of i){let r=n.content[o.index];r?.type=="text"&&this._emit("textCreated",r.text)}switch(t.event){case"thread.message.created":this._emit("messageCreated",t.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",t.data.delta,n),t.data.delta.content)for(let o of t.data.delta.content){if(o.type=="text"&&o.text){let r=o.text,s=n.content[o.index];if(s&&s.type=="text")this._emit("textDelta",r,s.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(o.index!=G(this,e_,"f")){if(G(this,Kp,"f"))switch(G(this,Kp,"f").type){case"text":this._emit("textDone",G(this,Kp,"f").text,G(this,Wa,"f"));break;case"image_file":this._emit("imageFileDone",G(this,Kp,"f").image_file,G(this,Wa,"f"));break}ot(this,e_,o.index,"f")}ot(this,Kp,n.content[o.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(G(this,e_,"f")!==void 0){let o=t.data.content[G(this,e_,"f")];if(o)switch(o.type){case"image_file":this._emit("imageFileDone",o.image_file,G(this,Wa,"f"));break;case"text":this._emit("textDone",o.text,G(this,Wa,"f"));break}}G(this,Wa,"f")&&this._emit("messageDone",t.data),ot(this,Wa,void 0,"f")}},Fce=function(t){let n=G(this,Yo,"m",Nce).call(this,t);switch(ot(this,ix,n,"f"),t.event){case"thread.run.step.created":this._emit("runStepCreated",t.data);break;case"thread.run.step.delta":let i=t.data.delta;if(i.step_details&&i.step_details.type=="tool_calls"&&i.step_details.tool_calls&&n.step_details.type=="tool_calls")for(let r of i.step_details.tool_calls)r.index==G(this,WR,"f")?this._emit("toolCallDelta",r,n.step_details.tool_calls[r.index]):(G(this,Rs,"f")&&this._emit("toolCallDone",G(this,Rs,"f")),ot(this,WR,r.index,"f"),ot(this,Rs,n.step_details.tool_calls[r.index],"f"),G(this,Rs,"f")&&this._emit("toolCallCreated",G(this,Rs,"f")));this._emit("runStepDelta",t.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ot(this,ix,void 0,"f"),t.data.step_details.type=="tool_calls"&&G(this,Rs,"f")&&(this._emit("toolCallDone",G(this,Rs,"f")),ot(this,Rs,void 0,"f")),this._emit("runStepDone",t.data,n);break;case"thread.run.step.in_progress":break}},Lce=function(t){G(this,U8,"f").push(t),this._emit("event",t)},Nce=function(t){switch(t.event){case"thread.run.step.created":return G(this,nc,"f")[t.data.id]=t.data,t.data;case"thread.run.step.delta":let n=G(this,nc,"f")[t.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let i=t.data;if(i.delta){let o=Zp.accumulateDelta(n,i.delta);G(this,nc,"f")[t.data.id]=o}return G(this,nc,"f")[t.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":G(this,nc,"f")[t.data.id]=t.data;break}if(G(this,nc,"f")[t.data.id])return G(this,nc,"f")[t.data.id];throw new Error("No snapshot available")},Bce=function(t,n){let i=[];switch(t.event){case"thread.message.created":return[t.data,i];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let o=t.data;if(o.delta.content)for(let r of o.delta.content)if(r.index in n.content){let s=n.content[r.index];n.content[r.index]=G(this,Yo,"m",zce).call(this,r,s)}else n.content[r.index]=r,i.push(r);return[n,i];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,i];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},zce=function(t,n){return Zp.accumulateDelta(n,t)},Vce=function(t){switch(ot(this,UR,t.data,"f"),t.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":ot(this,Yp,t.data,"f"),G(this,Rs,"f")&&(this._emit("toolCallDone",G(this,Rs,"f")),ot(this,Rs,void 0,"f"));break;case"thread.run.cancelling":break}};var qR=(()=>{class e extends oe{constructor(){super(...arguments),this.steps=new Xv(this._client)}create(n,i,o){let a=i,{include:r}=a,s=Be(a,["include"]);return this._client.post(ne`/threads/${n}/runs`,x(g({query:{include:r},body:s},o),{headers:ge([{"OpenAI-Beta":"assistants=v2"},o?.headers]),stream:i.stream??!1}))}retrieve(n,i,o){let{thread_id:r}=i;return this._client.get(ne`/threads/${r}/runs/${n}`,x(g({},o),{headers:ge([{"OpenAI-Beta":"assistants=v2"},o?.headers])}))}update(n,i,o){let a=i,{thread_id:r}=a,s=Be(a,["thread_id"]);return this._client.post(ne`/threads/${r}/runs/${n}`,x(g({body:s},o),{headers:ge([{"OpenAI-Beta":"assistants=v2"},o?.headers])}))}list(n,i={},o){return this._client.getAPIList(ne`/threads/${n}/runs`,Wt,x(g({query:i},o),{headers:ge([{"OpenAI-Beta":"assistants=v2"},o?.headers])}))}cancel(n,i,o){let{thread_id:r}=i;return this._client.post(ne`/threads/${r}/runs/${n}/cancel`,x(g({},o),{headers:ge([{"OpenAI-Beta":"assistants=v2"},o?.headers])}))}createAndPoll(n,i,o){return E(this,null,function*(){let r=yield this.create(n,i,o);return yield this.poll(r.id,{thread_id:n},o)})}createAndStream(n,i,o){return fd.createAssistantStream(n,this._client.beta.threads.runs,i,o)}poll(n,i,o){return E(this,null,function*(){let r=ge([o?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":o?.pollIntervalMs?.toString()??void 0}]);for(;;){let{data:s,response:a}=yield this.retrieve(n,i,x(g({},o),{headers:g(g({},o?.headers),r)})).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let l=5e3;if(o?.pollIntervalMs)l=o.pollIntervalMs;else{let c=a.headers.get("openai-poll-after-ms");if(c){let u=parseInt(c);isNaN(u)||(l=u)}}yield Jl(l);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}})}stream(n,i,o){return fd.createAssistantStream(n,this._client.beta.threads.runs,i,o)}submitToolOutputs(n,i,o){let a=i,{thread_id:r}=a,s=Be(a,["thread_id"]);return this._client.post(ne`/threads/${r}/runs/${n}/submit_tool_outputs`,x(g({body:s},o),{headers:ge([{"OpenAI-Beta":"assistants=v2"},o?.headers]),stream:i.stream??!1}))}submitToolOutputsAndPoll(n,i,o){return E(this,null,function*(){let r=yield this.submitToolOutputs(n,i,o);return yield this.poll(r.id,i,o)})}submitToolOutputsStream(n,i,o){return fd.createToolAssistantStream(n,this._client.beta.threads.runs,i,o)}}return e.Steps=Xv,e})();var KR=(()=>{class e extends oe{constructor(){super(...arguments),this.runs=new qR(this._client),this.messages=new Jv(this._client)}create(n={},i){return this._client.post("/threads",x(g({body:n},i),{headers:ge([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}retrieve(n,i){return this._client.get(ne`/threads/${n}`,x(g({},i),{headers:ge([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}update(n,i,o){return this._client.post(ne`/threads/${n}`,x(g({body:i},o),{headers:ge([{"OpenAI-Beta":"assistants=v2"},o?.headers])}))}delete(n,i){return this._client.delete(ne`/threads/${n}`,x(g({},i),{headers:ge([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}createAndRun(n,i){return this._client.post("/threads/runs",x(g({body:n},i),{headers:ge([{"OpenAI-Beta":"assistants=v2"},i?.headers]),stream:n.stream??!1}))}createAndRunPoll(n,i){return E(this,null,function*(){let o=yield this.createAndRun(n,i);return yield this.runs.poll(o.id,{thread_id:o.thread_id},i)})}createAndRunStream(n,i){return fd.createThreadAssistantStream(n,this._client.beta.threads,i)}}return e.Runs=qR,e.Messages=Jv,e})();var ox=(()=>{class e extends oe{constructor(){super(...arguments),this.realtime=new HR(this._client),this.chatkit=new $R(this._client),this.assistants=new qv(this._client),this.threads=new KR(this._client)}}return e.Realtime=HR,e.ChatKit=$R,e.Assistants=qv,e.Threads=KR,e})();var Qp=class extends oe{create(t,n){return this._client.post("/completions",x(g({body:t},n),{stream:t.stream??!1}))}};var t_=class extends oe{retrieve(t,n,i){let{container_id:o}=n;return this._client.get(ne`/containers/${o}/files/${t}/content`,x(g({},i),{headers:ge([{Accept:"application/binary"},i?.headers]),__binaryResponse:!0}))}};var ZR=(()=>{class e extends oe{constructor(){super(...arguments),this.content=new t_(this._client)}create(n,i,o){return this._client.post(ne`/containers/${n}/files`,Ms(g({body:i},o),this._client))}retrieve(n,i,o){let{container_id:r}=i;return this._client.get(ne`/containers/${r}/files/${n}`,o)}list(n,i={},o){return this._client.getAPIList(ne`/containers/${n}/files`,Wt,g({query:i},o))}delete(n,i,o){let{container_id:r}=i;return this._client.delete(ne`/containers/${r}/files/${n}`,x(g({},o),{headers:ge([{Accept:"*/*"},o?.headers])}))}}return e.Content=t_,e})();var rx=(()=>{class e extends oe{constructor(){super(...arguments),this.files=new ZR(this._client)}create(n,i){return this._client.post("/containers",g({body:n},i))}retrieve(n,i){return this._client.get(ne`/containers/${n}`,i)}list(n={},i){return this._client.getAPIList("/containers",Wt,g({query:n},i))}delete(n,i){return this._client.delete(ne`/containers/${n}`,x(g({},i),{headers:ge([{Accept:"*/*"},i?.headers])}))}}return e.Files=ZR,e})();var n_=class extends oe{create(t,n,i){let s=n,{include:o}=s,r=Be(s,["include"]);return this._client.post(ne`/conversations/${t}/items`,g({query:{include:o},body:r},i))}retrieve(t,n,i){let s=n,{conversation_id:o}=s,r=Be(s,["conversation_id"]);return this._client.get(ne`/conversations/${o}/items/${t}`,g({query:r},i))}list(t,n={},i){return this._client.getAPIList(ne`/conversations/${t}/items`,dd,g({query:n},i))}delete(t,n,i){let{conversation_id:o}=n;return this._client.delete(ne`/conversations/${o}/items/${t}`,i)}};var sx=(()=>{class e extends oe{constructor(){super(...arguments),this.items=new n_(this._client)}create(n={},i){return this._client.post("/conversations",g({body:n},i))}retrieve(n,i){return this._client.get(ne`/conversations/${n}`,i)}update(n,i,o){return this._client.post(ne`/conversations/${n}`,g({body:i},o))}delete(n,i){return this._client.delete(ne`/conversations/${n}`,i)}}return e.Items=n_,e})();var Jp=class extends oe{create(t,n){let i=!!t.encoding_format,o=i?t.encoding_format:"base64";i&&qi(this._client).debug("embeddings/user defined encoding_format:",t.encoding_format);let r=this._client.post("/embeddings",g({body:x(g({},t),{encoding_format:o})},n));return i?r:(qi(this._client).debug("embeddings/decoding base64 embeddings from base64"),r._thenUnwrap(s=>(s&&s.data&&s.data.forEach(a=>{let l=a.embedding;a.embedding=Ace(l)}),s)))}};var i_=class extends oe{retrieve(t,n,i){let{eval_id:o,run_id:r}=n;return this._client.get(ne`/evals/${o}/runs/${r}/output_items/${t}`,i)}list(t,n,i){let s=n,{eval_id:o}=s,r=Be(s,["eval_id"]);return this._client.getAPIList(ne`/evals/${o}/runs/${t}/output_items`,Wt,g({query:r},i))}};var YR=(()=>{class e extends oe{constructor(){super(...arguments),this.outputItems=new i_(this._client)}create(n,i,o){return this._client.post(ne`/evals/${n}/runs`,g({body:i},o))}retrieve(n,i,o){let{eval_id:r}=i;return this._client.get(ne`/evals/${r}/runs/${n}`,o)}list(n,i={},o){return this._client.getAPIList(ne`/evals/${n}/runs`,Wt,g({query:i},o))}delete(n,i,o){let{eval_id:r}=i;return this._client.delete(ne`/evals/${r}/runs/${n}`,o)}cancel(n,i,o){let{eval_id:r}=i;return this._client.post(ne`/evals/${r}/runs/${n}`,o)}}return e.OutputItems=i_,e})();var ax=(()=>{class e extends oe{constructor(){super(...arguments),this.runs=new YR(this._client)}create(n,i){return this._client.post("/evals",g({body:n},i))}retrieve(n,i){return this._client.get(ne`/evals/${n}`,i)}update(n,i,o){return this._client.post(ne`/evals/${n}`,g({body:i},o))}list(n={},i){return this._client.getAPIList("/evals",Wt,g({query:n},i))}delete(n,i){return this._client.delete(ne`/evals/${n}`,i)}}return e.Runs=YR,e})();var Xp=class extends oe{create(t,n){return this._client.post("/files",Ms(g({body:t},n),this._client))}retrieve(t,n){return this._client.get(ne`/files/${t}`,n)}list(t={},n){return this._client.getAPIList("/files",Wt,g({query:t},n))}delete(t,n){return this._client.delete(ne`/files/${t}`,n)}content(t,n){return this._client.get(ne`/files/${t}/content`,x(g({},n),{headers:ge([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0}))}waitForProcessing(o){return E(this,arguments,function*(t,{pollInterval:n=5e3,maxWait:i=1800*1e3}={}){let r=new Set(["processed","error","deleted"]),s=Date.now(),a=yield this.retrieve(t);for(;!a.status||!r.has(a.status);)if(yield Jl(n),a=yield this.retrieve(t),Date.now()-s>i)throw new Yl({message:`Giving up on waiting for file ${t} to finish processing after ${i} milliseconds.`});return a})}};var o_=class extends oe{};var r_=class extends oe{run(t,n){return this._client.post("/fine_tuning/alpha/graders/run",g({body:t},n))}validate(t,n){return this._client.post("/fine_tuning/alpha/graders/validate",g({body:t},n))}};var QR=(()=>{class e extends oe{constructor(){super(...arguments),this.graders=new r_(this._client)}}return e.Graders=r_,e})();var s_=class extends oe{create(t,n,i){return this._client.getAPIList(ne`/fine_tuning/checkpoints/${t}/permissions`,tc,g({body:n,method:"post"},i))}retrieve(t,n={},i){return this._client.get(ne`/fine_tuning/checkpoints/${t}/permissions`,g({query:n},i))}delete(t,n,i){let{fine_tuned_model_checkpoint:o}=n;return this._client.delete(ne`/fine_tuning/checkpoints/${o}/permissions/${t}`,i)}};var JR=(()=>{class e extends oe{constructor(){super(...arguments),this.permissions=new s_(this._client)}}return e.Permissions=s_,e})();var a_=class extends oe{list(t,n={},i){return this._client.getAPIList(ne`/fine_tuning/jobs/${t}/checkpoints`,Wt,g({query:n},i))}};var XR=(()=>{class e extends oe{constructor(){super(...arguments),this.checkpoints=new a_(this._client)}create(n,i){return this._client.post("/fine_tuning/jobs",g({body:n},i))}retrieve(n,i){return this._client.get(ne`/fine_tuning/jobs/${n}`,i)}list(n={},i){return this._client.getAPIList("/fine_tuning/jobs",Wt,g({query:n},i))}cancel(n,i){return this._client.post(ne`/fine_tuning/jobs/${n}/cancel`,i)}listEvents(n,i={},o){return this._client.getAPIList(ne`/fine_tuning/jobs/${n}/events`,Wt,g({query:i},o))}pause(n,i){return this._client.post(ne`/fine_tuning/jobs/${n}/pause`,i)}resume(n,i){return this._client.post(ne`/fine_tuning/jobs/${n}/resume`,i)}}return e.Checkpoints=a_,e})();var lx=(()=>{class e extends oe{constructor(){super(...arguments),this.methods=new o_(this._client),this.jobs=new XR(this._client),this.checkpoints=new JR(this._client),this.alpha=new QR(this._client)}}return e.Methods=o_,e.Jobs=XR,e.Checkpoints=JR,e.Alpha=QR,e})();var l_=class extends oe{};var cx=(()=>{class e extends oe{constructor(){super(...arguments),this.graderModels=new l_(this._client)}}return e.GraderModels=l_,e})();var ef=class extends oe{createVariation(t,n){return this._client.post("/images/variations",Ms(g({body:t},n),this._client))}edit(t,n){return this._client.post("/images/edits",Ms(x(g({body:t},n),{stream:t.stream??!1}),this._client))}generate(t,n){return this._client.post("/images/generations",x(g({body:t},n),{stream:t.stream??!1}))}};var tf=class extends oe{retrieve(t,n){return this._client.get(ne`/models/${t}`,n)}list(t){return this._client.getAPIList("/models",tc,t)}delete(t,n){return this._client.delete(ne`/models/${t}`,n)}};var nf=class extends oe{create(t,n){return this._client.post("/moderations",g({body:t},n))}};var c_=class extends oe{accept(t,n,i){return this._client.post(ne`/realtime/calls/${t}/accept`,x(g({body:n},i),{headers:ge([{Accept:"*/*"},i?.headers])}))}hangup(t,n){return this._client.post(ne`/realtime/calls/${t}/hangup`,x(g({},n),{headers:ge([{Accept:"*/*"},n?.headers])}))}refer(t,n,i){return this._client.post(ne`/realtime/calls/${t}/refer`,x(g({body:n},i),{headers:ge([{Accept:"*/*"},i?.headers])}))}reject(t,n={},i){return this._client.post(ne`/realtime/calls/${t}/reject`,x(g({body:n},i),{headers:ge([{Accept:"*/*"},i?.headers])}))}};var d_=class extends oe{create(t,n){return this._client.post("/realtime/client_secrets",g({body:t},n))}};var dx=(()=>{class e extends oe{constructor(){super(...arguments),this.clientSecrets=new d_(this._client),this.calls=new c_(this._client)}}return e.ClientSecrets=d_,e.Calls=c_,e})();function Hce(e,t){return!t||!YUe(t)?x(g({},e),{output_parsed:null,output:e.output.map(n=>n.type==="function_call"?x(g({},n),{parsed_arguments:null}):n.type==="message"?x(g({},n),{content:n.content.map(i=>x(g({},i),{parsed:null}))}):n)}):W8(e,t)}function W8(e,t){let n=e.output.map(o=>{if(o.type==="function_call")return x(g({},o),{parsed_arguments:XUe(t,o)});if(o.type==="message"){let r=o.content.map(s=>s.type==="output_text"?x(g({},s),{parsed:ZUe(t,s.text)}):s);return x(g({},o),{content:r})}return o}),i=Object.assign({},e,{output:n});return Object.getOwnPropertyDescriptor(e,"output_text")||eT(i),Object.defineProperty(i,"output_parsed",{enumerable:!0,get(){for(let o of i.output)if(o.type==="message"){for(let r of o.content)if(r.type==="output_text"&&r.parsed!==null)return r.parsed}return null}}),i}function ZUe(e,t){return e.text?.format?.type!=="json_schema"?null:"$parseRaw"in e.text?.format?(e.text?.format).$parseRaw(t):JSON.parse(t)}function YUe(e){return!!U0(e.text?.format)}function QUe(e){return e?.$brand==="auto-parseable-tool"}function JUe(e,t){return e.find(n=>n.type==="function"&&n.name===t)}function XUe(e,t){let n=JUe(e.tools??[],t.name);return x(g(g({},t),t),{parsed_arguments:QUe(n)?n.$parseRaw(t.arguments):n?.strict?JSON.parse(t.arguments):null})}function eT(e){let t=[];for(let n of e.output)if(n.type==="message")for(let i of n.content)i.type==="output_text"&&t.push(i.text);e.output_text=t.join("")}var u_,tT,Hu,nT,$ce,jce,Gce,Uce,iT=class e extends Bu{constructor(t){super(),u_.add(this),tT.set(this,void 0),Hu.set(this,void 0),nT.set(this,void 0),ot(this,tT,t,"f")}static createResponse(t,n,i){let o=new e(n);return o._run(()=>o._createOrRetrieveResponse(t,n,x(g({},i),{headers:x(g({},i?.headers),{"X-Stainless-Helper-Method":"stream"})}))),o}_createOrRetrieveResponse(t,n,i){return E(this,null,function*(){let o=i?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),G(this,u_,"m",$ce).call(this);let r,s=null;"response_id"in n?(r=yield t.responses.retrieve(n.response_id,{stream:!0},x(g({},i),{signal:this.controller.signal,stream:!0})),s=n.starting_after??null):r=yield t.responses.create(x(g({},n),{stream:!0}),x(g({},i),{signal:this.controller.signal})),this._connected();try{for(var a=lt(r),l,c,u;l=!(c=yield a.next()).done;l=!1){let h=c.value;G(this,u_,"m",jce).call(this,h,s)}}catch{u=[c]}finally{try{l&&(c=a.return)&&(yield c.call(a))}finally{if(u)throw u[0]}}if(r.controller.signal?.aborted)throw new Oi;return G(this,u_,"m",Gce).call(this)})}[(tT=new WeakMap,Hu=new WeakMap,nT=new WeakMap,u_=new WeakSet,$ce=function(){this.ended||ot(this,Hu,void 0,"f")},jce=function(n,i){if(this.ended)return;let o=(s,a)=>{(i==null||a.sequence_number>i)&&this._emit(s,a)},r=G(this,u_,"m",Uce).call(this,n);switch(o("event",n),n.type){case"response.output_text.delta":{let s=r.output[n.output_index];if(!s)throw new je(`missing output at index ${n.output_index}`);if(s.type==="message"){let a=s.content[n.content_index];if(!a)throw new je(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new je(`expected content to be 'output_text', got ${a.type}`);o("response.output_text.delta",x(g({},n),{snapshot:a.text}))}break}case"response.function_call_arguments.delta":{let s=r.output[n.output_index];if(!s)throw new je(`missing output at index ${n.output_index}`);s.type==="function_call"&&o("response.function_call_arguments.delta",x(g({},n),{snapshot:s.arguments}));break}default:o(n.type,n);break}},Gce=function(){if(this.ended)throw new je("stream has ended, this shouldn't happen");let n=G(this,Hu,"f");if(!n)throw new je("request ended without sending any events");ot(this,Hu,void 0,"f");let i=eWe(n,G(this,tT,"f"));return ot(this,nT,i,"f"),i},Uce=function(n){let i=G(this,Hu,"f");if(!i){if(n.type!=="response.created")throw new je(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return i=ot(this,Hu,n.response,"f"),i}switch(n.type){case"response.output_item.added":{i.output.push(n.item);break}case"response.content_part.added":{let o=i.output[n.output_index];if(!o)throw new je(`missing output at index ${n.output_index}`);let r=o.type,s=n.part;r==="message"&&s.type!=="reasoning_text"?o.content.push(s):r==="reasoning"&&s.type==="reasoning_text"&&(o.content||(o.content=[]),o.content.push(s));break}case"response.output_text.delta":{let o=i.output[n.output_index];if(!o)throw new je(`missing output at index ${n.output_index}`);if(o.type==="message"){let r=o.content[n.content_index];if(!r)throw new je(`missing content at index ${n.content_index}`);if(r.type!=="output_text")throw new je(`expected content to be 'output_text', got ${r.type}`);r.text+=n.delta}break}case"response.function_call_arguments.delta":{let o=i.output[n.output_index];if(!o)throw new je(`missing output at index ${n.output_index}`);o.type==="function_call"&&(o.arguments+=n.delta);break}case"response.reasoning_text.delta":{let o=i.output[n.output_index];if(!o)throw new je(`missing output at index ${n.output_index}`);if(o.type==="reasoning"){let r=o.content?.[n.content_index];if(!r)throw new je(`missing content at index ${n.content_index}`);if(r.type!=="reasoning_text")throw new je(`expected content to be 'reasoning_text', got ${r.type}`);r.text+=n.delta}break}case"response.completed":{ot(this,Hu,n.response,"f");break}}return i},Symbol.asyncIterator)](){let t=[],n=[],i=!1;return this.on("event",o=>{let r=n.shift();r?r.resolve(o):t.push(o)}),this.on("end",()=>{i=!0;for(let o of n)o.resolve(void 0);n.length=0}),this.on("abort",o=>{i=!0;for(let r of n)r.reject(o);n.length=0}),this.on("error",o=>{i=!0;for(let r of n)r.reject(o);n.length=0}),{next:()=>E(this,null,function*(){return t.length?{value:t.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((r,s)=>n.push({resolve:r,reject:s})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0})}),return:()=>E(this,null,function*(){return this.abort(),{value:void 0,done:!0}})}}finalResponse(){return E(this,null,function*(){yield this.done();let t=G(this,nT,"f");if(!t)throw new je("stream ended without producing a ChatCompletion");return t})}};function eWe(e,t){return Hce(e,t)}var h_=class extends oe{list(t,n={},i){return this._client.getAPIList(ne`/responses/${t}/input_items`,Wt,g({query:n},i))}};var p_=class extends oe{count(t={},n){return this._client.post("/responses/input_tokens",g({body:t},n))}};var ux=(()=>{class e extends oe{constructor(){super(...arguments),this.inputItems=new h_(this._client),this.inputTokens=new p_(this._client)}create(n,i){return this._client.post("/responses",x(g({body:n},i),{stream:n.stream??!1}))._thenUnwrap(o=>("object"in o&&o.object==="response"&&eT(o),o))}retrieve(n,i={},o){return this._client.get(ne`/responses/${n}`,x(g({query:i},o),{stream:i?.stream??!1}))._thenUnwrap(r=>("object"in r&&r.object==="response"&&eT(r),r))}delete(n,i){return this._client.delete(ne`/responses/${n}`,x(g({},i),{headers:ge([{Accept:"*/*"},i?.headers])}))}parse(n,i){return this._client.responses.create(n,i)._thenUnwrap(o=>W8(o,n))}stream(n,i){return iT.createResponse(this._client,n,i)}cancel(n,i){return this._client.post(ne`/responses/${n}/cancel`,i)}compact(n,i){return this._client.post("/responses/compact",g({body:n},i))}}return e.InputItems=h_,e.InputTokens=p_,e})();var f_=class extends oe{create(t,n,i){return this._client.post(ne`/uploads/${t}/parts`,Ms(g({body:n},i),this._client))}};var hx=(()=>{class e extends oe{constructor(){super(...arguments),this.parts=new f_(this._client)}create(n,i){return this._client.post("/uploads",g({body:n},i))}cancel(n,i){return this._client.post(ne`/uploads/${n}/cancel`,i)}complete(n,i,o){return this._client.post(ne`/uploads/${n}/complete`,g({body:i},o))}}return e.Parts=f_,e})();var Wce=e=>E(null,null,function*(){let t=yield Promise.allSettled(e),n=t.filter(o=>o.status==="rejected");if(n.length){for(let o of n)console.error(o.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}let i=[];for(let o of t)o.status==="fulfilled"&&i.push(o.value);return i});var m_=class extends oe{create(t,n,i){return this._client.post(ne`/vector_stores/${t}/file_batches`,x(g({body:n},i),{headers:ge([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}retrieve(t,n,i){let{vector_store_id:o}=n;return this._client.get(ne`/vector_stores/${o}/file_batches/${t}`,x(g({},i),{headers:ge([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}cancel(t,n,i){let{vector_store_id:o}=n;return this._client.post(ne`/vector_stores/${o}/file_batches/${t}/cancel`,x(g({},i),{headers:ge([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}createAndPoll(t,n,i){return E(this,null,function*(){let o=yield this.create(t,n);return yield this.poll(t,o.id,i)})}listFiles(t,n,i){let s=n,{vector_store_id:o}=s,r=Be(s,["vector_store_id"]);return this._client.getAPIList(ne`/vector_stores/${o}/file_batches/${t}/files`,Wt,x(g({query:r},i),{headers:ge([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}poll(t,n,i){return E(this,null,function*(){let o=ge([i?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":i?.pollIntervalMs?.toString()??void 0}]);for(;;){let{data:r,response:s}=yield this.retrieve(n,{vector_store_id:t},x(g({},i),{headers:o})).withResponse();switch(r.status){case"in_progress":let a=5e3;if(i?.pollIntervalMs)a=i.pollIntervalMs;else{let l=s.headers.get("openai-poll-after-ms");if(l){let c=parseInt(l);isNaN(c)||(a=c)}}yield Jl(a);break;case"failed":case"cancelled":case"completed":return r}}})}uploadAndPoll(r,s,a){return E(this,arguments,function*(t,{files:n,fileIds:i=[]},o){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");let l=o?.maxConcurrency??5,c=Math.min(l,n.length),u=this._client,h=n.values(),f=[...i];function m(y){return E(this,null,function*(){for(let w of y){let C=yield u.files.create({file:w,purpose:"assistants"},o);f.push(C.id)}})}let _=Array(c).fill(h).map(m);return yield Wce(_),yield this.createAndPoll(t,{file_ids:f})})}};var g_=class extends oe{create(t,n,i){return this._client.post(ne`/vector_stores/${t}/files`,x(g({body:n},i),{headers:ge([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}retrieve(t,n,i){let{vector_store_id:o}=n;return this._client.get(ne`/vector_stores/${o}/files/${t}`,x(g({},i),{headers:ge([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}update(t,n,i){let s=n,{vector_store_id:o}=s,r=Be(s,["vector_store_id"]);return this._client.post(ne`/vector_stores/${o}/files/${t}`,x(g({body:r},i),{headers:ge([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}list(t,n={},i){return this._client.getAPIList(ne`/vector_stores/${t}/files`,Wt,x(g({query:n},i),{headers:ge([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}delete(t,n,i){let{vector_store_id:o}=n;return this._client.delete(ne`/vector_stores/${o}/files/${t}`,x(g({},i),{headers:ge([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}createAndPoll(t,n,i){return E(this,null,function*(){let o=yield this.create(t,n,i);return yield this.poll(t,o.id,i)})}poll(t,n,i){return E(this,null,function*(){let o=ge([i?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":i?.pollIntervalMs?.toString()??void 0}]);for(;;){let r=yield this.retrieve(n,{vector_store_id:t},x(g({},i),{headers:o})).withResponse(),s=r.data;switch(s.status){case"in_progress":let a=5e3;if(i?.pollIntervalMs)a=i.pollIntervalMs;else{let l=r.response.headers.get("openai-poll-after-ms");if(l){let c=parseInt(l);isNaN(c)||(a=c)}}yield Jl(a);break;case"failed":case"completed":return s}}})}upload(t,n,i){return E(this,null,function*(){let o=yield this._client.files.create({file:n,purpose:"assistants"},i);return this.create(t,{file_id:o.id},i)})}uploadAndPoll(t,n,i){return E(this,null,function*(){let o=yield this.upload(t,n,i);return yield this.poll(t,o.id,i)})}content(t,n,i){let{vector_store_id:o}=n;return this._client.getAPIList(ne`/vector_stores/${o}/files/${t}/content`,tc,x(g({},i),{headers:ge([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}};var px=(()=>{class e extends oe{constructor(){super(...arguments),this.files=new g_(this._client),this.fileBatches=new m_(this._client)}create(n,i){return this._client.post("/vector_stores",x(g({body:n},i),{headers:ge([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}retrieve(n,i){return this._client.get(ne`/vector_stores/${n}`,x(g({},i),{headers:ge([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}update(n,i,o){return this._client.post(ne`/vector_stores/${n}`,x(g({body:i},o),{headers:ge([{"OpenAI-Beta":"assistants=v2"},o?.headers])}))}list(n={},i){return this._client.getAPIList("/vector_stores",Wt,x(g({query:n},i),{headers:ge([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}delete(n,i){return this._client.delete(ne`/vector_stores/${n}`,x(g({},i),{headers:ge([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}search(n,i,o){return this._client.getAPIList(ne`/vector_stores/${n}/search`,tc,x(g({body:i,method:"post"},o),{headers:ge([{"OpenAI-Beta":"assistants=v2"},o?.headers])}))}}return e.Files=g_,e.FileBatches=m_,e})();var of=class extends oe{create(t,n){return this._client.post("/videos",I8(g({body:t},n),this._client))}retrieve(t,n){return this._client.get(ne`/videos/${t}`,n)}list(t={},n){return this._client.getAPIList("/videos",dd,g({query:t},n))}delete(t,n){return this._client.delete(ne`/videos/${t}`,n)}downloadContent(t,n={},i){return this._client.get(ne`/videos/${t}/content`,x(g({query:n},i),{headers:ge([{Accept:"application/binary"},i?.headers]),__binaryResponse:!0}))}remix(t,n,i){return this._client.post(ne`/videos/${t}/remix`,I8(g({body:n},i),this._client))}};var v_,qce,oT,rf=class extends oe{constructor(){super(...arguments),v_.add(this)}unwrap(r,s){return E(this,arguments,function*(t,n,i=this._client.webhookSecret,o=300){return yield this.verifySignature(t,n,i,o),JSON.parse(t)})}verifySignature(r,s){return E(this,arguments,function*(t,n,i=this._client.webhookSecret,o=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");G(this,v_,"m",qce).call(this,i);let a=ge([n]).values,l=G(this,v_,"m",oT).call(this,a,"webhook-signature"),c=G(this,v_,"m",oT).call(this,a,"webhook-timestamp"),u=G(this,v_,"m",oT).call(this,a,"webhook-id"),h=parseInt(c,10);if(isNaN(h))throw new Ql("Invalid webhook timestamp format");let f=Math.floor(Date.now()/1e3);if(f-h>o)throw new Ql("Webhook timestamp is too old");if(h>f+o)throw new Ql("Webhook timestamp is too new");let m=l.split(" ").map(C=>C.startsWith("v1,")?C.substring(3):C),_=i.startsWith("whsec_")?Buffer.from(i.replace("whsec_",""),"base64"):Buffer.from(i,"utf-8"),y=u?`${u}.${c}.${t}`:`${c}.${t}`,w=yield crypto.subtle.importKey("raw",_,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(let C of m)try{let S=Buffer.from(C,"base64");if(yield crypto.subtle.verify("HMAC",w,S,new TextEncoder().encode(y)))return}catch{continue}throw new Ql("The given webhook signature does not match the expected signature")})}};v_=new WeakSet,qce=function(t){if(typeof t!="string"||t.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},oT=function(t,n){if(!t)throw new Error("Headers are required");let i=t.get(n);if(i==null)throw new Error(`Missing required header: ${n}`);return i};var q8,K8,rT,Kce,wt=class{constructor(a={}){var l=a,{baseURL:t=Vu("OPENAI_BASE_URL"),apiKey:n=Vu("OPENAI_API_KEY"),organization:i=Vu("OPENAI_ORG_ID")??null,project:o=Vu("OPENAI_PROJECT_ID")??null,webhookSecret:r=Vu("OPENAI_WEBHOOK_SECRET")??null}=l,s=Be(l,["baseURL","apiKey","organization","project","webhookSecret"]);if(q8.add(this),rT.set(this,void 0),this.completions=new Qp(this),this.chat=new X0(this),this.embeddings=new Jp(this),this.files=new Xp(this),this.images=new ef(this),this.audio=new ex(this),this.moderations=new nf(this),this.models=new tf(this),this.fineTuning=new lx(this),this.graders=new cx(this),this.vectorStores=new px(this),this.webhooks=new rf(this),this.beta=new ox(this),this.batches=new qp(this),this.uploads=new hx(this),this.responses=new ux(this),this.realtime=new dx(this),this.conversations=new sx(this),this.evals=new ax(this),this.containers=new rx(this),this.videos=new of(this),n===void 0)throw new je("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");let c=x(g({apiKey:n,organization:i,project:o,webhookSecret:r},s),{baseURL:t||"https://api.openai.com/v1"});if(!c.dangerouslyAllowBrowser&&ece())throw new je(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=c.baseURL,this.timeout=c.timeout??K8.DEFAULT_TIMEOUT,this.logger=c.logger??console;let u="warn";this.logLevel=u,this.logLevel=w8(c.logLevel,"ClientOptions.logLevel",this)??w8(Vu("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??u,this.fetchOptions=c.fetchOptions,this.maxRetries=c.maxRetries??2,this.fetch=c.fetch??nce(),ot(this,rT,oce,"f"),this._options=c,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=i,this.project=o,this.webhookSecret=r}withOptions(t){return new this.constructor(g(x(g({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret}),t))}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){}authHeaders(t){return E(this,null,function*(){return ge([{Authorization:`Bearer ${this.apiKey}`}])})}stringifyQuery(t){return b8(t,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Nu}`}defaultIdempotencyKey(){return`stainless-node-retry-${d8()}`}makeStatusError(t,n,i,o){return vo.generate(t,n,i,o)}_callApiKey(){return E(this,null,function*(){let t=this._options.apiKey;if(typeof t!="function")return!1;let n;try{n=yield t()}catch(i){throw i instanceof je?i:new je(`Failed to get token from 'apiKey' function: ${i.message}`,{cause:i})}if(typeof n!="string"||!n)throw new je(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0})}buildURL(t,n,i){let o=!G(this,q8,"m",Kce).call(this)&&i||this.baseURL,r=Wle(t)?new URL(t):new URL(o+(o.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),s=this.defaultQuery();return qle(s)||(n=g(g({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}prepareOptions(t){return E(this,null,function*(){yield this._callApiKey()})}prepareRequest(o,r){return E(this,arguments,function*(t,{url:n,options:i}){})}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,i){return this.request(Promise.resolve(i).then(o=>g({method:t,path:n},o)))}request(t,n=null){return new jp(this,this.makeRequest(t,n,void 0))}makeRequest(t,n,i){return E(this,null,function*(){let o=yield t,r=o.maxRetries??this.maxRetries;n==null&&(n=r),yield this.prepareOptions(o);let{req:s,url:a,timeout:l}=yield this.buildRequest(o,{retryCount:r-n});yield this.prepareRequest(s,{url:a,options:o});let c="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),u=i===void 0?"":`, retryOf: ${i}`,h=Date.now();if(qi(this).debug(`[${c}] sending request`,cd({retryOfRequestLogID:i,method:o.method,url:a,options:o,headers:s.headers})),o.signal?.aborted)throw new Oi;let f=new AbortController,m=yield this.fetchWithTimeout(a,s,l,f).catch(F0),_=Date.now();if(m instanceof globalThis.Error){let C=`retrying, ${n} attempts remaining`;if(o.signal?.aborted)throw new Oi;let S=O0(m)||/timed? ?out/i.test(String(m)+("cause"in m?String(m.cause):""));if(n)return qi(this).info(`[${c}] connection ${S?"timed out":"failed"} - ${C}`),qi(this).debug(`[${c}] connection ${S?"timed out":"failed"} (${C})`,cd({retryOfRequestLogID:i,url:a,durationMs:_-h,message:m.message})),this.retryRequest(o,n,i??c);throw qi(this).info(`[${c}] connection ${S?"timed out":"failed"} - error; no more retries left`),qi(this).debug(`[${c}] connection ${S?"timed out":"failed"} (error; no more retries left)`,cd({retryOfRequestLogID:i,url:a,durationMs:_-h,message:m.message})),S?new Yl:new Lu({cause:m})}let y=[...m.headers.entries()].filter(([C])=>C==="x-request-id").map(([C,S])=>", "+C+": "+JSON.stringify(S)).join(""),w=`[${c}${u}${y}] ${s.method} ${a} ${m.ok?"succeeded":"failed"} with status ${m.status} in ${_-h}ms`;if(!m.ok){let C=yield this.shouldRetry(m);if(n&&C){let j=`retrying, ${n} attempts remaining`;return yield ice(m.body),qi(this).info(`${w} - ${j}`),qi(this).debug(`[${c}] response error (${j})`,cd({retryOfRequestLogID:i,url:m.url,status:m.status,headers:m.headers,durationMs:_-h})),this.retryRequest(o,n,i??c,m.headers)}let S=C?"error; no more retries left":"error; not retryable";qi(this).info(`${w} - ${S}`);let I=yield m.text().catch(j=>F0(j).message),O=Yle(I),F=O?void 0:I;throw qi(this).debug(`[${c}] response error (${S})`,cd({retryOfRequestLogID:i,url:m.url,status:m.status,headers:m.headers,message:F,durationMs:Date.now()-h})),this.makeStatusError(m.status,O,F,m.headers)}return qi(this).info(w),qi(this).debug(`[${c}] response start`,cd({retryOfRequestLogID:i,url:m.url,status:m.status,headers:m.headers,durationMs:_-h})),{response:m,options:o,controller:f,requestLogID:c,retryOfRequestLogID:i,startTime:h}})}getAPIList(t,n,i){return this.requestAPIList(n,g({method:"get",path:t},i))}requestAPIList(t,n){let i=this.makeRequest(n,null,void 0);return new H0(this,i,t)}fetchWithTimeout(t,n,i,o){return E(this,null,function*(){let h=n||{},{signal:r,method:s}=h,a=Be(h,["signal","method"]);r&&r.addEventListener("abort",()=>o.abort());let l=setTimeout(()=>o.abort(),i),c=globalThis.ReadableStream&&a.body instanceof globalThis.ReadableStream||typeof a.body=="object"&&a.body!==null&&Symbol.asyncIterator in a.body,u=g(x(g({signal:o.signal},c?{duplex:"half"}:{}),{method:"GET"}),a);s&&(u.method=s.toUpperCase());try{return yield this.fetch.call(void 0,t,u)}finally{clearTimeout(l)}})}shouldRetry(t){return E(this,null,function*(){let n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500})}retryRequest(t,n,i,o){return E(this,null,function*(){let r,s=o?.get("retry-after-ms");if(s){let l=parseFloat(s);Number.isNaN(l)||(r=l)}let a=o?.get("retry-after");if(a&&!r){let l=parseFloat(a);Number.isNaN(l)?r=Date.parse(a)-Date.now():r=l*1e3}if(!(r&&0<=r&&r<60*1e3)){let l=t.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(n,l)}return yield Jl(r),this.makeRequest(t,n-1,i)})}calculateDefaultRetryTimeoutMillis(t,n){let r=n-t,s=Math.min(.5*Math.pow(2,r),8),a=1-Math.random()*.25;return s*a*1e3}buildRequest(i){return E(this,arguments,function*(t,{retryCount:n=0}={}){let o=g({},t),{method:r,path:s,query:a,defaultBaseURL:l}=o,c=this.buildURL(s,a,l);"timeout"in o&&Zle("timeout",o.timeout),o.timeout=o.timeout??this.timeout;let{bodyHeaders:u,body:h}=this.buildBody({options:o}),f=yield this.buildHeaders({options:t,method:r,bodyHeaders:u,retryCount:n});return{req:g(g(g(g(g({method:r,headers:f},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&h instanceof globalThis.ReadableStream&&{duplex:"half"}),h&&{body:h}),this.fetchOptions??{}),o.fetchOptions??{}),url:c,timeout:o.timeout}})}buildHeaders(r){return E(this,arguments,function*({options:t,method:n,bodyHeaders:i,retryCount:o}){let s={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=t.idempotencyKey);let a=ge([s,x(g(g({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),tce()),{"OpenAI-Organization":this.organization,"OpenAI-Project":this.project}),yield this.authHeaders(t),this._options.defaultHeaders,i,t.headers]);return this.validateHeaders(a),a.values})}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};let i=ge([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&i.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:xR(t)}:G(this,rT,"f").call(this,{body:t,headers:i})}};K8=wt,rT=new WeakMap,q8=new WeakSet,Kce=function(){return this.baseURL!=="https://api.openai.com/v1"};wt.OpenAI=K8;wt.DEFAULT_TIMEOUT=6e5;wt.OpenAIError=je;wt.APIError=vo;wt.APIConnectionError=Lu;wt.APIConnectionTimeoutError=Yl;wt.APIUserAbortError=Oi;wt.NotFoundError=Tv;wt.ConflictError=Pv;wt.RateLimitError=Ov;wt.BadRequestError=Iv;wt.AuthenticationError=Mv;wt.InternalServerError=Fv;wt.PermissionDeniedError=Rv;wt.UnprocessableEntityError=Av;wt.InvalidWebhookSignatureError=Ql;wt.toFile=j0;wt.Completions=Qp;wt.Chat=X0;wt.Embeddings=Jp;wt.Files=Xp;wt.Images=ef;wt.Audio=ex;wt.Moderations=nf;wt.Models=tf;wt.FineTuning=lx;wt.Graders=cx;wt.VectorStores=px;wt.Webhooks=rf;wt.Beta=ox;wt.Batches=qp;wt.Uploads=hx;wt.Responses=ux;wt.Realtime=dx;wt.Conversations=sx;wt.Evals=ax;wt.Containers=rx;wt.Videos=of;function ic(e){if(!e||typeof e!="object")return e;let t;return e.constructor.name===Yl.name&&"message"in e&&typeof e.message=="string"?(t=new Error(e.message),t.name="TimeoutError"):e.constructor.name===Oi.name&&"message"in e&&typeof e.message=="string"?(t=new Error(e.message),t.name="AbortError"):"status"in e&&e.status===400&&"message"in e&&typeof e.message=="string"&&e.message.includes("tool_calls")?t=A0(e,"INVALID_TOOL_RESULTS"):"status"in e&&e.status===401?t=A0(e,"MODEL_AUTHENTICATION"):"status"in e&&e.status===429?t=A0(e,"MODEL_RATE_LIMIT"):"status"in e&&e.status===404?t=A0(e,"MODEL_NOT_FOUND"):t=e,t}var md=e=>e();function gd(e){return e?!!(/^o\d/.test(e??"")||e.startsWith("gpt-5")&&!e.startsWith("gpt-5-chat")):!1}function aWe(e){return e.role!=="system"&&e.role!=="developer"&&e.role!=="assistant"&&e.role!=="user"&&e.role!=="function"&&e.role!=="tool"&&console.warn(`Unknown message role: ${e.role}`),e.role}function __(e){let t=e.metadata?.filename??e.metadata?.name??e.metadata?.title;if(!t)throw new Error("a filename or name or title is needed via meta-data for OpenAI when working with multimodal blocks");return t}function vd(e){let t=e._getType();switch(t){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":if(!CE.isInstance(e))throw new Error("Invalid generic chat message");return aWe(e);default:throw new Error(`Unknown message type: ${t}`)}}function Zce(e){return e.includes("gpt-5.2-pro")}function $u(e){let{azureOpenAIApiDeploymentName:t,azureOpenAIApiInstanceName:n,azureOpenAIApiKey:i,azureOpenAIBasePath:o,baseURL:r,azureADTokenProvider:s,azureOpenAIEndpoint:a}=e;if((i||s)&&o&&t)return`${o}/${t}`;if((i||s)&&a&&t)return`${a}/openai/deployments/${t}`;if(i||s){if(!n)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!t)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${n}.openai.azure.com/openai/deployments/${t}`}return r}function Y8(e){return typeof Headers<"u"&&e!==null&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Headers]"}function Yce(e){let t=md(()=>{if(Y8(e))return e;if(Array.isArray(e))return new Headers(e);if(typeof e=="object"&&e!==null&&"values"in e&&Y8(e.values))return e.values;if(typeof e=="object"&&e!==null){let n=Object.entries(e).filter(([,i])=>typeof i=="string").map(([i,o])=>[i,o]);return new Headers(n)}return new Headers});return Object.fromEntries(t.entries())}function Qce(){let e=UW();return(e==="node"||e==="deno")&&(e=`(${e}/${process.version}; ${process.platform}; ${process.arch})`),e}function ju(e,t=!1,n="1.0.0"){let i=Yce(e),o=Qce(),r=`langchainjs${t?"-azure":""}-openai`;return x(g({},i),{"User-Agent":i["User-Agent"]?`${r}/${n} (${o})${i["User-Agent"]}`:`${r}/${n} (${o})`})}var Q8={};_t(Q8,{convertToOpenAIFunction:()=>J8,convertToOpenAITool:()=>X8,isLangChainTool:()=>Hp,isRunnableToolLike:()=>M0,isStructuredTool:()=>I0,isStructuredToolParams:()=>R0});function J8(e,t){let n=typeof t=="number"?void 0:t;return g({name:e.name,description:e.description,parameters:Xi(e.schema)},n?.strict!==void 0?{strict:n.strict}:{})}function X8(e,t){let n=typeof t=="number"?void 0:t,i;return Hp(e)?i={type:"function",function:J8(e)}:i=e,n?.strict!==void 0&&(i.function.strict=n.strict),i}var e$={};_t(e$,{extendInteropZodObject:()=>TE,getInteropZodDefaultGetter:()=>N2,getInteropZodObjectShape:()=>Jy,getSchemaDescription:()=>Cc,interopParse:()=>fm,interopParseAsync:()=>ME,interopSafeParse:()=>f9,interopSafeParseAsync:()=>IE,interopZodObjectMakeFieldsOptional:()=>S9,interopZodObjectPartial:()=>mm,interopZodObjectPassthrough:()=>w9,interopZodObjectStrict:()=>C9,interopZodTransformInputSchema:()=>x9,isInteropZodError:()=>PE,isInteropZodLiteral:()=>p9,isInteropZodObject:()=>us,isInteropZodSchema:()=>ds,isShapelessZodSchema:()=>m9,isSimpleStringZodSchema:()=>RE,isZodArrayV4:()=>_9,isZodLiteralV3:()=>u9,isZodLiteralV4:()=>h9,isZodNullableV4:()=>b9,isZodObjectV3:()=>g9,isZodObjectV4:()=>v9,isZodOptionalV4:()=>y9,isZodSchema:()=>d9,isZodSchemaV3:()=>pm,isZodSchemaV4:()=>kE});function Jce(e,t){let n;return Hp(e)?n=X8(e):n=e,t?.strict!==void 0&&(n.function.strict=t.strict),n}function lWe(e){return e.anyOf!==void 0&&Array.isArray(e.anyOf)}function Xce(e){let t=["namespace functions {",""];for(let n of e)n.description&&t.push(`// ${n.description}`),Object.keys(n.parameters.properties??{}).length>0?(t.push(`type ${n.name} = (_: {`),t.push(ede(n.parameters,0)),t.push("}) => any;")):t.push(`type ${n.name} = () => any;`),t.push("");return t.push("} // namespace functions"),t.join(`
`)}function ede(e,t){let n=[];for(let[i,o]of Object.entries(e.properties??{}))o.description&&t<2&&n.push(`// ${o.description}`),e.required?.includes(i)?n.push(`${i}: ${sT(o,t)},`):n.push(`${i}?: ${sT(o,t)},`);return n.map(i=>" ".repeat(t)+i).join(`
`)}function sT(e,t){if(lWe(e))return e.anyOf.map(n=>sT(n,t)).join(" | ");switch(e.type){case"string":return e.enum?e.enum.map(n=>`"${n}"`).join(" | "):"string";case"number":return e.enum?e.enum.map(n=>`${n}`).join(" | "):"number";case"integer":return e.enum?e.enum.map(n=>`${n}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",ede(e,t+2),"}"].join(`
`);case"array":return e.items?`${sT(e.items,t)}[]`:"any[]";default:return""}}function aT(e){if(e)return e==="any"||e==="required"?"required":e==="auto"?"auto":e==="none"?"none":typeof e=="string"?{type:"function",function:{name:e}}:e}function y_(e){return"type"in e&&e.type!=="function"}function tde(e){return typeof e=="object"&&e!==null&&"extras"in e&&typeof e.extras=="object"&&e.extras!==null&&"providerToolDefinition"in e.extras&&typeof e.extras.providerToolDefinition=="object"&&e.extras.providerToolDefinition!==null}function nde(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type!=="function"}function sf(e){return typeof e=="object"&&e!==null&&"metadata"in e&&typeof e.metadata=="object"&&e.metadata!==null&&"customTool"in e.metadata&&typeof e.metadata.customTool=="object"&&e.metadata.customTool!==null}function lT(e){return"type"in e&&e.type==="custom"&&"custom"in e&&typeof e.custom=="object"&&e.custom!==null}function ide(e){if(e.type==="custom_tool_call")return x(g({},e),{type:"tool_call",call_id:e.id,id:e.call_id,name:e.name,isCustomTool:!0,args:{input:e.input}})}function ode(e){if(e.type==="computer_call")return x(g({},e),{type:"tool_call",call_id:e.id,id:e.call_id,name:"computer_use",isComputerTool:!0,args:{action:e.action}})}function rde(e){return typeof e=="object"&&e!==null&&"type"in e&&e.type==="tool_call"&&"isComputerTool"in e&&e.isComputerTool===!0}function sde(e){return typeof e=="object"&&e!==null&&"type"in e&&e.type==="tool_call"&&"isCustomTool"in e&&e.isCustomTool===!0}function ade(e){let t=()=>{if(e.custom.format){if(e.custom.format.type==="grammar")return{type:"grammar",definition:e.custom.format.grammar.definition,syntax:e.custom.format.grammar.syntax};if(e.custom.format.type==="text")return{type:"text"}}};return{type:"custom",name:e.custom.name,description:e.custom.description,format:t()}}function lde(e){let t=()=>{if(e.format){if(e.format.type==="grammar")return{type:"grammar",grammar:{definition:e.format.definition,syntax:e.format.syntax}};if(e.format.type==="text")return{type:"text"}}};return{type:"custom",custom:{name:e.name,description:e.description,format:t()}}}var dde=Symbol("Let zodToJsonSchema decide on which parser to use"),cde={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},ude=e=>typeof e=="string"?x(g({},cde),{basePath:["#"],definitions:{},name:e}):g(x(g({},cde),{basePath:["#"],definitions:{}}),e);var fx=e=>"_def"in e?e._def:e;function hde(e){if(!e)return!0;for(let t in e)return!1;return!0}var pde=e=>{let t=ude(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return x(g({},t),{currentPath:n,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(t.definitions).map(([i,o])=>[fx(o),{def:fx(o),path:[...t.basePath,t.definitionPath,i],jsonSchema:void 0}]))})};function t$(e,t,n,i){i?.errorMessages&&n&&(e.errorMessage=x(g({},e.errorMessage),{[t]:n}))}function pn(e,t,n,i,o){e[t]=n,t$(e,t,i,o)}function fde(){return{}}function mde(e,t){let n={type:"array"};return e.type?._def?.typeName!==At.ZodAny&&(n.items=xt(e.type._def,x(g({},t),{currentPath:[...t.currentPath,"items"]}))),e.minLength&&pn(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&pn(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(pn(n,"minItems",e.exactLength.value,e.exactLength.message,t),pn(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function gde(e,t){let n={type:"integer",format:"int64"};if(!e.checks)return n;for(let i of e.checks)switch(i.kind){case"min":t.target==="jsonSchema7"?i.inclusive?pn(n,"minimum",i.value,i.message,t):pn(n,"exclusiveMinimum",i.value,i.message,t):(i.inclusive||(n.exclusiveMinimum=!0),pn(n,"minimum",i.value,i.message,t));break;case"max":t.target==="jsonSchema7"?i.inclusive?pn(n,"maximum",i.value,i.message,t):pn(n,"exclusiveMaximum",i.value,i.message,t):(i.inclusive||(n.exclusiveMaximum=!0),pn(n,"maximum",i.value,i.message,t));break;case"multipleOf":pn(n,"multipleOf",i.value,i.message,t);break}return n}function vde(){return{type:"boolean"}}function _de(e,t){return xt(e.type._def,t)}var yde=(e,t)=>xt(e.innerType._def,t);function n$(e,t,n){let i=n??t.dateStrategy;if(Array.isArray(i))return{anyOf:i.map((o,r)=>n$(e,t,o))};switch(i){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return cWe(e,t)}}var cWe=(e,t)=>{let n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(let i of e.checks)switch(i.kind){case"min":pn(n,"minimum",i.value,i.message,t);break;case"max":pn(n,"maximum",i.value,i.message,t);break}return n};function bde(e,t){return x(g({},xt(e.innerType._def,t)),{default:e.defaultValue()})}function Cde(e,t,n){return t.effectStrategy==="input"?xt(e.schema._def,t,n):{}}function wde(e){return{type:"string",enum:[...e.values]}}var dWe=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function xde(e,t){let n=[xt(e.left._def,x(g({},t),{currentPath:[...t.currentPath,"allOf","0"]})),xt(e.right._def,x(g({},t),{currentPath:[...t.currentPath,"allOf","1"]}))].filter(r=>!!r),i=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,o=[];return n.forEach(r=>{if(dWe(r))o.push(...r.allOf),r.unevaluatedProperties===void 0&&(i=void 0);else{let a=r;if("additionalProperties"in r&&r.additionalProperties===!1){let s=r,{additionalProperties:l}=s;a=Be(s,["additionalProperties"])}else i=void 0;o.push(a)}}),o.length?g({allOf:o},i):void 0}function Sde(e,t){let n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}var i$,af={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(i$===void 0&&(i$=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),i$),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function cT(e,t){let n={type:"string"};function i(o){return t.patternStrategy==="escape"?uWe(o):o}if(e.checks)for(let o of e.checks)switch(o.kind){case"min":pn(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,o.value):o.value,o.message,t);break;case"max":pn(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,o.value):o.value,o.message,t);break;case"email":switch(t.emailStrategy){case"format:email":qa(n,"email",o.message,t);break;case"format:idn-email":qa(n,"idn-email",o.message,t);break;case"pattern:zod":Ka(n,af.email,o.message,t);break}break;case"url":qa(n,"uri",o.message,t);break;case"uuid":qa(n,"uuid",o.message,t);break;case"regex":Ka(n,o.regex,o.message,t);break;case"cuid":Ka(n,af.cuid,o.message,t);break;case"cuid2":Ka(n,af.cuid2,o.message,t);break;case"startsWith":Ka(n,RegExp(`^${i(o.value)}`),o.message,t);break;case"endsWith":Ka(n,RegExp(`${i(o.value)}$`),o.message,t);break;case"datetime":qa(n,"date-time",o.message,t);break;case"date":qa(n,"date",o.message,t);break;case"time":qa(n,"time",o.message,t);break;case"duration":qa(n,"duration",o.message,t);break;case"length":pn(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,o.value):o.value,o.message,t),pn(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,o.value):o.value,o.message,t);break;case"includes":{Ka(n,RegExp(i(o.value)),o.message,t);break}case"ip":{o.version!=="v6"&&qa(n,"ipv4",o.message,t),o.version!=="v4"&&qa(n,"ipv6",o.message,t);break}case"emoji":Ka(n,af.emoji,o.message,t);break;case"ulid":{Ka(n,af.ulid,o.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{qa(n,"binary",o.message,t);break}case"contentEncoding:base64":{pn(n,"contentEncoding","base64",o.message,t);break}case"pattern:zod":{Ka(n,af.base64,o.message,t);break}}break}case"nanoid":Ka(n,af.nanoid,o.message,t);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return n}var uWe=e=>Array.from(e).map(t=>/[a-zA-Z0-9]/.test(t)?t:`\\${t}`).join(""),qa=(e,t,n,i)=>{e.format||e.anyOf?.some(o=>o.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push(g({format:e.format},e.errorMessage&&i.errorMessages&&{errorMessage:{format:e.errorMessage.format}})),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push(g({format:t},n&&i.errorMessages&&{errorMessage:{format:n}}))):pn(e,"format",t,n,i)},Ka=(e,t,n,i)=>{e.pattern||e.allOf?.some(o=>o.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push(g({pattern:e.pattern},e.errorMessage&&i.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}})),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push(g({pattern:Ede(t,i)},n&&i.errorMessages&&{errorMessage:{pattern:n}}))):pn(e,"pattern",Ede(t,i),n,i)},Ede=(e,t)=>{let n=typeof e=="function"?e():e;if(!t.applyRegexFlags||!n.flags)return n.source;let i={i:n.flags.includes("i"),m:n.flags.includes("m"),s:n.flags.includes("s")},o=i.i?n.source.toLowerCase():n.source,r="",s=!1,a=!1,l=!1;for(let c=0;c<o.length;c++){if(s){r+=o[c],s=!1;continue}if(i.i){if(a){if(o[c].match(/[a-z]/)){l?(r+=o[c],r+=`${o[c-2]}-${o[c]}`.toUpperCase(),l=!1):o[c+1]==="-"&&o[c+2]?.match(/[a-z]/)?(r+=o[c],l=!0):r+=`${o[c]}${o[c].toUpperCase()}`;continue}}else if(o[c].match(/[a-z]/)){r+=`[${o[c]}${o[c].toUpperCase()}]`;continue}}if(i.m){if(o[c]==="^"){r+=`(^|(?<=[\r
]))`;continue}else if(o[c]==="$"){r+=`($|(?=[\r
]))`;continue}}if(i.s&&o[c]==="."){r+=a?`${o[c]}\r
`:`[${o[c]}\r
]`;continue}r+=o[c],o[c]==="\\"?s=!0:a&&o[c]==="]"?a=!1:!a&&o[c]==="["&&(a=!0)}try{let c=new RegExp(r)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),n.source}return r};function dT(e,t){if(t.target==="openApi3"&&e.keyType?._def.typeName===At.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((i,o)=>x(g({},i),{[o]:xt(e.valueType._def,x(g({},t),{currentPath:[...t.currentPath,"properties",o]}))??{}}),{}),additionalProperties:!1};let n={type:"object",additionalProperties:xt(e.valueType._def,x(g({},t),{currentPath:[...t.currentPath,"additionalProperties"]}))??{}};if(t.target==="openApi3")return n;if(e.keyType?._def.typeName===At.ZodString&&e.keyType._def.checks?.length){let i=Object.entries(cT(e.keyType._def,t)).reduce((o,[r,s])=>r==="type"?o:x(g({},o),{[r]:s}),{});return x(g({},n),{propertyNames:i})}else if(e.keyType?._def.typeName===At.ZodEnum)return x(g({},n),{propertyNames:{enum:e.keyType._def.values}});return n}function Dde(e,t){if(t.mapStrategy==="record")return dT(e,t);let n=xt(e.keyType._def,x(g({},t),{currentPath:[...t.currentPath,"items","items","0"]}))||{},i=xt(e.valueType._def,x(g({},t),{currentPath:[...t.currentPath,"items","items","1"]}))||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,i],minItems:2,maxItems:2}}}function kde(e){let t=e.values,i=Object.keys(e.values).filter(r=>typeof t[t[r]]!="number").map(r=>t[r]),o=Array.from(new Set(i.map(r=>typeof r)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:i}}function Ide(){return{not:{}}}function Mde(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var mx={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Tde(e,t){if(t.target==="openApi3")return Rde(e,t);let n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(i=>i._def.typeName in mx&&(!i._def.checks||!i._def.checks.length))){let i=n.reduce((o,r)=>{let s=mx[r._def.typeName];return s&&!o.includes(s)?[...o,s]:o},[]);return{type:i.length>1?i:i[0]}}else if(n.every(i=>i._def.typeName==="ZodLiteral"&&!i.description)){let i=n.reduce((o,r)=>{let s=typeof r._def.value;switch(s){case"string":case"number":case"boolean":return[...o,s];case"bigint":return[...o,"integer"];case"object":if(r._def.value===null)return[...o,"null"];case"symbol":case"undefined":case"function":default:return o}},[]);if(i.length===n.length){let o=i.filter((r,s,a)=>a.indexOf(r)===s);return{type:o.length>1?o:o[0],enum:n.reduce((r,s)=>r.includes(s._def.value)?r:[...r,s._def.value],[])}}}else if(n.every(i=>i._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((i,o)=>[...i,...o._def.values.filter(r=>!i.includes(r))],[])};return Rde(e,t)}var Rde=(e,t)=>{let n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((i,o)=>xt(i._def,x(g({},t),{currentPath:[...t.currentPath,"anyOf",`${o}`]}))).filter(i=>!!i&&(!t.strictUnions||typeof i=="object"&&Object.keys(i).length>0));return n.length?{anyOf:n}:void 0};function Pde(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"||t.nullableStrategy==="property"?{type:mx[e.innerType._def.typeName],nullable:!0}:{type:[mx[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){let i=xt(e.innerType._def,x(g({},t),{currentPath:[...t.currentPath]}));return i&&"$ref"in i?{allOf:[i],nullable:!0}:i&&x(g({},i),{nullable:!0})}let n=xt(e.innerType._def,x(g({},t),{currentPath:[...t.currentPath,"anyOf","0"]}));return n&&{anyOf:[n,{type:"null"}]}}function Ade(e,t){let n={type:"number"};if(!e.checks)return n;for(let i of e.checks)switch(i.kind){case"int":n.type="integer",t$(n,"type",i.message,t);break;case"min":t.target==="jsonSchema7"?i.inclusive?pn(n,"minimum",i.value,i.message,t):pn(n,"exclusiveMinimum",i.value,i.message,t):(i.inclusive||(n.exclusiveMinimum=!0),pn(n,"minimum",i.value,i.message,t));break;case"max":t.target==="jsonSchema7"?i.inclusive?pn(n,"maximum",i.value,i.message,t):pn(n,"exclusiveMaximum",i.value,i.message,t):(i.inclusive||(n.exclusiveMaximum=!0),pn(n,"maximum",i.value,i.message,t));break;case"multipleOf":pn(n,"multipleOf",i.value,i.message,t);break}return n}function hWe(e,t){return t.removeAdditionalStrategy==="strict"?e.catchall._def.typeName==="ZodNever"?e.unknownKeys!=="strict":xt(e.catchall._def,x(g({},t),{currentPath:[...t.currentPath,"additionalProperties"]}))??!0:e.catchall._def.typeName==="ZodNever"?e.unknownKeys==="passthrough":xt(e.catchall._def,x(g({},t),{currentPath:[...t.currentPath,"additionalProperties"]}))??!0}function Ode(e,t){let n=x(g({type:"object"},Object.entries(e.shape()).reduce((i,[o,r])=>{if(r===void 0||r._def===void 0)return i;let s=[...t.currentPath,"properties",o],a=xt(r._def,x(g({},t),{currentPath:s,propertyPath:s}));if(a===void 0)return i;if(t.openaiStrictMode&&r.isOptional()&&!r.isNullable()&&typeof r._def?.defaultValue>"u")throw new Error(`Zod field at \`${s.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);return{properties:x(g({},i.properties),{[o]:a}),required:r.isOptional()&&!t.openaiStrictMode?i.required:[...i.required,o]}},{properties:{},required:[]})),{additionalProperties:hWe(e,t)});return n.required.length||delete n.required,n}var Fde=(e,t)=>{if(t.propertyPath&&t.currentPath.slice(0,t.propertyPath.length).toString()===t.propertyPath.toString())return xt(e.innerType._def,x(g({},t),{currentPath:t.currentPath}));let n=xt(e.innerType._def,x(g({},t),{currentPath:[...t.currentPath,"anyOf","1"]}));return n?{anyOf:[{not:{}},n]}:{}};var Lde=(e,t)=>{if(t.pipeStrategy==="input")return xt(e.in._def,t);if(t.pipeStrategy==="output")return xt(e.out._def,t);let n=xt(e.in._def,x(g({},t),{currentPath:[...t.currentPath,"allOf","0"]})),i=xt(e.out._def,x(g({},t),{currentPath:[...t.currentPath,"allOf",n?"1":"0"]}));return{allOf:[n,i].filter(o=>o!==void 0)}};function Nde(e,t){return xt(e.type._def,t)}function Bde(e,t){let i={type:"array",uniqueItems:!0,items:xt(e.valueType._def,x(g({},t),{currentPath:[...t.currentPath,"items"]}))};return e.minSize&&pn(i,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&pn(i,"maxItems",e.maxSize.value,e.maxSize.message,t),i}function zde(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,i)=>xt(n._def,x(g({},t),{currentPath:[...t.currentPath,"items",`${i}`]}))).reduce((n,i)=>i===void 0?n:[...n,i],[]),additionalItems:xt(e.rest._def,x(g({},t),{currentPath:[...t.currentPath,"additionalItems"]}))}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,i)=>xt(n._def,x(g({},t),{currentPath:[...t.currentPath,"items",`${i}`]}))).reduce((n,i)=>i===void 0?n:[...n,i],[])}}function Vde(){return{not:{}}}function Hde(){return{}}var $de=(e,t)=>xt(e.innerType._def,t);function xt(e,t,n=!1){let i=t.seen.get(e);if(t.override){let s=t.override?.(e,t,i,n);if(s!==dde)return s}if(i&&!n){let s=pWe(i,t);if(s!==void 0)return"$ref"in s&&t.seenRefs.add(s.$ref),s}let o={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,o);let r=mWe(e,e.typeName,t,n);return r&&gWe(e,t,r),o.jsonSchema=r,r}var pWe=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"extract-to-root":let n=e.path.slice(t.basePath.length+1).join("_");return n!==t.name&&t.nameStrategy==="duplicate-ref"&&(t.definitions[n]=e.def),{$ref:[...t.basePath,t.definitionPath,n].join("/")};case"relative":return{$ref:fWe(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((i,o)=>t.currentPath[o]===i)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},fWe=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},mWe=(e,t,n,i)=>{switch(t){case At.ZodString:return cT(e,n);case At.ZodNumber:return Ade(e,n);case At.ZodObject:return Ode(e,n);case At.ZodBigInt:return gde(e,n);case At.ZodBoolean:return vde();case At.ZodDate:return n$(e,n);case At.ZodUndefined:return Vde();case At.ZodNull:return Mde(n);case At.ZodArray:return mde(e,n);case At.ZodUnion:case At.ZodDiscriminatedUnion:return Tde(e,n);case At.ZodIntersection:return xde(e,n);case At.ZodTuple:return zde(e,n);case At.ZodRecord:return dT(e,n);case At.ZodLiteral:return Sde(e,n);case At.ZodEnum:return wde(e);case At.ZodNativeEnum:return kde(e);case At.ZodNullable:return Pde(e,n);case At.ZodOptional:return Fde(e,n);case At.ZodMap:return Dde(e,n);case At.ZodSet:return Bde(e,n);case At.ZodLazy:return xt(e.getter()._def,n);case At.ZodPromise:return Nde(e,n);case At.ZodNaN:case At.ZodNever:return Ide();case At.ZodEffects:return Cde(e,n,i);case At.ZodAny:return fde();case At.ZodUnknown:return Hde();case At.ZodDefault:return bde(e,n);case At.ZodBranded:return _de(e,n);case At.ZodReadonly:return $de(e,n);case At.ZodCatch:return yde(e,n);case At.ZodPipeline:return Lde(e,n);case At.ZodFunction:case At.ZodVoid:case At.ZodSymbol:return;default:return(o=>{})(t)}},gWe=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n);var o$=(e,t)=>{let n=pde(t),i=typeof t=="string"?t:t?.nameStrategy==="title"?void 0:t?.name,o=xt(e._def,i===void 0?n:x(g({},n),{currentPath:[...n.basePath,n.definitionPath,i]}),!1)??{},r=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;r!==void 0&&(o.title=r);let s=(()=>{if(hde(n.definitions))return;let l={},c=new Set;for(let u=0;u<500;u++){let h=Object.entries(n.definitions).filter(([f])=>!c.has(f));if(h.length===0)break;for(let[f,m]of h)l[f]=xt(fx(m),x(g({},n),{currentPath:[...n.basePath,n.definitionPath,f]}),!0)??{},c.add(f)}return l})(),a=i===void 0?s?x(g({},o),{[n.definitionPath]:s}):o:n.nameStrategy==="duplicate-ref"?g(g({},o),s||n.seenRefs.size?{[n.definitionPath]:g(g({},s),n.seenRefs.size?{[i]:o}:void 0)}:void 0):{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:x(g({},s),{[i]:o})};return n.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":n.target==="jsonSchema2019-09"&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),a};function jde(e){if(e.type!=="object")throw new Error(`Root schema must have type: 'object' but got type: ${e.type?`'${e.type}'`:"undefined"}`);let t=structuredClone(e);return _d(t,[],t)}function r$(e){if(typeof e=="boolean")return!1;if(e.type==="null")return!0;for(let t of e.oneOf??[])if(r$(t))return!0;for(let t of e.anyOf??[])if(r$(t))return!0;return!1}function _d(e,t,n){if(typeof e=="boolean")throw new TypeError(`Expected object schema but got boolean; path=${t.join("/")}`);if(!lf(e))throw new TypeError(`Expected ${JSON.stringify(e)} to be an object; path=${t.join("/")}`);let i=e.$defs;if(lf(i))for(let[f,m]of Object.entries(i))_d(m,[...t,"$defs",f],n);let o=e.definitions;if(lf(o))for(let[f,m]of Object.entries(o))_d(m,[...t,"definitions",f],n);e.type==="object"&&!("additionalProperties"in e)&&(e.additionalProperties=!1);let s=e.required??[],a=e.properties;if(lf(a)){for(let[f,m]of Object.entries(a))if(!r$(m)&&!s.includes(f))throw new Error(`Zod field at \`${[...t,"properties",f].join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);e.required=Object.keys(a),e.properties=Object.fromEntries(Object.entries(a).map(([f,m])=>[f,_d(m,[...t,"properties",f],n)]))}let l=e.items;lf(l)&&(e.items=_d(l,[...t,"items"],n));let c=e.anyOf;Array.isArray(c)&&(e.anyOf=c.map((f,m)=>_d(f,[...t,"anyOf",String(m)],n)));let u=e.allOf;if(Array.isArray(u))if(u.length===1){let f=_d(u[0],[...t,"allOf","0"],n);Object.assign(e,f),delete e.allOf}else e.allOf=u.map((f,m)=>_d(f,[...t,"allOf",String(m)],n));e.default===null&&delete e.default;let h=e.$ref;if(h&&_We(e,1)){if(typeof h!="string")throw new TypeError(`Received non-string $ref - ${h}; path=${t.join("/")}`);let f=vWe(n,h);if(typeof f=="boolean")throw new Error(`Expected \`$ref: ${h}\` to resolve to an object schema but got boolean`);if(!lf(f))throw new Error(`Expected \`$ref: ${h}\` to resolve to an object but got ${JSON.stringify(f)}`);return Object.assign(e,g(g({},f),e)),delete e.$ref,_d(e,t,n)}return e}function vWe(e,t){if(!t.startsWith("#/"))throw new Error(`Unexpected $ref format ${JSON.stringify(t)}; Does not start with #/`);let n=t.slice(2).split("/"),i=e;for(let o of n){if(!lf(i))throw new Error(`encountered non-object entry while resolving ${t} - ${JSON.stringify(i)}`);let r=i[o];if(r===void 0)throw new Error(`Key ${o} not found while resolving ${t}`);i=r}return i}function lf(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function _We(e,t){let n=0;for(let i in e)if(n++,n>t)return!0;return!1}function yWe(e,t){return o$(e,{openaiStrictMode:!0,name:t.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function bWe(e){return jde(lm(e,{target:"draft-7"}))}function CWe(e){return"_zod"in e}function Gde(e,t,n){return wce({type:"json_schema",json_schema:x(g({},n),{name:t,strict:!0,schema:CWe(e)?bWe(e):yWe(e,{name:t})})},i=>e.parse(JSON.parse(i)))}var Ude=["jsonSchema","functionCalling","jsonMode"];function Wde(e,t){if(typeof t<"u"&&!Ude.includes(t))throw new Error(`Invalid method: ${t}. Supported methods are: ${Ude.join(", ")}`);let n=!e.startsWith("gpt-3")&&!e.startsWith("gpt-4-")&&e!=="gpt-4";if(n&&!t)return"jsonSchema";if(!n&&t==="jsonSchema")throw new Error(`JSON Schema is not supported for model "${e}". Please use a different method, e.g. "functionCalling" or "jsonMode".`);return t??"functionCalling"}function wWe(e,t){let n=g({},e);return Object.defineProperties(n,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:t,enumerable:!1}}),n}function qde(e,t,n){if(pm(e))return Gde(e,t,n);if(kE(e))return wWe({type:"json_schema",json_schema:x(g({},n),{name:t,strict:!0,schema:Xi(e,{cycles:"ref",reused:"ref",override(i){i.jsonSchema.title=t}})})},i=>$S(e,JSON.parse(i)));throw new Error("Unsupported schema response format")}function Kde(e,t){if(t&&typeof t=="object"&&"images"in t&&Array.isArray(t.images)){let n=t.images.filter(i=>typeof i?.image_url?.url=="string").map(i=>({type:"image",url:i.image_url.url}));return[{type:"text",text:e},...n]}return e}var xWe={"gpt-4.1-nano":{maxInputTokens:1047576,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"text-embedding-3-small":{maxInputTokens:8191,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1536,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4":{maxInputTokens:8192,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o1-pro":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-2024-05-13":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-2024-08-06":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4.1-mini":{maxInputTokens:1047576,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o3-deep-research":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-3.5-turbo":{maxInputTokens:16385,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!1,imageUrlInputs:!1,pdfToolMessage:!1,imageToolMessage:!1,toolChoice:!0},"text-embedding-3-large":{maxInputTokens:8191,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:3072,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4-turbo":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o1-preview":{maxInputTokens:128e3,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o3-mini":{maxInputTokens:2e5,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"codex-mini-latest":{maxInputTokens:2e5,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-nano":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-codex":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4.1":{maxInputTokens:1047576,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o4-mini":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},o1:{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-mini":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o1-mini":{maxInputTokens:128e3,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"text-embedding-ada-002":{maxInputTokens:8192,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1536,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o3-pro":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-2024-11-20":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},o3:{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o4-mini-deep-research":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-chat-latest":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-mini":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-pro":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:272e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0}},Zde=xWe;var Yde=e=>e();function uT(e){let t=e.constructor;return new t(x(g({},e),{content:e.contentBlocks,response_metadata:x(g({},e.response_metadata),{output_version:"v1"})}))}var a$={};_t(a$,{BaseChatModel:()=>Gu,SimpleChatModel:()=>SWe});function s$(e){let t=[];for(let n of e){let i=n;if(Array.isArray(n.content))for(let o=0;o<n.content.length;o++){let r=n.content[o];(OW(r)||FW(r))&&i===n&&(i=new n.constructor(x(g({},i),{content:[...n.content.slice(0,o),LW(r),...n.content.slice(o+1)]})))}t.push(i)}return t}var Gu=class cf extends NE{lc_namespace=["langchain","chat_models",this._llmType()];disableStreaming=!1;outputVersion;get callKeys(){return[...super.callKeys,"outputVersion"]}constructor(t){super(t),this.outputVersion=Yde(()=>{let n=t.outputVersion??ls("LC_OUTPUT_VERSION");return n&&["v0","v1"].includes(n)?n:"v0"})}_separateRunnableConfigFromCallOptionsCompat(t){let[n,i]=super._separateRunnableConfigFromCallOptions(t);return i.signal=n.signal,[n,i]}invoke(t,n){return E(this,null,function*(){let i=cf._convertInputToPromptValue(t);return(yield this.generatePrompt([i],n,n?.callbacks)).generations[0][0].message})}_streamResponseChunks(t,n,i){return Bt(this,null,function*(){throw new Error("Not implemented.")})}_streamIterator(t,n){return Bt(this,null,function*(){if(this._streamResponseChunks===cf.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(t,n);else{let l=cf._convertInputToPromptValue(t).toChatMessages(),[c,u]=this._separateRunnableConfigFromCallOptionsCompat(n),h=g(g({},c.metadata),this.getLsParams(u)),f=yield new Ie(Vs.configure(c.callbacks,this.callbacks,c.tags,this.tags,h,this.metadata,{verbose:this.verbose})),m={options:u,invocation_params:this?.invocationParams(u),batch_size:1},_=u.outputVersion??this.outputVersion,y=yield new Ie(f?.handleChatModelStart(this.toJSON(),[s$(l)],c.runId,void 0,m,void 0,void 0,c.runName)),w,C;try{try{for(var i=lt(this._streamResponseChunks(l,u,y?.[0])),o,r,s;o=!(r=yield new Ie(i.next())).done;o=!1){let S=r.value;if(S.message.id==null){let I=y?.at(0)?.runId;I!=null&&S.message._updateId(`run-${I}`)}S.message.response_metadata=g(g({},S.generationInfo),S.message.response_metadata),_==="v1"?yield uT(S.message):yield S.message,w?w=w.concat(S):w=S,Zy(S.message)&&S.message.usage_metadata!==void 0&&(C={tokenUsage:{promptTokens:S.message.usage_metadata.input_tokens,completionTokens:S.message.usage_metadata.output_tokens,totalTokens:S.message.usage_metadata.total_tokens}})}}catch{s=[r]}finally{try{o&&(r=i.return)&&(yield new Ie(r.call(i)))}finally{if(s)throw s[0]}}}catch(S){throw yield new Ie(Promise.all((y??[]).map(I=>I?.handleLLMError(S)))),S}yield new Ie(Promise.all((y??[]).map(S=>S?.handleLLMEnd({generations:[[w]],llmOutput:C}))))}})}getLsParams(t){let n=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:t.stop,ls_provider:n}}_generateUncached(t,n,i,o){return E(this,null,function*(){let r=t.map(w=>w.map(wh)),s;if(o!==void 0&&o.length===r.length)s=o;else{let w=g(g({},i.metadata),this.getLsParams(n)),C=yield Vs.configure(i.callbacks,this.callbacks,i.tags,this.tags,w,this.metadata,{verbose:this.verbose}),S={options:n,invocation_params:this?.invocationParams(n),batch_size:1};s=yield C?.handleChatModelStart(this.toJSON(),r.map(s$),i.runId,void 0,S,void 0,void 0,i.runName)}let a=n.outputVersion??this.outputVersion,l=[],c=[];if(!!s?.[0].handlers.find(xE)&&!this.disableStreaming&&r.length===1&&this._streamResponseChunks!==cf.prototype._streamResponseChunks)try{let w=yield this._streamResponseChunks(r[0],n,s?.[0]),C,S;try{for(var f=lt(w),m,_,y;m=!(_=yield f.next()).done;m=!1){let I=_.value;if(I.message.id==null){let O=s?.at(0)?.runId;O!=null&&I.message._updateId(`run-${O}`)}C===void 0?C=I:C=DE(C,I),Zy(I.message)&&I.message.usage_metadata!==void 0&&(S={tokenUsage:{promptTokens:I.message.usage_metadata.input_tokens,completionTokens:I.message.usage_metadata.output_tokens,totalTokens:I.message.usage_metadata.total_tokens}})}}catch{y=[_]}finally{try{m&&(_=f.return)&&(yield _.call(f))}finally{if(y)throw y[0]}}if(C===void 0)throw new Error("Received empty response from chat model call.");l.push([C]),yield s?.[0].handleLLMEnd({generations:l,llmOutput:S})}catch(w){throw yield s?.[0].handleLLMError(w),w}else{let w=yield Promise.allSettled(r.map((C,S)=>E(this,null,function*(){let I=yield this._generate(C,x(g({},n),{promptIndex:S}),s?.[S]);if(a==="v1")for(let O of I.generations)O.message=uT(O.message);return I})));yield Promise.all(w.map((C,S)=>E(this,null,function*(){if(C.status==="fulfilled"){let I=C.value;for(let O of I.generations){if(O.message.id==null){let F=s?.at(0)?.runId;F!=null&&O.message._updateId(`run-${F}`)}O.message.response_metadata=g(g({},O.generationInfo),O.message.response_metadata)}return I.generations.length===1&&(I.generations[0].message.response_metadata=g(g({},I.llmOutput),I.generations[0].message.response_metadata)),l[S]=I.generations,c[S]=I.llmOutput,s?.[S]?.handleLLMEnd({generations:[I.generations],llmOutput:I.llmOutput})}else return yield s?.[S]?.handleLLMError(C.reason),Promise.reject(C.reason)})))}let h={generations:l,llmOutput:c.length?this._combineLLMOutput?.(...c):void 0};return Object.defineProperty(h,hm,{value:s?{runIds:s?.map(w=>w.runId)}:void 0,configurable:!0}),h})}_generateCached(s){return E(this,arguments,function*({messages:t,cache:n,llmStringKey:i,parsedOptions:o,handledOptions:r}){let a=t.map(S=>S.map(wh)),l=g(g({},r.metadata),this.getLsParams(o)),c=yield Vs.configure(r.callbacks,this.callbacks,r.tags,this.tags,l,this.metadata,{verbose:this.verbose}),u={options:o,invocation_params:this?.invocationParams(o),batch_size:1},h=yield c?.handleChatModelStart(this.toJSON(),a.map(s$),r.runId,void 0,u,void 0,void 0,r.runName),f=[],_=(yield Promise.allSettled(a.map((S,I)=>E(this,null,function*(){let O=cf._convertInputToPromptValue(S).toString(),F=yield n.lookup(O,i);return F==null&&f.push(I),F})))).map((S,I)=>({result:S,runManager:h?.[I]})).filter(({result:S})=>S.status==="fulfilled"&&S.value!=null||S.status==="rejected"),y=o.outputVersion??this.outputVersion,w=[];yield Promise.all(_.map((F,H)=>E(this,[F,H],function*({result:S,runManager:I},O){if(S.status==="fulfilled"){let j=S.value;return w[O]=j.map(re=>("message"in re&&uo(re.message)&&yr(re.message)&&(re.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0},y==="v1"&&(re.message=uT(re.message))),re.generationInfo=x(g({},re.generationInfo),{tokenUsage:{}}),re)),j.length&&(yield I?.handleLLMNewToken(j[0].text)),I?.handleLLMEnd({generations:[j]},void 0,void 0,void 0,{cached:!0})}else return yield I?.handleLLMError(S.reason,void 0,void 0,void 0,{cached:!0}),Promise.reject(S.reason)})));let C={generations:w,missingPromptIndices:f,startedRunManagers:h};return Object.defineProperty(C,hm,{value:h?{runIds:h?.map(S=>S.runId)}:void 0,configurable:!0}),C})}generate(t,n,i){return E(this,null,function*(){let o;Array.isArray(n)?o={stop:n}:o=n;let r=t.map(_=>_.map(wh)),[s,a]=this._separateRunnableConfigFromCallOptionsCompat(o);if(s.callbacks=s.callbacks??i,!this.cache)return this._generateUncached(r,a,s);let{cache:l}=this,c=this._getSerializedCacheKeyParametersForCall(a),{generations:u,missingPromptIndices:h,startedRunManagers:f}=yield this._generateCached({messages:r,cache:l,llmStringKey:c,parsedOptions:a,handledOptions:s}),m={};if(h.length>0){let _=yield this._generateUncached(h.map(y=>r[y]),a,s,f!==void 0?h.map(y=>f?.[y]):void 0);yield Promise.all(_.generations.map((y,w)=>E(this,null,function*(){let C=h[w];u[C]=y;let S=cf._convertInputToPromptValue(r[C]).toString();return l.update(S,c,y)}))),m=_.llmOutput??{}}return{generations:u,llmOutput:m}})}invocationParams(t){return{}}_modelType(){return"base_chat_model"}generatePrompt(t,n,i){return E(this,null,function*(){let o=t.map(r=>r.toChatMessages());return this.generate(o,n,i)})}withStructuredOutput(t,n){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(n?.strict)throw new Error('"strict" mode is not supported for this model by default.');let i=t,o=n?.name,r=Cc(i)??"A function available to call.",s=n?.method,a=n?.includeRaw;if(s==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let l=o??"extract",c;ds(i)?c=[{type:"function",function:{name:l,description:r,parameters:Xi(i)}}]:("name"in i&&(l=i.name),c=[{type:"function",function:{name:l,description:r,parameters:i}}]);let u=this.bindTools(c),h=To.from(y=>{if(!Jo.isInstance(y))throw new Error("Input is not an AIMessageChunk.");if(!y.tool_calls||y.tool_calls.length===0)throw new Error("No tool calls found in the response.");let w=y.tool_calls.find(C=>C.name===l);if(!w)throw new Error(`No tool call found with name ${l}.`);return w.args});if(!a)return u.pipe(h).withConfig({runName:"StructuredOutput"});let f=zd.assign({parsed:(y,w)=>h.invoke(y.raw,w)}),m=zd.assign({parsed:()=>null}),_=f.withFallbacks({fallbacks:[m]});return Ci.from([{raw:u},_]).withConfig({runName:"StructuredOutputRunnable"})}},SWe=class extends Gu{_generate(e,t,n){return E(this,null,function*(){let i=yield this._call(e,t,n),o=new ii(i);if(typeof o.content!="string")throw new Error("Cannot generate with a simple chat model when output is not a string.");return{generations:[{text:o.content,message:o}]}})}};function df(e,t){if(e.function===void 0)return;let n;if(t?.partial)try{n=Wy(e.function.arguments??"{}")}catch{return}else try{n=JSON.parse(e.function.arguments)}catch(o){throw new V2([`Function "${e.function.name}" arguments:`,"",e.function.arguments,"","are not valid JSON.",`Error: ${o.message}`].join(`
`))}let i={name:e.function.name,args:n,type:"tool_call"};return t?.returnId&&(i.id=e.id),i}function hT(e){if(e.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:e.id,type:"function",function:{name:e.name,arguments:JSON.stringify(e.args)}}}function Uu(e,t){return{name:e.function?.name,args:e.function?.arguments,id:e.id,error:t,type:"invalid_tool_call"}}var l$=class extends AE{static lc_name(){return"JsonOutputToolsParser"}returnId=!1;lc_namespace=["langchain","output_parsers","openai_tools"];lc_serializable=!0;constructor(e){super(e),this.returnId=e?.returnId??this.returnId}_diff(){throw new Error("Not supported.")}parse(){return E(this,null,function*(){throw new Error("Not implemented.")})}parseResult(e){return E(this,null,function*(){return yield this.parsePartialResult(e,!1)})}parsePartialResult(e,t=!0){return E(this,null,function*(){let n=e[0].message,i;if(yr(n)&&n.tool_calls?.length?i=n.tool_calls.map(r=>{let l=r,{id:s}=l,a=Be(l,["id"]);return this.returnId?g({id:s},a):a}):n.additional_kwargs.tool_calls!==void 0&&(i=JSON.parse(JSON.stringify(n.additional_kwargs.tool_calls)).map(s=>df(s,{returnId:this.returnId,partial:t}))),!i)return[];let o=[];for(let r of i)if(r!==void 0){let s={type:r.name,args:r.args,id:r.id};o.push(s)}return o})}},gx=class e extends l${static lc_name(){return"JsonOutputKeyToolsParser"}lc_namespace=["langchain","output_parsers","openai_tools"];lc_serializable=!0;returnId=!1;keyName;returnSingle=!1;zodSchema;constructor(t){super(t),this.keyName=t.keyName,this.returnSingle=t.returnSingle??this.returnSingle,this.zodSchema=t.zodSchema}_validateResult(t){return E(this,null,function*(){if(this.zodSchema===void 0)return t;let n=yield IE(this.zodSchema,t);if(n.success)return n.data;throw new V2(`Failed to parse. Text: "${JSON.stringify(t,null,2)}". Error: ${JSON.stringify(n.error?.issues)}`,JSON.stringify(t,null,2))})}parsePartialResult(t){return E(this,null,function*(){let i=(yield Wn(e.prototype,this,"parsePartialResult").call(this,t)).filter(r=>r.type===this.keyName),o=i;if(i.length)return this.returnId||(o=i.map(r=>r.args)),this.returnSingle?o[0]:o})}parseResult(t){return E(this,null,function*(){let i=(yield Wn(e.prototype,this,"parsePartialResult").call(this,t,!1)).filter(s=>s.type===this.keyName),o=i;return i.length?(this.returnId||(o=i.map(s=>s.args)),this.returnSingle?this._validateResult(o[0]):yield Promise.all(o.map(s=>this._validateResult(s)))):void 0})}};var c$={};_t(c$,{JsonOutputKeyToolsParser:()=>gx,JsonOutputToolsParser:()=>l$,convertLangChainToolCallToOpenAI:()=>hT,makeInvalidToolCall:()=>Uu,parseToolCall:()=>df});var uf=class e extends Gu{temperature;topP;frequencyPenalty;presencePenalty;n;logitBias;model="gpt-3.5-turbo";modelKwargs;stop;stopSequences;user;timeout;streaming=!1;streamUsage=!0;maxTokens;logprobs;topLogprobs;apiKey;organization;__includeRawResponse;client;clientConfig;supportsStrictToolCalling;audio;modalities;reasoning;zdrEnabled;service_tier;promptCacheKey;promptCacheRetention;verbosity;defaultOptions;_llmType(){return"openai"}static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed","reasoning","service_tier"]}lc_serializable=!0;get lc_secrets(){return{apiKey:"OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{apiKey:"openai_api_key",modelName:"model"}}get lc_serializable_keys(){return["configuration","logprobs","topLogprobs","prefixMessages","supportsStrictToolCalling","modalities","audio","temperature","maxTokens","topP","frequencyPenalty","presencePenalty","n","logitBias","user","streaming","streamUsage","model","modelName","modelKwargs","stop","stopSequences","timeout","apiKey","cache","maxConcurrency","maxRetries","verbose","callbacks","tags","metadata","disableStreaming","zdrEnabled","reasoning","promptCacheKey","promptCacheRetention","verbosity"]}getLsParams(t){let n=this.invocationParams(t);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:n.temperature??void 0,ls_max_tokens:n.max_tokens??void 0,ls_stop:t.stop}}_identifyingParams(){return g(g({model_name:this.model},this.invocationParams()),this.clientConfig)}identifyingParams(){return this._identifyingParams()}constructor(t){super(t??{});let n=typeof t?.configuration?.apiKey=="string"||typeof t?.configuration?.apiKey=="function"?t?.configuration?.apiKey:void 0;this.apiKey=t?.apiKey??n??ls("OPENAI_API_KEY"),this.organization=t?.configuration?.organization??ls("OPENAI_ORGANIZATION"),this.model=t?.model??t?.modelName??this.model,this.modelKwargs=t?.modelKwargs??{},this.timeout=t?.timeout,this.temperature=t?.temperature??this.temperature,this.topP=t?.topP??this.topP,this.frequencyPenalty=t?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=t?.presencePenalty??this.presencePenalty,this.logprobs=t?.logprobs,this.topLogprobs=t?.topLogprobs,this.n=t?.n??this.n,this.logitBias=t?.logitBias,this.stop=t?.stopSequences??t?.stop,this.stopSequences=this.stop,this.user=t?.user,this.__includeRawResponse=t?.__includeRawResponse,this.audio=t?.audio,this.modalities=t?.modalities,this.reasoning=t?.reasoning,this.maxTokens=t?.maxCompletionTokens??t?.maxTokens,this.promptCacheKey=t?.promptCacheKey??this.promptCacheKey,this.promptCacheRetention=t?.promptCacheRetention??this.promptCacheRetention,this.verbosity=t?.verbosity??this.verbosity,this.disableStreaming=t?.disableStreaming===!0,this.streaming=t?.streaming===!0,this.disableStreaming&&(this.streaming=!1),t?.streaming===!1&&(this.disableStreaming=!0),this.streamUsage=t?.streamUsage??this.streamUsage,this.disableStreaming&&(this.streamUsage=!1),this.clientConfig=g({apiKey:this.apiKey,organization:this.organization,dangerouslyAllowBrowser:!0},t?.configuration),t?.supportsStrictToolCalling!==void 0&&(this.supportsStrictToolCalling=t.supportsStrictToolCalling),t?.service_tier!==void 0&&(this.service_tier=t.service_tier),this.zdrEnabled=t?.zdrEnabled??!1}_getReasoningParams(t){if(!gd(this.model))return;let n;return this.reasoning!==void 0&&(n=g(g({},n),this.reasoning)),t?.reasoning!==void 0&&(n=g(g({},n),t.reasoning)),n}_getResponseFormat(t){return t&&t.type==="json_schema"&&t.json_schema.schema&&ds(t.json_schema.schema)?qde(t.json_schema.schema,t.json_schema.name,{description:t.json_schema.description}):t}_combineCallOptions(t){return g(g({},this.defaultOptions),t??{})}_getClientOptions(t){if(!this.client){let i={baseURL:this.clientConfig.baseURL},o=$u(i),r=x(g({},this.clientConfig),{baseURL:o,timeout:this.timeout,maxRetries:0});r.baseURL||delete r.baseURL,r.defaultHeaders=ju(r.defaultHeaders),this.client=new wt(r)}return g(g({},this.clientConfig),t)}_convertChatOpenAIToolToCompletionsTool(t,n){return sf(t)?lde(t.metadata.customTool):LE(t)?n?.strict!==void 0?x(g({},t),{function:x(g({},t.function),{strict:n.strict})}):t:Jce(t,n)}bindTools(t,n){let i;return n?.strict!==void 0?i=n.strict:this.supportsStrictToolCalling!==void 0&&(i=this.supportsStrictToolCalling),this.withConfig(g({tools:t.map(o=>y_(o)||sf(o)?o:tde(o)?o.extras.providerToolDefinition:this._convertChatOpenAIToolToCompletionsTool(o,{strict:i}))},n))}stream(t,n){return E(this,null,function*(){return Wn(e.prototype,this,"stream").call(this,t,this._combineCallOptions(n))})}invoke(t,n){return E(this,null,function*(){return Wn(e.prototype,this,"invoke").call(this,t,this._combineCallOptions(n))})}_combineLLMOutput(...t){return t.reduce((n,i)=>(i&&i.tokenUsage&&(n.tokenUsage.completionTokens+=i.tokenUsage.completionTokens??0,n.tokenUsage.promptTokens+=i.tokenUsage.promptTokens??0,n.tokenUsage.totalTokens+=i.tokenUsage.totalTokens??0),n),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}getNumTokensFromMessages(t){return E(this,null,function*(){let n=0,i=0,o=0;this.model==="gpt-3.5-turbo-0301"?(i=4,o=-1):(i=3,o=1);let r=yield Promise.all(t.map(s=>E(this,null,function*(){let a=yield this.getNumTokens(s.content),l=yield this.getNumTokens(vd(s)),c=s.name!==void 0?o+(yield this.getNumTokens(s.name)):0,u=a+i+l+c,h=s;if(h._getType()==="function"&&(u-=2),h.additional_kwargs?.function_call&&(u+=3),h?.additional_kwargs.function_call?.name&&(u+=yield this.getNumTokens(h.additional_kwargs.function_call?.name)),h.additional_kwargs.function_call?.arguments)try{u+=yield this.getNumTokens(JSON.stringify(JSON.parse(h.additional_kwargs.function_call?.arguments)))}catch(f){console.error("Error parsing function arguments",f,JSON.stringify(h.additional_kwargs.function_call)),u+=yield this.getNumTokens(h.additional_kwargs.function_call?.arguments)}return n+=u,u})));return n+=3,{totalCount:n,countPerMessage:r}})}_getNumTokensFromGenerations(t){return E(this,null,function*(){return(yield Promise.all(t.map(i=>E(this,null,function*(){return i.message.additional_kwargs?.function_call?(yield this.getNumTokensFromMessages([i.message])).countPerMessage[0]:yield this.getNumTokens(i.message.content)})))).reduce((i,o)=>i+o,0)})}_getEstimatedTokenCountFromPrompt(t,n,i){return E(this,null,function*(){let o=(yield this.getNumTokensFromMessages(t)).totalCount;if(n&&i!=="auto"){let r=Xce(n);o+=yield this.getNumTokens(r),o+=9}return n&&t.find(r=>r._getType()==="system")&&(o-=4),i==="none"?o+=1:typeof i=="object"&&(o+=(yield this.getNumTokens(i.name))+4),o})}moderateContent(t,n){return E(this,null,function*(){let i=this._getClientOptions(n?.options),o=n?.model??"omni-moderation-latest",r={input:t,model:o};return this.caller.call(()=>E(this,null,function*(){try{return yield this.client.moderations.create(r,i)}catch(s){throw ic(s)}}))})}get profile(){return Zde[this.model]??{}}_getStructuredOutputMethod(t){let n=g({},t);if(!this.model.startsWith("gpt-3")&&!this.model.startsWith("gpt-4-")&&this.model!=="gpt-4"){if(n?.method===void 0)return"jsonSchema"}else n.method==="jsonSchema"&&console.warn(`[WARNING]: JSON Schema is not supported for model "${this.model}". Falling back to tool calling.`);return n.method}withStructuredOutput(t,n){let i,o,{schema:r,name:s,includeRaw:a}=x(g({},n),{schema:t});if(n?.strict!==void 0&&n.method==="jsonMode")throw new Error("Argument `strict` is only supported for `method` = 'function_calling'");let l=Wde(this.model,n?.method);if(l==="jsonMode"){ds(r)?o=$2.fromZodSchema(r):o=new H2;let f=Xi(r);i=this.withConfig({outputVersion:"v0",response_format:{type:"json_object"},ls_structured_output_format:{kwargs:{method:"json_mode"},schema:g({title:s??"extract"},f)}})}else if(l==="jsonSchema"){let f={name:s??"extract",description:Cc(r),schema:r,strict:n?.strict},m=Xi(f.schema);if(i=this.withConfig({outputVersion:"v0",response_format:{type:"json_schema",json_schema:f},ls_structured_output_format:{kwargs:{method:"json_schema"},schema:g({title:f.name,description:f.description},m)}}),ds(r)){let _=$2.fromZodSchema(r);o=To.from(y=>"parsed"in y.additional_kwargs?y.additional_kwargs.parsed:_)}else o=new H2}else{let f=s??"extract";if(ds(r)){let m=Xi(r);i=this.withConfig(g({outputVersion:"v0",tools:[{type:"function",function:{name:f,description:m.description,parameters:m}}],tool_choice:{type:"function",function:{name:f}},ls_structured_output_format:{kwargs:{method:"function_calling"},schema:g({title:f},m)}},n?.strict!==void 0?{strict:n.strict}:{})),o=new gx({returnSingle:!0,keyName:f,zodSchema:r})}else{let m;typeof r.name=="string"&&typeof r.parameters=="object"&&r.parameters!=null?(m=r,f=r.name):(f=r.title??f,m={name:f,description:r.description??"",parameters:r});let _=Xi(r);i=this.withConfig(g({outputVersion:"v0",tools:[{type:"function",function:m}],tool_choice:{type:"function",function:{name:f}},ls_structured_output_format:{kwargs:{method:"function_calling"},schema:g({title:f},_)}},n?.strict!==void 0?{strict:n.strict}:{})),o=new gx({returnSingle:!0,keyName:f})}}if(!a)return i.pipe(o);let c=zd.assign({parsed:(f,m)=>o.invoke(f.raw,m)}),u=zd.assign({parsed:()=>null}),h=c.withFallbacks({fallbacks:[u]});return Ci.from([{raw:i},h])}};var pT={providerName:"ChatOpenAI",fromStandardTextBlock(e){return{type:"text",text:e.text}},fromStandardImageBlock(e){if(e.source_type==="url")return{type:"image_url",image_url:g({url:e.url},e.metadata?.detail?{detail:e.metadata.detail}:{})};if(e.source_type==="base64"){let t=`data:${e.mime_type??""};base64,${e.data}`;return{type:"image_url",image_url:g({url:t},e.metadata?.detail?{detail:e.metadata.detail}:{})}}throw new Error(`Image content blocks with source_type ${e.source_type} are not supported for ChatOpenAI`)},fromStandardAudioBlock(e){if(e.source_type==="url"){let t=P2({dataUrl:e.url});if(!t)throw new Error(`URL audio blocks with source_type ${e.source_type} must be formatted as a data URL for ChatOpenAI`);let n=t.mime_type||e.mime_type||"",i;try{i=T2(n)}catch{throw new Error(`Audio blocks with source_type ${e.source_type} must have mime type of audio/wav or audio/mp3`)}if(i.type!=="audio"||i.subtype!=="wav"&&i.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${e.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:i.subtype,data:t.data}}}if(e.source_type==="base64"){let t;try{t=T2(e.mime_type??"")}catch{throw new Error(`Audio blocks with source_type ${e.source_type} must have mime type of audio/wav or audio/mp3`)}if(t.type!=="audio"||t.subtype!=="wav"&&t.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${e.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:t.subtype,data:e.data}}}throw new Error(`Audio content blocks with source_type ${e.source_type} are not supported for ChatOpenAI`)},fromStandardFileBlock(e){if(e.source_type==="url"){let t=P2({dataUrl:e.url}),n=__(e);if(!t)throw new Error(`URL file blocks with source_type ${e.source_type} must be formatted as a data URL for ChatOpenAI`);return{type:"file",file:g({file_data:e.url},e.metadata?.filename||e.metadata?.name?{filename:n}:{})}}if(e.source_type==="base64"){let t=__(e);return{type:"file",file:g({file_data:`data:${e.mime_type??""};base64,${e.data}`},e.metadata?.filename||e.metadata?.name||e.metadata?.title?{filename:t}:{})}}if(e.source_type==="id")return{type:"file",file:{file_id:e.id}};throw new Error(`File content blocks with source_type ${e.source_type} are not supported for ChatOpenAI`)}},d$=({message:e,rawResponse:t,includeRawResponse:n})=>{let i=e.tool_calls;switch(e.role){case"assistant":{let o=[],r=[];for(let c of i??[])try{o.push(df(c,{returnId:!0}))}catch(u){r.push(Uu(c,u.message))}let s={function_call:e.function_call,tool_calls:i};n!==void 0&&(s.__raw_response=t);let a=g({model_provider:"openai",model_name:t.model},t.system_fingerprint?{usage:g({},t.usage),system_fingerprint:t.system_fingerprint}:{});e.audio&&(s.audio=e.audio);let l=Kde(e.content||"",t.choices?.[0]?.message);return new ii({content:l,tool_calls:o,invalid_tool_calls:r,additional_kwargs:s,response_metadata:a,id:t.id})}default:return new CE(e.content||"",e.role??"unknown")}},u$=({delta:e,rawResponse:t,includeRawResponse:n,defaultRole:i})=>{let o=e.role??i,r=e.content??"",s;e.function_call?s={function_call:e.function_call}:e.tool_calls?s={tool_calls:e.tool_calls}:s={},n&&(s.__raw_response=t),e.audio&&(s.audio=x(g({},e.audio),{index:t.choices[0].index}));let a={model_provider:"openai",usage:g({},t.usage)};if(o==="user")return new $W({content:r,response_metadata:a});if(o==="assistant"){let l=[];if(Array.isArray(e.tool_calls))for(let c of e.tool_calls)l.push({name:c.function?.name,args:c.function?.arguments,id:c.id,index:c.index,type:"tool_call_chunk"});return new Jo({content:r,tool_call_chunks:l,additional_kwargs:s,id:t.id,response_metadata:a})}else return o==="system"?new A2({content:r,response_metadata:a}):o==="developer"?new A2({content:r,response_metadata:a,additional_kwargs:{__openai_role__:"developer"}}):o==="function"?new HW({content:r,additional_kwargs:s,name:e.name,response_metadata:a}):o==="tool"?new zW({content:r,additional_kwargs:s,tool_call_id:e.tool_call_id,response_metadata:a}):new VW({content:r,role:o,response_metadata:a})},Qde=e=>{if(e.type==="image"){if(e.url)return{type:"image_url",image_url:{url:e.url}};if(e.data)return{type:"image_url",image_url:{url:`data:${e.mimeType};base64,${e.data}`}}}if(e.type==="audio"&&e.data){let t=jW(()=>{let[,n]=e.mimeType.split("/");return n==="wav"||n==="mp3"?n:"wav"});return{type:"input_audio",input_audio:{data:e.data.toString(),format:t}}}if(e.type==="file"){if(e.data){let t=__(e);return{type:"file",file:{file_data:`data:${e.mimeType};base64,${e.data}`,filename:t}}}if(e.fileId)return{type:"file",file:{file_id:e.fileId}}}},Jde=({message:e,model:t})=>{let n=vd(e);if(n==="system"&&gd(t)&&(n="developer"),n==="developer")return{role:"developer",content:e.contentBlocks.filter(o=>o.type==="text")};if(n==="system")return{role:"system",content:e.contentBlocks.filter(o=>o.type==="text")};if(n==="assistant")return{role:"assistant",content:e.contentBlocks.filter(o=>o.type==="text")};if(n==="tool"&&zs.isInstance(e))return{role:"tool",tool_call_id:e.tool_call_id,content:e.contentBlocks.filter(o=>o.type==="text")};if(n==="function")return{role:"function",name:e.name??"",content:e.contentBlocks.filter(o=>o.type==="text").join("")};function*i(o){for(let r of o){r.type==="text"&&(yield{type:"text",text:r.text});let s=Qde(r);s&&(yield s)}}return{role:"user",content:Array.from(i(e.contentBlocks))}},vx=({messages:e,model:t})=>e.flatMap(n=>{if("output_version"in n.response_metadata&&n.response_metadata?.output_version==="v1")return Jde({message:n});let i=vd(n);i==="system"&&gd(t)&&(i="developer");let o=typeof n.content=="string"?n.content:n.content.map(s=>yE(s)?bE(s,pT):s),r={role:i,content:o};if(n.name!=null&&(r.name=n.name),n.additional_kwargs.function_call!=null&&(r.function_call=n.additional_kwargs.function_call),ii.isInstance(n)&&n.tool_calls?.length?r.tool_calls=n.tool_calls.map(hT):(n.additional_kwargs.tool_calls!=null&&(r.tool_calls=n.additional_kwargs.tool_calls),zs.isInstance(n)&&n.tool_call_id!=null&&(r.tool_call_id=n.tool_call_id)),n.additional_kwargs.audio&&typeof n.additional_kwargs.audio=="object"&&"id"in n.additional_kwargs.audio){let s={role:"assistant",audio:{id:n.additional_kwargs.audio.id}};return[r,s]}return r});var fT=class extends uf{invocationParams(e,t){let n;e?.strict!==void 0?n=e.strict:this.supportsStrictToolCalling!==void 0&&(n=this.supportsStrictToolCalling);let i={};e?.stream_options!==void 0?i={stream_options:e.stream_options}:this.streamUsage&&(this.streaming||t?.streaming)&&(i={stream_options:{include_usage:!0}});let o=x(g(g(g(x(g({model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:e?.stop??this.stopSequences,user:this.user,stream:this.streaming,functions:e?.functions,function_call:e?.function_call,tools:e?.tools?.length?e.tools.map(s=>this._convertChatOpenAIToolToCompletionsTool(s,{strict:n})):void 0,tool_choice:aT(e?.tool_choice),response_format:this._getResponseFormat(e?.response_format),seed:e?.seed},i),{parallel_tool_calls:e?.parallel_tool_calls}),this.audio||e?.audio?{audio:this.audio||e?.audio}:{}),this.modalities||e?.modalities?{modalities:this.modalities||e?.modalities}:{}),this.modelKwargs),{prompt_cache_key:e?.promptCacheKey??this.promptCacheKey,prompt_cache_retention:e?.promptCacheRetention??this.promptCacheRetention,verbosity:e?.verbosity??this.verbosity});e?.prediction!==void 0&&(o.prediction=e.prediction),this.service_tier!==void 0&&(o.service_tier=this.service_tier),e?.service_tier!==void 0&&(o.service_tier=e.service_tier);let r=this._getReasoningParams(e);return r!==void 0&&r.effort!==void 0&&(o.reasoning_effort=r.effort),gd(o.model)?o.max_completion_tokens=this.maxTokens===-1?void 0:this.maxTokens:o.max_tokens=this.maxTokens===-1?void 0:this.maxTokens,o}_generate(e,t,n){return E(this,null,function*(){let i={},o=this.invocationParams(t),r=vx({messages:e,model:this.model});if(o.stream){let u=this._streamResponseChunks(e,t,n),h={};try{for(var s=lt(u),a,l,c;a=!(l=yield s.next()).done;a=!1){let C=l.value;C.message.response_metadata=g(g({},C.generationInfo),C.message.response_metadata);let S=C.generationInfo?.completion??0;h[S]===void 0?h[S]=C:h[S]=h[S].concat(C)}}catch{c=[l]}finally{try{a&&(l=s.return)&&(yield l.call(s))}finally{if(c)throw c[0]}}let f=Object.entries(h).sort(([C],[S])=>parseInt(C,10)-parseInt(S,10)).map(([C,S])=>S),{functions:m,function_call:_}=this.invocationParams(t),y=yield this._getEstimatedTokenCountFromPrompt(e,m,_),w=yield this._getNumTokensFromGenerations(f);return i.input_tokens=y,i.output_tokens=w,i.total_tokens=y+w,{generations:f,llmOutput:{estimatedTokenUsage:{promptTokens:i.input_tokens,completionTokens:i.output_tokens,totalTokens:i.total_tokens}}}}else{let u=yield this.completionWithRetry(x(g({},o),{stream:!1,messages:r}),g({signal:t?.signal},t?.options)),{completion_tokens:h,prompt_tokens:f,total_tokens:m,prompt_tokens_details:_,completion_tokens_details:y}=u?.usage??{};h&&(i.output_tokens=(i.output_tokens??0)+h),f&&(i.input_tokens=(i.input_tokens??0)+f),m&&(i.total_tokens=(i.total_tokens??0)+m),(_?.audio_tokens!==null||_?.cached_tokens!==null)&&(i.input_token_details=g(g({},_?.audio_tokens!==null&&{audio:_?.audio_tokens}),_?.cached_tokens!==null&&{cache_read:_?.cached_tokens})),(y?.audio_tokens!==null||y?.reasoning_tokens!==null)&&(i.output_token_details=g(g({},y?.audio_tokens!==null&&{audio:y?.audio_tokens}),y?.reasoning_tokens!==null&&{reasoning:y?.reasoning_tokens}));let w=[];for(let C of u?.choices??[]){let I={text:C.message?.content??"",message:this._convertCompletionsMessageToBaseMessage(C.message??{role:"assistant"},u)};I.generationInfo=g(g({},C.finish_reason?{finish_reason:C.finish_reason}:{}),C.logprobs?{logprobs:C.logprobs}:{}),yr(I.message)&&(I.message.usage_metadata=i),I.message=new ii(Object.fromEntries(Object.entries(I.message).filter(([O])=>!O.startsWith("lc_")))),w.push(I)}return{generations:w,llmOutput:{tokenUsage:{promptTokens:i.input_tokens,completionTokens:i.output_tokens,totalTokens:i.total_tokens}}}}})}_streamResponseChunks(e,t,n){return Bt(this,null,function*(){let i=vx({messages:e,model:this.model}),o=x(g({},this.invocationParams(t,{streaming:!0})),{messages:i,stream:!0}),r,s=yield new Ie(this.completionWithRetry(o,t)),a;try{for(var l=lt(s),c,u,h;c=!(u=yield new Ie(l.next())).done;c=!1){let f=u.value;let m=f?.choices?.[0];if(f.usage&&(a=f.usage),!m)continue;let{delta:_}=m;if(!_)continue;let y=this._convertCompletionsDeltaToBaseMessageChunk(_,f,r);r=_.role??r;let w={prompt:t.promptIndex??0,completion:m.index??0};if(typeof y.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}let C=g({},w);m.finish_reason!=null&&(C.finish_reason=m.finish_reason,C.system_fingerprint=f.system_fingerprint,C.model_name=f.model,C.service_tier=f.service_tier),this.logprobs&&(C.logprobs=m.logprobs);let S=new bc({message:y,text:y.content,generationInfo:C});yield S,yield new Ie(n?.handleLLMNewToken(S.text??"",w,void 0,void 0,void 0,{chunk:S}))}}catch{h=[u]}finally{try{c&&(u=l.return)&&(yield new Ie(u.call(l)))}finally{if(h)throw h[0]}}if(a){let f=g(g({},a.prompt_tokens_details?.audio_tokens!==null&&{audio:a.prompt_tokens_details?.audio_tokens}),a.prompt_tokens_details?.cached_tokens!==null&&{cache_read:a.prompt_tokens_details?.cached_tokens}),m=g(g({},a.completion_tokens_details?.audio_tokens!==null&&{audio:a.completion_tokens_details?.audio_tokens}),a.completion_tokens_details?.reasoning_tokens!==null&&{reasoning:a.completion_tokens_details?.reasoning_tokens});yield new bc({message:new Jo({content:"",response_metadata:{usage:g({},a)},usage_metadata:g(g({input_tokens:a.prompt_tokens,output_tokens:a.completion_tokens,total_tokens:a.total_tokens},Object.keys(f).length>0&&{input_token_details:f}),Object.keys(m).length>0&&{output_token_details:m})}),text:""})}if(t.signal?.aborted)throw new Error("AbortError")})}completionWithRetry(e,t){return E(this,null,function*(){let n=this._getClientOptions(t),i=e.response_format&&e.response_format.type==="json_schema";return this.caller.call(()=>E(this,null,function*(){try{return i&&!e.stream?yield this.client.chat.completions.parse(e,n):yield this.client.chat.completions.create(e,n)}catch(o){throw ic(o)}}))})}_convertCompletionsDeltaToBaseMessageChunk(e,t,n){return u$({delta:e,rawResponse:t,includeRawResponse:this.__includeRawResponse,defaultRole:n})}_convertCompletionsMessageToBaseMessage(e,t){return d$({message:e,rawResponse:t,includeRawResponse:this.__includeRawResponse})}};var mT="__openai_function_call_ids__",h$=e=>{let t=g({},e?.input_tokens_details?.cached_tokens!=null&&{cache_read:e?.input_tokens_details?.cached_tokens}),n=g({},e?.output_tokens_details?.reasoning_tokens!=null&&{reasoning:e?.output_tokens_details?.reasoning_tokens});return{input_tokens:e?.input_tokens??0,output_tokens:e?.output_tokens??0,total_tokens:e?.total_tokens??0,input_token_details:t,output_token_details:n}},gT=e=>{if(e.error){let a=new Error(e.error.message);throw a.name=e.error.code,a}let t,n=[],i=[],o=[],r={model_provider:"openai",model:e.model,created_at:e.created_at,id:e.id,incomplete_details:e.incomplete_details,metadata:e.metadata,object:e.object,status:e.status,user:e.user,service_tier:e.service_tier,model_name:e.model},s={};for(let a of e.output)if(a.type==="message")t=a.id,n.push(...a.content.flatMap(l=>l.type==="output_text"?("parsed"in l&&l.parsed!=null&&(s.parsed=l.parsed),{type:"text",text:l.text,annotations:l.annotations}):l.type==="refusal"?(s.refusal=l.refusal,[]):l));else if(a.type==="function_call"){let l={function:{name:a.name,arguments:a.arguments},id:a.call_id};try{i.push(df(l,{returnId:!0}))}catch(c){let u;typeof c=="object"&&c!=null&&"message"in c&&typeof c.message=="string"&&(u=c.message),o.push(Uu(l,u))}s[mT]??={},a.id&&(s[mT][a.call_id]=a.id)}else if(a.type==="reasoning")s.reasoning=a;else if(a.type==="custom_tool_call"){let l=ide(a);l?i.push(l):o.push(Uu(a,"Malformed custom tool call"))}else if(a.type==="computer_call"){let l=ode(a);l?i.push(l):o.push(Uu(a,"Malformed computer call"))}else s.tool_outputs??=[],s.tool_outputs.push(a);return new ii({id:t,content:n,tool_calls:i,invalid_tool_calls:o,usage_metadata:h$(e.usage),additional_kwargs:s,response_metadata:r})},oue=e=>{let t=(e.summary.length>1?e.summary.reduce((n,i)=>{let o=n[n.length-1];return o.index===i.index?o.text+=i.text:n.push(i),n},[g({},e.summary[0])]):e.summary).map(n=>Object.fromEntries(Object.entries(n).filter(([i])=>i!=="index")));return x(g({},e),{summary:t})},p$=e=>{let t=[],n={},i,o=[],r={model_provider:"openai"},s={},a;if(e.type==="response.output_text.delta")t.push({type:"text",text:e.delta,index:e.content_index});else if(e.type==="response.output_text.annotation.added")t.push({type:"text",text:"",annotations:[e.annotation],index:e.content_index});else if(e.type==="response.output_item.added"&&e.item.type==="message")a=e.item.id;else if(e.type==="response.output_item.added"&&e.item.type==="function_call")o.push({type:"tool_call_chunk",name:e.item.name,args:e.item.arguments,id:e.item.call_id,index:e.output_index}),s[mT]={[e.item.call_id]:e.item.id};else if(e.type==="response.output_item.done"&&e.item.type==="computer_call")o.push({type:"tool_call_chunk",name:"computer_use",args:JSON.stringify({action:e.item.action}),id:e.item.call_id,index:e.output_index}),s.tool_outputs=[e.item];else if(e.type==="response.output_item.done"&&["web_search_call","file_search_call","code_interpreter_call","mcp_call","mcp_list_tools","mcp_approval_request","image_generation_call","custom_tool_call"].includes(e.item.type))s.tool_outputs=[e.item];else if(e.type==="response.created")r.id=e.response.id,r.model_name=e.response.model,r.model=e.response.model;else if(e.type==="response.completed"){let l=gT(e.response);i=h$(e.response.usage),e.response.text?.format?.type==="json_schema"&&(s.parsed??=JSON.parse(l.text));for(let[c,u]of Object.entries(e.response))c!=="id"&&(r[c]=u)}else if(e.type==="response.function_call_arguments.delta"||e.type==="response.custom_tool_call_input.delta")o.push({type:"tool_call_chunk",args:e.delta,index:e.output_index});else if(e.type==="response.web_search_call.completed"||e.type==="response.file_search_call.completed")n={tool_outputs:{id:e.item_id,type:e.type.replace("response.","").replace(".completed",""),status:"completed"}};else if(e.type==="response.refusal.done")s.refusal=e.refusal;else if(e.type==="response.output_item.added"&&"item"in e&&e.item.type==="reasoning"){let l=e.item.summary?e.item.summary.map((c,u)=>x(g({},c),{index:u})):void 0;s.reasoning=g({id:e.item.id,type:e.item.type},l?{summary:l}:{})}else if(e.type==="response.reasoning_summary_part.added")s.reasoning={type:"reasoning",summary:[x(g({},e.part),{index:e.summary_index})]};else if(e.type==="response.reasoning_summary_text.delta")s.reasoning={type:"reasoning",summary:[{text:e.delta,type:"summary_text",index:e.summary_index}]};else return e.type==="response.image_generation_call.partial_image",null;return new bc({text:t.map(l=>l.text).join(""),message:new Jo({id:a,content:t,tool_call_chunks:o,usage_metadata:i,additional_kwargs:s,response_metadata:r}),generationInfo:n})},rue=e=>{let t=ii.isInstance(e)&&e.response_metadata?.model_provider==="openai";function*n(){let i=md(()=>{try{let C=vd(e);return C==="system"||C==="developer"||C==="assistant"||C==="user"?C:"assistant"}catch{return"assistant"}}),o,r=new Set,s=new Set,a=new Map,l=new Map;function*c(){if(!o)return;let C=o.content;(typeof C=="string"&&C.length>0||Array.isArray(C)&&C.length>0)&&(yield o),o=void 0}let u=C=>{o||(o={type:"message",role:i,content:[]}),typeof o.content=="string"?o.content=o.content.length>0?[{type:"input_text",text:o.content},...C]:[...C]:o.content.push(...C)},h=C=>{if(typeof C=="string")return C;try{return JSON.stringify(C??{})}catch{return"{}"}},f=C=>{let S=md(()=>{let I=C.metadata?.detail;return I==="low"||I==="high"||I==="auto"?I:"auto"});if(C.fileId)return{type:"input_image",detail:S,file_id:C.fileId};if(C.url)return{type:"input_image",detail:S,image_url:C.url};if(C.data){let I=typeof C.data=="string"?C.data:Buffer.from(C.data).toString("base64"),O=C.mimeType??"image/png";return{type:"input_image",detail:S,image_url:`data:${O};base64,${I}`}}},m=C=>{let S=__(C);if(C.fileId&&typeof S=="string")return g({type:"input_file",file_id:C.fileId},S?{filename:S}:{});if(C.url&&typeof S=="string")return g({type:"input_file",file_url:C.url},S?{filename:S}:{});if(C.data&&typeof S=="string"){let I=typeof C.data=="string"?C.data:Buffer.from(C.data).toString("base64"),O=C.mimeType??"application/octet-stream";return g({type:"input_file",file_data:`data:${O};base64,${I}`},S?{filename:S}:{})}},_=C=>{let S=md(()=>{if(Array.isArray(C.summary)){let H=C.summary?.map(j=>j?.text).filter(j=>typeof j=="string")??[];if(H.length>0)return H}return C.reasoning?[C.reasoning]:[]}),I=S.length>0?S.map(F=>({type:"summary_text",text:F})):[{type:"summary_text",text:""}],O={type:"reasoning",id:C.id??"",summary:I};return C.reasoning&&(O.content=[{type:"reasoning_text",text:C.reasoning}]),O},y=C=>({type:"function_call",name:C.name??"",call_id:C.id??"",arguments:h(C.args)}),w=C=>{let S=h(C.output),I=C.status==="success"?"completed":C.status==="error"?"incomplete":void 0;return g({type:"function_call_output",call_id:C.toolCallId??"",output:S},I?{status:I}:{})};for(let C of e.contentBlocks)if(C.type==="text")u([{type:"input_text",text:C.text}]);else if(C.type!=="invalid_tool_call"){if(C.type==="reasoning")yield*co(c()),yield _(C);else if(C.type==="tool_call"){yield*co(c());let S=C.id??"";S&&(r.add(S),a.delete(S)),yield y(C)}else if(C.type==="tool_call_chunk"){if(C.id){let S=a.get(C.id)??{name:C.name,args:[]};C.name&&(S.name=C.name),C.args&&S.args.push(C.args),a.set(C.id,S)}}else if(C.type==="server_tool_call"){yield*co(c());let S=C.id??"";S&&(s.add(S),l.delete(S)),yield y(C)}else if(C.type==="server_tool_call_chunk"){if(C.id){let S=l.get(C.id)??{name:C.name,args:[]};C.name&&(S.name=C.name),C.args&&S.args.push(C.args),l.set(C.id,S)}}else if(C.type==="server_tool_call_result")yield*co(c()),yield w(C);else if(C.type!=="audio")if(C.type==="file"){let S=m(C);S&&u([S])}else if(C.type==="image"){let S=f(C);S&&u([S])}else if(C.type==="video"){let S=m(C);S&&u([S])}else C.type==="text-plain"?C.text&&u([{type:"input_text",text:C.text}]):C.type==="non_standard"&&t&&(yield*co(c()),yield C.value)}yield*co(c());for(let[C,S]of a){if(!C||r.has(C))continue;let I=S.args.join("");!S.name&&!I||(yield{type:"function_call",call_id:C,name:S.name??"",arguments:I})}for(let[C,S]of l){if(!C||s.has(C))continue;let I=S.args.join("");!S.name&&!I||(yield{type:"function_call",call_id:C,name:S.name??"",arguments:I})}}return Array.from(n())},vT=({messages:e,zdrEnabled:t,model:n})=>e.flatMap(i=>{let o=i.response_metadata;if(o?.output_version==="v1")return rue(i);let r=i.additional_kwargs,s=vd(i);if(s==="system"&&gd(n)&&(s="developer"),s==="function")throw new Error("Function messages are not supported in Responses API");if(s==="tool"){let a=i;return r?.type==="computer_call_output"?{type:"computer_call_output",output:(()=>{if(typeof a.content=="string")return{type:"input_image",image_url:a.content};if(Array.isArray(a.content)){let c=a.content.find(f=>f.type==="input_image");if(c)return c;let u=a.content.find(f=>f.type==="computer_screenshot");if(u)return u;let h=a.content.find(f=>f.type==="image_url");if(h)return{type:"input_image",image_url:typeof h.image_url=="string"?h.image_url:h.image_url.url}}throw new Error("Invalid computer call output")})(),call_id:a.tool_call_id}:a.additional_kwargs?.customTool?{type:"custom_tool_call_output",call_id:a.tool_call_id,output:a.content}:{type:"function_call_output",call_id:a.tool_call_id,id:a.id?.startsWith("fc_")?a.id:void 0,output:typeof a.content!="string"?JSON.stringify(a.content):a.content}}if(s==="assistant"){if(!t&&o?.output!=null&&Array.isArray(o?.output)&&o?.output.length>0&&o?.output.every(f=>"type"in f))return o?.output;let a=[];if(r?.reasoning&&!t){let f=oue(r.reasoning);a.push(f)}let{content:l}=i;r?.refusal&&(typeof l=="string"&&(l=[{type:"output_text",text:l,annotations:[]}]),l=[...l,{type:"refusal",refusal:r.refusal}]),(typeof l=="string"||l.length>0)&&a.push(x(g({type:"message",role:"assistant"},i.id&&!t&&i.id.startsWith("msg_")?{id:i.id}:{}),{content:md(()=>typeof l=="string"?l:l.flatMap(f=>f.type==="text"?{type:"output_text",text:f.text,annotations:f.annotations??[]}:f.type==="output_text"||f.type==="refusal"?f:[]))}));let c=r?.[mT];ii.isInstance(i)&&i.tool_calls?.length?a.push(...i.tool_calls.map(f=>sde(f)?{type:"custom_tool_call",id:f.call_id,call_id:f.id??"",input:f.args.input,name:f.name}:rde(f)?{type:"computer_call",id:f.call_id,call_id:f.id??"",action:f.args.action}:g({type:"function_call",name:f.name,arguments:JSON.stringify(f.args),call_id:f.id},t?{}:{id:c?.[f.id]}))):r?.tool_calls&&a.push(...r.tool_calls.map(f=>g({type:"function_call",name:f.function.name,call_id:f.id,arguments:f.function.arguments},t?{}:{id:c?.[f.id]})));let u=o?.output?.length?o?.output:r.tool_outputs,h=["computer_call","mcp_call","code_interpreter_call","image_generation_call"];if(u!=null){let m=u?.filter(_=>h.includes(_.type));m.length>0&&a.push(...m)}return a}if(s==="user"||s==="system"||s==="developer"){if(typeof i.content=="string")return{type:"message",role:s,content:i.content};let a=[],l=i.content.flatMap(c=>{if(c.type==="mcp_approval_response"&&a.push({type:"mcp_approval_response",approval_request_id:c.approval_request_id,approve:c.approve}),yE(c))return bE(c,pT);if(c.type==="text")return{type:"input_text",text:c.text};if(c.type==="image_url"){let u=md(()=>{if(typeof c.image_url=="string")return c.image_url;if(typeof c.image_url=="object"&&c.image_url!==null&&"url"in c.image_url)return c.image_url.url}),h=md(()=>{if(typeof c.image_url=="string")return"auto";if(typeof c.image_url=="object"&&c.image_url!==null&&"detail"in c.image_url)return c.image_url.detail});return{type:"input_image",image_url:u,detail:h}}return c.type==="input_text"||c.type==="input_image"||c.type==="input_file"?c:[]});return l.length>0&&a.push({type:"message",role:s,content:l}),a}return console.warn(`Unsupported role found when converting to OpenAI Responses API: ${s}`),[]});var _T=class extends uf{invocationParams(e){let t;e?.strict!==void 0&&(t=e.strict),t===void 0&&this.supportsStrictToolCalling!==void 0&&(t=this.supportsStrictToolCalling);let n=g(g({model:this.model,temperature:this.temperature,top_p:this.topP,user:this.user,stream:this.streaming,previous_response_id:e?.previous_response_id,truncation:e?.truncation,include:e?.include,tools:e?.tools?.length?this._reduceChatOpenAITools(e.tools,{stream:this.streaming,strict:t}):void 0,tool_choice:nde(e?.tool_choice)?e?.tool_choice:(()=>{let o=aT(e?.tool_choice);if(typeof o=="object"&&"type"in o){if(o.type==="function")return{type:"function",name:o.function.name};if(o.type==="allowed_tools")return{type:"allowed_tools",mode:o.allowed_tools.mode,tools:o.allowed_tools.tools};if(o.type==="custom")return{type:"custom",name:o.custom.name}}})(),text:(()=>{if(e?.text)return e.text;let o=this._getResponseFormat(e?.response_format);return o?.type==="json_schema"?o.json_schema.schema!=null?{format:{type:"json_schema",schema:o.json_schema.schema,description:o.json_schema.description,name:o.json_schema.name,strict:o.json_schema.strict},verbosity:e?.verbosity}:void 0:{format:o,verbosity:e?.verbosity}})(),parallel_tool_calls:e?.parallel_tool_calls,max_output_tokens:this.maxTokens===-1?void 0:this.maxTokens,prompt_cache_key:e?.promptCacheKey??this.promptCacheKey,prompt_cache_retention:e?.promptCacheRetention??this.promptCacheRetention},this.zdrEnabled?{store:!1}:{}),this.modelKwargs),i=this._getReasoningParams(e);return i!==void 0&&(n.reasoning=i),n}_generate(e,t){return E(this,null,function*(){let n=this.invocationParams(t);if(n.stream){let a=this._streamResponseChunks(e,t),l;try{for(var i=lt(a),o,r,s;o=!(r=yield i.next()).done;o=!1){let c=r.value;c.message.response_metadata=g(g({},c.generationInfo),c.message.response_metadata),l=l?.concat(c)??c}}catch{s=[r]}finally{try{o&&(r=i.return)&&(yield r.call(i))}finally{if(s)throw s[0]}}return{generations:l?[l]:[],llmOutput:{estimatedTokenUsage:l?.message?.usage_metadata}}}else{let a=yield this.completionWithRetry(x(g({input:vT({messages:e,zdrEnabled:this.zdrEnabled??!1,model:this.model})},n),{stream:!1}),g({signal:t?.signal},t?.options));return{generations:[{text:a.output_text,message:gT(a)}],llmOutput:{id:a.id,estimatedTokenUsage:a.usage?{promptTokens:a.usage.input_tokens,completionTokens:a.usage.output_tokens,totalTokens:a.usage.total_tokens}:void 0}}}})}_streamResponseChunks(e,t,n){return Bt(this,null,function*(){let i=yield new Ie(this.completionWithRetry(x(g({},this.invocationParams(t)),{input:vT({messages:e,zdrEnabled:this.zdrEnabled??!1,model:this.model}),stream:!0}),t));try{for(var o=lt(i),r,s,a;r=!(s=yield new Ie(o.next())).done;r=!1){let l=s.value;let c=p$(l);c!=null&&(yield c,yield new Ie(n?.handleLLMNewToken(c.text||"",{prompt:t.promptIndex??0,completion:0},void 0,void 0,void 0,{chunk:c})))}}catch{a=[s]}finally{try{r&&(s=o.return)&&(yield new Ie(s.call(o)))}finally{if(a)throw a[0]}}})}completionWithRetry(e,t){return E(this,null,function*(){return this.caller.call(()=>E(this,null,function*(){let n=this._getClientOptions(t);try{return e.text?.format?.type==="json_schema"&&!e.stream?yield this.client.responses.parse(e,n):yield this.client.responses.create(e,n)}catch(i){throw ic(i)}}))})}_reduceChatOpenAITools(e,t){let n=[];for(let i of e)if(y_(i))i.type==="image_generation"&&t?.stream&&(i.partial_images=1),n.push(i);else if(sf(i)){let o=i.metadata.customTool;n.push({type:"custom",name:o.name,description:o.description,format:o.format})}else LE(i)?n.push({type:"function",name:i.function.name,parameters:i.function.parameters,description:i.function.description,strict:t?.strict??null}):lT(i)&&n.push(ade(i));return n}};var yT=class sue extends uf{useResponsesApi=!1;responses;completions;get lc_serializable_keys(){return[...super.lc_serializable_keys,"useResponsesApi"]}get callKeys(){return[...super.callKeys,"useResponsesApi"]}constructor(t){super(t),this.fields=t,this.useResponsesApi=t?.useResponsesApi??!1,this.responses=t?.responses??new _T(t),this.completions=t?.completions??new fT(t)}_useResponsesApi(t){let n=t?.tools?.some(y_),i=t?.previous_response_id!=null||t?.text!=null||t?.truncation!=null||t?.include!=null||t?.reasoning?.summary!=null||this.reasoning?.summary!=null,o=t?.tools?.some(lT)||t?.tools?.some(sf);return this.useResponsesApi||n||i||o||Zce(this.model)}getLsParams(t){let n=this._combineCallOptions(t);return this._useResponsesApi(t)?this.responses.getLsParams(n):this.completions.getLsParams(n)}invocationParams(t){let n=this._combineCallOptions(t);return this._useResponsesApi(t)?this.responses.invocationParams(n):this.completions.invocationParams(n)}_generate(t,n,i){return E(this,null,function*(){return this._useResponsesApi(n)?this.responses._generate(t,n):this.completions._generate(t,n,i)})}_streamResponseChunks(t,n,i){return Bt(this,null,function*(){if(this._useResponsesApi(n)){yield*co(this.responses._streamResponseChunks(t,this._combineCallOptions(n),i));return}yield*co(this.completions._streamResponseChunks(t,this._combineCallOptions(n),i))})}withConfig(t){let n=new sue(this.fields);return n.defaultOptions=g(g({},this.defaultOptions),t),n}};var f$={};_t(f$,{BaseLLM:()=>m$,LLM:()=>bT});var m$=class _x extends NE{lc_namespace=["langchain","llms",this._llmType()];invoke(t,n){return E(this,null,function*(){let i=_x._convertInputToPromptValue(t);return(yield this.generatePrompt([i],n,n?.callbacks)).generations[0][0].text})}_streamResponseChunks(t,n,i){return Bt(this,null,function*(){throw new Error("Not implemented.")})}_separateRunnableConfigFromCallOptionsCompat(t){let[n,i]=super._separateRunnableConfigFromCallOptions(t);return i.signal=n.signal,[n,i]}_streamIterator(t,n){return Bt(this,null,function*(){if(this._streamResponseChunks===_x.prototype._streamResponseChunks)yield this.invoke(t,n);else{let a=_x._convertInputToPromptValue(t),[l,c]=this._separateRunnableConfigFromCallOptionsCompat(n),u=yield new Ie(Vs.configure(l.callbacks,this.callbacks,l.tags,this.tags,l.metadata,this.metadata,{verbose:this.verbose})),h={options:c,invocation_params:this?.invocationParams(c),batch_size:1},f=yield new Ie(u?.handleLLMStart(this.toJSON(),[a.toString()],l.runId,void 0,h,void 0,void 0,l.runName)),m=new L2({text:""});try{try{for(var i=lt(this._streamResponseChunks(a.toString(),c,f?.[0])),o,r,s;o=!(r=yield new Ie(i.next())).done;o=!1){let _=r.value;m?m=m.concat(_):m=_,typeof _.text=="string"&&(yield _.text)}}catch{s=[r]}finally{try{o&&(r=i.return)&&(yield new Ie(r.call(i)))}finally{if(s)throw s[0]}}}catch(_){throw yield new Ie(Promise.all((f??[]).map(y=>y?.handleLLMError(_)))),_}yield new Ie(Promise.all((f??[]).map(_=>_?.handleLLMEnd({generations:[[m]]}))))}})}generatePrompt(t,n,i){return E(this,null,function*(){let o=t.map(r=>r.toString());return this.generate(o,n,i)})}invocationParams(t){return{}}_flattenLLMResult(t){let n=[];for(let i=0;i<t.generations.length;i+=1){let o=t.generations[i];if(i===0)n.push({generations:[o],llmOutput:t.llmOutput});else{let r=t.llmOutput?x(g({},t.llmOutput),{tokenUsage:{}}):void 0;n.push({generations:[o],llmOutput:r})}}return n}_generateUncached(t,n,i,o){return E(this,null,function*(){let r;if(o!==void 0&&o.length===t.length)r=o;else{let m=yield Vs.configure(i.callbacks,this.callbacks,i.tags,this.tags,i.metadata,this.metadata,{verbose:this.verbose}),_={options:n,invocation_params:this?.invocationParams(n),batch_size:t.length};r=yield m?.handleLLMStart(this.toJSON(),t,i.runId,void 0,_,void 0,void 0,i?.runName)}let s=!!r?.[0].handlers.find(xE),a;if(s&&t.length===1&&this._streamResponseChunks!==_x.prototype._streamResponseChunks)try{let m=yield this._streamResponseChunks(t[0],n,r?.[0]),_;try{for(var c=lt(m),u,h,f;u=!(h=yield c.next()).done;u=!1){let y=h.value;_===void 0?_=y:_=DE(_,y)}}catch{f=[h]}finally{try{u&&(h=c.return)&&(yield h.call(c))}finally{if(f)throw f[0]}}if(_===void 0)throw new Error("Received empty response from chat model call.");a={generations:[[_]],llmOutput:{}},yield r?.[0].handleLLMEnd(a)}catch(m){throw yield r?.[0].handleLLMError(m),m}else{try{a=yield this._generate(t,n,r?.[0])}catch(_){throw yield Promise.all((r??[]).map(y=>y?.handleLLMError(_))),_}let m=this._flattenLLMResult(a);yield Promise.all((r??[]).map((_,y)=>_?.handleLLMEnd(m[y])))}let l=r?.map(m=>m.runId)||void 0;return Object.defineProperty(a,hm,{value:l?{runIds:l}:void 0,configurable:!0}),a})}_generateCached(a){return E(this,arguments,function*({prompts:t,cache:n,llmStringKey:i,parsedOptions:o,handledOptions:r,runId:s}){let l=yield Vs.configure(r.callbacks,this.callbacks,r.tags,this.tags,r.metadata,this.metadata,{verbose:this.verbose}),c={options:o,invocation_params:this?.invocationParams(o),batch_size:t.length},u=yield l?.handleLLMStart(this.toJSON(),t,s,void 0,c,void 0,void 0,r?.runName),h=[],m=(yield Promise.allSettled(t.map((w,C)=>E(this,null,function*(){let S=yield n.lookup(w,i);return S==null&&h.push(C),S})))).map((w,C)=>({result:w,runManager:u?.[C]})).filter(({result:w})=>w.status==="fulfilled"&&w.value!=null||w.status==="rejected"),_=[];yield Promise.all(m.map((I,O)=>E(this,[I,O],function*({result:w,runManager:C},S){if(w.status==="fulfilled"){let F=w.value;return _[S]=F.map(H=>(H.generationInfo=x(g({},H.generationInfo),{tokenUsage:{}}),H)),F.length&&(yield C?.handleLLMNewToken(F[0].text)),C?.handleLLMEnd({generations:[F]},void 0,void 0,void 0,{cached:!0})}else return yield C?.handleLLMError(w.reason,void 0,void 0,void 0,{cached:!0}),Promise.reject(w.reason)})));let y={generations:_,missingPromptIndices:h,startedRunManagers:u};return Object.defineProperty(y,hm,{value:u?{runIds:u?.map(w=>w.runId)}:void 0,configurable:!0}),y})}generate(t,n,i){return E(this,null,function*(){if(!Array.isArray(t))throw new Error("Argument 'prompts' is expected to be a string[]");let o;Array.isArray(n)?o={stop:n}:o=n;let[r,s]=this._separateRunnableConfigFromCallOptionsCompat(o);if(r.callbacks=r.callbacks??i,!this.cache)return this._generateUncached(t,s,r);let{cache:a}=this,l=this._getSerializedCacheKeyParametersForCall(s),{generations:c,missingPromptIndices:u,startedRunManagers:h}=yield this._generateCached({prompts:t,cache:a,llmStringKey:l,parsedOptions:s,handledOptions:r,runId:r.runId}),f={};if(u.length>0){let m=yield this._generateUncached(u.map(_=>t[_]),s,r,h!==void 0?u.map(_=>h?.[_]):void 0);yield Promise.all(m.generations.map((_,y)=>E(this,null,function*(){let w=u[y];return c[w]=_,a.update(t[w],l,_)}))),f=m.llmOutput??{}}return{generations:c,llmOutput:f}})}_identifyingParams(){return{}}_modelType(){return"base_llm"}},bT=class extends m${_generate(e,t,n){return E(this,null,function*(){return{generations:yield Promise.all(e.map((o,r)=>this._call(o,x(g({},t),{promptIndex:r}),n).then(s=>[{text:s}])))}})}};var g$={};_t(g$,{chunkArray:()=>v$});var v$=(e,t)=>e.reduce((n,i,o)=>{let r=Math.floor(o/t),s=n[r]||[];return n[r]=s.concat([i]),n},[]);var _$={};_t(_$,{Embeddings:()=>yx});var yx=class{caller;constructor(e){this.caller=new c9(e??{})}};var RWe=he.object({type:he.literal("screenshot")}),TWe=he.object({type:he.literal("click"),x:he.number(),y:he.number(),button:he.enum(["left","right","wheel","back","forward"]).default("left")}),PWe=he.object({type:he.literal("double_click"),x:he.number(),y:he.number(),button:he.enum(["left","right","wheel","back","forward"]).default("left")}),AWe=he.object({type:he.literal("drag"),path:he.array(he.object({x:he.number(),y:he.number()}))}),OWe=he.object({type:he.literal("keypress"),keys:he.array(he.string())}),FWe=he.object({type:he.literal("move"),x:he.number(),y:he.number()}),LWe=he.object({type:he.literal("scroll"),x:he.number(),y:he.number(),scroll_x:he.number(),scroll_y:he.number()}),NWe=he.object({type:he.literal("type"),text:he.string()}),BWe=he.object({type:he.literal("wait"),duration:he.number().optional()}),zWe=he.discriminatedUnion("type",[RWe,TWe,PWe,AWe,OWe,FWe,LWe,NWe,BWe]),E5t=he.object({action:zWe});var VWe=he.object({type:he.literal("exec"),command:he.array(he.string()),env:he.record(he.string(),he.string()).optional(),working_directory:he.string().optional(),timeout_ms:he.number().optional(),user:he.string().optional()}),R5t=he.discriminatedUnion("type",[VWe]);var F5t=he.object({commands:he.array(he.string()).describe("Array of shell commands to execute"),timeout_ms:he.number().optional().describe("Optional timeout in milliseconds for the commands"),max_output_length:he.number().optional().describe("Optional maximum number of characters to return from each command")});var HWe=he.object({type:he.literal("create_file"),path:he.string(),diff:he.string()}),$We=he.object({type:he.literal("update_file"),path:he.string(),diff:he.string()}),jWe=he.object({type:he.literal("delete_file"),path:he.string()}),V5t=he.discriminatedUnion("type",[HWe,$We,jWe]);var cn="__start__",Et="__end__",Za="__input__",lue="__copy__",so="__error__",CT="__pregel_ns_writes",la="__pregel_send",Cx="__pregel_call",Ya="__pregel_read",Mi="__pregel_checkpointer",oc="__pregel_resuming",hf="__pregel_task_id",b_="__pregel_stream",GWe="__pregel_resume_value",C_="__pregel_resume_map",Ts="__pregel_scratchpad",wx="__pregel_previous",y$="__pregel_durability",wT="checkpoint_id",Ps="checkpoint_ns",cue="__pregel_node_finished",Tr="checkpoint_map",b$="__pregel_abort_signals",en="__interrupt__",bo="__resume__",xx="__no_writes__",Qa="__return__",xT="__previous__",Bn="langsmith:hidden",due="langsmith:nostream",C$="__self__",pr="__pregel_tasks",fr="__pregel_push",Sx="__pregel_pull",mr="00000000-0000-0000-0000-000000000000",uue=[Bn,Za,en,bo,so,xx,la,Ya,Mi,y$,b_,oc,hf,Cx,GWe,Ts,wx,Tr,Ps,wT],ti="|",Pr=":",aue=Symbol.for("langgraph.command"),UWe=class{[aue];constructor(e){this[aue]=e}};function ST(e){let t=e;return t!=null&&typeof t.node=="string"&&t.args!==void 0}var Wu=class{lg_name="Send";node;args;constructor(e,t){this.node=e,this.args=bx(t)}toJSON(){return{lg_name:this.lg_name,node:this.node,args:this.args}}};function ao(e){return e instanceof Wu}function ET(e){return!e||typeof e!="object"||!(en in e)?!1:Array.isArray(e[en])}var Qo=class extends UWe{lg_name="Command";lc_direct_tool_output=!0;graph;update;resume;goto=[];static PARENT="__parent__";constructor(t){super(t),this.resume=t.resume,this.graph=t.graph,this.update=t.update,t.goto&&(this.goto=Array.isArray(t.goto)?bx(t.goto):[bx(t.goto)])}_updateAsTuples(){return this.update&&typeof this.update=="object"&&!Array.isArray(this.update)?Object.entries(this.update):Array.isArray(this.update)&&this.update.every(t=>Array.isArray(t)&&t.length===2&&typeof t[0]=="string")?this.update:[["__root__",this.update]]}toJSON(){let t;return typeof this.goto=="string"?t=this.goto:ao(this.goto)?t=this.goto.toJSON():t=this.goto?.map(n=>typeof n=="string"?n:n.toJSON()),{lg_name:this.lg_name,update:this.update,resume:this.resume,goto:t}}};function ro(e){return typeof e!="object"||e==null?!1:"lg_name"in e&&e.lg_name==="Command"}function bx(e,t=new Map){if(e!=null&&typeof e=="object"){if(t.has(e))return t.get(e);let n;if(Array.isArray(e))n=[],t.set(e,n),e.forEach((i,o)=>{n[o]=bx(i,t)});else if(ro(e)&&!(e instanceof Qo))n=new Qo(e),t.set(e,n);else if(ST(e)&&!(e instanceof Wu))n=new Wu(e.node,e.args),t.set(e,n);else if(ro(e)||ao(e))n=e,t.set(e,n);else if("lc_serializable"in e&&e.lc_serializable)n=e,t.set(e,n);else{n={},t.set(e,n);for(let[i,o]of Object.entries(e))n[i]=bx(o,t)}return n}return e}var pf=class extends Error{lc_error_code;constructor(e,t){let n=e??"";t?.lc_error_code&&(n=`${n}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langgraph/${t.lc_error_code}/
`),super(n),this.lc_error_code=t?.lc_error_code}},hue=class extends pf{get is_bubble_up(){return!0}},pue=class extends pf{constructor(e,t){super(e,t),this.name="GraphRecursionError"}static get unminifiable_name(){return"GraphRecursionError"}},w_=class extends pf{constructor(e,t){super(e,t),this.name="GraphValueError"}static get unminifiable_name(){return"GraphValueError"}},qu=class extends hue{interrupts;constructor(e,t){super(JSON.stringify(e,null,2),t),this.name="GraphInterrupt",this.interrupts=e??[]}static get unminifiable_name(){return"GraphInterrupt"}},w$=class extends qu{constructor(e,t){super([{value:e}],t),this.name="NodeInterrupt"}static get unminifiable_name(){return"NodeInterrupt"}},x$=class extends hue{command;constructor(e){super(),this.name="ParentCommand",this.command=e}static get unminifiable_name(){return"ParentCommand"}};function fue(e){return e!==void 0&&e.name===x$.unminifiable_name}function x_(e){return e!==void 0&&e.is_bubble_up===!0}function rc(e){return e!==void 0&&[qu.unminifiable_name,w$.unminifiable_name].includes(e.name)}var S$=class extends pf{constructor(e,t){super(e,t),this.name="EmptyInputError"}static get unminifiable_name(){return"EmptyInputError"}},pi=class extends pf{constructor(e,t){super(e,t),this.name="EmptyChannelError"}static get unminifiable_name(){return"EmptyChannelError"}},Sn=class extends pf{constructor(e,t){super(e,t),this.name="InvalidUpdateError"}static get unminifiable_name(){return"InvalidUpdateError"}};var mue=class extends pf{constructor(e,t){super(e,t),this.name="UnreachableNodeError"}static get unminifiable_name(){return"UnreachableNodeError"}};function Ex(e){return WW({clockseq:e})}function yd(e,t){let n=t.replace(/-/g,"").match(/.{2}/g).map(i=>parseInt(i,16));return Yy(e,new Uint8Array(n))}var E$="__error__",ff="__scheduled__",D$="__interrupt__",k$="__resume__";var gue="[...]",WWe="[Circular]",DT=[],S_=[];function qWe(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function vue(e,t,n,i){typeof i>"u"&&(i=qWe()),M$(e,"",0,[],void 0,0,i);var o;try{S_.length===0?o=JSON.stringify(e,t,n):o=JSON.stringify(e,KWe(t),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;DT.length!==0;){var r=DT.pop();r.length===4?Object.defineProperty(r[0],r[1],r[3]):r[0][r[1]]=r[2]}}return o}function I$(e,t,n,i){var o=Object.getOwnPropertyDescriptor(i,n);o.get!==void 0?o.configurable?(Object.defineProperty(i,n,{value:e}),DT.push([i,n,t,o])):S_.push([t,n,e]):(i[n]=e,DT.push([i,n,t]))}function M$(e,t,n,i,o,r,s){r+=1;var a;if(typeof e=="object"&&e!==null){for(a=0;a<i.length;a++)if(i[a]===e){I$(WWe,e,t,o);return}if(typeof s.depthLimit<"u"&&r>s.depthLimit){I$(gue,e,t,o);return}if(typeof s.edgesLimit<"u"&&n+1>s.edgesLimit){I$(gue,e,t,o);return}if(i.push(e),Array.isArray(e))for(a=0;a<e.length;a++)M$(e[a],a,a,i,e,r,s);else{var l=Object.keys(e);for(a=0;a<l.length;a++){var c=l[a];M$(e[c],c,a,i,e,r,s)}}i.pop()}}function KWe(e){return e=typeof e<"u"?e:function(t,n){return n},function(t,n){if(S_.length>0)for(var i=0;i<S_.length;i++){var o=S_[i];if(o[1]===t&&o[0]===n){n=o[2],S_.splice(i,1);break}}return e.call(this,t,n)}}var _ue=[];var yue={};var R$={};_t(R$,{BaseChatMessageHistory:()=>T$,BaseListChatMessageHistory:()=>kT,InMemoryChatMessageHistory:()=>mf});var T$=class extends Ca{addMessages(e){return E(this,null,function*(){for(let t of e)yield this.addMessage(t)})}},kT=class extends Ca{addUserMessage(e){return this.addMessage(new wE(e))}addAIMessage(e){return this.addMessage(new ii(e))}addMessages(e){return E(this,null,function*(){for(let t of e)yield this.addMessage(t)})}clear(){throw new Error("Not implemented.")}},mf=class extends kT{lc_namespace=["langchain","stores","message","in_memory"];messages=[];constructor(e){super(...arguments),this.messages=e??[]}getMessages(){return E(this,null,function*(){return this.messages})}addMessage(e){return E(this,null,function*(){this.messages.push(e)})}clear(){return E(this,null,function*(){this.messages=[]})}};var bue={};var P$={};_t(P$,{BaseMemory:()=>gf,getInputValue:()=>vf,getOutputValue:()=>Dx,getPromptInputKey:()=>IT});var gf=class{},Cue=(e,t)=>{if(t!==void 0)return e[t];let n=Object.keys(e);if(n.length===1)return e[n[0]]},vf=(e,t)=>{let n=Cue(e,t);if(!n){let i=Object.keys(e);throw new Error(`input values have ${i.length} keys, you must specify an input key or pass only 1 key as input`)}return n},Dx=(e,t)=>{let n=Cue(e,t);if(!n&&n!==""){let i=Object.keys(e);throw new Error(`output values have ${i.length} keys, you must specify an output key or pass only 1 key as output`)}return n};function IT(e,t){let n=Object.keys(e).filter(i=>!t.includes(i)&&i!=="stop");if(n.length!==1)throw new Error(`One input key expected, but got ${n.length}`);return n[0]}var A$={};_t(A$,{BaseStore:()=>wue,InMemoryStore:()=>ZWe});var wue=class extends Ca{},ZWe=class extends wue{lc_namespace=["langchain","storage"];store={};mget(e){return E(this,null,function*(){return e.map(t=>this.store[t])})}mset(e){return E(this,null,function*(){for(let[t,n]of e)this.store[t]=n})}mdelete(e){return E(this,null,function*(){for(let t of e)delete this.store[t]})}yieldKeys(e){return Bt(this,null,function*(){let t=Object.keys(this.store);for(let n of t)(e===void 0||n.startsWith(e))&&(yield n)})}};var O$={};_t(O$,{BaseRetriever:()=>kx});var kx=class extends oi{callbacks;tags;metadata;verbose;constructor(e){super(e),this.callbacks=e?.callbacks,this.tags=e?.tags??[],this.metadata=e?.metadata??{},this.verbose=e?.verbose??!1}_getRelevantDocuments(e,t){throw new Error("Not implemented!")}invoke(e,t){return E(this,null,function*(){let n=SE(um(t)),o=yield(yield Vs.configure(n.callbacks,this.callbacks,n.tags,this.tags,n.metadata,this.metadata,{verbose:this.verbose}))?.handleRetrieverStart(this.toJSON(),e,n.runId,void 0,void 0,void 0,n.runName);try{let r=yield this._getRelevantDocuments(e,o);return yield o?.handleRetrieverEnd(r),r}catch(r){throw yield o?.handleRetrieverError(r),r}})}};var F$={};_t(F$,{SaveableVectorStore:()=>YWe,VectorStore:()=>RT,VectorStoreRetriever:()=>MT});var MT=class extends kx{static lc_name(){return"VectorStoreRetriever"}get lc_namespace(){return["langchain_core","vectorstores"]}vectorStore;k=4;searchType="similarity";searchKwargs;filter;_vectorstoreType(){return this.vectorStore._vectorstoreType()}constructor(e){super(e),this.vectorStore=e.vectorStore,this.k=e.k??this.k,this.searchType=e.searchType??this.searchType,this.filter=e.filter,e.searchType==="mmr"&&(this.searchKwargs=e.searchKwargs)}_getRelevantDocuments(e,t){return E(this,null,function*(){if(this.searchType==="mmr"){if(typeof this.vectorStore.maxMarginalRelevanceSearch!="function")throw new Error(`The vector store backing this retriever, ${this._vectorstoreType()} does not support max marginal relevance search.`);return this.vectorStore.maxMarginalRelevanceSearch(e,g({k:this.k,filter:this.filter},this.searchKwargs),t?.getChild("vectorstore"))}return this.vectorStore.similaritySearch(e,this.k,this.filter,t?.getChild("vectorstore"))})}addDocuments(e,t){return E(this,null,function*(){return this.vectorStore.addDocuments(e,t)})}},RT=class extends Ca{lc_namespace=["langchain","vectorstores",this._vectorstoreType()];embeddings;constructor(e,t){super(t),this.embeddings=e}delete(e){return E(this,null,function*(){throw new Error("Not implemented.")})}similaritySearch(e,t=4,n=void 0,i=void 0){return E(this,null,function*(){return(yield this.similaritySearchVectorWithScore(yield this.embeddings.embedQuery(e),t,n)).map(r=>r[0])})}similaritySearchWithScore(e,t=4,n=void 0,i=void 0){return E(this,null,function*(){return this.similaritySearchVectorWithScore(yield this.embeddings.embedQuery(e),t,n)})}static fromTexts(e,t,n,i){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}static fromDocuments(e,t,n){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}asRetriever(e,t,n,i,o,r){if(typeof e=="number")return new MT({vectorStore:this,k:e,filter:t,tags:[...i??[],this._vectorstoreType()],metadata:o,verbose:r,callbacks:n});{let s={vectorStore:this,k:e?.k,filter:e?.filter,tags:[...e?.tags??[],this._vectorstoreType()],metadata:e?.metadata,verbose:e?.verbose,callbacks:e?.callbacks,searchType:e?.searchType};return e?.searchType==="mmr"?new MT(x(g({},s),{searchKwargs:e.searchKwargs})):new MT(g({},s))}}},YWe=class extends RT{static load(e,t){throw new Error("Not implemented")}};var L$={};_t(L$,{BaseDocumentLoader:()=>N$});var N$=class{};var B$={};_t(B$,{LangSmithLoader:()=>QWe});var QWe=class extends N${datasetId;datasetName;exampleIds;asOf;splits;inlineS3Urls;offset;limit;metadata;filter;contentKey;formatContent;client;constructor(e){if(super(),e.client&&e.clientConfig)throw new Error("client and clientConfig cannot both be provided.");this.client=e.client??new ZW(e?.clientConfig),this.contentKey=e.contentKey?e.contentKey.split("."):[],this.formatContent=e.formatContent??JWe,this.datasetId=e.datasetId,this.datasetName=e.datasetName,this.exampleIds=e.exampleIds,this.asOf=e.asOf,this.splits=e.splits,this.inlineS3Urls=e.inlineS3Urls,this.offset=e.offset,this.limit=e.limit,this.metadata=e.metadata,this.filter=e.filter}load(){return E(this,null,function*(){let e=[];try{for(var t=lt(this.client.listExamples({datasetId:this.datasetId,datasetName:this.datasetName,exampleIds:this.exampleIds,asOf:this.asOf,splits:this.splits,inlineS3Urls:this.inlineS3Urls,offset:this.offset,limit:this.limit,metadata:this.metadata,filter:this.filter})),n,i,o;n=!(i=yield t.next()).done;n=!1){let r=i.value;let s=r.inputs;for(let c of this.contentKey)s=s[c];let a=this.formatContent(s),l=r;["created_at","modified_at"].forEach(c=>{c in l&&typeof l[c]=="object"&&(l[c]=l[c].toString())}),e.push({pageContent:a,metadata:l})}}catch{o=[i]}finally{try{n&&(i=t.return)&&(yield i.call(t))}finally{if(o)throw o[0]}}return e})}};function JWe(e){if(typeof e=="string")return e;try{return JSON.stringify(e,null,2)}catch{return String(e)}}var z$=class extends oi{lc_namespace=["langchain_core","documents","transformers"];invoke(e,t){return this.transformDocuments(e)}},xue=class extends z${transformDocuments(e){return E(this,null,function*(){let t=[];for(let n of e){let i=yield this._transformDocument(n);t.push(i)}return t})}};var V$={};_t(V$,{BaseDocumentTransformer:()=>z$,Document:()=>ps,MappingDocumentTransformer:()=>xue});var Ix="10f90ea3-90a4-4962-bf75-83a0f3c1c62a",Sue=class extends Ca{lc_namespace=["langchain","recordmanagers"]};var H$=class{uid;hash_;contentHash;metadataHash;pageContent;metadata;keyEncoder=z9;constructor(e){this.uid=e.uid,this.pageContent=e.pageContent,this.metadata=e.metadata}makeDefaultKeyEncoder(e){this.keyEncoder=e}calculateHashes(){let e=["hash_","content_hash","metadata_hash"];for(let n of e)if(n in this.metadata)throw new Error(`Metadata cannot contain key ${n} as it is reserved for internal use. Restricted keys: [${e.join(", ")}]`);let t=this._hashStringToUUID(this.pageContent);try{let n=this._hashNestedDictToUUID(this.metadata);this.contentHash=t,this.metadataHash=n}catch(n){throw new Error(`Failed to hash metadata: ${n}. Please use a dict that can be serialized using json.`)}this.hash_=this._hashStringToUUID(this.contentHash+this.metadataHash),this.uid||(this.uid=this.hash_)}toDocument(){return new ps({pageContent:this.pageContent,metadata:this.metadata})}static fromDocument(e,t){let n=new this({pageContent:e.pageContent,metadata:e.metadata,uid:t||e.uid});return n.calculateHashes(),n}_hashStringToUUID(e){let t=this.keyEncoder(e);return Yy(t,Ix)}_hashNestedDictToUUID(e){let t=JSON.stringify(e,Object.keys(e).sort()),n=this.keyEncoder(t);return Yy(n,Ix)}};function $$(e,t){let n=[],i=[];return t.forEach(o=>{i.push(o),i.length>=e&&(n.push(i),i=[])}),i.length>0&&n.push(i),n}function j$(e){let t=new Set,n=[];for(let i of e){if(!i.hash_)throw new Error("Hashed document does not have a hash");t.has(i.hash_)||(t.add(i.hash_),n.push(i))}return n}function G$(e){if(e===null)return t=>null;if(typeof e=="string")return t=>t.metadata[e];if(typeof e=="function")return e;throw new Error(`sourceIdKey should be null, a string or a function, got ${typeof e}`)}var U$=e=>"load"in e&&typeof e.load=="function"&&"loadAndSplit"in e&&typeof e.loadAndSplit=="function";function Eue(e){return E(this,null,function*(){let{docsSource:t,recordManager:n,vectorStore:i,options:o}=e,{batchSize:r=100,cleanup:s,sourceIdKey:a,cleanupBatchSize:l=1e3,forceUpdate:c=!1}=o??{};if(s==="incremental"&&!a)throw new Error("sourceIdKey is required when cleanup mode is incremental. Please provide through 'options.sourceIdKey'.");let u=U$(t)?yield t.load():t,h=G$(a??null),f=yield n.getTime(),m=0,_=0,y=0,w=0,C=$$(r??100,u);for(let S of C){let I=j$(S.map(se=>H$.fromDocument(se))),O=I.map(se=>h(se));s==="incremental"&&I.forEach((se,Te)=>{if(O[Te]===null)throw new Error("sourceIdKey must be provided when cleanup is incremental")});let F=yield n.exists(I.map(se=>se.uid)),H=[],j=[],re=[],ae=new Set;if(I.forEach((se,Te)=>{if(F[Te])if(c)ae.add(se.uid);else{re.push(se.uid);return}H.push(se.uid),j.push(se.toDocument())}),re.length>0&&(yield n.update(re,{timeAtLeast:f}),w+=re.length),j.length>0&&(yield i.addDocuments(j,{ids:H}),m+=j.length-ae.size,y+=ae.size),yield n.update(I.map(se=>se.uid),{timeAtLeast:f,groupIds:O}),s==="incremental"){O.forEach(Te=>{if(!Te)throw new Error("Source id cannot be null")});let se=yield n.listKeys({before:f,groupIds:O});se.length>0&&(yield i.delete({ids:se}),yield n.deleteKeys(se),_+=se.length)}}if(s==="full"){let S=yield n.listKeys({before:f,limit:l});for(;S.length>0;)yield i.delete({ids:S}),yield n.deleteKeys(S),_+=S.length,S=yield n.listKeys({before:f,limit:l})}return{numAdded:m,numDeleted:_,numUpdated:y,numSkipped:w}})}var W$={};_t(W$,{RecordManager:()=>Sue,UUIDV5_NAMESPACE:()=>Ix,_HashedDocument:()=>H$,_batch:()=>$$,_deduplicateInOrder:()=>j$,_getSourceIdAssigner:()=>G$,_isBaseDocumentLoader:()=>U$,index:()=>Eue});var Due={};var q$={};_t(q$,{BaseDocumentCompressor:()=>XWe});var XWe=class{static isBaseDocumentCompressor(e){return e?.compressDocuments!==void 0}};var kue={};var K$={};_t(K$,{RunCollectorCallbackHandler:()=>e9e});var e9e=class extends dm{name="run_collector";exampleId;tracedRuns;constructor({exampleId:e}={}){super({_awaitHandler:!0}),this.exampleId=e,this.tracedRuns=[]}persistRun(e){return E(this,null,function*(){let t=g({},e);t.reference_example_id=this.exampleId,this.tracedRuns.push(t)})}};var Z$=class extends z2{static lc_name(){return"OutputFunctionsParser"}lc_namespace=["langchain","output_parsers","openai_functions"];lc_serializable=!0;argsOnly=!0;constructor(e){super(),this.argsOnly=e?.argsOnly??this.argsOnly}parseResult(e){return E(this,null,function*(){if("message"in e[0]){let n=e[0].message.additional_kwargs.function_call;if(!n)throw new Error(`No function_call in message ${JSON.stringify(e)}`);if(!n.arguments)throw new Error(`No arguments in function_call ${JSON.stringify(e)}`);return this.argsOnly?n.arguments:JSON.stringify(n)}else throw new Error(`No message in generations ${JSON.stringify(e)}`)})}},Y$=class extends AE{static lc_name(){return"JsonOutputFunctionsParser"}lc_namespace=["langchain","output_parsers","openai_functions"];lc_serializable=!0;outputParser;argsOnly=!0;constructor(e){super(e),this.argsOnly=e?.argsOnly??this.argsOnly,this.outputParser=new Z$(e)}_diff(e,t){return t?r9(e??{},t):void 0}parsePartialResult(e){return E(this,null,function*(){let t=e[0];if(!t.message)return;let{message:n}=t,i=n.additional_kwargs.function_call;if(i)return this.argsOnly?Wy(i.arguments):x(g({},i),{arguments:Wy(i.arguments)})})}parseResult(e){return E(this,null,function*(){let t=yield this.outputParser.parseResult(e);if(!t)throw new Error(`No result from "OutputFunctionsParser" ${JSON.stringify(e)}`);return this.parse(t)})}parse(e){return E(this,null,function*(){let t=JSON.parse(e);return this.argsOnly||(t.arguments=JSON.parse(t.arguments)),t})}getFormatInstructions(){return""}},Iue=class extends z2{static lc_name(){return"JsonKeyOutputFunctionsParser"}lc_namespace=["langchain","output_parsers","openai_functions"];lc_serializable=!0;outputParser=new Y$;attrName;get lc_aliases(){return{attrName:"key_name"}}constructor(e){super(e),this.attrName=e.attrName}parseResult(e){return E(this,null,function*(){return(yield this.outputParser.parseResult(e))[this.attrName]})}};var Q$={};_t(Q$,{JsonKeyOutputFunctionsParser:()=>Iue,JsonOutputFunctionsParser:()=>Y$,OutputFunctionsParser:()=>Z$});var Ja={and:"and",or:"or",not:"not"},rn={eq:"eq",ne:"ne",lt:"lt",gt:"gt",lte:"lte",gte:"gte"},TT=class{},PT=class{accept(e){if(this.exprName==="Operation")return e.visitOperation(this);if(this.exprName==="Comparison")return e.visitComparison(this);if(this.exprName==="StructuredQuery")return e.visitStructuredQuery(this);throw new Error("Unknown Expression type")}},AT=class extends PT{},Mue=class extends AT{exprName="Comparison";constructor(e,t,n){super(),this.comparator=e,this.attribute=t,this.value=n}},Rue=class extends AT{exprName="Operation";constructor(e,t){super(),this.operator=e,this.args=t}},Tue=class extends PT{exprName="StructuredQuery";constructor(e,t){super(),this.query=e,this.filter=t}};function J$(e){return e&&typeof e=="object"&&!Array.isArray(e)}function es(e){return e?typeof e=="string"&&e.length>0||typeof e=="function"?!1:J$(e)&&Object.keys(e).length===0:!0}function X$(e){if(typeof e=="number")return e%1===0;if(typeof e=="string"){let t=parseInt(e,10);return!Number.isNaN(t)&&t%1===0&&t.toString()===e}return!1}function ej(e){if(typeof e=="number")return e%1!==0;if(typeof e=="string"){let t=parseFloat(e);return!Number.isNaN(t)&&t%1!==0&&t.toString()===e}return!1}function tj(e){return typeof e=="string"&&(Number.isNaN(parseFloat(e))||parseFloat(e).toString()!==e)}function nj(e){return typeof e=="boolean"}function E_(e){let t;if(tj(e))t=e;else if(X$(e))t=parseInt(e,10);else if(ej(e))t=parseFloat(e);else if(nj(e))t=!!e;else throw new Error("Unsupported value type");return t}var Mx=class extends TT{},Pue=class extends Mx{allowedOperators;allowedComparators;constructor(e){super(),this.allowedOperators=e?.allowedOperators??[Ja.and,Ja.or],this.allowedComparators=e?.allowedComparators??[rn.eq,rn.ne,rn.gt,rn.gte,rn.lt,rn.lte]}formatFunction(e){if(e in rn){if(this.allowedComparators.length>0&&this.allowedComparators.indexOf(e)===-1)throw new Error(`Comparator ${e} not allowed. Allowed comparators: ${this.allowedComparators.join(", ")}`)}else if(e in Ja){if(this.allowedOperators.length>0&&this.allowedOperators.indexOf(e)===-1)throw new Error(`Operator ${e} not allowed. Allowed operators: ${this.allowedOperators.join(", ")}`)}else throw new Error("Unknown comparator or operator");return`$${e}`}visitOperation(e){let t=e.args?.map(n=>n.accept(this));return{[this.formatFunction(e.operator)]:t}}visitComparison(e){return{[e.attribute]:{[this.formatFunction(e.comparator)]:E_(e.value)}}}visitStructuredQuery(e){let t={};return e.filter&&(t={filter:e.filter.accept(this)}),t}mergeFilters(e,t,n="and",i=!1){if(!(es(e)&&es(t))){if(es(e)||n==="replace")return es(t)?void 0:t;if(es(t))return i?e:n==="and"?void 0:e;if(n==="and")return{$and:[e,t]};if(n==="or")return{$or:[e,t]};throw new Error("Unknown merge type")}}};var Aue=class extends Mx{allowedOperators=[Ja.and,Ja.or];allowedComparators=[rn.eq,rn.ne,rn.gt,rn.gte,rn.lt,rn.lte];formatFunction(){throw new Error("Not implemented")}getAllowedComparatorsForType(e){switch(e){case"string":return[rn.eq,rn.ne,rn.gt,rn.gte,rn.lt,rn.lte];case"number":return[rn.eq,rn.ne,rn.gt,rn.gte,rn.lt,rn.lte];case"boolean":return[rn.eq,rn.ne];default:throw new Error(`Unsupported data type: ${e}`)}}getComparatorFunction(e){switch(e){case rn.eq:return(t,n)=>t===n;case rn.ne:return(t,n)=>t!==n;case rn.gt:return(t,n)=>t>n;case rn.gte:return(t,n)=>t>=n;case rn.lt:return(t,n)=>t<n;case rn.lte:return(t,n)=>t<=n;default:throw new Error("Unknown comparator")}}getOperatorFunction(e){switch(e){case Ja.and:return(t,n)=>t&&n;case Ja.or:return(t,n)=>t||n;default:throw new Error("Unknown operator")}}visitOperation(e){let{operator:t,args:n}=e;if(this.allowedOperators.includes(t)){let i=this.getOperatorFunction(t);return o=>n?n.reduce((r,s)=>{let a=s.accept(this);if(typeof a=="function")return i(r,a(o));throw new Error("Filter is not a function")},!0):!0}else throw new Error("Operator not allowed")}visitComparison(e){let{comparator:t,attribute:n,value:i}=e,o=[rn.ne];if(this.allowedComparators.includes(t)){if(!this.getAllowedComparatorsForType(typeof i).includes(t))throw new Error(`'${t}' comparator not allowed to be used with ${typeof i}`);let r=this.getComparatorFunction(t);return s=>{let a=s.metadata[n];return a===void 0?!!o.includes(t):r(a,E_(i))}}else throw new Error("Comparator not allowed")}visitStructuredQuery(e){if(!e.filter)return{};let t=e.filter?.accept(this);if(typeof t!="function")throw new Error("Structured query filter is not a function");return{filter:t}}mergeFilters(e,t,n="and"){if(!(es(e)&&es(t))){if(es(e)||n==="replace")return es(t)?void 0:t;if(es(t))return n==="and"?void 0:e;if(n==="and")return i=>e(i)&&t(i);if(n==="or")return i=>e(i)||t(i);throw new Error("Unknown merge type")}}};var ij={};_t(ij,{BaseTranslator:()=>Mx,BasicTranslator:()=>Pue,Comparators:()=>rn,Comparison:()=>Mue,Expression:()=>PT,FilterDirective:()=>AT,FunctionalTranslator:()=>Aue,Operation:()=>Rue,Operators:()=>Ja,StructuredQuery:()=>Tue,Visitor:()=>TT,castValue:()=>E_,isBoolean:()=>nj,isFilterEmpty:()=>es,isFloat:()=>ej,isInt:()=>X$,isObject:()=>J$,isString:()=>tj});var Oue=class extends Gu{_combineLLMOutput(){return[]}_llmType(){return"fake"}_generate(e,t,n){return E(this,null,function*(){if(t?.stop?.length)return{generations:[{message:new ii(t.stop[0]),text:t.stop[0]}]};let i=e.map(o=>typeof o.content=="string"?o.content:JSON.stringify(o.content,null,2)).join(`
`);return yield n?.handleLLMNewToken(i),{generations:[{message:new ii(i),text:i}],llmOutput:{}}})}},Fue=class Lue extends Gu{sleep=50;responses=[];chunks=[];toolStyle="openai";thrownErrorString;tools=[];constructor(a){var l=a,{sleep:t=50,responses:n=[],chunks:i=[],toolStyle:o="openai",thrownErrorString:r}=l,s=Be(l,["sleep","responses","chunks","toolStyle","thrownErrorString"]);super(s),this.sleep=t,this.responses=n,this.chunks=i,this.toolStyle=o,this.thrownErrorString=r}_llmType(){return"fake"}bindTools(t){let n=[...this.tools,...t],i=n.map(s=>{switch(this.toolStyle){case"openai":return{type:"function",function:{name:s.name,description:s.description,parameters:Xi(s.schema)}};case"anthropic":return{name:s.name,description:s.description,input_schema:Xi(s.schema)};case"bedrock":return{toolSpec:{name:s.name,description:s.description,inputSchema:Xi(s.schema)}};case"google":return{name:s.name,description:s.description,parameters:Xi(s.schema)};default:throw new Error(`Unsupported tool style: ${this.toolStyle}`)}}),o=this.toolStyle==="google"?[{functionDeclarations:i}]:i,r=new Lue({sleep:this.sleep,responses:this.responses,chunks:this.chunks,toolStyle:this.toolStyle,thrownErrorString:this.thrownErrorString});return r.tools=n,r.withConfig({tools:o})}_generate(t,n,i){return E(this,null,function*(){if(this.thrownErrorString)throw new Error(this.thrownErrorString);let o=this.responses?.[0]?.content??t[0].content??"";return{generations:[{text:"",message:new ii({content:o,tool_calls:this.chunks?.[0]?.tool_calls})}]}})}_streamResponseChunks(t,n,i){return Bt(this,null,function*(){if(this.thrownErrorString)throw new Error(this.thrownErrorString);if(this.chunks?.length){for(let s of this.chunks){let a=new bc({message:new Jo({content:s.content,tool_calls:s.tool_calls,additional_kwargs:s.additional_kwargs??{}}),text:s.content?.toString()??""});if(n.signal?.aborted)break;yield a,yield new Ie(i?.handleLLMNewToken(s.content,void 0,void 0,void 0,void 0,{chunk:a}))}return}let o=this.responses?.[0]??new ii(typeof t[0].content=="string"?t[0].content:""),r=typeof o.content=="string"?o.content:"";for(let s of r){yield new Ie(new Promise(l=>setTimeout(l,this.sleep)));let a=new bc({message:new Jo({content:s}),text:s});if(n.signal?.aborted)break;yield a,yield new Ie(i?.handleLLMNewToken(s,void 0,void 0,void 0,void 0,{chunk:a}))}})}},Nue=class Bue extends Gu{static lc_name(){return"FakeListChatModel"}lc_serializable=!0;responses;i=0;sleep;emitCustomEvent=!1;generationInfo;tools=[];toolStyle="openai";constructor(t){super(t);let{responses:n,sleep:i,emitCustomEvent:o,generationInfo:r}=t;this.responses=n,this.sleep=i,this.emitCustomEvent=o??this.emitCustomEvent,this.generationInfo=r}_combineLLMOutput(){return[]}_llmType(){return"fake-list"}_generate(t,n,i){return E(this,null,function*(){if(yield this._sleepIfRequested(),n?.thrownErrorString)throw new Error(n.thrownErrorString);if(this.emitCustomEvent&&(yield i?.handleCustomEvent("some_test_event",{someval:!0})),n?.stop?.length)return{generations:[this._formatGeneration(n.stop[0])]};{let o=this._currentResponse();return this._incrementResponse(),{generations:[this._formatGeneration(o)],llmOutput:{}}}})}_formatGeneration(t){return{message:new ii(t),text:t}}_streamResponseChunks(t,n,i){return Bt(this,null,function*(){let o=this._currentResponse();this._incrementResponse(),this.emitCustomEvent&&(yield new Ie(i?.handleCustomEvent("some_test_event",{someval:!0})));let r=[...o];for(let s=0;s<r.length;s++){let a=r[s],l=s===r.length-1;if(yield new Ie(this._sleepIfRequested()),n?.thrownErrorString)throw new Error(n.thrownErrorString);let c=this._createResponseChunk(a,l?this.generationInfo:void 0);if(n.signal?.aborted)break;yield c,i?.handleLLMNewToken(a)}})}_sleepIfRequested(){return E(this,null,function*(){this.sleep!==void 0&&(yield this._sleep())})}_sleep(){return E(this,null,function*(){return new Promise(t=>{setTimeout(()=>t(),this.sleep)})})}_createResponseChunk(t,n){return new bc({message:new Jo({content:t}),text:t,generationInfo:n})}_currentResponse(){return this.responses[this.i]}_incrementResponse(){this.i<this.responses.length-1?this.i+=1:this.i=0}bindTools(t){let n=[...this.tools,...t],i=n.map(s=>{switch(this.toolStyle){case"openai":return{type:"function",function:{name:s.name,description:s.description,parameters:Xi(s.schema)}};case"anthropic":return{name:s.name,description:s.description,input_schema:Xi(s.schema)};case"bedrock":return{toolSpec:{name:s.name,description:s.description,inputSchema:Xi(s.schema)}};case"google":return{name:s.name,description:s.description,parameters:Xi(s.schema)};default:throw new Error(`Unsupported tool style: ${this.toolStyle}`)}}),o=this.toolStyle==="google"?[{functionDeclarations:i}]:i,r=new Bue({responses:this.responses,sleep:this.sleep,emitCustomEvent:this.emitCustomEvent,generationInfo:this.generationInfo});return r.tools=n,r.toolStyle=this.toolStyle,r.i=this.i,r.withConfig({tools:o})}withStructuredOutput(t,n){return To.from(i=>E(this,null,function*(){let o=yield this.invoke(i);if(o.tool_calls?.[0]?.args)return o.tool_calls[0].args;if(typeof o.content=="string")return JSON.parse(o.content);throw new Error("No structured output found")}))}};var zue=class extends yx{vectorSize;constructor(e){super(e??{}),this.vectorSize=e?.vectorSize??4}embedDocuments(e){return E(this,null,function*(){return Promise.all(e.map(t=>this.embedQuery(t)))})}embedQuery(e){return E(this,null,function*(){let t=e;t=t.toLowerCase().replaceAll(/[^a-z ]/g,"");let n=t.length%this.vectorSize,i=n===0?0:this.vectorSize-n,o=t.length+i;t=t.padEnd(o," ");let r=t.length/this.vectorSize,s=[];for(let l=0;l<t.length;l+=r)s.push(t.slice(l,l+r));return s.map(l=>{let c=0;for(let h=0;h<l.length;h+=1)c+=l===" "?0:l.charCodeAt(h);return c%26/26})})}},Vue=class extends yx{constructor(e){super(e??{})}embedDocuments(e){return Promise.resolve(e.map(()=>[.1,.2,.3,.4]))}embedQuery(e){return Promise.resolve([.1,.2,.3,.4])}};var Hue=class extends bT{response;thrownErrorString;constructor(e){super(e),this.response=e.response,this.thrownErrorString=e.thrownErrorString}_llmType(){return"fake"}_call(e,t,n){return E(this,null,function*(){if(this.thrownErrorString)throw new Error(this.thrownErrorString);let i=this.response??e;return yield n?.handleLLMNewToken(i),i})}},$ue=class extends bT{sleep=50;responses;thrownErrorString;constructor(e){super(e),this.sleep=e.sleep??this.sleep,this.responses=e.responses,this.thrownErrorString=e.thrownErrorString}_llmType(){return"fake"}_call(e){return E(this,null,function*(){if(this.thrownErrorString)throw new Error(this.thrownErrorString);let t=this.responses?.[0];return this.responses=this.responses?.slice(1),t??e})}_streamResponseChunks(e,t,n){return Bt(this,null,function*(){if(this.thrownErrorString)throw new Error(this.thrownErrorString);let i=this.responses?.[0];this.responses=this.responses?.slice(1);for(let o of i??e)yield new Ie(new Promise(r=>setTimeout(r,this.sleep))),yield{text:o,generationInfo:{}},yield new Ie(n?.handleLLMNewToken(o))})}};var jue=class extends T${lc_namespace=["langchain_core","message","fake"];messages=[];constructor(){super()}getMessages(){return E(this,null,function*(){return this.messages})}addMessage(e){return E(this,null,function*(){this.messages.push(e)})}addUserMessage(e){return E(this,null,function*(){this.messages.push(new wE(e))})}addAIMessage(e){return E(this,null,function*(){this.messages.push(new ii(e))})}clear(){return E(this,null,function*(){this.messages=[]})}},Gue=class extends kT{lc_namespace=["langchain_core","message","fake"];messages=[];constructor(){super()}addMessage(e){return E(this,null,function*(){this.messages.push(e)})}getMessages(){return E(this,null,function*(){return this.messages})}},Uue=class extends dm{name="fake_tracer";runs=[];constructor(){super()}persistRun(e){return this.runs.push(e),Promise.resolve()}};var Wue=class extends P9{lc_namespace=["tests","fake"];getFormatInstructions(){return""}parse(e){return E(this,null,function*(){return e.split(",").map(t=>t.trim())})}};var que=class extends kx{lc_namespace=["test","fake"];output=[new ps({pageContent:"foo"}),new ps({pageContent:"bar"})];constructor(e){super(),this.output=e?.output??this.output}_getRelevantDocuments(e){return E(this,null,function*(){return this.output})}};var Kue=class extends oi{lc_namespace=["tests","fake"];returnOptions;constructor(e){super(e),this.returnOptions=e.returnOptions}invoke(e,t){return E(this,null,function*(){return this.returnOptions?t??{}:{input:e}})}};var Zue=class extends T0{name;description;schema;constructor(e){super(e),this.name=e.name,this.description=e.description,this.schema=e.schema}_call(e,t){return E(this,null,function*(){return JSON.stringify(e)})}};var Yue=class extends dm{runPromiseResolver;runPromise;name="single_run_extractor";constructor(){super(),this.runPromise=new Promise(e=>{this.runPromiseResolver=e})}persistRun(e){return E(this,null,function*(){this.runPromiseResolver(e)})}extract(){return E(this,null,function*(){return this.runPromise})}};function OT(e,t){let n=0,i=0,o=0;for(let r=0;r<e.length;r++)n+=e[r]*t[r],i+=e[r]*e[r],o+=t[r]*t[r];return n/(Math.sqrt(i)*Math.sqrt(o))}var Que=class Jue extends RT{memoryVectors=[];similarity;_vectorstoreType(){return"memory"}constructor(t,o={}){var r=o,{similarity:n}=r,i=Be(r,["similarity"]);super(t,i),this.similarity=n??OT}addDocuments(t){return E(this,null,function*(){let n=t.map(({pageContent:i})=>i);return this.addVectors(yield this.embeddings.embedDocuments(n),t)})}addVectors(t,n){return E(this,null,function*(){let i=t.map((o,r)=>({content:n[r].pageContent,embedding:o,metadata:n[r].metadata}));this.memoryVectors=this.memoryVectors.concat(i)})}similaritySearchVectorWithScore(t,n,i){return E(this,null,function*(){let o=l=>{if(!i)return!0;let c=new ps({metadata:l.metadata,pageContent:l.content});return i(c)},r=this.memoryVectors.filter(o);return r.map((l,c)=>({similarity:this.similarity(t,l.embedding),index:c})).sort((l,c)=>l.similarity>c.similarity?-1:0).slice(0,n).map(l=>[new ps({metadata:r[l.index].metadata,pageContent:r[l.index].content}),l.similarity])})}static fromTexts(t,n,i,o){return E(this,null,function*(){let r=[];for(let s=0;s<t.length;s+=1){let a=Array.isArray(n)?n[s]:n,l=new ps({pageContent:t[s],metadata:a});r.push(l)}return Jue.fromDocuments(r,i,o)})}static fromDocuments(t,n,i){return E(this,null,function*(){let o=new this(n,i);return yield o.addDocuments(t),o})}static fromExistingIndex(t,n){return E(this,null,function*(){return new this(t,n)})}};var oj={};_t(oj,{FakeChatMessageHistory:()=>jue,FakeChatModel:()=>Oue,FakeEmbeddings:()=>Vue,FakeLLM:()=>Hue,FakeListChatMessageHistory:()=>Gue,FakeListChatModel:()=>Nue,FakeRetriever:()=>que,FakeRunnable:()=>Kue,FakeSplitIntoListParser:()=>Wue,FakeStreamingChatModel:()=>Fue,FakeStreamingLLM:()=>$ue,FakeTool:()=>Zue,FakeTracer:()=>Uue,FakeVectorStore:()=>Que,SingleRunExtractor:()=>Yue,SyntheticEmbeddings:()=>zue});var sj={};_t(sj,{EventStreamContentType:()=>t9e,convertEventStreamToIterableReadableDataStream:()=>i9e,getBytes:()=>Xue,getLines:()=>ehe,getMessages:()=>the});var t9e="text/event-stream";function Xue(e,t){return E(this,null,function*(){if(e instanceof ReadableStream){let s=e.getReader();for(;;){let a=yield s.read();if(a.done){t(new Uint8Array,!0);break}t(a.value)}}else try{try{for(var n=lt(e),i,o,r;i=!(o=yield n.next()).done;i=!1){let s=o.value;t(new Uint8Array(s))}}catch{r=[o]}finally{try{i&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r[0]}}t(new Uint8Array,!0)}catch(s){throw new Error(["Parsing event source stream failed.","Ensure your implementation of fetch returns a web or Node readable stream.",`Error: ${s.message}`].join(`
`))}})}var D_=(function(e){return e[e.NewLine=10]="NewLine",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.Colon=58]="Colon",e})(D_||{});function ehe(e){let t,n,i,o=!1;return function(s,a){if(a){e(s,0,!0);return}t===void 0?(t=s,n=0,i=-1):t=n9e(t,s);let l=t.length,c=0;for(;n<l;){o&&(t[n]===D_.NewLine&&(c=++n),o=!1);let u=-1;for(;n<l&&u===-1;++n)switch(t[n]){case D_.Colon:i===-1&&(i=n-c);break;case D_.CarriageReturn:o=!0;case D_.NewLine:u=n;break}if(u===-1)break;e(t.subarray(c,u),i),c=n,i=-1}c===l?t=void 0:c!==0&&(t=t.subarray(c),n-=c)}}function the(e,t,n){let i=rj(),o=new TextDecoder;return function(s,a,l){if(l){o9e(i)||(e?.(i),i=rj());return}if(s.length===0)e?.(i),i=rj();else if(a>0){let c=o.decode(s.subarray(0,a)),u=a+(s[a+1]===D_.Space?2:1),h=o.decode(s.subarray(u));switch(c){case"data":i.data=i.data?i.data+`
`+h:h;break;case"event":i.event=h;break;case"id":t?.(i.id=h);break;case"retry":{let f=parseInt(h,10);Number.isNaN(f)||n?.(i.retry=f);break}}}}}function n9e(e,t){let n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function rj(){return{data:"",event:"",id:"",retry:void 0}}function i9e(e,t){let n=new ReadableStream({start(o){return E(this,null,function*(){let r=the(a=>{if(a.event==="error")throw new Error(a.data??"Unspecified event streaming error.");a.event==="metadata"?t?.(a):a.data&&o.enqueue(a.data)});yield Xue(e,ehe((a,l,c)=>{r(a,l,c),c&&o.close()}))})}});return Qy.fromReadableStream(n)}function o9e(e){return e.data===""&&e.event===""&&e.id===""&&e.retry===void 0}var nhe={};function ihe(e,t){let n=0;for(let i=0;i<e.length;i++)n+=e[i]*t[i];return n}function r9e(e,t){let n=0;for(let i=0;i<e.length;i++)n+=(e[i]-t[i])*(e[i]-t[i]);return n}function ohe(e,t){return Math.sqrt(r9e(e,t))}var lj={};_t(lj,{cosineSimilarity:()=>aj,euclideanDistance:()=>l9e,innerProduct:()=>a9e,matrixFunc:()=>FT,maximalMarginalRelevance:()=>c9e,normalize:()=>s9e});function FT(e,t,n){if(e.length===0||e[0].length===0||t.length===0||t[0].length===0)return[[]];if(e[0].length!==t[0].length)throw new Error(`Number of columns in X and Y must be the same. X has shape ${[e.length,e[0].length]} and Y has shape ${[t.length,t[0].length]}.`);return e.map(i=>t.map(o=>n(i,o)).map(o=>Number.isNaN(o)?0:o))}function s9e(e,t=!1){let n=d9e(e);return e.map(i=>i.map(o=>t?1-o/n:o/n))}function aj(e,t){return FT(e,t,OT)}function a9e(e,t){return FT(e,t,ihe)}function l9e(e,t){return FT(e,t,ohe)}function c9e(e,t,n=.5,i=4){if(Math.min(i,t.length)<=0)return[];let o=Array.isArray(e[0])?e:[e],r=aj(o,t)[0],s=rhe(r).maxIndex,a=[t[s]],l=[s];for(;l.length<Math.min(i,t.length);){let c=-1/0,u=-1,h=aj(t,a);r.forEach((f,m)=>{if(l.includes(m))return;let _=Math.max(...h[m]),y=n*f-(1-n)*_;y>c&&(c=y,u=m)}),a.push(t[u]),l.push(u)}return l}function rhe(e){if(e.length===0)return{maxIndex:-1,maxValue:NaN};let t=e[0],n=0;for(let i=1;i<e.length;i+=1)e[i]>t&&(n=i,t=e[i]);return{maxIndex:n,maxValue:t}}function d9e(e){return e.reduce((t,n)=>Math.max(t,rhe(n).maxValue),0)}var cj={};_t(cj,{agents:()=>yue,caches:()=>H9,callbacks__base:()=>qW,callbacks__manager:()=>e9,callbacks__promises:()=>XW,chat_history:()=>R$,document_loaders__base:()=>L$,document_loaders__langsmith:()=>B$,documents:()=>V$,embeddings:()=>_$,example_selectors:()=>U9,index:()=>bue,indexing:()=>W$,language_models__base:()=>j9,language_models__chat_models:()=>a$,language_models__llms:()=>f$,language_models__profile:()=>Due,load__serializable:()=>TW,memory:()=>P$,messages:()=>M9,messages__tool:()=>NW,output_parsers:()=>F9,output_parsers__openai_functions:()=>Q$,output_parsers__openai_tools:()=>c$,outputs:()=>a9,prompt_values:()=>L9,prompts:()=>B9,retrievers:()=>O$,retrievers__document_compressors:()=>q$,runnables:()=>T9,runnables__graph:()=>I9,singletons:()=>t9,stores:()=>A$,structured_query:()=>ij,tools:()=>s8,tracers__base:()=>YW,tracers__console:()=>QW,tracers__log_stream:()=>s9,tracers__run_collector:()=>K$,tracers__tracer_langchain:()=>JW,types__stream:()=>kue,utils__async_caller:()=>l9,utils__chunk_array:()=>g$,utils__env:()=>GW,utils__event_source_parse:()=>sj,utils__format:()=>nhe,utils__function_calling:()=>Q8,utils__hash:()=>V9,utils__json_patch:()=>A9,utils__json_schema:()=>D9,utils__math:()=>lj,utils__stream:()=>o9,utils__testing:()=>oj,utils__tiktoken:()=>$9,utils__types:()=>e$,vectorstores:()=>F$});function u9e(e){let t={};for(let n=e;n&&n.prototype;n=Object.getPrototypeOf(n))Object.assign(t,Reflect.get(n.prototype,"lc_aliases"));return Object.entries(t).reduce((n,[i,o])=>(n[o]=i,n),{})}function LT(e){return E(this,null,function*(){let{optionalImportsMap:t={},optionalImportEntrypoints:n=[],importMap:i={},secretsMap:o={},path:r=["$"]}=this,s=r.join(".");if(typeof e=="object"&&e!==null&&!Array.isArray(e)&&"lc"in e&&"type"in e&&"id"in e&&e.lc===1&&e.type==="secret"){let a=e,[l]=a.id;if(l in o)return o[l];{let c=ls(l);if(c)return c;throw new Error(`Missing key "${l}" for ${s} in load(secretsMap={})`)}}else if(typeof e=="object"&&e!==null&&!Array.isArray(e)&&"lc"in e&&"type"in e&&"id"in e&&e.lc===1&&e.type==="not_implemented"){let l=JSON.stringify(e);throw new Error(`Trying to load an object that doesn't implement serialization: ${s} -> ${l}`)}else if(typeof e=="object"&&e!==null&&!Array.isArray(e)&&"lc"in e&&"type"in e&&"id"in e&&"kwargs"in e&&e.lc===1){let a=e,l=JSON.stringify(a),[c,...u]=a.id.slice().reverse(),h=u.reverse(),f={langchain_core:cj,langchain:i},m=null,_=[h.join("/")];h[0]==="langchain_community"&&_.push(["langchain",...h.slice(1)].join("/"));let y=_.find(S=>S in t);if(_ue.concat(n).includes(h.join("/"))||y)if(y!==void 0)m=yield t[y];else throw new Error(`Missing key "${h.join("/")}" for ${s} in load(optionalImportsMap={})`);else{let S;if(h[0]==="langchain"||h[0]==="langchain_core")S=f[h[0]],h.shift();else throw new Error(`Invalid namespace: ${s} -> ${l}`);if(h.length===0)throw new Error(`Invalid namespace: ${s} -> ${l}`);let I;do{if(I=h.join("__"),I in S)break;h.pop()}while(h.length>0);I in S&&(m=S[I])}if(typeof m!="object"||m===null)throw new Error(`Invalid namespace: ${s} -> ${l}`);let w=m[c]??Object.values(m).find(S=>typeof S=="function"&&PW(S)===c);if(typeof w!="function")throw new Error(`Invalid identifer: ${s} -> ${l}`);let C=yield LT.call(x(g({},this),{path:[...r,"kwargs"]}),a.kwargs);if(a.type==="constructor"){let S=new w(RW(C,MW,u9e(w)));return Object.defineProperty(S.constructor,"name",{value:c}),S}else throw new Error(`Invalid type: ${s} -> ${l}`)}else if(typeof e=="object"&&e!==null)return Array.isArray(e)?Promise.all(e.map((a,l)=>LT.call(x(g({},this),{path:[...r,`${l}`]}),a))):Object.fromEntries(yield Promise.all(Object.entries(e).map(c=>E(this,[c],function*([a,l]){return[a,yield LT.call(x(g({},this),{path:[...r,a]}),l)]}))));return e})}function she(e,t){return E(this,null,function*(){let n=JSON.parse(e);return LT.call(g({},t),n)})}function h9e(e){return e!==null&&e.lc===1&&e.type==="constructor"&&Array.isArray(e.id)}function uj(e){return E(this,null,function*(){if(e&&typeof e=="object"){if(Array.isArray(e))return yield Promise.all(e.map(n=>uj(n)));{let t={};for(let[n,i]of Object.entries(e))t[n]=yield uj(i);if(t.lc===2&&t.type==="undefined")return;if(t.lc===2&&t.type==="constructor"&&Array.isArray(t.id))try{let n=t.id[t.id.length-1],i;switch(n){case"Set":i=Set;break;case"Map":i=Map;break;case"RegExp":i=RegExp;break;case"Error":i=Error;break;default:return t}return t.method?i[t.method](...t.args||[]):new i(...t.args||[])}catch{return t}else if(h9e(t))return she(JSON.stringify(t));return t}}return e})}function dj(e,t,n,i){return{lc:2,type:"constructor",id:[e.name],method:t??null,args:n??[],kwargs:i??{}}}function p9e(e){return e===void 0?{lc:2,type:"undefined"}:e instanceof Set||e instanceof Map?dj(e.constructor,void 0,[Array.from(e)]):e instanceof RegExp?dj(RegExp,void 0,[e.source,e.flags]):e instanceof Error?dj(e.constructor,void 0,[e.message]):e?.lg_name==="Send"?{node:e.node,args:e.args}:e}var hj=class{_dumps(e){return new TextEncoder().encode(vue(e,(n,i)=>p9e(i)))}dumpsTyped(e){return E(this,null,function*(){return e instanceof Uint8Array?["bytes",e]:["json",this._dumps(e)]})}_loads(e){return E(this,null,function*(){let t=JSON.parse(e);return uj(t)})}loadsTyped(e,t){return E(this,null,function*(){if(e==="bytes")return typeof t=="string"?new TextEncoder().encode(t):t;if(e==="json")return this._loads(typeof t=="string"?t:new TextDecoder().decode(t));throw new Error(`Unknown serialization type: ${e}`)})}};function pj(e){if(typeof e!="object"||e===null)return e;let t=Array.isArray(e)?[]:{};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=pj(e[n]));return t}function Rx(){return{v:4,id:Ex(-2),ts:new Date().toISOString(),channel_values:{},channel_versions:{},versions_seen:{}}}function bd(e){return{v:e.v,id:e.id,ts:e.ts,channel_values:g({},e.channel_values),channel_versions:g({},e.channel_versions),versions_seen:pj(e.versions_seen)}}function NT(e,t){return typeof e=="number"&&typeof t=="number"?Math.sign(e-t):String(e).localeCompare(String(t))}function BT(...e){return e.reduce((t,n,i)=>i===0?n:NT(t,n)>=0?t:n)}var zT={[E$]:-1,[ff]:-2,[D$]:-3,[k$]:-4};var k_=class extends Error{constructor(e){super(e),this.name="InvalidNamespaceError"}};function v9e(e){if(e.length===0)throw new k_("Namespace cannot be empty.");for(let t of e){if(typeof t!="string")throw new k_(`Invalid namespace label '${t}' found in ${e}. Namespace labels must be strings, but got ${typeof t}.`);if(t.includes("."))throw new k_(`Invalid namespace label '${t}' found in ${e}. Namespace labels cannot contain periods ('.').`);if(t==="")throw new k_(`Namespace labels cannot be empty strings. Got ${t} in ${e}`)}if(e[0]==="langgraph")throw new k_(`Root label for namespace cannot be "langgraph". Got: ${e}`)}var VT=class{get(e,t){return E(this,null,function*(){return(yield this.batch([{namespace:e,key:t}]))[0]})}search(n){return E(this,arguments,function*(e,t={}){let{filter:i,limit:o=10,offset:r=0,query:s}=t;return(yield this.batch([{namespacePrefix:e,filter:i,limit:o,offset:r,query:s}]))[0]})}put(e,t,n,i){return E(this,null,function*(){v9e(e),yield this.batch([{namespace:e,key:t,value:n,index:i}])})}delete(e,t){return E(this,null,function*(){yield this.batch([{namespace:e,key:t,value:null}])})}listNamespaces(){return E(this,arguments,function*(e={}){let{prefix:t,suffix:n,maxDepth:i,limit:o=100,offset:r=0}=e,s=[];return t&&s.push({matchType:"prefix",path:t}),n&&s.push({matchType:"suffix",path:n}),(yield this.batch([{matchConditions:s.length?s:void 0,maxDepth:i,limit:o,offset:r}]))[0]})}start(){}stop(){}};var _9e=e=>"lg_name"in e&&e.lg_name==="AsyncBatchedStore"?e.store:e,fj=class extends VT{lg_name="AsyncBatchedStore";store;queue=new Map;nextKey=0;running=!1;processingTask=null;constructor(e){super(),this.store=_9e(e)}get isRunning(){return this.running}batch(e){return E(this,null,function*(){throw new Error("The `batch` method is not implemented on `AsyncBatchedStore`.\n Instead, it calls the `batch` method on the wrapped store.\n If you are seeing this error, something is wrong.")})}get(e,t){return E(this,null,function*(){return this.enqueueOperation({namespace:e,key:t})})}search(e,t){return E(this,null,function*(){let{filter:n,limit:i=10,offset:o=0,query:r}=t||{};return this.enqueueOperation({namespacePrefix:e,filter:n,limit:i,offset:o,query:r})})}put(e,t,n){return E(this,null,function*(){return this.enqueueOperation({namespace:e,key:t,value:n})})}delete(e,t){return E(this,null,function*(){return this.enqueueOperation({namespace:e,key:t,value:null})})}start(){this.running||(this.running=!0,this.processingTask=this.processBatchQueue())}stop(){return E(this,null,function*(){this.running=!1,this.processingTask&&(yield this.processingTask)})}enqueueOperation(e){return new Promise((t,n)=>{let i=this.nextKey;this.nextKey+=1,this.queue.set(i,{operation:e,resolve:t,reject:n})})}processBatchQueue(){return E(this,null,function*(){for(;this.running;){if(yield new Promise(t=>{setTimeout(t,0)}),this.queue.size===0)continue;let e=new Map(this.queue);this.queue.clear();try{let t=Array.from(e.values()).map(({operation:i})=>i),n=yield this.store.batch(t);e.forEach(({resolve:i},o)=>{let r=Array.from(e.keys()).indexOf(o);i(n[r])})}catch(t){e.forEach(({reject:n})=>{n(t)})}}})}toJSON(){return{queue:this.queue,nextKey:this.nextKey,running:this.running,store:"[LangGraphStore]"}}};var HT=class{serde=new hj;constructor(e){this.serde=e||this.serde}};function gj(e){return e!=null&&e.lg_is_channel===!0}var ca=class{ValueType;UpdateType;lg_is_channel=!0;consume(){return!1}finish(){return!1}isAvailable(){try{return this.get(),!0}catch(e){if(e.name===pi.unminifiable_name)return!1;throw e}}},mj=Symbol.for("LG_IS_ONLY_BASE_CHANNEL");function Tx(e){if(e[mj]===!0)return e;let t={};for(let n in e){if(!Object.prototype.hasOwnProperty.call(e,n))continue;let i=e[n];gj(i)&&(t[n]=i)}return Object.assign(t,{[mj]:!0}),t}function _f(e,t){let n=Tx(e),i={};for(let o in n){if(!Object.prototype.hasOwnProperty.call(n,o))continue;let r=t.channel_values[o];i[o]=n[o].fromCheckpoint(r)}return Object.assign(i,{[mj]:!0}),i}function sc(e,t,n,i){let o;if(t===void 0)o=e.channel_values;else{o={};for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r))try{o[r]=t[r].checkpoint()}catch(s){if(s.name!==pi.unminifiable_name)throw s}}return{v:4,id:i?.id??Ex(n),ts:new Date().toISOString(),channel_values:o,channel_versions:e.channel_versions,versions_seen:e.versions_seen}}var Px=class ahe extends ca{lc_graph_name="LastValue";value=[];fromCheckpoint(t){let n=new ahe;return typeof t<"u"&&(n.value=[t]),n}update(t){if(t.length===0)return!1;if(t.length!==1)throw new Sn("LastValue can only receive one value per step.",{lc_error_code:"INVALID_CONCURRENT_GRAPH_UPDATE"});return this.value=[t[t.length-1]],!0}get(){if(this.value.length===0)throw new pi;return this.value[0]}checkpoint(){if(this.value.length===0)throw new pi;return this.value[0]}isAvailable(){return this.value.length!==0}},lhe=class che extends ca{lc_graph_name="LastValueAfterFinish";value=[];finished=!1;fromCheckpoint(t){let n=new che;if(typeof t<"u"){let[i,o]=t;n.value=[i],n.finished=o}return n}update(t){return t.length===0?!1:(this.finished=!1,this.value=[t[t.length-1]],!0)}get(){if(this.value.length===0||!this.finished)throw new pi;return this.value[0]}checkpoint(){if(this.value.length!==0)return[this.value[0],this.finished]}consume(){return this.finished?(this.finished=!1,this.value=[],!0):!1}finish(){return!this.finished&&this.value.length>0?(this.finished=!0,!0):!1}isAvailable(){return this.value.length!==0&&this.finished}};var Ax=class dhe extends ca{lc_graph_name="BinaryOperatorAggregate";value;operator;initialValueFactory;constructor(t,n){super(),this.operator=t,this.initialValueFactory=n,this.value=n?.()}fromCheckpoint(t){let n=new dhe(this.operator,this.initialValueFactory);return typeof t<"u"&&(n.value=t),n}update(t){let n=t;if(!n.length)return!1;this.value===void 0&&([this.value]=n,n=n.slice(1));for(let i of n)this.value!==void 0&&(this.value=this.operator(this.value,i));return!0}get(){if(this.value===void 0)throw new pi;return this.value}checkpoint(){if(this.value===void 0)throw new pi;return this.value}isAvailable(){return this.value!==void 0}};var y9e=class{lc_graph_name="AnnotationRoot";spec;constructor(e){this.spec=e}},Ku=function(e){return e?$T(e):new Px};Ku.Root=e=>new y9e(e);function $T(e){return typeof e=="object"&&e&&"reducer"in e&&e.reducer?new Ax(e.reducer,e.default):typeof e=="object"&&e&&"value"in e&&e.value?new Ax(e.value,e.default):new Px}var b9e=["tags","metadata","callbacks","configurable"],C9e=["tags","metadata","callbacks","runName","maxConcurrency","recursionLimit","configurable","runId","outputKeys","streamMode","store","writer","interrupt","context","interruptBefore","interruptAfter","checkpointDuring","durability","signal"],w9e=25;function Ox(...e){let t={tags:[],metadata:{},callbacks:void 0,recursionLimit:w9e,configurable:{}},n=zr.getRunnableConfig();if(n!==void 0){for(let[i,o]of Object.entries(n))if(o!==void 0)if(b9e.includes(i)){let r;Array.isArray(o)?r=[...o]:typeof o=="object"?i==="callbacks"&&"copy"in o&&typeof o.copy=="function"?r=o.copy():r=g({},o):r=o,t[i]=r}else t[i]=o}for(let i of e)if(i!==void 0)for(let[o,r]of Object.entries(i))r!==void 0&&C9e.includes(o)&&(t[o]=r);for(let[i,o]of Object.entries(t.configurable))t.metadata=t.metadata??{},!i.startsWith("__")&&(typeof o=="string"||typeof o=="number"||typeof o=="boolean")&&!(i in t.metadata)&&(t.metadata[i]=o);return t}function uhe(){return zr.getRunnableConfig()}function jT(e){return e.split(ti).filter(t=>!t.match(/^\d+$/)).map(t=>t.split(Pr)[0]).join(ti)}function hhe(e){let t=e.split(ti);for(;t.length>1&&t[t.length-1].match(/^\d+$/);)t.pop();return t.slice(0,-1).join(ti)}var ts=class extends oi{lc_namespace=["langgraph"];func;tags;config;trace=!0;recurse=!0;constructor(e){super(),this.name=e.name??e.func.name,this.func=e.func,this.config=e.tags?{tags:e.tags}:void 0,this.trace=e.trace??this.trace,this.recurse=e.recurse??this.recurse}_tracedInvoke(e,t,n){return E(this,null,function*(){return new Promise((i,o)=>{let r=Hs(t,{callbacks:n?.getChild()});zr.runWithConfig(r,()=>E(this,null,function*(){try{let s=yield this.func(e,r);i(s)}catch(s){o(s)}}))})})}invoke(e,t){return E(this,null,function*(){let n,i=Ox(t),o=cs(this.config,i);return this.trace?n=yield this._callWithConfig(this._tracedInvoke,e,o):n=yield zr.runWithConfig(o,()=>E(this,null,function*(){return this.func(e,o)})),oi.isRunnable(n)&&this.recurse?yield zr.runWithConfig(o,()=>E(this,null,function*(){return n.invoke(e,o)})):n})}};function*Cd(e,t){if(t===void 0)yield*co(e);else for(let n of e)yield[t,n]}function Xa(e){return E(this,null,function*(){let t=[];try{for(var n=lt(yield e),i,o,r;i=!(o=yield n.next()).done;i=!1){let s=o.value;t.push(s)}}catch{r=[o]}finally{try{i&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r[0]}}return t})}function yf(e){let t=[];for(let n of e)t.push(n);return t}function bf(e,t){return e?"configurable"in e?x(g({},e),{configurable:g(g({},e.configurable),t)}):x(g({},e),{configurable:t}):{configurable:t}}var eqt={[Symbol.for("LG_SKIP_WRITE")]:!0};function x9e(e){return typeof e=="object"&&e?.[Symbol.for("LG_SKIP_WRITE")]!==void 0}var el={[Symbol.for("LG_PASSTHROUGH")]:!0};function GT(e){return typeof e=="object"&&e?.[Symbol.for("LG_PASSTHROUGH")]!==void 0}var vj=Symbol("IS_WRITER"),lo=class yj extends ts{writes;constructor(t,n){let i=`ChannelWrite<${t.map(o=>ao(o)?o.node:"channel"in o?o.channel:"...").join(",")}>`;super({writes:t,name:i,tags:n,func:(o,r)=>E(this,null,function*(){return this._write(o,r??{})})}),this.writes=t}_write(t,n){return E(this,null,function*(){let i=this.writes.map(o=>_j(o)&&GT(o.value)?{mapper:o.mapper,value:t}:UT(o)&&GT(o.value)?{channel:o.channel,value:t,skipNone:o.skipNone,mapper:o.mapper}:o);return yield yj.doWrite(n,i),t})}static doWrite(t,n){return E(this,null,function*(){for(let r of n){if(UT(r)){if(r.channel===pr)throw new Sn("Cannot write to the reserved channel TASKS");if(GT(r.value))throw new Sn("PASSTHROUGH value must be replaced")}if(_j(r)&&GT(r.value))throw new Sn("PASSTHROUGH value must be replaced")}let i=[];for(let r of n)if(ao(r))i.push([pr,r]);else if(_j(r)){let s=yield r.mapper.invoke(r.value,t);s!=null&&s.length>0&&i.push(...s)}else if(UT(r)){let s=r.mapper!==void 0?yield r.mapper.invoke(r.value,t):r.value;if(x9e(s)||r.skipNone&&s===void 0)continue;i.push([r.channel,s])}else throw new Error(`Invalid write entry: ${JSON.stringify(r)}`);let o=t.configurable?.[la];o(i)})}static isWriter(t){return t instanceof yj||vj in t&&!!t[vj]}static registerWriter(t){return Object.defineProperty(t,vj,{value:!0})}};function UT(e){return e!==void 0&&typeof e.channel=="string"}function _j(e){return e!==void 0&&!UT(e)&&oi.isRunnable(e.mapper)}var phe=class fhe extends ts{lc_graph_name="ChannelRead";channel;fresh=!1;mapper;constructor(t,n,i=!1){super({func:(o,r)=>fhe.doRead(r,this.channel,this.fresh,this.mapper)}),this.fresh=i,this.mapper=n,this.channel=t,this.name=Array.isArray(t)?`ChannelRead<${t.join(",")}>`:`ChannelRead<${t}>`}static doRead(t,n,i,o){let r=t.configurable?.[Ya];if(!r)throw new Error("Runnable is not configured with a read function. Make sure to call in the context of a Pregel process");return o?o(r(n,i)):r(n,i)}},I_=new zd,wd=class Fx extends hs{lc_graph_name="PregelNode";channels;triggers=[];mapper;writers=[];bound=I_;kwargs={};metadata={};tags=[];retryPolicy;cachePolicy;subgraphs;ends;constructor(t){let{channels:n,triggers:i,mapper:o,writers:r,bound:s,kwargs:a,metadata:l,retryPolicy:c,cachePolicy:u,tags:h,subgraphs:f,ends:m}=t,_=[...t.config?.tags?t.config.tags:[],...h??[]];super(x(g({},t),{bound:t.bound??I_,config:x(g({},t.config?t.config:{}),{tags:_})})),this.channels=n,this.triggers=i,this.mapper=o,this.writers=r??this.writers,this.bound=s??this.bound,this.kwargs=a??this.kwargs,this.metadata=l??this.metadata,this.tags=_,this.retryPolicy=c,this.cachePolicy=u,this.subgraphs=f,this.ends=m}getWriters(){let t=[...this.writers];for(;t.length>1&&t[t.length-1]instanceof lo&&t[t.length-2]instanceof lo;){let n=t.slice(-2),i=n[0].writes.concat(n[1].writes);t[t.length-2]=new lo(i,n[0].config?.tags),t.pop()}return t}getNode(){let t=this.getWriters();if(!(this.bound===I_&&t.length===0))return this.bound===I_&&t.length===1?t[0]:this.bound===I_?new Ci({first:t[0],middle:t.slice(1,t.length-1),last:t[t.length-1],omitSequenceTags:!0}):t.length>0?new Ci({first:this.bound,middle:t.slice(0,t.length-1),last:t[t.length-1],omitSequenceTags:!0}):this.bound}join(t){if(!Array.isArray(t))throw new Error("channels must be a list");if(typeof this.channels!="object")throw new Error("all channels must be named when using .join()");return new Fx({channels:g(g({},this.channels),Object.fromEntries(t.map(n=>[n,n]))),triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:this.bound,kwargs:this.kwargs,config:this.config,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy})}pipe(t){return lo.isWriter(t)?new Fx({channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:[...this.writers,t],bound:this.bound,config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy}):this.bound===I_?new Fx({channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:ll(t),config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy}):new Fx({channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:this.bound.pipe(t),config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy})}};function S9e(e){return"steps"in e&&Array.isArray(e.steps)}function Lx(e){return"lg_is_pregel"in e&&e.lg_is_pregel===!0}function WT(e){let t=[e];for(let n of t){if(Lx(n))return n;S9e(n)&&t.push(...n.steps)}}var Zu=class mhe extends ca{lc_graph_name="EphemeralValue";guard;value=[];constructor(t=!0){super(),this.guard=t}fromCheckpoint(t){let n=new mhe(this.guard);return typeof t<"u"&&(n.value=[t]),n}update(t){if(t.length===0){let n=this.value.length>0;return this.value=[],n}if(t.length!==1&&this.guard)throw new Sn("EphemeralValue can only receive one value per step.");return this.value=[t[t.length-1]],!0}get(){if(this.value.length===0)throw new pi;return this.value[0]}checkpoint(){if(this.value.length===0)throw new pi;return this.value[0]}isAvailable(){return this.value.length!==0}};var fe=e=>BigInt(e),Un=(e,t=0)=>new DataView(e.buffer,e.byteOffset+t,e.byteLength-t),yhe=fe("0x9E3779B1"),bhe=fe("0x85EBCA77"),E9e=fe("0xC2B2AE3D"),Yu=fe("0x9E3779B185EBCA87"),Cf=fe("0xC2B2AE3D27D4EB4F"),Che=fe("0x165667B19E3779F9"),wj=fe("0x85EBCA77C2B2AE63"),D9e=fe("0x27D4EB2F165667C5"),k9e=fe("0x165667919E3779F9"),I9e=fe("0x9FB21C651E98DF25"),M9e=e=>{let t=e.length;if(t%2!==0)throw new Error("String should have an even number of characters");let n=t/2,i=new Uint8Array(n),o=0,r=0;for(;r<n;){let s=e.slice(o,o+=2);i[r]=Number.parseInt(s,16),r+=1}return Un(i)},ac=M9e("b8fe6c3923a44bbe7c01812cf721ad1cded46de9839097db7240a4a4b7b3671fcb79e64eccc0e578825ad07dccff7221b8084674f743248ee03590e6813a264c3c2852bb91c300cb88d0658b1b532ea371644897a20df94e3819ef46a9deacd8a8fa763fe39c343ff9dcbbc7c70b4f1d8a51e04bcdb45931c89f7ec9d9787364eac5ac8334d3ebc3c581a0fffa1363eb170ddd51b7f0da49d316552629d4689e2b16be587d47a1fc8ff8b8d17ad031ce45cb3a8f95160428afd7fbcabb4b407e"),M_=(fe(1)<<fe(128))-fe(1),Qt=(fe(1)<<fe(64))-fe(1),YT=(fe(1)<<fe(32))-fe(1),xd=64,whe=xd/8,R9e=8,qT=4;function R_(e){if(!e)throw new Error("Assert failed")}function T9e(e){let t=new DataView(new ArrayBuffer(8));return t.setBigUint64(0,e,!0),t.getBigUint64(0,!1)}function P9e(e){let t=e;return t=(t&fe(65535))<<fe(16)|(t&fe(4294901760))>>fe(16),t=(t&fe(16711935))<<fe(8)|(t&fe(4278255360))>>fe(8),t}function A9e(e,t){return(e&YT)*(t&YT)&Qt}function O9e(e,t){return(e<<t|e>>fe(32)-t)&YT}function xhe(e,t,n){for(let i=0;i<whe;i+=1){let o=t.getBigUint64(i*8,!0),r=o^n.getBigUint64(i*8,!0);e[i^1]+=o,e[i]+=A9e(r,r>>fe(32))}return e}function ghe(e,t,n,i){for(let o=0;o<i;o+=1)xhe(e,Un(t,o*xd),Un(n,o*8));return e}function F9e(e,t){for(let n=0;n<whe;n+=1){let i=t.getBigUint64(n*8,!0),o=e[n];o=bj(o,fe(47)),o^=i,o*=yhe,e[n]=o&Qt}return e}function KT(e,t){return She(e[0]^t.getBigUint64(0,!0),e[1]^t.getBigUint64(R9e,!0))}function vhe(e,t,n){let i=n;return i+=KT(e.slice(0),Un(t,0*qT)),i+=KT(e.slice(2),Un(t,4*qT)),i+=KT(e.slice(4),Un(t,8*qT)),i+=KT(e.slice(6),Un(t,12*qT)),lc(i&Qt)}function L9e(e,t,n,i,o){let r=e,s=Math.floor((n.byteLength-xd)/8),a=xd*s,l=Math.floor((t.byteLength-1)/a);for(let c=0;c<l;c+=1)r=ghe(r,Un(t,c*a),n,s),r=o(r,Un(n,n.byteLength-xd));{let c=Math.floor((t.byteLength-1-a*l)/xd);r=ghe(r,Un(t,l*a),n,c),r=i(r,Un(t,t.byteLength-xd),Un(n,n.byteLength-xd-7))}return r}function N9e(e,t){let n=new BigUint64Array([E9e,Yu,Cf,Che,wj,bhe,D9e,yhe]);R_(e.byteLength>128),n=L9e(n,e,t,xhe,F9e),R_(n.length*8===64);{let i=vhe(n,Un(t,11),fe(e.byteLength)*Yu&Qt);return vhe(n,Un(t,t.byteLength-xd-11),~(fe(e.byteLength)*Cf)&Qt)<<fe(64)|i}}function She(e,t){let n=e*t&M_;return n&Qt^n>>fe(64)}function _he(e,t,n){return She((e.getBigUint64(0,!0)^t.getBigUint64(0,!0)+n)&Qt,(e.getBigUint64(8,!0)^t.getBigUint64(8,!0)-n)&Qt)}function ZT(e,t,n,i,o){let r=e&Qt,s=e>>fe(64)&Qt;return r+=_he(t,i,o),r^=n.getBigUint64(0,!0)+n.getBigUint64(8,!0),r&=Qt,s+=_he(n,Un(i,16),o),s^=t.getBigUint64(0,!0)+t.getBigUint64(8,!0),s&=Qt,s<<fe(64)|r}function lc(e){let t=e;return t^=t>>fe(37),t*=k9e,t&=Qt,t^=t>>fe(32),t}function QT(e){let t=e;return t^=t>>fe(33),t*=Cf,t&=Qt,t^=t>>fe(29),t*=Che,t&=Qt,t^=t>>fe(32),t}function B9e(e,t,n){let i=e.byteLength;R_(i>0&&i<=3);let o=fe(e.getUint8(i-1))|fe(i<<8)|fe(e.getUint8(0)<<16)|fe(e.getUint8(i>>1)<<24),r=(fe(t.getUint32(0,!0))^fe(t.getUint32(4,!0)))+n,s=(o^r)&Qt,a=(fe(t.getUint32(8,!0))^fe(t.getUint32(12,!0)))-n,l=(O9e(P9e(o),fe(13))^a)&Qt;return(QT(l)&Qt)<<fe(64)|QT(s)}function bj(e,t){return e^e>>t}function z9e(e,t,n){let i=e.byteLength;R_(i>=4&&i<=8);{let o=e.getUint32(0,!0),r=e.getUint32(i-4,!0),s=fe(o)|fe(r)<<fe(32),a=(t.getBigUint64(16,!0)^t.getBigUint64(24,!0))+n&Qt,c=(s^a)*(Yu+(fe(i)<<fe(2)))&M_;return c+=(c&Qt)<<fe(65),c&=M_,c^=c>>fe(67),bj(bj(c&Qt,fe(35))*I9e&Qt,fe(28))|lc(c>>fe(64))<<fe(64)}}function V9e(e,t,n){let i=e.byteLength;R_(i>=9&&i<=16);{let o=(t.getBigUint64(32,!0)^t.getBigUint64(40,!0))+n&Qt,r=(t.getBigUint64(48,!0)^t.getBigUint64(56,!0))-n&Qt,s=e.getBigUint64(0,!0),a=e.getBigUint64(i-8,!0),l=(s^a^o)*Yu,c=(l&Qt)+(fe(i-1)<<fe(54));l=l&(M_^Qt)|c,a^=r,l+=a+(a&YT)*(bhe-fe(1))<<fe(64),l&=M_,l^=T9e(l>>fe(64));let u=(l&Qt)*Cf;return u+=(l>>fe(64))*Cf<<fe(64),u&=M_,lc(u&Qt)|lc(u>>fe(64))<<fe(64)}}function H9e(e,t){let n=e.byteLength;return R_(n<=16),n>8?V9e(e,ac,t):n>=4?z9e(e,ac,t):n>0?B9e(e,ac,t):QT(t^ac.getBigUint64(64,!0)^ac.getBigUint64(72,!0))|QT(t^ac.getBigUint64(80,!0)^ac.getBigUint64(88,!0))<<fe(64)}function Cj(e){return~e+fe(1)&Qt}function $9e(e,t,n){let i=fe(e.byteLength)*Yu&Qt,o=fe(e.byteLength-1)/fe(32);for(;o>=0;){let a=Number(o);i=ZT(i,Un(e,16*a),Un(e,e.byteLength-16*(a+1)),Un(t,32*a),n),o-=fe(1)}let r=i+(i>>fe(64))&Qt;r=lc(r);let s=(i&Qt)*Yu+(i>>fe(64))*wj+(fe(e.byteLength)-n&Qt)*Cf;return s&=Qt,s=Cj(lc(s)),r|s<<fe(64)}function j9e(e,t,n){let i=fe(e.byteLength)*Yu&Qt;for(let s=32;s<160;s+=32)i=ZT(i,Un(e,s-32),Un(e,s-16),Un(t,s-32),n);i=lc(i&Qt)|lc(i>>fe(64))<<fe(64);for(let s=160;s<=e.byteLength;s+=32)i=ZT(i,Un(e,s-32),Un(e,s-16),Un(t,3+s-160),n);i=ZT(i,Un(e,e.byteLength-16),Un(e,e.byteLength-32),Un(t,103),Cj(n));let o=i+(i>>fe(64))&Qt;o=lc(o);let r=(i&Qt)*Yu+(i>>fe(64))*wj+(fe(e.byteLength)-n&Qt)*Cf;return r&=Qt,r=Cj(lc(r)),o|r<<fe(64)}function Sd(e,t=fe(0)){let n=new TextEncoder,i=Un(typeof e=="string"?n.encode(e):e),o=i.byteLength,r=s=>s.toString(16).padStart(32,"0");return o<=16?r(H9e(i,t)):o<=128?r($9e(i,ac,t)):o<=240?r(j9e(i,ac,t)):r(N9e(i,ac))}function JT(e){return/^[0-9a-f]{32}$/.test(e)}function wf(e,t,n=!0,i=!1){try{return e[t].get()}catch(o){if(o.name===pi.unminifiable_name){if(i)return o;if(n)return null}throw o}}function tl(e,t,n=!0){if(Array.isArray(t)){let i={};for(let o of t)try{i[o]=wf(e,o,!n)}catch(r){if(r.name===pi.unminifiable_name)continue}return i}else return wf(e,t)}function*Ehe(e,t){if(e.graph===Qo.PARENT)throw new Sn("There is no parent graph.");if(e.goto){let n;Array.isArray(e.goto)?n=e.goto:n=[e.goto];for(let i of n)if(ao(i))yield[mr,pr,i];else if(typeof i=="string")yield[mr,`branch:to:${i}`,"__start__"];else throw new Error(`In Command.send, expected Send or string, got ${typeof i}`)}if(e.resume)if(typeof e.resume=="object"&&Object.keys(e.resume).length&&Object.keys(e.resume).every(JT))for(let[n,i]of Object.entries(e.resume)){let o=t.filter(r=>r[0]===n&&r[1]===bo).map(r=>r[2]).slice(0,1)??[];o.push(i),yield[n,bo,o]}else yield[mr,bo,e.resume];if(e.update){if(typeof e.update!="object"||!e.update)throw new Error("Expected cmd.update to be a dict mapping channel names to update values");if(Array.isArray(e.update))for(let[n,i]of e.update)yield[mr,n,i];else for(let[n,i]of Object.entries(e.update))yield[mr,n,i]}}function*XT(e,t){if(t!=null)if(Array.isArray(e)&&typeof t=="object"&&!Array.isArray(t))for(let n in t)e.includes(n)&&(yield[n,t[n]]);else{if(Array.isArray(e))throw new Error('Input chunk must be an object when "inputChannels" is an array');yield[e,t]}}function*eP(e,t,n){Array.isArray(e)?(t===!0||t.find(([i,o])=>e.includes(i)))&&(yield tl(n,e)):(t===!0||t.some(([i,o])=>i===e))&&(yield wf(n,e))}function*Dhe(e,t,n){let i=t.filter(([a,l])=>(a.config===void 0||!a.config.tags?.includes(Bn))&&l[0][0]!==so&&l[0][0]!==en);if(!i.length)return;let o;i.some(([a])=>a.writes.some(([l,c])=>l===Qa))?o=i.flatMap(([a])=>a.writes.filter(([l,c])=>l===Qa).map(([l,c])=>[a.name,c])):Array.isArray(e)?o=i.flatMap(([a])=>{let{writes:l}=a,c={};for(let[u]of l)e.includes(u)&&(c[u]=(c[u]||0)+1);return Object.values(c).some(u=>u>1)?l.filter(([u])=>e.includes(u)).map(([u,h])=>[a.name,{[u]:h}]):[[a.name,Object.fromEntries(l.filter(([u])=>e.includes(u)))]]}):o=i.flatMap(([a])=>a.writes.filter(([l,c])=>l===e).map(([l,c])=>[a.name,c]));let r={};for(let[a,l]of o)a in r||(r[a]=[]),r[a].push(l);let s={};for(let a in r)if(r[a].length===1){let[l]=r[a];s[a]=l}else s[a]=r[a];n&&(s.__metadata__={cached:n}),yield s}function tP(e){let t=typeof e[cn];if(t==="number")return 0;if(t==="string")return"";for(let n in e){if(!Object.prototype.hasOwnProperty.call(e,n))continue;let i=typeof e[n];if(i==="number")return 0;if(i==="string")return"";break}}function T_(e,t){if(Object.keys(e).length>0){let n=tP(t);return Object.fromEntries(Object.entries(t).filter(([i,o])=>o>(e[i]??n)))}else return t}function khe(e,t){return e&&!Array.isArray(e)&&!(e instanceof Date)&&typeof e=="object"?e:{[t]:e}}function ns(e,t){return e===null?{configurable:t}:e?.configurable===void 0?x(g({},e),{configurable:t}):x(g({},e),{configurable:g(g({},e.configurable),t)})}function Qu(e,t){let n=t?.parents??{};return Object.keys(n).length>0?ns(e,{[Tr]:x(g({},n),{[e.configurable?.checkpoint_ns??""]:e.configurable?.checkpoint_id})}):e}function P_(...e){let t=[...new Set(e.filter(Boolean))];if(t.length===0)return{signal:void 0,dispose:void 0};if(t.length===1)return{signal:t[0],dispose:void 0};let n=new AbortController,i=()=>{let r=t.find(s=>s.aborted)?.reason;n.abort(r),t.forEach(s=>s.removeEventListener("abort",i))};t.forEach(r=>r.addEventListener("abort",i,{once:!0}));let o=t.find(r=>r.aborted);return o&&n.abort(o.reason),{signal:n.signal,dispose:()=>{t.forEach(r=>r.removeEventListener("abort",i))}}}var Ihe=(e,t)=>{if(!(!e&&!t))return e?t?Array.isArray(e)&&Array.isArray(t)?[...e,...t]:Array.isArray(e)?[...e,t]:Array.isArray(t)?[e,...t]:[e,t]:e:t};var Mhe=class{func;name;input;retry;cache;callbacks;__lg_type="call";constructor({func:e,name:t,input:n,retry:i,cache:o,callbacks:r}){this.func=e,this.name=t,this.input=n,this.retry=i,this.cache=o,this.callbacks=r}};function Rhe(e){return typeof e=="object"&&e!==null&&"__lg_type"in e&&e.__lg_type==="call"}function The(e,t){let n=new ts({func:i=>t(...i),name:e,trace:!1,recurse:!1});return new Ci({name:e,first:n,last:new lo([{channel:Qa,value:el}],[Bn])})}var Phe=e=>e!==void 0?e+1:1;function G9e(e,t){if(t==null)return!1;for(let n of e)if(t[n])return!0;return!1}function U9e(e){let t;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t==null?t=e[n]:t=BT(t,e[n]));return t}function Bx(e,t,n){let i=tP(e.channel_versions),o=e.versions_seen[en]??{},r=!1;if((e.channel_versions[cn]??i)>(o[cn]??i))r=!0;else for(let a in e.channel_versions)if(Object.prototype.hasOwnProperty.call(e.channel_versions,a)&&e.channel_versions[a]>(o[a]??i)){r=!0;break}let s=n.some(a=>t==="*"?!a.config?.tags?.includes(Bn):t.includes(a.name));return r&&s}function Nx(e,t,n,i,o=!1){let r=new Set;if(Array.isArray(i))r=new Set(i.filter(a=>n.writes.some(([l,c])=>l===a)));else{for(let[a]of n.writes)if(a===i){r=new Set([a]);break}r=r||new Set}let s;if(o&&r.size>0){let a=Object.fromEntries(Object.entries(t).filter(([u,h])=>r.has(u))),l=sc(e,a,-1),c=_f(a,l);Ar(bd(l),c,[n],void 0,void 0),s=tl(g(g({},t),c),i)}else s=tl(t,i);return s}function xj(e,t,n){for(let[i,o]of n)if([fr,pr].includes(i)&&o!=null){if(!ao(o))throw new Sn(`Invalid packet type, expected SendProtocol, got ${JSON.stringify(o)}`);if(!(o.node in t))throw new Sn(`Invalid node name "${o.node}" in Send packet`)}e(n)}var W9e=new Set([xx,fr,bo,en,Qa,so]);function Ar(e,t,n,i,o){n.sort((f,m)=>{let _=f.path?.slice(0,3)||[],y=m.path?.slice(0,3)||[];for(let w=0;w<Math.min(_.length,y.length);w+=1){if(_[w]<y[w])return-1;if(_[w]>y[w])return 1}return _.length-y.length});let r=n.some(f=>f.triggers.length>0),s=Tx(t);for(let f of n){e.versions_seen[f.name]??={};for(let m of f.triggers)m in e.channel_versions&&(e.versions_seen[f.name][m]=e.channel_versions[m])}let a=U9e(e.channel_versions),l=new Set(n.flatMap(f=>f.triggers).filter(f=>!uue.includes(f))),c=!1;for(let f of l)f in s&&s[f].consume()&&i!==void 0&&(e.channel_versions[f]=i(a),c=!0);let u={};for(let f of n)for(let[m,_]of f.writes)W9e.has(m)||m in s&&(u[m]??=[],u[m].push(_));a!=null&&i!=null&&(a=c?i(a):a);let h=new Set;for(let[f,m]of Object.entries(u))if(f in s){let _=s[f],y;try{y=_.update(m)}catch(w){if(w.name===Sn.unminifiable_name){let C=new Sn(`Invalid update for channel "${f}" with values ${JSON.stringify(m)}: ${w.message}`);throw C.lc_error_code=w.lc_error_code,C}else throw w}y&&i!==void 0&&(e.channel_versions[f]=i(a),_.isAvailable()&&h.add(f))}if(r)for(let f in s){if(!Object.prototype.hasOwnProperty.call(s,f))continue;let m=s[f];m.isAvailable()&&!h.has(f)&&m.update([])&&i!==void 0&&(e.channel_versions[f]=i(a),m.isAvailable()&&h.add(f))}if(r&&!G9e(h,o))for(let f in s){if(!Object.prototype.hasOwnProperty.call(s,f))continue;let m=s[f];m.finish()&&i!==void 0&&(e.channel_versions[f]=i(a),m.isAvailable()&&h.add(f))}return h}function*q9e(e,t,n){if(n.updatedChannels!=null&&n.triggerToNodes!=null){let o=new Set;for(let r of n.updatedChannels){let s=n.triggerToNodes[r];for(let a of s??[])o.add(a)}yield*co([...o].sort());return}if(!(()=>{for(let o in e.channel_versions)if(e.channel_versions[o]!==null)return!1;return!0})())for(let o in t)Object.prototype.hasOwnProperty.call(t,o)&&(yield o)}function Ju(e,t,n,i,o,r,s){let a={},l=i[pr];if(l?.isAvailable()){let c=l.get().length;for(let u=0;u<c;u+=1){let h=nP([fr,u],e,t,n,i,o,r,s);h!==void 0&&(a[h.id]=h)}}for(let c of q9e(e,n,s)){let u=nP([Sx,c],e,t,n,i,o,r,s);u!==void 0&&(a[u.id]=u)}return a}function nP(e,t,n,i,o,r,s,a){let{step:l,checkpointer:c,manager:u}=a,h=r.configurable??{},f=h.checkpoint_ns??"";if(e[0]===fr&&Rhe(e[e.length-1])){let m=e[e.length-1],_=The(m.name,m.func),y=[fr],w=f===""?m.name:`${f}${ti}${m.name}`,C=yd(JSON.stringify([w,l.toString(),m.name,fr,e[1],e[2]]),t.id),S=`${w}${Pr}${C}`,I=[...e.slice(0,3),!0],O={langgraph_step:l,langgraph_node:m.name,langgraph_triggers:y,langgraph_path:I,langgraph_checkpoint_ns:S};if(s){let F=[];return{name:m.name,input:m.input,proc:_,writes:F,config:Hs(cs(r,{metadata:O,store:a.store??r.store}),{runName:m.name,callbacks:u?.getChild(`graph:step:${l}`),configurable:{[hf]:C,[la]:j=>xj(re=>F.push(...re),i,j),[Ya]:(j,re=!1)=>Nx(t,o,{name:m.name,writes:F,triggers:y,path:I},j,re),[Mi]:c??h[Mi],[Tr]:x(g({},h[Tr]),{[f]:t.id}),[Ts]:Sj({pendingWrites:n??[],taskId:C,currentTaskInput:m.input,resumeMap:r.configurable?.[C_],namespaceHash:Sd(S)}),[wx]:t.channel_values[xT],checkpoint_id:void 0,checkpoint_ns:S}}),triggers:y,retry_policy:m.retry,cache_key:m.cache?{key:Sd((m.cache.keyFunc??JSON.stringify)([m.input])),ns:[CT,m.name??"__dynamic__"],ttl:m.cache.ttl}:void 0,id:C,path:I,writers:[]}}else return{id:C,name:m.name,interrupts:[],path:I}}else if(e[0]===fr){let m=typeof e[1]=="number"?e[1]:parseInt(e[1],10);if(!o[pr]?.isAvailable())return;let _=o[pr].get();if(m<0||m>=_.length)return;let y=ST(_[m])&&!ao(_[m])?new Wu(_[m].node,_[m].args):_[m];if(!ST(y)){console.warn(`Ignoring invalid packet ${JSON.stringify(y)} in pending sends.`);return}if(!(y.node in i)){console.warn(`Ignoring unknown node name ${y.node} in pending sends.`);return}let w=[fr],C=f===""?y.node:`${f}${ti}${y.node}`,S=yd(JSON.stringify([C,l.toString(),y.node,fr,m.toString()]),t.id),I=`${C}${Pr}${S}`,O={langgraph_step:l,langgraph_node:y.node,langgraph_triggers:w,langgraph_path:e.slice(0,3),langgraph_checkpoint_ns:I};if(s){let F=i[y.node],H=F.getNode();if(H!==void 0){F.metadata!==void 0&&(O=g(g({},O),F.metadata));let j=[];return{name:y.node,input:y.args,proc:H,subgraphs:F.subgraphs,writes:j,config:Hs(cs(r,{metadata:O,tags:F.tags,store:a.store??r.store}),{runName:y.node,callbacks:u?.getChild(`graph:step:${l}`),configurable:{[hf]:S,[la]:re=>xj(ae=>j.push(...ae),i,re),[Ya]:(re,ae=!1)=>Nx(t,o,{name:y.node,writes:j,triggers:w,path:e},re,ae),[Mi]:c??h[Mi],[Tr]:x(g({},h[Tr]),{[f]:t.id}),[Ts]:Sj({pendingWrites:n??[],taskId:S,currentTaskInput:y.args,resumeMap:r.configurable?.[C_],namespaceHash:Sd(I)}),[wx]:t.channel_values[xT],checkpoint_id:void 0,checkpoint_ns:I}}),triggers:w,retry_policy:F.retryPolicy,cache_key:F.cachePolicy?{key:Sd((F.cachePolicy.keyFunc??JSON.stringify)([y.args])),ns:[CT,F.name??"__dynamic__",y.node],ttl:F.cachePolicy.ttl}:void 0,id:S,path:e,writers:F.getWriters()}}}else return{id:S,name:y.node,interrupts:[],path:e}}else if(e[0]===Sx){let m=e[1].toString(),_=i[m];if(_===void 0)return;if(n?.length){let S=f===""?m:`${f}${ti}${m}`,I=yd(JSON.stringify([S,l.toString(),m,Sx,m]),t.id);if(n.some(F=>F[0]===I&&F[1]!==so))return}let y=tP(t.channel_versions);if(y===void 0)return;let w=t.versions_seen[m]??{},C=_.triggers.find(S=>o[S].isAvailable()?(t.channel_versions[S]??y)>(w[S]??y):!1);if(C!==void 0){let S=K9e(_,o,s);if(S===void 0)return;let I=f===""?m:`${f}${ti}${m}`,O=yd(JSON.stringify([I,l.toString(),m,Sx,[C]]),t.id),F=`${I}${Pr}${O}`,H={langgraph_step:l,langgraph_node:m,langgraph_triggers:[C],langgraph_path:e,langgraph_checkpoint_ns:F};if(s){let j=_.getNode();if(j!==void 0){_.metadata!==void 0&&(H=g(g({},H),_.metadata));let re=[];return{name:m,input:S,proc:j,subgraphs:_.subgraphs,writes:re,config:Hs(cs(r,{metadata:H,tags:_.tags,store:a.store??r.store}),{runName:m,callbacks:u?.getChild(`graph:step:${l}`),configurable:{[hf]:O,[la]:ae=>xj(se=>{re.push(...se)},i,ae),[Ya]:(ae,se=!1)=>Nx(t,o,{name:m,writes:re,triggers:[C],path:e},ae,se),[Mi]:c??h[Mi],[Tr]:x(g({},h[Tr]),{[f]:t.id}),[Ts]:Sj({pendingWrites:n??[],taskId:O,currentTaskInput:S,resumeMap:r.configurable?.[C_],namespaceHash:Sd(F)}),[wx]:t.channel_values[xT],checkpoint_id:void 0,checkpoint_ns:F}}),triggers:[C],retry_policy:_.retryPolicy,cache_key:_.cachePolicy?{key:Sd((_.cachePolicy.keyFunc??JSON.stringify)([S])),ns:[CT,_.name??"__dynamic__",m],ttl:_.cachePolicy.ttl}:void 0,id:O,path:e,writers:_.getWriters()}}}else return{id:O,name:m,interrupts:[],path:e}}}}function K9e(e,t,n){let i;if(typeof e.channels=="object"&&!Array.isArray(e.channels)){i={};for(let[o,r]of Object.entries(e.channels))if(e.triggers.includes(r))try{i[o]=wf(t,r,!1)}catch(s){if(s.name===pi.unminifiable_name)return;throw s}else if(r in t)try{i[o]=wf(t,r,!1)}catch(s){if(s.name===pi.unminifiable_name)continue;throw s}}else if(Array.isArray(e.channels)){let o=!1;for(let r of e.channels)try{i=wf(t,r,!1),o=!0;break}catch(s){if(s.name===pi.unminifiable_name)continue;throw s}if(!o)return}else throw new Error(`Invalid channels type, expected list or dict, got ${e.channels}`);return n&&e.mapper!==void 0&&(i=e.mapper(i)),i}function Sj({pendingWrites:e,taskId:t,currentTaskInput:n,resumeMap:i,namespaceHash:o}){let r=e.find(([l,c])=>l===mr&&c===bo)?.[2],a={callCounter:0,interruptCounter:-1,resume:(()=>{let l=e.filter(([c,u])=>c===t&&u===bo).flatMap(([c,u,h])=>h);if(i!=null&&o in i){let c=i[o];l.push(c)}return l})(),nullResume:r,subgraphCounter:0,currentTaskInput:n,consumeNullResume:()=>{if(a.nullResume)return delete a.nullResume,e.splice(e.findIndex(([l,c])=>l===mr&&c===bo),1),r}};return a}var zx={blue:{start:"\x1B[34m",end:"\x1B[0m"},green:{start:"\x1B[32m",end:"\x1B[0m"},yellow:{start:"\x1B[33;1m",end:"\x1B[0m"}},Vx=(e,t)=>`${e.start}${t}${e.end}`;function*Ej(e){for(let{id:t,name:n,input:i,config:o,triggers:r,writes:s}of e){if(o?.tags?.includes(Bn))continue;let a=s.filter(([l,c])=>l===t&&c===en).map(([,l])=>l);yield{id:t,name:n,input:i,triggers:r,interrupts:a}}}function Z9e(e){return typeof e!="object"||e===null?!1:"$writes"in e&&Array.isArray(e.$writes)}function Ahe(e){let t={};for(let[n,i]of e){let o=String(n);if(o in t){let r=Z9e(t[o])?t[o].$writes:[t[o]];r.push(i),t[o]={$writes:r}}else t[o]=i}return t}function*Ohe(e,t){for(let[{id:n,name:i,config:o},r]of e)o?.tags?.includes(Bn)||(yield{id:n,name:i,result:Ahe(r.filter(([s])=>Array.isArray(t)?t.includes(s):s===t)),interrupts:r.filter(s=>s[0]===en).map(s=>s[1])})}function*Fhe(e,t,n,i,o,r,s,a){function l(h){let f={};return h.callbacks!=null&&(f.callbacks=h.callbacks),h.configurable!=null&&(f.configurable=h.configurable),h.maxConcurrency!=null&&(f.max_concurrency=h.maxConcurrency),h.metadata!=null&&(f.metadata=h.metadata),h.recursionLimit!=null&&(f.recursion_limit=h.recursionLimit),h.runId!=null&&(f.run_id=h.runId),h.runName!=null&&(f.run_name=h.runName),h.tags!=null&&(f.tags=h.tags),f}let c=e.configurable?.checkpoint_ns,u={};for(let h of o){if(!(h.subgraphs?.length?h.subgraphs:[h.proc]).find(WT))continue;let m=`${h.name}:${h.id}`;c&&(m=`${c}|${m}`),u[h.id]={configurable:{thread_id:e.configurable?.thread_id,checkpoint_ns:m}}}yield{config:l(e),values:tl(t,n),metadata:i,next:o.map(h=>h.name),tasks:Dj(o,r,u,a),parentConfig:s?l(s):void 0}}function Dj(e,t,n,i){return e.map(o=>{let r=t.find(([c,u])=>c===o.id&&u===so)?.[2],s=t.filter(([c,u])=>c===o.id&&u===en).map(([,,c])=>c),a=(()=>{if(r||s.length||!t.length)return;let c=t.findIndex(([u,h])=>u===o.id&&h===Qa);if(c>=0)return t[c][2];if(typeof i=="string")return t.find(([u,h])=>u===o.id&&h===i)?.[2];if(Array.isArray(i)){let u=t.filter(([h,f])=>h===o.id&&i.includes(f)).map(([,h,f])=>[h,f]);return u.length?Ahe(u):void 0}})();if(r)return{id:o.id,name:o.name,path:o.path,error:r,interrupts:s,result:a};let l=n?.[o.id];return x(g({id:o.id,name:o.name,path:o.path,interrupts:s},l!==void 0?{state:l}:{}),{result:a})})}function Lhe(e,t,n){console.log([`${Vx(zx.blue,`[${e}:checkpoint]`)}`,`\x1B[1m State at the end of step ${e}:\x1B[0m
`,JSON.stringify(tl(t,n),null,2)].join(""))}function iP(e,t){let n=t.length;console.log([`${Vx(zx.blue,`[${e}:tasks]`)}`,`\x1B[1m Starting step ${e} with ${n} task${n===1?"":"s"}:\x1B[0m
`,t.map(i=>`- ${Vx(zx.green,String(i.name))} -> ${JSON.stringify(i.input,null,2)}`).join(`
`)].join(""))}function Nhe(e,t,n){let i={};for(let[o,r]of t)n.includes(o)&&(i[o]||(i[o]=[]),i[o].push(r));console.log([`${Vx(zx.blue,`[${e}:writes]`)}`,`\x1B[1m Finished step ${e} with writes to ${Object.keys(i).length} channel${Object.keys(i).length!==1?"s":""}:\x1B[0m
`,Object.entries(i).map(([o,r])=>`- ${Vx(zx.yellow,o)} -> ${r.map(s=>JSON.stringify(s)).join(", ")}`).join(`
`)].join(""))}var Ij=class extends Qy{_abortController;_innerReader;constructor(e,t){let n=e.getReader(),i=t??new AbortController;super({start(o){return r();function r(){return n.read().then(({done:s,value:a})=>{if(s){o.close();return}return o.enqueue(a),r()})}}}),this._abortController=i,this._innerReader=n}cancel(e){return E(this,null,function*(){this._abortController.abort(e),this._innerReader.releaseLock()})}get signal(){return this._abortController.signal}},oP=class extends Qy{modes;controller;passthroughFn;_closed=!1;get closed(){return this._closed}constructor(e){let t,n=new Promise(i=>{t=i});super({start:i=>{t(i)}}),n.then(i=>{this.controller=i}),this.passthroughFn=e.passthroughFn,this.modes=e.modes}push(e){this.passthroughFn?.(e),this.controller.enqueue(e)}close(){try{this.controller.close()}catch{}finally{this._closed=!0}}error(e){this.controller.error(e)}};function Y9e(e){return JSON.stringify(e,function(t,n){let i=this[t];if(i!=null&&typeof i=="object"&&"toDict"in i&&typeof i.toDict=="function"){let{type:o,data:r}=i.toDict();return x(g({},r),{type:o})}return n})}function Q9e(e){return e instanceof Error?{error:e.name,message:e.message}:{error:"Error",message:JSON.stringify(e)}}function Mj(e){return typeof e!="object"||e==null?!1:"configurable"in e&&typeof e.configurable=="object"&&e.configurable!=null}function kj(e){return!Mj(e)||!e.configurable.thread_id?null:{thread_id:e.configurable.thread_id,checkpoint_ns:e.configurable.checkpoint_ns||"",checkpoint_id:e.configurable.checkpoint_id||null,checkpoint_map:e.configurable.checkpoint_map||null}}function Bhe(e){if(Mj(e)){let t=Object.fromEntries(Object.entries(e.configurable).filter(([i])=>!i.startsWith("__"))),n=x(g({},e),{configurable:t});return delete n.callbacks,n}return e}function zhe(e){let t=x(g({},e),{checkpoint:kj(e.config),parent_checkpoint:kj(e.parentConfig),config:Bhe(e.config),parent_config:Bhe(e.parentConfig),tasks:e.tasks.map(n=>{if(Mj(n.state)){let i=kj(n.state);if(i!=null){let o=x(g({},n),{checkpoint:i});return delete o.state,o}}return n})});return delete t.parentConfig,t}function Vhe(e){let t=new TextEncoder;return new ReadableStream({start(i){return E(this,null,function*(){let o=c=>{i.enqueue(t.encode(`event: ${c.event}
data: ${Y9e(c.data)}

`))};try{try{for(var r=lt(e),s,a,l;s=!(a=yield r.next()).done;s=!1){let c=a.value;let[u,h,f]=c,m=f;if(h==="debug"){let y=f;y.type==="checkpoint"&&(m=x(g({},y),{payload:zhe(y.payload)}))}h==="checkpoints"&&(m=zhe(f));let _=u?.length?`${h}|${u.join("|")}`:h;o({event:_,data:m})}}catch{l=[a]}finally{try{s&&(a=r.return)&&(yield a.call(r))}finally{if(l)throw l[0]}}}catch(c){o({event:"error",data:Q9e(c)})}i.close()})}})}var rP=Symbol.for("INPUT_DONE"),Rj=Symbol.for("INPUT_RESUMING"),J9e=25;function X9e(...e){return new oP({passthroughFn:t=>{for(let n of e)n.modes.has(t[1])&&n.push(t)},modes:new Set(e.flatMap(t=>Array.from(t.modes)))})}var eqe=class extends HT{cache;queue=Promise.resolve();constructor(e){super(),this.cache=e}get(e){return E(this,null,function*(){return this.enqueueOperation("get",e)})}set(e){return E(this,null,function*(){return this.enqueueOperation("set",e)})}clear(e){return E(this,null,function*(){return this.enqueueOperation("clear",e)})}stop(){return E(this,null,function*(){yield this.queue})}enqueueOperation(e,...t){let n=this.queue.then(()=>this.cache[e](...t));return this.queue=n.then(()=>{},()=>{}),n}},Hhe=class $he{input;output;config;checkpointer;checkpointerGetNextVersion;channels;checkpoint;checkpointIdSaved;checkpointConfig;checkpointMetadata;checkpointNamespace;checkpointPendingWrites=[];checkpointPreviousVersions;step;stop;durability;outputKeys;streamKeys;nodes;skipDoneTasks;prevCheckpointConfig;updatedChannels;status="pending";tasks={};stream;checkpointerPromises=[];isNested;_checkpointerChainedPromise=Promise.resolve();store;cache;manager;interruptAfter;interruptBefore;toInterrupt=[];debug=!1;triggerToNodes;get isResuming(){let t=!1;if(cn in this.checkpoint.channel_versions)t=!0;else for(let l in this.checkpoint.channel_versions)if(Object.prototype.hasOwnProperty.call(this.checkpoint.channel_versions,l)){t=!0;break}let i=this.config.configurable?.[oc]!==void 0&&this.config.configurable?.[oc],o=this.input===null||this.input===void 0,r=ro(this.input)&&this.input.resume!=null,s=this.input===Rj,a=!this.isNested&&this.config.metadata?.run_id!==void 0&&this.checkpointMetadata?.run_id!==void 0&&this.config.metadata.run_id===this.checkpointMetadata?.run_id;return t&&(i||o||r||s||a)}constructor(t){this.input=t.input,this.checkpointer=t.checkpointer,this.checkpointer!==void 0?this.checkpointerGetNextVersion=this.checkpointer.getNextVersion.bind(this.checkpointer):this.checkpointerGetNextVersion=Phe,this.checkpoint=t.checkpoint,this.checkpointMetadata=t.checkpointMetadata,this.checkpointPreviousVersions=t.checkpointPreviousVersions,this.channels=t.channels,this.checkpointPendingWrites=t.checkpointPendingWrites,this.step=t.step,this.stop=t.stop,this.config=t.config,this.checkpointConfig=t.checkpointConfig,this.isNested=t.isNested,this.manager=t.manager,this.outputKeys=t.outputKeys,this.streamKeys=t.streamKeys,this.nodes=t.nodes,this.skipDoneTasks=t.skipDoneTasks,this.store=t.store,this.cache=t.cache?new eqe(t.cache):void 0,this.stream=t.stream,this.checkpointNamespace=t.checkpointNamespace,this.prevCheckpointConfig=t.prevCheckpointConfig,this.interruptAfter=t.interruptAfter,this.interruptBefore=t.interruptBefore,this.durability=t.durability,this.debug=t.debug,this.triggerToNodes=t.triggerToNodes}static initialize(t){return E(this,null,function*(){let{config:n,stream:i}=t;i!==void 0&&n.configurable?.[b_]!==void 0&&(i=X9e(i,n.configurable[b_]));let o=n.configurable?!("checkpoint_id"in n.configurable):!0,r=n.configurable?.[Ts];n.configurable&&r&&(r.subgraphCounter>0&&(n=ns(n,{[Ps]:[n.configurable[Ps],r.subgraphCounter.toString()].join(ti)})),r.subgraphCounter+=1);let s=Ya in(n.configurable??{});!s&&n.configurable?.checkpoint_ns!==void 0&&n.configurable?.checkpoint_ns!==""&&(n=ns(n,{checkpoint_ns:"",checkpoint_id:void 0}));let a=n;n.configurable?.[Tr]!==void 0&&n.configurable?.[Tr]?.[n.configurable?.checkpoint_ns]&&(a=ns(n,{checkpoint_id:n.configurable[Tr][n.configurable?.checkpoint_ns]}));let l=n.configurable?.checkpoint_ns?.split(ti)??[],c=(yield t.checkpointer?.getTuple(a))??{config:n,checkpoint:Rx(),metadata:{source:"input",step:-2,parents:{}},pendingWrites:[]};a=x(g(g({},n),c.config),{configurable:g(g({checkpoint_ns:""},n.configurable),c.config.configurable)});let u=c.parentConfig,h=bd(c.checkpoint),f=g({},c.metadata),m=c.pendingWrites??[],_=_f(t.channelSpecs,h),y=(f.step??0)+1,w=y+(n.recursionLimit??J9e)+1,C=g({},h.channel_versions),S=t.store?new fj(t.store):void 0;return S&&(yield S.start()),new $he({input:t.input,config:n,checkpointer:t.checkpointer,checkpoint:h,checkpointMetadata:f,checkpointConfig:a,prevCheckpointConfig:u,checkpointNamespace:l,channels:_,isNested:s,manager:t.manager,skipDoneTasks:o,step:y,stop:w,checkpointPreviousVersions:C,checkpointPendingWrites:m,outputKeys:t.outputKeys??[],streamKeys:t.streamKeys??[],nodes:t.nodes,stream:i,store:S,cache:t.cache,interruptAfter:t.interruptAfter,interruptBefore:t.interruptBefore,durability:t.durability,debug:t.debug,triggerToNodes:t.triggerToNodes})})}_checkpointerPutAfterPrevious(t){this._checkpointerChainedPromise=this._checkpointerChainedPromise.then(()=>this.checkpointer?.put(t.config,t.checkpoint,t.metadata,t.newVersions)),this.checkpointerPromises.push(this._checkpointerChainedPromise)}putWrites(t,n){let i=n;if(i.length===0)return;i.every(([s])=>s in zT)&&(i=Array.from(new Map(i.map(s=>[s[0],s])).values())),this.checkpointPendingWrites=this.checkpointPendingWrites.filter(s=>s[0]!==t);for(let[s,a]of i)this.checkpointPendingWrites.push([t,s,a]);let o=ns(this.checkpointConfig,{[Ps]:this.config.configurable?.checkpoint_ns??"",[wT]:this.checkpoint.id});if(this.durability!=="exit"&&this.checkpointer!=null&&this.checkpointerPromises.push(this.checkpointer.putWrites(o,i,t)),this.tasks&&this._outputWrites(t,i),!n.length||!this.cache||!this.tasks)return;let r=this.tasks[t];r==null||r.cache_key==null||n[0][0]===so||n[0][0]===en||this.cache.set([{key:[r.cache_key.ns,r.cache_key.key],value:r.writes,ttl:r.cache_key.ttl}])}_outputWrites(t,n,i=!1){let o=this.tasks[t];if(o!==void 0){if(o.config!==void 0&&(o.config.tags??[]).includes(Bn))return;if(n.length>0)if(n[0][0]===en){if(o.path?.[0]===fr&&o.path?.at(-1)===!0)return;let r=n.filter(s=>s[0]===en).flatMap(s=>s[1]);this._emit([["updates",{[en]:r}],["values",{[en]:r}]])}else n[0][0]!==so&&this._emit(yf(Cd(Dhe(this.outputKeys,[[o,n]],i),"updates")));i||this._emit(yf(Cd(Ohe([[o,n]],this.streamKeys),"tasks")))}}_matchCachedWrites(){return E(this,null,function*(){if(!this.cache)return[];let t=[],n=([s,a])=>`ns:${s.join(",")}|key:${a}`,i=[],o={};for(let s of Object.values(this.tasks))s.cache_key!=null&&!s.writes.length&&(i.push([s.cache_key.ns,s.cache_key.key]),o[n([s.cache_key.ns,s.cache_key.key])]=s);if(i.length===0)return[];let r=yield this.cache.get(i);for(let{key:s,value:a}of r){let l=o[n(s)];l!=null&&(l.writes.push(...a),t.push({task:l,result:a}))}return t})}tick(t){return E(this,null,function*(){this.store&&!this.store.isRunning&&(yield this.store?.start());let{inputKeys:n=[]}=t;if(this.status!=="pending")throw new Error(`Cannot tick when status is no longer "pending". Current status: "${this.status}"`);if(![rP,Rj].includes(this.input))yield this._first(n);else{if(this.toInterrupt.length>0)throw this.status="interrupt_before",new qu;if(Object.values(this.tasks).every(r=>r.writes.length>0)){let r=Object.values(this.tasks).flatMap(a=>a.writes);this.updatedChannels=Ar(this.checkpoint,this.channels,Object.values(this.tasks),this.checkpointerGetNextVersion,this.triggerToNodes);let s=yield Xa(Cd(eP(this.outputKeys,r,this.channels),"values"));if(this._emit(s),this.checkpointPendingWrites=[],yield this._putCheckpoint({source:"loop"}),Bx(this.checkpoint,this.interruptAfter,Object.values(this.tasks)))throw this.status="interrupt_after",new qu;this.config.configurable?.[oc]!==void 0&&delete this.config.configurable?.[oc]}else return!1}if(this.step>this.stop)return this.status="out_of_steps",!1;let i=Ju(this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,this.config,!0,{step:this.step,checkpointer:this.checkpointer,isResuming:this.isResuming,manager:this.manager,store:this.store,stream:this.stream,triggerToNodes:this.triggerToNodes,updatedChannels:this.updatedChannels});if(this.tasks=i,this.checkpointer&&this._emit(yield Xa(Cd(Fhe(this.checkpointConfig,this.channels,this.streamKeys,this.checkpointMetadata,Object.values(this.tasks),this.checkpointPendingWrites,this.prevCheckpointConfig,this.outputKeys),"checkpoints"))),Object.values(this.tasks).length===0)return this.status="done",!1;if(this.skipDoneTasks&&this.checkpointPendingWrites.length>0){for(let[r,s,a]of this.checkpointPendingWrites){if(s===so||s===en||s===bo)continue;let l=Object.values(this.tasks).find(c=>c.id===r);l&&l.writes.push([s,a])}for(let r of Object.values(this.tasks))r.writes.length>0&&this._outputWrites(r.id,r.writes,!0)}if(Object.values(this.tasks).every(r=>r.writes.length>0))return this.tick({inputKeys:n});if(Bx(this.checkpoint,this.interruptBefore,Object.values(this.tasks)))throw this.status="interrupt_before",new qu;let o=yield Xa(Cd(Ej(Object.values(this.tasks)),"tasks"));return this._emit(o),!0})}finishAndHandleError(t){return E(this,null,function*(){this.durability==="exit"&&(!this.isNested||typeof t<"u"||this.checkpointNamespace.every(i=>!i.includes(Pr)))&&(this._putCheckpoint(this.checkpointMetadata),this._flushPendingWrites());let n=this._suppressInterrupt(t);return(n||t===void 0)&&(this.output=tl(this.channels,this.outputKeys)),n&&(this.tasks!==void 0&&this.checkpointPendingWrites.length>0&&Object.values(this.tasks).some(i=>i.writes.length>0)&&(this.updatedChannels=Ar(this.checkpoint,this.channels,Object.values(this.tasks),this.checkpointerGetNextVersion,this.triggerToNodes),this._emit(yf(Cd(eP(this.outputKeys,Object.values(this.tasks).flatMap(i=>i.writes),this.channels),"values")))),rc(t)&&!t.interrupts.length&&this._emit([["updates",{[en]:[]}],["values",{[en]:[]}]])),n})}acceptPush(t,n,i){return E(this,null,function*(){if(this.interruptAfter?.length>0&&Bx(this.checkpoint,this.interruptAfter,[t])){this.toInterrupt.push(t);return}let o=nP([fr,t.path??[],n,t.id,i],this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,t.config??{},!0,{step:this.step,checkpointer:this.checkpointer,manager:this.manager,store:this.store,stream:this.stream});if(!o)return;if(this.interruptBefore?.length>0&&Bx(this.checkpoint,this.interruptBefore,[o])){this.toInterrupt.push(o);return}this._emit(yf(Cd(Ej([o]),"tasks"))),this.debug&&iP(this.step,[o]),this.tasks[o.id]=o,this.skipDoneTasks&&this._matchWrites({[o.id]:o});let r=yield this._matchCachedWrites();for(let{task:s}of r)this._outputWrites(s.id,s.writes,!0);return o})}_suppressInterrupt(t){return rc(t)&&!this.isNested}_first(t){return E(this,null,function*(){let{configurable:n}=this.config,i=n?.[Ts];if(i&&i.nullResume!==void 0&&this.putWrites(mr,[[bo,i.nullResume]]),ro(this.input)){let s=this.input.resume!=null;if(this.input.resume!=null&&typeof this.input.resume=="object"&&Object.keys(this.input.resume).every(JT)&&(this.config.configurable??={},this.config.configurable[C_]=this.input.resume),s&&this.checkpointer==null)throw new Error("Cannot use Command(resume=...) without checkpointer");let a={};for(let[l,c,u]of Ehe(this.input,this.checkpointPendingWrites))a[l]??=[],a[l].push([c,u]);if(Object.keys(a).length===0)throw new S$("Received empty Command input");for(let[l,c]of Object.entries(a))this.putWrites(l,c)}let o=(this.checkpointPendingWrites??[]).filter(s=>s[0]===mr).map(s=>s.slice(1));o.length>0&&Ar(this.checkpoint,this.channels,[{name:Za,writes:o,triggers:[]}],this.checkpointerGetNextVersion,this.triggerToNodes);let r=ro(this.input)&&o.length>0;if(this.isResuming||r){for(let a in this.channels)if(Object.prototype.hasOwnProperty.call(this.channels,a)&&this.checkpoint.channel_versions[a]!==void 0){let l=this.checkpoint.channel_versions[a];this.checkpoint.versions_seen[en]=x(g({},this.checkpoint.versions_seen[en]),{[a]:l})}let s=yield Xa(Cd(eP(this.outputKeys,!0,this.channels),"values"));this._emit(s)}if(this.isResuming)this.input=Rj;else if(r)yield this._putCheckpoint({source:"input"}),this.input=rP;else{let s=yield Xa(XT(t,this.input));if(s.length>0){let a=Ju(this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,this.config,!0,{step:this.step});this.updatedChannels=Ar(this.checkpoint,this.channels,Object.values(a).concat([{name:Za,writes:s,triggers:[]}]),this.checkpointerGetNextVersion,this.triggerToNodes),yield this._putCheckpoint({source:"input"}),this.input=rP}else if(oc in(this.config.configurable??{}))this.input=rP;else throw new S$(`Received no input writes for ${JSON.stringify(t,null,2)}`)}this.isNested||(this.config=ns(this.config,{[oc]:this.isResuming}))})}_emit(t){for(let[n,i]of t)if(this.stream.modes.has(n)&&this.stream.push([this.checkpointNamespace,n,i]),(n==="checkpoints"||n==="tasks")&&this.stream.modes.has("debug")){let o=n==="checkpoints"?this.step-1:this.step,r=new Date().toISOString(),s=n==="checkpoints"?"checkpoint":typeof i=="object"&&i!=null&&"result"in i?"task_result":"task";this.stream.push([this.checkpointNamespace,"debug",{step:o,type:s,timestamp:r,payload:i}])}}_putCheckpoint(t){let n=this.checkpointMetadata===t,i=this.checkpointer!=null&&(this.durability!=="exit"||n),o=r=>{this.prevCheckpointConfig=this.checkpointConfig?.configurable?.checkpoint_id?this.checkpointConfig:void 0,this.checkpointConfig=ns(this.checkpointConfig,{[Ps]:this.config.configurable?.checkpoint_ns??""});let s=g({},this.checkpoint.channel_versions),a=T_(this.checkpointPreviousVersions,s);this.checkpointPreviousVersions=s,this._checkpointerPutAfterPrevious({config:g({},this.checkpointConfig),checkpoint:bd(r),metadata:g({},this.checkpointMetadata),newVersions:a}),this.checkpointConfig=x(g({},this.checkpointConfig),{configurable:x(g({},this.checkpointConfig.configurable),{checkpoint_id:this.checkpoint.id})})};n||(this.checkpointMetadata=x(g({},t),{step:this.step,parents:this.config.configurable?.[Tr]??{}})),this.checkpoint=sc(this.checkpoint,i?this.channels:void 0,this.step,n?{id:this.checkpoint.id}:void 0),i&&o(this.checkpoint),n||(this.step+=1)}_flushPendingWrites(){if(this.checkpointer==null||this.checkpointPendingWrites.length===0)return;let t=ns(this.checkpointConfig,{[Ps]:this.config.configurable?.checkpoint_ns??"",[wT]:this.checkpoint.id}),n={};for(let[i,o,r]of this.checkpointPendingWrites)n[i]??=[],n[i].push([o,r]);for(let[i,o]of Object.entries(n))this.checkpointerPromises.push(this.checkpointer.putWrites(t,o,i))}_matchWrites(t){for(let[n,i,o]of this.checkpointPendingWrites){if(i===so||i===en||i===bo)continue;let r=Object.values(t).find(s=>s.id===n);r&&r.writes.push([i,o])}for(let n of Object.values(t))n.writes.length>0&&this._outputWrites(n.id,n.writes,!0)}};function tqe(e){return uo(e?.message)}var jhe=class extends KW{name="StreamMessagesHandler";streamFn;metadatas={};seen={};emittedChatModelRunIds={};stableMessageIdMap={};lc_prefer_streaming=!0;constructor(e){super(),this.streamFn=e}_emit(e,t,n,i=!1){if(i&&t.id!==void 0&&this.seen[t.id]!==void 0)return;let o=t.id;n!=null&&(cm(t)?o??=`run-${n}-tool-${t.tool_call_id}`:((o==null||o===`run-${n}`)&&(o=this.stableMessageIdMap[n]??o??`run-${n}`),this.stableMessageIdMap[n]??=o)),o!==t.id&&(t.id=o,t.lc_kwargs.id=o),t.id!=null&&(this.seen[t.id]=t),this.streamFn([e[0],"messages",[t,e[1]]])}handleChatModelStart(e,t,n,i,o,r,s,a){s&&(!r||!r.includes(due)&&!r.includes("nostream"))&&(this.metadatas[n]=[s.langgraph_checkpoint_ns.split("|"),g({tags:r,name:a},s)])}handleLLMNewToken(e,t,n,i,o,r){let s=r?.chunk;this.emittedChatModelRunIds[n]=!0,this.metadatas[n]!==void 0&&(tqe(s)?this._emit(this.metadatas[n],s.message,n):this._emit(this.metadatas[n],new Jo({content:e}),n))}handleLLMEnd(e,t){if(this.metadatas[t]!==void 0){if(!this.emittedChatModelRunIds[t]){let n=e.generations?.[0]?.[0];uo(n?.message)&&this._emit(this.metadatas[t],n?.message,t,!0),delete this.emittedChatModelRunIds[t]}delete this.metadatas[t],delete this.stableMessageIdMap[t]}}handleLLMError(e,t){delete this.metadatas[t]}handleChainStart(e,t,n,i,o,r,s,a){if(r!==void 0&&a===r.langgraph_node&&(o===void 0||!o.includes(Bn))&&(this.metadatas[n]=[r.langgraph_checkpoint_ns.split("|"),g({tags:o,name:a},r)],typeof t=="object")){for(let l of Object.values(t))if((uo(l)||qy(l))&&l.id!==void 0)this.seen[l.id]=l;else if(Array.isArray(l))for(let c of l)(uo(c)||qy(c))&&c.id!==void 0&&(this.seen[c.id]=c)}}handleChainEnd(e,t){let n=this.metadatas[t];if(delete this.metadatas[t],n!==void 0){if(uo(e))this._emit(n,e,t,!0);else if(Array.isArray(e))for(let i of e)uo(i)&&this._emit(n,i,t,!0);else if(e!=null&&typeof e=="object"){for(let i of Object.values(e))if(uo(i))this._emit(n,i,t,!0);else if(Array.isArray(i))for(let o of i)uo(o)&&this._emit(n,o,t,!0)}}}handleChainError(e,t){delete this.metadatas[t]}};var nqe=500,iqe=2,oqe=128e3,rqe=3,sqe=[400,401,402,403,404,405,406,407,409],aqe=e=>{if(e.message.startsWith("Cancel")||e.message.startsWith("AbortError")||e.name==="AbortError"||e.name==="GraphValueError"||e?.code==="ECONNABORTED")return!1;let t=e?.response?.status??e?.status;return!(t&&sqe.includes(+t)||e?.error?.code==="insufficient_quota")};function Tj(e,t,n,i){return E(this,null,function*(){let o=e.retry_policy??t,r=o!==void 0?o.initialInterval??nqe:0,s=0,a,l,{config:c}=e;for(n&&(c=ns(c,n)),c=x(g({},c),{signal:i});!i?.aborted;){e.writes.splice(0,e.writes.length),a=void 0;try{l=yield e.proc.invoke(e.input,c);break}catch(u){if(a=u,a.pregelTaskId=e.id,fue(a)){let _=c?.configurable?.checkpoint_ns,y=a.command;if(y.graph===_){for(let w of e.writers)yield w.invoke(y,c);a=void 0;break}else if(y.graph===Qo.PARENT){let w=hhe(_);a.command=new Qo(x(g({},a.command),{graph:w}))}}if(x_(a)||o===void 0||(s+=1,s>=(o.maxAttempts??rqe))||!(o.retryOn??aqe)(a))break;r=Math.min(o.maxInterval??oqe,r*(o.backoffFactor??iqe));let f=o.jitter?Math.floor(r+Math.random()*1e3):r;yield new Promise(_=>setTimeout(_,f));let m=a.name??a.constructor.unminifiable_name??a.constructor.name;(o?.logWarning??!0)&&console.log(`Retrying task "${String(e.name)}" after ${r.toFixed(2)}ms (attempt ${s}) after ${m}: ${a}`),c=ns(c,{[oc]:!0})}}return{task:e,result:l,error:a,signalAborted:i?.aborted}})}var Pj=Symbol.for("promiseAdded");function lqe(){let e={next:()=>{},wait:Promise.resolve(Pj)};function t(n){e.next=()=>{e.wait=new Promise(t),n(Pj)}}return e.wait=new Promise(t),e}var Ghe=class{nodeFinished;loop;constructor({loop:e,nodeFinished:t}){this.loop=e,this.nodeFinished=t}tick(){return E(this,arguments,function*(e={}){let{timeout:t,retryPolicy:n,onStepWrite:i,maxConcurrency:o}=e,r=new Set,s,a=new AbortController,l=a.signal,c=t?AbortSignal.timeout(t):void 0,u=Object.values(this.loop.tasks).filter(S=>S.writes.length===0),{signals:h,disposeCombinedSignal:f}=this._initializeAbortSignals({exceptionSignal:l,stepTimeoutSignal:c,signal:e.signal}),m=this._executeTasksWithRetry(u,{signals:h,retryPolicy:n,maxConcurrency:o});try{for(var _=lt(m),y,w,C;y=!(w=yield _.next()).done;y=!1){let{task:S,error:I,signalAborted:O}=w.value;this._commit(S,I),rc(I)||x_(I)&&!rc(s)?s=I:I&&(r.size===0||!O)&&(a.abort(),r.add(I))}}catch{C=[w]}finally{try{y&&(w=_.return)&&(yield w.call(_))}finally{if(C)throw C[0]}}if(f?.(),i?.(this.loop.step,Object.values(this.loop.tasks).map(S=>S.writes).flat()),r.size===1)throw Array.from(r)[0];if(r.size>1)throw new AggregateError(Array.from(r),`Multiple errors occurred during superstep ${this.loop.step}. See the "errors" field of this exception for more details.`);if(rc(s)||x_(s)&&this.loop.isNested)throw s})}_initializeAbortSignals({exceptionSignal:e,stepTimeoutSignal:t,signal:n}){let i=this.loop.config.configurable?.[b$]??{},o=i.externalAbortSignal??n,r=t??i.timeoutAbortSignal,{signal:s,dispose:a}=P_(o,r,e),l={externalAbortSignal:o,timeoutAbortSignal:r,composedAbortSignal:s};return this.loop.config=ns(this.loop.config,{[b$]:l}),{signals:l,disposeCombinedSignal:a}}_executeTasksWithRetry(e,t){return Bt(this,null,function*(){let{retryPolicy:n,maxConcurrency:i,signals:o}=t??{},r=lqe(),s={},a={executingTasksMap:s,barrier:r,retryPolicy:n,scheduleTask:(f,m,_)=>E(this,null,function*(){return this.loop.acceptPush(f,m,_)})};if(o?.composedAbortSignal?.aborted)throw new Error("Abort");let l=0,c,u=P_(o?.externalAbortSignal,o?.timeoutAbortSignal),h=u.signal?new Promise((f,m)=>{c=()=>m(new Error("Abort")),u.signal?.addEventListener("abort",c,{once:!0})}):void 0;for(;(l===0||Object.keys(s).length>0)&&e.length;){for(;Object.values(s).length<(i??e.length)&&l<e.length;l+=1){let m=e[l];s[m.id]=Tj(m,n,{[Cx]:Uhe?.bind(a,this,m)},o?.composedAbortSignal).catch(_=>({task:m,error:_,signalAborted:o?.composedAbortSignal?.aborted}))}let f=yield new Ie(Promise.race([...Object.values(s),...h?[h]:[],r.wait]));f!==Pj&&(yield f,c!=null&&(u.signal?.removeEventListener("abort",c),u.dispose?.()),delete s[f.task.id])}})}_commit(e,t){if(t!==void 0)if(rc(t)){if(t.interrupts.length){let n=t.interrupts.map(o=>[en,o]),i=e.writes.filter(o=>o[0]===bo);i.length&&n.push(...i),this.loop.putWrites(e.id,n)}}else x_(t)&&e.writes.length?this.loop.putWrites(e.id,e.writes):this.loop.putWrites(e.id,[[so,{message:t.message,name:t.name}]]);else this.nodeFinished&&(e.config?.tags==null||!e.config.tags.includes(Bn))&&this.nodeFinished(String(e.name)),e.writes.length===0&&e.writes.push([xx,null]),this.loop.putWrites(e.id,e.writes)}};function Uhe(s,a,l,c,u){return E(this,arguments,function*(e,t,n,i,o,r={}){let h=t.config?.configurable?.[Ts];if(!h)throw new Error(`BUG: No scratchpad found on task ${t.name}__${t.id}`);let f=h.callCounter;h.callCounter+=1;let m=new Mhe({func:n,name:i,input:o,cache:r.cache,retry:r.retry,callbacks:r.callbacks}),_=yield this.scheduleTask(t,f,m);if(!_)return;let y=this.executingTasksMap[_.id];if(y!==void 0)return y;if(_.writes.length>0){let w=_.writes.filter(([S])=>S===Qa),C=_.writes.filter(([S])=>S===so);if(w.length>0){if(w.length===1)return Promise.resolve(w[0][1]);throw new Error(`BUG: multiple returns found for task ${_.name}__${_.id}`)}if(C.length>0){if(C.length===1){let S=C[0][1],I=S instanceof Error?S:new Error(String(S));return Promise.reject(I)}throw new Error(`BUG: multiple errors found for task ${_.name}__${_.id}`)}return}else{let w=Tj(_,r.retry,{[Cx]:Uhe.bind(this,e,_)});return this.executingTasksMap[_.id]=w,this.barrier.next(),w.then(({result:C,error:S})=>S?Promise.reject(S):C)}})}var Ed=class extends Error{constructor(e){super(e),this.name="GraphValidationError"}};function Whe({nodes:e,channels:t,inputChannels:n,outputChannels:i,streamChannels:o,interruptAfterNodes:r,interruptBeforeNodes:s}){if(!t)throw new Ed("Channels not provided");let a=new Set,l=new Set;for(let[c,u]of Object.entries(e)){if(c===en)throw new Ed(`"Node name ${en} is reserved"`);if(u.constructor===wd)u.triggers.forEach(h=>a.add(h));else throw new Ed(`Invalid node type ${typeof u}, expected PregelNode`)}for(let c of a)if(!(c in t))throw new Ed(`Subscribed channel '${String(c)}' not in channels`);if(Array.isArray(n)){if(n.every(c=>!a.has(c)))throw new Ed(`None of the input channels ${n} are subscribed to by any node`)}else if(!a.has(n))throw new Ed(`Input channel ${String(n)} is not subscribed to by any node`);Array.isArray(i)?i.forEach(c=>l.add(c)):l.add(i),o&&!Array.isArray(o)?l.add(o):Array.isArray(o)&&o.forEach(c=>l.add(c));for(let c of l)if(!(c in t))throw new Ed(`Output channel '${String(c)}' not in channels`);if(r&&r!=="*"){for(let c of r)if(!(c in e))throw new Ed(`Node ${String(c)} not in nodes`)}if(s&&s!=="*"){for(let c of s)if(!(c in e))throw new Ed(`Node ${String(c)} not in nodes`)}}function Aj(e,t){if(Array.isArray(e)){for(let n of e)if(!(n in t))throw new Error(`Key ${String(n)} not found in channels`)}else if(!(e in t))throw new Error(`Key ${String(e)} not found in channels`)}var qhe=class Khe extends ca{lc_graph_name="Topic";unique=!1;accumulate=!1;seen;values;constructor(t){super(),this.unique=t?.unique??this.unique,this.accumulate=t?.accumulate??this.accumulate,this.seen=new Set,this.values=[]}fromCheckpoint(t){let n=new Khe({unique:this.unique,accumulate:this.accumulate});return typeof t<"u"&&(n.seen=new Set(t[0]),n.values=t[1]),n}update(t){let n=!1;this.accumulate||(n=this.values.length>0,this.values=[]);let i=t.flat();if(i.length>0)if(this.unique)for(let o of i)this.seen.has(o)||(n=!0,this.seen.add(o),this.values.push(o));else n=!0,this.values.push(...i);return n}get(){if(this.values.length===0)throw new pi;return this.values}checkpoint(){return[[...this.seen],this.values]}isAvailable(){return this.values.length!==0}};function Zhe(e){let t=zr.getRunnableConfig();if(!t)throw new Error("Called interrupt() outside the context of a graph.");let n=t.configurable;if(!n)throw new Error("No configurable found in config");if(!n[Mi])throw new w_("No checkpointer set",{lc_error_code:"MISSING_CHECKPOINTER"});let o=n[Ts];o.interruptCounter+=1;let r=o.interruptCounter;if(o.resume.length>0&&r<o.resume.length)return n[la]?.([[bo,o.resume]]),o.resume[r];if(o.nullResume!==void 0){if(o.resume.length!==r)throw new Error(`Resume length mismatch: ${o.resume.length} !== ${r}`);let l=o.consumeNullResume();return o.resume.push(l),n[la]?.([[bo,o.resume]]),l}let s=n[Ps]?.split(ti),a=s?Sd(s.join(ti)):void 0;throw new qu([{id:a,value:e}])}var Yhe=class{static subscribeTo(e,t){let{key:n,tags:i}=g({key:void 0,tags:void 0},t??{});if(Array.isArray(e)&&n!==void 0)throw new Error("Can't specify a key when subscribing to multiple channels");let o;typeof e=="string"?n?o={[n]:e}:o=[e]:o=Object.fromEntries(e.map(s=>[s,s]));let r=Array.isArray(e)?e:[e];return new wd({channels:o,triggers:r,tags:i})}static writeTo(e,t){let n=[];for(let i of e)n.push({channel:i,value:el,skipNone:!1});for(let[i,o]of Object.entries(t??{}))oi.isRunnable(o)||typeof o=="function"?n.push({channel:i,value:el,skipNone:!0,mapper:ll(o)}):n.push({channel:i,value:o,skipNone:!1});return new lo(n)}},cqe=class extends oi{lc_namespace=["langgraph","pregel"];invoke(e,t){throw new Error("Not implemented")}withConfig(e){return super.withConfig(e)}stream(e,t){return super.stream(e,t)}},Qhe=class e extends cqe{static lc_name(){return"LangGraph"}lc_namespace=["langgraph","pregel"];lg_is_pregel=!0;nodes;channels;inputChannels;outputChannels;autoValidate=!0;streamMode=["values"];streamChannels;interruptAfter;interruptBefore;stepTimeout;debug=!1;checkpointer;retryPolicy;config;store;cache;userInterrupt;triggerToNodes={};constructor(t){super(t);let{streamMode:n}=t;if(n!=null&&!Array.isArray(n)&&(n=[n]),this.nodes=t.nodes,this.channels=t.channels,pr in this.channels&&"lc_graph_name"in this.channels[pr]&&this.channels[pr].lc_graph_name!=="Topic")throw new Error(`Channel '${pr}' is reserved and cannot be used in the graph.`);this.channels[pr]=new qhe({accumulate:!1}),this.autoValidate=t.autoValidate??this.autoValidate,this.streamMode=n??this.streamMode,this.inputChannels=t.inputChannels,this.outputChannels=t.outputChannels,this.streamChannels=t.streamChannels??this.streamChannels,this.interruptAfter=t.interruptAfter,this.interruptBefore=t.interruptBefore,this.stepTimeout=t.stepTimeout??this.stepTimeout,this.debug=t.debug??this.debug,this.checkpointer=t.checkpointer,this.retryPolicy=t.retryPolicy,this.config=t.config,this.store=t.store,this.cache=t.cache,this.name=t.name,this.triggerToNodes=t.triggerToNodes??this.triggerToNodes,this.userInterrupt=t.userInterrupt,this.autoValidate&&this.validate()}withConfig(t){let n=cs(this.config,t);return new this.constructor(x(g({},this),{config:n}))}validate(){Whe({nodes:this.nodes,channels:this.channels,outputChannels:this.outputChannels,inputChannels:this.inputChannels,streamChannels:this.streamChannels,interruptAfterNodes:this.interruptAfter,interruptBeforeNodes:this.interruptBefore});for(let[t,n]of Object.entries(this.nodes))for(let i of n.triggers)this.triggerToNodes[i]??=[],this.triggerToNodes[i].push(t);return this}get streamChannelsList(){return Array.isArray(this.streamChannels)?this.streamChannels:this.streamChannels?[this.streamChannels]:Object.keys(this.channels)}get streamChannelsAsIs(){return this.streamChannels?this.streamChannels:Object.keys(this.channels)}getGraphAsync(t){return E(this,null,function*(){return this.getGraph(t)})}*getSubgraphs(t,n){for(let[i,o]of Object.entries(this.nodes)){if(t!==void 0&&!t.startsWith(i))continue;let r=o.subgraphs?.length?o.subgraphs:[o.bound];for(let s of r){let a=WT(s);if(a!==void 0){if(i===t){yield[i,a];return}if(t===void 0&&(yield[i,a]),n){let l=t;t!==void 0&&(l=t.slice(i.length+1));for(let[c,u]of a.getSubgraphs(l,n))yield[`${i}${ti}${c}`,u]}}}}}getSubgraphsAsync(t,n){return Bt(this,null,function*(){yield*co(this.getSubgraphs(t,n))})}_prepareStateSnapshot(r){return E(this,arguments,function*({config:t,saved:n,subgraphCheckpointer:i,applyPendingWrites:o=!1}){if(n===void 0)return{values:{},next:[],config:t,tasks:[]};let s=_f(this.channels,n.checkpoint);if(n.pendingWrites?.length){let m=n.pendingWrites.filter(([_,y])=>_===mr).map(([_,y,w])=>[String(y),w]);m.length>0&&Ar(n.checkpoint,s,[{name:Za,writes:m,triggers:[]}],void 0,this.triggerToNodes)}let a=Object.values(Ju(n.checkpoint,n.pendingWrites,this.nodes,s,n.config,!0,{step:(n.metadata?.step??-1)+1,store:this.store})),l=yield Xa(this.getSubgraphsAsync()),c=n.config.configurable?.checkpoint_ns??"",u={};for(let m of a){let _=l.find(([w])=>w===m.name);if(!_)continue;let y=`${String(m.name)}${Pr}${m.id}`;if(c&&(y=`${c}${ti}${y}`),i===void 0){let w={configurable:{thread_id:n.config.configurable?.thread_id,checkpoint_ns:y}};u[m.id]=w}else{let w={configurable:{[Mi]:i,thread_id:n.config.configurable?.thread_id,checkpoint_ns:y}},C=_[1];u[m.id]=yield C.getState(w,{subgraphs:!0})}}if(o&&n.pendingWrites?.length){let m=Object.fromEntries(a.map(y=>[y.id,y]));for(let[y,w,C]of n.pendingWrites)[so,en,ff].includes(w)||y in m&&m[y].writes.push([String(w),C]);let _=a.filter(y=>y.writes.length>0);_.length>0&&Ar(n.checkpoint,s,_,void 0,this.triggerToNodes)}let h=n?.metadata;h&&n?.config?.configurable?.thread_id&&(h=x(g({},h),{thread_id:n.config.configurable.thread_id}));let f=a.filter(m=>m.writes.length===0).map(m=>m.name);return{values:tl(s,this.streamChannelsAsIs),next:f,tasks:Dj(a,n?.pendingWrites??[],u,this.streamChannelsAsIs),metadata:h,config:Qu(n.config,n.metadata),createdAt:n.checkpoint.ts,parentConfig:n.parentConfig}})}getState(t,n){return E(this,null,function*(){let i=t.configurable?.[Mi]??this.checkpointer;if(!i)throw new w_("No checkpointer set",{lc_error_code:"MISSING_CHECKPOINTER"});let o=t.configurable?.checkpoint_ns??"";if(o!==""&&t.configurable?.[Mi]===void 0){let f=jT(o);try{for(var l=lt(this.getSubgraphsAsync(f,!0)),c,u,h;c=!(u=yield l.next()).done;c=!1){let[m,_]=u.value;if(m===f)return yield _.getState(bf(t,{[Mi]:i}),{subgraphs:n?.subgraphs})}}catch{h=[u]}finally{try{c&&(u=l.return)&&(yield u.call(l))}finally{if(h)throw h[0]}}throw new Error(`Subgraph with namespace "${f}" not found.`)}let r=cs(this.config,t),s=yield i.getTuple(t);return yield this._prepareStateSnapshot({config:r,saved:s,subgraphCheckpointer:n?.subgraphs?i:void 0,applyPendingWrites:!t.configurable?.checkpoint_id})})}getStateHistory(t,n){return Bt(this,null,function*(){let i=t.configurable?.[Mi]??this.checkpointer;if(!i)throw new w_("No checkpointer set",{lc_error_code:"MISSING_CHECKPOINTER"});let o=t.configurable?.checkpoint_ns??"";if(o!==""&&t.configurable?.[Mi]===void 0){let _=jT(o);try{for(var s=lt(this.getSubgraphsAsync(_,!0)),a,l,c;a=!(l=yield new Ie(s.next())).done;a=!1){let[y,w]=l.value;if(y===_){yield*co(w.getStateHistory(bf(t,{[Mi]:i}),n));return}}}catch{c=[l]}finally{try{a&&(l=s.return)&&(yield new Ie(l.call(s)))}finally{if(c)throw c[0]}}throw new Error(`Subgraph with namespace "${_}" not found.`)}let r=cs(this.config,t,{configurable:{checkpoint_ns:o}});try{for(var u=lt(i.list(r,n)),h,f,m;h=!(f=yield new Ie(u.next())).done;h=!1){let _=f.value;yield this._prepareStateSnapshot({config:_.config,saved:_})}}catch{m=[f]}finally{try{h&&(f=u.return)&&(yield new Ie(f.call(u)))}finally{if(m)throw m[0]}}})}bulkUpdateState(t,n){return E(this,null,function*(){let i=t.configurable?.[Mi]??this.checkpointer;if(!i)throw new w_("No checkpointer set",{lc_error_code:"MISSING_CHECKPOINTER"});if(n.length===0)throw new Error("No supersteps provided");if(n.some(h=>h.updates.length===0))throw new Error("No updates provided");let o=t.configurable?.checkpoint_ns??"";if(o!==""&&t.configurable?.[Mi]===void 0){let h=jT(o);try{for(var a=lt(this.getSubgraphsAsync(h,!0)),l,c,u;l=!(c=yield a.next()).done;l=!1){let[,f]=c.value;return yield f.bulkUpdateState(bf(t,{[Mi]:i}),n)}}catch{u=[c]}finally{try{l&&(c=a.return)&&(yield c.call(a))}finally{if(u)throw u[0]}}throw new Error(`Subgraph "${h}" not found`)}let r=(h,f)=>E(this,null,function*(){let m=this.config?cs(this.config,h):h,_=yield i.getTuple(m),y=_!==void 0?bd(_.checkpoint):Rx(),w=g({},_?.checkpoint.channel_versions),C=_?.metadata?.step??-1,S=bf(m,{checkpoint_ns:m.configurable?.checkpoint_ns??""}),I=m.metadata??{};_?.config.configurable&&(S=bf(m,_.config.configurable),I=g(g({},_.metadata),I));let{values:O,asNode:F}=f[0];if(O==null&&F===void 0){if(f.length>1)throw new Sn("Cannot create empty checkpoint with multiple updates");let ue=yield i.put(S,sc(y,void 0,C),{source:"update",step:C+1,parents:_?.metadata?.parents??{}},{});return Qu(ue,_?_.metadata:void 0)}let H=_f(this.channels,y);if(O===null&&F===Et){if(f.length>1)throw new Sn("Cannot apply multiple updates when clearing state");if(_){let De=Ju(y,_.pendingWrites||[],this.nodes,H,_.config,!0,{step:(_.metadata?.step??-1)+1,checkpointer:i,store:this.store}),Ne=(_.pendingWrites||[]).filter(Pe=>Pe[0]===mr).map(Pe=>Pe.slice(1));Ne.length>0&&Ar(y,H,[{name:Za,writes:Ne,triggers:[]}],i.getNextVersion.bind(i),this.triggerToNodes);for(let[Pe,Le,mt]of _.pendingWrites||[])[so,en,ff].includes(Le)||Pe in De&&De[Pe].writes.push([Le,mt]);Ar(y,H,Object.values(De),i.getNextVersion.bind(i),this.triggerToNodes)}let ue=yield i.put(S,sc(y,H,C),x(g({},I),{source:"update",step:C+1,parents:_?.metadata?.parents??{}}),T_(w,y.channel_versions));return Qu(ue,_?_.metadata:void 0)}if(F===lue){if(f.length>1)throw new Sn("Cannot copy checkpoint with multiple updates");if(_==null)throw new Sn("Cannot copy a non-existent checkpoint");let ue=Pe=>!Array.isArray(Pe)||Pe.length===0?!1:Pe.every(Le=>Array.isArray(Le)&&Le.length===2),De=sc(y,void 0,C),Ne=yield i.put(_.parentConfig??bf(_.config,{checkpoint_id:void 0}),De,{source:"fork",step:C+1,parents:_.metadata?.parents??{}},{});if(ue(O)){let Pe=Ju(De,_.pendingWrites,this.nodes,H,Ne,!1,{step:C+2}),Le=Object.values(Pe).reduce((ve,{name:Ve,id:We})=>(ve[Ve]??=[],ve[Ve].push({id:We}),ve),{}),mt=O.reduce((ve,Ve)=>{let[We,vt]=Ve;ve[vt]??=[];let It=ve[vt].length,Dt=Le[vt]?.[It]?.id;return ve[vt].push({values:We,asNode:vt,taskId:Dt}),ve},{});return r(Qu(Ne,_.metadata),Object.values(mt).flat())}return Qu(Ne,_.metadata)}if(F===Za){if(f.length>1)throw new Sn("Cannot apply multiple updates when updating as input");let ue=yield Xa(XT(this.inputChannels,O));if(ue.length===0)throw new Sn(`Received no input writes for ${JSON.stringify(this.inputChannels,null,2)}`);Ar(y,H,[{name:Za,writes:ue,triggers:[]}],i.getNextVersion.bind(this.checkpointer),this.triggerToNodes);let De=_?.metadata?.step!=null?_.metadata.step+1:-1,Ne=yield i.put(S,sc(y,H,De),{source:"input",step:De,parents:_?.metadata?.parents??{}},T_(w,y.channel_versions));return yield i.putWrites(Ne,ue,yd(Za,y.id)),Qu(Ne,_?_.metadata:void 0)}if(m.configurable?.checkpoint_id===void 0&&_?.pendingWrites!==void 0&&_.pendingWrites.length>0){let ue=Ju(y,_.pendingWrites,this.nodes,H,_.config,!0,{store:this.store,checkpointer:this.checkpointer,step:(_.metadata?.step??-1)+1}),De=(_.pendingWrites??[]).filter(Pe=>Pe[0]===mr).map(Pe=>Pe.slice(1));De.length>0&&Ar(_.checkpoint,H,[{name:Za,writes:De,triggers:[]}],void 0,this.triggerToNodes);for(let[Pe,Le,mt]of _.pendingWrites)[so,en,ff].includes(Le)||ue[Pe]===void 0||ue[Pe].writes.push([Le,mt]);let Ne=Object.values(ue).filter(Pe=>Pe.writes.length>0);Ne.length>0&&Ar(y,H,Ne,void 0,this.triggerToNodes)}let j=Object.values(y.versions_seen).map(ue=>Object.values(ue)).flat().find(ue=>!!ue),re=[];if(f.length===1){let{values:ue,asNode:De,taskId:Ne}=f[0];if(De===void 0&&Object.keys(this.nodes).length===1)[De]=Object.keys(this.nodes);else if(De===void 0&&j===void 0)typeof this.inputChannels=="string"&&this.nodes[this.inputChannels]!==void 0&&(De=this.inputChannels);else if(De===void 0){let Pe=Object.entries(y.versions_seen).map(([Le,mt])=>Object.values(mt).map(ve=>[ve,Le])).flat().filter(([Le,mt])=>mt!==en).sort(([Le],[mt])=>NT(Le,mt));Pe&&(Pe.length===1?De=Pe[0][1]:Pe[Pe.length-1][0]!==Pe[Pe.length-2][0]&&(De=Pe[Pe.length-1][1]))}if(De===void 0)throw new Sn('Ambiguous update, specify "asNode"');re.push({values:ue,asNode:De,taskId:Ne})}else for(let{asNode:ue,values:De,taskId:Ne}of f){if(ue==null)throw new Sn('"asNode" is required when applying multiple updates');re.push({values:De,asNode:ue,taskId:Ne})}let ae=[];for(let{asNode:ue,values:De,taskId:Ne}of re){if(this.nodes[ue]===void 0)throw new Sn(`Node "${ue.toString()}" does not exist`);let Pe=this.nodes[ue].getWriters();if(!Pe.length)throw new Sn(`No writers found for node "${ue.toString()}"`);ae.push({name:ue,input:De,proc:Pe.length>1?Ci.from(Pe,{omitSequenceTags:!0}):Pe[0],writes:[],triggers:[en],id:Ne??yd(en,y.id),writers:[]})}for(let ue of ae)yield ue.proc.invoke(ue.input,Hs(x(g({},m),{store:m?.store??this.store}),{runName:m.runName??`${this.getName()}UpdateState`,configurable:{[la]:De=>ue.writes.push(...De),[Ya]:(De,Ne=!1)=>Nx(y,H,ue,De,Ne)}}));for(let ue of ae){let De=ue.writes.filter(Ne=>Ne[0]!==fr);_!==void 0&&De.length>0&&(yield i.putWrites(S,De,ue.id))}Ar(y,H,ae,i.getNextVersion.bind(this.checkpointer),this.triggerToNodes);let se=T_(w,y.channel_versions),Te=yield i.put(S,sc(y,H,C+1),{source:"update",step:C+1,parents:_?.metadata?.parents??{}},se);for(let ue of ae){let De=ue.writes.filter(Ne=>Ne[0]===fr);De.length>0&&(yield i.putWrites(Te,De,ue.id))}return Qu(Te,_?_.metadata:void 0)}),s=t;for(let{updates:h}of n)s=yield r(s,h);return s})}updateState(t,n,i){return E(this,null,function*(){return this.bulkUpdateState(t,[{updates:[{values:n,asNode:i}]}])})}_defaults(t){let F=t,{debug:n,streamMode:i,inputKeys:o,outputKeys:r,interruptAfter:s,interruptBefore:a}=F,l=Be(F,["debug","streamMode","inputKeys","outputKeys","interruptAfter","interruptBefore"]),c=!0,u=n!==void 0?n:this.debug,h=r;h===void 0?h=this.streamChannelsAsIs:Aj(h,this.channels);let f=o;f===void 0?f=this.inputChannels:Aj(f,this.channels);let m=a??this.interruptBefore??[],_=s??this.interruptAfter??[],y;i!==void 0?(y=Array.isArray(i)?i:[i],c=typeof i=="string"):(t.configurable?.[hf]!==void 0?y=["values"]:y=this.streamMode,c=!0);let w;if(this.checkpointer===!1)w=void 0;else if(t!==void 0&&t.configurable?.[Mi]!==void 0)w=t.configurable[Mi];else{if(this.checkpointer===!0)throw new Error("checkpointer: true cannot be used for root graphs.");w=this.checkpointer}let C=t.store??this.store,S=t.cache??this.cache;if(t.durability!=null&&t.checkpointDuring!=null)throw new Error("Cannot use both `durability` and `checkpointDuring` at the same time.");let I=(()=>{if(t.checkpointDuring!=null)return t.checkpointDuring===!1?"exit":"async"})(),O=t.durability??I??t?.configurable?.[y$]??"async";return[u,y,f,h,l,m,_,w,C,c,S,O]}stream(t,n){return E(this,null,function*(){let i=new AbortController,o=x(g({recursionLimit:this.config?.recursionLimit},n),{signal:P_(n?.signal,i.signal).signal}),r=yield Wn(e.prototype,this,"stream").call(this,t,o);return new Ij(n?.encoding==="text/event-stream"?Vhe(r):r,i)})}streamEvents(t,n,i){let o=new AbortController,r=x(g({recursionLimit:this.config?.recursionLimit},n),{callbacks:Ihe(this.config?.callbacks,n?.callbacks),signal:P_(n?.signal,o.signal).signal});return new Ij(super.streamEvents(t,r,i),o)}_validateInput(t){return E(this,null,function*(){return t})}_validateContext(t){return E(this,null,function*(){return t})}_streamIterator(t,n){return Bt(this,null,function*(){let i="version"in(n??{})?void 0:n?.encoding??void 0,o=n?.subgraphs,r=Ox(this.config,n);if(r.recursionLimit===void 0||r.recursionLimit<1)throw new Error('Passed "recursionLimit" must be at least 1.');if(this.checkpointer!==void 0&&this.checkpointer!==!1&&r.configurable===void 0)throw new Error('Checkpointer requires one or more of the following "configurable" keys: "thread_id", "checkpoint_ns", "checkpoint_id"');let s=yield new Ie(this._validateInput(t)),ue=r,{runId:a}=ue,l=Be(ue,["runId"]),[c,u,,h,f,m,_,y,w,C,S,I]=this._defaults(l);typeof f.context<"u"?f.context=yield new Ie(this._validateContext(f.context)):f.configurable=yield new Ie(this._validateContext(f.configurable));let O=new oP({modes:new Set(u)});if(this.checkpointer===!0){f.configurable??={};let mt=f.configurable[Ps]??"";f.configurable[Ps]=mt.split(ti).map(ve=>ve.split(Pr)[0]).join(ti)}if(u.includes("messages")){let mt=new jhe(Ve=>O.push(Ve)),{callbacks:ve}=f;if(ve===void 0)f.callbacks=[mt];else if(Array.isArray(ve))f.callbacks=ve.concat(mt);else{let Ve=ve.copy();Ve.addHandler(mt,!0),f.callbacks=Ve}}f.writer??=mt=>{if(!u.includes("custom"))return;let ve=uhe()?.configurable?.[Ps]?.split(ti).slice(0,-1);O.push([ve??[],"custom",mt])},f.interrupt??=this.userInterrupt??Zhe;let F=yield new Ie(n9(f)),H=yield new Ie(F?.handleChainStart(this.toJSON(),khe(t,"input"),a,void 0,void 0,void 0,f?.runName??this.getName())),j=Tx(this.channels),re,ae,Te=E(this,null,function*(){try{re=yield Hhe.initialize({input:s,config:f,checkpointer:y,nodes:this.nodes,channelSpecs:j,outputKeys:h,streamKeys:this.streamChannelsAsIs,store:w,cache:S,stream:O,interruptAfter:_,interruptBefore:m,manager:H,debug:this.debug,triggerToNodes:this.triggerToNodes,durability:I});let mt=new Ghe({loop:re,nodeFinished:f.configurable?.[cue]});n?.subgraphs&&(re.config.configurable=x(g({},re.config.configurable),{[b_]:re.stream})),yield this._runLoop({loop:re,runner:mt,debug:c,config:f}),I==="sync"&&(yield Promise.all(re?.checkpointerPromises??[]))}catch(mt){ae=mt}finally{try{re&&(yield re.store?.stop(),yield re.cache?.stop()),yield Promise.all(re?.checkpointerPromises??[])}catch(mt){ae=ae??mt}ae?O.error(ae):O.close()}});try{try{for(var De=lt(O),Ne,Pe,Le;Ne=!(Pe=yield new Ie(De.next())).done;Ne=!1){let mt=Pe.value;if(mt===void 0)throw new Error("Data structure error.");let[ve,Ve,We]=mt;if(u.includes(Ve)){if(i==="text/event-stream"){o?yield[ve,Ve,We]:yield[null,Ve,We];continue}o&&!C?yield[ve,Ve,We]:C?o?yield[ve,We]:yield We:yield[Ve,We]}}}catch{Le=[Pe]}finally{try{Ne&&(Pe=De.return)&&(yield new Ie(Pe.call(De)))}finally{if(Le)throw Le[0]}}}catch(mt){throw yield new Ie(H?.handleChainError(ae)),mt}finally{yield new Ie(Te)}yield new Ie(H?.handleChainEnd(re?.output??{},a,void 0,void 0,void 0))})}invoke(t,n){return E(this,null,function*(){let i=n?.streamMode??"values",o=x(g({},n),{outputKeys:n?.outputKeys??this.outputChannels,streamMode:i,encoding:void 0}),r=[],s=yield this.stream(t,o),a=[],l;try{for(var c=lt(s),u,h,f;u=!(h=yield c.next()).done;u=!1){let m=h.value;i==="values"?ET(m)?a.push(m[en]):l=m:r.push(m)}}catch{f=[h]}finally{try{u&&(h=c.return)&&(yield h.call(c))}finally{if(f)throw f[0]}}if(i==="values"){if(a.length>0){let m=a.flat(1);if(l==null)return{[en]:m};if(typeof l=="object")return x(g({},l),{[en]:m})}return l}return r})}_runLoop(t){return E(this,null,function*(){let{loop:n,runner:i,debug:o,config:r}=t,s;try{for(;yield n.tick({inputKeys:this.inputChannels});){for(let{task:a}of yield n._matchCachedWrites())n._outputWrites(a.id,a.writes,!0);o&&Lhe(n.checkpointMetadata.step,n.channels,this.streamChannelsList),o&&iP(n.step,Object.values(n.tasks)),yield i.tick({timeout:this.stepTimeout,retryPolicy:this.retryPolicy,onStepWrite:(a,l)=>{o&&Nhe(a,l,this.streamChannelsList)},maxConcurrency:r.maxConcurrency,signal:r.signal})}if(n.status==="out_of_steps")throw new pue([`Recursion limit of ${r.recursionLimit} reached`,"without hitting a stop condition. You can increase the",'limit by setting the "recursionLimit" config key.'].join(" "),{lc_error_code:"GRAPH_RECURSION_LIMIT"})}catch(a){if(s=a,!(yield n.finishAndHandleError(s)))throw a}finally{s===void 0&&(yield n.finishAndHandleError())}})}clearCache(){return E(this,null,function*(){yield this.cache?.clear([])})}};var Oj=class{path;ends;constructor(e){oi.isRunnable(e.path)?this.path=e.path:this.path=ll(e.path).withConfig({runName:"Branch"}),this.ends=Array.isArray(e.pathMap)?e.pathMap.reduce((t,n)=>(t[n]=n,t),{}):e.pathMap}run(e,t){return lo.registerWriter(new ts({name:"<branch_run>",trace:!1,func:(n,i)=>E(this,null,function*(){try{return yield this._route(n,i,e,t)}catch(o){throw o.name===w$.unminifiable_name&&console.warn(`[WARN]: 'NodeInterrupt' thrown in conditional edge. This is likely a bug in your graph implementation.
NodeInterrupt should only be thrown inside a node, not in edge conditions.`),o}})}))}_route(e,t,n,i){return E(this,null,function*(){let o=yield this.path.invoke(i?i(t):e,t);Array.isArray(o)||(o=[o]);let r;if(this.ends?r=o.map(a=>ao(a)?a:this.ends[a]):r=o,r.some(a=>!a))throw new Error("Branch condition returned unknown or null destination");if(r.filter(ao).some(a=>a.node===Et))throw new Sn("Cannot send a packet to the END node");return(yield n(r,t))??e})}},Xhe=class{nodes;edges;branches;entryPoint;compiled=!1;constructor(){this.nodes={},this.edges=new Set,this.branches={}}warnIfCompiled(e){this.compiled&&console.warn(e)}get allEdges(){return this.edges}addNode(...e){function t(i){return i.length>=1&&typeof i[0]!="string"}let n=t(e)?Array.isArray(e[0])?e[0]:Object.entries(e[0]):[[e[0],e[1],e[2]]];if(n.length===0)throw new Error("No nodes provided in `addNode`");for(let[i,o,r]of n){for(let a of[ti,Pr])if(i.includes(a))throw new Error(`"${a}" is a reserved character and is not allowed in node names.`);if(this.warnIfCompiled("Adding a node to a graph that has already been compiled. This will not be reflected in the compiled graph."),i in this.nodes)throw new Error(`Node \`${i}\` already present.`);if(i===Et)throw new Error(`Node \`${i}\` is reserved.`);let s=ll(o);this.nodes[i]={runnable:s,metadata:r?.metadata,subgraphs:Lx(s)?[s]:r?.subgraphs,ends:r?.ends}}return this}addEdge(e,t){if(this.warnIfCompiled("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph."),e===Et)throw new Error("END cannot be a start node");if(t===cn)throw new Error("START cannot be an end node");if(Array.from(this.edges).some(([n])=>n===e)&&!("channels"in this))throw new Error(`Already found path for ${e}. For multiple edges, use StateGraph.`);return this.edges.add([e,t]),this}addConditionalEdges(e,t,n){let i=typeof e=="object"?e:{source:e,path:t,pathMap:n};if(this.warnIfCompiled("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph."),!oi.isRunnable(i.path)){let r=Array.isArray(i.pathMap)?i.pathMap.join(","):Object.keys(i.pathMap??{}).join(",");i.path=ll(i.path).withConfig({runName:`Branch<${i.source}${r!==""?`,${r}`:""}>`.slice(0,63)})}let o=i.path.getName()==="RunnableLambda"?"condition":i.path.getName();if(this.branches[i.source]&&this.branches[i.source][o])throw new Error(`Condition \`${o}\` already present for node \`${e}\``);return this.branches[i.source]??={},this.branches[i.source][o]=new Oj(i),this}setEntryPoint(e){return this.warnIfCompiled("Setting the entry point of a graph that has already been compiled. This will not be reflected in the compiled graph."),this.addEdge(cn,e)}setFinishPoint(e){return this.warnIfCompiled("Setting a finish point of a graph that has already been compiled. This will not be reflected in the compiled graph."),this.addEdge(e,Et)}compile({checkpointer:e,interruptBefore:t,interruptAfter:n,name:i}={}){this.validate([...Array.isArray(t)?t:[],...Array.isArray(n)?n:[]]);let o=new Fj({builder:this,checkpointer:e,interruptAfter:n,interruptBefore:t,autoValidate:!1,nodes:{},channels:{[cn]:new Zu,[Et]:new Zu},inputChannels:cn,outputChannels:Et,streamChannels:[],streamMode:"values",name:i});for(let[r,s]of Object.entries(this.nodes))o.attachNode(r,s);for(let[r,s]of this.edges)o.attachEdge(r,s);for(let[r,s]of Object.entries(this.branches))for(let[a,l]of Object.entries(s))o.attachBranch(r,a,l);return o.validate()}validate(e){let t=new Set([...this.allEdges].map(([i,o])=>i));for(let[i]of Object.entries(this.branches))t.add(i);for(let i of t)if(i!==cn&&!(i in this.nodes))throw new Error(`Found edge starting at unknown node \`${i}\``);let n=new Set([...this.allEdges].map(([i,o])=>o));for(let[i,o]of Object.entries(this.branches))for(let r of Object.values(o))if(r.ends!=null)for(let s of Object.values(r.ends))n.add(s);else{n.add(Et);for(let s of Object.keys(this.nodes))s!==i&&n.add(s)}for(let i of Object.values(this.nodes))for(let o of i.ends??[])n.add(o);for(let i of Object.keys(this.nodes))if(!n.has(i))throw new mue([`Node \`${i}\` is not reachable.`,"","If you are returning Command objects from your node,",'make sure you are passing names of potential destination nodes as an "ends" array','into ".addNode(..., { ends: ["node1", "node2"] })".'].join(`
`),{lc_error_code:"UNREACHABLE_NODE"});for(let i of n)if(i!==Et&&!(i in this.nodes))throw new Error(`Found edge ending at unknown node \`${i}\``);if(e){for(let i of e)if(!(i in this.nodes))throw new Error(`Interrupt node \`${i}\` is not present`)}this.compiled=!0}},Fj=class extends Qhe{builder;constructor(n){var i=n,{builder:e}=i,t=Be(i,["builder"]);super(t),this.builder=e}attachNode(e,t){this.channels[e]=new Zu,this.nodes[e]=new wd({channels:[],triggers:[],metadata:t.metadata,subgraphs:t.subgraphs,ends:t.ends}).pipe(t.runnable).pipe(new lo([{channel:e,value:el}],[Bn])),this.streamChannels.push(e)}attachEdge(e,t){if(t===Et){if(e===cn)throw new Error("Cannot have an edge from START to END");this.nodes[e].writers.push(new lo([{channel:Et,value:el}],[Bn]))}else this.nodes[t].triggers.push(e),this.nodes[t].channels.push(e)}attachBranch(e,t,n){e===cn&&!this.nodes[cn]&&(this.nodes[cn]=Yhe.subscribeTo(cn,{tags:[Bn]})),this.nodes[e].pipe(n.run(o=>{let r=o.map(s=>ao(s)?s:{channel:s===Et?Et:`branch:${e}:${t}:${s}`,value:el});return new lo(r,[Bn])}));let i=n.ends?Object.values(n.ends):Object.keys(this.nodes);for(let o of i)if(o!==Et){let r=`branch:${e}:${t}:${o}`;this.channels[r]=new Zu,this.nodes[o].triggers.push(r),this.nodes[o].channels.push(r)}}getGraphAsync(e){return E(this,null,function*(){let t=e?.xray,n=new B2,i={[cn]:n.addNode({schema:he.any()},cn)},o={},r={};t&&(r=Object.fromEntries((yield Xa(this.getSubgraphsAsync())).filter(u=>Jhe(u[1]))));function s(u,h,f,m=!1){if(h===Et&&o[Et]===void 0&&(o[Et]=n.addNode({schema:he.any()},Et)),i[u]!==void 0){if(o[h]===void 0)throw new Error(`End node ${h} not found!`);return n.addEdge(i[u],o[h],f!==h?f:void 0,m)}}for(let[u,h]of Object.entries(this.builder.nodes)){let f=gr(u),m=h.runnable,_=h.metadata??{};if(this.interruptBefore?.includes(u)&&this.interruptAfter?.includes(u)?_.__interrupt="before,after":this.interruptBefore?.includes(u)?_.__interrupt="before":this.interruptAfter?.includes(u)&&(_.__interrupt="after"),t){let y=typeof t=="number"?t-1:t,w=r[u]!==void 0?yield r[u].getGraphAsync(x(g({},e),{xray:y})):m.getGraph(e);if(w.trimFirstNode(),w.trimLastNode(),Object.keys(w.nodes).length>1){let I=function(F){return F?F.lc_runnable:!1},O=function(F,H){if(F!==void 0&&!O2(F))return F;if(I(H))try{let j=H.getName();return j=j.startsWith("Runnable")?j.slice(8):j,j}catch{return H.getName()}else return H.name??"UnknownSchema"};var l=I,c=O;let[C,S]=n.extend(w,f);if(C===void 0)throw new Error(`Could not extend subgraph "${u}" due to missing entrypoint.`);S!==void 0&&(i[f]=g({name:O(S.id,S.data)},S)),o[f]=g({name:O(C.id,C.data)},C)}else{let C=n.addNode(m,f,_);i[f]=C,o[f]=C}}else{let y=n.addNode(m,f,_);i[f]=y,o[f]=y}}let a=[...this.builder.allEdges].sort(([u],[h])=>u<h?-1:h>u?1:0);for(let[u,h]of a)s(gr(u),gr(h));for(let[u,h]of Object.entries(this.builder.branches)){let f=x(g({},Object.fromEntries(Object.keys(this.builder.nodes).filter(m=>m!==u).map(m=>[gr(m),gr(m)]))),{[Et]:Et});for(let m of Object.values(h)){let _;m.ends!==void 0?_=m.ends:_=f;for(let[y,w]of Object.entries(_))s(gr(u),gr(w),y,!0)}}for(let[u,h]of Object.entries(this.builder.nodes))if(h.ends!==void 0)for(let f of h.ends)s(gr(u),gr(f),void 0,!0);return n})}getGraph(e){let t=e?.xray,n=new B2,i={[cn]:n.addNode({schema:he.any()},cn)},o={},r={};t&&(r=Object.fromEntries(yf(this.getSubgraphs()).filter(u=>Jhe(u[1]))));function s(u,h,f,m=!1){return h===Et&&o[Et]===void 0&&(o[Et]=n.addNode({schema:he.any()},Et)),n.addEdge(i[u],o[h],f!==h?f:void 0,m)}for(let[u,h]of Object.entries(this.builder.nodes)){let f=gr(u),m=h.runnable,_=h.metadata??{};if(this.interruptBefore?.includes(u)&&this.interruptAfter?.includes(u)?_.__interrupt="before,after":this.interruptBefore?.includes(u)?_.__interrupt="before":this.interruptAfter?.includes(u)&&(_.__interrupt="after"),t){let y=typeof t=="number"?t-1:t,w=r[u]!==void 0?r[u].getGraph(x(g({},e),{xray:y})):m.getGraph(e);if(w.trimFirstNode(),w.trimLastNode(),Object.keys(w.nodes).length>1){let I=function(F){return F?F.lc_runnable:!1},O=function(F,H){if(F!==void 0&&!O2(F))return F;if(I(H))try{let j=H.getName();return j=j.startsWith("Runnable")?j.slice(8):j,j}catch{return H.getName()}else return H.name??"UnknownSchema"};var l=I,c=O;let[C,S]=n.extend(w,f);if(C===void 0)throw new Error(`Could not extend subgraph "${u}" due to missing entrypoint.`);S!==void 0&&(i[f]=g({name:O(S.id,S.data)},S)),o[f]=g({name:O(C.id,C.data)},C)}else{let C=n.addNode(m,f,_);i[f]=C,o[f]=C}}else{let y=n.addNode(m,f,_);i[f]=y,o[f]=y}}let a=[...this.builder.allEdges].sort(([u],[h])=>u<h?-1:h>u?1:0);for(let[u,h]of a)s(gr(u),gr(h));for(let[u,h]of Object.entries(this.builder.branches)){let f=x(g({},Object.fromEntries(Object.keys(this.builder.nodes).filter(m=>m!==u).map(m=>[gr(m),gr(m)]))),{[Et]:Et});for(let m of Object.values(h)){let _;m.ends!==void 0?_=m.ends:_=f;for(let[y,w]of Object.entries(_))s(gr(u),gr(w),y,!0)}}return n}};function Jhe(e){return typeof e.attachNode=="function"&&typeof e.attachEdge=="function"}function gr(e){return e==="subgraph"?`"${e}"`:e}var xf=(e,t)=>e.size===t.size&&[...e].every(n=>t.has(n)),epe=class tpe extends ca{lc_graph_name="NamedBarrierValue";names;seen;constructor(t){super(),this.names=t,this.seen=new Set}fromCheckpoint(t){let n=new tpe(this.names);return typeof t<"u"&&(n.seen=new Set(t)),n}update(t){let n=!1;for(let i of t)if(this.names.has(i))this.seen.has(i)||(this.seen.add(i),n=!0);else throw new Sn(`Value ${JSON.stringify(i)} not in names ${JSON.stringify(this.names)}`);return n}get(){if(!xf(this.names,this.seen))throw new pi}checkpoint(){return[...this.seen]}consume(){return this.seen&&this.names&&xf(this.seen,this.names)?(this.seen=new Set,!0):!1}isAvailable(){return!!this.names&&xf(this.names,this.seen)}},npe=class ipe extends ca{lc_graph_name="NamedBarrierValueAfterFinish";names;seen;finished;constructor(t){super(),this.names=t,this.seen=new Set,this.finished=!1}fromCheckpoint(t){let n=new ipe(this.names);if(typeof t<"u"){let[i,o]=t;n.seen=new Set(i),n.finished=o}return n}update(t){let n=!1;for(let i of t)if(this.names.has(i)&&!this.seen.has(i))this.seen.add(i),n=!0;else if(!this.names.has(i))throw new Sn(`Value ${JSON.stringify(i)} not in names ${JSON.stringify(this.names)}`);return n}get(){if(!this.finished||!xf(this.names,this.seen))throw new pi}checkpoint(){return[[...this.seen],this.finished]}consume(){return this.finished&&this.seen&&this.names&&xf(this.seen,this.names)?(this.seen=new Set,this.finished=!1,!0):!1}finish(){return!this.finished&&this.names&&xf(this.names,this.seen)?(this.finished=!0,!0):!1}isAvailable(){return this.finished&&!!this.names&&xf(this.names,this.seen)}};var dqe="lg:",uqe=class{_map=new WeakMap;_extensionCache=new Map;get(e){return this._map.get(e)}extend(e,t){let n=this.get(e);this._map.set(e,t(n))}remove(e){return this._map.delete(e),this}has(e){return this._map.has(e)}getChannelsForSchema(e){let t={},n=Jy(e);for(let[i,o]of Object.entries(n)){let r=this.get(o);r?.reducer?t[i]=new Ax(r.reducer.fn,r.default):t[i]=new Px}return t}getExtendedChannelSchemas(e,t){if(Object.keys(t).length===0)return e;let n=Object.entries(t).filter(([,r])=>r===!0).sort(([r],[s])=>r.localeCompare(s)).map(([r,s])=>`${r}:${s}`).join("|"),i=this._extensionCache.get(n)??new WeakMap;if(i.has(e))return i.get(e);let o=e;if(t.withReducerSchema||t.withJsonSchemaExtrasAsDescription){let r=Object.entries(Jy(e)).map(([s,a])=>{let l=this.get(a),c=t.withReducerSchema?l?.reducer?.schema??a:a;if(t.withJsonSchemaExtrasAsDescription&&l?.jsonSchemaExtra){let u=Cc(c)??Cc(a),h=JSON.stringify(x(g({},l.jsonSchemaExtra),{description:u}));c=c.describe(`${dqe}${h}`)}return[s,c]});o=TE(e,Object.fromEntries(r)),pm(o)&&(o._def.unknownKeys="strip")}return t.asPartial&&(o=mm(o)),i.set(e,o),this._extensionCache.set(n,i),o}},Lj=new uqe;var Dd="__root__",Nj=Symbol.for("langgraph.state.partial"),Hx=class extends Xhe{channels={};waitingEdges=new Set;_schemaDefinition;_schemaRuntimeDefinition;_inputDefinition;_inputRuntimeDefinition;_outputDefinition;_outputRuntimeDefinition;_schemaDefinitions=new Map;_metaRegistry=Lj;_configSchema;_configRuntimeSchema;_interrupt;_writer;constructor(e,t){if(super(),_qe(e)){let i=this._metaRegistry.getChannelsForSchema(e.state),o=e.input!=null?this._metaRegistry.getChannelsForSchema(e.input):i,r=e.output!=null?this._metaRegistry.getChannelsForSchema(e.output):i;this._schemaDefinition=i,this._schemaRuntimeDefinition=e.state,this._inputDefinition=o,this._inputRuntimeDefinition=e.input??Nj,this._outputDefinition=r,this._outputRuntimeDefinition=e.output??e.state}else if(us(e)){let i=this._metaRegistry.getChannelsForSchema(e);this._schemaDefinition=i,this._schemaRuntimeDefinition=e,this._inputDefinition=i,this._inputRuntimeDefinition=Nj,this._outputDefinition=i,this._outputRuntimeDefinition=e}else if(vqe(e))this._schemaDefinition=e.input.spec,this._inputDefinition=e.input.spec,this._outputDefinition=e.output.spec;else if(gqe(e))this._schemaDefinition=e.stateSchema.spec,this._inputDefinition=e.input?.spec??this._schemaDefinition,this._outputDefinition=e.output?.spec??this._schemaDefinition;else if(fqe(e)||ope(e)){let i=ope(e)?e.spec:e;this._schemaDefinition=i}else if(mqe(e)){let i=hqe(e.channels);this._schemaDefinition=i}else throw new Error("Invalid StateGraph input. Make sure to pass a valid Annotation.Root or Zod schema.");this._inputDefinition??=this._schemaDefinition,this._outputDefinition??=this._schemaDefinition,this._addSchema(this._schemaDefinition),this._addSchema(this._inputDefinition),this._addSchema(this._outputDefinition);function n(i){return typeof i=="object"&&i!=null&&!("spec"in i)&&!us(i)}n(t)?(us(t.context)&&(this._configRuntimeSchema=t.context),this._interrupt=t.interrupt,this._writer=t.writer):us(t)&&(this._configRuntimeSchema=t)}get allEdges(){return new Set([...this.edges,...Array.from(this.waitingEdges).flatMap(([e,t])=>e.map(n=>[n,t]))])}_addSchema(e){if(!this._schemaDefinitions.has(e)){this._schemaDefinitions.set(e,e);for(let[t,n]of Object.entries(e)){let i;if(typeof n=="function"?i=n():i=n,this.channels[t]!==void 0){if(this.channels[t]!==i&&i.lc_graph_name!=="LastValue")throw new Error(`Channel "${t}" already exists with a different type.`)}else this.channels[t]=i}}}addNode(...e){function t(i){return i.length>=1&&typeof i[0]!="string"}let n=t(e)?Array.isArray(e[0])?e[0]:Object.entries(e[0]).map(([i,o])=>[i,o]):[[e[0],e[1],e[2]]];if(n.length===0)throw new Error("No nodes provided in `addNode`");for(let[i,o,r]of n){if(i in this.channels)throw new Error(`${i} is already being used as a state attribute (a.k.a. a channel), cannot also be used as a node name.`);for(let u of[ti,Pr])if(i.includes(u))throw new Error(`"${u}" is a reserved character and is not allowed in node names.`);if(this.warnIfCompiled("Adding a node to a graph that has already been compiled. This will not be reflected in the compiled graph."),i in this.nodes)throw new Error(`Node \`${i}\` already present.`);if(i===Et||i===cn)throw new Error(`Node \`${i}\` is reserved.`);let s=this._schemaDefinition;r?.input!==void 0&&(us(r.input)?s=this._metaRegistry.getChannelsForSchema(r.input):r.input.spec!==void 0&&(s=r.input.spec)),s!==void 0&&this._addSchema(s);let a;oi.isRunnable(o)?a=o:typeof o=="function"?a=new ts({func:o,name:i,trace:!1}):a=ll(o);let l=r?.cachePolicy;typeof l=="boolean"&&(l=l?{}:void 0);let c={runnable:a,retryPolicy:r?.retryPolicy,cachePolicy:l,metadata:r?.metadata,input:s??this._schemaDefinition,subgraphs:Lx(a)?[a]:r?.subgraphs,ends:r?.ends,defer:r?.defer};this.nodes[i]=c}return this}addEdge(e,t){if(typeof e=="string")return super.addEdge(e,t);this.compiled&&console.warn("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph.");for(let n of e){if(n===Et)throw new Error("END cannot be a start node");if(!Object.keys(this.nodes).some(i=>i===n))throw new Error(`Need to add a node named "${n}" first`)}if(t===Et)throw new Error("END cannot be an end node");if(!Object.keys(this.nodes).some(n=>n===t))throw new Error(`Need to add a node named "${t}" first`);return this.waitingEdges.add([e,t]),this}addSequence(e){let t=Array.isArray(e)?e:Object.entries(e);if(t.length===0)throw new Error("Sequence requires at least one node.");let n;for(let[i,o,r]of t){if(i in this.nodes)throw new Error(`Node names must be unique: node with the name "${i}" already exists.`);let s=i;this.addNode(s,o,r),n!=null&&this.addEdge(n,s),n=s}return this}compile({checkpointer:e,store:t,cache:n,interruptBefore:i,interruptAfter:o,name:r,description:s}={}){this.validate([...Array.isArray(i)?i:[],...Array.isArray(o)?o:[]]);let a=Object.keys(this._schemaDefinitions.get(this._outputDefinition)),l=a.length===1&&a[0]===Dd?Dd:a,c=Object.keys(this.channels),u=c.length===1&&c[0]===Dd?Dd:c,h=this._interrupt,f=new pqe({builder:this,checkpointer:e,interruptAfter:o,interruptBefore:i,autoValidate:!1,nodes:{},channels:x(g({},this.channels),{[cn]:new Zu}),inputChannels:cn,outputChannels:l,streamChannels:u,streamMode:"updates",store:t,cache:n,name:r,description:s,userInterrupt:h});f.attachNode(cn);for(let[m,_]of Object.entries(this.nodes))f.attachNode(m,_);f.attachBranch(cn,C$,rpe(),{withReader:!1});for(let[m]of Object.entries(this.nodes))f.attachBranch(m,C$,rpe(),{withReader:!1});for(let[m,_]of this.edges)f.attachEdge(m,_);for(let[m,_]of this.waitingEdges)f.attachEdge(m,_);for(let[m,_]of Object.entries(this.branches))for(let[y,w]of Object.entries(_))f.attachBranch(m,y,w);return f.validate()}};function hqe(e){let t={};for(let[n,i]of Object.entries(e))n===Dd?t[n]=$T(i):t[n]=$T(i);return t}var pqe=class extends Fj{description;_metaRegistry=Lj;constructor(n){var i=n,{description:e}=i,t=Be(i,["description"]);super(t),this.description=e}attachNode(e,t){let n;e===cn?n=Object.entries(this.builder._schemaDefinitions.get(this.builder._inputDefinition)).map(([a])=>a):n=Object.keys(this.builder.channels);function i(a){if(ro(a))return a.graph===Qo.PARENT?null:a._updateAsTuples();if(Array.isArray(a)&&a.length>0&&a.some(l=>ro(l))){let l=[];for(let c of a)if(ro(c)){if(c.graph===Qo.PARENT)continue;l.push(...c._updateAsTuples())}else l.push([Dd,c]);return l}else if(a!=null)return[[Dd,a]];return null}let o=e;function r(a){if(a){if(ro(a))return a.graph===Qo.PARENT?null:a._updateAsTuples().filter(([l])=>n.includes(l));if(Array.isArray(a)&&a.length>0&&a.some(ro)){let l=[];for(let c of a)if(ro(c)){if(c.graph===Qo.PARENT)continue;l.push(...c._updateAsTuples().filter(([u])=>n.includes(u)))}else{let u=r(c);u&&l.push(...u??[])}return l}else{if(typeof a=="object"&&!Array.isArray(a))return Object.entries(a).filter(([l])=>n.includes(l));{let l=Array.isArray(a)?"array":typeof a;throw new Sn(`Expected node "${o.toString()}" to return an object or an array containing at least one Command object, received ${l}`,{lc_error_code:"INVALID_GRAPH_NODE_RETURN_VALUE"})}}}else return null}let s=[{value:el,mapper:new ts({func:n.length&&n[0]===Dd?i:r,trace:!1,recurse:!1})}];if(e===cn)this.nodes[e]=new wd({tags:[Bn],triggers:[cn],channels:[cn],writers:[new lo(s,[Bn])]});else{let a=t?.input??this.builder._schemaDefinition,l=Object.fromEntries(Object.keys(this.builder._schemaDefinitions.get(a)).map(h=>[h,h])),c=Object.keys(l).length===1&&Dd in l,u=`branch:to:${e}`;this.channels[u]=t?.defer?new lhe:new Zu(!1),this.nodes[e]=new wd({triggers:[u],channels:c?Object.keys(l):l,writers:[new lo(s,[Bn])],mapper:c?void 0:h=>Object.fromEntries(Object.entries(h).filter(([f])=>f in l)),bound:t?.runnable,metadata:t?.metadata,retryPolicy:t?.retryPolicy,cachePolicy:t?.cachePolicy,subgraphs:t?.subgraphs,ends:t?.ends})}}attachEdge(e,t){if(t!==Et){if(typeof e=="string")this.nodes[e].writers.push(new lo([{channel:`branch:to:${t}`,value:null}],[Bn]));else if(Array.isArray(e)){let n=`join:${e.join("+")}:${t}`;this.channels[n]=this.builder.nodes[t].defer?new npe(new Set(e)):new epe(new Set(e)),this.nodes[t].triggers.push(n);for(let i of e)this.nodes[i].writers.push(new lo([{channel:n,value:i}],[Bn]))}}}attachBranch(e,t,n,i={withReader:!0}){let o=(r,s)=>E(null,null,function*(){let a=r.filter(c=>c!==Et);if(!a.length)return;let l=a.map(c=>ao(c)?c:{channel:c===Et?c:`branch:to:${c}`,value:e});yield lo.doWrite(x(g({},s),{tags:(s.tags??[]).concat([Bn])}),l)});this.nodes[e].writers.push(n.run(o,i.withReader?r=>phe.doRead(r,this.streamChannels??this.outputChannels,!0):void 0))}_validateInput(e){return E(this,null,function*(){if(e==null)return e;let t=(()=>{let n=this.builder._inputRuntimeDefinition,i=this.builder._schemaRuntimeDefinition,o=r=>{if(r!=null)return this._metaRegistry.getExtendedChannelSchemas(r,{withReducerSchema:!0})};if(us(n))return o(n);if(n===Nj)return mm(o(i))})();if(ro(e)){let n=e;return e.update&&t!=null&&(n.update=fm(t,e.update)),n}return t!=null?fm(t,e):e})}isInterrupted(e){return ET(e)}_validateContext(e){return E(this,null,function*(){let t=this.builder._configRuntimeSchema;return us(t)&&fm(t,e),e})}};function fqe(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.values(e).every(t=>typeof t=="function"||gj(t))}function ope(e){return typeof e=="object"&&e!==null&&"lc_graph_name"in e&&e.lc_graph_name==="AnnotationRoot"}function mqe(e){return typeof e=="object"&&e!==null&&e.channels!==void 0}function gqe(e){return typeof e=="object"&&e!==null&&e.stateSchema!==void 0}function vqe(e){return typeof e=="object"&&e!==null&&e.stateSchema===void 0&&e.input!==void 0&&e.output!==void 0}function _qe(e){return!(typeof e!="object"||e==null||!("state"in e)||!us(e.state)||"input"in e&&!us(e.input)||"output"in e&&!us(e.output))}function yqe(e){if(ao(e))return[e];let t=[];ro(e)?t.push(e):Array.isArray(e)&&t.push(...e.filter(ro));let n=[];for(let i of t){if(i.graph===Qo.PARENT)throw new x$(i);ao(i.goto)||typeof i.goto=="string"?n.push(i.goto):Array.isArray(i.goto)&&n.push(...i.goto)}return n}function rpe(){let e=new ts({func:yqe,tags:[Bn],trace:!1,recurse:!1,name:"<control_branch>"});return new Oj({path:e})}var ape=e=>Array.isArray(e)&&e.every(uo),bqe=e=>typeof e=="object"&&e!=null&&"messages"in e&&ape(e.messages),Cqe=e=>typeof e=="object"&&e!=null&&"lg_tool_call"in e,Bj=class extends ts{tools;handleToolErrors=!0;trace=!1;constructor(e,t){let{name:n,tags:i,handleToolErrors:o}=t??{};super({name:n,tags:i,func:(r,s)=>this.run(r,s)}),this.tools=e,this.handleToolErrors=o??this.handleToolErrors}runTool(e,t){return E(this,null,function*(){let n=this.tools.find(i=>i.name===e.name);try{if(n===void 0)throw new Error(`Tool "${e.name}" not found.`);let i=yield n.invoke(x(g({},e),{type:"tool_call"}),t);return uo(i)&&i.getType()==="tool"||ro(i)?i:new zs({status:"success",name:n.name,content:typeof i=="string"?i:JSON.stringify(i),tool_call_id:e.id})}catch(i){if(!this.handleToolErrors||rc(i))throw i;return new zs({status:"error",content:`Error: ${i.message}
 Please fix your mistakes.`,name:e.name,tool_call_id:e.id??""})}})}run(e,t){return E(this,null,function*(){let n;if(Cqe(e))n=[yield this.runTool(e.lg_tool_call,t)];else{let r;if(ape(e))r=e;else if(bqe(e))r=e.messages;else throw new Error("ToolNode only accepts BaseMessage[] or { messages: BaseMessage[] } as input.");let s=new Set(r.filter(l=>l.getType()==="tool").map(l=>l.tool_call_id)),a;for(let l=r.length-1;l>=0;l-=1){let c=r[l];if(yr(c)){a=c;break}}if(a==null||!yr(a))throw new Error("ToolNode only accepts AIMessages as input.");n=yield Promise.all(a.tool_calls?.filter(l=>l.id==null||!s.has(l.id)).map(l=>this.runTool(l,t))??[])}if(!n.some(ro))return Array.isArray(e)?n:{messages:n};let i=[],o=null;for(let r of n)ro(r)?r.graph===Qo.PARENT&&Array.isArray(r.goto)&&r.goto.every(s=>ao(s))?o?o.goto.push(...r.goto):o=new Qo({graph:Qo.PARENT,goto:r.goto}):i.push(r):i.push(Array.isArray(e)?[r]:{messages:[r]});return o&&i.push(o),i})}};var zj=/<name>(.*?)<\/name>/s,Vj=/<content>(.*?)<\/content>/s;function wqe(e){if(!(uo(e)&&(yr(e)||qy(e)&&Zy(e)))||!e.name)return e;let{name:n}=e;if(typeof e.content=="string"){let r=Object.keys(e.lc_kwargs??{}).length>0?e.lc_kwargs:e;return new ii(x(g({},r),{content:`<name>${n}</name><content>${e.content}</content>`,name:void 0}))}let i=[],o=0;for(let r of e.content)typeof r=="string"?(o+=1,i.push(`<name>${n}</name><content>${r}</content>`)):typeof r=="object"&&"type"in r&&r.type==="text"?(o+=1,i.push(x(g({},r),{text:`<name>${n}</name><content>${r.text}</content>`}))):i.push(r);return o||i.unshift({type:"text",text:`<name>${n}</name><content></content>`}),new ii(x(g({},e.lc_kwargs),{content:i,name:void 0}))}function xqe(e){if(!yr(e)||!e.content)return e;let t=[],n;if(Array.isArray(e.content))t=e.content.filter(i=>{if(i.type==="text"&&typeof i.text=="string"){let o=i.text.match(zj),r=i.text.match(Vj);return o&&(!r||r[1]==="")?(n=o[1],!1):!0}return!0}).map(i=>{if(i.type==="text"&&typeof i.text=="string"){let o=i.text.match(zj),r=i.text.match(Vj);return!o||!r?i:(n=o[1],x(g({},i),{text:r[1]}))}return i});else{let i=e.content,o=i.match(zj),r=i.match(Vj);if(!o||!r)return e;n=o[1],t=r[1]}return new ii(x(g({},Object.keys(e.lc_kwargs??{}).length>0?e.lc_kwargs:e),{content:t,name:n}))}function sP(e,t){let n,i;if(t==="inline")n=wqe,i=xqe;else throw new Error(`Invalid agent name mode: ${t}. Needs to be one of: "inline"`);function o(r){return r.map(n)}return Ci.from([To.from(o),e,To.from(i)])}var Sqe="__remove_all__";function Hj(e,t){let n=Array.isArray(e)?e:[e],i=Array.isArray(t)?t:[t],o=n.map(wh),r=i.map(wh);for(let u of o)(u.id===null||u.id===void 0)&&(u.id=F2(),u.lc_kwargs.id=u.id);let s;for(let u=0;u<r.length;u+=1){let h=r[u];(h.id===null||h.id===void 0)&&(h.id=F2(),h.lc_kwargs.id=h.id),h.getType()==="remove"&&h.id===Sqe&&(s=u)}if(s!=null)return r.slice(s+1);let a=[...o],l=new Map(a.map((u,h)=>[u.id,h])),c=new Set;for(let u of r){let h=l.get(u.id);if(h!==void 0)u.getType()==="remove"?c.add(u.id):(c.delete(u.id),a[h]=u);else{if(u.getType()==="remove")throw new Error(`Attempting to delete a message with an ID that doesn't exist ('${u.id}')`);l.set(u.id,a.length),a.push(u)}}return a.filter(u=>!c.has(u.id))}function Eqe(e){if(typeof e=="string"||uo(e)&&e._getType()==="system")return e;if(typeof e=="function")return t=>E(null,null,function*(){return e(t.messages)});if(oi.isRunnable(e))return To.from(t=>t.messages).pipe(e);throw new Error(`Unexpected type for messageModifier: ${typeof e}`)}var aP="prompt";function Dqe(e){let t;if(e==null)t=To.from(n=>n.messages).withConfig({runName:aP});else if(typeof e=="string"){let n=new Ky(e);t=To.from(i=>[n,...i.messages??[]]).withConfig({runName:aP})}else if(uo(e)&&e._getType()==="system")t=To.from(n=>[e,...n.messages]).withConfig({runName:aP});else if(typeof e=="function")t=To.from(e).withConfig({runName:aP});else if(oi.isRunnable(e))t=e;else throw new Error(`Got unexpected type for 'prompt': ${typeof e}`);return t}function jj(e){return oi.isRunnable(e)}function lpe(e,t,n){if([e,t,n].filter(r=>r!=null).length>1)throw new Error("Expected only one of prompt, stateModifier, or messageModifier, got multiple values");let o=e;return t!=null?o=t:n!=null&&(o=Eqe(n)),Dqe(o)}function A_(e){return"invoke"in e&&typeof e.invoke=="function"&&"_modelType"in e}function O_(e){return"_queuedMethodOperations"in e&&"_model"in e&&typeof e._model=="function"}function cpe(e){return A_(e)?"bindTools"in e&&typeof e.bindTools=="function":!1}function kqe(e,t){return E(this,null,function*(){let n=e;if(Ci.isRunnableSequence(n)&&(n=n.steps.find(a=>hs.isRunnableBinding(a)||A_(a)||O_(a))||n),O_(n)&&(n=yield n._model()),!hs.isRunnableBinding(n))return!0;let i=n.kwargs!=null&&typeof n.kwargs=="object"&&"tools"in n.kwargs&&Array.isArray(n.kwargs.tools)?n.kwargs.tools??null:n.config!=null&&typeof n.config=="object"&&"tools"in n.config&&Array.isArray(n.config.tools)?n.config.tools??null:null;if(i!=null&&i.length===1&&"functionDeclarations"in i[0]&&(i=i[0].functionDeclarations),i==null)return!0;if(t.length!==i.length)throw new Error("Number of tools in the model.bindTools() and tools passed to createReactAgent must match");let o=new Set(t.flatMap(a=>jj(a)?a.name:[])),r=new Set;for(let a of i){let l;if("type"in a&&a.type==="function")l=a.function.name;else if("name"in a)l=a.name;else if("toolSpec"in a&&"name"in a.toolSpec)l=a.toolSpec.name;else continue;l&&r.add(l)}let s=[...o].filter(a=>!r.has(a));if(s.length>0)throw new Error(`Missing tools '${s}' in the model.bindTools().Tools in the model.bindTools() must match the tools passed to createReactAgent.`);return!1})}var $j=(e,t)=>{if(cpe(e))return e.bindTools(t);if(hs.isRunnableBinding(e)&&cpe(e.bound)){let n=e.bound.bindTools(t);return hs.isRunnableBinding(n)?new hs({bound:n.bound,config:g(g({},e.config),n.config),kwargs:g(g({},e.kwargs),n.kwargs),configFactories:n.configFactories??e.configFactories}):new hs({bound:n,config:e.config,kwargs:e.kwargs,configFactories:e.configFactories})}return null};function Iqe(e,t){return E(this,null,function*(){let n=$j(e,t);if(n)return n;if(O_(e)){let i=$j(yield e._model(),t);if(i)return i}if(Ci.isRunnableSequence(e)){let i=e.steps.findIndex(o=>hs.isRunnableBinding(o)||A_(o)||O_(o));if(i>=0){let o=$j(e.steps[i],t);if(o){let r=e.steps.slice();return r.splice(i,1,o),Ci.from(r)}}}throw new Error(`llm ${e} must define bindTools method.`)})}function Mqe(e){return E(this,null,function*(){let t=e;if(Ci.isRunnableSequence(t)&&(t=t.steps.find(n=>hs.isRunnableBinding(n)||A_(n)||O_(n))||t),O_(t)&&(t=yield t._model()),hs.isRunnableBinding(t)&&(t=t.bound),!A_(t))throw new Error(`Expected \`llm\` to be a ChatModel or RunnableBinding (e.g. llm.bind_tools(...)) with invoke() and generate() methods, got ${t.constructor.name}`);return t})}var dpe=()=>Ku.Root({messages:Ku({reducer:Hj,default:()=>[]}),structuredResponse:Ku}),Rqe=Ku.Root({llmInputMessages:Ku({reducer:(e,t)=>Hj([],t),default:()=>[]})});function Gj(e){let{llm:t,tools:n,messageModifier:i,stateModifier:o,prompt:r,stateSchema:s,contextSchema:a,checkpointSaver:l,checkpointer:c,interruptBefore:u,interruptAfter:h,store:f,responseFormat:m,preModelHook:_,postModelHook:y,name:w,description:C,version:S="v1",includeAgentName:I}=e,O,F;Array.isArray(n)?(O=n,F=new Bj(O.filter(jj))):(O=n.tools,F=n);let H=null,j=Ve=>E(null,null,function*(){if(H)return H;let We;(yield kqe(Ve,O))?We=yield Iqe(Ve,O):We=Ve;let vt=lpe(r,o,i),It=I==="inline"?sP(We,I):We;return H=vt.pipe(It),H}),re=(Ve,We,vt)=>E(null,null,function*(){let It=yield Ve(We,vt);return lpe(r,o,i).pipe(I==="inline"?sP(It,I):It)}),ae=new Set(O.filter(jj).filter(Ve=>"returnDirect"in Ve&&Ve.returnDirect).map(Ve=>Ve.name));function se(Ve){let Dt=Ve,{messages:We,llmInputMessages:vt}=Dt,It=Be(Dt,["messages","llmInputMessages"]);return vt!=null&&vt.length>0?g({messages:vt},It):g({messages:We},It)}let Te=(Ve,We)=>E(null,null,function*(){if(m==null)throw new Error("Attempted to generate structured output with no passed response schema. Please contact us for help.");let vt=[...Ve.messages],It,Dt=typeof t=="function"?yield t(Ve,We):yield Mqe(t);if(!A_(Dt))throw new Error(`Expected \`llm\` to be a ChatModel with .withStructuredOutput() method, got ${Dt.constructor.name}`);if(typeof m=="object"&&"schema"in m){let yi=m,{prompt:Nr,schema:CS}=yi,Sy=Be(yi,["prompt","schema"]);It=Dt.withStructuredOutput(CS,Sy),Nr!=null&&vt.unshift(new Ky({content:Nr}))}else It=Dt.withStructuredOutput(m);return{structuredResponse:yield It.invoke(vt,We)}}),ue=(Ve,We)=>E(null,null,function*(){let It=yield(typeof t=="function"?yield re(t,Ve,We):yield j(t)).invoke(se(Ve),We);return It.name=w,It.lc_kwargs.name=w,{messages:[It]}}),De=s??dpe(),Ne=new Hx(De,a).addNode("tools",F);if(!("messages"in Ne._schemaDefinition))throw new Error("Missing required `messages` key in state schema.");let Pe=Ne,Le=Ve=>Object.fromEntries(Object.entries(Ve).filter(([We,vt])=>vt!=null)),mt="agent",ve;return _!=null?(Pe.addNode("pre_model_hook",_).addEdge("pre_model_hook","agent"),mt="pre_model_hook",ve=Ku.Root(g(g({},Ne._schemaDefinition),Rqe.spec))):mt="agent",Pe.addNode("agent",ue,{input:ve}).addEdge(cn,mt),y!=null&&Pe.addNode("post_model_hook",y).addEdge("agent","post_model_hook").addConditionalEdges("post_model_hook",Ve=>{let{messages:We}=Ve,vt=new Set(We.filter(cm).map(yi=>yi.tool_call_id)),It;for(let yi=We.length-1;yi>=0;yi-=1){let Nr=We[yi];if(yr(Nr)){It=Nr;break}}let Dt=It?.tool_calls?.filter(yi=>yi.id==null||!vt.has(yi.id))??[],jt=We.at(-1);return Dt.length>0?S==="v2"?Dt.map(yi=>new Wu("tools",x(g({},Ve),{lg_tool_call:yi}))):"tools":jt&&cm(jt)?mt:m!=null?"generate_structured_response":Et},Le({tools:"tools",[mt]:mt,generate_structured_response:m!=null?"generate_structured_response":null,[Et]:m!=null?null:Et})),m!==void 0&&Ne.addNode("generate_structured_response",Te).addEdge("generate_structured_response",Et),y==null&&Pe.addConditionalEdges("agent",Ve=>{let{messages:We}=Ve,vt=We[We.length-1];return!yr(vt)||!vt.tool_calls?.length?m!=null?"generate_structured_response":Et:S==="v2"?vt.tool_calls.map(It=>new Wu("tools",x(g({},Ve),{lg_tool_call:It}))):"tools"},Le({tools:"tools",generate_structured_response:m!=null?"generate_structured_response":null,[Et]:m!=null?null:Et})),ae.size>0?Pe.addConditionalEdges("tools",Ve=>{for(let We=Ve.messages.length-1;We>=0;We-=1){let vt=Ve.messages[We];if(!cm(vt))break;if(vt.name!==void 0&&ae.has(vt.name))return Et}return mt},Le({[mt]:mt,[Et]:Et})):Pe.addEdge("tools",mt),Pe.compile({checkpointer:c??l,interruptBefore:u,interruptAfter:h,store:f,name:w,description:C})}var F_=class e{langchain_model=null;openAI_agent;constructor(){}getOpenAiClient(t){if(!t.openAIKey)throw new Error("OpenAI API key is not set");return this.langchain_model&&delete this.langchain_model,this.langchain_model=new yT({apiKey:t.openAIKey,model:t.model||"gpt-4o-mini",temperature:t.temparature||0,maxTokens:t.maxToken||4096,streaming:t.streaming||!0}),this.langchain_model}openAImodels(t="langchain",n,i,o,r){let s=null,a=null;t=="langgraph"?s=Gj({llm:n,tools:i}):t=="langchain"&&i.length>0?s=n.bindTools(i,{tool_choice:"auto"}):t=="langchain"&&i.length==0&&(a=n);let l=FE.fromMessages([eb.fromTemplate(o),new j2("history"),OE.fromTemplate(r),new j2("agent_scratchpad")]);return{model_with_tools:s,overall_prompt:l,model_with_out_tools:a}}static \u0275fac=function(n){return new(n||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})};var Xu=class e{saveValuesInKey(t,n){localStorage.setItem(t,n)}getValueFromKey(t){let n=localStorage.getItem(t);return n||""}static \u0275fac=function(n){return new(n||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})};var Mo=class e{constructor(t,n,i){this.toolformatterService=t;this.openai_service=n;this.storageService=i}client=null;transport=null;sessionId=void 0;notificationCount=0;connectionStatusSubject=new kn(!1);notificationsSubject=new ie;streamingSubject=new ie;elicitRequestSubject=new ie;connectionStatus$=this.connectionStatusSubject.asObservable();notifications$=this.notificationsSubject.asObservable();elicitRequests$=this.elicitRequestSubject.asObservable();streaming$=this.streamingSubject.asObservable();toolsSubject=new kn([]);promptsSubject=new kn([]);resourceSubject=new kn([]);mcpServerInstructionsSubject=new ie;mcpServerInstructions$=this.mcpServerInstructionsSubject.asObservable();tools$=this.toolsSubject.asObservable();promtps$=this.promptsSubject.asObservable();resources$=this.resourceSubject.asObservable();messageSource=new kn(!1);currentMessage$=this.messageSource.asObservable();currentRequest=null;elicitResponseSubject=new ie;elicitResponses$=this.elicitResponseSubject.asObservable();notificationsToolLastEventId=void 0;connect(t){return E(this,null,function*(){let n=t;this.client&&(yield this.disconnect()),console.log(`Connecting to ${n}...`);try{this.client=new hR({name:"angular-mcp-client",version:"1.0.0"},{capabilities:{elicitation:{form:{}},sampling:{}}}),this.transport=new bR(new URL(n),{sessionId:localStorage.getItem("mcp_session_id")||void 0,requestInit:{headers:new Headers({Accept:"application/json","Content-Type":"application/json, text/event-stream"}),cache:"no-store"},reconnectionOptions:{maxReconnectionDelay:3e4,initialReconnectionDelay:1e3,reconnectionDelayGrowFactor:1.5,maxRetries:3}}),this.transport.onerror=i=>E(this,null,function*(){console.error("Transport error:",i),i.message.includes("session")&&(localStorage.removeItem("mcp_session_id"),this.connectionStatusSubject.next(!1),this.messageSource.next(!1))}),this.client.onerror=i=>E(this,null,function*(){console.error("Client error:",i),this.notificationsSubject.next({type:"error",message:i.message}),this.connectionStatusSubject.next(!1),this.messageSource.next(!1),localStorage.removeItem("mcp_session_id")}),this.initializeElicitationHandler(this.client),this.samplingRequestHandler(this.client),this.progressNotificationHandler(this.client),this.loggingNotificationHandler(this.client),this.resourceListChangingHandler(this.client),yield this.client.connect(this.transport,{timeout:42e4,maxTotalTimeout:6e5}),this.mcpServerInstructionsSubject.next(this.client.getInstructions()),this.sessionId=this.transport.sessionId,this.sessionId&&localStorage.setItem("mcp_session_id",this.sessionId),this.connectionStatusSubject.next(!0),this.messageSource.next(!0),this.listTools(),this.listPrompts(),this.listResources()}catch(i){throw console.error("Failed to connect:",i),this.client=null,this.transport=null,this.connectionStatusSubject.next(!1),this.messageSource.next(!1),this.toolsSubject.next([]),this.promptsSubject.next([]),this.resourceSubject.next([]),i}})}completion(t,n,i=""){return E(this,null,function*(){try{return yield this.client?.complete({ref:{type:"ref/prompt",name:"example"},argument:{name:t,value:n},context:{arguments:{previousArg:i}}})}catch(o){throw new Error(`Error : ${JSON.stringify(o)}`)}})}resourceListChangingHandler(t){t.setNotificationHandler(Kw,n=>E(this,null,function*(){console.log("Resource list changed notification received"),this.notificationsSubject.next({type:"resource-change",message:"Resource list has changed"});try{if(!this.client){console.log("Client disconnected, cannot fetch resources");return}let i=yield this.client.request({method:"resources/list",params:{}},uv);this.notificationsSubject.next({type:"resource-list",resources:i.resources})}catch(i){console.log("Failed to list resources after change notification",i),this.notificationsSubject.next({type:"error",message:"Failed to fetch updated resources"})}}))}loggingNotificationHandler(t){t.setNotificationHandler(J6,n=>{let i={type:"",message:"",status:""};if(n.params.data&&typeof n.params.data=="object"){i={type:"",message:"",status:""};let o=Object.keys(n.params.data);i=n.params.data;for(let r of o)if(i[r]=="streaming"){let s={type:i[r],level:n.params.level,message:i.message,status:i.status};this.streamingSubject.next(s)}}else{this.notificationCount++;let o={type:"log",level:n.params.level,message:n.params.data,count:this.notificationCount};console.log("MCP Notification:",o),this.notificationsSubject.next(o)}})}progressNotificationHandler(t){t.setNotificationHandler(cv,n=>{let i={type:"",message:"",status:""};if(n.params.message&&typeof n.params.message=="object"){i={type:"",message:"",status:""};let o=Object.keys(n.params.message);i=n.params.message;for(let r of o)if(i[r]=="streaming"){let s={type:i[r],progress:n.params.progress,total:n.params.total,message:i.message,progressToken:n.params.progressToken,status:i.status};this.streamingSubject.next(s)}}else{console.log("On progress : ",n),this.notificationCount++;let o={type:"log",progress:n.params.progress,total:n.params.total,message:n.params.message,progressToken:n.params.progressToken,count:this.notificationCount};console.log("MCP Notification:",o),this.notificationsSubject.next(o)}})}initializeElicitationHandler(t){t.setRequestHandler(Xw,(n,i)=>{if(n.params.mode&&n.params.mode!=="form")throw new ct(Pt.InvalidParams,`Unsupported elicitation mode: ${n.params.mode}`);let o=i.requestId,r=n.params.requestedSchema,s=this.parseSchemaToFields(r);return this.elicitRequestSubject.next({requestId:o,message:n.params.message,schema:r,fields:s}),new Promise((a,l)=>{let c=!1,u=36e4,h=setTimeout(()=>{c||(c=!0,f.unsubscribe(),console.warn(`Request ${o} timed out after ${u}ms`),a({action:"cancel",content:{reason:"Request timeout"}}))},u),f=this.elicitResponses$.subscribe({next:m=>{if(c){console.warn(`Request ${o} already resolved, ignoring duplicate response`);return}c=!0,f.unsubscribe(),console.log("resp : ",m),a({_meta:{requestId:i.requestId},action:m?.action||"cancel",content:m?.content||{}})},error:()=>{c||(c=!0,clearTimeout(h),f.unsubscribe(),a({_meta:{requestId:i.requestId},action:"decline"}))}});if(i.signal){let m=()=>{c||(c=!0,clearTimeout(h),f.unsubscribe(),console.log(`Request ${o} was aborted`),a({action:"cancel",content:{reason:"Request aborted"}}))};i.signal.addEventListener("abort",m)}})})}reconnect(){return E(this,null,function*(){let t=localStorage.getItem("mcp_session_id"),n=localStorage.getItem("mcp_server");if(t&&n)this.sessionId=t,yield this.connect(n);else throw new Error("No stored session ID found")})}samplingRequestHandler(t){t.setRequestHandler(Jw,n=>{let i=[];console.log(n.params);let o="";if(n.params.systemPrompt){let r=typeof n.params.systemPrompt=="string"?n.params.systemPrompt:JSON.stringify(n.params.systemPrompt);i.push(eb.fromTemplate(r))}if(n.params.messages&&n.params.messages.length>0)for(let r=0;r<n.params.messages.length;r++){let s=n.params.messages[r],a=s.role,l=s.content,c="";if(typeof l=="object"&&!Array.isArray(l)&&l.type==="text"&&"text"in l)c=l.text;else if(Array.isArray(l)){let u=l.find(h=>h.type==="text"&&"text"in h);u&&"text"in u&&(c=u.text)}else typeof l=="string"&&(c=l);c&&(a==="assistant"?(o=c,i.push(N9.fromTemplate(c))):a==="user"?i.push(OE.fromTemplate(c)):a==="system"&&i.push(eb.fromTemplate(c)))}return console.log(`
[Sampling] Collected ${i.length} messages`),new Promise((r,s)=>E(this,null,function*(){let a={userInput:o,messages:i,model_preference:n.params.modelPreferences?.hints?.[0]?.name},l=yield this.openAISampling(a);console.log("Sampleing front-end response : ",l),r({model:"gpt-4o-mini",role:"assistant",content:{type:"text",text:typeof l=="string"?l:JSON.stringify(l)}})}))})}openAISampling(t){return E(this,null,function*(){try{let n=this.storageService.getValueFromKey("open_ai_token")||"",i=this.openai_service.getOpenAiClient({openAIKey:n,model:t.model_preference||"gpt-4o-mini"}),o=FE.fromMessages(t.messages);return console.log("prompt : ",o),yield Ci.from([o,i,new O9]).invoke({input:t.userInput})}catch(n){return console.error("Agent workflow error:",n),n}})}parseSchemaToFields(t){let n=t.properties,i=t.required||[];return Object.entries(n).map(([o,r])=>({name:o,title:r.title||o,description:r.description,type:r.type||"string",required:i.includes(o),enum:r.enum,minimum:r.minimum,maximum:r.maximum,minLength:r.minLength,maxLength:r.maxLength,format:r.format,default:r.default}))}submitElicitResponse(t){this.elicitResponseSubject.next(t)}listTools(){return E(this,null,function*(){if(!this.client)throw new Error("Client not connected");let t=yield this.client.request({method:"tools/list",params:{}},Qw);for(let n of t.tools)n.title=CR(n);this.toolsSubject.next(t.tools)})}createOpenAiToolSchema(t){let n=this.toolformatterService.formatMultipleTools(t);return console.log("Open ai tools : ",n),n}listPrompts(){return E(this,null,function*(){if(!this.client)throw new Error("Client not connected");let t=yield this.client.request({method:"prompts/list",params:{}},Zw);for(let n of t.prompts)n.title=CR(n);console.log("Prompt : ",t.prompts),this.promptsSubject.next(t.prompts)})}getPrompt(t){return E(this,null,function*(){if(!this.client)throw new Error("Client not connected");return yield this.client.request({method:"prompts/get",params:{promptId:t}},Yw)})}callElicitation(t,n=null){return E(this,null,function*(){if(!this.client)throw new Error("Client not connected");return yield this.client.request({method:"elicitation/create",params:{message:t,requestedSchema:n}},e0)})}listResources(){return E(this,null,function*(){if(!this.client)throw new Error("Client not connected");let t=yield this.client.request({method:"resources/list",params:{}},uv);for(let n of t.resources)console.log("Resources : ",n),n.title=CR(n);this.resourceSubject.next(t.resources)})}readResource(t){if(!this.client)throw new Error("Client not connected");return this.client.request({method:"resources/read",params:{resourceLink:t}},qw)}disconnect(){return E(this,null,function*(){if(this.client&&this.transport)try{if(this.transport.sessionId)try{console.log("Terminating session before exit..."),yield this.transport.terminateSession(),console.log("Session terminated successfully")}catch(t){console.error("Error terminating session:",t)}yield this.transport?.close(),this.client=null,this.transport=null,this.sessionId=void 0,this.connectionStatusSubject.next(!1),this.messageSource.next(!1),localStorage.removeItem("mcp_session_id")}catch(t){console.error("Error during disconnect:",t)}})}callTool(t,n){return E(this,null,function*(){let i=this.generateProgressToken();if(!this.client)throw new Error("Client not connected");return yield this.client.request({method:"tools/call",params:{name:t,arguments:n,_meta:{stream:!0,progressToken:i}}},td)})}longRunningTool(t,n){return E(this,null,function*(){let i=this,o=this.generateProgressToken(),r=s=>{i.notificationsToolLastEventId=s,console.log(`Updated resumption token: ${s}`),console.log(`Updated resumption token: ${i.notificationsToolLastEventId}`)};if(!this.client)throw new Error("Client not connected");return yield this.client.request({method:"tools/call",params:{name:t,arguments:n,_meta:{stream:!0,progressToken:o}}},td,{resumptionToken:i.notificationsToolLastEventId,onresumptiontoken:r})})}generateProgressToken(){return Math.random().toString(36).substring(2)+Date.now().toString(36)}static \u0275fac=function(n){return new(n||e)(Ze(Fu),Ze(F_),Ze(Xu))};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})};var Cpe=(()=>{class e{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,i){this._renderer=n,this._elementRef=i}setProperty(n,i){this._renderer.setProperty(this._elementRef.nativeElement,n,i)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(i){return new(i||e)(ye(Pn),ye(Oe))};static \u0275dir=ke({type:e})}return e})(),Zx=(()=>{class e extends Cpe{static \u0275fac=(()=>{let n;return function(o){return(n||(n=gn(e)))(o||e)}})();static \u0275dir=ke({type:e,features:[Tt]})}return e})(),Sf=new q(""),Tqe={provide:Sf,useExisting:Bi(()=>Ef),multi:!0},Ef=(()=>{class e extends Zx{writeValue(n){this.setProperty("checked",n)}static \u0275fac=(()=>{let n;return function(o){return(n||(n=gn(e)))(o||e)}})();static \u0275dir=ke({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,o){i&1&&Q("change",function(s){return o.onChange(s.target.checked)})("blur",function(){return o.onTouched()})},standalone:!1,features:[kt([Tqe]),Tt]})}return e})(),Pqe={provide:Sf,useExisting:Bi(()=>da),multi:!0};function Aqe(){let e=qs()?qs().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var Oqe=new q(""),da=(()=>{class e extends Cpe{_compositionMode;_composing=!1;constructor(n,i,o){super(n,i),this._compositionMode=o,this._compositionMode==null&&(this._compositionMode=!Aqe())}writeValue(n){let i=n??"";this.setProperty("value",i)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(i){return new(i||e)(ye(Pn),ye(Oe),ye(Oqe,8))};static \u0275dir=ke({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&Q("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},standalone:!1,features:[kt([Pqe]),Tt]})}return e})();function Kj(e){return e==null||Zj(e)===0}function Zj(e){return e==null?null:Array.isArray(e)||typeof e=="string"?e.length:e instanceof Set?e.size:null}var th=new q(""),V_=new q(""),Fqe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ri=class{static min(t){return wpe(t)}static max(t){return xpe(t)}static required(t){return Lqe(t)}static requiredTrue(t){return Nqe(t)}static email(t){return Bqe(t)}static minLength(t){return zqe(t)}static maxLength(t){return Vqe(t)}static pattern(t){return Hqe(t)}static nullValidator(t){return cP()}static compose(t){return Mpe(t)}static composeAsync(t){return Rpe(t)}};function wpe(e){return t=>{if(t.value==null||e==null)return null;let n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}function xpe(e){return t=>{if(t.value==null||e==null)return null;let n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}function Lqe(e){return Kj(e.value)?{required:!0}:null}function Nqe(e){return e.value===!0?null:{required:!0}}function Bqe(e){return Kj(e.value)||Fqe.test(e.value)?null:{email:!0}}function zqe(e){return t=>{let n=t.value?.length??Zj(t.value);return n===null||n===0?null:n<e?{minlength:{requiredLength:e,actualLength:n}}:null}}function Vqe(e){return t=>{let n=t.value?.length??Zj(t.value);return n!==null&&n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}}function Hqe(e){if(!e)return cP;let t,n;return typeof e=="string"?(n="",e.charAt(0)!=="^"&&(n+="^"),n+=e,e.charAt(e.length-1)!=="$"&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),i=>{if(Kj(i.value))return null;let o=i.value;return t.test(o)?null:{pattern:{requiredPattern:n,actualValue:o}}}}function cP(e){return null}function Spe(e){return e!=null}function Epe(e){return Fc(e)?Ti(e):e}function Dpe(e){let t={};return e.forEach(n=>{t=n!=null?g(g({},t),n):t}),Object.keys(t).length===0?null:t}function kpe(e,t){return t.map(n=>n(e))}function $qe(e){return!e.validate}function Ipe(e){return e.map(t=>$qe(t)?t:n=>t.validate(n))}function Mpe(e){if(!e)return null;let t=e.filter(Spe);return t.length==0?null:function(n){return Dpe(kpe(n,t))}}function Yj(e){return e!=null?Mpe(Ipe(e)):null}function Rpe(e){if(!e)return null;let t=e.filter(Spe);return t.length==0?null:function(n){let i=kpe(n,t).map(Epe);return db(i).pipe(tt(Dpe))}}function Qj(e){return e!=null?Rpe(Ipe(e)):null}function hpe(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function Tpe(e){return e._rawValidators}function Ppe(e){return e._rawAsyncValidators}function Wj(e){return e?Array.isArray(e)?e:[e]:[]}function dP(e,t){return Array.isArray(e)?e.includes(t):e===t}function ppe(e,t){let n=Wj(t);return Wj(e).forEach(o=>{dP(n,o)||n.push(o)}),n}function fpe(e,t){return Wj(t).filter(n=>!dP(e,n))}var uP=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Yj(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Qj(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},Or=class extends uP{name;get formDirective(){return null}get path(){return null}},kd=class extends uP{_parent=null;name=null;valueAccessor=null},hP=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var ua=(()=>{class e extends hP{constructor(n){super(n)}static \u0275fac=function(i){return new(i||e)(ye(kd,2))};static \u0275dir=ke({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&be("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},standalone:!1,features:[Tt]})}return e})(),_P=(()=>{class e extends hP{constructor(n){super(n)}static \u0275fac=function(i){return new(i||e)(ye(Or,10))};static \u0275dir=ke({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&be("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},standalone:!1,features:[Tt]})}return e})();var $x="VALID",lP="INVALID",N_="PENDING",jx="DISABLED",eh=class{},pP=class extends eh{value;source;constructor(t,n){super(),this.value=t,this.source=n}},Ux=class extends eh{pristine;source;constructor(t,n){super(),this.pristine=t,this.source=n}},Wx=class extends eh{touched;source;constructor(t,n){super(),this.touched=t,this.source=n}},B_=class extends eh{status;source;constructor(t,n){super(),this.status=t,this.source=n}},fP=class extends eh{source;constructor(t){super(),this.source=t}},Kx=class extends eh{source;constructor(t){super(),this.source=t}};function Jj(e){return(yP(e)?e.validators:e)||null}function jqe(e){return Array.isArray(e)?Yj(e):e||null}function Xj(e,t){return(yP(t)?t.asyncValidators:e)||null}function Gqe(e){return Array.isArray(e)?Qj(e):e||null}function yP(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function Ape(e,t,n){let i=e.controls;if(!(t?Object.keys(i):i).length)throw new _e(1e3,"");if(!i[n])throw new _e(1001,"")}function Ope(e,t,n){e._forEachChild((i,o)=>{if(n[o]===void 0)throw new _e(1002,"")})}var z_=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,n){this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return mi(this.statusReactive)}set status(t){mi(()=>this.statusReactive.set(t))}_status=Er(()=>this.statusReactive());statusReactive=$t(void 0);get valid(){return this.status===$x}get invalid(){return this.status===lP}get pending(){return this.status==N_}get disabled(){return this.status===jx}get enabled(){return this.status!==jx}errors;get pristine(){return mi(this.pristineReactive)}set pristine(t){mi(()=>this.pristineReactive.set(t))}_pristine=Er(()=>this.pristineReactive());pristineReactive=$t(!0);get dirty(){return!this.pristine}get touched(){return mi(this.touchedReactive)}set touched(t){mi(()=>this.touchedReactive.set(t))}_touched=Er(()=>this.touchedReactive());touchedReactive=$t(!1);get untouched(){return!this.touched}_events=new ie;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(ppe(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(ppe(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(fpe(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(fpe(t,this._rawAsyncValidators))}hasValidator(t){return dP(this._rawValidators,t)}hasAsyncValidator(t){return dP(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(x(g({},t),{sourceControl:i})),n&&t.emitEvent!==!1&&this._events.next(new Wx(!0,i))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),n&&t.emitEvent!==!1&&this._events.next(new Wx(!1,i))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(x(g({},t),{sourceControl:i})),n&&t.emitEvent!==!1&&this._events.next(new Ux(!1,i))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),n&&t.emitEvent!==!1&&this._events.next(new Ux(!0,i))}markAsPending(t={}){this.status=N_;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new B_(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(x(g({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=jx,this.errors=null,this._forEachChild(o=>{o.disable(x(g({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new pP(this.value,i)),this._events.next(new B_(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(x(g({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=$x,this._forEachChild(i=>{i.enable(x(g({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(x(g({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$x||this.status===N_)&&this._runAsyncValidator(i,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new pP(this.value,n)),this._events.next(new B_(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(x(g({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?jx:$x}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=N_,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:t!==!1};let i=Epe(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,o)=>i&&i._find(o),this)}getError(t,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new B_(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,i)}_initObservables(){this.valueChanges=new V,this.statusChanges=new V}_calculateStatus(){return this._allControlsDisabled()?jx:this.errors?lP:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(N_)?N_:this._anyControlsHaveStatus(lP)?lP:$x}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let i=!this._anyControlsDirty(),o=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),o&&this._events.next(new Ux(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new Wx(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){yP(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=jqe(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=Gqe(this._rawAsyncValidators)}},As=class extends z_{constructor(t,n,i){super(Jj(n),Xj(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,i={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){Ope(this,!0,t),Object.keys(t).forEach(i=>{Ape(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(i=>{let o=this.controls[i];o&&o.patchValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((i,o)=>{i.reset(t?t[o]:null,x(g({},n),{onlySelf:!0}))}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new Kx(this))}getRawValue(){return this._reduceChildren({},(t,n,i)=>(t[i]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&t(i,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,i,o)=>((i.enabled||this.disabled)&&(n[o]=i.value),n))}_reduceChildren(t,n){let i=t;return this._forEachChild((o,r)=>{i=n(i,o,r)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var qj=class extends As{};var Yx=new q("",{factory:()=>bP}),bP="always";function CP(e,t){return[...t.path,e]}function mP(e,t,n=bP){eG(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),Wqe(e,t),Kqe(e,t),qqe(e,t),Uqe(e,t)}function mpe(e,t,n=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),vP(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function gP(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function Uqe(e,t){if(t.valueAccessor.setDisabledState){let n=i=>{t.valueAccessor.setDisabledState(i)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function eG(e,t){let n=Tpe(e);t.validator!==null?e.setValidators(hpe(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let i=Ppe(e);t.asyncValidator!==null?e.setAsyncValidators(hpe(i,t.asyncValidator)):typeof i=="function"&&e.setAsyncValidators([i]);let o=()=>e.updateValueAndValidity();gP(t._rawValidators,o),gP(t._rawAsyncValidators,o)}function vP(e,t){let n=!1;if(e!==null){if(t.validator!==null){let o=Tpe(e);if(Array.isArray(o)&&o.length>0){let r=o.filter(s=>s!==t.validator);r.length!==o.length&&(n=!0,e.setValidators(r))}}if(t.asyncValidator!==null){let o=Ppe(e);if(Array.isArray(o)&&o.length>0){let r=o.filter(s=>s!==t.asyncValidator);r.length!==o.length&&(n=!0,e.setAsyncValidators(r))}}}let i=()=>{};return gP(t._rawValidators,i),gP(t._rawAsyncValidators,i),n}function Wqe(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&Fpe(e,t)})}function qqe(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&Fpe(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function Fpe(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Kqe(e,t){let n=(i,o)=>{t.valueAccessor.writeValue(i),o&&t.viewToModelUpdate(i)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function Lpe(e,t){e==null,eG(e,t)}function Zqe(e,t){return vP(e,t)}function Npe(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function Yqe(e){return Object.getPrototypeOf(e.constructor)===Zx}function Bpe(e,t){e._syncPendingControls(),t.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function zpe(e,t){if(!t)return null;Array.isArray(t);let n,i,o;return t.forEach(r=>{r.constructor===da?n=r:Yqe(r)?i=r:o=r}),o||i||n||null}function Qqe(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}var Jqe={provide:Or,useExisting:Bi(()=>tG)},Gx=Promise.resolve(),tG=(()=>{class e extends Or{callSetDisabledState;get submitted(){return mi(this.submittedReactive)}_submitted=Er(()=>this.submittedReactive());submittedReactive=$t(!1);_directives=new Set;form;ngSubmit=new V;options;constructor(n,i,o){super(),this.callSetDisabledState=o,this.form=new As({},Yj(n),Qj(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Gx.then(()=>{let i=this._findContainer(n.path);n.control=i.registerControl(n.name,n.control),mP(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Gx.then(()=>{let i=this._findContainer(n.path);i&&i.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Gx.then(()=>{let i=this._findContainer(n.path),o=new As({});Lpe(o,n),i.registerControl(n.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Gx.then(()=>{let i=this._findContainer(n.path);i&&i.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,i){Gx.then(()=>{this.form.get(n.path).setValue(i)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),Bpe(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new fP(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(i){return new(i||e)(ye(th,10),ye(V_,10),ye(Yx,8))};static \u0275dir=ke({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup","",3,"formArray",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&Q("submit",function(s){return o.onSubmit(s)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[kt([Jqe]),Tt]})}return e})();function gpe(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function vpe(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var qx=class extends z_{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,n,i){super(Jj(n),Xj(i,n)),this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),yP(n)&&(n.nonNullable||n.initialValueIsDefault)&&(vpe(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),n.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new Kx(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){gpe(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){gpe(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){vpe(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var Xqe=e=>e instanceof qx,eKe=(()=>{class e extends Or{_parent;ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return CP(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static \u0275fac=(()=>{let n;return function(o){return(n||(n=gn(e)))(o||e)}})();static \u0275dir=ke({type:e,standalone:!1,features:[Tt]})}return e})();var tKe={provide:kd,useExisting:Bi(()=>Md)},_pe=Promise.resolve(),Md=(()=>{class e extends kd{_changeDetectorRef;callSetDisabledState;control=new qx;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new V;constructor(n,i,o,r,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=zpe(this,r)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let i=n.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),Npe(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){mP(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){_pe.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let i=n.isDisabled.currentValue,o=i!==0&&$(i);_pe.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?CP(n,this._parent):[n]}static \u0275fac=function(i){return new(i||e)(ye(Or,9),ye(th,10),ye(V_,10),ye(Sf,10),ye(dn,8),ye(Yx,8))};static \u0275dir=ke({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[kt([tKe]),Tt,sn]})}return e})();var wP=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return e})(),nKe={provide:Sf,useExisting:Bi(()=>Qx),multi:!0},Qx=(()=>{class e extends Zx{writeValue(n){let i=n??"";this.setProperty("value",i)}registerOnChange(n){this.onChange=i=>{n(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let n;return function(o){return(n||(n=gn(e)))(o||e)}})();static \u0275dir=ke({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,o){i&1&&Q("input",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},standalone:!1,features:[kt([nKe]),Tt]})}return e})();var Id=class extends z_{constructor(t,n,i){super(Jj(n),Xj(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,n={}){Array.isArray(t)?t.forEach(i=>{this.controls.push(i),this._registerControl(i)}):(this.controls.push(t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(t,n,i={}){this.controls.splice(t,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,n={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(t,n,i={}){let o=this._adjustIndex(t);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),n&&(this.controls.splice(o,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,n={}){Ope(this,!1,t),t.forEach((i,o)=>{Ape(this,!1,o),this.at(o).setValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(t.forEach((i,o)=>{this.at(o)&&this.at(o).patchValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t=[],n={}){this._forEachChild((i,o)=>{i.reset(t[o],x(g({},n),{onlySelf:!0}))}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new Kx(this))}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((n,i)=>i._syncPendingControls()?!0:n,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((n,i)=>{t(n,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(n=>n.enabled&&t(n))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};var Vpe=(()=>{class e extends Or{callSetDisabledState;get submitted(){return mi(this._submittedReactive)}set submitted(n){this._submittedReactive.set(n)}_submitted=Er(()=>this._submittedReactive());_submittedReactive=$t(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(n,i,o){super(),this.callSetDisabledState=o,this._setValidators(n),this._setAsyncValidators(i)}ngOnChanges(n){this.onChanges(n)}ngOnDestroy(){this.onDestroy()}onChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(vP(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(n){let i=this.form.get(n.path);return mP(i,n,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),i}getControl(n){return this.form.get(n.path)}removeControl(n){mpe(n.control||null,n,!1),Qqe(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}getFormArray(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}updateModel(n,i){this.form.get(n.path).setValue(i)}onReset(){this.resetForm()}resetForm(n=void 0,i={}){this.form.reset(n,i),this._submittedReactive.set(!1)}onSubmit(n){return this.submitted=!0,Bpe(this.form,this.directives),this.ngSubmit.emit(n),this.form._events.next(new fP(this.control)),n?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(n=>{let i=n.control,o=this.form.get(n.path);i!==o&&(mpe(i||null,n),Xqe(o)&&(mP(o,n,this.callSetDisabledState),n.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){let i=this.form.get(n.path);Lpe(i,n),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){let i=this.form.get(n.path);i&&Zqe(i,n)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){eG(this.form,this),this._oldForm&&vP(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(i){return new(i||e)(ye(th,10),ye(V_,10),ye(Yx,8))};static \u0275dir=ke({type:e,features:[Tt,sn]})}return e})();var Hpe=new q("");var iKe={provide:Or,useExisting:Bi(()=>xP)},xP=(()=>{class e extends eKe{name=null;constructor(n,i,o){super(),this._parent=n,this._setValidators(i),this._setAsyncValidators(o)}_checkParentType(){$pe(this._parent)}static \u0275fac=function(i){return new(i||e)(ye(Or,13),ye(th,10),ye(V_,10))};static \u0275dir=ke({type:e,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},standalone:!1,features:[kt([iKe]),Tt]})}return e})(),oKe={provide:Or,useExisting:Bi(()=>SP)},SP=(()=>{class e extends Or{_parent;name=null;constructor(n,i,o){super(),this._parent=n,this._setValidators(i),this._setAsyncValidators(o)}ngOnInit(){$pe(this._parent),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective?.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return CP(this.name==null?this.name:this.name.toString(),this._parent)}static \u0275fac=function(i){return new(i||e)(ye(Or,13),ye(th,10),ye(V_,10))};static \u0275dir=ke({type:e,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},standalone:!1,features:[kt([oKe]),Tt]})}return e})();function $pe(e){return!(e instanceof xP)&&!(e instanceof Vpe)&&!(e instanceof SP)}var rKe={provide:kd,useExisting:Bi(()=>Jx)},Jx=(()=>{class e extends kd{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(n){}model;update=new V;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(n,i,o,r,s){super(),this._ngModelWarningConfig=s,this._parent=n,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=zpe(this,r)}ngOnChanges(n){this._added||this._setUpControl(),Npe(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return CP(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||e)(ye(Or,13),ye(th,10),ye(V_,10),ye(Sf,10),ye(Hpe,8))};static \u0275dir=ke({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[kt([rKe]),Tt,sn]})}return e})();var sKe={provide:Or,useExisting:Bi(()=>Df)},Df=(()=>{class e extends Vpe{form=null;ngSubmit=new V;get control(){return this.form}static \u0275fac=(()=>{let n;return function(o){return(n||(n=gn(e)))(o||e)}})();static \u0275dir=ke({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,o){i&1&&Q("submit",function(s){return o.onSubmit(s)})("reset",function(){return o.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[kt([sKe]),Tt]})}return e})(),aKe={provide:Sf,useExisting:Bi(()=>H_),multi:!0};function jpe(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function lKe(e){return e.split(":")[0]}var H_=(()=>{class e extends Zx{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=k(tr).injector;destroyRef=k(Eo);cdr=k(dn);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,ai({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let i=this._getOptionId(n),o=jpe(i,n);this.setProperty("value",o)}registerOnChange(n){this.onChange=i=>{this.value=this._getOptionValue(i),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),n))return i;return null}_getOptionValue(n){let i=lKe(n);return this._optionMap.has(i)?this._optionMap.get(i):n}static \u0275fac=(()=>{let n;return function(o){return(n||(n=gn(e)))(o||e)}})();static \u0275dir=ke({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,o){i&1&&Q("change",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[kt([aKe]),Tt]})}return e})(),EP=(()=>{class e{_element;_renderer;_select;id;constructor(n,i,o){this._element=n,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(jpe(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||e)(ye(Oe),ye(Pn),ye(H_,9))};static \u0275dir=ke({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})(),cKe={provide:Sf,useExisting:Bi(()=>Gpe),multi:!0};function ype(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function dKe(e){return e.split(":")[0]}var Gpe=(()=>{class e extends Zx{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let i;if(Array.isArray(n)){let o=n.map(r=>this._getOptionId(r));i=(r,s)=>{r._setSelected(o.indexOf(s.toString())>-1)}}else i=(o,r)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(n){this.onChange=i=>{let o=[],r=i.selectedOptions;if(r!==void 0){let s=r;for(let a=0;a<s.length;a++){let l=s[a],c=this._getOptionValue(l.value);o.push(c)}}else{let s=i.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let c=this._getOptionValue(l.value);o.push(c)}}}this.value=o,n(o)}}_registerOption(n){let i=(this._idCounter++).toString();return this._optionMap.set(i,n),i}_getOptionId(n){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,n))return i;return null}_getOptionValue(n){let i=dKe(n);return this._optionMap.has(i)?this._optionMap.get(i)._value:n}static \u0275fac=(()=>{let n;return function(o){return(n||(n=gn(e)))(o||e)}})();static \u0275dir=ke({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,o){i&1&&Q("change",function(s){return o.onChange(s.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[kt([cKe]),Tt]})}return e})(),DP=(()=>{class e{_element;_renderer;_select;id;_value;constructor(n,i,o){this._element=n,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(ype(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(ype(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||e)(ye(Oe),ye(Pn),ye(Gpe,9))};static \u0275dir=ke({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})();function Upe(e){return typeof e=="number"?e:parseFloat(e)}var Wpe=(()=>{class e{_validator=cP;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let i=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):cP,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e,features:[sn]})}return e})(),uKe={provide:th,useExisting:Bi(()=>nG),multi:!0},nG=(()=>{class e extends Wpe{max;inputName="max";normalizeInput=n=>Upe(n);createValidator=n=>xpe(n);static \u0275fac=(()=>{let n;return function(o){return(n||(n=gn(e)))(o||e)}})();static \u0275dir=ke({type:e,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,o){i&2&&pt("max",o._enabled?o.max:null)},inputs:{max:"max"},standalone:!1,features:[kt([uKe]),Tt]})}return e})(),hKe={provide:th,useExisting:Bi(()=>iG),multi:!0},iG=(()=>{class e extends Wpe{min;inputName="min";normalizeInput=n=>Upe(n);createValidator=n=>wpe(n);static \u0275fac=(()=>{let n;return function(o){return(n||(n=gn(e)))(o||e)}})();static \u0275dir=ke({type:e,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,o){i&2&&pt("min",o._enabled?o.min:null)},inputs:{min:"min"},standalone:!1,features:[kt([hKe]),Tt]})}return e})();var qpe=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({})}return e})();function bpe(e){return!!e&&(e.asyncValidators!==void 0||e.validators!==void 0||e.updateOn!==void 0)}var $_=(()=>{class e{useNonNullable=!1;get nonNullable(){let n=new e;return n.useNonNullable=!0,n}group(n,i=null){let o=this._reduceControls(n),r={};return bpe(i)?r=i:i!==null&&(r.validators=i.validator,r.asyncValidators=i.asyncValidator),new As(o,r)}record(n,i=null){let o=this._reduceControls(n);return new qj(o,i)}control(n,i,o){let r={};return this.useNonNullable?(bpe(i)?r=i:(r.validators=i,r.asyncValidators=o),new qx(n,x(g({},r),{nonNullable:!0}))):new qx(n,i,o)}array(n,i,o){let r=n.map(s=>this._createControl(s));return new Id(r,i,o)}_reduceControls(n){let i={};return Object.keys(n).forEach(o=>{i[o]=this._createControl(n[o])}),i}_createControl(n){if(n instanceof qx)return n;if(n instanceof z_)return n;if(Array.isArray(n)){let i=n[0],o=n.length>1?n[1]:null,r=n.length>2?n[2]:null;return this.control(i,o,r)}else return this.control(n)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var is=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:Yx,useValue:n.callSetDisabledState??bP}]}}static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({imports:[qpe]})}return e})(),j_=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:Hpe,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:Yx,useValue:n.callSetDisabledState??bP}]}}static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({imports:[qpe]})}return e})();function Rd(e){return e.buttons===0||e.detail===0}function Td(e){let t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var oG;function Kpe(){if(oG==null){let e=typeof document<"u"?document.head:null;oG=!!(e&&(e.createShadowRoot||e.attachShadow))}return oG}function If(e){if(Kpe()){let t=e.getRootNode?e.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function G_(){let e=typeof document<"u"&&document?document.activeElement:null;for(;e&&e.shadowRoot;){let t=e.shadowRoot.activeElement;if(t===e)break;e=t}return e}function Co(e){return e.composedPath?e.composedPath()[0]:e.target}var rG;try{rG=typeof Intl<"u"&&Intl.v8BreakIterator}catch{rG=!1}var tn=(()=>{class e{_platformId=k(Tc);isBrowser=this._platformId?Bc(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||rG)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Xx;function Zpe(){if(Xx==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Xx=!0}))}finally{Xx=Xx||!1}return Xx}function nh(e){return Zpe()?e:!!e.capture}function Ki(e,t=0){return Ype(e)?Number(e):arguments.length===2?t:0}function Ype(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}function _i(e){return e instanceof Oe?e.nativeElement:e}var Qpe=new q("cdk-input-modality-detector-options"),Jpe={ignoreKeys:[18,17,224,91,16]},Xpe=650,sG={passive:!0,capture:!0},efe=(()=>{class e{_platform=k(tn);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new kn(null);_options;_lastTouchMs=0;_onKeydown=n=>{this._options?.ignoreKeys?.some(i=>i===n.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Co(n))};_onMousedown=n=>{Date.now()-this._lastTouchMs<Xpe||(this._modality.next(Rd(n)?"keyboard":"mouse"),this._mostRecentTarget=Co(n))};_onTouchstart=n=>{if(Td(n)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Co(n)};constructor(){let n=k(me),i=k(Je),o=k(Qpe,{optional:!0});if(this._options=g(g({},Jpe),o),this.modalityDetected=this._modality.pipe(hb(1)),this.modalityChanged=this.modalityDetected.pipe(Om()),this._platform.isBrowser){let r=k(xi).createRenderer(null,null);this._listenerCleanups=n.runOutsideAngular(()=>[r.listen(i,"keydown",this._onKeydown,sG),r.listen(i,"mousedown",this._onMousedown,sG),r.listen(i,"touchstart",this._onTouchstart,sG)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(n=>n())}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),eS=(function(e){return e[e.IMMEDIATE=0]="IMMEDIATE",e[e.EVENTUAL=1]="EVENTUAL",e})(eS||{}),tfe=new q("cdk-focus-monitor-default-options"),kP=nh({passive:!0,capture:!0}),os=(()=>{class e{_ngZone=k(me);_platform=k(tn);_inputModalityDetector=k(efe);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=k(Je);_stopInputModalityDetector=new ie;constructor(){let n=k(tfe,{optional:!0});this._detectionMode=n?.detectionMode||eS.IMMEDIATE}_rootNodeFocusAndBlurListener=n=>{let i=Co(n);for(let o=i;o;o=o.parentElement)n.type==="focus"?this._onFocus(n,o):this._onBlur(n,o)};monitor(n,i=!1){let o=_i(n);if(!this._platform.isBrowser||o.nodeType!==1)return et();let r=If(o)||this._document,s=this._elementInfo.get(o);if(s)return i&&(s.checkChildren=!0),s.subject;let a={checkChildren:i,subject:new ie,rootNode:r};return this._elementInfo.set(o,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(n){let i=_i(n),o=this._elementInfo.get(i);o&&(o.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(o))}focusVia(n,i,o){let r=_i(n),s=this._document.activeElement;r===s?this._getClosestElementsInfo(r).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),typeof r.focus=="function"&&r.focus(o))}ngOnDestroy(){this._elementInfo.forEach((n,i)=>this.stopMonitoring(i))}_getWindow(){return this._document.defaultView||window}_getFocusOrigin(n){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(n)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:n&&this._isLastInteractionFromInputLabel(n)?"mouse":"program"}_shouldBeAttributedToTouch(n){return this._detectionMode===eS.EVENTUAL||!!n?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(n,i){n.classList.toggle("cdk-focused",!!i),n.classList.toggle("cdk-touch-focused",i==="touch"),n.classList.toggle("cdk-keyboard-focused",i==="keyboard"),n.classList.toggle("cdk-mouse-focused",i==="mouse"),n.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(n,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=n,this._originFromTouchInteraction=n==="touch"&&i,this._detectionMode===eS.IMMEDIATE){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?Xpe:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(n,i){let o=this._elementInfo.get(i),r=Co(n);!o||!o.checkChildren&&i!==r||this._originChanged(i,this._getFocusOrigin(r),o)}_onBlur(n,i){let o=this._elementInfo.get(i);!o||o.checkChildren&&n.relatedTarget instanceof Node&&i.contains(n.relatedTarget)||(this._setClasses(i),this._emitOrigin(o,null))}_emitOrigin(n,i){n.subject.observers.length&&this._ngZone.run(()=>n.subject.next(i))}_registerGlobalListeners(n){if(!this._platform.isBrowser)return;let i=n.rootNode,o=this._rootNodeFocusListenerCount.get(i)||0;o||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,kP),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,kP)}),this._rootNodeFocusListenerCount.set(i,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Vt(this._stopInputModalityDetector)).subscribe(r=>{this._setOrigin(r,!0)}))}_removeGlobalListeners(n){let i=n.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let o=this._rootNodeFocusListenerCount.get(i);o>1?this._rootNodeFocusListenerCount.set(i,o-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,kP),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,kP),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(n,i,o){this._setClasses(n,i),this._emitOrigin(o,i),this._lastFocusOrigin=i}_getClosestElementsInfo(n){let i=[];return this._elementInfo.forEach((o,r)=>{(r===n||o.checkChildren&&r.contains(n))&&i.push([r,o])}),i}_isLastInteractionFromInputLabel(n){let{_mostRecentTarget:i,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!i||i===n||n.nodeName!=="INPUT"&&n.nodeName!=="TEXTAREA"||n.disabled)return!1;let r=n.labels;if(r){for(let s=0;s<r.length;s++)if(r[s].contains(i))return!0}return!1}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var IP=new WeakMap,ni=(()=>{class e{_appRef;_injector=k(Ke);_environmentInjector=k(Qn);load(n){let i=this._appRef=this._appRef||this._injector.get(tr),o=IP.get(i);o||(o={loaders:new Set,refs:[]},IP.set(i,o),i.onDestroy(()=>{IP.get(i)?.refs.forEach(r=>r.destroy()),IP.delete(i)})),o.loaders.has(n)||(o.loaders.add(n),o.refs.push(LD(n,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var ih=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275cmp=pe({type:e,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(i,o){},styles:[`.cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}
`],encapsulation:2,changeDetection:0})}return e})();function oh(e){return Array.isArray(e)?e:[e]}var nfe=new Set,Mf,MP=(()=>{class e{_platform=k(tn);_nonce=k(tg,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):fKe}matchMedia(n){return(this._platform.WEBKIT||this._platform.BLINK)&&pKe(n,this._nonce),this._matchMedia(n)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function pKe(e,t){if(!nfe.has(e))try{Mf||(Mf=document.createElement("style"),t&&Mf.setAttribute("nonce",t),Mf.setAttribute("type","text/css"),document.head.appendChild(Mf)),Mf.sheet&&(Mf.sheet.insertRule(`@media ${e} {body{ }}`,0),nfe.add(e))}catch(n){console.error(n)}}function fKe(e){return{matches:e==="all"||e==="",media:e,addListener:()=>{},removeListener:()=>{}}}var aG=(()=>{class e{_mediaMatcher=k(MP);_zone=k(me);_queries=new Map;_destroySubject=new ie;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(n){return ife(oh(n)).some(o=>this._registerQuery(o).mql.matches)}observe(n){let o=ife(oh(n)).map(s=>this._registerQuery(s).observable),r=cb(o);return r=Hd(r.pipe(ri(1)),r.pipe(hb(1),$s(0))),r.pipe(tt(s=>{let a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(n){if(this._queries.has(n))return this._queries.get(n);let i=this._mediaMatcher.matchMedia(n),r={observable:new yt(s=>{let a=l=>this._zone.run(()=>s.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(Pi(i),tt(({matches:s})=>({query:n,matches:s})),Vt(this._destroySubject)),mql:i};return this._queries.set(n,r),r}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ife(e){return e.map(t=>t.split(",")).reduce((t,n)=>t.concat(n)).map(t=>t.trim())}function mKe(e){if(e.type==="characterData"&&e.target instanceof Comment)return!0;if(e.type==="childList"){for(let t=0;t<e.addedNodes.length;t++)if(!(e.addedNodes[t]instanceof Comment))return!1;for(let t=0;t<e.removedNodes.length;t++)if(!(e.removedNodes[t]instanceof Comment))return!1;return!0}return!1}var ofe=(()=>{class e{create(n){return typeof MutationObserver>"u"?null:new MutationObserver(n)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),rfe=(()=>{class e{_mutationObserverFactory=k(ofe);_observedElements=new Map;_ngZone=k(me);constructor(){}ngOnDestroy(){this._observedElements.forEach((n,i)=>this._cleanupObserver(i))}observe(n){let i=_i(n);return new yt(o=>{let s=this._observeElement(i).pipe(tt(a=>a.filter(l=>!mKe(l))),zt(a=>!!a.length)).subscribe(a=>{this._ngZone.run(()=>{o.next(a)})});return()=>{s.unsubscribe(),this._unobserveElement(i)}})}_observeElement(n){return this._ngZone.runOutsideAngular(()=>{if(this._observedElements.has(n))this._observedElements.get(n).count++;else{let i=new ie,o=this._mutationObserverFactory.create(r=>i.next(r));o&&o.observe(n,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(n,{observer:o,stream:i,count:1})}return this._observedElements.get(n).stream})}_unobserveElement(n){this._observedElements.has(n)&&(this._observedElements.get(n).count--,this._observedElements.get(n).count||this._cleanupObserver(n))}_cleanupObserver(n){if(this._observedElements.has(n)){let{observer:i,stream:o}=this._observedElements.get(n);i&&i.disconnect(),o.complete(),this._observedElements.delete(n)}}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),sfe=(()=>{class e{_contentObserver=k(rfe);_elementRef=k(Oe);event=new V;get disabled(){return this._disabled}set disabled(n){this._disabled=n,this._disabled?this._unsubscribe():this._subscribe()}_disabled=!1;get debounce(){return this._debounce}set debounce(n){this._debounce=Ki(n),this._subscribe()}_debounce;_currentSubscription=null;constructor(){}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();let n=this._contentObserver.observe(this._elementRef);this._currentSubscription=(this.debounce?n.pipe($s(this.debounce)):n).subscribe(this.event)}_unsubscribe(){this._currentSubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e,selectors:[["","cdkObserveContent",""]],inputs:{disabled:[2,"cdkObserveContentDisabled","disabled",$],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]})}return e})(),U_=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({providers:[ofe]})}return e})();var Rf=(()=>{class e{_platform=k(tn);constructor(){}isDisabled(n){return n.hasAttribute("disabled")}isVisible(n){return vKe(n)&&getComputedStyle(n).visibility==="visible"}isTabbable(n){if(!this._platform.isBrowser)return!1;let i=gKe(EKe(n));if(i&&(afe(i)===-1||!this.isVisible(i)))return!1;let o=n.nodeName.toLowerCase(),r=afe(n);return n.hasAttribute("contenteditable")?r!==-1:o==="iframe"||o==="object"||this._platform.WEBKIT&&this._platform.IOS&&!xKe(n)?!1:o==="audio"?n.hasAttribute("controls")?r!==-1:!1:o==="video"?r===-1?!1:r!==null?!0:this._platform.FIREFOX||n.hasAttribute("controls"):n.tabIndex>=0}isFocusable(n,i){return SKe(n)&&!this.isDisabled(n)&&(i?.ignoreVisibility||this.isVisible(n))}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function gKe(e){try{return e.frameElement}catch{return null}}function vKe(e){return!!(e.offsetWidth||e.offsetHeight||typeof e.getClientRects=="function"&&e.getClientRects().length)}function _Ke(e){let t=e.nodeName.toLowerCase();return t==="input"||t==="select"||t==="button"||t==="textarea"}function yKe(e){return CKe(e)&&e.type=="hidden"}function bKe(e){return wKe(e)&&e.hasAttribute("href")}function CKe(e){return e.nodeName.toLowerCase()=="input"}function wKe(e){return e.nodeName.toLowerCase()=="a"}function dfe(e){if(!e.hasAttribute("tabindex")||e.tabIndex===void 0)return!1;let t=e.getAttribute("tabindex");return!!(t&&!isNaN(parseInt(t,10)))}function afe(e){if(!dfe(e))return null;let t=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}function xKe(e){let t=e.nodeName.toLowerCase(),n=t==="input"&&e.type;return n==="text"||n==="password"||t==="select"||t==="textarea"}function SKe(e){return yKe(e)?!1:_Ke(e)||bKe(e)||e.hasAttribute("contenteditable")||dfe(e)}function EKe(e){return e.ownerDocument&&e.ownerDocument.defaultView||window}var RP=class{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_enabled=!0;constructor(t,n,i,o,r=!1,s){this._element=t,this._checker=n,this._ngZone=i,this._document=o,this._injector=s,r||this.attachAnchors()}destroy(){let t=this._startAnchor,n=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let n=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return t=="start"?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){let n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){let i=this._getFirstTabbableElement(n);return i?.focus(t),!!i}return n.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){let n=this._getRegionBoundary("start");return n&&n.focus(t),!!n}focusLastTabbableElement(t){let n=this._getRegionBoundary("end");return n&&n.focus(t),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let n=t.children;for(let i=0;i<n.length;i++){let o=n[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[i]):null;if(o)return o}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let n=t.children;for(let i=n.length-1;i>=0;i--){let o=n[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[i]):null;if(o)return o}return null}_createAnchor(){let t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,n){t?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._injector?ai(t,{injector:this._injector}):setTimeout(t)}},tS=(()=>{class e{_checker=k(Rf);_ngZone=k(me);_document=k(Je);_injector=k(Ke);constructor(){k(ni).load(ih)}create(n,i=!1){return new RP(n,this._checker,this._ngZone,this._document,i,this._injector)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var rh=(function(e){return e[e.NONE=0]="NONE",e[e.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",e[e.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",e})(rh||{}),lfe="cdk-high-contrast-black-on-white",cfe="cdk-high-contrast-white-on-black",lG="cdk-high-contrast-active",TP=(()=>{class e{_platform=k(tn);_hasCheckedHighContrastMode;_document=k(Je);_breakpointSubscription;constructor(){this._breakpointSubscription=k(aG).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return rh.NONE;let n=this._document.createElement("div");n.style.backgroundColor="rgb(1,2,3)",n.style.position="absolute",this._document.body.appendChild(n);let i=this._document.defaultView||window,o=i&&i.getComputedStyle?i.getComputedStyle(n):null,r=(o&&o.backgroundColor||"").replace(/ /g,"");switch(n.remove(),r){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return rh.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return rh.BLACK_ON_WHITE}return rh.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let n=this._document.body.classList;n.remove(lG,lfe,cfe),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===rh.BLACK_ON_WHITE?n.add(lG,lfe):i===rh.WHITE_ON_BLACK&&n.add(lG,cfe)}}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),W_=(()=>{class e{constructor(){k(TP)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({imports:[U_]})}return e})();var cG={},Zi=(()=>{class e{_appId=k(Jd);getId(n){return this._appId!=="ng"&&(n+=this._appId),cG.hasOwnProperty(n)||(cG[n]=0),`${n}${cG[n]++}`}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var DKe=200,PP=class{_letterKeyStream=new ie;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new ie;selectedItem=this._selectedItem;constructor(t,n){let i=typeof n?.debounceInterval=="number"?n.debounceInterval:DKe;n?.skipPredicate&&(this._skipPredicateFn=n.skipPredicate),this.setItems(t),this._setupKeyHandler(i)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(t){this._selectedItemIndex=t}setItems(t){this._items=t}handleKey(t){let n=t.keyCode;t.key&&t.key.length===1?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(n>=65&&n<=90||n>=48&&n<=57)&&this._letterKeyStream.next(String.fromCharCode(n))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(t){this._letterKeyStream.pipe(wi(n=>this._pressedLetters.push(n)),$s(t),zt(()=>this._pressedLetters.length>0),tt(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(n=>{for(let i=1;i<this._items.length+1;i++){let o=(this._selectedItemIndex+i)%this._items.length,r=this._items[o];if(!this._skipPredicateFn?.(r)&&r.getLabel?.().toLocaleUpperCase().trim().indexOf(n)===0){this._selectedItem.next(r);break}}this._pressedLetters=[]})}};function rs(e,...t){return t.length?t.some(n=>e[n]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}var AP=class{_items;_activeItemIndex=$t(-1);_activeItem=$t(null);_wrap=!1;_typeaheadSubscription=Mt.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=t=>t.disabled;constructor(t,n){this._items=t,t instanceof Ws?this._itemChangesSubscription=t.changes.subscribe(i=>this._itemsChanged(i.toArray())):Oc(t)&&(this._effectRef=wl(()=>this._itemsChanged(t()),{injector:n}))}tabOut=new ie;change=new ie;skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){this._typeaheadSubscription.unsubscribe();let n=this._getItemsArray();return this._typeahead=new PP(n,{debounceInterval:typeof t=="number"?t:void 0,skipPredicate:i=>this._skipPredicateFn(i)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(i=>{this.setActiveItem(i)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,n=10){return this._pageUpAndDown={enabled:t,delta:n},this}setActiveItem(t){let n=this._activeItem();this.updateActiveItem(t),this._activeItem()!==n&&this.change.next(this._activeItemIndex())}onKeydown(t){let n=t.keyCode,o=["altKey","ctrlKey","metaKey","shiftKey"].every(r=>!t[r]||this._allowedModifierKeys.indexOf(r)>-1);switch(n){case 9:this.tabOut.next();return;case 40:if(this._vertical&&o){this.setNextItemActive();break}else return;case 38:if(this._vertical&&o){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&o){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&o){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&o){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&o){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&o){let r=this._activeItemIndex()-this._pageUpAndDown.delta;this._setActiveItemByIndex(r>0?r:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&o){let r=this._activeItemIndex()+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(r<s?r:s-1,-1);break}else return;default:(o||rs(t,"shiftKey"))&&this._typeahead?.handleKey(t);return}this._typeahead?.reset(),t.preventDefault()}get activeItemIndex(){return this._activeItemIndex()}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex()<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex()<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){let n=this._getItemsArray(),i=typeof t=="number"?t:n.indexOf(t),o=n[i];this._activeItem.set(o??null),this._activeItemIndex.set(i),this._typeahead?.setCurrentSelectedItemIndex(i)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){let n=this._getItemsArray();for(let i=1;i<=n.length;i++){let o=(this._activeItemIndex()+t*i+n.length)%n.length,r=n[o];if(!this._skipPredicateFn(r)){this.setActiveItem(o);return}}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex()+t,t)}_setActiveItemByIndex(t,n){let i=this._getItemsArray();if(i[t]){for(;this._skipPredicateFn(i[t]);)if(t+=n,!i[t])return;this.setActiveItem(t)}}_getItemsArray(){return Oc(this._items)?this._items():this._items instanceof Ws?this._items.toArray():this._items}_itemsChanged(t){this._typeahead?.setItems(t);let n=this._activeItem();if(n){let i=t.indexOf(n);i>-1&&i!==this._activeItemIndex()&&(this._activeItemIndex.set(i),this._typeahead?.setCurrentSelectedItemIndex(i))}}};var q_=class extends AP{_origin="program";setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}};var ffe=" ";function kKe(e,t,n){let i=FP(e,t);n=n.trim(),!i.some(o=>o.trim()===n)&&(i.push(n),e.setAttribute(t,i.join(ffe)))}function IKe(e,t,n){let i=FP(e,t);n=n.trim();let o=i.filter(r=>r!==n);o.length?e.setAttribute(t,o.join(ffe)):e.removeAttribute(t)}function FP(e,t){return e.getAttribute(t)?.match(/\S+/g)??[]}var mfe="cdk-describedby-message",OP="cdk-describedby-host",pG=0,fG=(()=>{class e{_platform=k(tn);_document=k(Je);_messageRegistry=new Map;_messagesContainer=null;_id=`${pG++}`;constructor(){k(ni).load(ih),this._id=k(Jd)+"-"+pG++}describe(n,i,o){if(!this._canBeDescribed(n,i))return;let r=hG(i,o);typeof i!="string"?(pfe(i,this._id),this._messageRegistry.set(r,{messageElement:i,referenceCount:0})):this._messageRegistry.has(r)||this._createMessageElement(i,o),this._isElementDescribedByMessage(n,r)||this._addMessageReference(n,r)}removeDescription(n,i,o){if(!i||!this._isElementNode(n))return;let r=hG(i,o);if(this._isElementDescribedByMessage(n,r)&&this._removeMessageReference(n,r),typeof i=="string"){let s=this._messageRegistry.get(r);s&&s.referenceCount===0&&this._deleteMessageElement(r)}this._messagesContainer?.childNodes.length===0&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){let n=this._document.querySelectorAll(`[${OP}="${this._id}"]`);for(let i=0;i<n.length;i++)this._removeCdkDescribedByReferenceIds(n[i]),n[i].removeAttribute(OP);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(n,i){let o=this._document.createElement("div");pfe(o,this._id),o.textContent=n,i&&o.setAttribute("role",i),this._createMessagesContainer(),this._messagesContainer.appendChild(o),this._messageRegistry.set(hG(n,i),{messageElement:o,referenceCount:0})}_deleteMessageElement(n){this._messageRegistry.get(n)?.messageElement?.remove(),this._messageRegistry.delete(n)}_createMessagesContainer(){if(this._messagesContainer)return;let n="cdk-describedby-message-container",i=this._document.querySelectorAll(`.${n}[platform="server"]`);for(let r=0;r<i.length;r++)i[r].remove();let o=this._document.createElement("div");o.style.visibility="hidden",o.classList.add(n),o.classList.add("cdk-visually-hidden"),this._platform.isBrowser||o.setAttribute("platform","server"),this._document.body.appendChild(o),this._messagesContainer=o}_removeCdkDescribedByReferenceIds(n){let i=FP(n,"aria-describedby").filter(o=>o.indexOf(mfe)!=0);n.setAttribute("aria-describedby",i.join(" "))}_addMessageReference(n,i){let o=this._messageRegistry.get(i);kKe(n,"aria-describedby",o.messageElement.id),n.setAttribute(OP,this._id),o.referenceCount++}_removeMessageReference(n,i){let o=this._messageRegistry.get(i);o.referenceCount--,IKe(n,"aria-describedby",o.messageElement.id),n.removeAttribute(OP)}_isElementDescribedByMessage(n,i){let o=FP(n,"aria-describedby"),r=this._messageRegistry.get(i),s=r&&r.messageElement.id;return!!s&&o.indexOf(s)!=-1}_canBeDescribed(n,i){if(!this._isElementNode(n))return!1;if(i&&typeof i=="object")return!0;let o=i==null?"":`${i}`.trim(),r=n.getAttribute("aria-label");return o?!r||r.trim()!==o:!1}_isElementNode(n){return n.nodeType===this._document.ELEMENT_NODE}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function hG(e,t){return typeof e=="string"?`${t||""}/${e}`:e}function pfe(e,t){e.id||(e.id=`${mfe}-${t}-${pG++}`)}var nl=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275cmp=pe({type:e,selectors:[["structural-styles"]],decls:0,vars:0,template:function(i,o){},styles:[`.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
`],encapsulation:2,changeDetection:0})}return e})();var il=(function(e){return e[e.NORMAL=0]="NORMAL",e[e.NEGATED=1]="NEGATED",e[e.INVERTED=2]="INVERTED",e})(il||{}),LP,Tf;function NP(){if(Tf==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Tf=!1,Tf;if(document.documentElement?.style&&"scrollBehavior"in document.documentElement.style)Tf=!0;else{let e=Element.prototype.scrollTo;e?Tf=!/\{\s*\[native code\]\s*\}/.test(e.toString()):Tf=!1}}return Tf}function K_(){if(typeof document!="object"||!document)return il.NORMAL;if(LP==null){let e=document.createElement("div"),t=e.style;e.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";let n=document.createElement("div"),i=n.style;i.width="2px",i.height="1px",e.appendChild(n),document.body.appendChild(e),LP=il.NORMAL,e.scrollLeft===0&&(e.scrollLeft=1,LP=e.scrollLeft===0?il.NEGATED:il.INVERTED),e.remove()}return LP}function mG(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var Z_,gfe=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function gG(){if(Z_)return Z_;if(typeof document!="object"||!document)return Z_=new Set(gfe),Z_;let e=document.createElement("input");return Z_=new Set(gfe.filter(t=>(e.setAttribute("type",t),e.type===t))),Z_}function Yi(e){return e==null?"":typeof e=="string"?e:`${e}px`}function Fi(e){return e!=null&&`${e}`!="false"}var MKe=new q("MATERIAL_ANIMATIONS");var vfe=null;function nS(){return k(MKe,{optional:!0})?.animationsDisabled||k(jb,{optional:!0})==="NoopAnimations"?"di-disabled":(vfe??=k(MP).matchMedia("(prefers-reduced-motion)").matches,vfe?"reduced-motion":"enabled")}function fi(){return nS()!=="enabled"}var ha=(function(e){return e[e.FADING_IN=0]="FADING_IN",e[e.VISIBLE=1]="VISIBLE",e[e.FADING_OUT=2]="FADING_OUT",e[e.HIDDEN=3]="HIDDEN",e})(ha||{}),vG=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=ha.HIDDEN;constructor(t,n,i,o=!1){this._renderer=t,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=o}fadeOut(){this._renderer.fadeOutRipple(this)}},_fe=nh({passive:!0,capture:!0}),_G=class{_events=new Map;addHandler(t,n,i,o){let r=this._events.get(n);if(r){let s=r.get(i);s?s.add(o):r.set(i,new Set([o]))}else this._events.set(n,new Map([[i,new Set([o])]])),t.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,_fe)})}removeHandler(t,n,i){let o=this._events.get(t);if(!o)return;let r=o.get(n);r&&(r.delete(i),r.size===0&&o.delete(n),o.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,_fe)))}_delegateEventHandler=t=>{let n=Co(t);n&&this._events.get(t.type)?.forEach((i,o)=>{(o===n||o.contains(n))&&i.forEach(r=>r.handleEvent(t))})}},iS={enterDuration:225,exitDuration:150},RKe=800,yfe=nh({passive:!0,capture:!0}),bfe=["mousedown","touchstart"],Cfe=["mouseup","mouseleave","touchend","touchcancel"],TKe=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275cmp=pe({type:e,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(i,o){},styles:[`.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
`],encapsulation:2,changeDetection:0})}return e})(),Pf=class e{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new _G;constructor(t,n,i,o,r){this._target=t,this._ngZone=n,this._platform=o,o.isBrowser&&(this._containerElement=_i(i)),r&&r.get(ni).load(TKe)}fadeInRipple(t,n,i={}){let o=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),r=g(g({},iS),i.animation);i.centered&&(t=o.left+o.width/2,n=o.top+o.height/2);let s=i.radius||PKe(t,n,o),a=t-o.left,l=n-o.top,c=r.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-s}px`,u.style.top=`${l-s}px`,u.style.height=`${s*2}px`,u.style.width=`${s*2}px`,i.color!=null&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);let h=window.getComputedStyle(u),f=h.transitionProperty,m=h.transitionDuration,_=f==="none"||m==="0s"||m==="0s, 0s"||o.width===0&&o.height===0,y=new vG(this,u,i,_);u.style.transform="scale3d(1, 1, 1)",y.state=ha.FADING_IN,i.persistent||(this._mostRecentTransientRipple=y);let w=null;return!_&&(c||r.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let C=()=>{w&&(w.fallbackTimer=null),clearTimeout(I),this._finishRippleTransition(y)},S=()=>this._destroyRipple(y),I=setTimeout(S,c+100);u.addEventListener("transitionend",C),u.addEventListener("transitioncancel",S),w={onTransitionEnd:C,onTransitionCancel:S,fallbackTimer:I}}),this._activeRipples.set(y,w),(_||!c)&&this._finishRippleTransition(y),y}fadeOutRipple(t){if(t.state===ha.FADING_OUT||t.state===ha.HIDDEN)return;let n=t.element,i=g(g({},iS),t.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",t.state=ha.FADING_OUT,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let n=_i(t);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,bfe.forEach(i=>{e._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Cfe.forEach(n=>{this._triggerElement.addEventListener(n,this,yfe)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===ha.FADING_IN?this._startFadeOutTransition(t):t.state===ha.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let n=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=ha.VISIBLE,!i&&(!n||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let n=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=ha.HIDDEN,n!==null&&(t.element.removeEventListener("transitionend",n.onTransitionEnd),t.element.removeEventListener("transitioncancel",n.onTransitionCancel),n.fallbackTimer!==null&&clearTimeout(n.fallbackTimer)),t.element.remove()}_onMousedown(t){let n=Rd(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+RKe;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Td(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=t.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let n=t.state===ha.VISIBLE||t.config.terminateOnPointerUp&&t.state===ha.FADING_IN;!t.config.persistent&&n&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(bfe.forEach(n=>e._eventManager.removeHandler(n,t,this)),this._pointerUpEventsRegistered&&(Cfe.forEach(n=>t.removeEventListener(n,this,yfe)),this._pointerUpEventsRegistered=!1))}};function PKe(e,t,n){let i=Math.max(Math.abs(e-n.left),Math.abs(e-n.right)),o=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(i*i+o*o)}var Af=new q("mat-ripple-global-options"),BP=(()=>{class e{_elementRef=k(Oe);_animationsDisabled=fi();color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(n){n&&this.fadeOutAllNonPersistent(),this._disabled=n,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(n){this._trigger=n,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){let n=k(me),i=k(tn),o=k(Af,{optional:!0}),r=k(Ke);this._globalOptions=o||{},this._rippleRenderer=new Pf(this,n,this._elementRef,i,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:g(g(g({},this._globalOptions.animation),this._animationsDisabled?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(n,i=0,o){return typeof n=="number"?this._rippleRenderer.fadeInRipple(n,i,g(g({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,g(g({},this.rippleConfig),n))}static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,o){i&2&&be("mat-ripple-unbounded",o.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return e})();var oS=class{_attachedHost;attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},sh=class extends oS{component;viewContainerRef;injector;projectableNodes;constructor(t,n,i,o){super(),this.component=t,this.viewContainerRef=n,this.injector=i,this.projectableNodes=o}},ah=class extends oS{templateRef;viewContainerRef;context;injector;constructor(t,n,i,o){super(),this.templateRef=t,this.viewContainerRef=n,this.context=i,this.injector=o}get origin(){return this.templateRef.elementRef}attach(t,n=this.context){return this.context=n,super.attach(t)}detach(){return this.context=void 0,super.detach()}},yG=class extends oS{element;constructor(t){super(),this.element=t instanceof Oe?t.nativeElement:t}},Y_=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof sh)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof ah)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof yG)return this._attachedPortal=t,this.attachDomPortal(t)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},rS=class extends Y_{outletElement;_appRef;_defaultInjector;constructor(t,n,i){super(),this.outletElement=t,this._appRef=n,this._defaultInjector=i}attachComponentPortal(t){let n;if(t.viewContainerRef){let i=t.injector||t.viewContainerRef.injector,o=i.get(El,null,{optional:!0})||void 0;n=t.viewContainerRef.createComponent(t.component,{index:t.viewContainerRef.length,injector:i,ngModuleRef:o,projectableNodes:t.projectableNodes||void 0}),this.setDisposeFn(()=>n.destroy())}else{let i=this._appRef,o=t.injector||this._defaultInjector||Ke.NULL,r=o.get(Qn,i.injector);n=LD(t.component,{elementInjector:o,environmentInjector:r,projectableNodes:t.projectableNodes||void 0}),i.attachView(n.hostView),this.setDisposeFn(()=>{i.viewCount>0&&i.detachView(n.hostView),n.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(n)),this._attachedPortal=t,n}attachTemplatePortal(t){let n=t.viewContainerRef,i=n.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(o=>this.outletElement.appendChild(o)),i.detectChanges(),this.setDisposeFn(()=>{let o=n.indexOf(i);o!==-1&&n.remove(o)}),this._attachedPortal=t,i}attachDomPortal=t=>{let n=t.element;n.parentNode;let i=this.outletElement.ownerDocument.createComment("dom-portal");n.parentNode.insertBefore(i,n),this.outletElement.appendChild(n),this._attachedPortal=t,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(n,i)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var sS=(()=>{class e extends Y_{_moduleRef=k(El,{optional:!0});_document=k(Je);_viewContainerRef=k(li);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(n){this.hasAttached()&&!n&&!this._isInitialized||(this.hasAttached()&&super.detach(),n&&super.attach(n),this._attachedPortal=n||null)}attached=new V;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(n){n.setAttachedHost(this);let i=n.viewContainerRef!=null?n.viewContainerRef:this._viewContainerRef,o=i.createComponent(n.component,{index:i.length,injector:n.injector||i.injector,projectableNodes:n.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=n,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(n){n.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=n,this._attachedRef=i,this.attached.emit(i),i}attachDomPortal=n=>{let i=n.element;i.parentNode;let o=this._document.createComment("dom-portal");n.setAttachedHost(this),i.parentNode.insertBefore(o,i),this._getRootNode().appendChild(i),this._attachedPortal=n,super.setDisposeFn(()=>{o.parentNode&&o.parentNode.replaceChild(i,o)})};_getRootNode(){let n=this._viewContainerRef.element.nativeElement;return n.nodeType===n.ELEMENT_NODE?n:n.parentNode}static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Tt]})}return e})();var zP=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({})}return e})();var AKe=new q("cdk-dir-doc",{providedIn:"root",factory:OKe});function OKe(){return k(Je)}var FKe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function wfe(e){let t=e?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?FKe.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var wo=(()=>{class e{get value(){return this.valueSignal()}valueSignal=$t("ltr");change=new V;constructor(){let n=k(AKe,{optional:!0});if(n){let i=n.body?n.body.dir:null,o=n.documentElement?n.documentElement.dir:null;this.valueSignal.set(wfe(i||o||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var lh=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({})}return e})();var LKe=20,pa=(()=>{class e{_ngZone=k(me);_platform=k(tn);_renderer=k(xi).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new ie;_scrolledCount=0;scrollContainers=new Map;register(n){this.scrollContainers.has(n)||this.scrollContainers.set(n,n.elementScrolled().subscribe(()=>this._scrolled.next(n)))}deregister(n){let i=this.scrollContainers.get(n);i&&(i.unsubscribe(),this.scrollContainers.delete(n))}scrolled(n=LKe){return this._platform.isBrowser?new yt(i=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let o=n>0?this._scrolled.pipe(Tm(n)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):et()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((n,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(n,i){let o=this.getAncestorScrollContainers(n);return this.scrolled(i).pipe(zt(r=>!r||o.indexOf(r)>-1))}getAncestorScrollContainers(n){let i=[];return this.scrollContainers.forEach((o,r)=>{this._scrollableContainsElement(r,n)&&i.push(r)}),i}_scrollableContainsElement(n,i){let o=_i(i),r=n.getElementRef().nativeElement;do if(o==r)return!0;while(o=o.parentElement);return!1}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Of=(()=>{class e{elementRef=k(Oe);scrollDispatcher=k(pa);ngZone=k(me);dir=k(wo,{optional:!0});_scrollElement=this.elementRef.nativeElement;_destroyed=new ie;_renderer=k(Pn);_cleanupScroll;_elementScrolled=new ie;constructor(){}ngOnInit(){this._cleanupScroll=this.ngZone.runOutsideAngular(()=>this._renderer.listen(this._scrollElement,"scroll",n=>this._elementScrolled.next(n))),this.scrollDispatcher.register(this)}ngOnDestroy(){this._cleanupScroll?.(),this._elementScrolled.complete(),this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(n){let i=this.elementRef.nativeElement,o=this.dir&&this.dir.value=="rtl";n.left==null&&(n.left=o?n.end:n.start),n.right==null&&(n.right=o?n.start:n.end),n.bottom!=null&&(n.top=i.scrollHeight-i.clientHeight-n.bottom),o&&K_()!=il.NORMAL?(n.left!=null&&(n.right=i.scrollWidth-i.clientWidth-n.left),K_()==il.INVERTED?n.left=n.right:K_()==il.NEGATED&&(n.left=n.right?-n.right:n.right)):n.right!=null&&(n.left=i.scrollWidth-i.clientWidth-n.right),this._applyScrollToOptions(n)}_applyScrollToOptions(n){let i=this.elementRef.nativeElement;NP()?i.scrollTo(n):(n.top!=null&&(i.scrollTop=n.top),n.left!=null&&(i.scrollLeft=n.left))}measureScrollOffset(n){let i="left",o="right",r=this.elementRef.nativeElement;if(n=="top")return r.scrollTop;if(n=="bottom")return r.scrollHeight-r.clientHeight-r.scrollTop;let s=this.dir&&this.dir.value=="rtl";return n=="start"?n=s?o:i:n=="end"&&(n=s?i:o),s&&K_()==il.INVERTED?n==i?r.scrollWidth-r.clientWidth-r.scrollLeft:r.scrollLeft:s&&K_()==il.NEGATED?n==i?r.scrollLeft+r.scrollWidth-r.clientWidth:-r.scrollLeft:n==i?r.scrollLeft:r.scrollWidth-r.clientWidth-r.scrollLeft}static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return e})(),NKe=20,fa=(()=>{class e{_platform=k(tn);_listeners;_viewportSize;_change=new ie;_document=k(Je);constructor(){let n=k(me),i=k(xi).createRenderer(null,null);n.runOutsideAngular(()=>{if(this._platform.isBrowser){let o=r=>this._change.next(r);this._listeners=[i.listen("window","resize",o),i.listen("window","orientationchange",o)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(n=>n()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let n={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),n}getViewportRect(){let n=this.getViewportScrollPosition(),{width:i,height:o}=this.getViewportSize();return{top:n.top,left:n.left,bottom:n.top+o,right:n.left+i,height:o,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let n=this._document,i=this._getWindow(),o=n.documentElement,r=o.getBoundingClientRect(),s=-r.top||n.body.scrollTop||i.scrollY||o.scrollTop||0,a=-r.left||n.body.scrollLeft||i.scrollX||o.scrollLeft||0;return{top:s,left:a}}change(n=NKe){return n>0?this._change.pipe(Tm(n)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let n=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:n.innerWidth,height:n.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var ss=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({})}return e})(),bG=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({imports:[lh,ss,lh,ss]})}return e})();var xfe=NP();function J_(e){return new VP(e.get(fa),e.get(Je))}var VP=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(t,n){this._viewportRuler=t,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Yi(-this._previousScrollPosition.left),t.style.top=Yi(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,n=this._document.body,i=t.style,o=n.style,r=i.scrollBehavior||"",s=o.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),xfe&&(i.scrollBehavior=o.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),xfe&&(i.scrollBehavior=r,o.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.documentElement,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}};function Rfe(e,t){return new HP(e.get(pa),e.get(me),e.get(fa),t)}var HP=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(t,n,i,o){this._scrollDispatcher=t,this._ngZone=n,this._viewportRuler=i,this._config=o}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(zt(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var aS=class{enable(){}disable(){}attach(){}};function CG(e,t){return t.some(n=>{let i=e.bottom<n.top,o=e.top>n.bottom,r=e.right<n.left,s=e.left>n.right;return i||o||r||s})}function Sfe(e,t){return t.some(n=>{let i=e.top<n.top,o=e.bottom>n.bottom,r=e.left<n.left,s=e.right>n.right;return i||o||r||s})}function Os(e,t){return new $P(e.get(pa),e.get(fa),e.get(me),t)}var $P=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(t,n,i,o){this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=i,this._config=o}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:o}=this._viewportRuler.getViewportSize();CG(n,[{width:i,height:o,bottom:o,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Tfe=(()=>{class e{_injector=k(Ke);constructor(){}noop=()=>new aS;close=n=>Rfe(this._injector,n);block=()=>J_(this._injector);reposition=n=>Os(this._injector,n);static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),ch=class{positionStrategy;scrollStrategy=new aS;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(t){if(t){let n=Object.keys(t);for(let i of n)t[i]!==void 0&&(this[i]=t[i])}}};var jP=class{connectionPair;scrollableViewProperties;constructor(t,n){this.connectionPair=t,this.scrollableViewProperties=n}};var Pfe=(()=>{class e{_attachedOverlays=[];_document=k(Je);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(n){this.remove(n),this._attachedOverlays.push(n)}remove(n){let i=this._attachedOverlays.indexOf(n);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Afe=(()=>{class e extends Pfe{_ngZone=k(me);_renderer=k(xi).createRenderer(null,null);_cleanupKeydown;add(n){super.add(n),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=n=>{let i=this._attachedOverlays;for(let o=i.length-1;o>-1;o--)if(i[o]._keydownEvents.observers.length>0){this._ngZone.run(()=>i[o]._keydownEvents.next(n));break}};static \u0275fac=(()=>{let n;return function(o){return(n||(n=gn(e)))(o||e)}})();static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ofe=(()=>{class e extends Pfe{_platform=k(tn);_ngZone=k(me);_renderer=k(xi).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(n){if(super.add(n),!this._isAttached){let i=this._document.body,o={capture:!0},r=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[r.listen(i,"pointerdown",this._pointerDownListener,o),r.listen(i,"click",this._clickListener,o),r.listen(i,"auxclick",this._clickListener,o),r.listen(i,"contextmenu",this._clickListener,o)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(n=>n()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=n=>{this._pointerDownEventTarget=Co(n)};_clickListener=n=>{let i=Co(n),o=n.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:i;this._pointerDownEventTarget=null;let r=this._attachedOverlays.slice();for(let s=r.length-1;s>-1;s--){let a=r[s];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(Efe(a.overlayElement,i)||Efe(a.overlayElement,o))break;let l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(n)):l.next(n)}};static \u0275fac=(()=>{let n;return function(o){return(n||(n=gn(e)))(o||e)}})();static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Efe(e,t){let n=typeof ShadowRoot<"u"&&ShadowRoot,i=t;for(;i;){if(i===e)return!0;i=n&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var Ffe=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275cmp=pe({type:e,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(i,o){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return e})(),WP=(()=>{class e{_platform=k(tn);_containerElement;_document=k(Je);_styleLoader=k(ni);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let n="cdk-overlay-container";if(this._platform.isBrowser||mG()){let o=this._document.querySelectorAll(`.${n}[platform="server"], .${n}[platform="test"]`);for(let r=0;r<o.length;r++)o[r].remove()}let i=this._document.createElement("div");i.classList.add(n),mG()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}_loadStyles(){this._styleLoader.load(Ffe)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),wG=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(t,n,i,o){this._renderer=n,this._ngZone=i,this.element=t.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=n.listen(this.element,"click",o)}detach(){this._ngZone.runOutsideAngular(()=>{let t=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(t,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),t.style.pointerEvents="none",t.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},Q_=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new ie;_attachments=new ie;_detachments=new ie;_positionStrategy;_scrollStrategy;_locationChanges=Mt.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new ie;_outsidePointerEvents=new ie;_afterNextRenderRef;constructor(t,n,i,o,r,s,a,l,c,u=!1,h,f){this._portalOutlet=t,this._host=n,this._pane=i,this._config=o,this._ngZone=r,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._injector=h,this._renderer=f,o.scrollStrategy&&(this._scrollStrategy=o.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=o.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=ai(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,t&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=g(g({},this._config),t),this._updateElementSize()}setDirection(t){this._config=x(g({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=Yi(this._config.width),t.height=Yi(this._config.height),t.minWidth=Yi(this._config.minWidth),t.minHeight=Yi(this._config.minHeight),t.maxWidth=Yi(this._config.maxWidth),t.maxHeight=Yi(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new wG(this._document,this._renderer,this._ngZone,n=>{this._backdropClick.next(n)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(t))}):this._backdropRef.element.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(t,n,i){let o=oh(n||[]).filter(r=>!!r);o.length&&(i?t.classList.add(...o):t.classList.remove(...o))}_detachContentWhenEmpty(){let t=!1;try{this._detachContentAfterRenderRef=ai(()=>{t=!0,this._detachContent()},{injector:this._injector})}catch(n){if(t)throw n;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let t=this._scrollStrategy;t?.disable(),t?.detach?.()}},Dfe="cdk-overlay-connected-position-bounding-box",BKe=/([A-Za-z%]+)$/;function X_(e,t){return new GP(t,e.get(fa),e.get(Je),e.get(tn),e.get(WP))}var GP=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new ie;_resizeSubscription=Mt.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(t,n,i,o,r){this._viewportRuler=n,this._document=i,this._platform=o,this._overlayContainer=r,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(Dfe),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,n=this._overlayRect,i=this._viewportRect,o=this._containerRect,r=[],s;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,o,a),c=this._getOverlayPoint(l,n,a),u=this._getOverlayFit(c,n,i,a);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(u,c,i)){r.push({position:a,origin:l,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!s||s.overlayFit.visibleArea<u.visibleArea)&&(s={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:n})}if(r.length){let a=null,l=-1;for(let c of r){let u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ff(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Dfe),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,n)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,n,i){let o;if(i.originX=="center")o=t.left+t.width/2;else{let s=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;o=i.originX=="start"?s:a}n.left<0&&(o-=n.left);let r;return i.originY=="center"?r=t.top+t.height/2:r=i.originY=="top"?t.top:t.bottom,n.top<0&&(r-=n.top),{x:o,y:r}}_getOverlayPoint(t,n,i){let o;i.overlayX=="center"?o=-n.width/2:i.overlayX==="start"?o=this._isRtl()?-n.width:0:o=this._isRtl()?0:-n.width;let r;return i.overlayY=="center"?r=-n.height/2:r=i.overlayY=="top"?0:-n.height,{x:t.x+o,y:t.y+r}}_getOverlayFit(t,n,i,o){let r=Ife(n),{x:s,y:a}=t,l=this._getOffset(o,"x"),c=this._getOffset(o,"y");l&&(s+=l),c&&(a+=c);let u=0-s,h=s+r.width-i.width,f=0-a,m=a+r.height-i.height,_=this._subtractOverflows(r.width,u,h),y=this._subtractOverflows(r.height,f,m),w=_*y;return{visibleArea:w,isCompletelyWithinViewport:r.width*r.height===w,fitsInViewportVertically:y===r.height,fitsInViewportHorizontally:_==r.width}}_canFitWithFlexibleDimensions(t,n,i){if(this._hasFlexibleDimensions){let o=i.bottom-n.y,r=i.right-n.x,s=kfe(this._overlayRef.getConfig().minHeight),a=kfe(this._overlayRef.getConfig().minWidth),l=t.fitsInViewportVertically||s!=null&&s<=o,c=t.fitsInViewportHorizontally||a!=null&&a<=r;return l&&c}return!1}_pushOverlayOnScreen(t,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let o=Ife(n),r=this._viewportRect,s=Math.max(t.x+o.width-r.width,0),a=Math.max(t.y+o.height-r.height,0),l=Math.max(r.top-i.top-t.y,0),c=Math.max(r.left-i.left-t.x,0),u=0,h=0;return o.width<=r.width?u=c||-s:u=t.x<this._viewportMargin?r.left-i.left-t.x:0,o.height<=r.height?h=l||-a:h=t.y<this._viewportMargin?r.top-i.top-t.y:0,this._previousPushAmount={x:u,y:h},{x:t.x+u,y:t.y+h}}_applyPosition(t,n){if(this._setTransformOrigin(t),this._setOverlayElementStyles(n,t),this._setBoundingBoxStyles(n,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!zKe(this._lastScrollVisibility,i)){let o=new jP(t,i);this._positionChanges.next(o)}this._lastScrollVisibility=i}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,o=t.overlayY;t.overlayX==="center"?i="center":this._isRtl()?i=t.overlayX==="start"?"right":"left":i=t.overlayX==="start"?"left":"right";for(let r=0;r<n.length;r++)n[r].style.transformOrigin=`${i} ${o}`}_calculateBoundingBoxRect(t,n){let i=this._viewportRect,o=this._isRtl(),r,s,a;if(n.overlayY==="top")s=t.y,r=i.height-s+this._viewportMargin;else if(n.overlayY==="bottom")a=i.height-t.y+this._viewportMargin*2,r=i.height-a+this._viewportMargin;else{let m=Math.min(i.bottom-t.y+i.top,t.y),_=this._lastBoundingBoxSize.height;r=m*2,s=t.y-m,r>_&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-_/2)}let l=n.overlayX==="start"&&!o||n.overlayX==="end"&&o,c=n.overlayX==="end"&&!o||n.overlayX==="start"&&o,u,h,f;if(c)f=i.width-t.x+this._viewportMargin*2,u=t.x-this._viewportMargin;else if(l)h=t.x,u=i.right-t.x;else{let m=Math.min(i.right-t.x+i.left,t.x),_=this._lastBoundingBoxSize.width;u=m*2,h=t.x-m,u>_&&!this._isInitialRender&&!this._growAfterOpen&&(h=t.x-_/2)}return{top:s,left:h,bottom:a,right:f,width:u,height:r}}_setBoundingBoxStyles(t,n){let i=this._calculateBoundingBoxRect(t,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let o={};if(this._hasExactPosition())o.top=o.left="0",o.bottom=o.right=o.maxHeight=o.maxWidth="",o.width=o.height="100%";else{let r=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;o.height=Yi(i.height),o.top=Yi(i.top),o.bottom=Yi(i.bottom),o.width=Yi(i.width),o.left=Yi(i.left),o.right=Yi(i.right),n.overlayX==="center"?o.alignItems="center":o.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?o.justifyContent="center":o.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",r&&(o.maxHeight=Yi(r)),s&&(o.maxWidth=Yi(s))}this._lastBoundingBoxSize=i,Ff(this._boundingBox.style,o)}_resetBoundingBoxStyles(){Ff(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ff(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,n){let i={},o=this._hasExactPosition(),r=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(o){let u=this._viewportRuler.getViewportScrollPosition();Ff(i,this._getExactOverlayY(n,t,u)),Ff(i,this._getExactOverlayX(n,t,u))}else i.position="static";let a="",l=this._getOffset(n,"x"),c=this._getOffset(n,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),s.maxHeight&&(o?i.maxHeight=Yi(s.maxHeight):r&&(i.maxHeight="")),s.maxWidth&&(o?i.maxWidth=Yi(s.maxWidth):r&&(i.maxWidth="")),Ff(this._pane.style,i)}_getExactOverlayY(t,n,i){let o={top:"",bottom:""},r=this._getOverlayPoint(n,this._overlayRect,t);if(this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,i)),t.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;o.bottom=`${s-(r.y+this._overlayRect.height)}px`}else o.top=Yi(r.y);return o}_getExactOverlayX(t,n,i){let o={left:"",right:""},r=this._getOverlayPoint(n,this._overlayRect,t);this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,i));let s;if(this._isRtl()?s=t.overlayX==="end"?"left":"right":s=t.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;o.right=`${a-(r.x+this._overlayRect.width)}px`}else o.left=Yi(r.x);return o}_getScrollVisibility(){let t=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(o=>o.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Sfe(t,i),isOriginOutsideView:CG(t,i),isOverlayClipped:Sfe(n,i),isOverlayOutsideView:CG(n,i)}}_subtractOverflows(t,...n){return n.reduce((i,o)=>i-Math.max(o,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:t-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,n){return n==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&oh(t).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof Oe)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let n=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+n,height:i,width:n}}};function Ff(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function kfe(e){if(typeof e!="number"&&e!=null){let[t,n]=e.split(BKe);return!n||n==="px"?parseFloat(t):null}return e||null}function Ife(e){return{top:Math.floor(e.top),right:Math.floor(e.right),bottom:Math.floor(e.bottom),left:Math.floor(e.left),width:Math.floor(e.width),height:Math.floor(e.height)}}function zKe(e,t){return e===t?!0:e.isOriginClipped===t.isOriginClipped&&e.isOriginOutsideView===t.isOriginOutsideView&&e.isOverlayClipped===t.isOverlayClipped&&e.isOverlayOutsideView===t.isOverlayOutsideView}var Mfe="cdk-global-overlay-wrapper";function ey(e){return new UP}var UP=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(t){let n=t.getConfig();this._overlayRef=t,this._width&&!n.width&&t.updateSize({width:this._width}),this._height&&!n.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(Mfe),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:o,height:r,maxWidth:s,maxHeight:a}=i,l=(o==="100%"||o==="100vw")&&(!s||s==="100%"||s==="100vw"),c=(r==="100%"||r==="100vh")&&(!a||a==="100%"||a==="100vh"),u=this._xPosition,h=this._xOffset,f=this._overlayRef.getConfig().direction==="rtl",m="",_="",y="";l?y="flex-start":u==="center"?(y="center",f?_=h:m=h):f?u==="left"||u==="end"?(y="flex-end",m=h):(u==="right"||u==="start")&&(y="flex-start",_=h):u==="left"||u==="start"?(y="flex-start",m=h):(u==="right"||u==="end")&&(y="flex-end",_=h),t.position=this._cssPosition,t.marginLeft=l?"0":m,t.marginTop=c?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":_,n.justifyContent=y,n.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(Mfe),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},Lfe=(()=>{class e{_injector=k(Ke);constructor(){}global(){return ey()}flexibleConnectedTo(n){return X_(this._injector,n)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function dh(e,t){e.get(ni).load(Ffe);let n=e.get(WP),i=e.get(Je),o=e.get(Zi),r=e.get(tr),s=e.get(wo),a=i.createElement("div"),l=i.createElement("div");l.id=o.getId("cdk-overlay-"),l.classList.add("cdk-overlay-pane"),a.appendChild(l),n.getContainerElement().appendChild(a);let c=new rS(l,r,e),u=new ch(t),h=e.get(Pn,null,{optional:!0})||e.get(xi).createRenderer(null,null);return u.direction=u.direction||s.value,new Q_(c,a,l,u,e.get(me),e.get(Afe),i,e.get(nu),e.get(Ofe),t?.disableAnimations??e.get(jb,null,{optional:!0})==="NoopAnimations",e.get(Qn),h)}var Nfe=(()=>{class e{scrollStrategies=k(Tfe);_positionBuilder=k(Lfe);_injector=k(Ke);constructor(){}create(n){return dh(this._injector,n)}position(){return this._positionBuilder}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var VKe=new q("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let e=k(Ke);return()=>Os(e)}});function HKe(e){let t=k(Ke);return()=>Os(t)}var $Ke={provide:VKe,useFactory:HKe},Pd=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({providers:[Nfe,$Ke],imports:[lh,zP,bG,bG]})}return e})();var ft=(()=>{class e{constructor(){k(TP)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({imports:[lh,lh]})}return e})();var cc=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({imports:[ft,ft]})}return e})();var UKe=["mat-menu-item",""],WKe=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],qKe=["mat-icon, [matMenuItemIcon]","*"];function KKe(e,t){e&1&&(bl(),M(0,"svg",2),Ae(1,"polygon",3),R())}var ZKe=["*"];function YKe(e,t){if(e&1){let n=Ge();Ei(0,"div",0),eu("click",function(){J(n);let o=A();return X(o.closed.emit("click"))})("animationstart",function(o){J(n);let r=A();return X(r._onAnimationStart(o.animationName))})("animationend",function(o){J(n);let r=A();return X(r._onAnimationDone(o.animationName))})("animationcancel",function(o){J(n);let r=A();return X(r._onAnimationDone(o.animationName))}),Ei(1,"div",1),st(2),no()()}if(e&2){let n=A();ki(n._classList),be("mat-menu-panel-animations-disabled",n._animationsDisabled)("mat-menu-panel-exit-animation",n._panelAnimationState==="void")("mat-menu-panel-animating",n._isAnimating()),nr("id",n.panelId),pt("aria-label",n.ariaLabel||null)("aria-labelledby",n.ariaLabelledby||null)("aria-describedby",n.ariaDescribedby||null)}}var SG=new q("MAT_MENU_PANEL"),lS=(()=>{class e{_elementRef=k(Oe);_document=k(Je);_focusMonitor=k(os);_parentMenu=k(SG,{optional:!0});_changeDetectorRef=k(dn);role="menuitem";disabled=!1;disableRipple=!1;_hovered=new ie;_focused=new ie;_highlighted=!1;_triggersSubmenu=!1;constructor(){k(ni).load(nl),this._parentMenu?.addItem?.(this)}focus(n,i){this._focusMonitor&&n?this._focusMonitor.focusVia(this._getHostElement(),n,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(n){this.disabled&&(n.preventDefault(),n.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){let n=this._elementRef.nativeElement.cloneNode(!0),i=n.querySelectorAll("mat-icon, .material-icons");for(let o=0;o<i.length;o++)i[o].remove();return n.textContent?.trim()||""}_setHighlighted(n){this._highlighted=n,this._changeDetectorRef.markForCheck()}_setTriggersSubmenu(n){this._triggersSubmenu=n,this._changeDetectorRef.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=pe({type:e,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-focus-indicator"],hostVars:8,hostBindings:function(i,o){i&1&&Q("click",function(s){return o._checkDisabled(s)})("mouseenter",function(){return o._handleMouseEnter()}),i&2&&(pt("role",o.role)("tabindex",o._getTabIndex())("aria-disabled",o.disabled)("disabled",o.disabled||null),be("mat-mdc-menu-item-highlighted",o._highlighted)("mat-mdc-menu-item-submenu-trigger",o._triggersSubmenu))},inputs:{role:"role",disabled:[2,"disabled","disabled",$],disableRipple:[2,"disableRipple","disableRipple",$]},exportAs:["matMenuItem"],attrs:UKe,ngContentSelectors:qKe,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(i,o){i&1&&(yn(WKe),st(0),M(1,"span",0),st(2,1),R(),Ae(3,"div",1),K(4,KKe,2,0,":svg:svg",2)),i&2&&(P(3),le("matRippleDisabled",o.disableRipple||o.disabled)("matRippleTrigger",o._getHostElement()),P(),Z(o._triggersSubmenu?4:-1))},dependencies:[BP],encapsulation:2,changeDetection:0})}return e})();var QKe=new q("MatMenuContent");var JKe=new q("mat-menu-default-options",{providedIn:"root",factory:XKe});function XKe(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}var xG="_mat-menu-enter",qP="_mat-menu-exit",ny=(()=>{class e{_elementRef=k(Oe);_changeDetectorRef=k(dn);_injector=k(Ke);_keyManager;_xPosition;_yPosition;_firstItemFocusRef;_exitFallbackTimeout;_animationsDisabled=fi();_allItems;_directDescendantItems=new Ws;_classList={};_panelAnimationState="void";_animationDone=new ie;_isAnimating=$t(!1);parentMenu;direction;overlayPanelClass;backdropClass;ariaLabel;ariaLabelledby;ariaDescribedby;get xPosition(){return this._xPosition}set xPosition(n){this._xPosition=n,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(n){this._yPosition=n,this.setPositionClasses()}templateRef;items;lazyContent;overlapTrigger;hasBackdrop;set panelClass(n){let i=this._previousPanelClass,o=g({},this._classList);i&&i.length&&i.split(" ").forEach(r=>{o[r]=!1}),this._previousPanelClass=n,n&&n.length&&(n.split(" ").forEach(r=>{o[r]=!0}),this._elementRef.nativeElement.className=""),this._classList=o}_previousPanelClass;get classList(){return this.panelClass}set classList(n){this.panelClass=n}closed=new V;close=this.closed;panelId=k(Zi).getId("mat-menu-panel-");constructor(){let n=k(JKe);this.overlayPanelClass=n.overlayPanelClass||"",this._xPosition=n.xPosition,this._yPosition=n.yPosition,this.backdropClass=n.backdropClass,this.overlapTrigger=n.overlapTrigger,this.hasBackdrop=n.hasBackdrop}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new q_(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Pi(this._directDescendantItems),eo(n=>Ni(...n.map(i=>i._focused)))).subscribe(n=>this._keyManager.updateActiveItem(n)),this._directDescendantItems.changes.subscribe(n=>{let i=this._keyManager;if(this._panelAnimationState==="enter"&&i.activeItem?._hasFocus()){let o=n.toArray(),r=Math.max(0,Math.min(o.length-1,i.activeItemIndex||0));o[r]&&!o[r].disabled?i.setActiveItem(r):i.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusRef?.destroy(),clearTimeout(this._exitFallbackTimeout)}_hovered(){return this._directDescendantItems.changes.pipe(Pi(this._directDescendantItems),eo(i=>Ni(...i.map(o=>o._hovered))))}addItem(n){}removeItem(n){}_handleKeydown(n){let i=n.keyCode,o=this._keyManager;switch(i){case 27:rs(n)||(n.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&this.direction==="ltr"&&this.closed.emit("keydown");break;case 39:this.parentMenu&&this.direction==="rtl"&&this.closed.emit("keydown");break;default:(i===38||i===40)&&o.setFocusOrigin("keyboard"),o.onKeydown(n);return}}focusFirstItem(n="program"){this._firstItemFocusRef?.destroy(),this._firstItemFocusRef=ai(()=>{let i=this._resolvePanel();if(!i||!i.contains(document.activeElement)){let o=this._keyManager;o.setFocusOrigin(n).setFirstItemActive(),!o.activeItem&&i&&i.focus()}},{injector:this._injector})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(n){}setPositionClasses(n=this.xPosition,i=this.yPosition){this._classList=x(g({},this._classList),{"mat-menu-before":n==="before","mat-menu-after":n==="after","mat-menu-above":i==="above","mat-menu-below":i==="below"}),this._changeDetectorRef.markForCheck()}_onAnimationDone(n){let i=n===qP;(i||n===xG)&&(i&&(clearTimeout(this._exitFallbackTimeout),this._exitFallbackTimeout=void 0),this._animationDone.next(i?"void":"enter"),this._isAnimating.set(!1))}_onAnimationStart(n){(n===xG||n===qP)&&this._isAnimating.set(!0)}_setIsOpen(n){if(this._panelAnimationState=n?"enter":"void",n){if(this._keyManager.activeItemIndex===0){let i=this._resolvePanel();i&&(i.scrollTop=0)}}else this._animationsDisabled||(this._exitFallbackTimeout=setTimeout(()=>this._onAnimationDone(qP),200));this._animationsDisabled&&setTimeout(()=>{this._onAnimationDone(n?xG:qP)}),this._changeDetectorRef.markForCheck()}_updateDirectDescendants(){this._allItems.changes.pipe(Pi(this._allItems)).subscribe(n=>{this._directDescendantItems.reset(n.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}_resolvePanel(){let n=null;return this._directDescendantItems.length&&(n=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),n}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=pe({type:e,selectors:[["mat-menu"]],contentQueries:function(i,o,r){if(i&1&&No(r,QKe,5)(r,lS,5)(r,lS,4),i&2){let s;Ye(s=Qe())&&(o.lazyContent=s.first),Ye(s=Qe())&&(o._allItems=s),Ye(s=Qe())&&(o.items=s)}},viewQuery:function(i,o){if(i&1&&bn(xr,5),i&2){let r;Ye(r=Qe())&&(o.templateRef=r.first)}},hostVars:3,hostBindings:function(i,o){i&2&&pt("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:[2,"overlapTrigger","overlapTrigger",$],hasBackdrop:[2,"hasBackdrop","hasBackdrop",n=>n==null?null:$(n)],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"},exportAs:["matMenu"],features:[kt([{provide:SG,useExisting:e}])],ngContentSelectors:ZKe,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel",3,"click","animationstart","animationend","animationcancel","id"],[1,"mat-mdc-menu-content"]],template:function(i,o){i&1&&(yn(),Xb(0,YKe,3,12,"ng-template"))},styles:[`mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;outline:0}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-menu-item-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-menu-item-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-menu-item-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-menu-item-label-text-weight, var(--mat-sys-label-large-weight))}@keyframes _mat-menu-enter{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:none}}@keyframes _mat-menu-exit{from{opacity:1}to{opacity:0}}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;box-sizing:border-box;outline:0;animation:_mat-menu-enter 120ms cubic-bezier(0, 0, 0.2, 1);border-radius:var(--mat-menu-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-menu-container-color, var(--mat-sys-surface-container));box-shadow:var(--mat-menu-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));will-change:transform,opacity}.mat-mdc-menu-panel.mat-menu-panel-exit-animation{animation:_mat-menu-exit 100ms 25ms linear forwards}.mat-mdc-menu-panel.mat-menu-panel-animations-disabled{animation:none}.mat-mdc-menu-panel.mat-menu-panel-animating{pointer-events:none}.mat-mdc-menu-panel.mat-menu-panel-animating:has(.mat-mdc-menu-content:empty){display:none}@media(forced-colors: active){.mat-mdc-menu-panel{outline:solid 1px}}.mat-mdc-menu-panel .mat-divider{color:var(--mat-menu-divider-color, var(--mat-sys-surface-variant));margin-bottom:var(--mat-menu-divider-bottom-spacing, 8px);margin-top:var(--mat-menu-divider-top-spacing, 8px)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px;padding-left:var(--mat-menu-item-leading-spacing, 12px);padding-right:var(--mat-menu-item-trailing-spacing, 12px);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-menu-item::-moz-focus-inner{border:0}[dir=rtl] .mat-mdc-menu-item{padding-left:var(--mat-menu-item-trailing-spacing, 12px);padding-right:var(--mat-menu-item-leading-spacing, 12px)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-trailing-spacing, 12px)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-trailing-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-leading-spacing, 12px)}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item:focus{outline:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing, 12px);height:var(--mat-menu-item-icon-size, 24px);width:var(--mat-menu-item-icon-size, 24px)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing, 12px)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}@media(forced-colors: active){.mat-mdc-menu-item{margin-top:1px}}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size, 24px);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing, 12px)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing, 12px);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1);transform-origin:center}@media(forced-colors: active){.mat-mdc-menu-submenu-icon{fill:CanvasText}}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}
`],encapsulation:2,changeDetection:0})}return e})(),Bfe=new q("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let e=k(Ke);return()=>Os(e)}});function eZe(e){let t=k(Ke);return()=>Os(t)}var tZe={provide:Bfe,deps:[],useFactory:eZe};var ty=new WeakMap,nZe=(()=>{class e{_canHaveBackdrop;_element=k(Oe);_viewContainerRef=k(li);_menuItemInstance=k(lS,{optional:!0,self:!0});_dir=k(wo,{optional:!0});_focusMonitor=k(os);_ngZone=k(me);_injector=k(Ke);_scrollStrategy=k(Bfe);_changeDetectorRef=k(dn);_animationsDisabled=fi();_portal;_overlayRef=null;_menuOpen=!1;_closingActionsSubscription=Mt.EMPTY;_menuCloseSubscription=Mt.EMPTY;_pendingRemoval;_parentMaterialMenu;_parentInnerPadding;_openedBy=void 0;get _menu(){return this._menuInternal}set _menu(n){n!==this._menuInternal&&(this._menuInternal=n,this._menuCloseSubscription.unsubscribe(),n&&(this._parentMaterialMenu,this._menuCloseSubscription=n.close.subscribe(i=>{this._destroyMenu(i),(i==="click"||i==="tab")&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})),this._menuItemInstance?._setTriggersSubmenu(this._triggersSubmenu()))}_menuInternal;constructor(n){this._canHaveBackdrop=n;let i=k(SG,{optional:!0});this._parentMaterialMenu=i instanceof ny?i:void 0}ngOnDestroy(){this._menu&&this._ownsMenu(this._menu)&&ty.delete(this._menu),this._pendingRemoval?.unsubscribe(),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null)}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this._menu)}_closeMenu(){this._menu?.close.emit()}_openMenu(n){let i=this._menu;if(this._menuOpen||!i)return;this._pendingRemoval?.unsubscribe();let o=ty.get(i);ty.set(i,this),o&&o!==this&&o._closeMenu();let r=this._createOverlay(i),s=r.getConfig(),a=s.positionStrategy;this._setPosition(i,a),this._canHaveBackdrop?s.hasBackdrop=i.hasBackdrop==null?!this._triggersSubmenu():i.hasBackdrop:s.hasBackdrop=!1,r.hasAttached()||(r.attach(this._getPortal(i)),i.lazyContent?.attach(this.menuData)),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this._closeMenu()),i.parentMenu=this._triggersSubmenu()?this._parentMaterialMenu:void 0,i.direction=this.dir,n&&i.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0),i instanceof ny&&(i._setIsOpen(!0),i._directDescendantItems.changes.pipe(Vt(i.close)).subscribe(()=>{a.withLockedPosition(!1).reapplyLastPosition(),a.withLockedPosition(!0)}))}focus(n,i){this._focusMonitor&&n?this._focusMonitor.focusVia(this._element,n,i):this._element.nativeElement.focus(i)}_destroyMenu(n){let i=this._overlayRef,o=this._menu;!i||!this.menuOpen||(this._closingActionsSubscription.unsubscribe(),this._pendingRemoval?.unsubscribe(),o instanceof ny&&this._ownsMenu(o)?(this._pendingRemoval=o._animationDone.pipe(ri(1)).subscribe(()=>{i.detach(),ty.has(o)||o.lazyContent?.detach()}),o._setIsOpen(!1)):(i.detach(),o?.lazyContent?.detach()),o&&this._ownsMenu(o)&&ty.delete(o),this.restoreFocus&&(n==="keydown"||!this._openedBy||!this._triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,this._setIsMenuOpen(!1))}_setIsMenuOpen(n){n!==this._menuOpen&&(this._menuOpen=n,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this._triggersSubmenu()&&this._menuItemInstance._setHighlighted(n),this._changeDetectorRef.markForCheck())}_createOverlay(n){if(!this._overlayRef){let i=this._getOverlayConfig(n);this._subscribeToPositions(n,i.positionStrategy),this._overlayRef=dh(this._injector,i),this._overlayRef.keydownEvents().subscribe(o=>{this._menu instanceof ny&&this._menu._handleKeydown(o)})}return this._overlayRef}_getOverlayConfig(n){return new ch({positionStrategy:X_(this._injector,this._getOverlayOrigin()).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:n.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:n.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir||"ltr",disableAnimations:this._animationsDisabled})}_subscribeToPositions(n,i){n.setPositionClasses&&i.positionChanges.subscribe(o=>{this._ngZone.run(()=>{let r=o.connectionPair.overlayX==="start"?"after":"before",s=o.connectionPair.overlayY==="top"?"below":"above";n.setPositionClasses(r,s)})})}_setPosition(n,i){let[o,r]=n.xPosition==="before"?["end","start"]:["start","end"],[s,a]=n.yPosition==="above"?["bottom","top"]:["top","bottom"],[l,c]=[s,a],[u,h]=[o,r],f=0;if(this._triggersSubmenu()){if(h=o=n.xPosition==="before"?"start":"end",r=u=o==="end"?"start":"end",this._parentMaterialMenu){if(this._parentInnerPadding==null){let m=this._parentMaterialMenu.items.first;this._parentInnerPadding=m?m._getHostElement().offsetTop:0}f=s==="bottom"?this._parentInnerPadding:-this._parentInnerPadding}}else n.overlapTrigger||(l=s==="top"?"bottom":"top",c=a==="top"?"bottom":"top");i.withPositions([{originX:o,originY:l,overlayX:u,overlayY:s,offsetY:f},{originX:r,originY:l,overlayX:h,overlayY:s,offsetY:f},{originX:o,originY:c,overlayX:u,overlayY:a,offsetY:-f},{originX:r,originY:c,overlayX:h,overlayY:a,offsetY:-f}])}_menuClosingActions(){let n=this._getOutsideClickStream(this._overlayRef),i=this._overlayRef.detachments(),o=this._parentMaterialMenu?this._parentMaterialMenu.closed:et(),r=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(zt(s=>this._menuOpen&&s!==this._menuItemInstance)):et();return Ni(n,o,r,i)}_getPortal(n){return(!this._portal||this._portal.templateRef!==n.templateRef)&&(this._portal=new ah(n.templateRef,this._viewContainerRef)),this._portal}_ownsMenu(n){return ty.get(n)===this}static \u0275fac=function(i){V3()};static \u0275dir=ke({type:e})}return e})(),zfe=(()=>{class e extends nZe{_cleanupTouchstart;_hoverSubscription=Mt.EMPTY;get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(n){this.menu=n}get menu(){return this._menu}set menu(n){this._menu=n}menuData;restoreFocus=!0;menuOpened=new V;onMenuOpen=this.menuOpened;menuClosed=new V;onMenuClose=this.menuClosed;constructor(){super(!0);let n=k(Pn);this._cleanupTouchstart=n.listen(this._element.nativeElement,"touchstart",i=>{Td(i)||(this._openedBy="touch")},{passive:!0})}triggersSubmenu(){return super._triggersSubmenu()}toggleMenu(){return this.menuOpen?this.closeMenu():this.openMenu()}openMenu(){this._openMenu(!0)}closeMenu(){this._closeMenu()}updatePosition(){this._overlayRef?.updatePosition()}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){super.ngOnDestroy(),this._cleanupTouchstart(),this._hoverSubscription.unsubscribe()}_getOverlayOrigin(){return this._element}_getOutsideClickStream(n){return n.backdropClick()}_handleMousedown(n){Rd(n)||(this._openedBy=n.button===0?"mouse":void 0,this.triggersSubmenu()&&n.preventDefault())}_handleKeydown(n){let i=n.keyCode;(i===13||i===32)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(i===39&&this.dir==="ltr"||i===37&&this.dir==="rtl")&&(this._openedBy="keyboard",this.openMenu())}_handleClick(n){this.triggersSubmenu()?(n.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){this.triggersSubmenu()&&this._parentMaterialMenu&&(this._hoverSubscription=this._parentMaterialMenu._hovered().subscribe(n=>{n===this._menuItemInstance&&!n.disabled&&this._parentMaterialMenu?._panelAnimationState!=="void"&&(this._openedBy="mouse",this._openMenu(!1))}))}static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],hostVars:3,hostBindings:function(i,o){i&1&&Q("click",function(s){return o._handleClick(s)})("mousedown",function(s){return o._handleMousedown(s)})("keydown",function(s){return o._handleKeydown(s)}),i&2&&pt("aria-haspopup",o.menu?"menu":null)("aria-expanded",o.menuOpen)("aria-controls",o.menuOpen?o.menu==null?null:o.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:[0,"mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:[0,"matMenuTriggerFor","menu"],menuData:[0,"matMenuTriggerData","menuData"],restoreFocus:[0,"matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"],features:[Tt]})}return e})();var Vfe=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({providers:[tZe],imports:[cc,ft,Pd,ss,ft]})}return e})(),Hfe={transformMenu:{type:7,name:"transformMenu",definitions:[{type:0,name:"void",styles:{type:6,styles:{opacity:0,transform:"scale(0.8)"},offset:null}},{type:1,expr:"void => enter",animation:{type:4,styles:{type:6,styles:{opacity:1,transform:"scale(1)"},offset:null},timings:"120ms cubic-bezier(0, 0, 0.2, 1)"},options:null},{type:1,expr:"* => void",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"100ms 25ms linear"},options:null}],options:{}},fadeInItems:{type:7,name:"fadeInItems",definitions:[{type:0,name:"showing",styles:{type:6,styles:{opacity:1},offset:null}},{type:1,expr:"void => *",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:null,timings:"400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}},Bnn=Hfe.fadeInItems,znn=Hfe.transformMenu;var KP;function oZe(){if(KP===void 0&&(KP=null,typeof window<"u")){let e=window;e.trustedTypes!==void 0&&(KP=e.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return KP}function dS(e){return oZe()?.createHTML(e)||e}function $fe(e){return Error(`Unable to find icon with the name "${e}"`)}function rZe(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function jfe(e){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${e}".`)}function Gfe(e){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${e}".`)}var Ad=class{url;svgText;options;svgElement;constructor(t,n,i){this.url=t,this.svgText=n,this.options=i}},Wfe=(()=>{class e{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(n,i,o,r){this._httpClient=n,this._sanitizer=i,this._errorHandler=r,this._document=o}addSvgIcon(n,i,o){return this.addSvgIconInNamespace("",n,i,o)}addSvgIconLiteral(n,i,o){return this.addSvgIconLiteralInNamespace("",n,i,o)}addSvgIconInNamespace(n,i,o,r){return this._addSvgIconConfig(n,i,new Ad(o,null,r))}addSvgIconResolver(n){return this._resolvers.push(n),this}addSvgIconLiteralInNamespace(n,i,o,r){let s=this._sanitizer.sanitize(mo.HTML,o);if(!s)throw Gfe(o);let a=dS(s);return this._addSvgIconConfig(n,i,new Ad("",a,r))}addSvgIconSet(n,i){return this.addSvgIconSetInNamespace("",n,i)}addSvgIconSetLiteral(n,i){return this.addSvgIconSetLiteralInNamespace("",n,i)}addSvgIconSetInNamespace(n,i,o){return this._addSvgIconSetConfig(n,new Ad(i,null,o))}addSvgIconSetLiteralInNamespace(n,i,o){let r=this._sanitizer.sanitize(mo.HTML,i);if(!r)throw Gfe(i);let s=dS(r);return this._addSvgIconSetConfig(n,new Ad("",s,o))}registerFontClassAlias(n,i=n){return this._fontCssClassesByAlias.set(n,i),this}classNameForFontAlias(n){return this._fontCssClassesByAlias.get(n)||n}setDefaultFontSetClass(...n){return this._defaultFontSetClass=n,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(n){let i=this._sanitizer.sanitize(mo.RESOURCE_URL,n);if(!i)throw jfe(n);let o=this._cachedIconsByUrl.get(i);return o?et(ZP(o)):this._loadSvgIconFromConfig(new Ad(n,null)).pipe(wi(r=>this._cachedIconsByUrl.set(i,r)),tt(r=>ZP(r)))}getNamedSvgIcon(n,i=""){let o=Ufe(i,n),r=this._svgIconConfigs.get(o);if(r)return this._getSvgFromConfig(r);if(r=this._getIconConfigFromResolvers(i,n),r)return this._svgIconConfigs.set(o,r),this._getSvgFromConfig(r);let s=this._iconSetConfigs.get(i);return s?this._getSvgFromIconSetConfigs(n,s):ab($fe(o))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(n){return n.svgText?et(ZP(this._svgElementFromConfig(n))):this._loadSvgIconFromConfig(n).pipe(tt(i=>ZP(i)))}_getSvgFromIconSetConfigs(n,i){let o=this._extractIconWithNameFromAnySet(n,i);if(o)return et(o);let r=i.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(dl(a=>{let c=`Loading icon set URL: ${this._sanitizer.sanitize(mo.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),et(null)})));return db(r).pipe(tt(()=>{let s=this._extractIconWithNameFromAnySet(n,i);if(!s)throw $fe(n);return s}))}_extractIconWithNameFromAnySet(n,i){for(let o=i.length-1;o>=0;o--){let r=i[o];if(r.svgText&&r.svgText.toString().indexOf(n)>-1){let s=this._svgElementFromConfig(r),a=this._extractSvgIconFromSet(s,n,r.options);if(a)return a}}return null}_loadSvgIconFromConfig(n){return this._fetchIcon(n).pipe(wi(i=>n.svgText=i),tt(()=>this._svgElementFromConfig(n)))}_loadSvgIconSetFromConfig(n){return n.svgText?et(null):this._fetchIcon(n).pipe(wi(i=>n.svgText=i))}_extractSvgIconFromSet(n,i,o){let r=n.querySelector(`[id="${i}"]`);if(!r)return null;let s=r.cloneNode(!0);if(s.removeAttribute("id"),s.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(s,o);if(s.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(s),o);let a=this._svgElementFromString(dS("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,o)}_svgElementFromString(n){let i=this._document.createElement("DIV");i.innerHTML=n;let o=i.querySelector("svg");if(!o)throw Error("<svg> tag not found");return o}_toSvgElement(n){let i=this._svgElementFromString(dS("<svg></svg>")),o=n.attributes;for(let r=0;r<o.length;r++){let{name:s,value:a}=o[r];s!=="id"&&i.setAttribute(s,a)}for(let r=0;r<n.childNodes.length;r++)n.childNodes[r].nodeType===this._document.ELEMENT_NODE&&i.appendChild(n.childNodes[r].cloneNode(!0));return i}_setSvgAttributes(n,i){return n.setAttribute("fit",""),n.setAttribute("height","100%"),n.setAttribute("width","100%"),n.setAttribute("preserveAspectRatio","xMidYMid meet"),n.setAttribute("focusable","false"),i&&i.viewBox&&n.setAttribute("viewBox",i.viewBox),n}_fetchIcon(n){let{url:i,options:o}=n,r=o?.withCredentials??!1;if(!this._httpClient)throw rZe();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let s=this._sanitizer.sanitize(mo.RESOURCE_URL,i);if(!s)throw jfe(i);let a=this._inProgressUrlFetches.get(s);if(a)return a;let l=this._httpClient.get(s,{responseType:"text",withCredentials:r}).pipe(tt(c=>dS(c)),xa(()=>this._inProgressUrlFetches.delete(s)),ub());return this._inProgressUrlFetches.set(s,l),l}_addSvgIconConfig(n,i,o){return this._svgIconConfigs.set(Ufe(n,i),o),this}_addSvgIconSetConfig(n,i){let o=this._iconSetConfigs.get(n);return o?o.push(i):this._iconSetConfigs.set(n,[i]),this}_svgElementFromConfig(n){if(!n.svgElement){let i=this._svgElementFromString(n.svgText);this._setSvgAttributes(i,n.options),n.svgElement=i}return n.svgElement}_getIconConfigFromResolvers(n,i){for(let o=0;o<this._resolvers.length;o++){let r=this._resolvers[o](i,n);if(r)return sZe(r)?new Ad(r.url,null,r.options):new Ad(r,null)}}static \u0275fac=function(i){return new(i||e)(Ze(iu,8),Ze(wC),Ze(Je,8),Ze(Oo))};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ZP(e){return e.cloneNode(!0)}function Ufe(e,t){return e+":"+t}function sZe(e){return!!(e.url&&e.options)}var aZe=["*"],lZe=new q("MAT_ICON_DEFAULT_OPTIONS"),cZe=new q("mat-icon-location",{providedIn:"root",factory:dZe});function dZe(){let e=k(Je),t=e?e.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}var qfe=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],uZe=qfe.map(e=>`[${e}]`).join(", "),hZe=/^url\(['"]?#(.*?)['"]?\)$/,ma=(()=>{class e{_elementRef=k(Oe);_iconRegistry=k(Wfe);_location=k(cZe);_errorHandler=k(Oo);_defaultColor;get color(){return this._color||this._defaultColor}set color(n){this._color=n}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(n){n!==this._svgIcon&&(n?this._updateSvgIcon(n):this._svgIcon&&this._clearSvgElement(),this._svgIcon=n)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(n){let i=this._cleanupFontValue(n);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(n){let i=this._cleanupFontValue(n);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=Mt.EMPTY;constructor(){let n=k(new ag("aria-hidden"),{optional:!0}),i=k(lZe,{optional:!0});i&&(i.color&&(this.color=this._defaultColor=i.color),i.fontSet&&(this.fontSet=i.fontSet)),n||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(n){if(!n)return["",""];let i=n.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${n}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let n=this._elementsWithExternalReferences;if(n&&n.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(n){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(n),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(n)}_clearSvgElement(){let n=this._elementRef.nativeElement,i=n.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let o=n.childNodes[i];(o.nodeType!==1||o.nodeName.toLowerCase()==="svg")&&o.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let n=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(o=>o.length>0);this._previousFontSetClass.forEach(o=>n.classList.remove(o)),i.forEach(o=>n.classList.add(o)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&n.classList.remove(this._previousFontIconClass),this.fontIcon&&n.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(n){return typeof n=="string"?n.trim().split(" ")[0]:n}_prependPathToReferences(n){let i=this._elementsWithExternalReferences;i&&i.forEach((o,r)=>{o.forEach(s=>{r.setAttribute(s.name,`url('${n}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(n){let i=n.querySelectorAll(uZe),o=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let r=0;r<i.length;r++)qfe.forEach(s=>{let a=i[r],l=a.getAttribute(s),c=l?l.match(hZe):null;if(c){let u=o.get(a);u||(u=[],o.set(a,u)),u.push({name:s,value:c[1]})}})}_updateSvgIcon(n){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),n){let[i,o]=this._splitIconName(n);i&&(this._svgNamespace=i),o&&(this._svgName=o),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(o,i).pipe(ri(1)).subscribe(r=>this._setSvgElement(r),r=>{let s=`Error retrieving icon ${i}:${o}! ${r.message}`;this._errorHandler.handleError(new Error(s))})}}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=pe({type:e,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,o){i&2&&(pt("data-mat-icon-type",o._usingFontIcon()?"font":"svg")("data-mat-icon-name",o._svgName||o.fontIcon)("data-mat-icon-namespace",o._svgNamespace||o.fontSet)("fontIcon",o._usingFontIcon()?o.fontIcon:null),ki(o.color?"mat-"+o.color:""),be("mat-icon-inline",o.inline)("mat-icon-no-color",o.color!=="primary"&&o.color!=="accent"&&o.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",$],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],ngContentSelectors:aZe,decls:1,vars:0,template:function(i,o){i&1&&(yn(),st(0))},styles:[`mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}
`],encapsulation:2,changeDetection:0})}return e})(),ga=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({imports:[ft,ft]})}return e})();var Kfe=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275cmp=pe({type:e,selectors:[["ng-component"]],hostAttrs:["cdk-text-field-style-loader",""],decls:0,vars:0,template:function(i,o){},styles:[`textarea.cdk-textarea-autosize{resize:none}textarea.cdk-textarea-autosize-measuring{padding:2px 0 !important;box-sizing:content-box !important;height:auto !important;overflow:hidden !important}textarea.cdk-textarea-autosize-measuring-firefox{padding:2px 0 !important;box-sizing:content-box !important;height:0 !important}@keyframes cdk-text-field-autofill-start{/*!*/}@keyframes cdk-text-field-autofill-end{/*!*/}.cdk-text-field-autofill-monitored:-webkit-autofill{animation:cdk-text-field-autofill-start 0s 1ms}.cdk-text-field-autofill-monitored:not(:-webkit-autofill){animation:cdk-text-field-autofill-end 0s 1ms}
`],encapsulation:2,changeDetection:0})}return e})(),pZe={passive:!0},Zfe=(()=>{class e{_platform=k(tn);_ngZone=k(me);_renderer=k(xi).createRenderer(null,null);_styleLoader=k(ni);_monitoredElements=new Map;constructor(){}monitor(n){if(!this._platform.isBrowser)return So;this._styleLoader.load(Kfe);let i=_i(n),o=this._monitoredElements.get(i);if(o)return o.subject;let r=new ie,s="cdk-text-field-autofilled",a=c=>{c.animationName==="cdk-text-field-autofill-start"&&!i.classList.contains(s)?(i.classList.add(s),this._ngZone.run(()=>r.next({target:c.target,isAutofilled:!0}))):c.animationName==="cdk-text-field-autofill-end"&&i.classList.contains(s)&&(i.classList.remove(s),this._ngZone.run(()=>r.next({target:c.target,isAutofilled:!1})))},l=this._ngZone.runOutsideAngular(()=>(i.classList.add("cdk-text-field-autofill-monitored"),this._renderer.listen(i,"animationstart",a,pZe)));return this._monitoredElements.set(i,{subject:r,unlisten:l}),r}stopMonitoring(n){let i=_i(n),o=this._monitoredElements.get(i);o&&(o.unlisten(),o.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((n,i)=>this.stopMonitoring(i))}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Yfe=(()=>{class e{_elementRef=k(Oe);_platform=k(tn);_ngZone=k(me);_renderer=k(Pn);_resizeEvents=new ie;_previousValue;_initialHeight;_destroyed=new ie;_listenerCleanups;_minRows;_maxRows;_enabled=!0;_previousMinRows=-1;_textareaElement;get minRows(){return this._minRows}set minRows(n){this._minRows=Ki(n),this._setMinHeight()}get maxRows(){return this._maxRows}set maxRows(n){this._maxRows=Ki(n),this._setMaxHeight()}get enabled(){return this._enabled}set enabled(n){this._enabled!==n&&((this._enabled=n)?this.resizeToFitContent(!0):this.reset())}get placeholder(){return this._textareaElement.placeholder}set placeholder(n){this._cachedPlaceholderHeight=void 0,n?this._textareaElement.setAttribute("placeholder",n):this._textareaElement.removeAttribute("placeholder"),this._cacheTextareaPlaceholderHeight()}_cachedLineHeight;_cachedPlaceholderHeight;_document=k(Je);_hasFocus;_isViewInited=!1;constructor(){k(ni).load(Kfe),this._textareaElement=this._elementRef.nativeElement}_setMinHeight(){let n=this.minRows&&this._cachedLineHeight?`${this.minRows*this._cachedLineHeight}px`:null;n&&(this._textareaElement.style.minHeight=n)}_setMaxHeight(){let n=this.maxRows&&this._cachedLineHeight?`${this.maxRows*this._cachedLineHeight}px`:null;n&&(this._textareaElement.style.maxHeight=n)}ngAfterViewInit(){this._platform.isBrowser&&(this._initialHeight=this._textareaElement.style.height,this.resizeToFitContent(),this._ngZone.runOutsideAngular(()=>{this._listenerCleanups=[this._renderer.listen("window","resize",()=>this._resizeEvents.next()),this._renderer.listen(this._textareaElement,"focus",this._handleFocusEvent),this._renderer.listen(this._textareaElement,"blur",this._handleFocusEvent)],this._resizeEvents.pipe(Tm(16)).subscribe(()=>{this._cachedLineHeight=this._cachedPlaceholderHeight=void 0,this.resizeToFitContent(!0)})}),this._isViewInited=!0,this.resizeToFitContent(!0))}ngOnDestroy(){this._listenerCleanups?.forEach(n=>n()),this._resizeEvents.complete(),this._destroyed.next(),this._destroyed.complete()}_cacheTextareaLineHeight(){if(this._cachedLineHeight)return;let n=this._textareaElement.cloneNode(!1),i=n.style;n.rows=1,i.position="absolute",i.visibility="hidden",i.border="none",i.padding="0",i.height="",i.minHeight="",i.maxHeight="",i.top=i.bottom=i.left=i.right="auto",i.overflow="hidden",this._textareaElement.parentNode.appendChild(n),this._cachedLineHeight=n.clientHeight,n.remove(),this._setMinHeight(),this._setMaxHeight()}_measureScrollHeight(){let n=this._textareaElement,i=n.style.marginBottom||"",o=this._platform.FIREFOX,r=o&&this._hasFocus,s=o?"cdk-textarea-autosize-measuring-firefox":"cdk-textarea-autosize-measuring";r&&(n.style.marginBottom=`${n.clientHeight}px`),n.classList.add(s);let a=n.scrollHeight-4;return n.classList.remove(s),r&&(n.style.marginBottom=i),a}_cacheTextareaPlaceholderHeight(){if(!this._isViewInited||this._cachedPlaceholderHeight!=null)return;if(!this.placeholder){this._cachedPlaceholderHeight=0;return}let n=this._textareaElement.value;this._textareaElement.value=this._textareaElement.placeholder,this._cachedPlaceholderHeight=this._measureScrollHeight(),this._textareaElement.value=n}_handleFocusEvent=n=>{this._hasFocus=n.type==="focus"};ngDoCheck(){this._platform.isBrowser&&this.resizeToFitContent()}resizeToFitContent(n=!1){if(!this._enabled||(this._cacheTextareaLineHeight(),this._cacheTextareaPlaceholderHeight(),!this._cachedLineHeight))return;let i=this._elementRef.nativeElement,o=i.value;if(!n&&this._minRows===this._previousMinRows&&o===this._previousValue)return;let r=this._measureScrollHeight(),s=Math.max(r,this._cachedPlaceholderHeight||0);i.style.height=`${s}px`,this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame<"u"?requestAnimationFrame(()=>this._scrollToCaretPosition(i)):setTimeout(()=>this._scrollToCaretPosition(i))}),this._previousValue=o,this._previousMinRows=this._minRows}reset(){this._initialHeight!==void 0&&(this._textareaElement.style.height=this._initialHeight)}_noopInputHandler(){}_scrollToCaretPosition(n){let{selectionStart:i,selectionEnd:o}=n;!this._destroyed.isStopped&&this._hasFocus&&n.setSelectionRange(i,o)}static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e,selectors:[["textarea","cdkTextareaAutosize",""]],hostAttrs:["rows","1",1,"cdk-textarea-autosize"],hostBindings:function(i,o){i&1&&Q("input",function(){return o._noopInputHandler()})},inputs:{minRows:[0,"cdkAutosizeMinRows","minRows"],maxRows:[0,"cdkAutosizeMaxRows","maxRows"],enabled:[2,"cdkTextareaAutosize","enabled",$],placeholder:"placeholder"},exportAs:["cdkTextareaAutosize"]})}return e})(),YP=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({})}return e})();var Qfe=new q("MAT_INPUT_VALUE_ACCESSOR");var EG=class{_box;_destroyed=new ie;_resizeSubject=new ie;_resizeObserver;_elementObservables=new Map;constructor(t){this._box=t,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(n=>this._resizeSubject.next(n)))}observe(t){return this._elementObservables.has(t)||this._elementObservables.set(t,new yt(n=>{let i=this._resizeSubject.subscribe(n);return this._resizeObserver?.observe(t,{box:this._box}),()=>{this._resizeObserver?.unobserve(t),i.unsubscribe(),this._elementObservables.delete(t)}}).pipe(zt(n=>n.some(i=>i.target===t)),Fm({bufferSize:1,refCount:!0}),Vt(this._destroyed))),this._elementObservables.get(t)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},Jfe=(()=>{class e{_cleanupErrorListener;_observers=new Map;_ngZone=k(me);constructor(){typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,n]of this._observers)n.destroy();this._observers.clear(),this._cleanupErrorListener?.()}observe(n,i){let o=i?.box||"content-box";return this._observers.has(o)||this._observers.set(o,new EG(o)),this._observers.get(o).observe(n)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var mZe=["notch"],gZe=["matFormFieldNotchedOutline",""],vZe=["*"],Xfe=["iconPrefixContainer"],eme=["textPrefixContainer"],tme=["iconSuffixContainer"],nme=["textSuffixContainer"],_Ze=["textField"],yZe=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],bZe=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function CZe(e,t){e&1&&Ae(0,"span",21)}function wZe(e,t){if(e&1&&(M(0,"label",20),st(1,1),K(2,CZe,1,0,"span",21),R()),e&2){let n=A(2);le("floating",n._shouldLabelFloat())("monitorResize",n._hasOutline())("id",n._labelId),pt("for",n._control.disableAutomaticLabeling?null:n._control.id),P(2),Z(!n.hideRequiredMarker&&n._control.required?2:-1)}}function xZe(e,t){if(e&1&&K(0,wZe,3,5,"label",20),e&2){let n=A();Z(n._hasFloatingLabel()?0:-1)}}function SZe(e,t){e&1&&Ae(0,"div",7)}function EZe(e,t){}function DZe(e,t){if(e&1&&Si(0,EZe,0,0,"ng-template",13),e&2){A(2);let n=bs(1);le("ngTemplateOutlet",n)}}function kZe(e,t){if(e&1&&(M(0,"div",9),K(1,DZe,1,1,null,13),R()),e&2){let n=A();le("matFormFieldNotchedOutlineOpen",n._shouldLabelFloat()),P(),Z(n._forceDisplayInfixLabel()?-1:1)}}function IZe(e,t){e&1&&(M(0,"div",10,2),st(2,2),R())}function MZe(e,t){e&1&&(M(0,"div",11,3),st(2,3),R())}function RZe(e,t){}function TZe(e,t){if(e&1&&Si(0,RZe,0,0,"ng-template",13),e&2){A();let n=bs(1);le("ngTemplateOutlet",n)}}function PZe(e,t){e&1&&(M(0,"div",14,4),st(2,4),R())}function AZe(e,t){e&1&&(M(0,"div",15,5),st(2,5),R())}function OZe(e,t){e&1&&Ae(0,"div",16)}function FZe(e,t){e&1&&(M(0,"div",18),st(1,6),R())}function LZe(e,t){if(e&1&&(M(0,"mat-hint",22),N(1),R()),e&2){let n=A(2);le("id",n._hintLabelId),P(),nt(n.hintLabel)}}function NZe(e,t){if(e&1&&(M(0,"div",19),K(1,LZe,2,2,"mat-hint",22),st(2,7),Ae(3,"div",23),st(4,8),R()),e&2){let n=A();P(),Z(n.hintLabel?1:-1)}}var uS=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e,selectors:[["mat-label"]]})}return e})(),BZe=new q("MatError");var DG=(()=>{class e{align="start";id=k(Zi).getId("mat-mdc-hint-");static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(i,o){i&2&&(nr("id",o.id),pt("align",null),be("mat-mdc-form-field-hint-end",o.align==="end"))},inputs:{align:"align",id:"id"}})}return e})(),zZe=new q("MatPrefix");var cme=new q("MatSuffix"),kG=(()=>{class e{set _isTextSelector(n){this._isText=!0}_isText=!1;static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:[0,"matTextSuffix","_isTextSelector"]},features:[kt([{provide:cme,useExisting:e}])]})}return e})(),dme=new q("FloatingLabelParent"),ime=(()=>{class e{_elementRef=k(Oe);get floating(){return this._floating}set floating(n){this._floating=n,this.monitorResize&&this._handleResize()}_floating=!1;get monitorResize(){return this._monitorResize}set monitorResize(n){this._monitorResize=n,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}_monitorResize=!1;_resizeObserver=k(Jfe);_ngZone=k(me);_parent=k(dme);_resizeSubscription=new Mt;constructor(){}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return VZe(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(i,o){i&2&&be("mdc-floating-label--float-above",o.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return e})();function VZe(e){let t=e;if(t.offsetParent!==null)return t.scrollWidth;let n=t.cloneNode(!0);n.style.setProperty("position","absolute"),n.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(n);let i=n.scrollWidth;return n.remove(),i}var ome="mdc-line-ripple--active",QP="mdc-line-ripple--deactivating",rme=(()=>{class e{_elementRef=k(Oe);_cleanupTransitionEnd;constructor(){let n=k(me),i=k(Pn);n.runOutsideAngular(()=>{this._cleanupTransitionEnd=i.listen(this._elementRef.nativeElement,"transitionend",this._handleTransitionEnd)})}activate(){let n=this._elementRef.nativeElement.classList;n.remove(QP),n.add(ome)}deactivate(){this._elementRef.nativeElement.classList.add(QP)}_handleTransitionEnd=n=>{let i=this._elementRef.nativeElement.classList,o=i.contains(QP);n.propertyName==="opacity"&&o&&i.remove(ome,QP)};ngOnDestroy(){this._cleanupTransitionEnd()}static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return e})(),sme=(()=>{class e{_elementRef=k(Oe);_ngZone=k(me);open=!1;_notch;ngAfterViewInit(){let n=this._elementRef.nativeElement,i=n.querySelector(".mdc-floating-label");i?(n.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(i.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>i.style.transitionDuration="")}))):n.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(n){let i=this._notch.nativeElement;!this.open||!n?i.style.width="":i.style.width=`calc(${n}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}_setMaxWidth(n){this._notch.nativeElement.style.setProperty("--mat-form-field-notch-max-width",`calc(100% - ${n}px)`)}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=pe({type:e,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(i,o){if(i&1&&bn(mZe,5),i&2){let r;Ye(r=Qe())&&(o._notch=r.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(i,o){i&2&&be("mdc-notched-outline--notched",o.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},attrs:gZe,ngContentSelectors:vZe,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(i,o){i&1&&(yn(),go(0,"div",1),Ei(1,"div",2,0),st(3),no(),go(4,"div",3))},encapsulation:2,changeDetection:0})}return e})(),IG=(()=>{class e{value;stateChanges;id;placeholder;ngControl;focused;empty;shouldLabelFloat;required;disabled;errorState;controlType;autofilled;userAriaDescribedBy;disableAutomaticLabeling;describedByIds;static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e})}return e})();var MG=new q("MatFormField"),HZe=new q("MAT_FORM_FIELD_DEFAULT_OPTIONS"),ame="fill",$Ze="auto",lme="fixed",jZe="translateY(-50%)",Nf=(()=>{class e{_elementRef=k(Oe);_changeDetectorRef=k(dn);_platform=k(tn);_idGenerator=k(Zi);_ngZone=k(me);_defaults=k(HZe,{optional:!0});_currentDirection;_textField;_iconPrefixContainer;_textPrefixContainer;_iconSuffixContainer;_textSuffixContainer;_floatingLabel;_notchedOutline;_lineRipple;_iconPrefixContainerSignal=oC("iconPrefixContainer");_textPrefixContainerSignal=oC("textPrefixContainer");_iconSuffixContainerSignal=oC("iconSuffixContainer");_textSuffixContainerSignal=oC("textSuffixContainer");_prefixSuffixContainers=Er(()=>[this._iconPrefixContainerSignal(),this._textPrefixContainerSignal(),this._iconSuffixContainerSignal(),this._textSuffixContainerSignal()].map(n=>n?.nativeElement).filter(n=>n!==void 0));_formFieldControl;_prefixChildren;_suffixChildren;_errorChildren;_hintChildren;_labelChild=rQ(uS);get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(n){this._hideRequiredMarker=Fi(n)}_hideRequiredMarker=!1;color="primary";get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||$Ze}set floatLabel(n){n!==this._floatLabel&&(this._floatLabel=n,this._changeDetectorRef.markForCheck())}_floatLabel;get appearance(){return this._appearanceSignal()}set appearance(n){let i=n||this._defaults?.appearance||ame;this._appearanceSignal.set(i)}_appearanceSignal=$t(ame);get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||lme}set subscriptSizing(n){this._subscriptSizing=n||this._defaults?.subscriptSizing||lme}_subscriptSizing=null;get hintLabel(){return this._hintLabel}set hintLabel(n){this._hintLabel=n,this._processHints()}_hintLabel="";_hasIconPrefix=!1;_hasTextPrefix=!1;_hasIconSuffix=!1;_hasTextSuffix=!1;_labelId=this._idGenerator.getId("mat-mdc-form-field-label-");_hintLabelId=this._idGenerator.getId("mat-mdc-hint-");_describedByIds;get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(n){this._explicitFormFieldControl=n}_destroyed=new ie;_isFocused=null;_explicitFormFieldControl;_previousControl=null;_previousControlValidatorFn=null;_stateChanges;_valueChanges;_describedByChanges;_outlineLabelOffsetResizeObserver=null;_animationsDisabled=fi();constructor(){let n=this._defaults,i=k(wo);n&&(n.appearance&&(this.appearance=n.appearance),this._hideRequiredMarker=!!n?.hideRequiredMarker,n.color&&(this.color=n.color)),wl(()=>this._currentDirection=i.valueSignal()),this._syncOutlineLabelOffset()}ngAfterViewInit(){this._updateFocusState(),this._animationsDisabled||this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-form-field-animations-enabled")},300)}),this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._control.ngControl&&this._control.ngControl.control&&(this._previousControlValidatorFn=this._control.ngControl.control.validator),this._previousControl=this._control),this._control.ngControl&&this._control.ngControl.control&&this._control.ngControl.control.validator!==this._previousControlValidatorFn&&this._changeDetectorRef.markForCheck()}ngOnDestroy(){this._outlineLabelOffsetResizeObserver?.disconnect(),this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._describedByChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getLabelId=Er(()=>this._hasFloatingLabel()?this._labelId:null);getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(n){let i=this._control,o="mat-mdc-form-field-type-";n&&this._elementRef.nativeElement.classList.remove(o+n.controlType),i.controlType&&this._elementRef.nativeElement.classList.add(o+i.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=i.stateChanges.subscribe(()=>{this._updateFocusState(),this._changeDetectorRef.markForCheck()}),this._describedByChanges?.unsubscribe(),this._describedByChanges=i.stateChanges.pipe(Pi([void 0,void 0]),tt(()=>[i.errorState,i.userAriaDescribedBy]),f1(),zt(([[r,s],[a,l]])=>r!==a||s!==l)).subscribe(()=>this._syncDescribedByIds()),this._valueChanges?.unsubscribe(),i.ngControl&&i.ngControl.valueChanges&&(this._valueChanges=i.ngControl.valueChanges.pipe(Vt(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(n=>!n._isText),this._hasTextPrefix=!!this._prefixChildren.find(n=>n._isText),this._hasIconSuffix=!!this._suffixChildren.find(n=>!n._isText),this._hasTextSuffix=!!this._suffixChildren.find(n=>n._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),Ni(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){let n=this._control.focused;n&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!n&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._elementRef.nativeElement.classList.toggle("mat-focused",n),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",n)}_syncOutlineLabelOffset(){uQ({earlyRead:()=>{if(this._appearanceSignal()!=="outline")return this._outlineLabelOffsetResizeObserver?.disconnect(),null;if(globalThis.ResizeObserver){this._outlineLabelOffsetResizeObserver||=new globalThis.ResizeObserver(()=>{this._writeOutlinedLabelStyles(this._getOutlinedLabelOffset())});for(let n of this._prefixSuffixContainers())this._outlineLabelOffsetResizeObserver.observe(n,{box:"border-box"})}return this._getOutlinedLabelOffset()},write:n=>this._writeOutlinedLabelStyles(n())})}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel=Er(()=>!!this._labelChild());_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(n){let i=this._control?this._control.ngControl:null;return i&&i[n]}_getSubscriptMessageType(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let n=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&n.push(...this._control.userAriaDescribedBy.split(" ")),this._getSubscriptMessageType()==="hint"){let r=this._hintChildren?this._hintChildren.find(a=>a.align==="start"):null,s=this._hintChildren?this._hintChildren.find(a=>a.align==="end"):null;r?n.push(r.id):this._hintLabel&&n.push(this._hintLabelId),s&&n.push(s.id)}else this._errorChildren&&n.push(...this._errorChildren.map(r=>r.id));let i=this._control.describedByIds,o;if(i){let r=this._describedByIds||n;o=n.concat(i.filter(s=>s&&!r.includes(s)))}else o=n;this._control.setDescribedByIds(o),this._describedByIds=n}}_getOutlinedLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return null;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return["",null];if(!this._isAttachedToDom())return null;let n=this._iconPrefixContainer?.nativeElement,i=this._textPrefixContainer?.nativeElement,o=this._iconSuffixContainer?.nativeElement,r=this._textSuffixContainer?.nativeElement,s=n?.getBoundingClientRect().width??0,a=i?.getBoundingClientRect().width??0,l=o?.getBoundingClientRect().width??0,c=r?.getBoundingClientRect().width??0,u=this._currentDirection==="rtl"?"-1":"1",h=`${s+a}px`,m=`calc(${u} * (${h} + var(--mat-mdc-form-field-label-offset-x, 0px)))`,_=`var(--mat-mdc-form-field-label-transform, ${jZe} translateX(${m}))`,y=s+a+l+c;return[_,y]}_writeOutlinedLabelStyles(n){if(n!==null){let[i,o]=n;this._floatingLabel&&(this._floatingLabel.element.style.transform=i),o!==null&&this._notchedOutline?._setMaxWidth(o)}}_isAttachedToDom(){let n=this._elementRef.nativeElement;if(n.getRootNode){let i=n.getRootNode();return i&&i!==n}return document.documentElement.contains(n)}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=pe({type:e,selectors:[["mat-form-field"]],contentQueries:function(i,o,r){if(i&1&&(MD(r,o._labelChild,uS,5),No(r,IG,5)(r,zZe,5)(r,cme,5)(r,BZe,5)(r,DG,5)),i&2){TD();let s;Ye(s=Qe())&&(o._formFieldControl=s.first),Ye(s=Qe())&&(o._prefixChildren=s),Ye(s=Qe())&&(o._suffixChildren=s),Ye(s=Qe())&&(o._errorChildren=s),Ye(s=Qe())&&(o._hintChildren=s)}},viewQuery:function(i,o){if(i&1&&(RD(o._iconPrefixContainerSignal,Xfe,5)(o._textPrefixContainerSignal,eme,5)(o._iconSuffixContainerSignal,tme,5)(o._textSuffixContainerSignal,nme,5),bn(_Ze,5)(Xfe,5)(eme,5)(tme,5)(nme,5)(ime,5)(sme,5)(rme,5)),i&2){TD(4);let r;Ye(r=Qe())&&(o._textField=r.first),Ye(r=Qe())&&(o._iconPrefixContainer=r.first),Ye(r=Qe())&&(o._textPrefixContainer=r.first),Ye(r=Qe())&&(o._iconSuffixContainer=r.first),Ye(r=Qe())&&(o._textSuffixContainer=r.first),Ye(r=Qe())&&(o._floatingLabel=r.first),Ye(r=Qe())&&(o._notchedOutline=r.first),Ye(r=Qe())&&(o._lineRipple=r.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:38,hostBindings:function(i,o){i&2&&be("mat-mdc-form-field-label-always-float",o._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",o._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",o._hasIconSuffix)("mat-form-field-invalid",o._control.errorState)("mat-form-field-disabled",o._control.disabled)("mat-form-field-autofilled",o._control.autofilled)("mat-form-field-appearance-fill",o.appearance=="fill")("mat-form-field-appearance-outline",o.appearance=="outline")("mat-form-field-hide-placeholder",o._hasFloatingLabel()&&!o._shouldLabelFloat())("mat-primary",o.color!=="accent"&&o.color!=="warn")("mat-accent",o.color==="accent")("mat-warn",o.color==="warn")("ng-untouched",o._shouldForward("untouched"))("ng-touched",o._shouldForward("touched"))("ng-pristine",o._shouldForward("pristine"))("ng-dirty",o._shouldForward("dirty"))("ng-valid",o._shouldForward("valid"))("ng-invalid",o._shouldForward("invalid"))("ng-pending",o._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[kt([{provide:MG,useExisting:e},{provide:dme,useExisting:e}])],ngContentSelectors:bZe,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],["textSuffixContainer",""],["iconSuffixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],["aria-atomic","true","aria-live","polite",1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(i,o){if(i&1){let r=Ge();yn(yZe),Si(0,xZe,1,1,"ng-template",null,0,sg),M(2,"div",6,1),Q("click",function(a){return J(r),X(o._control.onContainerClick(a))}),K(4,SZe,1,0,"div",7),M(5,"div",8),K(6,kZe,2,2,"div",9),K(7,IZe,3,0,"div",10),K(8,MZe,3,0,"div",11),M(9,"div",12),K(10,TZe,1,1,null,13),st(11),R(),K(12,PZe,3,0,"div",14),K(13,AZe,3,0,"div",15),R(),K(14,OZe,1,0,"div",16),R(),M(15,"div",17),K(16,FZe,2,0,"div",18)(17,NZe,5,1,"div",19),R()}if(i&2){let r;P(2),be("mdc-text-field--filled",!o._hasOutline())("mdc-text-field--outlined",o._hasOutline())("mdc-text-field--no-label",!o._hasFloatingLabel())("mdc-text-field--disabled",o._control.disabled)("mdc-text-field--invalid",o._control.errorState),P(2),Z(!o._hasOutline()&&!o._control.disabled?4:-1),P(2),Z(o._hasOutline()?6:-1),P(),Z(o._hasIconPrefix?7:-1),P(),Z(o._hasTextPrefix?8:-1),P(2),Z(!o._hasOutline()||o._forceDisplayInfixLabel()?10:-1),P(2),Z(o._hasTextSuffix?12:-1),P(),Z(o._hasIconSuffix?13:-1),P(),Z(o._hasOutline()?-1:14),P(),be("mat-mdc-form-field-subscript-dynamic-size",o.subscriptSizing==="dynamic");let s=o._getSubscriptMessageType();P(),Z((r=s)==="error"?16:r==="hint"?17:-1)}},dependencies:[ime,sme,pC,rme,DG],styles:[`.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator,.mdc-text-field__input::-webkit-search-cancel-button{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-moz-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-webkit-input-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive:-ms-input-placeholder{opacity:0}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mat-form-field-filled-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mat-form-field-filled-caret-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mat-form-field-outlined-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mat-form-field-outlined-caret-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mat-form-field-filled-error-caret-color, var(--mat-sys-error))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mat-form-field-outlined-error-caret-color, var(--mat-sys-error))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mat-form-field-filled-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mat-form-field-outlined-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mat-form-field-filled-container-shape, var(--mat-sys-corner-extra-small));border-top-right-radius:var(--mat-form-field-filled-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mat-form-field-filled-container-color, var(--mat-sys-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mat-form-field-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 4%, transparent))}.mdc-text-field--outlined{height:56px;overflow:visible;padding-right:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)));padding-left:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)) + 4px);padding-left:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)))}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}@media(forced-colors: active){.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mat-form-field-filled-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-filled-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mat-form-field-filled-hover-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mat-form-field-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mat-form-field-filled-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-filled-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mat-form-field-filled-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mat-form-field-filled-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-form-field-filled-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-form-field-filled-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-form-field-filled-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mat-form-field-outlined-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-outlined-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mat-form-field-outlined-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mat-form-field-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mat-form-field-outlined-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-outlined-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mat-form-field-outlined-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mat-form-field-outlined-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-form-field-outlined-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-form-field-outlined-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-form-field-outlined-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-outline-color, var(--mat-sys-outline));border-width:var(--mat-form-field-outlined-outline-width, 1px)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-hover-outline-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-focus-outline-color, var(--mat-sys-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-hover-outline-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-focus-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mat-form-field-outlined-focus-outline-width, 2px)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)))}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:min(var(--mat-form-field-notch-max-width, 100%),calc(100% - max(12px, var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))) * 2))}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{max-width:min(100%,calc(100% - max(12px, var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))) * 2))}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mat-form-field-filled-active-indicator-height, 1px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-active-indicator-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-hover-active-indicator-color, var(--mat-sys-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-disabled-active-indicator-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-error-active-indicator-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-error-hover-active-indicator-color, var(--mat-sys-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mat-form-field-filled-focus-active-indicator-height, 2px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mat-form-field-filled-focus-active-indicator-color, var(--mat-sys-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mat-form-field-filled-error-focus-active-indicator-color, var(--mat-sys-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height, 56px);padding-top:var(--mat-form-field-filled-with-label-container-padding-top, 24px);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom, 8px)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding, 16px);padding-bottom:var(--mat-form-field-container-vertical-padding, 16px)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height, 56px)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height, 56px) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}@keyframes _mat-form-field-subscript-animation{from{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px;opacity:1;transform:translateY(0);animation:_mat-form-field-subscript-animation 0ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-sys-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-sys-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-sys-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-sys-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-sys-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-sys-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-sys-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity, 0)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color, var(--mat-sys-neutral10))}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color, color-mix(in srgb, var(--mat-sys-neutral10) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}@media(forced-colors: active){.mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}}@media(forced-colors: active){.mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-sys-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-sys-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-sys-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-sys-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field-infix:has(textarea[cols]){width:auto}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field.mat-form-field-animations-enabled .mat-mdc-form-field-error-wrapper{animation-duration:300ms}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}
`],encapsulation:2,changeDetection:0})}return e})();var JP=(()=>{class e{isErrorState(n,i){return!!(n&&n.invalid&&(n.touched||i&&i.submitted))}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var XP=class{_defaultMatcher;ngControl;_parentFormGroup;_parentForm;_stateChanges;errorState=!1;matcher;constructor(t,n,i,o,r){this._defaultMatcher=t,this.ngControl=n,this._parentFormGroup=i,this._parentForm=o,this._stateChanges=r}updateErrorState(){let t=this.errorState,n=this._parentFormGroup||this._parentForm,i=this.matcher||this._defaultMatcher,o=this.ngControl?this.ngControl.control:null,r=i?.isErrorState(o,n)??!1;r!==t&&(this.errorState=r,this._stateChanges.next())}};var va=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({imports:[ft,U_,Nf,ft]})}return e})();var GZe=["button","checkbox","file","hidden","image","radio","range","reset","submit"],UZe=new q("MAT_INPUT_CONFIG"),oy=(()=>{class e{_elementRef=k(Oe);_platform=k(tn);ngControl=k(kd,{optional:!0,self:!0});_autofillMonitor=k(Zfe);_ngZone=k(me);_formField=k(MG,{optional:!0});_renderer=k(Pn);_uid=k(Zi).getId("mat-input-");_previousNativeValue;_inputValueAccessor;_signalBasedValueAccessor;_previousPlaceholder;_errorStateTracker;_config=k(UZe,{optional:!0});_cleanupIosKeyup;_cleanupWebkitWheel;_isServer;_isNativeSelect;_isTextarea;_isInFormField;focused=!1;stateChanges=new ie;controlType="mat-input";autofilled=!1;get disabled(){return this._disabled}set disabled(n){this._disabled=Fi(n),this.focused&&(this.focused=!1,this.stateChanges.next())}_disabled=!1;get id(){return this._id}set id(n){this._id=n||this._uid}_id;placeholder;name;get required(){return this._required??this.ngControl?.control?.hasValidator(Ri.required)??!1}set required(n){this._required=Fi(n)}_required;get type(){return this._type}set type(n){this._type=n||"text",this._validateType(),!this._isTextarea&&gG().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}_type="text";get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(n){this._errorStateTracker.matcher=n}userAriaDescribedBy;get value(){return this._signalBasedValueAccessor?this._signalBasedValueAccessor.value():this._inputValueAccessor.value}set value(n){n!==this.value&&(this._signalBasedValueAccessor?this._signalBasedValueAccessor.value.set(n):this._inputValueAccessor.value=n,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(n){this._readonly=Fi(n)}_readonly=!1;disabledInteractive;get errorState(){return this._errorStateTracker.errorState}set errorState(n){this._errorStateTracker.errorState=n}_neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(n=>gG().has(n));constructor(){let n=k(tG,{optional:!0}),i=k(Df,{optional:!0}),o=k(JP),r=k(Qfe,{optional:!0,self:!0}),s=this._elementRef.nativeElement,a=s.nodeName.toLowerCase();r?Oc(r.value)?this._signalBasedValueAccessor=r:this._inputValueAccessor=r:this._inputValueAccessor=s,this._previousNativeValue=this.value,this.id=this.id,this._platform.IOS&&this._ngZone.runOutsideAngular(()=>{this._cleanupIosKeyup=this._renderer.listen(s,"keyup",this._iOSKeyupListener)}),this._errorStateTracker=new XP(o,this.ngControl,i,n,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=a==="select",this._isTextarea=a==="textarea",this._isInFormField=!!this._formField,this.disabledInteractive=this._config?.disabledInteractive||!1,this._isNativeSelect&&(this.controlType=s.multiple?"mat-native-select-multiple":"mat-native-select"),this._signalBasedValueAccessor&&wl(()=>{this._signalBasedValueAccessor.value(),this.stateChanges.next()})}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(n=>{this.autofilled=n.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._cleanupIosKeyup?.(),this._cleanupWebkitWheel?.()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(n){this._elementRef.nativeElement.focus(n)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(n){if(n!==this.focused){if(!this._isNativeSelect&&n&&this.disabled&&this.disabledInteractive){let i=this._elementRef.nativeElement;i.type==="number"?(i.type="text",i.setSelectionRange(0,0),i.type="number"):i.setSelectionRange(0,0)}this.focused=n,this.stateChanges.next()}}_onInput(){}_dirtyCheckNativeValue(){let n=this._elementRef.nativeElement.value;this._previousNativeValue!==n&&(this._previousNativeValue=n,this.stateChanges.next())}_dirtyCheckPlaceholder(){let n=this._getPlaceholder();if(n!==this._previousPlaceholder){let i=this._elementRef.nativeElement;this._previousPlaceholder=n,n?i.setAttribute("placeholder",n):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){GZe.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let n=this._elementRef.nativeElement.validity;return n&&n.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let n=this._elementRef.nativeElement,i=n.options[0];return this.focused||n.multiple||!this.empty||!!(n.selectedIndex>-1&&i&&i.label)}else return this.focused&&!this.disabled||!this.empty}get describedByIds(){return this._elementRef.nativeElement.getAttribute("aria-describedby")?.split(" ")||[]}setDescribedByIds(n){let i=this._elementRef.nativeElement;n.length?i.setAttribute("aria-describedby",n.join(" ")):i.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let n=this._elementRef.nativeElement;return this._isNativeSelect&&(n.multiple||n.size>1)}_iOSKeyupListener=n=>{let i=n.target;!i.value&&i.selectionStart===0&&i.selectionEnd===0&&(i.setSelectionRange(1,1),i.setSelectionRange(0,0))};_getReadonlyAttribute(){return this._isNativeSelect?null:this.readonly||this.disabled&&this.disabledInteractive?"true":null}static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:21,hostBindings:function(i,o){i&1&&Q("focus",function(){return o._focusChanged(!0)})("blur",function(){return o._focusChanged(!1)})("input",function(){return o._onInput()}),i&2&&(nr("id",o.id)("disabled",o.disabled&&!o.disabledInteractive)("required",o.required),pt("name",o.name||null)("readonly",o._getReadonlyAttribute())("aria-disabled",o.disabled&&o.disabledInteractive?"true":null)("aria-invalid",o.empty&&o.required?null:o.errorState)("aria-required",o.required)("id",o.id),be("mat-input-server",o._isServer)("mat-mdc-form-field-textarea-control",o._isInFormField&&o._isTextarea)("mat-mdc-form-field-input-control",o._isInFormField)("mat-mdc-input-disabled-interactive",o.disabledInteractive)("mdc-text-field__input",o._isInFormField)("mat-mdc-native-select-inline",o._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly",disabledInteractive:[2,"disabledInteractive","disabledInteractive",$]},exportAs:["matInput"],features:[kt([{provide:IG,useExisting:e}]),sn]})}return e})(),ry=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({imports:[ft,va,va,YP,ft]})}return e})();var WZe={capture:!0},qZe=["focus","mousedown","mouseenter","touchstart"],TG="mat-ripple-loader-uninitialized",PG="mat-ripple-loader-class-name",ume="mat-ripple-loader-centered",eA="mat-ripple-loader-disabled",tA=(()=>{class e{_document=k(Je);_animationsDisabled=fi();_globalRippleOptions=k(Af,{optional:!0});_platform=k(tn);_ngZone=k(me);_injector=k(Ke);_eventCleanups;_hosts=new Map;constructor(){let n=k(xi).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>qZe.map(i=>n.listen(this._document,i,this._onInteraction,WZe)))}ngOnDestroy(){let n=this._hosts.keys();for(let i of n)this.destroyRipple(i);this._eventCleanups.forEach(i=>i())}configureRipple(n,i){n.setAttribute(TG,this._globalRippleOptions?.namespace??""),(i.className||!n.hasAttribute(PG))&&n.setAttribute(PG,i.className||""),i.centered&&n.setAttribute(ume,""),i.disabled&&n.setAttribute(eA,"")}setDisabled(n,i){let o=this._hosts.get(n);o?(o.target.rippleDisabled=i,!i&&!o.hasSetUpEvents&&(o.hasSetUpEvents=!0,o.renderer.setupTriggerEvents(n))):i?n.setAttribute(eA,""):n.removeAttribute(eA)}_onInteraction=n=>{let i=Co(n);if(i instanceof HTMLElement){let o=i.closest(`[${TG}="${this._globalRippleOptions?.namespace??""}"]`);o&&this._createRipple(o)}};_createRipple(n){if(!this._document||this._hosts.has(n))return;n.querySelector(".mat-ripple")?.remove();let i=this._document.createElement("span");i.classList.add("mat-ripple",n.getAttribute(PG)),n.append(i);let o=this._globalRippleOptions,r=this._animationsDisabled?0:o?.animation?.enterDuration??iS.enterDuration,s=this._animationsDisabled?0:o?.animation?.exitDuration??iS.exitDuration,a={rippleDisabled:this._animationsDisabled||o?.disabled||n.hasAttribute(eA),rippleConfig:{centered:n.hasAttribute(ume),terminateOnPointerUp:o?.terminateOnPointerUp,animation:{enterDuration:r,exitDuration:s}}},l=new Pf(a,this._ngZone,i,this._platform,this._injector),c=!a.rippleDisabled;c&&l.setupTriggerEvents(n),this._hosts.set(n,{target:a,renderer:l,hasSetUpEvents:c}),n.removeAttribute(TG)}destroyRipple(n){let i=this._hosts.get(n);i&&(i.renderer._removeTriggerEvents(),this._hosts.delete(n))}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var KZe=["*",[["mat-chip-avatar"],["","matChipAvatar",""]],[["mat-chip-trailing-icon"],["","matChipRemove",""],["","matChipTrailingIcon",""]]],ZZe=["*","mat-chip-avatar, [matChipAvatar]","mat-chip-trailing-icon,[matChipRemove],[matChipTrailingIcon]"];function YZe(e,t){e&1&&(M(0,"span",3),st(1,1),R())}function QZe(e,t){e&1&&(M(0,"span",6),st(1,2),R())}var JZe=new q("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})}),hme=new q("MatChipAvatar"),pme=new q("MatChipTrailingIcon"),fme=new q("MatChipEdit"),AG=new q("MatChipRemove"),mme=new q("MatChip"),OG=(()=>{class e{_elementRef=k(Oe);_parentChip=k(mme);isInteractive=!0;_isPrimary=!0;_isLeading=!1;get disabled(){return this._disabled||this._parentChip?.disabled||!1}set disabled(n){this._disabled=n}_disabled=!1;tabIndex=-1;_allowFocusWhenDisabled=!1;_getDisabledAttribute(){return this.disabled&&!this._allowFocusWhenDisabled?"":null}_getTabindex(){return this.disabled&&!this._allowFocusWhenDisabled||!this.isInteractive?null:this.tabIndex.toString()}constructor(){k(ni).load(nl),this._elementRef.nativeElement.nodeName==="BUTTON"&&this._elementRef.nativeElement.setAttribute("type","button")}focus(){this._elementRef.nativeElement.focus()}_handleClick(n){!this.disabled&&this.isInteractive&&this._isPrimary&&(n.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}_handleKeydown(n){(n.keyCode===13||n.keyCode===32)&&!this.disabled&&this.isInteractive&&this._isPrimary&&!this._parentChip._isEditing&&(n.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e,selectors:[["","matChipAction",""]],hostAttrs:[1,"mdc-evolution-chip__action","mat-mdc-chip-action"],hostVars:11,hostBindings:function(i,o){i&1&&Q("click",function(s){return o._handleClick(s)})("keydown",function(s){return o._handleKeydown(s)}),i&2&&(pt("tabindex",o._getTabindex())("disabled",o._getDisabledAttribute())("aria-disabled",o.disabled),be("mdc-evolution-chip__action--primary",o._isPrimary)("mdc-evolution-chip__action--presentational",!o.isInteractive)("mdc-evolution-chip__action--secondary",!o._isPrimary)("mdc-evolution-chip__action--trailing",!o._isPrimary&&!o._isLeading))},inputs:{isInteractive:"isInteractive",disabled:[2,"disabled","disabled",$],tabIndex:[2,"tabIndex","tabIndex",n=>n==null?-1:$r(n)],_allowFocusWhenDisabled:"_allowFocusWhenDisabled"}})}return e})();var gme=(()=>{class e extends OG{_isPrimary=!1;_handleClick(n){this.disabled||(n.stopPropagation(),n.preventDefault(),this._parentChip.remove())}_handleKeydown(n){(n.keyCode===13||n.keyCode===32)&&!this.disabled&&(n.stopPropagation(),n.preventDefault(),this._parentChip.remove())}static \u0275fac=(()=>{let n;return function(o){return(n||(n=gn(e)))(o||e)}})();static \u0275dir=ke({type:e,selectors:[["","matChipRemove",""]],hostAttrs:["role","button",1,"mat-mdc-chip-remove","mat-mdc-chip-trailing-icon","mat-focus-indicator","mdc-evolution-chip__icon","mdc-evolution-chip__icon--trailing"],hostVars:1,hostBindings:function(i,o){i&2&&pt("aria-hidden",null)},features:[kt([{provide:AG,useExisting:e}]),Tt]})}return e})(),vme=(()=>{class e{_changeDetectorRef=k(dn);_elementRef=k(Oe);_tagName=k(iQ);_ngZone=k(me);_focusMonitor=k(os);_globalRippleOptions=k(Af,{optional:!0});_document=k(Je);_onFocus=new ie;_onBlur=new ie;_isBasicChip;role=null;_hasFocusInternal=!1;_pendingFocus;_actionChanges;_animationsDisabled=fi();_allLeadingIcons;_allTrailingIcons;_allEditIcons;_allRemoveIcons;_hasFocus(){return this._hasFocusInternal}id=k(Zi).getId("mat-mdc-chip-");ariaLabel=null;ariaDescription=null;_chipListDisabled=!1;_hadFocusOnRemove=!1;_textElement;get value(){return this._value!==void 0?this._value:this._textElement.textContent.trim()}set value(n){this._value=n}_value;color;removable=!0;highlighted=!1;disableRipple=!1;get disabled(){return this._disabled||this._chipListDisabled}set disabled(n){this._disabled=n}_disabled=!1;removed=new V;destroyed=new V;basicChipAttrName="mat-basic-chip";leadingIcon;editIcon;trailingIcon;removeIcon;primaryAction;_rippleLoader=k(tA);_injector=k(Ke);constructor(){let n=k(ni);n.load(nl),n.load(ih),this._monitorFocus(),this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-chip-ripple",disabled:this._isRippleDisabled()})}ngOnInit(){this._isBasicChip=this._elementRef.nativeElement.hasAttribute(this.basicChipAttrName)||this._tagName.toLowerCase()===this.basicChipAttrName}ngAfterViewInit(){this._textElement=this._elementRef.nativeElement.querySelector(".mat-mdc-chip-action-label"),this._pendingFocus&&(this._pendingFocus=!1,this.focus())}ngAfterContentInit(){this._actionChanges=Ni(this._allLeadingIcons.changes,this._allTrailingIcons.changes,this._allEditIcons.changes,this._allRemoveIcons.changes).subscribe(()=>this._changeDetectorRef.markForCheck())}ngDoCheck(){this._rippleLoader.setDisabled(this._elementRef.nativeElement,this._isRippleDisabled())}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement),this._actionChanges?.unsubscribe(),this.destroyed.emit({chip:this}),this.destroyed.complete()}remove(){this.removable&&(this._hadFocusOnRemove=this._hasFocus(),this.removed.emit({chip:this}))}_isRippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||this._isBasicChip||!this._hasInteractiveActions()||!!this._globalRippleOptions?.disabled}_hasTrailingIcon(){return!!(this.trailingIcon||this.removeIcon)}_handleKeydown(n){(n.keyCode===8&&!n.repeat||n.keyCode===46)&&(n.preventDefault(),this.remove())}focus(){this.disabled||(this.primaryAction?this.primaryAction.focus():this._pendingFocus=!0)}_getSourceAction(n){return this._getActions().find(i=>{let o=i._elementRef.nativeElement;return o===n||o.contains(n)})}_getActions(){let n=[];return this.editIcon&&n.push(this.editIcon),this.primaryAction&&n.push(this.primaryAction),this.removeIcon&&n.push(this.removeIcon),this.trailingIcon&&n.push(this.trailingIcon),n}_handlePrimaryActionInteraction(){}_hasInteractiveActions(){return this._getActions().some(n=>n.isInteractive)}_edit(n){}_monitorFocus(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(n=>{let i=n!==null;i!==this._hasFocusInternal&&(this._hasFocusInternal=i,i?this._onFocus.next({chip:this}):(this._changeDetectorRef.markForCheck(),setTimeout(()=>this._ngZone.run(()=>this._onBlur.next({chip:this})))))})}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=pe({type:e,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(i,o,r){if(i&1&&No(r,hme,5)(r,fme,5)(r,pme,5)(r,AG,5)(r,hme,5)(r,pme,5)(r,fme,5)(r,AG,5),i&2){let s;Ye(s=Qe())&&(o.leadingIcon=s.first),Ye(s=Qe())&&(o.editIcon=s.first),Ye(s=Qe())&&(o.trailingIcon=s.first),Ye(s=Qe())&&(o.removeIcon=s.first),Ye(s=Qe())&&(o._allLeadingIcons=s),Ye(s=Qe())&&(o._allTrailingIcons=s),Ye(s=Qe())&&(o._allEditIcons=s),Ye(s=Qe())&&(o._allRemoveIcons=s)}},viewQuery:function(i,o){if(i&1&&bn(OG,5),i&2){let r;Ye(r=Qe())&&(o.primaryAction=r.first)}},hostAttrs:[1,"mat-mdc-chip"],hostVars:31,hostBindings:function(i,o){i&1&&Q("keydown",function(s){return o._handleKeydown(s)}),i&2&&(nr("id",o.id),pt("role",o.role)("aria-label",o.ariaLabel),ki("mat-"+(o.color||"primary")),be("mdc-evolution-chip",!o._isBasicChip)("mdc-evolution-chip--disabled",o.disabled)("mdc-evolution-chip--with-trailing-action",o._hasTrailingIcon())("mdc-evolution-chip--with-primary-graphic",o.leadingIcon)("mdc-evolution-chip--with-primary-icon",o.leadingIcon)("mdc-evolution-chip--with-avatar",o.leadingIcon)("mat-mdc-chip-with-avatar",o.leadingIcon)("mat-mdc-chip-highlighted",o.highlighted)("mat-mdc-chip-disabled",o.disabled)("mat-mdc-basic-chip",o._isBasicChip)("mat-mdc-standard-chip",!o._isBasicChip)("mat-mdc-chip-with-trailing-icon",o._hasTrailingIcon())("_mat-animation-noopable",o._animationsDisabled))},inputs:{role:"role",id:"id",ariaLabel:[0,"aria-label","ariaLabel"],ariaDescription:[0,"aria-description","ariaDescription"],value:"value",color:"color",removable:[2,"removable","removable",$],highlighted:[2,"highlighted","highlighted",$],disableRipple:[2,"disableRipple","disableRipple",$],disabled:[2,"disabled","disabled",$]},outputs:{removed:"removed",destroyed:"destroyed"},exportAs:["matChip"],features:[kt([{provide:mme,useExisting:e}])],ngContentSelectors:ZZe,decls:8,vars:3,consts:[[1,"mat-mdc-chip-focus-overlay"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--primary"],["matChipAction","",3,"isInteractive"],[1,"mdc-evolution-chip__graphic","mat-mdc-chip-graphic"],[1,"mdc-evolution-chip__text-label","mat-mdc-chip-action-label"],[1,"mat-mdc-chip-primary-focus-indicator","mat-focus-indicator"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--trailing"]],template:function(i,o){i&1&&(yn(KZe),Ae(0,"span",0),M(1,"span",1)(2,"span",2),K(3,YZe,2,0,"span",3),M(4,"span",4),st(5),Ae(6,"span",5),R()()(),K(7,QZe,2,0,"span",6)),i&2&&(P(2),le("isInteractive",!1),P(),Z(o.leadingIcon?3:-1),P(4),Z(o._hasTrailingIcon()?7:-1))},dependencies:[OG],styles:[`.mdc-evolution-chip,.mdc-evolution-chip__cell,.mdc-evolution-chip__action{display:inline-flex;align-items:center}.mdc-evolution-chip{position:relative;max-width:100%}.mdc-evolution-chip__cell,.mdc-evolution-chip__action{height:100%}.mdc-evolution-chip__cell--primary{flex-basis:100%;overflow-x:hidden}.mdc-evolution-chip__cell--trailing{flex:1 0 auto}.mdc-evolution-chip__action{align-items:center;background:none;border:none;box-sizing:content-box;cursor:pointer;display:inline-flex;justify-content:center;outline:none;padding:0;text-decoration:none;color:inherit}.mdc-evolution-chip__action--presentational{cursor:auto}.mdc-evolution-chip--disabled,.mdc-evolution-chip__action:disabled{pointer-events:none}@media(forced-colors: active){.mdc-evolution-chip--disabled,.mdc-evolution-chip__action:disabled{forced-color-adjust:none}}.mdc-evolution-chip__action--primary{font:inherit;letter-spacing:inherit;white-space:inherit;overflow-x:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary::before{border-width:var(--mat-chip-outline-width, 1px);border-radius:var(--mat-chip-container-shape-radius, 8px);box-sizing:border-box;content:"";height:100%;left:0;position:absolute;pointer-events:none;top:0;width:100%;z-index:1;border-style:solid}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--primary::before{border-color:var(--mat-chip-outline-color, var(--mat-sys-outline))}.mdc-evolution-chip__action--primary:not(.mdc-evolution-chip__action--presentational):not(.mdc-ripple-upgraded):focus::before{border-color:var(--mat-chip-focus-outline-color, var(--mat-sys-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--primary::before{border-color:var(--mat-chip-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__action--primary::before{border-width:var(--mat-chip-flat-selected-outline-width, 0)}.mat-mdc-basic-chip .mdc-evolution-chip__action--primary{font:inherit}.mat-mdc-standard-chip.mdc-evolution-chip--with-leading-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-leading-action .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-leading-action.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip__action--secondary{position:relative;overflow:visible}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--secondary{color:var(--mat-chip-with-trailing-icon-trailing-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--secondary{color:var(--mat-chip-with-trailing-icon-disabled-trailing-icon-color, var(--mat-sys-on-surface))}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--secondary{padding-left:8px;padding-right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--secondary{padding-left:8px;padding-right:8px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--secondary{padding-left:8px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--secondary{padding-left:8px;padding-right:8px}.mdc-evolution-chip__text-label{-webkit-user-select:none;user-select:none;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__text-label{font-family:var(--mat-chip-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-chip-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-chip-label-text-size, var(--mat-sys-label-large-size));font-weight:var(--mat-chip-label-text-weight, var(--mat-sys-label-large-weight));letter-spacing:var(--mat-chip-label-text-tracking, var(--mat-sys-label-large-tracking))}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mat-chip-label-text-color, var(--mat-sys-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mat-chip-selected-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label,.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label{color:var(--mat-chip-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-evolution-chip__graphic{align-items:center;display:inline-flex;justify-content:center;overflow:hidden;pointer-events:none;position:relative;flex:1 0 auto}.mat-mdc-standard-chip .mdc-evolution-chip__graphic{width:var(--mat-chip-with-avatar-avatar-size, 24px);height:var(--mat-chip-with-avatar-avatar-size, 24px);font-size:var(--mat-chip-with-avatar-avatar-size, 24px)}.mdc-evolution-chip--selecting .mdc-evolution-chip__graphic{transition:width 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--selected):not(.mdc-evolution-chip--with-primary-icon) .mdc-evolution-chip__graphic{width:0}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-leading-action .mdc-evolution-chip__graphic{padding-left:0}.mdc-evolution-chip__checkmark{position:absolute;opacity:0;top:50%;left:50%;height:20px;width:20px}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__checkmark{color:var(--mat-chip-with-icon-selected-icon-color, var(--mat-sys-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__checkmark{color:var(--mat-chip-with-icon-disabled-icon-color, var(--mat-sys-on-surface))}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark{transition:transform 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-75%, -50%)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{transform:translate(-50%, -50%);opacity:1}.mdc-evolution-chip__checkmark-svg{display:block}.mdc-evolution-chip__checkmark-path{stroke-width:2px;stroke-dasharray:29.7833385;stroke-dashoffset:29.7833385;stroke:currentColor}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark-path{transition:stroke-dashoffset 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}@media(forced-colors: active){.mdc-evolution-chip__checkmark-path{stroke:CanvasText !important}}.mat-mdc-standard-chip .mdc-evolution-chip__icon--trailing{height:18px;width:18px;font-size:18px}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove{opacity:calc(var(--mat-chip-trailing-action-opacity, 1)*var(--mat-chip-with-trailing-icon-disabled-trailing-icon-opacity, 0.38))}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove:focus{opacity:calc(var(--mat-chip-trailing-action-focus-opacity, 1)*var(--mat-chip-with-trailing-icon-disabled-trailing-icon-opacity, 0.38))}.mat-mdc-standard-chip{border-radius:var(--mat-chip-container-shape-radius, 8px);height:var(--mat-chip-container-height, 32px)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled){background-color:var(--mat-chip-elevated-container-color, transparent)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{background-color:var(--mat-chip-elevated-disabled-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled){background-color:var(--mat-chip-elevated-selected-container-color, var(--mat-sys-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled{background-color:var(--mat-chip-flat-disabled-selected-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}@media(forced-colors: active){.mat-mdc-standard-chip{outline:solid 1px}}.mat-mdc-standard-chip .mdc-evolution-chip__icon--primary{border-radius:var(--mat-chip-with-avatar-avatar-shape-radius, 24px);width:var(--mat-chip-with-icon-icon-size, 18px);height:var(--mat-chip-with-icon-icon-size, 18px);font-size:var(--mat-chip-with-icon-icon-size, 18px)}.mdc-evolution-chip--selected .mdc-evolution-chip__icon--primary{opacity:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__icon--primary{color:var(--mat-chip-with-icon-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--primary{color:var(--mat-chip-with-icon-disabled-icon-color, var(--mat-sys-on-surface))}.mat-mdc-chip-highlighted{--mat-chip-with-icon-icon-color: var(--mat-chip-with-icon-selected-icon-color, var(--mat-sys-on-secondary-container));--mat-chip-elevated-container-color: var(--mat-chip-elevated-selected-container-color, var(--mat-sys-secondary-container));--mat-chip-label-text-color: var(--mat-chip-selected-label-text-color, var(--mat-sys-on-secondary-container));--mat-chip-outline-width: var(--mat-chip-flat-selected-outline-width, 0)}.mat-mdc-chip-focus-overlay{background:var(--mat-chip-focus-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-chip-selected .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted .mat-mdc-chip-focus-overlay{background:var(--mat-chip-selected-focus-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-mdc-chip:hover .mat-mdc-chip-focus-overlay{background:var(--mat-chip-hover-state-layer-color, var(--mat-sys-on-surface-variant));opacity:var(--mat-chip-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-chip-focus-overlay .mat-mdc-chip-selected:hover,.mat-mdc-chip-highlighted:hover .mat-mdc-chip-focus-overlay{background:var(--mat-chip-selected-hover-state-layer-color, var(--mat-sys-on-secondary-container));opacity:var(--mat-chip-selected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-chip.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mat-chip-focus-state-layer-color, var(--mat-sys-on-surface-variant));opacity:var(--mat-chip-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-chip-selected.cdk-focused .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mat-chip-selected-focus-state-layer-color, var(--mat-sys-on-secondary-container));opacity:var(--mat-chip-selected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-evolution-chip--disabled:not(.mdc-evolution-chip--selected) .mat-mdc-chip-avatar{opacity:var(--mat-chip-with-avatar-disabled-avatar-opacity, 0.38)}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{opacity:var(--mat-chip-with-trailing-icon-disabled-trailing-icon-opacity, 0.38)}.mdc-evolution-chip--disabled.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{opacity:var(--mat-chip-with-icon-disabled-icon-opacity, 0.38)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{opacity:var(--mat-chip-disabled-container-opacity, 1)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-trailing-icon-color, var(--mat-sys-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-disabled-trailing-icon-color, var(--mat-sys-on-surface))}.mat-mdc-chip-edit,.mat-mdc-chip-remove{opacity:var(--mat-chip-trailing-action-opacity, 1)}.mat-mdc-chip-edit:focus,.mat-mdc-chip-remove:focus{opacity:var(--mat-chip-trailing-action-focus-opacity, 1)}.mat-mdc-chip-edit::after,.mat-mdc-chip-remove::after{background-color:var(--mat-chip-trailing-action-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-chip-edit:hover::after,.mat-mdc-chip-remove:hover::after{opacity:var(--mat-chip-trailing-action-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-chip-edit:focus::after,.mat-mdc-chip-remove:focus::after{opacity:var(--mat-chip-trailing-action-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-chip-selected .mat-mdc-chip-remove::after,.mat-mdc-chip-highlighted .mat-mdc-chip-remove::after{background-color:var(--mat-chip-selected-trailing-action-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-mdc-standard-chip{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-standard-chip .mdc-evolution-chip__cell--primary,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip .mat-mdc-chip-action-label{overflow:visible}.mat-mdc-standard-chip .mat-mdc-chip-graphic,.mat-mdc-standard-chip .mat-mdc-chip-trailing-icon{box-sizing:content-box}.mat-mdc-standard-chip._mat-animation-noopable,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__graphic,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark-path{transition-duration:1ms;animation-duration:1ms}.mat-mdc-chip-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;opacity:0;border-radius:inherit;transition:opacity 150ms linear}._mat-animation-noopable .mat-mdc-chip-focus-overlay{transition:none}.mat-mdc-basic-chip .mat-mdc-chip-focus-overlay{display:none}.mat-mdc-chip .mat-ripple.mat-mdc-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-chip-avatar{text-align:center;line-height:1;color:var(--mat-chip-with-icon-icon-color, currentColor)}.mat-mdc-chip{position:relative;z-index:0}.mat-mdc-chip-action-label{text-align:left;z-index:1}[dir=rtl] .mat-mdc-chip-action-label{text-align:right}.mat-mdc-chip.mdc-evolution-chip--with-trailing-action .mat-mdc-chip-action-label{position:relative}.mat-mdc-chip-action-label .mat-mdc-chip-primary-focus-indicator{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.mat-mdc-chip-action-label .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-chip-edit::before,.mat-mdc-chip-remove::before{margin:calc(var(--mat-focus-indicator-border-width, 3px)*-1);left:8px;right:8px}.mat-mdc-chip-edit::after,.mat-mdc-chip-remove::after{content:"";display:block;opacity:0;position:absolute;top:-3px;bottom:-3px;left:5px;right:5px;border-radius:50%;box-sizing:border-box;padding:12px;margin:-12px;background-clip:content-box}.mat-mdc-chip-edit .mat-icon,.mat-mdc-chip-remove .mat-icon{width:18px;height:18px;font-size:18px;box-sizing:content-box}.mat-chip-edit-input{cursor:text;display:inline-block;color:inherit;outline:0}@media(forced-colors: active){.mat-mdc-chip-selected:not(.mat-mdc-chip-multiple){outline-width:3px}}.mat-mdc-chip-action:focus .mat-focus-indicator::before{content:""}.mdc-evolution-chip__icon,.mat-mdc-chip-edit .mat-icon,.mat-mdc-chip-remove .mat-icon{min-height:fit-content}img.mdc-evolution-chip__icon{min-height:0}
`],encapsulation:2,changeDetection:0})}return e})();var _me=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({providers:[JP,{provide:JZe,useValue:{separatorKeyCodes:[13]}}],imports:[ft,cc,ft]})}return e})();var eYe=["autosize"],FG=(e,t)=>t.name;function tYe(e,t){if(e&1){let n=Ge();M(0,"button",15),Q("click",function(){let o=J(n).$implicit,r=A();return X(r.selectTool(o))}),M(1,"mat-icon"),N(2,"build"),R(),M(3,"span"),N(4),R()()}if(e&2){let n=t.$implicit;P(4),nt(n.title)}}function nYe(e,t){if(e&1){let n=Ge();M(0,"button",15),Q("click",function(){let o=J(n).$implicit,r=A();return X(r.selectResource(o))}),M(1,"mat-icon"),N(2,"link"),R(),M(3,"span"),N(4),R()()}if(e&2){let n=t.$implicit;P(4),nt(n.title)}}function iYe(e,t){if(e&1){let n=Ge();M(0,"button",15),Q("click",function(){let o=J(n).$implicit,r=A();return X(r.selectPrompt(o))}),M(1,"mat-icon"),N(2,"lightbulb"),R(),M(3,"span"),N(4),R()()}if(e&2){let n=t.$implicit;P(4),nt(n.title)}}function oYe(e,t){if(e&1){let n=Ge();M(0,"mat-chip",18),Q("removed",function(){J(n);let o=A(2);return X(o.clearSelection("tool",o.selectedTool))}),M(1,"mat-icon",19),N(2,"tune"),R(),N(3),M(4,"button",20)(5,"mat-icon"),N(6,"cancel"),R()()()}if(e&2){let n=A(2);P(3),qe(" ",n.selectedTool.title," ")}}function rYe(e,t){if(e&1){let n=Ge();M(0,"mat-chip",18),Q("removed",function(){J(n);let o=A(2);return X(o.clearSelection("resource",o.selectedResource))}),M(1,"mat-icon",19),N(2,"attachment"),R(),N(3),M(4,"button",20)(5,"mat-icon"),N(6,"cancel"),R()()()}if(e&2){let n=A(2);P(3),qe(" ",n.selectedResource.title," ")}}function sYe(e,t){if(e&1){let n=Ge();M(0,"mat-chip",18),Q("removed",function(){J(n);let o=A(2);return X(o.clearSelection("prompt",o.selectedPrompt))}),M(1,"mat-icon",19),N(2,"lightbulb"),R(),N(3),M(4,"button",20)(5,"mat-icon"),N(6,"cancel"),R()()()}if(e&2){let n=A(2);P(3),qe(" ",n.selectedPrompt.title," ")}}function aYe(e,t){if(e&1&&(M(0,"div",14)(1,"div",16),K(2,oYe,7,1,"mat-chip",17),K(3,rYe,7,1,"mat-chip",17),K(4,sYe,7,1,"mat-chip",17),R()()),e&2){let n=A();P(2),Z(n.selectedTool?2:-1),P(),Z(n.selectedResource?3:-1),P(),Z(n.selectedPrompt?4:-1)}}var nA=class e{constructor(t){this.mcpService=t}_injector=k(Ke);autosize;sendMessage=new V;sendTool=new V;sendResource=new V;sendPrompt=new V;message="";showToolsMenu=!1;showResourcesMenu=!1;showPromptsMenu=!1;tools=[];resources=[];prompts=[];selectedTool=null;selectedResource=null;selectedPrompt=null;isConnected=!1;subs=new Mt;ngOnInit(){this.subs.add(this.mcpService.connectionStatus$.pipe(zt(t=>t===!0)).subscribe(t=>{console.log("mcp input-box : ",t),this.subs.add(this.mcpService.tools$.subscribe(n=>this.tools=n)),this.subs.add(this.mcpService.promtps$.subscribe(n=>this.prompts=n)),this.subs.add(this.mcpService.resources$.subscribe(n=>this.resources=n))})),this.triggerResize()}triggerResize(){ai(()=>{this.autosize.resizeToFitContent(!0)},{injector:this._injector})}submitMessage(t){t&&t.preventDefault(),this.message.trim()&&(this.sendMessage.emit(this.message.trim()),this.message="")}selectTool(t){this.selectedTool&&this.tools.push(this.selectedTool),this.tools=this.tools.filter(n=>n.name!==t.name),this.selectedTool=t,this.showToolsMenu=!1,this.sendTool.emit(this.selectedTool)}selectResource(t){this.selectedResource&&this.resources.push(this.selectedResource),this.resources=this.resources.filter(n=>n.name!==t.name),this.selectedResource=t,this.showResourcesMenu=!1}selectPrompt(t){this.selectedPrompt&&this.prompts.push(this.selectedPrompt),this.prompts=this.prompts.filter(n=>n.name!==t.name),this.selectedPrompt=t,this.showPromptsMenu=!1}ngOnDestroy(){this.subs.unsubscribe()}clearSelection(t,n){switch(t){case"prompt":this.selectedPrompt=null,this.prompts.push(n);break;case"resource":this.selectedResource=null,this.resources.push(n);break;case"tool":this.selectedTool=null,this.tools.push(n),this.sendTool.emit(this.selectedTool);break;default:break}}static \u0275fac=function(n){return new(n||e)(ye(Mo))};static \u0275cmp=pe({type:e,selectors:[["app-input-box"]],viewQuery:function(n,i){if(n&1&&bn(eYe,5),n&2){let o;Ye(o=Qe())&&(i.autosize=o.first)}},outputs:{sendMessage:"sendMessage",sendTool:"sendTool",sendResource:"sendResource",sendPrompt:"sendPrompt"},decls:31,vars:6,consts:[["autosize","cdkTextareaAutosize"],["toolsMenu","matMenu"],["resourcesMenu","matMenu"],["promptsMenu","matMenu"],[1,"input-container"],[1,"input-box"],["appearance","outline",1,"full-width"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","0.5","cdkAutosizeMaxRows","10","placeholder","Type a message...",3,"ngModelChange","keydown.enter","ngModel"],["mat-icon-button","",1,"send-button",3,"click","disabled"],[1,"action-buttons"],["mat-icon-button","","matTooltip","Tools",1,"action-button",3,"matMenuTriggerFor"],["mat-menu-item",""],["mat-icon-button","","matTooltip","Resources",1,"action-button",3,"matMenuTriggerFor"],["mat-icon-button","","matTooltip","Prompts",1,"action-button",3,"matMenuTriggerFor"],[1,"selected-chips"],["mat-menu-item","",3,"click"],[1,"chips-container"],[1,"custom-chip"],[1,"custom-chip",3,"removed"],[1,"chip-icon"],["matChipRemove","",1,"chip-remove"]],template:function(n,i){if(n&1){let o=Ge();M(0,"div",4)(1,"div",5)(2,"mat-form-field",6)(3,"textarea",7,0),or("ngModelChange",function(s){return J(o),Sr(i.message,s)||(i.message=s),X(s)}),Q("keydown.enter",function(s){return J(o),X(i.submitMessage(s))}),R()(),M(5,"button",8),Q("click",function(){return J(o),X(i.submitMessage())}),M(6,"mat-icon"),N(7,"send"),R()()(),M(8,"div",9)(9,"button",10)(10,"mat-icon"),N(11,"tune"),R()(),M(12,"mat-menu",null,1),an(14,tYe,5,1,"button",11,FG),R(),M(16,"button",12)(17,"mat-icon"),N(18,"attachment"),R()(),M(19,"mat-menu",null,2),an(21,nYe,5,1,"button",11,FG),R(),M(23,"button",13)(24,"mat-icon"),N(25,"lightbulb"),R()(),M(26,"mat-menu",null,3),an(28,iYe,5,1,"button",11,FG),R()(),K(30,aYe,5,3,"div",14),R()}if(n&2){let o=bs(13),r=bs(20),s=bs(27);P(3),ir("ngModel",i.message),P(2),le("disabled",!i.message.trim()),P(4),le("matMenuTriggerFor",o),P(5),ln(i.tools),P(2),le("matMenuTriggerFor",r),P(5),ln(i.resources),P(2),le("matMenuTriggerFor",s),P(5),ln(i.prompts),P(2),Z(i.selectedTool||i.selectedResource||i.selectedPrompt?30:-1)}},dependencies:[is,da,ua,Md,j_,Vfe,ny,lS,zfe,ga,ma,ry,oy,Nf,Yfe,va,_me,vme,gme,YP],styles:[".input-container[_ngcontent-%COMP%]{padding:5px;background:#fff;border-radius:12px;box-shadow:0 2px 12px #00000014;border:1px solid #e5e7eb;margin-bottom:16px}.input-main-row[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:12px;width:100%}.input-box[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:12px;flex:1;min-width:0}.mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}  .mdc-text-field--outlined{--mdc-outlined-text-field-container-shape: 10px;--mdc-outlined-text-field-outline-width: 1px;--mdc-outlined-text-field-outline-color: #e5e7eb}  .mdc-text-field--outlined:not(.mdc-text-field--disabled):hover .mdc-notched-outline{border-color:#9ca3af}  .mat-mdc-form-field-textarea .mat-mdc-form-field-input-control{min-height:44px;padding:12px 0;line-height:1.5;font-size:.9375rem}.send-button[_ngcontent-%COMP%]{width:44px;height:44px;background:#3b82f6;color:#fff;border-radius:10px;flex-shrink:0;margin-bottom:25px;transition:all .2s ease}.send-button[_ngcontent-%COMP%]:hover:not([disabled]){background:#2563eb;transform:translateY(-1px)}.send-button[disabled][_ngcontent-%COMP%]{background:#9ca3af;cursor:not-allowed;opacity:.6;margin-bottom:28px}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;flex-shrink:0;padding-bottom:0}.action-button[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;border:1px solid #e5e7eb;background:#fff;color:#6b7280;transition:all .2s ease}.action-button[_ngcontent-%COMP%]:hover{background:#f9fafb;border-color:#d1d5db;color:#374151;transform:translateY(-1px)}.selected-chips[_ngcontent-%COMP%]{margin-top:5px;padding-top:5px;border-top:1px solid #f3f4f6}.chips-label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;color:#6b7280;margin-bottom:8px;text-transform:uppercase;letter-spacing:.05em}.chips-container[_ngcontent-%COMP%]{display:flex;gap:4px;flex-wrap:wrap}.custom-chip[_ngcontent-%COMP%]{background:#f8fafc!important;border:1px solid #e2e8f0!important;border-radius:20px!important;padding:6px 12px!important;height:auto!important;font-size:.875rem!important;color:#1e293b!important;transition:all .2s ease!important}.custom-chip[_ngcontent-%COMP%]:hover{background:#f1f5f9!important;border-color:#cbd5e1!important;transform:translateY(-1px)}.chip-icon[_ngcontent-%COMP%]{margin-right:6px!important;font-size:16px!important;width:16px!important;height:16px!important;color:#64748b!important}.chip-remove[_ngcontent-%COMP%]{color:#94a3b8!important;margin-left:6px!important;width:16px!important;height:16px!important;font-size:16px!important}.chip-remove[_ngcontent-%COMP%]:hover{color:#64748b!important}  .mat-mdc-menu-panel{border-radius:10px!important;box-shadow:0 10px 25px #0000001a!important;border:1px solid #e5e7eb!important;max-height:400px!important}  .mat-mdc-menu-item{min-height:44px!important;font-size:.875rem!important}  .mat-mdc-menu-item .mat-icon{margin-right:12px!important;color:#6b7280}@media(max-width:768px){.input-container[_ngcontent-%COMP%]{padding:5px;border-radius:10px}.input-main-row[_ngcontent-%COMP%], .input-box[_ngcontent-%COMP%]{gap:8px}.action-buttons[_ngcontent-%COMP%]{gap:6px}.action-button[_ngcontent-%COMP%], .send-button[_ngcontent-%COMP%]{width:40px;height:40px}.selected-chips[_ngcontent-%COMP%]{margin-top:12px;padding-top:12px}}@media(max-width:480px){.input-container[_ngcontent-%COMP%]{padding:5px;border-radius:8px}.input-main-row[_ngcontent-%COMP%]{flex-direction:column;gap:12px;align-items:stretch}.action-buttons[_ngcontent-%COMP%]{padding-bottom:0}.input-box[_ngcontent-%COMP%]{gap:8px}  .mat-mdc-form-field-textarea .mat-mdc-form-field-input-control{min-height:40px;font-size:.875rem}.chips-container[_ngcontent-%COMP%]{gap:6px}.custom-chip[_ngcontent-%COMP%]{font-size:.8125rem!important;padding:5px 10px!important}}@keyframes _ngcontent-%COMP%_chipAppear{0%{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}.custom-chip[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_chipAppear .2s ease-out}[_ngcontent-%COMP%]:focus-visible{outline:2px solid #3b82f6;outline-offset:2px}@media(prefers-color-scheme:dark){.input-container[_ngcontent-%COMP%]{background:#1f2937;border-color:#374151;box-shadow:0 2px 12px #0003}.action-button[_ngcontent-%COMP%]{background:#374151;border-color:#4b5563;color:#d1d5db}.action-button[_ngcontent-%COMP%]:hover{background:#4b5563;border-color:#6b7280;color:#fff}.custom-chip[_ngcontent-%COMP%]{background:#374151!important;border-color:#4b5563!important;color:#e5e7eb!important}.custom-chip[_ngcontent-%COMP%]:hover{background:#4b5563!important}.chip-icon[_ngcontent-%COMP%]{color:#9ca3af!important}.chips-label[_ngcontent-%COMP%]{color:#9ca3af}.selected-chips[_ngcontent-%COMP%]{border-top-color:#374151}}"]})};var fn=CO(bme());var sy=class e{height="400px";featureDetails=[];geoJsonData=null;wmsLayers=[];center=[0,0];zoom=2;showPopup=!0;useGeoJson=!1;featureClick=new V;map;featureLayer=fn.layerGroup();geoJsonLayer=null;wmsLayersGroup=fn.layerGroup();selectedFeature=null;mapId="map-"+Math.random().toString(36).substr(2,9);ngOnInit(){}ngAfterViewInit(){let t=document.getElementById(this.mapId);t&&(t.style.height=this.height,t.style.width="100%"),this.initializeMap()}ngOnChanges(t){t.featureDetails&&this.map&&(console.log("Features : ",t.featureDetails),this.updateFeatures()),t.geoJsonData&&this.map&&this.updateGeoJsonFeatures(),t.wmsLayers&&this.map&&this.updateWMSLayers(),(t.center||t.zoom)&&this.map&&this.map.setView(this.center,this.zoom),t.useGeoJson&&this.map&&(this.useGeoJson&&this.geoJsonData?this.updateGeoJsonFeatures():this.updateFeatures())}initializeMap(){this.map=fn.map(this.mapId).setView(this.center,this.zoom),fn.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xA9 OpenStreetMap contributors",maxZoom:19}).addTo(this.map),this.featureLayer.addTo(this.map),this.wmsLayersGroup.addTo(this.map),this.useGeoJson&&this.geoJsonData?this.updateGeoJsonFeatures():this.updateFeatures(),this.updateWMSLayers()}updateWMSLayers(){this.wmsLayersGroup.clearLayers(),this.wmsLayers.forEach((t,n)=>{fn.tileLayer.wms(t.url,{layers:t.layers,version:t.version||"1.3.0",format:t.format||"image/png",transparent:t.transparent!==void 0?t.transparent:!0,attribution:t.attribution,opacity:t.opacity||.7}).addTo(this.wmsLayersGroup)})}updateFeatures(){this.featureLayer.clearLayers(),this.geoJsonLayer&&(this.map.removeLayer(this.geoJsonLayer),this.geoJsonLayer=null);let t=[],n=fn.latLngBounds([]);this.featureDetails.forEach(i=>{let o=this.createLayerFromFeature(i);if(o){if(o.featureData=i,this.showPopup){let r=this.createPopupContent(i);o.bindPopup(r,{closeButton:!0,autoClose:!1,closeOnEscapeKey:!0})}o.on("click",()=>{this.selectedFeature=i,this.featureClick.emit(i)}),o.addTo(this.featureLayer),t.push(o),this.updateBoundsFromLayer(o,n)}}),t.length>0&&n.isValid()&&this.map.fitBounds(n,{padding:[20,20],maxZoom:15})}updateGeoJsonFeatures(){this.featureLayer.clearLayers(),this.geoJsonLayer&&(this.map.removeLayer(this.geoJsonLayer),this.geoJsonLayer=null),this.geoJsonData&&(this.geoJsonLayer=fn.geoJSON(this.geoJsonData,{pointToLayer:(t,n)=>this.createPointLayer(t,n),style:t=>this.getGeoJsonStyle(t),onEachFeature:(t,n)=>{this.bindGeoJsonEvents(t,n)}}).addTo(this.map),this.geoJsonLayer.getBounds().isValid()&&this.map.fitBounds(this.geoJsonLayer.getBounds(),{padding:[20,20],maxZoom:15}))}createLayerFromFeature(t){return t.geometry?this.createLayerFromGeometry(t.geometry,t):t.coordinates?fn.circleMarker([t.coordinates[0],t.coordinates[1]],{radius:t.style?.radius||8,color:t.style?.color||"#ff0000",fillColor:t.style?.fillColor||"#ff0000",fillOpacity:t.style?.fillOpacity||.7,weight:2,opacity:1}):null}createLayerFromGeometry(t,n){let i=t.type,o=t.coordinates;if(!o)return null;let r={color:n.style?.color||"#ff0000",fillColor:n.style?.fillColor||"#ff0000",fillOpacity:n.style?.fillOpacity||.7,weight:n.style?.weight||2,radius:n.style?.radius||8};switch(i){case"Point":return fn.circleMarker([o[1],o[0]],{radius:r.radius,color:r.color,fillColor:r.fillColor,fillOpacity:r.fillOpacity,weight:r.weight});case"LineString":let s=o.map(u=>fn.latLng(u[1],u[0]));return fn.polyline(s,{color:r.color,weight:r.weight,opacity:.8});case"Polygon":let a=this.parsePolygonCoordinates(o);return fn.polygon(a,{color:r.color,fillColor:r.fillColor,fillOpacity:r.fillOpacity,weight:r.weight});case"MultiLineString":let l=o.map(u=>u.map(h=>fn.latLng(h[1],h[0])));return fn.polyline(l,{color:r.color,weight:r.weight,opacity:.8});case"MultiPolygon":let c=o.map(u=>this.parsePolygonCoordinates(u));return fn.polygon(c,{color:r.color,fillColor:r.fillColor,fillOpacity:r.fillOpacity,weight:r.weight});default:return console.warn(`Unsupported geometry type: ${i}`),null}}parsePolygonCoordinates(t){return t.map(n=>n.map(i=>fn.latLng(i[1],i[0])))}createPointLayer(t,n){let i=t.properties||{};return fn.circleMarker(n,{radius:8,color:"#ff0000",fillColor:"#ff0000",fillOpacity:.7,weight:4})}getGeoJsonStyle(t){let n=t.properties||{},i=t.geometry?.type,o={color:"#ff0000",weight:2,opacity:1,fillOpacity:.7};switch(i){case"Point":return x(g({},o),{fillColor:"#ff0000"});case"LineString":return x(g({},o),{color:"#3388ff",fillColor:"#3388ff"});case"Polygon":return x(g({},o),{color:"#3388ff",fillColor:"#3388ff",fillOpacity:.3});default:return o}}bindGeoJsonEvents(t,n){if(this.showPopup){let i=this.createGeoJsonPopupContent(t);n.bindPopup(i,{closeButton:!0,autoClose:!1,closeOnEscapeKey:!0})}n.on("click",()=>{let i={id:t.id||t.properties?.id,name:t.properties?.name,type:t.geometry?.type,coordinates:t.geometry?.coordinates?.[0]&&t.geometry?.coordinates?.[1]?[t.geometry.coordinates[1],t.geometry.coordinates[0]]:null,properties:t.properties||{},geometry:t.geometry};this.selectedFeature=i,this.featureClick.emit(i)})}updateBoundsFromLayer(t,n){t instanceof fn.Marker||t instanceof fn.CircleMarker?n.extend(t.getLatLng()):(t instanceof fn.Polyline||t instanceof fn.Polygon)&&n.extend(t.getBounds())}createPopupContent(t){let n="";if(t.coordinates)n=`${t.coordinates[0].toFixed(4)}, ${t.coordinates[1].toFixed(4)}`;else if(t.geometry?.coordinates){let i=t.geometry.coordinates;t.geometry.type==="Point"&&(n=`${i[1].toFixed(4)}, ${i[0].toFixed(4)}`)}return`
      <div class="leaflet-popup-content">
        <div class="popup-header">
          <h4>${t.name||"Feature"}</h4>
        </div>
        <div class="popup-body">
          <p><strong>Type:</strong> ${t.type}</p>
          ${n?`<p><strong>Coordinates:</strong> ${n}</p>`:""}
          ${this.createPropertiesContent(t.properties)}
          ${t.geometry?`<p><strong>Geometry Type:</strong> ${t.geometry.type}</p>`:""}
        </div>
      </div>
    `}createGeoJsonPopupContent(t){let n=t.properties||{},i=t.geometry||{},o=n.name||t.id||"Feature",r=i.type||"Unknown",s="";return i.coordinates&&i.type==="Point"&&(s=`${i.coordinates[1].toFixed(4)}, ${i.coordinates[0].toFixed(4)}`),`
      <div class="leaflet-popup-content">
        <div class="popup-header">
          <h4>${o}</h4>
        </div>
        <div class="popup-body">
          <p><strong>Type:</strong> ${r}</p>
          ${s?`<p><strong>Coordinates:</strong> ${s}</p>`:""}
          ${this.createPropertiesContent(n)}
        </div>
      </div>
    `}createPropertiesContent(t){return!t||Object.keys(t).length===0?"":`
      <div class="properties-section">
        <h5>Properties:</h5>
        ${Object.keys(t).map(i=>`
        <div class="property-item">
          <strong>${i}:</strong> ${t[i]}
        </div>
      `).join("")}
      </div>
    `}addGeoJson(t){this.geoJsonData=t,this.useGeoJson=!0,this.map&&this.updateGeoJsonFeatures()}fitToFeatures(){let t=fn.latLngBounds([]);if(this.useGeoJson&&this.geoJsonLayer){this.map.fitBounds(this.geoJsonLayer.getBounds(),{padding:[20,20],maxZoom:15});return}!this.featureDetails||this.featureDetails.length===0||(this.featureDetails.forEach(n=>{n.geometry&&this.extendBoundsFromGeometry(t,n.geometry)}),t.isValid()&&this.map.fitBounds(t,{padding:[20,20],maxZoom:15}))}addFeature(t){this.featureDetails=[...this.featureDetails,t],this.updateFeatures()}removeFeature(t){this.featureDetails=this.featureDetails.filter(n=>n.id!==t),this.updateFeatures()}clearFeatures(){this.featureDetails=[],this.geoJsonData=null,this.useGeoJson=!1,this.featureLayer.clearLayers(),this.geoJsonLayer&&(this.map.removeLayer(this.geoJsonLayer),this.geoJsonLayer=null)}getObjectKeys(t){return t?Object.keys(t):[]}ngOnDestroy(){this.map&&this.map.remove()}extendBoundsFromGeometry(t,n){let{type:i,coordinates:o}=n;switch(i){case"Point":t.extend([o[1],o[0]]);break;case"LineString":o.forEach(r=>{t.extend([r[1],r[0]])});break;case"MultiLineString":o.forEach(r=>{r.forEach(s=>{t.extend([s[1],s[0]])})});break;case"Polygon":o.forEach(r=>{r.forEach(s=>{t.extend([s[1],s[0]])})});break;case"MultiPolygon":o.forEach(r=>{r.forEach(s=>{s.forEach(a=>{t.extend([a[1],a[0]])})})});break}}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=pe({type:e,selectors:[["app-map"]],inputs:{height:"height",featureDetails:"featureDetails",geoJsonData:"geoJsonData",wmsLayers:"wmsLayers",center:"center",zoom:"zoom",showPopup:"showPopup",useGeoJson:"useGeoJson"},outputs:{featureClick:"featureClick"},features:[sn],decls:6,vars:1,consts:[[1,"map-container"],[1,"map",3,"id"],[1,"map-controls"],["title","Fit to features",1,"control-btn",3,"click"]],template:function(n,i){n&1&&(Ei(0,"div",0),go(1,"div",1),Ei(2,"div",2)(3,"button",3),eu("click",function(){return i.fitToFeatures()}),Ei(4,"span"),N(5,"\u{1F4CD}"),no()()()()),n&2&&(P(),nr("id",i.mapId))},dependencies:[oo],styles:[".map-container[_ngcontent-%COMP%]{position:relative;width:100%!important;height:100%;min-height:350px;border-radius:8px;overflow:hidden;box-shadow:0 2px 10px #0000001a;margin:0}.map[_ngcontent-%COMP%]{width:100%;height:100%;z-index:1}.map-message[_ngcontent-%COMP%]{max-width:100%!important;width:100%!important}.map-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{width:100%!important;padding:0!important;background:transparent!important;box-shadow:none!important}[_nghost-%COMP%]{display:block;align-items:center;justify-content:center;width:100%;height:100%}[_nghost-%COMP%]     .leaflet-popup-content{margin:8px 12px;min-width:200px}[_nghost-%COMP%]     .leaflet-popup-content-wrapper{border-radius:8px;box-shadow:0 4px 15px #0003}[_nghost-%COMP%]     .popup-header h4{margin:0 0 8px;color:#333;font-size:16px}[_nghost-%COMP%]     .popup-body{font-size:14px}[_nghost-%COMP%]     .properties-section{margin-top:8px}[_nghost-%COMP%]     .properties-section h5{margin:8px 0 4px;color:#555}[_nghost-%COMP%]     .property-item{padding:2px 0;border-bottom:1px solid #f0f0f0;font-size:13px}[_nghost-%COMP%]     .property-item:last-child{border-bottom:none}[_nghost-%COMP%]     .property-item strong{color:#666}.feature-panel[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:#fff;border-radius:8px;box-shadow:0 4px 15px #0003;max-width:800px;z-index:1000;max-height:80vh;overflow-y:auto}.panel-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px;border-bottom:1px solid #eee;background:#f8f9fa;border-radius:8px 8px 0 0}.panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#333}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;cursor:pointer;color:#666;padding:0;width:24px;height:24px;display:flex;align-items:center;justify-content:center;line-height:1}.close-btn[_ngcontent-%COMP%]:hover{color:#000}.panel-content[_ngcontent-%COMP%]{padding:15px}.properties[_ngcontent-%COMP%]{margin-top:10px}.property-item[_ngcontent-%COMP%]{padding:4px 0;border-bottom:1px solid #f0f0f0;font-size:14px}.property-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.property-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#555}.map-controls[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;z-index:1000;display:flex;flex-direction:column;gap:5px}.control-btn[_ngcontent-%COMP%]{background:#fff;border:none;border-radius:4px;width:35px;height:35px;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 2px 5px #0003;font-size:16px;transition:background-color .3s}.control-btn[_ngcontent-%COMP%]:hover{background:#f8f9fa}"]})};var oA=class e{transform(t){return console.log("FilterTablesPipe called",t),t?t.filter(n=>n.type==="table"):[]}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=In({name:"filterTables",type:e,pure:!0})},ay=class e{transform(t){if(!t?.data)return!1;let n=t.data;if(!Array.isArray(n.column_names)||!Array.isArray(n.data)||n.column_names.length===0)return!1;if(n.data.length>0){let i=n.column_names.length;return n.data.every(o=>Array.isArray(o)&&o.length===i)}return!0}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=In({name:"hasValidTableStructure",type:e,pure:!0})};var rA=class e{transform(t){return console.log("FilterButtonsPipe called"),t?t.filter(n=>n.type==="button"):[]}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=In({name:"filterButtons",type:e,pure:!0})},sA=class e{transform(t){return!!t?.data?.link&&!!t.data.title&&this.isValidUrl(t.data.link)}isValidUrl(t){try{return new URL(t),!0}catch{return t.startsWith("/")||t.startsWith("#")||t.startsWith("?")}}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=In({name:"hasValidButtonStructure",type:e,pure:!0})},aA=class e{transform(t){return t.data.link||"#"}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=In({name:"getButtonLink",type:e,pure:!0})},lA=class e{transform(t){return t.data.title||"Click Here"}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=In({name:"getButtonTitle",type:e,pure:!0})},cA=class e{transform(t){let n=t.data.link||"#";return n.startsWith("http://")||n.startsWith("https://")}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=In({name:"isExternalLink",type:e,pure:!0})},dA=class e{transform(t){return console.log("FilterMapsPipe called",t),t?.filter(n=>n.type==="map")||[]}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=In({name:"filterMaps",type:e,pure:!0})},ly=class e{transform(t){return t?.data?.features||[]}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=In({name:"getMapFeatures",type:e,pure:!0})},cy=class e{transform(t){return t?.data?.wmsLayers||[]}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=In({name:"getMapWmsLayers",type:e,pure:!0})},dy=class e{transform(t){return t?.data?.center||[0,0]}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=In({name:"getMapCenter",type:e,pure:!0})},uy=class e{transform(t){return t?.data?.zoom||10}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=In({name:"getMapZoom",type:e,pure:!0})},hy=class e{transform(t){return t?.data?.height||"400px"}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=In({name:"getMapHeight",type:e,pure:!0})},py=class e{transform(t){return t?.data?.title||null}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=In({name:"getMapTitle",type:e,pure:!0})},fy=class e{transform(t){return!!t?.data?.title}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=In({name:"hasMapTitle",type:e,pure:!0})},my=class e{transform(t){return!!t&&t.type==="map"&&!!t.data}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=In({name:"isValidMapLayout",type:e,pure:!0})};var uA=class e{transform(t){if(console.log("\u{1F50D} FilterFormsPipe - Input layouts:",t),!t||!Array.isArray(t))return console.log("\u274C FilterFormsPipe - No layouts or not array"),[];let n=t.filter(i=>i&&i.type==="form"&&i.data);return console.log("\u2705 FilterFormsPipe - Found form layouts:",n),n}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=In({name:"filterForms",type:e,pure:!0})},hA=class e{transform(t){let n=t;console.log("\u{1F50D} IsValidFormLayoutPipe - Checking layout:",n);let i=n&&n.type==="form"&&n.data&&n.data.schema;return console.log("\u2705 IsValidFormLayoutPipe - Layout valid:",i),i||console.log("\u274C IsValidFormLayoutPipe - Invalid because:",{hasLayout:!!n,correctType:n?.type==="form",hasData:!!n?.data,hasSchema:!!n?.data?.schema}),i}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=In({name:"isValidFormLayout",type:e,pure:!0})};var pA=class e{constructor(t){this.httpClient=t}authToken=null;apiKey=null;authStrategy="none";getRequest(t,n={}){let i=this.getAuthHeaders();return n&&Object.keys(n).forEach(o=>{i.set(o,n[o])}),this.httpClient.get(t,{headers:i,observe:"response"}).pipe(tt(o=>o.status===200?{status:o.status,data:o.body.data}:{status:500,error:"something went wrong"}),dl(o=>(console.error("API error:",o),et({status:500,error:"API request failed"}))))}postRequest(t,n,i={}){let o=this.getAuthHeaders();return i&&Object.keys(i).forEach(r=>{o.set(r,i[r])}),this.httpClient.post(t,n,{headers:o,observe:"response"}).pipe(tt(r=>r.status===200?{status:r.status,data:r.body.data}:{status:500,error:"something went wrong"}),dl(r=>(console.error("API error:",r),et({error:"API request failed"}))))}getAuthHeaders(){let t=new Il({"Content-Type":"application/json",Accept:"application/json"});switch(this.authStrategy){case"bearer_token":this.authToken&&(t=t.set("Authorization",`Bearer ${this.authToken}`));break;case"basic_auth":this.authToken&&(t=t.set("Authorization",`Basic ${btoa(this.authToken)}`));break;case"api_key":this.apiKey&&(t=t.set("X-API-Key",this.apiKey));break;case"none":break}return t}static \u0275fac=function(n){return new(n||e)(Ze(iu))};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})};var fA=class e{buildApiRequest(t,n,i,o){let r={success:!0,errors:[],payload:{},url:t.url,method:t.method||"POST",headers:{}};if(t.params?.path&&(r.url=this.buildUrlWithPathParams(r.url,t.params.path,n,i,r.errors)),["GET","DELETE"].includes(r.method.toUpperCase())&&t.params?.query){let s=this.buildQueryParams(t.params.query,n,i,o,r.errors);Object.keys(s).length>0&&(r.url+=`?${new URLSearchParams(s).toString()}`)}return["POST","PUT","PATCH"].includes(r.method.toUpperCase())&&t.params?.body&&(r.payload=this.buildRequestBody(t.params.body,n,i,o,r.errors)),this.validateRequiredParams(t.params,n,i,o,r.errors),r.success=r.errors.length===0,r}buildUrlWithPathParams(t,n,i,o,r){let s=t;Object.keys(n).forEach(l=>{let c=n[l],u=this.getParameterValue(c,i,o,{},"path");if(u==null){c.required!==!1&&r.push(`Missing required path parameter: ${l}`);return}s=s.replace(`{${l}}`,encodeURIComponent(u))});let a=s.match(/{([^}]+)}/g);return a&&r.push(`Unresolved path parameters: ${a.join(", ")}`),s}buildQueryParams(t,n,i,o,r){let s={};return Object.keys(t).forEach(a=>{let l=t[a],c=this.getParameterValue(l,n,i,o,"query");c!=null?s[a]=c:l.required!==!1&&r.push(`Missing required query parameter: ${a}`)}),s}buildRequestBody(t,n,i,o,r){let s={};return Object.keys(t).forEach(a=>{let l=t[a],c=this.getParameterValue(l,n,i,o,"body");c!=null?s[a]=c:l.required!==!1&&r.push(`Missing required body parameter: ${a}`)}),s}getParameterValue(t,n,i,o,r){switch(t.type){case"json":case"form_data":return o;case"metadata":if(Array.isArray(t.field)){let s={};return t.field.forEach(a=>{s[a]=n[a]}),s}else return t.field==="metadata"?n:n[t.field];case"form_info":if(Array.isArray(t.field)){let s={};return t.field.forEach(a=>{s[a]=i[a]}),s}else return t.field==="form_info"?i:i[t.field];default:console.warn(`Unknown parameter type: ${t.type} for ${r} parameter`);return}}validateRequiredParams(t,n,i,o,r){if(!t)return;let s=(a,l)=>{a&&Object.keys(a).forEach(c=>{let u=a[c];if(u.required!==!1){let h=this.getParameterValue(u,n,i,o,l);h==null&&r.push(`Missing required ${l} parameter: ${c}`)}})};s(t.path,"path"),s(t.query,"query"),s(t.body,"body")}handleApiResponse(t,n){let i=n.response_format||{},o=(a,l)=>{if(a)return a.split(".").reduce((c,u)=>c&&c[u],l)};if((o(i.success_path,t)||t.success)===(i.success_value||"success")){let a=o(i.message_path,t)||t.message,l=o(i.redirect_path,t),c=o(i.data_path,t)||t.data;return a?{message:a||"success"}:(l&&(window.location.href=l),typeof c=="string"?{message:c}:typeof c=="object"&&c!==null?{message:JSON.stringify(c)}:{message:"success"})}else return{message:o(i.error_path,t)||t.error||"Submission failed"||"error"}}static \u0275fac=function(n){return new(n||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})};function dYe(e,t){if(e&1){let n=Ge();M(0,"button",13),Q("click",function(){J(n);let o=A();return X(o.toggleMetadata())}),N(1," \u2139\uFE0F "),R()}}function uYe(e,t){if(e&1&&(M(0,"div",5),N(1),R()),e&2){let n=A();P(),qe(" \u2713 ",n.formSubmittedMessage," ")}}function hYe(e,t){if(e&1&&(M(0,"div",15)(1,"strong"),N(2),bt(3,"titlecase"),R(),N(4),R()),e&2){let n=t.$implicit;P(2),qe("",Ot(3,2,n.key),":"),P(2),qe(" ",n.value," ")}}function pYe(e,t){if(e&1&&(M(0,"div",6)(1,"div",14)(2,"h4"),N(3,"Form Information"),R(),an(4,hYe,5,4,"div",15,qn),R()()),e&2){let n=A();P(4),ln(n.metadataEntries)}}function fYe(e,t){if(e&1&&Ae(0,"input",17),e&2){let n=A().$implicit,i=A();be("readonly",i.isSubmitted),le("id",n.key)("formControlName",n.key)("placeholder",n.placeholder)("readonly",i.isSubmitted)}}function mYe(e,t){if(e&1&&Ae(0,"textarea",18),e&2){let n=A().$implicit,i=A();be("readonly",i.isSubmitted),le("id",n.key)("formControlName",n.key)("placeholder",n.placeholder)("readonly",i.isSubmitted)}}function gYe(e,t){if(e&1&&Ae(0,"input",19),e&2){let n=A().$implicit,i=A();be("readonly",i.isSubmitted),le("id",n.key)("formControlName",n.key)("placeholder",n.placeholder)("readonly",i.isSubmitted)}}function vYe(e,t){if(e&1&&(M(0,"option",24),N(1),R()),e&2){let n=t.$implicit;le("value",n.value),P(),qe(" ",n.displayValue||n.value," ")}}function _Ye(e,t){if(e&1&&(M(0,"select",20)(1,"option",23),N(2),R(),an(3,vYe,2,2,"option",24,qn),R()),e&2){let n=A().$implicit;le("id",n.key)("formControlName",n.key),P(2),qe("Select ",n.title),P(),ln(n.options)}}function yYe(e,t){if(e&1&&(M(0,"div",21)(1,"label"),Ae(2,"input",25),N(3),R()()),e&2){let n=A().$implicit,i=A();P(2),le("formControlName",n.key)("disabled",i.isSubmitted),P(),qe(" ",n.title," ")}}function bYe(e,t){e&1&&(M(0,"div"),N(1,"This field is required"),R())}function CYe(e,t){e&1&&(M(0,"div"),N(1,"Invalid email format"),R())}function wYe(e,t){if(e&1&&(M(0,"div",22),K(1,bYe,2,0,"div"),K(2,CYe,2,0,"div"),R()),e&2){let n,i,o=A().$implicit,r=A();P(),Z(!((n=r.form.get(o.key))==null||n.errors==null)&&n.errors.required?1:-1),P(),Z(!((i=r.form.get(o.key))==null||i.errors==null)&&i.errors.email?2:-1)}}function xYe(e,t){if(e&1&&(M(0,"div",9)(1,"label",16),N(2),R(),K(3,fYe,1,6,"input",17),K(4,mYe,1,6,"textarea",18),K(5,gYe,1,6,"input",19),K(6,_Ye,5,3,"select",20),K(7,yYe,4,3,"div",21),K(8,wYe,3,2,"div",22),R()),e&2){let n,i=t.$implicit,o=A();P(),be("required",i.required),le("for",i.key),P(),nt(i.title),P(),Z(i.type==="string"&&i.widgetType!=="textArea"?3:-1),P(),Z(i.widgetType==="textArea"?4:-1),P(),Z(i.type==="number"?5:-1),P(),Z((i.widgetType==="select"||!0)&&i.options?6:-1),P(),Z(i.type==="boolean"?7:-1),P(),Z((n=o.form.get(i.key))!=null&&n.invalid&&((n=o.form.get(i.key))!=null&&n.touched)&&!o.isSubmitted?8:-1)}}var gy=class e{constructor(t,n,i){this.fb=t;this.restApiService=n;this.apiFrammingService=i;this.form=this.fb.group({})}formLayout;formSubmitted=new V;formCancelled=new V;kanbanAction=new V;kanbanBoardUpdated=new V;formFields=[];showMetadata=!1;isSubmitting=!1;isSubmitted=!1;form;metadataEntries=[];formSubmittedMessage="";ngOnChanges(){this.formLayout?.data?.schema&&(this.buildForm(),this.isSubmitted=!1)}buildForm(){let t=this.formLayout.data.schema;this.formFields=[];let n={},i=this.formLayout.data.metadata||{};this.metadataEntries=this.getMetadataEntries(i),t?.properties&&(this.formFields=Object.keys(t.properties).map(o=>{let r=t.properties[o];return{key:o,title:r.title||o,type:this.determineFieldType(r),widgetType:r.widgetType,placeholder:r.description||"",options:r.options,required:this.isFieldRequired(o,t.required),position:r.position||0}}).sort((o,r)=>o.position-r.position),this.formFields.forEach(o=>{let r=t.properties[o.key],s=[];o.required&&s.push(Ri.required),r.widgetType=="email"&&s.push(Ri.email);let a=r.defaultValue;a==null&&(o.type==="number"?a=null:o.type==="boolean"?a=!1:a=""),n[o.key]=[a,s]})),this.form=this.fb.group(n)}isFieldRequired(t,n){return n?n.includes(t):!1}determineFieldType(t){if(t.widgetType)switch(t.widgetType){case"textArea":return"string";case"textBox":return"string";case"select":return"select";case"dropdown":return"select";case"checkbox":return"boolean";case"number":return"number";default:return"string"}if(t.type)return t.type;if(t.anyOf){if(t.anyOf.some(o=>o.type==="number"||o.type==="integer"))return"number";if(t.anyOf.some(o=>o.type==="string"))return"string"}return"string"}toggleMetadata(){this.showMetadata=!this.showMetadata}onSubmit(){if(this.form.valid&&!this.isSubmitted){this.isSubmitting=!0;let t=this.formLayout.data.actions?.submit,n=this.formLayout.data.metadata||{},i=this.formLayout.data.form_info||{},o=this.form.value;if(!t){console.error("No submit action defined"),this.isSubmitting=!1;return}t?.type==="tool"&&t.tool_name?this.toolExecution(t,n):t?.type==="api"&&t.url&&this.api_call_request(t,n,i,o),this.isSubmitting=!1}else this.markFormGroupTouched(this.form)}toolExecution(t,n){let i=this.form.value;if(!this.hasJsonParameter(t.params)){console.error("Form submission requires at least one json type parameter"),this.isSubmitting=!1;return}let o=this.buildToolParameters(i,t.params,n);try{this.formSubmitted.emit({toolName:t.tool_name?t.tool_name:"",params:o}),this.isSubmitted=!0,this.disableForm()}catch(r){console.error("Form submission error:",r),this.isSubmitting=!1}}api_call_request(t,n,i,o){let r=this.apiFrammingService.buildApiRequest(t,n,i,o);if(!r.success){console.error("Failed to build request:",r.errors),this.isSubmitting=!1;return}this.executeApiAction(r).pipe(xa(()=>{this.isSubmitting=!1})).subscribe({next:s=>{console.log("Form submitted successfully:",s);let a=this.apiFrammingService.handleApiResponse(s,t);s&&s.status===200?(this.formSubmittedMessage=a.message||"Form submitted successfully.",this.isSubmitted=!0,this.disableForm()):(this.formSubmittedMessage=a.message||"Form submittion failed.",console.error("API request failed:",s.error))},error:s=>{console.error("Form submission failed:",s)}})}hasJsonParameter(t){return t?Object.values(t).some(n=>n.type==="json"||n.type==="form_data"):!1}buildToolParameters(t,n,i){let o={};return n?(Object.keys(n).forEach(r=>{let s=n[r];switch(s.type){case"json":case"form_data":o[r]=t;break;case"metadata":console.log("metadata ",o[r]),o[r]=i[s.field];break;case"form_info":o[r]=t[s.field];break;default:console.warn(`Unknown parameter type: ${s.type}`)}}),o):{form_data:t}}executeApiAction(t){if(!t.url)return et({success:!1,error:"API action missing URL"});let n=t.method?.toUpperCase()||"POST",i=t.headers||{},o=t.payload;switch(n){case"GET":return this.restApiService.getRequest(t.url,i);case"POST":return this.restApiService.postRequest(t.url,o,i);default:return et({success:!1,error:`Unsupported HTTP method: ${n}`})}}onCancel(){this.formCancelled.emit()}markFormGroupTouched(t){Object.keys(t.controls).forEach(n=>{t.get(n)?.markAsTouched()})}getMetadataEntries(t){return Object.keys(t).map(n=>({key:n,value:t[n]}))}disableForm(){Object.keys(this.form.controls).forEach(t=>{this.form.get(t)?.disable()})}enableForm(){Object.keys(this.form.controls).forEach(t=>{this.form.get(t)?.enable()})}onKanbanAction(t){this.kanbanAction.emit(t)}onKanbanBoardUpdated(t){this.kanbanBoardUpdated.emit(t)}static \u0275fac=function(n){return new(n||e)(ye($_),ye(pA),ye(fA))};static \u0275cmp=pe({type:e,selectors:[["app-chat-form"]],inputs:{formLayout:"formLayout"},outputs:{formSubmitted:"formSubmitted",formCancelled:"formCancelled",kanbanAction:"kanbanAction",kanbanBoardUpdated:"kanbanBoardUpdated"},features:[sn],decls:18,vars:10,consts:[[1,"chat-form-container"],[1,"form-header"],[1,"form-title"],[1,"form-actions-top"],["title","Show form information",1,"btn","btn-info","btn-sm"],[1,"submission-banner","success"],[1,"metadata-panel"],[1,"form-content"],[1,"dynamic-form",3,"ngSubmit","formGroup"],[1,"form-field"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],["title","Show form information",1,"btn","btn-info","btn-sm",3,"click"],[1,"metadata-content"],[1,"metadata-item"],[3,"for"],["type","text",1,"form-control",3,"id","formControlName","placeholder","readonly"],["rows","3",1,"form-control",3,"id","formControlName","placeholder","readonly"],["type","number",1,"form-control",3,"id","formControlName","placeholder","readonly"],[1,"form-control",3,"id","formControlName"],[1,"checkbox-wrapper"],[1,"error-message"],["value",""],[3,"value"],["type","checkbox",3,"formControlName","disabled"]],template:function(n,i){n&1&&(M(0,"div",0)(1,"div",1)(2,"h3",2),N(3),bt(4,"titlecase"),R(),M(5,"div",3),K(6,dYe,2,0,"button",4),R()(),K(7,uYe,2,1,"div",5),K(8,pYe,6,0,"div",6),M(9,"div",7)(10,"form",8),Q("ngSubmit",function(){return i.onSubmit()}),an(11,xYe,9,10,"div",9,qn),M(13,"div",10)(14,"button",11),Q("click",function(){return i.onCancel()}),N(15,"Cancel"),R(),M(16,"button",12),N(17),R()()()()()),n&2&&(P(3),nt(Ot(4,8,i.formLayout.data.title)),P(3),Z(i.formLayout.data.metadata?6:-1),P(),Z(i.isSubmitted?7:-1),P(),Z(i.showMetadata&&i.formLayout.data.metadata?8:-1),P(2),le("formGroup",i.form),P(),ln(i.formFields),P(3),le("disabled",i.isSubmitted),P(2),le("disabled",i.isSubmitting||i.isSubmitted||i.form.invalid),P(),qe(" ",i.isSubmitting?"Submitting...":"Submit"," "))},dependencies:[oo,j_,wP,EP,DP,da,Qx,Ef,H_,ua,_P,Df,Jx,fC],styles:['.form-message-container[_ngcontent-%COMP%]{border:1px solid #e1e5e9;border-radius:8px;background:#f8f9fa;margin:10px 0;overflow:hidden}.form-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:#fff;border-bottom:1px solid #e1e5e9}.form-title[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:#495057}.form-actions-top[_ngcontent-%COMP%]{display:flex;gap:8px}.btn-info[_ngcontent-%COMP%]{background:#6c757d;color:#fff;border:none;border-radius:4px;padding:4px 8px;cursor:pointer;font-size:12px}.btn-info[_ngcontent-%COMP%]:hover{background:#5a6268}.metadata-panel[_ngcontent-%COMP%]{background:#e9ecef;padding:12px 16px;border-bottom:1px solid #dee2e6}.metadata-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;color:#495057}.metadata-item[_ngcontent-%COMP%]{margin-bottom:4px;font-size:12px}.metadata-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#343a40}.form-content[_ngcontent-%COMP%]{padding:16px;background:#fff}.form-actions-bottom[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;padding:12px 16px;background:#fff;border-top:1px solid #e1e5e9}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px;transition:background-color .2s}.btn-primary[_ngcontent-%COMP%]{background:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#0056b3}.btn-primary[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background:#545b62}.required[_ngcontent-%COMP%]:after{content:" *";color:red}.form-field[_ngcontent-%COMP%]{margin-bottom:1rem}.form-control[_ngcontent-%COMP%]{width:100%;padding:.5rem;border:1px solid #ccc;border-radius:4px}.error-message[_ngcontent-%COMP%]{color:red;font-size:.875rem;margin-top:.25rem}.form-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:flex-end;margin-top:1rem}.checkbox-wrapper[_ngcontent-%COMP%]{margin-top:.5rem}.form-control[readonly][_ngcontent-%COMP%], .form-control[disabled][_ngcontent-%COMP%]{background-color:#f8f9fa;border-color:#e9ecef;color:#6c757d;cursor:not-allowed;opacity:.8}.form-control.readonly[_ngcontent-%COMP%]{background-color:#f8f9fa;border-color:#e9ecef;color:#6c757d}.submission-banner[_ngcontent-%COMP%]{padding:12px 16px;margin:12px 0;border-radius:4px;font-weight:500;text-align:center}.submission-banner.success[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}.dynamic-form[_ngcontent-%COMP%]:disabled{opacity:.7}.checkbox-wrapper[_ngcontent-%COMP%]   input[disabled][_ngcontent-%COMP%]{cursor:not-allowed}.form-field[_ngcontent-%COMP%]:has(.form-control[readonly])   .error-message[_ngcontent-%COMP%]{display:none}']})};function BG(e){let t=e.cloneNode(!0),n=t.querySelectorAll("[id]"),i=e.nodeName.toLowerCase();t.removeAttribute("id");for(let o=0;o<n.length;o++)n[o].removeAttribute("id");return i==="canvas"?xme(e,t):(i==="input"||i==="select"||i==="textarea")&&wme(e,t),Cme("canvas",e,t,xme),Cme("input, textarea, select",e,t,wme),t}function Cme(e,t,n,i){let o=t.querySelectorAll(e);if(o.length){let r=n.querySelectorAll(e);for(let s=0;s<o.length;s++)i(o[s],r[s])}}var SYe=0;function wme(e,t){t.type!=="file"&&(t.value=e.value),t.type==="radio"&&t.name&&(t.name=`mat-clone-${t.name}-${SYe++}`)}function xme(e,t){let n=t.getContext("2d");if(n)try{n.drawImage(e,0,0)}catch{}}function GG(e){let t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function zG(e,t,n){let{top:i,bottom:o,left:r,right:s}=e;return n>=i&&n<=o&&t>=r&&t<=s}function EYe(e,t){let n=t.left<e.left,i=t.left+t.width>e.right,o=t.top<e.top,r=t.top+t.height>e.bottom;return n||i||o||r}function fS(e,t,n){e.top+=t,e.bottom=e.top+e.height,e.left+=n,e.right=e.left+e.width}function Sme(e,t,n,i){let{top:o,right:r,bottom:s,left:a,width:l,height:c}=e,u=l*t,h=c*t;return i>o-h&&i<s+h&&n>a-u&&n<r+u}var mA=class{_document;positions=new Map;constructor(t){this._document=t}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(n=>{this.positions.set(n,{scrollPosition:{top:n.scrollTop,left:n.scrollLeft},clientRect:GG(n)})})}handleScroll(t){let n=Co(t),i=this.positions.get(n);if(!i)return null;let o=i.scrollPosition,r,s;if(n===this._document){let c=this.getViewportScrollPosition();r=c.top,s=c.left}else r=n.scrollTop,s=n.scrollLeft;let a=o.top-r,l=o.left-s;return this.positions.forEach((c,u)=>{c.clientRect&&n!==u&&n.contains(u)&&fS(c.clientRect,a,l)}),o.top=r,o.left=s,{top:a,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function Lme(e,t){let n=e.rootNodes;if(n.length===1&&n[0].nodeType===t.ELEMENT_NODE)return n[0];let i=t.createElement("div");return n.forEach(o=>i.appendChild(o)),i}function UG(e,t,n){for(let i in t)if(t.hasOwnProperty(i)){let o=t[i];o?e.setProperty(i,o,n?.has(i)?"important":""):e.removeProperty(i)}return e}function vy(e,t){let n=t?"":"none";UG(e.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":n,"-ms-user-select":n,"-webkit-user-select":n,"-moz-user-select":n})}function Eme(e,t,n){UG(e.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},n)}function gA(e,t){return t&&t!="none"?e+" "+t:e}function Dme(e,t){e.style.width=`${t.width}px`,e.style.height=`${t.height}px`,e.style.transform=mS(t.left,t.top)}function mS(e,t){return`translate3d(${Math.round(e)}px, ${Math.round(t)}px, 0)`}function kme(e){let t=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*t}function DYe(e){let t=getComputedStyle(e),n=LG(t,"transition-property"),i=n.find(a=>a==="transform"||a==="all");if(!i)return 0;let o=n.indexOf(i),r=LG(t,"transition-duration"),s=LG(t,"transition-delay");return kme(r[o])+kme(s[o])}function LG(e,t){return e.getPropertyValue(t).split(",").map(i=>i.trim())}var kYe=new Set(["position"]),VG=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(t,n,i,o,r,s,a,l,c,u){this._document=t,this._rootElement=n,this._direction=i,this._initialDomRect=o,this._previewTemplate=r,this._previewClass=s,this._pickupPositionOnPage=a,this._initialTransform=l,this._zIndex=c,this._renderer=u}attach(t){this._preview=this._createPreview(),t.appendChild(this._preview),Ime(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(t){this._preview.style.transform=t}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(t){this._preview.classList.add(t)}getTransitionDuration(){return DYe(this._preview)}addEventListener(t,n){return this._renderer.listen(this._preview,t,n)}_createPreview(){let t=this._previewTemplate,n=this._previewClass,i=t?t.template:null,o;if(i&&t){let r=t.matchSize?this._initialDomRect:null,s=t.viewContainer.createEmbeddedView(i,t.context);s.detectChanges(),o=Lme(s,this._document),this._previewEmbeddedView=s,t.matchSize?Dme(o,r):o.style.transform=mS(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else o=BG(this._rootElement),Dme(o,this._initialDomRect),this._initialTransform&&(o.style.transform=this._initialTransform);return UG(o.style,{"pointer-events":"none",margin:Ime(o)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},kYe),vy(o,!1),o.classList.add("cdk-drag-preview"),o.setAttribute("popover","manual"),o.setAttribute("dir",this._direction),n&&(Array.isArray(n)?n.forEach(r=>o.classList.add(r)):o.classList.add(n)),o}};function Ime(e){return"showPopover"in e}var IYe={passive:!0},Mme={passive:!1},MYe={passive:!1,capture:!0},RYe=800,Rme="cdk-drag-placeholder",Tme=new Set(["position"]),HG=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_marker;_anchor=null;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=$t(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new ie;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=Mt.EMPTY;_pointerUpSubscription=Mt.EMPTY;_scrollSubscription=Mt.EMPTY;_resizeSubscription=Mt.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis=null;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(t){t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(n=>vy(n,t)))}_disabled=!1;beforeStarted=new ie;started=new ie;released=new ie;ended=new ie;entered=new ie;exited=new ie;dropped=new ie;moved=this._moveEvents;data;constrainPosition;constructor(t,n,i,o,r,s,a){this._config=n,this._document=i,this._ngZone=o,this._viewportRuler=r,this._dragDropRegistry=s,this._renderer=a,this.withRootElement(t).withParent(n.parentDragRef||null),this._parentPositions=new mA(i),s.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(i=>_i(i)),this._handles.forEach(i=>vy(i,this.disabled)),this._toggleNativeDragInteractions();let n=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&n.add(i)}),this._disabledHandles=n,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){let n=_i(t);if(n!==this._rootElement){this._removeRootElementListeners();let i=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[i.listen(n,"mousedown",this._pointerDown,Mme),i.listen(n,"touchstart",this._pointerDown,IYe),i.listen(n,"dragstart",this._nativeDragStart,Mme)]),this._initialTransform=void 0,this._rootElement=n}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?_i(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._marker?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._marker=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&EYe(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let t=this._boundaryElement.getBoundingClientRect(),n=this._rootElement.getBoundingClientRect(),i=0,o=0;n.left<t.left?i=t.left-n.left:n.right>t.right&&(i=t.right-n.right),n.top<t.top?o=t.top-n.top:n.bottom>t.bottom&&(o=t.bottom-n.bottom);let r=this._activeTransform.x,s=this._activeTransform.y,a=r+i,l=s+o;this._rootElement.style.transform=mS(a,l),this._activeTransform={x:a,y:l},this._passiveTransform={x:a,y:l}}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),vy(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),vy(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){let t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){let t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._anchor?.remove(),this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._anchor=this._placeholderRef=null}_pointerDown=t=>{if(this.beforeStarted.next(),this._handles.length){let n=this._getTargetHandle(t);n&&!this._disabledHandles.has(n)&&!this.disabled&&this._initializeDragSequence(n,t)}else this.disabled||this._initializeDragSequence(this._rootElement,t)};_pointerMove=t=>{let n=this._getPointerPositionOnPage(t);if(!this._hasStartedDragging()){let o=Math.abs(n.x-this._pickupPositionOnPage.x),r=Math.abs(n.y-this._pickupPositionOnPage.y);if(o+r>=this._config.dragStartThreshold){let a=Date.now()>=this._dragStartTime+this._getDragStartDelay(t),l=this._dropContainer;if(!a){this._endDragSequence(t);return}(!l||!l.isDragging()&&!l.isReceiving())&&(t.cancelable&&t.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(t)))}return}t.cancelable&&t.preventDefault();let i=this._getConstrainedPointerPosition(n);if(this._hasMoved=!0,this._lastKnownPointerPosition=n,this._updatePointerDirectionDelta(i),this._dropContainer)this._updateActiveDropContainer(i,n);else{let o=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,r=this._activeTransform;r.x=i.x-o.x+this._passiveTransform.x,r.y=i.y-o.y+this._passiveTransform.y,this._applyRootElementTransform(r.x,r.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:i,event:t,distance:this._getDragDistance(i),delta:this._pointerDirectionDelta})})};_pointerUp=t=>{this._endDragSequence(t)};_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:t}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let n=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(n),dropPoint:n,event:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){hS(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let n=this._getShadowRoot(),i=this._dropContainer;if(n&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(n,"selectstart",TYe,MYe)}),i){let o=this._rootElement,r=o.parentNode,s=this._placeholder=this._createPlaceholderElement(),a=this._marker=this._marker||this._document.createComment("");r.insertBefore(a,o),this._initialTransform=o.style.transform||"",this._preview=new VG(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(r,n)),Eme(o,!1,Tme),this._document.body.appendChild(r.replaceChild(s,o)),this.started.next({source:this,event:t}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this,event:t}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}_initializeDragSequence(t,n){this._parentDragRef&&n.stopPropagation();let i=this.isDragging(),o=hS(n),r=!o&&n.button!==0,s=this._rootElement,a=Co(n),l=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+RYe>Date.now(),c=o?Td(n):Rd(n);if(a&&a.draggable&&n.type==="mousedown"&&n.preventDefault(),i||r||l||c)return;if(this._handles.length){let f=s.style;this._rootElementTapHighlight=f.webkitTapHighlightColor||"",f.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(f=>this._updateOnScroll(f)),this._boundaryElement&&(this._boundaryRect=GG(this._boundaryElement));let u=this._previewTemplate;this._pickupPositionInElement=u&&u.template&&!u.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,t,n);let h=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(n);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:h.x,y:h.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,n)}_cleanupDragArtifacts(t){Eme(this._rootElement,!0,Tme),this._marker.parentNode.replaceChild(this._rootElement,this._marker),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let n=this._dropContainer,i=n.getItemIndex(this),o=this._getPointerPositionOnPage(t),r=this._getDragDistance(o),s=n._isOverContainer(o.x,o.y);this.ended.next({source:this,distance:r,dropPoint:o,event:t}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:n,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:r,dropPoint:o,event:t}),n.drop(this,i,this._initialIndex,this._initialContainer,s,r,o,t),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:n},{x:i,y:o}){let r=this._initialContainer._getSiblingContainerFromPosition(this,t,n);!r&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,n)&&(r=this._initialContainer),r&&r!==this._dropContainer&&this._ngZone.run(()=>{let s=this._dropContainer.getItemIndex(this),a=this._dropContainer.getItemAtIndex(s+1)?.getVisibleElement()||null;this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._conditionallyInsertAnchor(r,this._dropContainer,a),this._dropContainer=r,this._dropContainer.enter(this,t,n,r===this._initialContainer&&r.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:r,currentIndex:r.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,o),this._dropContainer._sortItem(this,t,n,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(t,n):this._applyPreviewTransform(t-this._pickupPositionInElement.x,n-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let t=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);let n=this._preview.getTransitionDuration();return n===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{let o=a=>{(!a||this._preview&&Co(a)===this._preview.element&&a.propertyName==="transform")&&(s(),i(),clearTimeout(r))},r=setTimeout(o,n*1.5),s=this._preview.addEventListener("transitionend",o)}))}_createPlaceholderElement(){let t=this._placeholderTemplate,n=t?t.template:null,i;return n?(this._placeholderRef=t.viewContainer.createEmbeddedView(n,t.context),this._placeholderRef.detectChanges(),i=Lme(this._placeholderRef,this._document)):i=BG(this._rootElement),i.style.pointerEvents="none",i.classList.add(Rme),i}_getPointerPositionInElement(t,n,i){let o=n===this._rootElement?null:n,r=o?o.getBoundingClientRect():t,s=hS(i)?i.targetTouches[0]:i,a=this._getViewportScrollPosition(),l=s.pageX-r.left-a.left,c=s.pageY-r.top-a.top;return{x:r.left-t.left+l,y:r.top-t.top+c}}_getPointerPositionOnPage(t){let n=this._getViewportScrollPosition(),i=hS(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,o=i.pageX-n.left,r=i.pageY-n.top;if(this._ownerSVGElement){let s=this._ownerSVGElement.getScreenCTM();if(s){let a=this._ownerSVGElement.createSVGPoint();return a.x=o,a.y=r,a.matrixTransform(s.inverse())}}return{x:o,y:r}}_getConstrainedPointerPosition(t){let n=this._dropContainer?this._dropContainer.lockAxis:null,{x:i,y:o}=this.constrainPosition?this.constrainPosition(t,this,this._initialDomRect,this._pickupPositionInElement):t;if(this.lockAxis==="x"||n==="x"?o=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||n==="y")&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:r,y:s}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:l,height:c}=this._getPreviewRect(),u=a.top+s,h=a.bottom-(c-s),f=a.left+r,m=a.right-(l-r);i=Pme(i,f,m),o=Pme(o,u,h)}return{x:i,y:o}}_updatePointerDirectionDelta(t){let{x:n,y:i}=t,o=this._pointerDirectionDelta,r=this._pointerPositionAtLastDirectionChange,s=Math.abs(n-r.x),a=Math.abs(i-r.y);return s>this._config.pointerDirectionChangeThreshold&&(o.x=n>r.x?1:-1,r.x=n),a>this._config.pointerDirectionChangeThreshold&&(o.y=i>r.y?1:-1,r.y=i),o}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,vy(this._rootElement,t))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(t=>t()),this._rootElementCleanups=void 0}_applyRootElementTransform(t,n){let i=1/this.scale,o=mS(t*i,n*i),r=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=r.transform&&r.transform!="none"?r.transform:""),r.transform=gA(o,this._initialTransform)}_applyPreviewTransform(t,n){let i=this._previewTemplate?.template?void 0:this._initialTransform,o=mS(t,n);this._preview.setTransform(gA(o,i))}_getDragDistance(t){let n=this._pickupPositionOnPage;return n?{x:t.x-n.x,y:t.y-n.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:n}=this._passiveTransform;if(t===0&&n===0||this.isDragging()||!this._boundaryElement)return;let i=this._rootElement.getBoundingClientRect(),o=this._boundaryElement.getBoundingClientRect();if(o.width===0&&o.height===0||i.width===0&&i.height===0)return;let r=o.left-i.left,s=i.right-o.right,a=o.top-i.top,l=i.bottom-o.bottom;o.width>i.width?(r>0&&(t+=r),s>0&&(t-=s)):t=0,o.height>i.height?(a>0&&(n+=a),l>0&&(n-=l)):n=0,(t!==this._passiveTransform.x||n!==this._passiveTransform.y)&&this.setFreeDragPosition({y:n,x:t})}_getDragStartDelay(t){let n=this.dragStartDelay;return typeof n=="number"?n:hS(t)?n.touch:n?n.mouse:0}_updateOnScroll(t){let n=this._parentPositions.handleScroll(t);if(n){let i=Co(t);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&fS(this._boundaryRect,n.top,n.left),this._pickupPositionOnPage.x+=n.left,this._pickupPositionOnPage.y+=n.top,this._dropContainer||(this._activeTransform.x-=n.left,this._activeTransform.y-=n.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=If(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,n){let i=this._previewContainer||"global";if(i==="parent")return t;if(i==="global"){let o=this._document;return n||o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement||o.msFullscreenElement||o.body}return _i(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=t=>{if(this._handles.length){let n=this._getTargetHandle(t);n&&!this._disabledHandles.has(n)&&!this.disabled&&t.preventDefault()}else this.disabled||t.preventDefault()};_getTargetHandle(t){return this._handles.find(n=>t.target&&(t.target===n||n.contains(t.target)))}_conditionallyInsertAnchor(t,n,i){if(t===this._initialContainer)this._anchor?.remove(),this._anchor=null;else if(n===this._initialContainer&&n.hasAnchor){let o=this._anchor??=BG(this._placeholder);o.classList.remove(Rme),o.classList.add("cdk-drag-anchor"),o.style.transform="",i?i.before(o):_i(n.element).appendChild(o)}}};function Pme(e,t,n){return Math.max(t,Math.min(n,e))}function hS(e){return e.type[0]==="t"}function TYe(e){e.preventDefault()}function yA(e,t,n){let i=vA(t,e.length-1),o=vA(n,e.length-1);if(i===o)return;let r=e[i],s=o<i?-1:1;for(let a=i;a!==o;a+=s)e[a]=e[a+s];e[o]=r}function Nme(e,t,n,i){let o=vA(n,e.length-1),r=vA(i,t.length);e.length&&t.splice(r,0,e.splice(o,1)[0])}function vA(e,t){return Math.max(0,Math.min(t,e))}var _A=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(t){this._dragDropRegistry=t}_previousSwap={drag:null,delta:0,overlaps:!1};start(t){this.withItems(t)}sort(t,n,i,o){let r=this._itemPositions,s=this._getItemIndexFromPointerPosition(t,n,i,o);if(s===-1&&r.length>0)return null;let a=this.orientation==="horizontal",l=r.findIndex(w=>w.drag===t),c=r[s],u=r[l].clientRect,h=c.clientRect,f=l>s?1:-1,m=this._getItemOffsetPx(u,h,f),_=this._getSiblingOffsetPx(l,r,f),y=r.slice();return yA(r,l,s),r.forEach((w,C)=>{if(y[C]===w)return;let S=w.drag===t,I=S?m:_,O=S?t.getPlaceholderElement():w.drag.getRootElement();w.offset+=I;let F=Math.round(w.offset*(1/w.drag.scale));a?(O.style.transform=gA(`translate3d(${F}px, 0, 0)`,w.initialTransform),fS(w.clientRect,0,I)):(O.style.transform=gA(`translate3d(0, ${F}px, 0)`,w.initialTransform),fS(w.clientRect,I,0))}),this._previousSwap.overlaps=zG(h,n,i),this._previousSwap.drag=c.drag,this._previousSwap.delta=a?o.x:o.y,{previousIndex:l,currentIndex:s}}enter(t,n,i,o){let r=o==null||o<0?this._getItemIndexFromPointerPosition(t,n,i):o,s=this._activeDraggables,a=s.indexOf(t),l=t.getPlaceholderElement(),c=s[r];if(c===t&&(c=s[r+1]),!c&&(r==null||r===-1||r<s.length-1)&&this._shouldEnterAsFirstChild(n,i)&&(c=s[0]),a>-1&&s.splice(a,1),c&&!this._dragDropRegistry.isDragging(c)){let u=c.getRootElement();u.parentElement.insertBefore(l,u),s.splice(r,0,t)}else this._element.appendChild(l),s.push(t);l.style.transform="",this._cacheItemPositions()}withItems(t){this._activeDraggables=t.slice(),this._cacheItemPositions()}withSortPredicate(t){this._sortPredicate=t}reset(){this._activeDraggables?.forEach(t=>{let n=t.getRootElement();if(n){let i=this._itemPositions.find(o=>o.drag===t)?.initialTransform;n.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(t){return this._getVisualItemPositions().findIndex(n=>n.drag===t)}getItemAtIndex(t){return this._getVisualItemPositions()[t]?.drag||null}updateOnScroll(t,n){this._itemPositions.forEach(({clientRect:i})=>{fS(i,t,n)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}withElementContainer(t){this._element=t}_cacheItemPositions(){let t=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(n=>{let i=n.getVisibleElement();return{drag:n,offset:0,initialTransform:i.style.transform||"",clientRect:GG(i)}}).sort((n,i)=>t?n.clientRect.left-i.clientRect.left:n.clientRect.top-i.clientRect.top)}_getVisualItemPositions(){return this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions}_getItemOffsetPx(t,n,i){let o=this.orientation==="horizontal",r=o?n.left-t.left:n.top-t.top;return i===-1&&(r+=o?n.width-t.width:n.height-t.height),r}_getSiblingOffsetPx(t,n,i){let o=this.orientation==="horizontal",r=n[t].clientRect,s=n[t+i*-1],a=r[o?"width":"height"]*i;if(s){let l=o?"left":"top",c=o?"right":"bottom";i===-1?a-=s.clientRect[l]-r[c]:a+=r[l]-s.clientRect[c]}return a}_shouldEnterAsFirstChild(t,n){if(!this._activeDraggables.length)return!1;let i=this._itemPositions,o=this.orientation==="horizontal";if(i[0].drag!==this._activeDraggables[0]){let s=i[i.length-1].clientRect;return o?t>=s.right:n>=s.bottom}else{let s=i[0].clientRect;return o?t<=s.left:n<=s.top}}_getItemIndexFromPointerPosition(t,n,i,o){let r=this.orientation==="horizontal",s=this._itemPositions.findIndex(({drag:a,clientRect:l})=>{if(a===t)return!1;if(o){let c=r?o.x:o.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&c===this._previousSwap.delta)return!1}return r?n>=Math.floor(l.left)&&n<Math.floor(l.right):i>=Math.floor(l.top)&&i<Math.floor(l.bottom)});return s===-1||!this._sortPredicate(s,t)?-1:s}},$G=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(t,n){this._document=t,this._dragDropRegistry=n}start(t){let n=this._element.childNodes;this._relatedNodes=[];for(let i=0;i<n.length;i++){let o=n[i];this._relatedNodes.push([o,o.nextSibling])}this.withItems(t)}sort(t,n,i,o){let r=this._getItemIndexFromPointerPosition(t,n,i),s=this._previousSwap;if(r===-1||this._activeItems[r]===t)return null;let a=this._activeItems[r];if(s.drag===a&&s.overlaps&&s.deltaX===o.x&&s.deltaY===o.y)return null;let l=this.getItemIndex(t),c=t.getPlaceholderElement(),u=a.getRootElement();r>l?u.after(c):u.before(c),yA(this._activeItems,l,r);let h=this._getRootNode().elementFromPoint(n,i);return s.deltaX=o.x,s.deltaY=o.y,s.drag=a,s.overlaps=u===h||u.contains(h),{previousIndex:l,currentIndex:r}}enter(t,n,i,o){let r=this._activeItems.indexOf(t);r>-1&&this._activeItems.splice(r,1);let s=o==null||o<0?this._getItemIndexFromPointerPosition(t,n,i):o;s===-1&&(s=this._getClosestItemIndexToPointer(t,n,i));let a=this._activeItems[s];a&&!this._dragDropRegistry.isDragging(a)?(this._activeItems.splice(s,0,t),a.getRootElement().before(t.getPlaceholderElement())):(this._activeItems.push(t),this._element.appendChild(t.getPlaceholderElement()))}withItems(t){this._activeItems=t.slice()}withSortPredicate(t){this._sortPredicate=t}reset(){let t=this._element,n=this._previousSwap;for(let i=this._relatedNodes.length-1;i>-1;i--){let[o,r]=this._relatedNodes[i];o.parentNode===t&&o.nextSibling!==r&&(r===null?t.appendChild(o):r.parentNode===t&&t.insertBefore(o,r))}this._relatedNodes=[],this._activeItems=[],n.drag=null,n.deltaX=n.deltaY=0,n.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(t){return this._activeItems.indexOf(t)}getItemAtIndex(t){return this._activeItems[t]||null}updateOnScroll(){this._activeItems.forEach(t=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()})}withElementContainer(t){t!==this._element&&(this._element=t,this._rootNode=void 0)}_getItemIndexFromPointerPosition(t,n,i){let o=this._getRootNode().elementFromPoint(Math.floor(n),Math.floor(i)),r=o?this._activeItems.findIndex(s=>{let a=s.getRootElement();return o===a||a.contains(o)}):-1;return r===-1||!this._sortPredicate(r,t)?-1:r}_getRootNode(){return this._rootNode||(this._rootNode=If(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(t,n,i){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let o=1/0,r=-1;for(let s=0;s<this._activeItems.length;s++){let a=this._activeItems[s];if(a!==t){let{x:l,y:c}=a.getRootElement().getBoundingClientRect(),u=Math.hypot(n-l,i-c);u<o&&(o=u,r=s)}}return r}},Ame=.05,Bme=.05,_a=(function(e){return e[e.NONE=0]="NONE",e[e.UP=1]="UP",e[e.DOWN=2]="DOWN",e})(_a||{}),Fr=(function(e){return e[e.NONE=0]="NONE",e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT",e})(Fr||{}),jG=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis=null;autoScrollDisabled=!1;autoScrollStep=2;hasAnchor=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new ie;entered=new ie;exited=new ie;dropped=new ie;sorted=new ie;receivingStarted=new ie;receivingStopped=new ie;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=Mt.EMPTY;_verticalScrollDirection=_a.NONE;_horizontalScrollDirection=Fr.NONE;_scrollNode;_stopScrollTimers=new ie;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(t,n,i,o,r){this._dragDropRegistry=n,this._ngZone=o,this._viewportRuler=r;let s=this.element=_i(t);this._document=i,this.withOrientation("vertical").withElementContainer(s),n.registerDropContainer(this),this._parentPositions=new mA(i)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,n,i,o){this._draggingStarted(),o==null&&this.sortingDisabled&&(o=this._draggables.indexOf(t)),this._sortStrategy.enter(t,n,i,o),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,n,i,o,r,s,a,l={}){this._reset(),this.dropped.next({item:t,currentIndex:n,previousIndex:i,container:this,previousContainer:o,isPointerOverContainer:r,distance:s,dropPoint:a,event:l})}withItems(t){let n=this._draggables;return this._draggables=t,t.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(n.filter(o=>o.isDragging()).every(o=>t.indexOf(o)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(t){return this._direction=t,this._sortStrategy instanceof _A&&(this._sortStrategy.direction=t),this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){if(t==="mixed")this._sortStrategy=new $G(this._document,this._dragDropRegistry);else{let n=new _A(this._dragDropRegistry);n.direction=this._direction,n.orientation=t,this._sortStrategy=n}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((n,i)=>this.sortPredicate(n,i,this)),this}withScrollableParents(t){let n=this._container;return this._scrollableElements=t.indexOf(n)===-1?[n,...t]:t.slice(),this}withElementContainer(t){if(t===this._container)return this;let n=_i(this.element),i=this._scrollableElements.indexOf(this._container),o=this._scrollableElements.indexOf(t);return i>-1&&this._scrollableElements.splice(i,1),o>-1&&this._scrollableElements.splice(o,1),this._sortStrategy&&this._sortStrategy.withElementContainer(t),this._cachedShadowRoot=null,this._scrollableElements.unshift(t),this._container=t,this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?this._sortStrategy.getItemIndex(t):this._draggables.indexOf(t)}getItemAtIndex(t){return this._isDragging?this._sortStrategy.getItemAtIndex(t):this._draggables[t]||null}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,n,i,o){if(this.sortingDisabled||!this._domRect||!Sme(this._domRect,Ame,n,i))return;let r=this._sortStrategy.sort(t,n,i,o);r&&this.sorted.next({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:t})}_startScrollingIfNecessary(t,n){if(this.autoScrollDisabled)return;let i,o=_a.NONE,r=Fr.NONE;if(this._parentPositions.positions.forEach((s,a)=>{a===this._document||!s.clientRect||i||Sme(s.clientRect,Ame,t,n)&&([o,r]=PYe(a,s.clientRect,this._direction,t,n),(o||r)&&(i=a))}),!o&&!r){let{width:s,height:a}=this._viewportRuler.getViewportSize(),l={width:s,height:a,top:0,right:s,bottom:a,left:0};o=zme(l,n),r=Vme(l,t),i=window}i&&(o!==this._verticalScrollDirection||r!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=o,this._horizontalScrollDirection=r,this._scrollNode=i,(o||r)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let t=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let t=this._container.style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(n=>n._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),fL(0,YE).pipe(Vt(this._stopScrollTimers)).subscribe(()=>{let t=this._scrollNode,n=this.autoScrollStep;this._verticalScrollDirection===_a.UP?t.scrollBy(0,-n):this._verticalScrollDirection===_a.DOWN&&t.scrollBy(0,n),this._horizontalScrollDirection===Fr.LEFT?t.scrollBy(-n,0):this._horizontalScrollDirection===Fr.RIGHT&&t.scrollBy(n,0)})};_isOverContainer(t,n){return this._domRect!=null&&zG(this._domRect,t,n)}_getSiblingContainerFromPosition(t,n,i){return this._siblings.find(o=>o._canReceive(t,n,i))}_canReceive(t,n,i){if(!this._domRect||!zG(this._domRect,n,i)||!this.enterPredicate(t,this))return!1;let o=this._getShadowRoot().elementFromPoint(n,i);return o?o===this._container||this._container.contains(o):!1}_startReceiving(t,n){let i=this._activeSiblings;!i.has(t)&&n.every(o=>this.enterPredicate(o,this)||this._draggables.indexOf(o)>-1)&&(i.add(t),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:t,receiver:this,items:n}))}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:t,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){let n=this._parentPositions.handleScroll(t);n&&this._sortStrategy.updateOnScroll(n.top,n.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let t=If(this._container);this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let t=this._sortStrategy.getActiveItemsSnapshot().filter(n=>n.isDragging());this._siblings.forEach(n=>n._startReceiving(this,t))}};function zme(e,t){let{top:n,bottom:i,height:o}=e,r=o*Bme;return t>=n-r&&t<=n+r?_a.UP:t>=i-r&&t<=i+r?_a.DOWN:_a.NONE}function Vme(e,t){let{left:n,right:i,width:o}=e,r=o*Bme;return t>=n-r&&t<=n+r?Fr.LEFT:t>=i-r&&t<=i+r?Fr.RIGHT:Fr.NONE}function PYe(e,t,n,i,o){let r=zme(t,o),s=Vme(t,i),a=_a.NONE,l=Fr.NONE;if(r){let c=e.scrollTop;r===_a.UP?c>0&&(a=_a.UP):e.scrollHeight-c>e.clientHeight&&(a=_a.DOWN)}if(s){let c=e.scrollLeft;n==="rtl"?s===Fr.RIGHT?c<0&&(l=Fr.RIGHT):e.scrollWidth+c>e.clientWidth&&(l=Fr.LEFT):s===Fr.LEFT?c>0&&(l=Fr.LEFT):e.scrollWidth-c>e.clientWidth&&(l=Fr.RIGHT)}return[a,l]}var pS={capture:!0},NG={passive:!1,capture:!0},AYe=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275cmp=pe({type:e,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(i,o){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return e})(),Hme=(()=>{class e{_ngZone=k(me);_document=k(Je);_styleLoader=k(ni);_renderer=k(xi).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new ie;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=$t([]);_globalListeners;_draggingPredicate=n=>n.isDragging();_domNodesToDirectives=null;pointerMove=new ie;pointerUp=new ie;constructor(){}registerDropContainer(n){this._dropInstances.has(n)||this._dropInstances.add(n)}registerDragItem(n){this._dragInstances.add(n),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,NG)})}removeDropContainer(n){this._dropInstances.delete(n)}removeDragItem(n){this._dragInstances.delete(n),this.stopDragging(n),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(n,i){if(!(this._activeDragInstances().indexOf(n)>-1)&&(this._styleLoader.load(AYe),this._activeDragInstances.update(o=>[...o,n]),this._activeDragInstances().length===1)){let o=i.type.startsWith("touch"),r=a=>this.pointerUp.next(a),s=[["scroll",a=>this._scroll.next(a),pS],["selectstart",this._preventDefaultWhileDragging,NG]];o?s.push(["touchend",r,pS],["touchcancel",r,pS]):s.push(["mouseup",r,pS]),o||s.push(["mousemove",a=>this.pointerMove.next(a),NG]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=s.map(([a,l,c])=>this._renderer.listen(this._document,a,l,c))})}}stopDragging(n){this._activeDragInstances.update(i=>{let o=i.indexOf(n);return o>-1?(i.splice(o,1),[...i]):i}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(n){return this._activeDragInstances().indexOf(n)>-1}scrolled(n){let i=[this._scroll];return n&&n!==this._document&&i.push(new yt(o=>this._ngZone.runOutsideAngular(()=>{let r=this._renderer.listen(n,"scroll",s=>{this._activeDragInstances().length&&o.next(s)},pS);return()=>{r()}}))),Ni(...i)}registerDirectiveNode(n,i){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(n,i)}removeDirectiveNode(n){this._domNodesToDirectives?.delete(n)}getDragDirectiveForNode(n){return this._domNodesToDirectives?.get(n)||null}ngOnDestroy(){this._dragInstances.forEach(n=>this.removeDragItem(n)),this._dropInstances.forEach(n=>this.removeDropContainer(n)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=n=>{this._activeDragInstances().length>0&&n.preventDefault()};_persistentTouchmoveListener=n=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&n.preventDefault(),this.pointerMove.next(n))};_clearGlobalListeners(){this._globalListeners?.forEach(n=>n()),this._globalListeners=void 0}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),OYe={dragStartThreshold:5,pointerDirectionChangeThreshold:5},WG=(()=>{class e{_document=k(Je);_ngZone=k(me);_viewportRuler=k(fa);_dragDropRegistry=k(Hme);_renderer=k(xi).createRenderer(null,null);constructor(){}createDrag(n,i=OYe){return new HG(n,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(n){return new jG(n,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ome=new q("CDK_DRAG_PARENT");var FYe=new q("CdkDragHandle");var $me=new q("CDK_DRAG_CONFIG"),jme=new q("CdkDropList"),bA=(()=>{class e{element=k(Oe);dropContainer=k(jme,{optional:!0,skipSelf:!0});_ngZone=k(me);_viewContainerRef=k(li);_dir=k(wo,{optional:!0});_changeDetectorRef=k(dn);_selfHandle=k(FYe,{optional:!0,self:!0});_parentDrag=k(Ome,{optional:!0,skipSelf:!0});_dragDropRegistry=k(Hme);_destroyed=new ie;_handles=new kn([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis=null;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(n){this._disabled=n,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new V;released=new V;ended=new V;entered=new V;exited=new V;dropped=new V;moved=new yt(n=>{let i=this._dragRef.moved.pipe(tt(o=>({source:this,pointerPosition:o.pointerPosition,event:o.event,delta:o.delta,distance:o.distance}))).subscribe(n);return()=>{i.unsubscribe()}});_injector=k(Ke);constructor(){let n=this.dropContainer,i=k($me,{optional:!0}),o=k(WG);this._dragRef=o.createDrag(this.element,{dragStartThreshold:i&&i.dragStartThreshold!=null?i.dragStartThreshold:5,pointerDirectionChangeThreshold:i&&i.pointerDirectionChangeThreshold!=null?i.pointerDirectionChangeThreshold:5,zIndex:i?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),i&&this._assignDefaults(i),n&&(n.addItem(this),n._dropListRef.beforeStarted.pipe(Vt(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(n){this._dragRef.setFreeDragPosition(n)}ngAfterViewInit(){ai(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(n){let i=n.rootElementSelector,o=n.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,o&&!o.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(n){let i=this._handles.getValue();i.push(n),this._handles.next(i)}_removeHandle(n){let i=this._handles.getValue(),o=i.indexOf(n);o>-1&&(i.splice(o,1),this._handles.next(i))}_setPreviewTemplate(n){this._previewTemplate=n}_resetPreviewTemplate(n){n===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(n){this._placeholderTemplate=n}_resetPlaceholderTemplate(n){n===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let n=this.element.nativeElement,i=n;this.rootElementSelector&&(i=n.closest!==void 0?n.closest(this.rootElementSelector):n.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||n)}_getBoundaryElement(){let n=this.boundaryElement;return n?typeof n=="string"?this.element.nativeElement.closest(n):_i(n):null}_syncInputs(n){n.beforeStarted.subscribe(()=>{if(!n.isDragging()){let i=this._dir,o=this.dragStartDelay,r=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,s=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;n.disabled=this.disabled,n.lockAxis=this.lockAxis,n.scale=this.scale,n.dragStartDelay=typeof o=="object"&&o?o:Ki(o),n.constrainPosition=this.constrainPosition,n.previewClass=this.previewClass,n.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(r).withPreviewTemplate(s).withPreviewContainer(this.previewContainer||"global"),i&&n.withDirection(i.value)}}),n.beforeStarted.pipe(ri(1)).subscribe(()=>{if(this._parentDrag){n.withParent(this._parentDrag._dragRef);return}let i=this.element.nativeElement.parentElement;for(;i;){let o=this._dragDropRegistry.getDragDirectiveForNode(i);if(o){n.withParent(o._dragRef);break}i=i.parentElement}})}_handleEvents(n){n.started.subscribe(i=>{this.started.emit({source:this,event:i.event}),this._changeDetectorRef.markForCheck()}),n.released.subscribe(i=>{this.released.emit({source:this,event:i.event})}),n.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),n.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),n.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),n.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event})})}_assignDefaults(n){let{lockAxis:i,dragStartDelay:o,constrainPosition:r,previewClass:s,boundaryElement:a,draggingDisabled:l,rootElementSelector:c,previewContainer:u}=n;this.disabled=l??!1,this.dragStartDelay=o||0,this.lockAxis=i||null,r&&(this.constrainPosition=r),s&&(this.previewClass=s),a&&(this.boundaryElement=a),c&&(this.rootElementSelector=c),u&&(this.previewContainer=u)}_setupHandlesListener(){this._handles.pipe(wi(n=>{let i=n.map(o=>o.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),eo(n=>Ni(...n.map(i=>i._stateChanges.pipe(Pi(i))))),Vt(this._destroyed)).subscribe(n=>{let i=this._dragRef,o=n.element.nativeElement;n.disabled?i.disableHandle(o):i.enableHandle(o)})}static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(i,o){i&2&&be("cdk-drag-disabled",o.disabled)("cdk-drag-dragging",o._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",$],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",$r]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[kt([{provide:Ome,useExisting:e}]),sn]})}return e})(),Fme=new q("CdkDropListGroup");var CA=(()=>{class e{element=k(Oe);_changeDetectorRef=k(dn);_scrollDispatcher=k(pa);_dir=k(wo,{optional:!0});_group=k(Fme,{optional:!0,skipSelf:!0});_latestSortedRefs;_destroyed=new ie;_scrollableParentsResolved;static _dropLists=[];_dropListRef;connectedTo=[];data;orientation;id=k(Zi).getId("cdk-drop-list-");lockAxis=null;get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(n){this._dropListRef.disabled=this._disabled=n}_disabled;sortingDisabled;enterPredicate=()=>!0;sortPredicate=()=>!0;autoScrollDisabled;autoScrollStep;elementContainerSelector;hasAnchor;dropped=new V;entered=new V;exited=new V;sorted=new V;_unsortedItems=new Set;constructor(){let n=k(WG),i=k($me,{optional:!0});this._dropListRef=n.createDropList(this.element),this._dropListRef.data=this,i&&this._assignDefaults(i),this._dropListRef.enterPredicate=(o,r)=>this.enterPredicate(o.data,r.data),this._dropListRef.sortPredicate=(o,r,s)=>this.sortPredicate(o,r.data,s.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),e._dropLists.push(this),this._group&&this._group._items.add(this)}addItem(n){this._unsortedItems.add(n),n._dragRef._withDropContainer(this._dropListRef),this._dropListRef.isDragging()&&this._syncItemsWithRef(this.getSortedItems().map(i=>i._dragRef))}removeItem(n){if(this._unsortedItems.delete(n),this._latestSortedRefs){let i=this._latestSortedRefs.indexOf(n._dragRef);i>-1&&(this._latestSortedRefs.splice(i,1),this._syncItemsWithRef(this._latestSortedRefs))}}getSortedItems(){return Array.from(this._unsortedItems).sort((n,i)=>n._dragRef.getVisibleElement().compareDocumentPosition(i._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let n=e._dropLists.indexOf(this);n>-1&&e._dropLists.splice(n,1),this._group&&this._group._items.delete(this),this._latestSortedRefs=void 0,this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(n){this._dir&&this._dir.change.pipe(Pi(this._dir.value),Vt(this._destroyed)).subscribe(i=>n.withDirection(i)),n.beforeStarted.subscribe(()=>{let i=oh(this.connectedTo).map(o=>{if(typeof o=="string"){let r=e._dropLists.find(s=>s.id===o);return r}return o});if(this._group&&this._group._items.forEach(o=>{i.indexOf(o)===-1&&i.push(o)}),!this._scrollableParentsResolved){let o=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(r=>r.getElementRef().nativeElement);this._dropListRef.withScrollableParents(o),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let o=this.element.nativeElement.querySelector(this.elementContainerSelector);n.withElementContainer(o)}n.disabled=this.disabled,n.lockAxis=this.lockAxis,n.sortingDisabled=this.sortingDisabled,n.autoScrollDisabled=this.autoScrollDisabled,n.autoScrollStep=Ki(this.autoScrollStep,2),n.hasAnchor=this.hasAnchor,n.connectedTo(i.filter(o=>o&&o!==this).map(o=>o._dropListRef)).withOrientation(this.orientation)})}_handleEvents(n){n.beforeStarted.subscribe(()=>{this._syncItemsWithRef(this.getSortedItems().map(i=>i._dragRef)),this._changeDetectorRef.markForCheck()}),n.entered.subscribe(i=>{this.entered.emit({container:this,item:i.item.data,currentIndex:i.currentIndex})}),n.exited.subscribe(i=>{this.exited.emit({container:this,item:i.item.data}),this._changeDetectorRef.markForCheck()}),n.sorted.subscribe(i=>{this.sorted.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,container:this,item:i.item.data})}),n.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,item:i.item.data,isPointerOverContainer:i.isPointerOverContainer,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),Ni(n.receivingStarted,n.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(n){let{lockAxis:i,draggingDisabled:o,sortingDisabled:r,listAutoScrollDisabled:s,listOrientation:a}=n;this.disabled=o??!1,this.sortingDisabled=r??!1,this.autoScrollDisabled=s??!1,this.orientation=a||"vertical",this.lockAxis=i||null}_syncItemsWithRef(n){this._latestSortedRefs=n,this._dropListRef.withItems(n)}static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(i,o){i&2&&(pt("id",o.id),be("cdk-drop-list-disabled",o.disabled)("cdk-drop-list-dragging",o._dropListRef.isDragging())("cdk-drop-list-receiving",o._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",$],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",$],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",$],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"],hasAnchor:[2,"cdkDropListHasAnchor","hasAnchor",$]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[kt([{provide:Fme,useValue:void 0},{provide:jme,useExisting:e}])]})}return e})();var Gme=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({providers:[WG],imports:[ss]})}return e})();var wA=class e{transform(t,n=100,i="..."){return t?t.length<=n?t:t.substring(0,n)+i:""}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=In({name:"truncate",type:e,pure:!0})},xA=class e{transform(t){return t.type==="kanban"&&t.data!==void 0&&t.data.board_title!==void 0&&Array.isArray(t.data.columns)}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=In({name:"isKanbanLayout",type:e,pure:!0})},SA=class e{transform(t){return t?t.filter(n=>n.type==="kanban"):[]}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=In({name:"filterKanban",type:e,pure:!0})};function LYe(e,t){if(e&1&&(M(0,"span",12),Ae(1,"i",15),N(2),R()),e&2){let n=A(2);P(2),qe(" ",n.data.metadata.created_by," ")}}function NYe(e,t){if(e&1&&(M(0,"div",3)(1,"span",12),Ae(2,"i",13),N(3),R(),M(4,"span",12),Ae(5,"i",14),N(6),R(),K(7,LYe,3,1,"span",12),R()),e&2){let n=A();P(3),qe(" ",n.totalCards," cards "),P(3),qe(" Updated ",n.formatDate(n.data.metadata.updated_at)," "),P(),Z(n.data.metadata.created_by?7:-1)}}function BYe(e,t){if(e&1){let n=Ge();M(0,"div",7)(1,"div",16)(2,"h3"),N(3,"Board Settings"),R(),M(4,"div",17)(5,"label")(6,"input",18),or("ngModelChange",function(o){J(n);let r=A();return Sr(r.settings.compact_view,o)||(r.settings.compact_view=o),X(o)}),R(),N(7," Compact View "),R()(),M(8,"div",17)(9,"label")(10,"input",18),or("ngModelChange",function(o){J(n);let r=A();return Sr(r.settings.show_wip_limits,o)||(r.settings.show_wip_limits=o),X(o)}),R(),N(11," Show WIP Limits "),R()(),M(12,"div",17)(13,"label")(14,"input",18),or("ngModelChange",function(o){J(n);let r=A();return Sr(r.settings.show_avatars,o)||(r.settings.show_avatars=o),X(o)}),R(),N(15," Show Avatars "),R()(),M(16,"div",17)(17,"label")(18,"input",18),or("ngModelChange",function(o){J(n);let r=A();return Sr(r.settings.auto_save,o)||(r.settings.auto_save=o),X(o)}),R(),N(19," Auto Save Changes "),R()()()()}if(e&2){let n=A();P(6),ir("ngModel",n.settings.compact_view),P(4),ir("ngModel",n.settings.show_wip_limits),P(4),ir("ngModel",n.settings.show_avatars),P(4),ir("ngModel",n.settings.auto_save)}}function zYe(e,t){if(e&1&&(M(0,"span",22),Ae(1,"i"),R()),e&2){let n=A().$implicit;P(),ki("icon-"+n.icon)}}function VYe(e,t){if(e&1&&(M(0,"span",25),N(1),R()),e&2){let n=A().$implicit;P(),og(" WIP: ",n.cards.length,"/",n.wip_limit," ")}}function HYe(e,t){if(e&1&&(M(0,"div",26),Ae(1,"i",30),N(2),R()),e&2){let n=A().$implicit;P(2),qe(" Exceeds WIP limit by ",n.cards.length-n.wip_limit," ")}}function $Ye(e,t){if(e&1&&(M(0,"p",39),N(1),bt(2,"truncate"),R()),e&2){let n=A().$implicit;P(),qe(" ",Jh(2,1,n.description,100)," ")}}function jYe(e,t){if(e&1&&(M(0,"span",51),N(1),R()),e&2){let n=t.$implicit,i=A(4);Di("background",i.getTagColor(n)),P(),qe(" ",n," ")}}function GYe(e,t){if(e&1&&(M(0,"span",50),N(1),R()),e&2){let n=A(2).$implicit;P(),qe(" +",n.tags.length-3," ")}}function UYe(e,t){if(e&1&&(M(0,"div",40),an(1,jYe,2,3,"span",49,qn),K(3,GYe,2,1,"span",50),R()),e&2){let n=A().$implicit;P(),ln(n.tags.slice(0,3)),P(2),Z(n.tags.length>3?3:-1)}}function WYe(e,t){if(e&1&&(M(0,"div",43),N(1),R()),e&2){let n=A().$implicit,i=A(2);le("title",n.assignee),P(),qe(" ",i.getInitials(n.assignee)," ")}}function qYe(e,t){if(e&1&&(M(0,"span",52),Ae(1,"i",53),N(2),R()),e&2){let n=A().$implicit,i=A(2);be("overdue",i.isOverdue(n.due_date)),P(2),qe(" ",i.formatDueDate(n.due_date)," ")}}function KYe(e,t){if(e&1&&(M(0,"span",46),Ae(1,"i",54),N(2),R()),e&2){let n=A().$implicit,i=A(2);P(2),qe(" ",i.getCardAttachmentsLength(n)," ")}}function ZYe(e,t){if(e&1&&(M(0,"span",47),Ae(1,"i",55),N(2),R()),e&2){let n=A().$implicit;P(2),qe(" ",n.comments," ")}}function YYe(e,t){if(e&1){let n=Ge();M(0,"div",31),Q("click",function(){let o=J(n).$implicit,r=A(2);return X(r.openCardDetail(o))}),M(1,"div",32),Ae(2,"i",33),R(),M(3,"div",34)(4,"div",35)(5,"h4",36),N(6),R(),M(7,"button",37),Q("click",function(o){let r=J(n).$implicit,s=A(2);return o.stopPropagation(),X(s.openCardMenu(r,o))}),Ae(8,"i",38),R()(),K(9,$Ye,3,4,"p",39),K(10,UYe,4,1,"div",40),M(11,"div",41)(12,"div",42),K(13,WYe,2,2,"div",43),K(14,qYe,3,3,"span",44),R(),M(15,"div",45),K(16,KYe,3,1,"span",46),K(17,ZYe,3,1,"span",47),M(18,"span",48),N(19),bt(20,"titlecase"),R()()()()()}if(e&2){let n=t.$implicit,i=A(2);be("card-priority-low",n.priority==="low")("card-priority-medium",n.priority==="medium")("card-priority-high",n.priority==="high")("card-priority-critical",n.priority==="critical"),le("cdkDragData",n),P(6),nt(n.title),P(3),Z(n.description?9:-1),P(),Z(n.tags&&n.tags.length?10:-1),P(3),Z(i.settings.show_avatars&&n.assignee?13:-1),P(),Z(n.due_date?14:-1),P(2),Z(n.attachments&&n.attachments.length>0?16:-1),P(),Z(n.comments&&n.comments>0?17:-1),P(),ki("priority-"+n.priority),P(),qe(" ",Ot(20,19,n.priority)," ")}}function QYe(e,t){e&1&&(M(0,"div",29),Ae(1,"i",56),M(2,"p"),N(3,"No cards"),R()())}function JYe(e,t){if(e&1){let n=Ge();M(0,"div",19)(1,"div",20)(2,"div",21),K(3,zYe,2,2,"span",22),M(4,"h3"),N(5),R(),M(6,"span",23),N(7),R()(),M(8,"div",24),K(9,VYe,2,2,"span",25),R()(),K(10,HYe,3,1,"div",26),M(11,"div",27),Q("cdkDropListDropped",function(o){J(n);let r=A();return X(r.drop(o))}),an(12,YYe,21,21,"div",28,qn),K(14,QYe,4,0,"div",29),R()()}if(e&2){let n=t.$implicit,i=A();Di("border-top-color",n.color||"#e0e0e0"),P(3),Z(n.icon?3:-1),P(2),nt(n.title),P(2),nt(n.cards.length),P(2),Z(i.settings.show_wip_limits&&n.wip_limit?9:-1),P(),Z(n.wip_limit&&n.cards.length>n.wip_limit?10:-1),P(),le("id","cdk-drop-list-"+n.id)("cdkDropListData",n.cards)("cdkDropListConnectedTo",i.getConnectedLists()),P(),ln(n.cards),P(2),Z(n.cards.length===0?14:-1)}}function XYe(e,t){if(e&1&&(M(0,"span",71),N(1),R()),e&2){let n=t.$implicit,i=A(3);Di("background",i.getTagColor(n)),P(),qe(" ",n," ")}}function eQe(e,t){if(e&1&&(M(0,"div",63)(1,"label"),N(2,"Tags"),R(),M(3,"div",69),an(4,XYe,2,3,"span",70,qn),R()()),e&2){let n=A(2);P(4),ln(n.selectedCard.tags)}}function tQe(e,t){if(e&1&&(M(0,"div",73),Ae(1,"i"),M(2,"a",74),N(3),R(),M(4,"span",75),N(5),R()()),e&2){let n=t.$implicit,i=A(3);P(),ki("icon-file-"+n.type),P(),le("href",n.url,Wb),P(),qe(" ",n.name," "),P(2),nt(i.getFileSize(n))}}function nQe(e,t){if(e&1&&(M(0,"div",63)(1,"label"),N(2),R(),M(3,"div",72),an(4,tQe,6,5,"div",73,qn),R()()),e&2){let n=A(2);P(2),qe("Attachments (",n.getSelectedCardAttachmentsLength(),")"),P(2),ln(n.selectedCard.attachments)}}function iQe(e,t){if(e&1&&(M(0,"div",63)(1,"label"),N(2,"Additional Information"),R(),M(3,"pre",76),N(4),bt(5,"json"),R()()),e&2){let n=A(2);P(4),nt(Ot(5,1,n.selectedCard.metadata))}}function oQe(e,t){if(e&1){let n=Ge();M(0,"div",57),Q("click",function(){J(n);let o=A();return X(o.closeCardDetail())}),M(1,"div",58),Q("click",function(o){return J(n),X(o.stopPropagation())}),M(2,"div",59)(3,"h3"),N(4),R(),M(5,"button",60),Q("click",function(){J(n);let o=A();return X(o.closeCardDetail())}),Ae(6,"i",61),R()(),M(7,"div",62)(8,"div",63)(9,"label"),N(10,"Description"),R(),M(11,"p",64),N(12),R()(),M(13,"div",65)(14,"div",66)(15,"label"),N(16,"Assignee"),R(),M(17,"p"),N(18),R()(),M(19,"div",66)(20,"label"),N(21,"Due Date"),R(),M(22,"p"),N(23),R()(),M(24,"div",66)(25,"label"),N(26,"Priority"),R(),M(27,"span",48),N(28),bt(29,"titlecase"),R()(),M(30,"div",66)(31,"label"),N(32,"Status"),R(),M(33,"p"),N(34),bt(35,"titlecase"),R()()(),K(36,eQe,6,0,"div",63),K(37,nQe,6,1,"div",63),K(38,iQe,6,3,"div",63),R(),M(39,"div",67)(40,"button",68),Q("click",function(){J(n);let o=A();return X(o.closeCardDetail())}),N(41," Close "),R()()()()}if(e&2){let n=A();P(4),nt(n.selectedCard.title),P(8),nt(n.selectedCard.description||"No description"),P(6),nt(n.selectedCard.assignee||"Unassigned"),P(4),be("overdue",n.isOverdue(n.selectedCard.due_date)),P(),qe(" ",n.selectedCard.due_date?n.formatDueDate(n.selectedCard.due_date):"No due date"," "),P(4),ki("priority-"+n.selectedCard.priority),P(),qe(" ",Ot(29,13,n.selectedCard.priority)," "),P(6),nt(Ot(35,15,n.selectedCard.status)),P(2),Z(n.selectedCard.tags!=null&&n.selectedCard.tags.length?36:-1),P(),Z(n.selectedCard.attachments!=null&&n.selectedCard.attachments.length?37:-1),P(),Z(n.selectedCard.metadata?38:-1)}}function rQe(e,t){if(e&1){let n=Ge();M(0,"div",77)(1,"ul")(2,"li",78),Q("click",function(){J(n);let o=A();return X(o.moveCardToColumn(o.selectedCardForMenu,"todo"))}),Ae(3,"i",79),N(4," Move to Todo "),R(),M(5,"li",78),Q("click",function(){J(n);let o=A();return X(o.moveCardToColumn(o.selectedCardForMenu,"in_progress"))}),Ae(6,"i",79),N(7," Move to In Progress "),R(),M(8,"li",78),Q("click",function(){J(n);let o=A();return X(o.moveCardToColumn(o.selectedCardForMenu,"done"))}),Ae(9,"i",79),N(10," Move to Done "),R(),Ae(11,"li",80),M(12,"li",78),Q("click",function(){J(n);let o=A();return X(o.copyCardLink(o.selectedCardForMenu))}),Ae(13,"i",81),N(14," Copy Link "),R(),M(15,"li",78),Q("click",function(){J(n);let o=A();return X(o.exportCard(o.selectedCardForMenu))}),Ae(16,"i",82),N(17," Export as JSON "),R()()()}if(e&2){let n=A();Di("top",n.menuPosition.y,"px")("left",n.menuPosition.x,"px")}}var EA=class e{data;actionTriggered=new V;boardUpdated=new V;showForm=!1;formLayout=null;formActionType="add";targetColumnForNewCard=null;cardToEdit=null;selectedCard=null;selectedCardForMenu=null;showCardMenu=!1;menuPosition={x:0,y:0};showSettings=!1;isAddingCardToColumn=null;settings={allow_card_creation:!1,allow_card_deletion:!1,allow_card_editing:!1,show_wip_limits:!0,auto_save:!0,show_avatars:!0,compact_view:!1};tagColors={};get totalCards(){return this.data.columns.reduce((t,n)=>t+n.cards.length,0)}ngOnInit(){this.initializeSettings(),this.generateTagColors(),this.setupAutoSave()}ngOnChanges(t){t.data&&(this.initializeSettings(),this.generateTagColors())}initializeSettings(){this.data.settings&&(this.settings=g(g({},this.settings),this.data.settings))}generateTagColors(){let t=new Set;this.data.columns.forEach(i=>{i.cards.forEach(o=>{o.tags?.forEach(r=>t.add(r))})});let n=["#E3F2FD","#F3E5F5","#E8F5E8","#FFF3E0","#FCE4EC","#F3E5F5","#E8EAF6","#E0F2F1","#FFF8E1","#F1F8E9","#FFEBEE","#ECEFF1"];Array.from(t).forEach((i,o)=>{this.tagColors[i]=n[o%n.length]})}setupAutoSave(){this.settings.auto_save&&this.boardUpdated.subscribe(()=>{this.autoSaveBoard()})}drop(t){if(console.log("Previous container ID:",t.previousContainer.id),console.log("Current container ID:",t.container.id),console.log("Previous index:",t.previousIndex),console.log("Current index:",t.currentIndex),console.log("Connected lists:",this.data.columns.map(n=>`cdk-drop-list-${n.id}`)),t.previousContainer===t.container)yA(t.container.data,t.previousIndex,t.currentIndex);else{Nme(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex);let n=t.container.data[t.currentIndex],i=t.container.id,o=this.data.columns.find(r=>`cdk-drop-list-${r.id}`===i||r.id===i);o&&n&&(n.status=o.status,n.updated_at=new Date().toISOString(),console.log(`Card moved to column: ${o.title}, status: ${o.status}`),this.actionTriggered.emit({type:"move_card",action:this.data.actions?.move_card,card:n,fromColumn:this.findColumnById(t.previousContainer.id),toColumn:o}))}this.emitBoardUpdate()}findColumnById(t){let n=t.replace("cdk-drop-list-","");return this.data.columns.find(i=>i.id===n)}getConnectedLists(){return this.data.columns.map(t=>`cdk-drop-list-${t.id}`)}getStatusFromColumnId(t){return this.data.columns.find(i=>i.id===t)?.status||"todo"}openCardDetail(t){this.selectedCard=t}closeCardDetail(){this.selectedCard=null}openCardMenu(t,n){n.preventDefault(),this.selectedCardForMenu=t,this.showCardMenu=!0,this.menuPosition={x:n.clientX,y:n.clientY},setTimeout(()=>{document.addEventListener("click",this.closeCardMenu.bind(this))})}closeCardMenu(){this.showCardMenu=!1,this.selectedCardForMenu=null,document.removeEventListener("click",this.closeCardMenu.bind(this))}moveCardToColumn(t,n){if(!t)return;let i=this.findCardColumn(t),o=this.data.columns.find(r=>r.status===n);i&&o&&i.id!==o.id&&(i.cards=i.cards.filter(r=>r.id!==t.id),t.status=n,t.updated_at=new Date().toISOString(),o.cards.push(t),this.emitBoardUpdate())}findCardColumn(t){return this.data.columns.find(n=>n.cards.some(i=>i.id===t.id))}getTagColor(t){return this.tagColors[t]||"#E0E0E0"}getInitials(t){return t.split(" ").map(n=>n[0]).join("").toUpperCase().substring(0,2)}isOverdue(t){return t?new Date(t)<new Date:!1}formatDate(t){return new Date(t).toLocaleDateString()}formatDueDate(t){let n=new Date(t),i=new Date,o=n.getTime()-i.getTime(),r=Math.ceil(o/(1e3*60*60*24));return r===0?"Today":r===1?"Tomorrow":r===-1?"Yesterday":r<0?`${Math.abs(r)} days ago`:`In ${r} days`}getFileSize(t){return"1.2 MB"}copyCardLink(t){if(!t)return;let n=`${window.location.origin}/card/${t.id}`;navigator.clipboard.writeText(n).then(()=>{console.log("Link copied to clipboard")})}exportCard(t){if(!t)return;let n=JSON.stringify(t,null,2),i="data:application/json;charset=utf-8,"+encodeURIComponent(n),o=`card-${t.id}.json`,r=document.createElement("a");r.setAttribute("href",i),r.setAttribute("download",o),r.click()}toggleSettings(){this.showSettings=!this.showSettings}getSelectedCardAttachmentsLength(){return this.selectedCard?.attachments?.length||0}emitBoardUpdate(){this.boardUpdated.emit(this.data)}autoSaveBoard(){console.log("Auto-saving board...",this.data)}getCardAttachmentsLength(t){return t.attachments?.length||0}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=pe({type:e,selectors:[["app-kanban-board"]],inputs:{data:"data"},outputs:{actionTriggered:"actionTriggered",boardUpdated:"boardUpdated"},features:[sn],decls:15,vars:9,consts:[[1,"kanban-container"],[1,"kanban-header"],[1,"board-info"],[1,"board-meta"],[1,"board-actions"],[1,"btn-settings",3,"click"],[1,"icon-settings"],[1,"settings-panel"],["cdkDropListGroup","",1,"kanban-board"],[1,"kanban-column",3,"border-top-color"],[1,"modal-overlay"],[1,"context-menu",3,"top","left"],[1,"meta-item"],[1,"icon-cards"],[1,"icon-updated"],[1,"icon-user"],[1,"settings-content"],[1,"setting-item"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"kanban-column"],[1,"column-header"],[1,"column-title"],[1,"column-icon"],[1,"card-count"],[1,"column-actions"],[1,"wip-limit"],[1,"wip-warning"],["cdkDropList","",1,"cards-container",3,"cdkDropListDropped","id","cdkDropListData","cdkDropListConnectedTo"],["cdkDrag","",1,"kanban-card",3,"cdkDragData","card-priority-low","card-priority-medium","card-priority-high","card-priority-critical"],[1,"empty-column"],[1,"icon-warning"],["cdkDrag","",1,"kanban-card",3,"click","cdkDragData"],["cdkDragHandle","",1,"card-drag-handle"],[1,"icon-drag"],[1,"card-content"],[1,"card-header"],[1,"card-title"],[1,"btn-card-menu",3,"click"],[1,"icon-more"],[1,"card-description"],[1,"card-tags"],[1,"card-footer"],[1,"footer-left"],[1,"assignee-avatar",3,"title"],[1,"due-date",3,"overdue"],[1,"footer-right"],[1,"card-attachments"],[1,"card-comments"],[1,"priority-badge"],[1,"tag",3,"background"],[1,"tag-more"],[1,"tag"],[1,"due-date"],[1,"icon-calendar"],[1,"icon-attachment"],[1,"icon-comment"],[1,"icon-empty"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"btn-close",3,"click"],[1,"icon-close"],[1,"modal-body"],[1,"card-detail-section"],[1,"card-full-description"],[1,"detail-grid"],[1,"detail-item"],[1,"modal-footer"],[1,"btn-secondary",3,"click"],[1,"tags-container"],[1,"tag","detail-tag",3,"background"],[1,"tag","detail-tag"],[1,"attachments-list"],[1,"attachment-item"],["target","_blank",1,"attachment-link",3,"href"],[1,"attachment-size"],[1,"metadata-json"],[1,"context-menu"],[3,"click"],[1,"icon-move"],[1,"divider"],[1,"icon-link"],[1,"icon-export"]],template:function(n,i){n&1&&(M(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),N(4),R(),K(5,NYe,8,3,"div",3),R(),M(6,"div",4)(7,"button",5),Q("click",function(){return i.toggleSettings()}),Ae(8,"i",6),R()()(),K(9,BYe,20,4,"div",7),M(10,"div",8),an(11,JYe,15,11,"div",9,qn),R(),K(13,oQe,42,17,"div",10),K(14,rQe,18,4,"div",11),R()),n&2&&(be("compact",i.settings.compact_view),P(4),nt(i.data.board_title),P(),Z(i.data.metadata?5:-1),P(4),Z(i.showSettings?9:-1),P(),be("columns-overflow",i.data.columns.length>4),P(),ln(i.data.columns),P(2),Z(i.selectedCard?13:-1),P(),Z(i.showCardMenu?14:-1))},dependencies:[oo,is,Ef,ua,Md,bA,CA,Xh,fC,wA],styles:[".kanban-container[_ngcontent-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,sans-serif;padding:1rem;background:#f8f9fa;border-radius:8px;height:100%;overflow:hidden}.kanban-container.compact[_ngcontent-%COMP%]   .kanban-card[_ngcontent-%COMP%]{padding:.5rem;font-size:.875rem}.kanban-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.kanban-header[_ngcontent-%COMP%]   .board-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#2c3e50;font-size:1.5rem}.kanban-header[_ngcontent-%COMP%]   .board-info[_ngcontent-%COMP%]   .board-meta[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:.5rem;color:#7f8c8d;font-size:.875rem}.kanban-header[_ngcontent-%COMP%]   .board-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.kanban-header[_ngcontent-%COMP%]   .board-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;border-radius:4px;cursor:pointer;font-size:.875rem;display:flex;align-items:center;gap:.5rem}.kanban-header[_ngcontent-%COMP%]   .board-actions[_ngcontent-%COMP%]   button.btn-settings[_ngcontent-%COMP%]{background:#ecf0f1;color:#7f8c8d}.kanban-header[_ngcontent-%COMP%]   .board-actions[_ngcontent-%COMP%]   button.btn-settings[_ngcontent-%COMP%]:hover{background-color:#bdc3c7}.kanban-board[_ngcontent-%COMP%]{display:flex;gap:1rem;overflow-x:auto;padding:.5rem;height:calc(100% - 80px)}.kanban-board.columns-overflow[_ngcontent-%COMP%]{padding-bottom:1rem}.kanban-column[_ngcontent-%COMP%]{flex:0 0 300px;background:#fff;border-radius:8px;padding:1rem;border-top:4px solid #e0e0e0;display:flex;flex-direction:column;max-height:100%}.kanban-column[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.kanban-column[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]   .column-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.kanban-column[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]   .column-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1rem;color:#2c3e50}.kanban-column[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]   .column-title[_ngcontent-%COMP%]   .card-count[_ngcontent-%COMP%]{background:#ecf0f1;color:#7f8c8d;padding:.125rem .5rem;border-radius:12px;font-size:.75rem}.kanban-column[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]   .column-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.kanban-column[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]   .column-actions[_ngcontent-%COMP%]   .wip-limit[_ngcontent-%COMP%]{font-size:.75rem;color:#e74c3c;font-weight:500}.kanban-column[_ngcontent-%COMP%]   .wip-warning[_ngcontent-%COMP%]{background:#ffeaa7;color:#e17055;padding:.5rem;border-radius:4px;font-size:.75rem;margin-bottom:.5rem;display:flex;align-items:center;gap:.5rem}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:.5rem;background:#f8f9fa;border-radius:4px;min-height:100px}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card[_ngcontent-%COMP%]{background:#fff;border-radius:6px;padding:1rem;margin-bottom:.75rem;box-shadow:0 1px 3px #0000001a;cursor:pointer;position:relative;transition:transform .2s,box-shadow .2s}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 3px 6px #00000026}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card.card-priority-critical[_ngcontent-%COMP%]{border-left:4px solid #e74c3c}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card.card-priority-high[_ngcontent-%COMP%]{border-left:4px solid #e67e22}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card.card-priority-medium[_ngcontent-%COMP%]{border-left:4px solid #f1c40f}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card.card-priority-low[_ngcontent-%COMP%]{border-left:4px solid #2ecc71}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card[_ngcontent-%COMP%]   .card-drag-handle[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;cursor:move;opacity:.3}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card[_ngcontent-%COMP%]   .card-drag-handle[_ngcontent-%COMP%]:hover{opacity:.7}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:.5rem}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin:0;font-size:.875rem;font-weight:600;color:#2c3e50;flex:1}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .btn-card-menu[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:.25rem;border-radius:4px;color:#95a5a6}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .btn-card-menu[_ngcontent-%COMP%]:hover{background:#f8f9fa;color:#7f8c8d}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card[_ngcontent-%COMP%]   .card-description[_ngcontent-%COMP%]{margin:0 0 .75rem;color:#7f8c8d;font-size:.75rem;line-height:1.4}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card[_ngcontent-%COMP%]   .card-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.25rem;margin-bottom:.75rem}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card[_ngcontent-%COMP%]   .card-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{padding:.125rem .5rem;border-radius:12px;font-size:.625rem;color:#2c3e50}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card[_ngcontent-%COMP%]   .card-tags[_ngcontent-%COMP%]   .tag-more[_ngcontent-%COMP%]{font-size:.625rem;color:#95a5a6}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:.75rem;color:#95a5a6}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .footer-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .footer-left[_ngcontent-%COMP%]   .assignee-avatar[_ngcontent-%COMP%]{width:24px;height:24px;background:#3498db;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.625rem;font-weight:700}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .footer-left[_ngcontent-%COMP%]   .due-date[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .footer-left[_ngcontent-%COMP%]   .due-date.overdue[_ngcontent-%COMP%]{color:#e74c3c}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .footer-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .footer-right[_ngcontent-%COMP%]   .priority-badge[_ngcontent-%COMP%]{padding:.125rem .5rem;border-radius:12px;font-size:.625rem;font-weight:600}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .footer-right[_ngcontent-%COMP%]   .priority-badge.priority-critical[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .footer-right[_ngcontent-%COMP%]   .priority-badge.priority-high[_ngcontent-%COMP%]{background:#fff3e0;color:#ef6c00}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .footer-right[_ngcontent-%COMP%]   .priority-badge.priority-medium[_ngcontent-%COMP%]{background:#fffde7;color:#f9a825}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .kanban-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .footer-right[_ngcontent-%COMP%]   .priority-badge.priority-low[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .empty-column[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#bdc3c7}.kanban-column[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]   .empty-column[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0 1rem}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:600px;max-height:80vh;overflow:hidden;display:flex;flex-direction:column}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #ecf0f1;display:flex;justify-content:space-between;align-items:center}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#2c3e50}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:.5rem;color:#95a5a6}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{color:#7f8c8d}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:1.5rem;overflow-y:auto;flex:1}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .card-detail-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .card-detail-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#2c3e50;margin-bottom:.5rem}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .card-detail-section[_ngcontent-%COMP%]   .card-full-description[_ngcontent-%COMP%]{margin:0;line-height:1.6;color:#34495e}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .card-detail-section[_ngcontent-%COMP%]   .tags-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .card-detail-section[_ngcontent-%COMP%]   .tags-container[_ngcontent-%COMP%]   .detail-tag[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:16px;font-size:.75rem}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .card-detail-section[_ngcontent-%COMP%]   .attachments-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .card-detail-section[_ngcontent-%COMP%]   .attachments-list[_ngcontent-%COMP%]   .attachment-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem;background:#f8f9fa;border-radius:4px}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .card-detail-section[_ngcontent-%COMP%]   .attachments-list[_ngcontent-%COMP%]   .attachment-item[_ngcontent-%COMP%]   .attachment-link[_ngcontent-%COMP%]{flex:1;color:#3498db;text-decoration:none}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .card-detail-section[_ngcontent-%COMP%]   .attachments-list[_ngcontent-%COMP%]   .attachment-item[_ngcontent-%COMP%]   .attachment-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .card-detail-section[_ngcontent-%COMP%]   .metadata-json[_ngcontent-%COMP%]{background:#f8f9fa;padding:1rem;border-radius:4px;font-size:.75rem;white-space:pre-wrap;word-break:break-all}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;margin-bottom:1.5rem}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#7f8c8d;margin-bottom:.25rem}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#2c3e50}.modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-top:1px solid #ecf0f1;display:flex;justify-content:flex-end;gap:.5rem}.modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;border-radius:4px;cursor:pointer;font-size:.875rem}.modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]{background:#ecf0f1;color:#7f8c8d}.modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#bdc3c7}.context-menu[_ngcontent-%COMP%]{position:fixed;background:#fff;border-radius:6px;box-shadow:0 2px 10px #0003;z-index:1001;min-width:200px}.context-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:.5rem 0}.context-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.5rem 1rem;cursor:pointer;display:flex;align-items:center;gap:.5rem;font-size:.875rem;color:#2c3e50}.context-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.context-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.divider[_ngcontent-%COMP%]{height:1px;background:#ecf0f1;margin:.5rem 0;padding:0;cursor:default}.context-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.divider[_ngcontent-%COMP%]:hover{background-color:#ecf0f1}.settings-panel[_ngcontent-%COMP%]{background:#fff;border-radius:8px;margin-bottom:1rem;padding:1rem;box-shadow:0 2px 8px #0000001a}.settings-panel[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1rem;color:#2c3e50;font-size:1rem}.settings-panel[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]{margin-bottom:.75rem}.settings-panel[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer;font-size:.875rem;color:#34495e}.settings-panel[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{cursor:pointer}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.3}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cards-container.cdk-drop-list-dragging[_ngcontent-%COMP%]   .kanban-card[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.kanban-card.cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 5px 20px #0003;transform:rotate(3deg)}.kanban-card.cdk-drag-dragging[_ngcontent-%COMP%]{opacity:.7}.card-attachments[_ngcontent-%COMP%], .card-comments[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem}"]})};function sQe(e,t){e&1&&(M(0,"div",2),Ae(1,"div",3),M(2,"span"),N(3,"Updating board..."),R()())}function aQe(e,t){if(e&1){let n=Ge();M(0,"div",0)(1,"app-kanban-board",1),Q("actionTriggered",function(o){J(n);let r=A();return X(r.onKanbanAction(o))})("boardUpdated",function(o){J(n);let r=A();return X(r.onBoardUpdated(o))}),R(),K(2,sQe,4,0,"div",2),R()}if(e&2){let n=A();P(),le("data",n.kanbanData),P(),Z(n.isLoading?2:-1)}}var _y=class e{kanbanLayout;actionTriggered=new V;boardUpdated=new V;kanbanData=null;isLoading=!1;ngOnInit(){this.parseKanbanData()}parseKanbanData(){this.kanbanLayout&&this.kanbanLayout.type==="kanban"&&(this.kanbanData=this.kanbanLayout.data)}onKanbanAction(t){console.log("Kanban action triggered:",t),this.actionTriggered.emit({type:"kanban_action",layout:this.kanbanLayout,action:t})}onBoardUpdated(t){console.log("Kanban board updated:",t)}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=pe({type:e,selectors:[["app-chat-kanban"]],inputs:{kanbanLayout:"kanbanLayout"},outputs:{actionTriggered:"actionTriggered",boardUpdated:"boardUpdated"},decls:1,vars:1,consts:[[1,"chat-kanban-container"],[3,"actionTriggered","boardUpdated","data"],[1,"kanban-loading"],[1,"loading-spinner"]],template:function(n,i){n&1&&K(0,aQe,3,2,"div",0),n&2&&Z(i.kanbanData?0:-1)},dependencies:[is,Gme,EA],styles:[".chat-kanban-container[_ngcontent-%COMP%]{margin:1rem 0;border-radius:8px;overflow:hidden;border:1px solid #e0e0e0}.kanban-loading[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:1rem;background:#fffc;position:absolute;inset:0;z-index:100;@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}}.kanban-loading[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid #f3f3f3;border-top:2px solid #3498db;border-radius:50%;animation:spin 1s linear infinite;margin-right:.5rem}"]})};var lQe=(()=>{class e{constructor(){this.vcr=k(li)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=pe({type:e,selectors:[["ag-component-container"]],standalone:!1,decls:0,vars:0,template:function(i,o){},encapsulation:2})}}return e})(),qme=16,qG=0;function cQe(e){let t=new Map;for(let n=0;n<qme;n++){let i=e.createComponent(lQe);t.set(n,i),Wr(i.location.nativeElement)}return t}var dQe=new Set(["doesFilterPass","isFilterActive"]),Ume=(()=>{class e extends hie{setViewContainerRef(n,i){this.viewContainerRef=n,this.angularFrameworkOverrides=i}createWrapper(n){let i=this.angularFrameworkOverrides,o=this;o.compShards??=cQe(this.viewContainerRef);class r extends KG{init(l){i.runInsideAngular(()=>{super.init(l),this._componentRef.changeDetectorRef.detectChanges()})}createComponent(){return o.createComponent(n)}hasMethod(l){return s.getFrameworkComponentInstance()[l]!=null}callMethod(l,c){let u=this.getFrameworkComponentInstance(),h=u[l];return dQe.has(l)?h.apply(u,c):i.runInsideAngular(()=>h.apply(u,c))}addMethod(l,c){s[l]=c}}let s=new r;return s}createComponent(n){return qG=(qG+1)%qme,this.compShards.get(qG).instance.vcr.createComponent(n)}static{this.\u0275fac=(()=>{let n;return function(o){return(n||(n=gn(e)))(o||e)}})()}static{this.\u0275prov=ee({token:e,factory:e.\u0275fac})}}return e})(),KG=class{init(t){this._params=t,this._componentRef=this.createComponent(),this._agAwareComponent=this._componentRef.instance,this._frameworkComponentInstance=this._componentRef.instance,this._eGui=this._componentRef.location.nativeElement,Wr(this._eGui),this._agAwareComponent.agInit(this._params)}getGui(){return this._eGui}getRootElement(){return this._eGui.firstChild}destroy(){this._frameworkComponentInstance&&typeof this._frameworkComponentInstance.destroy=="function"&&this._frameworkComponentInstance.destroy(),this._componentRef?.destroy()}getFrameworkComponentInstance(){return this._frameworkComponentInstance}},DA=class{constructor(t){this.frameworkOverrides=t,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(t,n){let{frameworkOverrides:i,wrappedListeners:o}=this,r=n;if(i.shouldWrapOutgoing){r=a=>{i.wrapOutgoing(()=>n(a))};let s=o.get(t);s||(s=new Map,o.set(t,s)),s.set(n,r)}return r}wrapGlobal(t){let{frameworkOverrides:n,wrappedGlobalListeners:i}=this,o=t;return n.shouldWrapOutgoing&&(o=(r,s)=>{n.wrapOutgoing(()=>t(r,s))},i.set(t,o)),o}unwrap(t,n){let{wrappedListeners:i}=this,o=i.get(t);if(o){let r=o.get(n);if(r)return o.delete(n),o.size===0&&i.delete(t),r}return n}unwrapGlobal(t){let{wrappedGlobalListeners:n}=this,i=n.get(t);return i?(n.delete(t),i):t}},Wme=(()=>{class e extends bV{constructor(n){super("angular"),this._ngZone=n,this.batchFrameworkComps=!0,this.isRunningWithinTestZone=!1,this.wrapIncoming=(i,o)=>this.runOutside(i,o),this.wrapOutgoing=i=>this.runInsideAngular(i),this.isRunningWithinTestZone=window?.AG_GRID_UNDER_TEST??!!window?.Zone?.AsyncTestZoneSpec,this._ngZone?this.isRunningWithinTestZone?this.runOutside=(i,o)=>o==="resize-observer"||o==="popupPositioning"?this._ngZone.runOutsideAngular(i):i():this.runOutside=i=>this._ngZone.runOutsideAngular(i):this.runOutside=i=>i()}get shouldWrapOutgoing(){return this._ngZone&&me.isInAngularZone()}createLocalEventListenerWrapper(n,i){if(this.shouldWrapOutgoing)return n??(i.setFrameworkOverrides(this),new DA(this))}createGlobalEventListenerWrapper(){return new DA(this)}isFrameworkComponent(n){if(!n)return!1;let i=n.prototype;return i&&"agInit"in i}runInsideAngular(n){return!this._ngZone||me.isInAngularZone()?n():this._ngZone.run(n)}runOutsideAngular(n,i){return this.runOutside(n,i)}static{this.\u0275fac=function(i){return new(i||e)(Ze(me))}}static{this.\u0275prov=ee({token:e,factory:e.\u0275fac})}}return e})(),ZG=(()=>{class e{constructor(n,i,o,r){this._viewContainerRef=i,this._angularFrameworkOverrides=o,this._frameworkCompWrapper=r,this._initialised=!1,this._destroyed=!1,this._holdEvents=!0,this._fullyReady=new Promise(s=>{this._resolveFullyReady=s}),this.statusBar=void 0,this.sideBar=void 0,this.suppressContextMenu=void 0,this.preventDefaultOnContextMenu=void 0,this.allowContextMenuWithControlKey=void 0,this.columnMenu=void 0,this.suppressMenuHide=void 0,this.enableBrowserTooltips=void 0,this.tooltipTrigger=void 0,this.tooltipShowDelay=void 0,this.tooltipHideDelay=void 0,this.tooltipMouseTrack=void 0,this.tooltipShowMode=void 0,this.tooltipInteraction=void 0,this.popupParent=void 0,this.copyHeadersToClipboard=void 0,this.copyGroupHeadersToClipboard=void 0,this.clipboardDelimiter=void 0,this.suppressCopyRowsToClipboard=void 0,this.suppressCopySingleCellRanges=void 0,this.suppressLastEmptyLineOnPaste=void 0,this.suppressClipboardPaste=void 0,this.suppressClipboardApi=void 0,this.suppressCutToClipboard=void 0,this.columnDefs=void 0,this.defaultColDef=void 0,this.defaultColGroupDef=void 0,this.columnTypes=void 0,this.dataTypeDefinitions=void 0,this.maintainColumnOrder=void 0,this.enableStrictPivotColumnOrder=void 0,this.suppressFieldDotNotation=void 0,this.headerHeight=void 0,this.groupHeaderHeight=void 0,this.floatingFiltersHeight=void 0,this.pivotHeaderHeight=void 0,this.pivotGroupHeaderHeight=void 0,this.hidePaddedHeaderRows=void 0,this.allowDragFromColumnsToolPanel=void 0,this.suppressMovableColumns=void 0,this.suppressColumnMoveAnimation=void 0,this.suppressMoveWhenColumnDragging=void 0,this.suppressDragLeaveHidesColumns=void 0,this.suppressGroupChangesColumnVisibility=void 0,this.suppressMakeColumnVisibleAfterUnGroup=void 0,this.suppressRowGroupHidesColumns=void 0,this.colResizeDefault=void 0,this.suppressAutoSize=void 0,this.autoSizePadding=void 0,this.skipHeaderOnAutoSize=void 0,this.autoSizeStrategy=void 0,this.components=void 0,this.editType=void 0,this.suppressStartEditOnTab=void 0,this.getFullRowEditValidationErrors=void 0,this.invalidEditValueMode=void 0,this.singleClickEdit=void 0,this.suppressClickEdit=void 0,this.readOnlyEdit=void 0,this.stopEditingWhenCellsLoseFocus=void 0,this.enterNavigatesVertically=void 0,this.enterNavigatesVerticallyAfterEdit=void 0,this.enableCellEditingOnBackspace=void 0,this.undoRedoCellEditing=void 0,this.undoRedoCellEditingLimit=void 0,this.defaultCsvExportParams=void 0,this.suppressCsvExport=void 0,this.defaultExcelExportParams=void 0,this.suppressExcelExport=void 0,this.excelStyles=void 0,this.findSearchValue=void 0,this.findOptions=void 0,this.quickFilterText=void 0,this.cacheQuickFilter=void 0,this.includeHiddenColumnsInQuickFilter=void 0,this.quickFilterParser=void 0,this.quickFilterMatcher=void 0,this.applyQuickFilterBeforePivotOrAgg=void 0,this.excludeChildrenWhenTreeDataFiltering=void 0,this.enableAdvancedFilter=void 0,this.alwaysPassFilter=void 0,this.includeHiddenColumnsInAdvancedFilter=void 0,this.advancedFilterParent=void 0,this.advancedFilterBuilderParams=void 0,this.advancedFilterParams=void 0,this.suppressAdvancedFilterEval=void 0,this.suppressSetFilterByDefault=void 0,this.enableFilterHandlers=void 0,this.filterHandlers=void 0,this.enableCharts=void 0,this.chartThemes=void 0,this.customChartThemes=void 0,this.chartThemeOverrides=void 0,this.chartToolPanelsDef=void 0,this.chartMenuItems=void 0,this.loadingCellRenderer=void 0,this.loadingCellRendererParams=void 0,this.loadingCellRendererSelector=void 0,this.localeText=void 0,this.masterDetail=void 0,this.keepDetailRows=void 0,this.keepDetailRowsCount=void 0,this.detailCellRenderer=void 0,this.detailCellRendererParams=void 0,this.detailRowHeight=void 0,this.detailRowAutoHeight=void 0,this.context=void 0,this.alignedGrids=void 0,this.tabIndex=void 0,this.rowBuffer=void 0,this.valueCache=void 0,this.valueCacheNeverExpires=void 0,this.enableCellExpressions=void 0,this.suppressTouch=void 0,this.suppressFocusAfterRefresh=void 0,this.suppressBrowserResizeObserver=void 0,this.suppressPropertyNamesCheck=void 0,this.suppressChangeDetection=void 0,this.debug=void 0,this.loading=void 0,this.overlayLoadingTemplate=void 0,this.loadingOverlayComponent=void 0,this.loadingOverlayComponentParams=void 0,this.suppressLoadingOverlay=void 0,this.overlayNoRowsTemplate=void 0,this.noRowsOverlayComponent=void 0,this.noRowsOverlayComponentParams=void 0,this.suppressNoRowsOverlay=void 0,this.pagination=void 0,this.paginationPageSize=void 0,this.paginationPageSizeSelector=void 0,this.paginationAutoPageSize=void 0,this.paginateChildRows=void 0,this.suppressPaginationPanel=void 0,this.pivotMode=void 0,this.pivotPanelShow=void 0,this.pivotMaxGeneratedColumns=void 0,this.pivotDefaultExpanded=void 0,this.pivotColumnGroupTotals=void 0,this.pivotRowTotals=void 0,this.pivotSuppressAutoColumn=void 0,this.suppressExpandablePivotGroups=void 0,this.functionsReadOnly=void 0,this.aggFuncs=void 0,this.suppressAggFuncInHeader=void 0,this.alwaysAggregateAtRootLevel=void 0,this.aggregateOnlyChangedColumns=void 0,this.suppressAggFilteredOnly=void 0,this.removePivotHeaderRowWhenSingleValueColumn=void 0,this.animateRows=void 0,this.cellFlashDuration=void 0,this.cellFadeDuration=void 0,this.allowShowChangeAfterFilter=void 0,this.domLayout=void 0,this.ensureDomOrder=void 0,this.enableCellSpan=void 0,this.enableRtl=void 0,this.suppressColumnVirtualisation=void 0,this.suppressMaxRenderedRowRestriction=void 0,this.suppressRowVirtualisation=void 0,this.rowDragManaged=void 0,this.rowDragInsertDelay=void 0,this.suppressRowDrag=void 0,this.suppressMoveWhenRowDragging=void 0,this.rowDragEntireRow=void 0,this.rowDragMultiRow=void 0,this.rowDragText=void 0,this.dragAndDropImageComponent=void 0,this.dragAndDropImageComponentParams=void 0,this.fullWidthCellRenderer=void 0,this.fullWidthCellRendererParams=void 0,this.embedFullWidthRows=void 0,this.groupDisplayType=void 0,this.groupDefaultExpanded=void 0,this.autoGroupColumnDef=void 0,this.groupMaintainOrder=void 0,this.groupSelectsChildren=void 0,this.groupLockGroupColumns=void 0,this.groupAggFiltering=void 0,this.groupTotalRow=void 0,this.grandTotalRow=void 0,this.suppressStickyTotalRow=void 0,this.groupSuppressBlankHeader=void 0,this.groupSelectsFiltered=void 0,this.showOpenedGroup=void 0,this.groupHideParentOfSingleChild=void 0,this.groupRemoveSingleChildren=void 0,this.groupRemoveLowestSingleChildren=void 0,this.groupHideOpenParents=void 0,this.groupAllowUnbalanced=void 0,this.rowGroupPanelShow=void 0,this.groupRowRenderer=void 0,this.groupRowRendererParams=void 0,this.treeData=void 0,this.treeDataChildrenField=void 0,this.treeDataParentIdField=void 0,this.rowGroupPanelSuppressSort=void 0,this.suppressGroupRowsSticky=void 0,this.groupHierarchyConfig=void 0,this.pinnedTopRowData=void 0,this.pinnedBottomRowData=void 0,this.enableRowPinning=void 0,this.isRowPinnable=void 0,this.isRowPinned=void 0,this.rowModelType=void 0,this.rowData=void 0,this.asyncTransactionWaitMillis=void 0,this.suppressModelUpdateAfterUpdateTransaction=void 0,this.datasource=void 0,this.cacheOverflowSize=void 0,this.infiniteInitialRowCount=void 0,this.serverSideInitialRowCount=void 0,this.suppressServerSideFullWidthLoadingRow=void 0,this.cacheBlockSize=void 0,this.maxBlocksInCache=void 0,this.maxConcurrentDatasourceRequests=void 0,this.blockLoadDebounceMillis=void 0,this.purgeClosedRowNodes=void 0,this.serverSideDatasource=void 0,this.serverSideSortAllLevels=void 0,this.serverSideEnableClientSideSort=void 0,this.serverSideOnlyRefreshFilteredGroups=void 0,this.serverSidePivotResultFieldSeparator=void 0,this.viewportDatasource=void 0,this.viewportRowModelPageSize=void 0,this.viewportRowModelBufferSize=void 0,this.alwaysShowHorizontalScroll=void 0,this.alwaysShowVerticalScroll=void 0,this.debounceVerticalScrollbar=void 0,this.suppressHorizontalScroll=void 0,this.suppressScrollOnNewData=void 0,this.suppressScrollWhenPopupsAreOpen=void 0,this.suppressAnimationFrame=void 0,this.suppressMiddleClickScrolls=void 0,this.suppressPreventDefaultOnMouseWheel=void 0,this.scrollbarWidth=void 0,this.rowSelection=void 0,this.cellSelection=void 0,this.rowMultiSelectWithClick=void 0,this.suppressRowDeselection=void 0,this.suppressRowClickSelection=void 0,this.suppressCellFocus=void 0,this.suppressHeaderFocus=void 0,this.selectionColumnDef=void 0,this.rowNumbers=void 0,this.suppressMultiRangeSelection=void 0,this.enableCellTextSelection=void 0,this.enableRangeSelection=void 0,this.enableRangeHandle=void 0,this.enableFillHandle=void 0,this.fillHandleDirection=void 0,this.suppressClearOnFillReduction=void 0,this.sortingOrder=void 0,this.accentedSort=void 0,this.unSortIcon=void 0,this.suppressMultiSort=void 0,this.alwaysMultiSort=void 0,this.multiSortKey=void 0,this.suppressMaintainUnsortedOrder=void 0,this.icons=void 0,this.rowHeight=void 0,this.rowStyle=void 0,this.rowClass=void 0,this.rowClassRules=void 0,this.suppressRowHoverHighlight=void 0,this.suppressRowTransform=void 0,this.columnHoverHighlight=void 0,this.gridId=void 0,this.deltaSort=void 0,this.treeDataDisplayType=void 0,this.enableGroupEdit=void 0,this.initialState=void 0,this.theme=void 0,this.loadThemeGoogleFonts=void 0,this.themeCssLayer=void 0,this.styleNonce=void 0,this.themeStyleContainer=void 0,this.getContextMenuItems=void 0,this.getMainMenuItems=void 0,this.postProcessPopup=void 0,this.processUnpinnedColumns=void 0,this.processCellForClipboard=void 0,this.processHeaderForClipboard=void 0,this.processGroupHeaderForClipboard=void 0,this.processCellFromClipboard=void 0,this.sendToClipboard=void 0,this.processDataFromClipboard=void 0,this.isExternalFilterPresent=void 0,this.doesExternalFilterPass=void 0,this.getChartToolbarItems=void 0,this.createChartContainer=void 0,this.focusGridInnerElement=void 0,this.navigateToNextHeader=void 0,this.tabToNextHeader=void 0,this.navigateToNextCell=void 0,this.tabToNextCell=void 0,this.getLocaleText=void 0,this.getDocument=void 0,this.paginationNumberFormatter=void 0,this.getGroupRowAgg=void 0,this.isGroupOpenByDefault=void 0,this.ssrmExpandAllAffectsAllRows=void 0,this.initialGroupOrderComparator=void 0,this.processPivotResultColDef=void 0,this.processPivotResultColGroupDef=void 0,this.getDataPath=void 0,this.getChildCount=void 0,this.getServerSideGroupLevelParams=void 0,this.isServerSideGroupOpenByDefault=void 0,this.isApplyServerSideTransaction=void 0,this.isServerSideGroup=void 0,this.getServerSideGroupKey=void 0,this.getBusinessKeyForNode=void 0,this.getRowId=void 0,this.resetRowDataOnUpdate=void 0,this.processRowPostCreate=void 0,this.isRowSelectable=void 0,this.isRowMaster=void 0,this.fillOperation=void 0,this.postSortRows=void 0,this.getRowStyle=void 0,this.getRowClass=void 0,this.getRowHeight=void 0,this.isFullWidthRow=void 0,this.isRowValidDropPosition=void 0,this.toolPanelVisibleChanged=new V,this.toolPanelSizeChanged=new V,this.columnMenuVisibleChanged=new V,this.contextMenuVisibleChanged=new V,this.cutStart=new V,this.cutEnd=new V,this.pasteStart=new V,this.pasteEnd=new V,this.columnVisible=new V,this.columnPinned=new V,this.columnResized=new V,this.columnMoved=new V,this.columnValueChanged=new V,this.columnPivotModeChanged=new V,this.columnPivotChanged=new V,this.columnGroupOpened=new V,this.newColumnsLoaded=new V,this.gridColumnsChanged=new V,this.displayedColumnsChanged=new V,this.virtualColumnsChanged=new V,this.columnEverythingChanged=new V,this.columnsReset=new V,this.columnHeaderMouseOver=new V,this.columnHeaderMouseLeave=new V,this.columnHeaderClicked=new V,this.columnHeaderContextMenu=new V,this.componentStateChanged=new V,this.cellValueChanged=new V,this.cellEditRequest=new V,this.rowValueChanged=new V,this.cellEditingStarted=new V,this.cellEditingStopped=new V,this.rowEditingStarted=new V,this.rowEditingStopped=new V,this.bulkEditingStarted=new V,this.bulkEditingStopped=new V,this.batchEditingStarted=new V,this.batchEditingStopped=new V,this.undoStarted=new V,this.undoEnded=new V,this.redoStarted=new V,this.redoEnded=new V,this.cellSelectionDeleteStart=new V,this.cellSelectionDeleteEnd=new V,this.rangeDeleteStart=new V,this.rangeDeleteEnd=new V,this.fillStart=new V,this.fillEnd=new V,this.filterOpened=new V,this.filterChanged=new V,this.filterModified=new V,this.filterUiChanged=new V,this.floatingFilterUiChanged=new V,this.advancedFilterBuilderVisibleChanged=new V,this.findChanged=new V,this.chartCreated=new V,this.chartRangeSelectionChanged=new V,this.chartOptionsChanged=new V,this.chartDestroyed=new V,this.cellKeyDown=new V,this.gridReady=new V,this.firstDataRendered=new V,this.gridSizeChanged=new V,this.modelUpdated=new V,this.virtualRowRemoved=new V,this.viewportChanged=new V,this.bodyScroll=new V,this.bodyScrollEnd=new V,this.dragStarted=new V,this.dragStopped=new V,this.dragCancelled=new V,this.stateUpdated=new V,this.paginationChanged=new V,this.rowDragEnter=new V,this.rowDragMove=new V,this.rowDragLeave=new V,this.rowDragEnd=new V,this.rowDragCancel=new V,this.rowResizeStarted=new V,this.rowResizeEnded=new V,this.columnRowGroupChanged=new V,this.rowGroupOpened=new V,this.expandOrCollapseAll=new V,this.pivotMaxColumnsExceeded=new V,this.pinnedRowDataChanged=new V,this.pinnedRowsChanged=new V,this.rowDataUpdated=new V,this.asyncTransactionsFlushed=new V,this.storeRefreshed=new V,this.headerFocused=new V,this.cellClicked=new V,this.cellDoubleClicked=new V,this.cellFocused=new V,this.cellMouseOver=new V,this.cellMouseOut=new V,this.cellMouseDown=new V,this.rowClicked=new V,this.rowDoubleClicked=new V,this.rowSelected=new V,this.selectionChanged=new V,this.cellContextMenu=new V,this.rangeSelectionChanged=new V,this.cellSelectionChanged=new V,this.tooltipShow=new V,this.tooltipHide=new V,this.sortChanged=new V,this._nativeElement=n.nativeElement,this._fullyReady.then(()=>{this._holdEvents=!1})}ngAfterViewInit(){this._angularFrameworkOverrides.runOutsideAngular(()=>{this._frameworkCompWrapper.setViewContainerRef(this._viewContainerRef,this._angularFrameworkOverrides);let n=Object.keys(this).filter(a=>!(a.startsWith("_")||a=="gridOptions"||a=="modules"||this[a]instanceof V)),i={};for(let a of n){let l=hQe(a,this[a]);i[a]=l}let o=Ete(this.gridOptions,i,n),r={globalListener:this.globalListener.bind(this),frameworkOverrides:this._angularFrameworkOverrides,providedBeanInstances:{frameworkCompWrapper:this._frameworkCompWrapper},modules:this.modules||[],setThemeOnGridDiv:!0},s=uie(this._nativeElement,o,r);s&&(this.api=s),this._initialised=!0,this._resolveFullyReady()})}ngOnChanges(n){this._initialised&&this._angularFrameworkOverrides.runOutsideAngular(()=>{let i={};for(let o of Object.keys(n)){let r=n[o];i[o]=r.currentValue}Dte(i,this.api)})}ngOnDestroy(){this._initialised&&(this._destroyed=!0,this.api?.destroy())}isEmitterUsed(n){let o=this[n],r=o?.observed??o?.observers?.length>0,s=`on${n.charAt(0).toUpperCase()}${n.substring(1)}`,a=!!this.gridOptions&&!!this.gridOptions[s];return r||a}globalListener(n,i){if(this._destroyed)return;let o=this[n];if(o&&this.isEmitterUsed(n)){let r=()=>this._angularFrameworkOverrides.runInsideAngular(()=>o.emit(i));this._holdEvents?this._fullyReady.then(()=>r()):r()}}static{this.\u0275fac=function(i){return new(i||e)(ye(Oe),ye(li),ye(Wme),ye(Ume))}}static{this.\u0275cmp=pe({type:e,selectors:[["ag-grid-angular"]],inputs:{gridOptions:"gridOptions",modules:"modules",statusBar:"statusBar",sideBar:"sideBar",suppressContextMenu:[2,"suppressContextMenu","suppressContextMenu",$],preventDefaultOnContextMenu:[2,"preventDefaultOnContextMenu","preventDefaultOnContextMenu",$],allowContextMenuWithControlKey:[2,"allowContextMenuWithControlKey","allowContextMenuWithControlKey",$],columnMenu:"columnMenu",suppressMenuHide:[2,"suppressMenuHide","suppressMenuHide",$],enableBrowserTooltips:[2,"enableBrowserTooltips","enableBrowserTooltips",$],tooltipTrigger:"tooltipTrigger",tooltipShowDelay:"tooltipShowDelay",tooltipHideDelay:"tooltipHideDelay",tooltipMouseTrack:[2,"tooltipMouseTrack","tooltipMouseTrack",$],tooltipShowMode:"tooltipShowMode",tooltipInteraction:[2,"tooltipInteraction","tooltipInteraction",$],popupParent:"popupParent",copyHeadersToClipboard:[2,"copyHeadersToClipboard","copyHeadersToClipboard",$],copyGroupHeadersToClipboard:[2,"copyGroupHeadersToClipboard","copyGroupHeadersToClipboard",$],clipboardDelimiter:"clipboardDelimiter",suppressCopyRowsToClipboard:[2,"suppressCopyRowsToClipboard","suppressCopyRowsToClipboard",$],suppressCopySingleCellRanges:[2,"suppressCopySingleCellRanges","suppressCopySingleCellRanges",$],suppressLastEmptyLineOnPaste:[2,"suppressLastEmptyLineOnPaste","suppressLastEmptyLineOnPaste",$],suppressClipboardPaste:[2,"suppressClipboardPaste","suppressClipboardPaste",$],suppressClipboardApi:[2,"suppressClipboardApi","suppressClipboardApi",$],suppressCutToClipboard:[2,"suppressCutToClipboard","suppressCutToClipboard",$],columnDefs:"columnDefs",defaultColDef:"defaultColDef",defaultColGroupDef:"defaultColGroupDef",columnTypes:"columnTypes",dataTypeDefinitions:"dataTypeDefinitions",maintainColumnOrder:[2,"maintainColumnOrder","maintainColumnOrder",$],enableStrictPivotColumnOrder:[2,"enableStrictPivotColumnOrder","enableStrictPivotColumnOrder",$],suppressFieldDotNotation:[2,"suppressFieldDotNotation","suppressFieldDotNotation",$],headerHeight:"headerHeight",groupHeaderHeight:"groupHeaderHeight",floatingFiltersHeight:"floatingFiltersHeight",pivotHeaderHeight:"pivotHeaderHeight",pivotGroupHeaderHeight:"pivotGroupHeaderHeight",hidePaddedHeaderRows:[2,"hidePaddedHeaderRows","hidePaddedHeaderRows",$],allowDragFromColumnsToolPanel:[2,"allowDragFromColumnsToolPanel","allowDragFromColumnsToolPanel",$],suppressMovableColumns:[2,"suppressMovableColumns","suppressMovableColumns",$],suppressColumnMoveAnimation:[2,"suppressColumnMoveAnimation","suppressColumnMoveAnimation",$],suppressMoveWhenColumnDragging:[2,"suppressMoveWhenColumnDragging","suppressMoveWhenColumnDragging",$],suppressDragLeaveHidesColumns:[2,"suppressDragLeaveHidesColumns","suppressDragLeaveHidesColumns",$],suppressGroupChangesColumnVisibility:"suppressGroupChangesColumnVisibility",suppressMakeColumnVisibleAfterUnGroup:[2,"suppressMakeColumnVisibleAfterUnGroup","suppressMakeColumnVisibleAfterUnGroup",$],suppressRowGroupHidesColumns:[2,"suppressRowGroupHidesColumns","suppressRowGroupHidesColumns",$],colResizeDefault:"colResizeDefault",suppressAutoSize:[2,"suppressAutoSize","suppressAutoSize",$],autoSizePadding:"autoSizePadding",skipHeaderOnAutoSize:[2,"skipHeaderOnAutoSize","skipHeaderOnAutoSize",$],autoSizeStrategy:"autoSizeStrategy",components:"components",editType:"editType",suppressStartEditOnTab:[2,"suppressStartEditOnTab","suppressStartEditOnTab",$],getFullRowEditValidationErrors:"getFullRowEditValidationErrors",invalidEditValueMode:"invalidEditValueMode",singleClickEdit:[2,"singleClickEdit","singleClickEdit",$],suppressClickEdit:[2,"suppressClickEdit","suppressClickEdit",$],readOnlyEdit:[2,"readOnlyEdit","readOnlyEdit",$],stopEditingWhenCellsLoseFocus:[2,"stopEditingWhenCellsLoseFocus","stopEditingWhenCellsLoseFocus",$],enterNavigatesVertically:[2,"enterNavigatesVertically","enterNavigatesVertically",$],enterNavigatesVerticallyAfterEdit:[2,"enterNavigatesVerticallyAfterEdit","enterNavigatesVerticallyAfterEdit",$],enableCellEditingOnBackspace:[2,"enableCellEditingOnBackspace","enableCellEditingOnBackspace",$],undoRedoCellEditing:[2,"undoRedoCellEditing","undoRedoCellEditing",$],undoRedoCellEditingLimit:"undoRedoCellEditingLimit",defaultCsvExportParams:"defaultCsvExportParams",suppressCsvExport:[2,"suppressCsvExport","suppressCsvExport",$],defaultExcelExportParams:"defaultExcelExportParams",suppressExcelExport:[2,"suppressExcelExport","suppressExcelExport",$],excelStyles:"excelStyles",findSearchValue:"findSearchValue",findOptions:"findOptions",quickFilterText:"quickFilterText",cacheQuickFilter:[2,"cacheQuickFilter","cacheQuickFilter",$],includeHiddenColumnsInQuickFilter:[2,"includeHiddenColumnsInQuickFilter","includeHiddenColumnsInQuickFilter",$],quickFilterParser:"quickFilterParser",quickFilterMatcher:"quickFilterMatcher",applyQuickFilterBeforePivotOrAgg:[2,"applyQuickFilterBeforePivotOrAgg","applyQuickFilterBeforePivotOrAgg",$],excludeChildrenWhenTreeDataFiltering:[2,"excludeChildrenWhenTreeDataFiltering","excludeChildrenWhenTreeDataFiltering",$],enableAdvancedFilter:[2,"enableAdvancedFilter","enableAdvancedFilter",$],alwaysPassFilter:"alwaysPassFilter",includeHiddenColumnsInAdvancedFilter:[2,"includeHiddenColumnsInAdvancedFilter","includeHiddenColumnsInAdvancedFilter",$],advancedFilterParent:"advancedFilterParent",advancedFilterBuilderParams:"advancedFilterBuilderParams",advancedFilterParams:"advancedFilterParams",suppressAdvancedFilterEval:[2,"suppressAdvancedFilterEval","suppressAdvancedFilterEval",$],suppressSetFilterByDefault:[2,"suppressSetFilterByDefault","suppressSetFilterByDefault",$],enableFilterHandlers:[2,"enableFilterHandlers","enableFilterHandlers",$],filterHandlers:"filterHandlers",enableCharts:[2,"enableCharts","enableCharts",$],chartThemes:"chartThemes",customChartThemes:"customChartThemes",chartThemeOverrides:"chartThemeOverrides",chartToolPanelsDef:"chartToolPanelsDef",chartMenuItems:"chartMenuItems",loadingCellRenderer:"loadingCellRenderer",loadingCellRendererParams:"loadingCellRendererParams",loadingCellRendererSelector:"loadingCellRendererSelector",localeText:"localeText",masterDetail:[2,"masterDetail","masterDetail",$],keepDetailRows:[2,"keepDetailRows","keepDetailRows",$],keepDetailRowsCount:"keepDetailRowsCount",detailCellRenderer:"detailCellRenderer",detailCellRendererParams:"detailCellRendererParams",detailRowHeight:"detailRowHeight",detailRowAutoHeight:[2,"detailRowAutoHeight","detailRowAutoHeight",$],context:"context",alignedGrids:"alignedGrids",tabIndex:"tabIndex",rowBuffer:"rowBuffer",valueCache:[2,"valueCache","valueCache",$],valueCacheNeverExpires:[2,"valueCacheNeverExpires","valueCacheNeverExpires",$],enableCellExpressions:[2,"enableCellExpressions","enableCellExpressions",$],suppressTouch:[2,"suppressTouch","suppressTouch",$],suppressFocusAfterRefresh:[2,"suppressFocusAfterRefresh","suppressFocusAfterRefresh",$],suppressBrowserResizeObserver:[2,"suppressBrowserResizeObserver","suppressBrowserResizeObserver",$],suppressPropertyNamesCheck:[2,"suppressPropertyNamesCheck","suppressPropertyNamesCheck",$],suppressChangeDetection:[2,"suppressChangeDetection","suppressChangeDetection",$],debug:[2,"debug","debug",$],loading:[2,"loading","loading",$],overlayLoadingTemplate:"overlayLoadingTemplate",loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentParams:"loadingOverlayComponentParams",suppressLoadingOverlay:[2,"suppressLoadingOverlay","suppressLoadingOverlay",$],overlayNoRowsTemplate:"overlayNoRowsTemplate",noRowsOverlayComponent:"noRowsOverlayComponent",noRowsOverlayComponentParams:"noRowsOverlayComponentParams",suppressNoRowsOverlay:[2,"suppressNoRowsOverlay","suppressNoRowsOverlay",$],pagination:[2,"pagination","pagination",$],paginationPageSize:"paginationPageSize",paginationPageSizeSelector:"paginationPageSizeSelector",paginationAutoPageSize:[2,"paginationAutoPageSize","paginationAutoPageSize",$],paginateChildRows:[2,"paginateChildRows","paginateChildRows",$],suppressPaginationPanel:[2,"suppressPaginationPanel","suppressPaginationPanel",$],pivotMode:[2,"pivotMode","pivotMode",$],pivotPanelShow:"pivotPanelShow",pivotMaxGeneratedColumns:"pivotMaxGeneratedColumns",pivotDefaultExpanded:"pivotDefaultExpanded",pivotColumnGroupTotals:"pivotColumnGroupTotals",pivotRowTotals:"pivotRowTotals",pivotSuppressAutoColumn:[2,"pivotSuppressAutoColumn","pivotSuppressAutoColumn",$],suppressExpandablePivotGroups:[2,"suppressExpandablePivotGroups","suppressExpandablePivotGroups",$],functionsReadOnly:[2,"functionsReadOnly","functionsReadOnly",$],aggFuncs:"aggFuncs",suppressAggFuncInHeader:[2,"suppressAggFuncInHeader","suppressAggFuncInHeader",$],alwaysAggregateAtRootLevel:[2,"alwaysAggregateAtRootLevel","alwaysAggregateAtRootLevel",$],aggregateOnlyChangedColumns:[2,"aggregateOnlyChangedColumns","aggregateOnlyChangedColumns",$],suppressAggFilteredOnly:[2,"suppressAggFilteredOnly","suppressAggFilteredOnly",$],removePivotHeaderRowWhenSingleValueColumn:[2,"removePivotHeaderRowWhenSingleValueColumn","removePivotHeaderRowWhenSingleValueColumn",$],animateRows:[2,"animateRows","animateRows",$],cellFlashDuration:"cellFlashDuration",cellFadeDuration:"cellFadeDuration",allowShowChangeAfterFilter:[2,"allowShowChangeAfterFilter","allowShowChangeAfterFilter",$],domLayout:"domLayout",ensureDomOrder:[2,"ensureDomOrder","ensureDomOrder",$],enableCellSpan:[2,"enableCellSpan","enableCellSpan",$],enableRtl:[2,"enableRtl","enableRtl",$],suppressColumnVirtualisation:[2,"suppressColumnVirtualisation","suppressColumnVirtualisation",$],suppressMaxRenderedRowRestriction:[2,"suppressMaxRenderedRowRestriction","suppressMaxRenderedRowRestriction",$],suppressRowVirtualisation:[2,"suppressRowVirtualisation","suppressRowVirtualisation",$],rowDragManaged:[2,"rowDragManaged","rowDragManaged",$],rowDragInsertDelay:"rowDragInsertDelay",suppressRowDrag:[2,"suppressRowDrag","suppressRowDrag",$],suppressMoveWhenRowDragging:[2,"suppressMoveWhenRowDragging","suppressMoveWhenRowDragging",$],rowDragEntireRow:[2,"rowDragEntireRow","rowDragEntireRow",$],rowDragMultiRow:[2,"rowDragMultiRow","rowDragMultiRow",$],rowDragText:"rowDragText",dragAndDropImageComponent:"dragAndDropImageComponent",dragAndDropImageComponentParams:"dragAndDropImageComponentParams",fullWidthCellRenderer:"fullWidthCellRenderer",fullWidthCellRendererParams:"fullWidthCellRendererParams",embedFullWidthRows:[2,"embedFullWidthRows","embedFullWidthRows",$],groupDisplayType:"groupDisplayType",groupDefaultExpanded:"groupDefaultExpanded",autoGroupColumnDef:"autoGroupColumnDef",groupMaintainOrder:[2,"groupMaintainOrder","groupMaintainOrder",$],groupSelectsChildren:[2,"groupSelectsChildren","groupSelectsChildren",$],groupLockGroupColumns:"groupLockGroupColumns",groupAggFiltering:"groupAggFiltering",groupTotalRow:"groupTotalRow",grandTotalRow:"grandTotalRow",suppressStickyTotalRow:"suppressStickyTotalRow",groupSuppressBlankHeader:[2,"groupSuppressBlankHeader","groupSuppressBlankHeader",$],groupSelectsFiltered:[2,"groupSelectsFiltered","groupSelectsFiltered",$],showOpenedGroup:[2,"showOpenedGroup","showOpenedGroup",$],groupHideParentOfSingleChild:"groupHideParentOfSingleChild",groupRemoveSingleChildren:[2,"groupRemoveSingleChildren","groupRemoveSingleChildren",$],groupRemoveLowestSingleChildren:[2,"groupRemoveLowestSingleChildren","groupRemoveLowestSingleChildren",$],groupHideOpenParents:[2,"groupHideOpenParents","groupHideOpenParents",$],groupAllowUnbalanced:[2,"groupAllowUnbalanced","groupAllowUnbalanced",$],rowGroupPanelShow:"rowGroupPanelShow",groupRowRenderer:"groupRowRenderer",groupRowRendererParams:"groupRowRendererParams",treeData:[2,"treeData","treeData",$],treeDataChildrenField:"treeDataChildrenField",treeDataParentIdField:"treeDataParentIdField",rowGroupPanelSuppressSort:[2,"rowGroupPanelSuppressSort","rowGroupPanelSuppressSort",$],suppressGroupRowsSticky:[2,"suppressGroupRowsSticky","suppressGroupRowsSticky",$],groupHierarchyConfig:"groupHierarchyConfig",pinnedTopRowData:"pinnedTopRowData",pinnedBottomRowData:"pinnedBottomRowData",enableRowPinning:"enableRowPinning",isRowPinnable:"isRowPinnable",isRowPinned:"isRowPinned",rowModelType:"rowModelType",rowData:"rowData",asyncTransactionWaitMillis:"asyncTransactionWaitMillis",suppressModelUpdateAfterUpdateTransaction:[2,"suppressModelUpdateAfterUpdateTransaction","suppressModelUpdateAfterUpdateTransaction",$],datasource:"datasource",cacheOverflowSize:"cacheOverflowSize",infiniteInitialRowCount:"infiniteInitialRowCount",serverSideInitialRowCount:"serverSideInitialRowCount",suppressServerSideFullWidthLoadingRow:[2,"suppressServerSideFullWidthLoadingRow","suppressServerSideFullWidthLoadingRow",$],cacheBlockSize:"cacheBlockSize",maxBlocksInCache:"maxBlocksInCache",maxConcurrentDatasourceRequests:"maxConcurrentDatasourceRequests",blockLoadDebounceMillis:"blockLoadDebounceMillis",purgeClosedRowNodes:[2,"purgeClosedRowNodes","purgeClosedRowNodes",$],serverSideDatasource:"serverSideDatasource",serverSideSortAllLevels:[2,"serverSideSortAllLevels","serverSideSortAllLevels",$],serverSideEnableClientSideSort:[2,"serverSideEnableClientSideSort","serverSideEnableClientSideSort",$],serverSideOnlyRefreshFilteredGroups:[2,"serverSideOnlyRefreshFilteredGroups","serverSideOnlyRefreshFilteredGroups",$],serverSidePivotResultFieldSeparator:"serverSidePivotResultFieldSeparator",viewportDatasource:"viewportDatasource",viewportRowModelPageSize:"viewportRowModelPageSize",viewportRowModelBufferSize:"viewportRowModelBufferSize",alwaysShowHorizontalScroll:[2,"alwaysShowHorizontalScroll","alwaysShowHorizontalScroll",$],alwaysShowVerticalScroll:[2,"alwaysShowVerticalScroll","alwaysShowVerticalScroll",$],debounceVerticalScrollbar:[2,"debounceVerticalScrollbar","debounceVerticalScrollbar",$],suppressHorizontalScroll:[2,"suppressHorizontalScroll","suppressHorizontalScroll",$],suppressScrollOnNewData:[2,"suppressScrollOnNewData","suppressScrollOnNewData",$],suppressScrollWhenPopupsAreOpen:[2,"suppressScrollWhenPopupsAreOpen","suppressScrollWhenPopupsAreOpen",$],suppressAnimationFrame:[2,"suppressAnimationFrame","suppressAnimationFrame",$],suppressMiddleClickScrolls:[2,"suppressMiddleClickScrolls","suppressMiddleClickScrolls",$],suppressPreventDefaultOnMouseWheel:[2,"suppressPreventDefaultOnMouseWheel","suppressPreventDefaultOnMouseWheel",$],scrollbarWidth:"scrollbarWidth",rowSelection:"rowSelection",cellSelection:"cellSelection",rowMultiSelectWithClick:[2,"rowMultiSelectWithClick","rowMultiSelectWithClick",$],suppressRowDeselection:[2,"suppressRowDeselection","suppressRowDeselection",$],suppressRowClickSelection:[2,"suppressRowClickSelection","suppressRowClickSelection",$],suppressCellFocus:[2,"suppressCellFocus","suppressCellFocus",$],suppressHeaderFocus:[2,"suppressHeaderFocus","suppressHeaderFocus",$],selectionColumnDef:"selectionColumnDef",rowNumbers:"rowNumbers",suppressMultiRangeSelection:[2,"suppressMultiRangeSelection","suppressMultiRangeSelection",$],enableCellTextSelection:[2,"enableCellTextSelection","enableCellTextSelection",$],enableRangeSelection:[2,"enableRangeSelection","enableRangeSelection",$],enableRangeHandle:[2,"enableRangeHandle","enableRangeHandle",$],enableFillHandle:[2,"enableFillHandle","enableFillHandle",$],fillHandleDirection:"fillHandleDirection",suppressClearOnFillReduction:[2,"suppressClearOnFillReduction","suppressClearOnFillReduction",$],sortingOrder:"sortingOrder",accentedSort:[2,"accentedSort","accentedSort",$],unSortIcon:[2,"unSortIcon","unSortIcon",$],suppressMultiSort:[2,"suppressMultiSort","suppressMultiSort",$],alwaysMultiSort:[2,"alwaysMultiSort","alwaysMultiSort",$],multiSortKey:"multiSortKey",suppressMaintainUnsortedOrder:[2,"suppressMaintainUnsortedOrder","suppressMaintainUnsortedOrder",$],icons:"icons",rowHeight:"rowHeight",rowStyle:"rowStyle",rowClass:"rowClass",rowClassRules:"rowClassRules",suppressRowHoverHighlight:[2,"suppressRowHoverHighlight","suppressRowHoverHighlight",$],suppressRowTransform:[2,"suppressRowTransform","suppressRowTransform",$],columnHoverHighlight:[2,"columnHoverHighlight","columnHoverHighlight",$],gridId:"gridId",deltaSort:[2,"deltaSort","deltaSort",$],treeDataDisplayType:"treeDataDisplayType",enableGroupEdit:[2,"enableGroupEdit","enableGroupEdit",$],initialState:"initialState",theme:"theme",loadThemeGoogleFonts:[2,"loadThemeGoogleFonts","loadThemeGoogleFonts",$],themeCssLayer:"themeCssLayer",styleNonce:"styleNonce",themeStyleContainer:"themeStyleContainer",getContextMenuItems:"getContextMenuItems",getMainMenuItems:"getMainMenuItems",postProcessPopup:"postProcessPopup",processUnpinnedColumns:"processUnpinnedColumns",processCellForClipboard:"processCellForClipboard",processHeaderForClipboard:"processHeaderForClipboard",processGroupHeaderForClipboard:"processGroupHeaderForClipboard",processCellFromClipboard:"processCellFromClipboard",sendToClipboard:"sendToClipboard",processDataFromClipboard:"processDataFromClipboard",isExternalFilterPresent:"isExternalFilterPresent",doesExternalFilterPass:"doesExternalFilterPass",getChartToolbarItems:"getChartToolbarItems",createChartContainer:"createChartContainer",focusGridInnerElement:"focusGridInnerElement",navigateToNextHeader:"navigateToNextHeader",tabToNextHeader:"tabToNextHeader",navigateToNextCell:"navigateToNextCell",tabToNextCell:"tabToNextCell",getLocaleText:"getLocaleText",getDocument:"getDocument",paginationNumberFormatter:"paginationNumberFormatter",getGroupRowAgg:"getGroupRowAgg",isGroupOpenByDefault:"isGroupOpenByDefault",ssrmExpandAllAffectsAllRows:[2,"ssrmExpandAllAffectsAllRows","ssrmExpandAllAffectsAllRows",$],initialGroupOrderComparator:"initialGroupOrderComparator",processPivotResultColDef:"processPivotResultColDef",processPivotResultColGroupDef:"processPivotResultColGroupDef",getDataPath:"getDataPath",getChildCount:"getChildCount",getServerSideGroupLevelParams:"getServerSideGroupLevelParams",isServerSideGroupOpenByDefault:"isServerSideGroupOpenByDefault",isApplyServerSideTransaction:"isApplyServerSideTransaction",isServerSideGroup:"isServerSideGroup",getServerSideGroupKey:"getServerSideGroupKey",getBusinessKeyForNode:"getBusinessKeyForNode",getRowId:"getRowId",resetRowDataOnUpdate:[2,"resetRowDataOnUpdate","resetRowDataOnUpdate",$],processRowPostCreate:"processRowPostCreate",isRowSelectable:"isRowSelectable",isRowMaster:"isRowMaster",fillOperation:"fillOperation",postSortRows:"postSortRows",getRowStyle:"getRowStyle",getRowClass:"getRowClass",getRowHeight:"getRowHeight",isFullWidthRow:"isFullWidthRow",isRowValidDropPosition:"isRowValidDropPosition"},outputs:{toolPanelVisibleChanged:"toolPanelVisibleChanged",toolPanelSizeChanged:"toolPanelSizeChanged",columnMenuVisibleChanged:"columnMenuVisibleChanged",contextMenuVisibleChanged:"contextMenuVisibleChanged",cutStart:"cutStart",cutEnd:"cutEnd",pasteStart:"pasteStart",pasteEnd:"pasteEnd",columnVisible:"columnVisible",columnPinned:"columnPinned",columnResized:"columnResized",columnMoved:"columnMoved",columnValueChanged:"columnValueChanged",columnPivotModeChanged:"columnPivotModeChanged",columnPivotChanged:"columnPivotChanged",columnGroupOpened:"columnGroupOpened",newColumnsLoaded:"newColumnsLoaded",gridColumnsChanged:"gridColumnsChanged",displayedColumnsChanged:"displayedColumnsChanged",virtualColumnsChanged:"virtualColumnsChanged",columnEverythingChanged:"columnEverythingChanged",columnsReset:"columnsReset",columnHeaderMouseOver:"columnHeaderMouseOver",columnHeaderMouseLeave:"columnHeaderMouseLeave",columnHeaderClicked:"columnHeaderClicked",columnHeaderContextMenu:"columnHeaderContextMenu",componentStateChanged:"componentStateChanged",cellValueChanged:"cellValueChanged",cellEditRequest:"cellEditRequest",rowValueChanged:"rowValueChanged",cellEditingStarted:"cellEditingStarted",cellEditingStopped:"cellEditingStopped",rowEditingStarted:"rowEditingStarted",rowEditingStopped:"rowEditingStopped",bulkEditingStarted:"bulkEditingStarted",bulkEditingStopped:"bulkEditingStopped",batchEditingStarted:"batchEditingStarted",batchEditingStopped:"batchEditingStopped",undoStarted:"undoStarted",undoEnded:"undoEnded",redoStarted:"redoStarted",redoEnded:"redoEnded",cellSelectionDeleteStart:"cellSelectionDeleteStart",cellSelectionDeleteEnd:"cellSelectionDeleteEnd",rangeDeleteStart:"rangeDeleteStart",rangeDeleteEnd:"rangeDeleteEnd",fillStart:"fillStart",fillEnd:"fillEnd",filterOpened:"filterOpened",filterChanged:"filterChanged",filterModified:"filterModified",filterUiChanged:"filterUiChanged",floatingFilterUiChanged:"floatingFilterUiChanged",advancedFilterBuilderVisibleChanged:"advancedFilterBuilderVisibleChanged",findChanged:"findChanged",chartCreated:"chartCreated",chartRangeSelectionChanged:"chartRangeSelectionChanged",chartOptionsChanged:"chartOptionsChanged",chartDestroyed:"chartDestroyed",cellKeyDown:"cellKeyDown",gridReady:"gridReady",firstDataRendered:"firstDataRendered",gridSizeChanged:"gridSizeChanged",modelUpdated:"modelUpdated",virtualRowRemoved:"virtualRowRemoved",viewportChanged:"viewportChanged",bodyScroll:"bodyScroll",bodyScrollEnd:"bodyScrollEnd",dragStarted:"dragStarted",dragStopped:"dragStopped",dragCancelled:"dragCancelled",stateUpdated:"stateUpdated",paginationChanged:"paginationChanged",rowDragEnter:"rowDragEnter",rowDragMove:"rowDragMove",rowDragLeave:"rowDragLeave",rowDragEnd:"rowDragEnd",rowDragCancel:"rowDragCancel",rowResizeStarted:"rowResizeStarted",rowResizeEnded:"rowResizeEnded",columnRowGroupChanged:"columnRowGroupChanged",rowGroupOpened:"rowGroupOpened",expandOrCollapseAll:"expandOrCollapseAll",pivotMaxColumnsExceeded:"pivotMaxColumnsExceeded",pinnedRowDataChanged:"pinnedRowDataChanged",pinnedRowsChanged:"pinnedRowsChanged",rowDataUpdated:"rowDataUpdated",asyncTransactionsFlushed:"asyncTransactionsFlushed",storeRefreshed:"storeRefreshed",headerFocused:"headerFocused",cellClicked:"cellClicked",cellDoubleClicked:"cellDoubleClicked",cellFocused:"cellFocused",cellMouseOver:"cellMouseOver",cellMouseOut:"cellMouseOut",cellMouseDown:"cellMouseDown",rowClicked:"rowClicked",rowDoubleClicked:"rowDoubleClicked",rowSelected:"rowSelected",selectionChanged:"selectionChanged",cellContextMenu:"cellContextMenu",rangeSelectionChanged:"rangeSelectionChanged",cellSelectionChanged:"cellSelectionChanged",tooltipShow:"tooltipShow",tooltipHide:"tooltipHide",sortChanged:"sortChanged"},features:[kt([Wme,Ume]),sn],decls:0,vars:0,template:function(i,o){},encapsulation:2})}}return e})(),uQe=new Set(SV);function hQe(e,t){return uQe.has(e)?t===""?!0:t==="false"?!1:t:t}var pQe=()=>[5,10,25,50,100];function fQe(e,t){if(e&1&&(M(0,"span"),N(1),R()),e&2){let n=A(2);P(),og(" ",n.getFilteredRows()," of ",n.getTotalRows()," rows ")}}function mQe(e,t){if(e&1&&(M(0,"span"),N(1),R()),e&2){let n=A(2);P(),qe(" ",n.getTotalRows()," rows ")}}function gQe(e,t){if(e&1){let n=Ge();M(0,"div",4)(1,"div",5)(2,"h3",6),N(3),R(),M(4,"div",7),Si(5,fQe,2,2,"span",8)(6,mQe,2,1,"span",8),R()(),M(7,"div",9)(8,"button",10),Q("click",function(){J(n);let o=A();return X(o.clearFilters())}),M(9,"span",11),N(10,"filter_alt_off"),R(),M(11,"span"),N(12,"Clear Filters"),R()(),M(13,"button",12),Q("click",function(){J(n);let o=A();return X(o.clearSorting())}),M(14,"span",11),N(15,"sort"),R(),M(16,"span"),N(17,"Clear Sort"),R()(),M(18,"button",13),Q("click",function(){J(n);let o=A();return X(o.exportToCsv())}),M(19,"span",11),N(20,"download"),R(),M(21,"span"),N(22,"Export CSV"),R()()()()}if(e&2){let n=A();P(3),nt(n.tableData.table_name||"Data Table"),P(2),le("ngIf",n.getGridApi()),P(),le("ngIf",!n.getGridApi())}}function vQe(e,t){e&1&&(M(0,"div",14)(1,"div",15)(2,"span",16),N(3,"info"),R(),M(4,"span"),N(5,"Click column headers to sort, use floating filters to search, and hover over cells for full content."),R()()())}var _Qe=[TI];bI.registerModules(_Qe);var yy=class e{modules=[TI];tableData;agGrid;rowData=[];columnDefs=[];theme=CV;rowSelection={mode:"multiRow",enableClickSelection:!0,checkboxes:!0,headerCheckbox:!0,selectAll:"currentPage"};defaultColDef={flex:1,minWidth:60,maxWidth:500,resizable:!0,sortable:!0,filter:!0,editable:!1,wrapHeaderText:!0,autoHeaderHeight:!0,suppressMovable:!0,cellStyle:{borderRight:"1px solid #e2e8f0",borderBottom:"1px solid #f1f5f9",padding:"8px 12px",fontSize:"14px",lineHeight:"1.4"},cellClassRules:{"number-cell":t=>typeof t.value=="number","boolean-cell":t=>typeof t.value=="boolean","text-cell":t=>typeof t.value=="string","null-cell":t=>t.value===null||t.value===void 0},headerClass:"ag-header-cell-custom",filterParams:{suppressAndOrCondition:!0,buttons:["apply","reset"],closeOnApply:!0},floatingFilter:!0,floatingFilterComponentParams:{suppressFilterButton:!0}};gridOptions={animateRows:!0,enableCellTextSelection:!0,suppressCellFocus:!0,pagination:!0,paginationPageSize:10,paginationPageSizeSelector:[5,10,25,50,100],domLayout:"normal",suppressHorizontalScroll:!0,suppressColumnVirtualisation:!1,rowHeight:42,headerHeight:48,overlayLoadingTemplate:'<div class="ag-overlay-loading-center"><span class="loading-spinner"></span><span>Loading data...</span></div>',overlayNoRowsTemplate:'<div class="ag-overlay-no-rows-center"><span class="no-data-icon">\u{1F4CA}</span><span>No data to display</span></div>',enableRtl:!1,enableBrowserTooltips:!0,tooltipShowDelay:500,tooltipMouseTrack:!0,rowClass:"ag-row-custom",suppressRowHoverHighlight:!1,cellSelection:!1,suppressDragLeaveHidesColumns:!0,defaultColDef:this.defaultColDef};gridApi;resizeTimeout;ngOnInit(){this.processTableData()}ngAfterViewInit(){this.agGrid?.api&&(this.gridApi=this.agGrid.api,this.setupGridTheme())}onWindowResize(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.sizeColumnsToFit()},250)}ngOnChanges(t){t.tableData&&t.tableData.currentValue&&(console.log("Table data changed:",this.tableData),this.processTableData(),setTimeout(()=>{this.gridApi&&(this.gridApi.setGridOption("rowData",this.rowData),this.gridApi.setGridOption("columnDefs",this.columnDefs),this.gridApi.refreshCells({force:!0}),this.gridApi.setGridOption("pagination",this.rowData.length>this.gridOptions.paginationPageSize),this.sizeColumnsToFit())}))}processTableData(){if(console.log("Processing table data:",this.tableData),!this.tableData||!this.tableData.column_names||!this.tableData.data){console.warn("No table data available"),this.rowData=[],this.columnDefs=[];return}console.log(`Processing ${this.tableData.column_names.length} columns and ${this.tableData.data.length} rows`),this.columnDefs=this.tableData.column_names.map((t,n)=>{let i=this.tableData.data.map(a=>a[n]),o=i.every(a=>typeof a=="number"||a===null||a===void 0),r=i.every(a=>typeof a=="boolean"||a===null||a===void 0);return{headerName:this.formatHeader(t),field:`col${n}`,headerTooltip:t,cellRenderer:a=>{let l=a.value;if(l==null)return'<span class="null-value">\u2014</span>';if(typeof l=="boolean")return l?'<span class="boolean-true" title="True">\u2713</span>':'<span class="boolean-false" title="False">\u2717</span>';if(typeof l=="number"){let h=this.formatNumber(l);return`<span class="number-value" title="${l}">${h}</span>`}let c=String(l),u=c.length>100?c.substring(0,100)+"...":c;return`<span class="text-value" title="${c}">${u}</span>`},comparator:(a,l)=>a===null&&l===null?0:a===null?-1:l===null?1:typeof a=="number"&&typeof l=="number"?a-l:typeof a=="boolean"&&typeof l=="boolean"?a===l?0:a?1:-1:String(a).localeCompare(String(l)),filter:o?"agNumberColumnFilter":"agTextColumnFilter",filterParams:o?{filterOptions:["equals","notEqual","lessThan","greaterThan","inRange"],maxNumConditions:1}:{filterOptions:["contains","notContains","equals","notEqual","startsWith","endsWith"],maxNumConditions:1},cellStyle:a=>{let l={};return typeof a.value=="number"?(l.textAlign="right",l.fontFamily="'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace"):typeof a.value=="boolean"&&(l.textAlign="center"),l}}}),this.rowData=this.tableData.data.map((t,n)=>{let i={id:n,_rowIndex:n};return t.forEach((o,r)=>{i[`col${r}`]=o}),i}),console.log("Processed columnDefs:",this.columnDefs),console.log("Processed rowData sample:",this.rowData.slice(0,3))}formatHeader(t){return t.replace(/_/g," ").replace(/([A-Z])/g," $1").replace(/^./,n=>n.toUpperCase()).trim()}formatNumber(t){if(Number.isInteger(t))return t.toLocaleString();let n=Math.abs(t);return n===0?"0":n<.001?t.toExponential(2):n<1?t.toFixed(4):n<1e3?t.toFixed(2):n<1e6?(t/1e3).toFixed(2)+"K":n<1e9?(t/1e6).toFixed(2)+"M":(t/1e9).toFixed(2)+"B"}onGridReady(t){this.gridApi=t.api,this.gridApi.setGridOption("rowData",this.rowData),this.gridApi.setGridOption("columnDefs",this.columnDefs),this.gridApi.setGridOption("pagination",this.rowData.length>this.gridOptions.paginationPageSize),setTimeout(()=>{this.sizeColumnsToFit(),this.setupGridTheme()},100)}sizeColumnsToFit(){if(this.gridApi)try{this.gridApi.sizeColumnsToFit({defaultMinWidth:120,defaultMaxWidth:400,columnLimits:[{key:"id",minWidth:60,maxWidth:80}]});let t=this.gridApi.getColumns()?.map(n=>n.getColId())||[];this.gridApi.autoSizeColumns(t,!1)}catch(t){console.warn("Error sizing columns:",t)}}setupGridTheme(){if(this.gridApi){let t=document.querySelector("ag-grid-angular");t&&t.classList.add("custom-ag-theme")}}exportToCsv(){this.gridApi&&this.gridApi.exportDataAsCsv({fileName:`${this.tableData?.table_name||"table_data"}_${new Date().toISOString().slice(0,10)}`,processCellCallback:t=>t.value!==null&&t.value!==void 0?String(t.value):"",columnSeparator:",",suppressQuotes:!1,columnKeys:this.columnDefs.map((t,n)=>`col${n}`)})}exportToExcel(){this.gridApi&&this.gridApi.exportDataAsExcel({fileName:`${this.tableData?.table_name||"table_data"}_${new Date().toISOString().slice(0,10)}.xlsx`,sheetName:"Data"})}clearFilters(){this.gridApi&&this.gridApi.setFilterModel(null)}clearSorting(){this.gridApi&&this.gridApi.applyColumnState({defaultState:{sort:null}})}togglePagination(){if(this.gridApi){let t=this.gridApi.getGridOption("pagination");this.gridApi.setGridOption("pagination",!t)}}getGridApi(){return this.gridApi||null}getTotalRows(){return this.rowData.length}getFilteredRows(){return this.gridApi?this.gridApi.getDisplayedRowCount():this.rowData.length}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=pe({type:e,selectors:[["app-chat-data-table"]],viewQuery:function(n,i){if(n&1&&bn(ZG,5),n&2){let o;Ye(o=Qe())&&(i.agGrid=o.first)}},hostBindings:function(n,i){n&1&&Q("resize",function(){return i.onWindowResize()},qb)},inputs:{tableData:"tableData"},features:[sn],decls:4,vars:12,consts:[[1,"table-container"],["class","grid-toolbar",4,"ngIf"],[1,"ag-theme-quartz","custom-ag-theme",2,"width","100%","height","500px",3,"gridReady","rowData","columnDefs","gridOptions","defaultColDef","rowSelection","pagination","paginationPageSize","paginationPageSizeSelector","animateRows"],["class","grid-footer",4,"ngIf"],[1,"grid-toolbar"],[1,"toolbar-left"],[1,"table-title"],[1,"stats-badge"],[4,"ngIf"],[1,"toolbar-right"],["title","Clear Filters",1,"action-button",3,"click"],[1,"material-icons"],["title","Clear Sorting",1,"action-button",3,"click"],["title","Export to CSV",1,"action-button","primary",3,"click"],[1,"grid-footer"],[1,"footer-info"],[1,"material-icons","info-icon"]],template:function(n,i){n&1&&(M(0,"div",0),Si(1,gQe,23,3,"div",1),M(2,"ag-grid-angular",2),Q("gridReady",function(r){return i.onGridReady(r)}),R(),Si(3,vQe,6,0,"div",3),R()),n&2&&(P(),le("ngIf",i.tableData),P(),le("rowData",i.rowData)("columnDefs",i.columnDefs)("gridOptions",i.gridOptions)("defaultColDef",i.defaultColDef)("rowSelection",i.rowSelection)("pagination",i.rowData.length>10)("paginationPageSize",10)("paginationPageSizeSelector",rg(11,pQe))("animateRows",!0),P(),le("ngIf",i.tableData))},dependencies:[oo,hC,ZG],styles:['[_nghost-%COMP%]{display:block;width:100%;height:100%;min-height:400px}.custom-ag-theme[_ngcontent-%COMP%]{--ag-header-height: 48px;--ag-row-height: 42px;--ag-font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--ag-font-size: 14px;--ag-border-color: #e2e8f0;--ag-header-background-color: #f8fafc;--ag-odd-row-background-color: #ffffff;--ag-even-row-background-color: #f8fafc;--ag-row-hover-color: #f1f5f9;--ag-row-border-color: #f1f5f9;--ag-range-selection-border-color: #3b82f6;--ag-range-selection-background-color: rgba(59, 130, 246, .1);--ag-selected-row-background-color: rgba(59, 130, 246, .1);--ag-input-border-color: #cbd5e1;--ag-input-border-radius: 6px;--ag-checkbox-border-radius: 4px;--ag-checkbox-checked-color: #3b82f6;--ag-icon-font-family: "Material Icons"}.ag-header-cell-custom[_ngcontent-%COMP%]{background-color:#f8fafc;font-weight:600;color:#334155;border-right:1px solid #e2e8f0;border-bottom:1px solid #e2e8f0;padding:0 12px}.ag-header-cell-custom[_ngcontent-%COMP%]:hover{background-color:#f1f5f9}.number-cell[_ngcontent-%COMP%]{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;text-align:right;color:#059669}.boolean-cell[_ngcontent-%COMP%]{text-align:center;font-weight:500}.text-cell[_ngcontent-%COMP%]{text-align:left;color:#475569}.null-cell[_ngcontent-%COMP%]{color:#94a3b8;font-style:italic}.null-value[_ngcontent-%COMP%]{color:#94a3b8;font-style:italic;font-size:.9em}.boolean-true[_ngcontent-%COMP%]{color:#059669;font-weight:700;font-size:1.1em}.boolean-false[_ngcontent-%COMP%]{color:#dc2626;font-weight:700;font-size:1.1em}.number-value[_ngcontent-%COMP%]{font-weight:500}.ag-row-custom[_ngcontent-%COMP%]{border-bottom:1px solid #f1f5f9;transition:background-color .2s ease}.ag-row-custom[_ngcontent-%COMP%]:hover{background-color:#f8fafc!important}.ag-row-custom.ag-row-selected[_ngcontent-%COMP%]{background-color:#3b82f61a!important}.grid-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background-color:#f8fafc;border-bottom:1px solid #e2e8f0;margin-bottom:8px;border-radius:8px 8px 0 0}.toolbar-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.stats-badge[_ngcontent-%COMP%]{background-color:#e2e8f0;color:#475569;padding:4px 12px;border-radius:16px;font-size:12px;font-weight:500}.action-button[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #cbd5e1;color:#475569;padding:6px 12px;border-radius:6px;font-size:13px;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:6px}.action-button[_ngcontent-%COMP%]:hover{background-color:#f1f5f9;border-color:#94a3b8;transform:translateY(-1px)}.action-button[_ngcontent-%COMP%]:active{transform:translateY(0)}.action-button.primary[_ngcontent-%COMP%]{background-color:#3b82f6;border-color:#3b82f6;color:#fff}.action-button.primary[_ngcontent-%COMP%]:hover{background-color:#2563eb;border-color:#2563eb}.action-button.success[_ngcontent-%COMP%]{background-color:#10b981;border-color:#10b981;color:#fff}.action-button.success[_ngcontent-%COMP%]:hover{background-color:#059669;border-color:#059669}.ag-overlay-loading-center[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;padding:32px;background-color:#ffffffe6;border-radius:8px;color:#64748b;font-weight:500}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #e2e8f0;border-top-color:#3b82f6;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.ag-overlay-no-rows-center[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;padding:32px;background-color:#ffffffe6;border-radius:8px;color:#64748b;font-weight:500}.no-data-icon[_ngcontent-%COMP%]{font-size:48px;opacity:.5}.ag-paging-panel[_ngcontent-%COMP%]{border-top:1px solid #e2e8f0;background-color:#f8fafc;padding:12px 16px;color:#475569}.ag-paging-row-summary-panel[_ngcontent-%COMP%]{font-size:13px}.ag-paging-page-summary-panel[_ngcontent-%COMP%]{gap:8px}.ag-paging-button[_ngcontent-%COMP%]{min-width:32px;height:32px;border:1px solid #cbd5e1;border-radius:6px;background-color:#fff;color:#475569}.ag-paging-button[_ngcontent-%COMP%]:hover:not(.ag-disabled){background-color:#f1f5f9}.ag-paging-button.ag-disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.ag-filter-toolpanel[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #e2e8f0;border-radius:8px;box-shadow:0 4px 6px -1px #0000001a}.ag-filter[_ngcontent-%COMP%]{background-color:#fff}.ag-set-filter-list[_ngcontent-%COMP%]{max-height:300px}@media(max-width:768px){.grid-toolbar[_ngcontent-%COMP%]{flex-direction:column;gap:12px;align-items:stretch}.toolbar-left[_ngcontent-%COMP%], .toolbar-right[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.action-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(.material-icons){display:none}.action-button[_ngcontent-%COMP%]{padding:6px}}']})};var yQe=["chatMessages"],bQe=(e,t,n,i)=>({"user-message":e,"bot-message":t,"layout-message":n,"map-layout-active":i});function CQe(e,t){if(e&1&&Ae(0,"markdown",5),e&2){let n=A().$implicit;le("data",n.content)}}function wQe(e,t){if(e&1&&Ae(0,"app-chat-data-table",15),e&2){let n=A().$implicit;le("tableData",n.data)}}function xQe(e,t){e&1&&(M(0,"div",16)(1,"i",17),N(2,"\u26A0\uFE0F"),R(),N(3," Invalid table structure "),R())}function SQe(e,t){if(e&1){let n=Ge();M(0,"div",12)(1,"div",13)(2,"button",14),Q("click",function(o){let r=J(n).$implicit;return A(3).selectLayout(r),X(o.stopPropagation())}),M(3,"mat-icon"),N(4,"open_in_new"),R()()(),K(5,wQe,1,1,"app-chat-data-table",15),bt(6,"hasValidTableStructure"),Hr(7,xQe,4,0,"div",16),R()}if(e&2){let n=t.$implicit;P(5),Z(Ot(6,1,n)?5:7)}}function EQe(e,t){e&1&&(M(0,"div",6),an(1,SQe,8,3,"div",12,eC),R()),e&2&&(P(),ln(t))}function DQe(e,t){if(e&1&&(M(0,"a",19),bt(1,"getButtonLink"),bt(2,"isExternalLink"),bt(3,"isExternalLink"),N(4),bt(5,"getButtonTitle"),R()),e&2){let n=A().$implicit;le("href",Ot(1,4,n),Wb)("target",Ot(2,6,n)?"_blank":"_self"),pt("rel",Ot(3,8,n)?"noopener noreferrer":null),P(4),qe(" ",Ot(5,10,n)," ")}}function kQe(e,t){e&1&&(M(0,"div",20),N(1,"Invalid button structure"),R())}function IQe(e,t){if(e&1&&(M(0,"div",18),K(1,DQe,6,12,"a",19),bt(2,"hasValidButtonStructure"),Hr(3,kQe,2,0,"div",20),R()),e&2){let n=t.$implicit;P(),Z(Ot(2,1,n)?1:3)}}function MQe(e,t){e&1&&(M(0,"div",7),an(1,IQe,4,3,"div",18,qn),R()),e&2&&(P(),ln(t))}function RQe(e,t){if(e&1&&(M(0,"div",23),N(1),bt(2,"getMapTitle"),R()),e&2){let n=A(2).$implicit;P(),nt(Ot(2,1,n))}}function TQe(e,t){if(e&1){let n=Ge();M(0,"div",21)(1,"div",13)(2,"button",14),Q("click",function(o){J(n);let r=A().$implicit;return A(3).selectLayout(r),X(o.stopPropagation())}),M(3,"mat-icon"),N(4,"open_in_new"),R()()(),K(5,RQe,3,3,"div",23),bt(6,"hasMapTitle"),M(7,"app-map",24),bt(8,"getMapFeatures"),bt(9,"getMapWmsLayers"),bt(10,"getMapCenter"),bt(11,"getMapZoom"),bt(12,"getMapHeight"),Q("featureClick",function(o){J(n);let r=A(4);return X(r.onFeatureClick(o))}),R()()}if(e&2){let n=A().$implicit;P(5),Z(Ot(6,7,n)?5:-1),P(2),le("featureDetails",Ot(8,9,n))("wmsLayers",Ot(9,11,n))("center",Ot(10,13,n))("zoom",Ot(11,15,n))("showPopup",!0)("height",Ot(12,17,n))}}function PQe(e,t){e&1&&(M(0,"div",22),N(1,"Invalid map layout"),R())}function AQe(e,t){if(e&1&&(K(0,TQe,13,19,"div",21),bt(1,"isValidMapLayout"),Hr(2,PQe,2,0,"div",22)),e&2){let n=t.$implicit;Z(Ot(1,1,n)?0:2)}}function OQe(e,t){e&1&&(M(0,"div",8),an(1,AQe,3,3,null,null,qn),R()),e&2&&(P(),ln(t))}function FQe(e,t){if(e&1){let n=Ge();M(0,"div",13)(1,"button",14),Q("click",function(o){J(n);let r=A().$implicit;return A(3).selectLayout(r),X(o.stopPropagation())}),M(2,"mat-icon"),N(3,"open_in_new"),R()()(),M(4,"app-chat-form",27),Q("formSubmitted",function(o){J(n);let r=A(3).$implicit,s=A();return X(s.onChatFormSubmitted(o,r))})("formCancelled",function(){J(n);let o=A(4);return X(o.onChatFormCancelled())})("kanbanAction",function(o){J(n);let r=A(4);return X(r.onKanbanAction(o))})("kanbanBoardUpdated",function(o){J(n);let r=A(4);return X(r.onKanbanBoardUpdated(o))}),R()}if(e&2){let n=A().$implicit;P(4),le("formLayout",n)}}function LQe(e,t){e&1&&(M(0,"div",26),N(1," Invalid form layout - check console for details "),R())}function NQe(e,t){if(e&1&&(M(0,"div",25),K(1,FQe,5,1),bt(2,"isValidFormLayout"),Hr(3,LQe,2,0,"div",26),R()),e&2){let n=t.$implicit;P(),Z(Ot(2,1,n)?1:3)}}function BQe(e,t){if(e&1&&(M(0,"div",9),an(1,NQe,4,3,"div",25,eC),bt(3,"filterForms"),R()),e&2){let n=A().$implicit;P(),ln(Ot(3,0,n.layouts))}}function zQe(e,t){if(e&1){let n=Ge();M(0,"div",13)(1,"button",14),Q("click",function(o){J(n);let r=A().$implicit;return A(3).selectLayout(r),X(o.stopPropagation())}),M(2,"mat-icon"),N(3,"open_in_new"),R()()(),M(4,"app-chat-kanban",30),Q("actionTriggered",function(o){J(n);let r=A(4);return X(r.onKanbanAction(o))})("boardUpdated",function(o){J(n);let r=A(4);return X(r.onKanbanBoardUpdated(o))}),R()}if(e&2){let n=A().$implicit;P(4),le("kanbanLayout",n)}}function VQe(e,t){e&1&&(M(0,"div",29),N(1," Invalid kanban layout "),R())}function HQe(e,t){if(e&1&&(M(0,"div",28),K(1,zQe,5,1),bt(2,"isKanbanLayout"),Hr(3,VQe,2,0,"div",29),R()),e&2){let n=t.$implicit;P(),Z(Ot(2,1,n)?1:3)}}function $Qe(e,t){if(e&1&&(M(0,"div",10),an(1,HQe,4,3,"div",28,eC),bt(3,"filterKanban"),R()),e&2){let n=A().$implicit;P(),ln(Ot(3,0,n.layouts))}}function jQe(e,t){if(e&1&&(M(0,"div",2)(1,"div",3)(2,"div",4),K(3,CQe,1,1,"markdown",5),R(),K(4,EQe,3,0,"div",6),bt(5,"filterTables"),K(6,MQe,3,0,"div",7),bt(7,"filterButtons"),K(8,OQe,3,0,"div",8),bt(9,"filterMaps"),K(10,BQe,4,2,"div",9),K(11,$Qe,4,2,"div",10),M(12,"div",11),N(13),bt(14,"date"),R()()()),e&2){let n,i,o,r=t.$implicit,s=A();le("ngClass",X3(17,bQe,r.role==="user",r.role==="bot",s.hasMapLayout(r),s.hasMapLayout(r))),P(3),Z(r.content&&typeof r.content=="string"?3:-1),P(),Z((n=Ot(5,8,r.layouts))?4:-1,n),P(2),Z((i=Ot(7,10,r.layouts))?6:-1,i),P(2),Z((o=Ot(9,12,r.layouts))?8:-1,o),P(2),Z(r.layouts&&r.layouts.length>0?10:-1),P(),Z(r.layouts&&r.layouts.length>0?11:-1),P(2),nt(Jh(14,14,r.timestamp,"shortTime"))}}var kA=class e{chatMessagesContainer;messages=[];Math=Math;activeLayoutMessageId=null;activeLayoutType=null;featureDetails=[];wmsLayers=[];mapCenter=[0,0];mapZoom=2;shouldScrollToBottom=!0;formSubmittedFromChat=new V;layoutSelected=new V;hasActiveLayout(){return this.activeLayoutMessageId!==null&&this.activeLayoutType!==null}getActiveLayoutType(){return this.activeLayoutType}getActiveMessage(){return this.messages.find(t=>t.id===this.activeLayoutMessageId)||null}getActiveTables(){let t=this.getActiveMessage();return t?.layouts?this.getTables(t.layouts):[]}getActiveButtons(){let t=this.getActiveMessage();return t?.layouts?this.getButtons(t.layouts):[]}getActiveMaps(){let t=this.getActiveMessage();return t?.layouts?t.layouts.filter(n=>n.type==="map"):[]}setActiveLayout(t,n){this.activeLayoutMessageId=t,this.activeLayoutType=n}clearActiveLayout(){this.activeLayoutMessageId=null,this.activeLayoutType=null}messageHasLayout(t){return!!(t.layouts&&t.layouts.length>0)}getMessageLayoutType(t){return!t.layouts||t.layouts.length===0?null:t.layouts[0].type}onMessageClick(t){if(this.messageHasLayout(t)){let n=this.getMessageLayoutType(t);n&&(this.activeLayoutMessageId===t.id&&this.activeLayoutType===n?this.clearActiveLayout():this.setActiveLayout(t.id,n))}}isTableLayout(t){return t.some(n=>n.type==="table")}isButtonLayout(t){return t.some(n=>n.type==="button")}isMapLayout(t){return t.some(n=>n.type==="map")}getMapData(t){return t.find(i=>i.type==="map")||null}onFeatureClick(t){console.log("Feature clicked:",t)}scrollToBottom(){setTimeout(()=>{this.chatMessagesContainer&&(this.chatMessagesContainer.nativeElement.scrollTop=this.chatMessagesContainer.nativeElement.scrollHeight)},100)}onChatScroll(){let t=this.chatMessagesContainer?.nativeElement;if(!t)return;let i=Math.abs(t.scrollHeight-t.scrollTop-t.clientHeight)<=20;this.shouldScrollToBottom=i}getTables(t){return t.filter(n=>n.type==="table")}getTableHeaders(t){return console.log(t),t.data.column_names||[]}getTableData(t){return console.log(t),t.data.data||[]}getButtons(t){return t.filter(n=>n.type==="button")}isSingleButton(t){return console.log(t),t&&t.type==="button"&&t.data.link&&t.data.title}hasValidButtonStructure(t){return console.log(t),!!t&&!!t.data&&!!t.data.link&&typeof t.data.link=="string"&&!!t.data.title&&typeof t.data.title=="string"&&this.isValidUrl(t.data.link)}hasValidTableStructure(t){return console.log(t),t?.data&&Array.isArray(t.data.column_names)&&t.data.column_names.length>0&&Array.isArray(t.data.data)&&t.data.data.every(n=>Array.isArray(n))}hasValidTableName(t){return console.log(t),t?.data?.table_name&&typeof t.data.table_name=="string"&&t.data.table_name.trim().length>0}getButtonTitle(t){return console.log(t),t.data.title||"Click Here"}getButtonLink(t){return console.log(t),t.data.link||"#"}isExternalLink(t){console.log(t);let n=this.getButtonLink(t);return n.startsWith("http://")||n.startsWith("https://")}isValidUrl(t){try{return new URL(t),!0}catch{return t.startsWith("/")||t.startsWith("#")||t.startsWith("?")}}hasFormLayout(t){return t.layouts&&Array.isArray(t.layouts)&&t.layouts.some(n=>n.type==="form")}hasMapLayout(t){return t.layouts&&Array.isArray(t.layouts)&&t.layouts.some(n=>n.type==="map")}getFormTool(t){return console.log("form layout schema : ",t),{name:"form-layout",inputSchema:t.data.schema}}onChatFormSubmitted(t,n){this.formSubmittedFromChat.emit({toolName:t.toolName,params:t.params})}onChatFormCancelled(){console.log("Chat form cancelled")}onKanbanAction(t){switch(console.log("Kanban action from chat:",t),t.action.type){case"add_card":this.handleAddCardAction(t);break;case"edit_card":this.handleEditCardAction(t);break;case"delete_card":this.handleDeleteCardAction(t);break;case"move_card":this.handleMoveCardAction(t);break}}onKanbanBoardUpdated(t){console.log("Kanban board updated from chat:",t),this.sendToMCP({type:"kanban_update",layout_id:t.layout.data?.board_id,data:t.data,timestamp:new Date().toISOString()})}handleAddCardAction(t){t.action.action?.type==="form"?this.openKanbanForm(t.action.action,t.action.column):this.sendToMCP({type:"kanban_add_card",column_id:t.action.column?.id,layout_id:t.layout.data?.board_id})}handleEditCardAction(t){this.openKanbanForm(t.action.action||{type:"form",title:"Edit Card"},t.action.card)}handleDeleteCardAction(t){this.sendToMCP({type:"kanban_delete_card",card_id:t.action.card.id,layout_id:t.layout.data?.board_id})}handleMoveCardAction(t){this.sendToMCP({type:"kanban_move_card",card_id:t.action.card.id,from_column:t.action.fromColumn?.id,to_column:t.action.toColumn?.id,layout_id:t.layout.data?.board_id})}openKanbanForm(t,n){let i={type:"form",data:{title:t.title||"Kanban Form",schema:t.form_schema,metadata:{formId:`kanban-form-${Date.now()}`,context:n},actions:{submit:t.submit_action||{type:"tool",tool_name:"kanban_submit_form"},cancel:{type:"cancel",title:"Cancel"}}}};console.log("Please fill out this form:",[i])}sendToMCP(t){console.log("Sending to MCP:",t)}selectLayout(t){this.layoutSelected.emit(t)}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=pe({type:e,selectors:[["app-chatbot"]],viewQuery:function(n,i){if(n&1&&bn(yQe,5),n&2){let o;Ye(o=Qe())&&(i.chatMessagesContainer=o.first)}},inputs:{messages:"messages"},outputs:{formSubmittedFromChat:"formSubmittedFromChat",layoutSelected:"layoutSelected"},decls:4,vars:0,consts:[["chatMessages",""],[1,"chat-messages",3,"scroll"],[1,"message-container",3,"ngClass"],[1,"message-content"],[1,"message-text","markdown-body"],[3,"data"],[1,"tables-container"],[1,"button-container"],[1,"map-container"],[1,"form-layouts"],[1,"kanban-layouts"],[1,"message-time"],[1,"table-wrapper"],[1,"workspace-action"],["mat-icon-button","","title","Open in Workspace",1,"open-workspace-btn",3,"click"],[3,"tableData"],[1,"table-error"],[1,"error-icon"],[1,"button-wrapper"],[1,"dynamic-button",3,"href","target"],[1,"button-error"],[1,"map-wrapper"],[1,"map-error"],[1,"map-header"],[3,"featureClick","featureDetails","wmsLayers","center","zoom","showPopup","height"],[1,"form-container"],[1,"invalid-form"],[3,"formSubmitted","formCancelled","kanbanAction","kanbanBoardUpdated","formLayout"],[1,"kanban-container"],[1,"invalid-kanban"],[3,"actionTriggered","boardUpdated","kanbanLayout"]],template:function(n,i){if(n&1){let o=Ge();M(0,"div",1,0),Q("scroll",function(){return J(o),X(i.onChatScroll())}),an(2,jQe,15,22,"div",2,qn),R()}n&2&&(P(2),ln(i.messages))},dependencies:[is,oo,uC,_X,vX,sy,gy,yy,_y,ga,ma,mC,oA,rA,dA,ay,sA,aA,lA,cA,ly,cy,dy,uy,hy,py,fy,my,uA,hA,SA,xA],styles:[".chat-messages[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:10px 20px 20px 12px;display:flex;flex-direction:column;gap:12px}.message-container[_ngcontent-%COMP%]{display:flex;max-width:85%}.message-container.layout-message[_ngcontent-%COMP%]{max-width:100%!important;width:100%!important;align-self:stretch!important}.message-container.map-layout-active.bot-message[_ngcontent-%COMP%]{min-width:580px}.user-message[_ngcontent-%COMP%]{align-self:flex-end;justify-content:flex-end}.bot-message[_ngcontent-%COMP%]{align-self:flex-start;justify-content:flex-start}.message-content[_ngcontent-%COMP%]{padding:10px 14px;border-radius:16px;position:relative;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;font-size:.95rem;line-height:1.4;max-width:100%}.layout-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{width:100%!important;margin-left:0;max-width:100%!important;padding:0!important;background:transparent!important;box-shadow:none!important;border-radius:0!important}.map-layout-active.bot-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{min-width:480px}.user-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#f0f0f0;border-bottom-right-radius:4px;color:#333}.bot-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#fff;border-bottom-left-radius:4px;box-shadow:0 1px 2px #00000014;color:#333}.message-time[_ngcontent-%COMP%]{font-size:.65rem;color:#999;text-align:right;margin-top:4px}.table-container[_ngcontent-%COMP%], .button-container[_ngcontent-%COMP%], .map-container[_ngcontent-%COMP%]{width:100%!important;max-width:100%!important;margin:10px 0}.table-wrapper[_ngcontent-%COMP%]{margin-bottom:15px;border:1px solid #e0e0e0;border-radius:6px;overflow:hidden;background-color:#fff;width:100%}.table-header[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:10px 12px;font-weight:600;font-size:13px;color:#333;border-bottom:1px solid #e0e0e0}.dynamic-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:13px}.dynamic-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:10px 6px;text-align:left;font-weight:600;border-bottom:1px solid #dee2e6;color:#495057;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:150px}.dynamic-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 6px;border-bottom:1px solid #dee2e6;color:#212529;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:150px}.dynamic-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.dynamic-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.table-error[_ngcontent-%COMP%]{padding:15px;text-align:center;color:#dc3545;background-color:#f8d7da;border:1px solid #f5c6cb;border-radius:4px;margin:8px;font-size:13px}.button-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;width:100%}.button-wrapper[_ngcontent-%COMP%]{flex-shrink:0}.dynamic-button[_ngcontent-%COMP%]{display:inline-block;padding:8px 16px;background-color:#007bff;color:#fff;text-decoration:none;border-radius:4px;transition:background-color .3s;font-size:13px}.dynamic-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.button-error[_ngcontent-%COMP%]{padding:8px;text-align:center;color:#dc3545;background-color:#f8d7da;border:1px solid #f5c6cb;border-radius:4px;font-size:13px}.map-wrapper[_ngcontent-%COMP%]{width:100%!important;max-width:100%!important;margin:0;padding:0}.map-container[_ngcontent-%COMP%]{width:90%!important}.message-text[_ngcontent-%COMP%]{max-width:90%}.message-text[_ngcontent-%COMP%]     *{max-width:100%;margin:0}.message-text[_ngcontent-%COMP%]     p{margin-bottom:8px;line-height:1.4}.message-text[_ngcontent-%COMP%]     p:last-child{margin-bottom:0}@media(max-width:768px){.chat-messages[_ngcontent-%COMP%]{padding:8px 0;gap:10px}.message-container[_ngcontent-%COMP%]{max-width:90%}.message-container.layout-message[_ngcontent-%COMP%]{max-width:100%!important}.message-container.map-layout-active.bot-message[_ngcontent-%COMP%]{min-width:100%!important;max-width:100%!important}.map-layout-active.bot-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{min-width:100%!important}.message-content[_ngcontent-%COMP%]{padding:8px 12px;font-size:.9rem;line-height:1.35;border-radius:14px}.message-time[_ngcontent-%COMP%]{font-size:.6rem;margin-top:3px}.table-container[_ngcontent-%COMP%], .button-container[_ngcontent-%COMP%], .map-container[_ngcontent-%COMP%]{margin:8px 0}.table-wrapper[_ngcontent-%COMP%]{margin-bottom:12px;border-radius:5px}.table-header[_ngcontent-%COMP%]{padding:8px 10px;font-size:12px}.dynamic-table[_ngcontent-%COMP%]{font-size:12px}.dynamic-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .dynamic-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 4px;max-width:120px}.dynamic-button[_ngcontent-%COMP%]{padding:7px 12px;font-size:12px}.table-error[_ngcontent-%COMP%], .button-error[_ngcontent-%COMP%]{padding:10px;font-size:12px}}@media(max-width:480px){.chat-messages[_ngcontent-%COMP%]{padding:6px 0;gap:8px}.message-container[_ngcontent-%COMP%]{max-width:92%}.message-container.map-layout-active.bot-message[_ngcontent-%COMP%]{min-width:100%!important;margin-left:0;margin-right:0;padding-left:0;padding-right:0}.message-content[_ngcontent-%COMP%]{padding:6px 10px;font-size:.85rem;line-height:1.3;border-radius:12px}.message-time[_ngcontent-%COMP%]{font-size:.55rem;margin-top:2px}.table-container[_ngcontent-%COMP%], .button-container[_ngcontent-%COMP%], .map-container[_ngcontent-%COMP%]{margin:6px 0}.table-wrapper[_ngcontent-%COMP%]{margin-bottom:10px;border-radius:4px}.table-header[_ngcontent-%COMP%]{padding:6px 8px;font-size:11px}.dynamic-table[_ngcontent-%COMP%]{font-size:11px}.dynamic-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .dynamic-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 3px;max-width:100px}.button-container[_ngcontent-%COMP%]{gap:6px}.dynamic-button[_ngcontent-%COMP%]{padding:6px 10px;font-size:11px;border-radius:3px}.table-error[_ngcontent-%COMP%], .button-error[_ngcontent-%COMP%]{padding:8px;font-size:11px;margin:6px}.message-text[_ngcontent-%COMP%]     p{margin-bottom:6px;line-height:1.3}.message-text[_ngcontent-%COMP%]     h1, .message-text[_ngcontent-%COMP%]     h2, .message-text[_ngcontent-%COMP%]     h3{margin-top:8px;margin-bottom:6px;font-size:.9em}.message-text[_ngcontent-%COMP%]     ul, .message-text[_ngcontent-%COMP%]     ol{padding-left:16px;margin:4px 0}.message-text[_ngcontent-%COMP%]     li{margin:2px 0}}@media(max-width:360px){.chat-messages[_ngcontent-%COMP%]{padding:4px 0;gap:6px}.message-container[_ngcontent-%COMP%]{max-width:94%}.message-content[_ngcontent-%COMP%]{padding:5px 8px;font-size:.8rem;line-height:1.25}.dynamic-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .dynamic-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:4px 2px;max-width:80px;font-size:10px}.dynamic-button[_ngcontent-%COMP%]{padding:5px 8px;font-size:10px}}@media(max-width:768px){.table-container[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch}.table-wrapper[_ngcontent-%COMP%]{min-width:fit-content}}.message-text[_ngcontent-%COMP%]{word-wrap:break-word;overflow-wrap:break-word;-webkit-hyphens:auto;hyphens:auto}.message-text[_ngcontent-%COMP%]     img{max-width:100%;height:auto}.form-container[_ngcontent-%COMP%]{margin:10px 0}.form-wrapper[_ngcontent-%COMP%]{border:1px solid #e1e5e9;border-radius:8px;padding:15px;background:#f8f9fa;margin:10px 0}.form-header[_ngcontent-%COMP%]{font-weight:600;margin-bottom:15px;padding-bottom:8px;border-bottom:1px solid #dee2e6;color:#495057}.form-error[_ngcontent-%COMP%]{color:#dc3545;padding:10px;background:#f8d7da;border-radius:4px;margin:5px 0}.elicitation-container[_ngcontent-%COMP%]{max-width:100%}.elicitation-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{padding:0}.elicitation-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{font-size:14px}.elicitation-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:13px;padding:6px 12px}.form-message-container[_ngcontent-%COMP%]{position:relative}.has-active-form[_ngcontent-%COMP%]{border-left:4px solid #007bff}.tables-container[_ngcontent-%COMP%]{margin:16px 0}.table-wrapper[_ngcontent-%COMP%]{margin-bottom:24px}.table-error[_ngcontent-%COMP%]{padding:16px;background:#fef2f2;border:1px solid #fecaca;border-radius:6px;color:#dc2626;display:flex;align-items:center;gap:8px;font-size:14px}.error-icon[_ngcontent-%COMP%]{font-size:16px}"]})};var Kme=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({imports:[ft,ft]})}return e})();var Zme=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({imports:[ft,ft]})}return e})();var Yme=(()=>{class e{_animationsDisabled=fi();state="unchecked";disabled=!1;appearance="full";constructor(){}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=pe({type:e,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(i,o){i&2&&be("mat-pseudo-checkbox-indeterminate",o.state==="indeterminate")("mat-pseudo-checkbox-checked",o.state==="checked")("mat-pseudo-checkbox-disabled",o.disabled)("mat-pseudo-checkbox-minimal",o.appearance==="minimal")("mat-pseudo-checkbox-full",o.appearance==="full")("_mat-animation-noopable",o._animationsDisabled)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(i,o){},styles:[`.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-pseudo-checkbox-minimal-selected-checkmark-color, var(--mat-sys-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-pseudo-checkbox-minimal-disabled-selected-checkmark-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full{border-color:var(--mat-pseudo-checkbox-full-unselected-icon-color, var(--mat-sys-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-pseudo-checkbox-full-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-pseudo-checkbox-full-selected-icon-color, var(--mat-sys-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-pseudo-checkbox-full-selected-checkmark-color, var(--mat-sys-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-pseudo-checkbox-full-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-pseudo-checkbox-full-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}
`],encapsulation:2,changeDetection:0})}return e})();var IA=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({imports:[ft]})}return e})();var GQe=["*"],UQe=`.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mat-list-list-item-container-color, transparent);border-radius:var(--mat-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mat-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mat-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mat-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mat-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:"";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-leading-icon-size, 24px);height:var(--mat-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mat-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mat-list-list-item-leading-avatar-size, 40px);height:var(--mat-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mat-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mat-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mat-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mat-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mat-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-trailing-icon-size, 24px);height:var(--mat-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mat-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mat-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mat-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mat-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mat-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mat-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mat-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mat-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mat-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mat-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mat-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mat-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mat-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mat-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius: var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}
`,WQe=["unscopedContent"],qQe=["text"],KQe=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],ZQe=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"];var YQe=new q("ListOption"),QG=(()=>{class e{_elementRef=k(Oe);constructor(){}static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"]})}return e})(),QQe=(()=>{class e{_elementRef=k(Oe);constructor(){}static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"]})}return e})(),JQe=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"]})}return e})(),Qme=(()=>{class e{_listOption=k(YQe,{optional:!0});constructor(){}_isAlignedAtStart(){return!this._listOption||this._listOption?._getTogglePosition()==="after"}static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e,hostVars:4,hostBindings:function(i,o){i&2&&be("mdc-list-item__start",o._isAlignedAtStart())("mdc-list-item__end",!o._isAlignedAtStart())}})}return e})(),XQe=(()=>{class e extends Qme{static \u0275fac=(()=>{let n;return function(o){return(n||(n=gn(e)))(o||e)}})();static \u0275dir=ke({type:e,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],features:[Tt]})}return e})(),JG=(()=>{class e extends Qme{static \u0275fac=(()=>{let n;return function(o){return(n||(n=gn(e)))(o||e)}})();static \u0275dir=ke({type:e,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],features:[Tt]})}return e})(),eJe=new q("MAT_LIST_CONFIG"),YG=(()=>{class e{_isNonInteractive=!0;get disableRipple(){return this._disableRipple}set disableRipple(n){this._disableRipple=Fi(n)}_disableRipple=!1;get disabled(){return this._disabled()}set disabled(n){this._disabled.set(Fi(n))}_disabled=$t(!1);_defaultOptions=k(eJe,{optional:!0});static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e,hostVars:1,hostBindings:function(i,o){i&2&&pt("aria-disabled",o.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"}})}return e})(),tJe=(()=>{class e{_elementRef=k(Oe);_ngZone=k(me);_listBase=k(YG,{optional:!0});_platform=k(tn);_hostElement;_isButtonElement;_noopAnimations=fi();_avatars;_icons;set lines(n){this._explicitLines=Ki(n,null),this._updateItemLines(!1)}_explicitLines=null;get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(n){this._disableRipple=Fi(n)}_disableRipple=!1;get disabled(){return this._disabled()||!!this._listBase?.disabled}set disabled(n){this._disabled.set(Fi(n))}_disabled=$t(!1);_subscriptions=new Mt;_rippleRenderer=null;_hasUnscopedTextContent=!1;rippleConfig;get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(){k(ni).load(nl);let n=k(Af,{optional:!0});this.rippleConfig=n||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement=this._hostElement.nodeName.toLowerCase()==="button",this._listBase&&!this._listBase._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),this._rippleRenderer!==null&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!!(this._avatars.length||this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new Pf(this,this._ngZone,this._hostElement,this._platform,k(Ke)),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(Ni(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(n){if(!this._lines||!this._titles||!this._unscopedContent)return;n&&this._checkDomForUnscopedTextContent();let i=this._explicitLines??this._inferLinesFromContent(),o=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",i===2),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",i===3),this._hasUnscopedTextContent){let r=this._titles.length===0&&i===1;o.classList.toggle("mdc-list-item__primary-text",r),o.classList.toggle("mdc-list-item__secondary-text",!r)}else o.classList.remove("mdc-list-item__primary-text"),o.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let n=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(n+=1),n}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(n=>n.nodeType!==n.COMMENT_NODE).some(n=>!!(n.textContent&&n.textContent.trim()))}static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e,contentQueries:function(i,o,r){if(i&1&&No(r,XQe,4)(r,JG,4),i&2){let s;Ye(s=Qe())&&(o._avatars=s),Ye(s=Qe())&&(o._icons=s)}},hostVars:4,hostBindings:function(i,o){i&2&&(pt("aria-disabled",o.disabled)("disabled",o._isButtonElement&&o.disabled||null),be("mdc-list-item--disabled",o.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"}})}return e})();var Jme=(()=>{class e extends tJe{_lines;_titles;_meta;_unscopedContent;_itemText;get activated(){return this._activated}set activated(n){this._activated=Fi(n)}_activated=!1;_getAriaCurrent(){return this._hostElement.nodeName==="A"&&this._activated?"page":null}_hasBothLeadingAndTrailing(){return this._meta.length!==0&&(this._avatars.length!==0||this._icons.length!==0)}static \u0275fac=(()=>{let n;return function(o){return(n||(n=gn(e)))(o||e)}})();static \u0275cmp=pe({type:e,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(i,o,r){if(i&1&&No(r,QQe,5)(r,QG,5)(r,JQe,5),i&2){let s;Ye(s=Qe())&&(o._lines=s),Ye(s=Qe())&&(o._titles=s),Ye(s=Qe())&&(o._meta=s)}},viewQuery:function(i,o){if(i&1&&bn(WQe,5)(qQe,5),i&2){let r;Ye(r=Qe())&&(o._unscopedContent=r.first),Ye(r=Qe())&&(o._itemText=r.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:13,hostBindings:function(i,o){i&2&&(pt("aria-current",o._getAriaCurrent()),be("mdc-list-item--activated",o.activated)("mdc-list-item--with-leading-avatar",o._avatars.length!==0)("mdc-list-item--with-leading-icon",o._icons.length!==0)("mdc-list-item--with-trailing-meta",o._meta.length!==0)("mat-mdc-list-item-both-leading-and-trailing",o._hasBothLeadingAndTrailing())("_mat-animation-noopable",o._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],features:[Tt],ngContentSelectors:ZQe,decls:10,vars:0,consts:[["unscopedContent",""],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],[1,"mat-focus-indicator"]],template:function(i,o){if(i&1){let r=Ge();yn(KQe),st(0),M(1,"span",1),st(2,1),st(3,2),M(4,"span",2,0),Q("cdkObserveContent",function(){return J(r),X(o._updateItemLines(!0))}),st(6,3),R()(),st(7,4),st(8,5),Ae(9,"div",3)}},dependencies:[sfe],encapsulation:2,changeDetection:0})}return e})();var Xme=(()=>{class e extends YG{_isNonInteractive=!1;static \u0275fac=(()=>{let n;return function(o){return(n||(n=gn(e)))(o||e)}})();static \u0275cmp=pe({type:e,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-mdc-nav-list","mat-mdc-list-base","mdc-list"],exportAs:["matNavList"],features:[kt([{provide:YG,useExisting:e}]),Tt],ngContentSelectors:GQe,decls:1,vars:0,template:function(i,o){i&1&&(yn(),st(0))},styles:[UQe],encapsulation:2,changeDetection:0})}return e})();var MA=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({imports:[U_,ft,cc,IA,Zme]})}return e})();function iJe(e,t){if(e&1&&(M(0,"mat-list-item")(1,"mat-icon",8),N(2),R(),M(3,"div",9),N(4),R()()),e&2){let n=t.$implicit;P(2),nt(n.icon),P(2),nt(n.title)}}function oJe(e,t){if(e&1&&(M(0,"mat-nav-list"),an(1,iJe,5,2,"mat-list-item",null,qn),R()),e&2){let n=A();P(),ln(n.chats)}}var RA=class e{constructor(t){this.mcpService=t}chats=[];ngOnInit(){}static \u0275fac=function(n){return new(n||e)(ye(Mo))};static \u0275cmp=pe({type:e,selectors:[["app-sidebar"]],features:[kt([Mo])],decls:15,vars:1,consts:[[1,"sidebar-container"],[1,"sidebar-header"],["mat-button","",1,"new-chat-button"],[1,"sidebar-scrollable"],[1,"sidebar-footer"],["mat-button","",1,"user-button"],[1,"user-icon"],[1,"username"],["matListItemIcon",""],["matListItemTitle",""]],template:function(n,i){n&1&&(M(0,"div",0)(1,"div",1)(2,"button",2)(3,"mat-icon"),N(4,"add"),R(),M(5,"span"),N(6,"New chat"),R()()(),M(7,"div",3),K(8,oJe,3,0,"mat-nav-list"),R(),M(9,"div",4)(10,"button",5)(11,"mat-icon",6),N(12,"account_circle"),R(),M(13,"span",7),N(14,"Abhilash Poshanagari"),R()()()()),n&2&&(P(8),Z(i.chats.length>0?8:-1))},dependencies:[Kme,ga,ma,Xme,MA,Jme,JG,QG],styles:[".sidebar-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.sidebar-header[_ngcontent-%COMP%]{padding:16px 20px;flex-shrink:0;border-bottom:1px solid #f0f0f0}.new-chat-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;width:100%;text-align:left;background-color:#f0f0f0;border-radius:8px;padding:8px 12px;color:#333;font-size:.9rem;transition:all .2s}.new-chat-button[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.sidebar-scrollable[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding-bottom:80px}mat-nav-list[_ngcontent-%COMP%]{padding-top:0}mat-list-item[_ngcontent-%COMP%]{border-radius:6px;margin:2px 12px;color:#555}mat-list-item[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.sidebar-footer[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;padding:12px 16px;background:#fff;border-top:1px solid #eee}.user-button[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;padding:8px;border-radius:6px;color:#333}.user-button[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.user-icon[_ngcontent-%COMP%]{color:#666;font-size:24px;width:24px;height:24px;margin-right:12px}.username[_ngcontent-%COMP%]{font-size:.9rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})};var AA=["*"],rJe=["content"],sJe=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],aJe=["mat-drawer","mat-drawer-content","*"];function lJe(e,t){if(e&1){let n=Ge();M(0,"div",1),Q("click",function(){J(n);let o=A();return X(o._onBackdropClicked())}),R()}if(e&2){let n=A();be("mat-drawer-shown",n._isShowingBackdrop())}}function cJe(e,t){e&1&&(M(0,"mat-drawer-content"),st(1,2),R())}var dJe=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],uJe=["mat-sidenav","mat-sidenav-content","*"];function hJe(e,t){if(e&1){let n=Ge();M(0,"div",1),Q("click",function(){J(n);let o=A();return X(o._onBackdropClicked())}),R()}if(e&2){let n=A();be("mat-drawer-shown",n._isShowingBackdrop())}}function pJe(e,t){e&1&&(M(0,"mat-sidenav-content"),st(1,2),R())}var fJe=`.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color, var(--mat-sys-on-background));background-color:var(--mat-sidenav-content-background-color, var(--mat-sys-background));box-sizing:border-box;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color, color-mix(in srgb, var(--mat-sys-neutral-variant20) 40%, transparent))}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}@media(forced-colors: active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-content.mat-drawer-content-hidden{opacity:0}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color, var(--mat-sys-on-surface-variant));box-shadow:var(--mat-sidenav-container-elevation-shadow, none);background-color:var(--mat-sidenav-container-background-color, var(--mat-sys-surface));border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));width:var(--mat-sidenav-container-width, 360px);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}@media(forced-colors: active){.mat-drawer,[dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}}@media(forced-colors: active){[dir=rtl] .mat-drawer,.mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-transition .mat-drawer{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating){visibility:hidden;box-shadow:none}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating) .mat-drawer-inner-container{display:none}.mat-drawer.mat-drawer-opened.mat-drawer-opened{transform:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto}.mat-sidenav-fixed{position:fixed}
`;var mJe=new q("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:gJe}),t7=new q("MAT_DRAWER_CONTAINER");function gJe(){return!1}var TA=(()=>{class e extends Of{_platform=k(tn);_changeDetectorRef=k(dn);_container=k(e7);constructor(){let n=k(Oe),i=k(pa),o=k(me);super(n,i,o)}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}_shouldBeHidden(){if(this._platform.isBrowser)return!1;let{start:n,end:i}=this._container;return n!=null&&n.mode!=="over"&&n.opened||i!=null&&i.mode!=="over"&&i.opened}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=pe({type:e,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:6,hostBindings:function(i,o){i&2&&(Di("margin-left",o._container._contentMargins.left,"px")("margin-right",o._container._contentMargins.right,"px"),be("mat-drawer-content-hidden",o._shouldBeHidden()))},features:[kt([{provide:Of,useExisting:e}]),Tt],ngContentSelectors:AA,decls:1,vars:0,template:function(i,o){i&1&&(yn(),st(0))},encapsulation:2,changeDetection:0})}return e})(),XG=(()=>{class e{_elementRef=k(Oe);_focusTrapFactory=k(tS);_focusMonitor=k(os);_platform=k(tn);_ngZone=k(me);_renderer=k(Pn);_interactivityChecker=k(Rf);_doc=k(Je);_container=k(t7,{optional:!0});_focusTrap=null;_elementFocusedBeforeDrawerWasOpened=null;_eventCleanups;_isAttached;_anchor;get position(){return this._position}set position(n){n=n==="end"?"end":"start",n!==this._position&&(this._isAttached&&this._updatePositionInParent(n),this._position=n,this.onPositionChanged.emit())}_position="start";get mode(){return this._mode}set mode(n){this._mode=n,this._updateFocusTrapState(),this._modeChanged.next()}_mode="over";get disableClose(){return this._disableClose}set disableClose(n){this._disableClose=Fi(n)}_disableClose=!1;get autoFocus(){let n=this._autoFocus;return n??(this.mode==="side"?"dialog":"first-tabbable")}set autoFocus(n){(n==="true"||n==="false"||n==null)&&(n=Fi(n)),this._autoFocus=n}_autoFocus;get opened(){return this._opened()}set opened(n){this.toggle(Fi(n))}_opened=$t(!1);_openedVia;_animationStarted=new ie;_animationEnd=new ie;openedChange=new V(!0);_openedStream=this.openedChange.pipe(zt(n=>n),tt(()=>{}));openedStart=this._animationStarted.pipe(zt(()=>this.opened),Am(void 0));_closedStream=this.openedChange.pipe(zt(n=>!n),tt(()=>{}));closedStart=this._animationStarted.pipe(zt(()=>!this.opened),Am(void 0));_destroyed=new ie;onPositionChanged=new V;_content;_modeChanged=new ie;_injector=k(Ke);_changeDetectorRef=k(dn);constructor(){this.openedChange.pipe(Vt(this._destroyed)).subscribe(n=>{n?(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement,this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{let n=this._elementRef.nativeElement;Th(n,"keydown").pipe(zt(i=>i.keyCode===27&&!this.disableClose&&!rs(i)),Vt(this._destroyed)).subscribe(i=>this._ngZone.run(()=>{this.close(),i.stopPropagation(),i.preventDefault()})),this._eventCleanups=[this._renderer.listen(n,"transitionrun",this._handleTransitionEvent),this._renderer.listen(n,"transitionend",this._handleTransitionEvent),this._renderer.listen(n,"transitioncancel",this._handleTransitionEvent)]}),this._animationEnd.subscribe(()=>{this.openedChange.emit(this.opened)})}_forceFocus(n,i){this._interactivityChecker.isFocusable(n)||(n.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let o=()=>{r(),s(),n.removeAttribute("tabindex")},r=this._renderer.listen(n,"blur",o),s=this._renderer.listen(n,"mousedown",o)})),n.focus(i)}_focusByCssSelector(n,i){let o=this._elementRef.nativeElement.querySelector(n);o&&this._forceFocus(o,i)}_takeFocus(){if(!this._focusTrap)return;let n=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":ai(()=>{!this._focusTrap.focusInitialElement()&&typeof n.focus=="function"&&n.focus()},{injector:this._injector});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus);break}}_restoreFocus(n){this.autoFocus!=="dialog"&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,n):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){let n=this._doc.activeElement;return!!n&&this._elementRef.nativeElement.contains(n)}ngAfterViewInit(){this._isAttached=!0,this._position==="end"&&this._updatePositionInParent("end"),this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState())}ngOnDestroy(){this._eventCleanups.forEach(n=>n()),this._focusTrap?.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(n){return this.toggle(!0,n)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(n=!this.opened,i){n&&i&&(this._openedVia=i);let o=this._setOpen(n,!n&&this._isFocusWithinDrawer(),this._openedVia||"program");return n||(this._openedVia=null),o}_setOpen(n,i,o){return n===this.opened?Promise.resolve(n?"open":"close"):(this._opened.set(n),this._container?._transitionsEnabled?this._setIsAnimating(!0):setTimeout(()=>{this._animationStarted.next(),this._animationEnd.next()}),this._elementRef.nativeElement.classList.toggle("mat-drawer-opened",n),!n&&i&&this._restoreFocus(o),this._changeDetectorRef.markForCheck(),this._updateFocusTrapState(),new Promise(r=>{this.openedChange.pipe(ri(1)).subscribe(s=>r(s?"open":"close"))}))}_setIsAnimating(n){this._elementRef.nativeElement.classList.toggle("mat-drawer-animating",n)}_getWidth(){return this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop&&this.opened)}_updatePositionInParent(n){if(!this._platform.isBrowser)return;let i=this._elementRef.nativeElement,o=i.parentNode;n==="end"?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),o.insertBefore(this._anchor,i)),o.appendChild(i)):this._anchor&&this._anchor.parentNode.insertBefore(i,this._anchor)}_handleTransitionEvent=n=>{let i=this._elementRef.nativeElement;n.target===i&&this._ngZone.run(()=>{n.type==="transitionrun"?this._animationStarted.next(n):(n.type==="transitionend"&&this._setIsAnimating(!1),this._animationEnd.next(n))})};static \u0275fac=function(i){return new(i||e)};static \u0275cmp=pe({type:e,selectors:[["mat-drawer"]],viewQuery:function(i,o){if(i&1&&bn(rJe,5),i&2){let r;Ye(r=Qe())&&(o._content=r.first)}},hostAttrs:[1,"mat-drawer"],hostVars:12,hostBindings:function(i,o){i&2&&(pt("align",null)("tabIndex",o.mode!=="side"?"-1":null),Di("visibility",!o._container&&!o.opened?"hidden":null),be("mat-drawer-end",o.position==="end")("mat-drawer-over",o.mode==="over")("mat-drawer-push",o.mode==="push")("mat-drawer-side",o.mode==="side"))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:AA,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(i,o){i&1&&(yn(),M(0,"div",1,0),st(2),R())},dependencies:[Of],encapsulation:2,changeDetection:0})}return e})(),e7=(()=>{class e{_dir=k(wo,{optional:!0});_element=k(Oe);_ngZone=k(me);_changeDetectorRef=k(dn);_animationDisabled=fi();_transitionsEnabled=!1;_allDrawers;_drawers=new Ws;_content;_userContent;get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(n){this._autosize=Fi(n)}_autosize=k(mJe);get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(n){this._backdropOverride=n==null?null:Fi(n)}_backdropOverride;backdropClick=new V;_start;_end;_left;_right;_destroyed=new ie;_doCheckSubject=new ie;_contentMargins={left:null,right:null};_contentMarginChanges=new ie;get scrollable(){return this._userContent||this._content}_injector=k(Ke);constructor(){let n=k(tn),i=k(fa);this._dir?.change.pipe(Vt(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),i.change().pipe(Vt(this._destroyed)).subscribe(()=>this.updateContentMargins()),!this._animationDisabled&&n.isBrowser&&this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{this._element.nativeElement.classList.add("mat-drawer-transition"),this._transitionsEnabled=!0},200)})}ngAfterContentInit(){this._allDrawers.changes.pipe(Pi(this._allDrawers),Vt(this._destroyed)).subscribe(n=>{this._drawers.reset(n.filter(i=>!i._container||i._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Pi(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(n=>{this._watchDrawerToggle(n),this._watchDrawerPosition(n),this._watchDrawerMode(n)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe($s(10),Vt(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(n=>n.open())}close(){this._drawers.forEach(n=>n.close())}updateContentMargins(){let n=0,i=0;if(this._left&&this._left.opened){if(this._left.mode=="side")n+=this._left._getWidth();else if(this._left.mode=="push"){let o=this._left._getWidth();n+=o,i-=o}}if(this._right&&this._right.opened){if(this._right.mode=="side")i+=this._right._getWidth();else if(this._right.mode=="push"){let o=this._right._getWidth();i+=o,n-=o}}n=n||null,i=i||null,(n!==this._contentMargins.left||i!==this._contentMargins.right)&&(this._contentMargins={left:n,right:i},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(n){n._animationStarted.pipe(Vt(this._drawers.changes)).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),n.mode!=="side"&&n.openedChange.pipe(Vt(this._drawers.changes)).subscribe(()=>this._setContainerClass(n.opened))}_watchDrawerPosition(n){n.onPositionChanged.pipe(Vt(this._drawers.changes)).subscribe(()=>{ai({read:()=>this._validateDrawers()},{injector:this._injector})})}_watchDrawerMode(n){n._modeChanged.pipe(Vt(Ni(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(n){let i=this._element.nativeElement.classList,o="mat-drawer-container-has-open";n?i.add(o):i.remove(o)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(n=>{n.position=="end"?(this._end!=null,this._end=n):(this._start!=null,this._start=n)}),this._right=this._left=null,this._dir&&this._dir.value==="rtl"?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&this._start.mode!="over"||this._isDrawerOpen(this._end)&&this._end.mode!="over"}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(n=>n&&!n.disableClose&&this._drawerHasBackdrop(n)).forEach(n=>n._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(n){return n!=null&&n.opened}_drawerHasBackdrop(n){return this._backdropOverride==null?!!n&&n.mode!=="side":this._backdropOverride}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=pe({type:e,selectors:[["mat-drawer-container"]],contentQueries:function(i,o,r){if(i&1&&No(r,TA,5)(r,XG,5),i&2){let s;Ye(s=Qe())&&(o._content=s.first),Ye(s=Qe())&&(o._allDrawers=s)}},viewQuery:function(i,o){if(i&1&&bn(TA,5),i&2){let r;Ye(r=Qe())&&(o._userContent=r.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(i,o){i&2&&be("mat-drawer-container-explicit-backdrop",o._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[kt([{provide:t7,useExisting:e}])],ngContentSelectors:aJe,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(i,o){i&1&&(yn(sJe),K(0,lJe,1,2,"div",0),st(1),st(2,1),K(3,cJe,2,0,"mat-drawer-content")),i&2&&(Z(o.hasBackdrop?0:-1),P(3),Z(o._content?-1:3))},dependencies:[TA],styles:[`.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color, var(--mat-sys-on-background));background-color:var(--mat-sidenav-content-background-color, var(--mat-sys-background));box-sizing:border-box;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color, color-mix(in srgb, var(--mat-sys-neutral-variant20) 40%, transparent))}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}@media(forced-colors: active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-content.mat-drawer-content-hidden{opacity:0}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color, var(--mat-sys-on-surface-variant));box-shadow:var(--mat-sidenav-container-elevation-shadow, none);background-color:var(--mat-sidenav-container-background-color, var(--mat-sys-surface));border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));width:var(--mat-sidenav-container-width, 360px);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}@media(forced-colors: active){.mat-drawer,[dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}}@media(forced-colors: active){[dir=rtl] .mat-drawer,.mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-transition .mat-drawer{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating){visibility:hidden;box-shadow:none}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating) .mat-drawer-inner-container{display:none}.mat-drawer.mat-drawer-opened.mat-drawer-opened{transform:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto}.mat-sidenav-fixed{position:fixed}
`],encapsulation:2,changeDetection:0})}return e})(),PA=(()=>{class e extends TA{static \u0275fac=(()=>{let n;return function(o){return(n||(n=gn(e)))(o||e)}})();static \u0275cmp=pe({type:e,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],features:[kt([{provide:Of,useExisting:e}]),Tt],ngContentSelectors:AA,decls:1,vars:0,template:function(i,o){i&1&&(yn(),st(0))},encapsulation:2,changeDetection:0})}return e})(),n7=(()=>{class e extends XG{get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(n){this._fixedInViewport=Fi(n)}_fixedInViewport=!1;get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(n){this._fixedTopGap=Ki(n)}_fixedTopGap=0;get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(n){this._fixedBottomGap=Ki(n)}_fixedBottomGap=0;static \u0275fac=(()=>{let n;return function(o){return(n||(n=gn(e)))(o||e)}})();static \u0275cmp=pe({type:e,selectors:[["mat-sidenav"]],hostAttrs:[1,"mat-drawer","mat-sidenav"],hostVars:16,hostBindings:function(i,o){i&2&&(pt("tabIndex",o.mode!=="side"?"-1":null)("align",null),Di("top",o.fixedInViewport?o.fixedTopGap:null,"px")("bottom",o.fixedInViewport?o.fixedBottomGap:null,"px"),be("mat-drawer-end",o.position==="end")("mat-drawer-over",o.mode==="over")("mat-drawer-push",o.mode==="push")("mat-drawer-side",o.mode==="side")("mat-sidenav-fixed",o.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[kt([{provide:XG,useExisting:e}]),Tt],ngContentSelectors:AA,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(i,o){i&1&&(yn(),M(0,"div",1,0),st(2),R())},dependencies:[Of],encapsulation:2,changeDetection:0})}return e})(),ege=(()=>{class e extends e7{_allDrawers=void 0;_content=void 0;static \u0275fac=(()=>{let n;return function(o){return(n||(n=gn(e)))(o||e)}})();static \u0275cmp=pe({type:e,selectors:[["mat-sidenav-container"]],contentQueries:function(i,o,r){if(i&1&&No(r,PA,5)(r,n7,5),i&2){let s;Ye(s=Qe())&&(o._content=s.first),Ye(s=Qe())&&(o._allDrawers=s)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(i,o){i&2&&be("mat-drawer-container-explicit-backdrop",o._backdropOverride)},exportAs:["matSidenavContainer"],features:[kt([{provide:t7,useExisting:e},{provide:e7,useExisting:e}]),Tt],ngContentSelectors:uJe,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(i,o){i&1&&(yn(dJe),K(0,hJe,1,2,"div",0),st(1),st(2,1),K(3,pJe,2,0,"mat-sidenav-content")),i&2&&(Z(o.hasBackdrop?0:-1),P(3),Z(o._content?-1:3))},dependencies:[PA],styles:[fJe],encapsulation:2,changeDetection:0})}return e})(),tge=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({imports:[ft,ss,ss,ft]})}return e})();var _Je=["mat-icon-button",""],yJe=["*"],bJe=new q("MAT_BUTTON_CONFIG");function nge(e){return e==null?void 0:$r(e)}var i7=(()=>{class e{_elementRef=k(Oe);_ngZone=k(me);_animationsDisabled=fi();_config=k(bJe,{optional:!0});_focusMonitor=k(os);_cleanupClick;_renderer=k(Pn);_rippleLoader=k(tA);_isAnchor;_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(n){this._disableRipple=n,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(n){this._disabled=n,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;tabIndex;set _tabindex(n){this.tabIndex=n}constructor(){k(ni).load(nl);let n=this._elementRef.nativeElement;this._isAnchor=n.tagName==="A",this.disabledInteractive=this._config?.disabledInteractive??!1,this.color=this._config?.color??null,this._rippleLoader?.configureRipple(n,{className:"mat-mdc-button-ripple"})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0),this._isAnchor&&this._setupAsAnchor()}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(n="program",i){n?this._focusMonitor.focusVia(this._elementRef.nativeElement,n,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this._isAnchor?this.disabled||null:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}_getTabIndex(){return this._isAnchor?this.disabled&&!this.disabledInteractive?-1:this.tabIndex:this.tabIndex}_setupAsAnchor(){this._cleanupClick=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"click",n=>{this.disabled&&(n.preventDefault(),n.stopImmediatePropagation())}))}static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e,hostAttrs:[1,"mat-mdc-button-base"],hostVars:13,hostBindings:function(i,o){i&2&&(pt("disabled",o._getDisabledAttribute())("aria-disabled",o._getAriaDisabled())("tabindex",o._getTabIndex()),ki(o.color?"mat-"+o.color:""),be("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("mat-unthemed",!o.color)("_mat-animation-noopable",o._animationsDisabled))},inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",$],disabled:[2,"disabled","disabled",$],ariaDisabled:[2,"aria-disabled","ariaDisabled",$],disabledInteractive:[2,"disabledInteractive","disabledInteractive",$],tabIndex:[2,"tabIndex","tabIndex",nge],_tabindex:[2,"tabindex","_tabindex",nge]}})}return e})(),Bf=(()=>{class e extends i7{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=pe({type:e,selectors:[["button","mat-icon-button",""],["a","mat-icon-button",""],["button","matIconButton",""],["a","matIconButton",""]],hostAttrs:[1,"mdc-icon-button","mat-mdc-icon-button"],exportAs:["matButton","matAnchor"],features:[Tt],attrs:_Je,ngContentSelectors:yJe,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,o){i&1&&(yn(),go(0,"span",0),st(1),go(2,"span",1)(3,"span",2))},styles:[`.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%));flex-shrink:0;text-align:center;width:var(--mat-icon-button-state-layer-size, 40px);height:var(--mat-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mat-icon-button-state-layer-size, 40px) - var(--mat-icon-button-icon-size, 24px)) / 2);font-size:var(--mat-icon-button-icon-size, 24px);color:var(--mat-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-icon-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-icon-button-touch-target-size, 48px);display:var(--mat-icon-button-touch-target-display, block);left:50%;width:var(--mat-icon-button-touch-target-size, 48px);transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mat-icon-button-icon-size, 24px);height:var(--mat-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%))}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return e})();var CJe=["matButton",""],wJe=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],xJe=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var ige=new Map([["text",["mat-mdc-button"]],["filled",["mdc-button--unelevated","mat-mdc-unelevated-button"]],["elevated",["mdc-button--raised","mat-mdc-raised-button"]],["outlined",["mdc-button--outlined","mat-mdc-outlined-button"]],["tonal",["mat-tonal-button"]]]),OA=(()=>{class e extends i7{get appearance(){return this._appearance}set appearance(n){this.setAppearance(n||this._config?.defaultAppearance||"text")}_appearance=null;constructor(){super();let n=SJe(this._elementRef.nativeElement);n&&this.setAppearance(n)}setAppearance(n){if(n===this._appearance)return;let i=this._elementRef.nativeElement.classList,o=this._appearance?ige.get(this._appearance):null,r=ige.get(n);o&&i.remove(...o),i.add(...r),this._appearance=n}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=pe({type:e,selectors:[["button","matButton",""],["a","matButton",""],["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""],["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostAttrs:[1,"mdc-button"],inputs:{appearance:[0,"matButton","appearance"]},exportAs:["matButton","matAnchor"],features:[Tt],attrs:CJe,ngContentSelectors:xJe,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,o){i&1&&(yn(wJe),go(0,"span",0),st(1),Ei(2,"span",1),st(3,1),no(),st(4,2),go(5,"span",2)(6,"span",3)),i&2&&be("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab)},styles:[`.mat-mdc-button-base{text-decoration:none}.mat-mdc-button-base .mat-icon{min-height:fit-content;flex-shrink:0}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-button-text-horizontal-padding, 12px);height:var(--mat-button-text-container-height, 40px);font-family:var(--mat-button-text-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-text-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-text-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-text-label-text-transform);font-weight:var(--mat-button-text-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mat-button-text-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mat-button-text-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-text-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-button-text-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-button-text-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-text-touch-target-size, 48px);display:var(--mat-button-text-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-filled-container-height, 40px);font-family:var(--mat-button-filled-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-filled-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-filled-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-filled-label-text-transform);font-weight:var(--mat-button-filled-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-filled-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-button-filled-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-filled-touch-target-size, 48px);display:var(--mat-button-filled-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mat-button-filled-label-text-color, var(--mat-sys-on-primary));background-color:var(--mat-button-filled-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mat-button-filled-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mat-button-protected-container-elevation-shadow, var(--mat-sys-level1));height:var(--mat-button-protected-container-height, 40px);font-family:var(--mat-button-protected-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-protected-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-protected-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-protected-label-text-transform);font-weight:var(--mat-button-protected-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-protected-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-button-protected-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-protected-touch-target-size, 48px);display:var(--mat-button-protected-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-raised-button:not(:disabled){color:var(--mat-button-protected-label-text-color, var(--mat-sys-primary));background-color:var(--mat-button-protected-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mat-button-protected-container-shape, var(--mat-sys-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mat-button-protected-hover-container-elevation-shadow, var(--mat-sys-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mat-button-protected-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mat-button-protected-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-protected-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-protected-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mat-button-protected-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-outlined-container-height, 40px);font-family:var(--mat-button-outlined-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-outlined-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-outlined-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-outlined-label-text-transform);font-weight:var(--mat-button-outlined-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mat-button-outlined-container-shape, var(--mat-sys-corner-full));border-width:var(--mat-button-outlined-outline-width, 1px);padding:0 var(--mat-button-outlined-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-button-outlined-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-outlined-touch-target-size, 48px);display:var(--mat-button-outlined-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-outlined-button:not(:disabled){color:var(--mat-button-outlined-label-text-color, var(--mat-sys-primary));border-color:var(--mat-button-outlined-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mat-button-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-tonal-container-height, 40px);font-family:var(--mat-button-tonal-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-tonal-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-tonal-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-tonal-label-text-transform);font-weight:var(--mat-button-tonal-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-tonal-horizontal-padding, 24px)}.mat-tonal-button:not(:disabled){color:var(--mat-button-tonal-label-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-button-tonal-container-color, var(--mat-sys-secondary-container))}.mat-tonal-button,.mat-tonal-button .mdc-button__ripple{border-radius:var(--mat-button-tonal-container-shape, var(--mat-sys-corner-full))}.mat-tonal-button[disabled],.mat-tonal-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-tonal-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-tonal-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-tonal-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}[dir=rtl] .mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}.mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}[dir=rtl] .mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}.mat-tonal-button .mat-ripple-element{background-color:var(--mat-button-tonal-ripple-color, color-mix(in srgb, var(--mat-sys-on-secondary-container) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-tonal-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-tonal-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-tonal-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-tonal-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-tonal-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-tonal-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-tonal-touch-target-size, 48px);display:var(--mat-button-tonal-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button,.mat-tonal-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon,.mat-tonal-button .mdc-button__label,.mat-tonal-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator,.mat-tonal-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-button:focus>.mat-focus-indicator::before,.mat-mdc-unelevated-button:focus>.mat-focus-indicator::before,.mat-mdc-raised-button:focus>.mat-focus-indicator::before,.mat-mdc-outlined-button:focus>.mat-focus-indicator::before,.mat-tonal-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable,.mat-tonal-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon,.mat-tonal-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-tonal-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return e})();function SJe(e){return e.hasAttribute("mat-raised-button")?"elevated":e.hasAttribute("mat-stroked-button")?"outlined":e.hasAttribute("mat-flat-button")?"filled":e.hasAttribute("mat-button")?"text":null}var by=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({imports:[ft,cc,ft]})}return e})();var oge=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({imports:[ft,ft]})}return e})();function EJe(e,t){}var hh=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;disableAnimations=!1;providers;container;templateContext};var s7=(()=>{class e extends Y_{_elementRef=k(Oe);_focusTrapFactory=k(tS);_config;_interactivityChecker=k(Rf);_ngZone=k(me);_focusMonitor=k(os);_renderer=k(Pn);_changeDetectorRef=k(dn);_injector=k(Ke);_platform=k(tn);_document=k(Je);_portalOutlet;_focusTrapped=new ie;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_isDestroyed=!1;constructor(){super(),this._config=k(hh,{optional:!0})||new hh,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(n){this._ariaLabelledByQueue.push(n),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(n){let i=this._ariaLabelledByQueue.indexOf(n);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._focusTrapped.complete(),this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(n){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachComponentPortal(n);return this._contentAttached(),i}attachTemplatePortal(n){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachTemplatePortal(n);return this._contentAttached(),i}attachDomPortal=n=>{this._portalOutlet.hasAttached();let i=this._portalOutlet.attachDomPortal(n);return this._contentAttached(),i};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(n,i){this._interactivityChecker.isFocusable(n)||(n.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let o=()=>{r(),s(),n.removeAttribute("tabindex")},r=this._renderer.listen(n,"blur",o),s=this._renderer.listen(n,"mousedown",o)})),n.focus(i)}_focusByCssSelector(n,i){let o=this._elementRef.nativeElement.querySelector(n);o&&this._forceFocus(o,i)}_trapFocus(n){this._isDestroyed||ai(()=>{let i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus(n);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(n)||this._focusDialogContainer(n);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',n);break;default:this._focusByCssSelector(this._config.autoFocus,n);break}this._focusTrapped.next()},{injector:this._injector})}_restoreFocus(){let n=this._config.restoreFocus,i=null;if(typeof n=="string"?i=this._document.querySelector(n):typeof n=="boolean"?i=n?this._elementFocusedBeforeDialogWasOpened:null:n&&(i=n),this._config.restoreFocus&&i&&typeof i.focus=="function"){let o=G_(),r=this._elementRef.nativeElement;(!o||o===this._document.body||o===r||r.contains(o))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(n){this._elementRef.nativeElement.focus?.(n)}_containsFocus(){let n=this._elementRef.nativeElement,i=G_();return n===i||n.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=G_()))}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=pe({type:e,selectors:[["cdk-dialog-container"]],viewQuery:function(i,o){if(i&1&&bn(sS,7),i&2){let r;Ye(r=Qe())&&(o._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,o){i&2&&pt("id",o._config.id||null)("role",o._config.role)("aria-modal",o._config.ariaModal)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null)},features:[Tt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,o){i&1&&Si(0,EJe,0,0,"ng-template",0)},dependencies:[sS],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return e})(),gS=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new ie;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(t,n){this.overlayRef=t,this.config=n,this.disableClose=n.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!rs(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{!this.disableClose&&this._canClose()?this.close(void 0,{focusOrigin:"mouse"}):this.containerInstance._recaptureFocus?.()}),this._detachSubscription=t.detachments().subscribe(()=>{n.closeOnOverlayDetachments!==!1&&this.close()})}close(t,n){if(this._canClose(t)){let i=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(t),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",n=""){return this.overlayRef.updateSize({width:t,height:n}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}_canClose(t){let n=this.config;return!!this.containerInstance&&(!n.closePredicate||n.closePredicate(t,n,this.componentInstance))}},DJe=new q("DialogScrollStrategy",{providedIn:"root",factory:()=>{let e=k(Ke);return()=>J_(e)}}),kJe=new q("DialogData"),IJe=new q("DefaultDialogConfig");function MJe(e){let t=$t(e),n=new V;return{valueSignal:t,get value(){return t()},change:n,ngOnDestroy(){n.complete()}}}var rge=(()=>{class e{_injector=k(Ke);_defaultOptions=k(IJe,{optional:!0});_parentDialog=k(e,{optional:!0,skipSelf:!0});_overlayContainer=k(WP);_idGenerator=k(Zi);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new ie;_afterOpenedAtThisLevel=new ie;_ariaHiddenElements=new Map;_scrollStrategy=k(DJe);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=xc(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Pi(void 0)));constructor(){}open(n,i){let o=this._defaultOptions||new hh;i=g(g({},o),i),i.id=i.id||this._idGenerator.getId("cdk-dialog-"),i.id&&this.getDialogById(i.id);let r=this._getOverlayConfig(i),s=dh(this._injector,r),a=new gS(s,i),l=this._attachContainer(s,a,i);if(a.containerInstance=l,!this.openDialogs.length){let c=this._overlayContainer.getContainerElement();l._focusTrapped?l._focusTrapped.pipe(ri(1)).subscribe(()=>{this._hideNonDialogContentFromAssistiveTechnology(c)}):this._hideNonDialogContentFromAssistiveTechnology(c)}return this._attachDialogContent(n,a,l,i),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){r7(this.openDialogs,n=>n.close())}getDialogById(n){return this.openDialogs.find(i=>i.id===n)}ngOnDestroy(){r7(this._openDialogsAtThisLevel,n=>{n.config.closeOnDestroy===!1&&this._removeOpenDialog(n,!1)}),r7(this._openDialogsAtThisLevel,n=>n.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(n){let i=new ch({positionStrategy:n.positionStrategy||ey().centerHorizontally().centerVertically(),scrollStrategy:n.scrollStrategy||this._scrollStrategy(),panelClass:n.panelClass,hasBackdrop:n.hasBackdrop,direction:n.direction,minWidth:n.minWidth,minHeight:n.minHeight,maxWidth:n.maxWidth,maxHeight:n.maxHeight,width:n.width,height:n.height,disposeOnNavigation:n.closeOnNavigation,disableAnimations:n.disableAnimations});return n.backdropClass&&(i.backdropClass=n.backdropClass),i}_attachContainer(n,i,o){let r=o.injector||o.viewContainerRef?.injector,s=[{provide:hh,useValue:o},{provide:gS,useValue:i},{provide:Q_,useValue:n}],a;o.container?typeof o.container=="function"?a=o.container:(a=o.container.type,s.push(...o.container.providers(o))):a=s7;let l=new sh(a,o.viewContainerRef,Ke.create({parent:r||this._injector,providers:s}));return n.attach(l).instance}_attachDialogContent(n,i,o,r){if(n instanceof xr){let s=this._createInjector(r,i,o,void 0),a={$implicit:r.data,dialogRef:i};r.templateContext&&(a=g(g({},a),typeof r.templateContext=="function"?r.templateContext():r.templateContext)),o.attachTemplatePortal(new ah(n,null,a,s))}else{let s=this._createInjector(r,i,o,this._injector),a=o.attachComponentPortal(new sh(n,r.viewContainerRef,s));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(n,i,o,r){let s=n.injector||n.viewContainerRef?.injector,a=[{provide:kJe,useValue:n.data},{provide:gS,useValue:i}];return n.providers&&(typeof n.providers=="function"?a.push(...n.providers(i,n,o)):a.push(...n.providers)),n.direction&&(!s||!s.get(wo,null,{optional:!0}))&&a.push({provide:wo,useValue:MJe(n.direction)}),Ke.create({parent:s||r,providers:a})}_removeOpenDialog(n,i){let o=this.openDialogs.indexOf(n);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,s)=>{r?s.setAttribute("aria-hidden",r):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(n){if(n.parentElement){let i=n.parentElement.children;for(let o=i.length-1;o>-1;o--){let r=i[o];r!==n&&r.nodeName!=="SCRIPT"&&r.nodeName!=="STYLE"&&!r.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let n=this._parentDialog;return n?n._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function r7(e,t){let n=e.length;for(;n--;)t(e[n])}function RJe(e,t){}var _S=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;enterAnimationDuration;exitAnimationDuration},a7="mdc-dialog--open",sge="mdc-dialog--opening",age="mdc-dialog--closing",TJe=150,PJe=75,dge=(()=>{class e extends s7{_animationStateChanged=new V;_animationsEnabled=!fi();_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?cge(this._config.enterAnimationDuration)??TJe:0;_exitAnimationDuration=this._animationsEnabled?cge(this._config.exitAnimationDuration)??PJe:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(lge,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(sge,a7)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(a7),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(a7),this._animationsEnabled?(this._hostElement.style.setProperty(lge,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(age)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(n){this._actionSectionCount+=n,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(sge,age)}_waitForAnimationToComplete(n,i){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,n)}_requestAnimationFrame(n){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(n):n()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(n){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:n})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(n){let i=super.attachComponentPortal(n);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static \u0275fac=(()=>{let n;return function(o){return(n||(n=gn(e)))(o||e)}})();static \u0275cmp=pe({type:e,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(i,o){i&2&&(nr("id",o._config.id),pt("aria-modal",o._config.ariaModal)("role",o._config.role)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null),be("_mat-animation-noopable",!o._animationsEnabled)("mat-mdc-dialog-container-with-actions",o._actionSectionCount>0))},features:[Tt],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,o){i&1&&(M(0,"div",0)(1,"div",1),Si(2,RJe,0,0,"ng-template",2),R()())},dependencies:[sS],styles:[`.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mat-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mat-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mat-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mat-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mat-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mat-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mat-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mat-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mat-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mat-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mat-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mat-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mat-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;box-sizing:border-box;min-height:52px;margin:0;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}
`],encapsulation:2})}return e})(),lge="--mat-dialog-transition-duration";function cge(e){return e==null?null:typeof e=="number"?e:e.endsWith("ms")?Ki(e.substring(0,e.length-2)):e.endsWith("s")?Ki(e.substring(0,e.length-1))*1e3:e==="0"?0:null}var vS=(function(e){return e[e.OPEN=0]="OPEN",e[e.CLOSING=1]="CLOSING",e[e.CLOSED=2]="CLOSED",e})(vS||{}),Cy=class{_ref;_config;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new ie;_beforeClosed=new ie;_result;_closeFallbackTimeout;_state=vS.OPEN;_closeInteractionType;constructor(t,n,i){this._ref=t,this._config=n,this._containerInstance=i,this.disableClose=n.disableClose,this.id=t.id,t.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(zt(o=>o.state==="opened"),ri(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(zt(o=>o.state==="closed"),ri(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Ni(this.backdropClick(),this.keydownEvents().pipe(zt(o=>o.keyCode===27&&!this.disableClose&&!rs(o)))).subscribe(o=>{this.disableClose||(o.preventDefault(),uge(this,o.type==="keydown"?"keyboard":"mouse"))})}close(t){let n=this._config.closePredicate;n&&!n(t,this._config,this.componentInstance)||(this._result=t,this._containerInstance._animationStateChanged.pipe(zt(i=>i.state==="closing"),ri(1)).subscribe(i=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),i.totalTime+100)}),this._state=vS.CLOSING,this._containerInstance._startExitAnimation())}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let n=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?n.left(t.left):n.right(t.right):n.centerHorizontally(),t&&(t.top||t.bottom)?t.top?n.top(t.top):n.bottom(t.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",n=""){return this._ref.updateSize(t,n),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=vS.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function uge(e,t,n){return e._closeInteractionType=t,e.close(n)}var FA=new q("MatMdcDialogData"),hge=new q("mat-mdc-dialog-default-options"),pge=new q("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let e=k(Ke);return()=>J_(e)}}),yS=(()=>{class e{_defaultOptions=k(hge,{optional:!0});_scrollStrategy=k(pge);_parentDialog=k(e,{optional:!0,skipSelf:!0});_idGenerator=k(Zi);_injector=k(Ke);_dialog=k(rge);_animationsDisabled=fi();_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new ie;_afterOpenedAtThisLevel=new ie;dialogConfigClass=_S;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let n=this._parentDialog;return n?n._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=xc(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Pi(void 0)));constructor(){this._dialogRefConstructor=Cy,this._dialogContainerType=dge,this._dialogDataToken=FA}open(n,i){let o;i=g(g({},this._defaultOptions||new _S),i),i.id=i.id||this._idGenerator.getId("mat-mdc-dialog-"),i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();let r=this._dialog.open(n,x(g({},i),{positionStrategy:ey(this._injector).centerHorizontally().centerVertically(),disableClose:!0,closePredicate:void 0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,disableAnimations:this._animationsDisabled||i.enterAnimationDuration?.toLocaleString()==="0"||i.exitAnimationDuration?.toString()==="0",container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:hh,useValue:i}]},templateContext:()=>({dialogRef:o}),providers:(s,a,l)=>(o=new this._dialogRefConstructor(s,i,l),o.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:o}])}));return o.componentRef=r.componentRef,o.componentInstance=r.componentInstance,this.openDialogs.push(o),this.afterOpened.next(o),o.afterClosed().subscribe(()=>{let s=this.openDialogs.indexOf(o);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||this._getAfterAllClosed().next())}),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(n){return this.openDialogs.find(i=>i.id===n)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(n){let i=n.length;for(;i--;)n[i].close()}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function OJe(e,t){if(e&1){let n=Ge();M(0,"input",9),or("ngModelChange",function(o){J(n);let r=A();return Sr(r.server,o)||(r.server=o),X(o)}),R()}if(e&2){let n=A();ir("ngModel",n.server),le("placeholder",n.data.placeholder)}}function FJe(e,t){if(e&1){let n=Ge();M(0,"input",10),or("ngModelChange",function(o){J(n);let r=A();return Sr(r.server,o)||(r.server=o),X(o)}),R()}if(e&2){let n=A();ir("ngModel",n.server),le("placeholder",n.data.placeholder)}}function LJe(e,t){if(e&1&&(M(0,"p",5),N(1),R()),e&2){let n=A();P(),qe(" ",n.server)}}function NJe(e,t){if(e&1&&(M(0,"p",5),N(1),R()),e&2){let n=A();P(),qe(" ",n.errorMessage)}}var LA=class e{constructor(t,n){this.dialogRef=t;this.data=n}server="";page="";errorMessage="";ngOnInit(){this.server=this.data.domain.trim(),this.page=this.data.page}saveDomain(){this.server.trim()?(this.dialogRef.close({page:this.page,server:this.server}),this.errorMessage=""):this.errorMessage="Please enter a valid"}validateDomain(t){return/^(http?:\/\/)(([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}|(\d{1,3}(\.\d{1,3}){3}))(:\d+)?(\/.*)?$/.test(t)}close(){this.dialogRef.close({page:this.page,server:""})}static \u0275fac=function(n){return new(n||e)(ye(Cy),ye(FA))};static \u0275cmp=pe({type:e,selectors:[["app-domain-dialog"]],decls:15,vars:7,consts:[[1,"dialog-container"],[1,"input-container"],[1,"input-label"],["matInput","","type","password",1,"input-field",3,"ngModel","placeholder"],["matInput","","type","text",1,"input-field",3,"ngModel","placeholder"],[1,"error-message"],[1,"button-group"],[1,"cancel-btn",3,"click"],[1,"save-btn",3,"click"],["matInput","","type","password",1,"input-field",3,"ngModelChange","ngModel","placeholder"],["matInput","","type","text",1,"input-field",3,"ngModelChange","ngModel","placeholder"]],template:function(n,i){n&1&&(M(0,"div",0)(1,"h2"),N(2),R(),M(3,"div",1)(4,"label",2),N(5),R(),K(6,OJe,1,2,"input",3)(7,FJe,1,2,"input",4),R(),K(8,LJe,2,1,"p",5),K(9,NJe,2,1,"p",5),M(10,"div",6)(11,"button",7),Q("click",function(){return i.close()}),N(12),R(),M(13,"button",8),Q("click",function(){return i.saveDomain()}),N(14),R()()()),n&2&&(P(2),nt(i.data.title),P(3),nt(i.data.message),P(),Z(i.data.page==="open_ai_token"?6:7),P(2),Z(i.data.page!="open_ai_token"&&i.server?8:-1),P(),Z(i.errorMessage?9:-1),P(3),nt(i.data.cancelText),P(2),nt(i.data.confirmText))},dependencies:[is,da,ua,Md,va,ry,oy],styles:[".dialog-container[_ngcontent-%COMP%]{padding:30px;background:#fff;border-radius:20px;box-shadow:0 10px 30px #00000026;width:100%;max-width:440px;margin:auto}h2[_ngcontent-%COMP%]{font-size:1.6rem;color:#333;margin-bottom:25px;text-align:center;font-weight:600}.input-container[_ngcontent-%COMP%]{margin-bottom:20px}.input-field[_ngcontent-%COMP%]{width:90%;padding:16px 20px;font-size:1rem;border:2px solid #e0e0e0;border-radius:12px;transition:all .3s ease;background:#fafafa}.input-field[_ngcontent-%COMP%]:focus{outline:none;border-color:#1976d2;background:#fff;box-shadow:0 0 0 3px #1976d233}.input-label[_ngcontent-%COMP%]{display:block;text-align:left;margin-bottom:8px;font-weight:500;color:#555}.error-message[_ngcontent-%COMP%]{color:#e53935;font-size:.9rem;margin:12px 0;padding:8px 12px;background:#e5393514;border-radius:8px;border-left:3px solid #e53935;text-align:left}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:25px}button[_ngcontent-%COMP%]{min-width:100px;font-size:.95rem;padding:12px 24px;border-radius:10px;border:none;cursor:pointer;font-weight:600;letter-spacing:.5px;transition:all .3s ease}.save-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1976d2,#1565c0);color:#fff;box-shadow:0 4px 12px #1976d24d}.save-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#1565c0,#0d47a1);transform:translateY(-2px);box-shadow:0 6px 16px #1976d266}.cancel-btn[_ngcontent-%COMP%]{background:transparent;color:#7f8c8d;border:2px solid #bdc3c7}.cancel-btn[_ngcontent-%COMP%]:hover{background:#bdc3c71a;color:#2c3e50;border-color:#95a5a6;transform:translateY(-2px)}button[_ngcontent-%COMP%]:focus, .input-field[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #1976d233}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.dialog-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .4s ease-out}@media(max-width:480px){.dialog-container[_ngcontent-%COMP%]{padding:20px;margin:20px}.button-group[_ngcontent-%COMP%]{flex-direction:column}button[_ngcontent-%COMP%]{width:100%}}"]})};var BJe=["text"],zJe=[[["mat-icon"]],"*"],VJe=["mat-icon","*"];function HJe(e,t){if(e&1&&Ae(0,"mat-pseudo-checkbox",1),e&2){let n=A();le("disabled",n.disabled)("state",n.selected?"checked":"unchecked")}}function $Je(e,t){if(e&1&&Ae(0,"mat-pseudo-checkbox",3),e&2){let n=A();le("disabled",n.disabled)}}function jJe(e,t){if(e&1&&(M(0,"span",4),N(1),R()),e&2){let n=A();P(),qe("(",n.group.label,")")}}var GJe=new q("MAT_OPTION_PARENT_COMPONENT"),UJe=new q("MatOptgroup");var l7=class{source;isUserInput;constructor(t,n=!1){this.source=t,this.isUserInput=n}},fge=(()=>{class e{_element=k(Oe);_changeDetectorRef=k(dn);_parent=k(GJe,{optional:!0});group=k(UJe,{optional:!0});_signalDisableRipple=!1;_selected=!1;_active=!1;_mostRecentViewValue="";get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}value;id=k(Zi).getId("mat-option-");get disabled(){return this.group&&this.group.disabled||this._disabled()}set disabled(n){this._disabled.set(n)}_disabled=$t(!1);get disableRipple(){return this._signalDisableRipple?this._parent.disableRipple():!!this._parent?.disableRipple}get hideSingleSelectionIndicator(){return!!(this._parent&&this._parent.hideSingleSelectionIndicator)}onSelectionChange=new V;_text;_stateChanges=new ie;constructor(){let n=k(ni);n.load(nl),n.load(ih),this._signalDisableRipple=!!this._parent&&Oc(this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(n=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),n&&this._emitSelectionChangeEvent())}deselect(n=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),n&&this._emitSelectionChangeEvent())}focus(n,i){let o=this._getHostElement();typeof o.focus=="function"&&o.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(n){(n.keyCode===13||n.keyCode===32)&&!rs(n)&&(this._selectViaInteraction(),n.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=this.multiple?!this._selected:!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){let n=this.viewValue;n!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=n)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(n=!1){this.onSelectionChange.emit(new l7(this,n))}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=pe({type:e,selectors:[["mat-option"]],viewQuery:function(i,o){if(i&1&&bn(BJe,7),i&2){let r;Ye(r=Qe())&&(o._text=r.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(i,o){i&1&&Q("click",function(){return o._selectViaInteraction()})("keydown",function(s){return o._handleKeydown(s)}),i&2&&(nr("id",o.id),pt("aria-selected",o.selected)("aria-disabled",o.disabled.toString()),be("mdc-list-item--selected",o.selected)("mat-mdc-option-multiple",o.multiple)("mat-mdc-option-active",o.active)("mdc-list-item--disabled",o.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",$]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],ngContentSelectors:VJe,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(i,o){i&1&&(yn(zJe),K(0,HJe,1,2,"mat-pseudo-checkbox",1),st(1),M(2,"span",2,0),st(4,1),R(),K(5,$Je,1,1,"mat-pseudo-checkbox",3),K(6,jJe,2,1,"span",4),Ae(7,"div",5)),i&2&&(Z(o.multiple?0:-1),P(5),Z(!o.multiple&&o.selected&&!o.hideSingleSelectionIndicator?5:-1),P(),Z(o.group&&o.group._inert?6:-1),P(),le("matRippleTrigger",o._getHostElement())("matRippleDisabled",o.disabled||o.disableRipple))},dependencies:[Yme,BP],styles:[`.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent));outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color, var(--mat-sys-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option .mat-pseudo-checkbox{--mat-pseudo-checkbox-minimal-selected-checkmark-color: var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}@media(forced-colors: active){.mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{right:auto;left:16px}}.mat-mdc-option-multiple{--mat-list-list-item-selected-container-color: var(--mat-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-focus-indicator::before{content:""}
`],encapsulation:2,changeDetection:0})}return e})();var c7=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({imports:[cc,ft,IA,fge]})}return e})();var mge=new q("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let e=k(Ke);return()=>Os(e)}});function gge(e){let t=k(Ke);return()=>Os(t)}var vge={provide:mge,deps:[],useFactory:gge};var d7=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({providers:[vge],imports:[Pd,c7,ft,ss,va,c7,ft]})}return e})();var WJe=["tooltip"],u7=20;var h7=new q("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{let e=k(Ke);return()=>Os(e,{scrollThrottle:u7})}});function bge(e){let t=k(Ke);return()=>Os(t,{scrollThrottle:u7})}var p7={provide:h7,deps:[],useFactory:bge};function Cge(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}var wge=new q("mat-tooltip-default-options",{providedIn:"root",factory:Cge});var _ge="tooltip-panel",yge=nh({passive:!0}),qJe=8,KJe=8,ZJe=24,YJe=200,f7=(()=>{class e{_elementRef=k(Oe);_ngZone=k(me);_platform=k(tn);_ariaDescriber=k(fG);_focusMonitor=k(os);_dir=k(wo);_injector=k(Ke);_viewContainerRef=k(li);_animationsDisabled=fi();_defaultOptions=k(wge,{optional:!0});_overlayRef;_tooltipInstance;_overlayPanelClass;_portal;_position="below";_positionAtOrigin=!1;_disabled=!1;_tooltipClass;_viewInitialized=!1;_pointerExitEventsInitialized=!1;_tooltipComponent=xge;_viewportMargin=8;_currentPosition;_cssClassPrefix="mat-mdc";_ariaDescriptionPending;_dirSubscribed=!1;get position(){return this._position}set position(n){n!==this._position&&(this._position=n,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(n){this._positionAtOrigin=Fi(n),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(n){let i=Fi(n);this._disabled!==i&&(this._disabled=i,i?this.hide(0):this._setupPointerEnterEventsIfNeeded(),this._syncAriaDescription(this.message))}get showDelay(){return this._showDelay}set showDelay(n){this._showDelay=Ki(n)}_showDelay;get hideDelay(){return this._hideDelay}set hideDelay(n){this._hideDelay=Ki(n),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}_hideDelay;touchGestures="auto";get message(){return this._message}set message(n){let i=this._message;this._message=n!=null?String(n).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage()),this._syncAriaDescription(i)}_message="";get tooltipClass(){return this._tooltipClass}set tooltipClass(n){this._tooltipClass=n,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}_passiveListeners=[];_touchstartTimeout=null;_destroyed=new ie;_isDestroyed=!1;constructor(){let n=this._defaultOptions;n&&(this._showDelay=n.showDelay,this._hideDelay=n.hideDelay,n.position&&(this.position=n.position),n.positionAtOrigin&&(this.positionAtOrigin=n.positionAtOrigin),n.touchGestures&&(this.touchGestures=n.touchGestures),n.tooltipClass&&(this.tooltipClass=n.tooltipClass)),this._viewportMargin=qJe}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Vt(this._destroyed)).subscribe(n=>{n?n==="keyboard"&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){let n=this._elementRef.nativeElement;this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([i,o])=>{n.removeEventListener(i,o,yge)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._isDestroyed=!0,this._ariaDescriber.removeDescription(n,this.message,"tooltip"),this._focusMonitor.stopMonitoring(n)}show(n=this.showDelay,i){if(this.disabled||!this.message||this._isTooltipVisible()){this._tooltipInstance?._cancelPendingAnimations();return}let o=this._createOverlay(i);this._detach(),this._portal=this._portal||new sh(this._tooltipComponent,this._viewContainerRef);let r=this._tooltipInstance=o.attach(this._portal).instance;r._triggerElement=this._elementRef.nativeElement,r._mouseLeaveHideDelay=this._hideDelay,r.afterHidden().pipe(Vt(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),r.show(n)}hide(n=this.hideDelay){let i=this._tooltipInstance;i&&(i.isVisible()?i.hide(n):(i._cancelPendingAnimations(),this._detach()))}toggle(n){this._isTooltipVisible()?this.hide():this.show(void 0,n)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(n){if(this._overlayRef){let s=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!n)&&s._origin instanceof Oe)return this._overlayRef;this._detach()}let i=this._injector.get(pa).getAncestorScrollContainers(this._elementRef),o=`${this._cssClassPrefix}-${_ge}`,r=X_(this._injector,this.positionAtOrigin?n||this._elementRef:this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(i);return r.positionChanges.pipe(Vt(this._destroyed)).subscribe(s=>{this._updateCurrentPositionClass(s.connectionPair),this._tooltipInstance&&s.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=dh(this._injector,{direction:this._dir,positionStrategy:r,panelClass:this._overlayPanelClass?[...this._overlayPanelClass,o]:o,scrollStrategy:this._injector.get(h7)(),disableAnimations:this._animationsDisabled}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(Vt(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(Vt(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(Vt(this._destroyed)).subscribe(s=>{this._isTooltipVisible()&&s.keyCode===27&&!rs(s)&&(s.preventDefault(),s.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._dirSubscribed||(this._dirSubscribed=!0,this._dir.change.pipe(Vt(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(n){let i=n.getConfig().positionStrategy,o=this._getOrigin(),r=this._getOverlayPosition();i.withPositions([this._addOffset(g(g({},o.main),r.main)),this._addOffset(g(g({},o.fallback),r.fallback))])}_addOffset(n){let i=KJe,o=!this._dir||this._dir.value=="ltr";return n.originY==="top"?n.offsetY=-i:n.originY==="bottom"?n.offsetY=i:n.originX==="start"?n.offsetX=o?-i:i:n.originX==="end"&&(n.offsetX=o?i:-i),n}_getOrigin(){let n=!this._dir||this._dir.value=="ltr",i=this.position,o;i=="above"||i=="below"?o={originX:"center",originY:i=="above"?"top":"bottom"}:i=="before"||i=="left"&&n||i=="right"&&!n?o={originX:"start",originY:"center"}:(i=="after"||i=="right"&&n||i=="left"&&!n)&&(o={originX:"end",originY:"center"});let{x:r,y:s}=this._invertPosition(o.originX,o.originY);return{main:o,fallback:{originX:r,originY:s}}}_getOverlayPosition(){let n=!this._dir||this._dir.value=="ltr",i=this.position,o;i=="above"?o={overlayX:"center",overlayY:"bottom"}:i=="below"?o={overlayX:"center",overlayY:"top"}:i=="before"||i=="left"&&n||i=="right"&&!n?o={overlayX:"end",overlayY:"center"}:(i=="after"||i=="right"&&n||i=="left"&&!n)&&(o={overlayX:"start",overlayY:"center"});let{x:r,y:s}=this._invertPosition(o.overlayX,o.overlayY);return{main:o,fallback:{overlayX:r,overlayY:s}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),ai(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()},{injector:this._injector}))}_setTooltipClass(n){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=n,this._tooltipInstance._markForCheck())}_invertPosition(n,i){return this.position==="above"||this.position==="below"?i==="top"?i="bottom":i==="bottom"&&(i="top"):n==="end"?n="start":n==="start"&&(n="end"),{x:n,y:i}}_updateCurrentPositionClass(n){let{overlayY:i,originX:o,originY:r}=n,s;if(i==="center"?this._dir&&this._dir.value==="rtl"?s=o==="end"?"left":"right":s=o==="start"?"left":"right":s=i==="bottom"&&r==="top"?"above":"below",s!==this._currentPosition){let a=this._overlayRef;if(a){let l=`${this._cssClassPrefix}-${_ge}-`;a.removePanelClass(l+this._currentPosition),a.addPanelClass(l+s)}this._currentPosition=s}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",n=>{this._setupPointerExitEventsIfNeeded();let i;n.x!==void 0&&n.y!==void 0&&(i=n),this.show(void 0,i)}]):this.touchGestures!=="off"&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",n=>{let i=n.targetTouches?.[0],o=i?{x:i.clientX,y:i.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),this._touchstartTimeout&&clearTimeout(this._touchstartTimeout);let r=500;this._touchstartTimeout=setTimeout(()=>{this._touchstartTimeout=null,this.show(void 0,o)},this._defaultOptions?.touchLongPressShowDelay??r)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;let n=[];if(this._platformSupportsMouseEvents())n.push(["mouseleave",i=>{let o=i.relatedTarget;(!o||!this._overlayRef?.overlayElement.contains(o))&&this.hide()}],["wheel",i=>this._wheelListener(i)]);else if(this.touchGestures!=="off"){this._disableNativeGesturesIfNecessary();let i=()=>{this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions?.touchendHideDelay)};n.push(["touchend",i],["touchcancel",i])}this._addListeners(n),this._passiveListeners.push(...n)}_addListeners(n){n.forEach(([i,o])=>{this._elementRef.nativeElement.addEventListener(i,o,yge)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(n){if(this._isTooltipVisible()){let i=this._injector.get(Je).elementFromPoint(n.clientX,n.clientY),o=this._elementRef.nativeElement;i!==o&&!o.contains(i)&&this.hide()}}_disableNativeGesturesIfNecessary(){let n=this.touchGestures;if(n!=="off"){let i=this._elementRef.nativeElement,o=i.style;(n==="on"||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA")&&(o.userSelect=o.msUserSelect=o.webkitUserSelect=o.MozUserSelect="none"),(n==="on"||!i.draggable)&&(o.webkitUserDrag="none"),o.touchAction="none",o.webkitTapHighlightColor="transparent"}}_syncAriaDescription(n){this._ariaDescriptionPending||(this._ariaDescriptionPending=!0,this._ariaDescriber.removeDescription(this._elementRef.nativeElement,n,"tooltip"),this._isDestroyed||ai({write:()=>{this._ariaDescriptionPending=!1,this.message&&!this.disabled&&this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")}},{injector:this._injector}))}static \u0275fac=function(i){return new(i||e)};static \u0275dir=ke({type:e,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(i,o){i&2&&be("mat-mdc-tooltip-disabled",o.disabled)},inputs:{position:[0,"matTooltipPosition","position"],positionAtOrigin:[0,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[0,"matTooltipDisabled","disabled"],showDelay:[0,"matTooltipShowDelay","showDelay"],hideDelay:[0,"matTooltipHideDelay","hideDelay"],touchGestures:[0,"matTooltipTouchGestures","touchGestures"],message:[0,"matTooltip","message"],tooltipClass:[0,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"]})}return e})(),xge=(()=>{class e{_changeDetectorRef=k(dn);_elementRef=k(Oe);_isMultiline=!1;message;tooltipClass;_showTimeoutId;_hideTimeoutId;_triggerElement;_mouseLeaveHideDelay;_animationsDisabled=fi();_tooltip;_closeOnInteraction=!1;_isVisible=!1;_onHide=new ie;_showAnimation="mat-mdc-tooltip-show";_hideAnimation="mat-mdc-tooltip-hide";constructor(){}show(n){this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},n)}hide(n){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},n)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:n}){(!n||!this._triggerElement.contains(n))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){let n=this._elementRef.nativeElement.getBoundingClientRect();return n.height>ZJe&&n.width>=YJe}_handleAnimationEnd({animationName:n}){(n===this._showAnimation||n===this._hideAnimation)&&this._finalizeAnimation(n===this._showAnimation)}_cancelPendingAnimations(){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(n){n?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(n){let i=this._tooltip.nativeElement,o=this._showAnimation,r=this._hideAnimation;if(i.classList.remove(n?r:o),i.classList.add(n?o:r),this._isVisible!==n&&(this._isVisible=n,this._changeDetectorRef.markForCheck()),n&&!this._animationsDisabled&&typeof getComputedStyle=="function"){let s=getComputedStyle(i);(s.getPropertyValue("animation-duration")==="0s"||s.getPropertyValue("animation-name")==="none")&&(this._animationsDisabled=!0)}n&&this._onShow(),this._animationsDisabled&&(i.classList.add("_mat-animation-noopable"),this._finalizeAnimation(n))}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=pe({type:e,selectors:[["mat-tooltip-component"]],viewQuery:function(i,o){if(i&1&&bn(WJe,7),i&2){let r;Ye(r=Qe())&&(o._tooltip=r.first)}},hostAttrs:["aria-hidden","true"],hostBindings:function(i,o){i&1&&Q("mouseleave",function(s){return o._handleMouseLeave(s)})},decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mat-mdc-tooltip-surface","mdc-tooltip__surface"]],template:function(i,o){if(i&1){let r=Ge();M(0,"div",1,0),Q("animationend",function(a){return J(r),X(o._handleAnimationEnd(a))}),M(2,"div",2),N(3),R()()}i&2&&(be("mdc-tooltip--multiline",o._isMultiline),le("ngClass",o.tooltipClass),P(3),nt(o.message))},dependencies:[uC],styles:[`.mat-mdc-tooltip{position:relative;transform:scale(0);display:inline-flex}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-surface{word-break:normal;overflow-wrap:anywhere;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center;will-change:transform,opacity;background-color:var(--mat-tooltip-container-color, var(--mat-sys-inverse-surface));color:var(--mat-tooltip-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mat-tooltip-container-shape, var(--mat-sys-corner-extra-small));font-family:var(--mat-tooltip-supporting-text-font, var(--mat-sys-body-small-font));font-size:var(--mat-tooltip-supporting-text-size, var(--mat-sys-body-small-size));font-weight:var(--mat-tooltip-supporting-text-weight, var(--mat-sys-body-small-weight));line-height:var(--mat-tooltip-supporting-text-line-height, var(--mat-sys-body-small-line-height));letter-spacing:var(--mat-tooltip-supporting-text-tracking, var(--mat-sys-body-small-tracking))}.mat-mdc-tooltip-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:right}.mat-mdc-tooltip-panel{line-height:normal}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}
`],encapsulation:2,changeDetection:0})}return e})();var m7=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({providers:[p7],imports:[W_,Pd,ft,ft,ss]})}return e})();var Sge=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({imports:[W_,ft,ft]})}return e})();var JJe=["determinateSpinner"];function XJe(e,t){if(e&1&&(bl(),M(0,"svg",11),Ae(1,"circle",12),R()),e&2){let n=A();pt("viewBox",n._viewBox()),P(),Di("stroke-dasharray",n._strokeCircumference(),"px")("stroke-dashoffset",n._strokeCircumference()/2,"px")("stroke-width",n._circleStrokeWidth(),"%"),pt("r",n._circleRadius())}}var eXe=new q("mat-progress-spinner-default-options",{providedIn:"root",factory:tXe});function tXe(){return{diameter:Ege}}var Ege=100,nXe=10,NA=(()=>{class e{_elementRef=k(Oe);_noopAnimations;get color(){return this._color||this._defaultColor}set color(n){this._color=n}_color;_defaultColor="primary";_determinateCircle;constructor(){let n=k(eXe),i=nS(),o=this._elementRef.nativeElement;this._noopAnimations=i==="di-disabled"&&!!n&&!n._forceAnimations,this.mode=o.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",!this._noopAnimations&&i==="reduced-motion"&&o.classList.add("mat-progress-spinner-reduced-motion"),n&&(n.color&&(this.color=this._defaultColor=n.color),n.diameter&&(this.diameter=n.diameter),n.strokeWidth&&(this.strokeWidth=n.strokeWidth))}mode;get value(){return this.mode==="determinate"?this._value:0}set value(n){this._value=Math.max(0,Math.min(100,n||0))}_value=0;get diameter(){return this._diameter}set diameter(n){this._diameter=n||0}_diameter=Ege;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(n){this._strokeWidth=n||0}_strokeWidth;_circleRadius(){return(this.diameter-nXe)/2}_viewBox(){let n=this._circleRadius()*2+this.strokeWidth;return`0 0 ${n} ${n}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=pe({type:e,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(i,o){if(i&1&&bn(JJe,5),i&2){let r;Ye(r=Qe())&&(o._determinateCircle=r.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(i,o){i&2&&(pt("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",o.mode==="determinate"?o.value:null)("mode",o.mode),ki("mat-"+o.color),Di("width",o.diameter,"px")("height",o.diameter,"px")("--mat-progress-spinner-size",o.diameter+"px")("--mat-progress-spinner-active-indicator-width",o.diameter+"px"),be("_mat-animation-noopable",o._noopAnimations)("mdc-circular-progress--indeterminate",o.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",$r],diameter:[2,"diameter","diameter",$r],strokeWidth:[2,"strokeWidth","strokeWidth",$r]},exportAs:["matProgressSpinner"],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(i,o){if(i&1&&(Si(0,XJe,2,8,"ng-template",null,0,sg),M(2,"div",2,1),bl(),M(4,"svg",3),Ae(5,"circle",4),R()(),Rb(),M(6,"div",5)(7,"div",6)(8,"div",7),ig(9,8),R(),M(10,"div",9),ig(11,8),R(),M(12,"div",10),ig(13,8),R()()()),i&2){let r=bs(1);P(4),pt("viewBox",o._viewBox()),P(),Di("stroke-dasharray",o._strokeCircumference(),"px")("stroke-dashoffset",o._strokeDashOffset(),"px")("stroke-width",o._circleStrokeWidth(),"%"),pt("r",o._circleRadius()),P(4),le("ngTemplateOutlet",r),P(2),le("ngTemplateOutlet",r),P(2),le("ngTemplateOutlet",r)}},dependencies:[pC],styles:[`.mat-mdc-progress-spinner{--mat-progress-spinner-animation-multiplier: 1;display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mat-progress-spinner-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mat-progress-spinner-reduced-motion{--mat-progress-spinner-animation-multiplier: 1.25}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate calc(1568.2352941176ms*var(--mat-progress-spinner-animation-multiplier)) linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mat-progress-spinner-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin calc(1333ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin calc(1333ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate calc(5332ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}
`],encapsulation:2,changeDetection:0})}return e})();var wy=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({imports:[ft]})}return e})();var dc=class e{constructor(t,n){this.fb=t;this.mcpService=n;this.mcpService.elicitRequests$.subscribe(i=>{this.createFormFromSchema(i.schema)})}currentForm=new kn(null);currentSchema=new kn(null);currentRequestId=new kn(null);createFormFromSchema(t,n="Elicitation Request"){this.currentSchema.next({schema:t,title:n}),console.log("Schema : ",t);let i=this.buildFormGroup(t);this.currentForm.next(i)}buildFormGroup(t){let n=this.fb.group({}),i=t.properties,o=t.required||[];for(let[r,s]of Object.entries(i)){let a=s;if(a.type==="array"){let l=this.createFormArray(a,o.includes(r));n.addControl(r,l)}else if(a.type==="object"){let l=this.createObjectFormArray(a,o.includes(r));n.addControl(r,l)}else{let l=this.createValidators(a,o.includes(r));n.addControl(r,this.fb.control(a.default||null,l))}}return n}createObjectFormArray(t,n){let i=t.default||{},o=Object.entries(i).map(([r,s])=>this.fb.group({key:[r,Ri.required],value:[s],valueType:[this.determineValueType(s)]}));return o.length===0&&n&&o.push(this.fb.group({key:["",Ri.required],value:[""],valueType:["string"]})),this.fb.array(o,n?Ri.required:null)}determineValueType(t){return typeof t=="number"?"number":typeof t=="boolean"?"boolean":"string"}createObjectFormGroup(t,n){console.log("Object form group : ",t);let i=this.buildFormGroup(t);return n&&i.setValidators(this.objectRequiredValidator),i}objectRequiredValidator(t){if(!(t instanceof As))return null;let n=t;return Object.keys(n.controls).some(o=>{let r=n.get(o)?.value;return r!=null&&r!==""})?null:{objectRequired:!0}}createValidators(t,n){let i=[];return n&&i.push(Ri.required),t.type==="string"&&(t.minLength&&i.push(Ri.minLength(t.minLength)),t.maxLength&&i.push(Ri.maxLength(t.maxLength)),t.format==="email"&&i.push(Ri.email)),(t.type==="number"||t.type==="integer")&&(t.minimum!==void 0&&i.push(Ri.min(t.minimum)),t.maximum!==void 0&&i.push(Ri.max(t.maximum))),i}createFormArray(t,n){return this.isNestedArray(t)?this.createNestedFormArray(t,n):t.items&&t.items.type==="object"?this.createObjectFormArray(t,n):this.createSimpleFormArray(t,n)}createSimpleFormArray(t,n){let i=t.default||[];if(i.length>0){let o=i.map(r=>this.fb.control(r));return this.fb.array(o,n?Ri.required:null)}else return n?this.fb.array([this.fb.control(this.getDefaultArrayValue(t.items))],Ri.required):this.fb.array([])}createNestedFormArray(t,n){let i=t.default||[];if(i.length>0){let o=i.map(r=>this.fb.array(r.map(s=>this.fb.control(s))));return this.fb.array(o,n?Ri.required:null)}else if(n){let o=this.fb.array([this.fb.control(this.getDefaultArrayValue(t.items.items))]);return this.fb.array([o],Ri.required)}else return this.fb.array([])}isNestedArray(t){return t.items&&t.items.type==="array"}getDefaultArrayValue(t){if(!t)return"";switch(t.type){case"integer":case"number":return 0;case"string":return"";case"boolean":return!1;default:return""}}addArrayItemToForm(t,n){let i=t.get(n),r=this.currentSchema.value?.schema?.properties[n];if(r)if(r.items&&r.items.type==="object"){let s=this.buildFormGroup({properties:r.items.properties,required:r.items.required||[]});i.push(s)}else if(this.isNestedArray(r))this.addNestedArrayRow(t,n);else{let s=this.getDefaultArrayValue(r.items);i.push(this.fb.control(s))}}removeArrayItemFromForm(t,n,i){let o=t.get(n);o.length>0&&o.removeAt(i)}addNestedArrayItem(t,n,i){let o=t.get(n);if(i>=0&&i<o.length){let r=o.at(i),a=this.currentSchema.value?.schema?.properties[n],l=this.getDefaultArrayValue(a?.items?.items);r.push(this.fb.control(l))}}removeNestedArrayItem(t,n,i,o){let r=t.get(n);if(i>=0&&i<r.length){let s=r.at(i);s.length>0&&s.removeAt(o)}}addNestedArrayRow(t,n){let i=t.get(n),r=this.currentSchema.value?.schema?.properties[n],s=this.getDefaultArrayValue(r?.items?.items),a=this.fb.array([this.fb.control(s)]);i.push(a)}removeNestedArrayRow(t,n,i){let o=t.get(n);o.length>0&&o.removeAt(i)}getFormArray(t,n){let i=t.get(n);return i instanceof Id?i:this.fb.array([])}getNestedFormArray(t,n,i){try{let o=this.getFormArray(t,n);if(i>=0&&i<o.length){let r=o.at(i);if(r instanceof Id)return r}}catch(o){console.warn(`Error getting nested array for ${n}[${i}]:`,o)}return this.fb.array([])}getObjectFormGroup(t,n){let i=t.get(n);return i instanceof As?i:this.fb.group({})}getObjectFormArrayItem(t,n){try{if(n>=0&&n<t.length){let i=t.at(n);if(i instanceof As)return i}}catch(i){console.warn(`Error getting object array item at index ${n}:`,i)}return this.fb.group({})}getCurrentForm(){return this.currentForm.asObservable()}getCurrentSchema(){return this.currentSchema.asObservable()}getCurrentRequestId(){return this.currentRequestId.value}submitResponse(t){this.mcpService.submitElicitResponse(t)}validateAgainstSchema(t,n){if(!n)return!1;let i=n.required||[];for(let o of i){if(t[o]===void 0||t[o]===null||t[o]===""||Array.isArray(t[o])&&t[o].length===0)return!1;if(typeof t[o]=="object"&&!Array.isArray(t[o])){let r=n.properties[o];if(r&&r.type==="object"&&!this.validateAgainstSchema(t[o],r))return!1}}return!0}static \u0275fac=function(n){return new(n||e)(Ze($_),Ze(Mo))};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})};function iXe(e,t){if(e&1){let n=Ge();M(0,"div",1)(1,"button",3),Q("click",function(){J(n);let o=A();return X(o.toggleConnection())}),M(2,"mat-icon"),N(3),R()(),M(4,"button",4),Q("click",function(){J(n);let o=A();return o.mcp_props.domain=o.mcpServer(),X(o.openMCPConfigDialog())}),M(5,"mat-icon"),N(6,"settings"),R()(),M(7,"button",5),Q("click",function(){J(n);let o=A();return o.openai_props.domain=o.openAiKey(),X(o.toggleOpenAiConfig(o.openai_props))}),M(8,"mat-icon"),N(9,"key"),R()()()}if(e&2){let n=A();P(),le("matTooltip",n.isConnected?"Disconnect from MCP":"Connect to MCP"),P(),be("connected",n.isConnected)("disconnected",!n.isConnected),P(),qe(" ",n.isConnected?"link":"link_off"," ")}}function oXe(e,t){if(e&1){let n=Ge();M(0,"button",20),Q("click",function(){J(n);let o=A(2);return X(o.disconnect())}),N(1," Disconnect "),R()}}function rXe(e,t){if(e&1){let n=Ge();M(0,"button",21),Q("click",function(){J(n);let o=A(2);return X(o.toggleConnection())}),N(1," Connect "),R()}}function sXe(e,t){if(e&1){let n=Ge();M(0,"div",15)(1,"mat-form-field",22)(2,"mat-label"),N(3,"OpenAI API Key"),R(),M(4,"input",23),or("ngModelChange",function(o){J(n);let r=A(2);return Sr(r.openAiKeyValue,o)||(r.openAiKeyValue=o),X(o)}),R(),M(5,"button",24),Q("click",function(){J(n);let o=A(2);return X(o.toggleKeyVisibility())}),M(6,"mat-icon"),N(7),R()()(),M(8,"button",25),Q("click",function(){J(n);let o=A(2);return X(o.onOpenAiKeyChange())}),N(9," Save Key "),R()()}if(e&2){let n=A(2);P(4),le("type",n.showOpenAiKey?"text":"password"),ir("ngModel",n.openAiKeyValue),P(3),nt(n.showOpenAiKey?"visibility_off":"visibility")}}function aXe(e,t){if(e&1&&(M(0,"div",16)(1,"small"),N(2),R()()),e&2){let n=A(2);P(2),qe("Server: ",n.mcpServerUrl)}}function lXe(e,t){e&1&&(M(0,"div",17),Ae(1,"mat-progress-spinner",26),M(2,"span"),N(3,"Connecting..."),R()())}function cXe(e,t){if(e&1&&(M(0,"div",18)(1,"h4"),N(2,"Tool Configuration Required"),R(),M(3,"p"),N(4),R()()),e&2){let n=A(2);P(4),qe("",(n.currentElicitRequest.tool==null?null:n.currentElicitRequest.tool.name)||"A tool"," requires configuration")}}function dXe(e,t){if(e&1){let n=Ge();M(0,"div",2)(1,"h3"),N(2,"MCP Configuration"),R(),M(3,"div",6)(4,"div",7),Ae(5,"div",8),M(6,"span",9),N(7),R()(),M(8,"div",10),K(9,oXe,2,0,"button",11)(10,rXe,2,0,"button",12),R()(),M(11,"div",13)(12,"button",14),Q("click",function(){J(n);let o=A();return X(o.openMCPConfigDialog())}),M(13,"mat-icon"),N(14,"settings"),R(),N(15," MCP Config "),R(),M(16,"button",14),Q("click",function(){J(n);let o=A();return X(o.toggleOpenAiConfig(o.openai_props))}),M(17,"mat-icon"),N(18,"key"),R(),N(19," OpenAI Config "),R()(),K(20,sXe,10,3,"div",15),K(21,aXe,3,1,"div",16),K(22,lXe,4,0,"div",17),K(23,cXe,5,1,"div",18),M(24,"button",19),Q("click",function(){J(n);let o=A();return X(o.startNewChat())}),M(25,"mat-icon"),N(26,"add"),R(),N(27," New Chat "),R()()}if(e&2){let n=A();P(5),be("connected",n.isConnected)("disconnected",!n.isConnected),P(2),qe(" ",n.isConnected?"Connected":"Disconnected"," "),P(2),Z(n.isConnected?9:10),P(11),Z(n.showOpenAiConfig?20:-1),P(),Z(n.mcpServerUrl?21:-1),P(),Z(n.loader?22:-1),P(),Z(n.currentElicitRequest?23:-1)}}var BA=class e{constructor(t,n,i,o){this.mcpService=t;this.storageService=n;this.toolFormatter=i;this.elicitationService=o}displayMode="sidebar";newChatRequested=new V;showOpenAiConfig=!1;showNotificationsPanel=!1;showMCPConfigDialog=!1;showOpenAiKey=!1;isConnected=!1;notifications=[];currentElicitRequest=null;loader=!1;selectedTool=null;availableTools=[];mcpServerUrl="";openAiKeyValue="";subscriptions=[];mcpServer=rC("");openAiKey=rC("");dialog=k(yS);mcp_props={title:"Connect to MCP Server",message:"Please enter the MCP server URL to connect.",placeholder:"Enter MCP server URL",confirmText:"Connect",cancelText:"Cancel",domain:this.mcpServer()||"",page:"mcp_server"};openai_props={title:"Connect to LLM",message:"Please enter the OpenAI API key to connect to the LLM service.",placeholder:"Enter OpenAI API key here",confirmText:"Connect",cancelText:"Cancel",domain:this.openAiKey()||"",page:"open_ai_token"};notificationsChange=new V;unreadCountChange=new V;unreadCount=0;tools=new V;sendOpenAiKey=new V;ngOnInit(){this.subscriptions.push(this.mcpService.connectionStatus$.subscribe(t=>{console.log("MCP client component connection status: ",t),this.isConnected=t,t?this.addNotification("success","Connected","Successfully connected to MCP server"):this.addNotification("warning","Disconnected","Disconnected from MCP server")}),this.mcpService.notifications$.subscribe(t=>{this.addNotification(t.type||"info",t.title||"Notification",t.message||"New notification")}),this.mcpService.elicitRequests$.subscribe(t=>{console.log("Elicitation Request: ",t),this.currentElicitRequest=t,t&&this.addNotification("info","Tool Configuration Required",`${t.tool?.name||"A tool"} requires configuration`)})),this.loadSavedConfig(),this.mcpService.tools$.subscribe(t=>{if(t&&t.length>0){let n=this.toolFormatter.formatMultipleTools(t),i=this.toolFormatter.convertMultipleTools(t);this.tools.emit({open_ai_tools:n,langchain_tools:i}),this.availableTools=t.map(o=>({name:o.name,description:o.description,originalTool:o}))}})}get connectionTooltip(){return this.isConnected?`Connected to ${this.mcpServerUrl}`:"Click Connect to establish connection"}toggleOpenAiConfig(t){this.showOpenAiConfig=!this.showOpenAiConfig,this.openDomainDialog(t)}openMCPConfigDialog(){this.openDomainDialog(this.mcp_props)}closeMCPConfigDialog(){this.showMCPConfigDialog=!1}toggleKeyVisibility(){this.showOpenAiKey=!this.showOpenAiKey}saveOpenAiKey(){this.openAiKeyValue&&(this.openAiKey.set(this.openAiKeyValue),this.storageService.saveValuesInKey("open_ai_token",this.openAiKeyValue),this.sendOpenAiKey.emit(this.openAiKeyValue),this.addNotification("success","OpenAI Key saved","API key has been saved securely"))}loadSavedConfig(){let t=this.storageService.getValueFromKey("mcp_server")||"",n=this.storageService.getValueFromKey("open_ai_token")||"";this.mcpServerUrl=t,this.openAiKeyValue=n,this.mcpServer.set(t),this.openAiKey.set(n),n&&this.sendOpenAiKey.emit(n),t?setTimeout(()=>{this.connect(t)},200):setTimeout(()=>{this.openDomainDialog(this.mcp_props)},500)}toggleConnection(){this.isConnected?this.disconnect():this.mcpServerUrl?this.connect(this.mcpServerUrl):this.openMCPConfigDialog()}connect(t){return E(this,null,function*(){console.log("Connecting to MCP server: ",t);try{this.loader=!0,this.addNotification("info","Connecting",`Attempting to connect to ${t}...`),yield this.mcpService.connect(t),this.loader=!1,this.mcpServerUrl=t,this.mcpServer.set(t)}catch(n){console.error("Connection error:",n),this.loader=!1,this.addNotification("error","Connection Failed",n.message||"Failed to connect to MCP server")}})}disconnect(){return E(this,null,function*(){this.addNotification("info","Disconnecting","Disconnecting from MCP server..."),yield this.mcpService.disconnect()})}onToolSelected(t){this.selectedTool=t.originalTool,this.addNotification("info","Tool Selected",`Selected tool: ${t.name}`),t.originalTool.requiresConfiguration}submitElicitForm(t){if(this.currentElicitRequest){let n=this.elicitationService.getCurrentRequestId();console.log("Elicitation id: ",n),this.mcpService.submitElicitResponse({action:"accept",content:t}),console.log("Server response: ",{action:"accept",content:t}),this.currentElicitRequest=null,this.addNotification("success","Configuration Submitted","Tool configuration has been submitted")}}cancelElicit(){this.mcpService.submitElicitResponse({action:"cancel"}),this.currentElicitRequest=null,this.addNotification("warning","Configuration Cancelled","Tool configuration was cancelled")}toggleNotifications(){this.showNotificationsPanel=!this.showNotificationsPanel}addNotification(t,n,i,o){let r={id:Date.now(),type:t,title:n,message:i,timestamp:new Date,actions:o,read:!1};this.notifications.unshift(r),this.notificationsChange.emit(this.notifications),this.unreadCount++,this.notifications.length>50&&(this.notifications.pop(),this.notifications.length>49&&this.notifications[49]?.read===!1&&(this.unreadCount=Math.max(0,this.unreadCount-1)))}clearNotifications(){this.notifications=[]}handleNotificationAction(t,n){console.log("Notification action:",t,n),n.id==="configure_tool"&&this.selectedTool}startNewChat(){this.newChatRequested.emit(),this.addNotification("info","New Chat","Starting a new chat session")}openDomainDialog(t){this.dialog.open(LA,{width:"500px",disableClose:!1,data:t}).afterClosed().subscribe(i=>{i&&i.server&&(i.page==="mcp_server"?(this.mcpServer.set(i.server),this.mcpServerUrl=i.server,this.storageService.saveValuesInKey("mcp_server",i.server),this.connect(i.server)):i.page==="open_ai_token"&&(this.openAiKey.set(i.server),this.openAiKeyValue=i.server,this.storageService.saveValuesInKey("open_ai_token",i.server),this.sendOpenAiKey.emit(i.server),this.addNotification("success","OpenAI Key Updated","API key has been updated")))})}getMCPServer(){return this.mcpServerUrl}openAiKeyString(){return this.openAiKeyValue}onOpenAiKeyChange(){this.openAiKeyValue&&this.saveOpenAiKey()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}updateNotifications(t){this.notifications.unshift(t),this.unreadCount++,this.notificationsChange.emit(this.notifications),this.unreadCountChange.emit(this.unreadCount)}markNotificationAsRead(t){let n=this.notifications.find(i=>i.id===t);n&&!n.read&&(n.read=!0,this.unreadCount=Math.max(0,this.unreadCount-1),this.notificationsChange.emit(this.notifications),this.unreadCountChange.emit(this.unreadCount))}markAllNotificationsAsRead(){this.notifications.forEach(t=>{t.read||(t.read=!0)}),this.unreadCount=0,this.notificationsChange.emit(this.notifications),this.unreadCountChange.emit(this.unreadCount)}static \u0275fac=function(n){return new(n||e)(ye(Mo),ye(Xu),ye(Fu),ye(dc))};static \u0275cmp=pe({type:e,selectors:[["app-mcp-client"]],inputs:{displayMode:"displayMode",mcpServer:[1,"mcpServer"],openAiKey:[1,"openAiKey"]},outputs:{newChatRequested:"newChatRequested",mcpServer:"mcpServerChange",openAiKey:"openAiKeyChange",notificationsChange:"notificationsChange",unreadCountChange:"unreadCountChange",tools:"tools",sendOpenAiKey:"sendOpenAiKey"},decls:3,vars:4,consts:[[1,"mcp-client"],[1,"header-compact-view"],[1,"sidebar-full-view"],["mat-icon-button","",1,"connection-button",3,"click","matTooltip"],["mat-icon-button","","matTooltip","MCP Configuration",3,"click"],["mat-icon-button","","matTooltip","OpenAI Configuration",3,"click"],[1,"connection-section"],[1,"status-indicator"],[1,"status-dot"],[1,"status-text"],[1,"connection-actions"],["mat-raised-button","","color","warn",1,"action-button"],["mat-raised-button","","color","primary",1,"action-button"],[1,"config-buttons"],["mat-stroked-button","",1,"config-button",3,"click"],[1,"openai-config-panel"],[1,"server-url-display"],[1,"loader-container"],[1,"elicitation-request"],["mat-raised-button","","color","accent",1,"new-chat-button",3,"click"],["mat-raised-button","","color","warn",1,"action-button",3,"click"],["mat-raised-button","","color","primary",1,"action-button",3,"click"],["appearance","outline",1,"full-width"],["matInput","","placeholder","sk-...",3,"ngModelChange","type","ngModel"],["mat-icon-button","","matSuffix","",3,"click"],["mat-raised-button","","color","primary",1,"save-button",3,"click"],["diameter","30","mode","indeterminate"]],template:function(n,i){n&1&&(M(0,"div",0),K(1,iXe,10,6,"div",1),K(2,dXe,28,10,"div",2),R()),n&2&&(be("header-mode",i.displayMode==="header"),P(),Z(i.displayMode==="header"?1:-1),P(),Z(i.displayMode==="sidebar"?2:-1))},dependencies:[oo,is,da,ua,Md,ga,ma,by,OA,Bf,va,Nf,uS,kG,ry,oy,d7,m7,f7,Sge,wy,NA],styles:[".mcp-client-container[_ngcontent-%COMP%]{font-family:Segoe UI,Roboto,sans-serif}.header-config[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-wrap:wrap;padding:8px 0}.connection-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:6px 12px;background:#f5f5f5;border-radius:20px;cursor:default;transition:background-color .2s}.connection-status[_ngcontent-%COMP%]:hover{background:#e8e8e8}.status-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;transition:background-color .3s}.status-dot.connected[_ngcontent-%COMP%]{background-color:#4caf50;box-shadow:0 0 0 2px #4caf5033}.status-dot.disconnected[_ngcontent-%COMP%]{background-color:#f44336;box-shadow:0 0 0 2px #f4433633}.status-text[_ngcontent-%COMP%]{font-size:.85rem;font-weight:500;color:#333}.config-item[_ngcontent-%COMP%]{position:relative}.config-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;height:36px;font-size:.85rem;color:#555}.config-button[_ngcontent-%COMP%]:hover{background:#f0f0f0}.button-label[_ngcontent-%COMP%]{white-space:nowrap}.config-dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;background:#fff;border:1px solid #ddd;border-radius:8px;padding:12px;box-shadow:0 4px 12px #0000001a;z-index:1000;min-width:250px;margin-top:4px}.compact-field[_ngcontent-%COMP%]{font-size:.85rem}.compact-field[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:0}.compact-field[_ngcontent-%COMP%]   .mat-form-field-outline[_ngcontent-%COMP%]{background-color:#f9f9f9}.tool-select[_ngcontent-%COMP%]{min-width:200px}.tool-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:4px 0}.tool-icon[_ngcontent-%COMP%]{font-size:18px;color:#666;flex-shrink:0}.tool-name[_ngcontent-%COMP%]{font-weight:500;flex:1;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tool-desc[_ngcontent-%COMP%]{font-size:.8rem;color:#888;font-style:italic;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:150px}.action-button[_ngcontent-%COMP%]{height:36px;font-size:.85rem;display:flex;align-items:center;gap:6px}.button-spinner[_ngcontent-%COMP%]{margin-left:6px}.notifications-button[_ngcontent-%COMP%]{position:relative;color:#666}.notifications-button[_ngcontent-%COMP%]:hover{background:#f0f0f0}.new-chat-button[_ngcontent-%COMP%]{height:36px;font-size:.85rem;display:flex;align-items:center;gap:6px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.new-chat-button[_ngcontent-%COMP%]:hover{opacity:.9;transform:translateY(-1px);box-shadow:0 4px 12px #667eea4d}.notifications-panel[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;width:320px;max-height:400px;background:#fff;border:1px solid #ddd;border-radius:12px;box-shadow:0 8px 24px #00000026;z-index:1001;margin-top:8px;overflow:hidden}.notifications-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;background:#f8f9fa;border-bottom:1px solid #eaeaea}.notifications-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600;color:#333}.clear-button[_ngcontent-%COMP%]{color:#666}.notifications-list[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}.notification-item[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #f0f0f0;transition:background-color .2s}.notification-item[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.notification-item.success[_ngcontent-%COMP%]{border-left:3px solid #4caf50}.notification-item.error[_ngcontent-%COMP%]{border-left:3px solid #f44336}.notification-item.warning[_ngcontent-%COMP%]{border-left:3px solid #ff9800}.notification-item.info[_ngcontent-%COMP%]{border-left:3px solid #2196f3}.notification-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:4px}.notification-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.notification-item.success[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]{color:#4caf50}.notification-item.error[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]{color:#f44336}.notification-item.warning[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]{color:#ff9800}.notification-item.info[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]{color:#2196f3}.notification-title[_ngcontent-%COMP%]{font-weight:500;font-size:.9rem;color:#333;flex:1}.notification-time[_ngcontent-%COMP%]{font-size:.75rem;color:#888}.notification-message[_ngcontent-%COMP%]{font-size:.85rem;color:#666;line-height:1.4}.notification-actions[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:8px}.notification-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.75rem;padding:2px 8px;min-height:24px}.empty-notifications[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;color:#999;text-align:center}.empty-notifications[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:12px;opacity:.5}.empty-notifications[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1100}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:400px;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 10px 30px #0003;animation:_ngcontent-%COMP%_modalSlideIn .3s ease}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #eaeaea}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px}.full-width[_ngcontent-%COMP%]{width:100%}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:20px}.sidebar-config[_ngcontent-%COMP%]{padding:16px}.sidebar-section[_ngcontent-%COMP%]{margin-bottom:24px}.sidebar-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:16px;color:#333;font-size:1.1rem}.config-group[_ngcontent-%COMP%]{margin-bottom:12px}.config-action[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;text-align:left;padding:8px 12px}.status-section[_ngcontent-%COMP%]{padding:16px 0;border-top:1px solid #eee;border-bottom:1px solid #eee;margin:16px 0}.status-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:12px}.notifications-section[_ngcontent-%COMP%]{margin:16px 0;padding:16px;background:#f9f9f9;border-radius:8px}.new-chat-section[_ngcontent-%COMP%]{margin-top:24px}@media(max-width:768px){.header-config[_ngcontent-%COMP%]{gap:8px}.tool-select[_ngcontent-%COMP%]{min-width:150px}.notifications-panel[_ngcontent-%COMP%]{width:calc(100vw - 32px);right:16px}.button-label[_ngcontent-%COMP%]{display:none}.config-button[_ngcontent-%COMP%]{min-width:auto;padding:0 8px}}@media(max-width:480px){.header-config[_ngcontent-%COMP%]{justify-content:center}.tool-select[_ngcontent-%COMP%], .new-chat-button[_ngcontent-%COMP%]{display:none}}.tool-desc.truncated[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]})};function uXe(e,t){if(e&1&&(M(0,"p",2),N(1),R()),e&2){let n=A(4);P(),nt(n.currentRequest.params.message)}}function hXe(e,t){if(e&1&&(M(0,"li"),N(1),R()),e&2){let n=t.$implicit;P(),nt(n)}}function pXe(e,t){if(e&1&&(M(0,"div",3)(1,"h4"),N(2,"Validation Errors"),R(),M(3,"ul"),an(4,hXe,2,1,"li",null,qn),R()()),e&2){let n=A(4);P(4),ln(n.validationErrors)}}function fXe(e,t){e&1&&(M(0,"span",15),N(1,"*"),R())}function mXe(e,t){if(e&1&&Ae(0,"input",17),e&2){let n=A(2).$implicit,i=A(3),o=A(2);le("id",n)("formControlName",n)("placeholder",o.getFieldExamples(i.schema,n))}}function gXe(e,t){e&1&&(M(0,"option",20),N(1,"(Skip)"),R())}function vXe(e,t){if(e&1&&(M(0,"option",21),N(1),R()),e&2){let n=t.$implicit;le("value",n),P(),qe(" ",n," ")}}function _Xe(e,t){if(e&1&&(M(0,"select",18),K(1,gXe,2,0,"option",20),an(2,vXe,2,2,"option",21,qn),R()),e&2){let n=A(2).$implicit,i=A(3),o=A(2);le("id",n)("formControlName",n),P(),Z(o.isFieldRequired(i.schema,n)?-1:1),P(),ln(o.getFieldOptions(i.schema,n))}}function yXe(e,t){if(e&1&&(M(0,"small",19),N(1),R()),e&2){let n=A(2).$implicit,i=A(3),o=A(2);P(),qe(" ",o.getFieldDescription(i.schema,n)," ")}}function bXe(e,t){if(e&1&&(M(0,"div",12)(1,"label",14),N(2),K(3,fXe,2,0,"span",15),R(),M(4,"div",16),K(5,mXe,1,3,"input",17),K(6,_Xe,4,3,"select",18),K(7,yXe,2,1,"small",19),R()()),e&2){let n=A().$implicit,i=A(3),o=A(2);P(),le("for",n),P(),qe(" ",o.getFieldTitle(i.schema,n)," "),P(),Z(o.isFieldRequired(i.schema,n)?3:-1),P(2),Z(o.getFieldOptions(i.schema,n).length?-1:5),P(),Z(o.getFieldOptions(i.schema,n).length?6:-1),P(),Z(o.getFieldDescription(i.schema,n)?7:-1)}}function CXe(e,t){e&1&&(M(0,"span",15),N(1,"*"),R())}function wXe(e,t){if(e&1&&(M(0,"div",12)(1,"label",14),N(2),K(3,CXe,2,0,"span",15),R(),M(4,"div",16),Ae(5,"input",22),R()()),e&2){let n=A().$implicit,i=A(3),o=A(2);P(),le("for",n),P(),qe(" ",o.getFieldTitle(i.schema,n)," "),P(),Z(o.isFieldRequired(i.schema,n)?3:-1),P(2),le("id",n)("formControlName",n)}}function xXe(e,t){e&1&&(M(0,"span",15),N(1,"*"),R())}function SXe(e,t){if(e&1&&(M(0,"small",19),N(1),R()),e&2){let n=A(2).$implicit,i=A(3),o=A(2);P(),qe(" ",o.getFieldDescription(i.schema,n)," ")}}function EXe(e,t){if(e&1&&(M(0,"div",12)(1,"label",14),N(2),K(3,xXe,2,0,"span",15),R(),M(4,"div",16),Ae(5,"input",23),K(6,SXe,2,1,"small",19),R()()),e&2){let n=A().$implicit,i=A(3),o=A(2);P(),le("for",n),P(),qe(" ",o.getFieldTitle(i.schema,n)," "),P(),Z(o.isFieldRequired(i.schema,n)?3:-1),P(2),le("id",n)("formControlName",n)("min",o.getFieldMin(i.schema,n))("max",o.getFieldMax(i.schema,n)),P(),Z(o.getFieldDescription(i.schema,n)?6:-1)}}function DXe(e,t){e&1&&(M(0,"span",15),N(1,"*"),R())}function kXe(e,t){if(e&1&&(M(0,"div",12)(1,"label",14),N(2),K(3,DXe,2,0,"span",15),R(),M(4,"div",16),Ae(5,"input",24),R()()),e&2){let n=A().$implicit,i=A(3),o=A(2);P(),le("for",n),P(),qe(" ",o.getFieldTitle(i.schema,n)," "),P(),Z(o.isFieldRequired(i.schema,n)?3:-1),P(2),le("id",n)("formControlName",n)}}function IXe(e,t){e&1&&(M(0,"span",15),N(1,"*"),R())}function MXe(e,t){e&1&&(M(0,"option",20),N(1,"(Skip)"),R())}function RXe(e,t){if(e&1&&(M(0,"option",21),N(1),R()),e&2){let n=t.$implicit;le("value",n),P(),qe(" ",n," ")}}function TXe(e,t){if(e&1&&(M(0,"div",12)(1,"label",14),N(2),K(3,IXe,2,0,"span",15),R(),M(4,"div",16)(5,"select",18),K(6,MXe,2,0,"option",20),an(7,RXe,2,2,"option",21,qn),R()()()),e&2){let n=A().$implicit,i=A(3),o=A(2);P(),le("for",n),P(),qe(" ",o.getFieldTitle(i.schema,n)," "),P(),Z(o.isFieldRequired(i.schema,n)?3:-1),P(2),le("id",n)("formControlName",n),P(),Z(o.isFieldRequired(i.schema,n)?-1:6),P(),ln(o.getFieldOptions(i.schema,n))}}function PXe(e,t){e&1&&(M(0,"span",15),N(1,"*"),R())}function AXe(e,t){if(e&1&&(M(0,"div",13)(1,"div",16)(2,"label",25),Ae(3,"input",26),N(4),K(5,PXe,2,0,"span",15),R()()()),e&2){let n=A().$implicit,i=A(3),o=A(2);P(3),le("id",n)("formControlName",n),P(),qe(" ",o.getFieldTitle(i.schema,n)," "),P(),Z(o.isFieldRequired(i.schema,n)?5:-1)}}function OXe(e,t){e&1&&(M(0,"span",15),N(1,"*"),R())}function FXe(e,t){if(e&1&&(M(0,"div",41),N(1),R()),e&2){let n=A().$index,i=A(2).$implicit,o=A(5);P(),qe(" ",o.getObjectItemError(i,n)," ")}}function LXe(e,t){if(e&1){let n=Ge();M(0,"div",29)(1,"div",32)(2,"div",33),Ae(3,"input",34),R(),M(4,"div",33),Ae(5,"input",35),R(),M(6,"div",33)(7,"select",36)(8,"option",37),N(9,"String"),R(),M(10,"option",38),N(11,"Number"),R(),M(12,"option",39),N(13,"Boolean"),R()()(),M(14,"div",33)(15,"button",40),Q("click",function(){let o=J(n).$index,r=A(2).$implicit,s=A(5);return X(s.removeObjectItem(r,o))}),N(16,"\u2212"),R()()(),K(17,FXe,2,1,"div",41),R()}if(e&2){let n=t.$index,i=A(2).$implicit,o=A(2),r=A(),s=A(2);le("formGroupName",n),P(3),be("is-invalid",s.getObjectItemError(i,n)),P(12),le("disabled",s.getObjectFormArray(o,i).controls.length<=1&&s.isFieldRequired(r.schema,i)),P(2),Z(s.getObjectItemError(i,n)?17:-1)}}function NXe(e,t){if(e&1&&(M(0,"small",19),N(1),R()),e&2){let n=A(2).$implicit,i=A(3),o=A(2);P(),qe(" ",o.getFieldDescription(i.schema,n)," ")}}function BXe(e,t){if(e&1){let n=Ge();M(0,"div",12)(1,"label",27),N(2),K(3,OXe,2,0,"span",15),R(),M(4,"div",16)(5,"div",28),an(6,LXe,18,5,"div",29,qn),M(8,"div",30)(9,"button",31),Q("click",function(){J(n);let o=A().$implicit,r=A(5);return X(r.addObjectItem(o))}),N(10," + Add Key/Value Pair "),R()()(),K(11,NXe,2,1,"small",19),R()()}if(e&2){let n=A().$implicit,i=A(2),o=A(),r=A(2);P(2),qe(" ",r.getFieldTitle(o.schema,n)," "),P(),Z(r.isFieldRequired(o.schema,n)?3:-1),P(2),le("formArrayName",n),P(),ln(r.getObjectFormArray(i,n).controls),P(5),Z(r.getFieldDescription(o.schema,n)?11:-1)}}function zXe(e,t){if(e&1){let n=Ge();M(0,"div",45)(1,"div",46),Ae(2,"input",47),M(3,"button",48),Q("click",function(){let o=J(n).$index,r=A(3).$implicit,s=A(5);return X(s.removeArrayItem(r,o))}),N(4," \u2212 "),R()()()}if(e&2){let n=t.$index;P(2),le("formControlName",n)}}function VXe(e,t){if(e&1){let n=Ge();M(0,"div",43),an(1,zXe,5,1,"div",45,qn),M(3,"button",31),Q("click",function(){J(n);let o=A(2).$implicit,r=A(5);return X(r.addArrayItem(o))}),N(4," + Add Item "),R()()}if(e&2){let n=A(2).$implicit,i=A(2),o=A(3);P(),ln(o.getFormArray(i,n).controls)}}function HXe(e,t){if(e&1){let n=Ge();M(0,"div",53)(1,"div",54),Ae(2,"input",55),M(3,"button",48),Q("click",function(){let o=J(n).$index,r=A().$index,s=A(3).$implicit,a=A(5);return X(a.removeNestedArrayItem(s,r,o))}),N(4," \u2212 "),R()()()}if(e&2){let n=t.$index;P(2),le("formControlName",n)}}function $Xe(e,t){if(e&1){let n=Ge();M(0,"div",49)(1,"div",51)(2,"h5"),N(3),R(),M(4,"button",48),Q("click",function(){let o=J(n).$index,r=A(3).$implicit,s=A(5);return X(s.removeNestedArrayRow(r,o))}),N(5," Remove Row "),R()(),M(6,"div",52),an(7,HXe,5,1,"div",53,qn),R(),M(9,"button",31),Q("click",function(){let o=J(n).$index,r=A(3).$implicit,s=A(5);return X(s.addNestedArrayItem(r,o))}),N(10," + Add Cell "),R()()}if(e&2){let n=t.$index,i=A(3).$implicit,o=A(2),r=A(3);le("formArrayName",n),P(3),qe("Row ",n+1),P(4),ln(r.getNestedFormArray(o,i,n).controls)}}function jXe(e,t){if(e&1){let n=Ge();M(0,"div",44),an(1,$Xe,11,2,"div",49,qn),M(3,"button",50),Q("click",function(){J(n);let o=A(2).$implicit,r=A(5);return X(r.addNestedArrayRow(o))}),N(4," + Add Row "),R()()}if(e&2){let n=A(2).$implicit,i=A(2),o=A(3);P(),ln(o.getFormArray(i,n).controls)}}function GXe(e,t){if(e&1&&(M(0,"div",12)(1,"label",27),N(2),R(),M(3,"div",16)(4,"div",42),K(5,VXe,5,0,"div",43),K(6,jXe,5,0,"div",44),R()()()),e&2){let n=A().$implicit,i=A(3),o=A(2);P(2),nt(o.getFieldTitle(i.schema,n)),P(2),le("formArrayName",n),P(),Z(o.isNestedArray(i.schema,n)?-1:5),P(),Z(o.isNestedArray(i.schema,n)?6:-1)}}function UXe(e,t){if(e&1&&(M(0,"div",7),K(1,bXe,8,6,"div",12)(2,wXe,6,5,"div",12)(3,EXe,7,8,"div",12)(4,kXe,6,5,"div",12)(5,TXe,9,6,"div",12)(6,AXe,6,4,"div",13)(7,BXe,12,4,"div",12)(8,GXe,7,4,"div",12),R()),e&2){let n,i=t.$implicit,o=A(3),r=A(2);P(),Z((n=r.getFieldType(o.schema,i))==="string"?1:n==="password"?2:n==="number"?3:n==="integer"?4:n==="enum"?5:n==="boolean"?6:n==="object"?7:n==="array"?8:-1)}}function WXe(e,t){e&1&&(M(0,"div",11),Ae(1,"img",56),R())}function qXe(e,t){if(e&1){let n=Ge();M(0,"div")(1,"form",5),Q("ngSubmit",function(){J(n);let o=A(),r=A(3);return X(r.onSubmit(o))}),M(2,"div",6),an(3,UXe,9,1,"div",7,qn),R(),M(5,"div",8)(6,"button",9),N(7," Submit "),R(),M(8,"button",10),Q("click",function(){J(n);let o=A(4);return X(o.cancel())}),N(9," Cancel "),R()(),K(10,WXe,2,0,"div",11),R()()}if(e&2){let n=A(),i=A(),o=A(2);P(),le("formGroup",n),P(2),ln(o.getFieldNames(i.schema)),P(3),le("disabled",o.waitingForResponse),P(4),Z(o.waitingForResponse?10:-1)}}function KXe(e,t){if(e&1){let n=Ge();M(0,"div",4)(1,"h3"),N(2,"Confirm Submission"),R(),M(3,"pre"),N(4),bt(5,"json"),R(),M(6,"div",57)(7,"button",58),Q("click",function(){J(n);let o=A(4);return X(o.confirmSubmission(!0))}),N(8,"Confirm"),R(),M(9,"button",59),Q("click",function(){J(n);let o=A(4);return X(o.onEdit())}),N(10,"Edit"),R(),M(11,"button",60),Q("click",function(){J(n);let o=A(4);return X(o.confirmSubmission(!1))}),N(12,"Cancel"),R()()()}if(e&2){let n=A(4);P(4),nt(Ot(5,1,n.maskSensitiveData(n.submittedData)))}}function ZXe(e,t){if(e&1&&(M(0,"div")(1,"h2"),N(2),R(),K(3,uXe,2,1,"p",2),K(4,pXe,6,0,"div",3),K(5,qXe,11,3,"div"),K(6,KXe,13,3,"div",4),R()),e&2){let n=A(3);P(2),nt(n.title),P(),Z(!(n.currentRequest==null||n.currentRequest.params==null)&&n.currentRequest.params.message?3:-1),P(),Z(n.validationErrors.length?4:-1),P(),Z(n.showConfirmation?-1:5),P(),Z(n.showConfirmation?6:-1)}}function YXe(e,t){if(e&1&&(M(0,"div",0),K(1,ZXe,7,5,"div"),bt(2,"async"),R()),e&2){let n,i=A(2);P(),Z((n=Ot(2,1,i.form$))?1:-1,n)}}function QXe(e,t){e&1&&(M(0,"p",1),N(1,"No active elicitation request"),R())}function JXe(e,t){if(e&1&&(M(0,"div"),K(1,YXe,3,3,"div",0),bt(2,"async"),Hr(3,QXe,2,0,"p",1),R()),e&2){let n,i=A();P(),Z((n=Ot(2,1,i.schema$))?1:3,n)}}var zA=class e{constructor(t,n,i,o){this.elicitationService=t;this.mcpService=n;this.fb=i;this.ngZone=o;this.form$=this.elicitationService.getCurrentForm(),this.schema$=this.elicitationService.getCurrentSchema()}tool=null;form$;schema$;currentRequest;validationErrors=[];showConfirmation=!1;submittedData;formAvailable=!1;waitingForResponse=!1;title="";sendToolResponse=new V;sendToolRequest=new V;subscriptions=[];form=new As({});ngOnChanges(t){console.log("UI update: ",t),!this.tool?.name&&this.title!="Elicitation Request"&&(this.formAvailable=!1,this.waitingForResponse=!1)}ngOnInit(){this.subscriptions.push(this.schema$.subscribe(t=>{this.waitingForResponse=!1,this.currentRequest=t?.schema,this.title=t?.title,this.formAvailable=!0})),this.subscriptions.push(this.form$.subscribe(t=>{t&&(this.form=t)}))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}confirmSubmission(t){this.waitingForResponse=!1,t?this.elicitationService.submitResponse({action:"accept",content:this.submittedData}):this.elicitationService.submitResponse({action:"decline"}),this.resetForm(),this.formAvailable=!1}onEdit(){this.showConfirmation=!1,this.formAvailable=!0}cancel(){this.title==="Elicitation Request"?this.elicitationService.submitResponse({action:"cancel"}):(console.log(this.title),this.sendToolResponse.emit({response:""})),this.resetForm(),this.formAvailable=!1}maskSensitiveData(t){if(t.password){let n=t.password,i=n.length>2?n.slice(0,3)+"****":"****";return x(g({},t),{password:i})}return t}transformObjectFields(t,n){if(!n||!n.properties)return t;let i=g({},t);return Object.keys(n.properties).forEach(o=>{let r=n.properties[o];if(r&&r.type==="object"){let s=i[o];if(!Array.isArray(s))return;let a={};s.forEach(l=>{if(!l||l.key===void 0||l.key===null)return;let c=l.value;if(l.valueType)switch(l.valueType){case"number":let u=Number(c);c=isNaN(u)?c:u;break;case"boolean":if(typeof c=="string"){let h=c.toLowerCase();c=h==="true"||h==="1"}else c=!!c;break;default:break}a[l.key]=c}),i[o]=a}}),i}onSubmit(t){if(t.invalid){this.validationErrors=this.getFormErrors(t);return}let n=this.transformObjectFields(t.value,this.currentRequest);if(console.log("Transformed : ",n),!this.elicitationService.validateAgainstSchema(n,this.currentRequest)){this.validationErrors=["Data does not match the required schema."];return}Object.keys(n).forEach(o=>{(n[o]===null||n[o]===void 0||n[o]==="")&&delete n[o]}),this.submittedData=n,this.title==="Tool test"?(this.sendToolRequest.emit({request:JSON.stringify(n)}),this.toolCall(n)):this.showConfirmation=!0}markFormGroupTouched(t){Object.keys(t.controls).forEach(n=>{let i=t.get(n);i instanceof As||i instanceof Id?this.markFormGroupTouched(i):i?.markAsTouched()})}toolCall(t){return E(this,null,function*(){if(this.tool?.name){console.log("Tool name : ",this.tool.name);try{let i={};this.tool?.description=="long running task"?(this.waitingForResponse=!0,i=yield this.mcpService.longRunningTool(this.tool?.name,t),this.waitingForResponse=!1):(this.waitingForResponse=!0,i=yield this.mcpService.longRunningTool(this.tool?.name,t),this.waitingForResponse=!1);try{let o=JSON.parse(i.content[0].text);if(Object.keys(o).includes("layouts")){let n=o,{layouts:s}=n,a=Be(n,["layouts"]);console.log("chek keys : ",Object.keys(a).length,Object.keys(a)),Object.keys(a).length?this.sendToolResponse.emit({response:"```json \n "+JSON.stringify(a,null,2)+"\n```",layouts:o.layouts}):this.sendToolResponse.emit({response:"",layouts:o.layouts})}else this.sendToolResponse.emit({response:i.content[0].text})}catch{this.sendToolResponse.emit({response:i.content[0].text})}this.resetForm(),this.formAvailable=!1}catch(i){this.ngZone.run(()=>{this.validationErrors=["Error occurred while calling the tool. Please try again."],console.log("Sothing went worng : ",i),this.waitingForResponse=!1,this.resetForm(),this.formAvailable=!1})}}else console.log("Tool name not received : ",this.tool?.name)})}getFormErrors(t){let n=[];return Object.keys(t.controls).forEach(i=>{let o=t.get(i)?.errors;o&&Object.keys(o).forEach(r=>{n.push(`${i}: ${this.getErrorMessage(r,o[r])}`)})}),n}getErrorMessage(t,n){switch(t){case"required":return"This field is required";case"minlength":return`Minimum length is ${n.requiredLength}`;case"maxlength":return`Maximum length is ${n.requiredLength}`;case"min":return`Minimum value is ${n.min}`;case"max":return`Maximum value is ${n.max}`;case"email":return"Invalid email format";default:return"Invalid value"}}resetForm(){this.validationErrors=[],this.showConfirmation=!1,this.submittedData=null}getFieldNames(t){return t?Object.keys(t.properties):[]}getFieldType(t,n){if(!t||!t.properties[n])return"string";let i=t.properties[n];return n==="password"?"password":i.enum?"enum":i.type||"string"}getFieldTitle(t,n){return t?.properties[n]?.title||n}getFieldDescription(t,n){return t?.properties[n]?.description||null}getFieldDefault(t,n){return t?.properties[n]?.default}getFieldMin(t,n){return t?.properties[n]?.minimum||null}getFieldMax(t,n){return t?.properties[n]?.maximum||null}getFieldOptions(t,n){return t?.properties[n]?.options||[]}getFieldExamples(t,n){return t?.properties[n]?.examples||""}isFieldRequired(t,n){return t?.required?.includes(n)||!1}getObjectValueTypeOptions(t,n){let i=t?.properties?.[n];if(!i)return[];let o=i.additionalProperties;if(!o)return[];let r=o.type;return r?Array.isArray(r)?r:[r]:[]}isNestedArray(t,n){return t?.properties[n]?.items?.type==="array"}getArrayItemType(t,n){let i=t?.properties[n];return this.isNestedArray(t,n)?i?.items?.items?.type==="integer"?"number":"text":i?.items?.type==="integer"?"number":"text"}getArrayPlaceholder(t,n){return`Enter ${t?.properties[n]?.items?.type||"value"}`}addArrayItem(t){this.form&&this.elicitationService.addArrayItemToForm(this.form,t)}removeArrayItem(t,n){this.form&&this.elicitationService.removeArrayItemFromForm(this.form,t,n)}addNestedArrayItem(t,n){this.form&&this.elicitationService.addNestedArrayItem(this.form,t,n)}removeNestedArrayItem(t,n,i){this.form&&this.elicitationService.removeNestedArrayItem(this.form,t,n,i)}getFormArray(t,n){return this.elicitationService.getFormArray(t,n)}getNestedFormArray(t,n,i){return this.elicitationService.getNestedFormArray(t,n,i)}addNestedArrayRow(t){this.form&&this.elicitationService.addNestedArrayRow(this.form,t)}removeNestedArrayRow(t,n){this.form&&this.elicitationService.removeNestedArrayRow(this.form,t,n)}getObjectFormArray(t,n){try{let i=t.get(n);if(i&&i instanceof Id)return i;console.warn(`FormArray for ${n} not found, creating empty one`);let o=this.fb.array([]);return t.setControl(n,o),o}catch(i){return console.error("Error getting object form array:",i),this.fb.array([])}}addObjectItem(t){if(!this.form)return;let n=this.getObjectFormArray(this.form,t),i=this.fb.group({key:["",Ri.required],value:[""],valueType:["string"]});n.push(i)}removeObjectItem(t,n){if(!this.form)return;let i=this.getObjectFormArray(this.form,t);n>=0&&n<i.length&&i.removeAt(n)}getObjectItemError(t,n){if(!this.form)return null;let i=this.getObjectFormArray(this.form,t);if(n<0||n>=i.length)return null;let r=i.at(n).get("key");if(r?.errors?.required&&r.touched)return"Key is required";let s=r?.value;return s&&s.trim()&&i.controls.map((l,c)=>c!==n?l.get("key")?.value:null).filter(l=>l&&l.trim()===s.trim()).length>0?"Duplicate key":null}static \u0275fac=function(n){return new(n||e)(ye(dc),ye(Mo),ye($_),ye(me))};static \u0275cmp=pe({type:e,selectors:[["app-elicitation"]],inputs:{tool:"tool"},outputs:{sendToolResponse:"sendToolResponse",sendToolRequest:"sendToolRequest"},features:[sn],decls:1,vars:1,consts:[[1,"elicitation-container"],[1,"no-request"],[1,"message"],[1,"alert","alert-danger"],[1,"confirmation-dialog"],[1,"form-container",3,"ngSubmit","formGroup"],[1,"form-fields"],[1,"form-field-group"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"loading-spinner"],[1,"field-wrapper"],[1,"field-wrapper","checkbox-wrapper"],[1,"field-label",3,"for"],[1,"required"],[1,"field-input"],["type","text",1,"form-control",3,"id","formControlName","placeholder"],[1,"form-control",3,"id","formControlName"],[1,"field-description"],["value",""],[3,"value"],["type","password",1,"form-control",3,"id","formControlName"],["type","number",1,"form-control",3,"id","formControlName","min","max"],["type","number",1,"form-control",3,"id","formControlName"],[1,"checkbox-label"],["type","checkbox",3,"id","formControlName"],[1,"field-label"],[1,"object-container",3,"formArrayName"],[1,"object-item",3,"formGroupName"],[1,"object-actions"],["type","button",1,"btn","btn-add",3,"click"],[1,"object-inputs"],[1,"input-group"],["type","text","formControlName","key","placeholder","Key",1,"form-control","object-key"],["type","text","formControlName","value","placeholder","Value",1,"form-control","object-value"],["formControlName","valueType",1,"form-control","object-value-type"],["value","string"],["value","number"],["value","boolean"],["type","button","title","Remove this key/value pair",1,"btn","btn-remove",3,"click","disabled"],[1,"error-message"],[1,"array-container",3,"formArrayName"],[1,"simple-array"],[1,"nested-array"],[1,"array-item"],[1,"array-input-group"],["type","text",1,"form-control",3,"formControlName"],["type","button",1,"btn","btn-remove",3,"click"],[1,"nested-row",3,"formArrayName"],["type","button",1,"btn","btn-primary",3,"click"],[1,"row-header"],[1,"row-cells"],[1,"cell-item"],[1,"cell-input-group"],["type","text","placeholder","Cell value",1,"form-control",3,"formControlName"],["src","gif/Spinner.gif","alt","Loading..."],[1,"confirmation-actions"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-warning",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(n,i){n&1&&K(0,JXe,4,3,"div"),n&2&&Z(i.formAvailable?0:-1)},dependencies:[is,wP,EP,DP,da,Qx,Ef,H_,ua,_P,iG,nG,j_,Df,Jx,xP,SP,oo,wy,fB,Xh],styles:[`.elicitation-container[_ngcontent-%COMP%]{max-width:700px;margin:0 auto;padding:20px;background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.elicitation-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1f2937;margin-bottom:16px;font-size:24px;font-weight:600}.message[_ngcontent-%COMP%]{color:#6b7280;margin-bottom:20px;font-size:14px}.form-container[_ngcontent-%COMP%]{width:100%}.form-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.form-field-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.field-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr;gap:16px;align-items:start}.checkbox-wrapper[_ngcontent-%COMP%]{align-items:center}.field-label[_ngcontent-%COMP%]{font-weight:500;color:#374151;font-size:14px;line-height:1.5;padding-top:8px}.field-input[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.form-control[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;transition:all .2s ease;background-color:#fff}.form-control[_ngcontent-%COMP%]:focus{border-color:#3b82f6;outline:none;box-shadow:0 0 0 3px #3b82f61a}select.form-control[_ngcontent-%COMP%]{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");background-position:right 12px center;background-repeat:no-repeat;background-size:16px;padding-right:40px;appearance:none}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-weight:500;color:#374151;cursor:pointer;margin:0}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;margin:0}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s ease;text-decoration:none;display:inline-flex;align-items:center;justify-content:center;gap:6px}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#2563eb}.btn-secondary[_ngcontent-%COMP%]{background-color:#6b7280;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#4b5563}.btn-success[_ngcontent-%COMP%]{background-color:#10b981;color:#fff}.btn-warning[_ngcontent-%COMP%]{background-color:#f59e0b;color:#fff}.btn-danger[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff}.btn-add[_ngcontent-%COMP%]{background-color:#10b981;color:#fff;font-size:13px;padding:6px 12px}.btn-remove[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff;font-size:13px;padding:6px 10px;min-width:36px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:32px;padding-top:20px;border-top:1px solid #e5e7eb}.object-container[_ngcontent-%COMP%], .array-container[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:6px;padding:16px;background-color:#f9fafb}.object-item[_ngcontent-%COMP%]{margin-bottom:12px;padding-bottom:12px;border-bottom:1px solid #e5e7eb}.object-item[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0}.object-inputs[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:start}.object-inputs[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{flex:1}.array-item[_ngcontent-%COMP%], .nested-row[_ngcontent-%COMP%]{margin-bottom:12px}.array-input-group[_ngcontent-%COMP%], .cell-input-group[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.array-input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .cell-input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{flex:1}.nested-row[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:6px;padding:16px;background-color:#fff}.row-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.row-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;color:#374151;font-size:14px}.row-cells[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-bottom:12px}.required[_ngcontent-%COMP%]{color:#ef4444;margin-left:2px}.field-description[_ngcontent-%COMP%]{color:#6b7280;font-size:12px;line-height:1.4;margin-top:4px}.error-message[_ngcontent-%COMP%]{color:#ef4444;font-size:12px;margin-top:4px}.is-invalid[_ngcontent-%COMP%]{border-color:#ef4444}.alert[_ngcontent-%COMP%]{padding:16px;margin-bottom:20px;border-radius:6px;border:1px solid transparent}.alert-danger[_ngcontent-%COMP%]{background-color:#fef2f2;border-color:#fecaca;color:#dc2626}.alert-danger[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-size:16px}.alert-danger[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:20px}.confirmation-dialog[_ngcontent-%COMP%]{margin-top:24px;padding:20px;background:#f9fafb;border-radius:8px;border:1px solid #e5e7eb}.confirmation-dialog[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;color:#1f2937}.confirmation-actions[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:20px}.loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:20px}.no-request[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#6b7280;font-size:16px}pre[_ngcontent-%COMP%]{background:#fff;padding:16px;border-radius:6px;overflow-x:auto;font-size:12px;line-height:1.4;border:1px solid #e5e7eb;margin:0}@media(max-width:768px){.elicitation-container[_ngcontent-%COMP%]{padding:16px;margin:8px}.field-wrapper[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:8px}.field-label[_ngcontent-%COMP%]{padding-top:0}.form-actions[_ngcontent-%COMP%], .object-inputs[_ngcontent-%COMP%], .confirmation-actions[_ngcontent-%COMP%]{flex-direction:column}.row-header[_ngcontent-%COMP%]{flex-direction:column;gap:8px;align-items:stretch}}.form-control[_ngcontent-%COMP%]:focus-visible, .btn[_ngcontent-%COMP%]:focus-visible{outline:2px solid #3b82f6;outline-offset:2px}.object-container[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:8px;padding:16px;background-color:#f9fafb;margin-bottom:8px}.object-item[_ngcontent-%COMP%]{margin-bottom:16px;padding:16px;background:#fff;border:1px solid #e5e7eb;border-radius:6px;transition:all .2s ease}.object-item[_ngcontent-%COMP%]:hover{border-color:#d1d5db;box-shadow:0 1px 3px #0000000d}.object-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.object-inputs[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 120px auto;gap:12px;align-items:start}.input-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;font-weight:500;margin-bottom:2px}.object-key[_ngcontent-%COMP%]{min-width:120px}.object-value[_ngcontent-%COMP%]{min-width:150px}.object-value-type[_ngcontent-%COMP%]{min-width:120px}.object-actions[_ngcontent-%COMP%]{margin-top:16px;padding-top:16px;border-top:1px solid #e5e7eb;text-align:left}.btn-remove[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff;border:none;border-radius:6px;padding:8px 12px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;min-width:44px;height:38px;display:flex;align-items:center;justify-content:center}.btn-remove[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#dc2626;transform:translateY(-1px)}.btn-remove[_ngcontent-%COMP%]:disabled{background-color:#9ca3af;cursor:not-allowed;transform:none}.btn-add[_ngcontent-%COMP%]{background-color:#10b981;color:#fff;border:none;border-radius:6px;padding:10px 16px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.btn-add[_ngcontent-%COMP%]:hover{background-color:#059669;transform:translateY(-1px)}@media(max-width:1024px){.object-inputs[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 100px auto;gap:10px}}@media(max-width:768px){.object-inputs[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}.object-item[_ngcontent-%COMP%]{padding:12px}.input-group[_ngcontent-%COMP%]{width:100%}.object-key[_ngcontent-%COMP%], .object-value[_ngcontent-%COMP%], .object-value-type[_ngcontent-%COMP%]{min-width:auto;width:100%}.btn-remove[_ngcontent-%COMP%]{width:100%;height:44px;margin-top:8px}}@media(max-width:480px){.object-container[_ngcontent-%COMP%], .object-item[_ngcontent-%COMP%]{padding:12px}.object-inputs[_ngcontent-%COMP%]{gap:8px}}.object-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:1px solid #d1d5db;border-radius:6px;padding:8px 12px;font-size:14px;transition:all .2s ease;background-color:#fff}.object-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#3b82f6;outline:none;box-shadow:0 0 0 3px #3b82f61a}.object-container[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 0 0 3px #ef44441a}.object-item[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .2s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}.object-inputs[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]:first-child:before{content:"Key";font-size:12px;color:#6b7280;font-weight:500;margin-bottom:4px;display:block}.object-inputs[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]:nth-child(2):before{content:"Value";font-size:12px;color:#6b7280;font-weight:500;margin-bottom:4px;display:block}.object-inputs[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]:nth-child(3):before{content:"Type";font-size:12px;color:#6b7280;font-weight:500;margin-bottom:4px;display:block}`]})};function XXe(e,t){e&1&&go(0,"div",2)}var eet=new q("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var Ige=(()=>{class e{_elementRef=k(Oe);_ngZone=k(me);_changeDetectorRef=k(dn);_renderer=k(Pn);_cleanupTransitionEnd;constructor(){let n=nS(),i=k(eet,{optional:!0});this._isNoopAnimation=n==="di-disabled",n==="reduced-motion"&&this._elementRef.nativeElement.classList.add("mat-progress-bar-reduced-motion"),i&&(i.color&&(this.color=this._defaultColor=i.color),this.mode=i.mode||this.mode)}_isNoopAnimation;get color(){return this._color||this._defaultColor}set color(n){this._color=n}_color;_defaultColor="primary";get value(){return this._value}set value(n){this._value=kge(n||0),this._changeDetectorRef.markForCheck()}_value=0;get bufferValue(){return this._bufferValue||0}set bufferValue(n){this._bufferValue=kge(n||0),this._changeDetectorRef.markForCheck()}_bufferValue=0;animationEnd=new V;get mode(){return this._mode}set mode(n){this._mode=n,this._changeDetectorRef.markForCheck()}_mode="determinate";ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._cleanupTransitionEnd=this._renderer.listen(this._elementRef.nativeElement,"transitionend",this._transitionendHandler)})}ngOnDestroy(){this._cleanupTransitionEnd?.()}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}_transitionendHandler=n=>{this.animationEnd.observers.length===0||!n.target||!n.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))};static \u0275fac=function(i){return new(i||e)};static \u0275cmp=pe({type:e,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(i,o){i&2&&(pt("aria-valuenow",o._isIndeterminate()?null:o.value)("mode",o.mode),ki("mat-"+o.color),be("_mat-animation-noopable",o._isNoopAnimation)("mdc-linear-progress--animation-ready",!o._isNoopAnimation)("mdc-linear-progress--indeterminate",o._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",$r],bufferValue:[2,"bufferValue","bufferValue",$r],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(i,o){i&1&&(Ei(0,"div",0),go(1,"div",1),K(2,XXe,1,0,"div",2),no(),Ei(3,"div",3),go(4,"span",4),no(),Ei(5,"div",5),go(6,"span",4),no()),i&2&&(P(),Di("flex-basis",o._getBufferBarFlexBasis()),P(),Z(o.mode==="buffer"?2:-1),P(),Di("transform",o._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{--mat-progress-bar-animation-multiplier: 1;display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mat-progress-bar-reduced-motion{--mat-progress-bar-animation-multiplier: 2}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mat-progress-bar-track-height, 4px),var(--mat-progress-bar-active-indicator-height, 4px))}@media(forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mat-progress-bar-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mat-progress-bar-track-height, 4px);border-radius:var(--mat-progress-bar-track-shape, var(--mat-sys-corner-none))}.mdc-linear-progress__buffer-dots{background-image:radial-gradient(circle, var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant)) calc(var(--mat-progress-bar-track-height, 4px) / 2), transparent 0);background-repeat:repeat-x;background-size:calc(calc(var(--mat-progress-bar-track-height, 4px) / 2)*5);background-position:left;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering calc(250ms*var(--mat-progress-bar-animation-multiplier)) infinite linear}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse calc(250ms*var(--mat-progress-bar-animation-multiplier)) infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mat-progress-bar-track-height, 4px) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}
`],encapsulation:2,changeDetection:0})}return e})();function kge(e,t=0,n=100){return Math.max(t,Math.min(n,e))}var Mge=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=$e({type:e});static \u0275inj=ze({imports:[ft]})}return e})();var net=Object.defineProperty;var xy=(e,t)=>{for(var n in t)net(e,n,{get:t[n],enumerable:!0})};var iet=`Progressively summarize the lines of conversation provided, adding onto the previous summary returning a new summary.

EXAMPLE
Current summary:
The human asks what the AI thinks of artificial intelligence. The AI thinks artificial intelligence is a force for good.

New lines of conversation:
Human: Why do you think artificial intelligence is a force for good?
AI: Because artificial intelligence will help humans reach their full potential.

New summary:
The human asks what the AI thinks of artificial intelligence. The AI thinks artificial intelligence is a force for good because it will help humans reach their full potential.
END OF EXAMPLE

Current summary:
{summary}

New lines of conversation:
{new_lines}

New summary:`,Rge=new Xy({inputVariables:["summary","new_lines"],template:iet}),oet=`You are an assistant to a human, powered by a large language model trained by OpenAI.

You are designed to be able to assist with a wide range of tasks, from answering simple questions to providing in-depth explanations and discussions on a wide range of topics. As a language model, you are able to generate human-like text based on the input you receive, allowing you to engage in natural-sounding conversations and provide responses that are coherent and relevant to the topic at hand.

You are constantly learning and improving, and your capabilities are constantly evolving. You are able to process and understand large amounts of text, and can use this knowledge to provide accurate and informative responses to a wide range of questions. You have access to some personalized information provided by the human in the Context section below. Additionally, you are able to generate your own text based on the input you receive, allowing you to engage in discussions and provide explanations and descriptions on a wide range of topics.

Overall, you are a powerful tool that can help with a wide range of tasks and provide valuable insights and information on a wide range of topics. Whether the human needs help with a specific question or just wants to have a conversation about a particular topic, you are here to assist.

Context:
{entities}

Current conversation:
{history}
Last line:
Human: {input}
You:`,Tge=new Xy({inputVariables:["entities","history","input"],template:oet}),ret=`You are an AI assistant reading the transcript of a conversation between an AI and a human. Extract all of the proper nouns from the last line of conversation. As a guideline, a proper noun is generally capitalized. You should definitely extract all names and places.

The conversation history is provided just in case of a coreference (e.g. "What do you know about him" where "him" is defined in a previous line) -- ignore items mentioned there that are not in the last line.

Return the output as a single comma-separated list, or NONE if there is nothing of note to return (e.g. the user is just issuing a greeting or having a simple conversation).

EXAMPLE
Conversation history:
Person #1: my name is Jacob. how's it going today?
AI: "It's going great! How about you?"
Person #1: good! busy working on Langchain. lots to do.
AI: "That sounds like a lot of work! What kind of things are you doing to make Langchain better?"
Last line:
Person #1: i'm trying to improve Langchain's interfaces, the UX, its integrations with various products the user might want ... a lot of stuff.
Output: Jacob,Langchain
END OF EXAMPLE

EXAMPLE
Conversation history:
Person #1: how's it going today?
AI: "It's going great! How about you?"
Person #1: good! busy working on Langchain. lots to do.
AI: "That sounds like a lot of work! What kind of things are you doing to make Langchain better?"
Last line:
Person #1: i'm trying to improve Langchain's interfaces, the UX, its integrations with various products the user might want ... a lot of stuff. I'm working with Person #2.
Output: Langchain, Person #2
END OF EXAMPLE

Conversation history (for reference only):
{history}
Last line of conversation (for extraction):
Human: {input}

Output:`,Pge=new Xy({inputVariables:["history","input"],template:ret}),set=`You are an AI assistant helping a human keep track of facts about relevant people, places, and concepts in their life. Update and add to the summary of the provided entity in the "Entity" section based on the last line of your conversation with the human. If you are writing the summary for the first time, return a single sentence.
The update should only include facts that are relayed in the last line of conversation about the provided entity, and should only contain facts about the provided entity.

If there is no new information about the provided entity or the information is not worth noting (not an important or relevant fact to remember long-term), output the exact string "UNCHANGED" below.

Full conversation history (for context):
{history}

Entity to summarize:
{entity}

Existing summary of {entity}:
{summary}

Last line of conversation:
Human: {input}
Updated summary (or the exact string "UNCHANGED" if there is no new information about {entity} above):`,Age=new Xy({inputVariables:["entity","summary","history","input"],template:set});var aet={};xy(aet,{BaseChatMemory:()=>Lr});var Lr=class extends gf{chatHistory;returnMessages=!1;inputKey;outputKey;constructor(e){super(),this.chatHistory=e?.chatHistory??new mf,this.returnMessages=e?.returnMessages??this.returnMessages,this.inputKey=e?.inputKey??this.inputKey,this.outputKey=e?.outputKey??this.outputKey}saveContext(e,t){return E(this,null,function*(){yield this.chatHistory.addUserMessage(vf(e,this.inputKey)),yield this.chatHistory.addAIMessage(Dx(t,this.outputKey))})}clear(){return E(this,null,function*(){yield this.chatHistory.clear()})}};var bS=class extends Lr{memoryKey="history";humanPrefix="Human";aiPrefix="AI";llm;prompt=Rge;summaryChatMessageClass=Ky;constructor(e){let{returnMessages:t,inputKey:n,outputKey:i,chatHistory:o,humanPrefix:r,aiPrefix:s,llm:a,prompt:l,summaryChatMessageClass:c}=e;super({returnMessages:t,inputKey:n,outputKey:i,chatHistory:o}),this.memoryKey=e?.memoryKey??this.memoryKey,this.humanPrefix=r??this.humanPrefix,this.aiPrefix=s??this.aiPrefix,this.llm=a,this.prompt=l??this.prompt,this.summaryChatMessageClass=c??this.summaryChatMessageClass}predictNewSummary(e,t){return E(this,null,function*(){let n=ho(e,this.humanPrefix,this.aiPrefix);return yield new tb({llm:this.llm,prompt:this.prompt}).predict({summary:t,new_lines:n})})}},Oge=class e extends bS{buffer="";constructor(t){super(t)}get memoryKeys(){return[this.memoryKey]}loadMemoryVariables(t){return E(this,null,function*(){return this.returnMessages?{[this.memoryKey]:[new this.summaryChatMessageClass(this.buffer)]}:{[this.memoryKey]:this.buffer}})}saveContext(t,n){return E(this,null,function*(){yield Wn(e.prototype,this,"saveContext").call(this,t,n);let i=yield this.chatHistory.getMessages();this.buffer=yield this.predictNewSummary(i.slice(-2),this.buffer)})}clear(){return E(this,null,function*(){yield Wn(e.prototype,this,"clear").call(this),this.buffer=""})}};var Fge=class e extends bS{movingSummaryBuffer="";maxTokenLimit=2e3;constructor(t){super(t),this.maxTokenLimit=t?.maxTokenLimit??this.maxTokenLimit}get memoryKeys(){return[this.memoryKey]}loadMemoryVariables(t){return E(this,null,function*(){let n=yield this.chatHistory.getMessages();this.movingSummaryBuffer&&(n=[new this.summaryChatMessageClass(this.movingSummaryBuffer),...n]);let i;return this.returnMessages?i=n:i=ho(n,this.humanPrefix,this.aiPrefix),{[this.memoryKey]:i}})}saveContext(t,n){return E(this,null,function*(){yield Wn(e.prototype,this,"saveContext").call(this,t,n),yield this.prune()})}prune(){return E(this,null,function*(){let t=yield this.chatHistory.getMessages();this.movingSummaryBuffer&&(t=[new this.summaryChatMessageClass(this.movingSummaryBuffer),...t]);let n=yield this.llm.getNumTokens(ho(t,this.humanPrefix,this.aiPrefix));if(n>this.maxTokenLimit){let i=[];for(;n>this.maxTokenLimit;){let o=t.shift();o&&(i.push(o),n=yield this.llm.getNumTokens(ho(t,this.humanPrefix,this.aiPrefix)))}this.movingSummaryBuffer=yield this.predictNewSummary(i,this.movingSummaryBuffer)}})}clear(){return E(this,null,function*(){yield Wn(e.prototype,this,"clear").call(this),this.movingSummaryBuffer=""})}};var Lge=class extends Lr{humanPrefix="Human";aiPrefix="AI";memoryKey="history";constructor(e){super({chatHistory:e?.chatHistory,returnMessages:e?.returnMessages??!1,inputKey:e?.inputKey,outputKey:e?.outputKey}),this.humanPrefix=e?.humanPrefix??this.humanPrefix,this.aiPrefix=e?.aiPrefix??this.aiPrefix,this.memoryKey=e?.memoryKey??this.memoryKey}get memoryKeys(){return[this.memoryKey]}loadMemoryVariables(e){return E(this,null,function*(){let t=yield this.chatHistory.getMessages();return this.returnMessages?{[this.memoryKey]:t}:{[this.memoryKey]:ho(t,this.humanPrefix,this.aiPrefix)}})}};var Nge=class extends Lr{humanPrefix="Human";aiPrefix="AI";memoryKey="history";k=5;constructor(e){super({returnMessages:e?.returnMessages??!1,chatHistory:e?.chatHistory,inputKey:e?.inputKey,outputKey:e?.outputKey}),this.humanPrefix=e?.humanPrefix??this.humanPrefix,this.aiPrefix=e?.aiPrefix??this.aiPrefix,this.memoryKey=e?.memoryKey??this.memoryKey,this.k=e?.k??this.k}get memoryKeys(){return[this.memoryKey]}loadMemoryVariables(e){return E(this,null,function*(){let t=yield this.chatHistory.getMessages();return this.returnMessages?{[this.memoryKey]:t.slice(-this.k*2)}:{[this.memoryKey]:ho(t.slice(-this.k*2),this.humanPrefix,this.aiPrefix)}})}};var cet={};xy(cet,{formatDocumentsAsString:()=>v7});var v7=e=>e.map(t=>t.pageContent).join(`

`);var Bge=class extends gf{vectorStoreRetriever;inputKey;memoryKey;returnDocs;metadata;constructor(e){super(),this.vectorStoreRetriever=e.vectorStoreRetriever,this.inputKey=e.inputKey,this.memoryKey=e.memoryKey??"memory",this.returnDocs=e.returnDocs??!1,this.metadata=e.metadata}get memoryKeys(){return[this.memoryKey]}loadMemoryVariables(e){return E(this,null,function*(){let t=vf(e,this.inputKey),n=yield this.vectorStoreRetriever.invoke(t);return{[this.memoryKey]:this.returnDocs?n:v7(n)}})}saveContext(e,t){return E(this,null,function*(){let n=typeof this.metadata=="function"?this.metadata(e,t):this.metadata,i=Object.entries(e).filter(([o])=>o!==this.memoryKey).concat(Object.entries(t)).map(([o,r])=>`${o}: ${r}`).join(`
`);yield this.vectorStoreRetriever.addDocuments([new ps({pageContent:i,metadata:n})])})}};var zge=class extends Ca{};var Vge=class extends zge{lc_namespace=["langchain","stores","entity","in_memory"];store;constructor(){super(),this.store=Object.create(null)}get(e,t){return E(this,null,function*(){return e in this.store?this.store[e]:t})}set(e,t){return E(this,null,function*(){this.store[e]=t})}delete(e){return E(this,null,function*(){delete this.store[e]})}exists(e){return E(this,null,function*(){return e in this.store})}clear(){return E(this,null,function*(){this.store=Object.create(null)})}};var Hge=class e extends Lr{entityExtractionChain;entitySummarizationChain;entityStore;entityCache=[];k=3;chatHistoryKey="history";llm;entitiesKey="entities";humanPrefix;aiPrefix;constructor(t){super({chatHistory:t.chatHistory,returnMessages:t.returnMessages??!1,inputKey:t.inputKey,outputKey:t.outputKey}),this.llm=t.llm,this.humanPrefix=t.humanPrefix,this.aiPrefix=t.aiPrefix,this.chatHistoryKey=t.chatHistoryKey??this.chatHistoryKey,this.entitiesKey=t.entitiesKey??this.entitiesKey,this.entityExtractionChain=new tb({llm:this.llm,prompt:t.entityExtractionPrompt??Pge}),this.entitySummarizationChain=new tb({llm:this.llm,prompt:t.entitySummarizationPrompt??Age}),this.entityStore=t.entityStore??new Vge,this.entityCache=t.entityCache??this.entityCache,this.k=t.k??this.k}get memoryKeys(){return[this.chatHistoryKey]}get memoryVariables(){return[this.entitiesKey,this.chatHistoryKey]}loadMemoryVariables(t){return E(this,null,function*(){let n=this.inputKey??IT(t,this.memoryVariables),i=yield this.chatHistory.getMessages(),o=ho(i.slice(-this.k*2),this.humanPrefix,this.aiPrefix),r=yield this.entityExtractionChain.predict({history:o,input:t[n]}),s=r.trim()==="NONE"?[]:r.split(",").map(c=>c.trim()),a={};for(let c of s)a[c]=yield this.entityStore.get(c,"No current information known.");this.entityCache=[...s];let l=this.returnMessages?i.slice(-this.k*2):o;return{[this.chatHistoryKey]:l,[this.entitiesKey]:a}})}saveContext(t,n){return E(this,null,function*(){yield Wn(e.prototype,this,"saveContext").call(this,t,n);let i=this.inputKey??IT(t,this.memoryVariables),o=yield this.chatHistory.getMessages(),r=ho(o.slice(-this.k*2),this.humanPrefix,this.aiPrefix),s=t[i];for(let a of this.entityCache){let l=yield this.entityStore.get(a,"No current information known."),c=yield this.entitySummarizationChain.predict({summary:l,entity:a,history:r,input:s});c.trim()!=="UNCHANGED"&&(yield this.entityStore.set(a,c.trim()))}})}clear(){return E(this,null,function*(){yield Wn(e.prototype,this,"clear").call(this),yield this.entityStore.clear()})}};var $ge=class extends Lr{humanPrefix="Human";aiPrefix="AI";memoryKey="history";memories=[];constructor(e){super({chatHistory:e?.chatHistory,returnMessages:e?.returnMessages??!1,inputKey:e?.inputKey,outputKey:e?.outputKey}),this.memories=e?.memories??this.memories,this.humanPrefix=e?.humanPrefix??this.humanPrefix,this.aiPrefix=e?.aiPrefix??this.aiPrefix,this.memoryKey=e?.memoryKey??this.memoryKey,this.checkRepeatedMemoryVariable(),this.checkInputKey()}checkRepeatedMemoryVariable(){let e=[];for(let t of this.memories){let n=e.filter(i=>t.memoryKeys.includes(i));if(n.length>0)throw new Error(`The same variables ${[...n]} are found in multiple memory objects, which is not allowed by CombinedMemory.`);e.push(...t.memoryKeys)}}checkInputKey(){for(let e of this.memories)e.chatHistory!==void 0&&e.inputKey===void 0&&console.warn(`When using CombinedMemory, input keys should be set so the input is known. Was not set on ${e}.`)}loadMemoryVariables(e){return E(this,null,function*(){let t={};for(let n of this.memories){let i=yield n.loadMemoryVariables(e);t=g(g({},t),i)}return t})}saveContext(e,t){return E(this,null,function*(){for(let n of this.memories)yield n.saveContext(e,t)})}clear(){return E(this,null,function*(){for(let e of this.memories)typeof e.clear=="function"&&(yield e.clear())})}get memoryKeys(){let e=[];for(let t of this.memories)e.push(...t.memoryKeys);return e}};var jge=class e extends Lr{humanPrefix="Human";aiPrefix="AI";memoryKey="history";maxTokenLimit=2e3;llm;constructor(t){super(t),this.llm=t.llm,this.humanPrefix=t?.humanPrefix??this.humanPrefix,this.aiPrefix=t?.aiPrefix??this.aiPrefix,this.memoryKey=t?.memoryKey??this.memoryKey,this.maxTokenLimit=t?.maxTokenLimit??this.maxTokenLimit}get memoryKeys(){return[this.memoryKey]}loadMemoryVariables(t){return E(this,null,function*(){let n=yield this.chatHistory.getMessages();return this.returnMessages?{[this.memoryKey]:n}:{[this.memoryKey]:ho(n,this.humanPrefix,this.aiPrefix)}})}saveContext(t,n){return E(this,null,function*(){yield Wn(e.prototype,this,"saveContext").call(this,t,n);let i=yield this.chatHistory.getMessages(),o=yield this.llm.getNumTokens(ho(i,this.humanPrefix,this.aiPrefix));if(o>this.maxTokenLimit){let r=[];for(;o>this.maxTokenLimit;)r.push(i.shift()),o=yield this.llm.getNumTokens(ho(i,this.humanPrefix,this.aiPrefix))}})}};var det={};xy(det,{BaseChatMemory:()=>Lr,BaseConversationSummaryMemory:()=>bS,BaseMemory:()=>gf,BufferMemory:()=>Lge,BufferWindowMemory:()=>Nge,ChatMessageHistory:()=>mf,CombinedMemory:()=>$ge,ConversationSummaryBufferMemory:()=>Fge,ConversationSummaryMemory:()=>Oge,ConversationTokenBufferMemory:()=>jge,ENTITY_MEMORY_CONVERSATION_TEMPLATE:()=>Tge,EntityMemory:()=>Hge,VectorStoreRetrieverMemory:()=>Bge,getBufferString:()=>ho,getInputValue:()=>vf,getOutputValue:()=>Dx});function uet(e,t){if(e&1&&N(0),e&2){let n=A();qe(" ",n.getLayoutTitle()," ")}}function het(e,t){if(e&1&&(M(0,"div",11),N(1),bt(2,"getMapTitle"),R()),e&2){let n=A(4);P(),nt(Ot(2,1,n.layout))}}function pet(e,t){if(e&1){let n=Ge();M(0,"div",9),K(1,het,3,3,"div",11),bt(2,"hasMapTitle"),M(3,"app-map",12),bt(4,"getMapFeatures"),bt(5,"getMapWmsLayers"),bt(6,"getMapCenter"),bt(7,"getMapZoom"),bt(8,"getMapHeight"),Q("featureClick",function(o){J(n);let r=A(3);return X(r.onFeatureClick(o))}),R()()}if(e&2){let n=A(3);P(),Z(Ot(2,7,n.layout)?1:-1),P(2),le("featureDetails",Ot(4,9,n.layout))("wmsLayers",Ot(5,11,n.layout))("center",Ot(6,13,n.layout))("zoom",Ot(7,15,n.layout))("showPopup",!0)("height",Ot(8,17,n.layout))}}function fet(e,t){e&1&&(M(0,"div",10),N(1,"Invalid map layout"),R())}function met(e,t){if(e&1&&(K(0,pet,9,19,"div",9),bt(1,"isValidMapLayout"),Hr(2,fet,2,0,"div",10)),e&2){let n=A(2);Z(Ot(1,1,n.layout)?0:2)}}function get(e,t){if(e&1&&Ae(0,"app-chat-data-table",13),e&2){let n=A(3);le("tableData",n.layout.data)}}function vet(e,t){e&1&&(M(0,"div",14)(1,"i",15),N(2,"\u26A0\uFE0F"),R(),N(3," Invalid table structure "),R())}function _et(e,t){if(e&1&&(M(0,"div",5),K(1,get,1,1,"app-chat-data-table",13),bt(2,"hasValidTableStructure"),Hr(3,vet,4,0,"div",14),R()),e&2){let n=A(2);P(),Z(Ot(2,1,n.layout)?1:3)}}function yet(e,t){if(e&1){let n=Ge();M(0,"div",6)(1,"app-chat-kanban",16),Q("actionTriggered",function(o){J(n);let r=A(2);return X(r.onKanbanAction(o))})("boardUpdated",function(o){J(n);let r=A(2);return X(r.onKanbanBoardUpdated(o))}),R()()}if(e&2){let n=A(2);P(),le("kanbanLayout",n.layout)}}function bet(e,t){if(e&1){let n=Ge();M(0,"div",7)(1,"app-chat-form",17),Q("formSubmitted",function(o){J(n);let r=A(2);return X(r.onFormSubmitted(o))})("formCancelled",function(){J(n);let o=A(2);return X(o.onFormCancelled())})("kanbanAction",function(o){J(n);let r=A(2);return X(r.onKanbanAction(o))})("kanbanBoardUpdated",function(o){J(n);let r=A(2);return X(r.onKanbanBoardUpdated(o))}),R()()}if(e&2){let n=A(2);P(),le("formLayout",n.layout)}}function Cet(e,t){if(e&1&&(M(0,"div",8)(1,"div",18)(2,"pre"),N(3),bt(4,"json"),R()()()),e&2){let n=A(2);P(3),nt(Ot(4,1,n.layout))}}function wet(e,t){if(e&1&&K(0,met,3,3)(1,_et,4,3,"div",5)(2,yet,2,1,"div",6)(3,bet,2,1,"div",7)(4,Cet,5,3,"div",8),e&2){let n,i=A();Z((n=i.getLayoutType())==="map"?0:n==="table"?1:n==="kanban"?2:n==="form"?3:4)}}var VA=class e{layout;layoutClosed=new V;getLayoutType(){return this.layout?this.layout.type==="map"||this.layout.wmsLayers?"map":this.layout.type==="table"?"table":this.layout.type==="kanban"||this.layout.boards?"kanban":this.layout.type==="form"||this.layout.fields?"form":"unknown":""}getLayoutTitle(){return this.layout?this.layout.data.title||this.layout.data.name||this.layout.data.table_name||"Workspace Layout":""}closeLayout(){this.layoutClosed.emit()}onFeatureClick(t){console.log("Feature clicked in workspace:",t)}onKanbanAction(t){console.log("Kanban action in workspace:",t)}onKanbanBoardUpdated(t){console.log("Kanban board updated in workspace:",t)}onFormSubmitted(t){console.log("Form submitted in workspace:",t)}onFormCancelled(){console.log("Form cancelled in workspace")}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=pe({type:e,selectors:[["app-workspace"]],inputs:{layout:"layout"},outputs:{layoutClosed:"layoutClosed"},decls:9,vars:2,consts:[[1,"workspace-container"],[1,"workspace-header"],[1,"workspace-title"],["mat-icon-button","",1,"close-button",3,"click"],[1,"workspace-content"],[1,"workspace-table"],[1,"workspace-kanban"],[1,"workspace-form"],[1,"workspace-default"],[1,"workspace-map"],[1,"map-error"],[1,"map-header"],[3,"featureClick","featureDetails","wmsLayers","center","zoom","showPopup","height"],[3,"tableData"],[1,"table-error"],[1,"error-icon"],[3,"actionTriggered","boardUpdated","kanbanLayout"],[3,"formSubmitted","formCancelled","kanbanAction","kanbanBoardUpdated","formLayout"],[1,"layout-preview"]],template:function(n,i){n&1&&(M(0,"div",0)(1,"div",1)(2,"h3",2),K(3,uet,1,1),R(),M(4,"button",3),Q("click",function(){return i.closeLayout()}),M(5,"mat-icon"),N(6,"close"),R()()(),M(7,"div",4),K(8,wet,5,1),R()()),n&2&&(P(3),Z(i.layout?3:-1),P(5),Z(i.layout?8:-1))},dependencies:[oo,ga,ma,by,Bf,gy,yy,_y,sy,Xh,ly,cy,dy,uy,hy,py,fy,my,ay],styles:[".workspace-container[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.workspace-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:#f8f9fa;border-bottom:1px solid #dee2e6}.workspace-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:500;color:#333}.close-button[_ngcontent-%COMP%]{margin-left:auto}.workspace-content[_ngcontent-%COMP%]{flex:1;overflow:auto;padding:20px}.workspace-map[_ngcontent-%COMP%], .workspace-table[_ngcontent-%COMP%], .workspace-kanban[_ngcontent-%COMP%], .workspace-form[_ngcontent-%COMP%], .workspace-default[_ngcontent-%COMP%]{height:100%}.layout-preview[_ngcontent-%COMP%]{padding:20px;background:#f8f9fa;border-radius:4px;max-height:500px;overflow:auto}.layout-preview[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin:0;font-size:12px;white-space:pre-wrap;word-wrap:break-word}"]})};var xet=["chatComponent"],Eet=()=>["chat"],Det=()=>["workspace"],ket=(e,t)=>t.id;function Iet(e,t){if(e&1&&(M(0,"span",31),N(1),R()),e&2){let n=A();P(),qe(" ",n.unreadNotificationsCount>99?"99+":n.unreadNotificationsCount," ")}}function Met(e,t){if(e&1&&(M(0,"span",31),N(1),R()),e&2){let n=A();P(),qe(" ",n.unreadNotificationsCount>99?"99+":n.unreadNotificationsCount," ")}}function Ret(e,t){if(e&1){let n=Ge();M(0,"button",32),Q("click",function(){J(n);let o=A();return X(o.toggleChatVisibility())}),M(1,"mat-icon"),N(2),R()()}if(e&2){let n=A();P(2),nt(n.showChatOnMobile?"close":"chat")}}function Tet(e,t){if(e&1&&(M(0,"span"),N(1),R()),e&2){let n=A(2);P(),PD(" Tool ",n.currentToolIndex," of ",n.totalTools," (",n.progressPercentage,"%) ")}}function Pet(e,t){e&1&&(M(0,"span"),N(1," Processing... "),R())}function Aet(e,t){if(e&1){let n=Ge();M(0,"div",35),Ae(1,"mat-spinner",36),R(),M(2,"button",37),Q("click",function(){J(n);let o=A(2);return X(o.cancelOperation())}),M(3,"mat-icon"),N(4,"cancel"),R()()}}function Oet(e,t){if(e&1&&(M(0,"div",16)(1,"div",33),K(2,Tet,2,3,"span"),K(3,Pet,2,0,"span"),R(),Ae(4,"mat-progress-bar",34),K(5,Aet,5,0),R()),e&2){let n=A();P(2),Z(n.totalTools>0?2:-1),P(),Z(n.totalTools===0?3:-1),P(),le("value",n.progressPercentage),P(),Z(n.isLoading?5:-1)}}function Fet(e,t){if(e&1){let n=Ge();M(0,"app-workspace",38),Q("layoutClosed",function(){J(n);let o=A();return X(o.onLayoutClosed())}),R()}if(e&2){let n=A();le("layout",n.activeLayout)}}function Let(e,t){e&1&&(M(0,"div",29)(1,"mat-icon",39),N(2,"dashboard"),R(),M(3,"h3"),N(4,"Workspace Area"),R(),M(5,"p"),N(6,"Select a layout from the chat to display it here"),R()())}function Net(e,t){if(e&1){let n=Ge();M(0,"div",40),Q("click",function(){J(n);let o=A();return X(o.closeElicitationModal())}),M(1,"div",41),Q("click",function(o){return J(n),X(o.stopPropagation())}),M(2,"div",42)(3,"div",43)(4,"h2"),N(5,"Tool Configuration"),R(),M(6,"button",44),Q("click",function(){J(n);let o=A();return X(o.closeElicitationModal())}),M(7,"mat-icon"),N(8,"close"),R()()(),M(9,"app-elicitation",45),Q("sendToolRequest",function(o){J(n);let r=A();return X(r.tool_request(o))})("sendToolResponse",function(o){J(n);let r=A();return X(r.tool_response(o))})("close",function(){J(n);let o=A();return X(o.closeElicitationModal())}),R()()()()}if(e&2){let n=A();P(9),le("tool",n.selectedTool)}}function Bet(e,t){if(e&1){let n=Ge();M(0,"button",59),Q("click",function(){J(n);let o=A().$implicit,r=A(3);return X(r.markAsRead(o))}),M(1,"mat-icon"),N(2,"check_circle"),R()()}}function zet(e,t){if(e&1&&(M(0,"div",52)(1,"div",53)(2,"mat-icon"),N(3),R()(),M(4,"div",54)(5,"div",55),N(6),R(),M(7,"div",56),N(8),R(),M(9,"div",57),N(10),bt(11,"date"),R()(),Si(12,Bet,3,0,"button",58),R()),e&2){let n=t.$implicit,i=A(3);be("unread",!n.read),P(2),ki(i.getNotificationIconClass(n.type)),P(),qe(" ",i.getNotificationIcon(n.type)," "),P(3),nt(n.title),P(2),nt(n.message),P(2),nt(Jh(11,9,n.timestamp,"short")),P(2),le("ngIf",!n.read)}}function Vet(e,t){if(e&1&&(M(0,"div",49),an(1,zet,13,12,"div",51,ket),R()),e&2){let n=A(2);P(),ln(n.notifications)}}function Het(e,t){e&1&&(M(0,"div",50)(1,"mat-icon"),N(2,"notifications_off"),R(),M(3,"p"),N(4,"No notifications"),R()())}function $et(e,t){if(e&1){let n=Ge();M(0,"div",40),Q("click",function(){J(n);let o=A();return X(o.closeNotificationsModal())}),M(1,"div",46),Q("click",function(o){return J(n),X(o.stopPropagation())}),M(2,"div",43)(3,"h2"),N(4,"Notifications"),R(),M(5,"div",47)(6,"button",48),Q("click",function(){J(n);let o=A();return X(o.markAllAsRead())}),N(7,"Mark all as read"),R(),M(8,"button",48),Q("click",function(){J(n);let o=A();return X(o.clearAllNotifications())}),N(9,"Clear all"),R(),M(10,"button",44),Q("click",function(){J(n);let o=A();return X(o.closeNotificationsModal())}),M(11,"mat-icon"),N(12,"close"),R()()()(),M(13,"div",42),K(14,Vet,3,0,"div",49)(15,Het,5,0,"div",50),R()()()}if(e&2){let n=A();P(14),Z(n.notifications.length>0?14:15)}}var HA=class e{constructor(t,n,i,o,r,s){this.mcpService=t;this.openAIService=n;this.storageService=i;this.toolFormatter=o;this.mcpElicitationService=r;this.cdr=s;this.checkScreenSize(),this.initializeSidebarState(),this.mcpService.mcpServerInstructions$.subscribe(c=>{this.system_prompt=c||"You are a helpful assistant. Use tools *only* when needed.         If you already have the answer, reply normally instead of calling a tool again."});let a=this.mcpService.streaming$.subscribe(c=>{if(!this.destroyed){if(c.status&&c.status==="completed"){this.streamingContent+=c.message;let u=this.chatMessages.length-1;this.chatMessages[u]=this.checkToolCall(this.streamingContent),this.cdr.detectChanges(),this.streamingContent=""}else if(c.status&&c.status==="started")this.streamingContent+=c.message,this.chatMessages.push({role:"bot",content:this.streamingContent,timestamp:new Date});else if(c.status&&c.status==="in_progress"){this.streamingContent+=c.message;let u=this.chatMessages.length-1;this.chatMessages[u].content=this.streamingContent,this.cdr.detectChanges()}}});this.activeSubscriptions.push(a),this.human_prompt="{input}";let l=this.storageService.getValueFromKey("open_ai_token")||"";this.openAiKey.set(l),l&&this.InitializeLLM(l),Th(window,"resize").pipe($s(100)).subscribe(()=>{this.checkScreenSize()})}chatComponent;messages=[];title="AI powered chatbot";isSidebarOpen=!0;isMobileScreen=!1;activeLayout=null;isLoading=!1;currentToolIndex=0;totalTools=0;progressPercentage=0;chatMessages=[{role:"bot",content:"Hello! How can I assist you today?",timestamp:new Date}];opentAI_functions;llm_model;llm_with_tools;errorMessage="";system_prompt="";human_prompt="";llm_runnable;selectedTool=null;streamingContent="";page=$t("");openAiKey=rC("");dialog=k(yS);inputMessages=[];destroyed=!1;activeSubscriptions=[];activeStream=null;formSource=null;showElicitationModal=!1;showChatOnMobile=!0;chatWidth=35;workspaceWidth=65;chatHistory=new mf;finalRetrievalChain;notifications=[];unreadNotificationsCount=0;showNotificationsModal=!1;ngOnDestroy(){this.destroyed=!0,this.activeSubscriptions.forEach(t=>{t&&typeof t.unsubscribe=="function"&&t.unsubscribe()}),this.activeSubscriptions=[],this.activeStream&&typeof this.activeStream.return=="function"&&this.activeStream.return()}updateProgress(t,n){this.destroyed||(this.currentToolIndex=t,this.totalTools=n,this.progressPercentage=n>0?Math.round(t/n*100):0,this.cdr.detectChanges())}setLoadingState(t){this.destroyed||(this.isLoading=t,this.cdr.detectChanges())}onResize(){this.checkScreenSize(),this.initializeSidebarState()}checkScreenSize(){let n=this.isMobileScreen;this.isMobileScreen=window.innerWidth<768,this.isMobileScreen&&!n&&(this.isSidebarOpen=!1),!this.isMobileScreen&&n&&(this.isSidebarOpen=!1)}initializeSidebarState(){this.isMobileScreen?this.isSidebarOpen=!1:this.isSidebarOpen=!1}checkToolCall(t){let n={role:"bot",content:t,timestamp:new Date};try{let i=JSON.parse(t);if(Object.keys(i).includes("function_call")){let r=i.function_call;r.name==="table_layout_tool"&&(n={role:"bot",content:"",layouts:[{type:"table",data:r.parameters}],timestamp:new Date})}return n}catch{return n}}InitializeLLM(o){return E(this,arguments,function*(t,n=[],i=[]){let r={openAIKey:t};if(this.llm_model=this.openAIService.getOpenAiClient(r),i.length>0)try{this.llm_with_tools=this.openAIService.openAImodels("langchain",this.llm_model,i,this.system_prompt,this.human_prompt),this.llm_runnable=Ci.from([this.llm_with_tools.overall_prompt,this.llm_with_tools.model_with_tools]),this.finalRetrievalChain=new R9({runnable:this.llm_runnable,getMessageHistory:s=>this.chatHistory,historyMessagesKey:"history",inputMessagesKey:"input",outputMessagesKey:"output"})}catch{}else this.llm_with_tools=this.openAIService.openAImodels("langchain",this.llm_model,[],this.system_prompt,this.human_prompt),this.finalRetrievalChain=Ci.from([this.llm_with_tools.overall_prompt,this.llm_with_tools.model_with_out_tools])})}toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}toolsList(t){this.InitializeLLM(this.openAiKey(),t.open_ai_tools,t.langchain_tools)}langChainToolList(){}testTool(t){t?(this.selectedTool=t,this.formSource="tool-test",this.isMobileScreen&&(this.isSidebarOpen=!0),this.mcpElicitationService.createFormFromSchema(t.inputSchema,"Tool test")):(this.selectedTool=null,this.formSource=null)}tool_response(t){this.isMobileScreen&&(this.isSidebarOpen=!1),(t.response||t.layouts)&&this.chatMessages.push({role:"bot",content:t.response,layouts:t.layouts,timestamp:new Date}),this.selectedTool=null}tool_request(t){this.isMobileScreen&&(this.isSidebarOpen=!1),this.chatMessages.push({role:"user",content:t.request,timestamp:new Date})}onChatFormSubmitted(t){return E(this,null,function*(){console.log("tool call : ",t.toolName,t.params);let n=yield this.mcpService.callTool(t.toolName,t.params),i=Array.isArray(n?.content)?n.content.map(o=>o.text).join(`
`):JSON.stringify(n);console.log("form response : ",i),this.chatMessages.push({role:"bot",content:i,timestamp:new Date}),this.cdr.detectChanges(),this.formSource=null})}shouldShowMainElicitation(){return this.selectedTool!==null&&this.formSource!=="chat"}agentWorkflow(t){return E(this,null,function*(){if(!this.destroyed)try{this.chatMessages.push({role:"user",content:t,timestamp:new Date}),this.setLoadingState(!0),this.updateProgress(0,1);let a=new AbortController,l=yield this.finalRetrievalChain.stream({input:t,history:yield this.chatHistory.getMessages(),agent_scratchpad:[]},{configurable:{sessionId:"test"},signal:a.signal});this.activeStream=l;let c=null;this.chatMessages.push({role:"bot",content:"",timestamp:new Date});let u=this.chatMessages.length-1;try{for(var n=lt(l),i,o,r;i=!(o=yield n.next()).done;i=!1){let f=o.value;f instanceof Jo&&(c=c?c.concat(f):f,this.chatMessages[u].content=c.content,this.cdr.detectChanges())}}catch{r=[o]}finally{try{i&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r[0]}}let h=c?.tool_calls??[];this.updateProgress(0,h.length);for(let[f,m]of h.entries()){let _=m.id?m.id:`tool-call-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,y=m.name,w=m.args,C="";this.updateProgress(f+1,h.length);try{let I=yield this.mcpService.callTool(y,w);C=Array.isArray(I?.content)?I.content.map(O=>O.text).join(`
`):JSON.stringify(I);try{let O=JSON.parse(I.content[0].text);if(console.log("Extract Results : ",O),Object.keys(O).includes("layouts")){let s=O,{layouts:H}=s,j=Be(s,["layouts"]);this.chatMessages.push({role:"bot",content:"",layouts:O.layouts,timestamp:new Date})}else this.chatMessages.push({role:"bot",content:C,timestamp:new Date})}catch{}}catch(I){C=`Error: ${I}`,this.chatMessages.push({role:"bot",content:C,timestamp:new Date})}let S=new zs({tool_call_id:_,status:"success",content:C});yield this.chatHistory.addMessage(S)}}catch(a){console.error("Agent workflow failed:",a),this.chatMessages.push({role:"bot",content:"Something went wrong while processing your request.",timestamp:new Date})}finally{this.setLoadingState(!1),this.activeStream=null,this.updateProgress(0,0)}})}debugChatHistory(){return E(this,null,function*(){(yield this.chatHistory.getMessages()).forEach((n,i)=>{console.log(`[${i}] ${n._getType()}:`,{content:n.content,tool_calls:n.tool_calls,tool_call_id:n.tool_call_id,name:n.name})})})}cancelOperation(){console.log("Cancelling ongoing operation..."),this.destroyed=!0,this.isLoading=!1,this.progressPercentage=0,this.currentToolIndex=0,this.totalTools=0,this.cdr.detectChanges(),this.chatMessages.push({role:"bot",content:"Operation cancelled by user.",timestamp:new Date}),setTimeout(()=>{this.destroyed=!1},100)}hasLayoutMessages(){return this.chatMessages.some(t=>t.layouts&&(this.isTableLayout(t.layouts)||this.isButtonLayout(t.layouts)||this.isMapLayout(t.layouts)))}isTableLayout(t){return t.some(n=>n.type==="table")}isButtonLayout(t){return t.some(n=>n.type==="button")}isMapLayout(t){return t.some(n=>n.type==="map")}onLayoutSelected(t){this.activeLayout=t,this.isMobileScreen&&(this.showChatOnMobile=!1)}onLayoutClosed(){this.activeLayout=null,this.isMobileScreen&&(this.showChatOnMobile=!0)}getChatMessagesWithLayouts(){return this.chatMessages.filter(t=>t.layouts&&t.layouts.length>0)}closeElicitationModal(){this.selectedTool=null}toggleChatVisibility(){this.showChatOnMobile=!this.showChatOnMobile}onResizeDrag(t){if(!this.isMobileScreen){let n=document.querySelector(".main-content-wrapper");if(!n)return;let i=n.clientWidth,o=t.pointerPosition.x,r=n.getBoundingClientRect(),a=(o-r.left)/i*100;this.chatWidth=Math.max(20,Math.min(80,a)),this.workspaceWidth=100-this.chatWidth,this.cdr.detectChanges()}}ngAfterViewInit(){this.setupDragAndDrop()}setupDragAndDrop(){setTimeout(()=>{document.querySelector(".resize-handle")&&this.cdr.detectChanges()},100)}onNotificationsUpdate(t){this.notifications=t}onUnreadCountUpdate(t){this.unreadNotificationsCount=t}openNotificationsModal(){this.showNotificationsModal=!0}closeNotificationsModal(){this.showNotificationsModal=!1}markAsRead(t){t.read=!0,this.unreadNotificationsCount=Math.max(0,this.unreadNotificationsCount-1)}markAllAsRead(){this.notifications.forEach(t=>t.read=!0),this.unreadNotificationsCount=0}clearAllNotifications(){this.notifications=[],this.unreadNotificationsCount=0}getNotificationIcon(t){switch(t){case"success":return"check_circle";case"error":return"error";case"warning":return"warning";case"info":return"info";default:return"notifications"}}getNotificationIconClass(t){switch(t){case"success":return"success-icon";case"error":return"error-icon";case"warning":return"warning-icon";case"info":return"info-icon";default:return""}}static \u0275fac=function(n){return new(n||e)(ye(Mo),ye(F_),ye(Xu),ye(Fu),ye(dc),ye(dn))};static \u0275cmp=pe({type:e,selectors:[["app-root"]],viewQuery:function(n,i){if(n&1&&bn(xet,5),n&2){let o;Ye(o=Qe())&&(i.chatComponent=o.first)}},hostBindings:function(n,i){n&1&&Q("resize",function(){return i.onResize()},qb)},inputs:{openAiKey:[1,"openAiKey"]},outputs:{openAiKey:"openAiKeyChange"},features:[kt([Mo,dc])],decls:43,vars:24,consts:[["sidenav",""],["chatComponent",""],[1,"app-container"],[1,"sidenav-container"],[1,"sidebar",3,"openedChange","mode","opened"],[1,"sidebar-notifications"],["mat-icon-button","",1,"notification-button",3,"click"],["class","notification-badge",4,"ngIf"],[1,"content"],[1,"header"],[1,"header-left"],["mat-icon-button","",1,"menu-button",3,"click"],[1,"title"],["mat-icon-button","",1,"mobile-notification-button",3,"click"],["mat-icon-button","",1,"chat-toggle-button"],[1,"header-right"],[1,"progress-container"],[3,"tools","sendOpenAiKey","notificationsChange","unreadCountChange","displayMode"],[1,"main-content-wrapper"],["cdkDropList","",1,"chat-sidebar",3,"cdkDropListData"],["cdkDragHandle","",1,"drag-handle"],[1,"chat-container"],[1,"chat-content-wrapper"],[3,"formSubmittedFromChat","layoutSelected","messages"],[1,"input-container"],[3,"sendMessage","sendTool"],["cdkDrag","",1,"resize-handle",3,"cdkDragMoved"],["cdkDropList","",1,"workspace-area",3,"cdkDropListData"],[3,"layout"],[1,"workspace-empty-state"],[1,"modal-overlay"],[1,"notification-badge"],["mat-icon-button","",1,"chat-toggle-button",3,"click"],[1,"progress-info"],["mode","determinate",1,"progress-bar",3,"value"],[1,"loader-spinner"],["diameter","20"],["mat-icon-button","","color","warn","title","Cancel operation",1,"cancel-button",3,"click"],[3,"layoutClosed","layout"],[1,"empty-icon"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-body"],[1,"modal-header"],["mat-icon-button","",1,"close-modal-button",3,"click"],[3,"sendToolRequest","sendToolResponse","close","tool"],[1,"modal-content","notifications-modal",3,"click"],[1,"modal-actions"],["mat-button","",3,"click"],[1,"notifications-list"],[1,"empty-notifications"],[1,"notification-item",3,"unread"],[1,"notification-item"],[1,"notification-icon"],[1,"notification-content"],[1,"notification-title"],[1,"notification-message"],[1,"notification-time"],["mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","",3,"click"]],template:function(n,i){if(n&1){let o=Ge();M(0,"div",2)(1,"mat-sidenav-container",3)(2,"mat-sidenav",4,0),or("openedChange",function(s){return J(o),Sr(i.isSidebarOpen,s)||(i.isSidebarOpen=s),X(s)}),M(4,"app-sidebar")(5,"div",5)(6,"button",6),Q("click",function(){return J(o),X(i.openNotificationsModal())}),M(7,"mat-icon"),N(8,"notifications"),R(),Si(9,Iet,2,1,"span",7),R()()()(),M(10,"mat-sidenav-content",8)(11,"div",9)(12,"div",10)(13,"button",11),Q("click",function(){return J(o),X(i.toggleSidebar())}),M(14,"mat-icon"),N(15,"menu"),R()(),M(16,"h1",12),N(17),R(),M(18,"button",13),Q("click",function(){return J(o),X(i.openNotificationsModal())}),M(19,"mat-icon"),N(20,"notifications"),R(),Si(21,Met,2,1,"span",7),R(),K(22,Ret,3,1,"button",14),R(),M(23,"div",15),K(24,Oet,6,4,"div",16),M(25,"app-mcp-client",17),Q("tools",function(s){return J(o),X(i.toolsList(s))})("sendOpenAiKey",function(s){return J(o),X(i.InitializeLLM(s))})("notificationsChange",function(s){return J(o),X(i.onNotificationsUpdate(s))})("unreadCountChange",function(s){return J(o),X(i.onUnreadCountUpdate(s))}),R()()(),M(26,"div",18)(27,"div",19)(28,"div",20)(29,"mat-icon"),N(30,"drag_indicator"),R()(),M(31,"div",21)(32,"div",22)(33,"app-chatbot",23,1),Q("formSubmittedFromChat",function(s){return J(o),X(i.onChatFormSubmitted(s))})("layoutSelected",function(s){return J(o),X(i.onLayoutSelected(s))}),R()(),M(35,"div",24)(36,"app-input-box",25),Q("sendMessage",function(s){return J(o),X(i.agentWorkflow(s))})("sendTool",function(s){return J(o),X(i.testTool(s))}),R()()()(),M(37,"div",26),Q("cdkDragMoved",function(s){return J(o),X(i.onResizeDrag(s))}),R(),M(38,"div",27),K(39,Fet,1,1,"app-workspace",28)(40,Let,7,0,"div",29),R()()()(),K(41,Net,10,1,"div",30),K(42,$et,16,1,"div",30),R()}n&2&&(P(2),le("mode",i.isMobileScreen?"over":"side"),ir("opened",i.isSidebarOpen),P(7),le("ngIf",i.unreadNotificationsCount>0),P(8),nt(i.title),P(4),le("ngIf",i.unreadNotificationsCount>0),P(),Z(i.activeLayout?22:-1),P(2),Z(i.isLoading||i.progressPercentage>0?24:-1),P(),le("displayMode","header"),P(),be("mobile-chat-visible",i.showChatOnMobile)("mobile-workspace-visible",!i.showChatOnMobile),P(),Di("width",i.chatWidth,"%"),le("cdkDropListData",rg(22,Eet)),P(6),le("messages",i.chatMessages),P(5),Di("width",i.workspaceWidth,"%"),le("cdkDropListData",rg(23,Det)),P(),Z(i.activeLayout?39:40),P(2),Z(i.selectedTool?41:-1),P(),Z(i.showNotificationsModal?42:-1))},dependencies:[nA,oo,hC,kA,RA,tge,n7,ege,PA,BA,by,OA,Bf,ga,ma,oge,MA,zA,Mge,Ige,wy,NA,VA,CA,bA,mC],styles:['.app-container[_ngcontent-%COMP%]{height:100vh;display:flex;background-color:#f7f7f8;font-family:Segoe UI,Roboto,sans-serif}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 16px;background-color:#fff;border-bottom:1px solid #eaeaea;z-index:2;min-height:64px;box-sizing:border-box;flex-shrink:0;gap:16px}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1;min-width:0}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;flex-shrink:0}.menu-button[_ngcontent-%COMP%]{margin-right:12px;color:#666;flex-shrink:0}.chat-toggle-button[_ngcontent-%COMP%]{margin-left:12px;color:#666;display:none}.title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:500;color:#333;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:0}  .mcp-client-container.header-mode .header-config{display:flex;align-items:center;gap:12px;flex-wrap:wrap}  .mcp-client-container.header-mode .config-field{width:200px;font-size:.85rem}  .mcp-client-container.header-mode .mat-form-field-wrapper{padding-bottom:0}  .mcp-client-container.header-mode .mat-form-field-outline{background-color:#f5f5f5}  .mcp-client-container.header-mode .connect-button{height:40px;font-size:.85rem}.progress-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:0 8px}.progress-info[_ngcontent-%COMP%]{font-size:12px;color:#666;min-width:120px;text-align:right}.progress-bar[_ngcontent-%COMP%]{width:150px;height:8px}.loader-spinner[_ngcontent-%COMP%]{display:flex;align-items:center}.sidenav-container[_ngcontent-%COMP%]{flex:1;display:flex;height:100vh;width:100%;overflow:hidden}.sidebar[_ngcontent-%COMP%]{width:400px;background-color:#fff;display:flex;flex-direction:column;height:100%;border-right:1px solid #e5e5e6;transition:transform .3s ease,width .3s ease}.content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;height:100vh;width:100%;min-width:0;overflow:hidden}.main-content-wrapper[_ngcontent-%COMP%]{display:flex;height:calc(100vh - 64px);overflow:hidden;position:relative}.resize-handle[_ngcontent-%COMP%]{width:8px;background:#e0e0e0;cursor:col-resize;display:flex;align-items:center;justify-content:center;z-index:10;position:relative;touch-action:none;transition:background-color .2s}.resize-handle[_ngcontent-%COMP%]:hover{background:#2196f3}.resize-handle[_ngcontent-%COMP%]:after{content:"";width:2px;height:30px;background:#999;border-radius:1px}.resize-handle.cdk-drag-dragging[_ngcontent-%COMP%]{background:#2196f3}.chat-sidebar[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:#f8f9fa;position:relative;min-width:300px;max-width:80%;width:40%;overflow:hidden}.drag-handle[_ngcontent-%COMP%]{position:absolute;top:50%;left:0;transform:translateY(-50%);z-index:20;color:#999;cursor:grab;background:#fffc;border-radius:4px;padding:4px;display:flex;align-items:center;justify-content:center}.drag-handle[_ngcontent-%COMP%]:hover{color:#2196f3;background:#ffffffe6}.chat-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}.chat-content-wrapper[_ngcontent-%COMP%]{flex:1;overflow:auto;padding:16px}.input-container[_ngcontent-%COMP%]{padding:16px;background:#fff;border-top:1px solid #dee2e6}.workspace-area[_ngcontent-%COMP%]{flex:1;padding:16px;background:#f5f5f5;overflow:auto;min-width:300px;max-width:80%;width:60%}.workspace-empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:#6c757d;text-align:center}.empty-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px;opacity:.5}.workspace-empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:8px 0;color:#495057}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:800px;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 10px 30px #0003;animation:_ngcontent-%COMP%_modalSlideIn .3s ease}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #eaeaea}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600;color:#333}.close-modal-button[_ngcontent-%COMP%]{color:#666}.modal-body[_ngcontent-%COMP%]{flex:1;overflow:auto;padding:24px}@media(max-width:768px){.main-content-wrapper[_ngcontent-%COMP%]{flex-direction:column;height:calc(100vh - 56px);position:relative}.chat-sidebar[_ngcontent-%COMP%], .workspace-area[_ngcontent-%COMP%]{width:100%!important;height:100%!important;position:absolute;inset:0;transition:transform .3s ease;z-index:1;max-width:100%!important}.chat-content-wrapper[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding-bottom:120px}.chat-sidebar[_ngcontent-%COMP%]{transform:translate(0)}.workspace-area[_ngcontent-%COMP%]{transform:translate(100%)}.main-content-wrapper.mobile-chat-visible[_ngcontent-%COMP%]   .chat-sidebar[_ngcontent-%COMP%]{transform:translate(0)}.main-content-wrapper.mobile-chat-visible[_ngcontent-%COMP%]   .workspace-area[_ngcontent-%COMP%]{transform:translate(100%)}.main-content-wrapper.mobile-workspace-visible[_ngcontent-%COMP%]   .chat-sidebar[_ngcontent-%COMP%]{transform:translate(-100%)}.main-content-wrapper.mobile-workspace-visible[_ngcontent-%COMP%]   .workspace-area[_ngcontent-%COMP%]{transform:translate(0)}.chat-toggle-button[_ngcontent-%COMP%]{display:block}.resize-handle[_ngcontent-%COMP%], .drag-handle[_ngcontent-%COMP%]{display:none}.header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:8px;padding:8px 12px}.header-left[_ngcontent-%COMP%]{justify-content:space-between}.header-right[_ngcontent-%COMP%]{justify-content:space-between;flex-wrap:wrap;gap:8px}  .mcp-client-container.header-mode .header-config{flex-direction:column;align-items:stretch;gap:8px}  .mcp-client-container.header-mode .config-field{width:50%}.progress-container[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;margin-top:8px}.progress-info[_ngcontent-%COMP%]{text-align:left;min-width:auto;font-size:.85rem}.progress-bar[_ngcontent-%COMP%]{flex:1;width:auto}.title[_ngcontent-%COMP%]{font-size:1.1rem}.input-container[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;background:#fff;border-top:1px solid #dee2e6;padding:8px 12px;z-index:100;box-shadow:0 -2px 10px #0000001a}.chat-content-wrapper[_ngcontent-%COMP%]{padding-bottom:180px}}@media(max-width:480px){.header[_ngcontent-%COMP%]{min-height:56px;padding:6px 10px}.title[_ngcontent-%COMP%]{font-size:1rem}.menu-button[_ngcontent-%COMP%]{margin-right:8px;transform:scale(.9)}.chat-content-wrapper[_ngcontent-%COMP%]{padding:12px 12px 180px}.modal-content[_ngcontent-%COMP%]{width:95%;max-height:85vh}.modal-header[_ngcontent-%COMP%]{padding:16px 20px}.modal-body[_ngcontent-%COMP%]{padding:20px}.input-container[_ngcontent-%COMP%]{padding:6px 8px}}@media(min-width:769px){.chat-sidebar[_ngcontent-%COMP%]{width:calc(var(--chat-width, 40) * 1%)}.workspace-area[_ngcontent-%COMP%]{width:calc(var(--workspace-width, 60) * 1%)}.sidebar[_ngcontent-%COMP%]{width:250px!important}.mobile-notification-button[_ngcontent-%COMP%]{display:none!important}.sidebar-notifications[_ngcontent-%COMP%]{display:block;position:absolute;bottom:20px;left:0;right:0;text-align:center}}.notification-button[_ngcontent-%COMP%], .mobile-notification-button[_ngcontent-%COMP%]{position:relative}.notification-badge[_ngcontent-%COMP%]{position:absolute;top:0;right:0;background:#f44336;color:#fff;border-radius:50%;width:18px;height:18px;font-size:10px;display:flex;align-items:center;justify-content:center;font-weight:700}.notifications-modal[_ngcontent-%COMP%]{width:90%;max-width:500px;max-height:80vh}.notifications-list[_ngcontent-%COMP%]{max-height:60vh;overflow-y:auto}.notification-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px;border-bottom:1px solid #eee;transition:background-color .2s}.notification-item.unread[_ngcontent-%COMP%]{background-color:#f0f7ff;font-weight:500}.notification-item[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.notification-icon[_ngcontent-%COMP%]{margin-right:12px}.notification-content[_ngcontent-%COMP%]{flex:1}.notification-title[_ngcontent-%COMP%]{font-weight:500;margin-bottom:4px}.notification-message[_ngcontent-%COMP%]{color:#666;font-size:.9rem;margin-bottom:4px}.notification-time[_ngcontent-%COMP%]{color:#999;font-size:.8rem}.empty-notifications[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#999}.empty-notifications[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;height:48px;width:48px;margin-bottom:16px;opacity:.5}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}@supports (padding: max(0px)){.header[_ngcontent-%COMP%], .input-container[_ngcontent-%COMP%]{padding-left:max(1px,env(safe-area-inset-left));padding-right:max(1px,env(safe-area-inset-right))}.input-container[_ngcontent-%COMP%]{padding-bottom:max(8px,env(safe-area-inset-bottom))}.modal-content[_ngcontent-%COMP%]{margin:max(12px,env(safe-area-inset-top)) max(12px,env(safe-area-inset-right)) max(12px,env(safe-area-inset-bottom)) max(12px,env(safe-area-inset-left))}}'],changeDetection:0})};xB(HA,Wie).catch(e=>console.error(e));
