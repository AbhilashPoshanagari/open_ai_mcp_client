<div class="map-container">
  <div [id]="mapId" class="map"></div>
  
  <!-- Custom Feature Details Panel -->
  <div *ngIf="showPopup && selectedFeature" class="feature-panel">
    <div class="panel-header">
      <h3>{{ selectedFeature.name }}</h3>
      <button class="close-btn" (click)="selectedFeature = null">√ó</button>
    </div>
    <div class="panel-content">
      <p><strong>Type:</strong> {{ selectedFeature.type }}</p>
      
      <div *ngIf="selectedFeature?.coordinates as coords">
        <p><strong>Coordinates:</strong> 
          {{ coords[0] | number:'1.4-4' }}, 
          {{ coords[1] | number:'1.4-4' }}
        </p>
      </div>
      <div *ngIf="selectedFeature.properties && getObjectKeys(selectedFeature.properties).length > 0" class="properties">
        <h4>Properties:</h4>
        <div *ngFor="let prop of getObjectKeys(selectedFeature.properties)" class="property-item">
          <strong>{{ prop }}:</strong> {{ selectedFeature.properties[prop] }}
        </div>
      </div>
    </div>
  </div>

  <!-- Map Controls -->
  <div class="map-controls">
    <button class="control-btn" (click)="fitToFeatures()" title="Fit to features">
      <span>üìç</span>
    </button>
  </div>
</div>