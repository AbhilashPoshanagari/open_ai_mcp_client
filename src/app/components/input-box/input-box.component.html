<div class="input-container">
  <!-- Input Box with Send Button -->
  <!-- <div class="input-section"> -->
    <div class="input-box">
      <mat-form-field appearance="outline" class="full-width">
        <textarea matInput
                  cdkTextareaAutosize
                  #autosize="cdkTextareaAutosize"
                  cdkAutosizeMinRows="0.5"
                  cdkAutosizeMaxRows="10"
                  [(ngModel)]="message"
                  placeholder="Type a message..."
                  (keydown.enter)="submitMessage($event)"
                  ></textarea>
      </mat-form-field>
      <button mat-icon-button (click)="submitMessage()" [disabled]="!message.trim()" class="send-button">
        <mat-icon>send</mat-icon>
      </button>
    </div>
  <!-- </div> -->

  <!-- Action Buttons -->
  <!-- <div class="action-section"> -->
    <div class="action-buttons">
      <button 
          mat-icon-button 
          [matMenuTriggerFor]="toolsMenu" 
          class="action-button"
          matTooltip="Tools"
        >
          <mat-icon>tune</mat-icon>
        </button>
        <mat-menu #toolsMenu="matMenu">
          @for (tool of tools; track tool.name) {
            <button mat-menu-item (click)="selectTool(tool)">
              <mat-icon>build</mat-icon>
              <span>{{ tool.title }}</span>
            </button>
          }
        </mat-menu>

      <button 
        mat-icon-button 
        [matMenuTriggerFor]="resourcesMenu" 
        class="action-button"
        matTooltip="Resources"
      >
        <mat-icon>attachment</mat-icon>
      </button>
      <mat-menu #resourcesMenu="matMenu">
        @for (resource of resources; track resource.name) {
          <button mat-menu-item (click)="selectResource(resource)">
            <mat-icon>link</mat-icon>
            <span>{{ resource.title }}</span>
          </button>
        }
      </mat-menu>

      <button 
        mat-icon-button 
        [matMenuTriggerFor]="promptsMenu" 
        class="action-button"
        matTooltip="Prompts"
      >
        <mat-icon>lightbulb</mat-icon>
      </button>
      <mat-menu #promptsMenu="matMenu">
        @for (prompt of prompts; track prompt.name) {
          <button mat-menu-item (click)="selectPrompt(prompt)">
            <mat-icon>lightbulb</mat-icon>
            <span>{{ prompt.title }}</span>
          </button>
        }
      </mat-menu>
    </div>
  <!-- </div> -->

  <!-- Selected Items - Chips -->
  @if (selectedTool || selectedResource || selectedPrompt) {
    <!-- <div class="selected-section"> -->
      <div class="selected-chips">
        <!-- <div class="chips-label">Active:</div> -->
        <div class="chips-container">
          @if (selectedTool) {
            <mat-chip (removed)="clearSelection('tool', selectedTool)" class="custom-chip">
              <mat-icon class="chip-icon">tune</mat-icon>
              {{ selectedTool.title }}
              <button matChipRemove class="chip-remove">
                <mat-icon>cancel</mat-icon>
              </button>
            </mat-chip>
          }
          @if (selectedResource) {
            <mat-chip (removed)="clearSelection('resource', selectedResource)" class="custom-chip">
              <mat-icon class="chip-icon">attachment</mat-icon>
              {{ selectedResource.title }}
              <button matChipRemove class="chip-remove">
                <mat-icon>cancel</mat-icon>
              </button>
            </mat-chip>
          }
          @if (selectedPrompt) {
            <mat-chip (removed)="clearSelection('prompt', selectedPrompt)" class="custom-chip">
              <mat-icon class="chip-icon">lightbulb</mat-icon>
              {{ selectedPrompt.title }}
              <button matChipRemove class="chip-remove">
                <mat-icon>cancel</mat-icon>
              </button>
            </mat-chip>
          }
        </div>
      </div>
    <!-- </div> -->
  }
</div>